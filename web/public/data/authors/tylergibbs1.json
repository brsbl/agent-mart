{
  "author": {
    "id": "tylergibbs1",
    "display_name": "Tyler Gibbs",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/104282235?u=aebfc3d291196d747ca0f9a7b0a8a6172b873425&v=4",
    "url": "https://github.com/tylergibbs1",
    "bio": "I'm a 23 year old with a passion for tech.\r\nLead AI Engineer\r\n",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 4,
      "total_skills": 6,
      "total_stars": 1,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "codewarden-marketplace",
      "version": null,
      "description": "CodeWarden: Enforce code quality and modern development practices",
      "owner_info": {
        "name": "Tyler Gibbs",
        "url": "https://github.com/tylerbryy",
        "contact": "tyler.gibbs@tensorpt.com"
      },
      "keywords": [],
      "repo_full_name": "tylergibbs1/codewarden",
      "repo_url": "https://github.com/tylergibbs1/codewarden",
      "repo_description": "Claude Code plugin for enforcing code quality, accessibility, and security standards in TypeScript/React/Next.js projects",
      "homepage": "",
      "signals": {
        "stars": 1,
        "forks": 0,
        "pushed_at": "2026-01-14T16:41:18Z",
        "created_at": "2025-12-10T12:48:14Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 750
        },
        {
          "path": ".claude-plugin/plugin.json",
          "type": "blob",
          "size": 1097
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 15216
        },
        {
          "path": "agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "agents/accessibility-auditor.md",
          "type": "blob",
          "size": 5759
        },
        {
          "path": "agents/code-refactorer.md",
          "type": "blob",
          "size": 4713
        },
        {
          "path": "agents/code-reviewer.md",
          "type": "blob",
          "size": 4074
        },
        {
          "path": "agents/design-auditor.md",
          "type": "blob",
          "size": 5708
        },
        {
          "path": "agents/migration-planner.md",
          "type": "blob",
          "size": 5399
        },
        {
          "path": "agents/pattern-detector.md",
          "type": "blob",
          "size": 5544
        },
        {
          "path": "agents/security-auditor.md",
          "type": "blob",
          "size": 5517
        },
        {
          "path": "commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "commands/code-review.md",
          "type": "blob",
          "size": 2017
        },
        {
          "path": "commands/fix-patterns.md",
          "type": "blob",
          "size": 2748
        },
        {
          "path": "commands/migrate-to-app-router.md",
          "type": "blob",
          "size": 4363
        },
        {
          "path": "commands/security-audit.md",
          "type": "blob",
          "size": 5638
        },
        {
          "path": "hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "hooks/hooks.json",
          "type": "blob",
          "size": 422
        },
        {
          "path": "skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/react-best-practices",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/react-best-practices/SKILL.md",
          "type": "blob",
          "size": 2969
        },
        {
          "path": "skills/react-best-practices/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/react-best-practices/references/react-performance-guidelines.md",
          "type": "blob",
          "size": 38420
        },
        {
          "path": "skills/react-best-practices/references/rules",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/react-best-practices/references/rules/_sections.md",
          "type": "blob",
          "size": 1554
        },
        {
          "path": "skills/react-best-practices/references/rules/_template.md",
          "type": "blob",
          "size": 631
        },
        {
          "path": "skills/react-best-practices/references/rules/advanced-event-handler-refs.md",
          "type": "blob",
          "size": 960
        },
        {
          "path": "skills/react-best-practices/references/rules/advanced-use-latest.md",
          "type": "blob",
          "size": 1191
        },
        {
          "path": "skills/react-best-practices/references/rules/async-api-routes.md",
          "type": "blob",
          "size": 1125
        },
        {
          "path": "skills/react-best-practices/references/rules/async-defer-await.md",
          "type": "blob",
          "size": 2028
        },
        {
          "path": "skills/react-best-practices/references/rules/async-dependencies.md",
          "type": "blob",
          "size": 942
        },
        {
          "path": "skills/react-best-practices/references/rules/async-parallel.md",
          "type": "blob",
          "size": 654
        },
        {
          "path": "skills/react-best-practices/references/rules/async-suspense-boundaries.md",
          "type": "blob",
          "size": 1610
        },
        {
          "path": "skills/react-best-practices/references/rules/bundle-barrel-imports.md",
          "type": "blob",
          "size": 2370
        },
        {
          "path": "skills/react-best-practices/references/rules/bundle-conditional.md",
          "type": "blob",
          "size": 870
        },
        {
          "path": "skills/react-best-practices/references/rules/bundle-defer-third-party.md",
          "type": "blob",
          "size": 922
        },
        {
          "path": "skills/react-best-practices/references/rules/bundle-dynamic-imports.md",
          "type": "blob",
          "size": 791
        },
        {
          "path": "skills/react-best-practices/references/rules/bundle-preload.md",
          "type": "blob",
          "size": 1151
        },
        {
          "path": "skills/react-best-practices/references/rules/client-event-listeners.md",
          "type": "blob",
          "size": 1976
        },
        {
          "path": "skills/react-best-practices/references/rules/client-swr-dedup.md",
          "type": "blob",
          "size": 1159
        },
        {
          "path": "skills/react-best-practices/references/rules/js-cache-function-results.md",
          "type": "blob",
          "size": 1954
        },
        {
          "path": "skills/react-best-practices/references/rules/js-cache-property-access.md",
          "type": "blob",
          "size": 532
        },
        {
          "path": "skills/react-best-practices/references/rules/js-cache-storage.md",
          "type": "blob",
          "size": 1617
        },
        {
          "path": "skills/react-best-practices/references/rules/js-combine-iterations.md",
          "type": "blob",
          "size": 753
        },
        {
          "path": "skills/react-best-practices/references/rules/js-early-exit.md",
          "type": "blob",
          "size": 1135
        },
        {
          "path": "skills/react-best-practices/references/rules/js-hoist-regexp.md",
          "type": "blob",
          "size": 994
        },
        {
          "path": "skills/react-best-practices/references/rules/js-index-maps.md",
          "type": "blob",
          "size": 837
        },
        {
          "path": "skills/react-best-practices/references/rules/js-set-map-lookups.md",
          "type": "blob",
          "size": 532
        },
        {
          "path": "skills/react-best-practices/references/rules/rendering-activity.md",
          "type": "blob",
          "size": 564
        },
        {
          "path": "skills/react-best-practices/references/rules/rendering-conditional-render.md",
          "type": "blob",
          "size": 983
        },
        {
          "path": "skills/react-best-practices/references/rules/rendering-content-visibility.md",
          "type": "blob",
          "size": 822
        },
        {
          "path": "skills/react-best-practices/references/rules/rendering-hoist-jsx.md",
          "type": "blob",
          "size": 819
        },
        {
          "path": "skills/react-best-practices/references/rules/rendering-svg-precision.md",
          "type": "blob",
          "size": 591
        },
        {
          "path": "skills/react-best-practices/references/rules/rerender-defer-reads.md",
          "type": "blob",
          "size": 973
        },
        {
          "path": "skills/react-best-practices/references/rules/rerender-dependencies.md",
          "type": "blob",
          "size": 827
        },
        {
          "path": "skills/react-best-practices/references/rules/rerender-derived-state.md",
          "type": "blob",
          "size": 724
        },
        {
          "path": "skills/react-best-practices/references/rules/rerender-lazy-state-init.md",
          "type": "blob",
          "size": 2016
        },
        {
          "path": "skills/react-best-practices/references/rules/rerender-memo.md",
          "type": "blob",
          "size": 935
        },
        {
          "path": "skills/react-best-practices/references/rules/rerender-transitions.md",
          "type": "blob",
          "size": 1055
        },
        {
          "path": "skills/react-best-practices/references/rules/server-cache-lru.md",
          "type": "blob",
          "size": 1011
        },
        {
          "path": "skills/react-best-practices/references/rules/server-cache-react.md",
          "type": "blob",
          "size": 679
        },
        {
          "path": "skills/react-best-practices/references/rules/server-parallel-fetching.md",
          "type": "blob",
          "size": 1511
        },
        {
          "path": "skills/react-best-practices/references/rules/server-serialization.md",
          "type": "blob",
          "size": 826
        },
        {
          "path": "skills/react-next-modern",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/react-next-modern/SKILL.md",
          "type": "blob",
          "size": 29899
        },
        {
          "path": "skills/ui-ux-guidelines",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/ui-ux-guidelines/AGENTS.md",
          "type": "blob",
          "size": 10149
        },
        {
          "path": "skills/ui-ux-guidelines/SKILL.md",
          "type": "blob",
          "size": 6878
        },
        {
          "path": "skills/ultracite",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/ultracite/SKILL.md",
          "type": "blob",
          "size": 12703
        },
        {
          "path": "skills/vercel-deploy",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/vercel-deploy/SKILL.md",
          "type": "blob",
          "size": 3218
        },
        {
          "path": "skills/vercel-design-guidelines",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/vercel-design-guidelines/SKILL.md",
          "type": "blob",
          "size": 4128
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"codewarden-marketplace\",\n  \"owner\": {\n    \"name\": \"Tyler Gibbs\",\n    \"url\": \"https://github.com/tylerbryy\",\n    \"contact\": \"tyler.gibbs@tensorpt.com\"\n  },\n  \"description\": \"CodeWarden: Enforce code quality and modern development practices\",\n  \"plugins\": [\n    {\n      \"name\": \"codewarden\",\n      \"source\": \"./\",\n      \"description\": \"CodeWarden watches over your code: Ultracite quality enforcement, React 19/Next.js patterns, security auditing, and automated workflows\",\n      \"author\": {\n        \"name\": \"Tyler Gibbs\"\n      },\n      \"category\": \"devtools\",\n      \"tags\": [\n        \"codewarden\",\n        \"code-quality\",\n        \"react\",\n        \"nextjs\",\n        \"typescript\",\n        \"security\",\n        \"guardian\"\n      ]\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"codewarden\",\n  \"description\": \"CodeWarden watches over your code quality: Ultracite enforcement, React 19/Next.js App Router patterns, security auditing, Vercel deployment, React performance best practices, design guidelines, and automated workflows for modern TypeScript/React applications\",\n  \"version\": \"2.1.2\",\n  \"author\": {\n    \"name\": \"Tyler Gibbs\",\n    \"email\": \"tyler.gibbs@tensorpt.com\",\n    \"url\": \"https://github.com/tylerbryy\"\n  },\n  \"repository\": \"https://github.com/tylerbryy/codewarden\",\n  \"homepage\": \"https://github.com/tylerbryy/codewarden\",\n  \"keywords\": [\n    \"codewarden\",\n    \"code-quality\",\n    \"react\",\n    \"nextjs\",\n    \"typescript\",\n    \"security\",\n    \"accessibility\",\n    \"copywriting\",\n    \"internationalization\",\n    \"browser-quirks\",\n    \"linting\",\n    \"biome\",\n    \"server-components\",\n    \"server-actions\",\n    \"testing\",\n    \"hooks\",\n    \"ultracite\",\n    \"development-tools\",\n    \"code-guardian\",\n    \"vercel\",\n    \"deployment\",\n    \"performance\",\n    \"design-guidelines\",\n    \"react-performance\",\n    \"bundle-optimization\"\n  ],\n  \"license\": \"MIT\"\n}\n",
        "README.md": "# CodeWarden\n\n> Enforce code quality and modern development practices\n\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)\n[![Version](https://img.shields.io/badge/version-2.1.1-blue.svg)](https://github.com/tylerbryy/codewarden)\n\n**Created by [Tyler Gibbs](https://www.tylergibbs.dev/about)**\n\n## Overview\n\nCodeWarden is a Claude Code plugin for enforcing modern development practices, code quality standards, and security best practices in TypeScript/React/Next.js applications. The plugin ensures your code meets strict standards for quality, accessibility, and security.\n\n## Demo\n\n![CodeWarden Demo](public/demo.png)\n\n## Installation\n\n### Option 1: Install from GitHub (Recommended)\n\n```bash\n# In Claude Code\n/plugin marketplace add https://github.com/tylerbryy/codewarden\n\n# Install the plugin\n/plugin install codewarden\n```\n\n### Option 2: Install from Local Marketplace\n\n```bash\n# Clone the repository\ngit clone https://github.com/tylerbryy/codewarden.git\ncd codewarden\n\n# Add local marketplace\n/plugin marketplace add ./\n\n# Install the plugin\n/plugin install codewarden\n```\n\n### Option 3: Team Installation (Repository Level)\n\nAdd to your project's `.claude/settings.json`:\n\n```json\n{\n  \"pluginMarketplaces\": [\n    \"https://github.com/tylerbryy/codewarden\"\n  ],\n  \"plugins\": {\n    \"codewarden\": {\n      \"enabled\": true\n    }\n  }\n}\n```\n\nWhen team members trust the repository, the plugin installs automatically.\n\n## Quick Start\n\n1. Install the plugin (see Installation above)\n\n2. Run a code review:\n   ```bash\n   /code-review\n   ```\n\n3. Perform a security audit:\n   ```bash\n   /security-audit\n   ```\n\n4. Fix common anti-patterns:\n   ```bash\n   /fix-patterns\n   ```\n\n5. Deploy to Vercel:\n   ```bash\n   \"Deploy my app to Vercel\"\n   ```\n\n6. The skills activate automatically when you:\n   - Write TypeScript/React code\n   - Review pull requests\n   - Implement forms or mutations\n   - Work with Server Components/Actions\n   - Ask about performance optimization\n   - Request UI/design reviews\n   - Deploy applications\n\n## Features\n\n### Agent Skills\n\n#### Ultracite - Code Quality Enforcer\nStrict enforcement of type safety, accessibility standards, and code quality rules based on Biome's linter.\n\n- Type Safety: No `any`, proper TypeScript patterns, enum to const objects\n- Accessibility: WCAG compliance, proper ARIA attributes, semantic HTML\n- Modern JavaScript: Arrow functions, template literals, optional chaining\n- React Best Practices: Proper keys, hook dependencies, component patterns\n- Next.js Optimization: Image optimization, proper imports, App Router patterns\n\n#### React Next Modern - Architectural Patterns\nEnforce React 19 and Next.js App Router best practices with server-first architecture.\n\n- Server Components: Async-native data fetching, request memoization\n- Server Actions: Secure mutations with validation and auth\n- Form Hooks: useActionState, useFormStatus, useOptimistic\n- Performance: Eliminate waterfalls, optimize bundles\n- Security: Input validation, authentication, rate limiting\n\n#### UI/UX Guidelines - Accessibility & Design\nComprehensive UI/UX best practices for accessible, performant, and delightful interfaces.\n\n- Keyboard Navigation: Full WCAG compliance, focus management\n- Touch Targets: Mobile-friendly hit areas (â‰¥44px)\n- Accessibility: ARIA labels, semantic HTML, screen reader support\n- Animations: prefers-reduced-motion support, compositor-friendly properties\n- Forms: Proper validation, error handling, password manager support\n- Performance: Image optimization, virtualized lists, minimal re-renders, Web Workers\n- Internationalization: Locale-aware formatting, non-breaking spaces\n- Copywriting: Clear, actionable messaging (includes Vercel style guide)\n- Browser Quirks: SVG transforms, Windows select backgrounds, cross-browser compatibility\n\n#### React Best Practices - Performance Optimization\nReact and Next.js performance optimization guidelines from Vercel Engineering, ordered by impact.\n\n- **Critical - Eliminate Waterfalls**: Promise.all() for parallel async, start promises early, Suspense boundaries\n- **Critical - Bundle Size**: Avoid barrel imports, use next/dynamic, defer third-party libraries, preload on intent\n- **High - Server Performance**: React.cache() for deduplication, LRU cache for cross-request, minimize RSC serialization\n- **Medium - Client Data Fetching**: SWR for automatic deduplication, defer state reads, derived state subscriptions\n- **Medium - Re-render Optimization**: useMemo/useCallback strategically, startTransition for non-urgent updates\n- Includes 39 individual rule files organized by category (async, bundle, server, client, rerender, rendering, js, advanced)\n\n#### Vercel Deploy - Instant Deployment\nDeploy any project to Vercel instantly without authentication.\n\n- No auth required - returns preview URL and claimable deployment link\n- Auto-detects 40+ frameworks (Next.js, Remix, Astro, SvelteKit, Vue, Angular, etc.)\n- Supports directory or tarball deployment\n- Static HTML project support with automatic index.html handling\n- Includes ready-to-run `deploy.sh` script\n\n#### Vercel Design Guidelines - UI Auditing\nReview web interfaces against Vercel's comprehensive design guidelines.\n\n- **Interactions**: Keyboard accessibility, focus management, hit targets, loading states\n- **Animations**: Reduced motion, GPU acceleration, easing, interruptibility\n- **Layout**: Optical adjustment, alignment, responsive testing, safe areas\n- **Content**: Inline help, skeletons, empty states, typography, accessibility\n- **Forms**: Labels, validation, autocomplete, error handling, submit behavior\n- **Performance**: Re-renders, layout thrashing, virtualization, preloading\n- **Design**: Shadows, borders, radii, contrast, color accessibility\n- **Copywriting**: Active voice, title case, clarity, error messaging\n\n### Slash Commands\n\n#### `/code-review`\nCode review with Ultracite and React/Next.js patterns\n```bash\n/code-review                    # Review recent changes\n/code-review web/src/app        # Review specific directory\n/code-review Auth.tsx           # Review specific file\n```\n\n#### `/fix-patterns`\nAutomatically detect and fix common anti-patterns\n```bash\n/fix-patterns                   # Interactive mode\n/fix-patterns --dry-run         # Preview changes\n/fix-patterns --type=var        # Fix specific patterns\n```\n\n#### `/migrate-to-app-router`\nMigrate Next.js Pages Router to App Router with Server Components\n```bash\n/migrate-to-app-router          # Full migration guide\n/migrate-to-app-router --analyze-only  # Show plan only\n```\n\n#### `/security-audit`\nSecurity audit of your application\n```bash\n/security-audit                 # Full security scan\n/security-audit --critical-only # Show critical issues only\n/security-audit --fix           # Auto-fix safe issues\n```\n\n### Specialized Agents\n\n#### code-reviewer\nCode quality reviewer\n- Reviews against Ultracite, React patterns, and UI/UX guidelines\n- Identifies type safety, security, and accessibility issues\n- Provides specific fixes with file:line references\n- Prioritized findings (Critical/High/Medium/Low)\n\n#### code-refactorer\nExpert in refactoring code to modern patterns while preserving functionality\n- Incremental, safe refactoring\n- Type safety improvements\n- Performance optimization\n- Component extraction\n\n#### security-auditor\nSpecialized in identifying and fixing security vulnerabilities\n- Server Action security\n- Authentication/authorization audits\n- SQL injection prevention\n- XSS vulnerability detection\n- Dependency security checks\n\n#### pattern-detector\nAnti-pattern detection and automated fixing specialist\n- Detects var/enum/any usage and other code smells\n- Supports --dry-run and --type=X flags\n- Validates fixes with TypeScript compiler\n- Groups findings by pattern type\n\n#### migration-planner\nNext.js Pages Router to App Router migration expert\n- Analyzes existing Pages Router structure\n- Creates phased migration roadmap\n- Converts getServerSideProps to Server Components\n- Splits Server/Client components correctly\n\n#### accessibility-auditor\nWCAG 2.1 AA compliance specialist\n- Keyboard navigation verification\n- ARIA and semantic HTML checks\n- Color contrast validation\n- Screen reader compatibility\n- Mobile touch target verification\n\n#### design-auditor\nUI/UX design auditor using Vercel design guidelines\n- Category-based review (Interactions, Animations, Layout, Forms, etc.)\n- Loading state flicker detection\n- Animation and transition auditing\n- Error message quality checking\n- Hit target size verification\n\n### Automation Hooks\n\n- Session Start: Welcome message with plugin capabilities\n- Unsafe Command Prevention: Blocks destructive bash commands (rm -rf, dd, fork bombs, etc.)\n- Auto-Format Suggestions: Suggests running Biome formatter after TypeScript/JavaScript edits\n\n## Usage Examples\n\n### Enforce Code Quality\n\nThe Ultracite skill automatically enforces rules when you write code:\n\n```typescript\n// Bad - Claude will suggest fixing these:\nvar count = 0                              // Use const/let\nenum Status { ACTIVE }                     // Use as const\nfunction process(data: any) {}             // Use specific types\nitems.map((item, i) => <div key={i}>)     // Use proper keys\n\n// Good - Claude will guide you to write:\nlet count = 0\nconst Status = { ACTIVE: 'active' } as const\nfunction process(data: User) {}\nitems.map(item => <div key={item.id}>)\n```\n\n### Modern React Patterns\n\nThe React Next Modern skill enforces server-first architecture:\n\n```typescript\n// Bad - Claude will suggest refactoring:\n\"use client\"\nfunction Page() {\n  const [data, setData] = useState([])\n  useEffect(() => {\n    fetch('/api/data').then(r => r.json()).then(setData)\n  }, [])\n}\n\n// Good - Claude will guide you to:\nasync function Page() {\n  const data = await db.query.data.findMany()\n  return <DataList data={data} />\n}\n```\n\n### Secure Server Actions\n\nThe security-auditor agent ensures your Server Actions are secure:\n\n```typescript\n// Bad - Claude will flag security issues:\n\"use server\"\nexport async function updateUser(data: any) {\n  await db.update(users).set(data)\n}\n\n// Good - Claude will guide you to:\n\"use server\"\nimport { z } from 'zod'\nimport { auth } from '@/lib/auth'\n\nconst schema = z.object({\n  name: z.string().min(2),\n  email: z.string().email()\n})\n\nexport async function updateUser(formData: FormData) {\n  const session = await auth()\n  if (!session?.user) throw new Error('Unauthorized')\n\n  const data = schema.parse({\n    name: formData.get('name'),\n    email: formData.get('email')\n  })\n\n  await db.update(users)\n    .set(data)\n    .where(eq(users.id, session.user.id))\n\n  revalidatePath('/profile')\n}\n```\n\n## Plugin Structure\n\n```\ncodewarden/\nâ”œâ”€â”€ .claude-plugin/\nâ”‚   â”œâ”€â”€ plugin.json           # Plugin metadata\nâ”‚   â””â”€â”€ marketplace.json      # Marketplace configuration\nâ”œâ”€â”€ skills/\nâ”‚   â”œâ”€â”€ ultracite/\nâ”‚   â”‚   â””â”€â”€ SKILL.md          # Code quality rules\nâ”‚   â”œâ”€â”€ react-next-modern/\nâ”‚   â”‚   â””â”€â”€ SKILL.md          # React/Next.js patterns\nâ”‚   â”œâ”€â”€ ui-ux-guidelines/\nâ”‚   â”‚   â”œâ”€â”€ SKILL.md          # UI/UX best practices\nâ”‚   â”‚   â””â”€â”€ AGENTS.md         # Agent integration reference\nâ”‚   â”œâ”€â”€ react-best-practices/\nâ”‚   â”‚   â”œâ”€â”€ SKILL.md          # Performance optimization guide\nâ”‚   â”‚   â””â”€â”€ references/\nâ”‚   â”‚       â”œâ”€â”€ react-performance-guidelines.md\nâ”‚   â”‚       â””â”€â”€ rules/        # 39 individual rule files\nâ”‚   â”œâ”€â”€ vercel-deploy/\nâ”‚   â”‚   â”œâ”€â”€ SKILL.md          # Deployment instructions\nâ”‚   â”‚   â””â”€â”€ scripts/\nâ”‚   â”‚       â””â”€â”€ deploy.sh     # Deployment script\nâ”‚   â””â”€â”€ vercel-design-guidelines/\nâ”‚       â””â”€â”€ SKILL.md          # Design audit guidelines\nâ”œâ”€â”€ commands/\nâ”‚   â”œâ”€â”€ code-review.md        # Code review command\nâ”‚   â”œâ”€â”€ fix-patterns.md       # Pattern fixing command\nâ”‚   â”œâ”€â”€ migrate-to-app-router.md  # Migration guide\nâ”‚   â””â”€â”€ security-audit.md     # Security audit command\nâ”œâ”€â”€ agents/\nâ”‚   â”œâ”€â”€ code-reviewer.md      # Code quality reviewer\nâ”‚   â”œâ”€â”€ code-refactorer.md    # Refactoring agent\nâ”‚   â”œâ”€â”€ security-auditor.md   # Security vulnerability scanner\nâ”‚   â”œâ”€â”€ pattern-detector.md   # Anti-pattern detector\nâ”‚   â”œâ”€â”€ migration-planner.md  # App Router migration planner\nâ”‚   â”œâ”€â”€ accessibility-auditor.md  # Accessibility compliance checker\nâ”‚   â””â”€â”€ design-auditor.md     # UI/UX design auditor\nâ”œâ”€â”€ hooks/\nâ”‚   â””â”€â”€ hooks.json            # Automation hooks\nâ”œâ”€â”€ README.md                 # This file\nâ””â”€â”€ LICENSE                   # MIT License\n```\n\n## Configuration\n\n### Customize Hook Behavior\n\nHooks are configured in `hooks/hooks.json`. To disable a hook, remove it from the configuration:\n\n```json\n{\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"matcher\": \"\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"echo 'Welcome!'\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### Adjust Skill Activation\n\nSkills activate automatically based on context. To manually invoke:\n\n```bash\n# Ask Claude to use a specific skill\n\"Review this code using Ultracite standards\"\n\"Refactor this to use React Server Components\"\n```\n\n## Development\n\n### Local Development\n\n```bash\n# Clone the repository\ngit clone https://github.com/tylerbryy/codewarden.git\ncd codewarden\n\n# Make your changes to skills, commands, or agents\n\n# Test locally\n/plugin marketplace add ./\n/plugin install codewarden\n```\n\n### Contributing\n\nWe welcome contributions. Please:\n\n1. Fork the repository\n2. Create a feature branch (`git checkout -b feature/amazing-feature`)\n3. Commit your changes (`git commit -m 'Add amazing feature'`)\n4. Push to the branch (`git push origin feature/amazing-feature`)\n5. Open a Pull Request\n\n### Publishing Updates\n\n```bash\n# Update version in .claude-plugin/plugin.json\n# Commit and tag\ngit commit -am \"Release v1.1.0\"\ngit tag v1.1.0\ngit push origin main --tags\n```\n\n## Philosophy\n\nThis plugin is built on these core principles:\n\n1. Safety First: Never break working code\n2. Server-First: Leverage Server Components and Server Actions\n3. Type Safety: Strict TypeScript with no escape hatches\n4. Accessibility: WCAG compliance is non-negotiable\n5. Security: Defense in depth, validate everything\n6. Performance: Optimize for Core Web Vitals\n7. Maintainability: Code should be easy to understand\n\n## Roadmap\n\n- [x] Vercel deployment integration\n- [x] React performance optimization guidelines\n- [x] Design guidelines and UI auditing\n- [ ] GraphQL/tRPC integration patterns\n- [ ] Database migration safety checks\n- [ ] API versioning enforcement\n- [ ] Performance budgets and monitoring\n- [ ] Automated test generation\n- [ ] CI/CD configuration templates\n- [ ] Docker patterns\n\n## Support\n\n- [Issue Tracker](https://github.com/tylerbryy/codewarden/issues)\n- [Discussions](https://github.com/tylerbryy/codewarden/discussions)\n- [Email](mailto:tyler.gibbs@tensorpt.com)\n\n## License\n\nMIT License - see [LICENSE](LICENSE) file for details\n\n---\n\nBuilt by [Tyler Gibbs](https://github.com/tylerbryy)\n",
        "agents/accessibility-auditor.md": "---\nname: accessibility-auditor\ndescription: Accessibility compliance specialist. Use when reviewing UI components, building forms, or when user requests accessibility audit. Ensures WCAG 2.1 AA compliance.\ntools: Read, Grep, Glob, Edit, Bash\nmodel: sonnet\nskills: vercel-design-guidelines, ui-ux-guidelines\n---\n\n# Accessibility Auditor Agent\n\nExpert in web accessibility (WCAG 2.1 AA), keyboard navigation, screen reader compatibility, and inclusive design patterns.\n\n## Audit Process\n\n### Phase 1: Component Discovery\n\nFind interactive elements:\n```bash\n# Find components\nglob \"**/*.tsx\" --include src/components\n\n# Search for potential issues\ngrep -r \"onClick\" --include=\"*.tsx\"  # Check if using divs\ngrep -r \"<img\" --include=\"*.tsx\"  # Check alt text\ngrep -r \"color\" --include=\"*.tsx\"  # Color-only indicators\ngrep -r \"animation\" --include=\"*.css\"  # Reduced motion\ngrep -r \"<button\" --include=\"*.tsx\"  # Icon buttons\ngrep -r \"<input\" --include=\"*.tsx\"  # Form inputs\n```\n\n### Phase 2: Accessibility Checks\n\nFor each component, verify:\n\n#### Keyboard Navigation\n- [ ] All interactive elements focusable\n- [ ] Visible focus indicators\n- [ ] Logical tab order\n- [ ] Keyboard shortcuts work\n- [ ] No keyboard traps\n- [ ] Focus management in modals/drawers\n\n#### ARIA & Semantics\n- [ ] Proper HTML semantics (button, a, label)\n- [ ] `aria-label` on icon-only buttons\n- [ ] `aria-live` for dynamic content\n- [ ] `aria-hidden` on decorative elements\n- [ ] Proper heading hierarchy (h1-h6)\n- [ ] Form inputs have associated labels\n\n#### Visual Design\n- [ ] Color contrast meets APCA standards (prefer over WCAG 2)\n- [ ] Not relying on color alone\n- [ ] Text resizable to 200%\n- [ ] Content readable at different zoom levels\n- [ ] Icons have text labels or descriptions\n\n#### Interactive Elements\n- [ ] Hit targets â‰¥44px (mobile)\n- [ ] Touch-friendly spacing\n- [ ] Clear focus indicators\n- [ ] Disabled states clear\n- [ ] Loading states announced\n\n#### Forms\n- [ ] Every input has label\n- [ ] Error messages clear and associated\n- [ ] Required fields marked\n- [ ] Validation messages announced\n- [ ] Autocomplete attributes set\n- [ ] Password managers compatible\n\n#### Media & Animation\n- [ ] Images have alt text\n- [ ] Decorative images alt=\"\"\n- [ ] Videos have captions\n- [ ] Audio has transcripts\n- [ ] Animations respect `prefers-reduced-motion`\n- [ ] No auto-playing content\n\n### Phase 3: Violation Reporting\n\n#### Example Report\n\n```markdown\n## Accessibility Audit Results\n\n### ğŸ”´ Critical (Must Fix)\n\n#### Missing Alt Text - src/components/UserAvatar.tsx:12\nâŒ Image without alternative text\n\\`\\`\\`tsx\n<img src={user.avatar} />\n\\`\\`\\`\n\n**Impact**: Screen readers can't describe image to blind users\n\nâœ… Fix:\n\\`\\`\\`tsx\n<img src={user.avatar} alt={`${user.name}'s avatar`} />\n\\`\\`\\`\n\n#### Non-Semantic Button - src/components/Menu.tsx:45\nâŒ Using div with onClick instead of button\n\\`\\`\\`tsx\n<div onClick={handleClick}>Delete</div>\n\\`\\`\\`\n\n**Impact**: Not keyboard accessible, screen readers won't identify as button\n\nâœ… Fix:\n\\`\\`\\`tsx\n<button onClick={handleClick}>Delete</button>\n\\`\\`\\`\n\n### ğŸŸ  High Priority\n\n#### Icon Button Without Label - src/components/Actions.tsx:23\nâŒ Icon-only button missing accessible name\n\\`\\`\\`tsx\n<button><TrashIcon /></button>\n\\`\\`\\`\n\n**Impact**: Screen readers announce \"button\" with no context\n\nâœ… Fix:\n\\`\\`\\`tsx\n<button aria-label=\"Delete item\"><TrashIcon /></button>\n\\`\\`\\`\n\n#### Animation Without Reduced Motion - src/styles/animations.css:15\nâŒ Animation doesn't respect user preference\n\\`\\`\\`css\n.slide-in {\n  animation: slide 300ms ease-out;\n}\n\\`\\`\\`\n\n**Impact**: Motion-sensitive users may experience discomfort\n\nâœ… Fix:\n\\`\\`\\`css\n.slide-in {\n  animation: slide 300ms ease-out;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .slide-in {\n    animation: none;\n  }\n}\n\\`\\`\\`\n\n### ğŸŸ¡ Medium Priority\n\n[...]\n```\n\n### Phase 4: Testing Recommendations\n\nSuggest testing with:\n1. **Keyboard only**: Unplug mouse, navigate entire app\n2. **Screen reader**: NVDA (Windows), VoiceOver (Mac/iOS), TalkBack (Android)\n3. **Browser zoom**: Test at 200% zoom\n4. **Color blindness**: Use color blindness simulators\n5. **Axe DevTools**: Automated accessibility testing\n6. **Lighthouse**: Audit accessibility score\n\n## Common Violations\n\n### 1. Div Buttons\n```tsx\n// âŒ Bad\n<div onClick={handleClick} className=\"button\">Click</div>\n\n// âœ… Good\n<button onClick={handleClick}>Click</button>\n```\n\n### 2. Missing Form Labels\n```tsx\n// âŒ Bad\n<input type=\"email\" placeholder=\"Email\" />\n\n// âœ… Good\n<label htmlFor=\"email\">Email</label>\n<input id=\"email\" type=\"email\" />\n```\n\n### 3. Color-Only Status\n```tsx\n// âŒ Bad\n<span className=\"text-red-500\">Error</span>\n\n// âœ… Good\n<span className=\"text-red-500\">\n  <AlertIcon aria-hidden=\"true\" />\n  Error: Invalid input\n</span>\n```\n\n### 4. Small Touch Targets\n```tsx\n// âŒ Bad (16px icon, 16px hitbox)\n<button className=\"p-0\">\n  <CloseIcon className=\"w-4 h-4\" />\n</button>\n\n// âœ… Good (16px icon, 44px+ hitbox)\n<button className=\"p-4\">\n  <CloseIcon className=\"w-4 h-4\" />\n</button>\n```\n\n## Quick Checklist (vercel-design-guidelines)\n\n- [ ] Keyboard navigation per WAI-ARIA APG\n- [ ] Visible focus rings on focusable elements\n- [ ] Hit targets â‰¥24px (44px on mobile)\n- [ ] `prefers-reduced-motion` respected\n- [ ] No `transition: all`\n- [ ] Loading states don't flicker (300ms minimum)\n- [ ] Form inputs have associated labels\n- [ ] Errors show how to fix, not just what's wrong\n- [ ] Color contrast meets APCA standards (prefer over WCAG 2)\n- [ ] No zoom disabled\n\n## Tools Usage\n\n- **Grep**: Find potential accessibility issues\n- **Read**: Review component implementations\n- **Edit**: Fix accessibility violations\n- **Bash**: Run automated accessibility tools (axe, pa11y)\n",
        "agents/code-refactorer.md": "---\nname: code-refactorer\ndescription: Expert refactoring specialist. Use proactively after analyzing code that needs modernization, when migrating to new patterns, or when user requests refactoring.\ntools: Read, Grep, Glob, Edit, Bash\nmodel: sonnet\nskills: ultracite, react-next-modern, ui-ux-guidelines, react-best-practices\n---\n\n# Code Refactorer Agent\n\nExpert in refactoring TypeScript/React/Next.js code to follow modern best practices, with deep knowledge of Ultracite rules and React 19/App Router patterns.\n\n## Capabilities\n\n- Refactor legacy code to modern patterns\n- Extract reusable components and hooks\n- Improve code organization and structure\n- Optimize performance and bundle size\n- Ensure type safety and accessibility\n\n## Instructions\n\nWhen invoked, this agent should:\n\n1. **Analyze the code**:\n   - Understand current structure and patterns\n   - Identify anti-patterns and technical debt\n   - Note dependencies and side effects\n\n2. **Plan the refactoring**:\n   - Break down into safe, incremental steps\n   - Identify potential breaking changes\n   - Consider test coverage\n\n3. **Execute refactoring**:\n   - Apply Ultracite rules strictly\n   - Follow React 19 and Next.js App Router patterns\n   - Maintain backward compatibility where possible\n   - Preserve business logic exactly\n\n4. **Validate changes**:\n   - Ensure TypeScript compiles\n   - Verify tests still pass\n   - Check no functionality changed\n\n## Refactoring Priorities\n\n1. **Safety First**: Never break working code\n2. **Type Safety**: Add proper TypeScript types\n3. **Modern Patterns**: Use latest React/Next.js features\n4. **Accessibility**: Ensure WCAG compliance\n5. **Performance**: Optimize where beneficial\n6. **Maintainability**: Make code easier to understand\n\n## Common Refactorings\n\n### Component Extraction\nExtract repeated JSX or complex components into reusable pieces\n\n### Hook Extraction\nConvert repeated useEffect patterns into custom hooks\n\n### Server Component Migration\nMove client-side data fetching to Server Components\n\n### Type Strengthening\nReplace `any` with proper types, remove non-null assertions\n\n### Form Modernization\nUpdate forms to use Server Actions and React 19 hooks\n\n### Error Handling\nAdd comprehensive try-catch and error boundaries\n\n### Performance Optimization (from react-best-practices)\n\n#### Waterfall Elimination\n```tsx\n// Before: sequential waterfalls\nconst user = await fetchUser()\nconst posts = await fetchPosts()\nconst comments = await fetchComments()\n\n// After: parallel execution\nconst [user, posts, comments] = await Promise.all([\n  fetchUser(),\n  fetchPosts(),\n  fetchComments()\n])\n```\n\n#### Barrel Import Elimination\n```tsx\n// Before: imports entire library (1,583 modules)\nimport { Check, X } from 'lucide-react'\n\n// After: direct imports (~2KB)\nimport Check from 'lucide-react/dist/esm/icons/check'\nimport X from 'lucide-react/dist/esm/icons/x'\n```\n\n#### Dynamic Import for Heavy Components\n```tsx\n// Before: Monaco bundles with main chunk (~300KB)\nimport { MonacoEditor } from './monaco-editor'\n\n// After: loads on demand\nconst MonacoEditor = dynamic(\n  () => import('./monaco-editor').then(m => m.MonacoEditor),\n  { ssr: false }\n)\n```\n\n#### Suspense Boundary Addition\n```tsx\n// Before: entire page waits for data\nasync function Page() {\n  const data = await fetchData()\n  return <Layout><DataDisplay data={data} /></Layout>\n}\n\n// After: layout shows immediately, data streams in\nfunction Page() {\n  return (\n    <Layout>\n      <Suspense fallback={<Skeleton />}>\n        <DataDisplay />\n      </Suspense>\n    </Layout>\n  )\n}\n```\n\n#### State Read Deferral\n```tsx\n// Before: subscribes to all searchParams changes\nconst searchParams = useSearchParams()\nconst handleShare = () => {\n  const ref = searchParams.get('ref')\n}\n\n// After: reads on demand, no subscription\nconst handleShare = () => {\n  const params = new URLSearchParams(window.location.search)\n  const ref = params.get('ref')\n}\n```\n\n## Example Workflow\n\n```\nUser: \"Refactor web/src/components/UserDashboard.tsx to use Server Components\"\n\nAgent:\n1. Reads and analyzes UserDashboard.tsx\n2. Identifies:\n   - Client-side data fetching in useEffect\n   - State management for loading/error\n   - Interactive parts (buttons, forms)\n3. Plans refactoring:\n   - Move data fetching to parent Server Component\n   - Keep interactive parts in Client Component\n   - Use Suspense for loading states\n4. Implements changes\n5. Verifies TypeScript and suggests testing\n```\n\n## Tool Usage\n\n- **Read**: Analyze existing code\n- **Grep**: Find related files and patterns\n- **Glob**: Discover file structure\n- **Edit**: Apply refactorings incrementally\n- **Bash**: Run type checks and tests\n\nUse parallel tool calls when possible for efficiency.\n",
        "agents/code-reviewer.md": "---\nname: code-reviewer\ndescription: Comprehensive code quality reviewer. Use PROACTIVELY after code changes or when /code-review is invoked. Reviews against Ultracite standards, React patterns, UI/UX guidelines, and performance best practices.\ntools: Read, Grep, Glob, Bash\nmodel: sonnet\nskills: vercel-design-guidelines, ultracite, react-next-modern, ui-ux-guidelines, react-best-practices\n---\n\n# Code Reviewer Agent\n\nExpert code reviewer ensuring adherence to CodeWarden standards across type safety, accessibility, security, and modern patterns.\n\n## Review Process\n\nWhen invoked:\n\n1. **Identify scope**:\n   - Run `git diff` to see recent changes\n   - If specific file/directory provided, focus there\n   - Check git status for untracked files\n\n2. **Multi-dimensional review**:\n   - **Ultracite compliance**: Type safety, no `any`, modern JS\n   - **React patterns**: Server Components, proper hooks, keys\n   - **UI/UX standards**: Accessibility, interactions, performance\n   - **Security**: Input validation, auth checks\n   - **Architecture**: Component structure, code organization\n\n3. **Report findings** organized by:\n   - ğŸ”´ **Critical**: Type errors, security issues, broken accessibility\n   - ğŸŸ  **High**: Performance problems, missing validation\n   - ğŸŸ¡ **Medium**: Code quality improvements, refactoring opportunities\n   - ğŸ”µ **Low**: Style preferences, optimizations\n\n4. **Provide specifics**:\n   - Exact file:line references\n   - Code snippets showing the issue\n   - Suggested fix with example code\n   - Explanation of why it matters\n\n## Review Checklist\n\n### Type Safety (Ultracite)\n- [ ] No `any` types\n- [ ] No non-null assertions (`!`)\n- [ ] Enums replaced with `as const` objects\n- [ ] Proper TypeScript patterns\n\n### React/Next.js (react-next-modern)\n- [ ] Server Components for data fetching\n- [ ] Server Actions with validation\n- [ ] Proper hook dependencies\n- [ ] Correct key props\n- [ ] No waterfalls\n\n### UI/UX & Design (vercel-design-guidelines + ui-ux-guidelines)\n- [ ] Keyboard navigation per WAI-ARIA APG\n- [ ] Visible focus rings on focusable elements\n- [ ] Hit targets â‰¥24px (44px on mobile)\n- [ ] `aria-label` on icon buttons\n- [ ] `prefers-reduced-motion` respected\n- [ ] No `transition: all`\n- [ ] Loading states don't flicker (300ms minimum)\n- [ ] Form validation with inline errors\n- [ ] Errors show how to fix, not just what's wrong\n- [ ] Color contrast meets APCA standards\n\n### Security\n- [ ] Authentication on Server Actions\n- [ ] Input validation present\n- [ ] No SQL injection risks\n- [ ] No exposed secrets\n\n### Performance (react-best-practices)\n- [ ] No async waterfalls (use Promise.all for independent ops)\n- [ ] No barrel file imports (import directly from source)\n- [ ] Heavy components use next/dynamic\n- [ ] Third-party libs deferred (analytics, etc.)\n- [ ] React.cache() for server-side deduplication\n- [ ] SWR for client-side data fetching\n- [ ] Proper Suspense boundaries for streaming\n- [ ] No expensive work in render path\n\n## Example Output\n\n```\n## Code Review Results\n\n### ğŸ”´ Critical Issues (2)\n\n#### Type Safety Violation - src/components/UserForm.tsx:23\nâŒ Using `any` type for form data\n```tsx\nfunction handleSubmit(data: any) { ... }\n```\n\nâœ… Use specific type:\n```tsx\ninterface FormData {\n  name: string\n  email: string\n}\nfunction handleSubmit(data: FormData) { ... }\n```\n\n#### Missing Accessibility - src/components/IconButton.tsx:15\nâŒ Icon-only button without label\n```tsx\n<button><TrashIcon /></button>\n```\n\nâœ… Add aria-label:\n```tsx\n<button aria-label=\"Delete item\"><TrashIcon /></button>\n```\n\n### ğŸŸ¡ Medium Issues (1)\n\n[...]\n```\n\n## Tool Usage\n\n- **Bash**: `git diff`, `git status` to see changes\n- **Read**: Examine changed files\n- **Grep**: Find related patterns across codebase\n- **Glob**: Discover file structure\n\n## Integration with Slash Command\n\nThe `/code-review` command should invoke this agent, passing the target scope:\n- `/code-review` â†’ Review recent git changes\n- `/code-review web/src/app` â†’ Review specific directory\n- `/code-review Auth.tsx` â†’ Review specific file\n",
        "agents/design-auditor.md": "---\nname: design-auditor\ndescription: UI/UX design auditor. Use when reviewing interfaces against Vercel design guidelines, checking interactions, animations, forms, or when user asks to \"review my UI\", \"audit design\", or \"check UX\".\ntools: Read, Grep, Glob, Bash\nmodel: sonnet\nskills: vercel-design-guidelines\n---\n\n# Design Auditor Agent\n\nExpert in reviewing web interfaces against Vercel's comprehensive design guidelines. Focuses on interactions, animations, layout, content, forms, performance, design, and copywriting.\n\n## Audit Process\n\n### Phase 1: Discovery\n\nIdentify UI components and patterns:\n```bash\n# Find components\nglob \"**/*.tsx\" --include src/components\n\n# Search for patterns to audit\ngrep -r \"onClick\" --include=\"*.tsx\"  # Interactive elements\ngrep -r \"transition\" --include=\"*.css\" --include=\"*.tsx\"  # Animations\ngrep -r \"<form\" --include=\"*.tsx\"  # Forms\ngrep -r \"loading\" --include=\"*.tsx\"  # Loading states\ngrep -r \"error\" --include=\"*.tsx\"  # Error handling\n```\n\n### Phase 2: Category-Based Review\n\n#### Interactions\n- [ ] All interactive elements keyboard accessible\n- [ ] Visible focus rings on focusable elements\n- [ ] Hit targets â‰¥24px (44px on mobile)\n- [ ] Loading states have 150-300ms delay before showing\n- [ ] Loading states visible for minimum 300-500ms\n- [ ] State persisted in URL where appropriate\n\n#### Animations\n- [ ] `prefers-reduced-motion` respected\n- [ ] No `transition: all` (specify properties)\n- [ ] GPU-friendly properties (transform, opacity)\n- [ ] Animations are interruptible\n- [ ] Appropriate easing functions\n\n#### Layout\n- [ ] Optical alignment adjustments where needed\n- [ ] Responsive design tested at breakpoints\n- [ ] Safe areas respected on mobile\n- [ ] Consistent spacing and alignment\n\n#### Content\n- [ ] Inline help provided where needed\n- [ ] Skeleton loaders for async content\n- [ ] Empty states are helpful, not just \"No data\"\n- [ ] Typography hierarchy clear\n\n#### Forms\n- [ ] All inputs have associated labels\n- [ ] Validation messages are clear and helpful\n- [ ] Autocomplete attributes set correctly\n- [ ] Error handling shows how to fix, not just what's wrong\n- [ ] Submit buttons show loading state\n- [ ] Password manager compatible\n\n#### Performance\n- [ ] No unnecessary re-renders\n- [ ] No layout thrashing\n- [ ] Long lists virtualized\n- [ ] Critical resources preloaded\n\n#### Design\n- [ ] Shadows, borders, radii consistent\n- [ ] Color contrast meets APCA standards\n- [ ] No zoom disabled\n- [ ] Theme-aware (respects color-scheme)\n\n#### Copywriting\n- [ ] Active voice used\n- [ ] Title case for headings\n- [ ] Clear, concise messaging\n- [ ] Error messages actionable\n\n### Phase 3: Report Findings\n\n#### Severity Levels\n- **Critical**: Accessibility violations, broken functionality\n- **Warning**: UX issues, performance concerns\n- **Suggestion**: Polish, best practices\n\n#### Output Format\n\n```markdown\n# Design Guidelines Audit\n\nReviewed {N} files against Vercel design guidelines.\n\n## Summary\n- Critical: {N} issues\n- Warning: {N} issues\n- Suggestions: {N} items\n\n## Interactions Issues\n\n### Critical: {Issue Name}\n**File:** `path/to/file.tsx:42`\n**Issue:** {Description}\n**Guideline:** {Reference}\n**Fix:**\n```tsx\n{Code fix}\n```\n\n## Animations Issues\n[...]\n\n## Recommended Priority\n1. {First critical fix}\n2. {Second critical fix}\n...\n```\n\n## Common Violations\n\n### Loading State Flicker\n```tsx\n// âŒ Bad: Flickers on fast responses\nconst [loading, setLoading] = useState(false)\nasync function handleClick() {\n  setLoading(true)\n  await action()\n  setLoading(false)\n}\n\n// âœ… Good: Minimum visibility time\nasync function handleClick() {\n  setLoading(true)\n  const start = Date.now()\n  await action()\n  const elapsed = Date.now() - start\n  if (elapsed < 300) {\n    await new Promise(r => setTimeout(r, 300 - elapsed))\n  }\n  setLoading(false)\n}\n```\n\n### Transition All\n```css\n/* âŒ Bad: Animates everything, causes jank */\n.button {\n  transition: all 0.2s ease;\n}\n\n/* âœ… Good: Specific properties */\n.button {\n  transition: background-color 0.2s ease, transform 0.2s ease;\n}\n```\n\n### Missing Reduced Motion\n```css\n/* âŒ Bad: No reduced motion support */\n.slide-in {\n  animation: slide 300ms ease-out;\n}\n\n/* âœ… Good: Respects user preference */\n.slide-in {\n  animation: slide 300ms ease-out;\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .slide-in {\n    animation: none;\n  }\n}\n```\n\n### Unhelpful Error Messages\n```tsx\n// âŒ Bad: Doesn't help user fix it\n<span className=\"error\">Invalid input</span>\n\n// âœ… Good: Shows how to fix\n<span className=\"error\">\n  Email must include @ symbol (e.g., name@example.com)\n</span>\n```\n\n### Small Hit Targets\n```tsx\n// âŒ Bad: 16px icon, 16px hitbox\n<button className=\"p-0\">\n  <CloseIcon className=\"w-4 h-4\" />\n</button>\n\n// âœ… Good: 16px icon, 44px+ hitbox\n<button className=\"p-3\">\n  <CloseIcon className=\"w-4 h-4\" />\n</button>\n```\n\n## Quick Checklist\n\nFor rapid reviews, check these high-impact items first:\n\n- [ ] All interactive elements keyboard accessible\n- [ ] Visible focus rings on focusable elements\n- [ ] Hit targets â‰¥24px (44px on mobile)\n- [ ] Form inputs have associated labels\n- [ ] Loading states don't flicker\n- [ ] `prefers-reduced-motion` respected\n- [ ] No `transition: all`\n- [ ] Errors show how to fix, not just what's wrong\n- [ ] Color contrast meets APCA standards\n- [ ] No zoom disabled\n\n## Tool Usage\n\n- **Grep**: Find UI patterns to audit\n- **Read**: Review component implementations\n- **Glob**: Discover component structure\n- **Bash**: Run automated checks if available\n\n## Integration\n\nThis agent focuses purely on design guidelines. For comprehensive reviews that include type safety, security, and React patterns, use the `code-reviewer` agent instead.\n",
        "agents/migration-planner.md": "---\nname: migration-planner\ndescription: Next.js Pages Router to App Router migration specialist. Use when /migrate-to-app-router is invoked or when user requests App Router migration strategy.\ntools: Read, Grep, Glob, Edit, Bash\nmodel: sonnet\nskills: react-next-modern\npermissionMode: plan\n---\n\n# Migration Planner Agent\n\nExpert in migrating Next.js applications from Pages Router to App Router, ensuring Server Component-first architecture.\n\n## Migration Process\n\n### Phase 1: Discovery\n\n1. **Identify Pages Router structure**:\n   ```bash\n   # Find all pages\n   find pages -name \"*.tsx\" -o -name \"*.jsx\"\n\n   # Find API routes\n   find pages/api -name \"*.ts\" -o -name \"*.js\"\n\n   # Check for getServerSideProps/getStaticProps\n   grep -r \"getServerSideProps\\|getStaticProps\" pages/\n   ```\n\n2. **Analyze dependencies**:\n   - Check for `_app.tsx` and `_document.tsx`\n   - Identify layout patterns\n   - Note custom wrappers and providers\n   - Check middleware usage\n\n3. **Categorize pages**:\n   - Static pages (no data fetching)\n   - Dynamic pages (with data fetching)\n   - Pages with client interactivity\n   - API routes\n\n### Phase 2: Planning\n\nCreate migration roadmap:\n\n```markdown\n## Migration Plan\n\n### Phase 1: Setup (Low Risk)\n1. Create `app/` directory\n2. Add root layout (`app/layout.tsx`)\n3. Migrate `_document.tsx` to root layout\n4. Migrate `_app.tsx` providers to layout\n\n### Phase 2: Static Pages (Low Risk)\n1. Migrate simple static pages first\n2. Test routing works correctly\n3. Verify styling preserved\n\n### Phase 3: Dynamic Pages (Medium Risk)\n1. Convert getServerSideProps â†’ async Server Components\n2. Implement proper data fetching patterns\n3. Add loading.tsx and error.tsx\n4. Use Suspense boundaries\n\n### Phase 4: Interactive Pages (Medium Risk)\n1. Split Server/Client Components\n2. Move useState/useEffect to Client Components\n3. Convert mutations to Server Actions\n4. Implement optimistic updates\n\n### Phase 5: API Routes (Low Risk)\n1. Convert to Route Handlers\n2. Update request/response handling\n3. Update client calls\n\n### Phase 6: Cleanup (Low Risk)\n1. Remove pages/ directory\n2. Update imports\n3. Remove deprecated patterns\n4. Optimize bundle\n```\n\n### Phase 3: Execution (if not --analyze-only)\n\nFor each page, apply transformations:\n\n#### Example: getServerSideProps â†’ Server Component\n\n```tsx\n// Before: pages/posts.tsx\nexport async function getServerSideProps() {\n  const posts = await fetch('/api/posts').then(r => r.json())\n  return { props: { posts } }\n}\n\nexport default function Posts({ posts }) {\n  return <div>{posts.map(...)}</div>\n}\n\n// After: app/posts/page.tsx\nasync function Posts() {\n  const posts = await db.query.posts.findMany()\n  return <div>{posts.map(...)}</div>\n}\n\nexport default Posts\n```\n\n#### Example: Split Server/Client\n\n```tsx\n// Before: pages/counter.tsx (all client)\nexport default function Counter() {\n  const [count, setCount] = useState(0)\n  const [data, setData] = useState(null)\n\n  useEffect(() => {\n    fetch('/api/data').then(r => r.json()).then(setData)\n  }, [])\n\n  return (\n    <div>\n      <h1>Data: {data?.title}</h1>\n      <button onClick={() => setCount(count + 1)}>{count}</button>\n    </div>\n  )\n}\n\n// After: app/counter/page.tsx (Server Component)\nasync function CounterPage() {\n  const data = await db.query.data.findFirst()\n\n  return (\n    <div>\n      <h1>Data: {data.title}</h1>\n      <CounterButton />\n    </div>\n  )\n}\n\n// app/counter/CounterButton.tsx (Client Component)\n\"use client\"\nexport function CounterButton() {\n  const [count, setCount] = useState(0)\n  return <button onClick={() => setCount(count + 1)}>{count}</button>\n}\n\nexport default CounterPage\n```\n\n### Phase 4: Validation\n\nAfter each migration step:\n1. Build succeeds (`npm run build`)\n2. Dev server works (`npm run dev`)\n3. All routes accessible\n4. Data loads correctly\n5. Interactions work\n6. No console errors\n\n## Workflow Modes\n\n### Analyze Only\n```\n/migrate-to-app-router --analyze-only\nâ†’ Scans Pages Router structure\nâ†’ Generates migration plan\nâ†’ Estimates complexity\nâ†’ Doesn't make changes\n```\n\n### Full Migration\n```\n/migrate-to-app-router\nâ†’ Analyzes structure\nâ†’ Shows plan\nâ†’ Asks for confirmation\nâ†’ Migrates incrementally\nâ†’ Validates at each step\n```\n\n## Common Patterns\n\n### Layout Migration\n```tsx\n// Before: pages/_app.tsx\nexport default function App({ Component, pageProps }) {\n  return (\n    <Providers>\n      <Nav />\n      <Component {...pageProps} />\n    </Providers>\n  )\n}\n\n// After: app/layout.tsx\nexport default function RootLayout({ children }) {\n  return (\n    <html>\n      <body>\n        <Providers>\n          <Nav />\n          {children}\n        </Providers>\n      </body>\n    </html>\n  )\n}\n```\n\n### API Route Migration\n```tsx\n// Before: pages/api/posts.ts\nexport default function handler(req, res) {\n  if (req.method === 'GET') {\n    const posts = await getPosts()\n    res.json(posts)\n  }\n}\n\n// After: app/api/posts/route.ts\nexport async function GET() {\n  const posts = await getPosts()\n  return Response.json(posts)\n}\n```\n\n## Risk Assessment\n\n- **Low Risk**: Static pages, API routes, layouts\n- **Medium Risk**: Pages with data fetching, client interactions\n- **High Risk**: Complex state management, deeply nested components\n\n## Rollback Strategy\n\nAt each phase:\n1. Keep pages/ directory until verified\n2. Use feature flags if needed\n3. Test both routes work simultaneously\n4. Only delete after complete confidence\n",
        "agents/pattern-detector.md": "---\nname: pattern-detector\ndescription: Anti-pattern detection specialist. Use when /fix-patterns is invoked or when user asks to find and fix code smells. Scans codebase for violations of Ultracite, modern React patterns, and performance best practices.\ntools: Read, Grep, Glob, Edit, Bash\nmodel: sonnet\nskills: ultracite, react-next-modern, react-best-practices\n---\n\n# Pattern Detector Agent\n\nSpecialized in finding and fixing anti-patterns across TypeScript/React/Next.js codebases.\n\n## Detection Strategy\n\n### Phase 1: Pattern Discovery\n\nUse targeted Grep searches for common anti-patterns:\n\n```bash\n# Type safety violations\ngrep -r \"any\" --include=\"*.ts\" --include=\"*.tsx\"\ngrep -r \"as unknown as\" --include=\"*.ts\" --include=\"*.tsx\"\ngrep -r \"!\" --include=\"*.ts\" --include=\"*.tsx\"  # Non-null assertions\n\n# Legacy patterns\ngrep -r \"var \" --include=\"*.ts\" --include=\"*.tsx\"\ngrep -r \"enum \" --include=\"*.ts\" --include=\"*.tsx\"\ngrep -r \"function \" --include=\"*.tsx\"  # Non-arrow functions\n\n# React anti-patterns\ngrep -r \"key={i}\" --include=\"*.tsx\"  # Index as key\ngrep -r \"key={index}\" --include=\"*.tsx\"\ngrep -r \"useEffect.*async\" --include=\"*.tsx\"  # Async useEffect\n\n# Next.js anti-patterns\ngrep -r '\"use client\"' --include=\"*.tsx\" | grep \"async function\"  # Client with async\ngrep -r \"fetch.*useEffect\" --include=\"*.tsx\"  # Client-side fetching\n\n# Performance anti-patterns (react-best-practices)\ngrep -r \"from 'lucide-react'\" --include=\"*.tsx\"  # Barrel imports\ngrep -r \"from '@mui/material'\" --include=\"*.tsx\"  # MUI barrel imports\ngrep -r \"from 'lodash'\" --include=\"*.ts\" --include=\"*.tsx\"  # Lodash barrel\ngrep -r \"await.*await.*await\" --include=\"*.ts\" --include=\"*.tsx\"  # Sequential awaits\ngrep -r \"transition: all\" --include=\"*.css\" --include=\"*.tsx\"  # Bad CSS transitions\ngrep -r \"useState.*JSON.parse\" --include=\"*.tsx\"  # Non-lazy state init\n```\n\n### Phase 2: Classification\n\nGroup findings by pattern type:\n- **var-to-const**: `var` declarations\n- **enum-to-const**: `enum` declarations\n- **any-to-typed**: `any` types\n- **index-keys**: Array index as React key\n- **client-fetch**: Client-side data fetching\n- **async-useeffect**: Async functions in useEffect\n- **barrel-imports**: Barrel file imports (lucide-react, @mui/material, lodash)\n- **sequential-awaits**: Waterfall async patterns\n- **transition-all**: CSS `transition: all` (performance issue)\n- **non-lazy-state**: useState without lazy initializer for expensive values\n\n### Phase 3: Interactive or Automated Fix\n\nIf `--dry-run` flag:\n- Show all findings with file:line\n- Preview what would be fixed\n- Estimate impact\n\nIf `--type=X` flag:\n- Fix only specified pattern type\n- Apply changes\n- Report results\n\nIf interactive mode:\n- Show findings\n- Ask which patterns to fix\n- Apply selected fixes\n\n### Phase 4: Validation\n\nAfter fixes:\n- Run TypeScript compiler (`tsc --noEmit`)\n- Report any new errors\n- Suggest rollback if needed\n\n## Common Fix Patterns\n\n### var â†’ const/let\n```tsx\n// Before\nvar count = 0\n\n// After\nlet count = 0  // If reassigned\nconst count = 0  // If not reassigned\n```\n\n### enum â†’ as const\n```tsx\n// Before\nenum Status {\n  ACTIVE = 'active',\n  INACTIVE = 'inactive'\n}\n\n// After\nconst Status = {\n  ACTIVE: 'active',\n  INACTIVE: 'inactive'\n} as const\n\ntype Status = typeof Status[keyof typeof Status]\n```\n\n### Index keys â†’ Proper keys\n```tsx\n// Before\nitems.map((item, i) => <div key={i}>{item}</div>)\n\n// After\nitems.map(item => <div key={item.id}>{item}</div>)\n```\n\n### Client fetch â†’ Server Component\n```tsx\n// Before (Client Component)\n\"use client\"\nfunction Posts() {\n  const [posts, setPosts] = useState([])\n  useEffect(() => {\n    fetch('/api/posts').then(r => r.json()).then(setPosts)\n  }, [])\n  return <div>{posts.map(...)}</div>\n}\n\n// After (Server Component)\nasync function Posts() {\n  const posts = await db.query.posts.findMany()\n  return <div>{posts.map(...)}</div>\n}\n```\n\n### Barrel imports â†’ Direct imports\n```tsx\n// Before (loads 1,583 modules)\nimport { Check, X, Menu } from 'lucide-react'\n\n// After (loads only 3 modules)\nimport Check from 'lucide-react/dist/esm/icons/check'\nimport X from 'lucide-react/dist/esm/icons/x'\nimport Menu from 'lucide-react/dist/esm/icons/menu'\n\n// Alternative: add to next.config.js\n// optimizePackageImports: ['lucide-react']\n```\n\n### Sequential awaits â†’ Promise.all\n```tsx\n// Before (3 round trips)\nconst user = await fetchUser()\nconst posts = await fetchPosts()\nconst comments = await fetchComments()\n\n// After (1 round trip)\nconst [user, posts, comments] = await Promise.all([\n  fetchUser(),\n  fetchPosts(),\n  fetchComments()\n])\n```\n\n### Non-lazy state â†’ Lazy initializer\n```tsx\n// Before (JSON.parse runs every render)\nconst [settings, setSettings] = useState(\n  JSON.parse(localStorage.getItem('settings') || '{}')\n)\n\n// After (JSON.parse runs only once)\nconst [settings, setSettings] = useState(() => {\n  const stored = localStorage.getItem('settings')\n  return stored ? JSON.parse(stored) : {}\n})\n```\n\n## Tool Usage\n\n- **Grep**: Find pattern violations efficiently\n- **Read**: Examine context around violations\n- **Edit**: Apply fixes incrementally\n- **Bash**: Validate with TypeScript compiler\n\n## Workflow Modes\n\n### Dry Run\n```\n/fix-patterns --dry-run\nâ†’ Shows all issues without fixing\nâ†’ Groups by pattern type\nâ†’ Estimates impact\n```\n\n### Targeted Fix\n```\n/fix-patterns --type=var\nâ†’ Fixes only var declarations\nâ†’ Reports changes made\n```\n\n### Interactive\n```\n/fix-patterns\nâ†’ Shows findings\nâ†’ Asks which to fix\nâ†’ Applies selected fixes\nâ†’ Validates results\n```\n",
        "agents/security-auditor.md": "---\nname: security-auditor\ndescription: Security vulnerability specialist. Use PROACTIVELY when reviewing Server Actions, authentication logic, or when user requests security audit. MUST BE USED for /security-audit command.\ntools: Read, Grep, Glob, Edit, Bash\nmodel: sonnet\nskills: ultracite, react-next-modern\npermissionMode: acceptEdits\n---\n\n# Security Auditor Agent\n\nExpert in web application security, specializing in React/Next.js security best practices, Server Action vulnerabilities, authentication/authorization, and OWASP Top 10.\n\n## Capabilities\n\n- Identify security vulnerabilities\n- Audit Server Actions and API routes\n- Review authentication/authorization logic\n- Check for data exposure risks\n- Validate input sanitization\n- Assess dependency security\n\n## Instructions\n\nWhen invoked, this agent should:\n\n1. **Systematic Security Scan**:\n\n   **Phase 1: Server Actions & API Security**\n   - Check all Server Actions for authentication\n   - Verify input validation (Zod schemas)\n   - Look for SQL injection risks\n   - Check for unsafe closure captures\n   - Verify rate limiting on sensitive actions\n\n   **Phase 2: Authentication & Authorization**\n   - Audit auth implementation\n   - Check session handling\n   - Verify permission checks\n   - Look for hardcoded secrets\n   - Check environment variable usage\n\n   **Phase 3: Data Security**\n   - Check for sensitive data in client bundles\n   - Verify database query authorization\n   - Look for excessive data exposure\n   - Check API response sanitization\n\n   **Phase 4: Input/Output Security**\n   - Validate all user input handling\n   - Check for XSS vulnerabilities\n   - Verify CSRF protection\n   - Check file upload security\n   - Audit form handling\n\n   **Phase 5: Dependency Security**\n   - Check for outdated packages\n   - Identify known vulnerabilities\n   - Review dependency permissions\n\n2. **Generate Security Report**:\n\n   Classify findings by severity:\n   - **Critical** (ğŸ”´): Immediate action required\n   - **High** (ğŸŸ ): Fix within days\n   - **Medium** (ğŸŸ¡): Fix within sprint\n   - **Low** (ğŸ”µ): Address in next planning\n\n   For each finding:\n   - Clear description of vulnerability\n   - Potential impact/exploit scenario\n   - Specific file and line number\n   - Concrete fix recommendation\n   - Code example of secure implementation\n\n3. **Provide Remediation**:\n   - Prioritized fix list\n   - Code examples for each fix\n   - Testing recommendations\n   - Prevention strategies\n\n## Security Patterns to Check\n\n### Server Actions\n```tsx\n// Check for:\n1. Missing authentication\n2. No input validation\n3. SQL injection risks\n4. Missing rate limiting\n5. Inadequate error handling\n6. Sensitive data in closures\n7. Missing audit logging\n```\n\n### Environment Variables\n```tsx\n// Verify:\n1. No secrets in client code\n2. Proper NEXT_PUBLIC_ prefix usage\n3. No hardcoded credentials\n4. Secure secret storage\n```\n\n### Database Queries\n```tsx\n// Ensure:\n1. Parameterized queries\n2. Authorization checks before queries\n3. No raw SQL string interpolation\n4. Proper error handling\n```\n\n### API Routes\n```tsx\n// Validate:\n1. Authentication on all endpoints\n2. Rate limiting\n3. CORS configuration\n4. Request validation\n5. Response sanitization\n```\n\n## Vulnerability Examples\n\n### SQL Injection\n```tsx\n// ğŸ”´ CRITICAL\nconst query = `SELECT * FROM users WHERE id = ${userId}`\n\n// Fix: Use parameterized queries\nconst user = await db.select().from(users).where(eq(users.id, userId))\n```\n\n### Missing Authentication\n```tsx\n// ğŸ”´ CRITICAL\n\"use server\"\nexport async function deleteUser(id: string) {\n  await db.delete(users).where(eq(users.id, id))\n}\n\n// Fix: Add authentication and authorization\n\"use server\"\nexport async function deleteUser(id: string) {\n  const session = await auth()\n  if (!session?.user) throw new Error('Unauthorized')\n  if (session.user.role !== 'admin') throw new Error('Forbidden')\n\n  await db.delete(users).where(eq(users.id, id))\n}\n```\n\n### XSS Vulnerability\n```tsx\n// ğŸŸ  HIGH\n<div dangerouslySetInnerHTML={{ __html: userInput }} />\n\n// Fix: Sanitize or avoid dangerouslySetInnerHTML\nimport DOMPurify from 'isomorphic-dompurify'\n<div dangerouslySetInnerHTML={{ __html: DOMPurify.sanitize(userInput) }} />\n```\n\n### Exposed Secrets\n```tsx\n// ğŸ”´ CRITICAL\n\"use client\"\nconst apiKey = process.env.API_SECRET // Bundled in client!\n\n// Fix: Use on server only\n// Server Component\nconst apiKey = process.env.API_SECRET // Safe\n```\n\n## Example Workflow\n\n```\nUser: \"Audit web/src/actions/posts.ts for security issues\"\n\nAgent:\n1. Reads posts.ts\n2. Checks each Server Action:\n   - Authentication present?\n   - Input validation?\n   - Authorization logic?\n   - Rate limiting?\n3. Identifies issues:\n   - ğŸ”´ createPost: No auth check\n   - ğŸŸ  deletePost: No rate limiting\n   - ğŸŸ¡ updatePost: Weak validation\n4. Provides fixes with code examples\n5. Suggests testing approach\n```\n\n## Tool Usage\n\n- **Read**: Examine code for vulnerabilities\n- **Grep**: Find security-sensitive patterns\n- **Glob**: Discover Server Actions and API routes\n- **Edit**: Apply security fixes\n- **Bash**: Check dependencies, run security scans\n\n## Reporting\n\nGenerate reports in multiple formats:\n- Console output with severity indicators\n- Markdown documentation\n- JSON for CI/CD integration\n- SARIF for GitHub Security\n\n## Prevention Recommendations\n\nAfter fixing issues, provide:\n1. **Security checklist** for future development\n2. **Pre-commit hook** suggestions\n3. **CI/CD security scanning** setup\n4. **Team training** topics\n5. **Documentation** improvements\n",
        "commands/code-review.md": "---\ndescription: Perform comprehensive code review with Ultracite and React/Next.js best practices\n---\n\n# Code Review Command\n\nPerform a thorough code review of specified files or the entire codebase, checking for:\n\n1. **Code Quality**: Apply Ultracite rules for TypeScript/JavaScript\n2. **React Patterns**: Verify React 19 and Next.js App Router best practices\n3. **Security**: Check for common vulnerabilities and security issues\n4. **Accessibility**: Ensure WCAG compliance and proper a11y attributes\n5. **Performance**: Apply react-best-practices (waterfalls, bundle size, caching)\n6. **Design Guidelines**: Check against Vercel design standards (interactions, animations, forms)\n\n## Instructions\n\nWhen this command is invoked:\n\n1. Ask which files/directories to review (or review recent changes if not specified)\n2. Use all relevant skills to analyze the code:\n   - **Ultracite**: Type safety, code quality, modern JavaScript\n   - **React Next Modern**: Server Components, Server Actions, React 19 patterns\n   - **React Best Practices**: Performance optimization (waterfalls, bundles, caching)\n   - **Vercel Design Guidelines**: Interactions, animations, forms, accessibility\n3. Provide a structured report with:\n   - **Summary**: Overview of findings\n   - **Critical Issues**: Must-fix problems\n   - **Warnings**: Should-fix improvements\n   - **Suggestions**: Nice-to-have enhancements\n   - **Code Examples**: Show before/after for key issues\n\n4. Prioritize findings by severity:\n   - ğŸ”´ **Critical**: Security vulnerabilities, breaking changes\n   - ğŸŸ¡ **Warning**: Type safety, accessibility issues\n   - ğŸ”µ **Info**: Style improvements, optimizations\n\n5. For each issue, provide:\n   - File path and line number\n   - Clear explanation of the problem\n   - Specific fix recommendation\n   - Code example if applicable\n\n## Example Usage\n\n```\n/code-review\n# Reviews recent git changes\n\n/code-review web/src/app\n# Reviews specific directory\n\n/code-review web/src/components/Auth.tsx\n# Reviews specific file\n```\n",
        "commands/fix-patterns.md": "---\ndescription: Automatically fix common code patterns and anti-patterns across the codebase\n---\n\n# Fix Patterns Command\n\nAutomatically detect and fix common anti-patterns in your codebase using Ultracite and modern React/Next.js best practices.\n\n## Instructions\n\nWhen this command is invoked:\n\n1. **Scan the codebase** for common anti-patterns:\n   - `var` declarations â†’ `const`/`let`\n   - TypeScript `enum` â†’ `as const` objects\n   - Array index keys â†’ proper unique keys\n   - `any` types â†’ specific types (where obvious)\n   - Missing error handling in async functions\n   - `useEffect` for derived state â†’ render calculations\n   - Client-side data fetching â†’ Server Components\n   - Missing accessibility attributes\n\n2. **Show a preview** of all changes before applying:\n   - List all files that will be modified\n   - Show number of fixes per category\n   - Highlight any potentially breaking changes\n\n3. **Ask for confirmation** before making changes\n\n4. **Apply fixes** in order of safety:\n   - First: Safe automated fixes (var â†’ const, enum â†’ as const)\n   - Second: Structural changes (component refactoring)\n   - Third: Manual review needed (complex logic changes)\n\n5. **Generate a report** of all changes made:\n   - Files modified\n   - Types of fixes applied\n   - Any remaining manual fixes needed\n\n## Safety Features\n\n- **Backup recommendation**: Suggest committing current changes first\n- **Dry run mode**: Show what would change without applying\n- **Selective fixing**: Allow fixing specific patterns only\n- **Test reminder**: Remind to run tests after fixes\n\n## Example Usage\n\n```\n/fix-patterns\n# Interactive mode - shows all fixable issues\n\n/fix-patterns --dry-run\n# Preview changes without applying\n\n/fix-patterns --type=var\n# Fix only var declarations\n\n/fix-patterns web/src/app\n# Fix patterns in specific directory\n```\n\n## Pattern Categories\n\n### 1. Type Safety\n- Replace `any` with proper types\n- Remove non-null assertions where safe\n- Convert enums to const objects\n- Add missing type annotations\n\n### 2. Modern JavaScript\n- var â†’ const/let\n- function expressions â†’ arrow functions\n- string concatenation â†’ template literals\n- Math.pow â†’ ** operator\n\n### 3. React Patterns\n- Index keys â†’ proper keys\n- Nested components â†’ top-level components\n- useEffect for derived state â†’ calculations\n- Missing hook dependencies\n\n### 4. Next.js App Router\n- Client-side fetch â†’ Server Components\n- API routes for internal data â†’ Server Actions\n- <img> â†’ next/image\n\n### 5. Accessibility\n- Missing button type attributes\n- Poor alt text\n- Missing ARIA labels\n- Keyboard event handlers\n\n### 6. Error Handling\n- Unhandled promises\n- Missing try-catch blocks\n- Throwing non-Error objects\n- Missing error messages\n",
        "commands/migrate-to-app-router.md": "---\ndescription: Migrate Next.js Pages Router code to modern App Router with Server Components\n---\n\n# Migrate to App Router Command\n\nGuide migration from Next.js Pages Router to the modern App Router architecture with Server Components, Server Actions, and React 19 patterns.\n\n## Instructions\n\nWhen this command is invoked:\n\n1. **Analyze current setup**:\n   - Detect if project uses Pages Router (`pages/` directory)\n   - Identify API routes that can become Server Actions\n   - Find client-side data fetching to move to server\n   - Locate `getServerSideProps`/`getStaticProps` usage\n\n2. **Create migration plan**:\n   - List all pages to migrate\n   - Identify shared layouts\n   - Map API routes â†’ Server Actions\n   - Plan Server vs Client Component boundaries\n\n3. **Execute migration** (with user confirmation at each step):\n\n   **Step 1: Setup App Directory**\n   - Create `app/` directory\n   - Set up root layout with metadata\n   - Configure parallel running (if needed)\n\n   **Step 2: Migrate Pages**\n   - Convert pages to Server Components\n   - Move `getServerSideProps` logic into component\n   - Extract client interactivity to Client Components\n   - Update imports and exports\n\n   **Step 3: Convert Data Fetching**\n   - Remove `useEffect` data fetching\n   - Create cached data fetching functions\n   - Implement `use()` for streaming where needed\n   - Set up proper loading/error boundaries\n\n   **Step 4: Migrate API Routes**\n   - Convert form handlers â†’ Server Actions\n   - Keep webhook endpoints as Route Handlers\n   - Add Zod validation to actions\n   - Implement proper authentication\n\n   **Step 5: Update Components**\n   - Split large Client Components\n   - Use composition for Server/Client mixing\n   - Implement React 19 form hooks\n   - Add optimistic updates where appropriate\n\n4. **Validation**:\n   - Verify all routes work\n   - Check data fetching correctness\n   - Test form submissions\n   - Validate SEO/metadata\n\n5. **Cleanup**:\n   - Remove old Pages Router code (after confirmation)\n   - Update documentation\n   - Remove unused dependencies\n\n## Migration Patterns\n\n### Page Migration\n\n**Before (Pages Router):**\n```tsx\n// pages/dashboard.tsx\nexport async function getServerSideProps() {\n  const data = await fetchDashboardData()\n  return { props: { data } }\n}\n\nexport default function Dashboard({ data }) {\n  return <DashboardUI data={data} />\n}\n```\n\n**After (App Router):**\n```tsx\n// app/dashboard/page.tsx\nexport default async function Dashboard() {\n  const data = await fetchDashboardData()\n  return <DashboardUI data={data} />\n}\n```\n\n### API Route â†’ Server Action\n\n**Before:**\n```tsx\n// pages/api/update-profile.ts\nexport default async function handler(req, res) {\n  const { name } = req.body\n  await updateUser(name)\n  res.json({ success: true })\n}\n```\n\n**After:**\n```tsx\n// actions/profile.ts\n\"use server\"\n\nexport async function updateProfile(formData: FormData) {\n  const session = await auth()\n  if (!session) return { error: 'Unauthorized' }\n\n  const name = formData.get('name')\n  await updateUser(session.user.id, name)\n  revalidatePath('/profile')\n  return { success: true }\n}\n```\n\n### Client Fetch â†’ Server Component\n\n**Before:**\n```tsx\n\"use client\"\n\nfunction Users() {\n  const [users, setUsers] = useState([])\n\n  useEffect(() => {\n    fetch('/api/users').then(r => r.json()).then(setUsers)\n  }, [])\n\n  return <UserList users={users} />\n}\n```\n\n**After:**\n```tsx\n// Server Component\nasync function Users() {\n  const users = await db.query.users.findMany()\n  return <UserList users={users} />\n}\n```\n\n## Example Usage\n\n```\n/migrate-to-app-router\n# Full interactive migration\n\n/migrate-to-app-router --analyze-only\n# Just show migration plan without executing\n\n/migrate-to-app-router pages/dashboard.tsx\n# Migrate specific page\n\n/migrate-to-app-router --api-routes\n# Convert API routes to Server Actions only\n```\n\n## Safety Checklist\n\nBefore migration:\n- âœ… Commit all current changes\n- âœ… Ensure tests pass\n- âœ… Backup database if needed\n- âœ… Review breaking changes in Next.js version\n\nDuring migration:\n- âœ… Keep Pages Router running in parallel initially\n- âœ… Migrate one route at a time\n- âœ… Test each migrated route before continuing\n- âœ… Monitor for runtime errors\n\nAfter migration:\n- âœ… Run full test suite\n- âœ… Check all forms work\n- âœ… Verify SEO/metadata\n- âœ… Performance audit\n- âœ… Update team documentation\n",
        "commands/security-audit.md": "---\ndescription: Perform comprehensive security audit of the codebase\n---\n\n# Security Audit Command\n\nPerform a thorough security audit of your application, focusing on common vulnerabilities in React/Next.js applications, Server Actions, API routes, and authentication flows.\n\n## Instructions\n\nWhen this command is invoked:\n\n1. **Scan for common vulnerabilities**:\n\n   **Server Action Security**\n   - Missing authentication checks\n   - Missing input validation (Zod schemas)\n   - Unsafe FormData handling\n   - SQL injection risks\n   - Closure-based actions with sensitive data\n\n   **Authentication & Authorization**\n   - Hardcoded credentials or API keys\n   - Exposed environment variables (not NEXT_PUBLIC_*)\n   - Missing rate limiting\n   - Insecure session handling\n   - Missing CSRF protection\n\n   **Data Exposure**\n   - Sensitive data in client bundles\n   - Database queries without authorization checks\n   - API endpoints without authentication\n   - Overly permissive CORS settings\n   - Logs containing sensitive information\n\n   **Input Validation**\n   - Unvalidated user input\n   - Missing sanitization before DB queries\n   - XSS vulnerabilities in dangerouslySetInnerHTML\n   - Path traversal risks in file operations\n\n   **Dependency Security**\n   - Outdated packages with known vulnerabilities\n   - Unused dependencies\n\n2. **Generate security report**:\n\n   **Critical (ğŸ”´ Fix Immediately)**\n   - Authentication bypasses\n   - SQL injection vulnerabilities\n   - Exposed secrets\n   - XSS vulnerabilities\n\n   **High (ğŸŸ  Fix Soon)**\n   - Missing rate limiting\n   - Weak input validation\n   - Insecure data exposure\n   - Missing authorization checks\n\n   **Medium (ğŸŸ¡ Address)**\n   - Outdated dependencies\n   - Missing security headers\n   - Insufficient error handling\n   - Weak password requirements\n\n   **Low (ğŸ”µ Consider)**\n   - Security best practices\n   - Code quality improvements\n   - Documentation gaps\n\n3. **Provide remediation guidance**:\n   - Specific fix for each issue\n   - Code examples\n   - Links to security resources\n   - Testing recommendations\n\n## Security Checklist\n\n### Server Actions\n```tsx\n// âŒ BAD: No authentication, no validation\n\"use server\"\nexport async function deleteUser(userId: string) {\n  await db.delete(users).where(eq(users.id, userId))\n}\n\n// âœ… GOOD: Auth + validation + authorization\n\"use server\"\nimport { z } from 'zod'\nimport { auth } from '@/lib/auth'\n\nconst schema = z.object({\n  userId: z.string().uuid()\n})\n\nexport async function deleteUser(userId: string) {\n  // 1. Authenticate\n  const session = await auth()\n  if (!session?.user) throw new Error('Unauthorized')\n\n  // 2. Validate input\n  const { userId: validId } = schema.parse({ userId })\n\n  // 3. Authorize (check ownership/permissions)\n  if (session.user.role !== 'admin' && session.user.id !== validId) {\n    throw new Error('Forbidden')\n  }\n\n  // 4. Execute\n  await db.delete(users).where(eq(users.id, validId))\n\n  // 5. Audit log\n  await logAction('delete_user', { userId: validId, by: session.user.id })\n}\n```\n\n### Environment Variables\n```tsx\n// âŒ BAD: Exposing secret in client\n\"use client\"\nconst apiKey = process.env.SECRET_API_KEY // Exposed in bundle!\n\n// âœ… GOOD: Use on server only\n// Server Component or Server Action\nconst apiKey = process.env.SECRET_API_KEY // Never sent to client\n\n// âœ… GOOD: Public vars explicitly marked\n\"use client\"\nconst publicKey = process.env.NEXT_PUBLIC_API_KEY // OK to expose\n```\n\n### SQL Injection Prevention\n```tsx\n// âŒ BAD: String interpolation = SQL injection\nconst results = await db.execute(\n  `SELECT * FROM users WHERE email = '${userInput}'`\n)\n\n// âœ… GOOD: Parameterized queries\nconst results = await db.select()\n  .from(users)\n  .where(eq(users.email, userInput))\n\n// âœ… GOOD: Validated input\nconst schema = z.object({ email: z.string().email() })\nconst { email } = schema.parse({ email: userInput })\nconst results = await db.select().from(users).where(eq(users.email, email))\n```\n\n### XSS Prevention\n```tsx\n// âŒ BAD: Unescaped user content\n<div dangerouslySetInnerHTML={{ __html: userComment }} />\n\n// âœ… GOOD: Sanitize first\nimport DOMPurify from 'isomorphic-dompurify'\n<div dangerouslySetInnerHTML={{\n  __html: DOMPurify.sanitize(userComment)\n}} />\n\n// âœ… BETTER: Avoid dangerouslySetInnerHTML\n<div>{userComment}</div> // React escapes automatically\n```\n\n### Rate Limiting\n```tsx\n// âœ… GOOD: Rate limit sensitive actions\n\"use server\"\nimport { Ratelimit } from '@upstash/ratelimit'\n\nconst ratelimit = new Ratelimit({\n  redis: Redis.fromEnv(),\n  limiter: Ratelimit.slidingWindow(10, '1 h'),\n})\n\nexport async function sendEmail(formData: FormData) {\n  const session = await auth()\n  if (!session?.user) throw new Error('Unauthorized')\n\n  const { success } = await ratelimit.limit(session.user.id)\n  if (!success) {\n    return { error: 'Too many requests. Try again later.' }\n  }\n\n  // Send email...\n}\n```\n\n## Example Usage\n\n```\n/security-audit\n# Full security audit\n\n/security-audit --server-actions\n# Audit Server Actions only\n\n/security-audit --critical-only\n# Show only critical issues\n\n/security-audit web/src/app/api\n# Audit specific directory\n\n/security-audit --fix\n# Auto-fix safe issues (with confirmation)\n```\n\n## Reporting\n\nGenerate reports in multiple formats:\n- **Console**: Interactive terminal output\n- **Markdown**: `security-report.md` for documentation\n- **JSON**: `security-audit.json` for CI/CD integration\n- **SARIF**: For GitHub Security tab integration\n\n## Integration\n\nCan be run as:\n- **CLI command**: `/security-audit`\n- **Git hook**: Pre-commit/pre-push\n- **CI/CD**: GitHub Actions, etc.\n- **Scheduled**: Daily/weekly automated scans\n",
        "hooks/hooks.json": "{\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"matcher\": \"\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"echo CodeWarden: Your code quality guardian && echo Skills: Ultracite, React Next Modern, UI/UX Guidelines && echo Commands: /code-review, /fix-patterns, /migrate-to-app-router, /security-audit && echo Created by Tyler Gibbs\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "skills/react-best-practices/SKILL.md": "---\nname: react-best-practices\ndescription: React and Next.js performance optimization guidelines from Vercel Engineering. This skill should be used when writing, reviewing, or refactoring React/Next.js code to ensure optimal performance patterns. Triggers on tasks involving React components, Next.js pages, data fetching, bundle optimization, or performance improvements.\n---\n\n# React Best Practices\n\n## Overview\n\nPerformance optimization guide for React and Next.js applications, ordered by impact. Apply these patterns when writing or reviewing code to maximize performance gains.\n\n## When to Apply\n\nReference these guidelines when:\n- Writing new React components or Next.js pages\n- Implementing data fetching (client or server-side)\n- Reviewing code for performance issues\n- Refactoring existing React/Next.js code\n- Optimizing bundle size or load times\n\n## Priority-Ordered Guidelines\n\nRules are prioritized by impact:\n\n| Priority | Category | Impact |\n|----------|----------|--------|\n| 1 | Eliminating Waterfalls | CRITICAL |\n| 2 | Bundle Size Optimization | CRITICAL |\n| 3 | Server-Side Performance | HIGH |\n| 4 | Client-Side Data Fetching | MEDIUM-HIGH |\n| 5 | Re-render Optimization | MEDIUM |\n| 6 | Rendering Performance | MEDIUM |\n| 7 | JavaScript Performance | LOW-MEDIUM |\n| 8 | Advanced Patterns | LOW |\n\n## Quick Reference\n\n### Critical Patterns (Apply First)\n\n**Eliminate Waterfalls:**\n- Use `Promise.all()` for independent async operations\n- Start promises early, await late\n- Use `better-all` for partial dependencies\n- Use Suspense boundaries to stream content\n\n**Reduce Bundle Size:**\n- Avoid barrel file imports (import directly from source)\n- Use `next/dynamic` for heavy components\n- Defer non-critical third-party libraries\n- Preload based on user intent\n\n### High-Impact Server Patterns\n\n- Use `React.cache()` for per-request deduplication\n- Use LRU cache for cross-request caching\n- Minimize serialization at RSC boundaries\n- Parallelize data fetching with component composition\n\n### Medium-Impact Client Patterns\n\n- Use SWR for automatic request deduplication\n- Defer state reads to usage point\n- Use derived state subscriptions\n- Apply `startTransition` for non-urgent updates\n\n## References\n\nFull documentation with code examples is available in:\n\n- `references/react-performance-guidelines.md` - Complete guide with all patterns\n- `references/rules/` - Individual rule files organized by category\n\nTo look up a specific pattern, grep the rules directory:\n```\ngrep -l \"suspense\" references/rules/\ngrep -l \"barrel\" references/rules/\ngrep -l \"swr\" references/rules/\n```\n\n## Rule Categories in `references/rules/`\n\n- `async-*` - Waterfall elimination patterns\n- `bundle-*` - Bundle size optimization\n- `server-*` - Server-side performance\n- `client-*` - Client-side data fetching\n- `rerender-*` - Re-render optimization\n- `rendering-*` - DOM rendering performance\n- `js-*` - JavaScript micro-optimizations\n- `advanced-*` - Advanced patterns\n",
        "skills/react-best-practices/references/react-performance-guidelines.md": "# React Performance Guidelines\n\n**Version 0.1.0**  \nVercel Engineering  \nJanuary 2026\n\n> **Note:**  \n> This document is mainly for agents and LLMs to follow when maintaining,  \n> generating, or refactoring React and Next.js codebases at Vercel. Humans  \n> may also find it useful, but guidance here is optimized for automation  \n> and consistency by AI-assisted workflows.\n\n---\n\n## Abstract\n\nPerformance optimization guide for React and Next.js applications, ordered by impact. Rules are prioritized from highest to lowest impact, focusing first on eliminating waterfalls and reducing bundle size for maximum performance gains.\n\n---\n\n## Table of Contents\n\n1. [Eliminating Waterfalls](#1-eliminating-waterfalls) â€” **CRITICAL**\n   - 1.1 [Defer Await Until Needed](#11)\n   - 1.2 [Dependency-Based Parallelization](#12)\n   - 1.3 [Prevent Waterfall Chains in API Routes](#13)\n   - 1.4 [Promise.all() for Independent Operations](#14)\n   - 1.5 [Strategic Suspense Boundaries](#15)\n2. [Bundle Size Optimization](#2-bundle-size-optimization) â€” **CRITICAL**\n   - 2.1 [Avoid Barrel File Imports](#21)\n   - 2.2 [Conditional Module Loading](#22)\n   - 2.3 [Defer Non-Critical Third-Party Libraries](#23)\n   - 2.4 [Dynamic Imports for Heavy Components](#24)\n   - 2.5 [Preload Based on User Intent](#25)\n3. [Server-Side Performance](#3-server-side-performance) â€” **HIGH**\n   - 3.1 [Cross-Request LRU Caching](#31)\n   - 3.2 [Minimize Serialization at RSC Boundaries](#32)\n   - 3.3 [Parallel Data Fetching with Component Composition](#33)\n   - 3.4 [Per-Request Deduplication with React.cache()](#34)\n4. [Client-Side Data Fetching](#4-client-side-data-fetching) â€” **MEDIUM-HIGH**\n   - 4.1 [Deduplicate Global Event Listeners](#41)\n   - 4.2 [Use SWR for Automatic Deduplication](#42)\n5. [Re-render Optimization](#5-re-render-optimization) â€” **MEDIUM**\n   - 5.1 [Defer State Reads to Usage Point](#51)\n   - 5.2 [Extract to Memoized Components](#52)\n   - 5.3 [Narrow Effect Dependencies](#53)\n   - 5.4 [Subscribe to Derived State](#54)\n   - 5.5 [Use Lazy State Initialization](#55)\n   - 5.6 [Use Transitions for Non-Urgent Updates](#56)\n6. [Rendering Performance](#6-rendering-performance) â€” **MEDIUM**\n   - 6.1 [CSS content-visibility for Long Lists](#61)\n   - 6.2 [Hoist Static JSX Elements](#62)\n   - 6.3 [Optimize SVG Precision](#63)\n   - 6.4 [Use Activity Component for Show/Hide](#64)\n   - 6.5 [Use Explicit Conditional Rendering](#65)\n7. [JavaScript Performance](#7-javascript-performance) â€” **LOW-MEDIUM**\n   - 7.1 [Build Index Maps for Repeated Lookups](#71)\n   - 7.2 [Cache Property Access in Loops](#72)\n   - 7.3 [Cache Repeated Function Calls](#73)\n   - 7.4 [Cache Storage API Calls](#74)\n   - 7.5 [Combine Multiple Array Iterations](#75)\n   - 7.6 [Early Return from Functions](#76)\n   - 7.7 [Hoist RegExp Creation](#77)\n   - 7.8 [Use Set/Map for O(1) Lookups](#78)\n8. [Advanced Patterns](#8-advanced-patterns) â€” **LOW**\n   - 8.1 [Store Event Handlers in Refs](#81)\n   - 8.2 [useLatest for Stable Callback Refs](#82)\n\n---\n\n## 1. Eliminating Waterfalls\n\n**Impact: CRITICAL**\n\nWaterfalls are the #1 performance killer. Each sequential await adds full network latency. Eliminating them yields the largest gains.\n\n### 1.1 Defer Await Until Needed\n\nMove `await` operations into the branches where they're actually used to avoid blocking code paths that don't need them.\n\n**Incorrect: blocks both branches**\n\n```typescript\nasync function handleRequest(userId: string, skipProcessing: boolean) {\n  const userData = await fetchUserData(userId)\n  \n  if (skipProcessing) {\n    // Returns immediately but still waited for userData\n    return { skipped: true }\n  }\n  \n  // Only this branch uses userData\n  return processUserData(userData)\n}\n```\n\n**Correct: only blocks when needed**\n\n```typescript\nasync function handleRequest(userId: string, skipProcessing: boolean) {\n  if (skipProcessing) {\n    // Returns immediately without waiting\n    return { skipped: true }\n  }\n  \n  // Fetch only when needed\n  const userData = await fetchUserData(userId)\n  return processUserData(userData)\n}\n```\n\n**Another example: early return optimization**\n\n```typescript\n// Incorrect: always fetches permissions\nasync function updateResource(resourceId: string, userId: string) {\n  const permissions = await fetchPermissions(userId)\n  const resource = await getResource(resourceId)\n  \n  if (!resource) {\n    return { error: 'Not found' }\n  }\n  \n  if (!permissions.canEdit) {\n    return { error: 'Forbidden' }\n  }\n  \n  return await updateResourceData(resource, permissions)\n}\n\n// Correct: fetches only when needed\nasync function updateResource(resourceId: string, userId: string) {\n  const resource = await getResource(resourceId)\n  \n  if (!resource) {\n    return { error: 'Not found' }\n  }\n  \n  const permissions = await fetchPermissions(userId)\n  \n  if (!permissions.canEdit) {\n    return { error: 'Forbidden' }\n  }\n  \n  return await updateResourceData(resource, permissions)\n}\n```\n\nThis optimization is especially valuable when the skipped branch is frequently taken, or when the deferred operation is expensive.\n\n### 1.2 Dependency-Based Parallelization\n\nFor operations with partial dependencies, use `better-all` to maximize parallelism. It automatically starts each task at the earliest possible moment.\n\n**Incorrect: profile waits for config unnecessarily**\n\n```typescript\nconst [user, config] = await Promise.all([\n  fetchUser(),\n  fetchConfig()\n])\nconst profile = await fetchProfile(user.id)\n```\n\n**Correct: config and profile run in parallel**\n\n```typescript\nimport { all } from 'better-all'\n\nconst { user, config, profile } = await all({\n  async user() { return fetchUser() },\n  async config() { return fetchConfig() },\n  async profile() {\n    return fetchProfile((await this.$.user).id)\n  }\n})\n```\n\nReference: [https://github.com/shuding/better-all](https://github.com/shuding/better-all)\n\n### 1.3 Prevent Waterfall Chains in API Routes\n\nIn API routes and Server Actions, start independent operations immediately, even if you don't await them yet.\n\n**Incorrect: config waits for auth, data waits for both**\n\n```typescript\nexport async function GET(request: Request) {\n  const session = await auth()\n  const config = await fetchConfig()\n  const data = await fetchData(session.user.id)\n  return Response.json({ data, config })\n}\n```\n\n**Correct: auth and config start immediately**\n\n```typescript\nexport async function GET(request: Request) {\n  const sessionPromise = auth()\n  const configPromise = fetchConfig()\n  const session = await sessionPromise\n  const [config, data] = await Promise.all([\n    configPromise,\n    fetchData(session.user.id)\n  ])\n  return Response.json({ data, config })\n}\n```\n\nFor operations with more complex dependency chains, use `better-all` to automatically maximize parallelism (see Dependency-Based Parallelization).\n\n### 1.4 Promise.all() for Independent Operations\n\nWhen async operations have no interdependencies, execute them concurrently using `Promise.all()`.\n\n**Incorrect: sequential execution, 3 round trips**\n\n```typescript\nconst user = await fetchUser()\nconst posts = await fetchPosts()\nconst comments = await fetchComments()\n```\n\n**Correct: parallel execution, 1 round trip**\n\n```typescript\nconst [user, posts, comments] = await Promise.all([\n  fetchUser(),\n  fetchPosts(),\n  fetchComments()\n])\n```\n\n### 1.5 Strategic Suspense Boundaries\n\nInstead of awaiting data in async components before returning JSX, use Suspense boundaries to show the wrapper UI faster while data loads.\n\n**Incorrect: wrapper blocked by data fetching**\n\n```tsx\nasync function Page() {\n  const data = await fetchData() // Blocks entire page\n  \n  return (\n    <div>\n      <div>Sidebar</div>\n      <div>Header</div>\n      <div>\n        <DataDisplay data={data} />\n      </div>\n      <div>Footer</div>\n    </div>\n  )\n}\n```\n\nThe entire layout waits for data even though only the middle section needs it.\n\n**Correct: wrapper shows immediately, data streams in**\n\n```tsx\nfunction Page() {\n  return (\n    <div>\n      <div>Sidebar</div>\n      <div>Header</div>\n      <div>\n        <Suspense fallback={<Skeleton />}>\n          <DataDisplay />\n        </Suspense>\n      </div>\n      <div>Footer</div>\n    </div>\n  )\n}\n\nasync function DataDisplay() {\n  const data = await fetchData() // Only blocks this component\n  return <div>{data.content}</div>\n}\n```\n\nSidebar, Header, and Footer render immediately. Only DataDisplay waits for data.\n\n**When NOT to use this pattern:**\n\n```tsx\n\n```\n\n**When NOT to use this pattern:**\n\n```tsx\n\n```\n\n---\n\n## 2. Bundle Size Optimization\n\n**Impact: CRITICAL**\n\nReducing initial bundle size improves Time to Interactive and Largest Contentful Paint.\n\n### 2.1 Avoid Barrel File Imports\n\nImport directly from source files instead of barrel files to avoid loading thousands of unused modules. **Barrel files** are entry points that re-export multiple modules (e.g., `index.js` that does `export * from './module'`).\n\nPopular icon and component libraries can have **up to 10,000 re-exports** in their entry file. For many React packages, **it takes 200-800ms just to import them**, affecting both development speed and production cold starts.\n\n**Incorrect: imports entire library**\n\n```tsx\nimport { Check, X, Menu } from 'lucide-react'\n// Loads 1,583 modules, takes ~2.8s extra in dev\n// Runtime cost: 200-800ms on every cold start\n\nimport { Button, TextField } from '@mui/material'\n// Loads 2,225 modules, takes ~4.2s extra in dev\n```\n\n**Correct: imports only what you need**\n\n```tsx\nimport Check from 'lucide-react/dist/esm/icons/check'\nimport X from 'lucide-react/dist/esm/icons/x'\nimport Menu from 'lucide-react/dist/esm/icons/menu'\n// Loads only 3 modules (~2KB vs ~1MB)\n\nimport Button from '@mui/material/Button'\nimport TextField from '@mui/material/TextField'\n// Loads only what you use\n```\n\n**Alternative: Next.js 13.5+**\n\n```js\n// next.config.js - use optimizePackageImports\nmodule.exports = {\n  experimental: {\n    optimizePackageImports: ['lucide-react', '@mui/material']\n  }\n}\n\n// Then you can keep the ergonomic barrel imports:\nimport { Check, X, Menu } from 'lucide-react'\n// Automatically transformed to direct imports at build time\n```\n\nDirect imports provide 15-70% faster dev boot, 28% faster builds, 40% faster cold starts, and significantly faster HMR.\n\nLibraries commonly affected: `lucide-react`, `@mui/material`, `@mui/icons-material`, `@tabler/icons-react`, `react-icons`, `@headlessui/react`, `@radix-ui/react-*`, `lodash`, `ramda`, `date-fns`, `rxjs`, `react-use`.\n\nReference: [https://vercel.com/blog/how-we-optimized-package-imports-in-next-js](https://vercel.com/blog/how-we-optimized-package-imports-in-next-js)\n\n### 2.2 Conditional Module Loading\n\nLoad large data or modules only when a feature is activated.\n\n**Example: lazy-load animation frames**\n\n```tsx\nfunction AnimationPlayer({ enabled }: { enabled: boolean }) {\n  const [frames, setFrames] = useState<Frame[] | null>(null)\n\n  useEffect(() => {\n    if (enabled && !frames && typeof window !== 'undefined') {\n      import('./animation-frames.js')\n        .then(mod => setFrames(mod.frames))\n        .catch(() => setEnabled(false))\n    }\n  }, [enabled, frames])\n\n  if (!frames) return <Skeleton />\n  return <Canvas frames={frames} />\n}\n```\n\nThe `typeof window !== 'undefined'` check prevents bundling this module for SSR, optimizing server bundle size and build speed.\n\n### 2.3 Defer Non-Critical Third-Party Libraries\n\nAnalytics, logging, and error tracking don't block user interaction. Load them after hydration.\n\n**Incorrect: blocks initial bundle**\n\n```tsx\nimport { Analytics } from '@vercel/analytics/react'\n\nexport default function RootLayout({ children }) {\n  return (\n    <html>\n      <body>\n        {children}\n        <Analytics />\n      </body>\n    </html>\n  )\n}\n```\n\n**Correct: loads after hydration**\n\n```tsx\nimport dynamic from 'next/dynamic'\n\nconst Analytics = dynamic(\n  () => import('@vercel/analytics/react').then(m => m.Analytics),\n  { ssr: false }\n)\n\nexport default function RootLayout({ children }) {\n  return (\n    <html>\n      <body>\n        {children}\n        <Analytics />\n      </body>\n    </html>\n  )\n}\n```\n\n### 2.4 Dynamic Imports for Heavy Components\n\nUse `next/dynamic` to lazy-load large components not needed on initial render.\n\n**Incorrect: Monaco bundles with main chunk ~300KB**\n\n```tsx\nimport { MonacoEditor } from './monaco-editor'\n\nfunction CodePanel({ code }: { code: string }) {\n  return <MonacoEditor value={code} />\n}\n```\n\n**Correct: Monaco loads on demand**\n\n```tsx\nimport dynamic from 'next/dynamic'\n\nconst MonacoEditor = dynamic(\n  () => import('./monaco-editor').then(m => m.MonacoEditor),\n  { ssr: false }\n)\n\nfunction CodePanel({ code }: { code: string }) {\n  return <MonacoEditor value={code} />\n}\n```\n\n### 2.5 Preload Based on User Intent\n\nPreload heavy bundles before they're needed to reduce perceived latency.\n\n**Example: preload on hover/focus**\n\n```tsx\nfunction EditorButton({ onClick }: { onClick: () => void }) {\n  const preload = () => {\n    if (typeof window !== 'undefined') {\n      void import('./monaco-editor')\n    }\n  }\n\n  return (\n    <button\n      onMouseEnter={preload}\n      onFocus={preload}\n      onClick={onClick}\n    >\n      Open Editor\n    </button>\n  )\n}\n```\n\n**Example: preload when feature flag is enabled**\n\n```tsx\nfunction FlagsProvider({ children, flags }: Props) {\n  useEffect(() => {\n    if (flags.editorEnabled && typeof window !== 'undefined') {\n      void import('./monaco-editor').then(mod => mod.init())\n    }\n  }, [flags.editorEnabled])\n\n  return <FlagsContext.Provider value={flags}>\n    {children}\n  </FlagsContext.Provider>\n}\n```\n\nThe `typeof window !== 'undefined'` check prevents bundling preloaded modules for SSR, optimizing server bundle size and build speed.\n\n---\n\n## 3. Server-Side Performance\n\n**Impact: HIGH**\n\nOptimizing server-side rendering and data fetching eliminates server-side waterfalls and reduces response times.\n\n### 3.1 Cross-Request LRU Caching\n\n`React.cache()` only works within one request. For data shared across sequential requests (user clicks button A then button B), use an LRU cache.\n\n**Implementation:**\n\n```typescript\nimport { LRUCache } from 'lru-cache'\n\nconst cache = new LRUCache<string, any>({\n  max: 1000,\n  ttl: 5 * 60 * 1000  // 5 minutes\n})\n\nexport async function getUser(id: string) {\n  const cached = cache.get(id)\n  if (cached) return cached\n\n  const user = await db.user.findUnique({ where: { id } })\n  cache.set(id, user)\n  return user\n}\n\n// Request 1: DB query, result cached\n// Request 2: cache hit, no DB query\n```\n\nUse when sequential user actions hit multiple endpoints needing the same data within seconds. In serverless, consider Redis for cross-process caching.\n\nReference: [https://github.com/isaacs/node-lru-cache](https://github.com/isaacs/node-lru-cache)\n\n### 3.2 Minimize Serialization at RSC Boundaries\n\nThe React Server/Client boundary serializes all object properties. Only pass fields that the client actually uses.\n\n**Incorrect: serializes all 50 fields**\n\n```tsx\nasync function Page() {\n  const user = await fetchUser()  // 50 fields\n  return <Profile user={user} />\n}\n\n'use client'\nfunction Profile({ user }: { user: User }) {\n  return <div>{user.name}</div>  // uses 1 field\n}\n```\n\n**Correct: serializes only 1 field**\n\n```tsx\nasync function Page() {\n  const user = await fetchUser()\n  return <Profile name={user.name} />\n}\n\n'use client'\nfunction Profile({ name }: { name: string }) {\n  return <div>{name}</div>\n}\n```\n\n### 3.3 Parallel Data Fetching with Component Composition\n\nReact Server Components execute sequentially within a tree. Restructure with composition to parallelize data fetching.\n\n**Incorrect: Sidebar waits for Page's fetch to complete**\n\n```tsx\nexport default async function Page() {\n  const header = await fetchHeader()\n  return (\n    <div>\n      <div>{header}</div>\n      <Sidebar />\n    </div>\n  )\n}\n\nasync function Sidebar() {\n  const items = await fetchSidebarItems()\n  return <nav>{items.map(renderItem)}</nav>\n}\n```\n\n**Correct: both fetch simultaneously**\n\n```tsx\nasync function Header() {\n  const data = await fetchHeader()\n  return <div>{data}</div>\n}\n\nasync function Sidebar() {\n  const items = await fetchSidebarItems()\n  return <nav>{items.map(renderItem)}</nav>\n}\n\nexport default function Page() {\n  return (\n    <div>\n      <Header />\n      <Sidebar />\n    </div>\n  )\n}\n```\n\n**Alternative with children prop:**\n\n```tsx\nasync function Layout({ children }: { children: ReactNode }) {\n  const header = await fetchHeader()\n  return (\n    <div>\n      <div>{header}</div>\n      {children}\n    </div>\n  )\n}\n\nasync function Sidebar() {\n  const items = await fetchSidebarItems()\n  return <nav>{items.map(renderItem)}</nav>\n}\n\nexport default function Page() {\n  return (\n    <Layout>\n      <Sidebar />\n    </Layout>\n  )\n}\n```\n\n### 3.4 Per-Request Deduplication with React.cache()\n\nUse `React.cache()` for server-side request deduplication. Authentication and database queries benefit most.\n\n**Usage:**\n\n```typescript\nimport { cache } from 'react'\n\nexport const getCurrentUser = cache(async () => {\n  const session = await auth()\n  if (!session?.user?.id) return null\n  return await db.user.findUnique({\n    where: { id: session.user.id }\n  })\n})\n```\n\nWithin a single request, multiple calls to `getCurrentUser()` execute the query only once.\n\n---\n\n## 4. Client-Side Data Fetching\n\n**Impact: MEDIUM-HIGH**\n\nAutomatic deduplication and efficient data fetching patterns reduce redundant network requests.\n\n### 4.1 Deduplicate Global Event Listeners\n\nUse `useSWRSubscription()` to share global event listeners across component instances.\n\n**Incorrect: N instances = N listeners**\n\n```tsx\nfunction useKeyboardShortcut(key: string, callback: () => void) {\n  useEffect(() => {\n    const handler = (e: KeyboardEvent) => {\n      if (e.metaKey && e.key === key) {\n        callback()\n      }\n    }\n    window.addEventListener('keydown', handler)\n    return () => window.removeEventListener('keydown', handler)\n  }, [key, callback])\n}\n```\n\nWhen using the `useKeyboardShortcut` hook multiple times, each instance will register a new listener.\n\n**Correct: N instances = 1 listener**\n\n```tsx\nimport useSWRSubscription from 'swr/subscription'\n\n// Module-level Map to track callbacks per key\nconst keyCallbacks = new Map<string, Set<() => void>>()\n\nfunction useKeyboardShortcut(key: string, callback: () => void) {\n  // Register this callback in the Map\n  useEffect(() => {\n    if (!keyCallbacks.has(key)) {\n      keyCallbacks.set(key, new Set())\n    }\n    keyCallbacks.get(key)!.add(callback)\n\n    return () => {\n      const set = keyCallbacks.get(key)\n      if (set) {\n        set.delete(callback)\n        if (set.size === 0) {\n          keyCallbacks.delete(key)\n        }\n      }\n    }\n  }, [key, callback])\n\n  useSWRSubscription('global-keydown', () => {\n    const handler = (e: KeyboardEvent) => {\n      if (e.metaKey && keyCallbacks.has(e.key)) {\n        keyCallbacks.get(e.key)!.forEach(cb => cb())\n      }\n    }\n    window.addEventListener('keydown', handler)\n    return () => window.removeEventListener('keydown', handler)\n  }\n}\n\nfunction Profile() {\n  // Multiple shortcuts will share the same listener\n  useKeyboardShortcut('p', () => { /* ... */ }) \n  useKeyboardShortcut('k', () => { /* ... */ })\n  // ...\n}\n```\n\n### 4.2 Use SWR for Automatic Deduplication\n\nSWR enables request deduplication, caching, and revalidation across component instances.\n\n**Incorrect: no deduplication, each instance fetches**\n\n```tsx\nfunction UserList() {\n  const [users, setUsers] = useState([])\n  useEffect(() => {\n    fetch('/api/users')\n      .then(r => r.json())\n      .then(setUsers)\n  }, [])\n}\n```\n\n**Correct: multiple instances share one request**\n\n```tsx\nimport useSWR from 'swr'\n\nfunction UserList() {\n  const { data: users } = useSWR('/api/users', fetcher)\n}\n```\n\n**For immutable data:**\n\n```tsx\nimport { useImmutableSWR } from '@/lib/swr'\n\nfunction StaticContent() {\n  const { data } = useImmutableSWR('/api/config', fetcher)\n}\n```\n\n**For mutations:**\n\n```tsx\nimport { useSWRMutation } from 'swr/mutation'\n\nfunction UpdateButton() {\n  const { trigger } = useSWRMutation('/api/user', updateUser)\n  return <button onClick={() => trigger()}>Update</button>\n}\n```\n\nReference: [https://swr.vercel.app](https://swr.vercel.app)\n\n---\n\n## 5. Re-render Optimization\n\n**Impact: MEDIUM**\n\nReducing unnecessary re-renders minimizes wasted computation and improves UI responsiveness.\n\n### 5.1 Defer State Reads to Usage Point\n\nDon't subscribe to dynamic state (searchParams, localStorage) if you only read it inside callbacks.\n\n**Incorrect: subscribes to all searchParams changes**\n\n```tsx\nfunction ShareButton({ chatId }: { chatId: string }) {\n  const searchParams = useSearchParams()\n\n  const handleShare = () => {\n    const ref = searchParams.get('ref')\n    shareChat(chatId, { ref })\n  }\n\n  return <button onClick={handleShare}>Share</button>\n}\n```\n\n**Correct: reads on demand, no subscription**\n\n```tsx\nfunction ShareButton({ chatId }: { chatId: string }) {\n  const handleShare = () => {\n    const params = new URLSearchParams(window.location.search)\n    const ref = params.get('ref')\n    shareChat(chatId, { ref })\n  }\n\n  return <button onClick={handleShare}>Share</button>\n}\n```\n\n### 5.2 Extract to Memoized Components\n\nExtract expensive work into memoized components to enable early returns before computation.\n\n**Incorrect: computes avatar even when loading**\n\n```tsx\nfunction Profile({ user, loading }: Props) {\n  const avatar = useMemo(() => {\n    const id = computeAvatarId(user)\n    return <Avatar id={id} />\n  }, [user])\n\n  if (loading) return <Skeleton />\n  return <div>{avatar}</div>\n}\n```\n\n**Correct: skips computation when loading**\n\n```tsx\nconst UserAvatar = memo(function UserAvatar({ user }: { user: User }) {\n  const id = useMemo(() => computeAvatarId(user), [user])\n  return <Avatar id={id} />\n})\n\nfunction Profile({ user, loading }: Props) {\n  if (loading) return <Skeleton />\n  return (\n    <div>\n      <UserAvatar user={user} />\n    </div>\n  )\n}\n```\n\n### 5.3 Narrow Effect Dependencies\n\nSpecify primitive dependencies instead of objects to minimize effect re-runs.\n\n**Incorrect: re-runs on any user field change**\n\n```tsx\nuseEffect(() => {\n  console.log(user.id)\n}, [user])\n```\n\n**Correct: re-runs only when id changes**\n\n```tsx\nuseEffect(() => {\n  console.log(user.id)\n}, [user.id])\n```\n\n**For derived state, compute outside effect:**\n\n```tsx\n// Incorrect: runs on width=767, 766, 765...\nuseEffect(() => {\n  if (width < 768) {\n    enableMobileMode()\n  }\n}, [width])\n\n// Correct: runs only on boolean transition\nconst isMobile = width < 768\nuseEffect(() => {\n  if (isMobile) {\n    enableMobileMode()\n  }\n}, [isMobile])\n```\n\n### 5.4 Subscribe to Derived State\n\nSubscribe to derived boolean state instead of continuous values to reduce re-render frequency.\n\n**Incorrect: re-renders on every pixel change**\n\n```tsx\nfunction Sidebar() {\n  const width = useWindowWidth()  // updates continuously\n  const isMobile = width < 768\n  return <nav className={isMobile ? 'mobile' : 'desktop'}>\n}\n```\n\n**Correct: re-renders only when boolean changes**\n\n```tsx\nfunction Sidebar() {\n  const isMobile = useMediaQuery('(max-width: 767px)')\n  return <nav className={isMobile ? 'mobile' : 'desktop'}>\n}\n```\n\n### 5.5 Use Lazy State Initialization\n\nPass a function to `useState` for expensive initial values. Without the function form, the initializer runs on every render even though the value is only used once.\n\n**Incorrect: runs on every render**\n\n```tsx\nfunction FilteredList({ items }: { items: Item[] }) {\n  // buildSearchIndex() runs on EVERY render, even after initialization\n  const [searchIndex, setSearchIndex] = useState(buildSearchIndex(items))\n  const [query, setQuery] = useState('')\n  \n  // When query changes, buildSearchIndex runs again unnecessarily\n  return <SearchResults index={searchIndex} query={query} />\n}\n\nfunction UserProfile() {\n  // JSON.parse runs on every render\n  const [settings, setSettings] = useState(\n    JSON.parse(localStorage.getItem('settings') || '{}')\n  )\n  \n  return <SettingsForm settings={settings} onChange={setSettings} />\n}\n```\n\n**Correct: runs only once**\n\n```tsx\nfunction FilteredList({ items }: { items: Item[] }) {\n  // buildSearchIndex() runs ONLY on initial render\n  const [searchIndex, setSearchIndex] = useState(() => buildSearchIndex(items))\n  const [query, setQuery] = useState('')\n  \n  return <SearchResults index={searchIndex} query={query} />\n}\n\nfunction UserProfile() {\n  // JSON.parse runs only on initial render\n  const [settings, setSettings] = useState(() => {\n    const stored = localStorage.getItem('settings')\n    return stored ? JSON.parse(stored) : {}\n  })\n  \n  return <SettingsForm settings={settings} onChange={setSettings} />\n}\n```\n\nUse lazy initialization when computing initial values from localStorage/sessionStorage, building data structures (indexes, maps), reading from the DOM, or performing heavy transformations.\n\nFor simple primitives (`useState(0)`), direct references (`useState(props.value)`), or cheap literals (`useState({})`), the function form is unnecessary.\n\n### 5.6 Use Transitions for Non-Urgent Updates\n\nMark frequent, non-urgent state updates as transitions to maintain UI responsiveness.\n\n**Incorrect: blocks UI on every scroll**\n\n```tsx\nfunction ScrollTracker() {\n  const [scrollY, setScrollY] = useState(0)\n  useEffect(() => {\n    const handler = () => setScrollY(window.scrollY)\n    window.addEventListener('scroll', handler, { passive: true })\n    return () => window.removeEventListener('scroll', handler)\n  }, [])\n}\n```\n\n**Correct: non-blocking updates**\n\n```tsx\nimport { startTransition } from 'react'\n\nfunction ScrollTracker() {\n  const [scrollY, setScrollY] = useState(0)\n  useEffect(() => {\n    const handler = () => {\n      startTransition(() => setScrollY(window.scrollY))\n    }\n    window.addEventListener('scroll', handler, { passive: true })\n    return () => window.removeEventListener('scroll', handler)\n  }, [])\n}\n```\n\n---\n\n## 6. Rendering Performance\n\n**Impact: MEDIUM**\n\nOptimizing the rendering process reduces the work the browser needs to do.\n\n### 6.1 CSS content-visibility for Long Lists\n\nApply `content-visibility: auto` to defer off-screen rendering.\n\n**CSS:**\n\n```css\n.message-item {\n  content-visibility: auto;\n  contain-intrinsic-size: 0 80px;\n}\n```\n\n**Example:**\n\n```tsx\nfunction MessageList({ messages }: { messages: Message[] }) {\n  return (\n    <div className=\"overflow-y-auto h-screen\">\n      {messages.map(msg => (\n        <div key={msg.id} className=\"message-item\">\n          <Avatar user={msg.author} />\n          <div>{msg.content}</div>\n        </div>\n      ))}\n    </div>\n  )\n}\n```\n\nFor 1000 messages, browser skips layout/paint for ~990 off-screen items (10Ã— faster initial render).\n\n### 6.2 Hoist Static JSX Elements\n\nExtract static JSX outside components to avoid re-creation.\n\n**Incorrect: recreates element every render**\n\n```tsx\nfunction LoadingSkeleton() {\n  return <div className=\"animate-pulse h-20 bg-gray-200\" />\n}\n\nfunction Container() {\n  return (\n    <div>\n      {loading && <LoadingSkeleton />}\n    </div>\n  )\n}\n```\n\n**Correct: reuses same element**\n\n```tsx\nconst loadingSkeleton = (\n  <div className=\"animate-pulse h-20 bg-gray-200\" />\n)\n\nfunction Container() {\n  return (\n    <div>\n      {loading && loadingSkeleton}\n    </div>\n  )\n}\n```\n\nThis is especially helpful for large and static SVG nodes, which can be expensive to recreate on every render.\n\n### 6.3 Optimize SVG Precision\n\nReduce SVG coordinate precision to decrease file size. The optimal precision depends on the viewBox size, but in general reducing precision should be considered.\n\n**Incorrect: excessive precision**\n\n```svg\n<path d=\"M 10.293847 20.847362 L 30.938472 40.192837\" />\n```\n\n**Correct: 1 decimal place**\n\n```svg\n<path d=\"M 10.3 20.8 L 30.9 40.2\" />\n```\n\n**Automate with SVGO:**\n\n```bash\nnpx svgo --precision=1 --multipass icon.svg\n```\n\n### 6.4 Use Activity Component for Show/Hide\n\nUse React's `<Activity>` to preserve state/DOM for expensive components that frequently toggle visibility.\n\n**Usage:**\n\n```tsx\nimport { Activity } from 'react'\n\nfunction Dropdown({ isOpen }: Props) {\n  return (\n    <Activity mode={isOpen ? 'visible' : 'hidden'}>\n      <ExpensiveMenu />\n    </Activity>\n  )\n}\n```\n\nAvoids expensive re-renders and state loss.\n\n### 6.5 Use Explicit Conditional Rendering\n\nUse explicit ternary operators (`? :`) instead of `&&` for conditional rendering when the condition can be `0`, `NaN`, or other falsy values that render.\n\n**Incorrect: renders \"0\" when count is 0**\n\n```tsx\nfunction Badge({ count }: { count: number }) {\n  return (\n    <div>\n      {count && <span className=\"badge\">{count}</span>}\n    </div>\n  )\n}\n\n// When count = 0, renders: <div>0</div>\n// When count = 5, renders: <div><span class=\"badge\">5</span></div>\n```\n\n**Correct: renders nothing when count is 0**\n\n```tsx\nfunction Badge({ count }: { count: number }) {\n  return (\n    <div>\n      {count > 0 ? <span className=\"badge\">{count}</span> : null}\n    </div>\n  )\n}\n\n// When count = 0, renders: <div></div>\n// When count = 5, renders: <div><span class=\"badge\">5</span></div>\n```\n\n---\n\n## 7. JavaScript Performance\n\n**Impact: LOW-MEDIUM**\n\nMicro-optimizations for hot paths can add up to meaningful improvements.\n\n### 7.1 Build Index Maps for Repeated Lookups\n\nMultiple `.find()` calls by the same key should use a Map.\n\n**Incorrect (O(n) per lookup):**\n\n```typescript\nfunction processOrders(orders: Order[], users: User[]) {\n  return orders.map(order => ({\n    ...order,\n    user: users.find(u => u.id === order.userId)\n  }))\n}\n```\n\n**Correct (O(1) per lookup):**\n\n```typescript\nfunction processOrders(orders: Order[], users: User[]) {\n  const userById = new Map(users.map(u => [u.id, u]))\n\n  return orders.map(order => ({\n    ...order,\n    user: userById.get(order.userId)\n  }))\n}\n```\n\nBuild map once (O(n)), then all lookups are O(1).\n\nFor 1000 orders Ã— 1000 users: 1M ops â†’ 2K ops.\n\n### 7.2 Cache Property Access in Loops\n\nCache object property lookups in hot paths.\n\n**Incorrect: 3 lookups Ã— N iterations**\n\n```typescript\nfor (let i = 0; i < arr.length; i++) {\n  process(obj.config.settings.value)\n}\n```\n\n**Correct: 1 lookup total**\n\n```typescript\nconst value = obj.config.settings.value\nconst len = arr.length\nfor (let i = 0; i < len; i++) {\n  process(value)\n}\n```\n\n### 7.3 Cache Repeated Function Calls\n\nUse a module-level Map to cache function results when the same function is called repeatedly with the same inputs during render.\n\n**Incorrect: redundant computation**\n\n```typescript\nfunction ProjectList({ projects }: { projects: Project[] }) {\n  return (\n    <div>\n      {projects.map(project => {\n        // slugify() called 100+ times for same project names\n        const slug = slugify(project.name)\n        \n        return <ProjectCard key={project.id} slug={slug} />\n      })}\n    </div>\n  )\n}\n```\n\n**Correct: cached results**\n\n```typescript\n// Module-level cache\nconst cachedSlugify = new Map<string, any>()\n\nfunction cachedSlugify(text: string): string {\n  if (cachedSlugify.has(text)) {\n    return cachedSlugify.get(text)\n  }\n  const result = slugify(text)\n  cachedSlugify.set(text, result)\n  return result\n}\n\nfunction ProjectList({ projects }: { projects: Project[] }) {\n  return (\n    <div>\n      {projects.map(project => {\n        // Computed only once per unique project name\n        const slug = cachedSlugify(project.name)\n        \n        return <ProjectCard key={project.id} slug={slug} />\n      })}\n    </div>\n  )\n}\n```\n\n**Simpler pattern for single-value functions:**\n\n```typescript\nlet isLoggedInCache: boolean | null = null\n\nfunction isLoggedIn(): boolean {\n  if (isLoggedInCache !== null) {\n    return isLoggedInCache\n  }\n  \n  isLoggedInCache = document.cookie.includes('auth=')\n  return isLoggedInCache\n}\n\n// Clear cache when auth changes\nfunction onAuthChange() {\n  isLoggedInCache = null\n}\n```\n\nUse a Map (not a hook) so it works everywhere: utilities, event handlers, not just React components.\n\nReference: [https://vercel.com/blog/how-we-made-the-vercel-dashboard-twice-as-fast](https://vercel.com/blog/how-we-made-the-vercel-dashboard-twice-as-fast)\n\n### 7.4 Cache Storage API Calls\n\n`localStorage`, `sessionStorage`, and `document.cookie` are synchronous and expensive. Cache reads in memory.\n\n**Incorrect: reads storage on every call**\n\n```typescript\nfunction getTheme() {\n  return localStorage.getItem('theme') ?? 'light'\n}\n// Called 10 times = 10 storage reads\n```\n\n**Correct: Map cache**\n\n```typescript\nconst storageCache = new Map<string, string | null>()\n\nfunction getLocalStorage(key: string) {\n  if (!storageCache.has(key)) {\n    storageCache.set(key, localStorage.getItem(key))\n  }\n  return storageCache.get(key)\n}\n\nfunction setLocalStorage(key: string, value: string) {\n  localStorage.setItem(key, value)\n  storageCache.set(key, value)  // keep cache in sync\n}\n```\n\nUse a Map (not a hook) so it works everywhere: utilities, event handlers, not just React components.\n\n**Cookie caching:**\n\n```typescript\nwindow.addEventListener('storage', (e) => {\n  if (e.key) storageCache.delete(e.key)\n})\n\ndocument.addEventListener('visibilitychange', () => {\n  if (document.visibilityState === 'visible') {\n    storageCache.clear()\n  }\n})\n```\n\n**Cookie caching:**\n\n```typescript\nwindow.addEventListener('storage', (e) => {\n  if (e.key) storageCache.delete(e.key)\n})\n\ndocument.addEventListener('visibilitychange', () => {\n  if (document.visibilityState === 'visible') {\n    storageCache.clear()\n  }\n})\n```\n\n### 7.5 Combine Multiple Array Iterations\n\nMultiple `.filter()` or `.map()` calls iterate the array multiple times. Combine into one loop.\n\n**Incorrect: 3 iterations**\n\n```typescript\nconst admins = users.filter(u => u.isAdmin)\nconst testers = users.filter(u => u.isTester)\nconst inactive = users.filter(u => !u.isActive)\n```\n\n**Correct: 1 iteration**\n\n```typescript\nconst admins: User[] = []\nconst testers: User[] = []\nconst inactive: User[] = []\n\nfor (const user of users) {\n  if (user.isAdmin) admins.push(user)\n  if (user.isTester) testers.push(user)\n  if (!user.isActive) inactive.push(user)\n}\n```\n\n### 7.6 Early Return from Functions\n\nReturn early when result is determined to skip unnecessary processing.\n\n**Incorrect: processes all items even after finding answer**\n\n```typescript\nfunction validateUsers(users: User[]) {\n  let hasError = false\n  let errorMessage = ''\n  \n  for (const user of users) {\n    if (!user.email) {\n      hasError = true\n      errorMessage = 'Email required'\n    }\n    if (!user.name) {\n      hasError = true\n      errorMessage = 'Name required'\n    }\n    // Continues checking all users even after error found\n  }\n  \n  return hasError ? { valid: false, error: errorMessage } : { valid: true }\n}\n```\n\n**Correct: returns immediately on first error**\n\n```typescript\nfunction validateUsers(users: User[]) {\n  for (const user of users) {\n    if (!user.email) {\n      return { valid: false, error: 'Email required' }\n    }\n    if (!user.name) {\n      return { valid: false, error: 'Name required' }\n    }\n  }\n  \n  return { valid: true }\n}\n```\n\n### 7.7 Hoist RegExp Creation\n\nDon't create RegExp inside render. Hoist to module scope or memoize with `useMemo()`.\n\n**Incorrect: new RegExp every render**\n\n```tsx\nfunction Highlighter({ text, query }: Props) {\n  const regex = new RegExp(`(${query})`, 'gi')\n  const parts = text.split(regex)\n  return <>{parts.map((part, i) => ...)}</>\n}\n```\n\n**Correct: memoize or hoist**\n\n```typescript\nconst regex = /foo/g\nregex.test('foo')  // true, lastIndex = 3\nregex.test('foo')  // false, lastIndex = 0\n```\n\n**Correct: memoize or hoist**\n\n```typescript\nconst regex = /foo/g\nregex.test('foo')  // true, lastIndex = 3\nregex.test('foo')  // false, lastIndex = 0\n```\n\n### 7.8 Use Set/Map for O(1) Lookups\n\nConvert arrays to Set/Map for repeated membership checks.\n\n**Incorrect (O(n) per check):**\n\n```typescript\nconst allowedIds = ['a', 'b', 'c', ...]\nitems.filter(item => allowedIds.includes(item.id))\n```\n\n**Correct (O(1) per check):**\n\n```typescript\nconst allowedIds = new Set(['a', 'b', 'c', ...])\nitems.filter(item => allowedIds.has(item.id))\n```\n\n---\n\n## 8. Advanced Patterns\n\n**Impact: LOW**\n\nAdvanced patterns for specific cases that require careful implementation.\n\n### 8.1 Store Event Handlers in Refs\n\nStore callbacks in refs when used in effects that shouldn't re-subscribe on callback changes.\n\n**Incorrect: re-subscribes on every render**\n\n```tsx\nfunction useWindowEvent(event: string, handler: () => void) {\n  useEffect(() => {\n    window.addEventListener(event, handler)\n    return () => window.removeEventListener(event, handler)\n  }, [event, handler])\n}\n```\n\n**Correct: stable subscription**\n\n```tsx\nfunction useWindowEvent(event: string, handler: () => void) {\n  const handlerRef = useRef(handler)\n  useEffect(() => {\n    handlerRef.current = handler\n  }, [handler])\n\n  useEffect(() => {\n    const listener = () => handlerRef.current()\n    window.addEventListener(event, listener)\n    return () => window.removeEventListener(event, listener)\n  }, [event])\n}\n```\n\n### 8.2 useLatest for Stable Callback Refs\n\nAccess latest values in callbacks without adding them to dependency arrays. Prevents effect re-runs while avoiding stale closures.\n\n**Implementation:**\n\n```typescript\nfunction useLatest<T>(value: T) {\n  const ref = useRef(value)\n  useEffect(() => {\n    ref.current = value\n  }, [value])\n  return ref\n}\n```\n\n**Incorrect: effect re-runs on every callback change**\n\n```tsx\nfunction SearchInput({ onSearch }: { onSearch: (q: string) => void }) {\n  const [query, setQuery] = useState('')\n\n  useEffect(() => {\n    const timeout = setTimeout(() => onSearch(query), 300)\n    return () => clearTimeout(timeout)\n  }, [query, onSearch])\n}\n```\n\n**Correct: stable effect, fresh callback**\n\n```tsx\nfunction SearchInput({ onSearch }: { onSearch: (q: string) => void }) {\n  const [query, setQuery] = useState('')\n  const onSearchRef = useLatest(onSearch)\n\n  useEffect(() => {\n    const timeout = setTimeout(() => onSearchRef.current(query), 300)\n    return () => clearTimeout(timeout)\n  }, [query])\n}\n```\n\n---\n\n## References\n\n1. [https://react.dev](https://react.dev)\n2. [https://nextjs.org](https://nextjs.org)\n3. [https://swr.vercel.app](https://swr.vercel.app)\n4. [https://github.com/shuding/better-all](https://github.com/shuding/better-all)\n5. [https://github.com/isaacs/node-lru-cache](https://github.com/isaacs/node-lru-cache)\n",
        "skills/react-best-practices/references/rules/_sections.md": "# Sections\n\nThis file defines all sections, their ordering, impact levels, and descriptions.\nThe section ID (in parentheses) is the filename prefix used to group rules.\n\n---\n\n## 1. Eliminating Waterfalls (async)\n\n**Impact:** CRITICAL  \n**Description:** Waterfalls are the #1 performance killer. Each sequential await adds full network latency. Eliminating them yields the largest gains.\n\n## 2. Bundle Size Optimization (bundle)\n\n**Impact:** CRITICAL  \n**Description:** Reducing initial bundle size improves Time to Interactive and Largest Contentful Paint.\n\n## 3. Server-Side Performance (server)\n\n**Impact:** HIGH  \n**Description:** Optimizing server-side rendering and data fetching eliminates server-side waterfalls and reduces response times.\n\n## 4. Client-Side Data Fetching (client)\n\n**Impact:** MEDIUM-HIGH  \n**Description:** Automatic deduplication and efficient data fetching patterns reduce redundant network requests.\n\n## 5. Re-render Optimization (rerender)\n\n**Impact:** MEDIUM  \n**Description:** Reducing unnecessary re-renders minimizes wasted computation and improves UI responsiveness.\n\n## 6. Rendering Performance (rendering)\n\n**Impact:** MEDIUM  \n**Description:** Optimizing the rendering process reduces the work the browser needs to do.\n\n## 7. JavaScript Performance (js)\n\n**Impact:** LOW-MEDIUM  \n**Description:** Micro-optimizations for hot paths can add up to meaningful improvements.\n\n## 8. Advanced Patterns (advanced)\n\n**Impact:** LOW  \n**Description:** Advanced patterns for specific cases that require careful implementation.\n",
        "skills/react-best-practices/references/rules/_template.md": "---\ntitle: Rule Title Here\nimpact: MEDIUM\nimpactDescription: Optional description of impact (e.g., \"20-50% improvement\")\ntags: tag1, tag2\n---\n\n## Rule Title Here\n\n**Impact: MEDIUM (optional impact description)**\n\nBrief explanation of the rule and why it matters. This should be clear and concise, explaining the performance implications.\n\n**Incorrect (description of what's wrong):**\n\n```typescript\n// Bad code example here\nconst bad = example()\n```\n\n**Correct (description of what's right):**\n\n```typescript\n// Good code example here\nconst good = example()\n```\n\nReference: [Link to documentation or resource](https://example.com)\n",
        "skills/react-best-practices/references/rules/advanced-event-handler-refs.md": "---\ntitle: Store Event Handlers in Refs\nimpact: LOW\nimpactDescription: stable subscriptions\ntags: advanced, hooks, refs, event-handlers, optimization\n---\n\n## Store Event Handlers in Refs\n\nStore callbacks in refs when used in effects that shouldn't re-subscribe on callback changes.\n\n**Incorrect (re-subscribes on every render):**\n\n```tsx\nfunction useWindowEvent(event: string, handler: () => void) {\n  useEffect(() => {\n    window.addEventListener(event, handler)\n    return () => window.removeEventListener(event, handler)\n  }, [event, handler])\n}\n```\n\n**Correct (stable subscription):**\n\n```tsx\nfunction useWindowEvent(event: string, handler: () => void) {\n  const handlerRef = useRef(handler)\n  useEffect(() => {\n    handlerRef.current = handler\n  }, [handler])\n\n  useEffect(() => {\n    const listener = () => handlerRef.current()\n    window.addEventListener(event, listener)\n    return () => window.removeEventListener(event, listener)\n  }, [event])\n}\n```\n",
        "skills/react-best-practices/references/rules/advanced-use-latest.md": "---\ntitle: useLatest for Stable Callback Refs\nimpact: LOW\nimpactDescription: prevents effect re-runs\ntags: advanced, hooks, useLatest, refs, optimization\n---\n\n## useLatest for Stable Callback Refs\n\nAccess latest values in callbacks without adding them to dependency arrays. Prevents effect re-runs while avoiding stale closures.\n\n**Implementation:**\n\n```typescript\nfunction useLatest<T>(value: T) {\n  const ref = useRef(value)\n  useEffect(() => {\n    ref.current = value\n  }, [value])\n  return ref\n}\n```\n\n**Incorrect (effect re-runs on every callback change):**\n\n```tsx\nfunction SearchInput({ onSearch }: { onSearch: (q: string) => void }) {\n  const [query, setQuery] = useState('')\n\n  useEffect(() => {\n    const timeout = setTimeout(() => onSearch(query), 300)\n    return () => clearTimeout(timeout)\n  }, [query, onSearch])\n}\n```\n\n**Correct (stable effect, fresh callback):**\n\n```tsx\nfunction SearchInput({ onSearch }: { onSearch: (q: string) => void }) {\n  const [query, setQuery] = useState('')\n  const onSearchRef = useLatest(onSearch)\n\n  useEffect(() => {\n    const timeout = setTimeout(() => onSearchRef.current(query), 300)\n    return () => clearTimeout(timeout)\n  }, [query])\n}\n```\n",
        "skills/react-best-practices/references/rules/async-api-routes.md": "---\ntitle: Prevent Waterfall Chains in API Routes\nimpact: CRITICAL\nimpactDescription: 2-10Ã— improvement\ntags: api-routes, server-actions, waterfalls, parallelization\n---\n\n## Prevent Waterfall Chains in API Routes\n\nIn API routes and Server Actions, start independent operations immediately, even if you don't await them yet.\n\n**Incorrect (config waits for auth, data waits for both):**\n\n```typescript\nexport async function GET(request: Request) {\n  const session = await auth()\n  const config = await fetchConfig()\n  const data = await fetchData(session.user.id)\n  return Response.json({ data, config })\n}\n```\n\n**Correct (auth and config start immediately):**\n\n```typescript\nexport async function GET(request: Request) {\n  const sessionPromise = auth()\n  const configPromise = fetchConfig()\n  const session = await sessionPromise\n  const [config, data] = await Promise.all([\n    configPromise,\n    fetchData(session.user.id)\n  ])\n  return Response.json({ data, config })\n}\n```\n\nFor operations with more complex dependency chains, use `better-all` to automatically maximize parallelism (see Dependency-Based Parallelization).\n",
        "skills/react-best-practices/references/rules/async-defer-await.md": "---\ntitle: Defer Await Until Needed\nimpact: HIGH\nimpactDescription: avoids blocking unused code paths\ntags: async, await, conditional, optimization\n---\n\n## Defer Await Until Needed\n\nMove `await` operations into the branches where they're actually used to avoid blocking code paths that don't need them.\n\n**Incorrect (blocks both branches):**\n\n```typescript\nasync function handleRequest(userId: string, skipProcessing: boolean) {\n  const userData = await fetchUserData(userId)\n  \n  if (skipProcessing) {\n    // Returns immediately but still waited for userData\n    return { skipped: true }\n  }\n  \n  // Only this branch uses userData\n  return processUserData(userData)\n}\n```\n\n**Correct (only blocks when needed):**\n\n```typescript\nasync function handleRequest(userId: string, skipProcessing: boolean) {\n  if (skipProcessing) {\n    // Returns immediately without waiting\n    return { skipped: true }\n  }\n  \n  // Fetch only when needed\n  const userData = await fetchUserData(userId)\n  return processUserData(userData)\n}\n```\n\n**Another example (early return optimization):**\n\n```typescript\n// Incorrect: always fetches permissions\nasync function updateResource(resourceId: string, userId: string) {\n  const permissions = await fetchPermissions(userId)\n  const resource = await getResource(resourceId)\n  \n  if (!resource) {\n    return { error: 'Not found' }\n  }\n  \n  if (!permissions.canEdit) {\n    return { error: 'Forbidden' }\n  }\n  \n  return await updateResourceData(resource, permissions)\n}\n\n// Correct: fetches only when needed\nasync function updateResource(resourceId: string, userId: string) {\n  const resource = await getResource(resourceId)\n  \n  if (!resource) {\n    return { error: 'Not found' }\n  }\n  \n  const permissions = await fetchPermissions(userId)\n  \n  if (!permissions.canEdit) {\n    return { error: 'Forbidden' }\n  }\n  \n  return await updateResourceData(resource, permissions)\n}\n```\n\nThis optimization is especially valuable when the skipped branch is frequently taken, or when the deferred operation is expensive.\n",
        "skills/react-best-practices/references/rules/async-dependencies.md": "---\ntitle: Dependency-Based Parallelization\nimpact: CRITICAL\nimpactDescription: 2-10Ã— improvement\ntags: async, parallelization, dependencies, better-all\n---\n\n## Dependency-Based Parallelization\n\nFor operations with partial dependencies, use `better-all` to maximize parallelism. It automatically starts each task at the earliest possible moment.\n\n**Incorrect (profile waits for config unnecessarily):**\n\n```typescript\nconst [user, config] = await Promise.all([\n  fetchUser(),\n  fetchConfig()\n])\nconst profile = await fetchProfile(user.id)\n```\n\n**Correct (config and profile run in parallel):**\n\n```typescript\nimport { all } from 'better-all'\n\nconst { user, config, profile } = await all({\n  async user() { return fetchUser() },\n  async config() { return fetchConfig() },\n  async profile() {\n    return fetchProfile((await this.$.user).id)\n  }\n})\n```\n\nReference: [https://github.com/shuding/better-all](https://github.com/shuding/better-all)\n",
        "skills/react-best-practices/references/rules/async-parallel.md": "---\ntitle: Promise.all() for Independent Operations\nimpact: CRITICAL\nimpactDescription: 2-10Ã— improvement\ntags: async, parallelization, promises, waterfalls\n---\n\n## Promise.all() for Independent Operations\n\nWhen async operations have no interdependencies, execute them concurrently using `Promise.all()`.\n\n**Incorrect (sequential execution, 3 round trips):**\n\n```typescript\nconst user = await fetchUser()\nconst posts = await fetchPosts()\nconst comments = await fetchComments()\n```\n\n**Correct (parallel execution, 1 round trip):**\n\n```typescript\nconst [user, posts, comments] = await Promise.all([\n  fetchUser(),\n  fetchPosts(),\n  fetchComments()\n])\n```\n",
        "skills/react-best-practices/references/rules/async-suspense-boundaries.md": "---\ntitle: Strategic Suspense Boundaries\nimpact: HIGH\nimpactDescription: faster initial paint\ntags: async, suspense, streaming, layout-shift\n---\n\n## Strategic Suspense Boundaries\n\nInstead of awaiting data in async components before returning JSX, use Suspense boundaries to show the wrapper UI faster while data loads.\n\n**Incorrect (wrapper blocked by data fetching):**\n\n```tsx\nasync function Page() {\n  const data = await fetchData() // Blocks entire page\n  \n  return (\n    <div>\n      <div>Sidebar</div>\n      <div>Header</div>\n      <div>\n        <DataDisplay data={data} />\n      </div>\n      <div>Footer</div>\n    </div>\n  )\n}\n```\n\nThe entire layout waits for data even though only the middle section needs it.\n\n**Correct (wrapper shows immediately, data streams in):**\n\n```tsx\nfunction Page() {\n  return (\n    <div>\n      <div>Sidebar</div>\n      <div>Header</div>\n      <div>\n        <Suspense fallback={<Skeleton />}>\n          <DataDisplay />\n        </Suspense>\n      </div>\n      <div>Footer</div>\n    </div>\n  )\n}\n\nasync function DataDisplay() {\n  const data = await fetchData() // Only blocks this component\n  return <div>{data.content}</div>\n}\n```\n\nSidebar, Header, and Footer render immediately. Only DataDisplay waits for data.\n\n**When NOT to use this pattern:**\n\n- Critical data needed for layout decisions (affects positioning)\n- SEO-critical content above the fold\n- Small, fast queries where suspense overhead isn't worth it\n- When you want to avoid layout shift (loading â†’ content jump)\n\n**Trade-off:** Faster initial paint vs potential layout shift. Choose based on your UX priorities.\n",
        "skills/react-best-practices/references/rules/bundle-barrel-imports.md": "---\ntitle: Avoid Barrel File Imports\nimpact: CRITICAL\nimpactDescription: 200-800ms import cost, slow builds\ntags: bundle, imports, tree-shaking, barrel-files, performance\n---\n\n## Avoid Barrel File Imports\n\nImport directly from source files instead of barrel files to avoid loading thousands of unused modules. **Barrel files** are entry points that re-export multiple modules (e.g., `index.js` that does `export * from './module'`).\n\nPopular icon and component libraries can have **up to 10,000 re-exports** in their entry file. For many React packages, **it takes 200-800ms just to import them**, affecting both development speed and production cold starts.\n\n**Why tree-shaking doesn't help:** When a library is marked as external (not bundled), the bundler can't optimize it. If you bundle it to enable tree-shaking, builds become substantially slower analyzing the entire module graph.\n\n**Incorrect (imports entire library):**\n\n```tsx\nimport { Check, X, Menu } from 'lucide-react'\n// Loads 1,583 modules, takes ~2.8s extra in dev\n// Runtime cost: 200-800ms on every cold start\n\nimport { Button, TextField } from '@mui/material'\n// Loads 2,225 modules, takes ~4.2s extra in dev\n```\n\n**Correct (imports only what you need):**\n\n```tsx\nimport Check from 'lucide-react/dist/esm/icons/check'\nimport X from 'lucide-react/dist/esm/icons/x'\nimport Menu from 'lucide-react/dist/esm/icons/menu'\n// Loads only 3 modules (~2KB vs ~1MB)\n\nimport Button from '@mui/material/Button'\nimport TextField from '@mui/material/TextField'\n// Loads only what you use\n```\n\n**Alternative (Next.js 13.5+):**\n\n```js\n// next.config.js - use optimizePackageImports\nmodule.exports = {\n  experimental: {\n    optimizePackageImports: ['lucide-react', '@mui/material']\n  }\n}\n\n// Then you can keep the ergonomic barrel imports:\nimport { Check, X, Menu } from 'lucide-react'\n// Automatically transformed to direct imports at build time\n```\n\nDirect imports provide 15-70% faster dev boot, 28% faster builds, 40% faster cold starts, and significantly faster HMR.\n\nLibraries commonly affected: `lucide-react`, `@mui/material`, `@mui/icons-material`, `@tabler/icons-react`, `react-icons`, `@headlessui/react`, `@radix-ui/react-*`, `lodash`, `ramda`, `date-fns`, `rxjs`, `react-use`.\n\nReference: [How we optimized package imports in Next.js](https://vercel.com/blog/how-we-optimized-package-imports-in-next-js)\n",
        "skills/react-best-practices/references/rules/bundle-conditional.md": "---\ntitle: Conditional Module Loading\nimpact: CRITICAL\nimpactDescription: loads large data only when needed\ntags: bundle, conditional-loading, lazy-loading\n---\n\n## Conditional Module Loading\n\nLoad large data or modules only when a feature is activated.\n\n**Example (lazy-load animation frames):**\n\n```tsx\nfunction AnimationPlayer({ enabled }: { enabled: boolean }) {\n  const [frames, setFrames] = useState<Frame[] | null>(null)\n\n  useEffect(() => {\n    if (enabled && !frames && typeof window !== 'undefined') {\n      import('./animation-frames.js')\n        .then(mod => setFrames(mod.frames))\n        .catch(() => setEnabled(false))\n    }\n  }, [enabled, frames])\n\n  if (!frames) return <Skeleton />\n  return <Canvas frames={frames} />\n}\n```\n\nThe `typeof window !== 'undefined'` check prevents bundling this module for SSR, optimizing server bundle size and build speed.\n",
        "skills/react-best-practices/references/rules/bundle-defer-third-party.md": "---\ntitle: Defer Non-Critical Third-Party Libraries\nimpact: CRITICAL\nimpactDescription: loads after hydration\ntags: bundle, third-party, analytics, defer\n---\n\n## Defer Non-Critical Third-Party Libraries\n\nAnalytics, logging, and error tracking don't block user interaction. Load them after hydration.\n\n**Incorrect (blocks initial bundle):**\n\n```tsx\nimport { Analytics } from '@vercel/analytics/react'\n\nexport default function RootLayout({ children }) {\n  return (\n    <html>\n      <body>\n        {children}\n        <Analytics />\n      </body>\n    </html>\n  )\n}\n```\n\n**Correct (loads after hydration):**\n\n```tsx\nimport dynamic from 'next/dynamic'\n\nconst Analytics = dynamic(\n  () => import('@vercel/analytics/react').then(m => m.Analytics),\n  { ssr: false }\n)\n\nexport default function RootLayout({ children }) {\n  return (\n    <html>\n      <body>\n        {children}\n        <Analytics />\n      </body>\n    </html>\n  )\n}\n```\n",
        "skills/react-best-practices/references/rules/bundle-dynamic-imports.md": "---\ntitle: Dynamic Imports for Heavy Components\nimpact: CRITICAL\nimpactDescription: directly affects TTI and LCP\ntags: bundle, dynamic-import, code-splitting, next-dynamic\n---\n\n## Dynamic Imports for Heavy Components\n\nUse `next/dynamic` to lazy-load large components not needed on initial render.\n\n**Incorrect (Monaco bundles with main chunk ~300KB):**\n\n```tsx\nimport { MonacoEditor } from './monaco-editor'\n\nfunction CodePanel({ code }: { code: string }) {\n  return <MonacoEditor value={code} />\n}\n```\n\n**Correct (Monaco loads on demand):**\n\n```tsx\nimport dynamic from 'next/dynamic'\n\nconst MonacoEditor = dynamic(\n  () => import('./monaco-editor').then(m => m.MonacoEditor),\n  { ssr: false }\n)\n\nfunction CodePanel({ code }: { code: string }) {\n  return <MonacoEditor value={code} />\n}\n```\n",
        "skills/react-best-practices/references/rules/bundle-preload.md": "---\ntitle: Preload Based on User Intent\nimpact: CRITICAL\nimpactDescription: reduces perceived latency\ntags: bundle, preload, user-intent, hover\n---\n\n## Preload Based on User Intent\n\nPreload heavy bundles before they're needed to reduce perceived latency.\n\n**Example (preload on hover/focus):**\n\n```tsx\nfunction EditorButton({ onClick }: { onClick: () => void }) {\n  const preload = () => {\n    if (typeof window !== 'undefined') {\n      void import('./monaco-editor')\n    }\n  }\n\n  return (\n    <button\n      onMouseEnter={preload}\n      onFocus={preload}\n      onClick={onClick}\n    >\n      Open Editor\n    </button>\n  )\n}\n```\n\n**Example (preload when feature flag is enabled):**\n\n```tsx\nfunction FlagsProvider({ children, flags }: Props) {\n  useEffect(() => {\n    if (flags.editorEnabled && typeof window !== 'undefined') {\n      void import('./monaco-editor').then(mod => mod.init())\n    }\n  }, [flags.editorEnabled])\n\n  return <FlagsContext.Provider value={flags}>\n    {children}\n  </FlagsContext.Provider>\n}\n```\n\nThe `typeof window !== 'undefined'` check prevents bundling preloaded modules for SSR, optimizing server bundle size and build speed.\n",
        "skills/react-best-practices/references/rules/client-event-listeners.md": "---\ntitle: Deduplicate Global Event Listeners\nimpact: MEDIUM-HIGH\nimpactDescription: single listener for N components\ntags: client, swr, event-listeners, subscription\n---\n\n## Deduplicate Global Event Listeners\n\nUse `useSWRSubscription()` to share global event listeners across component instances.\n\n**Incorrect (N instances = N listeners):**\n\n```tsx\nfunction useKeyboardShortcut(key: string, callback: () => void) {\n  useEffect(() => {\n    const handler = (e: KeyboardEvent) => {\n      if (e.metaKey && e.key === key) {\n        callback()\n      }\n    }\n    window.addEventListener('keydown', handler)\n    return () => window.removeEventListener('keydown', handler)\n  }, [key, callback])\n}\n```\n\nWhen using the `useKeyboardShortcut` hook multiple times, each instance will register a new listener.\n\n**Correct (N instances = 1 listener):**\n\n```tsx\nimport useSWRSubscription from 'swr/subscription'\n\n// Module-level Map to track callbacks per key\nconst keyCallbacks = new Map<string, Set<() => void>>()\n\nfunction useKeyboardShortcut(key: string, callback: () => void) {\n  // Register this callback in the Map\n  useEffect(() => {\n    if (!keyCallbacks.has(key)) {\n      keyCallbacks.set(key, new Set())\n    }\n    keyCallbacks.get(key)!.add(callback)\n\n    return () => {\n      const set = keyCallbacks.get(key)\n      if (set) {\n        set.delete(callback)\n        if (set.size === 0) {\n          keyCallbacks.delete(key)\n        }\n      }\n    }\n  }, [key, callback])\n\n  useSWRSubscription('global-keydown', () => {\n    const handler = (e: KeyboardEvent) => {\n      if (e.metaKey && keyCallbacks.has(e.key)) {\n        keyCallbacks.get(e.key)!.forEach(cb => cb())\n      }\n    }\n    window.addEventListener('keydown', handler)\n    return () => window.removeEventListener('keydown', handler)\n  }\n}\n\nfunction Profile() {\n  // Multiple shortcuts will share the same listener\n  useKeyboardShortcut('p', () => { /* ... */ }) \n  useKeyboardShortcut('k', () => { /* ... */ })\n  // ...\n}\n```\n",
        "skills/react-best-practices/references/rules/client-swr-dedup.md": "---\ntitle: Use SWR for Automatic Deduplication\nimpact: MEDIUM-HIGH\nimpactDescription: automatic deduplication\ntags: client, swr, deduplication, data-fetching\n---\n\n## Use SWR for Automatic Deduplication\n\nSWR enables request deduplication, caching, and revalidation across component instances.\n\n**Incorrect (no deduplication, each instance fetches):**\n\n```tsx\nfunction UserList() {\n  const [users, setUsers] = useState([])\n  useEffect(() => {\n    fetch('/api/users')\n      .then(r => r.json())\n      .then(setUsers)\n  }, [])\n}\n```\n\n**Correct (multiple instances share one request):**\n\n```tsx\nimport useSWR from 'swr'\n\nfunction UserList() {\n  const { data: users } = useSWR('/api/users', fetcher)\n}\n```\n\n**For immutable data:**\n\n```tsx\nimport { useImmutableSWR } from '@/lib/swr'\n\nfunction StaticContent() {\n  const { data } = useImmutableSWR('/api/config', fetcher)\n}\n```\n\n**For mutations:**\n\n```tsx\nimport { useSWRMutation } from 'swr/mutation'\n\nfunction UpdateButton() {\n  const { trigger } = useSWRMutation('/api/user', updateUser)\n  return <button onClick={() => trigger()}>Update</button>\n}\n```\n\nReference: [https://swr.vercel.app](https://swr.vercel.app)\n",
        "skills/react-best-practices/references/rules/js-cache-function-results.md": "---\ntitle: Cache Repeated Function Calls\nimpact: MEDIUM-HIGH\nimpactDescription: avoid redundant computation\ntags: javascript, cache, memoization, performance\n---\n\n## Cache Repeated Function Calls\n\nUse a module-level Map to cache function results when the same function is called repeatedly with the same inputs during render.\n\n**Incorrect (redundant computation):**\n\n```typescript\nfunction ProjectList({ projects }: { projects: Project[] }) {\n  return (\n    <div>\n      {projects.map(project => {\n        // slugify() called 100+ times for same project names\n        const slug = slugify(project.name)\n        \n        return <ProjectCard key={project.id} slug={slug} />\n      })}\n    </div>\n  )\n}\n```\n\n**Correct (cached results):**\n\n```typescript\n// Module-level cache\nconst cachedSlugify = new Map<string, any>()\n\nfunction cachedSlugify(text: string): string {\n  if (cachedSlugify.has(text)) {\n    return cachedSlugify.get(text)\n  }\n  const result = slugify(text)\n  cachedSlugify.set(text, result)\n  return result\n}\n\nfunction ProjectList({ projects }: { projects: Project[] }) {\n  return (\n    <div>\n      {projects.map(project => {\n        // Computed only once per unique project name\n        const slug = cachedSlugify(project.name)\n        \n        return <ProjectCard key={project.id} slug={slug} />\n      })}\n    </div>\n  )\n}\n```\n\n**Simpler pattern for single-value functions:**\n\n```typescript\nlet isLoggedInCache: boolean | null = null\n\nfunction isLoggedIn(): boolean {\n  if (isLoggedInCache !== null) {\n    return isLoggedInCache\n  }\n  \n  isLoggedInCache = document.cookie.includes('auth=')\n  return isLoggedInCache\n}\n\n// Clear cache when auth changes\nfunction onAuthChange() {\n  isLoggedInCache = null\n}\n```\n\nUse a Map (not a hook) so it works everywhere: utilities, event handlers, not just React components.\n\nReference: [How we made the Vercel Dashboard twice as fast](https://vercel.com/blog/how-we-made-the-vercel-dashboard-twice-as-fast)\n",
        "skills/react-best-practices/references/rules/js-cache-property-access.md": "---\ntitle: Cache Property Access in Loops\nimpact: LOW-MEDIUM\nimpactDescription: reduces lookups\ntags: javascript, loops, optimization, caching\n---\n\n## Cache Property Access in Loops\n\nCache object property lookups in hot paths.\n\n**Incorrect (3 lookups Ã— N iterations):**\n\n```typescript\nfor (let i = 0; i < arr.length; i++) {\n  process(obj.config.settings.value)\n}\n```\n\n**Correct (1 lookup total):**\n\n```typescript\nconst value = obj.config.settings.value\nconst len = arr.length\nfor (let i = 0; i < len; i++) {\n  process(value)\n}\n```\n",
        "skills/react-best-practices/references/rules/js-cache-storage.md": "---\ntitle: Cache Storage API Calls\nimpact: LOW-MEDIUM\nimpactDescription: reduces expensive I/O\ntags: javascript, localStorage, storage, caching, performance\n---\n\n## Cache Storage API Calls\n\n`localStorage`, `sessionStorage`, and `document.cookie` are synchronous and expensive. Cache reads in memory.\n\n**Incorrect (reads storage on every call):**\n\n```typescript\nfunction getTheme() {\n  return localStorage.getItem('theme') ?? 'light'\n}\n// Called 10 times = 10 storage reads\n```\n\n**Correct (Map cache):**\n\n```typescript\nconst storageCache = new Map<string, string | null>()\n\nfunction getLocalStorage(key: string) {\n  if (!storageCache.has(key)) {\n    storageCache.set(key, localStorage.getItem(key))\n  }\n  return storageCache.get(key)\n}\n\nfunction setLocalStorage(key: string, value: string) {\n  localStorage.setItem(key, value)\n  storageCache.set(key, value)  // keep cache in sync\n}\n```\n\nUse a Map (not a hook) so it works everywhere: utilities, event handlers, not just React components.\n\n**Cookie caching:**\n\n```typescript\nlet cookieCache: Record<string, string> | null = null\n\nfunction getCookie(name: string) {\n  if (!cookieCache) {\n    cookieCache = Object.fromEntries(\n      document.cookie.split('; ').map(c => c.split('='))\n    )\n  }\n  return cookieCache[name]\n}\n```\n\n**Important:** If storage can change externally (another tab, server-set cookies), invalidate cache:\n\n```typescript\nwindow.addEventListener('storage', (e) => {\n  if (e.key) storageCache.delete(e.key)\n})\n\ndocument.addEventListener('visibilitychange', () => {\n  if (document.visibilityState === 'visible') {\n    storageCache.clear()\n  }\n})\n```\n",
        "skills/react-best-practices/references/rules/js-combine-iterations.md": "---\ntitle: Combine Multiple Array Iterations\nimpact: LOW-MEDIUM\nimpactDescription: reduces iterations\ntags: javascript, arrays, loops, performance\n---\n\n## Combine Multiple Array Iterations\n\nMultiple `.filter()` or `.map()` calls iterate the array multiple times. Combine into one loop.\n\n**Incorrect (3 iterations):**\n\n```typescript\nconst admins = users.filter(u => u.isAdmin)\nconst testers = users.filter(u => u.isTester)\nconst inactive = users.filter(u => !u.isActive)\n```\n\n**Correct (1 iteration):**\n\n```typescript\nconst admins: User[] = []\nconst testers: User[] = []\nconst inactive: User[] = []\n\nfor (const user of users) {\n  if (user.isAdmin) admins.push(user)\n  if (user.isTester) testers.push(user)\n  if (!user.isActive) inactive.push(user)\n}\n```\n",
        "skills/react-best-practices/references/rules/js-early-exit.md": "---\ntitle: Early Return from Functions\nimpact: LOW-MEDIUM\nimpactDescription: avoids unnecessary computation\ntags: javascript, functions, optimization, early-return\n---\n\n## Early Return from Functions\n\nReturn early when result is determined to skip unnecessary processing.\n\n**Incorrect (processes all items even after finding answer):**\n\n```typescript\nfunction validateUsers(users: User[]) {\n  let hasError = false\n  let errorMessage = ''\n  \n  for (const user of users) {\n    if (!user.email) {\n      hasError = true\n      errorMessage = 'Email required'\n    }\n    if (!user.name) {\n      hasError = true\n      errorMessage = 'Name required'\n    }\n    // Continues checking all users even after error found\n  }\n  \n  return hasError ? { valid: false, error: errorMessage } : { valid: true }\n}\n```\n\n**Correct (returns immediately on first error):**\n\n```typescript\nfunction validateUsers(users: User[]) {\n  for (const user of users) {\n    if (!user.email) {\n      return { valid: false, error: 'Email required' }\n    }\n    if (!user.name) {\n      return { valid: false, error: 'Name required' }\n    }\n  }\n  \n  return { valid: true }\n}\n```\n",
        "skills/react-best-practices/references/rules/js-hoist-regexp.md": "---\ntitle: Hoist RegExp Creation\nimpact: LOW-MEDIUM\nimpactDescription: avoids recreation\ntags: javascript, regexp, optimization, memoization\n---\n\n## Hoist RegExp Creation\n\nDon't create RegExp inside render. Hoist to module scope or memoize with `useMemo()`.\n\n**Incorrect (new RegExp every render):**\n\n```tsx\nfunction Highlighter({ text, query }: Props) {\n  const regex = new RegExp(`(${query})`, 'gi')\n  const parts = text.split(regex)\n  return <>{parts.map((part, i) => ...)}</>\n}\n```\n\n**Correct (memoize or hoist):**\n\n```tsx\nconst EMAIL_REGEX = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n\nfunction Highlighter({ text, query }: Props) {\n  const regex = useMemo(\n    () => new RegExp(`(${escapeRegex(query)})`, 'gi'),\n    [query]\n  )\n  const parts = text.split(regex)\n  return <>{parts.map((part, i) => ...)}</>\n}\n```\n\n**Warning:** Global regex (`/g`) has mutable `lastIndex` state:\n\n```typescript\nconst regex = /foo/g\nregex.test('foo')  // true, lastIndex = 3\nregex.test('foo')  // false, lastIndex = 0\n```\n",
        "skills/react-best-practices/references/rules/js-index-maps.md": "---\ntitle: Build Index Maps for Repeated Lookups\nimpact: LOW-MEDIUM\nimpactDescription: 1M ops to 2K ops\ntags: javascript, map, indexing, optimization, performance\n---\n\n## Build Index Maps for Repeated Lookups\n\nMultiple `.find()` calls by the same key should use a Map.\n\n**Incorrect (O(n) per lookup):**\n\n```typescript\nfunction processOrders(orders: Order[], users: User[]) {\n  return orders.map(order => ({\n    ...order,\n    user: users.find(u => u.id === order.userId)\n  }))\n}\n```\n\n**Correct (O(1) per lookup):**\n\n```typescript\nfunction processOrders(orders: Order[], users: User[]) {\n  const userById = new Map(users.map(u => [u.id, u]))\n\n  return orders.map(order => ({\n    ...order,\n    user: userById.get(order.userId)\n  }))\n}\n```\n\nBuild map once (O(n)), then all lookups are O(1).\nFor 1000 orders Ã— 1000 users: 1M ops â†’ 2K ops.\n",
        "skills/react-best-practices/references/rules/js-set-map-lookups.md": "---\ntitle: Use Set/Map for O(1) Lookups\nimpact: LOW-MEDIUM\nimpactDescription: O(n) to O(1)\ntags: javascript, set, map, data-structures, performance\n---\n\n## Use Set/Map for O(1) Lookups\n\nConvert arrays to Set/Map for repeated membership checks.\n\n**Incorrect (O(n) per check):**\n\n```typescript\nconst allowedIds = ['a', 'b', 'c', ...]\nitems.filter(item => allowedIds.includes(item.id))\n```\n\n**Correct (O(1) per check):**\n\n```typescript\nconst allowedIds = new Set(['a', 'b', 'c', ...])\nitems.filter(item => allowedIds.has(item.id))\n```\n",
        "skills/react-best-practices/references/rules/rendering-activity.md": "---\ntitle: Use Activity Component for Show/Hide\nimpact: MEDIUM\nimpactDescription: preserves state/DOM\ntags: rendering, activity, visibility, state-preservation\n---\n\n## Use Activity Component for Show/Hide\n\nUse React's `<Activity>` to preserve state/DOM for expensive components that frequently toggle visibility.\n\n**Usage:**\n\n```tsx\nimport { Activity } from 'react'\n\nfunction Dropdown({ isOpen }: Props) {\n  return (\n    <Activity mode={isOpen ? 'visible' : 'hidden'}>\n      <ExpensiveMenu />\n    </Activity>\n  )\n}\n```\n\nAvoids expensive re-renders and state loss.\n",
        "skills/react-best-practices/references/rules/rendering-conditional-render.md": "---\ntitle: Use Explicit Conditional Rendering\nimpact: MEDIUM\nimpactDescription: prevents rendering 0 or NaN\ntags: rendering, conditional, jsx, falsy-values\n---\n\n## Use Explicit Conditional Rendering\n\nUse explicit ternary operators (`? :`) instead of `&&` for conditional rendering when the condition can be `0`, `NaN`, or other falsy values that render.\n\n**Incorrect (renders \"0\" when count is 0):**\n\n```tsx\nfunction Badge({ count }: { count: number }) {\n  return (\n    <div>\n      {count && <span className=\"badge\">{count}</span>}\n    </div>\n  )\n}\n\n// When count = 0, renders: <div>0</div>\n// When count = 5, renders: <div><span class=\"badge\">5</span></div>\n```\n\n**Correct (renders nothing when count is 0):**\n\n```tsx\nfunction Badge({ count }: { count: number }) {\n  return (\n    <div>\n      {count > 0 ? <span className=\"badge\">{count}</span> : null}\n    </div>\n  )\n}\n\n// When count = 0, renders: <div></div>\n// When count = 5, renders: <div><span class=\"badge\">5</span></div>\n```\n",
        "skills/react-best-practices/references/rules/rendering-content-visibility.md": "---\ntitle: CSS content-visibility for Long Lists\nimpact: MEDIUM\nimpactDescription: 10Ã— faster initial render\ntags: rendering, css, content-visibility, long-lists\n---\n\n## CSS content-visibility for Long Lists\n\nApply `content-visibility: auto` to defer off-screen rendering.\n\n**CSS:**\n\n```css\n.message-item {\n  content-visibility: auto;\n  contain-intrinsic-size: 0 80px;\n}\n```\n\n**Example:**\n\n```tsx\nfunction MessageList({ messages }: { messages: Message[] }) {\n  return (\n    <div className=\"overflow-y-auto h-screen\">\n      {messages.map(msg => (\n        <div key={msg.id} className=\"message-item\">\n          <Avatar user={msg.author} />\n          <div>{msg.content}</div>\n        </div>\n      ))}\n    </div>\n  )\n}\n```\n\nFor 1000 messages, browser skips layout/paint for ~990 off-screen items (10Ã— faster initial render).\n",
        "skills/react-best-practices/references/rules/rendering-hoist-jsx.md": "---\ntitle: Hoist Static JSX Elements\nimpact: MEDIUM\nimpactDescription: avoids re-creation\ntags: rendering, jsx, static, optimization\n---\n\n## Hoist Static JSX Elements\n\nExtract static JSX outside components to avoid re-creation.\n\n**Incorrect (recreates element every render):**\n\n```tsx\nfunction LoadingSkeleton() {\n  return <div className=\"animate-pulse h-20 bg-gray-200\" />\n}\n\nfunction Container() {\n  return (\n    <div>\n      {loading && <LoadingSkeleton />}\n    </div>\n  )\n}\n```\n\n**Correct (reuses same element):**\n\n```tsx\nconst loadingSkeleton = (\n  <div className=\"animate-pulse h-20 bg-gray-200\" />\n)\n\nfunction Container() {\n  return (\n    <div>\n      {loading && loadingSkeleton}\n    </div>\n  )\n}\n```\n\nThis is especially helpful for large and static SVG nodes, which can be expensive to recreate on every render.\n",
        "skills/react-best-practices/references/rules/rendering-svg-precision.md": "---\ntitle: Optimize SVG Precision\nimpact: MEDIUM\nimpactDescription: reduces file size\ntags: rendering, svg, optimization, svgo\n---\n\n## Optimize SVG Precision\n\nReduce SVG coordinate precision to decrease file size. The optimal precision depends on the viewBox size, but in general reducing precision should be considered.\n\n**Incorrect (excessive precision):**\n\n```svg\n<path d=\"M 10.293847 20.847362 L 30.938472 40.192837\" />\n```\n\n**Correct (1 decimal place):**\n\n```svg\n<path d=\"M 10.3 20.8 L 30.9 40.2\" />\n```\n\n**Automate with SVGO:**\n\n```bash\nnpx svgo --precision=1 --multipass icon.svg\n```\n",
        "skills/react-best-practices/references/rules/rerender-defer-reads.md": "---\ntitle: Defer State Reads to Usage Point\nimpact: MEDIUM\nimpactDescription: avoids unnecessary subscriptions\ntags: rerender, searchParams, localStorage, optimization\n---\n\n## Defer State Reads to Usage Point\n\nDon't subscribe to dynamic state (searchParams, localStorage) if you only read it inside callbacks.\n\n**Incorrect (subscribes to all searchParams changes):**\n\n```tsx\nfunction ShareButton({ chatId }: { chatId: string }) {\n  const searchParams = useSearchParams()\n\n  const handleShare = () => {\n    const ref = searchParams.get('ref')\n    shareChat(chatId, { ref })\n  }\n\n  return <button onClick={handleShare}>Share</button>\n}\n```\n\n**Correct (reads on demand, no subscription):**\n\n```tsx\nfunction ShareButton({ chatId }: { chatId: string }) {\n  const handleShare = () => {\n    const params = new URLSearchParams(window.location.search)\n    const ref = params.get('ref')\n    shareChat(chatId, { ref })\n  }\n\n  return <button onClick={handleShare}>Share</button>\n}\n```\n",
        "skills/react-best-practices/references/rules/rerender-dependencies.md": "---\ntitle: Narrow Effect Dependencies\nimpact: MEDIUM\nimpactDescription: minimizes effect re-runs\ntags: rerender, useEffect, dependencies, optimization\n---\n\n## Narrow Effect Dependencies\n\nSpecify primitive dependencies instead of objects to minimize effect re-runs.\n\n**Incorrect (re-runs on any user field change):**\n\n```tsx\nuseEffect(() => {\n  console.log(user.id)\n}, [user])\n```\n\n**Correct (re-runs only when id changes):**\n\n```tsx\nuseEffect(() => {\n  console.log(user.id)\n}, [user.id])\n```\n\n**For derived state, compute outside effect:**\n\n```tsx\n// Incorrect: runs on width=767, 766, 765...\nuseEffect(() => {\n  if (width < 768) {\n    enableMobileMode()\n  }\n}, [width])\n\n// Correct: runs only on boolean transition\nconst isMobile = width < 768\nuseEffect(() => {\n  if (isMobile) {\n    enableMobileMode()\n  }\n}, [isMobile])\n```\n",
        "skills/react-best-practices/references/rules/rerender-derived-state.md": "---\ntitle: Subscribe to Derived State\nimpact: MEDIUM\nimpactDescription: reduces re-render frequency\ntags: rerender, derived-state, media-query, optimization\n---\n\n## Subscribe to Derived State\n\nSubscribe to derived boolean state instead of continuous values to reduce re-render frequency.\n\n**Incorrect (re-renders on every pixel change):**\n\n```tsx\nfunction Sidebar() {\n  const width = useWindowWidth()  // updates continuously\n  const isMobile = width < 768\n  return <nav className={isMobile ? 'mobile' : 'desktop'}>\n}\n```\n\n**Correct (re-renders only when boolean changes):**\n\n```tsx\nfunction Sidebar() {\n  const isMobile = useMediaQuery('(max-width: 767px)')\n  return <nav className={isMobile ? 'mobile' : 'desktop'}>\n}\n```\n",
        "skills/react-best-practices/references/rules/rerender-lazy-state-init.md": "---\ntitle: Use Lazy State Initialization\nimpact: MEDIUM\nimpactDescription: wasted computation on every render\ntags: react, hooks, useState, performance, initialization\n---\n\n## Use Lazy State Initialization\n\nPass a function to `useState` for expensive initial values. Without the function form, the initializer runs on every render even though the value is only used once.\n\n**Incorrect (runs on every render):**\n\n```tsx\nfunction FilteredList({ items }: { items: Item[] }) {\n  // buildSearchIndex() runs on EVERY render, even after initialization\n  const [searchIndex, setSearchIndex] = useState(buildSearchIndex(items))\n  const [query, setQuery] = useState('')\n  \n  // When query changes, buildSearchIndex runs again unnecessarily\n  return <SearchResults index={searchIndex} query={query} />\n}\n\nfunction UserProfile() {\n  // JSON.parse runs on every render\n  const [settings, setSettings] = useState(\n    JSON.parse(localStorage.getItem('settings') || '{}')\n  )\n  \n  return <SettingsForm settings={settings} onChange={setSettings} />\n}\n```\n\n**Correct (runs only once):**\n\n```tsx\nfunction FilteredList({ items }: { items: Item[] }) {\n  // buildSearchIndex() runs ONLY on initial render\n  const [searchIndex, setSearchIndex] = useState(() => buildSearchIndex(items))\n  const [query, setQuery] = useState('')\n  \n  return <SearchResults index={searchIndex} query={query} />\n}\n\nfunction UserProfile() {\n  // JSON.parse runs only on initial render\n  const [settings, setSettings] = useState(() => {\n    const stored = localStorage.getItem('settings')\n    return stored ? JSON.parse(stored) : {}\n  })\n  \n  return <SettingsForm settings={settings} onChange={setSettings} />\n}\n```\n\nUse lazy initialization when computing initial values from localStorage/sessionStorage, building data structures (indexes, maps), reading from the DOM, or performing heavy transformations.\n\nFor simple primitives (`useState(0)`), direct references (`useState(props.value)`), or cheap literals (`useState({})`), the function form is unnecessary.\n",
        "skills/react-best-practices/references/rules/rerender-memo.md": "---\ntitle: Extract to Memoized Components\nimpact: MEDIUM\nimpactDescription: enables early returns\ntags: rerender, memo, useMemo, optimization\n---\n\n## Extract to Memoized Components\n\nExtract expensive work into memoized components to enable early returns before computation.\n\n**Incorrect (computes avatar even when loading):**\n\n```tsx\nfunction Profile({ user, loading }: Props) {\n  const avatar = useMemo(() => {\n    const id = computeAvatarId(user)\n    return <Avatar id={id} />\n  }, [user])\n\n  if (loading) return <Skeleton />\n  return <div>{avatar}</div>\n}\n```\n\n**Correct (skips computation when loading):**\n\n```tsx\nconst UserAvatar = memo(function UserAvatar({ user }: { user: User }) {\n  const id = useMemo(() => computeAvatarId(user), [user])\n  return <Avatar id={id} />\n})\n\nfunction Profile({ user, loading }: Props) {\n  if (loading) return <Skeleton />\n  return (\n    <div>\n      <UserAvatar user={user} />\n    </div>\n  )\n}\n```\n",
        "skills/react-best-practices/references/rules/rerender-transitions.md": "---\ntitle: Use Transitions for Non-Urgent Updates\nimpact: MEDIUM\nimpactDescription: maintains UI responsiveness\ntags: rerender, transitions, startTransition, performance\n---\n\n## Use Transitions for Non-Urgent Updates\n\nMark frequent, non-urgent state updates as transitions to maintain UI responsiveness.\n\n**Incorrect (blocks UI on every scroll):**\n\n```tsx\nfunction ScrollTracker() {\n  const [scrollY, setScrollY] = useState(0)\n  useEffect(() => {\n    const handler = () => setScrollY(window.scrollY)\n    window.addEventListener('scroll', handler, { passive: true })\n    return () => window.removeEventListener('scroll', handler)\n  }, [])\n}\n```\n\n**Correct (non-blocking updates):**\n\n```tsx\nimport { startTransition } from 'react'\n\nfunction ScrollTracker() {\n  const [scrollY, setScrollY] = useState(0)\n  useEffect(() => {\n    const handler = () => {\n      startTransition(() => setScrollY(window.scrollY))\n    }\n    window.addEventListener('scroll', handler, { passive: true })\n    return () => window.removeEventListener('scroll', handler)\n  }, [])\n}\n```\n",
        "skills/react-best-practices/references/rules/server-cache-lru.md": "---\ntitle: Cross-Request LRU Caching\nimpact: HIGH\nimpactDescription: caches across requests\ntags: server, cache, lru, cross-request\n---\n\n## Cross-Request LRU Caching\n\n`React.cache()` only works within one request. For data shared across sequential requests (user clicks button A then button B), use an LRU cache.\n\n**Implementation:**\n\n```typescript\nimport { LRUCache } from 'lru-cache'\n\nconst cache = new LRUCache<string, any>({\n  max: 1000,\n  ttl: 5 * 60 * 1000  // 5 minutes\n})\n\nexport async function getUser(id: string) {\n  const cached = cache.get(id)\n  if (cached) return cached\n\n  const user = await db.user.findUnique({ where: { id } })\n  cache.set(id, user)\n  return user\n}\n\n// Request 1: DB query, result cached\n// Request 2: cache hit, no DB query\n```\n\nUse when sequential user actions hit multiple endpoints needing the same data within seconds. In serverless, consider Redis for cross-process caching.\n\nReference: [https://github.com/isaacs/node-lru-cache](https://github.com/isaacs/node-lru-cache)\n",
        "skills/react-best-practices/references/rules/server-cache-react.md": "---\ntitle: Per-Request Deduplication with React.cache()\nimpact: HIGH\nimpactDescription: deduplicates within request\ntags: server, cache, react-cache, deduplication\n---\n\n## Per-Request Deduplication with React.cache()\n\nUse `React.cache()` for server-side request deduplication. Authentication and database queries benefit most.\n\n**Usage:**\n\n```typescript\nimport { cache } from 'react'\n\nexport const getCurrentUser = cache(async () => {\n  const session = await auth()\n  if (!session?.user?.id) return null\n  return await db.user.findUnique({\n    where: { id: session.user.id }\n  })\n})\n```\n\nWithin a single request, multiple calls to `getCurrentUser()` execute the query only once.\n",
        "skills/react-best-practices/references/rules/server-parallel-fetching.md": "---\ntitle: Parallel Data Fetching with Component Composition\nimpact: HIGH\nimpactDescription: eliminates server-side waterfalls\ntags: server, rsc, parallel-fetching, composition\n---\n\n## Parallel Data Fetching with Component Composition\n\nReact Server Components execute sequentially within a tree. Restructure with composition to parallelize data fetching.\n\n**Incorrect (Sidebar waits for Page's fetch to complete):**\n\n```tsx\nexport default async function Page() {\n  const header = await fetchHeader()\n  return (\n    <div>\n      <div>{header}</div>\n      <Sidebar />\n    </div>\n  )\n}\n\nasync function Sidebar() {\n  const items = await fetchSidebarItems()\n  return <nav>{items.map(renderItem)}</nav>\n}\n```\n\n**Correct (both fetch simultaneously):**\n\n```tsx\nasync function Header() {\n  const data = await fetchHeader()\n  return <div>{data}</div>\n}\n\nasync function Sidebar() {\n  const items = await fetchSidebarItems()\n  return <nav>{items.map(renderItem)}</nav>\n}\n\nexport default function Page() {\n  return (\n    <div>\n      <Header />\n      <Sidebar />\n    </div>\n  )\n}\n```\n\n**Alternative with children prop:**\n\n```tsx\nasync function Layout({ children }: { children: ReactNode }) {\n  const header = await fetchHeader()\n  return (\n    <div>\n      <div>{header}</div>\n      {children}\n    </div>\n  )\n}\n\nasync function Sidebar() {\n  const items = await fetchSidebarItems()\n  return <nav>{items.map(renderItem)}</nav>\n}\n\nexport default function Page() {\n  return (\n    <Layout>\n      <Sidebar />\n    </Layout>\n  )\n}\n```\n",
        "skills/react-best-practices/references/rules/server-serialization.md": "---\ntitle: Minimize Serialization at RSC Boundaries\nimpact: HIGH\nimpactDescription: reduces data transfer size\ntags: server, rsc, serialization, props\n---\n\n## Minimize Serialization at RSC Boundaries\n\nThe React Server/Client boundary serializes all object properties. Only pass fields that the client actually uses.\n\n**Incorrect (serializes all 50 fields):**\n\n```tsx\nasync function Page() {\n  const user = await fetchUser()  // 50 fields\n  return <Profile user={user} />\n}\n\n'use client'\nfunction Profile({ user }: { user: User }) {\n  return <div>{user.name}</div>  // uses 1 field\n}\n```\n\n**Correct (serializes only 1 field):**\n\n```tsx\nasync function Page() {\n  const user = await fetchUser()\n  return <Profile name={user.name} />\n}\n\n'use client'\nfunction Profile({ name }: { name: string }) {\n  return <div>{name}</div>\n}\n```\n",
        "skills/react-next-modern/SKILL.md": "---\nname: react-next-modern\ndescription: Enforce modern React 19 and Next.js App Router patterns - server-first data fetching, minimal useEffect, Server Components, Server Actions, and form hooks. Use when reviewing React/Next.js code, migrating legacy patterns, or building new features with App Router.\nallowed-tools: Read, Grep, Glob, Edit\n---\n\n# React and Next.js Modern Best Practices (2025)\n\n## Purpose\n\nThis skill enforces the architectural shift from client-side synchronization to **async-native** patterns using React 19 and Next.js App Router. The goal is to eliminate unnecessary `useEffect` usage, move data fetching to the server, and leverage modern primitives like Server Components and Server Actions.\n\n## Core Philosophy: The Paradigm Shift\n\n**Legacy Era (Pre-2024)**: Client components mount, then sync with server via `useEffect`\n**Modern Era (2025)**: Server components execute async logic, stream results to client\n\nThis shift eliminates:\n- Waterfall network requests\n- Race conditions in effects\n- Layout shifts from loading states\n- Manual state management for async operations\n- Prop drilling for data\n\n## When to Use This Skill\n\nActivate when:\n- Writing new React/Next.js code\n- Migrating from Pages Router to App Router\n- Refactoring `useEffect`-heavy components\n- Implementing forms and mutations\n- Reviewing data fetching patterns\n- Setting up authentication or authorization\n- Optimizing React performance\n\n## How to Use This Skill\n\nWhen reviewing React/Next.js code:\n\n1. **Identify the stack**\n   - Check `package.json` for Next.js version\n   - Detect if `app/` directory exists (App Router)\n   - Note if React 19 is being used\n\n2. **Scan for code smells**\n   - Search for: `useEffect`, `useState`, `useCallback`, `useMemo`\n   - Look for: `fetch` in Client Components, API routes used for internal data\n   - Find: `getServerSideProps`, `getStaticProps` (legacy patterns)\n\n3. **Apply the checklists below**\n   - For each issue, propose a modern alternative\n   - Show before/after code examples\n\n4. **Prioritize fixes**\n   - First: Correctness and side effect bugs\n   - Second: Architecture and data fetching\n   - Third: Performance and ergonomics\n\n---\n\n## Checklist 1: useEffect - The \"Escape Hatch\" Rule\n\n### The Modern Definition\n\n**useEffect is ONLY for synchronizing with external systems outside React's control.**\n\nIt is NOT for:\n- âŒ Data fetching on component mount\n- âŒ Deriving state from props or other state\n- âŒ Mirroring props into state\n- âŒ Business logic that could be pure functions\n- âŒ Generic \"on mount\" initialization\n\nIt IS for:\n- âœ… WebSocket subscriptions\n- âœ… Browser APIs (localStorage, IntersectionObserver, ResizeObserver)\n- âœ… DOM event listeners (window.resize, scroll)\n- âœ… Third-party widgets (maps, chat, analytics)\n- âœ… Timers tied to React state (setTimeout, setInterval)\n\n### Anti-Pattern #1: Deriving State\n\n**âŒ Bad - Effect for derived state:**\n\n```tsx\nconst [firstName, setFirstName] = useState(\"John\")\nconst [lastName, setLastName] = useState(\"Doe\")\nconst [fullName, setFullName] = useState(\"\")\n\nuseEffect(() => {\n  setFullName(`${firstName} ${lastName}`)\n}, [firstName, lastName])\n```\n\n**âœ… Good - Calculate during render:**\n\n```tsx\nconst [firstName, setFirstName] = useState(\"John\")\nconst [lastName, setLastName] = useState(\"Doe\")\n\nconst fullName = `${firstName} ${lastName}` // Just compute it!\n```\n\n**Why**: Eliminates an entire render cycle and guarantees consistency.\n\n### Anti-Pattern #2: Event Logic in Effects\n\n**âŒ Bad - Using effect for user actions:**\n\n```tsx\nconst [submitted, setSubmitted] = useState(false)\n\nuseEffect(() => {\n  if (submitted) {\n    submitForm(formData)\n  }\n}, [submitted, formData])\n\n// Later:\n<button onClick={() => setSubmitted(true)}>Submit</button>\n```\n\n**âœ… Good - Direct event handler:**\n\n```tsx\nconst handleSubmit = async (e: React.FormEvent) => {\n  e.preventDefault()\n  await submitForm(formData)\n}\n\n// Later:\n<form onSubmit={handleSubmit}>\n  <button type=\"submit\">Submit</button>\n</form>\n```\n\n**Why**: User actions should trigger in event handlers, not via state flags.\n\n### Anti-Pattern #3: Data Fetching on Mount\n\n**âŒ Bad - Client-side fetch in effect:**\n\n```tsx\n\"use client\"\n\nfunction ProductsPage() {\n  const [products, setProducts] = useState<Product[]>([])\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    fetch('/api/products')\n      .then(res => res.json())\n      .then(data => {\n        setProducts(data)\n        setLoading(false)\n      })\n  }, [])\n\n  if (loading) return <Spinner />\n  return <ProductsList products={products} />\n}\n```\n\n**âœ… Good - Server Component with async/await:**\n\n```tsx\n// app/products/page.tsx - Server Component (no \"use client\")\nimport { db } from '@/lib/db'\n\nexport default async function ProductsPage() {\n  // This runs on the server, directly queries DB\n  const products = await db.select().from(productsTable)\n\n  return <ProductsList products={products} />\n}\n```\n\n**Why**:\n- Eliminates loading states\n- Runs closer to data source (low latency)\n- No client bundle size increase\n- Content is server-rendered (better SEO)\n\n### Legitimate useEffect Patterns\n\n**âœ… Good - External system subscription:**\n\n```tsx\n\"use client\"\n\nfunction ChatRoom({ roomId }: { roomId: string }) {\n  useEffect(() => {\n    const connection = createConnection(roomId)\n    connection.connect()\n\n    return () => {\n      connection.disconnect() // Cleanup\n    }\n  }, [roomId])\n\n  return <div>Connected to {roomId}</div>\n}\n```\n\n**âœ… Good - Browser API sync:**\n\n```tsx\n\"use client\"\n\nfunction useOnlineStatus() {\n  const [isOnline, setIsOnline] = useState(true)\n\n  useEffect(() => {\n    const handleOnline = () => setIsOnline(true)\n    const handleOffline = () => setIsOnline(false)\n\n    window.addEventListener('online', handleOnline)\n    window.addEventListener('offline', handleOffline)\n\n    return () => {\n      window.removeEventListener('online', handleOnline)\n      window.removeEventListener('offline', handleOffline)\n    }\n  }, [])\n\n  return isOnline\n}\n```\n\n### Custom Hooks for Repeated Effects\n\nWhen the same effect pattern appears multiple times:\n\n**âœ… Extract to custom hook:**\n\n```tsx\n// hooks/useMediaQuery.ts\n\"use client\"\n\nexport function useMediaQuery(query: string): boolean {\n  const [matches, setMatches] = useState(false)\n\n  useEffect(() => {\n    const media = window.matchMedia(query)\n    setMatches(media.matches)\n\n    const listener = (e: MediaQueryListEvent) => setMatches(e.matches)\n    media.addEventListener('change', listener)\n\n    return () => media.removeEventListener('change', listener)\n  }, [query])\n\n  return matches\n}\n\n// Usage:\nconst isMobile = useMediaQuery('(max-width: 768px)')\n```\n\n---\n\n## Checklist 2: Server Components and Data Fetching\n\n### Server Components by Default\n\nIn Next.js App Router (`app/` directory):\n\n**âœ… Default: Server Component (no directive)**\n\n```tsx\n// app/dashboard/page.tsx\nimport { db } from '@/lib/db'\n\nexport default async function DashboardPage() {\n  // Direct database access - runs on server\n  const stats = await db.query.stats.findFirst()\n\n  return <div>Revenue: ${stats.revenue}</div>\n}\n```\n\n**âœ… Opt-in: Client Component (with directive)**\n\n```tsx\n\"use client\" // Only add when you need interactivity\n\nimport { useState } from 'react'\n\nexport default function Counter() {\n  const [count, setCount] = useState(0)\n\n  return <button onClick={() => setCount(count + 1)}>{count}</button>\n}\n```\n\n### Rules for Server vs Client Components\n\n| Feature | Server Component | Client Component |\n|---------|------------------|------------------|\n| **Directive** | None (default) | `\"use client\"` |\n| **Data fetching** | `async/await` DB queries | `use()` or data libraries |\n| **Interactivity** | âŒ No event handlers | âœ… onClick, onChange, etc. |\n| **React hooks** | âŒ No useState, useEffect | âœ… All hooks available |\n| **Bundle size** | âœ… Zero JS shipped | âŒ Increases bundle |\n| **Browser APIs** | âŒ No window, localStorage | âœ… Full access |\n| **Environment vars** | âœ… Private vars safe | âš ï¸ Only NEXT_PUBLIC_* |\n\n### Request Memoization: End of Prop Drilling\n\n**Problem**: Multiple components need the same data. Legacy solution: prop drilling or Context.\n\n**Solution**: Request memoization with `React.cache`.\n\n**âœ… Modern pattern - No prop drilling:**\n\n```tsx\n// lib/data.ts\nimport { cache } from 'react'\nimport { db } from './db'\n\n// Wrap in cache() for automatic request memoization\nexport const getCurrentUser = cache(async () => {\n  return await db.query.users.findFirst({ where: ... })\n})\n```\n\n```tsx\n// app/layout.tsx\nimport { getCurrentUser } from '@/lib/data'\n\nexport default async function RootLayout({ children }) {\n  const user = await getCurrentUser() // Call #1\n\n  return (\n    <html>\n      <Header user={user} />\n      {children}\n    </html>\n  )\n}\n```\n\n```tsx\n// app/profile/page.tsx\nimport { getCurrentUser } from '@/lib/data'\n\nexport default async function ProfilePage() {\n  const user = await getCurrentUser() // Call #2 - Same request, cached!\n\n  return <div>Email: {user.email}</div>\n}\n```\n\n**Why**: Both components call `getCurrentUser()`, but the DB query executes only once per request. No props, no Context, no drilling.\n\n### The use() API: Streaming Promises to Client\n\n**Pattern**: Server Component starts a query, Client Component displays it.\n\n**âœ… Server Component (initiates fetch):**\n\n```tsx\n// app/search/page.tsx\nimport { db } from '@/lib/db'\nimport { SearchResults } from './search-results'\n\nexport default async function SearchPage() {\n  // Don't await - pass the promise directly\n  const resultsPromise = db.query.products.findMany()\n\n  return (\n    <Suspense fallback={<ResultsSkeleton />}>\n      <SearchResults promise={resultsPromise} />\n    </Suspense>\n  )\n}\n```\n\n**âœ… Client Component (unwraps promise):**\n\n```tsx\n// app/search/search-results.tsx\n\"use client\"\n\nimport { use } from 'react'\nimport type { Product } from '@/lib/db'\n\nexport function SearchResults({ promise }: { promise: Promise<Product[]> }) {\n  // use() unwraps the promise - suspends until resolved\n  const results = use(promise)\n\n  return (\n    <ul>\n      {results.map(product => (\n        <li key={product.id}>{product.name}</li>\n      ))}\n    </ul>\n  )\n}\n```\n\n**Why**:\n- Initial HTML ships immediately (with fallback)\n- Data streams in as server resolves the query\n- Improves First Contentful Paint (FCP)\n\n### Client/Server Component Composition\n\n**âŒ Bad - Can't import Server Component in Client:**\n\n```tsx\n\"use client\"\n\nimport { ServerDetails } from './server-details' // ERROR!\n\nexport function ClientCard() {\n  return (\n    <div onClick={...}>\n      <ServerDetails /> {/* This won't work */}\n    </div>\n  )\n}\n```\n\n**âœ… Good - Pass Server Component as children:**\n\n```tsx\n// app/page.tsx (Server Component)\nimport { ClientCard } from './client-card'\nimport { ServerDetails } from './server-details'\n\nexport default function Page() {\n  return (\n    <ClientCard>\n      <ServerDetails /> {/* Composed in Server Component */}\n    </ClientCard>\n  )\n}\n```\n\n```tsx\n// client-card.tsx\n\"use client\"\n\nexport function ClientCard({ children }: { children: React.ReactNode }) {\n  return (\n    <div onClick={...}>\n      {children} {/* Server Component renders here */}\n    </div>\n  )\n}\n```\n\n---\n\n## Checklist 3: Server Actions and Mutations\n\n### Server Actions vs Route Handlers\n\n| Use Case | Tool | Why |\n|----------|------|-----|\n| **Form submission** | Server Action | Integrated with React, auto cache revalidation |\n| **UI mutation (like, delete)** | Server Action | Type-safe, works without JS (progressive) |\n| **Public API endpoint** | Route Handler | Mobile app, webhooks, third-party access |\n| **Webhook receiver** | Route Handler | External system, not tied to UI |\n\n### The React 19 Form Hooks Trinity\n\n#### 1. useActionState - Form State Management\n\nReplaces manual `useState` for form errors and submission.\n\n**âœ… Server Action:**\n\n```tsx\n// actions/auth.ts\n\"use server\"\n\nimport { z } from 'zod'\n\nconst loginSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(8)\n})\n\nexport async function loginAction(prevState: any, formData: FormData) {\n  // Validate input\n  const parsed = loginSchema.safeParse({\n    email: formData.get('email'),\n    password: formData.get('password')\n  })\n\n  if (!parsed.success) {\n    return { errors: parsed.error.flatten().fieldErrors }\n  }\n\n  // Perform login\n  const result = await login(parsed.data)\n\n  if (!result.success) {\n    return { errors: { _form: ['Invalid credentials'] } }\n  }\n\n  redirect('/dashboard')\n}\n```\n\n**âœ… Client Component (form):**\n\n```tsx\n\"use client\"\n\nimport { useActionState } from 'react'\nimport { loginAction } from '@/actions/auth'\n\nexport function LoginForm() {\n  const [state, formAction, isPending] = useActionState(loginAction, null)\n\n  return (\n    <form action={formAction}>\n      <input name=\"email\" type=\"email\" />\n      {state?.errors?.email && <span>{state.errors.email}</span>}\n\n      <input name=\"password\" type=\"password\" />\n      {state?.errors?.password && <span>{state.errors.password}</span>}\n\n      <button type=\"submit\" disabled={isPending}>\n        {isPending ? 'Logging in...' : 'Log in'}\n      </button>\n\n      {state?.errors?._form && <span>{state.errors._form}</span>}\n    </form>\n  )\n}\n```\n\n**Key Points**:\n- Server Action signature: `(prevState, formData) => newState`\n- `isPending` tracks submission automatically\n- Form works without JavaScript (progressive enhancement)\n\n#### 2. useFormStatus - Child Component UI\n\nAllows any child of a `<form>` to access the form's pending state.\n\n**âœ… Extract submit button:**\n\n```tsx\n\"use client\"\n\nimport { useFormStatus } from 'react-dom'\n\nexport function SubmitButton() {\n  const { pending } = useFormStatus()\n\n  return (\n    <button type=\"submit\" disabled={pending}>\n      {pending ? 'Submitting...' : 'Submit'}\n    </button>\n  )\n}\n```\n\n**âœ… Use in form:**\n\n```tsx\n<form action={formAction}>\n  <input name=\"title\" />\n  <SubmitButton /> {/* Automatically knows form state */}\n</form>\n```\n\n**Constraint**: Must be used in a *child* component, not the same component that renders `<form>`.\n\n#### 3. useOptimistic - Instant UI Updates\n\nUpdates UI immediately while Server Action processes.\n\n**âœ… Optimistic like button:**\n\n```tsx\n\"use client\"\n\nimport { useOptimistic } from 'react'\nimport { likePost } from '@/actions/posts'\n\nexport function LikeButton({ postId, initialLikes }: Props) {\n  const [optimisticLikes, addOptimisticLike] = useOptimistic(\n    initialLikes,\n    (state, amount: number) => state + amount\n  )\n\n  return (\n    <form\n      action={async () => {\n        // Update UI instantly\n        addOptimisticLike(1)\n\n        // Server Action runs in background\n        await likePost(postId)\n      }}\n    >\n      <button type=\"submit\">â¤ï¸ {optimisticLikes}</button>\n    </form>\n  )\n}\n```\n\n**Behavior**:\n- UI updates immediately when button clicked\n- Server Action processes in background\n- If success: parent re-renders with real data, optimistic state discarded\n- If failure: optimistic update automatically rolls back\n\n---\n\n## Checklist 4: Security Standards for Server Actions\n\n### Rule 1: Always Validate Input\n\n**âŒ Bad - Trusting FormData:**\n\n```tsx\n\"use server\"\n\nexport async function updateUser(formData: FormData) {\n  const email = formData.get('email') // Could be anything!\n  await db.update(users).set({ email })\n}\n```\n\n**âœ… Good - Zod validation:**\n\n```tsx\n\"use server\"\n\nimport { z } from 'zod'\n\nconst updateUserSchema = z.object({\n  email: z.string().email(),\n  name: z.string().min(2).max(100)\n})\n\nexport async function updateUser(formData: FormData) {\n  const parsed = updateUserSchema.safeParse({\n    email: formData.get('email'),\n    name: formData.get('name')\n  })\n\n  if (!parsed.success) {\n    return { errors: parsed.error.flatten().fieldErrors }\n  }\n\n  await db.update(users).set(parsed.data)\n  return { success: true }\n}\n```\n\n### Rule 2: Always Authenticate\n\n**âŒ Bad - No auth check:**\n\n```tsx\n\"use server\"\n\nexport async function deletePost(postId: string) {\n  await db.delete(posts).where(eq(posts.id, postId))\n}\n```\n\n**âœ… Good - Auth check first:**\n\n```tsx\n\"use server\"\n\nimport { auth } from '@/lib/auth'\n\nexport async function deletePost(postId: string) {\n  const session = await auth()\n\n  if (!session?.user) {\n    throw new Error('Unauthorized')\n  }\n\n  // Verify ownership\n  const post = await db.query.posts.findFirst({\n    where: eq(posts.id, postId)\n  })\n\n  if (post.authorId !== session.user.id) {\n    throw new Error('Forbidden')\n  }\n\n  await db.delete(posts).where(eq(posts.id, postId))\n  revalidatePath('/posts')\n}\n```\n\n### Rule 3: Module-Level Actions (Not Inline)\n\n**âŒ Bad - Inline action with closure:**\n\n```tsx\nexport default async function Page() {\n  const secretKey = process.env.SECRET_KEY // Sensitive!\n\n  async function dangerousAction() {\n    \"use server\"\n    // This closure is encrypted but sent to client\n    console.log(secretKey) // Risky!\n  }\n\n  return <form action={dangerousAction}>...</form>\n}\n```\n\n**âœ… Good - Module-level action:**\n\n```tsx\n// actions/posts.ts\n\"use server\"\n\nexport async function createPost(formData: FormData) {\n  const secretKey = process.env.SECRET_KEY // Stays on server\n  // Safe - no closure, explicit arguments only\n}\n```\n\n```tsx\n// app/page.tsx\nimport { createPost } from '@/actions/posts'\n\nexport default function Page() {\n  return <form action={createPost}>...</form>\n}\n```\n\n### Rule 4: Rate Limiting\n\nAdd rate limiting to prevent abuse:\n\n```tsx\n\"use server\"\n\nimport { ratelimit } from '@/lib/rate-limit'\n\nexport async function sendEmail(formData: FormData) {\n  const session = await auth()\n  if (!session?.user) throw new Error('Unauthorized')\n\n  const { success } = await ratelimit.limit(session.user.id)\n  if (!success) {\n    return { error: 'Too many requests. Try again later.' }\n  }\n\n  // Proceed with action...\n}\n```\n\n---\n\n## Checklist 5: Performance Optimization\n\n### Eliminate Client-Side Waterfalls\n\n**âŒ Bad - Sequential client fetches:**\n\n```tsx\n\"use client\"\n\nfunction Dashboard() {\n  const [user, setUser] = useState(null)\n  const [posts, setPosts] = useState([])\n\n  useEffect(() => {\n    fetch('/api/user').then(r => r.json()).then(setUser)\n  }, [])\n\n  useEffect(() => {\n    if (user) {\n      // Waits for user fetch!\n      fetch(`/api/posts?userId=${user.id}`).then(r => r.json()).then(setPosts)\n    }\n  }, [user])\n\n  return <div>...</div>\n}\n```\n\n**âœ… Good - Parallel server fetches:**\n\n```tsx\n// app/dashboard/page.tsx\nimport { db } from '@/lib/db'\n\nexport default async function Dashboard() {\n  // Both queries run in parallel on server\n  const [user, posts] = await Promise.all([\n    db.query.users.findFirst(),\n    db.query.posts.findMany()\n  ])\n\n  return <DashboardUI user={user} posts={posts} />\n}\n```\n\n### Bundle Size Optimization\n\n**âœ… Lazy load heavy Client Components:**\n\n```tsx\nimport dynamic from 'next/dynamic'\n\nconst RichTextEditor = dynamic(() => import('@/components/editor'), {\n  loading: () => <p>Loading editor...</p>,\n  ssr: false // Don't render on server\n})\n\nexport default function Page() {\n  return <RichTextEditor />\n}\n```\n\n**âœ… Keep heavy libraries in Server Components:**\n\n```tsx\n// Server Component - markdown lib stays on server\nimport { marked } from 'marked'\n\nexport default async function BlogPost({ slug }: Props) {\n  const post = await getPost(slug)\n  const html = marked(post.content) // Runs on server\n\n  return <div dangerouslySetInnerHTML={{ __html: html }} />\n}\n```\n\n### React Compiler (React 19)\n\nWith the React Compiler enabled:\n\n- âœ… Automatically memoizes components and values\n- âœ… Eliminates most `useMemo` and `useCallback`\n- âœ… Focuses on business logic, not performance plumbing\n\n**Before (manual memoization):**\n\n```tsx\nconst sortedUsers = useMemo(() => {\n  return users.sort((a, b) => a.name.localeCompare(b.name))\n}, [users])\n\nconst handleClick = useCallback(() => {\n  console.log('clicked')\n}, [])\n```\n\n**After (React Compiler handles it):**\n\n```tsx\n// Just write normal code - compiler optimizes\nconst sortedUsers = users.sort((a, b) => a.name.localeCompare(b.name))\n\nconst handleClick = () => {\n  console.log('clicked')\n}\n```\n\n---\n\n## Checklist 6: Migration from Legacy Patterns\n\n### Class Components â†’ Function Components\n\n**âŒ Legacy class:**\n\n```tsx\nclass UserProfile extends React.Component {\n  state = { user: null }\n\n  componentDidMount() {\n    fetchUser().then(user => this.setState({ user }))\n  }\n\n  render() {\n    return <div>{this.state.user?.name}</div>\n  }\n}\n```\n\n**âœ… Modern function component:**\n\n```tsx\n// Server Component - no hooks needed!\nexport default async function UserProfile() {\n  const user = await fetchUser()\n  return <div>{user.name}</div>\n}\n```\n\n### getServerSideProps â†’ Server Component\n\n**âŒ Legacy Pages Router:**\n\n```tsx\n// pages/products.tsx\nexport async function getServerSideProps() {\n  const products = await db.query.products.findMany()\n  return { props: { products } }\n}\n\nexport default function ProductsPage({ products }) {\n  return <ProductsList products={products} />\n}\n```\n\n**âœ… Modern App Router:**\n\n```tsx\n// app/products/page.tsx\nexport default async function ProductsPage() {\n  const products = await db.query.products.findMany()\n  return <ProductsList products={products} />\n}\n```\n\n**Benefits**: Simpler, fewer concepts, more composable.\n\n### API Routes â†’ Server Actions\n\n**âŒ Legacy API route:**\n\n```tsx\n// pages/api/users.ts\nexport default async function handler(req, res) {\n  if (req.method === 'POST') {\n    const { name, email } = req.body\n    const user = await createUser({ name, email })\n    res.json({ user })\n  }\n}\n```\n\n**âœ… Modern Server Action:**\n\n```tsx\n// actions/users.ts\n\"use server\"\n\nexport async function createUserAction(formData: FormData) {\n  const user = await createUser({\n    name: formData.get('name'),\n    email: formData.get('email')\n  })\n\n  revalidatePath('/users')\n  return { success: true, user }\n}\n```\n\n---\n\n## Quick Reference: Decision Matrix\n\n### When to use each pattern:\n\n| Scenario | Solution | Key Tool |\n|----------|----------|----------|\n| **Initial page data** | Server Component async/await | `await db.query` |\n| **Interactive list/form** | Client Component + Server Action | `useActionState` |\n| **Real-time polling** | Client Component + TanStack Query | `useQuery({ refetchInterval })` |\n| **Optimistic update** | Client Component | `useOptimistic` |\n| **WebSocket/external sub** | Client Component | `useEffect` + cleanup |\n| **Browser API sync** | Custom hook | `useSyncExternalStore` |\n| **Public API endpoint** | Route Handler | `app/api/route.ts` |\n| **Form with validation** | Server Action + Zod | `useActionState` |\n| **Derived value** | Render calculation | `const x = a + b` |\n| **User event logic** | Event handler | `onClick`, `onSubmit` |\n\n---\n\n## Response Format for Code Reviews\n\nWhen using this skill for code review:\n\n### 1. Summary\nHigh-level assessment of how modern the codebase is and where the biggest wins are.\n\n### 2. Structured Review\n\n**A. useEffect and Side Effects**\n- Issues found: List any unnecessary effects\n- Suggested refactors: Show concrete alternatives\n- Code examples: Before/after for at least one\n\n**B. Data Fetching and Server Usage**\n- Issues found: Client-side fetching, API routes for internal data\n- Suggested refactors: Move to Server Components\n- Code examples: Server Component implementation\n\n**C. Hooks and State Management**\n- Issues found: Unnecessary useState, missing memoization\n- Suggested refactors: Derive state, use form hooks\n- Code examples: useActionState implementation\n\n**D. Component Structure**\n- Issues found: Large components, improper Client/Server boundaries\n- Suggested refactors: Split components, composition patterns\n- Code examples: Proper component architecture\n\n### 3. Next Steps\nPrioritized list of actionable items:\n- \"Refactor user profile page data fetching to Server Component\"\n- \"Replace useEffect-based form handling with useActionState\"\n- \"Extract useMediaQuery custom hook for responsive logic\"\n- \"Add Zod validation to all Server Actions\"\n\n---\n\n## Common Mistakes to Avoid\n\n### 1. \"use client\" at Top Level\n\n**âŒ Bad:**\n```tsx\n\"use client\" // Entire tree is client-side!\n\nexport default function Layout({ children }) {\n  return <div>{children}</div>\n}\n```\n\n**âœ… Good:**\n```tsx\n// Layout is server component\nexport default function Layout({ children }) {\n  return (\n    <div>\n      <InteractiveHeader /> {/* Only this is \"use client\" */}\n      {children}\n    </div>\n  )\n}\n```\n\n### 2. Mixing Server and Client Imports\n\n**âŒ Bad:**\n```tsx\n\"use client\"\n\nimport { db } from '@/lib/db' // ERROR: Can't import server code\n\nexport function ClientComponent() {\n  // db is not available in browser!\n}\n```\n\n**âœ… Good:**\n```tsx\n// Pass data from Server Component as props\nexport function ClientComponent({ data }: { data: Data }) {\n  // Use the data here\n}\n```\n\n### 3. Not Handling Errors\n\n**âŒ Bad:**\n```tsx\n\"use server\"\n\nexport async function deleteUser(userId: string) {\n  await db.delete(users).where(eq(users.id, userId))\n  // No error handling!\n}\n```\n\n**âœ… Good:**\n```tsx\n\"use server\"\n\nexport async function deleteUser(userId: string) {\n  try {\n    const session = await auth()\n    if (!session?.user) {\n      return { error: 'Unauthorized' }\n    }\n\n    await db.delete(users).where(eq(users.id, userId))\n    revalidatePath('/users')\n\n    return { success: true }\n  } catch (error) {\n    console.error('Delete user failed:', error)\n    return { error: 'Failed to delete user' }\n  }\n}\n```\n\n---\n\n## Additional Resources\n\n- [React 19 Docs - You Might Not Need an Effect](https://react.dev/learn/you-might-not-need-an-effect)\n- [Next.js App Router Documentation](https://nextjs.org/docs/app)\n- [React Server Components RFC](https://github.com/reactjs/rfcs/blob/main/text/0188-server-components.md)\n- [Server Actions and Mutations](https://nextjs.org/docs/app/building-your-application/data-fetching/server-actions-and-mutations)\n\n---\n\n## Examples\n\n### Example 1: Complete Form with Server Action\n\n**Server Action:**\n\n```tsx\n// actions/create-post.ts\n\"use server\"\n\nimport { z } from 'zod'\nimport { auth } from '@/lib/auth'\nimport { db } from '@/lib/db'\nimport { revalidatePath } from 'next/cache'\n\nconst createPostSchema = z.object({\n  title: z.string().min(3).max(100),\n  content: z.string().min(10)\n})\n\nexport async function createPostAction(prevState: any, formData: FormData) {\n  const session = await auth()\n  if (!session?.user) {\n    return { errors: { _form: ['You must be logged in'] } }\n  }\n\n  const parsed = createPostSchema.safeParse({\n    title: formData.get('title'),\n    content: formData.get('content')\n  })\n\n  if (!parsed.success) {\n    return { errors: parsed.error.flatten().fieldErrors }\n  }\n\n  try {\n    await db.insert(posts).values({\n      ...parsed.data,\n      authorId: session.user.id\n    })\n\n    revalidatePath('/posts')\n    return { success: true }\n  } catch (error) {\n    return { errors: { _form: ['Failed to create post'] } }\n  }\n}\n```\n\n**Form Component:**\n\n```tsx\n// components/create-post-form.tsx\n\"use client\"\n\nimport { useActionState } from 'react'\nimport { useFormStatus } from 'react-dom'\nimport { createPostAction } from '@/actions/create-post'\n\nfunction SubmitButton() {\n  const { pending } = useFormStatus()\n  return (\n    <button type=\"submit\" disabled={pending}>\n      {pending ? 'Creating...' : 'Create Post'}\n    </button>\n  )\n}\n\nexport function CreatePostForm() {\n  const [state, formAction] = useActionState(createPostAction, null)\n\n  return (\n    <form action={formAction} className=\"space-y-4\">\n      <div>\n        <label htmlFor=\"title\">Title</label>\n        <input id=\"title\" name=\"title\" type=\"text\" required />\n        {state?.errors?.title && (\n          <p className=\"error\">{state.errors.title}</p>\n        )}\n      </div>\n\n      <div>\n        <label htmlFor=\"content\">Content</label>\n        <textarea id=\"content\" name=\"content\" required />\n        {state?.errors?.content && (\n          <p className=\"error\">{state.errors.content}</p>\n        )}\n      </div>\n\n      {state?.errors?._form && (\n        <p className=\"error\">{state.errors._form}</p>\n      )}\n\n      {state?.success && <p className=\"success\">Post created!</p>}\n\n      <SubmitButton />\n    </form>\n  )\n}\n```\n\n### Example 2: Optimistic Updates\n\n```tsx\n// components/like-button.tsx\n\"use client\"\n\nimport { useOptimistic } from 'react'\nimport { likePost } from '@/actions/posts'\n\ninterface Props {\n  postId: string\n  initialLikes: number\n  userHasLiked: boolean\n}\n\nexport function LikeButton({ postId, initialLikes, userHasLiked }: Props) {\n  const [optimisticLikes, addOptimistic] = useOptimistic(\n    { likes: initialLikes, liked: userHasLiked },\n    (state, newLiked: boolean) => ({\n      likes: state.likes + (newLiked ? 1 : -1),\n      liked: newLiked\n    })\n  )\n\n  return (\n    <form\n      action={async () => {\n        const newLiked = !optimisticLikes.liked\n        addOptimistic(newLiked)\n        await likePost(postId, newLiked)\n      }}\n    >\n      <button type=\"submit\">\n        {optimisticLikes.liked ? 'â¤ï¸' : 'ğŸ¤'} {optimisticLikes.likes}\n      </button>\n    </form>\n  )\n}\n```\n\n---\n\n## Summary: The 2025 React Mental Model\n\n**Data flows from Server â†’ Client**\n- Server Components fetch and render\n- Client Components add interactivity\n- Never fetch in effects\n\n**Mutations flow from Client â†’ Server â†’ Client**\n- User triggers action in Client Component\n- Server Action processes on server\n- Results stream back to Client Component\n\n**Effects are for external systems only**\n- WebSockets, timers, browser APIs\n- Not for data, not for business logic\n- Use custom hooks for repeated patterns\n\n**Forms are declarative**\n- `<form action={serverAction}>` - no event handlers\n- `useActionState` for state/errors\n- `useFormStatus` for pending UI\n- `useOptimistic` for instant feedback\n\nThis is the modern React architecture: **Async-Native, Server-First, Effect-Minimal.**\n",
        "skills/ui-ux-guidelines/AGENTS.md": "# UI/UX Guidelines - Agent Integration Reference\n\n## Contents\n- Purpose and activation patterns\n- Integration with other CodeWarden skills\n- Priority levels for violations\n- Vercel-specific guidelines handling\n- Common review workflows\n\n---\n\n## Purpose\n\nThe UI/UX Guidelines skill enforces best practices for accessible, performant, and delightful interfaces. This reference helps Claude Code agents:\n- Understand when to activate the skill\n- Apply guidelines in context\n- Integrate with other CodeWarden skills\n- Prioritize findings appropriately\n\n## When to Activate\n\n### Automatic Activation Triggers\n\nThe skill should activate when:\n- **User mentions**: \"review UI\", \"check accessibility\", \"improve UX\", \"review form\", \"check interactions\"\n- **File context**: Working with `.tsx`, `.jsx`, `.vue`, or `.svelte` files containing UI components\n- **Code patterns**: Forms, inputs, buttons, navigation, animations, modals, dialogs\n\n### Manual Invocation\n\nUsers can explicitly request:\n- \"Review this component for accessibility\"\n- \"Check if this follows UI/UX best practices\"\n- \"Improve the user experience of this form\"\n- \"Verify keyboard navigation works correctly\"\n\n## Integration with Other Skills\n\n### With Ultracite (Code Quality)\n\n**Ultracite focuses on:**\n- Type safety (no `any`, proper TypeScript patterns)\n- Code structure and organization\n- Linting rules (unused variables, consistent formatting)\n\n**UI/UX Guidelines focuses on:**\n- Accessibility attributes (`aria-label`, semantic HTML)\n- User interactions (keyboard navigation, touch targets)\n- Visual design (contrast, spacing, responsive behavior)\n\n**Together:** Ensure components are both technically correct AND user-friendly.\n\n**Example workflow:**\n1. Ultracite: Check TypeScript types, proper React patterns\n2. UI/UX: Check accessibility, keyboard support, mobile responsiveness\n3. Result: Type-safe, accessible, delightful component\n\n### With React Next Modern (Architecture)\n\n**React Next Modern focuses on:**\n- Server Components vs Client Components\n- Data fetching patterns (async Server Components)\n- Server Actions for mutations\n- Performance optimization (bundle size, waterfalls)\n\n**UI/UX Guidelines focuses on:**\n- Client-side interactions and animations\n- Form behavior and validation\n- Progressive enhancement\n- Visual feedback and loading states\n\n**Together:** Build server-rendered, accessible, interactive applications.\n\n**Example workflow:**\n1. React Next: Ensure proper Server/Client boundary, async data fetching\n2. UI/UX: Add client-side interactivity, form validation, loading states\n3. Result: Fast, accessible, interactive application\n\n### Combined Review Pattern\n\nWhen reviewing UI code, all three skills work together:\n\n```\n1. Ultracite Review\n   - Type safety âœ“\n   - No linting errors âœ“\n   - Proper React patterns âœ“\n\n2. React Next Review\n   - Server Component for data fetching âœ“\n   - Server Action for form submission âœ“\n   - No client-side data fetching âœ“\n\n3. UI/UX Review\n   - Keyboard navigation âœ“\n   - ARIA labels âœ“\n   - Mobile touch targets âœ“\n   - Loading states âœ“\n   - Error handling âœ“\n```\n\n## Priority Levels\n\n### Critical (Must Fix)\n\n**Accessibility violations:**\n- Missing keyboard navigation\n- Missing or incorrect ARIA labels\n- Insufficient color contrast (fails APCA minimum)\n- Missing focus indicators\n- Form inputs without labels\n\n**Security issues:**\n- Blocking password managers unnecessarily\n- Missing autocomplete attributes for sensitive fields\n- XSS vulnerabilities in user-generated content\n\n**Performance blockers:**\n- Layout thrashing (reading/writing layout properties in loops)\n- Missing image dimensions causing CLS\n- Animations without `prefers-reduced-motion` support\n\n**Examples:**\n```tsx\n// CRITICAL: Missing keyboard support\n<div onClick={handleClick}>Click me</div>\n\n// CRITICAL: Icon button without label\n<button><TrashIcon /></button>\n\n// CRITICAL: Blocking password manager\n<input type=\"password\" autoComplete=\"off\" />\n```\n\n### High (Should Fix)\n\n**Suboptimal UX:**\n- Small hit targets (<44px on mobile)\n- Missing loading states or feedback\n- Poor error messages (vague, no guidance)\n- Missing progressive enhancement\n\n**Form issues:**\n- No validation feedback\n- Submit button doesn't disable during submission\n- Missing unsaved changes warning\n\n**Examples:**\n```tsx\n// HIGH: Small mobile hit target\n<button className=\"w-4 h-4\">Ã—</button>\n\n// HIGH: Vague error message\n<div>Error occurred</div>\n\n// HIGH: No loading state\n<button onClick={handleSubmit}>Submit</button>\n```\n\n### Medium (Consider Fixing)\n\n**Style consistency:**\n- Non-layered shadows\n- Nested radii don't match parent\n- Inconsistent color hue in borders/shadows\n\n**Copywriting:**\n- Vercel-specific style guide violations (if not using Vercel brand)\n- Passive voice in button labels\n- Inconsistent terminology\n\n**Edge cases:**\n- Missing overflow handling for very long content\n- Suboptimal tooltip timing\n\n**Examples:**\n```tsx\n// MEDIUM: Flat shadow (could be layered)\n<div className=\"shadow-lg\">...</div>\n\n// MEDIUM: Passive button label\n<button>Deployment will be created</button>\n```\n\n## Vercel-Specific Guidelines\n\nThe **Copywriting Guidelines** section reflects Vercel's internal style guide. When reviewing for other companies:\n\n**Always apply (universal principles):**\n- Error messages should guide recovery\n- Button labels should be specific, not generic\n- Use positive language (\"Try again\" vs \"Failed\")\n- Avoid ambiguity\n\n**Apply selectively (Vercel-specific style):**\n- Title Case for headings (vs sentence case)\n- Numerals for all numbers (vs spelling out small numbers)\n- `&` instead of \"and\" in UI text\n- Specific placeholder formats\n\n**Example:**\n```tsx\n// Universal (always apply): Specific, actionable button\n<button>Save API Key</button>  // âœ“ Good\n<button>Continue</button>       // âœ— Vague\n\n// Vercel-specific (optional): Title Case\n<h2>Deploy Your Project</h2>   // Vercel style\n<h2>Deploy your project</h2>   // Also acceptable\n```\n\n## Common Review Workflows\n\n### Workflow 1: Form Review\n\nWhen reviewing a form component:\n\n1. **Check Ultracite rules**\n   - Proper TypeScript types for form data\n   - No `any` types\n   - Form validation schema properly typed\n\n2. **Check React Next rules**\n   - Using Server Action for submission?\n   - Progressive enhancement (works without JS)?\n   - Proper error handling and revalidation?\n\n3. **Check UI/UX rules**\n   - All inputs have labels?\n   - Keyboard navigation works (Tab, Enter)?\n   - Error messages inline next to fields?\n   - Submit button shows loading state?\n   - Password manager compatible?\n   - Touch targets â‰¥44px on mobile?\n\n4. **Report findings by priority**\n   - Critical: Missing labels, blocked password managers\n   - High: No loading state, poor error messages\n   - Medium: Copywriting style inconsistencies\n\n### Workflow 2: Interactive Component Review\n\nWhen reviewing buttons, modals, dialogs, or interactive widgets:\n\n1. **Check Ultracite rules**\n   - Proper types for props and state\n   - No unused variables or imports\n\n2. **Check UI/UX rules**\n   - Keyboard support (Esc to close, Tab to navigate)?\n   - Focus management (trap focus in modal, return focus on close)?\n   - ARIA attributes correct?\n   - Touch targets adequate?\n   - Loading/disabled states handled?\n\n3. **Check animations (if present)**\n   - `prefers-reduced-motion` support?\n   - Using compositor-friendly properties?\n   - Not using `transition: all`?\n\n### Workflow 3: Responsive Layout Review\n\nWhen reviewing responsive layouts:\n\n1. **Check breakpoints**\n   - Mobile (â‰¤640px): Touch targets â‰¥44px?\n   - Tablet (641-1024px): Layout adapts gracefully?\n   - Desktop (>1024px): Content doesn't stretch too wide?\n\n2. **Check safe areas**\n   - Mobile notches/insets respected?\n   - Using `env(safe-area-inset-*)` where needed?\n\n3. **Check overflow**\n   - No unwanted scrollbars?\n   - Long content handled gracefully?\n   - Tested with very long user-generated content?\n\n### Workflow 4: Performance Review\n\nWhen reviewing for performance:\n\n1. **Check React Next rules**\n   - No client-side data fetching that could be Server Component?\n   - No request waterfalls?\n   - Proper code splitting?\n\n2. **Check UI/UX performance rules**\n   - Images have dimensions (no CLS)?\n   - Large lists virtualized?\n   - Expensive work moved to Web Workers?\n   - Animations use `transform`/`opacity` only?\n\n## Example Agent Responses\n\n### Example 1: Accessibility Violation (Critical)\n\n```\nFound CRITICAL accessibility violation in LoginForm.tsx:47\n\nâŒ Icon button without accessible label:\n<button onClick={handleClose}><XIcon /></button>\n\nâœ“ Fix: Add descriptive aria-label:\n<button onClick={handleClose} aria-label=\"Close dialog\"><XIcon /></button>\n\nPriority: CRITICAL\nReason: Screen reader users cannot understand button purpose\nReference: SKILL.md line 136\n```\n\n### Example 2: Performance Issue (Critical)\n\n```\nFound CRITICAL performance issue in ProductList.tsx:23\n\nâŒ Missing image dimensions causing CLS:\n<img src={product.image} alt={product.name} />\n\nâœ“ Fix: Add explicit dimensions:\n<img\n  src={product.image}\n  alt={product.name}\n  width={400}\n  height={300}\n/>\n\nPriority: CRITICAL\nReason: Causes layout shift, hurts Core Web Vitals\nReference: SKILL.md line 153\n```\n\n### Example 3: Copywriting Issue (Medium)\n\n```\nFound MEDIUM copywriting issue in DeployButton.tsx:12\n\nâŒ Passive, vague button label:\n<button>Your deployment will be created</button>\n\nâœ“ Fix: Active, specific label:\n<button>Create Deployment</button>\n\nPriority: MEDIUM\nReason: Vercel style prefers active voice; \"Deploy\" more concise\nReference: SKILL.md line 183 (Copywriting Guidelines)\nNote: This is a Vercel-specific style preference\n```\n\n## Summary\n\nUse this reference to:\n- **Activate skill** when reviewing UI/UX code\n- **Integrate** with Ultracite and React Next Modern skills\n- **Prioritize** findings (Critical > High > Medium)\n- **Handle** Vercel-specific guidelines appropriately\n- **Follow** common review workflows for consistency\n\nThe UI/UX Guidelines skill ensures interfaces are accessible, performant, and delightful while working seamlessly with CodeWarden's other quality enforcement skills.\n",
        "skills/ui-ux-guidelines/SKILL.md": "---\nname: ui-ux-guidelines\ndescription: Implementation details for accessible, performant interfaces. Use alongside vercel-design-guidelines for detailed technical guidance on interactions, animations, and forms.\nallowed-tools: Read, Grep, Glob, Edit\n---\n\n# UI/UX Implementation Details\n\n> **Note:** For high-level design rules (hit targets, focus rings, contrast, etc.), defer to `vercel-design-guidelines` which fetches live standards from Vercel. This skill provides implementation-specific details.\n\n## Interactions\n\n### Keyboard & Focus\n\n- **MUST**: Full keyboard support per [WAI-ARIA APG](https://www.w3.org/WAI/ARIA/apg/patterns/)\n- **MUST**: Manage focus (trap, move, return) per APG patterns\n- **MUST**: Group focus with `:focus-within` where appropriate\n\n### Touch & Input\n\n- **MUST**: `touch-action: manipulation` to prevent double-tap zoom\n- **MUST**: Set `-webkit-tap-highlight-color` to match design\n- **MUST**: Mobile `<input>` font-size â‰¥16px to prevent iOS zoom, or use:\n  ```html\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover\">\n  ```\n\n### Form Behavior\n\n- **MUST**: Hydration-safe inputs (no lost focus/value)\n- **NEVER**: Block paste in `<input>`/`<textarea>`\n- **MUST**: Enter submits text input; in `<textarea>`, Cmd/Ctrl+Enter submits\n- **MUST**: Keep submit enabled until request starts; use idempotency key\n- **MUST**: Allow submitting incomplete forms to surface validation\n- **MUST**: Errors inline next to fields; on submit, focus first error\n- **MUST**: `autocomplete` + meaningful `name`; correct `type` and `inputmode`\n- **SHOULD**: Disable spellcheck for emails/codes/usernames\n- **SHOULD**: Placeholders end with ellipsis and show example (e.g., `sk-012345...`)\n- **MUST**: Warn on unsaved changes before navigation\n- **MUST**: Compatible with password managers & 2FA\n- **MUST**: Trim values to handle text expansion trailing spaces\n- **MUST**: No dead zones on checkboxes/radios; label+control share hit target\n\n### State & Navigation\n\n- **MUST**: URL reflects state (filters/tabs/pagination). Prefer [nuqs](https://nuqs.dev)\n- **MUST**: Back/Forward restores scroll\n- **MUST**: Links use `<a>`/`<Link>` (support Cmd/Ctrl/middle-click)\n\n### Feedback\n\n- **SHOULD**: Optimistic UI with reconciliation; on failure show error or Undo\n- **MUST**: Confirm destructive actions or provide Undo window\n- **MUST**: Use polite `aria-live` for toasts/inline validation\n- **SHOULD**: Ellipsis for follow-ups (\"Rename...\") and loading (\"Saving...\")\n\n### Touch/Drag\n\n- **MUST**: Delay first tooltip; subsequent peers no delay\n- **MUST**: `overscroll-behavior: contain` in modals/drawers\n- **MUST**: During drag, disable text selection and set `inert` on dragged element\n\n---\n\n## Animation\n\n- **SHOULD**: Prefer CSS > Web Animations API > JS libraries\n- **MUST**: Animations are interruptible and input-driven (avoid autoplay)\n- **MUST**: Correct `transform-origin` (motion starts where it \"physically\" should)\n\n### Cross-Browser\n\n- **MUST**: Apply CSS transforms to SVG children (`<g>`), not parent `<svg>`\n- **MUST**: Set `transform-box: fill-box` and `transform-origin: center` on SVG\n- **SHOULD**: Use `translateZ(0)` or `will-change: transform` for text anti-aliasing artifacts\n\n---\n\n## Layout\n\n- **SHOULD**: Optical alignment; adjust by +/-1px when perception beats geometry\n- **MUST**: Deliberate alignment to grid/baseline/edges\n- **SHOULD**: Balance icon/text lockups (stroke/weight/size/spacing/color)\n- **MUST**: Verify mobile, laptop, ultra-wide (simulate at 50% zoom)\n- **MUST**: Respect safe areas (`env(safe-area-inset-*)`)\n- **MUST**: Avoid unwanted scrollbars; fix overflows\n\n---\n\n## Content & Accessibility\n\n- **SHOULD**: Inline help first; tooltips last resort\n- **MUST**: Skeletons mirror final content (avoid layout shift)\n- **MUST**: `<title>` matches current context\n- **MUST**: No dead ends; always offer next step/recovery\n- **MUST**: Design empty/sparse/dense/error states\n- **SHOULD**: Curly quotes (\" \"); avoid widows/orphans\n- **MUST**: Tabular numbers for comparisons (`font-variant-numeric: tabular-nums`)\n- **MUST**: Redundant status cues (not color-only); icons have text labels\n- **MUST**: Use ellipsis character `...` (not `...`)\n- **MUST**: `scroll-margin-top` on headings; include \"Skip to content\" link\n- **MUST**: Resilient to user-generated content (short/avg/very long)\n- **MUST**: Locale-aware dates/times/numbers/currency\n- **MUST**: Use non-breaking spaces: `10&nbsp;MB`, `Cmd&nbsp;+&nbsp;K`\n- **MUST**: Detect language via `Accept-Language` header, NOT IP geolocation\n\n---\n\n## Performance\n\n- **SHOULD**: Test iOS Low Power Mode and macOS Safari\n- **MUST**: Measure reliably (disable extensions that skew runtime)\n- **MUST**: Track and minimize re-renders (React DevTools/React Scan)\n- **MUST**: Profile with CPU/network throttling\n- **MUST**: Batch layout reads/writes; avoid reflows/repaints\n- **MUST**: Mutations complete in <500ms\n- **SHOULD**: Prefer uncontrolled inputs; make controlled loops cheap\n- **MUST**: Virtualize large lists ([virtua](https://github.com/inokawa/virtua)) or `content-visibility: auto`\n- **MUST**: Preload only above-the-fold images; lazy-load rest\n- **MUST**: Prevent CLS from images (explicit dimensions)\n- **SHOULD**: `<link rel=\"preconnect\">` for asset/CDN domains\n- **SHOULD**: Preload critical fonts; subset via `unicode-range`\n- **SHOULD**: Move expensive work to Web Workers\n\n---\n\n## Design\n\n- **SHOULD**: Layered shadows (ambient + direct)\n- **SHOULD**: Crisp edges via semi-transparent borders + shadows\n- **SHOULD**: Nested radii: child <= parent; concentric\n- **SHOULD**: Hue consistency: tint borders/shadows/text toward bg hue\n- **MUST**: Accessible charts (color-blind-friendly palettes)\n- **MUST**: Increase contrast on `:hover`/`:active`/`:focus`\n- **SHOULD**: Set `<meta name=\"theme-color\">` to match page background\n- **MUST**: Set `color-scheme: dark` on `<html>` in dark themes\n- **MUST**: On Windows, set explicit `background-color` and `color` on `<select>`\n- **SHOULD**: Avoid gradient banding (use masks when needed)\n\n---\n\n## Common Violations\n\n### Blocking paste\n```tsx\n// Bad\n<input onPaste={(e) => e.preventDefault()} />\n\n// Good\n<input type=\"email\" autoComplete=\"email\" />\n```\n\n### Non-semantic button\n```tsx\n// Bad\n<div onClick={handleClick}>Click me</div>\n\n// Good\n<button onClick={handleClick}>Click me</button>\n```\n\n### Windows select dark mode\n```tsx\n// Bad\n<select><option>Option 1</option></select>\n\n// Good\n<select className=\"bg-white dark:bg-gray-900 text-black dark:text-white\">\n  <option>Option 1</option>\n</select>\n```\n\n---\n\n## References\n\n- [WAI-ARIA APG Patterns](https://www.w3.org/WAI/ARIA/apg/patterns/)\n- [APCA Contrast Calculator](https://apcacontrast.com/)\n- [nuqs - URL State Management](https://nuqs.dev)\n- [virtua - List Virtualization](https://github.com/inokawa/virtua)\n",
        "skills/ultracite/SKILL.md": "---\nname: ultracite\ndescription: Enforce strict type safety, accessibility standards, and code quality for TypeScript/JavaScript projects using Biome's formatter and linter. Use when writing, reviewing, or fixing TS/JS/TSX/JSX code, checking for a11y issues, linting errors, type safety problems, or when the user mentions code quality, formatting, accessibility, or best practices.\nallowed-tools: Read, Grep, Glob, Edit\n---\n\n# Ultracite - AI-Ready Formatter and Linter\n\nUltracite enforces strict type safety, accessibility standards, and consistent code quality for JavaScript/TypeScript projects using Biome's lightning-fast formatter and linter.\n\n## Key Principles\n\n- **Zero configuration required**: Works out of the box\n- **Subsecond performance**: Lightning-fast checks and fixes\n- **Maximum type safety**: Catch errors before runtime\n- **AI-friendly code generation**: Optimized for AI-assisted development\n\n## Before Writing Code\n\nWhen writing or reviewing code, follow this checklist:\n\n1. **Analyze existing patterns** in the codebase\n2. **Consider edge cases** and error scenarios\n3. **Follow the rules** below strictly\n4. **Validate accessibility** requirements\n\n## Common Commands\n\n```bash\n# Initialize Ultracite in your project\nnpx ultracite init\n\n# Format and fix code automatically\nnpx ultracite fix\n\n# Check for issues without fixing\nnpx ultracite check\n```\n\n## Instructions\n\nWhen working with TypeScript/JavaScript code:\n\n1. **Read the code** using the Read tool before making changes\n2. **Check for violations** of the rules below\n3. **Apply fixes** using the Edit tool\n4. **Verify accessibility** standards are met\n5. **Ensure type safety** with TypeScript\n\n## Core Rule Categories\n\n### 1. Accessibility (a11y)\n\n**Critical accessibility requirements:**\n\n- âŒ Don't use `accessKey` attribute on any HTML element\n- âŒ Don't set `aria-hidden=\"true\"` on focusable elements\n- âŒ Don't use distracting elements like `<marquee>` or `<blink>`\n- âŒ Don't include \"image\", \"picture\", or \"photo\" in img alt prop\n- âœ… Make sure label elements have text content and are associated with an input\n- âœ… Give all elements requiring alt text meaningful information for screen readers\n- âœ… Always include a `type` attribute for button elements\n- âœ… Always include a `lang` attribute on the html element\n- âœ… Always include a `title` attribute for iframe elements\n- âœ… Accompany `onClick` with at least one of: `onKeyUp`, `onKeyDown`, or `onKeyPress`\n- âœ… Accompany `onMouseOver`/`onMouseOut` with `onFocus`/`onBlur`\n- âœ… Include caption tracks for audio and video elements\n- âœ… Use semantic elements instead of role attributes in JSX\n- âœ… Always include a `title` element for SVG elements\n\n**Example - Good Accessibility:**\n\n```tsx\n// âœ… Good: Proper button with type and accessible events\n<button\n  type=\"button\"\n  onClick={handleClick}\n  onKeyDown={handleKeyDown}\n>\n  Submit\n</button>\n\n// âœ… Good: Accessible image with meaningful alt\n<img src=\"/photo.jpg\" alt=\"Team celebrating product launch\" />\n\n// âŒ Bad: Missing type, keyboard support, and poor alt text\n<button onClick={handleClick}>Submit</button>\n<img src=\"/photo.jpg\" alt=\"image of photo\" />\n```\n\n### 2. React and JSX Best Practices\n\n**Critical React requirements:**\n\n- âŒ Don't destructure props inside JSX components in Solid projects\n- âŒ Don't define React components inside other components\n- âŒ Don't use Array index in keys\n- âŒ Don't assign JSX properties multiple times\n- âŒ Don't use both `children` and `dangerouslySetInnerHTML` props\n- âŒ Don't pass children as props\n- âœ… Make sure all dependencies are correctly specified in React hooks\n- âœ… Make sure all React hooks are called from the top level\n- âœ… Don't forget key props in iterators and collection literals\n- âœ… Use `<>...</>` instead of `<Fragment>...</Fragment>`\n\n**Example - Good React Patterns:**\n\n```tsx\n// âœ… Good: Component defined at top level with proper hooks\nfunction UserList({ users }) {\n  const [selected, setSelected] = useState(null);\n\n  useEffect(() => {\n    // All dependencies listed\n    loadData();\n  }, [loadData]);\n\n  return (\n    <>\n      {users.map(user => (\n        <UserCard key={user.id} user={user} />\n      ))}\n    </>\n  );\n}\n\n// âŒ Bad: Component defined inside, index as key, missing deps\nfunction ParentComponent() {\n  function ChildComponent() { // Bad: nested component\n    useEffect(() => {\n      doSomething(); // Bad: missing dependency\n    }, []);\n    return <div>Child</div>;\n  }\n\n  return items.map((item, i) => (\n    <div key={i}>{item}</div> // Bad: index as key\n  ));\n}\n```\n\n### 3. TypeScript Best Practices\n\n**Critical TypeScript requirements:**\n\n- âŒ Don't use TypeScript enums (use `as const` objects instead)\n- âŒ Don't use the `any` type\n- âŒ Don't use non-null assertions with the exclamation mark postfix operator\n- âŒ Don't use TypeScript namespaces\n- âŒ Don't use parameter properties in class constructors\n- âŒ Don't declare empty interfaces\n- âœ… Use `export type` for types\n- âœ… Use `import type` for types\n- âœ… Use `as const` instead of literal types and type annotations\n- âœ… Use either `T[]` or `Array<T>` consistently\n\n**Example - Good TypeScript Patterns:**\n\n```typescript\n// âœ… Good: Use const objects instead of enums\nconst Status = {\n  PENDING: 'pending',\n  ACTIVE: 'active',\n  COMPLETED: 'completed'\n} as const;\ntype Status = typeof Status[keyof typeof Status];\n\n// âœ… Good: Import/export types properly\nimport type { User } from './types';\nexport type { User };\n\n// âœ… Good: Specific types, no any\nfunction processUser(user: User): Result<User> {\n  return { success: true, data: user };\n}\n\n// âŒ Bad: Using enum, any, and non-null assertion\nenum Status { PENDING, ACTIVE }  // Bad: use const object\nfunction process(data: any) {    // Bad: use specific type\n  return data!.value;            // Bad: avoid non-null assertion\n}\n```\n\n### 4. Code Quality and Correctness\n\n**Critical correctness requirements:**\n\n- âŒ Don't use `arguments` object (use rest parameters)\n- âŒ Don't use unnecessary nested block statements\n- âŒ Don't use the void operators\n- âŒ Don't reassign const variables\n- âŒ Don't use constant expressions in conditions\n- âŒ Don't use variables before they're declared\n- âŒ Don't use await inside loops\n- âŒ Don't shadow variables from outer scopes\n- âœ… Use arrow functions instead of function expressions\n- âœ… Use `for...of` statements instead of `Array.forEach`\n- âœ… Use concise optional chaining\n- âœ… Make sure Promise-like statements are handled appropriately\n\n**Example - Good Code Quality:**\n\n```typescript\n// âœ… Good: Arrow functions, for-of, proper async handling\nconst processItems = async (items: Item[]) => {\n  const results = [];\n\n  for (const item of items) {\n    const result = await processItem(item);\n    results.push(result);\n  }\n\n  return results;\n};\n\n// âœ… Good: Optional chaining\nconst userName = user?.profile?.name ?? 'Anonymous';\n\n// âŒ Bad: Function expression, forEach, await in loop\nconst processItems = function(items) {\n  const results = [];\n  items.forEach(async (item) => {  // Bad: async in forEach\n    await processItem(item);        // Bad: await in loop (via forEach)\n  });\n  return results;\n};\n```\n\n### 5. Error Handling\n\n**Error handling best practices:**\n\n- âœ… Always throw Error objects (not strings or other values)\n- âœ… Use `new` when throwing an error\n- âœ… Handle promises appropriately (await or .catch())\n- âœ… Don't use control flow statements in finally blocks\n- âœ… Make sure to pass a message value when creating built-in errors\n\n**Example - Good Error Handling:**\n\n```typescript\n// âœ… Good: Comprehensive error handling\nasync function fetchData(url: string): Promise<Result<Data>> {\n  try {\n    const response = await fetch(url);\n\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n    }\n\n    const data = await response.json();\n    return { success: true, data };\n  } catch (error) {\n    console.error('API call failed:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Unknown error'\n    };\n  }\n}\n\n// âŒ Bad: Swallowing errors, throwing strings\nasync function fetchData(url: string) {\n  try {\n    const response = await fetch(url);\n    return await response.json();\n  } catch (e) {\n    console.log(e);              // Bad: just logging\n    throw 'Failed to fetch';     // Bad: throwing string\n  }\n}\n```\n\n### 6. Style and Consistency\n\n**Key style requirements:**\n\n- âœ… Use `const` declarations for variables that are only assigned once\n- âœ… Use strict equality (===) and strict inequality (!==) instead of loose equality (==) and loose inequality (!=)\n- âœ… Use template literals over string concatenation\n- âœ… Use assignment operator shorthand where possible (`+=`, `-=`, etc.)\n- âœ… Use the `**` operator instead of `Math.pow`\n- âœ… Use `new` when throwing an error\n- âœ… Don't use `var` (use `const` or `let`)\n- âœ… Don't use console (except in development utilities)\n- âœ… Don't use debugger statements\n\n**Example - Good Style:**\n\n```typescript\n// âœ… Good: Modern, consistent style\nconst calculateTotal = (items: Item[]): number => {\n  let total = 0;\n\n  for (const item of items) {\n    total += item.price * item.quantity;\n  }\n\n  return total ** 2;  // Use ** instead of Math.pow\n};\n\nconst message = `Total: $${calculateTotal(items)}`;  // Template literal\n\n// âŒ Bad: Inconsistent, outdated style\nfunction calculateTotal(items) {\n  var total = 0;                          // Bad: use const/let\n\n  for (var i = 0; i < items.length; i++) { // Bad: use for-of\n    total = total + items[i].price;       // Bad: use +=\n  }\n\n  return Math.pow(total, 2);              // Bad: use **\n}\n\nvar message = 'Total: $' + calculateTotal(items);  // Bad: use template literal\n```\n\n### 7. Next.js Specific Rules\n\n**When working with Next.js:**\n\n- âŒ Don't use `<img>` elements (use `next/image` instead)\n- âŒ Don't use `<head>` elements (use `next/head` instead)\n- âŒ Don't import `next/document` outside of `pages/_document.jsx`\n- âŒ Don't use the `next/head` module in `pages/_document.js`\n\n**Example - Good Next.js Patterns:**\n\n```tsx\n// âœ… Good: Use Next.js Image component\nimport Image from 'next/image';\n\nexport default function Profile() {\n  return (\n    <Image\n      src=\"/profile.jpg\"\n      alt=\"User profile\"\n      width={500}\n      height={500}\n    />\n  );\n}\n\n// âŒ Bad: Using native img tag\nexport default function Profile() {\n  return <img src=\"/profile.jpg\" alt=\"User profile\" />;\n}\n```\n\n## Quick Reference\n\n### Most Common Violations\n\n1. **Missing key props** in list items\n2. **Using `any` type** instead of specific types\n3. **Missing accessibility attributes** (type, alt, aria-*)\n4. **Using var** instead of const/let\n5. **Index as key** in React lists\n6. **Missing error handling** in async functions\n7. **Using enums** instead of const objects\n8. **Non-null assertions** (postfix exclamation mark) in TypeScript\n9. **Await in loops** instead of Promise.all\n10. **Missing dependencies** in useEffect\n\n### Common Fixes\n\n**Fix 1: Replace var with const/let**\n```typescript\n// Before\nvar count = 0;\n\n// After\nlet count = 0;\n```\n\n**Fix 2: Replace any with specific types**\n```typescript\n// Before\nfunction process(data: any) { }\n\n// After\nfunction process(data: User) { }\n```\n\n**Fix 3: Replace enum with const object**\n```typescript\n// Before\nenum Status { ACTIVE, INACTIVE }\n\n// After\nconst Status = {\n  ACTIVE: 'active',\n  INACTIVE: 'inactive'\n} as const;\ntype Status = typeof Status[keyof typeof Status];\n```\n\n**Fix 4: Add proper error handling**\n```typescript\n// Before\nasync function fetchData() {\n  return await fetch('/api/data');\n}\n\n// After\nasync function fetchData(): Promise<Result<Data>> {\n  try {\n    const response = await fetch('/api/data');\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}`);\n    }\n    const data = await response.json();\n    return { success: true, data };\n  } catch (error) {\n    console.error('Fetch failed:', error);\n    return { success: false, error };\n  }\n}\n```\n\n**Fix 5: Use proper keys in lists**\n```typescript\n// Before\nitems.map((item, i) => <div key={i}>{item}</div>)\n\n// After\nitems.map(item => <div key={item.id}>{item.name}</div>)\n```\n\n## When to Use This Skill\n\nUse this skill when:\n\n- Writing new TypeScript/JavaScript code\n- Reviewing existing code for issues\n- Fixing linting or type errors\n- Ensuring accessibility compliance\n- Refactoring code to follow best practices\n- Setting up code quality standards\n- Preparing code for production\n\n## Additional Resources\n\nFor a complete list of all rules and detailed explanations, refer to the Biome documentation at https://biomejs.dev/linter/rules/\n",
        "skills/vercel-deploy/SKILL.md": "---\nname: vercel-deploy\ndescription: Deploy applications and websites to Vercel. Use this skill when the user requests deployment actions such as \"Deploy my app\", \"Deploy this to production\", \"Create a preview deployment\", \"Deploy and give me the link\", or \"Push this live\". No authentication required - returns preview URL and claimable deployment link.\n---\n\n# Vercel Deploy\n\nDeploy any project to Vercel instantly. No authentication required.\n\n## How It Works\n\n1. Packages your project into a tarball (excludes `node_modules` and `.git`)\n2. Auto-detects framework from `package.json`\n3. Uploads to deployment service\n4. Returns **Preview URL** (live site) and **Claim URL** (transfer to your Vercel account)\n\n## Usage\n\nRun the deploy script from the skill's scripts directory:\n\n```bash\nbash scripts/deploy.sh [path]\n```\n\n**Arguments:**\n- `path` - Directory to deploy, or a `.tgz` file (defaults to current directory)\n\n**Examples:**\n\n```bash\n# Deploy current directory\nbash scripts/deploy.sh\n\n# Deploy specific project\nbash scripts/deploy.sh /path/to/project\n\n# Deploy existing tarball\nbash scripts/deploy.sh /path/to/project.tgz\n```\n\nNote: When using this skill in Claude Code, the script is located at `skills/vercel-deploy/scripts/deploy.sh` within the codewarden plugin directory.\n\n## Output\n\n```\nPreparing deployment...\nDetected framework: nextjs\nCreating deployment package...\nDeploying...\nâœ“ Deployment successful!\n\nPreview URL: https://skill-deploy-abc123.vercel.app\nClaim URL:   https://vercel.com/claim-deployment?code=...\n```\n\nThe script also outputs JSON to stdout for programmatic use:\n\n```json\n{\n  \"previewUrl\": \"https://skill-deploy-abc123.vercel.app\",\n  \"claimUrl\": \"https://vercel.com/claim-deployment?code=...\",\n  \"deploymentId\": \"dpl_...\",\n  \"projectId\": \"prj_...\"\n}\n```\n\n## Framework Detection\n\nThe script auto-detects frameworks from `package.json`. Supported frameworks include:\n\n- **React**: Next.js, Gatsby, Create React App, Remix, React Router\n- **Vue**: Nuxt, Vitepress, Vuepress, Gridsome\n- **Svelte**: SvelteKit, Svelte, Sapper\n- **Other Frontend**: Astro, Solid Start, Angular, Ember, Preact, Docusaurus\n- **Backend**: Express, Hono, Fastify, NestJS, Elysia, h3, Nitro\n- **Build Tools**: Vite, Parcel\n- **And more**: Blitz, Hydrogen, RedwoodJS, Storybook, Sanity, etc.\n\nFor static HTML projects (no `package.json`), framework is set to `null`.\n\n## Static HTML Projects\n\nFor projects without a `package.json`:\n- If there's a single `.html` file not named `index.html`, it gets renamed automatically\n- This ensures the page is served at the root URL (`/`)\n\n## Present Results to User\n\nAlways show both URLs:\n\n```\nâœ“ Deployment successful!\n\nPreview URL: https://skill-deploy-abc123.vercel.app\nClaim URL:   https://vercel.com/claim-deployment?code=...\n\nView your site at the Preview URL.\nTo transfer this deployment to your Vercel account, visit the Claim URL.\n```\n\n## Troubleshooting\n\n### Network Egress Error\n\nIf deployment fails due to network restrictions (common on claude.ai), tell the user:\n\n```\nDeployment failed due to network restrictions. To fix this:\n\n1. Go to https://claude.ai/admin-settings/capabilities\n2. Add *.vercel.com to the allowed domains\n3. Try deploying again\n```\n",
        "skills/vercel-design-guidelines/SKILL.md": "---\nname: vercel-design-guidelines\ndescription: Check web interfaces against Vercel's design guidelines. Use when asked to \"review my UI\", \"check accessibility\", \"audit design\", \"review UX\", \"check my site against best practices\", or \"apply Vercel design guidelines\".\n---\n\n# Vercel Design Guidelines\n\nReview web interfaces against Vercel's comprehensive design guidelines and propose fixes.\n\n## How It Works\n\n1. Read the user's code (components, CSS, HTML)\n2. Check against Vercel design guidelines (interactions, animations, layout, content, forms, performance, design, copywriting)\n3. Report violations with specific line references\n4. Propose concrete fixes with code examples\n\n## Usage\n\nWhen a user asks to review their UI or check against design guidelines:\n\n1. Fetch the live guidelines from `https://vercel.com/design/guidelines`\n2. Read the relevant source files (components, styles, HTML)\n3. Analyze the code against each applicable guideline category\n4. Report findings grouped by category with severity\n\n**Guidelines URL:** https://vercel.com/design/guidelines\n\nAlways fetch fresh guidelines to ensure you're checking against the latest standards.\n\n## Audit Categories\n\n- **Interactions**: Keyboard accessibility, focus management, hit targets, loading states, URL persistence\n- **Animations**: Reduced motion, GPU acceleration, easing, interruptibility\n- **Layout**: Optical adjustment, alignment, responsive testing, safe areas\n- **Content**: Inline help, skeletons, empty states, typography, accessibility\n- **Forms**: Labels, validation, autocomplete, error handling, submit behavior\n- **Performance**: Re-renders, layout thrashing, virtualization, preloading\n- **Design**: Shadows, borders, radii, contrast, color accessibility\n- **Copywriting**: Active voice, title case, clarity, error messaging\n\n## Output Format\n\nPresent findings as:\n\n```\n## {Category} Issues\n\n### {Severity}: {Guideline Name}\n**File:** `path/to/file.tsx:42`\n**Issue:** {Description of the violation}\n**Guideline:** {Brief guideline reference}\n**Fix:**\n```{language}\n{Proposed code fix}\n```\n```\n\nSeverity levels:\n- **Critical**: Accessibility violations, broken functionality\n- **Warning**: UX issues, performance concerns\n- **Suggestion**: Polish, best practices\n\n## Example Review\n\n```\n## Interactions Issues\n\n### Critical: Keyboard Accessibility\n**File:** `components/Modal.tsx:28`\n**Issue:** Modal lacks focus trap - keyboard users can tab outside\n**Guideline:** Implement focus traps per WAI-ARIA patterns\n**Fix:**\n```tsx\n// Add focus trap using @radix-ui/react-focus-guards or similar\nimport { FocusScope } from '@radix-ui/react-focus-scope';\n\n<FocusScope trapped>\n  <ModalContent>{children}</ModalContent>\n</FocusScope>\n```\n\n### Warning: Loading State Duration\n**File:** `components/Button.tsx:15`\n**Issue:** No minimum loading duration - causes flicker on fast responses\n**Guideline:** Add 150-300ms delay and 300-500ms minimum visibility\n**Fix:**\n```tsx\nconst [isLoading, setIsLoading] = useState(false);\nconst minimumLoadingTime = 300;\n\nasync function handleClick() {\n  setIsLoading(true);\n  const start = Date.now();\n  await action();\n  const elapsed = Date.now() - start;\n  if (elapsed < minimumLoadingTime) {\n    await new Promise(r => setTimeout(r, minimumLoadingTime - elapsed));\n  }\n  setIsLoading(false);\n}\n```\n```\n\n## Quick Checklist\n\nFor rapid reviews, check these high-impact items first:\n\n- [ ] All interactive elements keyboard accessible\n- [ ] Visible focus rings on focusable elements\n- [ ] Hit targets â‰¥24px (44px on mobile)\n- [ ] Form inputs have associated labels\n- [ ] Loading states don't flicker\n- [ ] `prefers-reduced-motion` respected\n- [ ] No `transition: all`\n- [ ] Errors show how to fix, not just what's wrong\n- [ ] Color contrast meets APCA standards\n- [ ] No zoom disabled\n\n## Present Results to User\n\nAfter reviewing:\n\n```\n# Design Guidelines Audit\n\nReviewed {N} files against Vercel design guidelines.\n\n## Summary\n- Critical: {N} issues\n- Warning: {N} issues\n- Suggestions: {N} items\n\n{Detailed findings by category}\n\n## Recommended Priority\n1. {First critical fix}\n2. {Second critical fix}\n...\n```\n"
      },
      "plugins": [
        {
          "name": "codewarden",
          "source": "./",
          "description": "CodeWarden watches over your code: Ultracite quality enforcement, React 19/Next.js patterns, security auditing, and automated workflows",
          "author": {
            "name": "Tyler Gibbs"
          },
          "category": "devtools",
          "tags": [
            "codewarden",
            "code-quality",
            "react",
            "nextjs",
            "typescript",
            "security",
            "guardian"
          ],
          "categories": [
            "code-quality",
            "codewarden",
            "devtools",
            "guardian",
            "nextjs",
            "react",
            "security",
            "typescript"
          ],
          "install_commands": [
            "/plugin marketplace add tylergibbs1/codewarden",
            "/plugin install codewarden@codewarden-marketplace"
          ]
        }
      ]
    }
  ]
}