{
  "author": {
    "id": "czlonkowski",
    "display_name": "Romuald CzÅ‚onkowski",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/56956555?v=4",
    "url": "https://github.com/czlonkowski",
    "bio": null,
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 0,
      "total_skills": 7,
      "total_stars": 2298,
      "total_forks": 380
    }
  },
  "marketplaces": [
    {
      "name": "n8n-mcp-skills",
      "version": null,
      "description": "Expert skills for building n8n workflows",
      "owner_info": {
        "name": "Romuald CzÅ‚onkowski",
        "url": "https://www.aiadvisors.pl/en"
      },
      "keywords": [],
      "repo_full_name": "czlonkowski/n8n-skills",
      "repo_url": "https://github.com/czlonkowski/n8n-skills",
      "repo_description": "n8n skillset for Claude Code to build flawless n8n workflows",
      "homepage": "https://www.n8n-skills.com",
      "signals": {
        "stars": 2298,
        "forks": 380,
        "pushed_at": "2026-01-08T14:38:07Z",
        "created_at": "2025-10-20T05:51:27Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 1075
        },
        {
          "path": ".claude-plugin/plugin.json",
          "type": "blob",
          "size": 521
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 8720
        },
        {
          "path": "dist",
          "type": "tree",
          "size": null
        },
        {
          "path": "dist/README.md",
          "type": "blob",
          "size": 4953
        },
        {
          "path": "skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/n8n-code-javascript",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/n8n-code-javascript/BUILTIN_FUNCTIONS.md",
          "type": "blob",
          "size": 16845
        },
        {
          "path": "skills/n8n-code-javascript/COMMON_PATTERNS.md",
          "type": "blob",
          "size": 29205
        },
        {
          "path": "skills/n8n-code-javascript/DATA_ACCESS.md",
          "type": "blob",
          "size": 16107
        },
        {
          "path": "skills/n8n-code-javascript/ERROR_PATTERNS.md",
          "type": "blob",
          "size": 16433
        },
        {
          "path": "skills/n8n-code-javascript/README.md",
          "type": "blob",
          "size": 9563
        },
        {
          "path": "skills/n8n-code-javascript/SKILL.md",
          "type": "blob",
          "size": 16110
        },
        {
          "path": "skills/n8n-code-python",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/n8n-code-python/COMMON_PATTERNS.md",
          "type": "blob",
          "size": 19329
        },
        {
          "path": "skills/n8n-code-python/DATA_ACCESS.md",
          "type": "blob",
          "size": 15026
        },
        {
          "path": "skills/n8n-code-python/ERROR_PATTERNS.md",
          "type": "blob",
          "size": 13913
        },
        {
          "path": "skills/n8n-code-python/README.md",
          "type": "blob",
          "size": 9524
        },
        {
          "path": "skills/n8n-code-python/SKILL.md",
          "type": "blob",
          "size": 17971
        },
        {
          "path": "skills/n8n-code-python/STANDARD_LIBRARY.md",
          "type": "blob",
          "size": 18115
        },
        {
          "path": "skills/n8n-expression-syntax",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/n8n-expression-syntax/COMMON_MISTAKES.md",
          "type": "blob",
          "size": 8658
        },
        {
          "path": "skills/n8n-expression-syntax/EXAMPLES.md",
          "type": "blob",
          "size": 8303
        },
        {
          "path": "skills/n8n-expression-syntax/README.md",
          "type": "blob",
          "size": 2323
        },
        {
          "path": "skills/n8n-expression-syntax/SKILL.md",
          "type": "blob",
          "size": 9600
        },
        {
          "path": "skills/n8n-mcp-tools-expert",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/n8n-mcp-tools-expert/README.md",
          "type": "blob",
          "size": 2763
        },
        {
          "path": "skills/n8n-mcp-tools-expert/SEARCH_GUIDE.md",
          "type": "blob",
          "size": 8192
        },
        {
          "path": "skills/n8n-mcp-tools-expert/SKILL.md",
          "type": "blob",
          "size": 16447
        },
        {
          "path": "skills/n8n-mcp-tools-expert/VALIDATION_GUIDE.md",
          "type": "blob",
          "size": 9687
        },
        {
          "path": "skills/n8n-mcp-tools-expert/WORKFLOW_GUIDE.md",
          "type": "blob",
          "size": 12914
        },
        {
          "path": "skills/n8n-node-configuration",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/n8n-node-configuration/DEPENDENCIES.md",
          "type": "blob",
          "size": 14598
        },
        {
          "path": "skills/n8n-node-configuration/OPERATION_PATTERNS.md",
          "type": "blob",
          "size": 15358
        },
        {
          "path": "skills/n8n-node-configuration/README.md",
          "type": "blob",
          "size": 9800
        },
        {
          "path": "skills/n8n-node-configuration/SKILL.md",
          "type": "blob",
          "size": 17353
        },
        {
          "path": "skills/n8n-validation-expert",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/n8n-validation-expert/ERROR_CATALOG.md",
          "type": "blob",
          "size": 17212
        },
        {
          "path": "skills/n8n-validation-expert/FALSE_POSITIVES.md",
          "type": "blob",
          "size": 14723
        },
        {
          "path": "skills/n8n-validation-expert/README.md",
          "type": "blob",
          "size": 7956
        },
        {
          "path": "skills/n8n-validation-expert/SKILL.md",
          "type": "blob",
          "size": 14552
        },
        {
          "path": "skills/n8n-workflow-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/n8n-workflow-patterns/README.md",
          "type": "blob",
          "size": 7022
        },
        {
          "path": "skills/n8n-workflow-patterns/SKILL.md",
          "type": "blob",
          "size": 11511
        },
        {
          "path": "skills/n8n-workflow-patterns/ai_agent_workflow.md",
          "type": "blob",
          "size": 17512
        },
        {
          "path": "skills/n8n-workflow-patterns/database_operations.md",
          "type": "blob",
          "size": 16132
        },
        {
          "path": "skills/n8n-workflow-patterns/http_api_integration.md",
          "type": "blob",
          "size": 14672
        },
        {
          "path": "skills/n8n-workflow-patterns/scheduled_tasks.md",
          "type": "blob",
          "size": 15897
        },
        {
          "path": "skills/n8n-workflow-patterns/webhook_processing.md",
          "type": "blob",
          "size": 11789
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"n8n-mcp-skills\",\n  \"description\": \"Expert skills for building n8n workflows\",\n  \"owner\": {\n    \"name\": \"Romuald CzÅ‚onkowski\",\n    \"url\": \"https://www.aiadvisors.pl/en\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"n8n-mcp-skills\",\n      \"source\": \"./\",\n      \"description\": \"Complete bundle: 7 expert skills for building flawless n8n workflows using n8n-mcp MCP server. Includes skills for expression syntax, MCP tools usage, workflow patterns, validation, node configuration, JavaScript code, and Python code.\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Romuald CzÅ‚onkowski\",\n        \"url\": \"https://www.aiadvisors.pl/en\"\n      },\n      \"category\": \"automation\",\n      \"keywords\": [\n        \"n8n\",\n        \"workflow\",\n        \"mcp\",\n        \"automation\",\n        \"validation\",\n        \"expressions\",\n        \"code\",\n        \"javascript\",\n        \"python\",\n        \"skills\"\n      ],\n      \"homepage\": \"https://github.com/czlonkowski/n8n-skills\",\n      \"repository\": \"https://github.com/czlonkowski/n8n-skills\",\n      \"license\": \"MIT\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"n8n-mcp-skills\",\n  \"version\": \"1.1.0\",\n  \"description\": \"Expert skills for building n8n workflows with n8n-mcp\",\n  \"author\": {\n    \"name\": \"Romuald CzÅ‚onkowski\",\n    \"url\": \"https://www.aiadvisors.pl/en\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\n    \"n8n\",\n    \"workflow\",\n    \"automation\",\n    \"mcp\",\n    \"validation\",\n    \"expressions\",\n    \"code\",\n    \"javascript\",\n    \"python\"\n  ],\n  \"repository\": \"https://github.com/czlonkowski/n8n-skills\",\n  \"homepage\": \"https://github.com/czlonkowski/n8n-skills\"\n}\n",
        "README.md": "# n8n-skills\n\n**Expert Claude Code skills for building flawless n8n workflows using the n8n-mcp MCP server**\n\n[![GitHub stars](https://img.shields.io/github/stars/czlonkowski/n8n-skills?style=social)](https://github.com/czlonkowski/n8n-skills)\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)\n[![n8n-mcp](https://img.shields.io/badge/n8n--mcp-compatible-green.svg)](https://github.com/czlonkowski/n8n-mcp)\n\n## Watch the Introduction Video\n\n[![n8n Skills Introduction](skills.png)](https://youtu.be/e6VvRqmUY2Y?si=6Igply3cadjO6Xx0)\n\n---\n\n## ðŸŽ¯ What is this?\n\nThis repository contains **7 complementary Claude Code skills** that teach AI assistants how to build production-ready n8n workflows using the [n8n-mcp](https://github.com/czlonkowski/n8n-mcp) MCP server.\n\n### Why These Skills Exist\n\nBuilding n8n workflows programmatically can be challenging. Common issues include:\n- Using MCP tools incorrectly or inefficiently\n- Getting stuck in validation error loops\n- Not knowing which workflow patterns to use\n- Misconfiguring nodes and their dependencies\n\nThese skills solve these problems by teaching Claude:\n- âœ… Correct n8n expression syntax ({{}} patterns)\n- âœ… How to use n8n-mcp tools effectively\n- âœ… Proven workflow patterns from real-world usage\n- âœ… Validation error interpretation and fixing\n- âœ… Operation-aware node configuration\n\n---\n\n## ðŸ“š The 7 Skills\n\n### 1. **n8n Expression Syntax**\nTeaches correct n8n expression syntax and common patterns.\n\n**Activates when**: Writing expressions, using {{}} syntax, accessing $json/$node variables, troubleshooting expression errors.\n\n**Key Features**:\n- Core variables ($json, $node, $now, $env)\n- **Critical gotcha**: Webhook data is under `$json.body`\n- Common mistakes catalog with fixes\n- When NOT to use expressions (Code nodes!)\n\n### 2. **n8n MCP Tools Expert** (HIGHEST PRIORITY)\nExpert guide for using n8n-mcp MCP tools effectively.\n\n**Activates when**: Searching for nodes, validating configurations, accessing templates, managing workflows.\n\n**Key Features**:\n- Tool selection guide (which tool for which task)\n- nodeType format differences (nodes-base.* vs n8n-nodes-base.*)\n- Validation profiles (minimal/runtime/ai-friendly/strict)\n- Smart parameters (branch=\"true\" for IF nodes)\n- Auto-sanitization system explained\n\n**Most Important**: Teaches correct MCP tool usage patterns and parameter formats\n\n### 3. **n8n Workflow Patterns**\nBuild workflows using 5 proven architectural patterns.\n\n**Activates when**: Creating workflows, connecting nodes, designing automation.\n\n**Key Features**:\n- 5 proven patterns (webhook processing, HTTP API, database, AI, scheduled)\n- Workflow creation checklist\n- Real examples from 2,653+ n8n templates\n- Connection best practices\n- Pattern selection guide\n\n### 4. **n8n Validation Expert**\nInterpret validation errors and guide fixing.\n\n**Activates when**: Validation fails, debugging workflow errors, handling false positives.\n\n**Key Features**:\n- Validation loop workflow\n- Real error catalog\n- Auto-sanitization behavior explained\n- False positives guide\n- Profile selection for different stages\n\n### 5. **n8n Node Configuration**\nOperation-aware node configuration guidance.\n\n**Activates when**: Configuring nodes, understanding property dependencies, setting up AI workflows.\n\n**Key Features**:\n- Property dependency rules (e.g., sendBody â†’ contentType)\n- Operation-specific requirements\n- AI connection types (8 types for AI Agent workflows)\n- Common configuration patterns\n\n### 6. **n8n Code JavaScript**\nWrite effective JavaScript code in n8n Code nodes.\n\n**Activates when**: Writing JavaScript in Code nodes, troubleshooting Code node errors, making HTTP requests with $helpers, working with dates.\n\n**Key Features**:\n- Data access patterns ($input.all(), $input.first(), $input.item)\n- **Critical gotcha**: Webhook data under `$json.body`\n- Correct return format: `[{json: {...}}]`\n- Built-in functions ($helpers.httpRequest(), DateTime, $jmespath())\n- Top 5 error patterns with solutions (covering 62%+ of failures)\n- 10 production-tested patterns\n\n### 7. **n8n Code Python**\nWrite Python code in n8n Code nodes with proper limitations awareness.\n\n**Activates when**: Writing Python in Code nodes, need to know Python limitations, working with standard library.\n\n**Key Features**:\n- **Important**: Use JavaScript for 95% of use cases\n- Python data access (_input, _json, _node)\n- **Critical limitation**: No external libraries (requests, pandas, numpy)\n- Standard library reference (json, datetime, re, etc.)\n- Workarounds for missing libraries\n- Common Python patterns for n8n\n\n---\n\n## ðŸš€ Installation\n\n### Prerequisites\n\n1. **n8n-mcp MCP server** installed and configured ([Installation Guide](https://github.com/czlonkowski/n8n-mcp))\n2. **Claude Code**, Claude.ai, or Claude API access\n3. `.mcp.json` configured with n8n-mcp server\n\n### Claude Code\n\n**Method 1: Plugin Installation** (Recommended)\n```bash\n# Install directly as a Claude Code plugin\n/plugin install czlonkowski/n8n-skills\n```\n\n**Method 2: Via Marketplace**\n```bash\n# Add as marketplace, then browse and install\n/plugin marketplace add czlonkowski/n8n-skills\n\n# Then browse available plugins\n/plugin install\n# Select \"n8n-mcp-skills\" from the list\n```\n\n**Method 3: Manual Installation**\n```bash\n# 1. Clone this repository\ngit clone https://github.com/czlonkowski/n8n-skills.git\n\n# 2. Copy skills to your Claude Code skills directory\ncp -r n8n-skills/skills/* ~/.claude/skills/\n\n# 3. Reload Claude Code\n# Skills will activate automatically\n```\n\n### Claude.ai\n\n1. Download individual skill folders from `skills/`\n2. Zip each skill folder\n3. Upload via Settings â†’ Capabilities â†’ Skills\n\n### API / SDK\n\nSee [docs/INSTALLATION.md](docs/INSTALLATION.md) for detailed instructions.\n\n---\n\n## ðŸ’¡ Usage\n\nSkills activate **automatically** when relevant queries are detected:\n\n```\n\"How do I write n8n expressions?\"\nâ†’ Activates: n8n Expression Syntax\n\n\"Find me a Slack node\"\nâ†’ Activates: n8n MCP Tools Expert\n\n\"Build a webhook workflow\"\nâ†’ Activates: n8n Workflow Patterns\n\n\"Why is validation failing?\"\nâ†’ Activates: n8n Validation Expert\n\n\"How do I configure the HTTP Request node?\"\nâ†’ Activates: n8n Node Configuration\n\n\"How do I access webhook data in a Code node?\"\nâ†’ Activates: n8n Code JavaScript\n\n\"Can I use pandas in Python Code node?\"\nâ†’ Activates: n8n Code Python\n```\n\n### Skills Work Together\n\nWhen you ask: **\"Build and validate a webhook to Slack workflow\"**\n\n1. **n8n Workflow Patterns** identifies webhook processing pattern\n2. **n8n MCP Tools Expert** searches for webhook and Slack nodes\n3. **n8n Node Configuration** guides node setup\n4. **n8n Code JavaScript** helps process webhook data with proper .body access\n5. **n8n Expression Syntax** helps with data mapping in other nodes\n6. **n8n Validation Expert** validates the final workflow\n\nAll skills compose seamlessly!\n\n---\n\n## ðŸ“– Documentation\n\n- [Installation Guide](docs/INSTALLATION.md) - Detailed installation for all platforms\n- [Usage Guide](docs/USAGE.md) - How to use skills effectively\n- [Development Guide](docs/DEVELOPMENT.md) - Contributing and testing\n- [MCP Testing Log](docs/MCP_TESTING_LOG.md) - Real tool responses used in skills\n\n---\n\n\n## ðŸ§ª Testing\n\nEach skill includes 3+ evaluations for quality assurance:\n\n```bash\n# Run evaluations (if testing framework available)\nnpm test\n\n# Or manually test with Claude\nclaude-code --skill n8n-expression-syntax \"Test webhook data access\"\n```\n\n---\n\n## ðŸ¤ Contributing\n\nContributions welcome! Please see [DEVELOPMENT.md](docs/DEVELOPMENT.md) for guidelines.\n\n### Development Approach\n\n1. **Evaluation-First**: Write test scenarios before implementation\n2. **MCP-Informed**: Test tools, document real responses\n3. **Iterative**: Test against evaluations, iterate until 100% pass\n4. **Concise**: Keep SKILL.md under 500 lines\n5. **Real Examples**: All examples from real templates/tools\n\n---\n\n## ðŸ“ License\n\nMIT License - see [LICENSE](LICENSE) file for details.\n\n---\n\n## ðŸ™ Credits\n\n**Conceived by Romuald CzÅ‚onkowski**\n- Website: [www.aiadvisors.pl/en](https://www.aiadvisors.pl/en)\n- Part of the [n8n-mcp project](https://github.com/czlonkowski/n8n-mcp)\n\n---\n\n## ðŸ”— Related Projects\n\n- [n8n-mcp](https://github.com/czlonkowski/n8n-mcp) - MCP server for n8n\n- [n8n](https://n8n.io/) - Workflow automation platform\n\n---\n\n## ðŸ“Š What's Included\n\n- **7** complementary skills that work together\n- **525+** n8n nodes supported\n- **2,653+** workflow templates for examples\n- **10** production-tested Code node patterns\n- **Comprehensive** error catalogs and troubleshooting guides\n\n---\n\n**Ready to build flawless n8n workflows? Get started now!** ðŸš€\n",
        "dist/README.md": "# n8n-mcp Skills - Distribution Packages\n\nThis folder contains distribution packages for different Claude platforms.\n\n## ðŸ“¦ Available Packages\n\n### Complete Bundle (Recommended)\n\n- **`n8n-mcp-skills-v1.1.0.zip`** (172 KB) - All 7 skills in one package\n\n**Includes:**\n- Skill #1: n8n Expression Syntax\n- Skill #2: n8n MCP Tools Expert\n- Skill #3: n8n Workflow Patterns\n- Skill #4: n8n Validation Expert\n- Skill #5: n8n Node Configuration\n- Skill #6: n8n Code JavaScript\n- Skill #7: n8n Code Python\n\n**Installation:**\n```bash\n# Claude Code plugin installation\n/plugin install czlonkowski/n8n-skills\n\n# Or install from local file\n/plugin install /path/to/n8n-mcp-skills-v1.1.0.zip\n```\n\n### For Claude.ai Users (Individual Skills)\n\nUpload each skill separately via Settings â†’ Capabilities â†’ Skills (bottom of page):\n\n- `n8n-expression-syntax-v1.1.0.zip` - n8n expression syntax and common patterns\n- `n8n-mcp-tools-expert-v1.1.0.zip` - Expert guide for using n8n-mcp tools (recommended to install first)\n- `n8n-workflow-patterns-v1.1.0.zip` - 5 proven workflow architectural patterns\n- `n8n-validation-expert-v1.1.0.zip` - Validation error interpretation and fixing\n- `n8n-node-configuration-v1.1.0.zip` - Operation-aware node configuration\n\n**Installation:**\n1. Go to Settings â†’ Capabilities â†’ Skills (bottom of page)\n2. Click \"Upload Skill\"\n3. Select one of the skill zip files above\n4. Repeat for each skill you want to install\n\n**Note:** JavaScript and Python Code skills are only available in the complete bundle (not as individual skills).\n\n## ðŸŽ¯ Which Package Should I Use?\n\n| Platform | Package | What You Get |\n|----------|---------|--------------|\n| **Claude.ai** | Individual zips | 5 core skills (upload separately) |\n| **Claude Code** | Complete bundle (n8n-mcp-skills-v1.1.0.zip) | All 7 skills at once |\n| **Claude API** | Complete bundle | All 7 skills (extract skills/ folder) |\n\n**Note:** Code skills (#6 JavaScript, #7 Python) are only in the complete bundle.\n\n---\n\n## ðŸ“ Files in This Directory\n\n```\ndist/\nâ”œâ”€â”€ n8n-mcp-skills-v1.1.0.zip              (168 KB) â˜… RECOMMENDED\nâ”œâ”€â”€ n8n-expression-syntax-v1.1.0.zip       (11 KB)\nâ”œâ”€â”€ n8n-mcp-tools-expert-v1.1.0.zip        (15 KB)\nâ”œâ”€â”€ n8n-workflow-patterns-v1.1.0.zip       (35 KB)\nâ”œâ”€â”€ n8n-validation-expert-v1.1.0.zip       (18 KB)\nâ”œâ”€â”€ n8n-node-configuration-v1.1.0.zip      (17 KB)\nâ””â”€â”€ README.md                               (this file)\n```\n\n---\n\n## ðŸ“‹ What's Included in Each Package\n\n### Individual Skill Packages (Claude.ai)\n\nEach zip contains:\n```\nSKILL.md              # Main skill instructions with YAML frontmatter\n[Reference files]     # Additional documentation and guides\nREADME.md             # Skill metadata and statistics\n```\n\n### Bundle Package (Claude Code)\n\n```\n.claude-plugin/\n  â”œâ”€â”€ plugin.json      # Claude Code plugin metadata\n  â””â”€â”€ marketplace.json # Marketplace listing metadata\nREADME.md              # Project overview and documentation\nLICENSE                # MIT License\nskills/                # All 7 skills in subfolders\n  â”œâ”€â”€ n8n-expression-syntax/\n  â”œâ”€â”€ n8n-mcp-tools-expert/\n  â”œâ”€â”€ n8n-workflow-patterns/\n  â”œâ”€â”€ n8n-validation-expert/\n  â”œâ”€â”€ n8n-node-configuration/\n  â”œâ”€â”€ n8n-code-javascript/\n  â””â”€â”€ n8n-code-python/\n```\n\n## âœ… Verification\n\nAfter installation, test skills by asking:\n\n```\n\"How do I write n8n expressions?\"\nâ†’ Should activate: n8n Expression Syntax\n\n\"Find me a Slack node\"\nâ†’ Should activate: n8n MCP Tools Expert\n\n\"Build a webhook workflow\"\nâ†’ Should activate: n8n Workflow Patterns\n\n\"How do I access webhook data in a Code node?\"\nâ†’ Should activate: n8n Code JavaScript\n\n\"Can I use pandas in Python Code node?\"\nâ†’ Should activate: n8n Code Python\n```\n\n## ðŸ”§ Requirements\n\n- **n8n-mcp MCP server** installed and configured ([Installation Guide](https://github.com/czlonkowski/n8n-mcp))\n- **Claude Pro, Max, Team, or Enterprise** plan (for Claude.ai skills)\n- **.mcp.json** configured with n8n-mcp server\n\n## ðŸ“– Documentation\n\nFor detailed installation instructions, see:\n- Main README: `../README.md`\n- Installation Guide: `../docs/INSTALLATION.md`\n- Usage Guide: `../docs/USAGE.md`\n\n## ðŸ› Troubleshooting\n\n**Claude.ai Error: \"Zip must contain exactly one SKILL.md file\"**\n- Use the individual skill zips, not the bundle\n- Each skill must be uploaded separately\n\n**Claude Code: Skills not activating**\n- Verify skills are in `~/.claude/skills/` directory\n- Check that n8n-mcp MCP server is running\n- Reload Claude Code\n\n**Skills not triggering**\n- Skills activate based on keywords in your queries\n- Try more specific questions matching skill descriptions\n- Check that SKILL.md files have correct frontmatter\n\n## ðŸ“ License\n\nMIT License - see `../LICENSE` file\n\n## ðŸ™ Credits\n\nConceived by Romuald CzÅ‚onkowski - https://www.aiadvisors.pl/en\n\nPart of the [n8n-mcp project](https://github.com/czlonkowski/n8n-mcp).\n",
        "skills/n8n-code-javascript/BUILTIN_FUNCTIONS.md": "# Built-in Functions - JavaScript Code Node\n\nComplete reference for n8n's built-in JavaScript functions and helpers.\n\n---\n\n## Overview\n\nn8n Code nodes provide powerful built-in functions beyond standard JavaScript. This guide covers:\n\n1. **$helpers.httpRequest()** - Make HTTP requests\n2. **DateTime (Luxon)** - Advanced date/time operations\n3. **$jmespath()** - Query JSON structures\n4. **$getWorkflowStaticData()** - Persistent storage\n5. **Standard JavaScript Globals** - Math, JSON, console, etc.\n6. **Available Node.js Modules** - crypto, Buffer, URL\n\n---\n\n## 1. $helpers.httpRequest() - HTTP Requests\n\nMake HTTP requests directly from Code nodes without using HTTP Request node.\n\n### Basic Usage\n\n```javascript\nconst response = await $helpers.httpRequest({\n  method: 'GET',\n  url: 'https://api.example.com/users'\n});\n\nreturn [{json: {data: response}}];\n```\n\n### Complete Options\n\n```javascript\nconst response = await $helpers.httpRequest({\n  method: 'POST',  // GET, POST, PUT, DELETE, PATCH, HEAD, OPTIONS\n  url: 'https://api.example.com/users',\n  headers: {\n    'Authorization': 'Bearer token123',\n    'Content-Type': 'application/json',\n    'User-Agent': 'n8n-workflow'\n  },\n  body: {\n    name: 'John Doe',\n    email: 'john@example.com'\n  },\n  qs: {  // Query string parameters\n    page: 1,\n    limit: 10\n  },\n  timeout: 10000,  // Milliseconds (default: no timeout)\n  json: true,  // Auto-parse JSON response (default: true)\n  simple: false,  // Don't throw on HTTP errors (default: true)\n  resolveWithFullResponse: false  // Return only body (default: false)\n});\n```\n\n### GET Request\n\n```javascript\n// Simple GET\nconst users = await $helpers.httpRequest({\n  method: 'GET',\n  url: 'https://api.example.com/users'\n});\n\nreturn [{json: {users}}];\n```\n\n```javascript\n// GET with query parameters\nconst results = await $helpers.httpRequest({\n  method: 'GET',\n  url: 'https://api.example.com/search',\n  qs: {\n    q: 'javascript',\n    page: 1,\n    per_page: 50\n  }\n});\n\nreturn [{json: results}];\n```\n\n### POST Request\n\n```javascript\n// POST with JSON body\nconst newUser = await $helpers.httpRequest({\n  method: 'POST',\n  url: 'https://api.example.com/users',\n  headers: {\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + $env.API_KEY\n  },\n  body: {\n    name: $json.body.name,\n    email: $json.body.email,\n    role: 'user'\n  }\n});\n\nreturn [{json: newUser}];\n```\n\n### PUT/PATCH Request\n\n```javascript\n// Update resource\nconst updated = await $helpers.httpRequest({\n  method: 'PATCH',\n  url: `https://api.example.com/users/${userId}`,\n  body: {\n    name: 'Updated Name',\n    status: 'active'\n  }\n});\n\nreturn [{json: updated}];\n```\n\n### DELETE Request\n\n```javascript\n// Delete resource\nawait $helpers.httpRequest({\n  method: 'DELETE',\n  url: `https://api.example.com/users/${userId}`,\n  headers: {\n    'Authorization': 'Bearer ' + $env.API_KEY\n  }\n});\n\nreturn [{json: {deleted: true, userId}}];\n```\n\n### Authentication Patterns\n\n```javascript\n// Bearer Token\nconst response = await $helpers.httpRequest({\n  url: 'https://api.example.com/data',\n  headers: {\n    'Authorization': `Bearer ${$env.API_TOKEN}`\n  }\n});\n```\n\n```javascript\n// API Key in Header\nconst response = await $helpers.httpRequest({\n  url: 'https://api.example.com/data',\n  headers: {\n    'X-API-Key': $env.API_KEY\n  }\n});\n```\n\n```javascript\n// Basic Auth (manual)\nconst credentials = Buffer.from(`${username}:${password}`).toString('base64');\n\nconst response = await $helpers.httpRequest({\n  url: 'https://api.example.com/data',\n  headers: {\n    'Authorization': `Basic ${credentials}`\n  }\n});\n```\n\n### Error Handling\n\n```javascript\n// Handle HTTP errors gracefully\ntry {\n  const response = await $helpers.httpRequest({\n    method: 'GET',\n    url: 'https://api.example.com/users',\n    simple: false  // Don't throw on 4xx/5xx\n  });\n\n  if (response.statusCode >= 200 && response.statusCode < 300) {\n    return [{json: {success: true, data: response.body}}];\n  } else {\n    return [{\n      json: {\n        success: false,\n        status: response.statusCode,\n        error: response.body\n      }\n    }];\n  }\n} catch (error) {\n  return [{\n    json: {\n      success: false,\n      error: error.message\n    }\n  }];\n}\n```\n\n### Full Response Access\n\n```javascript\n// Get full response including headers and status\nconst response = await $helpers.httpRequest({\n  url: 'https://api.example.com/data',\n  resolveWithFullResponse: true\n});\n\nreturn [{\n  json: {\n    statusCode: response.statusCode,\n    headers: response.headers,\n    body: response.body,\n    rateLimit: response.headers['x-ratelimit-remaining']\n  }\n}];\n```\n\n---\n\n## 2. DateTime (Luxon) - Date & Time Operations\n\nn8n includes Luxon for powerful date/time handling. Access via `DateTime` global.\n\n### Current Date/Time\n\n```javascript\n// Current time\nconst now = DateTime.now();\n\n// Current time in specific timezone\nconst nowTokyo = DateTime.now().setZone('Asia/Tokyo');\n\n// Today at midnight\nconst today = DateTime.now().startOf('day');\n\nreturn [{\n  json: {\n    iso: now.toISO(),  // \"2025-01-20T15:30:00.000Z\"\n    formatted: now.toFormat('yyyy-MM-dd HH:mm:ss'),  // \"2025-01-20 15:30:00\"\n    unix: now.toSeconds(),  // Unix timestamp\n    millis: now.toMillis()  // Milliseconds since epoch\n  }\n}];\n```\n\n### Formatting Dates\n\n```javascript\nconst now = DateTime.now();\n\nreturn [{\n  json: {\n    isoFormat: now.toISO(),  // ISO 8601: \"2025-01-20T15:30:00.000Z\"\n    sqlFormat: now.toSQL(),  // SQL: \"2025-01-20 15:30:00.000\"\n    httpFormat: now.toHTTP(),  // HTTP: \"Mon, 20 Jan 2025 15:30:00 GMT\"\n\n    // Custom formats\n    dateOnly: now.toFormat('yyyy-MM-dd'),  // \"2025-01-20\"\n    timeOnly: now.toFormat('HH:mm:ss'),  // \"15:30:00\"\n    readable: now.toFormat('MMMM dd, yyyy'),  // \"January 20, 2025\"\n    compact: now.toFormat('yyyyMMdd'),  // \"20250120\"\n    withDay: now.toFormat('EEEE, MMMM dd, yyyy'),  // \"Monday, January 20, 2025\"\n    custom: now.toFormat('dd/MM/yy HH:mm')  // \"20/01/25 15:30\"\n  }\n}];\n```\n\n### Parsing Dates\n\n```javascript\n// From ISO string\nconst dt1 = DateTime.fromISO('2025-01-20T15:30:00');\n\n// From specific format\nconst dt2 = DateTime.fromFormat('01/20/2025', 'MM/dd/yyyy');\n\n// From SQL\nconst dt3 = DateTime.fromSQL('2025-01-20 15:30:00');\n\n// From Unix timestamp\nconst dt4 = DateTime.fromSeconds(1737384600);\n\n// From milliseconds\nconst dt5 = DateTime.fromMillis(1737384600000);\n\nreturn [{json: {parsed: dt1.toISO()}}];\n```\n\n### Date Arithmetic\n\n```javascript\nconst now = DateTime.now();\n\nreturn [{\n  json: {\n    // Adding time\n    tomorrow: now.plus({days: 1}).toISO(),\n    nextWeek: now.plus({weeks: 1}).toISO(),\n    nextMonth: now.plus({months: 1}).toISO(),\n    inTwoHours: now.plus({hours: 2}).toISO(),\n\n    // Subtracting time\n    yesterday: now.minus({days: 1}).toISO(),\n    lastWeek: now.minus({weeks: 1}).toISO(),\n    lastMonth: now.minus({months: 1}).toISO(),\n    twoHoursAgo: now.minus({hours: 2}).toISO(),\n\n    // Complex operations\n    in90Days: now.plus({days: 90}).toFormat('yyyy-MM-dd'),\n    in6Months: now.plus({months: 6}).toFormat('yyyy-MM-dd')\n  }\n}];\n```\n\n### Time Comparisons\n\n```javascript\nconst now = DateTime.now();\nconst targetDate = DateTime.fromISO('2025-12-31');\n\nreturn [{\n  json: {\n    // Comparisons\n    isFuture: targetDate > now,\n    isPast: targetDate < now,\n    isEqual: targetDate.equals(now),\n\n    // Differences\n    daysUntil: targetDate.diff(now, 'days').days,\n    hoursUntil: targetDate.diff(now, 'hours').hours,\n    monthsUntil: targetDate.diff(now, 'months').months,\n\n    // Detailed difference\n    detailedDiff: targetDate.diff(now, ['months', 'days', 'hours']).toObject()\n  }\n}];\n```\n\n### Timezone Operations\n\n```javascript\nconst now = DateTime.now();\n\nreturn [{\n  json: {\n    // Current timezone\n    local: now.toISO(),\n\n    // Convert to different timezone\n    tokyo: now.setZone('Asia/Tokyo').toISO(),\n    newYork: now.setZone('America/New_York').toISO(),\n    london: now.setZone('Europe/London').toISO(),\n    utc: now.toUTC().toISO(),\n\n    // Get timezone info\n    timezone: now.zoneName,  // \"America/Los_Angeles\"\n    offset: now.offset,  // Offset in minutes\n    offsetFormatted: now.toFormat('ZZ')  // \"+08:00\"\n  }\n}];\n```\n\n### Start/End of Period\n\n```javascript\nconst now = DateTime.now();\n\nreturn [{\n  json: {\n    startOfDay: now.startOf('day').toISO(),\n    endOfDay: now.endOf('day').toISO(),\n    startOfWeek: now.startOf('week').toISO(),\n    endOfWeek: now.endOf('week').toISO(),\n    startOfMonth: now.startOf('month').toISO(),\n    endOfMonth: now.endOf('month').toISO(),\n    startOfYear: now.startOf('year').toISO(),\n    endOfYear: now.endOf('year').toISO()\n  }\n}];\n```\n\n### Weekday & Month Info\n\n```javascript\nconst now = DateTime.now();\n\nreturn [{\n  json: {\n    // Day info\n    weekday: now.weekday,  // 1 = Monday, 7 = Sunday\n    weekdayShort: now.weekdayShort,  // \"Mon\"\n    weekdayLong: now.weekdayLong,  // \"Monday\"\n    isWeekend: now.weekday > 5,  // Saturday or Sunday\n\n    // Month info\n    month: now.month,  // 1-12\n    monthShort: now.monthShort,  // \"Jan\"\n    monthLong: now.monthLong,  // \"January\"\n\n    // Year info\n    year: now.year,  // 2025\n    quarter: now.quarter,  // 1-4\n    daysInMonth: now.daysInMonth  // 28-31\n  }\n}];\n```\n\n---\n\n## 3. $jmespath() - JSON Querying\n\nQuery and transform JSON structures using JMESPath syntax.\n\n### Basic Queries\n\n```javascript\nconst data = $input.first().json;\n\n// Extract specific field\nconst names = $jmespath(data, 'users[*].name');\n\n// Filter array\nconst adults = $jmespath(data, 'users[?age >= `18`]');\n\n// Get specific index\nconst firstUser = $jmespath(data, 'users[0]');\n\nreturn [{json: {names, adults, firstUser}}];\n```\n\n### Advanced Queries\n\n```javascript\nconst data = $input.first().json;\n\n// Sort and slice\nconst top5 = $jmespath(data, 'users | sort_by(@, &score) | reverse(@) | [0:5]');\n\n// Extract nested fields\nconst emails = $jmespath(data, 'users[*].contact.email');\n\n// Multi-field extraction\nconst simplified = $jmespath(data, 'users[*].{name: name, email: contact.email}');\n\n// Conditional filtering\nconst premium = $jmespath(data, 'users[?subscription.tier == `premium`]');\n\nreturn [{json: {top5, emails, simplified, premium}}];\n```\n\n### Common Patterns\n\n```javascript\n// Pattern 1: Filter and project\nconst query1 = $jmespath(data, 'products[?price > `100`].{name: name, price: price}');\n\n// Pattern 2: Aggregate functions\nconst query2 = $jmespath(data, 'sum(products[*].price)');\nconst query3 = $jmespath(data, 'max(products[*].price)');\nconst query4 = $jmespath(data, 'length(products)');\n\n// Pattern 3: Nested filtering\nconst query5 = $jmespath(data, 'categories[*].products[?inStock == `true`]');\n\nreturn [{json: {query1, query2, query3, query4, query5}}];\n```\n\n---\n\n## 4. $getWorkflowStaticData() - Persistent Storage\n\nStore data that persists across workflow executions.\n\n### Basic Usage\n\n```javascript\n// Get static data storage\nconst staticData = $getWorkflowStaticData();\n\n// Initialize counter if doesn't exist\nif (!staticData.counter) {\n  staticData.counter = 0;\n}\n\n// Increment counter\nstaticData.counter++;\n\nreturn [{\n  json: {\n    executionCount: staticData.counter\n  }\n}];\n```\n\n### Use Cases\n\n```javascript\n// Use Case 1: Rate limiting\nconst staticData = $getWorkflowStaticData();\nconst now = Date.now();\n\nif (!staticData.lastRun) {\n  staticData.lastRun = now;\n  staticData.runCount = 1;\n} else {\n  const timeSinceLastRun = now - staticData.lastRun;\n\n  if (timeSinceLastRun < 60000) {  // Less than 1 minute\n    return [{json: {error: 'Rate limit: wait 1 minute between runs'}}];\n  }\n\n  staticData.lastRun = now;\n  staticData.runCount++;\n}\n\nreturn [{json: {allowed: true, totalRuns: staticData.runCount}}];\n```\n\n```javascript\n// Use Case 2: Tracking last processed ID\nconst staticData = $getWorkflowStaticData();\nconst currentItems = $input.all();\n\n// Get last processed ID\nconst lastId = staticData.lastProcessedId || 0;\n\n// Filter only new items\nconst newItems = currentItems.filter(item => item.json.id > lastId);\n\n// Update last processed ID\nif (newItems.length > 0) {\n  staticData.lastProcessedId = Math.max(...newItems.map(item => item.json.id));\n}\n\nreturn newItems;\n```\n\n```javascript\n// Use Case 3: Accumulating results\nconst staticData = $getWorkflowStaticData();\n\nif (!staticData.accumulated) {\n  staticData.accumulated = [];\n}\n\n// Add current items to accumulated list\nconst currentData = $input.all().map(item => item.json);\nstaticData.accumulated.push(...currentData);\n\nreturn [{\n  json: {\n    currentBatch: currentData.length,\n    totalAccumulated: staticData.accumulated.length,\n    allData: staticData.accumulated\n  }\n}];\n```\n\n---\n\n## 5. Standard JavaScript Globals\n\n### Math Object\n\n```javascript\nreturn [{\n  json: {\n    // Rounding\n    rounded: Math.round(3.7),  // 4\n    floor: Math.floor(3.7),  // 3\n    ceil: Math.ceil(3.2),  // 4\n\n    // Min/Max\n    max: Math.max(1, 5, 3, 9, 2),  // 9\n    min: Math.min(1, 5, 3, 9, 2),  // 1\n\n    // Random\n    random: Math.random(),  // 0-1\n    randomInt: Math.floor(Math.random() * 100),  // 0-99\n\n    // Other\n    abs: Math.abs(-5),  // 5\n    sqrt: Math.sqrt(16),  // 4\n    pow: Math.pow(2, 3)  // 8\n  }\n}];\n```\n\n### JSON Object\n\n```javascript\n// Parse JSON string\nconst jsonString = '{\"name\": \"John\", \"age\": 30}';\nconst parsed = JSON.parse(jsonString);\n\n// Stringify object\nconst obj = {name: \"John\", age: 30};\nconst stringified = JSON.stringify(obj);\n\n// Pretty print\nconst pretty = JSON.stringify(obj, null, 2);\n\nreturn [{json: {parsed, stringified, pretty}}];\n```\n\n### console Object\n\n```javascript\n// Debug logging (appears in browser console, press F12)\nconsole.log('Processing items:', $input.all().length);\nconsole.log('First item:', $input.first().json);\n\n// Other console methods\nconsole.error('Error message');\nconsole.warn('Warning message');\nconsole.info('Info message');\n\n// Continues to return data\nreturn [{json: {processed: true}}];\n```\n\n### Object Methods\n\n```javascript\nconst obj = {name: \"John\", age: 30, city: \"NYC\"};\n\nreturn [{\n  json: {\n    keys: Object.keys(obj),  // [\"name\", \"age\", \"city\"]\n    values: Object.values(obj),  // [\"John\", 30, \"NYC\"]\n    entries: Object.entries(obj),  // [[\"name\", \"John\"], ...]\n\n    // Check property\n    hasName: 'name' in obj,  // true\n\n    // Merge objects\n    merged: Object.assign({}, obj, {country: \"USA\"})\n  }\n}];\n```\n\n### Array Methods\n\n```javascript\nconst arr = [1, 2, 3, 4, 5];\n\nreturn [{\n  json: {\n    mapped: arr.map(x => x * 2),  // [2, 4, 6, 8, 10]\n    filtered: arr.filter(x => x > 2),  // [3, 4, 5]\n    reduced: arr.reduce((sum, x) => sum + x, 0),  // 15\n    some: arr.some(x => x > 3),  // true\n    every: arr.every(x => x > 0),  // true\n    find: arr.find(x => x > 3),  // 4\n    includes: arr.includes(3),  // true\n    joined: arr.join(', ')  // \"1, 2, 3, 4, 5\"\n  }\n}];\n```\n\n---\n\n## 6. Available Node.js Modules\n\n### crypto Module\n\n```javascript\nconst crypto = require('crypto');\n\n// Hash functions\nconst hash = crypto.createHash('sha256')\n  .update('my secret text')\n  .digest('hex');\n\n// MD5 hash\nconst md5 = crypto.createHash('md5')\n  .update('my text')\n  .digest('hex');\n\n// Random values\nconst randomBytes = crypto.randomBytes(16).toString('hex');\n\nreturn [{json: {hash, md5, randomBytes}}];\n```\n\n### Buffer (built-in)\n\n```javascript\n// Base64 encoding\nconst encoded = Buffer.from('Hello World').toString('base64');\n\n// Base64 decoding\nconst decoded = Buffer.from(encoded, 'base64').toString();\n\n// Hex encoding\nconst hex = Buffer.from('Hello').toString('hex');\n\nreturn [{json: {encoded, decoded, hex}}];\n```\n\n### URL / URLSearchParams\n\n```javascript\n// Parse URL\nconst url = new URL('https://example.com/path?param1=value1&param2=value2');\n\n// Build query string\nconst params = new URLSearchParams({\n  search: 'query',\n  page: 1,\n  limit: 10\n});\n\nreturn [{\n  json: {\n    host: url.host,\n    pathname: url.pathname,\n    search: url.search,\n    queryString: params.toString()  // \"search=query&page=1&limit=10\"\n  }\n}];\n```\n\n---\n\n## What's NOT Available\n\n**External npm packages are NOT available:**\n- âŒ axios\n- âŒ lodash\n- âŒ moment (use DateTime/Luxon instead)\n- âŒ request\n- âŒ Any other npm package\n\n**Workaround**: Use $helpers.httpRequest() for HTTP, or add data to workflow via HTTP Request node.\n\n---\n\n## Summary\n\n**Most Useful Built-ins**:\n1. **$helpers.httpRequest()** - API calls without HTTP Request node\n2. **DateTime** - Professional date/time handling\n3. **$jmespath()** - Complex JSON queries\n4. **Math, JSON, Object, Array** - Standard JavaScript utilities\n\n**Common Patterns**:\n- API calls: Use $helpers.httpRequest()\n- Date operations: Use DateTime (Luxon)\n- Data filtering: Use $jmespath() or JavaScript .filter()\n- Persistent data: Use $getWorkflowStaticData()\n- Hashing: Use crypto module\n\n**See Also**:\n- [SKILL.md](SKILL.md) - Overview\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - Real usage examples\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Error prevention\n",
        "skills/n8n-code-javascript/COMMON_PATTERNS.md": "# Common Patterns - JavaScript Code Node\n\nProduction-tested patterns for n8n Code nodes. These patterns are proven in real workflows.\n\n---\n\n## Overview\n\nThis guide covers the 10 most useful Code node patterns for n8n workflows. Each pattern includes:\n- **Use Case**: When to use this pattern\n- **Key Techniques**: Important coding techniques demonstrated\n- **Complete Example**: Working code you can adapt\n- **Variations**: Common modifications\n\n**Pattern Categories:**\n- Data Aggregation (Patterns 1, 5, 10)\n- Content Processing (Patterns 2, 3)\n- Data Validation & Comparison (Patterns 4)\n- Data Transformation (Patterns 5, 6, 7)\n- Output Formatting (Pattern 8)\n- Filtering & Ranking (Pattern 9)\n\n---\n\n## Pattern 1: Multi-Source Data Aggregation\n\n**Use Case**: Combining data from multiple APIs, RSS feeds, webhooks, or databases\n\n**When to use:**\n- Collecting data from multiple services\n- Normalizing different API response formats\n- Merging data sources into unified structure\n- Building aggregated reports\n\n**Key Techniques**: Loop iteration, conditional parsing, data normalization\n\n### Complete Example\n\n```javascript\n// Process and structure data collected from multiple sources\nconst allItems = $input.all();\nlet processedArticles = [];\n\n// Handle different source formats\nfor (const item of allItems) {\n  const sourceName = item.json.name || 'Unknown';\n  const sourceData = item.json;\n\n  // Parse source-specific structure - Hacker News format\n  if (sourceName === 'Hacker News' && sourceData.hits) {\n    for (const hit of sourceData.hits) {\n      processedArticles.push({\n        title: hit.title,\n        url: hit.url,\n        summary: hit.story_text || 'No summary',\n        source: 'Hacker News',\n        score: hit.points || 0,\n        fetchedAt: new Date().toISOString()\n      });\n    }\n  }\n\n  // Parse source-specific structure - Reddit format\n  else if (sourceName === 'Reddit' && sourceData.data?.children) {\n    for (const post of sourceData.data.children) {\n      processedArticles.push({\n        title: post.data.title,\n        url: post.data.url,\n        summary: post.data.selftext || 'No summary',\n        source: 'Reddit',\n        score: post.data.score || 0,\n        fetchedAt: new Date().toISOString()\n      });\n    }\n  }\n\n  // Parse source-specific structure - RSS feed format\n  else if (sourceName === 'RSS' && sourceData.items) {\n    for (const rssItem of sourceData.items) {\n      processedArticles.push({\n        title: rssItem.title,\n        url: rssItem.link,\n        summary: rssItem.description || 'No summary',\n        source: 'RSS Feed',\n        score: 0,\n        fetchedAt: new Date().toISOString()\n      });\n    }\n  }\n}\n\n// Sort by score (highest first)\nprocessedArticles.sort((a, b) => b.score - a.score);\n\nreturn processedArticles.map(article => ({json: article}));\n```\n\n### Variations\n\n```javascript\n// Variation 1: Add source weighting\nfor (const article of processedArticles) {\n  const weights = {\n    'Hacker News': 1.5,\n    'Reddit': 1.0,\n    'RSS Feed': 0.8\n  };\n\n  article.weightedScore = article.score * (weights[article.source] || 1.0);\n}\n\n// Variation 2: Filter by minimum score\nprocessedArticles = processedArticles.filter(article => article.score >= 10);\n\n// Variation 3: Deduplicate by URL\nconst seen = new Set();\nprocessedArticles = processedArticles.filter(article => {\n  if (seen.has(article.url)) {\n    return false;\n  }\n  seen.add(article.url);\n  return true;\n});\n```\n\n---\n\n## Pattern 2: Regex Filtering & Pattern Matching\n\n**Use Case**: Content analysis, keyword extraction, mention tracking, text parsing\n\n**When to use:**\n- Extracting mentions or tags from text\n- Finding patterns in unstructured data\n- Counting keyword occurrences\n- Validating formats (emails, phone numbers)\n\n**Key Techniques**: Regex matching, object aggregation, sorting/ranking\n\n### Complete Example\n\n```javascript\n// Extract and track mentions using regex patterns\nconst etfPattern = /\\b([A-Z]{2,5})\\b/g;\nconst knownETFs = ['VOO', 'VTI', 'VT', 'SCHD', 'QYLD', 'VXUS', 'SPY', 'QQQ'];\n\nconst etfMentions = {};\n\nfor (const item of $input.all()) {\n  const data = item.json.data;\n\n  // Skip if no data or children\n  if (!data?.children) continue;\n\n  for (const post of data.children) {\n    // Combine title and body text\n    const title = post.data.title || '';\n    const body = post.data.selftext || '';\n    const combinedText = (title + ' ' + body).toUpperCase();\n\n    // Find all matches\n    const matches = combinedText.match(etfPattern);\n\n    if (matches) {\n      for (const match of matches) {\n        // Only count known ETFs\n        if (knownETFs.includes(match)) {\n          if (!etfMentions[match]) {\n            etfMentions[match] = {\n              count: 0,\n              totalScore: 0,\n              posts: []\n            };\n          }\n\n          etfMentions[match].count++;\n          etfMentions[match].totalScore += post.data.score || 0;\n          etfMentions[match].posts.push({\n            title: post.data.title,\n            url: post.data.url,\n            score: post.data.score\n          });\n        }\n      }\n    }\n  }\n}\n\n// Convert to array and sort by mention count\nreturn Object.entries(etfMentions)\n  .map(([etf, data]) => ({\n    json: {\n      etf,\n      mentions: data.count,\n      totalScore: data.totalScore,\n      averageScore: data.totalScore / data.count,\n      topPosts: data.posts\n        .sort((a, b) => b.score - a.score)\n        .slice(0, 3)\n    }\n  }))\n  .sort((a, b) => b.json.mentions - a.json.mentions);\n```\n\n### Variations\n\n```javascript\n// Variation 1: Email extraction\nconst emailPattern = /\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b/g;\nconst emails = text.match(emailPattern) || [];\n\n// Variation 2: Phone number extraction\nconst phonePattern = /\\b\\d{3}[-.]?\\d{3}[-.]?\\d{4}\\b/g;\nconst phones = text.match(phonePattern) || [];\n\n// Variation 3: Hashtag extraction\nconst hashtagPattern = /#(\\w+)/g;\nconst hashtags = [];\nlet match;\nwhile ((match = hashtagPattern.exec(text)) !== null) {\n  hashtags.push(match[1]);\n}\n\n// Variation 4: URL extraction\nconst urlPattern = /https?:\\/\\/[^\\s]+/g;\nconst urls = text.match(urlPattern) || [];\n```\n\n---\n\n## Pattern 3: Markdown Parsing & Structured Data Extraction\n\n**Use Case**: Parsing formatted text, extracting structured fields, content transformation\n\n**When to use:**\n- Parsing markdown or HTML\n- Extracting data from structured text\n- Converting formatted content to JSON\n- Processing documentation or articles\n\n**Key Techniques**: Regex grouping, helper functions, data normalization, while loops for iteration\n\n### Complete Example\n\n```javascript\n// Parse markdown and extract structured information\nconst markdown = $input.first().json.data.markdown;\nconst adRegex = /##\\s*(.*?)\\n(.*?)(?=\\n##|\\n---|$)/gs;\n\nconst ads = [];\nlet match;\n\n// Helper function to parse time strings to minutes\nfunction parseTimeToMinutes(timeStr) {\n  if (!timeStr) return 999999;  // Sort unparseable times last\n\n  const hourMatch = timeStr.match(/(\\d+)\\s*hour/);\n  const dayMatch = timeStr.match(/(\\d+)\\s*day/);\n  const minMatch = timeStr.match(/(\\d+)\\s*min/);\n\n  let totalMinutes = 0;\n  if (dayMatch) totalMinutes += parseInt(dayMatch[1]) * 1440;  // 24 * 60\n  if (hourMatch) totalMinutes += parseInt(hourMatch[1]) * 60;\n  if (minMatch) totalMinutes += parseInt(minMatch[1]);\n\n  return totalMinutes;\n}\n\n// Extract all job postings from markdown\nwhile ((match = adRegex.exec(markdown)) !== null) {\n  const title = match[1]?.trim() || 'No title';\n  const content = match[2]?.trim() || '';\n\n  // Extract structured fields from content\n  const districtMatch = content.match(/\\*\\*District:\\*\\*\\s*(.*?)(?:\\n|$)/);\n  const salaryMatch = content.match(/\\*\\*Salary:\\*\\*\\s*(.*?)(?:\\n|$)/);\n  const timeMatch = content.match(/Posted:\\s*(.*?)\\*/);\n\n  ads.push({\n    title: title,\n    district: districtMatch?.[1].trim() || 'Unknown',\n    salary: salaryMatch?.[1].trim() || 'Not specified',\n    postedTimeAgo: timeMatch?.[1] || 'Unknown',\n    timeInMinutes: parseTimeToMinutes(timeMatch?.[1]),\n    fullContent: content,\n    extractedAt: new Date().toISOString()\n  });\n}\n\n// Sort by recency (posted time)\nads.sort((a, b) => a.timeInMinutes - b.timeInMinutes);\n\nreturn ads.map(ad => ({json: ad}));\n```\n\n### Variations\n\n```javascript\n// Variation 1: Parse HTML table to JSON\nconst tableRegex = /<tr>(.*?)<\\/tr>/gs;\nconst cellRegex = /<td>(.*?)<\\/td>/g;\n\nconst rows = [];\nlet tableMatch;\n\nwhile ((tableMatch = tableRegex.exec(htmlTable)) !== null) {\n  const cells = [];\n  let cellMatch;\n\n  while ((cellMatch = cellRegex.exec(tableMatch[1])) !== null) {\n    cells.push(cellMatch[1].trim());\n  }\n\n  if (cells.length > 0) {\n    rows.push(cells);\n  }\n}\n\n// Variation 2: Extract code blocks from markdown\nconst codeBlockRegex = /```(\\w+)?\\n(.*?)```/gs;\nconst codeBlocks = [];\n\nwhile ((match = codeBlockRegex.exec(markdown)) !== null) {\n  codeBlocks.push({\n    language: match[1] || 'plain',\n    code: match[2].trim()\n  });\n}\n\n// Variation 3: Parse YAML frontmatter\nconst frontmatterRegex = /^---\\n(.*?)\\n---/s;\nconst frontmatterMatch = content.match(frontmatterRegex);\n\nif (frontmatterMatch) {\n  const yamlLines = frontmatterMatch[1].split('\\n');\n  const metadata = {};\n\n  for (const line of yamlLines) {\n    const [key, ...valueParts] = line.split(':');\n    if (key && valueParts.length > 0) {\n      metadata[key.trim()] = valueParts.join(':').trim();\n    }\n  }\n}\n```\n\n---\n\n## Pattern 4: JSON Comparison & Validation\n\n**Use Case**: Workflow versioning, configuration validation, change detection, data integrity\n\n**When to use:**\n- Comparing two versions of data\n- Detecting changes in configurations\n- Validating data consistency\n- Checking for differences\n\n**Key Techniques**: JSON ordering, base64 decoding, deep comparison, object manipulation\n\n### Complete Example\n\n```javascript\n// Compare and validate JSON objects from different sources\nconst orderJsonKeys = (jsonObj) => {\n  const ordered = {};\n  Object.keys(jsonObj).sort().forEach(key => {\n    ordered[key] = jsonObj[key];\n  });\n  return ordered;\n};\n\nconst allItems = $input.all();\n\n// Assume first item is base64-encoded original, second is current\nconst origWorkflow = JSON.parse(\n  Buffer.from(allItems[0].json.content, 'base64').toString()\n);\nconst currentWorkflow = allItems[1].json;\n\n// Order keys for consistent comparison\nconst orderedOriginal = orderJsonKeys(origWorkflow);\nconst orderedCurrent = orderJsonKeys(currentWorkflow);\n\n// Deep comparison\nconst isSame = JSON.stringify(orderedOriginal) === JSON.stringify(orderedCurrent);\n\n// Find differences\nconst differences = [];\nfor (const key of Object.keys(orderedOriginal)) {\n  if (JSON.stringify(orderedOriginal[key]) !== JSON.stringify(orderedCurrent[key])) {\n    differences.push({\n      field: key,\n      original: orderedOriginal[key],\n      current: orderedCurrent[key]\n    });\n  }\n}\n\n// Check for new keys\nfor (const key of Object.keys(orderedCurrent)) {\n  if (!(key in orderedOriginal)) {\n    differences.push({\n      field: key,\n      original: null,\n      current: orderedCurrent[key],\n      status: 'new'\n    });\n  }\n}\n\nreturn [{\n  json: {\n    identical: isSame,\n    differenceCount: differences.length,\n    differences: differences,\n    original: orderedOriginal,\n    current: orderedCurrent,\n    comparedAt: new Date().toISOString()\n  }\n}];\n```\n\n### Variations\n\n```javascript\n// Variation 1: Simple equality check\nconst isEqual = JSON.stringify(obj1) === JSON.stringify(obj2);\n\n// Variation 2: Deep diff with detailed changes\nfunction deepDiff(obj1, obj2, path = '') {\n  const changes = [];\n\n  for (const key in obj1) {\n    const currentPath = path ? `${path}.${key}` : key;\n\n    if (!(key in obj2)) {\n      changes.push({type: 'removed', path: currentPath, value: obj1[key]});\n    } else if (typeof obj1[key] === 'object' && typeof obj2[key] === 'object') {\n      changes.push(...deepDiff(obj1[key], obj2[key], currentPath));\n    } else if (obj1[key] !== obj2[key]) {\n      changes.push({\n        type: 'modified',\n        path: currentPath,\n        from: obj1[key],\n        to: obj2[key]\n      });\n    }\n  }\n\n  for (const key in obj2) {\n    if (!(key in obj1)) {\n      const currentPath = path ? `${path}.${key}` : key;\n      changes.push({type: 'added', path: currentPath, value: obj2[key]});\n    }\n  }\n\n  return changes;\n}\n\n// Variation 3: Schema validation\nfunction validateSchema(data, schema) {\n  const errors = [];\n\n  for (const field of schema.required || []) {\n    if (!(field in data)) {\n      errors.push(`Missing required field: ${field}`);\n    }\n  }\n\n  for (const [field, type] of Object.entries(schema.types || {})) {\n    if (field in data && typeof data[field] !== type) {\n      errors.push(`Field ${field} should be ${type}, got ${typeof data[field]}`);\n    }\n  }\n\n  return {\n    valid: errors.length === 0,\n    errors\n  };\n}\n```\n\n---\n\n## Pattern 5: CRM Data Transformation\n\n**Use Case**: Lead enrichment, data normalization, API preparation, form data processing\n\n**When to use:**\n- Processing form submissions\n- Preparing data for CRM APIs\n- Normalizing contact information\n- Enriching lead data\n\n**Key Techniques**: Object destructuring, data mapping, format conversion, field splitting\n\n### Complete Example\n\n```javascript\n// Transform form data into CRM-compatible format\nconst item = $input.all()[0];\nconst {\n  name,\n  email,\n  phone,\n  company,\n  course_interest,\n  message,\n  timestamp\n} = item.json;\n\n// Split name into first and last\nconst nameParts = name.split(' ');\nconst firstName = nameParts[0] || '';\nconst lastName = nameParts.slice(1).join(' ') || 'Unknown';\n\n// Format phone number\nconst cleanPhone = phone.replace(/[^\\d]/g, '');  // Remove non-digits\n\n// Build CRM data structure\nconst crmData = {\n  data: {\n    type: 'Contact',\n    attributes: {\n      first_name: firstName,\n      last_name: lastName,\n      email1: email,\n      phone_work: cleanPhone,\n      account_name: company,\n      description: `Course Interest: ${course_interest}\\n\\nMessage: ${message}\\n\\nSubmitted: ${timestamp}`,\n      lead_source: 'Website Form',\n      status: 'New'\n    }\n  },\n  metadata: {\n    original_submission: timestamp,\n    processed_at: new Date().toISOString()\n  }\n};\n\nreturn [{\n  json: {\n    ...item.json,\n    crmData,\n    processed: true\n  }\n}];\n```\n\n### Variations\n\n```javascript\n// Variation 1: Multiple contact processing\nconst contacts = $input.all();\n\nreturn contacts.map(item => {\n  const data = item.json;\n  const [firstName, ...lastNameParts] = data.name.split(' ');\n\n  return {\n    json: {\n      firstName,\n      lastName: lastNameParts.join(' ') || 'Unknown',\n      email: data.email.toLowerCase(),\n      phone: data.phone.replace(/[^\\d]/g, ''),\n      tags: [data.source, data.interest_level].filter(Boolean)\n    }\n  };\n});\n\n// Variation 2: Field validation and normalization\nfunction normalizePContact(raw) {\n  return {\n    first_name: raw.firstName?.trim() || '',\n    last_name: raw.lastName?.trim() || 'Unknown',\n    email: raw.email?.toLowerCase().trim() || '',\n    phone: raw.phone?.replace(/[^\\d]/g, '') || '',\n    company: raw.company?.trim() || 'Unknown',\n    title: raw.title?.trim() || '',\n    valid: Boolean(raw.email && raw.firstName)\n  };\n}\n\n// Variation 3: Lead scoring\nfunction calculateLeadScore(data) {\n  let score = 0;\n\n  if (data.email) score += 10;\n  if (data.phone) score += 10;\n  if (data.company) score += 15;\n  if (data.title?.toLowerCase().includes('director')) score += 20;\n  if (data.title?.toLowerCase().includes('manager')) score += 15;\n  if (data.message?.length > 100) score += 10;\n\n  return score;\n}\n```\n\n---\n\n## Pattern 6: Release Information Processing\n\n**Use Case**: Version management, changelog parsing, release notes generation, GitHub API processing\n\n**When to use:**\n- Processing GitHub releases\n- Filtering stable versions\n- Generating changelog summaries\n- Extracting version information\n\n**Key Techniques**: Array filtering, conditional field extraction, date formatting, string manipulation\n\n### Complete Example\n\n```javascript\n// Extract and filter stable releases from GitHub API\nconst allReleases = $input.first().json;\n\nconst stableReleases = allReleases\n  .filter(release => !release.prerelease && !release.draft)\n  .slice(0, 10)\n  .map(release => {\n    // Extract highlights section from changelog\n    const body = release.body || '';\n    let highlights = 'No highlights available';\n\n    if (body.includes('## Highlights:')) {\n      highlights = body.split('## Highlights:')[1]?.split('##')[0]?.trim();\n    } else {\n      // Fallback to first 500 chars\n      highlights = body.substring(0, 500) + '...';\n    }\n\n    return {\n      tag: release.tag_name,\n      name: release.name,\n      published: release.published_at,\n      publishedDate: new Date(release.published_at).toLocaleDateString(),\n      author: release.author.login,\n      url: release.html_url,\n      changelog: body,\n      highlights: highlights,\n      assetCount: release.assets.length,\n      assets: release.assets.map(asset => ({\n        name: asset.name,\n        size: asset.size,\n        downloadCount: asset.download_count,\n        downloadUrl: asset.browser_download_url\n      }))\n    };\n  });\n\nreturn stableReleases.map(release => ({json: release}));\n```\n\n### Variations\n\n```javascript\n// Variation 1: Version comparison\nfunction compareVersions(v1, v2) {\n  const parts1 = v1.replace('v', '').split('.').map(Number);\n  const parts2 = v2.replace('v', '').split('.').map(Number);\n\n  for (let i = 0; i < Math.max(parts1.length, parts2.length); i++) {\n    const num1 = parts1[i] || 0;\n    const num2 = parts2[i] || 0;\n\n    if (num1 > num2) return 1;\n    if (num1 < num2) return -1;\n  }\n\n  return 0;\n}\n\n// Variation 2: Breaking change detection\nfunction hasBreakingChanges(changelog) {\n  const breakingKeywords = [\n    'BREAKING CHANGE',\n    'breaking change',\n    'BC:',\n    'ðŸ’¥'\n  ];\n\n  return breakingKeywords.some(keyword => changelog.includes(keyword));\n}\n\n// Variation 3: Extract version numbers\nconst versionPattern = /v?(\\d+)\\.(\\d+)\\.(\\d+)/;\nconst match = tagName.match(versionPattern);\n\nif (match) {\n  const [_, major, minor, patch] = match;\n  const version = {major: parseInt(major), minor: parseInt(minor), patch: parseInt(patch)};\n}\n```\n\n---\n\n## Pattern 7: Array Transformation with Context\n\n**Use Case**: Quick data transformation, field mapping, adding computed fields\n\n**When to use:**\n- Transforming arrays with additional context\n- Adding calculated fields\n- Simplifying complex objects\n- Pluralization logic\n\n**Key Techniques**: Array methods chaining, ternary operators, computed properties\n\n### Complete Example\n\n```javascript\n// Transform releases with contextual information\nconst releases = $input.first().json\n  .filter(release => !release.prerelease && !release.draft)\n  .slice(0, 10)\n  .map(release => ({\n    version: release.tag_name,\n    assetCount: release.assets.length,\n    assetsCountText: release.assets.length === 1 ? 'file' : 'files',\n    downloadUrl: release.html_url,\n    isRecent: new Date(release.published_at) > new Date(Date.now() - 30 * 24 * 60 * 60 * 1000),\n    age: Math.floor((Date.now() - new Date(release.published_at)) / (24 * 60 * 60 * 1000)),\n    ageText: `${Math.floor((Date.now() - new Date(release.published_at)) / (24 * 60 * 60 * 1000))} days ago`\n  }));\n\nreturn releases.map(release => ({json: release}));\n```\n\n### Variations\n\n```javascript\n// Variation 1: Add ranking\nconst items = $input.all()\n  .sort((a, b) => b.json.score - a.json.score)\n  .map((item, index) => ({\n    json: {\n      ...item.json,\n      rank: index + 1,\n      medal: index < 3 ? ['ðŸ¥‡', 'ðŸ¥ˆ', 'ðŸ¥‰'][index] : ''\n    }\n  }));\n\n// Variation 2: Add percentage calculations\nconst total = $input.all().reduce((sum, item) => sum + item.json.value, 0);\n\nconst itemsWithPercentage = $input.all().map(item => ({\n  json: {\n    ...item.json,\n    percentage: ((item.json.value / total) * 100).toFixed(2) + '%'\n  }\n}));\n\n// Variation 3: Add category labels\nconst categorize = (value) => {\n  if (value > 100) return 'High';\n  if (value > 50) return 'Medium';\n  return 'Low';\n};\n\nconst categorized = $input.all().map(item => ({\n  json: {\n    ...item.json,\n    category: categorize(item.json.value)\n  }\n}));\n```\n\n---\n\n## Pattern 8: Slack Block Kit Formatting\n\n**Use Case**: Chat notifications, rich message formatting, interactive messages\n\n**When to use:**\n- Sending formatted Slack messages\n- Creating interactive notifications\n- Building rich content for chat platforms\n- Status reports and alerts\n\n**Key Techniques**: Template literals, nested objects, Block Kit syntax, date formatting\n\n### Complete Example\n\n```javascript\n// Create Slack-formatted message with structured blocks\nconst date = new Date().toISOString().split('T')[0];\nconst data = $input.first().json;\n\nreturn [{\n  json: {\n    text: `Daily Report - ${date}`,  // Fallback text\n    blocks: [\n      {\n        type: \"header\",\n        text: {\n          type: \"plain_text\",\n          text: `ðŸ“Š Daily Security Report - ${date}`\n        }\n      },\n      {\n        type: \"section\",\n        text: {\n          type: \"mrkdwn\",\n          text: `*Status:* ${data.status === 'ok' ? 'âœ… All Clear' : 'âš ï¸ Issues Detected'}\\n*Alerts:* ${data.alertCount || 0}\\n*Updated:* ${new Date().toLocaleString()}`\n        }\n      },\n      {\n        type: \"divider\"\n      },\n      {\n        type: \"section\",\n        fields: [\n          {\n            type: \"mrkdwn\",\n            text: `*Failed Logins:*\\n${data.failedLogins || 0}`\n          },\n          {\n            type: \"mrkdwn\",\n            text: `*API Errors:*\\n${data.apiErrors || 0}`\n          },\n          {\n            type: \"mrkdwn\",\n            text: `*Uptime:*\\n${data.uptime || '100%'}`\n          },\n          {\n            type: \"mrkdwn\",\n            text: `*Response Time:*\\n${data.avgResponseTime || 'N/A'}ms`\n          }\n        ]\n      },\n      {\n        type: \"context\",\n        elements: [{\n          type: \"mrkdwn\",\n          text: `Report generated automatically by n8n workflow`\n        }]\n      }\n    ]\n  }\n}];\n```\n\n### Variations\n\n```javascript\n// Variation 1: Interactive buttons\nconst blocksWithButtons = [\n  {\n    type: \"section\",\n    text: {\n      type: \"mrkdwn\",\n      text: \"Would you like to approve this request?\"\n    },\n    accessory: {\n      type: \"button\",\n      text: {\n        type: \"plain_text\",\n        text: \"Approve\"\n      },\n      style: \"primary\",\n      value: \"approve\",\n      action_id: \"approve_button\"\n    }\n  }\n];\n\n// Variation 2: List formatting\nconst items = ['Item 1', 'Item 2', 'Item 3'];\nconst formattedList = items.map((item, i) => `${i + 1}. ${item}`).join('\\n');\n\n// Variation 3: Status indicators\nfunction getStatusEmoji(status) {\n  const statusMap = {\n    'success': 'âœ…',\n    'warning': 'âš ï¸',\n    'error': 'âŒ',\n    'info': 'â„¹ï¸'\n  };\n\n  return statusMap[status] || 'â€¢';\n}\n\n// Variation 4: Truncate long messages\nfunction truncate(text, maxLength = 3000) {\n  if (text.length <= maxLength) return text;\n  return text.substring(0, maxLength - 3) + '...';\n}\n```\n\n---\n\n## Pattern 9: Top N Filtering & Ranking\n\n**Use Case**: RAG pipelines, ranking algorithms, result filtering, leaderboards\n\n**When to use:**\n- Getting top results by score\n- Filtering best/worst performers\n- Building leaderboards\n- Relevance ranking\n\n**Key Techniques**: Sorting, slicing, null coalescing, score calculations\n\n### Complete Example\n\n```javascript\n// Filter and rank by similarity score, return top results\nconst ragResponse = $input.item.json;\nconst chunks = ragResponse.chunks || [];\n\n// Sort by similarity (highest first)\nconst topChunks = chunks\n  .sort((a, b) => (b.similarity || 0) - (a.similarity || 0))\n  .slice(0, 6);\n\nreturn [{\n  json: {\n    query: ragResponse.query,\n    topChunks: topChunks,\n    count: topChunks.length,\n    maxSimilarity: topChunks[0]?.similarity || 0,\n    minSimilarity: topChunks[topChunks.length - 1]?.similarity || 0,\n    averageSimilarity: topChunks.reduce((sum, chunk) => sum + (chunk.similarity || 0), 0) / topChunks.length\n  }\n}];\n```\n\n### Variations\n\n```javascript\n// Variation 1: Top N with minimum threshold\nconst threshold = 0.7;\nconst topItems = $input.all()\n  .filter(item => item.json.score >= threshold)\n  .sort((a, b) => b.json.score - a.json.score)\n  .slice(0, 10);\n\n// Variation 2: Bottom N (worst performers)\nconst bottomItems = $input.all()\n  .sort((a, b) => a.json.score - b.json.score)  // Ascending\n  .slice(0, 5);\n\n// Variation 3: Top N by multiple criteria\nconst ranked = $input.all()\n  .map(item => ({\n    ...item,\n    compositeScore: (item.json.relevance * 0.6) + (item.json.recency * 0.4)\n  }))\n  .sort((a, b) => b.compositeScore - a.compositeScore)\n  .slice(0, 10);\n\n// Variation 4: Percentile filtering\nconst allScores = $input.all().map(item => item.json.score).sort((a, b) => b - a);\nconst percentile95 = allScores[Math.floor(allScores.length * 0.05)];\n\nconst topPercentile = $input.all().filter(item => item.json.score >= percentile95);\n```\n\n---\n\n## Pattern 10: String Aggregation & Reporting\n\n**Use Case**: Report generation, log aggregation, content concatenation, summary creation\n\n**When to use:**\n- Combining multiple text outputs\n- Generating reports from data\n- Aggregating logs or messages\n- Creating formatted summaries\n\n**Key Techniques**: Array joining, string concatenation, template literals, timestamp handling\n\n### Complete Example\n\n```javascript\n// Aggregate multiple text inputs into formatted report\nconst allItems = $input.all();\n\n// Collect all messages\nconst messages = allItems.map(item => item.json.message);\n\n// Build report\nconst header = `ðŸŽ¯ **Daily Summary Report**\\nðŸ“… ${new Date().toLocaleString()}\\nðŸ“Š Total Items: ${messages.length}\\n\\n`;\nconst divider = '\\n\\n---\\n\\n';\nconst footer = `\\n\\n---\\n\\nâœ… Report generated at ${new Date().toISOString()}`;\n\nconst finalReport = header + messages.join(divider) + footer;\n\nreturn [{\n  json: {\n    report: finalReport,\n    messageCount: messages.length,\n    generatedAt: new Date().toISOString(),\n    reportLength: finalReport.length\n  }\n}];\n```\n\n### Variations\n\n```javascript\n// Variation 1: Numbered list\nconst numberedReport = allItems\n  .map((item, index) => `${index + 1}. ${item.json.title}\\n   ${item.json.description}`)\n  .join('\\n\\n');\n\n// Variation 2: Markdown table\nconst headers = '| Name | Status | Score |\\n|------|--------|-------|\\n';\nconst rows = allItems\n  .map(item => `| ${item.json.name} | ${item.json.status} | ${item.json.score} |`)\n  .join('\\n');\n\nconst table = headers + rows;\n\n// Variation 3: HTML report\nconst htmlReport = `\n<!DOCTYPE html>\n<html>\n<head><title>Report</title></head>\n<body>\n  <h1>Report - ${new Date().toLocaleDateString()}</h1>\n  <ul>\n    ${allItems.map(item => `<li>${item.json.title}: ${item.json.value}</li>`).join('\\n    ')}\n  </ul>\n</body>\n</html>\n`;\n\n// Variation 4: JSON summary\nconst summary = {\n  generated: new Date().toISOString(),\n  totalItems: allItems.length,\n  items: allItems.map(item => item.json),\n  statistics: {\n    total: allItems.reduce((sum, item) => sum + (item.json.value || 0), 0),\n    average: allItems.reduce((sum, item) => sum + (item.json.value || 0), 0) / allItems.length,\n    max: Math.max(...allItems.map(item => item.json.value || 0)),\n    min: Math.min(...allItems.map(item => item.json.value || 0))\n  }\n};\n```\n\n---\n\n## Choosing the Right Pattern\n\n### Pattern Selection Guide\n\n| Your Goal | Use Pattern |\n|-----------|-------------|\n| Combine multiple API responses | Pattern 1 (Multi-source Aggregation) |\n| Extract mentions or keywords | Pattern 2 (Regex Filtering) |\n| Parse formatted text | Pattern 3 (Markdown Parsing) |\n| Detect changes in data | Pattern 4 (JSON Comparison) |\n| Prepare form data for CRM | Pattern 5 (CRM Transformation) |\n| Process GitHub releases | Pattern 6 (Release Processing) |\n| Add computed fields | Pattern 7 (Array Transformation) |\n| Format Slack messages | Pattern 8 (Block Kit Formatting) |\n| Get top results | Pattern 9 (Top N Filtering) |\n| Create text reports | Pattern 10 (String Aggregation) |\n\n### Combining Patterns\n\nMany real workflows combine multiple patterns:\n\n```javascript\n// Example: Multi-source aggregation + Top N filtering\nconst allItems = $input.all();\nconst aggregated = [];\n\n// Pattern 1: Aggregate from different sources\nfor (const item of allItems) {\n  // ... aggregation logic\n  aggregated.push(normalizedItem);\n}\n\n// Pattern 9: Get top 10 by score\nconst top10 = aggregated\n  .sort((a, b) => b.score - a.score)\n  .slice(0, 10);\n\n// Pattern 10: Generate report\nconst report = `Top 10 Items:\\n\\n${top10.map((item, i) => `${i + 1}. ${item.title} (${item.score})`).join('\\n')}`;\n\nreturn [{json: {report, items: top10}}];\n```\n\n---\n\n## Summary\n\n**Most Useful Patterns**:\n1. Multi-source Aggregation - Combining data from APIs, databases\n2. Top N Filtering - Rankings, leaderboards, best results\n3. Data Transformation - CRM data, field mapping, enrichment\n\n**Key Techniques Across Patterns**:\n- Array methods (map, filter, reduce, sort, slice)\n- Regex for pattern matching\n- Object manipulation and destructuring\n- Error handling with optional chaining\n- Template literals for formatting\n\n**See Also**:\n- [DATA_ACCESS.md](DATA_ACCESS.md) - Data access methods\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Avoid common mistakes\n- [BUILTIN_FUNCTIONS.md](BUILTIN_FUNCTIONS.md) - Built-in helpers\n",
        "skills/n8n-code-javascript/DATA_ACCESS.md": "# Data Access Patterns - JavaScript Code Node\n\nComprehensive guide to accessing data in n8n Code nodes using JavaScript.\n\n---\n\n## Overview\n\nIn n8n Code nodes, you access data from previous nodes using built-in variables and methods. Understanding which method to use is critical for correct workflow execution.\n\n**Data Access Priority** (by common usage):\n1. **`$input.all()`** - Most common - Batch operations, aggregations\n2. **`$input.first()`** - Very common - Single item operations\n3. **`$input.item`** - Common - Each Item mode only\n4. **`$node[\"NodeName\"].json`** - Specific node references\n5. **`$json`** - Direct current item (legacy, use `$input` instead)\n\n---\n\n## Pattern 1: $input.all() - Process All Items\n\n**Usage**: Most common pattern for batch processing\n\n**When to use:**\n- Processing multiple records\n- Aggregating data (sum, count, average)\n- Filtering arrays\n- Transforming datasets\n- Comparing items\n- Sorting or ranking\n\n### Basic Usage\n\n```javascript\n// Get all items from previous node\nconst allItems = $input.all();\n\n// allItems is an array of objects like:\n// [\n//   {json: {id: 1, name: \"Alice\"}},\n//   {json: {id: 2, name: \"Bob\"}}\n// ]\n\nconsole.log(`Received ${allItems.length} items`);\n\nreturn allItems;\n```\n\n### Example 1: Filter Active Items\n\n```javascript\nconst allItems = $input.all();\n\n// Filter only active items\nconst activeItems = allItems.filter(item => item.json.status === 'active');\n\nreturn activeItems;\n```\n\n### Example 2: Transform All Items\n\n```javascript\nconst allItems = $input.all();\n\n// Map to new structure\nconst transformed = allItems.map(item => ({\n  json: {\n    id: item.json.id,\n    fullName: `${item.json.firstName} ${item.json.lastName}`,\n    email: item.json.email,\n    processedAt: new Date().toISOString()\n  }\n}));\n\nreturn transformed;\n```\n\n### Example 3: Aggregate Data\n\n```javascript\nconst allItems = $input.all();\n\n// Calculate total\nconst total = allItems.reduce((sum, item) => {\n  return sum + (item.json.amount || 0);\n}, 0);\n\nreturn [{\n  json: {\n    total,\n    count: allItems.length,\n    average: total / allItems.length\n  }\n}];\n```\n\n### Example 4: Sort and Limit\n\n```javascript\nconst allItems = $input.all();\n\n// Get top 5 by score\nconst topFive = allItems\n  .sort((a, b) => (b.json.score || 0) - (a.json.score || 0))\n  .slice(0, 5);\n\nreturn topFive.map(item => ({json: item.json}));\n```\n\n### Example 5: Group By Category\n\n```javascript\nconst allItems = $input.all();\n\n// Group items by category\nconst grouped = {};\n\nfor (const item of allItems) {\n  const category = item.json.category || 'Uncategorized';\n\n  if (!grouped[category]) {\n    grouped[category] = [];\n  }\n\n  grouped[category].push(item.json);\n}\n\n// Convert to array format\nreturn Object.entries(grouped).map(([category, items]) => ({\n  json: {\n    category,\n    items,\n    count: items.length\n  }\n}));\n```\n\n### Example 6: Deduplicate by ID\n\n```javascript\nconst allItems = $input.all();\n\n// Remove duplicates by ID\nconst seen = new Set();\nconst unique = [];\n\nfor (const item of allItems) {\n  const id = item.json.id;\n\n  if (!seen.has(id)) {\n    seen.add(id);\n    unique.push(item);\n  }\n}\n\nreturn unique;\n```\n\n---\n\n## Pattern 2: $input.first() - Get First Item\n\n**Usage**: Very common for single-item operations\n\n**When to use:**\n- Previous node returns single object\n- Working with API responses\n- Getting initial/first data point\n- Configuration or metadata access\n\n### Basic Usage\n\n```javascript\n// Get first item from previous node\nconst firstItem = $input.first();\n\n// Access the JSON data\nconst data = firstItem.json;\n\nconsole.log('First item:', data);\n\nreturn [{json: data}];\n```\n\n### Example 1: Process Single API Response\n\n```javascript\n// Get API response (typically single object)\nconst response = $input.first().json;\n\n// Extract what you need\nreturn [{\n  json: {\n    userId: response.data.user.id,\n    userName: response.data.user.name,\n    status: response.status,\n    fetchedAt: new Date().toISOString()\n  }\n}];\n```\n\n### Example 2: Transform Single Object\n\n```javascript\nconst data = $input.first().json;\n\n// Transform structure\nreturn [{\n  json: {\n    id: data.id,\n    contact: {\n      email: data.email,\n      phone: data.phone\n    },\n    address: {\n      street: data.street,\n      city: data.city,\n      zip: data.zip\n    }\n  }\n}];\n```\n\n### Example 3: Validate Single Item\n\n```javascript\nconst item = $input.first().json;\n\n// Validation logic\nconst isValid = item.email && item.email.includes('@');\n\nreturn [{\n  json: {\n    ...item,\n    valid: isValid,\n    validatedAt: new Date().toISOString()\n  }\n}];\n```\n\n### Example 4: Extract Nested Data\n\n```javascript\nconst response = $input.first().json;\n\n// Navigate nested structure\nconst users = response.data?.users || [];\n\nreturn users.map(user => ({\n  json: {\n    id: user.id,\n    name: user.profile?.name || 'Unknown',\n    email: user.contact?.email || 'no-email'\n  }\n}));\n```\n\n### Example 5: Combine with Other Methods\n\n```javascript\n// Get first item's data\nconst firstData = $input.first().json;\n\n// Use it to filter all items\nconst allItems = $input.all();\nconst matching = allItems.filter(item =>\n  item.json.category === firstData.targetCategory\n);\n\nreturn matching;\n```\n\n---\n\n## Pattern 3: $input.item - Current Item (Each Item Mode)\n\n**Usage**: Common in \"Run Once for Each Item\" mode\n\n**When to use:**\n- Mode is set to \"Run Once for Each Item\"\n- Need to process items independently\n- Per-item API calls or validations\n- Item-specific error handling\n\n**IMPORTANT**: Only use in \"Each Item\" mode. Will be undefined in \"All Items\" mode.\n\n### Basic Usage\n\n```javascript\n// In \"Run Once for Each Item\" mode\nconst currentItem = $input.item;\nconst data = currentItem.json;\n\nconsole.log('Processing item:', data.id);\n\nreturn [{\n  json: {\n    ...data,\n    processed: true\n  }\n}];\n```\n\n### Example 1: Add Processing Metadata\n\n```javascript\nconst item = $input.item;\n\nreturn [{\n  json: {\n    ...item.json,\n    processed: true,\n    processedAt: new Date().toISOString(),\n    processingDuration: Math.random() * 1000  // Simulated duration\n  }\n}];\n```\n\n### Example 2: Per-Item Validation\n\n```javascript\nconst item = $input.item;\nconst data = item.json;\n\n// Validate this specific item\nconst errors = [];\n\nif (!data.email) errors.push('Email required');\nif (!data.name) errors.push('Name required');\nif (data.age && data.age < 18) errors.push('Must be 18+');\n\nreturn [{\n  json: {\n    ...data,\n    valid: errors.length === 0,\n    errors: errors.length > 0 ? errors : undefined\n  }\n}];\n```\n\n### Example 3: Item-Specific API Call\n\n```javascript\nconst item = $input.item;\nconst userId = item.json.userId;\n\n// Make API call specific to this item\nconst response = await $helpers.httpRequest({\n  method: 'GET',\n  url: `https://api.example.com/users/${userId}/details`\n});\n\nreturn [{\n  json: {\n    ...item.json,\n    details: response\n  }\n}];\n```\n\n### Example 4: Conditional Processing\n\n```javascript\nconst item = $input.item;\nconst data = item.json;\n\n// Process based on item type\nif (data.type === 'premium') {\n  return [{\n    json: {\n      ...data,\n      discount: 0.20,\n      tier: 'premium'\n    }\n  }];\n} else {\n  return [{\n    json: {\n      ...data,\n      discount: 0.05,\n      tier: 'standard'\n    }\n  }];\n}\n```\n\n---\n\n## Pattern 4: $node - Reference Other Nodes\n\n**Usage**: Less common, but powerful for specific scenarios\n\n**When to use:**\n- Need data from specific named node\n- Combining data from multiple nodes\n- Accessing metadata about workflow execution\n\n### Basic Usage\n\n```javascript\n// Get output from specific node\nconst webhookData = $node[\"Webhook\"].json;\nconst apiData = $node[\"HTTP Request\"].json;\n\nreturn [{\n  json: {\n    fromWebhook: webhookData,\n    fromAPI: apiData\n  }\n}];\n```\n\n### Example 1: Combine Multiple Sources\n\n```javascript\n// Reference multiple nodes\nconst webhook = $node[\"Webhook\"].json;\nconst database = $node[\"Postgres\"].json;\nconst api = $node[\"HTTP Request\"].json;\n\nreturn [{\n  json: {\n    combined: {\n      webhook: webhook.body,\n      dbRecords: database.length,\n      apiResponse: api.status\n    },\n    processedAt: new Date().toISOString()\n  }\n}];\n```\n\n### Example 2: Compare Across Nodes\n\n```javascript\nconst oldData = $node[\"Get Old Data\"].json;\nconst newData = $node[\"Get New Data\"].json;\n\n// Compare\nconst changes = {\n  added: newData.filter(n => !oldData.find(o => o.id === n.id)),\n  removed: oldData.filter(o => !newData.find(n => n.id === o.id)),\n  modified: newData.filter(n => {\n    const old = oldData.find(o => o.id === n.id);\n    return old && JSON.stringify(old) !== JSON.stringify(n);\n  })\n};\n\nreturn [{\n  json: {\n    changes,\n    summary: {\n      added: changes.added.length,\n      removed: changes.removed.length,\n      modified: changes.modified.length\n    }\n  }\n}];\n```\n\n### Example 3: Access Node Metadata\n\n```javascript\n// Get data from specific execution path\nconst ifTrueBranch = $node[\"IF True\"].json;\nconst ifFalseBranch = $node[\"IF False\"].json;\n\n// Use whichever branch executed\nconst result = ifTrueBranch || ifFalseBranch || {};\n\nreturn [{json: result}];\n```\n\n---\n\n## Critical: Webhook Data Structure\n\n**MOST COMMON MISTAKE**: Forgetting webhook data is nested under `.body`\n\n### The Problem\n\nWebhook node wraps all incoming data under a `body` property. This catches many developers by surprise.\n\n### Structure\n\n```javascript\n// Webhook node output structure:\n{\n  \"headers\": {\n    \"content-type\": \"application/json\",\n    \"user-agent\": \"...\",\n    // ... other headers\n  },\n  \"params\": {},\n  \"query\": {},\n  \"body\": {\n    // â† YOUR DATA IS HERE\n    \"name\": \"Alice\",\n    \"email\": \"alice@example.com\",\n    \"message\": \"Hello!\"\n  }\n}\n```\n\n### Wrong vs Right\n\n```javascript\n// âŒ WRONG: Trying to access directly\nconst name = $json.name;  // undefined\nconst email = $json.email;  // undefined\n\n// âœ… CORRECT: Access via .body\nconst name = $json.body.name;  // \"Alice\"\nconst email = $json.body.email;  // \"alice@example.com\"\n\n// âœ… CORRECT: Extract body first\nconst webhookData = $json.body;\nconst name = webhookData.name;  // \"Alice\"\nconst email = webhookData.email;  // \"alice@example.com\"\n```\n\n### Example: Full Webhook Processing\n\n```javascript\n// Get webhook data from previous node\nconst webhookOutput = $input.first().json;\n\n// Access the actual payload\nconst payload = webhookOutput.body;\n\n// Access headers if needed\nconst contentType = webhookOutput.headers['content-type'];\n\n// Access query parameters if needed\nconst apiKey = webhookOutput.query.api_key;\n\n// Process the actual data\nreturn [{\n  json: {\n    // Data from webhook body\n    userName: payload.name,\n    userEmail: payload.email,\n    message: payload.message,\n\n    // Metadata\n    receivedAt: new Date().toISOString(),\n    contentType: contentType,\n    authenticated: !!apiKey\n  }\n}];\n```\n\n### POST Data, Query Params, and Headers\n\n```javascript\nconst webhook = $input.first().json;\n\nreturn [{\n  json: {\n    // POST body data\n    formData: webhook.body,\n\n    // Query parameters (?key=value)\n    queryParams: webhook.query,\n\n    // HTTP headers\n    userAgent: webhook.headers['user-agent'],\n    contentType: webhook.headers['content-type'],\n\n    // Request metadata\n    method: webhook.method,  // POST, GET, etc.\n    url: webhook.url\n  }\n}];\n```\n\n### Common Webhook Scenarios\n\n```javascript\n// Scenario 1: Form submission\nconst formData = $json.body;\nconst name = formData.name;\nconst email = formData.email;\n\n// Scenario 2: JSON API webhook\nconst apiPayload = $json.body;\nconst eventType = apiPayload.event;\nconst data = apiPayload.data;\n\n// Scenario 3: Query parameters\nconst apiKey = $json.query.api_key;\nconst userId = $json.query.user_id;\n\n// Scenario 4: Headers\nconst authorization = $json.headers['authorization'];\nconst signature = $json.headers['x-signature'];\n```\n\n---\n\n## Choosing the Right Pattern\n\n### Decision Tree\n\n```\nDo you need ALL items from previous node?\nâ”œâ”€ YES â†’ Use $input.all()\nâ”‚\nâ””â”€ NO â†’ Do you need just the FIRST item?\n    â”œâ”€ YES â†’ Use $input.first()\n    â”‚\n    â””â”€ NO â†’ Are you in \"Each Item\" mode?\n        â”œâ”€ YES â†’ Use $input.item\n        â”‚\n        â””â”€ NO â†’ Do you need specific node data?\n            â”œâ”€ YES â†’ Use $node[\"NodeName\"]\n            â””â”€ NO â†’ Use $input.first() (default)\n```\n\n### Quick Reference Table\n\n| Scenario | Use This | Example |\n|----------|----------|---------|\n| Sum all amounts | `$input.all()` | `allItems.reduce((sum, i) => sum + i.json.amount, 0)` |\n| Get API response | `$input.first()` | `$input.first().json.data` |\n| Process each independently | `$input.item` | `$input.item.json` (Each Item mode) |\n| Combine two nodes | `$node[\"Name\"]` | `$node[\"API\"].json` |\n| Filter array | `$input.all()` | `allItems.filter(i => i.json.active)` |\n| Transform single object | `$input.first()` | `{...input.first().json, new: true}` |\n| Webhook data | `$input.first()` | `$input.first().json.body` |\n\n---\n\n## Common Mistakes\n\n### Mistake 1: Using $json Without Context\n\n```javascript\n// âŒ WRONG: $json is ambiguous\nconst value = $json.field;\n\n// âœ… CORRECT: Be explicit\nconst value = $input.first().json.field;\n```\n\n### Mistake 2: Forgetting .json Property\n\n```javascript\n// âŒ WRONG: Trying to access fields on item object\nconst items = $input.all();\nconst names = items.map(item => item.name);  // undefined\n\n// âœ… CORRECT: Access via .json\nconst names = items.map(item => item.json.name);\n```\n\n### Mistake 3: Using $input.item in All Items Mode\n\n```javascript\n// âŒ WRONG: $input.item is undefined in \"All Items\" mode\nconst data = $input.item.json;  // Error!\n\n// âœ… CORRECT: Use appropriate method\nconst data = $input.first().json;  // Or $input.all()\n```\n\n### Mistake 4: Not Handling Empty Arrays\n\n```javascript\n// âŒ WRONG: Crashes if no items\nconst first = $input.all()[0].json;\n\n// âœ… CORRECT: Check length first\nconst items = $input.all();\nif (items.length === 0) {\n  return [];\n}\nconst first = items[0].json;\n\n// âœ… ALSO CORRECT: Use $input.first()\nconst first = $input.first().json;  // Built-in safety\n```\n\n### Mistake 5: Modifying Original Data\n\n```javascript\n// âŒ RISKY: Mutating original\nconst items = $input.all();\nitems[0].json.modified = true;  // Modifies original\nreturn items;\n\n// âœ… SAFE: Create new objects\nconst items = $input.all();\nreturn items.map(item => ({\n  json: {\n    ...item.json,\n    modified: true\n  }\n}));\n```\n\n---\n\n## Advanced Patterns\n\n### Pattern: Pagination Handling\n\n```javascript\nconst currentPage = $input.all();\nconst pageNumber = $node[\"Set Page\"].json.page || 1;\n\n// Combine with previous pages\nconst allPreviousPages = $node[\"Accumulator\"]?.json.accumulated || [];\n\nreturn [{\n  json: {\n    accumulated: [...allPreviousPages, ...currentPage],\n    currentPage: pageNumber,\n    totalItems: allPreviousPages.length + currentPage.length\n  }\n}];\n```\n\n### Pattern: Conditional Node Reference\n\n```javascript\n// Access different nodes based on condition\nconst condition = $input.first().json.type;\n\nlet data;\nif (condition === 'api') {\n  data = $node[\"API Response\"].json;\n} else if (condition === 'database') {\n  data = $node[\"Database\"].json;\n} else {\n  data = $node[\"Default\"].json;\n}\n\nreturn [{json: data}];\n```\n\n### Pattern: Multi-Node Aggregation\n\n```javascript\n// Collect data from multiple named nodes\nconst sources = ['Source1', 'Source2', 'Source3'];\nconst allData = [];\n\nfor (const source of sources) {\n  const nodeData = $node[source]?.json;\n  if (nodeData) {\n    allData.push({\n      source,\n      data: nodeData\n    });\n  }\n}\n\nreturn allData.map(item => ({json: item}));\n```\n\n---\n\n## Summary\n\n**Most Common Patterns**:\n1. `$input.all()` - Process multiple items, batch operations\n2. `$input.first()` - Single item, API responses\n3. `$input.item` - Each Item mode processing\n\n**Critical Rule**:\n- Webhook data is under `.body` property\n\n**Best Practice**:\n- Be explicit: Use `$input.first().json.field` instead of `$json.field`\n- Always check for null/undefined\n- Use appropriate method for your mode (All Items vs Each Item)\n\n**See Also**:\n- [SKILL.md](SKILL.md) - Overview and quick start\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - Production patterns\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Avoid common mistakes\n",
        "skills/n8n-code-javascript/ERROR_PATTERNS.md": "# Error Patterns - JavaScript Code Node\n\nComplete guide to avoiding the most common Code node errors.\n\n---\n\n## Overview\n\nThis guide covers the **top 5 error patterns** encountered in n8n Code nodes. Understanding and avoiding these errors will save you significant debugging time.\n\n**Error Frequency**:\n1. Empty Code / Missing Return - **38% of failures**\n2. Expression Syntax Confusion - **8% of failures**\n3. Incorrect Return Wrapper - **5% of failures**\n4. Unmatched Expression Brackets - **6% of failures**\n5. Missing Null Checks - **Common runtime error**\n\n---\n\n## Error #1: Empty Code or Missing Return Statement\n\n**Frequency**: Most common error (38% of all validation failures)\n\n**What Happens**:\n- Workflow execution fails\n- Next nodes receive no data\n- Error: \"Code cannot be empty\" or \"Code must return data\"\n\n### The Problem\n\n```javascript\n// âŒ ERROR: No code at all\n// (Empty code field)\n```\n\n```javascript\n// âŒ ERROR: Code executes but doesn't return anything\nconst items = $input.all();\n\n// Process items\nfor (const item of items) {\n  console.log(item.json.name);\n}\n\n// Forgot to return!\n```\n\n```javascript\n// âŒ ERROR: Early return path exists, but not all paths return\nconst items = $input.all();\n\nif (items.length === 0) {\n  return [];  // âœ… This path returns\n}\n\n// Process items\nconst processed = items.map(item => ({json: item.json}));\n\n// âŒ Forgot to return processed!\n```\n\n### The Solution\n\n```javascript\n// âœ… CORRECT: Always return data\nconst items = $input.all();\n\n// Process items\nconst processed = items.map(item => ({\n  json: {\n    ...item.json,\n    processed: true\n  }\n}));\n\nreturn processed;  // âœ… Return statement present\n```\n\n```javascript\n// âœ… CORRECT: Return empty array if no items\nconst items = $input.all();\n\nif (items.length === 0) {\n  return [];  // Valid: empty array when no data\n}\n\n// Process and return\nreturn items.map(item => ({json: item.json}));\n```\n\n```javascript\n// âœ… CORRECT: All code paths return\nconst items = $input.all();\n\nif (items.length === 0) {\n  return [];\n} else if (items.length === 1) {\n  return [{json: {single: true, data: items[0].json}}];\n} else {\n  return items.map(item => ({json: item.json}));\n}\n\n// All paths covered\n```\n\n### Checklist\n\n- [ ] Code field is not empty\n- [ ] Return statement exists\n- [ ] ALL code paths return data (if/else branches)\n- [ ] Return format is correct (`[{json: {...}}]`)\n- [ ] Return happens even on errors (use try-catch)\n\n---\n\n## Error #2: Expression Syntax Confusion\n\n**Frequency**: 8% of validation failures\n\n**What Happens**:\n- Syntax error in code execution\n- Error: \"Unexpected token\" or \"Expression syntax is not valid in Code nodes\"\n- Template variables not evaluated\n\n### The Problem\n\nn8n has TWO distinct syntaxes:\n1. **Expression syntax** `{{ }}` - Used in OTHER nodes (Set, IF, HTTP Request)\n2. **JavaScript** - Used in CODE nodes (no `{{ }}`)\n\nMany developers mistakenly use expression syntax inside Code nodes.\n\n```javascript\n// âŒ WRONG: Using n8n expression syntax in Code node\nconst userName = \"{{ $json.name }}\";\nconst userEmail = \"{{ $json.body.email }}\";\n\nreturn [{\n  json: {\n    name: userName,\n    email: userEmail\n  }\n}];\n\n// Result: Literal string \"{{ $json.name }}\", NOT the value!\n```\n\n```javascript\n// âŒ WRONG: Trying to evaluate expressions\nconst value = \"{{ $now.toFormat('yyyy-MM-dd') }}\";\n```\n\n### The Solution\n\n```javascript\n// âœ… CORRECT: Use JavaScript directly (no {{ }})\nconst userName = $json.name;\nconst userEmail = $json.body.email;\n\nreturn [{\n  json: {\n    name: userName,\n    email: userEmail\n  }\n}];\n```\n\n```javascript\n// âœ… CORRECT: JavaScript template literals (use backticks)\nconst message = `Hello, ${$json.name}! Your email is ${$json.email}`;\n\nreturn [{\n  json: {\n    greeting: message\n  }\n}];\n```\n\n```javascript\n// âœ… CORRECT: Direct variable access\nconst item = $input.first().json;\n\nreturn [{\n  json: {\n    name: item.name,\n    email: item.email,\n    timestamp: new Date().toISOString()  // JavaScript Date, not {{ }}\n  }\n}];\n```\n\n### Comparison Table\n\n| Context | Syntax | Example |\n|---------|--------|---------|\n| Set node | `{{ }}` expressions | `{{ $json.name }}` |\n| IF node | `{{ }}` expressions | `{{ $json.age > 18 }}` |\n| HTTP Request URL | `{{ }}` expressions | `{{ $json.userId }}` |\n| **Code node** | **JavaScript** | `$json.name` |\n| **Code node strings** | **Template literals** | `` `Hello ${$json.name}` `` |\n\n### Quick Fix Guide\n\n```javascript\n// WRONG â†’ RIGHT conversions\n\n// âŒ \"{{ $json.field }}\"\n// âœ… $json.field\n\n// âŒ \"{{ $now }}\"\n// âœ… new Date().toISOString()\n\n// âŒ \"{{ $node['HTTP Request'].json.data }}\"\n// âœ… $node[\"HTTP Request\"].json.data\n\n// âŒ `{{ $json.firstName }} {{ $json.lastName }}`\n// âœ… `${$json.firstName} ${$json.lastName}`\n```\n\n---\n\n## Error #3: Incorrect Return Wrapper Format\n\n**Frequency**: 5% of validation failures\n\n**What Happens**:\n- Error: \"Return value must be an array of objects\"\n- Error: \"Each item must have a json property\"\n- Next nodes receive malformed data\n\n### The Problem\n\nCode nodes MUST return:\n- **Array** of objects\n- Each object MUST have a **`json` property**\n\n```javascript\n// âŒ WRONG: Returning object instead of array\nreturn {\n  json: {\n    result: 'success'\n  }\n};\n// Missing array wrapper []\n```\n\n```javascript\n// âŒ WRONG: Returning array without json wrapper\nreturn [\n  {id: 1, name: 'Alice'},\n  {id: 2, name: 'Bob'}\n];\n// Missing json property\n```\n\n```javascript\n// âŒ WRONG: Returning plain value\nreturn \"processed\";\n```\n\n```javascript\n// âŒ WRONG: Returning items without mapping\nreturn $input.all();\n// Works if items already have json property, but not guaranteed\n```\n\n```javascript\n// âŒ WRONG: Incomplete structure\nreturn [{data: {result: 'success'}}];\n// Should be {json: {...}}, not {data: {...}}\n```\n\n### The Solution\n\n```javascript\n// âœ… CORRECT: Single result\nreturn [{\n  json: {\n    result: 'success',\n    timestamp: new Date().toISOString()\n  }\n}];\n```\n\n```javascript\n// âœ… CORRECT: Multiple results\nreturn [\n  {json: {id: 1, name: 'Alice'}},\n  {json: {id: 2, name: 'Bob'}},\n  {json: {id: 3, name: 'Carol'}}\n];\n```\n\n```javascript\n// âœ… CORRECT: Transforming array\nconst items = $input.all();\n\nreturn items.map(item => ({\n  json: {\n    id: item.json.id,\n    name: item.json.name,\n    processed: true\n  }\n}));\n```\n\n```javascript\n// âœ… CORRECT: Empty result\nreturn [];\n// Valid when no data to return\n```\n\n```javascript\n// âœ… CORRECT: Conditional returns\nif (shouldProcess) {\n  return [{json: {result: 'processed'}}];\n} else {\n  return [];\n}\n```\n\n### Return Format Checklist\n\n- [ ] Return value is an **array** `[...]`\n- [ ] Each array element has **`json` property**\n- [ ] Structure is `[{json: {...}}]` or `[{json: {...}}, {json: {...}}]`\n- [ ] NOT `{json: {...}}` (missing array wrapper)\n- [ ] NOT `[{...}]` (missing json property)\n\n### Common Scenarios\n\n```javascript\n// Scenario 1: Single object from API\nconst response = $input.first().json;\n\n// âœ… CORRECT\nreturn [{json: response}];\n\n// âŒ WRONG\nreturn {json: response};\n\n\n// Scenario 2: Array of objects\nconst users = $input.all();\n\n// âœ… CORRECT\nreturn users.map(user => ({json: user.json}));\n\n// âŒ WRONG\nreturn users;  // Risky - depends on existing structure\n\n\n// Scenario 3: Computed result\nconst total = $input.all().reduce((sum, item) => sum + item.json.amount, 0);\n\n// âœ… CORRECT\nreturn [{json: {total}}];\n\n// âŒ WRONG\nreturn {total};\n\n\n// Scenario 4: No results\n// âœ… CORRECT\nreturn [];\n\n// âŒ WRONG\nreturn null;\n```\n\n---\n\n## Error #4: Unmatched Expression Brackets\n\n**Frequency**: 6% of validation failures\n\n**What Happens**:\n- Parsing error during save\n- Error: \"Unmatched expression brackets\"\n- Code appears correct but fails validation\n\n### The Problem\n\nThis error typically occurs when:\n1. Strings contain unbalanced quotes\n2. Multi-line strings with special characters\n3. Template literals with nested brackets\n\n```javascript\n// âŒ WRONG: Unescaped quote in string\nconst message = \"It's a nice day\";\n// Single quote breaks string\n```\n\n```javascript\n// âŒ WRONG: Unbalanced brackets in regex\nconst pattern = /\\{(\\w+)\\}/;  // JSON storage issue\n```\n\n```javascript\n// âŒ WRONG: Multi-line string with quotes\nconst html = \"\n  <div class=\"container\">\n    <p>Hello</p>\n  </div>\n\";\n// Quote balance issues\n```\n\n### The Solution\n\n```javascript\n// âœ… CORRECT: Escape quotes\nconst message = \"It\\\\'s a nice day\";\n// Or use different quotes\nconst message = \"It's a nice day\";  // Double quotes work\n```\n\n```javascript\n// âœ… CORRECT: Escape regex properly\nconst pattern = /\\\\{(\\\\w+)\\\\}/;\n```\n\n```javascript\n// âœ… CORRECT: Template literals for multi-line\nconst html = `\n  <div class=\"container\">\n    <p>Hello</p>\n  </div>\n`;\n// Backticks handle multi-line and quotes\n```\n\n```javascript\n// âœ… CORRECT: Escape backslashes\nconst path = \"C:\\\\\\\\Users\\\\\\\\Documents\\\\\\\\file.txt\";\n```\n\n### Escaping Guide\n\n| Character | Escape As | Example |\n|-----------|-----------|---------|\n| Single quote in single-quoted string | `\\\\'` | `'It\\\\'s working'` |\n| Double quote in double-quoted string | `\\\\\"` | `\"She said \\\\\"hello\\\\\"\"` |\n| Backslash | `\\\\\\\\` | `\"C:\\\\\\\\path\"` |\n| Newline | `\\\\n` | `\"Line 1\\\\nLine 2\"` |\n| Tab | `\\\\t` | `\"Column1\\\\tColumn2\"` |\n\n### Best Practices\n\n```javascript\n// âœ… BEST: Use template literals for complex strings\nconst message = `User ${name} said: \"Hello!\"`;\n\n// âœ… BEST: Use template literals for HTML\nconst html = `\n  <div class=\"${className}\">\n    <h1>${title}</h1>\n    <p>${content}</p>\n  </div>\n`;\n\n// âœ… BEST: Use template literals for JSON\nconst jsonString = `{\n  \"name\": \"${name}\",\n  \"email\": \"${email}\"\n}`;\n```\n\n---\n\n## Error #5: Missing Null Checks / Undefined Access\n\n**Frequency**: Very common runtime error\n\n**What Happens**:\n- Workflow execution stops\n- Error: \"Cannot read property 'X' of undefined\"\n- Error: \"Cannot read property 'X' of null\"\n- Crashes on missing data\n\n### The Problem\n\n```javascript\n// âŒ WRONG: No null check - crashes if user doesn't exist\nconst email = item.json.user.email;\n```\n\n```javascript\n// âŒ WRONG: Assumes array has items\nconst firstItem = $input.all()[0].json;\n```\n\n```javascript\n// âŒ WRONG: Assumes nested property exists\nconst city = $json.address.city;\n```\n\n```javascript\n// âŒ WRONG: No validation before array operations\nconst names = $json.users.map(user => user.name);\n```\n\n### The Solution\n\n```javascript\n// âœ… CORRECT: Optional chaining\nconst email = item.json?.user?.email || 'no-email@example.com';\n```\n\n```javascript\n// âœ… CORRECT: Check array length\nconst items = $input.all();\n\nif (items.length === 0) {\n  return [];\n}\n\nconst firstItem = items[0].json;\n```\n\n```javascript\n// âœ… CORRECT: Guard clauses\nconst data = $input.first().json;\n\nif (!data.address) {\n  return [{json: {error: 'No address provided'}}];\n}\n\nconst city = data.address.city;\n```\n\n```javascript\n// âœ… CORRECT: Default values\nconst users = $json.users || [];\nconst names = users.map(user => user.name || 'Unknown');\n```\n\n```javascript\n// âœ… CORRECT: Try-catch for risky operations\ntry {\n  const email = item.json.user.email.toLowerCase();\n  return [{json: {email}}];\n} catch (error) {\n  return [{\n    json: {\n      error: 'Invalid user data',\n      details: error.message\n    }\n  }];\n}\n```\n\n### Safe Access Patterns\n\n```javascript\n// Pattern 1: Optional chaining (modern, recommended)\nconst value = data?.nested?.property?.value;\n\n// Pattern 2: Logical OR with default\nconst value = data.property || 'default';\n\n// Pattern 3: Ternary check\nconst value = data.property ? data.property : 'default';\n\n// Pattern 4: Guard clause\nif (!data.property) {\n  return [];\n}\nconst value = data.property;\n\n// Pattern 5: Try-catch\ntry {\n  const value = data.nested.property.value;\n} catch (error) {\n  const value = 'default';\n}\n```\n\n### Webhook Data Safety\n\n```javascript\n// Webhook data requires extra safety\n\n// âŒ RISKY: Assumes all fields exist\nconst name = $json.body.user.name;\nconst email = $json.body.user.email;\n\n// âœ… SAFE: Check each level\nconst body = $json.body || {};\nconst user = body.user || {};\nconst name = user.name || 'Unknown';\nconst email = user.email || 'no-email';\n\n// âœ… BETTER: Optional chaining\nconst name = $json.body?.user?.name || 'Unknown';\nconst email = $json.body?.user?.email || 'no-email';\n```\n\n### Array Safety\n\n```javascript\n// âŒ RISKY: No length check\nconst items = $input.all();\nconst firstId = items[0].json.id;\n\n// âœ… SAFE: Check length\nconst items = $input.all();\n\nif (items.length > 0) {\n  const firstId = items[0].json.id;\n} else {\n  // Handle empty case\n  return [];\n}\n\n// âœ… BETTER: Use $input.first()\nconst firstItem = $input.first();\nconst firstId = firstItem.json.id;  // Built-in safety\n```\n\n### Object Property Safety\n\n```javascript\n// âŒ RISKY: Direct access\nconst config = $json.settings.advanced.timeout;\n\n// âœ… SAFE: Step by step with defaults\nconst settings = $json.settings || {};\nconst advanced = settings.advanced || {};\nconst timeout = advanced.timeout || 30000;\n\n// âœ… BETTER: Optional chaining\nconst timeout = $json.settings?.advanced?.timeout ?? 30000;\n// Note: ?? (nullish coalescing) vs || (logical OR)\n```\n\n---\n\n## Error Prevention Checklist\n\nUse this checklist before deploying Code nodes:\n\n### Code Structure\n- [ ] Code field is not empty\n- [ ] Return statement exists\n- [ ] All code paths return data\n\n### Return Format\n- [ ] Returns array: `[...]`\n- [ ] Each item has `json` property: `{json: {...}}`\n- [ ] Format is `[{json: {...}}]`\n\n### Syntax\n- [ ] No `{{ }}` expression syntax (use JavaScript)\n- [ ] Template literals use backticks: `` `${variable}` ``\n- [ ] All quotes and brackets balanced\n- [ ] Strings properly escaped\n\n### Data Safety\n- [ ] Null checks for optional properties\n- [ ] Array length checks before access\n- [ ] Webhook data accessed via `.body`\n- [ ] Try-catch for risky operations\n- [ ] Default values for missing data\n\n### Testing\n- [ ] Test with empty input\n- [ ] Test with missing fields\n- [ ] Test with unexpected data types\n- [ ] Check browser console for errors\n\n---\n\n## Quick Error Reference\n\n| Error Message | Likely Cause | Fix |\n|---------------|--------------|-----|\n| \"Code cannot be empty\" | Empty code field | Add meaningful code |\n| \"Code must return data\" | Missing return statement | Add `return [...]` |\n| \"Return value must be an array\" | Returning object instead of array | Wrap in `[...]` |\n| \"Each item must have json property\" | Missing `json` wrapper | Use `{json: {...}}` |\n| \"Unexpected token\" | Expression syntax `{{ }}` in code | Remove `{{ }}`, use JavaScript |\n| \"Cannot read property X of undefined\" | Missing null check | Use optional chaining `?.` |\n| \"Cannot read property X of null\" | Null value access | Add guard clause or default |\n| \"Unmatched expression brackets\" | Quote/bracket imbalance | Check string escaping |\n\n---\n\n## Debugging Tips\n\n### 1. Use console.log()\n\n```javascript\nconst items = $input.all();\nconsole.log('Items count:', items.length);\nconsole.log('First item:', items[0]);\n\n// Check browser console (F12) for output\n```\n\n### 2. Return Intermediate Results\n\n```javascript\n// Debug by returning current state\nconst items = $input.all();\nconst processed = items.map(item => ({json: item.json}));\n\n// Return to see what you have\nreturn processed;\n```\n\n### 3. Try-Catch for Troubleshooting\n\n```javascript\ntry {\n  // Your code here\n  const result = riskyOperation();\n  return [{json: {result}}];\n} catch (error) {\n  // See what failed\n  return [{\n    json: {\n      error: error.message,\n      stack: error.stack\n    }\n  }];\n}\n```\n\n### 4. Validate Input Structure\n\n```javascript\nconst items = $input.all();\n\n// Check what you received\nconsole.log('Input structure:', JSON.stringify(items[0], null, 2));\n\n// Then process\n```\n\n---\n\n## Summary\n\n**Top 5 Errors to Avoid**:\n1. **Empty code / missing return** (38%) - Always return data\n2. **Expression syntax `{{ }}`** (8%) - Use JavaScript, not expressions\n3. **Wrong return format** (5%) - Always `[{json: {...}}]`\n4. **Unmatched brackets** (6%) - Escape strings properly\n5. **Missing null checks** - Use optional chaining `?.`\n\n**Quick Prevention**:\n- Return `[{json: {...}}]` format\n- Use JavaScript, NOT `{{ }}` expressions\n- Check for null/undefined before accessing\n- Test with empty and invalid data\n- Use browser console for debugging\n\n**See Also**:\n- [SKILL.md](SKILL.md) - Overview and best practices\n- [DATA_ACCESS.md](DATA_ACCESS.md) - Safe data access patterns\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - Working examples\n",
        "skills/n8n-code-javascript/README.md": "# n8n Code JavaScript\n\nExpert guidance for writing JavaScript code in n8n Code nodes.\n\n---\n\n## Purpose\n\nTeaches how to write effective JavaScript in n8n Code nodes, avoid common errors, and use built-in functions effectively.\n\n---\n\n## Activates On\n\n**Trigger keywords**:\n- \"javascript code node\"\n- \"write javascript in n8n\"\n- \"code node javascript\"\n- \"$input syntax\"\n- \"$json syntax\"\n- \"$helpers.httpRequest\"\n- \"DateTime luxon\"\n- \"code node error\"\n- \"webhook data code\"\n- \"return format code node\"\n\n**Common scenarios**:\n- Writing JavaScript code in Code nodes\n- Troubleshooting Code node errors\n- Making HTTP requests from code\n- Working with dates and times\n- Accessing webhook data\n- Choosing between All Items and Each Item mode\n\n---\n\n## What You'll Learn\n\n### Quick Start\n- Mode selection (All Items vs Each Item)\n- Data access patterns ($input.all(), $input.first(), $input.item)\n- Correct return format: `[{json: {...}}]`\n- Webhook data structure (.body nesting)\n- Built-in functions overview\n\n### Data Access Mastery\n- $input.all() - Batch operations (most common)\n- $input.first() - Single item operations\n- $input.item - Each Item mode processing\n- $node - Reference other workflow nodes\n- **Critical gotcha**: Webhook data under `.body`\n\n### Common Patterns (Production-Tested)\n1. Multi-source Data Aggregation\n2. Regex Filtering & Pattern Matching\n3. Markdown Parsing & Structured Extraction\n4. JSON Comparison & Validation\n5. CRM Data Transformation\n6. Release Information Processing\n7. Array Transformation with Context\n8. Slack Block Kit Formatting\n9. Top N Filtering & Ranking\n10. String Aggregation & Reporting\n\n### Error Prevention\nTop 5 errors to avoid:\n1. **Empty code / missing return** (38% of failures)\n2. **Expression syntax confusion** (using `{{}}` in code)\n3. **Incorrect return format** (missing array wrapper or json property)\n4. **Unmatched brackets** (string escaping issues)\n5. **Missing null checks** (crashes on undefined)\n\n### Built-in Functions\n- **$helpers.httpRequest()** - Make HTTP requests\n- **DateTime (Luxon)** - Advanced date/time operations\n- **$jmespath()** - Query JSON structures\n- **$getWorkflowStaticData()** - Persistent storage\n- Standard JavaScript globals (Math, JSON, console)\n- Available Node.js modules (crypto, Buffer, URL)\n\n---\n\n## File Structure\n\n```\nn8n-code-javascript/\nâ”œâ”€â”€ SKILL.md (500 lines)\nâ”‚   Overview, quick start, mode selection, best practices\nâ”‚   - Mode selection guide (All Items vs Each Item)\nâ”‚   - Data access patterns overview\nâ”‚   - Return format requirements\nâ”‚   - Critical webhook gotcha\nâ”‚   - Error prevention overview\nâ”‚   - Quick reference checklist\nâ”‚\nâ”œâ”€â”€ DATA_ACCESS.md (400 lines)\nâ”‚   Complete data access patterns\nâ”‚   - $input.all() - Most common (26% usage)\nâ”‚   - $input.first() - Very common (25% usage)\nâ”‚   - $input.item - Each Item mode (19% usage)\nâ”‚   - $node - Reference other nodes\nâ”‚   - Webhook data structure (.body nesting)\nâ”‚   - Choosing the right pattern\nâ”‚   - Common mistakes to avoid\nâ”‚\nâ”œâ”€â”€ COMMON_PATTERNS.md (600 lines)\nâ”‚   10 production-tested patterns\nâ”‚   - Pattern 1: Multi-source Aggregation\nâ”‚   - Pattern 2: Regex Filtering\nâ”‚   - Pattern 3: Markdown Parsing\nâ”‚   - Pattern 4: JSON Comparison\nâ”‚   - Pattern 5: CRM Transformation\nâ”‚   - Pattern 6: Release Processing\nâ”‚   - Pattern 7: Array Transformation\nâ”‚   - Pattern 8: Slack Block Kit\nâ”‚   - Pattern 9: Top N Filtering\nâ”‚   - Pattern 10: String Aggregation\nâ”‚   - Pattern selection guide\nâ”‚\nâ”œâ”€â”€ ERROR_PATTERNS.md (450 lines)\nâ”‚   Top 5 errors with solutions\nâ”‚   - Error #1: Empty Code / Missing Return (38%)\nâ”‚   - Error #2: Expression Syntax Confusion (8%)\nâ”‚   - Error #3: Incorrect Return Wrapper (5%)\nâ”‚   - Error #4: Unmatched Brackets (6%)\nâ”‚   - Error #5: Missing Null Checks\nâ”‚   - Error prevention checklist\nâ”‚   - Quick error reference\nâ”‚   - Debugging tips\nâ”‚\nâ”œâ”€â”€ BUILTIN_FUNCTIONS.md (450 lines)\nâ”‚   Complete built-in function reference\nâ”‚   - $helpers.httpRequest() API reference\nâ”‚   - DateTime (Luxon) complete guide\nâ”‚   - $jmespath() JSON querying\nâ”‚   - $getWorkflowStaticData() persistent storage\nâ”‚   - Standard JavaScript globals\nâ”‚   - Available Node.js modules\nâ”‚   - What's NOT available\nâ”‚\nâ””â”€â”€ README.md (this file)\n    Skill metadata and overview\n```\n\n**Total**: ~2,400 lines across 6 files\n\n---\n\n## Coverage\n\n### Mode Selection\n- **Run Once for All Items** - Recommended for 95% of use cases\n- **Run Once for Each Item** - Specialized cases only\n- Decision guide and performance implications\n\n### Data Access\n- Most common patterns with usage statistics\n- Webhook data structure (critical .body gotcha)\n- Safe access patterns with null checks\n- When to use which pattern\n\n### Error Prevention\n- Top 5 errors covering 62%+ of all failures\n- Clear wrong vs right examples\n- Error prevention checklist\n- Debugging tips and console.log usage\n\n### Production Patterns\n- 10 patterns from real workflows\n- Complete working examples\n- Use cases and key techniques\n- Pattern selection guide\n\n### Built-in Functions\n- Complete $helpers.httpRequest() reference\n- DateTime/Luxon operations (formatting, parsing, arithmetic)\n- $jmespath() for JSON queries\n- Persistent storage with $getWorkflowStaticData()\n- Standard JavaScript and Node.js modules\n\n---\n\n## Critical Gotchas Highlighted\n\n### #1: Webhook Data Structure\n**MOST COMMON MISTAKE**: Webhook data is under `.body`\n\n```javascript\n// âŒ WRONG\nconst name = $json.name;\n\n// âœ… CORRECT\nconst name = $json.body.name;\n```\n\n### #2: Return Format\n**CRITICAL**: Must return array with json property\n\n```javascript\n// âŒ WRONG\nreturn {json: {result: 'success'}};\n\n// âœ… CORRECT\nreturn [{json: {result: 'success'}}];\n```\n\n### #3: Expression Syntax\n**Don't use `{{}}` in Code nodes**\n\n```javascript\n// âŒ WRONG\nconst value = \"{{ $json.field }}\";\n\n// âœ… CORRECT\nconst value = $json.field;\n```\n\n---\n\n## Integration with Other Skills\n\n### n8n Expression Syntax\n- **Distinction**: Expressions use `{{}}` in OTHER nodes\n- **Code nodes**: Use JavaScript directly (no `{{}}`)\n- **When to use each**: Code vs expressions decision guide\n\n### n8n MCP Tools Expert\n- Find Code node: `search_nodes({query: \"code\"})`\n- Get configuration: `get_node_essentials(\"nodes-base.code\")`\n- Validate code: `validate_node_operation()`\n\n### n8n Node Configuration\n- Mode selection (All Items vs Each Item)\n- Language selection (JavaScript vs Python)\n- Understanding property dependencies\n\n### n8n Workflow Patterns\n- Code nodes in transformation step\n- Webhook â†’ Code â†’ API pattern\n- Error handling in workflows\n\n### n8n Validation Expert\n- Validate Code node configuration\n- Handle validation errors\n- Auto-fix common issues\n\n---\n\n## When to Use Code Node\n\n**Use Code node when:**\n- âœ… Complex transformations requiring multiple steps\n- âœ… Custom calculations or business logic\n- âœ… Recursive operations\n- âœ… API response parsing with complex structure\n- âœ… Multi-step conditionals\n- âœ… Data aggregation across items\n\n**Consider other nodes when:**\n- âŒ Simple field mapping â†’ Use **Set** node\n- âŒ Basic filtering â†’ Use **Filter** node\n- âŒ Simple conditionals â†’ Use **IF** or **Switch** node\n- âŒ HTTP requests only â†’ Use **HTTP Request** node\n\n**Code node excels at**: Complex logic that would require chaining many simple nodes\n\n---\n\n## Success Metrics\n\n**Before this skill**:\n- Users confused by mode selection\n- Frequent return format errors\n- Expression syntax mistakes\n- Webhook data access failures\n- Missing null check crashes\n\n**After this skill**:\n- Clear mode selection guidance\n- Understanding of return format\n- JavaScript vs expression distinction\n- Correct webhook data access\n- Safe null-handling patterns\n- Production-ready code patterns\n\n---\n\n## Quick Reference\n\n### Essential Rules\n1. Choose \"All Items\" mode (recommended)\n2. Access data: `$input.all()`, `$input.first()`, `$input.item`\n3. **MUST return**: `[{json: {...}}]` format\n4. **Webhook data**: Under `.body` property\n5. **No `{{}}` syntax**: Use JavaScript directly\n\n### Most Common Patterns\n- Batch processing â†’ $input.all() + map/filter\n- Single item â†’ $input.first()\n- Aggregation â†’ reduce()\n- HTTP requests â†’ $helpers.httpRequest()\n- Date handling â†’ DateTime (Luxon)\n\n### Error Prevention\n- Always return data\n- Check for null/undefined\n- Use try-catch for risky operations\n- Test with empty input\n- Use console.log() for debugging\n\n---\n\n## Related Documentation\n\n- **n8n Code Node Guide**: https://docs.n8n.io/code/code-node/\n- **Built-in Methods Reference**: https://docs.n8n.io/code-examples/methods-variables-reference/\n- **Luxon Documentation**: https://moment.github.io/luxon/\n\n---\n\n## Evaluations\n\n**5 test scenarios** covering:\n1. Webhook body gotcha (most common mistake)\n2. Return format error (missing array wrapper)\n3. HTTP request with $helpers.httpRequest()\n4. Aggregation pattern with $input.all()\n5. Expression syntax confusion (using `{{}}`)\n\nEach evaluation tests skill activation, correct guidance, and reference to appropriate documentation files.\n\n---\n\n## Version History\n\n- **v1.0** (2025-01-20): Initial implementation\n  - SKILL.md with comprehensive overview\n  - DATA_ACCESS.md covering all access patterns\n  - COMMON_PATTERNS.md with 10 production patterns\n  - ERROR_PATTERNS.md covering top 5 errors\n  - BUILTIN_FUNCTIONS.md complete reference\n  - 5 evaluation scenarios\n\n---\n\n## Author\n\nConceived by Romuald CzÅ‚onkowski - [www.aiadvisors.pl/en](https://www.aiadvisors.pl/en)\n\nPart of the n8n-skills collection.\n",
        "skills/n8n-code-javascript/SKILL.md": "---\nname: n8n-code-javascript\ndescription: Write JavaScript code in n8n Code nodes. Use when writing JavaScript in n8n, using $input/$json/$node syntax, making HTTP requests with $helpers, working with dates using DateTime, troubleshooting Code node errors, or choosing between Code node modes.\n---\n\n# JavaScript Code Node\n\nExpert guidance for writing JavaScript code in n8n Code nodes.\n\n---\n\n## Quick Start\n\n```javascript\n// Basic template for Code nodes\nconst items = $input.all();\n\n// Process data\nconst processed = items.map(item => ({\n  json: {\n    ...item.json,\n    processed: true,\n    timestamp: new Date().toISOString()\n  }\n}));\n\nreturn processed;\n```\n\n### Essential Rules\n\n1. **Choose \"Run Once for All Items\" mode** (recommended for most use cases)\n2. **Access data**: `$input.all()`, `$input.first()`, or `$input.item`\n3. **CRITICAL**: Must return `[{json: {...}}]` format\n4. **CRITICAL**: Webhook data is under `$json.body` (not `$json` directly)\n5. **Built-ins available**: $helpers.httpRequest(), DateTime (Luxon), $jmespath()\n\n---\n\n## Mode Selection Guide\n\nThe Code node offers two execution modes. Choose based on your use case:\n\n### Run Once for All Items (Recommended - Default)\n\n**Use this mode for:** 95% of use cases\n\n- **How it works**: Code executes **once** regardless of input count\n- **Data access**: `$input.all()` or `items` array\n- **Best for**: Aggregation, filtering, batch processing, transformations, API calls with all data\n- **Performance**: Faster for multiple items (single execution)\n\n```javascript\n// Example: Calculate total from all items\nconst allItems = $input.all();\nconst total = allItems.reduce((sum, item) => sum + (item.json.amount || 0), 0);\n\nreturn [{\n  json: {\n    total,\n    count: allItems.length,\n    average: total / allItems.length\n  }\n}];\n```\n\n**When to use:**\n- âœ… Comparing items across the dataset\n- âœ… Calculating totals, averages, or statistics\n- âœ… Sorting or ranking items\n- âœ… Deduplication\n- âœ… Building aggregated reports\n- âœ… Combining data from multiple items\n\n### Run Once for Each Item\n\n**Use this mode for:** Specialized cases only\n\n- **How it works**: Code executes **separately** for each input item\n- **Data access**: `$input.item` or `$item`\n- **Best for**: Item-specific logic, independent operations, per-item validation\n- **Performance**: Slower for large datasets (multiple executions)\n\n```javascript\n// Example: Add processing timestamp to each item\nconst item = $input.item;\n\nreturn [{\n  json: {\n    ...item.json,\n    processed: true,\n    processedAt: new Date().toISOString()\n  }\n}];\n```\n\n**When to use:**\n- âœ… Each item needs independent API call\n- âœ… Per-item validation with different error handling\n- âœ… Item-specific transformations based on item properties\n- âœ… When items must be processed separately for business logic\n\n**Decision Shortcut:**\n- **Need to look at multiple items?** â†’ Use \"All Items\" mode\n- **Each item completely independent?** â†’ Use \"Each Item\" mode\n- **Not sure?** â†’ Use \"All Items\" mode (you can always loop inside)\n\n---\n\n## Data Access Patterns\n\n### Pattern 1: $input.all() - Most Common\n\n**Use when**: Processing arrays, batch operations, aggregations\n\n```javascript\n// Get all items from previous node\nconst allItems = $input.all();\n\n// Filter, map, reduce as needed\nconst valid = allItems.filter(item => item.json.status === 'active');\nconst mapped = valid.map(item => ({\n  json: {\n    id: item.json.id,\n    name: item.json.name\n  }\n}));\n\nreturn mapped;\n```\n\n### Pattern 2: $input.first() - Very Common\n\n**Use when**: Working with single objects, API responses, first-in-first-out\n\n```javascript\n// Get first item only\nconst firstItem = $input.first();\nconst data = firstItem.json;\n\nreturn [{\n  json: {\n    result: processData(data),\n    processedAt: new Date().toISOString()\n  }\n}];\n```\n\n### Pattern 3: $input.item - Each Item Mode Only\n\n**Use when**: In \"Run Once for Each Item\" mode\n\n```javascript\n// Current item in loop (Each Item mode only)\nconst currentItem = $input.item;\n\nreturn [{\n  json: {\n    ...currentItem.json,\n    itemProcessed: true\n  }\n}];\n```\n\n### Pattern 4: $node - Reference Other Nodes\n\n**Use when**: Need data from specific nodes in workflow\n\n```javascript\n// Get output from specific node\nconst webhookData = $node[\"Webhook\"].json;\nconst httpData = $node[\"HTTP Request\"].json;\n\nreturn [{\n  json: {\n    combined: {\n      webhook: webhookData,\n      api: httpData\n    }\n  }\n}];\n```\n\n**See**: [DATA_ACCESS.md](DATA_ACCESS.md) for comprehensive guide\n\n---\n\n## Critical: Webhook Data Structure\n\n**MOST COMMON MISTAKE**: Webhook data is nested under `.body`\n\n```javascript\n// âŒ WRONG - Will return undefined\nconst name = $json.name;\nconst email = $json.email;\n\n// âœ… CORRECT - Webhook data is under .body\nconst name = $json.body.name;\nconst email = $json.body.email;\n\n// Or with $input\nconst webhookData = $input.first().json.body;\nconst name = webhookData.name;\n```\n\n**Why**: Webhook node wraps all request data under `body` property. This includes POST data, query parameters, and JSON payloads.\n\n**See**: [DATA_ACCESS.md](DATA_ACCESS.md) for full webhook structure details\n\n---\n\n## Return Format Requirements\n\n**CRITICAL RULE**: Always return array of objects with `json` property\n\n### Correct Return Formats\n\n```javascript\n// âœ… Single result\nreturn [{\n  json: {\n    field1: value1,\n    field2: value2\n  }\n}];\n\n// âœ… Multiple results\nreturn [\n  {json: {id: 1, data: 'first'}},\n  {json: {id: 2, data: 'second'}}\n];\n\n// âœ… Transformed array\nconst transformed = $input.all()\n  .filter(item => item.json.valid)\n  .map(item => ({\n    json: {\n      id: item.json.id,\n      processed: true\n    }\n  }));\nreturn transformed;\n\n// âœ… Empty result (when no data to return)\nreturn [];\n\n// âœ… Conditional return\nif (shouldProcess) {\n  return [{json: processedData}];\n} else {\n  return [];\n}\n```\n\n### Incorrect Return Formats\n\n```javascript\n// âŒ WRONG: Object without array wrapper\nreturn {\n  json: {field: value}\n};\n\n// âŒ WRONG: Array without json wrapper\nreturn [{field: value}];\n\n// âŒ WRONG: Plain string\nreturn \"processed\";\n\n// âŒ WRONG: Raw data without mapping\nreturn $input.all();  // Missing .map()\n\n// âŒ WRONG: Incomplete structure\nreturn [{data: value}];  // Should be {json: value}\n```\n\n**Why it matters**: Next nodes expect array format. Incorrect format causes workflow execution to fail.\n\n**See**: [ERROR_PATTERNS.md](ERROR_PATTERNS.md) #3 for detailed error solutions\n\n---\n\n## Common Patterns Overview\n\nBased on production workflows, here are the most useful patterns:\n\n### 1. Multi-Source Data Aggregation\nCombine data from multiple APIs, webhooks, or nodes\n\n```javascript\nconst allItems = $input.all();\nconst results = [];\n\nfor (const item of allItems) {\n  const sourceName = item.json.name || 'Unknown';\n  // Parse source-specific structure\n  if (sourceName === 'API1' && item.json.data) {\n    results.push({\n      json: {\n        title: item.json.data.title,\n        source: 'API1'\n      }\n    });\n  }\n}\n\nreturn results;\n```\n\n### 2. Filtering with Regex\nExtract patterns, mentions, or keywords from text\n\n```javascript\nconst pattern = /\\b([A-Z]{2,5})\\b/g;\nconst matches = {};\n\nfor (const item of $input.all()) {\n  const text = item.json.text;\n  const found = text.match(pattern);\n\n  if (found) {\n    found.forEach(match => {\n      matches[match] = (matches[match] || 0) + 1;\n    });\n  }\n}\n\nreturn [{json: {matches}}];\n```\n\n### 3. Data Transformation & Enrichment\nMap fields, normalize formats, add computed fields\n\n```javascript\nconst items = $input.all();\n\nreturn items.map(item => {\n  const data = item.json;\n  const nameParts = data.name.split(' ');\n\n  return {\n    json: {\n      first_name: nameParts[0],\n      last_name: nameParts.slice(1).join(' '),\n      email: data.email,\n      created_at: new Date().toISOString()\n    }\n  };\n});\n```\n\n### 4. Top N Filtering & Ranking\nSort and limit results\n\n```javascript\nconst items = $input.all();\n\nconst topItems = items\n  .sort((a, b) => (b.json.score || 0) - (a.json.score || 0))\n  .slice(0, 10);\n\nreturn topItems.map(item => ({json: item.json}));\n```\n\n### 5. Aggregation & Reporting\nSum, count, group data\n\n```javascript\nconst items = $input.all();\nconst total = items.reduce((sum, item) => sum + (item.json.amount || 0), 0);\n\nreturn [{\n  json: {\n    total,\n    count: items.length,\n    average: total / items.length,\n    timestamp: new Date().toISOString()\n  }\n}];\n```\n\n**See**: [COMMON_PATTERNS.md](COMMON_PATTERNS.md) for 10 detailed production patterns\n\n---\n\n## Error Prevention - Top 5 Mistakes\n\n### #1: Empty Code or Missing Return (Most Common)\n\n```javascript\n// âŒ WRONG: No return statement\nconst items = $input.all();\n// ... processing code ...\n// Forgot to return!\n\n// âœ… CORRECT: Always return data\nconst items = $input.all();\n// ... processing ...\nreturn items.map(item => ({json: item.json}));\n```\n\n### #2: Expression Syntax Confusion\n\n```javascript\n// âŒ WRONG: Using n8n expression syntax in code\nconst value = \"{{ $json.field }}\";\n\n// âœ… CORRECT: Use JavaScript template literals\nconst value = `${$json.field}`;\n\n// âœ… CORRECT: Direct access\nconst value = $input.first().json.field;\n```\n\n### #3: Incorrect Return Wrapper\n\n```javascript\n// âŒ WRONG: Returning object instead of array\nreturn {json: {result: 'success'}};\n\n// âœ… CORRECT: Array wrapper required\nreturn [{json: {result: 'success'}}];\n```\n\n### #4: Missing Null Checks\n\n```javascript\n// âŒ WRONG: Crashes if field doesn't exist\nconst value = item.json.user.email;\n\n// âœ… CORRECT: Safe access with optional chaining\nconst value = item.json?.user?.email || 'no-email@example.com';\n\n// âœ… CORRECT: Guard clause\nif (!item.json.user) {\n  return [];\n}\nconst value = item.json.user.email;\n```\n\n### #5: Webhook Body Nesting\n\n```javascript\n// âŒ WRONG: Direct access to webhook data\nconst email = $json.email;\n\n// âœ… CORRECT: Webhook data under .body\nconst email = $json.body.email;\n```\n\n**See**: [ERROR_PATTERNS.md](ERROR_PATTERNS.md) for comprehensive error guide\n\n---\n\n## Built-in Functions & Helpers\n\n### $helpers.httpRequest()\n\nMake HTTP requests from within code:\n\n```javascript\nconst response = await $helpers.httpRequest({\n  method: 'GET',\n  url: 'https://api.example.com/data',\n  headers: {\n    'Authorization': 'Bearer token',\n    'Content-Type': 'application/json'\n  }\n});\n\nreturn [{json: {data: response}}];\n```\n\n### DateTime (Luxon)\n\nDate and time operations:\n\n```javascript\n// Current time\nconst now = DateTime.now();\n\n// Format dates\nconst formatted = now.toFormat('yyyy-MM-dd');\nconst iso = now.toISO();\n\n// Date arithmetic\nconst tomorrow = now.plus({days: 1});\nconst lastWeek = now.minus({weeks: 1});\n\nreturn [{\n  json: {\n    today: formatted,\n    tomorrow: tomorrow.toFormat('yyyy-MM-dd')\n  }\n}];\n```\n\n### $jmespath()\n\nQuery JSON structures:\n\n```javascript\nconst data = $input.first().json;\n\n// Filter array\nconst adults = $jmespath(data, 'users[?age >= `18`]');\n\n// Extract fields\nconst names = $jmespath(data, 'users[*].name');\n\nreturn [{json: {adults, names}}];\n```\n\n**See**: [BUILTIN_FUNCTIONS.md](BUILTIN_FUNCTIONS.md) for complete reference\n\n---\n\n## Best Practices\n\n### 1. Always Validate Input Data\n\n```javascript\nconst items = $input.all();\n\n// Check if data exists\nif (!items || items.length === 0) {\n  return [];\n}\n\n// Validate structure\nif (!items[0].json) {\n  return [{json: {error: 'Invalid input format'}}];\n}\n\n// Continue processing...\n```\n\n### 2. Use Try-Catch for Error Handling\n\n```javascript\ntry {\n  const response = await $helpers.httpRequest({\n    url: 'https://api.example.com/data'\n  });\n\n  return [{json: {success: true, data: response}}];\n} catch (error) {\n  return [{\n    json: {\n      success: false,\n      error: error.message\n    }\n  }];\n}\n```\n\n### 3. Prefer Array Methods Over Loops\n\n```javascript\n// âœ… GOOD: Functional approach\nconst processed = $input.all()\n  .filter(item => item.json.valid)\n  .map(item => ({json: {id: item.json.id}}));\n\n// âŒ SLOWER: Manual loop\nconst processed = [];\nfor (const item of $input.all()) {\n  if (item.json.valid) {\n    processed.push({json: {id: item.json.id}});\n  }\n}\n```\n\n### 4. Filter Early, Process Late\n\n```javascript\n// âœ… GOOD: Filter first to reduce processing\nconst processed = $input.all()\n  .filter(item => item.json.status === 'active')  // Reduce dataset first\n  .map(item => expensiveTransformation(item));  // Then transform\n\n// âŒ WASTEFUL: Transform everything, then filter\nconst processed = $input.all()\n  .map(item => expensiveTransformation(item))  // Wastes CPU\n  .filter(item => item.json.status === 'active');\n```\n\n### 5. Use Descriptive Variable Names\n\n```javascript\n// âœ… GOOD: Clear intent\nconst activeUsers = $input.all().filter(item => item.json.active);\nconst totalRevenue = activeUsers.reduce((sum, user) => sum + user.json.revenue, 0);\n\n// âŒ BAD: Unclear purpose\nconst a = $input.all().filter(item => item.json.active);\nconst t = a.reduce((s, u) => s + u.json.revenue, 0);\n```\n\n### 6. Debug with console.log()\n\n```javascript\n// Debug statements appear in browser console\nconst items = $input.all();\nconsole.log(`Processing ${items.length} items`);\n\nfor (const item of items) {\n  console.log('Item data:', item.json);\n  // Process...\n}\n\nreturn result;\n```\n\n---\n\n## When to Use Code Node\n\nUse Code node when:\n- âœ… Complex transformations requiring multiple steps\n- âœ… Custom calculations or business logic\n- âœ… Recursive operations\n- âœ… API response parsing with complex structure\n- âœ… Multi-step conditionals\n- âœ… Data aggregation across items\n\nConsider other nodes when:\n- âŒ Simple field mapping â†’ Use **Set** node\n- âŒ Basic filtering â†’ Use **Filter** node\n- âŒ Simple conditionals â†’ Use **IF** or **Switch** node\n- âŒ HTTP requests only â†’ Use **HTTP Request** node\n\n**Code node excels at**: Complex logic that would require chaining many simple nodes\n\n---\n\n## Integration with Other Skills\n\n### Works With:\n\n**n8n Expression Syntax**:\n- Expressions use `{{ }}` syntax in other nodes\n- Code nodes use JavaScript directly (no `{{ }}`)\n- When to use expressions vs code\n\n**n8n MCP Tools Expert**:\n- How to find Code node: `search_nodes({query: \"code\"})`\n- Get configuration help: `get_node_essentials(\"nodes-base.code\")`\n- Validate code: `validate_node_operation()`\n\n**n8n Node Configuration**:\n- Mode selection (All Items vs Each Item)\n- Language selection (JavaScript vs Python)\n- Understanding property dependencies\n\n**n8n Workflow Patterns**:\n- Code nodes in transformation step\n- Webhook â†’ Code â†’ API pattern\n- Error handling in workflows\n\n**n8n Validation Expert**:\n- Validate Code node configuration\n- Handle validation errors\n- Auto-fix common issues\n\n---\n\n## Quick Reference Checklist\n\nBefore deploying Code nodes, verify:\n\n- [ ] **Code is not empty** - Must have meaningful logic\n- [ ] **Return statement exists** - Must return array of objects\n- [ ] **Proper return format** - Each item: `{json: {...}}`\n- [ ] **Data access correct** - Using `$input.all()`, `$input.first()`, or `$input.item`\n- [ ] **No n8n expressions** - Use JavaScript template literals: `` `${value}` ``\n- [ ] **Error handling** - Guard clauses for null/undefined inputs\n- [ ] **Webhook data** - Access via `.body` if from webhook\n- [ ] **Mode selection** - \"All Items\" for most cases\n- [ ] **Performance** - Prefer map/filter over manual loops\n- [ ] **Output consistent** - All code paths return same structure\n\n---\n\n## Additional Resources\n\n### Related Files\n- [DATA_ACCESS.md](DATA_ACCESS.md) - Comprehensive data access patterns\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - 10 production-tested patterns\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Top 5 errors and solutions\n- [BUILTIN_FUNCTIONS.md](BUILTIN_FUNCTIONS.md) - Complete built-in reference\n\n### n8n Documentation\n- Code Node Guide: https://docs.n8n.io/code/code-node/\n- Built-in Methods: https://docs.n8n.io/code-examples/methods-variables-reference/\n- Luxon Documentation: https://moment.github.io/luxon/\n\n---\n\n**Ready to write JavaScript in n8n Code nodes!** Start with simple transformations, use the error patterns guide to avoid common mistakes, and reference the pattern library for production-ready examples.\n",
        "skills/n8n-code-python/COMMON_PATTERNS.md": "# Common Patterns - Python Code Node\n\nProduction-tested Python patterns for n8n Code nodes.\n\n---\n\n## âš ï¸ Important: JavaScript First\n\n**Use JavaScript for 95% of use cases.**\n\nPython in n8n has **NO external libraries** (no requests, pandas, numpy).\n\nOnly use Python when:\n- You have complex Python-specific logic\n- You need Python's standard library features\n- You're more comfortable with Python than JavaScript\n\nFor most workflows, **JavaScript is the better choice**.\n\n---\n\n## Pattern Overview\n\nThese 10 patterns cover common n8n Code node scenarios using Python:\n\n1. **Multi-Source Data Aggregation** - Combine data from multiple nodes\n2. **Regex-Based Filtering** - Filter items using pattern matching\n3. **Markdown to Structured Data** - Parse markdown into structured format\n4. **JSON Object Comparison** - Compare two JSON objects for changes\n5. **CRM Data Transformation** - Transform CRM data to standard format\n6. **Release Notes Processing** - Parse and categorize release notes\n7. **Array Transformation** - Reshape arrays and extract fields\n8. **Dictionary Lookup** - Create and use lookup dictionaries\n9. **Top N Filtering** - Get top items by score/value\n10. **String Aggregation** - Aggregate strings with formatting\n\n---\n\n## Pattern 1: Multi-Source Data Aggregation\n\n**Use case**: Combine data from multiple sources (APIs, webhooks, databases).\n\n**Scenario**: Aggregate news articles from multiple sources.\n\n### Implementation\n\n```python\nfrom datetime import datetime\n\nall_items = _input.all()\nprocessed_articles = []\n\nfor item in all_items:\n    source_name = item[\"json\"].get(\"name\", \"Unknown\")\n    source_data = item[\"json\"]\n\n    # Process Hacker News source\n    if source_name == \"Hacker News\" and source_data.get(\"hits\"):\n        for hit in source_data[\"hits\"]:\n            processed_articles.append({\n                \"title\": hit.get(\"title\", \"No title\"),\n                \"url\": hit.get(\"url\", \"\"),\n                \"summary\": hit.get(\"story_text\") or \"No summary\",\n                \"source\": \"Hacker News\",\n                \"score\": hit.get(\"points\", 0),\n                \"fetched_at\": datetime.now().isoformat()\n            })\n\n    # Process Reddit source\n    elif source_name == \"Reddit\" and source_data.get(\"data\"):\n        for post in source_data[\"data\"].get(\"children\", []):\n            post_data = post.get(\"data\", {})\n            processed_articles.append({\n                \"title\": post_data.get(\"title\", \"No title\"),\n                \"url\": post_data.get(\"url\", \"\"),\n                \"summary\": post_data.get(\"selftext\", \"\")[:200],\n                \"source\": \"Reddit\",\n                \"score\": post_data.get(\"score\", 0),\n                \"fetched_at\": datetime.now().isoformat()\n            })\n\n# Sort by score descending\nprocessed_articles.sort(key=lambda x: x[\"score\"], reverse=True)\n\n# Return as n8n items\nreturn [{\"json\": article} for article in processed_articles]\n```\n\n### Key Techniques\n\n- Process multiple data sources in one loop\n- Normalize different data structures\n- Use datetime for timestamps\n- Sort by criteria\n- Return properly formatted items\n\n---\n\n## Pattern 2: Regex-Based Filtering\n\n**Use case**: Filter items based on pattern matching in text fields.\n\n**Scenario**: Filter support tickets by priority keywords.\n\n### Implementation\n\n```python\nimport re\n\nall_items = _input.all()\npriority_tickets = []\n\n# High priority keywords pattern\nhigh_priority_pattern = re.compile(\n    r'\\b(urgent|critical|emergency|asap|down|outage|broken)\\b',\n    re.IGNORECASE\n)\n\nfor item in all_items:\n    ticket = item[\"json\"]\n\n    # Check subject and description\n    subject = ticket.get(\"subject\", \"\")\n    description = ticket.get(\"description\", \"\")\n    combined_text = f\"{subject} {description}\"\n\n    # Find matches\n    matches = high_priority_pattern.findall(combined_text)\n\n    if matches:\n        priority_tickets.append({\n            \"json\": {\n                **ticket,\n                \"priority\": \"high\",\n                \"matched_keywords\": list(set(matches)),\n                \"keyword_count\": len(matches)\n            }\n        })\n    else:\n        priority_tickets.append({\n            \"json\": {\n                **ticket,\n                \"priority\": \"normal\",\n                \"matched_keywords\": [],\n                \"keyword_count\": 0\n            }\n        })\n\n# Sort by keyword count (most urgent first)\npriority_tickets.sort(key=lambda x: x[\"json\"][\"keyword_count\"], reverse=True)\n\nreturn priority_tickets\n```\n\n### Key Techniques\n\n- Use re.compile() for reusable patterns\n- re.IGNORECASE for case-insensitive matching\n- Combine multiple text fields for searching\n- Extract and deduplicate matches\n- Sort by priority indicators\n\n---\n\n## Pattern 3: Markdown to Structured Data\n\n**Use case**: Parse markdown text into structured data.\n\n**Scenario**: Extract tasks from markdown checklist.\n\n### Implementation\n\n```python\nimport re\n\nmarkdown_text = _input.first()[\"json\"][\"body\"].get(\"markdown\", \"\")\n\n# Parse markdown checklist\ntasks = []\nlines = markdown_text.split(\"\\n\")\n\nfor line in lines:\n    # Match: - [ ] Task or - [x] Task\n    match = re.match(r'^\\s*-\\s*\\[([ x])\\]\\s*(.+)$', line, re.IGNORECASE)\n\n    if match:\n        checked = match.group(1).lower() == 'x'\n        task_text = match.group(2).strip()\n\n        # Extract priority if present (e.g., [P1], [HIGH])\n        priority_match = re.search(r'\\[(P\\d|HIGH|MEDIUM|LOW)\\]', task_text, re.IGNORECASE)\n        priority = priority_match.group(1).upper() if priority_match else \"NORMAL\"\n\n        # Remove priority tag from text\n        clean_text = re.sub(r'\\[(P\\d|HIGH|MEDIUM|LOW)\\]', '', task_text, flags=re.IGNORECASE).strip()\n\n        tasks.append({\n            \"text\": clean_text,\n            \"completed\": checked,\n            \"priority\": priority,\n            \"original_line\": line.strip()\n        })\n\nreturn [{\n    \"json\": {\n        \"tasks\": tasks,\n        \"total\": len(tasks),\n        \"completed\": sum(1 for t in tasks if t[\"completed\"]),\n        \"pending\": sum(1 for t in tasks if not t[\"completed\"])\n    }\n}]\n```\n\n### Key Techniques\n\n- Line-by-line parsing\n- Multiple regex patterns for extraction\n- Extract metadata from text\n- Calculate summary statistics\n- Return structured data\n\n---\n\n## Pattern 4: JSON Object Comparison\n\n**Use case**: Compare two JSON objects to find differences.\n\n**Scenario**: Compare old and new user profile data.\n\n### Implementation\n\n```python\nimport json\n\nall_items = _input.all()\n\n# Assume first item is old data, second is new data\nold_data = all_items[0][\"json\"] if len(all_items) > 0 else {}\nnew_data = all_items[1][\"json\"] if len(all_items) > 1 else {}\n\nchanges = {\n    \"added\": {},\n    \"removed\": {},\n    \"modified\": {},\n    \"unchanged\": {}\n}\n\n# Find all unique keys\nall_keys = set(old_data.keys()) | set(new_data.keys())\n\nfor key in all_keys:\n    old_value = old_data.get(key)\n    new_value = new_data.get(key)\n\n    if key not in old_data:\n        # Added field\n        changes[\"added\"][key] = new_value\n    elif key not in new_data:\n        # Removed field\n        changes[\"removed\"][key] = old_value\n    elif old_value != new_value:\n        # Modified field\n        changes[\"modified\"][key] = {\n            \"old\": old_value,\n            \"new\": new_value\n        }\n    else:\n        # Unchanged field\n        changes[\"unchanged\"][key] = old_value\n\nreturn [{\n    \"json\": {\n        \"changes\": changes,\n        \"summary\": {\n            \"added_count\": len(changes[\"added\"]),\n            \"removed_count\": len(changes[\"removed\"]),\n            \"modified_count\": len(changes[\"modified\"]),\n            \"unchanged_count\": len(changes[\"unchanged\"]),\n            \"has_changes\": len(changes[\"added\"]) > 0 or len(changes[\"removed\"]) > 0 or len(changes[\"modified\"]) > 0\n        }\n    }\n}]\n```\n\n### Key Techniques\n\n- Set operations for key comparison\n- Dictionary .get() for safe access\n- Categorize changes by type\n- Create summary statistics\n- Return detailed comparison\n\n---\n\n## Pattern 5: CRM Data Transformation\n\n**Use case**: Transform CRM data to standard format.\n\n**Scenario**: Normalize data from different CRM systems.\n\n### Implementation\n\n```python\nfrom datetime import datetime\nimport re\n\nall_items = _input.all()\nnormalized_contacts = []\n\nfor item in all_items:\n    raw_contact = item[\"json\"]\n    source = raw_contact.get(\"source\", \"unknown\")\n\n    # Normalize email\n    email = raw_contact.get(\"email\", \"\").lower().strip()\n\n    # Normalize phone (remove non-digits)\n    phone_raw = raw_contact.get(\"phone\", \"\")\n    phone = re.sub(r'\\D', '', phone_raw)\n\n    # Parse name\n    if \"full_name\" in raw_contact:\n        name_parts = raw_contact[\"full_name\"].split(\" \", 1)\n        first_name = name_parts[0] if len(name_parts) > 0 else \"\"\n        last_name = name_parts[1] if len(name_parts) > 1 else \"\"\n    else:\n        first_name = raw_contact.get(\"first_name\", \"\")\n        last_name = raw_contact.get(\"last_name\", \"\")\n\n    # Normalize status\n    status_raw = raw_contact.get(\"status\", \"\").lower()\n    status = \"active\" if status_raw in [\"active\", \"enabled\", \"true\", \"1\"] else \"inactive\"\n\n    # Create normalized contact\n    normalized_contacts.append({\n        \"json\": {\n            \"id\": raw_contact.get(\"id\", \"\"),\n            \"first_name\": first_name.strip(),\n            \"last_name\": last_name.strip(),\n            \"full_name\": f\"{first_name} {last_name}\".strip(),\n            \"email\": email,\n            \"phone\": phone,\n            \"status\": status,\n            \"source\": source,\n            \"normalized_at\": datetime.now().isoformat(),\n            \"original_data\": raw_contact\n        }\n    })\n\nreturn normalized_contacts\n```\n\n### Key Techniques\n\n- Multiple field name variations handling\n- String cleaning and normalization\n- Regex for phone number cleaning\n- Name parsing logic\n- Status normalization\n- Preserve original data\n\n---\n\n## Pattern 6: Release Notes Processing\n\n**Use case**: Parse release notes and categorize changes.\n\n**Scenario**: Extract features, fixes, and breaking changes from release notes.\n\n### Implementation\n\n```python\nimport re\n\nrelease_notes = _input.first()[\"json\"][\"body\"].get(\"notes\", \"\")\n\ncategories = {\n    \"features\": [],\n    \"fixes\": [],\n    \"breaking\": [],\n    \"other\": []\n}\n\n# Split into lines\nlines = release_notes.split(\"\\n\")\n\nfor line in lines:\n    line = line.strip()\n\n    # Skip empty lines and headers\n    if not line or line.startswith(\"#\"):\n        continue\n\n    # Remove bullet points\n    clean_line = re.sub(r'^[\\*\\-\\+]\\s*', '', line)\n\n    # Categorize\n    if re.search(r'\\b(feature|add|new)\\b', clean_line, re.IGNORECASE):\n        categories[\"features\"].append(clean_line)\n    elif re.search(r'\\b(fix|bug|patch|resolve)\\b', clean_line, re.IGNORECASE):\n        categories[\"fixes\"].append(clean_line)\n    elif re.search(r'\\b(breaking|deprecated|remove)\\b', clean_line, re.IGNORECASE):\n        categories[\"breaking\"].append(clean_line)\n    else:\n        categories[\"other\"].append(clean_line)\n\nreturn [{\n    \"json\": {\n        \"categories\": categories,\n        \"summary\": {\n            \"features\": len(categories[\"features\"]),\n            \"fixes\": len(categories[\"fixes\"]),\n            \"breaking\": len(categories[\"breaking\"]),\n            \"other\": len(categories[\"other\"]),\n            \"total\": sum(len(v) for v in categories.values())\n        }\n    }\n}]\n```\n\n### Key Techniques\n\n- Line-by-line parsing\n- Pattern-based categorization\n- Bullet point removal\n- Skip headers and empty lines\n- Summary statistics\n\n---\n\n## Pattern 7: Array Transformation\n\n**Use case**: Reshape arrays and extract specific fields.\n\n**Scenario**: Transform user data array to extract specific fields.\n\n### Implementation\n\n```python\nall_items = _input.all()\n\n# Extract and transform\ntransformed = []\n\nfor item in all_items:\n    user = item[\"json\"]\n\n    # Extract nested fields\n    profile = user.get(\"profile\", {})\n    settings = user.get(\"settings\", {})\n\n    transformed.append({\n        \"json\": {\n            \"user_id\": user.get(\"id\"),\n            \"email\": user.get(\"email\"),\n            \"name\": profile.get(\"name\", \"Unknown\"),\n            \"avatar\": profile.get(\"avatar_url\"),\n            \"bio\": profile.get(\"bio\", \"\")[:100],  # Truncate to 100 chars\n            \"notifications_enabled\": settings.get(\"notifications\", True),\n            \"theme\": settings.get(\"theme\", \"light\"),\n            \"created_at\": user.get(\"created_at\"),\n            \"last_login\": user.get(\"last_login_at\")\n        }\n    })\n\nreturn transformed\n```\n\n### Key Techniques\n\n- Field extraction from nested objects\n- Default values with .get()\n- String truncation\n- Flattening nested structures\n\n---\n\n## Pattern 8: Dictionary Lookup\n\n**Use case**: Create lookup dictionary for fast data access.\n\n**Scenario**: Look up user details by ID.\n\n### Implementation\n\n```python\nall_items = _input.all()\n\n# Build lookup dictionary\nusers_by_id = {}\n\nfor item in all_items:\n    user = item[\"json\"]\n    user_id = user.get(\"id\")\n\n    if user_id:\n        users_by_id[user_id] = {\n            \"name\": user.get(\"name\"),\n            \"email\": user.get(\"email\"),\n            \"status\": user.get(\"status\")\n        }\n\n# Example: Look up specific users\nlookup_ids = [1, 3, 5]\nlooked_up = []\n\nfor user_id in lookup_ids:\n    if user_id in users_by_id:\n        looked_up.append({\n            \"json\": {\n                \"id\": user_id,\n                **users_by_id[user_id],\n                \"found\": True\n            }\n        })\n    else:\n        looked_up.append({\n            \"json\": {\n                \"id\": user_id,\n                \"found\": False\n            }\n        })\n\nreturn looked_up\n```\n\n### Key Techniques\n\n- Dictionary comprehension alternative\n- O(1) lookup time\n- Handle missing keys gracefully\n- Preserve lookup order\n\n---\n\n## Pattern 9: Top N Filtering\n\n**Use case**: Get top items by score or value.\n\n**Scenario**: Get top 10 products by sales.\n\n### Implementation\n\n```python\nall_items = _input.all()\n\n# Extract products with sales\nproducts = []\n\nfor item in all_items:\n    product = item[\"json\"]\n    products.append({\n        \"id\": product.get(\"id\"),\n        \"name\": product.get(\"name\"),\n        \"sales\": product.get(\"sales\", 0),\n        \"revenue\": product.get(\"revenue\", 0.0),\n        \"category\": product.get(\"category\")\n    })\n\n# Sort by sales descending\nproducts.sort(key=lambda p: p[\"sales\"], reverse=True)\n\n# Get top 10\ntop_10 = products[:10]\n\nreturn [\n    {\n        \"json\": {\n            **product,\n            \"rank\": index + 1\n        }\n    }\n    for index, product in enumerate(top_10)\n]\n```\n\n### Key Techniques\n\n- List sorting with custom key\n- Slicing for top N\n- Add ranking information\n- Enumerate for index\n\n---\n\n## Pattern 10: String Aggregation\n\n**Use case**: Aggregate strings with formatting.\n\n**Scenario**: Create summary text from multiple items.\n\n### Implementation\n\n```python\nall_items = _input.all()\n\n# Collect messages\nmessages = []\n\nfor item in all_items:\n    data = item[\"json\"]\n\n    user = data.get(\"user\", \"Unknown\")\n    message = data.get(\"message\", \"\")\n    timestamp = data.get(\"timestamp\", \"\")\n\n    # Format each message\n    formatted = f\"[{timestamp}] {user}: {message}\"\n    messages.append(formatted)\n\n# Join with newlines\nsummary = \"\\n\".join(messages)\n\n# Create statistics\ntotal_length = sum(len(msg) for msg in messages)\naverage_length = total_length / len(messages) if messages else 0\n\nreturn [{\n    \"json\": {\n        \"summary\": summary,\n        \"message_count\": len(messages),\n        \"total_characters\": total_length,\n        \"average_length\": round(average_length, 2)\n    }\n}]\n```\n\n### Key Techniques\n\n- String formatting with f-strings\n- Join lists with separator\n- Calculate string statistics\n- Handle empty lists\n\n---\n\n## Pattern Comparison: Python vs JavaScript\n\n### Data Access\n\n```python\n# Python\nall_items = _input.all()\nfirst_item = _input.first()\ncurrent = _input.item\nwebhook_data = _json[\"body\"]\n\n# JavaScript\nconst allItems = $input.all();\nconst firstItem = $input.first();\nconst current = $input.item;\nconst webhookData = $json.body;\n```\n\n### Dictionary/Object Access\n\n```python\n# Python - Dictionary key access\nname = user[\"name\"]           # May raise KeyError\nname = user.get(\"name\", \"?\")  # Safe with default\n\n# JavaScript - Object property access\nconst name = user.name;              // May be undefined\nconst name = user.name || \"?\";       // Safe with default\n```\n\n### Array Operations\n\n```python\n# Python - List comprehension\nfiltered = [item for item in items if item[\"active\"]]\n\n# JavaScript - Array methods\nconst filtered = items.filter(item => item.active);\n```\n\n### Sorting\n\n```python\n# Python\nitems.sort(key=lambda x: x[\"score\"], reverse=True)\n\n# JavaScript\nitems.sort((a, b) => b.score - a.score);\n```\n\n---\n\n## Best Practices\n\n### 1. Use .get() for Safe Access\n\n```python\n# âœ… SAFE: Use .get() with defaults\nname = user.get(\"name\", \"Unknown\")\nemail = user.get(\"email\", \"no-email@example.com\")\n\n# âŒ RISKY: Direct key access\nname = user[\"name\"]  # KeyError if missing!\n```\n\n### 2. Handle Empty Lists\n\n```python\n# âœ… SAFE: Check before processing\nitems = _input.all()\nif items:\n    first = items[0]\nelse:\n    return [{\"json\": {\"error\": \"No items\"}}]\n\n# âŒ RISKY: Assume items exist\nfirst = items[0]  # IndexError if empty!\n```\n\n### 3. Use List Comprehensions\n\n```python\n# âœ… PYTHONIC: List comprehension\nactive = [item for item in items if item[\"json\"].get(\"active\")]\n\n# âŒ VERBOSE: Traditional loop\nactive = []\nfor item in items:\n    if item[\"json\"].get(\"active\"):\n        active.append(item)\n```\n\n### 4. Return Proper Format\n\n```python\n# âœ… CORRECT: Array of objects with \"json\" key\nreturn [{\"json\": {\"field\": \"value\"}}]\n\n# âŒ WRONG: Just the data\nreturn {\"field\": \"value\"}\n\n# âŒ WRONG: Array without \"json\" wrapper\nreturn [{\"field\": \"value\"}]\n```\n\n### 5. Use Standard Library\n\n```python\n# âœ… GOOD: Use standard library\nimport statistics\naverage = statistics.mean(numbers)\n\n# âœ… ALSO GOOD: Built-in functions\naverage = sum(numbers) / len(numbers) if numbers else 0\n\n# âŒ CAN'T DO: External libraries\nimport numpy as np  # ModuleNotFoundError!\n```\n\n---\n\n## When to Use Each Pattern\n\n| Pattern | When to Use |\n|---------|-------------|\n| Multi-Source Aggregation | Combining data from different nodes/sources |\n| Regex Filtering | Text pattern matching, validation, extraction |\n| Markdown Parsing | Processing formatted text into structured data |\n| JSON Comparison | Detecting changes between objects |\n| CRM Transformation | Normalizing data from different systems |\n| Release Notes | Categorizing text by keywords |\n| Array Transformation | Reshaping data, extracting fields |\n| Dictionary Lookup | Fast ID-based lookups |\n| Top N Filtering | Getting best/worst items by criteria |\n| String Aggregation | Creating formatted text summaries |\n\n---\n\n## Summary\n\n**Key Takeaways**:\n- Use `.get()` for safe dictionary access\n- List comprehensions are pythonic and efficient\n- Handle empty lists/None values\n- Use standard library (json, datetime, re)\n- Return proper n8n format: `[{\"json\": {...}}]`\n\n**Remember**:\n- JavaScript is recommended for 95% of use cases\n- Python has NO external libraries\n- Use n8n nodes for complex operations\n- Code node is for data transformation, not API calls\n\n**See Also**:\n- [SKILL.md](SKILL.md) - Python Code overview\n- [DATA_ACCESS.md](DATA_ACCESS.md) - Data access patterns\n- [STANDARD_LIBRARY.md](STANDARD_LIBRARY.md) - Available modules\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Avoid common mistakes\n",
        "skills/n8n-code-python/DATA_ACCESS.md": "# Data Access Patterns - Python Code Node\n\nComplete guide to accessing data in n8n Code nodes using Python.\n\n---\n\n## Overview\n\nIn n8n Python Code nodes, you access data using **underscore-prefixed** variables: `_input`, `_json`, `_node`.\n\n**Data Access Priority** (by common usage):\n1. **`_input.all()`** - Most common - Batch operations, aggregations\n2. **`_input.first()`** - Very common - Single item operations\n3. **`_input.item`** - Common - Each Item mode only\n4. **`_node[\"NodeName\"][\"json\"]`** - Specific node references\n5. **`_json`** - Direct current item (use `_input` instead)\n\n**Python vs JavaScript**:\n| JavaScript | Python (Beta) | Python (Native) |\n|------------|---------------|-----------------|\n| `$input.all()` | `_input.all()` | `_items` |\n| `$input.first()` | `_input.first()` | `_items[0]` |\n| `$input.item` | `_input.item` | `_item` |\n| `$json` | `_json` | `_item[\"json\"]` |\n| `$node[\"Name\"]` | `_node[\"Name\"]` | Not available |\n\n---\n\n## Pattern 1: _input.all() - Process All Items\n\n**Usage**: Most common pattern for batch processing\n\n**When to use:**\n- Processing multiple records\n- Aggregating data (sum, count, average)\n- Filtering lists\n- Transforming datasets\n\n### Basic Usage\n\n```python\n# Get all items from previous node\nall_items = _input.all()\n\n# all_items is a list of dictionaries like:\n# [\n#   {\"json\": {\"id\": 1, \"name\": \"Alice\"}},\n#   {\"json\": {\"id\": 2, \"name\": \"Bob\"}}\n# ]\n\nprint(f\"Received {len(all_items)} items\")\n\nreturn all_items\n```\n\n### Example 1: Filter Active Items\n\n```python\nall_items = _input.all()\n\n# Filter only active items\nactive_items = [\n    item for item in all_items\n    if item[\"json\"].get(\"status\") == \"active\"\n]\n\nreturn active_items\n```\n\n### Example 2: Transform All Items\n\n```python\nall_items = _input.all()\n\n# Transform to new structure\ntransformed = []\nfor item in all_items:\n    transformed.append({\n        \"json\": {\n            \"id\": item[\"json\"].get(\"id\"),\n            \"full_name\": f\"{item['json'].get('first_name', '')} {item['json'].get('last_name', '')}\",\n            \"email\": item[\"json\"].get(\"email\"),\n            \"processed_at\": datetime.now().isoformat()\n        }\n    })\n\nreturn transformed\n```\n\n### Example 3: Aggregate Data\n\n```python\nall_items = _input.all()\n\n# Calculate total\ntotal = sum(item[\"json\"].get(\"amount\", 0) for item in all_items)\n\nreturn [{\n    \"json\": {\n        \"total\": total,\n        \"count\": len(all_items),\n        \"average\": total / len(all_items) if all_items else 0\n    }\n}]\n```\n\n### Example 4: Sort and Limit\n\n```python\nall_items = _input.all()\n\n# Get top 5 by score\nsorted_items = sorted(\n    all_items,\n    key=lambda item: item[\"json\"].get(\"score\", 0),\n    reverse=True\n)\ntop_five = sorted_items[:5]\n\nreturn [{\"json\": item[\"json\"]} for item in top_five]\n```\n\n### Example 5: Group By Category\n\n```python\nall_items = _input.all()\n\n# Group items by category\ngrouped = {}\nfor item in all_items:\n    category = item[\"json\"].get(\"category\", \"Uncategorized\")\n\n    if category not in grouped:\n        grouped[category] = []\n\n    grouped[category].append(item[\"json\"])\n\n# Convert to list format\nreturn [\n    {\n        \"json\": {\n            \"category\": category,\n            \"items\": items,\n            \"count\": len(items)\n        }\n    }\n    for category, items in grouped.items()\n]\n```\n\n### Example 6: Deduplicate by ID\n\n```python\nall_items = _input.all()\n\n# Remove duplicates by ID\nseen = set()\nunique = []\n\nfor item in all_items:\n    item_id = item[\"json\"].get(\"id\")\n\n    if item_id and item_id not in seen:\n        seen.add(item_id)\n        unique.append(item)\n\nreturn unique\n```\n\n---\n\n## Pattern 2: _input.first() - Get First Item\n\n**Usage**: Very common for single-item operations\n\n**When to use:**\n- Previous node returns single object\n- Working with API responses\n- Getting initial/first data point\n\n### Basic Usage\n\n```python\n# Get first item from previous node\nfirst_item = _input.first()\n\n# Access the JSON data\ndata = first_item[\"json\"]\n\nprint(f\"First item: {data}\")\n\nreturn [{\"json\": data}]\n```\n\n### Example 1: Process Single API Response\n\n```python\n# Get API response (typically single object)\nresponse = _input.first()[\"json\"]\n\n# Extract what you need\nreturn [{\n    \"json\": {\n        \"user_id\": response.get(\"data\", {}).get(\"user\", {}).get(\"id\"),\n        \"user_name\": response.get(\"data\", {}).get(\"user\", {}).get(\"name\"),\n        \"status\": response.get(\"status\"),\n        \"fetched_at\": datetime.now().isoformat()\n    }\n}]\n```\n\n### Example 2: Transform Single Object\n\n```python\ndata = _input.first()[\"json\"]\n\n# Transform structure\nreturn [{\n    \"json\": {\n        \"id\": data.get(\"id\"),\n        \"contact\": {\n            \"email\": data.get(\"email\"),\n            \"phone\": data.get(\"phone\")\n        },\n        \"address\": {\n            \"street\": data.get(\"street\"),\n            \"city\": data.get(\"city\"),\n            \"zip\": data.get(\"zip\")\n        }\n    }\n}]\n```\n\n### Example 3: Validate Single Item\n\n```python\nitem = _input.first()[\"json\"]\n\n# Validation logic\nis_valid = bool(item.get(\"email\") and \"@\" in item.get(\"email\", \"\"))\n\nreturn [{\n    \"json\": {\n        **item,\n        \"valid\": is_valid,\n        \"validated_at\": datetime.now().isoformat()\n    }\n}]\n```\n\n### Example 4: Extract Nested Data\n\n```python\nresponse = _input.first()[\"json\"]\n\n# Navigate nested structure\nusers = response.get(\"data\", {}).get(\"users\", [])\n\nreturn [\n    {\n        \"json\": {\n            \"id\": user.get(\"id\"),\n            \"name\": user.get(\"profile\", {}).get(\"name\", \"Unknown\"),\n            \"email\": user.get(\"contact\", {}).get(\"email\", \"no-email\")\n        }\n    }\n    for user in users\n]\n```\n\n---\n\n## Pattern 3: _input.item - Current Item (Each Item Mode)\n\n**Usage**: Common in \"Run Once for Each Item\" mode\n\n**When to use:**\n- Mode is set to \"Run Once for Each Item\"\n- Need to process items independently\n- Per-item API calls or validations\n\n**IMPORTANT**: Only use in \"Each Item\" mode. Will be undefined in \"All Items\" mode.\n\n### Basic Usage\n\n```python\n# In \"Run Once for Each Item\" mode\ncurrent_item = _input.item\ndata = current_item[\"json\"]\n\nprint(f\"Processing item: {data.get('id')}\")\n\nreturn [{\n    \"json\": {\n        **data,\n        \"processed\": True\n    }\n}]\n```\n\n### Example 1: Add Processing Metadata\n\n```python\nitem = _input.item\n\nreturn [{\n    \"json\": {\n        **item[\"json\"],\n        \"processed\": True,\n        \"processed_at\": datetime.now().isoformat(),\n        \"processing_duration\": random.random() * 1000  # Simulated\n    }\n}]\n```\n\n### Example 2: Per-Item Validation\n\n```python\nitem = _input.item\ndata = item[\"json\"]\n\n# Validate this specific item\nerrors = []\n\nif not data.get(\"email\"):\n    errors.append(\"Email required\")\nif not data.get(\"name\"):\n    errors.append(\"Name required\")\nif data.get(\"age\") and data[\"age\"] < 18:\n    errors.append(\"Must be 18+\")\n\nreturn [{\n    \"json\": {\n        **data,\n        \"valid\": len(errors) == 0,\n        \"errors\": errors if errors else None\n    }\n}]\n```\n\n### Example 3: Conditional Processing\n\n```python\nitem = _input.item\ndata = item[\"json\"]\n\n# Process based on item type\nif data.get(\"type\") == \"premium\":\n    return [{\n        \"json\": {\n            **data,\n            \"discount\": 0.20,\n            \"tier\": \"premium\"\n        }\n    }]\nelse:\n    return [{\n        \"json\": {\n            **data,\n            \"discount\": 0.05,\n            \"tier\": \"standard\"\n        }\n    }]\n```\n\n---\n\n## Pattern 4: _node - Reference Other Nodes\n\n**Usage**: Less common, but powerful for specific scenarios\n\n**When to use:**\n- Need data from specific named node\n- Combining data from multiple nodes\n\n### Basic Usage\n\n```python\n# Get output from specific node\nwebhook_data = _node[\"Webhook\"][\"json\"]\napi_data = _node[\"HTTP Request\"][\"json\"]\n\nreturn [{\n    \"json\": {\n        \"from_webhook\": webhook_data,\n        \"from_api\": api_data\n    }\n}]\n```\n\n### Example 1: Combine Multiple Sources\n\n```python\n# Reference multiple nodes\nwebhook = _node[\"Webhook\"][\"json\"]\ndatabase = _node[\"Postgres\"][\"json\"]\napi = _node[\"HTTP Request\"][\"json\"]\n\nreturn [{\n    \"json\": {\n        \"combined\": {\n            \"webhook\": webhook.get(\"body\", {}),\n            \"db_records\": len(database) if isinstance(database, list) else 1,\n            \"api_response\": api.get(\"status\")\n        },\n        \"processed_at\": datetime.now().isoformat()\n    }\n}]\n```\n\n### Example 2: Compare Across Nodes\n\n```python\nold_data = _node[\"Get Old Data\"][\"json\"]\nnew_data = _node[\"Get New Data\"][\"json\"]\n\n# Simple comparison\nchanges = {\n    \"added\": [n for n in new_data if n.get(\"id\") not in [o.get(\"id\") for o in old_data]],\n    \"removed\": [o for o in old_data if o.get(\"id\") not in [n.get(\"id\") for n in new_data]]\n}\n\nreturn [{\n    \"json\": {\n        \"changes\": changes,\n        \"summary\": {\n            \"added\": len(changes[\"added\"]),\n            \"removed\": len(changes[\"removed\"])\n        }\n    }\n}]\n```\n\n---\n\n## Critical: Webhook Data Structure\n\n**MOST COMMON MISTAKE**: Forgetting webhook data is nested under `[\"body\"]`\n\n### The Problem\n\nWebhook node wraps all incoming data under a `\"body\"` property.\n\n### Structure\n\n```python\n# Webhook node output structure:\n{\n    \"headers\": {\n        \"content-type\": \"application/json\",\n        \"user-agent\": \"...\"\n    },\n    \"params\": {},\n    \"query\": {},\n    \"body\": {\n        # â† YOUR DATA IS HERE\n        \"name\": \"Alice\",\n        \"email\": \"alice@example.com\",\n        \"message\": \"Hello!\"\n    }\n}\n```\n\n### Wrong vs Right\n\n```python\n# âŒ WRONG: Trying to access directly\nname = _json[\"name\"]  # KeyError!\nemail = _json[\"email\"]  # KeyError!\n\n# âœ… CORRECT: Access via [\"body\"]\nname = _json[\"body\"][\"name\"]  # \"Alice\"\nemail = _json[\"body\"][\"email\"]  # \"alice@example.com\"\n\n# âœ… SAFER: Use .get() for safe access\nwebhook_data = _json.get(\"body\", {})\nname = webhook_data.get(\"name\")  # None if missing\nemail = webhook_data.get(\"email\", \"no-email\")  # Default value\n```\n\n### Example: Full Webhook Processing\n\n```python\n# Get webhook data from previous node\nwebhook_output = _input.first()[\"json\"]\n\n# Access the actual payload\npayload = webhook_output.get(\"body\", {})\n\n# Access headers if needed\ncontent_type = webhook_output.get(\"headers\", {}).get(\"content-type\")\n\n# Access query parameters if needed\napi_key = webhook_output.get(\"query\", {}).get(\"api_key\")\n\n# Process the actual data\nreturn [{\n    \"json\": {\n        # Data from webhook body\n        \"user_name\": payload.get(\"name\"),\n        \"user_email\": payload.get(\"email\"),\n        \"message\": payload.get(\"message\"),\n\n        # Metadata\n        \"received_at\": datetime.now().isoformat(),\n        \"content_type\": content_type,\n        \"authenticated\": bool(api_key)\n    }\n}]\n```\n\n### POST Data, Query Params, and Headers\n\n```python\nwebhook = _input.first()[\"json\"]\n\nreturn [{\n    \"json\": {\n        # POST body data\n        \"form_data\": webhook.get(\"body\", {}),\n\n        # Query parameters (?key=value)\n        \"query_params\": webhook.get(\"query\", {}),\n\n        # HTTP headers\n        \"user_agent\": webhook.get(\"headers\", {}).get(\"user-agent\"),\n        \"content_type\": webhook.get(\"headers\", {}).get(\"content-type\"),\n\n        # Request metadata\n        \"method\": webhook.get(\"method\"),  # POST, GET, etc.\n        \"url\": webhook.get(\"url\")\n    }\n}]\n```\n\n---\n\n## Choosing the Right Pattern\n\n### Decision Tree\n\n```\nDo you need ALL items from previous node?\nâ”œâ”€ YES â†’ Use _input.all()\nâ”‚\nâ””â”€ NO â†’ Do you need just the FIRST item?\n    â”œâ”€ YES â†’ Use _input.first()\n    â”‚\n    â””â”€ NO â†’ Are you in \"Each Item\" mode?\n        â”œâ”€ YES â†’ Use _input.item\n        â”‚\n        â””â”€ NO â†’ Do you need specific node data?\n            â”œâ”€ YES â†’ Use _node[\"NodeName\"]\n            â””â”€ NO â†’ Use _input.first() (default)\n```\n\n### Quick Reference Table\n\n| Scenario | Use This | Example |\n|----------|----------|---------|\n| Sum all amounts | `_input.all()` | `sum(i[\"json\"].get(\"amount\", 0) for i in items)` |\n| Get API response | `_input.first()` | `_input.first()[\"json\"].get(\"data\")` |\n| Process each independently | `_input.item` | `_input.item[\"json\"]` (Each Item mode) |\n| Combine two nodes | `_node[\"Name\"]` | `_node[\"API\"][\"json\"]` |\n| Filter list | `_input.all()` | `[i for i in items if i[\"json\"].get(\"active\")]` |\n| Transform single object | `_input.first()` | `{**_input.first()[\"json\"], \"new\": True}` |\n| Webhook data | `_input.first()` | `_input.first()[\"json\"][\"body\"]` |\n\n---\n\n## Common Mistakes\n\n### Mistake 1: Using _json Without Context\n\n```python\n# âŒ RISKY: _json is ambiguous\nvalue = _json[\"field\"]\n\n# âœ… CLEAR: Be explicit\nvalue = _input.first()[\"json\"][\"field\"]\n```\n\n### Mistake 2: Forgetting [\"json\"] Property\n\n```python\n# âŒ WRONG: Trying to access fields on item dictionary\nitems = _input.all()\nnames = [item[\"name\"] for item in items]  # KeyError!\n\n# âœ… CORRECT: Access via [\"json\"]\nnames = [item[\"json\"][\"name\"] for item in items]\n```\n\n### Mistake 3: Using _input.item in All Items Mode\n\n```python\n# âŒ WRONG: _input.item is None in \"All Items\" mode\ndata = _input.item[\"json\"]  # AttributeError!\n\n# âœ… CORRECT: Use appropriate method\ndata = _input.first()[\"json\"]  # Or _input.all()\n```\n\n### Mistake 4: Not Handling Empty Lists\n\n```python\n# âŒ WRONG: Crashes if no items\nfirst = _input.all()[0][\"json\"]  # IndexError!\n\n# âœ… CORRECT: Check length first\nitems = _input.all()\nif items:\n    first = items[0][\"json\"]\nelse:\n    return []\n\n# âœ… ALSO CORRECT: Use _input.first()\nfirst = _input.first()[\"json\"]  # Built-in safety\n```\n\n### Mistake 5: Direct Dictionary Access (KeyError)\n\n```python\n# âŒ RISKY: Crashes if key missing\nvalue = item[\"json\"][\"field\"]  # KeyError!\n\n# âœ… SAFE: Use .get()\nvalue = item[\"json\"].get(\"field\", \"default\")\n```\n\n---\n\n## Advanced Patterns\n\n### Pattern: Safe Nested Access\n\n```python\n# Deep nested access with .get()\nvalue = (\n    _input.first()[\"json\"]\n    .get(\"level1\", {})\n    .get(\"level2\", {})\n    .get(\"level3\", \"default\")\n)\n```\n\n### Pattern: List Comprehension with Filtering\n\n```python\nitems = _input.all()\n\n# Filter and transform in one step\nresult = [\n    {\n        \"json\": {\n            \"id\": item[\"json\"][\"id\"],\n            \"name\": item[\"json\"][\"name\"].upper()\n        }\n    }\n    for item in items\n    if item[\"json\"].get(\"active\") and item[\"json\"].get(\"verified\")\n]\n\nreturn result\n```\n\n### Pattern: Dictionary Comprehension\n\n```python\nitems = _input.all()\n\n# Create lookup dictionary\nlookup = {\n    item[\"json\"][\"id\"]: item[\"json\"]\n    for item in items\n    if \"id\" in item[\"json\"]\n}\n\nreturn [{\"json\": lookup}]\n```\n\n---\n\n## Summary\n\n**Most Common Patterns**:\n1. `_input.all()` - Process multiple items, batch operations\n2. `_input.first()` - Single item, API responses\n3. `_input.item` - Each Item mode processing\n\n**Critical Rule**:\n- Webhook data is under `[\"body\"]` property\n\n**Best Practice**:\n- Use `.get()` for dictionary access to avoid KeyError\n- Always check for empty lists\n- Be explicit: Use `_input.first()[\"json\"][\"field\"]` instead of `_json[\"field\"]`\n\n**See Also**:\n- [SKILL.md](SKILL.md) - Overview and quick start\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - Python-specific patterns\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Avoid common mistakes\n",
        "skills/n8n-code-python/ERROR_PATTERNS.md": "# Error Patterns - Python Code Node\n\nCommon Python Code node errors and how to fix them.\n\n---\n\n## Error Overview\n\n**Top 5 Python Code Node Errors**:\n\n1. **ModuleNotFoundError** - Trying to import external libraries (Python-specific)\n2. **Empty Code / Missing Return** - No code or return statement\n3. **KeyError** - Dictionary access without .get()\n4. **IndexError** - List access without bounds checking\n5. **Incorrect Return Format** - Wrong data structure returned\n\nThese 5 errors cover the majority of Python Code node failures.\n\n---\n\n## Error #1: ModuleNotFoundError (MOST CRITICAL)\n\n**Frequency**: Very common in Python Code nodes\n\n**What it is**: Attempting to import external libraries that aren't available.\n\n### The Problem\n\n```python\n# âŒ WRONG: External libraries not available\nimport requests  # ModuleNotFoundError: No module named 'requests'\nimport pandas    # ModuleNotFoundError: No module named 'pandas'\nimport numpy     # ModuleNotFoundError: No module named 'numpy'\nimport bs4       # ModuleNotFoundError: No module named 'bs4'\nimport pymongo   # ModuleNotFoundError: No module named 'pymongo'\nimport psycopg2  # ModuleNotFoundError: No module named 'psycopg2'\n\n# This code will FAIL - these libraries are not installed!\nresponse = requests.get(\"https://api.example.com/data\")\n```\n\n### The Solution\n\n**Option 1: Use JavaScript Instead** (Recommended for 95% of cases)\n\n```javascript\n// âœ… JavaScript Code node with $helpers.httpRequest()\nconst response = await $helpers.httpRequest({\n  method: 'GET',\n  url: 'https://api.example.com/data'\n});\n\nreturn [{json: response}];\n```\n\n**Option 2: Use n8n HTTP Request Node**\n\n```python\n# âœ… Add HTTP Request node BEFORE Python Code node\n# Access the response in Python Code node\n\nresponse = _input.first()[\"json\"]\n\nreturn [{\n    \"json\": {\n        \"status\": response.get(\"status\"),\n        \"data\": response.get(\"body\"),\n        \"processed\": True\n    }\n}]\n```\n\n**Option 3: Use Standard Library Only**\n\n```python\n# âœ… Use urllib from standard library (limited functionality)\nfrom urllib.request import urlopen\nfrom urllib.parse import urlencode\nimport json\n\n# Simple GET request (no headers, no auth)\nurl = \"https://api.example.com/data\"\nwith urlopen(url) as response:\n    data = json.loads(response.read())\n\nreturn [{\"json\": data}]\n```\n\n### Common Library Replacements\n\n| Need | âŒ External Library | âœ… Alternative |\n|------|-------------------|----------------|\n| HTTP requests | `requests` | Use HTTP Request node or JavaScript |\n| Data analysis | `pandas` | Use Python list comprehensions |\n| Database | `psycopg2`, `pymongo` | Use n8n database nodes |\n| Web scraping | `beautifulsoup4` | Use HTML Extract node |\n| Excel | `openpyxl` | Use Spreadsheet File node |\n| Image processing | `pillow` | Use external API or node |\n\n### Available Standard Library Modules\n\n```python\n# âœ… THESE WORK - Standard library only\nimport json          # JSON parsing\nimport datetime      # Date/time operations\nimport re            # Regular expressions\nimport base64        # Base64 encoding\nimport hashlib       # Hashing (MD5, SHA256)\nimport urllib.parse  # URL parsing and encoding\nimport math          # Math functions\nimport random        # Random numbers\nimport statistics    # Statistical functions\nimport collections   # defaultdict, Counter, etc.\n```\n\n---\n\n## Error #2: Empty Code / Missing Return\n\n**Frequency**: Common across all Code nodes\n\n**What it is**: Code node has no code or no return statement.\n\n### The Problem\n\n```python\n# âŒ WRONG: Empty code\n# (nothing here)\n\n# âŒ WRONG: Code but no return\nitems = _input.all()\nprocessed = [item for item in items if item[\"json\"].get(\"active\")]\n# Forgot to return!\n\n# âŒ WRONG: Return in wrong scope\nif _input.all():\n    return [{\"json\": {\"result\": \"success\"}}]\n# Return is inside if block - may not execute!\n```\n\n### The Solution\n\n```python\n# âœ… CORRECT: Always return\nall_items = _input.all()\n\nif not all_items:\n    # Return empty array or error\n    return [{\"json\": {\"error\": \"No items\"}}]\n\n# Process items\nprocessed = [item for item in all_items if item[\"json\"].get(\"active\")]\n\n# Always return at the end\nreturn processed if processed else [{\"json\": {\"message\": \"No active items\"}}]\n```\n\n### Best Practice\n\n```python\n# âœ… GOOD: Return at end of function (unconditional)\ndef process_items():\n    items = _input.all()\n\n    if not items:\n        return [{\"json\": {\"error\": \"Empty input\"}}]\n\n    # Process\n    result = []\n    for item in items:\n        result.append({\"json\": item[\"json\"]})\n\n    return result\n\n# Call function and return result\nreturn process_items()\n```\n\n---\n\n## Error #3: KeyError\n\n**Frequency**: Very common in Python Code nodes\n\n**What it is**: Accessing dictionary key that doesn't exist.\n\n### The Problem\n\n```python\n# âŒ WRONG: Direct key access\nitem = _input.first()[\"json\"]\n\nname = item[\"name\"]        # KeyError if \"name\" doesn't exist!\nemail = item[\"email\"]      # KeyError if \"email\" doesn't exist!\nage = item[\"age\"]          # KeyError if \"age\" doesn't exist!\n\nreturn [{\n    \"json\": {\n        \"name\": name,\n        \"email\": email,\n        \"age\": age\n    }\n}]\n```\n\n### Error Message\n\n```\nKeyError: 'name'\n```\n\n### The Solution\n\n```python\n# âœ… CORRECT: Use .get() with defaults\nitem = _input.first()[\"json\"]\n\nname = item.get(\"name\", \"Unknown\")\nemail = item.get(\"email\", \"no-email@example.com\")\nage = item.get(\"age\", 0)\n\nreturn [{\n    \"json\": {\n        \"name\": name,\n        \"email\": email,\n        \"age\": age\n    }\n}]\n```\n\n### Nested Dictionary Access\n\n```python\n# âŒ WRONG: Nested key access\nwebhook = _input.first()[\"json\"]\nname = webhook[\"body\"][\"user\"][\"name\"]  # Multiple KeyErrors possible!\n\n# âœ… CORRECT: Safe nested access\nwebhook = _input.first()[\"json\"]\nbody = webhook.get(\"body\", {})\nuser = body.get(\"user\", {})\nname = user.get(\"name\", \"Unknown\")\n\n# âœ… ALSO CORRECT: Chained .get()\nname = (\n    webhook\n    .get(\"body\", {})\n    .get(\"user\", {})\n    .get(\"name\", \"Unknown\")\n)\n\nreturn [{\"json\": {\"name\": name}}]\n```\n\n### Webhook Body Access (Critical!)\n\n```python\n# âŒ WRONG: Forgetting webhook data is under \"body\"\nwebhook = _input.first()[\"json\"]\nname = webhook[\"name\"]        # KeyError!\nemail = webhook[\"email\"]      # KeyError!\n\n# âœ… CORRECT: Access via [\"body\"]\nwebhook = _input.first()[\"json\"]\nbody = webhook.get(\"body\", {})\nname = body.get(\"name\", \"Unknown\")\nemail = body.get(\"email\", \"no-email\")\n\nreturn [{\n    \"json\": {\n        \"name\": name,\n        \"email\": email\n    }\n}]\n```\n\n---\n\n## Error #4: IndexError\n\n**Frequency**: Common when processing arrays/lists\n\n**What it is**: Accessing list index that doesn't exist.\n\n### The Problem\n\n```python\n# âŒ WRONG: Assuming items exist\nall_items = _input.all()\nfirst_item = all_items[0]        # IndexError if list is empty!\nsecond_item = all_items[1]       # IndexError if only 1 item!\n\nreturn [{\n    \"json\": {\n        \"first\": first_item[\"json\"],\n        \"second\": second_item[\"json\"]\n    }\n}]\n```\n\n### Error Message\n\n```\nIndexError: list index out of range\n```\n\n### The Solution\n\n```python\n# âœ… CORRECT: Check length first\nall_items = _input.all()\n\nif len(all_items) >= 2:\n    first_item = all_items[0][\"json\"]\n    second_item = all_items[1][\"json\"]\n\n    return [{\n        \"json\": {\n            \"first\": first_item,\n            \"second\": second_item\n        }\n    }]\nelse:\n    return [{\n        \"json\": {\n            \"error\": f\"Expected 2+ items, got {len(all_items)}\"\n        }\n    }]\n```\n\n### Safe First Item Access\n\n```python\n# âœ… CORRECT: Use _input.first() instead of [0]\n# This is safer than manual indexing\nfirst_item = _input.first()[\"json\"]\n\nreturn [{\"json\": first_item}]\n\n# âœ… ALSO CORRECT: Check before accessing\nall_items = _input.all()\nif all_items:\n    first_item = all_items[0][\"json\"]\nelse:\n    first_item = {}\n\nreturn [{\"json\": first_item}]\n```\n\n### Slice Instead of Index\n\n```python\n# âœ… CORRECT: Use slicing (never raises IndexError)\nall_items = _input.all()\n\n# Get first 5 items (won't fail if fewer than 5)\nfirst_five = all_items[:5]\n\n# Get items after first (won't fail if empty)\nrest = all_items[1:]\n\nreturn [{\"json\": item[\"json\"]} for item in first_five]\n```\n\n---\n\n## Error #5: Incorrect Return Format\n\n**Frequency**: Common for new users\n\n**What it is**: Returning data in wrong format (n8n expects array of objects with \"json\" key).\n\n### The Problem\n\n```python\n# âŒ WRONG: Returning plain dictionary\nreturn {\"name\": \"Alice\", \"age\": 30}\n\n# âŒ WRONG: Returning array without \"json\" wrapper\nreturn [{\"name\": \"Alice\"}, {\"name\": \"Bob\"}]\n\n# âŒ WRONG: Returning None\nreturn None\n\n# âŒ WRONG: Returning string\nreturn \"success\"\n\n# âŒ WRONG: Returning single item (not array)\nreturn {\"json\": {\"name\": \"Alice\"}}\n```\n\n### The Solution\n\n```python\n# âœ… CORRECT: Array of objects with \"json\" key\nreturn [{\"json\": {\"name\": \"Alice\", \"age\": 30}}]\n\n# âœ… CORRECT: Multiple items\nreturn [\n    {\"json\": {\"name\": \"Alice\"}},\n    {\"json\": {\"name\": \"Bob\"}}\n]\n\n# âœ… CORRECT: Transform items\nall_items = _input.all()\nreturn [\n    {\"json\": item[\"json\"]}\n    for item in all_items\n]\n\n# âœ… CORRECT: Empty array (valid)\nreturn []\n\n# âœ… CORRECT: Single item still needs array wrapper\nreturn [{\"json\": {\"result\": \"success\"}}]\n```\n\n### Common Scenarios\n\n**Scenario 1: Aggregation (Return Single Result)**\n\n```python\n# Calculate total\nall_items = _input.all()\ntotal = sum(item[\"json\"].get(\"amount\", 0) for item in all_items)\n\n# âœ… CORRECT: Wrap in array with \"json\"\nreturn [{\n    \"json\": {\n        \"total\": total,\n        \"count\": len(all_items)\n    }\n}]\n```\n\n**Scenario 2: Filtering (Return Multiple Results)**\n\n```python\n# Filter active items\nall_items = _input.all()\nactive = [item for item in all_items if item[\"json\"].get(\"active\")]\n\n# âœ… CORRECT: Already in correct format\nreturn active\n\n# âœ… ALSO CORRECT: If transforming\nreturn [\n    {\"json\": {**item[\"json\"], \"filtered\": True}}\n    for item in active\n]\n```\n\n**Scenario 3: No Results**\n\n```python\n# âœ… CORRECT: Return empty array\nreturn []\n\n# âœ… ALSO CORRECT: Return error message\nreturn [{\"json\": {\"error\": \"No results found\"}}]\n```\n\n---\n\n## Bonus Error: AttributeError\n\n**What it is**: Using _input.item in wrong mode.\n\n### The Problem\n\n```python\n# âŒ WRONG: Using _input.item in \"All Items\" mode\ncurrent = _input.item        # None in \"All Items\" mode\ndata = current[\"json\"]       # AttributeError: 'NoneType' object has no attribute '__getitem__'\n```\n\n### The Solution\n\n```python\n# âœ… CORRECT: Check mode or use appropriate method\n# In \"All Items\" mode, use:\nall_items = _input.all()\n\n# In \"Each Item\" mode, use:\ncurrent_item = _input.item\n\n# âœ… SAFE: Check if item exists\ncurrent = _input.item\nif current:\n    data = current[\"json\"]\n    return [{\"json\": data}]\nelse:\n    # Running in \"All Items\" mode\n    return _input.all()\n```\n\n---\n\n## Error Prevention Checklist\n\nBefore running your Python Code node, verify:\n\n- [ ] **No external imports**: Only standard library (json, datetime, re, etc.)\n- [ ] **Code returns data**: Every code path ends with `return`\n- [ ] **Correct format**: Returns `[{\"json\": {...}}]` (array with \"json\" key)\n- [ ] **Safe dictionary access**: Uses `.get()` instead of `[]` for dictionaries\n- [ ] **Safe list access**: Checks length before indexing or uses slicing\n- [ ] **Webhook body access**: Accesses webhook data via `_json[\"body\"]`\n- [ ] **No None returns**: Returns empty array `[]` instead of `None`\n- [ ] **Mode awareness**: Uses `_input.all()`, `_input.first()`, or `_input.item` appropriately\n\n---\n\n## Quick Fix Reference\n\n| Error | Quick Fix |\n|-------|-----------|\n| `ModuleNotFoundError` | Use JavaScript or HTTP Request node instead |\n| `KeyError: 'field'` | Change `data[\"field\"]` to `data.get(\"field\", default)` |\n| `IndexError: list index out of range` | Check `if len(items) > 0:` before `items[0]` |\n| Empty output | Add `return [{\"json\": {...}}]` at end |\n| `AttributeError: 'NoneType'` | Check mode setting or verify `_input.item` exists |\n| Wrong format error | Wrap result: `return [{\"json\": result}]` |\n| Webhook KeyError | Access via `_json.get(\"body\", {})` |\n\n---\n\n## Testing Your Code\n\n### Test Pattern 1: Handle Empty Input\n\n```python\n# âœ… Always test with empty input\nall_items = _input.all()\n\nif not all_items:\n    return [{\"json\": {\"message\": \"No items to process\"}}]\n\n# Continue with processing\n# ...\n```\n\n### Test Pattern 2: Test with Missing Fields\n\n```python\n# âœ… Use .get() with defaults\nitem = _input.first()[\"json\"]\n\n# These won't fail even if fields missing\nname = item.get(\"name\", \"Unknown\")\nemail = item.get(\"email\", \"no-email\")\nage = item.get(\"age\", 0)\n\nreturn [{\"json\": {\"name\": name, \"email\": email, \"age\": age}}]\n```\n\n### Test Pattern 3: Test Both Modes\n\n```python\n# âœ… Code that works in both modes\ntry:\n    # Try \"Each Item\" mode first\n    current = _input.item\n    if current:\n        return [{\"json\": current[\"json\"]}]\nexcept:\n    pass\n\n# Fall back to \"All Items\" mode\nall_items = _input.all()\nreturn all_items if all_items else [{\"json\": {\"message\": \"No data\"}}]\n```\n\n---\n\n## Summary\n\n**Top 5 Errors to Avoid**:\n1. **ModuleNotFoundError** - Use JavaScript or n8n nodes instead\n2. **Missing return** - Always end with `return [{\"json\": {...}}]`\n3. **KeyError** - Use `.get()` for dictionary access\n4. **IndexError** - Check length before indexing\n5. **Wrong format** - Return `[{\"json\": {...}}]`, not plain objects\n\n**Golden Rules**:\n- NO external libraries (use JavaScript instead)\n- ALWAYS use `.get()` for dictionaries\n- ALWAYS return `[{\"json\": {...}}]` format\n- CHECK lengths before list access\n- ACCESS webhook data via `[\"body\"]`\n\n**Remember**:\n- JavaScript is recommended for 95% of use cases\n- Python has limitations (no requests, pandas, numpy)\n- Use n8n nodes for complex operations\n\n**See Also**:\n- [SKILL.md](SKILL.md) - Python Code overview\n- [DATA_ACCESS.md](DATA_ACCESS.md) - Data access patterns\n- [STANDARD_LIBRARY.md](STANDARD_LIBRARY.md) - Available modules\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - Production patterns\n",
        "skills/n8n-code-python/README.md": "# n8n Code Python Skill\n\nExpert guidance for writing Python code in n8n Code nodes.\n\n---\n\n## âš ï¸ Important: JavaScript First\n\n**Use JavaScript for 95% of use cases.**\n\nPython in n8n has **NO external libraries** (no requests, pandas, numpy).\n\n**When to use Python**:\n- You have complex Python-specific logic\n- You need Python's standard library features\n- You're more comfortable with Python than JavaScript\n\n**When to use JavaScript** (recommended):\n- HTTP requests ($helpers.httpRequest available)\n- Date/time operations (Luxon library included)\n- Most data transformations\n- When in doubt\n\n---\n\n## What This Skill Teaches\n\n### Core Concepts\n\n1. **Critical Limitation**: No external libraries\n2. **Data Access**: `_input.all()`, `_input.first()`, `_input.item`\n3. **Webhook Gotcha**: Data is under `_json[\"body\"]`\n4. **Return Format**: Must return `[{\"json\": {...}}]`\n5. **Standard Library**: json, datetime, re, base64, hashlib, etc.\n\n### Top 5 Error Prevention\n\nThis skill emphasizes **error prevention**:\n\n1. **ModuleNotFoundError** (trying to import external libraries)\n2. **Empty code / missing return**\n3. **KeyError** (dictionary access without .get())\n4. **IndexError** (list access without bounds checking)\n5. **Incorrect return format**\n\nThese 5 errors are the most common in Python Code nodes.\n\n---\n\n## Skill Activation\n\nThis skill activates when you:\n- Write Python in Code nodes\n- Ask about Python limitations\n- Need to know available standard library\n- Troubleshoot Python Code node errors\n- Work with Python data structures\n\n**Example queries**:\n- \"Can I use pandas in Python Code node?\"\n- \"How do I access webhook data in Python?\"\n- \"What Python libraries are available?\"\n- \"Write Python code to process JSON\"\n- \"Why is requests module not found?\"\n\n---\n\n## File Structure\n\n### SKILL.md (719 lines)\n**Quick start** and overview\n- When to use Python vs JavaScript\n- Critical limitation (no external libraries)\n- Mode selection (All Items vs Each Item)\n- Data access overview\n- Return format requirements\n- Standard library overview\n\n### DATA_ACCESS.md (703 lines)\n**Complete data access patterns**\n- `_input.all()` - Process all items\n- `_input.first()` - Get first item\n- `_input.item` - Current item (Each Item mode)\n- `_node[\"Name\"]` - Reference other nodes\n- Webhook body structure (critical gotcha!)\n- Pattern selection guide\n\n### STANDARD_LIBRARY.md (850 lines)\n**Available Python modules**\n- json - JSON parsing\n- datetime - Date/time operations\n- re - Regular expressions\n- base64 - Encoding/decoding\n- hashlib - Hashing\n- urllib.parse - URL operations\n- math, random, statistics\n- What's NOT available (requests, pandas, numpy)\n- Workarounds for missing libraries\n\n### COMMON_PATTERNS.md (895 lines)\n**10 production-tested patterns**\n1. Multi-source data aggregation\n2. Regex-based filtering\n3. Markdown to structured data\n4. JSON object comparison\n5. CRM data transformation\n6. Release notes processing\n7. Array transformation\n8. Dictionary lookup\n9. Top N filtering\n10. String aggregation\n\n### ERROR_PATTERNS.md (730 lines)\n**Top 5 errors with solutions**\n1. ModuleNotFoundError (external libraries)\n2. Empty code / missing return\n3. KeyError (dictionary access)\n4. IndexError (list access)\n5. Incorrect return format\n- Error prevention checklist\n- Quick fix reference\n- Testing patterns\n\n---\n\n## Integration with Other Skills\n\nThis skill works with:\n\n### n8n Expression Syntax\n- Python uses code syntax, not {{}} expressions\n- Data access patterns differ ($ vs _)\n\n### n8n MCP Tools Expert\n- Use MCP tools to validate Code node configurations\n- Check node setup with `get_node_essentials`\n\n### n8n Workflow Patterns\n- Code nodes fit into larger workflow patterns\n- Often used after HTTP Request or Webhook nodes\n\n### n8n Code JavaScript\n- Compare Python vs JavaScript approaches\n- Understand when to use which language\n- JavaScript recommended for 95% of cases\n\n### n8n Node Configuration\n- Configure Code node mode (All Items vs Each Item)\n- Set up proper connections\n\n---\n\n## Success Metrics\n\nAfter using this skill, you should be able to:\n\n- [ ] **Know the limitation**: Python has NO external libraries\n- [ ] **Choose language**: JavaScript for 95% of cases, Python when needed\n- [ ] **Access data**: Use `_input.all()`, `_input.first()`, `_input.item`\n- [ ] **Handle webhooks**: Access data via `_json[\"body\"]`\n- [ ] **Return properly**: Always return `[{\"json\": {...}}]`\n- [ ] **Avoid KeyError**: Use `.get()` for dictionary access\n- [ ] **Use standard library**: Know what's available (json, datetime, re, etc.)\n- [ ] **Prevent errors**: Avoid top 5 common errors\n- [ ] **Choose alternatives**: Use n8n nodes when libraries needed\n- [ ] **Write production code**: Use proven patterns\n\n---\n\n## Quick Reference\n\n### Data Access\n```python\nall_items = _input.all()\nfirst_item = _input.first()\ncurrent_item = _input.item  # Each Item mode only\nother_node = _node[\"NodeName\"]\n```\n\n### Webhook Data\n```python\nwebhook = _input.first()[\"json\"]\nbody = webhook.get(\"body\", {})\nname = body.get(\"name\")\n```\n\n### Safe Dictionary Access\n```python\n# âœ… Use .get() with defaults\nvalue = data.get(\"field\", \"default\")\n\n# âŒ Risky - may raise KeyError\nvalue = data[\"field\"]\n```\n\n### Return Format\n```python\n# âœ… Correct format\nreturn [{\"json\": {\"result\": \"success\"}}]\n\n# âŒ Wrong - plain dict\nreturn {\"result\": \"success\"}\n```\n\n### Standard Library\n```python\n# âœ… Available\nimport json\nimport datetime\nimport re\nimport base64\nimport hashlib\n\n# âŒ NOT available\nimport requests  # ModuleNotFoundError!\nimport pandas    # ModuleNotFoundError!\nimport numpy     # ModuleNotFoundError!\n```\n\n---\n\n## Common Use Cases\n\n### Use Case 1: Process Webhook Data\n```python\nwebhook = _input.first()[\"json\"]\nbody = webhook.get(\"body\", {})\n\nreturn [{\n    \"json\": {\n        \"name\": body.get(\"name\"),\n        \"email\": body.get(\"email\"),\n        \"processed\": True\n    }\n}]\n```\n\n### Use Case 2: Filter and Transform\n```python\nall_items = _input.all()\n\nactive = [\n    {\"json\": {**item[\"json\"], \"filtered\": True}}\n    for item in all_items\n    if item[\"json\"].get(\"status\") == \"active\"\n]\n\nreturn active\n```\n\n### Use Case 3: Aggregate Statistics\n```python\nimport statistics\n\nall_items = _input.all()\namounts = [item[\"json\"].get(\"amount\", 0) for item in all_items]\n\nreturn [{\n    \"json\": {\n        \"total\": sum(amounts),\n        \"average\": statistics.mean(amounts) if amounts else 0,\n        \"count\": len(amounts)\n    }\n}]\n```\n\n### Use Case 4: Parse JSON String\n```python\nimport json\n\ndata = _input.first()[\"json\"][\"body\"]\njson_string = data.get(\"payload\", \"{}\")\n\ntry:\n    parsed = json.loads(json_string)\n    return [{\"json\": parsed}]\nexcept json.JSONDecodeError:\n    return [{\"json\": {\"error\": \"Invalid JSON\"}}]\n```\n\n---\n\n## Limitations and Workarounds\n\n### Limitation 1: No HTTP Requests Library\n**Problem**: No `requests` library\n**Workaround**: Use HTTP Request node or JavaScript\n\n### Limitation 2: No Data Analysis Library\n**Problem**: No `pandas` or `numpy`\n**Workaround**: Use list comprehensions and standard library\n\n### Limitation 3: No Database Drivers\n**Problem**: No `psycopg2`, `pymongo`, etc.\n**Workaround**: Use n8n database nodes (Postgres, MySQL, MongoDB)\n\n### Limitation 4: No Web Scraping\n**Problem**: No `beautifulsoup4` or `selenium`\n**Workaround**: Use HTML Extract node\n\n---\n\n## Best Practices\n\n1. **Use JavaScript for most cases** (95% recommendation)\n2. **Use .get() for dictionaries** (avoid KeyError)\n3. **Check lengths before indexing** (avoid IndexError)\n4. **Always return proper format**: `[{\"json\": {...}}]`\n5. **Access webhook data via [\"body\"]**\n6. **Use standard library only** (no external imports)\n7. **Handle empty input** (check `if items:`)\n8. **Test both modes** (All Items and Each Item)\n\n---\n\n## When Python is the Right Choice\n\nUse Python when:\n- Complex text processing (re module)\n- Mathematical calculations (math, statistics)\n- Date/time manipulation (datetime)\n- Cryptographic operations (hashlib)\n- You have existing Python logic to reuse\n- Team is more comfortable with Python\n\nUse JavaScript instead when:\n- Making HTTP requests\n- Working with dates (Luxon included)\n- Most data transformations\n- When in doubt\n\n---\n\n## Learning Path\n\n**Beginner**:\n1. Read SKILL.md - Understand the limitation\n2. Try DATA_ACCESS.md examples - Learn `_input` patterns\n3. Practice safe dictionary access with `.get()`\n\n**Intermediate**:\n4. Study STANDARD_LIBRARY.md - Know what's available\n5. Try COMMON_PATTERNS.md examples - Use proven patterns\n6. Learn ERROR_PATTERNS.md - Avoid common mistakes\n\n**Advanced**:\n7. Combine multiple patterns\n8. Use standard library effectively\n9. Know when to switch to JavaScript\n10. Write production-ready code\n\n---\n\n## Support\n\n**Questions?**\n- Check ERROR_PATTERNS.md for common issues\n- Review COMMON_PATTERNS.md for examples\n- Consider using JavaScript instead\n\n**Related Skills**:\n- n8n Code JavaScript - Alternative (recommended for 95% of cases)\n- n8n Expression Syntax - For {{}} expressions in other nodes\n- n8n Workflow Patterns - Bigger picture workflow design\n\n---\n\n## Version\n\n**Version**: 1.0.0\n**Status**: Production Ready\n**Compatibility**: n8n Code node (Python mode)\n\n---\n\n## Credits\n\nPart of the n8n-skills project.\n\n**Conceived by Romuald CzÅ‚onkowski**\n- Website: [www.aiadvisors.pl/en](https://www.aiadvisors.pl/en)\n- Part of [n8n-mcp project](https://github.com/czlonkowski/n8n-mcp)\n\n---\n\n**Remember**: JavaScript is recommended for 95% of use cases. Use Python only when you specifically need Python's standard library features.\n",
        "skills/n8n-code-python/SKILL.md": "---\nname: n8n-code-python\ndescription: Write Python code in n8n Code nodes. Use when writing Python in n8n, using _input/_json/_node syntax, working with standard library, or need to understand Python limitations in n8n Code nodes.\n---\n\n# Python Code Node (Beta)\n\nExpert guidance for writing Python code in n8n Code nodes.\n\n---\n\n## âš ï¸ Important: JavaScript First\n\n**Recommendation**: Use **JavaScript for 95% of use cases**. Only use Python when:\n- You need specific Python standard library functions\n- You're significantly more comfortable with Python syntax\n- You're doing data transformations better suited to Python\n\n**Why JavaScript is preferred:**\n- Full n8n helper functions ($helpers.httpRequest, etc.)\n- Luxon DateTime library for advanced date/time operations\n- No external library limitations\n- Better n8n documentation and community support\n\n---\n\n## Quick Start\n\n```python\n# Basic template for Python Code nodes\nitems = _input.all()\n\n# Process data\nprocessed = []\nfor item in items:\n    processed.append({\n        \"json\": {\n            **item[\"json\"],\n            \"processed\": True,\n            \"timestamp\": datetime.now().isoformat()\n        }\n    })\n\nreturn processed\n```\n\n### Essential Rules\n\n1. **Consider JavaScript first** - Use Python only when necessary\n2. **Access data**: `_input.all()`, `_input.first()`, or `_input.item`\n3. **CRITICAL**: Must return `[{\"json\": {...}}]` format\n4. **CRITICAL**: Webhook data is under `_json[\"body\"]` (not `_json` directly)\n5. **CRITICAL LIMITATION**: **No external libraries** (no requests, pandas, numpy)\n6. **Standard library only**: json, datetime, re, base64, hashlib, urllib.parse, math, random, statistics\n\n---\n\n## Mode Selection Guide\n\nSame as JavaScript - choose based on your use case:\n\n### Run Once for All Items (Recommended - Default)\n\n**Use this mode for:** 95% of use cases\n\n- **How it works**: Code executes **once** regardless of input count\n- **Data access**: `_input.all()` or `_items` array (Native mode)\n- **Best for**: Aggregation, filtering, batch processing, transformations\n- **Performance**: Faster for multiple items (single execution)\n\n```python\n# Example: Calculate total from all items\nall_items = _input.all()\ntotal = sum(item[\"json\"].get(\"amount\", 0) for item in all_items)\n\nreturn [{\n    \"json\": {\n        \"total\": total,\n        \"count\": len(all_items),\n        \"average\": total / len(all_items) if all_items else 0\n    }\n}]\n```\n\n### Run Once for Each Item\n\n**Use this mode for:** Specialized cases only\n\n- **How it works**: Code executes **separately** for each input item\n- **Data access**: `_input.item` or `_item` (Native mode)\n- **Best for**: Item-specific logic, independent operations, per-item validation\n- **Performance**: Slower for large datasets (multiple executions)\n\n```python\n# Example: Add processing timestamp to each item\nitem = _input.item\n\nreturn [{\n    \"json\": {\n        **item[\"json\"],\n        \"processed\": True,\n        \"processed_at\": datetime.now().isoformat()\n    }\n}]\n```\n\n---\n\n## Python Modes: Beta vs Native\n\nn8n offers two Python execution modes:\n\n### Python (Beta) - Recommended\n- **Use**: `_input`, `_json`, `_node` helper syntax\n- **Best for**: Most Python use cases\n- **Helpers available**: `_now`, `_today`, `_jmespath()`\n- **Import**: `from datetime import datetime`\n\n```python\n# Python (Beta) example\nitems = _input.all()\nnow = _now  # Built-in datetime object\n\nreturn [{\n    \"json\": {\n        \"count\": len(items),\n        \"timestamp\": now.isoformat()\n    }\n}]\n```\n\n### Python (Native) (Beta)\n- **Use**: `_items`, `_item` variables only\n- **No helpers**: No `_input`, `_now`, etc.\n- **More limited**: Standard Python only\n- **Use when**: Need pure Python without n8n helpers\n\n```python\n# Python (Native) example\nprocessed = []\n\nfor item in _items:\n    processed.append({\n        \"json\": {\n            \"id\": item[\"json\"].get(\"id\"),\n            \"processed\": True\n        }\n    })\n\nreturn processed\n```\n\n**Recommendation**: Use **Python (Beta)** for better n8n integration.\n\n---\n\n## Data Access Patterns\n\n### Pattern 1: _input.all() - Most Common\n\n**Use when**: Processing arrays, batch operations, aggregations\n\n```python\n# Get all items from previous node\nall_items = _input.all()\n\n# Filter, transform as needed\nvalid = [item for item in all_items if item[\"json\"].get(\"status\") == \"active\"]\n\nprocessed = []\nfor item in valid:\n    processed.append({\n        \"json\": {\n            \"id\": item[\"json\"][\"id\"],\n            \"name\": item[\"json\"][\"name\"]\n        }\n    })\n\nreturn processed\n```\n\n### Pattern 2: _input.first() - Very Common\n\n**Use when**: Working with single objects, API responses\n\n```python\n# Get first item only\nfirst_item = _input.first()\ndata = first_item[\"json\"]\n\nreturn [{\n    \"json\": {\n        \"result\": process_data(data),\n        \"processed_at\": datetime.now().isoformat()\n    }\n}]\n```\n\n### Pattern 3: _input.item - Each Item Mode Only\n\n**Use when**: In \"Run Once for Each Item\" mode\n\n```python\n# Current item in loop (Each Item mode only)\ncurrent_item = _input.item\n\nreturn [{\n    \"json\": {\n        **current_item[\"json\"],\n        \"item_processed\": True\n    }\n}]\n```\n\n### Pattern 4: _node - Reference Other Nodes\n\n**Use when**: Need data from specific nodes in workflow\n\n```python\n# Get output from specific node\nwebhook_data = _node[\"Webhook\"][\"json\"]\nhttp_data = _node[\"HTTP Request\"][\"json\"]\n\nreturn [{\n    \"json\": {\n        \"combined\": {\n            \"webhook\": webhook_data,\n            \"api\": http_data\n        }\n    }\n}]\n```\n\n**See**: [DATA_ACCESS.md](DATA_ACCESS.md) for comprehensive guide\n\n---\n\n## Critical: Webhook Data Structure\n\n**MOST COMMON MISTAKE**: Webhook data is nested under `[\"body\"]`\n\n```python\n# âŒ WRONG - Will raise KeyError\nname = _json[\"name\"]\nemail = _json[\"email\"]\n\n# âœ… CORRECT - Webhook data is under [\"body\"]\nname = _json[\"body\"][\"name\"]\nemail = _json[\"body\"][\"email\"]\n\n# âœ… SAFER - Use .get() for safe access\nwebhook_data = _json.get(\"body\", {})\nname = webhook_data.get(\"name\")\n```\n\n**Why**: Webhook node wraps all request data under `body` property. This includes POST data, query parameters, and JSON payloads.\n\n**See**: [DATA_ACCESS.md](DATA_ACCESS.md) for full webhook structure details\n\n---\n\n## Return Format Requirements\n\n**CRITICAL RULE**: Always return list of dictionaries with `\"json\"` key\n\n### Correct Return Formats\n\n```python\n# âœ… Single result\nreturn [{\n    \"json\": {\n        \"field1\": value1,\n        \"field2\": value2\n    }\n}]\n\n# âœ… Multiple results\nreturn [\n    {\"json\": {\"id\": 1, \"data\": \"first\"}},\n    {\"json\": {\"id\": 2, \"data\": \"second\"}}\n]\n\n# âœ… List comprehension\ntransformed = [\n    {\"json\": {\"id\": item[\"json\"][\"id\"], \"processed\": True}}\n    for item in _input.all()\n    if item[\"json\"].get(\"valid\")\n]\nreturn transformed\n\n# âœ… Empty result (when no data to return)\nreturn []\n\n# âœ… Conditional return\nif should_process:\n    return [{\"json\": processed_data}]\nelse:\n    return []\n```\n\n### Incorrect Return Formats\n\n```python\n# âŒ WRONG: Dictionary without list wrapper\nreturn {\n    \"json\": {\"field\": value}\n}\n\n# âŒ WRONG: List without json wrapper\nreturn [{\"field\": value}]\n\n# âŒ WRONG: Plain string\nreturn \"processed\"\n\n# âŒ WRONG: Incomplete structure\nreturn [{\"data\": value}]  # Should be {\"json\": value}\n```\n\n**Why it matters**: Next nodes expect list format. Incorrect format causes workflow execution to fail.\n\n**See**: [ERROR_PATTERNS.md](ERROR_PATTERNS.md) #2 for detailed error solutions\n\n---\n\n## Critical Limitation: No External Libraries\n\n**MOST IMPORTANT PYTHON LIMITATION**: Cannot import external packages\n\n### What's NOT Available\n\n```python\n# âŒ NOT AVAILABLE - Will raise ModuleNotFoundError\nimport requests  # âŒ No\nimport pandas  # âŒ No\nimport numpy  # âŒ No\nimport scipy  # âŒ No\nfrom bs4 import BeautifulSoup  # âŒ No\nimport lxml  # âŒ No\n```\n\n### What IS Available (Standard Library)\n\n```python\n# âœ… AVAILABLE - Standard library only\nimport json  # âœ… JSON parsing\nimport datetime  # âœ… Date/time operations\nimport re  # âœ… Regular expressions\nimport base64  # âœ… Base64 encoding/decoding\nimport hashlib  # âœ… Hashing functions\nimport urllib.parse  # âœ… URL parsing\nimport math  # âœ… Math functions\nimport random  # âœ… Random numbers\nimport statistics  # âœ… Statistical functions\n```\n\n### Workarounds\n\n**Need HTTP requests?**\n- âœ… Use **HTTP Request node** before Code node\n- âœ… Or switch to **JavaScript** and use `$helpers.httpRequest()`\n\n**Need data analysis (pandas/numpy)?**\n- âœ… Use Python **statistics** module for basic stats\n- âœ… Or switch to **JavaScript** for most operations\n- âœ… Manual calculations with lists and dictionaries\n\n**Need web scraping (BeautifulSoup)?**\n- âœ… Use **HTTP Request node** + **HTML Extract node**\n- âœ… Or switch to **JavaScript** with regex/string methods\n\n**See**: [STANDARD_LIBRARY.md](STANDARD_LIBRARY.md) for complete reference\n\n---\n\n## Common Patterns Overview\n\nBased on production workflows, here are the most useful Python patterns:\n\n### 1. Data Transformation\nTransform all items with list comprehensions\n\n```python\nitems = _input.all()\n\nreturn [\n    {\n        \"json\": {\n            \"id\": item[\"json\"].get(\"id\"),\n            \"name\": item[\"json\"].get(\"name\", \"Unknown\").upper(),\n            \"processed\": True\n        }\n    }\n    for item in items\n]\n```\n\n### 2. Filtering & Aggregation\nSum, filter, count with built-in functions\n\n```python\nitems = _input.all()\ntotal = sum(item[\"json\"].get(\"amount\", 0) for item in items)\nvalid_items = [item for item in items if item[\"json\"].get(\"amount\", 0) > 0]\n\nreturn [{\n    \"json\": {\n        \"total\": total,\n        \"count\": len(valid_items)\n    }\n}]\n```\n\n### 3. String Processing with Regex\nExtract patterns from text\n\n```python\nimport re\n\nitems = _input.all()\nemail_pattern = r'\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b'\n\nall_emails = []\nfor item in items:\n    text = item[\"json\"].get(\"text\", \"\")\n    emails = re.findall(email_pattern, text)\n    all_emails.extend(emails)\n\n# Remove duplicates\nunique_emails = list(set(all_emails))\n\nreturn [{\n    \"json\": {\n        \"emails\": unique_emails,\n        \"count\": len(unique_emails)\n    }\n}]\n```\n\n### 4. Data Validation\nValidate and clean data\n\n```python\nitems = _input.all()\nvalidated = []\n\nfor item in items:\n    data = item[\"json\"]\n    errors = []\n\n    # Validate fields\n    if not data.get(\"email\"):\n        errors.append(\"Email required\")\n    if not data.get(\"name\"):\n        errors.append(\"Name required\")\n\n    validated.append({\n        \"json\": {\n            **data,\n            \"valid\": len(errors) == 0,\n            \"errors\": errors if errors else None\n        }\n    })\n\nreturn validated\n```\n\n### 5. Statistical Analysis\nCalculate statistics with statistics module\n\n```python\nfrom statistics import mean, median, stdev\n\nitems = _input.all()\nvalues = [item[\"json\"].get(\"value\", 0) for item in items if \"value\" in item[\"json\"]]\n\nif values:\n    return [{\n        \"json\": {\n            \"mean\": mean(values),\n            \"median\": median(values),\n            \"stdev\": stdev(values) if len(values) > 1 else 0,\n            \"min\": min(values),\n            \"max\": max(values),\n            \"count\": len(values)\n        }\n    }]\nelse:\n    return [{\"json\": {\"error\": \"No values found\"}}]\n```\n\n**See**: [COMMON_PATTERNS.md](COMMON_PATTERNS.md) for 10 detailed Python patterns\n\n---\n\n## Error Prevention - Top 5 Mistakes\n\n### #1: Importing External Libraries (Python-Specific!)\n\n```python\n# âŒ WRONG: Trying to import external library\nimport requests  # ModuleNotFoundError!\n\n# âœ… CORRECT: Use HTTP Request node or JavaScript\n# Add HTTP Request node before Code node\n# OR switch to JavaScript and use $helpers.httpRequest()\n```\n\n### #2: Empty Code or Missing Return\n\n```python\n# âŒ WRONG: No return statement\nitems = _input.all()\n# Processing...\n# Forgot to return!\n\n# âœ… CORRECT: Always return data\nitems = _input.all()\n# Processing...\nreturn [{\"json\": item[\"json\"]} for item in items]\n```\n\n### #3: Incorrect Return Format\n\n```python\n# âŒ WRONG: Returning dict instead of list\nreturn {\"json\": {\"result\": \"success\"}}\n\n# âœ… CORRECT: List wrapper required\nreturn [{\"json\": {\"result\": \"success\"}}]\n```\n\n### #4: KeyError on Dictionary Access\n\n```python\n# âŒ WRONG: Direct access crashes if missing\nname = _json[\"user\"][\"name\"]  # KeyError!\n\n# âœ… CORRECT: Use .get() for safe access\nname = _json.get(\"user\", {}).get(\"name\", \"Unknown\")\n```\n\n### #5: Webhook Body Nesting\n\n```python\n# âŒ WRONG: Direct access to webhook data\nemail = _json[\"email\"]  # KeyError!\n\n# âœ… CORRECT: Webhook data under [\"body\"]\nemail = _json[\"body\"][\"email\"]\n\n# âœ… BETTER: Safe access with .get()\nemail = _json.get(\"body\", {}).get(\"email\", \"no-email\")\n```\n\n**See**: [ERROR_PATTERNS.md](ERROR_PATTERNS.md) for comprehensive error guide\n\n---\n\n## Standard Library Reference\n\n### Most Useful Modules\n\n```python\n# JSON operations\nimport json\ndata = json.loads(json_string)\njson_output = json.dumps({\"key\": \"value\"})\n\n# Date/time\nfrom datetime import datetime, timedelta\nnow = datetime.now()\ntomorrow = now + timedelta(days=1)\nformatted = now.strftime(\"%Y-%m-%d\")\n\n# Regular expressions\nimport re\nmatches = re.findall(r'\\d+', text)\ncleaned = re.sub(r'[^\\w\\s]', '', text)\n\n# Base64 encoding\nimport base64\nencoded = base64.b64encode(data).decode()\ndecoded = base64.b64decode(encoded)\n\n# Hashing\nimport hashlib\nhash_value = hashlib.sha256(text.encode()).hexdigest()\n\n# URL parsing\nimport urllib.parse\nparams = urllib.parse.urlencode({\"key\": \"value\"})\nparsed = urllib.parse.urlparse(url)\n\n# Statistics\nfrom statistics import mean, median, stdev\naverage = mean([1, 2, 3, 4, 5])\n```\n\n**See**: [STANDARD_LIBRARY.md](STANDARD_LIBRARY.md) for complete reference\n\n---\n\n## Best Practices\n\n### 1. Always Use .get() for Dictionary Access\n\n```python\n# âœ… SAFE: Won't crash if field missing\nvalue = item[\"json\"].get(\"field\", \"default\")\n\n# âŒ RISKY: Crashes if field doesn't exist\nvalue = item[\"json\"][\"field\"]\n```\n\n### 2. Handle None/Null Values Explicitly\n\n```python\n# âœ… GOOD: Default to 0 if None\namount = item[\"json\"].get(\"amount\") or 0\n\n# âœ… GOOD: Check for None explicitly\ntext = item[\"json\"].get(\"text\")\nif text is None:\n    text = \"\"\n```\n\n### 3. Use List Comprehensions for Filtering\n\n```python\n# âœ… PYTHONIC: List comprehension\nvalid = [item for item in items if item[\"json\"].get(\"active\")]\n\n# âŒ VERBOSE: Manual loop\nvalid = []\nfor item in items:\n    if item[\"json\"].get(\"active\"):\n        valid.append(item)\n```\n\n### 4. Return Consistent Structure\n\n```python\n# âœ… CONSISTENT: Always list with \"json\" key\nreturn [{\"json\": result}]  # Single result\nreturn results  # Multiple results (already formatted)\nreturn []  # No results\n```\n\n### 5. Debug with print() Statements\n\n```python\n# Debug statements appear in browser console (F12)\nitems = _input.all()\nprint(f\"Processing {len(items)} items\")\nprint(f\"First item: {items[0] if items else 'None'}\")\n```\n\n---\n\n## When to Use Python vs JavaScript\n\n### Use Python When:\n- âœ… You need `statistics` module for statistical operations\n- âœ… You're significantly more comfortable with Python syntax\n- âœ… Your logic maps well to list comprehensions\n- âœ… You need specific standard library functions\n\n### Use JavaScript When:\n- âœ… You need HTTP requests ($helpers.httpRequest())\n- âœ… You need advanced date/time (DateTime/Luxon)\n- âœ… You want better n8n integration\n- âœ… **For 95% of use cases** (recommended)\n\n### Consider Other Nodes When:\n- âŒ Simple field mapping â†’ Use **Set** node\n- âŒ Basic filtering â†’ Use **Filter** node\n- âŒ Simple conditionals â†’ Use **IF** or **Switch** node\n- âŒ HTTP requests only â†’ Use **HTTP Request** node\n\n---\n\n## Integration with Other Skills\n\n### Works With:\n\n**n8n Expression Syntax**:\n- Expressions use `{{ }}` syntax in other nodes\n- Code nodes use Python directly (no `{{ }}`)\n- When to use expressions vs code\n\n**n8n MCP Tools Expert**:\n- How to find Code node: `search_nodes({query: \"code\"})`\n- Get configuration help: `get_node_essentials(\"nodes-base.code\")`\n- Validate code: `validate_node_operation()`\n\n**n8n Node Configuration**:\n- Mode selection (All Items vs Each Item)\n- Language selection (Python vs JavaScript)\n- Understanding property dependencies\n\n**n8n Workflow Patterns**:\n- Code nodes in transformation step\n- When to use Python vs JavaScript in patterns\n\n**n8n Validation Expert**:\n- Validate Code node configuration\n- Handle validation errors\n- Auto-fix common issues\n\n**n8n Code JavaScript**:\n- When to use JavaScript instead\n- Comparison of JavaScript vs Python features\n- Migration from Python to JavaScript\n\n---\n\n## Quick Reference Checklist\n\nBefore deploying Python Code nodes, verify:\n\n- [ ] **Considered JavaScript first** - Using Python only when necessary\n- [ ] **Code is not empty** - Must have meaningful logic\n- [ ] **Return statement exists** - Must return list of dictionaries\n- [ ] **Proper return format** - Each item: `{\"json\": {...}}`\n- [ ] **Data access correct** - Using `_input.all()`, `_input.first()`, or `_input.item`\n- [ ] **No external imports** - Only standard library (json, datetime, re, etc.)\n- [ ] **Safe dictionary access** - Using `.get()` to avoid KeyError\n- [ ] **Webhook data** - Access via `[\"body\"]` if from webhook\n- [ ] **Mode selection** - \"All Items\" for most cases\n- [ ] **Output consistent** - All code paths return same structure\n\n---\n\n## Additional Resources\n\n### Related Files\n- [DATA_ACCESS.md](DATA_ACCESS.md) - Comprehensive Python data access patterns\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - 10 Python patterns for n8n\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Top 5 errors and solutions\n- [STANDARD_LIBRARY.md](STANDARD_LIBRARY.md) - Complete standard library reference\n\n### n8n Documentation\n- Code Node Guide: https://docs.n8n.io/code/code-node/\n- Python in n8n: https://docs.n8n.io/code/builtin/python-modules/\n\n---\n\n**Ready to write Python in n8n Code nodes - but consider JavaScript first!** Use Python for specific needs, reference the error patterns guide to avoid common mistakes, and leverage the standard library effectively.\n",
        "skills/n8n-code-python/STANDARD_LIBRARY.md": "# Standard Library Reference - Python Code Node\n\nComplete guide to available Python standard library modules in n8n Code nodes.\n\n---\n\n## âš ï¸ Critical Limitation\n\n**NO EXTERNAL LIBRARIES AVAILABLE**\n\nPython Code nodes in n8n have **ONLY** the Python standard library. No pip packages.\n\n```python\n# âŒ NOT AVAILABLE - Will cause ModuleNotFoundError\nimport requests      # No HTTP library!\nimport pandas        # No data analysis!\nimport numpy         # No numerical computing!\nimport bs4          # No web scraping!\nimport selenium     # No browser automation!\nimport psycopg2     # No database drivers!\nimport pymongo      # No MongoDB!\nimport sqlalchemy   # No ORMs!\n\n# âœ… AVAILABLE - Standard library only\nimport json\nimport datetime\nimport re\nimport base64\nimport hashlib\nimport urllib.parse\nimport urllib.request\nimport math\nimport random\nimport statistics\n```\n\n**Recommendation**: Use **JavaScript** for 95% of use cases. JavaScript has more capabilities in n8n.\n\n---\n\n## Available Modules\n\n### Priority 1: Most Useful (Use These)\n\n1. **json** - JSON parsing and generation\n2. **datetime** - Date and time operations\n3. **re** - Regular expressions\n4. **base64** - Base64 encoding/decoding\n5. **hashlib** - Hashing (MD5, SHA256, etc.)\n6. **urllib.parse** - URL parsing and encoding\n\n### Priority 2: Moderately Useful\n\n7. **math** - Mathematical functions\n8. **random** - Random number generation\n9. **statistics** - Statistical functions\n10. **collections** - Specialized data structures\n\n### Priority 3: Occasionally Useful\n\n11. **itertools** - Iterator tools\n12. **functools** - Higher-order functions\n13. **operator** - Standard operators as functions\n14. **string** - String constants and templates\n15. **textwrap** - Text wrapping utilities\n\n---\n\n## Module 1: json - JSON Operations\n\n**Most common module** - Parse and generate JSON data.\n\n### Parse JSON String\n\n```python\nimport json\n\n# Parse JSON string to Python dict\njson_string = '{\"name\": \"Alice\", \"age\": 30}'\ndata = json.loads(json_string)\n\nreturn [{\n    \"json\": {\n        \"name\": data[\"name\"],\n        \"age\": data[\"age\"],\n        \"parsed\": True\n    }\n}]\n```\n\n### Generate JSON String\n\n```python\nimport json\n\n# Convert Python dict to JSON string\ndata = {\n    \"users\": [\n        {\"id\": 1, \"name\": \"Alice\"},\n        {\"id\": 2, \"name\": \"Bob\"}\n    ],\n    \"total\": 2\n}\n\njson_string = json.dumps(data, indent=2)\n\nreturn [{\n    \"json\": {\n        \"json_output\": json_string,\n        \"length\": len(json_string)\n    }\n}]\n```\n\n### Handle JSON Errors\n\n```python\nimport json\n\nwebhook_data = _input.first()[\"json\"][\"body\"]\njson_string = webhook_data.get(\"data\", \"\")\n\ntry:\n    parsed = json.loads(json_string)\n    status = \"valid\"\n    error = None\nexcept json.JSONDecodeError as e:\n    parsed = None\n    status = \"invalid\"\n    error = str(e)\n\nreturn [{\n    \"json\": {\n        \"status\": status,\n        \"data\": parsed,\n        \"error\": error\n    }\n}]\n```\n\n### Pretty Print JSON\n\n```python\nimport json\n\n# Format JSON with indentation\ndata = _input.first()[\"json\"]\n\npretty_json = json.dumps(data, indent=2, sort_keys=True)\n\nreturn [{\n    \"json\": {\n        \"formatted\": pretty_json\n    }\n}]\n```\n\n---\n\n## Module 2: datetime - Date and Time\n\n**Very common** - Date parsing, formatting, calculations.\n\n### Current Date and Time\n\n```python\nfrom datetime import datetime\n\nnow = datetime.now()\n\nreturn [{\n    \"json\": {\n        \"timestamp\": now.isoformat(),\n        \"date\": now.strftime(\"%Y-%m-%d\"),\n        \"time\": now.strftime(\"%H:%M:%S\"),\n        \"formatted\": now.strftime(\"%B %d, %Y at %I:%M %p\")\n    }\n}]\n```\n\n### Parse Date String\n\n```python\nfrom datetime import datetime\n\ndate_string = \"2025-01-15T14:30:00\"\ndt = datetime.fromisoformat(date_string)\n\nreturn [{\n    \"json\": {\n        \"year\": dt.year,\n        \"month\": dt.month,\n        \"day\": dt.day,\n        \"hour\": dt.hour,\n        \"weekday\": dt.strftime(\"%A\")\n    }\n}]\n```\n\n### Date Calculations\n\n```python\nfrom datetime import datetime, timedelta\n\nnow = datetime.now()\n\n# Calculate future/past dates\ntomorrow = now + timedelta(days=1)\nyesterday = now - timedelta(days=1)\nnext_week = now + timedelta(weeks=1)\none_hour_ago = now - timedelta(hours=1)\n\nreturn [{\n    \"json\": {\n        \"now\": now.isoformat(),\n        \"tomorrow\": tomorrow.isoformat(),\n        \"yesterday\": yesterday.isoformat(),\n        \"next_week\": next_week.isoformat(),\n        \"one_hour_ago\": one_hour_ago.isoformat()\n    }\n}]\n```\n\n### Compare Dates\n\n```python\nfrom datetime import datetime\n\ndate1 = datetime(2025, 1, 15)\ndate2 = datetime(2025, 1, 20)\n\n# Calculate difference\ndiff = date2 - date1\n\nreturn [{\n    \"json\": {\n        \"days_difference\": diff.days,\n        \"seconds_difference\": diff.total_seconds(),\n        \"date1_is_earlier\": date1 < date2,\n        \"date2_is_later\": date2 > date1\n    }\n}]\n```\n\n### Format Dates\n\n```python\nfrom datetime import datetime\n\ndt = datetime.now()\n\nreturn [{\n    \"json\": {\n        \"iso\": dt.isoformat(),\n        \"us_format\": dt.strftime(\"%m/%d/%Y\"),\n        \"eu_format\": dt.strftime(\"%d/%m/%Y\"),\n        \"long_format\": dt.strftime(\"%A, %B %d, %Y\"),\n        \"time_12h\": dt.strftime(\"%I:%M %p\"),\n        \"time_24h\": dt.strftime(\"%H:%M:%S\")\n    }\n}]\n```\n\n---\n\n## Module 3: re - Regular Expressions\n\n**Common** - Pattern matching, text extraction, validation.\n\n### Pattern Matching\n\n```python\nimport re\n\ntext = \"Email: alice@example.com, Phone: 555-1234\"\n\n# Find email\nemail_match = re.search(r'\\b[\\w.-]+@[\\w.-]+\\.\\w+\\b', text)\nemail = email_match.group(0) if email_match else None\n\n# Find phone\nphone_match = re.search(r'\\d{3}-\\d{4}', text)\nphone = phone_match.group(0) if phone_match else None\n\nreturn [{\n    \"json\": {\n        \"email\": email,\n        \"phone\": phone\n    }\n}]\n```\n\n### Extract All Matches\n\n```python\nimport re\n\ntext = \"Tags: #python #automation #workflow #n8n\"\n\n# Find all hashtags\nhashtags = re.findall(r'#(\\w+)', text)\n\nreturn [{\n    \"json\": {\n        \"tags\": hashtags,\n        \"count\": len(hashtags)\n    }\n}]\n```\n\n### Replace Patterns\n\n```python\nimport re\n\ntext = \"Price: $99.99, Discount: $10.00\"\n\n# Remove dollar signs\ncleaned = re.sub(r'\\$', '', text)\n\n# Replace multiple spaces with single space\nnormalized = re.sub(r'\\s+', ' ', cleaned)\n\nreturn [{\n    \"json\": {\n        \"original\": text,\n        \"cleaned\": cleaned,\n        \"normalized\": normalized\n    }\n}]\n```\n\n### Validate Format\n\n```python\nimport re\n\nemail = _input.first()[\"json\"][\"body\"].get(\"email\", \"\")\n\n# Email validation pattern\nemail_pattern = r'^[\\w.-]+@[\\w.-]+\\.\\w+$'\nis_valid = bool(re.match(email_pattern, email))\n\nreturn [{\n    \"json\": {\n        \"email\": email,\n        \"valid\": is_valid\n    }\n}]\n```\n\n### Split on Pattern\n\n```python\nimport re\n\ntext = \"apple,banana;orange|grape\"\n\n# Split on multiple delimiters\nitems = re.split(r'[,;|]', text)\n\n# Clean up whitespace\nitems = [item.strip() for item in items]\n\nreturn [{\n    \"json\": {\n        \"items\": items,\n        \"count\": len(items)\n    }\n}]\n```\n\n---\n\n## Module 4: base64 - Encoding/Decoding\n\n**Common** - Encode binary data, API authentication.\n\n### Encode String to Base64\n\n```python\nimport base64\n\ntext = \"Hello, World!\"\n\n# Encode to base64\nencoded_bytes = base64.b64encode(text.encode('utf-8'))\nencoded_string = encoded_bytes.decode('utf-8')\n\nreturn [{\n    \"json\": {\n        \"original\": text,\n        \"encoded\": encoded_string\n    }\n}]\n```\n\n### Decode Base64 to String\n\n```python\nimport base64\n\nencoded = \"SGVsbG8sIFdvcmxkIQ==\"\n\n# Decode from base64\ndecoded_bytes = base64.b64decode(encoded)\ndecoded_string = decoded_bytes.decode('utf-8')\n\nreturn [{\n    \"json\": {\n        \"encoded\": encoded,\n        \"decoded\": decoded_string\n    }\n}]\n```\n\n### Basic Auth Header\n\n```python\nimport base64\n\nusername = \"admin\"\npassword = \"secret123\"\n\n# Create Basic Auth header\ncredentials = f\"{username}:{password}\"\nencoded = base64.b64encode(credentials.encode('utf-8')).decode('utf-8')\nauth_header = f\"Basic {encoded}\"\n\nreturn [{\n    \"json\": {\n        \"authorization\": auth_header\n    }\n}]\n```\n\n---\n\n## Module 5: hashlib - Hashing\n\n**Common** - Generate checksums, hash passwords, create IDs.\n\n### MD5 Hash\n\n```python\nimport hashlib\n\ntext = \"Hello, World!\"\n\n# Generate MD5 hash\nmd5_hash = hashlib.md5(text.encode('utf-8')).hexdigest()\n\nreturn [{\n    \"json\": {\n        \"original\": text,\n        \"md5\": md5_hash\n    }\n}]\n```\n\n### SHA256 Hash\n\n```python\nimport hashlib\n\ndata = _input.first()[\"json\"][\"body\"]\ntext = data.get(\"password\", \"\")\n\n# Generate SHA256 hash (more secure than MD5)\nsha256_hash = hashlib.sha256(text.encode('utf-8')).hexdigest()\n\nreturn [{\n    \"json\": {\n        \"hashed\": sha256_hash\n    }\n}]\n```\n\n### Generate Unique ID\n\n```python\nimport hashlib\nfrom datetime import datetime\n\n# Create unique ID from multiple values\nunique_string = f\"{datetime.now().isoformat()}-{_json.get('user_id', 'unknown')}\"\nunique_id = hashlib.sha256(unique_string.encode('utf-8')).hexdigest()[:16]\n\nreturn [{\n    \"json\": {\n        \"id\": unique_id,\n        \"generated_at\": datetime.now().isoformat()\n    }\n}]\n```\n\n---\n\n## Module 6: urllib.parse - URL Operations\n\n**Common** - Parse URLs, encode parameters.\n\n### Parse URL\n\n```python\nfrom urllib.parse import urlparse\n\nurl = \"https://example.com/path?key=value&foo=bar#section\"\n\nparsed = urlparse(url)\n\nreturn [{\n    \"json\": {\n        \"scheme\": parsed.scheme,      # \"https\"\n        \"netloc\": parsed.netloc,      # \"example.com\"\n        \"path\": parsed.path,          # \"/path\"\n        \"query\": parsed.query,        # \"key=value&foo=bar\"\n        \"fragment\": parsed.fragment    # \"section\"\n    }\n}]\n```\n\n### URL Encode Parameters\n\n```python\nfrom urllib.parse import urlencode\n\nparams = {\n    \"name\": \"Alice Smith\",\n    \"email\": \"alice@example.com\",\n    \"message\": \"Hello, World!\"\n}\n\n# Encode parameters for URL\nencoded = urlencode(params)\n\nreturn [{\n    \"json\": {\n        \"query_string\": encoded,\n        \"full_url\": f\"https://api.example.com/submit?{encoded}\"\n    }\n}]\n```\n\n### Parse Query String\n\n```python\nfrom urllib.parse import parse_qs\n\nquery_string = \"name=Alice&age=30&tags=python&tags=n8n\"\n\n# Parse query string\nparams = parse_qs(query_string)\n\nreturn [{\n    \"json\": {\n        \"name\": params.get(\"name\", [\"\"])[0],\n        \"age\": int(params.get(\"age\", [\"0\"])[0]),\n        \"tags\": params.get(\"tags\", [])\n    }\n}]\n```\n\n### URL Encode/Decode Strings\n\n```python\nfrom urllib.parse import quote, unquote\n\ntext = \"Hello, World! ä½ å¥½\"\n\n# URL encode\nencoded = quote(text)\n\n# URL decode\ndecoded = unquote(encoded)\n\nreturn [{\n    \"json\": {\n        \"original\": text,\n        \"encoded\": encoded,\n        \"decoded\": decoded\n    }\n}]\n```\n\n---\n\n## Module 7: math - Mathematical Operations\n\n**Moderately useful** - Advanced math functions.\n\n### Basic Math Functions\n\n```python\nimport math\n\nnumber = 16.7\n\nreturn [{\n    \"json\": {\n        \"ceiling\": math.ceil(number),      # 17\n        \"floor\": math.floor(number),       # 16\n        \"rounded\": round(number),          # 17\n        \"square_root\": math.sqrt(16),      # 4.0\n        \"power\": math.pow(2, 3),          # 8.0\n        \"absolute\": math.fabs(-5.5)       # 5.5\n    }\n}]\n```\n\n### Trigonometry\n\n```python\nimport math\n\nangle_degrees = 45\nangle_radians = math.radians(angle_degrees)\n\nreturn [{\n    \"json\": {\n        \"sine\": math.sin(angle_radians),\n        \"cosine\": math.cos(angle_radians),\n        \"tangent\": math.tan(angle_radians),\n        \"pi\": math.pi,\n        \"e\": math.e\n    }\n}]\n```\n\n### Logarithms\n\n```python\nimport math\n\nnumber = 100\n\nreturn [{\n    \"json\": {\n        \"log10\": math.log10(number),     # 2.0\n        \"natural_log\": math.log(number), # 4.605...\n        \"log2\": math.log2(number)        # 6.644...\n    }\n}]\n```\n\n---\n\n## Module 8: random - Random Numbers\n\n**Moderately useful** - Generate random data, sampling.\n\n### Random Numbers\n\n```python\nimport random\n\nreturn [{\n    \"json\": {\n        \"random_float\": random.random(),           # 0.0 to 1.0\n        \"random_int\": random.randint(1, 100),      # 1 to 100\n        \"random_range\": random.randrange(0, 100, 5) # 0, 5, 10, ..., 95\n    }\n}]\n```\n\n### Random Choice\n\n```python\nimport random\n\ncolors = [\"red\", \"green\", \"blue\", \"yellow\"]\nusers = [{\"id\": 1, \"name\": \"Alice\"}, {\"id\": 2, \"name\": \"Bob\"}]\n\nreturn [{\n    \"json\": {\n        \"random_color\": random.choice(colors),\n        \"random_user\": random.choice(users)\n    }\n}]\n```\n\n### Shuffle List\n\n```python\nimport random\n\nitems = [1, 2, 3, 4, 5]\nshuffled = items.copy()\nrandom.shuffle(shuffled)\n\nreturn [{\n    \"json\": {\n        \"original\": items,\n        \"shuffled\": shuffled\n    }\n}]\n```\n\n### Random Sample\n\n```python\nimport random\n\nitems = list(range(1, 101))\n\n# Get 10 random items without replacement\nsample = random.sample(items, 10)\n\nreturn [{\n    \"json\": {\n        \"sample\": sample,\n        \"count\": len(sample)\n    }\n}]\n```\n\n---\n\n## Module 9: statistics - Statistical Functions\n\n**Moderately useful** - Calculate stats from data.\n\n### Basic Statistics\n\n```python\nimport statistics\n\nnumbers = [10, 20, 30, 40, 50, 60, 70, 80, 90, 100]\n\nreturn [{\n    \"json\": {\n        \"mean\": statistics.mean(numbers),           # 55.0\n        \"median\": statistics.median(numbers),       # 55.0\n        \"mode\": statistics.mode([1, 2, 2, 3]),     # 2\n        \"stdev\": statistics.stdev(numbers),        # 30.28...\n        \"variance\": statistics.variance(numbers)   # 916.67...\n    }\n}]\n```\n\n### Aggregate from Items\n\n```python\nimport statistics\n\nall_items = _input.all()\n\n# Extract amounts\namounts = [item[\"json\"].get(\"amount\", 0) for item in all_items]\n\nif amounts:\n    return [{\n        \"json\": {\n            \"count\": len(amounts),\n            \"total\": sum(amounts),\n            \"average\": statistics.mean(amounts),\n            \"median\": statistics.median(amounts),\n            \"min\": min(amounts),\n            \"max\": max(amounts),\n            \"range\": max(amounts) - min(amounts)\n        }\n    }]\nelse:\n    return [{\"json\": {\"error\": \"No data\"}}]\n```\n\n---\n\n## Workarounds for Missing Libraries\n\n### HTTP Requests (No requests library)\n\n```python\n# âŒ Can't use requests library\n# import requests  # ModuleNotFoundError!\n\n# âœ… Use HTTP Request node instead\n# Add HTTP Request node BEFORE Code node\n# Access the response in Code node\n\nresponse_data = _input.first()[\"json\"]\n\nreturn [{\n    \"json\": {\n        \"status\": response_data.get(\"status\"),\n        \"data\": response_data.get(\"body\"),\n        \"processed\": True\n    }\n}]\n```\n\n### Data Processing (No pandas)\n\n```python\n# âŒ Can't use pandas\n# import pandas as pd  # ModuleNotFoundError!\n\n# âœ… Use Python's built-in list comprehensions\nall_items = _input.all()\n\n# Filter\nactive_items = [\n    item for item in all_items\n    if item[\"json\"].get(\"status\") == \"active\"\n]\n\n# Group by\nfrom collections import defaultdict\ngrouped = defaultdict(list)\n\nfor item in all_items:\n    category = item[\"json\"].get(\"category\", \"other\")\n    grouped[category].append(item[\"json\"])\n\n# Aggregate\nimport statistics\namounts = [item[\"json\"].get(\"amount\", 0) for item in all_items]\ntotal = sum(amounts)\naverage = statistics.mean(amounts) if amounts else 0\n\nreturn [{\n    \"json\": {\n        \"active_count\": len(active_items),\n        \"grouped\": dict(grouped),\n        \"total\": total,\n        \"average\": average\n    }\n}]\n```\n\n### Database Operations (No drivers)\n\n```python\n# âŒ Can't use database drivers\n# import psycopg2  # ModuleNotFoundError!\n# import pymongo   # ModuleNotFoundError!\n\n# âœ… Use n8n database nodes instead\n# Add Postgres/MySQL/MongoDB node BEFORE Code node\n# Process results in Code node\n\ndb_results = _input.first()[\"json\"]\n\nreturn [{\n    \"json\": {\n        \"record_count\": len(db_results) if isinstance(db_results, list) else 1,\n        \"processed\": True\n    }\n}]\n```\n\n---\n\n## Complete Standard Library List\n\n**Available** (commonly useful):\n- json\n- datetime, time\n- re\n- base64\n- hashlib\n- urllib.parse, urllib.request, urllib.error\n- math\n- random\n- statistics\n- collections (defaultdict, Counter, namedtuple)\n- itertools\n- functools\n- operator\n- string\n- textwrap\n\n**Available** (less common):\n- os.path (path operations only)\n- copy\n- typing\n- enum\n- decimal\n- fractions\n\n**NOT Available** (external libraries):\n- requests (HTTP)\n- pandas (data analysis)\n- numpy (numerical computing)\n- bs4/beautifulsoup4 (HTML parsing)\n- selenium (browser automation)\n- psycopg2, pymongo, sqlalchemy (databases)\n- flask, fastapi (web frameworks)\n- pillow (image processing)\n- openpyxl, xlsxwriter (Excel)\n\n---\n\n## Best Practices\n\n### 1. Use Standard Library When Possible\n\n```python\n# âœ… GOOD: Use standard library\nimport json\nimport datetime\nimport re\n\ndata = _input.first()[\"json\"]\nprocessed = json.loads(data.get(\"json_string\", \"{}\"))\n\nreturn [{\"json\": processed}]\n```\n\n### 2. Fall Back to n8n Nodes\n\n```python\n# For operations requiring external libraries,\n# use n8n nodes instead:\n# - HTTP Request for API calls\n# - Postgres/MySQL for databases\n# - Extract from File for parsing\n\n# Then process results in Code node\nresult = _input.first()[\"json\"]\nreturn [{\"json\": {\"processed\": result}}]\n```\n\n### 3. Combine Multiple Modules\n\n```python\nimport json\nimport base64\nimport hashlib\nfrom datetime import datetime\n\n# Combine modules for complex operations\ndata = _input.first()[\"json\"][\"body\"]\n\n# Hash sensitive data\nuser_id = hashlib.sha256(data.get(\"email\", \"\").encode()).hexdigest()[:16]\n\n# Encode for storage\nencoded_data = base64.b64encode(json.dumps(data).encode()).decode()\n\nreturn [{\n    \"json\": {\n        \"user_id\": user_id,\n        \"encoded_data\": encoded_data,\n        \"timestamp\": datetime.now().isoformat()\n    }\n}]\n```\n\n---\n\n## Summary\n\n**Most Useful Modules**:\n1. json - Parse/generate JSON\n2. datetime - Date operations\n3. re - Regular expressions\n4. base64 - Encoding\n5. hashlib - Hashing\n6. urllib.parse - URL operations\n\n**Critical Limitation**:\n- NO external libraries (requests, pandas, numpy, etc.)\n\n**Recommended Approach**:\n- Use **JavaScript** for 95% of use cases\n- Use Python only when specifically needed\n- Use n8n nodes for operations requiring external libraries\n\n**See Also**:\n- [SKILL.md](SKILL.md) - Python Code overview\n- [DATA_ACCESS.md](DATA_ACCESS.md) - Data access patterns\n- [COMMON_PATTERNS.md](COMMON_PATTERNS.md) - Production patterns\n- [ERROR_PATTERNS.md](ERROR_PATTERNS.md) - Avoid common mistakes\n",
        "skills/n8n-expression-syntax/COMMON_MISTAKES.md": "# Common n8n Expression Mistakes\n\nComplete catalog of expression errors with explanations and fixes.\n\n---\n\n## 1. Missing Curly Braces\n\n**Problem**: Expression not recognized, shows as literal text\n\nâŒ **Wrong**:\n```\n$json.email\n```\n\nâœ… **Correct**:\n```\n{{$json.email}}\n```\n\n**Why it fails**: n8n treats text without {{ }} as a literal string. Expressions must be wrapped to be evaluated.\n\n**How to identify**: Field shows exact text like \"$json.email\" instead of actual value.\n\n---\n\n## 2. Webhook Body Access\n\n**Problem**: Undefined values when accessing webhook data\n\nâŒ **Wrong**:\n```\n{{$json.name}}\n{{$json.email}}\n{{$json.message}}\n```\n\nâœ… **Correct**:\n```\n{{$json.body.name}}\n{{$json.body.email}}\n{{$json.body.message}}\n```\n\n**Why it fails**: Webhook node wraps incoming data under `.body` property. The root `$json` contains headers, params, query, and body.\n\n**Webhook structure**:\n```javascript\n{\n  \"headers\": {...},\n  \"params\": {...},\n  \"query\": {...},\n  \"body\": {         // User data is HERE!\n    \"name\": \"John\",\n    \"email\": \"john@example.com\"\n  }\n}\n```\n\n**How to identify**: Webhook workflow shows \"undefined\" for fields that are definitely being sent.\n\n---\n\n## 3. Spaces in Field Names\n\n**Problem**: Syntax error or undefined value\n\nâŒ **Wrong**:\n```\n{{$json.first name}}\n{{$json.user data.email}}\n```\n\nâœ… **Correct**:\n```\n{{$json['first name']}}\n{{$json['user data'].email}}\n```\n\n**Why it fails**: Spaces break dot notation. JavaScript interprets space as end of property name.\n\n**How to identify**: Error message about unexpected token, or undefined when field exists.\n\n---\n\n## 4. Spaces in Node Names\n\n**Problem**: Cannot access other node's data\n\nâŒ **Wrong**:\n```\n{{$node.HTTP Request.json.data}}\n{{$node.Respond to Webhook.json}}\n```\n\nâœ… **Correct**:\n```\n{{$node[\"HTTP Request\"].json.data}}\n{{$node[\"Respond to Webhook\"].json}}\n```\n\n**Why it fails**: Node names are treated as object property names and need quotes when they contain spaces.\n\n**How to identify**: Error like \"Cannot read property 'Request' of undefined\"\n\n---\n\n## 5. Incorrect Node Reference Case\n\n**Problem**: Undefined or wrong data returned\n\nâŒ **Wrong**:\n```\n{{$node[\"http request\"].json.data}}  // lowercase\n{{$node[\"Http Request\"].json.data}}  // wrong capitalization\n```\n\nâœ… **Correct**:\n```\n{{$node[\"HTTP Request\"].json.data}}  // exact match\n```\n\n**Why it fails**: Node names are **case-sensitive**. Must match exactly as shown in workflow.\n\n**How to identify**: Undefined value even though node exists and has data.\n\n---\n\n## 6. Double Wrapping\n\n**Problem**: Literal {{ }} appears in output\n\nâŒ **Wrong**:\n```\n{{{$json.field}}}\n```\n\nâœ… **Correct**:\n```\n{{$json.field}}\n```\n\n**Why it fails**: Only one set of {{ }} is needed. Extra braces are treated as literal characters.\n\n**How to identify**: Output shows \"{{value}}\" instead of just \"value\".\n\n---\n\n## 7. Array Access with Dots\n\n**Problem**: Syntax error or undefined\n\nâŒ **Wrong**:\n```\n{{$json.items.0.name}}\n{{$json.users.1.email}}\n```\n\nâœ… **Correct**:\n```\n{{$json.items[0].name}}\n{{$json.users[1].email}}\n```\n\n**Why it fails**: Array indices require brackets, not dots. Number after dot is invalid JavaScript.\n\n**How to identify**: Syntax error or \"Cannot read property '0' of undefined\"\n\n---\n\n## 8. Using Expressions in Code Nodes\n\n**Problem**: Literal string instead of value, or errors\n\nâŒ **Wrong (in Code node)**:\n```javascript\nconst email = '{{$json.email}}';\nconst name = '={{$json.body.name}}';\n```\n\nâœ… **Correct (in Code node)**:\n```javascript\nconst email = $json.email;\nconst name = $json.body.name;\n\n// Or using Code node API\nconst email = $input.item.json.email;\nconst allItems = $input.all();\n```\n\n**Why it fails**: Code nodes have **direct access** to data. The {{ }} syntax is for expression fields in other nodes, not for JavaScript code.\n\n**How to identify**: Literal string \"{{$json.email}}\" appears in Code node output instead of actual value.\n\n---\n\n## 9. Missing Quotes in $node Reference\n\n**Problem**: Syntax error\n\nâŒ **Wrong**:\n```\n{{$node[HTTP Request].json.data}}\n```\n\nâœ… **Correct**:\n```\n{{$node[\"HTTP Request\"].json.data}}\n```\n\n**Why it fails**: Node names must be quoted strings inside brackets.\n\n**How to identify**: Syntax error \"Unexpected identifier\"\n\n---\n\n## 10. Incorrect Property Path\n\n**Problem**: Undefined value\n\nâŒ **Wrong**:\n```\n{{$json.data.items.name}}       // items is an array\n{{$json.user.email}}            // user doesn't exist, it's userData\n```\n\nâœ… **Correct**:\n```\n{{$json.data.items[0].name}}    // access array element\n{{$json.userData.email}}        // correct property name\n```\n\n**Why it fails**: Wrong path to data. Arrays need index, property names must be exact.\n\n**How to identify**: Check actual data structure using expression editor preview.\n\n---\n\n## 11. Using = Prefix Outside JSON\n\n**Problem**: Literal \"=\" appears in output\n\nâŒ **Wrong (in text field)**:\n```\nEmail: ={{$json.email}}\n```\n\nâœ… **Correct (in text field)**:\n```\nEmail: {{$json.email}}\n```\n\n**Note**: The `=` prefix is **only** needed in JSON mode or when you want to set entire field value to expression result:\n\n```javascript\n// JSON mode (set property to expression)\n{\n  \"email\": \"={{$json.body.email}}\"\n}\n\n// Text mode (no = needed)\nHello {{$json.body.name}}!\n```\n\n**Why it fails**: The `=` is parsed as literal text in non-JSON contexts.\n\n**How to identify**: Output shows \"=john@example.com\" instead of \"john@example.com\"\n\n---\n\n## 12. Expressions in Webhook Path\n\n**Problem**: Path doesn't update, validation error\n\nâŒ **Wrong**:\n```\npath: \"{{$json.user_id}}/webhook\"\npath: \"users/={{$env.TENANT_ID}}\"\n```\n\nâœ… **Correct**:\n```\npath: \"my-webhook\"              // Static paths only\npath: \"user-webhook/:userId\"    // Use dynamic URL parameters instead\n```\n\n**Why it fails**: Webhook paths must be static. Use dynamic URL parameters (`:paramName`) instead of expressions.\n\n**How to identify**: Webhook path doesn't change or validation warns about invalid path.\n\n---\n\n## 13. Forgetting .json in $node Reference\n\n**Problem**: Undefined or wrong data\n\nâŒ **Wrong**:\n```\n{{$node[\"HTTP Request\"].data}}          // Missing .json\n{{$node[\"Webhook\"].body.email}}         // Missing .json\n```\n\nâœ… **Correct**:\n```\n{{$node[\"HTTP Request\"].json.data}}\n{{$node[\"Webhook\"].json.body.email}}\n```\n\n**Why it fails**: Node data is always under `.json` property (or `.binary` for binary data).\n\n**How to identify**: Undefined value when you know the node has data.\n\n---\n\n## 14. String Concatenation Confusion\n\n**Problem**: Attempting JavaScript template literals\n\nâŒ **Wrong**:\n```\n`Hello ${$json.name}!`          // Template literal syntax\n\"Hello \" + $json.name + \"!\"     // String concatenation\n```\n\nâœ… **Correct**:\n```\nHello {{$json.name}}!           // n8n expressions auto-concatenate\n```\n\n**Why it fails**: n8n expressions don't use JavaScript template literal syntax. Adjacent text and expressions are automatically concatenated.\n\n**How to identify**: Literal backticks or + symbols appear in output.\n\n---\n\n## 15. Empty Expression Brackets\n\n**Problem**: Literal {{}} in output\n\nâŒ **Wrong**:\n```\n{{}}\n{{ }}\n```\n\nâœ… **Correct**:\n```\n{{$json.field}}                 // Include expression content\n```\n\n**Why it fails**: Empty expression brackets have nothing to evaluate.\n\n**How to identify**: Literal \"{{ }}\" text appears in output.\n\n---\n\n## Quick Reference Table\n\n| Error | Symptom | Fix |\n|-------|---------|-----|\n| No {{ }} | Literal text | Add {{ }} |\n| Webhook data | Undefined | Add `.body` |\n| Space in field | Syntax error | Use `['field name']` |\n| Space in node | Undefined | Use `[\"Node Name\"]` |\n| Wrong case | Undefined | Match exact case |\n| Double {{ }} | Literal braces | Remove extra {{ }} |\n| .0 array | Syntax error | Use [0] |\n| {{ }} in Code | Literal string | Remove {{ }} |\n| No quotes in $node | Syntax error | Add quotes |\n| Wrong path | Undefined | Check data structure |\n| = in text | Literal = | Remove = prefix |\n| Dynamic path | Doesn't work | Use static path |\n| Missing .json | Undefined | Add .json |\n| Template literals | Literal text | Use {{ }} |\n| Empty {{ }} | Literal braces | Add expression |\n\n---\n\n## Debugging Process\n\nWhen expression doesn't work:\n\n1. **Check braces**: Is it wrapped in {{ }}?\n2. **Check data source**: Is it webhook data? Add `.body`\n3. **Check spaces**: Field or node name has spaces? Use brackets\n4. **Check case**: Does node name match exactly?\n5. **Check path**: Is the property path correct?\n6. **Use expression editor**: Preview shows actual result\n7. **Check context**: Is it a Code node? Remove {{ }}\n\n---\n\n**Related**: See [EXAMPLES.md](EXAMPLES.md) for working examples of correct syntax.\n",
        "skills/n8n-expression-syntax/EXAMPLES.md": "# n8n Expression Examples\n\nReal working examples from n8n workflows.\n\n---\n\n## Example 1: Webhook Form Submission\n\n**Scenario**: Form submission webhook posts to Slack\n\n**Workflow**: Webhook â†’ Slack\n\n**Webhook Input** (POST):\n```json\n{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"company\": \"Acme Corp\",\n  \"message\": \"Interested in your product\"\n}\n```\n\n**Webhook Node Output**:\n```json\n{\n  \"headers\": {\"content-type\": \"application/json\"},\n  \"params\": {},\n  \"query\": {},\n  \"body\": {\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"company\": \"Acme Corp\",\n    \"message\": \"Interested in your product\"\n  }\n}\n```\n\n**In Slack Node** (text field):\n```\nNew form submission! ðŸ“\n\nName: {{$json.body.name}}\nEmail: {{$json.body.email}}\nCompany: {{$json.body.company}}\nMessage: {{$json.body.message}}\n```\n\n**Output**:\n```\nNew form submission! ðŸ“\n\nName: John Doe\nEmail: john@example.com\nCompany: Acme Corp\nMessage: Interested in your product\n```\n\n---\n\n## Example 2: HTTP API to Database\n\n**Scenario**: Fetch user data from API and insert into database\n\n**Workflow**: Schedule â†’ HTTP Request â†’ Postgres\n\n**HTTP Request Returns**:\n```json\n{\n  \"data\": {\n    \"users\": [\n      {\n        \"id\": 123,\n        \"name\": \"Alice Smith\",\n        \"email\": \"alice@example.com\",\n        \"role\": \"admin\"\n      }\n    ]\n  }\n}\n```\n\n**In Postgres Node** (INSERT statement):\n```sql\nINSERT INTO users (user_id, name, email, role, synced_at)\nVALUES (\n  {{$json.data.users[0].id}},\n  '{{$json.data.users[0].name}}',\n  '{{$json.data.users[0].email}}',\n  '{{$json.data.users[0].role}}',\n  '{{$now.toFormat('yyyy-MM-dd HH:mm:ss')}}'\n)\n```\n\n**Result**: User inserted with current timestamp\n\n---\n\n## Example 3: Multi-Node Data Flow\n\n**Scenario**: Webhook â†’ HTTP Request â†’ Email\n\n**Workflow Structure**:\n1. Webhook receives order ID\n2. HTTP Request fetches order details\n3. Email sends confirmation\n\n### Node 1: Webhook\n\n**Receives**:\n```json\n{\n  \"body\": {\n    \"order_id\": \"ORD-12345\"\n  }\n}\n```\n\n### Node 2: HTTP Request\n\n**URL field**:\n```\nhttps://api.example.com/orders/{{$json.body.order_id}}\n```\n\n**Returns**:\n```json\n{\n  \"order\": {\n    \"id\": \"ORD-12345\",\n    \"customer\": \"Bob Jones\",\n    \"total\": 99.99,\n    \"items\": [\"Widget\", \"Gadget\"]\n  }\n}\n```\n\n### Node 3: Email\n\n**Subject**:\n```\nOrder {{$node[\"Webhook\"].json.body.order_id}} Confirmed\n```\n\n**Body**:\n```\nDear {{$node[\"HTTP Request\"].json.order.customer}},\n\nYour order {{$node[\"Webhook\"].json.body.order_id}} has been confirmed!\n\nTotal: ${{$node[\"HTTP Request\"].json.order.total}}\nItems: {{$node[\"HTTP Request\"].json.order.items.join(', ')}}\n\nThank you for your purchase!\n```\n\n**Email Result**:\n```\nSubject: Order ORD-12345 Confirmed\n\nDear Bob Jones,\n\nYour order ORD-12345 has been confirmed!\n\nTotal: $99.99\nItems: Widget, Gadget\n\nThank you for your purchase!\n```\n\n---\n\n## Example 4: Date Formatting\n\n**Scenario**: Various date format outputs\n\n**Current Time**: 2025-10-20 14:30:45\n\n### ISO Format\n```javascript\n{{$now.toISO()}}\n```\n**Output**: `2025-10-20T14:30:45.000Z`\n\n### Custom Date Format\n```javascript\n{{$now.toFormat('yyyy-MM-dd')}}\n```\n**Output**: `2025-10-20`\n\n### Time Only\n```javascript\n{{$now.toFormat('HH:mm:ss')}}\n```\n**Output**: `14:30:45`\n\n### Full Readable Format\n```javascript\n{{$now.toFormat('MMMM dd, yyyy')}}\n```\n**Output**: `October 20, 2025`\n\n### Date Math - Future\n```javascript\n{{$now.plus({days: 7}).toFormat('yyyy-MM-dd')}}\n```\n**Output**: `2025-10-27`\n\n### Date Math - Past\n```javascript\n{{$now.minus({hours: 24}).toFormat('yyyy-MM-dd HH:mm')}}\n```\n**Output**: `2025-10-19 14:30`\n\n---\n\n## Example 5: Array Operations\n\n**Data**:\n```json\n{\n  \"users\": [\n    {\"name\": \"Alice\", \"email\": \"alice@example.com\"},\n    {\"name\": \"Bob\", \"email\": \"bob@example.com\"},\n    {\"name\": \"Charlie\", \"email\": \"charlie@example.com\"}\n  ]\n}\n```\n\n### First User\n```javascript\n{{$json.users[0].name}}\n```\n**Output**: `Alice`\n\n### Last User\n```javascript\n{{$json.users[$json.users.length - 1].name}}\n```\n**Output**: `Charlie`\n\n### All Emails (Join)\n```javascript\n{{$json.users.map(u => u.email).join(', ')}}\n```\n**Output**: `alice@example.com, bob@example.com, charlie@example.com`\n\n### Array Length\n```javascript\n{{$json.users.length}}\n```\n**Output**: `3`\n\n---\n\n## Example 6: Conditional Logic\n\n**Data**:\n```json\n{\n  \"order\": {\n    \"status\": \"completed\",\n    \"total\": 150\n  }\n}\n```\n\n### Ternary Operator\n```javascript\n{{$json.order.status === 'completed' ? 'Order Complete âœ“' : 'Pending...'}}\n```\n**Output**: `Order Complete âœ“`\n\n### Default Values\n```javascript\n{{$json.order.notes || 'No notes provided'}}\n```\n**Output**: `No notes provided` (if notes field doesn't exist)\n\n### Multiple Conditions\n```javascript\n{{$json.order.total > 100 ? 'Premium Customer' : 'Standard Customer'}}\n```\n**Output**: `Premium Customer`\n\n---\n\n## Example 7: String Manipulation\n\n**Data**:\n```json\n{\n  \"user\": {\n    \"email\": \"JOHN@EXAMPLE.COM\",\n    \"message\": \"  Hello World  \"\n  }\n}\n```\n\n### Lowercase\n```javascript\n{{$json.user.email.toLowerCase()}}\n```\n**Output**: `john@example.com`\n\n### Uppercase\n```javascript\n{{$json.user.message.toUpperCase()}}\n```\n**Output**: `  HELLO WORLD  `\n\n### Trim\n```javascript\n{{$json.user.message.trim()}}\n```\n**Output**: `Hello World`\n\n### Substring\n```javascript\n{{$json.user.email.substring(0, 4)}}\n```\n**Output**: `JOHN`\n\n### Replace\n```javascript\n{{$json.user.message.replace('World', 'n8n')}}\n```\n**Output**: `  Hello n8n  `\n\n---\n\n## Example 8: Fields with Spaces\n\n**Data**:\n```json\n{\n  \"user data\": {\n    \"first name\": \"Jane\",\n    \"last name\": \"Doe\",\n    \"phone number\": \"+1234567890\"\n  }\n}\n```\n\n### Bracket Notation\n```javascript\n{{$json['user data']['first name']}}\n```\n**Output**: `Jane`\n\n### Combined\n```javascript\n{{$json['user data']['first name']}} {{$json['user data']['last name']}}\n```\n**Output**: `Jane Doe`\n\n### Nested Spaces\n```javascript\nContact: {{$json['user data']['phone number']}}\n```\n**Output**: `Contact: +1234567890`\n\n---\n\n## Example 9: Code Node (Direct Access)\n\n**Code Node**: Transform webhook data\n\n**Input** (from Webhook node):\n```json\n{\n  \"body\": {\n    \"items\": [\"apple\", \"banana\", \"cherry\"]\n  }\n}\n```\n\n**Code** (JavaScript):\n```javascript\n// âœ… Direct access (no {{ }})\nconst items = $json.body.items;\n\n// Transform to uppercase\nconst uppercased = items.map(item => item.toUpperCase());\n\n// Return in n8n format\nreturn [{\n  json: {\n    original: items,\n    transformed: uppercased,\n    count: items.length\n  }\n}];\n```\n\n**Output**:\n```json\n{\n  \"original\": [\"apple\", \"banana\", \"cherry\"],\n  \"transformed\": [\"APPLE\", \"BANANA\", \"CHERRY\"],\n  \"count\": 3\n}\n```\n\n---\n\n## Example 10: Environment Variables\n\n**Setup**: Environment variable `API_KEY=secret123`\n\n### In HTTP Request (Headers)\n```javascript\nAuthorization: Bearer {{$env.API_KEY}}\n```\n**Result**: `Authorization: Bearer secret123`\n\n### In URL\n```javascript\nhttps://api.example.com/data?key={{$env.API_KEY}}\n```\n**Result**: `https://api.example.com/data?key=secret123`\n\n---\n\n## Template from Real Workflow\n\n**Based on n8n template #2947** (Weather to Slack)\n\n### Workflow Structure\nWebhook â†’ OpenStreetMap API â†’ Weather API â†’ Slack\n\n### Webhook Slash Command\n**Input**: `/weather London`\n\n**Webhook receives**:\n```json\n{\n  \"body\": {\n    \"text\": \"London\"\n  }\n}\n```\n\n### OpenStreetMap API\n**URL**:\n```\nhttps://nominatim.openstreetmap.org/search?q={{$json.body.text}}&format=json\n```\n\n### Weather API (NWS)\n**URL**:\n```\nhttps://api.weather.gov/points/{{$node[\"OpenStreetMap\"].json[0].lat}},{{$node[\"OpenStreetMap\"].json[0].lon}}\n```\n\n### Slack Message\n```\nWeather for {{$json.body.text}}:\n\nTemperature: {{$node[\"Weather API\"].json.properties.temperature.value}}Â°C\nConditions: {{$node[\"Weather API\"].json.properties.shortForecast}}\n```\n\n---\n\n## Summary\n\n**Key Patterns**:\n1. Webhook data is under `.body`\n2. Use `{{}}` for expressions (except Code nodes)\n3. Reference other nodes with `$node[\"Node Name\"].json`\n4. Use brackets for field names with spaces\n5. Node names are case-sensitive\n\n**Most Common Uses**:\n- `{{$json.body.field}}` - Webhook data\n- `{{$node[\"Name\"].json.field}}` - Other node data\n- `{{$now.toFormat('yyyy-MM-dd')}}` - Timestamps\n- `{{$json.array[0].field}}` - Array access\n- `{{$json.field || 'default'}}` - Default values\n\n---\n\n**Related**: See [COMMON_MISTAKES.md](COMMON_MISTAKES.md) for error examples and fixes.\n",
        "skills/n8n-expression-syntax/README.md": "# n8n Expression Syntax\n\nExpert guide for writing correct n8n expressions in workflows.\n\n---\n\n## Purpose\n\nTeaches correct n8n expression syntax ({{ }} patterns) and fixes common mistakes, especially the critical webhook data structure gotcha.\n\n## Activates On\n\n- expression\n- {{}} syntax\n- $json, $node, $now, $env\n- webhook data\n- troubleshoot expression error\n- undefined in workflow\n\n## File Count\n\n4 files, ~450 lines total\n\n## Dependencies\n\n**n8n-mcp tools**:\n- None directly (syntax knowledge skill)\n- Works with n8n-mcp validation tools\n\n**Related skills**:\n- n8n Workflow Patterns (uses expressions in examples)\n- n8n MCP Tools Expert (validates expressions)\n- n8n Node Configuration (when expressions are needed)\n\n## Coverage\n\n### Core Topics\n- Expression format ({{ }})\n- Core variables ($json, $node, $now, $env)\n- **Webhook data structure** ($json.body.*)\n- When NOT to use expressions (Code nodes)\n\n### Common Patterns\n- Accessing nested fields\n- Referencing other nodes\n- Array and object access\n- Date/time formatting\n- String manipulation\n\n### Error Prevention\n- 15 common mistakes with fixes\n- Quick reference table\n- Debugging process\n\n## Evaluations\n\n4 scenarios (100% coverage expected):\n1. **eval-001**: Missing curly braces\n2. **eval-002**: Webhook body data access (critical!)\n3. **eval-003**: Code node vs expression confusion\n4. **eval-004**: Node reference syntax\n\n## Key Features\n\nâœ… **Critical Gotcha Highlighted**: Webhook data under `.body`\nâœ… **Real Examples**: From MCP testing and real templates\nâœ… **Quick Fixes Table**: Fast reference for common errors\nâœ… **Code vs Expression**: Clear distinction\nâœ… **Comprehensive**: Covers 95% of expression use cases\n\n## Files\n\n- **SKILL.md** (285 lines) - Main content with all essential knowledge\n- **COMMON_MISTAKES.md** (380 lines) - Complete error catalog with 15 common mistakes\n- **EXAMPLES.md** (450 lines) - 10 real working examples\n- **README.md** (this file) - Skill metadata\n\n## Success Metrics\n\n**Expected outcomes**:\n- Users correctly wrap expressions in {{ }}\n- Zero webhook `.body` access errors\n- No expressions used in Code nodes\n- Correct $node reference syntax\n\n## Last Updated\n\n2025-10-20\n\n---\n\n**Part of**: n8n-skills repository\n**Conceived by**: Romuald CzÅ‚onkowski - [www.aiadvisors.pl/en](https://www.aiadvisors.pl/en)\n",
        "skills/n8n-expression-syntax/SKILL.md": "---\nname: n8n-expression-syntax\ndescription: Validate n8n expression syntax and fix common errors. Use when writing n8n expressions, using {{}} syntax, accessing $json/$node variables, troubleshooting expression errors, or working with webhook data in workflows.\n---\n\n# n8n Expression Syntax\n\nExpert guide for writing correct n8n expressions in workflows.\n\n---\n\n## Expression Format\n\nAll dynamic content in n8n uses **double curly braces**:\n\n```\n{{expression}}\n```\n\n**Examples**:\n```\nâœ… {{$json.email}}\nâœ… {{$json.body.name}}\nâœ… {{$node[\"HTTP Request\"].json.data}}\nâŒ $json.email  (no braces - treated as literal text)\nâŒ {$json.email}  (single braces - invalid)\n```\n\n---\n\n## Core Variables\n\n### $json - Current Node Output\n\nAccess data from the current node:\n\n```javascript\n{{$json.fieldName}}\n{{$json['field with spaces']}}\n{{$json.nested.property}}\n{{$json.items[0].name}}\n```\n\n### $node - Reference Other Nodes\n\nAccess data from any previous node:\n\n```javascript\n{{$node[\"Node Name\"].json.fieldName}}\n{{$node[\"HTTP Request\"].json.data}}\n{{$node[\"Webhook\"].json.body.email}}\n```\n\n**Important**:\n- Node names **must** be in quotes\n- Node names are **case-sensitive**\n- Must match exact node name from workflow\n\n### $now - Current Timestamp\n\nAccess current date/time:\n\n```javascript\n{{$now}}\n{{$now.toFormat('yyyy-MM-dd')}}\n{{$now.toFormat('HH:mm:ss')}}\n{{$now.plus({days: 7})}}\n```\n\n### $env - Environment Variables\n\nAccess environment variables:\n\n```javascript\n{{$env.API_KEY}}\n{{$env.DATABASE_URL}}\n```\n\n---\n\n## ðŸš¨ CRITICAL: Webhook Data Structure\n\n**Most Common Mistake**: Webhook data is **NOT** at the root!\n\n### Webhook Node Output Structure\n\n```javascript\n{\n  \"headers\": {...},\n  \"params\": {...},\n  \"query\": {...},\n  \"body\": {           // âš ï¸ USER DATA IS HERE!\n    \"name\": \"John\",\n    \"email\": \"john@example.com\",\n    \"message\": \"Hello\"\n  }\n}\n```\n\n### Correct Webhook Data Access\n\n```javascript\nâŒ WRONG: {{$json.name}}\nâŒ WRONG: {{$json.email}}\n\nâœ… CORRECT: {{$json.body.name}}\nâœ… CORRECT: {{$json.body.email}}\nâœ… CORRECT: {{$json.body.message}}\n```\n\n**Why**: Webhook node wraps incoming data under `.body` property to preserve headers, params, and query parameters.\n\n---\n\n## Common Patterns\n\n### Access Nested Fields\n\n```javascript\n// Simple nesting\n{{$json.user.email}}\n\n// Array access\n{{$json.data[0].name}}\n{{$json.items[0].id}}\n\n// Bracket notation for spaces\n{{$json['field name']}}\n{{$json['user data']['first name']}}\n```\n\n### Reference Other Nodes\n\n```javascript\n// Node without spaces\n{{$node[\"Set\"].json.value}}\n\n// Node with spaces (common!)\n{{$node[\"HTTP Request\"].json.data}}\n{{$node[\"Respond to Webhook\"].json.message}}\n\n// Webhook node\n{{$node[\"Webhook\"].json.body.email}}\n```\n\n### Combine Variables\n\n```javascript\n// Concatenation (automatic)\nHello {{$json.body.name}}!\n\n// In URLs\nhttps://api.example.com/users/{{$json.body.user_id}}\n\n// In object properties\n{\n  \"name\": \"={{$json.body.name}}\",\n  \"email\": \"={{$json.body.email}}\"\n}\n```\n\n---\n\n## When NOT to Use Expressions\n\n### âŒ Code Nodes\n\nCode nodes use **direct JavaScript access**, NOT expressions!\n\n```javascript\n// âŒ WRONG in Code node\nconst email = '={{$json.email}}';\nconst name = '{{$json.body.name}}';\n\n// âœ… CORRECT in Code node\nconst email = $json.email;\nconst name = $json.body.name;\n\n// Or using Code node API\nconst email = $input.item.json.email;\nconst allItems = $input.all();\n```\n\n### âŒ Webhook Paths\n\n```javascript\n// âŒ WRONG\npath: \"{{$json.user_id}}/webhook\"\n\n// âœ… CORRECT\npath: \"user-webhook\"  // Static paths only\n```\n\n### âŒ Credential Fields\n\n```javascript\n// âŒ WRONG\napiKey: \"={{$env.API_KEY}}\"\n\n// âœ… CORRECT\nUse n8n credential system, not expressions\n```\n\n---\n\n## Validation Rules\n\n### 1. Always Use {{}}\n\nExpressions **must** be wrapped in double curly braces.\n\n```javascript\nâŒ $json.field\nâœ… {{$json.field}}\n```\n\n### 2. Use Quotes for Spaces\n\nField or node names with spaces require **bracket notation**:\n\n```javascript\nâŒ {{$json.field name}}\nâœ… {{$json['field name']}}\n\nâŒ {{$node.HTTP Request.json}}\nâœ… {{$node[\"HTTP Request\"].json}}\n```\n\n### 3. Match Exact Node Names\n\nNode references are **case-sensitive**:\n\n```javascript\nâŒ {{$node[\"http request\"].json}}  // lowercase\nâŒ {{$node[\"Http Request\"].json}}  // wrong case\nâœ… {{$node[\"HTTP Request\"].json}}  // exact match\n```\n\n### 4. No Nested {{}}\n\nDon't double-wrap expressions:\n\n```javascript\nâŒ {{{$json.field}}}\nâœ… {{$json.field}}\n```\n\n---\n\n## Common Mistakes\n\nFor complete error catalog with fixes, see [COMMON_MISTAKES.md](COMMON_MISTAKES.md)\n\n### Quick Fixes\n\n| Mistake | Fix |\n|---------|-----|\n| `$json.field` | `{{$json.field}}` |\n| `{{$json.field name}}` | `{{$json['field name']}}` |\n| `{{$node.HTTP Request}}` | `{{$node[\"HTTP Request\"]}}` |\n| `{{{$json.field}}}` | `{{$json.field}}` |\n| `{{$json.name}}` (webhook) | `{{$json.body.name}}` |\n| `'={{$json.email}}'` (Code node) | `$json.email` |\n\n---\n\n## Working Examples\n\nFor real workflow examples, see [EXAMPLES.md](EXAMPLES.md)\n\n### Example 1: Webhook to Slack\n\n**Webhook receives**:\n```json\n{\n  \"body\": {\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"message\": \"Hello!\"\n  }\n}\n```\n\n**In Slack node text field**:\n```\nNew form submission!\n\nName: {{$json.body.name}}\nEmail: {{$json.body.email}}\nMessage: {{$json.body.message}}\n```\n\n### Example 2: HTTP Request to Email\n\n**HTTP Request returns**:\n```json\n{\n  \"data\": {\n    \"items\": [\n      {\"name\": \"Product 1\", \"price\": 29.99}\n    ]\n  }\n}\n```\n\n**In Email node** (reference HTTP Request):\n```\nProduct: {{$node[\"HTTP Request\"].json.data.items[0].name}}\nPrice: ${{$node[\"HTTP Request\"].json.data.items[0].price}}\n```\n\n### Example 3: Format Timestamp\n\n```javascript\n// Current date\n{{$now.toFormat('yyyy-MM-dd')}}\n// Result: 2025-10-20\n\n// Time\n{{$now.toFormat('HH:mm:ss')}}\n// Result: 14:30:45\n\n// Full datetime\n{{$now.toFormat('yyyy-MM-dd HH:mm')}}\n// Result: 2025-10-20 14:30\n```\n\n---\n\n## Data Type Handling\n\n### Arrays\n\n```javascript\n// First item\n{{$json.users[0].email}}\n\n// Array length\n{{$json.users.length}}\n\n// Last item\n{{$json.users[$json.users.length - 1].name}}\n```\n\n### Objects\n\n```javascript\n// Dot notation (no spaces)\n{{$json.user.email}}\n\n// Bracket notation (with spaces or dynamic)\n{{$json['user data'].email}}\n```\n\n### Strings\n\n```javascript\n// Concatenation (automatic)\nHello {{$json.name}}!\n\n// String methods\n{{$json.email.toLowerCase()}}\n{{$json.name.toUpperCase()}}\n```\n\n### Numbers\n\n```javascript\n// Direct use\n{{$json.price}}\n\n// Math operations\n{{$json.price * 1.1}}  // Add 10%\n{{$json.quantity + 5}}\n```\n\n---\n\n## Advanced Patterns\n\n### Conditional Content\n\n```javascript\n// Ternary operator\n{{$json.status === 'active' ? 'Active User' : 'Inactive User'}}\n\n// Default values\n{{$json.email || 'no-email@example.com'}}\n```\n\n### Date Manipulation\n\n```javascript\n// Add days\n{{$now.plus({days: 7}).toFormat('yyyy-MM-dd')}}\n\n// Subtract hours\n{{$now.minus({hours: 24}).toISO()}}\n\n// Set specific date\n{{DateTime.fromISO('2025-12-25').toFormat('MMMM dd, yyyy')}}\n```\n\n### String Manipulation\n\n```javascript\n// Substring\n{{$json.email.substring(0, 5)}}\n\n// Replace\n{{$json.message.replace('old', 'new')}}\n\n// Split and join\n{{$json.tags.split(',').join(', ')}}\n```\n\n---\n\n## Debugging Expressions\n\n### Test in Expression Editor\n\n1. Click field with expression\n2. Open expression editor (click \"fx\" icon)\n3. See live preview of result\n4. Check for errors highlighted in red\n\n### Common Error Messages\n\n**\"Cannot read property 'X' of undefined\"**\nâ†’ Parent object doesn't exist\nâ†’ Check your data path\n\n**\"X is not a function\"**\nâ†’ Trying to call method on non-function\nâ†’ Check variable type\n\n**Expression shows as literal text**\nâ†’ Missing {{ }}\nâ†’ Add curly braces\n\n---\n\n## Expression Helpers\n\n### Available Methods\n\n**String**:\n- `.toLowerCase()`, `.toUpperCase()`\n- `.trim()`, `.replace()`, `.substring()`\n- `.split()`, `.includes()`\n\n**Array**:\n- `.length`, `.map()`, `.filter()`\n- `.find()`, `.join()`, `.slice()`\n\n**DateTime** (Luxon):\n- `.toFormat()`, `.toISO()`, `.toLocal()`\n- `.plus()`, `.minus()`, `.set()`\n\n**Number**:\n- `.toFixed()`, `.toString()`\n- Math operations: `+`, `-`, `*`, `/`, `%`\n\n---\n\n## Best Practices\n\n### âœ… Do\n\n- Always use {{ }} for dynamic content\n- Use bracket notation for field names with spaces\n- Reference webhook data from `.body`\n- Use $node for data from other nodes\n- Test expressions in expression editor\n\n### âŒ Don't\n\n- Don't use expressions in Code nodes\n- Don't forget quotes around node names with spaces\n- Don't double-wrap with extra {{ }}\n- Don't assume webhook data is at root (it's under .body!)\n- Don't use expressions in webhook paths or credentials\n\n---\n\n## Related Skills\n\n- **n8n MCP Tools Expert**: Learn how to validate expressions using MCP tools\n- **n8n Workflow Patterns**: See expressions in real workflow examples\n- **n8n Node Configuration**: Understand when expressions are needed\n\n---\n\n## Summary\n\n**Essential Rules**:\n1. Wrap expressions in {{ }}\n2. Webhook data is under `.body`\n3. No {{ }} in Code nodes\n4. Quote node names with spaces\n5. Node names are case-sensitive\n\n**Most Common Mistakes**:\n- Missing {{ }} â†’ Add braces\n- `{{$json.name}}` in webhooks â†’ Use `{{$json.body.name}}`\n- `{{$json.email}}` in Code â†’ Use `$json.email`\n- `{{$node.HTTP Request}}` â†’ Use `{{$node[\"HTTP Request\"]}}`\n\nFor more details, see:\n- [COMMON_MISTAKES.md](COMMON_MISTAKES.md) - Complete error catalog\n- [EXAMPLES.md](EXAMPLES.md) - Real workflow examples\n\n---\n\n**Need Help?** Reference the n8n expression documentation or use n8n-mcp validation tools to check your expressions.\n",
        "skills/n8n-mcp-tools-expert/README.md": "# n8n MCP Tools Expert\n\nExpert guide for using n8n-mcp MCP tools effectively.\n\n---\n\n## Purpose\n\nTeaches how to use n8n-mcp MCP server tools correctly for efficient workflow building.\n\n## Activates On\n\n- search nodes\n- find node\n- validate\n- MCP tools\n- template\n- workflow\n- n8n-mcp\n- tool selection\n\n## File Count\n\n5 files, ~1,150 lines total\n\n## Priority\n\n**HIGHEST** - Essential for correct MCP tool usage\n\n## Dependencies\n\n**n8n-mcp tools**: All of them! (40+ tools)\n\n**Related skills**:\n- n8n Expression Syntax (write expressions for workflows)\n- n8n Workflow Patterns (use tools to build patterns)\n- n8n Validation Expert (interpret validation results)\n- n8n Node Configuration (configure nodes found with tools)\n\n## Coverage\n\n### Core Topics\n- Tool selection guide (which tool for which task)\n- nodeType format differences (nodes-base.* vs n8n-nodes-base.*)\n- Validation profiles (minimal/runtime/ai-friendly/strict)\n- Smart parameters (branch, case for multi-output nodes)\n- Auto-sanitization system\n- Workflow management (15 operation types)\n- AI connection types (8 types)\n\n### Tool Categories\n- Node Discovery (search, list, essentials, info)\n- Configuration Validation (minimal, operation, workflow)\n- Workflow Management (create, update, validate)\n- Template Library (search, get)\n- Documentation (tools, database stats)\n\n## Evaluations\n\n5 scenarios (100% coverage expected):\n1. **eval-001**: Tool selection (search_nodes)\n2. **eval-002**: nodeType format (nodes-base.* prefix)\n3. **eval-003**: Validation workflow (profiles)\n4. **eval-004**: essentials vs info (5KB vs 100KB)\n5. **eval-005**: Smart parameters (branch, case)\n\n## Key Features\n\nâœ… **Tool Selection Guide**: Which tool to use for each task\nâœ… **Common Patterns**: Most effective tool usage sequences\nâœ… **Format Guidance**: nodeType format differences explained\nâœ… **Smart Parameters**: Semantic branch/case routing for multi-output nodes\nâœ… **Auto-Sanitization**: Explains automatic validation fixes\nâœ… **Comprehensive**: Covers all 40+ MCP tools\n\n## Files\n\n- **SKILL.md** (480 lines) - Core tool usage guide\n- **SEARCH_GUIDE.md** (220 lines) - Node discovery tools\n- **VALIDATION_GUIDE.md** (250 lines) - Validation tools and profiles\n- **WORKFLOW_GUIDE.md** (200 lines) - Workflow management\n- **README.md** (this file) - Skill metadata\n\n## What You'll Learn\n\n- Correct nodeType formats (nodes-base.* for search tools)\n- When to use get_node_essentials vs get_node_info\n- How to use validation profiles effectively\n- Smart parameters for multi-output nodes (IF/Switch)\n- Common tool usage patterns and workflows\n\n## Last Updated\n\n2025-10-20\n\n---\n\n**Part of**: n8n-skills repository\n**Conceived by**: Romuald CzÅ‚onkowski - [www.aiadvisors.pl/en](https://www.aiadvisors.pl/en)\n",
        "skills/n8n-mcp-tools-expert/SEARCH_GUIDE.md": "# Node Discovery Tools Guide\n\nComplete guide for finding and understanding n8n nodes.\n\n---\n\n## search_nodes (START HERE!)\n\n**Speed**: <20ms\n\n**Use when**: You know what you're looking for (keyword, service, use case)\n\n**Syntax**:\n```javascript\nsearch_nodes({\n  query: \"slack\",      // Required: search keywords\n  mode: \"OR\",          // Optional: OR (default), AND, FUZZY\n  limit: 20,           // Optional: max results (default 20)\n  source: \"all\",       // Optional: all, core, community, verified\n  includeExamples: false  // Optional: include template configs\n})\n```\n\n**Returns**:\n```javascript\n{\n  \"query\": \"slack\",\n  \"results\": [\n    {\n      \"nodeType\": \"nodes-base.slack\",                    // For search/validate tools\n      \"workflowNodeType\": \"n8n-nodes-base.slack\",       // For workflow tools\n      \"displayName\": \"Slack\",\n      \"description\": \"Consume Slack API\",\n      \"category\": \"output\",\n      \"relevance\": \"high\"\n    }\n  ]\n}\n```\n\n**Tips**:\n- Common searches: webhook, http, database, email, slack, google, ai\n- `OR` mode (default): matches any word\n- `AND` mode: requires all words\n- `FUZZY` mode: typo-tolerant (finds \"slak\" â†’ Slack)\n- Use `source: \"core\"` for only built-in nodes\n- Use `includeExamples: true` for real-world configs\n\n---\n\n## get_node (UNIFIED NODE INFORMATION)\n\nThe `get_node` tool provides all node information with different detail levels and modes.\n\n### Detail Levels (mode=\"info\")\n\n| Detail | Tokens | Use When |\n|--------|--------|----------|\n| `minimal` | ~200 | Quick metadata check |\n| `standard` | ~1-2K | **Most use cases (DEFAULT)** |\n| `full` | ~3-8K | Complex debugging only |\n\n### Standard Detail (RECOMMENDED)\n\n**Speed**: <10ms | **Size**: ~1-2K tokens\n\n**Use when**: You've found the node and need configuration details\n\n```javascript\nget_node({\n  nodeType: \"nodes-base.slack\",      // Required: SHORT prefix format\n  includeExamples: true              // Optional: get real template configs\n})\n// detail=\"standard\" is the default\n```\n\n**Returns**:\n- Available operations and resources\n- Essential properties (10-20 most common)\n- Metadata (isAITool, isTrigger, hasCredentials)\n- Real examples from templates (if includeExamples: true)\n\n### Minimal Detail\n\n**Speed**: <5ms | **Size**: ~200 tokens\n\n**Use when**: Just need basic metadata\n\n```javascript\nget_node({\n  nodeType: \"nodes-base.slack\",\n  detail: \"minimal\"\n})\n```\n\n**Returns**: nodeType, displayName, description, category\n\n### Full Detail (USE SPARINGLY)\n\n**Speed**: <100ms | **Size**: ~3-8K tokens\n\n**Use when**: Debugging complex configuration, need complete schema\n\n```javascript\nget_node({\n  nodeType: \"nodes-base.httpRequest\",\n  detail: \"full\"\n})\n```\n\n**Warning**: Large payload! Use `standard` for most cases.\n\n---\n\n## get_node Modes\n\n### mode=\"docs\" (READABLE DOCUMENTATION)\n\n**Use when**: Need human-readable documentation with examples\n\n```javascript\nget_node({\n  nodeType: \"nodes-base.slack\",\n  mode: \"docs\"\n})\n```\n\n**Returns**: Formatted markdown with:\n- Usage examples\n- Authentication guide\n- Common patterns\n- Best practices\n\n**Better than raw schema for learning!**\n\n### mode=\"search_properties\" (FIND SPECIFIC FIELDS)\n\n**Use when**: Looking for specific property in a node\n\n```javascript\nget_node({\n  nodeType: \"nodes-base.httpRequest\",\n  mode: \"search_properties\",\n  propertyQuery: \"auth\",           // Required for this mode\n  maxPropertyResults: 20           // Optional: default 20\n})\n```\n\n**Returns**: Property paths and descriptions matching query\n\n**Common searches**: auth, header, body, json, url, method, credential\n\n### mode=\"versions\" (VERSION HISTORY)\n\n**Use when**: Need to check node version history\n\n```javascript\nget_node({\n  nodeType: \"nodes-base.executeWorkflow\",\n  mode: \"versions\"\n})\n```\n\n**Returns**: Version history with breaking changes flags\n\n### mode=\"compare\" (COMPARE VERSIONS)\n\n**Use when**: Need to see differences between versions\n\n```javascript\nget_node({\n  nodeType: \"nodes-base.httpRequest\",\n  mode: \"compare\",\n  fromVersion: \"3.0\",\n  toVersion: \"4.1\"       // Optional: defaults to latest\n})\n```\n\n**Returns**: Property-level changes between versions\n\n### mode=\"breaking\" (BREAKING CHANGES ONLY)\n\n**Use when**: Checking for breaking changes before upgrades\n\n```javascript\nget_node({\n  nodeType: \"nodes-base.httpRequest\",\n  mode: \"breaking\",\n  fromVersion: \"3.0\"\n})\n```\n\n**Returns**: Only breaking changes (not all changes)\n\n### mode=\"migrations\" (AUTO-MIGRATABLE)\n\n**Use when**: Checking what can be auto-migrated\n\n```javascript\nget_node({\n  nodeType: \"nodes-base.httpRequest\",\n  mode: \"migrations\",\n  fromVersion: \"3.0\"\n})\n```\n\n**Returns**: Changes that can be automatically migrated\n\n---\n\n## Additional Parameters\n\n### includeTypeInfo\n\nAdd type structure metadata (validation rules, JS types)\n\n```javascript\nget_node({\n  nodeType: \"nodes-base.if\",\n  includeTypeInfo: true   // Adds ~80-120 tokens per property\n})\n```\n\nUse for complex nodes like filter, resourceMapper\n\n### includeExamples\n\nInclude real-world configuration examples from templates\n\n```javascript\nget_node({\n  nodeType: \"nodes-base.slack\",\n  includeExamples: true   // Adds ~200-400 tokens per example\n})\n```\n\nOnly works with `mode: \"info\"` and `detail: \"standard\"`\n\n---\n\n## Common Workflow: Finding & Configuring\n\n```\nStep 1: Search\nsearch_nodes({query: \"slack\"})\nâ†’ Returns: nodes-base.slack\n\nStep 2: Get Operations (18s avg thinking time)\nget_node({\n  nodeType: \"nodes-base.slack\",\n  includeExamples: true\n})\nâ†’ Returns: operations list + example configs\n\nStep 3: Validate Config\nvalidate_node({\n  nodeType: \"nodes-base.slack\",\n  config: {resource: \"channel\", operation: \"create\"},\n  profile: \"runtime\"\n})\nâ†’ Returns: validation result\n\nStep 4: Use in Workflow\n(Configuration ready!)\n```\n\n**Most common pattern**: search â†’ get_node (18s average)\n\n---\n\n## Quick Comparison\n\n| Tool/Mode | When to Use | Speed | Size |\n|-----------|-------------|-------|------|\n| `search_nodes` | Find by keyword | <20ms | Small |\n| `get_node (standard)` | **Get config (DEFAULT)** | <10ms | 1-2K |\n| `get_node (minimal)` | Quick metadata | <5ms | 200 |\n| `get_node (full)` | Complex debugging | <100ms | 3-8K |\n| `get_node (docs)` | Learn usage | Fast | Medium |\n| `get_node (search_properties)` | Find specific field | Fast | Small |\n| `get_node (versions)` | Check versions | Fast | Small |\n\n**Best Practice**: search â†’ get_node(standard) â†’ validate\n\n---\n\n## nodeType Format (CRITICAL!)\n\n**Search/Validate Tools** (SHORT prefix):\n```javascript\n\"nodes-base.slack\"\n\"nodes-base.httpRequest\"\n\"nodes-langchain.agent\"\n```\n\n**Workflow Tools** (FULL prefix):\n```javascript\n\"n8n-nodes-base.slack\"\n\"n8n-nodes-base.httpRequest\"\n\"@n8n/n8n-nodes-langchain.agent\"\n```\n\n**Conversion**: search_nodes returns BOTH formats:\n```javascript\n{\n  \"nodeType\": \"nodes-base.slack\",          // Use with get_node, validate_node\n  \"workflowNodeType\": \"n8n-nodes-base.slack\"  // Use with n8n_create_workflow\n}\n```\n\n---\n\n## Examples\n\n### Find and Configure HTTP Request\n\n```javascript\n// Step 1: Search\nsearch_nodes({query: \"http request\"})\n\n// Step 2: Get standard info\nget_node({nodeType: \"nodes-base.httpRequest\"})\n\n// Step 3: Find auth options\nget_node({\n  nodeType: \"nodes-base.httpRequest\",\n  mode: \"search_properties\",\n  propertyQuery: \"authentication\"\n})\n\n// Step 4: Validate config\nvalidate_node({\n  nodeType: \"nodes-base.httpRequest\",\n  config: {method: \"POST\", url: \"https://api.example.com\"},\n  profile: \"runtime\"\n})\n```\n\n### Explore AI Nodes\n\n```javascript\n// Find all AI-related nodes\nsearch_nodes({query: \"ai agent\", source: \"all\"})\n\n// Get AI Agent documentation\nget_node({nodeType: \"nodes-langchain.agent\", mode: \"docs\"})\n\n// Get configuration details with examples\nget_node({\n  nodeType: \"nodes-langchain.agent\",\n  includeExamples: true\n})\n```\n\n### Check Version Compatibility\n\n```javascript\n// See all versions\nget_node({nodeType: \"nodes-base.executeWorkflow\", mode: \"versions\"})\n\n// Check breaking changes from v1 to v2\nget_node({\n  nodeType: \"nodes-base.executeWorkflow\",\n  mode: \"breaking\",\n  fromVersion: \"1.0\"\n})\n```\n\n---\n\n## Related\n\n- [VALIDATION_GUIDE.md](VALIDATION_GUIDE.md) - Validate node configs\n- [WORKFLOW_GUIDE.md](WORKFLOW_GUIDE.md) - Use nodes in workflows\n",
        "skills/n8n-mcp-tools-expert/SKILL.md": "---\nname: n8n-mcp-tools-expert\ndescription: Expert guide for using n8n-mcp MCP tools effectively. Use when searching for nodes, validating configurations, accessing templates, managing workflows, or using any n8n-mcp tool. Provides tool selection guidance, parameter formats, and common patterns.\n---\n\n# n8n MCP Tools Expert\n\nMaster guide for using n8n-mcp MCP server tools to build workflows.\n\n---\n\n## Tool Categories\n\nn8n-mcp provides tools organized into categories:\n\n1. **Node Discovery** â†’ [SEARCH_GUIDE.md](SEARCH_GUIDE.md)\n2. **Configuration Validation** â†’ [VALIDATION_GUIDE.md](VALIDATION_GUIDE.md)\n3. **Workflow Management** â†’ [WORKFLOW_GUIDE.md](WORKFLOW_GUIDE.md)\n4. **Template Library** - Search and deploy 2,700+ real workflows\n5. **Documentation & Guides** - Tool docs, AI agent guide, Code node guides\n\n---\n\n## Quick Reference\n\n### Most Used Tools (by success rate)\n\n| Tool | Use When | Speed |\n|------|----------|-------|\n| `search_nodes` | Finding nodes by keyword | <20ms |\n| `get_node` | Understanding node operations (detail=\"standard\") | <10ms |\n| `validate_node` | Checking configurations (mode=\"full\") | <100ms |\n| `n8n_create_workflow` | Creating workflows | 100-500ms |\n| `n8n_update_partial_workflow` | Editing workflows (MOST USED!) | 50-200ms |\n| `validate_workflow` | Checking complete workflow | 100-500ms |\n| `n8n_deploy_template` | Deploy template to n8n instance | 200-500ms |\n\n---\n\n## Tool Selection Guide\n\n### Finding the Right Node\n\n**Workflow**:\n```\n1. search_nodes({query: \"keyword\"})\n2. get_node({nodeType: \"nodes-base.name\"})\n3. [Optional] get_node({nodeType: \"nodes-base.name\", mode: \"docs\"})\n```\n\n**Example**:\n```javascript\n// Step 1: Search\nsearch_nodes({query: \"slack\"})\n// Returns: nodes-base.slack\n\n// Step 2: Get details\nget_node({nodeType: \"nodes-base.slack\"})\n// Returns: operations, properties, examples (standard detail)\n\n// Step 3: Get readable documentation\nget_node({nodeType: \"nodes-base.slack\", mode: \"docs\"})\n// Returns: markdown documentation\n```\n\n**Common pattern**: search â†’ get_node (18s average)\n\n### Validating Configuration\n\n**Workflow**:\n```\n1. validate_node({nodeType, config: {}, mode: \"minimal\"}) - Check required fields\n2. validate_node({nodeType, config, profile: \"runtime\"}) - Full validation\n3. [Repeat] Fix errors, validate again\n```\n\n**Common pattern**: validate â†’ fix â†’ validate (23s thinking, 58s fixing per cycle)\n\n### Managing Workflows\n\n**Workflow**:\n```\n1. n8n_create_workflow({name, nodes, connections})\n2. n8n_validate_workflow({id})\n3. n8n_update_partial_workflow({id, operations: [...]})\n4. n8n_validate_workflow({id}) again\n5. n8n_update_partial_workflow({id, operations: [{type: \"activateWorkflow\"}]})\n```\n\n**Common pattern**: iterative updates (56s average between edits)\n\n---\n\n## Critical: nodeType Formats\n\n**Two different formats** for different tools!\n\n### Format 1: Search/Validate Tools\n```javascript\n// Use SHORT prefix\n\"nodes-base.slack\"\n\"nodes-base.httpRequest\"\n\"nodes-base.webhook\"\n\"nodes-langchain.agent\"\n```\n\n**Tools that use this**:\n- search_nodes (returns this format)\n- get_node\n- validate_node\n- validate_workflow\n\n### Format 2: Workflow Tools\n```javascript\n// Use FULL prefix\n\"n8n-nodes-base.slack\"\n\"n8n-nodes-base.httpRequest\"\n\"n8n-nodes-base.webhook\"\n\"@n8n/n8n-nodes-langchain.agent\"\n```\n\n**Tools that use this**:\n- n8n_create_workflow\n- n8n_update_partial_workflow\n\n### Conversion\n\n```javascript\n// search_nodes returns BOTH formats\n{\n  \"nodeType\": \"nodes-base.slack\",          // For search/validate tools\n  \"workflowNodeType\": \"n8n-nodes-base.slack\"  // For workflow tools\n}\n```\n\n---\n\n## Common Mistakes\n\n### Mistake 1: Wrong nodeType Format\n\n**Problem**: \"Node not found\" error\n\n```javascript\n// WRONG\nget_node({nodeType: \"slack\"})  // Missing prefix\nget_node({nodeType: \"n8n-nodes-base.slack\"})  // Wrong prefix\n\n// CORRECT\nget_node({nodeType: \"nodes-base.slack\"})\n```\n\n### Mistake 2: Using detail=\"full\" by Default\n\n**Problem**: Huge payload, slower response, token waste\n\n```javascript\n// WRONG - Returns 3-8K tokens, use sparingly\nget_node({nodeType: \"nodes-base.slack\", detail: \"full\"})\n\n// CORRECT - Returns 1-2K tokens, covers 95% of use cases\nget_node({nodeType: \"nodes-base.slack\"})  // detail=\"standard\" is default\nget_node({nodeType: \"nodes-base.slack\", detail: \"standard\"})\n```\n\n**When to use detail=\"full\"**:\n- Debugging complex configuration issues\n- Need complete property schema with all nested options\n- Exploring advanced features\n\n**Better alternatives**:\n1. `get_node({detail: \"standard\"})` - for operations list (default)\n2. `get_node({mode: \"docs\"})` - for readable documentation\n3. `get_node({mode: \"search_properties\", propertyQuery: \"auth\"})` - for specific property\n\n### Mistake 3: Not Using Validation Profiles\n\n**Problem**: Too many false positives OR missing real errors\n\n**Profiles**:\n- `minimal` - Only required fields (fast, permissive)\n- `runtime` - Values + types (recommended for pre-deployment)\n- `ai-friendly` - Reduce false positives (for AI configuration)\n- `strict` - Maximum validation (for production)\n\n```javascript\n// WRONG - Uses default profile\nvalidate_node({nodeType, config})\n\n// CORRECT - Explicit profile\nvalidate_node({nodeType, config, profile: \"runtime\"})\n```\n\n### Mistake 4: Ignoring Auto-Sanitization\n\n**What happens**: ALL nodes sanitized on ANY workflow update\n\n**Auto-fixes**:\n- Binary operators (equals, contains) â†’ removes singleValue\n- Unary operators (isEmpty, isNotEmpty) â†’ adds singleValue: true\n- IF/Switch nodes â†’ adds missing metadata\n\n**Cannot fix**:\n- Broken connections\n- Branch count mismatches\n- Paradoxical corrupt states\n\n```javascript\n// After ANY update, auto-sanitization runs on ALL nodes\nn8n_update_partial_workflow({id, operations: [...]})\n// â†’ Automatically fixes operator structures\n```\n\n### Mistake 5: Not Using Smart Parameters\n\n**Problem**: Complex sourceIndex calculations for multi-output nodes\n\n**Old way** (manual):\n```javascript\n// IF node connection\n{\n  type: \"addConnection\",\n  source: \"IF\",\n  target: \"Handler\",\n  sourceIndex: 0  // Which output? Hard to remember!\n}\n```\n\n**New way** (smart parameters):\n```javascript\n// IF node - semantic branch names\n{\n  type: \"addConnection\",\n  source: \"IF\",\n  target: \"True Handler\",\n  branch: \"true\"  // Clear and readable!\n}\n\n{\n  type: \"addConnection\",\n  source: \"IF\",\n  target: \"False Handler\",\n  branch: \"false\"\n}\n\n// Switch node - semantic case numbers\n{\n  type: \"addConnection\",\n  source: \"Switch\",\n  target: \"Handler A\",\n  case: 0\n}\n```\n\n### Mistake 6: Not Using intent Parameter\n\n**Problem**: Less helpful tool responses\n\n```javascript\n// WRONG - No context for response\nn8n_update_partial_workflow({\n  id: \"abc\",\n  operations: [{type: \"addNode\", node: {...}}]\n})\n\n// CORRECT - Better AI responses\nn8n_update_partial_workflow({\n  id: \"abc\",\n  intent: \"Add error handling for API failures\",\n  operations: [{type: \"addNode\", node: {...}}]\n})\n```\n\n---\n\n## Tool Usage Patterns\n\n### Pattern 1: Node Discovery (Most Common)\n\n**Common workflow**: 18s average between steps\n\n```javascript\n// Step 1: Search (fast!)\nconst results = await search_nodes({\n  query: \"slack\",\n  mode: \"OR\",  // Default: any word matches\n  limit: 20\n});\n// â†’ Returns: nodes-base.slack, nodes-base.slackTrigger\n\n// Step 2: Get details (~18s later, user reviewing results)\nconst details = await get_node({\n  nodeType: \"nodes-base.slack\",\n  includeExamples: true  // Get real template configs\n});\n// â†’ Returns: operations, properties, metadata\n```\n\n### Pattern 2: Validation Loop\n\n**Typical cycle**: 23s thinking, 58s fixing\n\n```javascript\n// Step 1: Validate\nconst result = await validate_node({\n  nodeType: \"nodes-base.slack\",\n  config: {\n    resource: \"channel\",\n    operation: \"create\"\n  },\n  profile: \"runtime\"\n});\n\n// Step 2: Check errors (~23s thinking)\nif (!result.valid) {\n  console.log(result.errors);  // \"Missing required field: name\"\n}\n\n// Step 3: Fix config (~58s fixing)\nconfig.name = \"general\";\n\n// Step 4: Validate again\nawait validate_node({...});  // Repeat until clean\n```\n\n### Pattern 3: Workflow Editing\n\n**Most used update tool**: 99.0% success rate, 56s average between edits\n\n```javascript\n// Iterative workflow building (NOT one-shot!)\n// Edit 1\nawait n8n_update_partial_workflow({\n  id: \"workflow-id\",\n  intent: \"Add webhook trigger\",\n  operations: [{type: \"addNode\", node: {...}}]\n});\n\n// ~56s later...\n\n// Edit 2\nawait n8n_update_partial_workflow({\n  id: \"workflow-id\",\n  intent: \"Connect webhook to processor\",\n  operations: [{type: \"addConnection\", source: \"...\", target: \"...\"}]\n});\n\n// ~56s later...\n\n// Edit 3 (validation)\nawait n8n_validate_workflow({id: \"workflow-id\"});\n\n// Ready? Activate!\nawait n8n_update_partial_workflow({\n  id: \"workflow-id\",\n  intent: \"Activate workflow for production\",\n  operations: [{type: \"activateWorkflow\"}]\n});\n```\n\n---\n\n## Detailed Guides\n\n### Node Discovery Tools\nSee [SEARCH_GUIDE.md](SEARCH_GUIDE.md) for:\n- search_nodes\n- get_node with detail levels (minimal, standard, full)\n- get_node modes (info, docs, search_properties, versions)\n\n### Validation Tools\nSee [VALIDATION_GUIDE.md](VALIDATION_GUIDE.md) for:\n- Validation profiles explained\n- validate_node with modes (minimal, full)\n- validate_workflow complete structure\n- Auto-sanitization system\n- Handling validation errors\n\n### Workflow Management\nSee [WORKFLOW_GUIDE.md](WORKFLOW_GUIDE.md) for:\n- n8n_create_workflow\n- n8n_update_partial_workflow (17 operation types!)\n- Smart parameters (branch, case)\n- AI connection types (8 types)\n- Workflow activation (activateWorkflow/deactivateWorkflow)\n- n8n_deploy_template\n- n8n_workflow_versions\n\n---\n\n## Template Usage\n\n### Search Templates\n\n```javascript\n// Search by keyword (default mode)\nsearch_templates({\n  query: \"webhook slack\",\n  limit: 20\n});\n\n// Search by node types\nsearch_templates({\n  searchMode: \"by_nodes\",\n  nodeTypes: [\"n8n-nodes-base.httpRequest\", \"n8n-nodes-base.slack\"]\n});\n\n// Search by task type\nsearch_templates({\n  searchMode: \"by_task\",\n  task: \"webhook_processing\"\n});\n\n// Search by metadata (complexity, setup time)\nsearch_templates({\n  searchMode: \"by_metadata\",\n  complexity: \"simple\",\n  maxSetupMinutes: 15\n});\n```\n\n### Get Template Details\n\n```javascript\nget_template({\n  templateId: 2947,\n  mode: \"structure\"  // nodes+connections only\n});\n\nget_template({\n  templateId: 2947,\n  mode: \"full\"  // complete workflow JSON\n});\n```\n\n### Deploy Template Directly\n\n```javascript\n// Deploy template to your n8n instance\nn8n_deploy_template({\n  templateId: 2947,\n  name: \"My Weather to Slack\",  // Custom name (optional)\n  autoFix: true,  // Auto-fix common issues (default)\n  autoUpgradeVersions: true  // Upgrade node versions (default)\n});\n// Returns: workflow ID, required credentials, fixes applied\n```\n\n---\n\n## Self-Help Tools\n\n### Get Tool Documentation\n\n```javascript\n// Overview of all tools\ntools_documentation()\n\n// Specific tool details\ntools_documentation({\n  topic: \"search_nodes\",\n  depth: \"full\"\n})\n\n// Code node guides\ntools_documentation({topic: \"javascript_code_node_guide\", depth: \"full\"})\ntools_documentation({topic: \"python_code_node_guide\", depth: \"full\"})\n```\n\n### AI Agent Guide\n\n```javascript\n// Comprehensive AI workflow guide\nai_agents_guide()\n// Returns: Architecture, connections, tools, validation, best practices\n```\n\n### Health Check\n\n```javascript\n// Quick health check\nn8n_health_check()\n\n// Detailed diagnostics\nn8n_health_check({mode: \"diagnostic\"})\n// â†’ Returns: status, env vars, tool status, API connectivity\n```\n\n---\n\n## Tool Availability\n\n**Always Available** (no n8n API needed):\n- search_nodes, get_node\n- validate_node, validate_workflow\n- search_templates, get_template\n- tools_documentation, ai_agents_guide\n\n**Requires n8n API** (N8N_API_URL + N8N_API_KEY):\n- n8n_create_workflow\n- n8n_update_partial_workflow\n- n8n_validate_workflow (by ID)\n- n8n_list_workflows, n8n_get_workflow\n- n8n_test_workflow\n- n8n_executions\n- n8n_deploy_template\n- n8n_workflow_versions\n- n8n_autofix_workflow\n\nIf API tools unavailable, use templates and validation-only workflows.\n\n---\n\n## Unified Tool Reference\n\n### get_node (Unified Node Information)\n\n**Detail Levels** (mode=\"info\", default):\n- `minimal` (~200 tokens) - Basic metadata only\n- `standard` (~1-2K tokens) - Essential properties + operations (RECOMMENDED)\n- `full` (~3-8K tokens) - Complete schema (use sparingly)\n\n**Operation Modes**:\n- `info` (default) - Node schema with detail level\n- `docs` - Readable markdown documentation\n- `search_properties` - Find specific properties (use with propertyQuery)\n- `versions` - List all versions with breaking changes\n- `compare` - Compare two versions\n- `breaking` - Show only breaking changes\n- `migrations` - Show auto-migratable changes\n\n```javascript\n// Standard (recommended)\nget_node({nodeType: \"nodes-base.httpRequest\"})\n\n// Get documentation\nget_node({nodeType: \"nodes-base.webhook\", mode: \"docs\"})\n\n// Search for properties\nget_node({nodeType: \"nodes-base.httpRequest\", mode: \"search_properties\", propertyQuery: \"auth\"})\n\n// Check versions\nget_node({nodeType: \"nodes-base.executeWorkflow\", mode: \"versions\"})\n```\n\n### validate_node (Unified Validation)\n\n**Modes**:\n- `full` (default) - Comprehensive validation with errors/warnings/suggestions\n- `minimal` - Quick required fields check only\n\n**Profiles** (for mode=\"full\"):\n- `minimal` - Very lenient\n- `runtime` - Standard (default, recommended)\n- `ai-friendly` - Balanced for AI workflows\n- `strict` - Most thorough (production)\n\n```javascript\n// Full validation with runtime profile\nvalidate_node({nodeType: \"nodes-base.slack\", config: {...}, profile: \"runtime\"})\n\n// Quick required fields check\nvalidate_node({nodeType: \"nodes-base.webhook\", config: {}, mode: \"minimal\"})\n```\n\n---\n\n## Performance Characteristics\n\n| Tool | Response Time | Payload Size |\n|------|---------------|--------------|\n| search_nodes | <20ms | Small |\n| get_node (standard) | <10ms | ~1-2KB |\n| get_node (full) | <100ms | 3-8KB |\n| validate_node (minimal) | <50ms | Small |\n| validate_node (full) | <100ms | Medium |\n| validate_workflow | 100-500ms | Medium |\n| n8n_create_workflow | 100-500ms | Medium |\n| n8n_update_partial_workflow | 50-200ms | Small |\n| n8n_deploy_template | 200-500ms | Medium |\n\n---\n\n## Best Practices\n\n### Do\n- Use `get_node({detail: \"standard\"})` for most use cases\n- Specify validation profile explicitly (`profile: \"runtime\"`)\n- Use smart parameters (`branch`, `case`) for clarity\n- Include `intent` parameter in workflow updates\n- Follow search â†’ get_node â†’ validate workflow\n- Iterate workflows (avg 56s between edits)\n- Validate after every significant change\n- Use `includeExamples: true` for real configs\n- Use `n8n_deploy_template` for quick starts\n\n### Don't\n- Use `detail: \"full\"` unless necessary (wastes tokens)\n- Forget nodeType prefix (`nodes-base.*`)\n- Skip validation profiles\n- Try to build workflows in one shot (iterate!)\n- Ignore auto-sanitization behavior\n- Use full prefix (`n8n-nodes-base.*`) with search/validate tools\n- Forget to activate workflows after building\n\n---\n\n## Summary\n\n**Most Important**:\n1. Use **get_node** with `detail: \"standard\"` (default) - covers 95% of use cases\n2. nodeType formats differ: `nodes-base.*` (search/validate) vs `n8n-nodes-base.*` (workflows)\n3. Specify **validation profiles** (`runtime` recommended)\n4. Use **smart parameters** (`branch=\"true\"`, `case=0`)\n5. Include **intent parameter** in workflow updates\n6. **Auto-sanitization** runs on ALL nodes during updates\n7. Workflows can be **activated via API** (`activateWorkflow` operation)\n8. Workflows are built **iteratively** (56s avg between edits)\n\n**Common Workflow**:\n1. search_nodes â†’ find node\n2. get_node â†’ understand config\n3. validate_node â†’ check config\n4. n8n_create_workflow â†’ build\n5. n8n_validate_workflow â†’ verify\n6. n8n_update_partial_workflow â†’ iterate\n7. activateWorkflow â†’ go live!\n\nFor details, see:\n- [SEARCH_GUIDE.md](SEARCH_GUIDE.md) - Node discovery\n- [VALIDATION_GUIDE.md](VALIDATION_GUIDE.md) - Configuration validation\n- [WORKFLOW_GUIDE.md](WORKFLOW_GUIDE.md) - Workflow management\n\n---\n\n**Related Skills**:\n- n8n Expression Syntax - Write expressions in workflow fields\n- n8n Workflow Patterns - Architectural patterns from templates\n- n8n Validation Expert - Interpret validation errors\n- n8n Node Configuration - Operation-specific requirements\n- n8n Code JavaScript - Write JavaScript in Code nodes\n- n8n Code Python - Write Python in Code nodes\n",
        "skills/n8n-mcp-tools-expert/VALIDATION_GUIDE.md": "# Configuration Validation Tools Guide\n\nComplete guide for validating node configurations and workflows.\n\n---\n\n## Validation Philosophy\n\n**Validate early, validate often**\n\nValidation is typically iterative with validate â†’ fix cycles\n\n---\n\n## validate_node (UNIFIED VALIDATION)\n\nThe `validate_node` tool provides all validation capabilities with different modes.\n\n### Quick Check (mode=\"minimal\")\n\n**Speed**: <50ms\n\n**Use when**: Checking what fields are required\n\n```javascript\nvalidate_node({\n  nodeType: \"nodes-base.slack\",\n  config: {},  // Empty to see all required fields\n  mode: \"minimal\"\n})\n```\n\n**Returns**:\n```javascript\n{\n  \"valid\": true,           // Usually true (most nodes have no strict requirements)\n  \"missingRequiredFields\": []\n}\n```\n\n**When to use**: Planning configuration, seeing basic requirements\n\n### Full Validation (mode=\"full\", DEFAULT)\n\n**Speed**: <100ms\n\n**Use when**: Validating actual configuration before deployment\n\n```javascript\nvalidate_node({\n  nodeType: \"nodes-base.slack\",\n  config: {\n    resource: \"channel\",\n    operation: \"create\",\n    channel: \"general\"\n  },\n  profile: \"runtime\"  // Recommended!\n})\n// mode=\"full\" is the default\n```\n\n---\n\n## Validation Profiles\n\nChoose based on your stage:\n\n**minimal** - Only required fields\n- Fastest\n- Most permissive\n- Use: Quick checks during editing\n\n**runtime** - Values + types (**RECOMMENDED**)\n- Balanced validation\n- Catches real errors\n- Use: Pre-deployment validation\n\n**ai-friendly** - Reduce false positives\n- For AI-generated configs\n- Tolerates minor issues\n- Use: When AI configures nodes\n\n**strict** - Maximum validation\n- Strictest rules\n- May have false positives\n- Use: Production deployment\n\n---\n\n## Validation Response\n\n```javascript\n{\n  \"nodeType\": \"nodes-base.slack\",\n  \"workflowNodeType\": \"n8n-nodes-base.slack\",\n  \"displayName\": \"Slack\",\n  \"valid\": false,\n  \"errors\": [\n    {\n      \"type\": \"missing_required\",\n      \"property\": \"name\",\n      \"message\": \"Channel name is required\",\n      \"fix\": \"Provide a channel name (lowercase, no spaces, 1-80 characters)\"\n    }\n  ],\n  \"warnings\": [\n    {\n      \"type\": \"best_practice\",\n      \"property\": \"errorHandling\",\n      \"message\": \"Slack API can have rate limits\",\n      \"suggestion\": \"Add onError: 'continueRegularOutput' with retryOnFail\"\n    }\n  ],\n  \"suggestions\": [],\n  \"summary\": {\n    \"hasErrors\": true,\n    \"errorCount\": 1,\n    \"warningCount\": 1,\n    \"suggestionCount\": 0\n  }\n}\n```\n\n### Error Types\n\n- `missing_required` - Must fix\n- `invalid_value` - Must fix\n- `type_mismatch` - Must fix\n- `best_practice` - Should fix (warning)\n- `suggestion` - Optional improvement\n\n---\n\n## validate_workflow (STRUCTURE VALIDATION)\n\n**Speed**: 100-500ms\n\n**Use when**: Checking complete workflow before execution\n\n**Syntax**:\n```javascript\nvalidate_workflow({\n  workflow: {\n    nodes: [...],        // Array of nodes\n    connections: {...}   // Connections object\n  },\n  options: {\n    validateNodes: true,       // Default: true\n    validateConnections: true, // Default: true\n    validateExpressions: true, // Default: true\n    profile: \"runtime\"         // For node validation\n  }\n})\n```\n\n**Validates**:\n- Node configurations\n- Connection validity (no broken references)\n- Expression syntax ({{ }} patterns)\n- Workflow structure (triggers, flow)\n- AI connections (8 types)\n\n**Returns**: Comprehensive validation report with errors, warnings, suggestions\n\n### Validate by Workflow ID\n\n```javascript\n// Validate workflow already in n8n\nn8n_validate_workflow({\n  id: \"workflow-id\",\n  options: {\n    validateNodes: true,\n    validateConnections: true,\n    validateExpressions: true,\n    profile: \"runtime\"\n  }\n})\n```\n\n---\n\n## Validation Loop Pattern\n\n**Typical cycle**: 23s thinking, 58s fixing\n\n```\n1. Configure node\n   â†“\n2. validate_node (23s thinking about errors)\n   â†“\n3. Fix errors\n   â†“\n4. validate_node again (58s fixing)\n   â†“\n5. Repeat until valid\n```\n\n**Example**:\n```javascript\n// Iteration 1\nlet config = {\n  resource: \"channel\",\n  operation: \"create\"\n};\n\nconst result1 = validate_node({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n// â†’ Error: Missing \"name\"\n\n// Iteration 2 (~58s later)\nconfig.name = \"general\";\n\nconst result2 = validate_node({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n// â†’ Valid!\n```\n\n---\n\n## Auto-Sanitization System\n\n**When it runs**: On ANY workflow update (create or update_partial)\n\n**What it fixes** (automatically on ALL nodes):\n1. Binary operators (equals, contains, greaterThan) â†’ removes `singleValue`\n2. Unary operators (isEmpty, isNotEmpty, true, false) â†’ adds `singleValue: true`\n3. Invalid operator structures â†’ corrects to proper format\n4. IF v2.2+ nodes â†’ adds complete `conditions.options` metadata\n5. Switch v3.2+ nodes â†’ adds complete `conditions.options` for all rules\n\n**What it CANNOT fix**:\n- Broken connections (references to non-existent nodes)\n- Branch count mismatches (3 Switch rules but only 2 outputs)\n- Paradoxical corrupt states (API returns corrupt, rejects updates)\n\n**Example**:\n```javascript\n// Before auto-sanitization\n{\n  \"type\": \"boolean\",\n  \"operation\": \"equals\",\n  \"singleValue\": true  // Binary operators shouldn't have this\n}\n\n// After auto-sanitization (automatic!)\n{\n  \"type\": \"boolean\",\n  \"operation\": \"equals\"\n  // singleValue removed automatically\n}\n```\n\n**Recovery tools**:\n- `cleanStaleConnections` operation - removes broken connections\n- `n8n_autofix_workflow({id})` - preview/apply fixes\n\n---\n\n## n8n_autofix_workflow (AUTO-FIX TOOL)\n\n**Use when**: Validation errors need automatic fixes\n\n```javascript\n// Preview fixes (default - doesn't apply)\nn8n_autofix_workflow({\n  id: \"workflow-id\",\n  applyFixes: false,  // Preview mode\n  confidenceThreshold: \"medium\"  // high, medium, low\n})\n\n// Apply fixes\nn8n_autofix_workflow({\n  id: \"workflow-id\",\n  applyFixes: true\n})\n```\n\n**Fix Types**:\n- `expression-format` - Fix expression syntax\n- `typeversion-correction` - Correct typeVersion\n- `error-output-config` - Fix error output settings\n- `webhook-missing-path` - Add missing webhook paths\n- `typeversion-upgrade` - Upgrade to latest version\n- `version-migration` - Apply version migrations\n\n---\n\n## Binary vs Unary Operators\n\n**Binary operators** (compare two values):\n- equals, notEquals, contains, notContains\n- greaterThan, lessThan, startsWith, endsWith\n- **Must NOT have** `singleValue: true`\n\n**Unary operators** (check single value):\n- isEmpty, isNotEmpty, true, false\n- **Must have** `singleValue: true`\n\n**Auto-sanitization fixes these automatically!**\n\n---\n\n## Handling Validation Errors\n\n### Process\n\n```\n1. Read error message carefully\n2. Check if it's a known false positive\n3. Fix real errors\n4. Validate again\n5. Iterate until clean\n```\n\n### Common Errors\n\n**\"Required field missing\"**\nâ†’ Add the field with appropriate value\n\n**\"Invalid value\"**\nâ†’ Check allowed values in get_node output\n\n**\"Type mismatch\"**\nâ†’ Convert to correct type (string/number/boolean)\n\n**\"Cannot have singleValue\"**\nâ†’ Auto-sanitization will fix on next update\n\n**\"Missing operator metadata\"**\nâ†’ Auto-sanitization will fix on next update\n\n### False Positives\n\nSome validation warnings may be acceptable:\n- Optional best practices\n- Node-specific edge cases\n- Profile-dependent issues\n\nUse **ai-friendly** profile to reduce false positives.\n\n---\n\n## Best Practices\n\n### Do\n\n- Use **runtime** profile for pre-deployment\n- Validate after every configuration change\n- Fix errors immediately (avg 58s)\n- Iterate validation loop\n- Trust auto-sanitization for operator issues\n- Use `mode: \"minimal\"` for quick checks\n- Use `n8n_autofix_workflow` for bulk fixes\n- Activate workflows via API when ready (`activateWorkflow` operation)\n\n### Don't\n\n- Skip validation before deployment\n- Ignore error messages\n- Use strict profile during development (too many warnings)\n- Assume validation passed (check result)\n- Try to manually fix auto-sanitization issues\n\n---\n\n## Example: Complete Validation Workflow\n\n```javascript\n// Step 1: Get node requirements (quick check)\nvalidate_node({\n  nodeType: \"nodes-base.slack\",\n  config: {},\n  mode: \"minimal\"\n});\n// â†’ Know what's required\n\n// Step 2: Configure node\nconst config = {\n  resource: \"message\",\n  operation: \"post\",\n  channel: \"#general\",\n  text: \"Hello!\"\n};\n\n// Step 3: Validate configuration (full validation)\nconst result = validate_node({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n\n// Step 4: Check result\nif (result.valid) {\n  console.log(\"Configuration valid!\");\n} else {\n  console.log(\"Errors:\", result.errors);\n  // Fix and validate again\n}\n\n// Step 5: Validate in workflow context\nvalidate_workflow({\n  workflow: {\n    nodes: [{...config as node...}],\n    connections: {...}\n  }\n});\n\n// Step 6: Apply auto-fixes if needed\nn8n_autofix_workflow({\n  id: \"workflow-id\",\n  applyFixes: true\n});\n```\n\n---\n\n## Summary\n\n**Key Points**:\n1. Use **runtime** profile (balanced validation)\n2. Validation loop: validate â†’ fix (58s) â†’ validate again\n3. Auto-sanitization fixes operator structures automatically\n4. Binary operators â‰  singleValue, Unary operators = singleValue: true\n5. Iterate until validation passes\n6. Use `n8n_autofix_workflow` for automatic fixes\n\n**Tool Selection**:\n- **validate_node({mode: \"minimal\"})**: Quick required fields check\n- **validate_node({profile: \"runtime\"})**: Full config validation (**use this!**)\n- **validate_workflow**: Complete workflow check\n- **n8n_validate_workflow({id})**: Validate existing workflow\n- **n8n_autofix_workflow({id})**: Auto-fix common issues\n\n**Related**:\n- [SEARCH_GUIDE.md](SEARCH_GUIDE.md) - Find nodes\n- [WORKFLOW_GUIDE.md](WORKFLOW_GUIDE.md) - Build workflows\n",
        "skills/n8n-mcp-tools-expert/WORKFLOW_GUIDE.md": "# Workflow Management Tools Guide\n\nComplete guide for creating, updating, and managing n8n workflows.\n\n---\n\n## Tool Availability\n\n**Requires n8n API**: All tools in this guide need `N8N_API_URL` and `N8N_API_KEY` configured.\n\nIf unavailable, use template examples and validation-only workflows.\n\n---\n\n## n8n_create_workflow\n\n**Speed**: 100-500ms\n\n**Use when**: Creating new workflows from scratch\n\n**Syntax**:\n```javascript\nn8n_create_workflow({\n  name: \"Webhook to Slack\",  // Required\n  nodes: [...],              // Required: array of nodes\n  connections: {...},        // Required: connections object\n  settings: {...}            // Optional: workflow settings\n})\n```\n\n**Returns**: Created workflow with ID\n\n**Example**:\n```javascript\nn8n_create_workflow({\n  name: \"Webhook to Slack\",\n  nodes: [\n    {\n      id: \"webhook-1\",\n      name: \"Webhook\",\n      type: \"n8n-nodes-base.webhook\",  // Full prefix!\n      typeVersion: 2,\n      position: [250, 300],\n      parameters: {\n        path: \"slack-notify\",\n        httpMethod: \"POST\"\n      }\n    },\n    {\n      id: \"slack-1\",\n      name: \"Slack\",\n      type: \"n8n-nodes-base.slack\",\n      typeVersion: 2,\n      position: [450, 300],\n      parameters: {\n        resource: \"message\",\n        operation: \"post\",\n        channel: \"#general\",\n        text: \"={{$json.body.message}}\"\n      }\n    }\n  ],\n  connections: {\n    \"Webhook\": {\n      \"main\": [[{node: \"Slack\", type: \"main\", index: 0}]]\n    }\n  }\n})\n```\n\n**Notes**:\n- Workflows created **inactive** (activate with `activateWorkflow` operation)\n- Auto-sanitization runs on creation\n- Validate before creating for best results\n\n---\n\n## n8n_update_partial_workflow (MOST USED!)\n\n**Speed**: 50-200ms | **Uses**: 38,287 (most used tool!)\n\n**Use when**: Making incremental changes to workflows\n\n**Common pattern**: 56s average between edits (iterative building!)\n\n### 17 Operation Types\n\n**Node Operations** (6 types):\n1. `addNode` - Add new node\n2. `removeNode` - Remove node by ID or name\n3. `updateNode` - Update node properties (use dot notation)\n4. `moveNode` - Change position\n5. `enableNode` - Enable disabled node\n6. `disableNode` - Disable active node\n\n**Connection Operations** (5 types):\n7. `addConnection` - Connect nodes (supports smart params)\n8. `removeConnection` - Remove connection (supports ignoreErrors)\n9. `rewireConnection` - Change connection target\n10. `cleanStaleConnections` - Auto-remove broken connections\n11. `replaceConnections` - Replace entire connections object\n\n**Metadata Operations** (4 types):\n12. `updateSettings` - Workflow settings\n13. `updateName` - Rename workflow\n14. `addTag` - Add tag\n15. `removeTag` - Remove tag\n\n**Activation Operations** (2 types):\n16. `activateWorkflow` - Activate workflow for automatic execution\n17. `deactivateWorkflow` - Deactivate workflow\n\n### Intent Parameter (IMPORTANT!)\n\nAlways include `intent` for better responses:\n\n```javascript\nn8n_update_partial_workflow({\n  id: \"workflow-id\",\n  intent: \"Add error handling for API failures\",  // Describe what you're doing\n  operations: [...]\n})\n```\n\n### Smart Parameters\n\n**IF nodes** - Use semantic branch names:\n```javascript\n{\n  type: \"addConnection\",\n  source: \"IF\",\n  target: \"True Handler\",\n  branch: \"true\"  // Instead of sourceIndex: 0\n}\n\n{\n  type: \"addConnection\",\n  source: \"IF\",\n  target: \"False Handler\",\n  branch: \"false\"  // Instead of sourceIndex: 1\n}\n```\n\n**Switch nodes** - Use semantic case numbers:\n```javascript\n{\n  type: \"addConnection\",\n  source: \"Switch\",\n  target: \"Handler A\",\n  case: 0\n}\n\n{\n  type: \"addConnection\",\n  source: \"Switch\",\n  target: \"Handler B\",\n  case: 1\n}\n```\n\n### AI Connection Types (8 types)\n\n**Full support** for AI workflows:\n\n```javascript\n// Language Model\n{\n  type: \"addConnection\",\n  source: \"OpenAI Chat Model\",\n  target: \"AI Agent\",\n  sourceOutput: \"ai_languageModel\"\n}\n\n// Tool\n{\n  type: \"addConnection\",\n  source: \"HTTP Request Tool\",\n  target: \"AI Agent\",\n  sourceOutput: \"ai_tool\"\n}\n\n// Memory\n{\n  type: \"addConnection\",\n  source: \"Window Buffer Memory\",\n  target: \"AI Agent\",\n  sourceOutput: \"ai_memory\"\n}\n\n// All 8 types:\n// - ai_languageModel\n// - ai_tool\n// - ai_memory\n// - ai_outputParser\n// - ai_embedding\n// - ai_vectorStore\n// - ai_document\n// - ai_textSplitter\n```\n\n### Property Removal with undefined\n\nRemove properties by setting them to `undefined`:\n\n```javascript\n// Remove a property\n{\n  type: \"updateNode\",\n  nodeName: \"HTTP Request\",\n  updates: { onError: undefined }\n}\n\n// Migrate from deprecated property\n{\n  type: \"updateNode\",\n  nodeName: \"HTTP Request\",\n  updates: {\n    continueOnFail: undefined,  // Remove old\n    onError: \"continueErrorOutput\"  // Add new\n  }\n}\n```\n\n### Activation Operations\n\n```javascript\n// Activate workflow\nn8n_update_partial_workflow({\n  id: \"workflow-id\",\n  intent: \"Activate workflow for production\",\n  operations: [{type: \"activateWorkflow\"}]\n})\n\n// Deactivate workflow\nn8n_update_partial_workflow({\n  id: \"workflow-id\",\n  intent: \"Deactivate workflow for maintenance\",\n  operations: [{type: \"deactivateWorkflow\"}]\n})\n```\n\n### Example Usage\n\n```javascript\nn8n_update_partial_workflow({\n  id: \"workflow-id\",\n  intent: \"Add transform node after IF condition\",\n  operations: [\n    // Add node\n    {\n      type: \"addNode\",\n      node: {\n        name: \"Transform\",\n        type: \"n8n-nodes-base.set\",\n        position: [400, 300],\n        parameters: {}\n      }\n    },\n    // Connect it (smart parameter)\n    {\n      type: \"addConnection\",\n      source: \"IF\",\n      target: \"Transform\",\n      branch: \"true\"  // Clear and semantic!\n    }\n  ]\n})\n```\n\n### Cleanup & Recovery\n\n**cleanStaleConnections** - Remove broken connections:\n```javascript\n{type: \"cleanStaleConnections\"}\n```\n\n**rewireConnection** - Change target atomically:\n```javascript\n{\n  type: \"rewireConnection\",\n  source: \"Webhook\",\n  from: \"Old Handler\",\n  to: \"New Handler\"\n}\n```\n\n**Best-effort mode** - Apply what works:\n```javascript\nn8n_update_partial_workflow({\n  id: \"workflow-id\",\n  operations: [...],\n  continueOnError: true  // Don't fail if some operations fail\n})\n```\n\n**Validate before applying**:\n```javascript\nn8n_update_partial_workflow({\n  id: \"workflow-id\",\n  operations: [...],\n  validateOnly: true  // Preview without applying\n})\n```\n\n---\n\n## n8n_deploy_template (QUICK START!)\n\n**Speed**: 200-500ms\n\n**Use when**: Deploying a template directly to n8n instance\n\n```javascript\nn8n_deploy_template({\n  templateId: 2947,  // Required: from n8n.io\n  name: \"My Weather to Slack\",  // Optional: custom name\n  autoFix: true,  // Default: auto-fix common issues\n  autoUpgradeVersions: true,  // Default: upgrade node versions\n  stripCredentials: true  // Default: remove credential refs\n})\n```\n\n**Returns**:\n- Workflow ID\n- Required credentials\n- Fixes applied\n\n**Example**:\n```javascript\n// Deploy a webhook to Slack template\nconst result = n8n_deploy_template({\n  templateId: 2947,\n  name: \"Production Slack Notifier\"\n});\n\n// Result includes:\n// - id: \"new-workflow-id\"\n// - requiredCredentials: [\"slack\"]\n// - fixesApplied: [\"typeVersion upgraded\", \"expression format fixed\"]\n```\n\n---\n\n## n8n_workflow_versions (VERSION CONTROL)\n\n**Use when**: Managing workflow history, rollback, cleanup\n\n### List Versions\n```javascript\nn8n_workflow_versions({\n  mode: \"list\",\n  workflowId: \"workflow-id\",\n  limit: 10\n})\n```\n\n### Get Specific Version\n```javascript\nn8n_workflow_versions({\n  mode: \"get\",\n  versionId: 123\n})\n```\n\n### Rollback to Previous Version\n```javascript\nn8n_workflow_versions({\n  mode: \"rollback\",\n  workflowId: \"workflow-id\",\n  versionId: 123,  // Optional: specific version\n  validateBefore: true  // Default: validate before rollback\n})\n```\n\n### Delete Versions\n```javascript\n// Delete specific version\nn8n_workflow_versions({\n  mode: \"delete\",\n  workflowId: \"workflow-id\",\n  versionId: 123\n})\n\n// Delete all versions for workflow\nn8n_workflow_versions({\n  mode: \"delete\",\n  workflowId: \"workflow-id\",\n  deleteAll: true\n})\n```\n\n### Prune Old Versions\n```javascript\nn8n_workflow_versions({\n  mode: \"prune\",\n  workflowId: \"workflow-id\",\n  maxVersions: 10  // Keep 10 most recent\n})\n```\n\n---\n\n## n8n_test_workflow (TRIGGER EXECUTION)\n\n**Use when**: Testing workflow execution\n\n**Auto-detects** trigger type (webhook, form, chat)\n\n```javascript\n// Test webhook workflow\nn8n_test_workflow({\n  workflowId: \"workflow-id\",\n  triggerType: \"webhook\",  // Optional: auto-detected\n  httpMethod: \"POST\",\n  data: {message: \"Hello!\"},\n  waitForResponse: true,\n  timeout: 120000\n})\n\n// Test chat workflow\nn8n_test_workflow({\n  workflowId: \"workflow-id\",\n  triggerType: \"chat\",\n  message: \"Hello, AI agent!\",\n  sessionId: \"session-123\"  // For conversation continuity\n})\n```\n\n---\n\n## n8n_validate_workflow (by ID)\n\n**Use when**: Validating workflow stored in n8n\n\n```javascript\nn8n_validate_workflow({\n  id: \"workflow-id\",\n  options: {\n    validateNodes: true,\n    validateConnections: true,\n    validateExpressions: true,\n    profile: \"runtime\"\n  }\n})\n```\n\n---\n\n## n8n_get_workflow\n\n**Use when**: Retrieving workflow details\n\n**Modes**:\n- `full` (default) - Complete workflow JSON\n- `details` - Full + execution stats\n- `structure` - Nodes + connections only\n- `minimal` - ID, name, active, tags\n\n```javascript\n// Full workflow\nn8n_get_workflow({id: \"workflow-id\"})\n\n// Just structure\nn8n_get_workflow({id: \"workflow-id\", mode: \"structure\"})\n\n// Minimal metadata\nn8n_get_workflow({id: \"workflow-id\", mode: \"minimal\"})\n```\n\n---\n\n## n8n_executions (EXECUTION MANAGEMENT)\n\n**Use when**: Managing workflow executions\n\n### Get Execution Details\n```javascript\nn8n_executions({\n  action: \"get\",\n  id: \"execution-id\",\n  mode: \"summary\"  // preview, summary, filtered, full, error\n})\n\n// Error mode for debugging\nn8n_executions({\n  action: \"get\",\n  id: \"execution-id\",\n  mode: \"error\",\n  includeStackTrace: true\n})\n```\n\n### List Executions\n```javascript\nn8n_executions({\n  action: \"list\",\n  workflowId: \"workflow-id\",\n  status: \"error\",  // success, error, waiting\n  limit: 100\n})\n```\n\n### Delete Execution\n```javascript\nn8n_executions({\n  action: \"delete\",\n  id: \"execution-id\"\n})\n```\n\n---\n\n## Workflow Lifecycle\n\n**Standard pattern**:\n```\n1. CREATE\n   n8n_create_workflow({...})\n   â†’ Returns workflow ID\n\n2. VALIDATE\n   n8n_validate_workflow({id})\n   â†’ Check for errors\n\n3. EDIT (iterative! 56s avg between edits)\n   n8n_update_partial_workflow({id, intent: \"...\", operations: [...]})\n   â†’ Make changes\n\n4. VALIDATE AGAIN\n   n8n_validate_workflow({id})\n   â†’ Verify changes\n\n5. ACTIVATE\n   n8n_update_partial_workflow({\n     id,\n     intent: \"Activate workflow\",\n     operations: [{type: \"activateWorkflow\"}]\n   })\n   â†’ Workflow now runs on triggers!\n\n6. MONITOR\n   n8n_executions({action: \"list\", workflowId: id})\n   n8n_executions({action: \"get\", id: execution_id})\n```\n\n---\n\n## Common Patterns from Telemetry\n\n### Pattern 1: Edit â†’ Validate (7,841 occurrences)\n```javascript\nn8n_update_partial_workflow({...})\n// â†“ 23s (thinking about what to validate)\nn8n_validate_workflow({id})\n```\n\n### Pattern 2: Validate â†’ Fix (7,266 occurrences)\n```javascript\nn8n_validate_workflow({id})\n// â†“ 58s (fixing errors)\nn8n_update_partial_workflow({...})\n```\n\n### Pattern 3: Iterative Building (31,464 occurrences)\n```javascript\nupdate â†’ update â†’ update â†’ ... (56s avg between edits)\n```\n\n**This shows**: Workflows are built **iteratively**, not in one shot!\n\n---\n\n## Best Practices\n\n### Do\n\n- Build workflows **iteratively** (avg 56s between edits)\n- Include **intent** parameter for better responses\n- Use **smart parameters** (branch, case) for clarity\n- Validate **after** significant changes\n- Use **atomic mode** (default) for critical updates\n- Specify **sourceOutput** for AI connections\n- Clean stale connections after node renames/deletions\n- Use `n8n_deploy_template` for quick starts\n- Activate workflows via API when ready\n\n### Don't\n\n- Try to build workflows in one shot\n- Skip the intent parameter\n- Use sourceIndex when branch/case available\n- Skip validation before activation\n- Forget to test workflows after creation\n- Ignore auto-sanitization behavior\n\n---\n\n## Summary\n\n**Most Important**:\n1. **n8n_update_partial_workflow** is most-used tool (38,287 uses)\n2. Include **intent** parameter for better responses\n3. Workflows built **iteratively** (56s avg between edits)\n4. Use **smart parameters** (branch=\"true\", case=0) for clarity\n5. **AI connections** supported (8 types with sourceOutput)\n6. **Workflow activation** supported via API (`activateWorkflow` operation)\n7. **Auto-sanitization** runs on all operations\n8. Use **n8n_deploy_template** for quick starts\n\n**New Tools**:\n- `n8n_deploy_template` - Deploy templates directly\n- `n8n_workflow_versions` - Version control & rollback\n- `n8n_test_workflow` - Trigger execution\n- `n8n_executions` - Manage executions\n\n**Related**:\n- [SEARCH_GUIDE.md](SEARCH_GUIDE.md) - Find nodes to add\n- [VALIDATION_GUIDE.md](VALIDATION_GUIDE.md) - Validate workflows\n",
        "skills/n8n-node-configuration/DEPENDENCIES.md": "# Property Dependencies Guide\n\nDeep dive into n8n property dependencies and displayOptions mechanism.\n\n---\n\n## What Are Property Dependencies?\n\n**Definition**: Rules that control when fields are visible or required based on other field values.\n\n**Mechanism**: `displayOptions` in node schema\n\n**Purpose**:\n- Show relevant fields only\n- Hide irrelevant fields\n- Simplify configuration UX\n- Prevent invalid configurations\n\n---\n\n## displayOptions Structure\n\n### Basic Format\n\n```javascript\n{\n  \"name\": \"fieldName\",\n  \"type\": \"string\",\n  \"displayOptions\": {\n    \"show\": {\n      \"otherField\": [\"value1\", \"value2\"]\n    }\n  }\n}\n```\n\n**Translation**: Show `fieldName` when `otherField` equals \"value1\" OR \"value2\"\n\n### Show vs Hide\n\n#### show (Most Common)\n\n**Show field when condition matches**:\n```javascript\n{\n  \"name\": \"body\",\n  \"displayOptions\": {\n    \"show\": {\n      \"sendBody\": [true]\n    }\n  }\n}\n```\n\n**Meaning**: Show `body` when `sendBody = true`\n\n#### hide (Less Common)\n\n**Hide field when condition matches**:\n```javascript\n{\n  \"name\": \"advanced\",\n  \"displayOptions\": {\n    \"hide\": {\n      \"simpleMode\": [true]\n    }\n  }\n}\n```\n\n**Meaning**: Hide `advanced` when `simpleMode = true`\n\n### Multiple Conditions (AND Logic)\n\n```javascript\n{\n  \"name\": \"body\",\n  \"displayOptions\": {\n    \"show\": {\n      \"sendBody\": [true],\n      \"method\": [\"POST\", \"PUT\", \"PATCH\"]\n    }\n  }\n}\n```\n\n**Meaning**: Show `body` when:\n- `sendBody = true` AND\n- `method IN (POST, PUT, PATCH)`\n\n**All conditions must match** (AND logic)\n\n### Multiple Values (OR Logic)\n\n```javascript\n{\n  \"name\": \"someField\",\n  \"displayOptions\": {\n    \"show\": {\n      \"method\": [\"POST\", \"PUT\", \"PATCH\"]\n    }\n  }\n}\n```\n\n**Meaning**: Show `someField` when:\n- `method = POST` OR\n- `method = PUT` OR\n- `method = PATCH`\n\n**Any value matches** (OR logic)\n\n---\n\n## Common Dependency Patterns\n\n### Pattern 1: Boolean Toggle\n\n**Use case**: Optional feature flag\n\n**Example**: HTTP Request sendBody\n```javascript\n// Field: sendBody (boolean)\n{\n  \"name\": \"sendBody\",\n  \"type\": \"boolean\",\n  \"default\": false\n}\n\n// Field: body (depends on sendBody)\n{\n  \"name\": \"body\",\n  \"displayOptions\": {\n    \"show\": {\n      \"sendBody\": [true]\n    }\n  }\n}\n```\n\n**Flow**:\n1. User sees sendBody checkbox\n2. When checked â†’ body field appears\n3. When unchecked â†’ body field hides\n\n### Pattern 2: Resource/Operation Cascade\n\n**Use case**: Different operations show different fields\n\n**Example**: Slack message operations\n```javascript\n// Operation: post\n{\n  \"name\": \"channel\",\n  \"displayOptions\": {\n    \"show\": {\n      \"resource\": [\"message\"],\n      \"operation\": [\"post\"]\n    }\n  }\n}\n\n// Operation: update\n{\n  \"name\": \"messageId\",\n  \"displayOptions\": {\n    \"show\": {\n      \"resource\": [\"message\"],\n      \"operation\": [\"update\"]\n    }\n  }\n}\n```\n\n**Flow**:\n1. User selects resource=\"message\"\n2. User selects operation=\"post\" â†’ sees channel\n3. User changes to operation=\"update\" â†’ channel hides, messageId shows\n\n### Pattern 3: Type-Specific Configuration\n\n**Use case**: Different types need different fields\n\n**Example**: IF node conditions\n```javascript\n// String operations\n{\n  \"name\": \"value2\",\n  \"displayOptions\": {\n    \"show\": {\n      \"conditions.string.0.operation\": [\"equals\", \"notEquals\", \"contains\"]\n    }\n  }\n}\n\n// Unary operations (isEmpty) don't show value2\n{\n  \"displayOptions\": {\n    \"hide\": {\n      \"conditions.string.0.operation\": [\"isEmpty\", \"isNotEmpty\"]\n    }\n  }\n}\n```\n\n### Pattern 4: Method-Specific Fields\n\n**Use case**: HTTP methods have different options\n\n**Example**: HTTP Request\n```javascript\n// Query parameters (all methods can have)\n{\n  \"name\": \"queryParameters\",\n  \"displayOptions\": {\n    \"show\": {\n      \"sendQuery\": [true]\n    }\n  }\n}\n\n// Body (only certain methods)\n{\n  \"name\": \"body\",\n  \"displayOptions\": {\n    \"show\": {\n      \"sendBody\": [true],\n      \"method\": [\"POST\", \"PUT\", \"PATCH\", \"DELETE\"]\n    }\n  }\n}\n```\n\n---\n\n## Finding Property Dependencies\n\n### Using get_node with search_properties Mode\n\n```javascript\n// Find properties related to \"body\"\nget_node({\n  nodeType: \"nodes-base.httpRequest\",\n  mode: \"search_properties\",\n  propertyQuery: \"body\"\n});\n```\n\n### Using get_node with Full Detail\n\n```javascript\n// Get complete schema with displayOptions\nget_node({\n  nodeType: \"nodes-base.httpRequest\",\n  detail: \"full\"\n});\n```\n\n### When to Use\n\n**âœ… Use when**:\n- Validation fails with \"missing field\" but you don't see that field\n- A field appears/disappears unexpectedly\n- You need to understand what controls field visibility\n- Building dynamic configuration tools\n\n**âŒ Don't use when**:\n- Simple configuration (use `get_node` with standard detail)\n- Just starting configuration\n- Field requirements are obvious\n\n---\n\n## Complex Dependency Examples\n\n### Example 1: HTTP Request Complete Flow\n\n**Scenario**: Configuring POST with JSON body\n\n**Step 1**: Set method\n```javascript\n{\n  \"method\": \"POST\"\n  // â†’ sendBody becomes visible\n}\n```\n\n**Step 2**: Enable body\n```javascript\n{\n  \"method\": \"POST\",\n  \"sendBody\": true\n  // â†’ body field becomes visible AND required\n}\n```\n\n**Step 3**: Configure body\n```javascript\n{\n  \"method\": \"POST\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\"\n    // â†’ content field becomes visible AND required\n  }\n}\n```\n\n**Step 4**: Add content\n```javascript\n{\n  \"method\": \"POST\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {\n      \"name\": \"John\",\n      \"email\": \"john@example.com\"\n    }\n  }\n}\n// âœ… Valid!\n```\n\n**Dependency chain**:\n```\nmethod=POST\n  â†’ sendBody visible\n    â†’ sendBody=true\n      â†’ body visible + required\n        â†’ body.contentType=json\n          â†’ body.content visible + required\n```\n\n### Example 2: IF Node Operator Dependencies\n\n**Scenario**: String comparison with different operators\n\n**Binary operator** (equals):\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"operation\": \"equals\"\n        // â†’ value1 required\n        // â†’ value2 required\n        // â†’ singleValue should NOT be set\n      }\n    ]\n  }\n}\n```\n\n**Unary operator** (isEmpty):\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"operation\": \"isEmpty\"\n        // â†’ value1 required\n        // â†’ value2 should NOT be set\n        // â†’ singleValue should be true (auto-added)\n      }\n    ]\n  }\n}\n```\n\n**Dependency table**:\n\n| Operator | value1 | value2 | singleValue |\n|---|---|---|---|\n| equals | Required | Required | false |\n| notEquals | Required | Required | false |\n| contains | Required | Required | false |\n| isEmpty | Required | Hidden | true |\n| isNotEmpty | Required | Hidden | true |\n\n### Example 3: Slack Operation Matrix\n\n**Scenario**: Different Slack operations show different fields\n\n```javascript\n// post message\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\"\n  // Shows: channel (required), text (required), attachments, blocks\n}\n\n// update message\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\"\n  // Shows: messageId (required), text (required), channel (optional)\n}\n\n// delete message\n{\n  \"resource\": \"message\",\n  \"operation\": \"delete\"\n  // Shows: messageId (required), channel (required)\n  // Hides: text, attachments, blocks\n}\n\n// get message\n{\n  \"resource\": \"message\",\n  \"operation\": \"get\"\n  // Shows: messageId (required), channel (required)\n  // Hides: text, attachments, blocks\n}\n```\n\n**Field visibility matrix**:\n\n| Field | post | update | delete | get |\n|---|---|---|---|---|\n| channel | Required | Optional | Required | Required |\n| text | Required | Required | Hidden | Hidden |\n| messageId | Hidden | Required | Required | Required |\n| attachments | Optional | Optional | Hidden | Hidden |\n| blocks | Optional | Optional | Hidden | Hidden |\n\n---\n\n## Nested Dependencies\n\n### What Are They?\n\n**Definition**: Dependencies within object properties\n\n**Example**: HTTP Request body.contentType controls body.content structure\n\n```javascript\n{\n  \"body\": {\n    \"contentType\": \"json\",\n    // â†’ content expects JSON object\n    \"content\": {\n      \"key\": \"value\"\n    }\n  }\n}\n\n{\n  \"body\": {\n    \"contentType\": \"form-data\",\n    // â†’ content expects form fields array\n    \"content\": [\n      {\n        \"name\": \"field1\",\n        \"value\": \"value1\"\n      }\n    ]\n  }\n}\n```\n\n### How to Handle\n\n**Strategy**: Configure parent first, then children\n\n```javascript\n// Step 1: Parent\n{\n  \"body\": {\n    \"contentType\": \"json\"  // Set parent first\n  }\n}\n\n// Step 2: Children (structure determined by parent)\n{\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {           // JSON object format\n      \"key\": \"value\"\n    }\n  }\n}\n```\n\n---\n\n## Auto-Sanitization and Dependencies\n\n### What Auto-Sanitization Fixes\n\n**Operator structure issues** (IF/Switch nodes):\n\n**Example**: singleValue property\n```javascript\n// You configure (missing singleValue)\n{\n  \"type\": \"boolean\",\n  \"operation\": \"isEmpty\"\n  // Missing singleValue\n}\n\n// Auto-sanitization adds it\n{\n  \"type\": \"boolean\",\n  \"operation\": \"isEmpty\",\n  \"singleValue\": true  // âœ… Added automatically\n}\n```\n\n### What It Doesn't Fix\n\n**Missing required fields**:\n```javascript\n// You configure (missing channel)\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"text\": \"Hello\"\n  // Missing required field: channel\n}\n\n// Auto-sanitization does NOT add\n// You must add it yourself\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",  // â† You must add\n  \"text\": \"Hello\"\n}\n```\n\n---\n\n## Troubleshooting Dependencies\n\n### Problem 1: \"Field X is required but not visible\"\n\n**Error**:\n```json\n{\n  \"type\": \"missing_required\",\n  \"property\": \"body\",\n  \"message\": \"body is required\"\n}\n```\n\n**But you don't see body field in configuration!**\n\n**Solution**:\n```javascript\n// Check field dependencies using search_properties\nget_node({\n  nodeType: \"nodes-base.httpRequest\",\n  mode: \"search_properties\",\n  propertyQuery: \"body\"\n});\n\n// Find that body shows when sendBody=true\n// Add sendBody\n{\n  \"method\": \"POST\",\n  \"sendBody\": true,  // â† Now body appears!\n  \"body\": {...}\n}\n```\n\n### Problem 2: \"Field disappears when I change operation\"\n\n**Scenario**:\n```javascript\n// Working configuration\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",\n  \"text\": \"Hello\"\n}\n\n// Change operation\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",  // Changed\n  \"channel\": \"#general\",  // Still here\n  \"text\": \"Updated\"       // Still here\n  // Missing: messageId (required for update!)\n}\n```\n\n**Validation error**: \"messageId is required\"\n\n**Why**: Different operation = different required fields\n\n**Solution**:\n```javascript\n// Check requirements for new operation\nget_node({\n  nodeType: \"nodes-base.slack\"\n});\n\n// Configure for update operation\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",\n  \"messageId\": \"1234567890\",  // Required for update\n  \"text\": \"Updated\",\n  \"channel\": \"#general\"       // Optional for update\n}\n```\n\n### Problem 3: \"Validation passes but field doesn't save\"\n\n**Scenario**: Field hidden by dependencies after validation\n\n**Example**:\n```javascript\n// Configure\n{\n  \"method\": \"GET\",\n  \"sendBody\": true,  // âŒ GET doesn't support body\n  \"body\": {...}      // This will be stripped\n}\n\n// After save\n{\n  \"method\": \"GET\"\n  // body removed because method=GET hides it\n}\n```\n\n**Solution**: Respect dependencies from the start\n\n```javascript\n// Correct approach - check property dependencies\nget_node({\n  nodeType: \"nodes-base.httpRequest\",\n  mode: \"search_properties\",\n  propertyQuery: \"body\"\n});\n\n// See that body only shows for POST/PUT/PATCH/DELETE\n// Use correct method\n{\n  \"method\": \"POST\",\n  \"sendBody\": true,\n  \"body\": {...}\n}\n```\n\n---\n\n## Advanced Patterns\n\n### Pattern 1: Conditional Required with Fallback\n\n**Example**: Channel can be string OR expression\n\n```javascript\n// Option 1: String\n{\n  \"channel\": \"#general\"\n}\n\n// Option 2: Expression\n{\n  \"channel\": \"={{$json.channelName}}\"\n}\n\n// Validation accepts both\n```\n\n### Pattern 2: Mutually Exclusive Fields\n\n**Example**: Use either ID or name, not both\n\n```javascript\n// Use messageId\n{\n  \"messageId\": \"1234567890\"\n  // name not needed\n}\n\n// OR use messageName\n{\n  \"messageName\": \"thread-name\"\n  // messageId not needed\n}\n\n// Dependencies ensure only one is required\n```\n\n### Pattern 3: Progressive Complexity\n\n**Example**: Simple mode vs advanced mode\n\n```javascript\n// Simple mode\n{\n  \"mode\": \"simple\",\n  \"text\": \"{{$json.message}}\"\n  // Advanced fields hidden\n}\n\n// Advanced mode\n{\n  \"mode\": \"advanced\",\n  \"attachments\": [...],\n  \"blocks\": [...],\n  \"metadata\": {...}\n  // Simple field hidden, advanced fields shown\n}\n```\n\n---\n\n## Best Practices\n\n### âœ… Do\n\n1. **Check dependencies when stuck**\n   ```javascript\n   get_node({nodeType: \"...\", mode: \"search_properties\", propertyQuery: \"...\"});\n   ```\n\n2. **Configure parent properties first**\n   ```javascript\n   // First: method, resource, operation\n   // Then: dependent fields\n   ```\n\n3. **Validate after changing operation**\n   ```javascript\n   // Operation changed â†’ requirements changed\n   validate_node({nodeType: \"...\", config: {...}, profile: \"runtime\"});\n   ```\n\n4. **Read validation errors for dependency hints**\n   ```\n   Error: \"body required when sendBody=true\"\n   â†’ Hint: Set sendBody=true to enable body\n   ```\n\n### âŒ Don't\n\n1. **Don't ignore dependency errors**\n   ```javascript\n   // Error: \"body not visible\" â†’ Check displayOptions\n   ```\n\n2. **Don't hardcode all possible fields**\n   ```javascript\n   // Bad: Adding fields that will be hidden\n   ```\n\n3. **Don't assume operations are identical**\n   ```javascript\n   // Each operation has unique requirements\n   ```\n\n---\n\n## Summary\n\n**Key Concepts**:\n- `displayOptions` control field visibility\n- `show` = field appears when conditions match\n- `hide` = field disappears when conditions match\n- Multiple conditions = AND logic\n- Multiple values = OR logic\n\n**Common Patterns**:\n1. Boolean toggle (sendBody â†’ body)\n2. Resource/operation cascade (different operations â†’ different fields)\n3. Type-specific config (string vs boolean conditions)\n4. Method-specific fields (GET vs POST)\n\n**Troubleshooting**:\n- Field required but not visible â†’ Check dependencies\n- Field disappears after change â†’ Operation changed requirements\n- Field doesn't save â†’ Hidden by dependencies\n\n**Tools**:\n- `get_node({mode: \"search_properties\"})` - Find property dependencies\n- `get_node({detail: \"full\"})` - See complete schema with displayOptions\n- `get_node` - See operation requirements (standard detail)\n- Validation errors - Hints about dependencies\n\n**Related Files**:\n- **[SKILL.md](SKILL.md)** - Main configuration guide\n- **[OPERATION_PATTERNS.md](OPERATION_PATTERNS.md)** - Common patterns by node type\n",
        "skills/n8n-node-configuration/OPERATION_PATTERNS.md": "# Operation Patterns Guide\n\nCommon node configuration patterns organized by node type and operation.\n\n---\n\n## Overview\n\n**Purpose**: Quick reference for common node configurations\n\n**Coverage**: Top 20 most-used nodes from 525 available\n\n**Pattern format**:\n- Minimal valid configuration\n- Common options\n- Real-world examples\n- Gotchas and tips\n\n---\n\n## HTTP & API Nodes\n\n### HTTP Request (nodes-base.httpRequest)\n\nMost versatile node for HTTP operations\n\n#### GET Request\n\n**Minimal**:\n```javascript\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"none\"\n}\n```\n\n**With query parameters**:\n```javascript\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"none\",\n  \"sendQuery\": true,\n  \"queryParameters\": {\n    \"parameters\": [\n      {\n        \"name\": \"limit\",\n        \"value\": \"100\"\n      },\n      {\n        \"name\": \"offset\",\n        \"value\": \"={{$json.offset}}\"\n      }\n    ]\n  }\n}\n```\n\n**With authentication**:\n```javascript\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"predefinedCredentialType\",\n  \"nodeCredentialType\": \"httpHeaderAuth\"\n}\n```\n\n#### POST with JSON\n\n**Minimal**:\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"none\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {\n      \"name\": \"John Doe\",\n      \"email\": \"john@example.com\"\n    }\n  }\n}\n```\n\n**With expressions**:\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"none\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {\n      \"name\": \"={{$json.name}}\",\n      \"email\": \"={{$json.email}}\",\n      \"metadata\": {\n        \"source\": \"n8n\",\n        \"timestamp\": \"={{$now.toISO()}}\"\n      }\n    }\n  }\n}\n```\n\n**Gotcha**: Remember `sendBody: true` for POST/PUT/PATCH!\n\n#### PUT/PATCH Request\n\n**Pattern**: Same as POST, but method changes\n```javascript\n{\n  \"method\": \"PUT\",  // or \"PATCH\"\n  \"url\": \"https://api.example.com/users/123\",\n  \"authentication\": \"none\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {\n      \"name\": \"Updated Name\"\n    }\n  }\n}\n```\n\n#### DELETE Request\n\n**Minimal** (no body):\n```javascript\n{\n  \"method\": \"DELETE\",\n  \"url\": \"https://api.example.com/users/123\",\n  \"authentication\": \"none\"\n}\n```\n\n**With body** (some APIs allow):\n```javascript\n{\n  \"method\": \"DELETE\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"none\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {\n      \"ids\": [\"123\", \"456\"]\n    }\n  }\n}\n```\n\n---\n\n### Webhook (nodes-base.webhook)\n\nMost common trigger - 813 searches!\n\n#### Basic Webhook\n\n**Minimal**:\n```javascript\n{\n  \"path\": \"my-webhook\",\n  \"httpMethod\": \"POST\",\n  \"responseMode\": \"onReceived\"\n}\n```\n\n**Gotcha**: Webhook data is under `$json.body`, not `$json`!\n\n```javascript\n// âŒ Wrong\n{\n  \"text\": \"={{$json.email}}\"\n}\n\n// âœ… Correct\n{\n  \"text\": \"={{$json.body.email}}\"\n}\n```\n\n#### Webhook with Authentication\n\n**Header auth**:\n```javascript\n{\n  \"path\": \"secure-webhook\",\n  \"httpMethod\": \"POST\",\n  \"responseMode\": \"onReceived\",\n  \"authentication\": \"headerAuth\",\n  \"options\": {\n    \"responseCode\": 200,\n    \"responseData\": \"{\\n  \\\"success\\\": true\\n}\"\n  }\n}\n```\n\n#### Webhook Returning Data\n\n**Custom response**:\n```javascript\n{\n  \"path\": \"my-webhook\",\n  \"httpMethod\": \"POST\",\n  \"responseMode\": \"lastNode\",  // Return data from last node\n  \"options\": {\n    \"responseCode\": 201,\n    \"responseHeaders\": {\n      \"entries\": [\n        {\n          \"name\": \"Content-Type\",\n          \"value\": \"application/json\"\n        }\n      ]\n    }\n  }\n}\n```\n\n---\n\n## Communication Nodes\n\n### Slack (nodes-base.slack)\n\nPopular choice for AI agent workflows\n\n#### Post Message\n\n**Minimal**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",\n  \"text\": \"Hello from n8n!\"\n}\n```\n\n**With dynamic content**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"={{$json.channel}}\",\n  \"text\": \"New user: {{$json.name}} ({{$json.email}})\"\n}\n```\n\n**With attachments**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#alerts\",\n  \"text\": \"Error Alert\",\n  \"attachments\": [\n    {\n      \"color\": \"#ff0000\",\n      \"fields\": [\n        {\n          \"title\": \"Error Type\",\n          \"value\": \"={{$json.errorType}}\"\n        },\n        {\n          \"title\": \"Timestamp\",\n          \"value\": \"={{$now.toLocaleString()}}\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Gotcha**: Channel must start with `#` for public channels or be a channel ID!\n\n#### Update Message\n\n**Minimal**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",\n  \"messageId\": \"1234567890.123456\",  // From previous message post\n  \"text\": \"Updated message content\"\n}\n```\n\n**Note**: `messageId` required, `channel` optional (can be inferred)\n\n#### Create Channel\n\n**Minimal**:\n```javascript\n{\n  \"resource\": \"channel\",\n  \"operation\": \"create\",\n  \"name\": \"new-project-channel\",  // Lowercase, no spaces\n  \"isPrivate\": false\n}\n```\n\n**Gotcha**: Channel name must be lowercase, no spaces, 1-80 chars!\n\n---\n\n### Gmail (nodes-base.gmail)\n\nPopular for email automation\n\n#### Send Email\n\n**Minimal**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"send\",\n  \"to\": \"user@example.com\",\n  \"subject\": \"Hello from n8n\",\n  \"message\": \"This is the email body\"\n}\n```\n\n**With dynamic content**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"send\",\n  \"to\": \"={{$json.email}}\",\n  \"subject\": \"Order Confirmation #{{$json.orderId}}\",\n  \"message\": \"Dear {{$json.name}},\\n\\nYour order has been confirmed.\\n\\nThank you!\",\n  \"options\": {\n    \"ccList\": \"admin@example.com\",\n    \"replyTo\": \"support@example.com\"\n  }\n}\n```\n\n#### Get Email\n\n**Minimal**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"getAll\",\n  \"returnAll\": false,\n  \"limit\": 10\n}\n```\n\n**With filters**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"getAll\",\n  \"returnAll\": false,\n  \"limit\": 50,\n  \"filters\": {\n    \"q\": \"is:unread from:important@example.com\",\n    \"labelIds\": [\"INBOX\"]\n  }\n}\n```\n\n---\n\n## Database Nodes\n\n### Postgres (nodes-base.postgres)\n\nDatabase operations - 456 templates\n\n#### Execute Query\n\n**Minimal** (SELECT):\n```javascript\n{\n  \"operation\": \"executeQuery\",\n  \"query\": \"SELECT * FROM users WHERE active = true LIMIT 100\"\n}\n```\n\n**With parameters** (SQL injection prevention):\n```javascript\n{\n  \"operation\": \"executeQuery\",\n  \"query\": \"SELECT * FROM users WHERE email = $1 AND active = $2\",\n  \"additionalFields\": {\n    \"mode\": \"list\",\n    \"queryParameters\": \"user@example.com,true\"\n  }\n}\n```\n\n**Gotcha**: ALWAYS use parameterized queries for user input!\n\n```javascript\n// âŒ BAD - SQL injection risk!\n{\n  \"query\": \"SELECT * FROM users WHERE email = '{{$json.email}}'\"\n}\n\n// âœ… GOOD - Parameterized\n{\n  \"query\": \"SELECT * FROM users WHERE email = $1\",\n  \"additionalFields\": {\n    \"mode\": \"list\",\n    \"queryParameters\": \"={{$json.email}}\"\n  }\n}\n```\n\n#### Insert\n\n**Minimal**:\n```javascript\n{\n  \"operation\": \"insert\",\n  \"table\": \"users\",\n  \"columns\": \"name,email,created_at\",\n  \"additionalFields\": {\n    \"mode\": \"list\",\n    \"queryParameters\": \"John Doe,john@example.com,NOW()\"\n  }\n}\n```\n\n**With expressions**:\n```javascript\n{\n  \"operation\": \"insert\",\n  \"table\": \"users\",\n  \"columns\": \"name,email,metadata\",\n  \"additionalFields\": {\n    \"mode\": \"list\",\n    \"queryParameters\": \"={{$json.name}},={{$json.email}},{{JSON.stringify($json)}}\"\n  }\n}\n```\n\n#### Update\n\n**Minimal**:\n```javascript\n{\n  \"operation\": \"update\",\n  \"table\": \"users\",\n  \"updateKey\": \"id\",\n  \"columns\": \"name,email\",\n  \"additionalFields\": {\n    \"mode\": \"list\",\n    \"queryParameters\": \"={{$json.id}},Updated Name,newemail@example.com\"\n  }\n}\n```\n\n---\n\n## Data Transformation Nodes\n\n### Set (nodes-base.set)\n\nMost used transformation - 68% of workflows!\n\n#### Set Fixed Values\n\n**Minimal**:\n```javascript\n{\n  \"mode\": \"manual\",\n  \"duplicateItem\": false,\n  \"assignments\": {\n    \"assignments\": [\n      {\n        \"name\": \"status\",\n        \"value\": \"active\",\n        \"type\": \"string\"\n      },\n      {\n        \"name\": \"count\",\n        \"value\": 100,\n        \"type\": \"number\"\n      }\n    ]\n  }\n}\n```\n\n#### Set from Input Data\n\n**Mapping data**:\n```javascript\n{\n  \"mode\": \"manual\",\n  \"duplicateItem\": false,\n  \"assignments\": {\n    \"assignments\": [\n      {\n        \"name\": \"fullName\",\n        \"value\": \"={{$json.firstName}} {{$json.lastName}}\",\n        \"type\": \"string\"\n      },\n      {\n        \"name\": \"email\",\n        \"value\": \"={{$json.email.toLowerCase()}}\",\n        \"type\": \"string\"\n      },\n      {\n        \"name\": \"timestamp\",\n        \"value\": \"={{$now.toISO()}}\",\n        \"type\": \"string\"\n      }\n    ]\n  }\n}\n```\n\n**Gotcha**: Use correct `type` for each field!\n\n```javascript\n// âŒ Wrong type\n{\n  \"name\": \"age\",\n  \"value\": \"25\",      // String\n  \"type\": \"string\"    // Will be string \"25\"\n}\n\n// âœ… Correct type\n{\n  \"name\": \"age\",\n  \"value\": 25,        // Number\n  \"type\": \"number\"    // Will be number 25\n}\n```\n\n---\n\n### Code (nodes-base.code)\n\nJavaScript execution - 42% of workflows\n\n#### Simple Transformation\n\n**Minimal**:\n```javascript\n{\n  \"mode\": \"runOnceForAllItems\",\n  \"jsCode\": \"return $input.all().map(item => ({\\n  json: {\\n    name: item.json.name.toUpperCase(),\\n    email: item.json.email\\n  }\\n}));\"\n}\n```\n\n**Per-item processing**:\n```javascript\n{\n  \"mode\": \"runOnceForEachItem\",\n  \"jsCode\": \"// Process each item\\nconst data = $input.item.json;\\n\\nreturn {\\n  json: {\\n    fullName: `${data.firstName} ${data.lastName}`,\\n    email: data.email.toLowerCase(),\\n    timestamp: new Date().toISOString()\\n  }\\n};\"\n}\n```\n\n**Gotcha**: In Code nodes, use `$input.item.json` or `$input.all()`, NOT `{{...}}`!\n\n```javascript\n// âŒ Wrong - expressions don't work in Code nodes\n{\n  \"jsCode\": \"const name = '={{$json.name}}';\"\n}\n\n// âœ… Correct - direct access\n{\n  \"jsCode\": \"const name = $input.item.json.name;\"\n}\n```\n\n---\n\n## Conditional Nodes\n\n### IF (nodes-base.if)\n\nConditional logic - 38% of workflows\n\n#### String Comparison\n\n**Equals** (binary):\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"value1\": \"={{$json.status}}\",\n        \"operation\": \"equals\",\n        \"value2\": \"active\"\n      }\n    ]\n  }\n}\n```\n\n**Contains** (binary):\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"value1\": \"={{$json.email}}\",\n        \"operation\": \"contains\",\n        \"value2\": \"@example.com\"\n      }\n    ]\n  }\n}\n```\n\n**isEmpty** (unary):\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"value1\": \"={{$json.email}}\",\n        \"operation\": \"isEmpty\"\n        // No value2 - unary operator\n        // singleValue: true added by auto-sanitization\n      }\n    ]\n  }\n}\n```\n\n**Gotcha**: Unary operators (isEmpty, isNotEmpty) don't need value2!\n\n#### Number Comparison\n\n**Greater than**:\n```javascript\n{\n  \"conditions\": {\n    \"number\": [\n      {\n        \"value1\": \"={{$json.age}}\",\n        \"operation\": \"larger\",\n        \"value2\": 18\n      }\n    ]\n  }\n}\n```\n\n#### Boolean Comparison\n\n**Is true**:\n```javascript\n{\n  \"conditions\": {\n    \"boolean\": [\n      {\n        \"value1\": \"={{$json.isActive}}\",\n        \"operation\": \"true\"\n        // Unary - no value2\n      }\n    ]\n  }\n}\n```\n\n#### Multiple Conditions (AND)\n\n**All must match**:\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"value1\": \"={{$json.status}}\",\n        \"operation\": \"equals\",\n        \"value2\": \"active\"\n      }\n    ],\n    \"number\": [\n      {\n        \"value1\": \"={{$json.age}}\",\n        \"operation\": \"larger\",\n        \"value2\": 18\n      }\n    ]\n  },\n  \"combineOperation\": \"all\"  // AND logic\n}\n```\n\n#### Multiple Conditions (OR)\n\n**Any can match**:\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"value1\": \"={{$json.status}}\",\n        \"operation\": \"equals\",\n        \"value2\": \"active\"\n      },\n      {\n        \"value1\": \"={{$json.status}}\",\n        \"operation\": \"equals\",\n        \"value2\": \"pending\"\n      }\n    ]\n  },\n  \"combineOperation\": \"any\"  // OR logic\n}\n```\n\n---\n\n### Switch (nodes-base.switch)\n\nMulti-way routing - 18% of workflows\n\n#### Basic Switch\n\n**Minimal**:\n```javascript\n{\n  \"mode\": \"rules\",\n  \"rules\": {\n    \"rules\": [\n      {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$json.status}}\",\n              \"operation\": \"equals\",\n              \"value2\": \"active\"\n            }\n          ]\n        }\n      },\n      {\n        \"conditions\": {\n          \"string\": [\n            {\n              \"value1\": \"={{$json.status}}\",\n              \"operation\": \"equals\",\n              \"value2\": \"pending\"\n            }\n          ]\n        }\n      }\n    ]\n  },\n  \"fallbackOutput\": \"extra\"  // Catch-all for non-matching\n}\n```\n\n**Gotcha**: Number of rules must match number of outputs!\n\n---\n\n## AI Nodes\n\n### OpenAI (nodes-langchain.openAi)\n\nAI operations - 234 templates\n\n#### Chat Completion\n\n**Minimal**:\n```javascript\n{\n  \"resource\": \"chat\",\n  \"operation\": \"complete\",\n  \"messages\": {\n    \"values\": [\n      {\n        \"role\": \"user\",\n        \"content\": \"={{$json.prompt}}\"\n      }\n    ]\n  }\n}\n```\n\n**With system prompt**:\n```javascript\n{\n  \"resource\": \"chat\",\n  \"operation\": \"complete\",\n  \"messages\": {\n    \"values\": [\n      {\n        \"role\": \"system\",\n        \"content\": \"You are a helpful assistant specialized in customer support.\"\n      },\n      {\n        \"role\": \"user\",\n        \"content\": \"={{$json.userMessage}}\"\n      }\n    ]\n  },\n  \"options\": {\n    \"temperature\": 0.7,\n    \"maxTokens\": 500\n  }\n}\n```\n\n---\n\n## Schedule Nodes\n\n### Schedule Trigger (nodes-base.scheduleTrigger)\n\nTime-based workflows - 28% have schedule triggers\n\n#### Daily at Specific Time\n\n**Minimal**:\n```javascript\n{\n  \"rule\": {\n    \"interval\": [\n      {\n        \"field\": \"hours\",\n        \"hoursInterval\": 24\n      }\n    ],\n    \"hour\": 9,\n    \"minute\": 0,\n    \"timezone\": \"America/New_York\"\n  }\n}\n```\n\n**Gotcha**: Always set timezone explicitly!\n\n```javascript\n// âŒ Bad - uses server timezone\n{\n  \"rule\": {\n    \"interval\": [...]\n  }\n}\n\n// âœ… Good - explicit timezone\n{\n  \"rule\": {\n    \"interval\": [...],\n    \"timezone\": \"America/New_York\"\n  }\n}\n```\n\n#### Every N Minutes\n\n**Minimal**:\n```javascript\n{\n  \"rule\": {\n    \"interval\": [\n      {\n        \"field\": \"minutes\",\n        \"minutesInterval\": 15\n      }\n    ]\n  }\n}\n```\n\n#### Cron Expression\n\n**Advanced scheduling**:\n```javascript\n{\n  \"mode\": \"cron\",\n  \"cronExpression\": \"0 */2 * * *\",  // Every 2 hours\n  \"timezone\": \"America/New_York\"\n}\n```\n\n---\n\n## Summary\n\n**Key Patterns by Category**:\n\n| Category | Most Common | Key Gotcha |\n|---|---|---|\n| HTTP/API | GET, POST JSON | Remember sendBody: true |\n| Webhooks | POST receiver | Data under $json.body |\n| Communication | Slack post | Channel format (#name) |\n| Database | SELECT with params | Use parameterized queries |\n| Transform | Set assignments | Correct type per field |\n| Conditional | IF string equals | Unary vs binary operators |\n| AI | OpenAI chat | System + user messages |\n| Schedule | Daily at time | Set timezone explicitly |\n\n**Configuration Approach**:\n1. Use patterns as starting point\n2. Adapt to your use case\n3. Validate configuration\n4. Iterate based on errors\n5. Deploy when valid\n\n**Related Files**:\n- **[SKILL.md](SKILL.md)** - Configuration workflow and philosophy\n- **[DEPENDENCIES.md](DEPENDENCIES.md)** - Property dependency rules\n",
        "skills/n8n-node-configuration/README.md": "# n8n Node Configuration\n\nExpert guidance for operation-aware node configuration with property dependencies.\n\n## Overview\n\n**Skill Name**: n8n Node Configuration\n**Priority**: Medium\n**Purpose**: Teach operation-aware configuration with progressive discovery and dependency awareness\n\n## The Problem This Solves\n\nNode configuration patterns:\n\n- get_node_essentials is the primary discovery tool (18s avg from search â†’ essentials)\n- 91.7% success rate with essentials-based configuration\n- 56 seconds average between configuration edits\n\n**Key insight**: Most configurations only need essentials, not full schema!\n\n## What This Skill Teaches\n\n### Core Concepts\n\n1. **Operation-Aware Configuration**\n   - Resource + operation determine required fields\n   - Different operations = different requirements\n   - Always check requirements when changing operation\n\n2. **Property Dependencies**\n   - Fields appear/disappear based on other field values\n   - displayOptions control visibility\n   - Conditional required fields\n   - Understanding dependency chains\n\n3. **Progressive Discovery**\n   - Start with get_node_essentials (91.7% success)\n   - Escalate to get_property_dependencies if needed\n   - Use get_node_info only when necessary\n   - Right tool for right job\n\n4. **Configuration Workflow**\n   - Identify â†’ Discover â†’ Configure â†’ Validate â†’ Iterate\n   - Average 2-3 validation cycles\n   - Read errors for dependency hints\n   - 56 seconds between edits average\n\n5. **Common Patterns**\n   - Resource/operation nodes (Slack, Sheets)\n   - HTTP-based nodes (HTTP Request, Webhook)\n   - Database nodes (Postgres, MySQL)\n   - Conditional logic nodes (IF, Switch)\n\n## File Structure\n\n```\nn8n-node-configuration/\nâ”œâ”€â”€ SKILL.md (692 lines)\nâ”‚   Main configuration guide\nâ”‚   - Configuration philosophy (progressive disclosure)\nâ”‚   - Core concepts (operation-aware, dependencies)\nâ”‚   - Configuration workflow (8-step process)\nâ”‚   - get_node_essentials vs get_node_info\nâ”‚   - Property dependencies deep dive\nâ”‚   - Common node patterns (4 categories)\nâ”‚   - Operation-specific examples\nâ”‚   - Conditional requirements\nâ”‚   - Anti-patterns and best practices\nâ”‚\nâ”œâ”€â”€ DEPENDENCIES.md (671 lines)\nâ”‚   Property dependencies reference\nâ”‚   - displayOptions mechanism\nâ”‚   - show vs hide rules\nâ”‚   - Multiple conditions (AND logic)\nâ”‚   - Multiple values (OR logic)\nâ”‚   - 4 common dependency patterns\nâ”‚   - Using get_property_dependencies\nâ”‚   - Complex dependency examples\nâ”‚   - Nested dependencies\nâ”‚   - Auto-sanitization interaction\nâ”‚   - Troubleshooting guide\nâ”‚   - Advanced patterns\nâ”‚\nâ”œâ”€â”€ OPERATION_PATTERNS.md (783 lines)\nâ”‚   Common configurations by node type\nâ”‚   - HTTP Request (GET/POST/PUT/DELETE)\nâ”‚   - Webhook (basic/auth/response)\nâ”‚   - Slack (post/update/create)\nâ”‚   - Gmail (send/get)\nâ”‚   - Postgres (query/insert/update)\nâ”‚   - Set (values/mapping)\nâ”‚   - Code (per-item/all-items)\nâ”‚   - IF (string/number/boolean)\nâ”‚   - Switch (rules/fallback)\nâ”‚   - OpenAI (chat completion)\nâ”‚   - Schedule (daily/interval/cron)\nâ”‚   - Gotchas and tips for each\nâ”‚\nâ””â”€â”€ README.md (this file)\n    Skill metadata and statistics\n```\n\n**Total**: ~2,146 lines across 4 files + 4 evaluations\n\n## Usage Statistics\n\nConfiguration metrics:\n\n| Metric | Value | Insight |\n|---|---|---|\n| get_node_essentials | Primary tool | Most popular discovery pattern |\n| Success rate (essentials) | 91.7% | Essentials sufficient for most |\n| Avg time searchâ†’essentials | 18 seconds | Fast discovery workflow |\n| Avg time between edits | 56 seconds | Iterative configuration |\n\n## Tool Usage Pattern\n\n**Most common discovery pattern**:\n```\nsearch_nodes â†’ get_node_essentials (18s average)\n```\n\n**Configuration cycle**:\n```\nget_node_essentials â†’ configure â†’ validate â†’ iterate (56s avg per edit)\n```\n\n## Key Insights\n\n### 1. Progressive Disclosure Works\n\n**91.7% success rate** with get_node_essentials proves most configurations don't need full schema.\n\n**Strategy**:\n1. Start with essentials\n2. Escalate to dependencies if stuck\n3. Use full schema only when necessary\n\n### 2. Operations Determine Requirements\n\n**Same node, different operation = different requirements**\n\nExample: Slack message\n- `operation=\"post\"` â†’ needs channel + text\n- `operation=\"update\"` â†’ needs messageId + text (different!)\n\n### 3. Dependencies Control Visibility\n\n**Fields appear/disappear based on other values**\n\nExample: HTTP Request\n- `method=\"GET\"` â†’ body hidden\n- `method=\"POST\"` + `sendBody=true` â†’ body required\n\n### 4. Configuration is Iterative\n\n**Average 56 seconds between edits** shows configuration is iterative, not one-shot.\n\n**Normal workflow**:\n1. Configure minimal\n2. Validate â†’ error\n3. Add missing field\n4. Validate â†’ error\n5. Adjust value\n6. Validate â†’ valid âœ…\n\n### 5. Common Gotchas Exist\n\n**Top 5 gotchas** from patterns:\n1. Webhook data under `$json.body` (not `$json`)\n2. POST needs `sendBody: true`\n3. Slack channel format (`#name`)\n4. SQL parameterized queries (injection prevention)\n5. Timezone must be explicit (schedule nodes)\n\n## Usage Examples\n\n### Example 1: Basic Configuration Flow\n\n```javascript\n// Step 1: Get essentials\nconst info = get_node_essentials({\n  nodeType: \"nodes-base.slack\"\n});\n\n// Step 2: Configure for operation\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",\n  \"text\": \"Hello!\"\n}\n\n// Step 3: Validate\nvalidate_node_operation({...});\n// âœ… Valid!\n```\n\n### Example 2: Handling Dependencies\n\n```javascript\n// Step 1: Configure HTTP POST\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\"\n}\n\n// Step 2: Validate â†’ Error: \"sendBody required\"\n// Step 3: Check dependencies\nget_property_dependencies({\n  nodeType: \"nodes-base.httpRequest\"\n});\n// Shows: body visible when sendBody=true\n\n// Step 4: Fix\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {...}\n  }\n}\n// âœ… Valid!\n```\n\n### Example 3: Operation Change\n\n```javascript\n// Initial config (post operation)\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",\n  \"text\": \"Hello\"\n}\n\n// Change operation\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",  // Changed!\n  // Need to check new requirements\n}\n\n// Get essentials for update operation\nget_node_essentials({nodeType: \"nodes-base.slack\"});\n// Shows: messageId required, channel optional\n\n// Correct config\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",\n  \"messageId\": \"1234567890.123456\",\n  \"text\": \"Updated\"\n}\n```\n\n## When This Skill Activates\n\n**Trigger phrases**:\n- \"how to configure\"\n- \"what fields are required\"\n- \"property dependencies\"\n- \"get_node_essentials vs get_node_info\"\n- \"operation-specific\"\n- \"field not visible\"\n\n**Common scenarios**:\n- Configuring new nodes\n- Understanding required fields\n- Field appears/disappears unexpectedly\n- Choosing between discovery tools\n- Switching operations\n- Learning common patterns\n\n## Integration with Other Skills\n\n### Works With:\n- **n8n MCP Tools Expert** - How to call discovery tools correctly\n- **n8n Validation Expert** - Interpret missing_required errors\n- **n8n Expression Syntax** - Configure expression fields\n- **n8n Workflow Patterns** - Apply patterns with proper node config\n\n### Complementary:\n- Use MCP Tools Expert to learn tool selection\n- Use Validation Expert to fix configuration errors\n- Use Expression Syntax for dynamic field values\n- Use Workflow Patterns to understand node relationships\n\n## Testing\n\n**Evaluations**: 4 test scenarios\n\n1. **eval-001-property-dependencies.json**\n   - Tests understanding of displayOptions\n   - Guides to get_property_dependencies\n   - Explains conditional requirements\n\n2. **eval-002-operation-specific-config.json**\n   - Tests operation-aware configuration\n   - Identifies resource + operation pattern\n   - References OPERATION_PATTERNS.md\n\n3. **eval-003-conditional-fields.json**\n   - Tests unary vs binary operators\n   - Explains singleValue dependency\n   - Mentions auto-sanitization\n\n4. **eval-004-essentials-vs-info.json**\n   - Tests tool selection knowledge\n   - Explains progressive disclosure\n   - Provides success rate statistics\n\n## Success Metrics\n\n**Before this skill**:\n- Using get_node_info for everything (slow, overwhelming)\n- Not understanding property dependencies\n- Confused when fields appear/disappear\n- Not aware of operation-specific requirements\n- Trial and error configuration\n\n**After this skill**:\n- Start with get_node_essentials (91.7% success)\n- Understand displayOptions mechanism\n- Predict field visibility based on dependencies\n- Check requirements when changing operations\n- Systematic configuration approach\n- Know common patterns by node type\n\n## Coverage\n\n**Node types covered**: Top 20 most-used nodes\n\n| Category | Nodes | Coverage |\n|---|---|---|\n| HTTP/API | HTTP Request, Webhook | Complete |\n| Communication | Slack, Gmail | Common operations |\n| Database | Postgres, MySQL | CRUD operations |\n| Transform | Set, Code | All modes |\n| Conditional | IF, Switch | All operator types |\n| AI | OpenAI | Chat completion |\n| Schedule | Schedule Trigger | All modes |\n\n## Related Documentation\n\n- **n8n-mcp MCP Server**: Provides discovery tools\n- **n8n Node API**: get_node_essentials, get_property_dependencies, get_node_info\n- **n8n Schema**: displayOptions mechanism, property definitions\n\n## Version History\n\n- **v1.0** (2025-10-20): Initial implementation\n  - SKILL.md with configuration workflow\n  - DEPENDENCIES.md with displayOptions deep dive\n  - OPERATION_PATTERNS.md with 20+ node patterns\n  - 4 evaluation scenarios\n\n## Author\n\nConceived by Romuald CzÅ‚onkowski - [www.aiadvisors.pl/en](https://www.aiadvisors.pl/en)\n\nPart of the n8n-skills meta-skill collection.\n",
        "skills/n8n-node-configuration/SKILL.md": "---\nname: n8n-node-configuration\ndescription: Operation-aware node configuration guidance. Use when configuring nodes, understanding property dependencies, determining required fields, choosing between get_node detail levels, or learning common configuration patterns by node type.\n---\n\n# n8n Node Configuration\n\nExpert guidance for operation-aware node configuration with property dependencies.\n\n---\n\n## Configuration Philosophy\n\n**Progressive disclosure**: Start minimal, add complexity as needed\n\nConfiguration best practices:\n- `get_node` with `detail: \"standard\"` is the most used discovery pattern\n- 56 seconds average between configuration edits\n- Covers 95% of use cases with 1-2K tokens response\n\n**Key insight**: Most configurations need only standard detail, not full schema!\n\n---\n\n## Core Concepts\n\n### 1. Operation-Aware Configuration\n\n**Not all fields are always required** - it depends on operation!\n\n**Example**: Slack node\n```javascript\n// For operation='post'\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",  // Required for post\n  \"text\": \"Hello!\"        // Required for post\n}\n\n// For operation='update'\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",\n  \"messageId\": \"123\",     // Required for update (different!)\n  \"text\": \"Updated!\"      // Required for update\n  // channel NOT required for update\n}\n```\n\n**Key**: Resource + operation determine which fields are required!\n\n### 2. Property Dependencies\n\n**Fields appear/disappear based on other field values**\n\n**Example**: HTTP Request node\n```javascript\n// When method='GET'\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com\"\n  // sendBody not shown (GET doesn't have body)\n}\n\n// When method='POST'\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com\",\n  \"sendBody\": true,       // Now visible!\n  \"body\": {               // Required when sendBody=true\n    \"contentType\": \"json\",\n    \"content\": {...}\n  }\n}\n```\n\n**Mechanism**: displayOptions control field visibility\n\n### 3. Progressive Discovery\n\n**Use the right detail level**:\n\n1. **get_node({detail: \"standard\"})** - DEFAULT\n   - Quick overview (~1-2K tokens)\n   - Required fields + common options\n   - **Use first** - covers 95% of needs\n\n2. **get_node({mode: \"search_properties\", propertyQuery: \"...\"})** (for finding specific fields)\n   - Find properties by name\n   - Use when looking for auth, body, headers, etc.\n\n3. **get_node({detail: \"full\"})** (complete schema)\n   - All properties (~3-8K tokens)\n   - Use only when standard detail is insufficient\n\n---\n\n## Configuration Workflow\n\n### Standard Process\n\n```\n1. Identify node type and operation\n   â†“\n2. Use get_node (standard detail is default)\n   â†“\n3. Configure required fields\n   â†“\n4. Validate configuration\n   â†“\n5. If field unclear â†’ get_node({mode: \"search_properties\"})\n   â†“\n6. Add optional fields as needed\n   â†“\n7. Validate again\n   â†“\n8. Deploy\n```\n\n### Example: Configuring HTTP Request\n\n**Step 1**: Identify what you need\n```javascript\n// Goal: POST JSON to API\n```\n\n**Step 2**: Get node info\n```javascript\nconst info = get_node({\n  nodeType: \"nodes-base.httpRequest\"\n});\n\n// Returns: method, url, sendBody, body, authentication required/optional\n```\n\n**Step 3**: Minimal config\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\",\n  \"authentication\": \"none\"\n}\n```\n\n**Step 4**: Validate\n```javascript\nvalidate_node({\n  nodeType: \"nodes-base.httpRequest\",\n  config,\n  profile: \"runtime\"\n});\n// â†’ Error: \"sendBody required for POST\"\n```\n\n**Step 5**: Add required field\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\",\n  \"authentication\": \"none\",\n  \"sendBody\": true\n}\n```\n\n**Step 6**: Validate again\n```javascript\nvalidate_node({...});\n// â†’ Error: \"body required when sendBody=true\"\n```\n\n**Step 7**: Complete configuration\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\",\n  \"authentication\": \"none\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {\n      \"name\": \"={{$json.name}}\",\n      \"email\": \"={{$json.email}}\"\n    }\n  }\n}\n```\n\n**Step 8**: Final validation\n```javascript\nvalidate_node({...});\n// â†’ Valid! âœ…\n```\n\n---\n\n## get_node Detail Levels\n\n### Standard Detail (DEFAULT - Use This!)\n\n**âœ… Starting configuration**\n```javascript\nget_node({\n  nodeType: \"nodes-base.slack\"\n});\n// detail=\"standard\" is the default\n```\n\n**Returns** (~1-2K tokens):\n- Required fields\n- Common options\n- Operation list\n- Metadata\n\n**Use**: 95% of configuration needs\n\n### Full Detail (Use Sparingly)\n\n**âœ… When standard isn't enough**\n```javascript\nget_node({\n  nodeType: \"nodes-base.slack\",\n  detail: \"full\"\n});\n```\n\n**Returns** (~3-8K tokens):\n- Complete schema\n- All properties\n- All nested options\n\n**Warning**: Large response, use only when standard insufficient\n\n### Search Properties Mode\n\n**âœ… Looking for specific field**\n```javascript\nget_node({\n  nodeType: \"nodes-base.httpRequest\",\n  mode: \"search_properties\",\n  propertyQuery: \"auth\"\n});\n```\n\n**Use**: Find authentication, headers, body fields, etc.\n\n### Decision Tree\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Starting new node config?       â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ get_node (standard)       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Standard has what you need?     â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ Configure with it         â”‚\nâ”‚ NO  â†’ Continue                  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Looking for specific field?     â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ search_properties mode    â”‚\nâ”‚ NO  â†’ Continue                  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Still need more details?        â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ get_node({detail: \"full\"})â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## Property Dependencies Deep Dive\n\n### displayOptions Mechanism\n\n**Fields have visibility rules**:\n\n```javascript\n{\n  \"name\": \"body\",\n  \"displayOptions\": {\n    \"show\": {\n      \"sendBody\": [true],\n      \"method\": [\"POST\", \"PUT\", \"PATCH\"]\n    }\n  }\n}\n```\n\n**Translation**: \"body\" field shows when:\n- sendBody = true AND\n- method = POST, PUT, or PATCH\n\n### Common Dependency Patterns\n\n#### Pattern 1: Boolean Toggle\n\n**Example**: HTTP Request sendBody\n```javascript\n// sendBody controls body visibility\n{\n  \"sendBody\": true   // â†’ body field appears\n}\n```\n\n#### Pattern 2: Operation Switch\n\n**Example**: Slack resource/operation\n```javascript\n// Different operations â†’ different fields\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\"\n  // â†’ Shows: channel, text, attachments, etc.\n}\n\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\"\n  // â†’ Shows: messageId, text (different fields!)\n}\n```\n\n#### Pattern 3: Type Selection\n\n**Example**: IF node conditions\n```javascript\n{\n  \"type\": \"string\",\n  \"operation\": \"contains\"\n  // â†’ Shows: value1, value2\n}\n\n{\n  \"type\": \"boolean\",\n  \"operation\": \"equals\"\n  // â†’ Shows: value1, value2, different operators\n}\n```\n\n### Finding Property Dependencies\n\n**Use get_node with search_properties mode**:\n```javascript\nget_node({\n  nodeType: \"nodes-base.httpRequest\",\n  mode: \"search_properties\",\n  propertyQuery: \"body\"\n});\n\n// Returns property paths matching \"body\" with descriptions\n```\n\n**Or use full detail for complete schema**:\n```javascript\nget_node({\n  nodeType: \"nodes-base.httpRequest\",\n  detail: \"full\"\n});\n\n// Returns complete schema with displayOptions rules\n```\n\n**Use this when**: Validation fails and you don't understand why field is missing/required\n\n---\n\n## Common Node Patterns\n\n### Pattern 1: Resource/Operation Nodes\n\n**Examples**: Slack, Google Sheets, Airtable\n\n**Structure**:\n```javascript\n{\n  \"resource\": \"<entity>\",      // What type of thing\n  \"operation\": \"<action>\",     // What to do with it\n  // ... operation-specific fields\n}\n```\n\n**How to configure**:\n1. Choose resource\n2. Choose operation\n3. Use get_node to see operation-specific requirements\n4. Configure required fields\n\n### Pattern 2: HTTP-Based Nodes\n\n**Examples**: HTTP Request, Webhook\n\n**Structure**:\n```javascript\n{\n  \"method\": \"<HTTP_METHOD>\",\n  \"url\": \"<endpoint>\",\n  \"authentication\": \"<type>\",\n  // ... method-specific fields\n}\n```\n\n**Dependencies**:\n- POST/PUT/PATCH â†’ sendBody available\n- sendBody=true â†’ body required\n- authentication != \"none\" â†’ credentials required\n\n### Pattern 3: Database Nodes\n\n**Examples**: Postgres, MySQL, MongoDB\n\n**Structure**:\n```javascript\n{\n  \"operation\": \"<query|insert|update|delete>\",\n  // ... operation-specific fields\n}\n```\n\n**Dependencies**:\n- operation=\"executeQuery\" â†’ query required\n- operation=\"insert\" â†’ table + values required\n- operation=\"update\" â†’ table + values + where required\n\n### Pattern 4: Conditional Logic Nodes\n\n**Examples**: IF, Switch, Merge\n\n**Structure**:\n```javascript\n{\n  \"conditions\": {\n    \"<type>\": [\n      {\n        \"operation\": \"<operator>\",\n        \"value1\": \"...\",\n        \"value2\": \"...\"  // Only for binary operators\n      }\n    ]\n  }\n}\n```\n\n**Dependencies**:\n- Binary operators (equals, contains, etc.) â†’ value1 + value2\n- Unary operators (isEmpty, isNotEmpty) â†’ value1 only + singleValue: true\n\n---\n\n## Operation-Specific Configuration\n\n### Slack Node Examples\n\n#### Post Message\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",      // Required\n  \"text\": \"Hello!\",           // Required\n  \"attachments\": [],          // Optional\n  \"blocks\": []                // Optional\n}\n```\n\n#### Update Message\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",\n  \"messageId\": \"1234567890\",  // Required (different from post!)\n  \"text\": \"Updated!\",         // Required\n  \"channel\": \"#general\"       // Optional (can be inferred)\n}\n```\n\n#### Create Channel\n```javascript\n{\n  \"resource\": \"channel\",\n  \"operation\": \"create\",\n  \"name\": \"new-channel\",      // Required\n  \"isPrivate\": false          // Optional\n  // Note: text NOT required for this operation\n}\n```\n\n### HTTP Request Node Examples\n\n#### GET Request\n```javascript\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"predefinedCredentialType\",\n  \"nodeCredentialType\": \"httpHeaderAuth\",\n  \"sendQuery\": true,                    // Optional\n  \"queryParameters\": {                  // Shows when sendQuery=true\n    \"parameters\": [\n      {\n        \"name\": \"limit\",\n        \"value\": \"100\"\n      }\n    ]\n  }\n}\n```\n\n#### POST with JSON\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/users\",\n  \"authentication\": \"none\",\n  \"sendBody\": true,                     // Required for POST\n  \"body\": {                             // Required when sendBody=true\n    \"contentType\": \"json\",\n    \"content\": {\n      \"name\": \"John Doe\",\n      \"email\": \"john@example.com\"\n    }\n  }\n}\n```\n\n### IF Node Examples\n\n#### String Comparison (Binary)\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"value1\": \"={{$json.status}}\",\n        \"operation\": \"equals\",\n        \"value2\": \"active\"              // Binary: needs value2\n      }\n    ]\n  }\n}\n```\n\n#### Empty Check (Unary)\n```javascript\n{\n  \"conditions\": {\n    \"string\": [\n      {\n        \"value1\": \"={{$json.email}}\",\n        \"operation\": \"isEmpty\",\n        // No value2 - unary operator\n        \"singleValue\": true             // Auto-added by sanitization\n      }\n    ]\n  }\n}\n```\n\n---\n\n## Handling Conditional Requirements\n\n### Example: HTTP Request Body\n\n**Scenario**: body field required, but only sometimes\n\n**Rule**:\n```\nbody is required when:\n  - sendBody = true AND\n  - method IN (POST, PUT, PATCH, DELETE)\n```\n\n**How to discover**:\n```javascript\n// Option 1: Read validation error\nvalidate_node({...});\n// Error: \"body required when sendBody=true\"\n\n// Option 2: Search for the property\nget_node({\n  nodeType: \"nodes-base.httpRequest\",\n  mode: \"search_properties\",\n  propertyQuery: \"body\"\n});\n// Shows: body property with displayOptions rules\n\n// Option 3: Try minimal config and iterate\n// Start without body, validation will tell you if needed\n```\n\n### Example: IF Node singleValue\n\n**Scenario**: singleValue property appears for unary operators\n\n**Rule**:\n```\nsingleValue should be true when:\n  - operation IN (isEmpty, isNotEmpty, true, false)\n```\n\n**Good news**: Auto-sanitization fixes this!\n\n**Manual check**:\n```javascript\nget_node({\n  nodeType: \"nodes-base.if\",\n  detail: \"full\"\n});\n// Shows complete schema with operator-specific rules\n```\n\n---\n\n## Configuration Anti-Patterns\n\n### âŒ Don't: Over-configure Upfront\n\n**Bad**:\n```javascript\n// Adding every possible field\n{\n  \"method\": \"GET\",\n  \"url\": \"...\",\n  \"sendQuery\": false,\n  \"sendHeaders\": false,\n  \"sendBody\": false,\n  \"timeout\": 10000,\n  \"ignoreResponseCode\": false,\n  // ... 20 more optional fields\n}\n```\n\n**Good**:\n```javascript\n// Start minimal\n{\n  \"method\": \"GET\",\n  \"url\": \"...\",\n  \"authentication\": \"none\"\n}\n// Add fields only when needed\n```\n\n### âŒ Don't: Skip Validation\n\n**Bad**:\n```javascript\n// Configure and deploy without validating\nconst config = {...};\nn8n_update_partial_workflow({...});  // YOLO\n```\n\n**Good**:\n```javascript\n// Validate before deploying\nconst config = {...};\nconst result = validate_node({...});\nif (result.valid) {\n  n8n_update_partial_workflow({...});\n}\n```\n\n### âŒ Don't: Ignore Operation Context\n\n**Bad**:\n```javascript\n// Same config for all Slack operations\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",\n  \"text\": \"...\"\n}\n\n// Then switching operation without updating config\n{\n  \"resource\": \"message\",\n  \"operation\": \"update\",  // Changed\n  \"channel\": \"#general\",  // Wrong field for update!\n  \"text\": \"...\"\n}\n```\n\n**Good**:\n```javascript\n// Check requirements when changing operation\nget_node({\n  nodeType: \"nodes-base.slack\"\n});\n// See what update operation needs (messageId, not channel)\n```\n\n---\n\n## Best Practices\n\n### âœ… Do\n\n1. **Start with get_node (standard detail)**\n   - ~1-2K tokens response\n   - Covers 95% of configuration needs\n   - Default detail level\n\n2. **Validate iteratively**\n   - Configure â†’ Validate â†’ Fix â†’ Repeat\n   - Average 2-3 iterations is normal\n   - Read validation errors carefully\n\n3. **Use search_properties mode when stuck**\n   - If field seems missing, search for it\n   - Understand what controls field visibility\n   - `get_node({mode: \"search_properties\", propertyQuery: \"...\"})`\n\n4. **Respect operation context**\n   - Different operations = different requirements\n   - Always check get_node when changing operation\n   - Don't assume configs are transferable\n\n5. **Trust auto-sanitization**\n   - Operator structure fixed automatically\n   - Don't manually add/remove singleValue\n   - IF/Switch metadata added on save\n\n### âŒ Don't\n\n1. **Jump to detail=\"full\" immediately**\n   - Try standard detail first\n   - Only escalate if needed\n   - Full schema is 3-8K tokens\n\n2. **Configure blindly**\n   - Always validate before deploying\n   - Understand why fields are required\n   - Use search_properties for conditional fields\n\n3. **Copy configs without understanding**\n   - Different operations need different fields\n   - Validate after copying\n   - Adjust for new context\n\n4. **Manually fix auto-sanitization issues**\n   - Let auto-sanitization handle operator structure\n   - Focus on business logic\n   - Save and let system fix structure\n\n---\n\n## Detailed References\n\nFor comprehensive guides on specific topics:\n\n- **[DEPENDENCIES.md](DEPENDENCIES.md)** - Deep dive into property dependencies and displayOptions\n- **[OPERATION_PATTERNS.md](OPERATION_PATTERNS.md)** - Common configuration patterns by node type\n\n---\n\n## Summary\n\n**Configuration Strategy**:\n1. Start with `get_node` (standard detail is default)\n2. Configure required fields for operation\n3. Validate configuration\n4. Search properties if stuck\n5. Iterate until valid (avg 2-3 cycles)\n6. Deploy with confidence\n\n**Key Principles**:\n- **Operation-aware**: Different operations = different requirements\n- **Progressive disclosure**: Start minimal, add as needed\n- **Dependency-aware**: Understand field visibility rules\n- **Validation-driven**: Let validation guide configuration\n\n**Related Skills**:\n- **n8n MCP Tools Expert** - How to use discovery tools correctly\n- **n8n Validation Expert** - Interpret validation errors\n- **n8n Expression Syntax** - Configure expression fields\n- **n8n Workflow Patterns** - Apply patterns with proper configuration\n",
        "skills/n8n-validation-expert/ERROR_CATALOG.md": "# Error Catalog\n\nComprehensive catalog of n8n validation errors with real examples and fixes.\n\n---\n\n## Error Types Overview\n\nCommon validation errors by priority:\n\n| Error Type | Priority | Severity | Auto-Fix |\n|---|---|---|---|\n| missing_required | Highest | Error | âŒ |\n| invalid_value | High | Error | âŒ |\n| type_mismatch | Medium | Error | âŒ |\n| invalid_expression | Medium | Error | âŒ |\n| invalid_reference | Low | Error | âŒ |\n| operator_structure | Lowest | Warning | âœ… |\n\n---\n\n## Errors (Must Fix)\n\n### 1. missing_required\n\n**What it means**: Required field is not provided in node configuration\n\n**When it occurs**:\n- Creating new nodes without all required fields\n- Copying configurations between different operations\n- Switching operations that have different requirements\n\n**Most common validation error**\n\n#### Example 1: Slack Channel Missing\n\n**Error**:\n```json\n{\n  \"type\": \"missing_required\",\n  \"property\": \"channel\",\n  \"message\": \"Channel name is required\",\n  \"node\": \"Slack\",\n  \"path\": \"parameters.channel\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\"\n  // Missing: channel\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\"  // âœ… Added required field\n}\n```\n\n**How to identify required fields**:\n```javascript\n// Use get_node to see what's required\nconst info = get_node({\n  nodeType: \"nodes-base.slack\"\n});\n// Check properties marked as \"required\": true\n```\n\n#### Example 2: HTTP Request Missing URL\n\n**Error**:\n```json\n{\n  \"type\": \"missing_required\",\n  \"property\": \"url\",\n  \"message\": \"URL is required for HTTP Request\",\n  \"node\": \"HTTP Request\",\n  \"path\": \"parameters.url\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"method\": \"GET\",\n  \"authentication\": \"none\"\n  // Missing: url\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"method\": \"GET\",\n  \"authentication\": \"none\",\n  \"url\": \"https://api.example.com/data\"  // âœ… Added\n}\n```\n\n#### Example 3: Database Query Missing Connection\n\n**Error**:\n```json\n{\n  \"type\": \"missing_required\",\n  \"property\": \"query\",\n  \"message\": \"SQL query is required\",\n  \"node\": \"Postgres\",\n  \"path\": \"parameters.query\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"operation\": \"executeQuery\"\n  // Missing: query\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"operation\": \"executeQuery\",\n  \"query\": \"SELECT * FROM users WHERE active = true\"  // âœ… Added\n}\n```\n\n#### Example 4: Conditional Fields\n\n**Error**:\n```json\n{\n  \"type\": \"missing_required\",\n  \"property\": \"body\",\n  \"message\": \"Request body is required when sendBody is true\",\n  \"node\": \"HTTP Request\",\n  \"path\": \"parameters.body\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\",\n  \"sendBody\": true\n  // Missing: body (required when sendBody=true)\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\",\n  \"sendBody\": true,\n  \"body\": {\n    \"contentType\": \"json\",\n    \"content\": {\n      \"name\": \"John\",\n      \"email\": \"john@example.com\"\n    }\n  }  // âœ… Added conditional required field\n}\n```\n\n---\n\n### 2. invalid_value\n\n**What it means**: Provided value doesn't match allowed options or format\n\n**When it occurs**:\n- Using wrong enum value\n- Typos in operation names\n- Invalid format for specialized fields (emails, URLs, channels)\n\n**Second most common error**\n\n#### Example 1: Invalid Operation\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_value\",\n  \"property\": \"operation\",\n  \"message\": \"Operation must be one of: post, update, delete, get\",\n  \"current\": \"send\",\n  \"allowed\": [\"post\", \"update\", \"delete\", \"get\"]\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"send\"  // âŒ Invalid - should be \"post\"\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\"  // âœ… Use valid operation\n}\n```\n\n#### Example 2: Invalid HTTP Method\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_value\",\n  \"property\": \"method\",\n  \"message\": \"Method must be one of: GET, POST, PUT, PATCH, DELETE, HEAD, OPTIONS\",\n  \"current\": \"FETCH\",\n  \"allowed\": [\"GET\", \"POST\", \"PUT\", \"PATCH\", \"DELETE\", \"HEAD\", \"OPTIONS\"]\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"method\": \"FETCH\",  // âŒ Invalid\n  \"url\": \"https://api.example.com\"\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"method\": \"GET\",  // âœ… Use valid HTTP method\n  \"url\": \"https://api.example.com\"\n}\n```\n\n#### Example 3: Invalid Channel Format\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_value\",\n  \"property\": \"channel\",\n  \"message\": \"Channel name must start with # and be lowercase (e.g., #general)\",\n  \"current\": \"General\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"General\"  // âŒ Wrong format\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\"  // âœ… Correct format\n}\n```\n\n#### Example 4: Invalid Enum with Case Sensitivity\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_value\",\n  \"property\": \"resource\",\n  \"message\": \"Resource must be one of: channel, message, user, file\",\n  \"current\": \"Message\",\n  \"allowed\": [\"channel\", \"message\", \"user\", \"file\"]\n}\n```\n\n**Note**: Enums are case-sensitive!\n\n**Broken Configuration**:\n```javascript\n{\n  \"resource\": \"Message\",  // âŒ Capital M\n  \"operation\": \"post\"\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"resource\": \"message\",  // âœ… Lowercase\n  \"operation\": \"post\"\n}\n```\n\n---\n\n### 3. type_mismatch\n\n**What it means**: Value is wrong data type (string instead of number, etc.)\n\n**When it occurs**:\n- Hardcoding values that should be numbers\n- Using expressions where literals are expected\n- JSON serialization issues\n\n**Common error**\n\n#### Example 1: String Instead of Number\n\n**Error**:\n```json\n{\n  \"type\": \"type_mismatch\",\n  \"property\": \"limit\",\n  \"message\": \"Expected number, got string\",\n  \"expected\": \"number\",\n  \"current\": \"100\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"operation\": \"executeQuery\",\n  \"query\": \"SELECT * FROM users\",\n  \"limit\": \"100\"  // âŒ String\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"operation\": \"executeQuery\",\n  \"query\": \"SELECT * FROM users\",\n  \"limit\": 100  // âœ… Number\n}\n```\n\n#### Example 2: Number Instead of String\n\n**Error**:\n```json\n{\n  \"type\": \"type_mismatch\",\n  \"property\": \"channel\",\n  \"message\": \"Expected string, got number\",\n  \"expected\": \"string\",\n  \"current\": 12345\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": 12345  // âŒ Number (even if channel ID)\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\"  // âœ… String (channel name, not ID)\n}\n```\n\n#### Example 3: Boolean as String\n\n**Error**:\n```json\n{\n  \"type\": \"type_mismatch\",\n  \"property\": \"sendHeaders\",\n  \"message\": \"Expected boolean, got string\",\n  \"expected\": \"boolean\",\n  \"current\": \"true\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com\",\n  \"sendHeaders\": \"true\"  // âŒ String \"true\"\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com\",\n  \"sendHeaders\": true  // âœ… Boolean true\n}\n```\n\n#### Example 4: Object Instead of Array\n\n**Error**:\n```json\n{\n  \"type\": \"type_mismatch\",\n  \"property\": \"tags\",\n  \"message\": \"Expected array, got object\",\n  \"expected\": \"array\",\n  \"current\": {\"tag\": \"important\"}\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"name\": \"New Channel\",\n  \"tags\": {\"tag\": \"important\"}  // âŒ Object\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"name\": \"New Channel\",\n  \"tags\": [\"important\", \"alerts\"]  // âœ… Array\n}\n```\n\n---\n\n### 4. invalid_expression\n\n**What it means**: n8n expression has syntax errors or invalid references\n\n**When it occurs**:\n- Missing `{{}}` around expressions\n- Typos in variable names\n- Referencing non-existent nodes or fields\n- Invalid JavaScript syntax in expressions\n\n**Moderately common**\n\n**Related**: See **n8n Expression Syntax** skill for comprehensive expression guidance\n\n#### Example 1: Missing Curly Braces\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_expression\",\n  \"property\": \"text\",\n  \"message\": \"Expressions must be wrapped in {{}}\",\n  \"current\": \"$json.name\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",\n  \"text\": \"$json.name\"  // âŒ Missing {{}}\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#general\",\n  \"text\": \"={{$json.name}}\"  // âœ… Wrapped in {{}}\n}\n```\n\n#### Example 2: Invalid Node Reference\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_expression\",\n  \"property\": \"value\",\n  \"message\": \"Referenced node 'HTTP Requets' does not exist\",\n  \"current\": \"={{$node['HTTP Requets'].json.data}}\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"field\": \"data\",\n  \"value\": \"={{$node['HTTP Requets'].json.data}}\"  // âŒ Typo in node name\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"field\": \"data\",\n  \"value\": \"={{$node['HTTP Request'].json.data}}\"  // âœ… Correct node name\n}\n```\n\n#### Example 3: Invalid Property Access\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_expression\",\n  \"property\": \"text\",\n  \"message\": \"Cannot access property 'user' of undefined\",\n  \"current\": \"={{$json.data.user.name}}\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"text\": \"={{$json.data.user.name}}\"  // âŒ Structure doesn't exist\n}\n```\n\n**Fix** (with safe navigation):\n```javascript\n{\n  \"text\": \"={{$json.data?.user?.name || 'Unknown'}}\"  // âœ… Safe navigation + fallback\n}\n```\n\n#### Example 4: Webhook Data Access Error\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_expression\",\n  \"property\": \"value\",\n  \"message\": \"Property 'email' not found in $json\",\n  \"current\": \"={{$json.email}}\"\n}\n```\n\n**Common Gotcha**: Webhook data is under `.body`!\n\n**Broken Configuration**:\n```javascript\n{\n  \"field\": \"email\",\n  \"value\": \"={{$json.email}}\"  // âŒ Missing .body\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"field\": \"email\",\n  \"value\": \"={{$json.body.email}}\"  // âœ… Webhook data under .body\n}\n```\n\n---\n\n### 5. invalid_reference\n\n**What it means**: Configuration references a node that doesn't exist in the workflow\n\n**When it occurs**:\n- Node was renamed or deleted\n- Typo in node name\n- Copy-pasting from another workflow\n\n**Less common error**\n\n#### Example 1: Deleted Node Reference\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_reference\",\n  \"property\": \"expression\",\n  \"message\": \"Node 'Transform Data' does not exist in workflow\",\n  \"referenced_node\": \"Transform Data\"\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"value\": \"={{$node['Transform Data'].json.result}}\"  // âŒ Node deleted\n}\n```\n\n**Fix**:\n```javascript\n// Option 1: Update to existing node\n{\n  \"value\": \"={{$node['Set'].json.result}}\"\n}\n\n// Option 2: Remove expression if not needed\n{\n  \"value\": \"default_value\"\n}\n```\n\n#### Example 2: Connection to Non-Existent Node\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_reference\",\n  \"message\": \"Connection references node 'Slack1' which does not exist\",\n  \"source\": \"HTTP Request\",\n  \"target\": \"Slack1\"\n}\n```\n\n**Fix**: Use `cleanStaleConnections` operation:\n```javascript\nn8n_update_partial_workflow({\n  id: \"workflow-id\",\n  operations: [{\n    type: \"cleanStaleConnections\"\n  }]\n})\n```\n\n#### Example 3: Renamed Node Not Updated\n\n**Error**:\n```json\n{\n  \"type\": \"invalid_reference\",\n  \"property\": \"expression\",\n  \"message\": \"Node 'Get Weather' does not exist (did you mean 'Weather API'?)\",\n  \"referenced_node\": \"Get Weather\",\n  \"suggestions\": [\"Weather API\"]\n}\n```\n\n**Broken Configuration**:\n```javascript\n{\n  \"value\": \"={{$node['Get Weather'].json.temperature}}\"  // âŒ Old name\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"value\": \"={{$node['Weather API'].json.temperature}}\"  // âœ… Current name\n}\n```\n\n---\n\n## Warnings (Should Fix)\n\n### 6. best_practice\n\n**What it means**: Configuration works but doesn't follow best practices\n\n**Severity**: Warning (doesn't block execution)\n\n**When acceptable**: Development, testing, simple workflows\n\n**When to fix**: Production workflows, critical operations\n\n#### Example 1: Missing Error Handling\n\n**Warning**:\n```json\n{\n  \"type\": \"best_practice\",\n  \"property\": \"onError\",\n  \"message\": \"Slack API can have rate limits and connection issues\",\n  \"suggestion\": \"Add error handling: onError: 'continueRegularOutput'\"\n}\n```\n\n**Current Configuration**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#alerts\"\n  // No error handling âš ï¸\n}\n```\n\n**Recommended Fix**:\n```javascript\n{\n  \"resource\": \"message\",\n  \"operation\": \"post\",\n  \"channel\": \"#alerts\",\n  \"continueOnFail\": true,\n  \"retryOnFail\": true,\n  \"maxTries\": 3\n}\n```\n\n#### Example 2: No Retry Logic\n\n**Warning**:\n```json\n{\n  \"type\": \"best_practice\",\n  \"property\": \"retryOnFail\",\n  \"message\": \"External API calls should retry on failure\",\n  \"suggestion\": \"Add retryOnFail: true, maxTries: 3, waitBetweenTries: 1000\"\n}\n```\n\n**When to ignore**: Idempotent operations, APIs with their own retry logic\n\n**When to fix**: Flaky external services, production automation\n\n---\n\n### 7. deprecated\n\n**What it means**: Using old API version or deprecated feature\n\n**Severity**: Warning (still works but may stop working in future)\n\n**When to fix**: Always (eventually)\n\n#### Example 1: Old typeVersion\n\n**Warning**:\n```json\n{\n  \"type\": \"deprecated\",\n  \"property\": \"typeVersion\",\n  \"message\": \"typeVersion 1 is deprecated for Slack node, use version 2\",\n  \"current\": 1,\n  \"recommended\": 2\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"type\": \"n8n-nodes-base.slack\",\n  \"typeVersion\": 2,  // âœ… Updated\n  // May need to update configuration for new version\n}\n```\n\n---\n\n### 8. performance\n\n**What it means**: Configuration may cause performance issues\n\n**Severity**: Warning\n\n**When to fix**: High-volume workflows, large datasets\n\n#### Example 1: Unbounded Query\n\n**Warning**:\n```json\n{\n  \"type\": \"performance\",\n  \"property\": \"query\",\n  \"message\": \"SELECT without LIMIT can return massive datasets\",\n  \"suggestion\": \"Add LIMIT clause or use pagination\"\n}\n```\n\n**Current**:\n```sql\nSELECT * FROM users WHERE active = true\n```\n\n**Fix**:\n```sql\nSELECT * FROM users WHERE active = true LIMIT 1000\n```\n\n---\n\n## Auto-Sanitization Fixes\n\n### 9. operator_structure\n\n**What it means**: IF/Switch operator structure issues\n\n**Severity**: Warning\n\n**Auto-Fix**: âœ… YES - Fixed automatically on workflow save\n\n**Rare** (mostly auto-fixed)\n\n#### Fixed Automatically: Binary Operators\n\n**Before** (you create this):\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"equals\",\n  \"singleValue\": true  // âŒ Wrong for binary operator\n}\n```\n\n**After** (auto-sanitization fixes it):\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"equals\"\n  // singleValue removed âœ…\n}\n```\n\n**You don't need to do anything** - this is fixed on save!\n\n#### Fixed Automatically: Unary Operators\n\n**Before**:\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"isEmpty\"\n  // Missing singleValue âŒ\n}\n```\n\n**After**:\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"isEmpty\",\n  \"singleValue\": true  // âœ… Added automatically\n}\n```\n\n**What you should do**: Trust auto-sanitization, don't manually fix these!\n\n---\n\n## Recovery Patterns\n\n### Pattern 1: Progressive Validation\n\n**Problem**: Too many errors at once\n\n**Solution**:\n```javascript\n// Step 1: Minimal valid config\nlet config = {\n  resource: \"message\",\n  operation: \"post\",\n  channel: \"#general\",\n  text: \"Hello\"\n};\n\nvalidate_node({nodeType: \"nodes-base.slack\", config, profile: \"runtime\"});\n// âœ… Valid\n\n// Step 2: Add features one by one\nconfig.attachments = [...];\nvalidate_node({nodeType: \"nodes-base.slack\", config, profile: \"runtime\"});\n\nconfig.blocks = [...];\nvalidate_node({nodeType: \"nodes-base.slack\", config, profile: \"runtime\"});\n```\n\n### Pattern 2: Error Triage\n\n**Problem**: Multiple errors\n\n**Solution**:\n```javascript\nconst result = validate_node_operation({...});\n\n// 1. Fix errors (must fix)\nresult.errors.forEach(error => {\n  console.log(`MUST FIX: ${error.property} - ${error.message}`);\n});\n\n// 2. Review warnings (should fix)\nresult.warnings.forEach(warning => {\n  console.log(`SHOULD FIX: ${warning.property} - ${warning.message}`);\n});\n\n// 3. Consider suggestions (optional)\nresult.suggestions.forEach(sug => {\n  console.log(`OPTIONAL: ${sug.message}`);\n});\n```\n\n### Pattern 3: Use get_node\n\n**Problem**: Don't know what's required\n\n**Solution**:\n```javascript\n// Before configuring, check requirements\nconst info = get_node({\n  nodeType: \"nodes-base.slack\"\n});\n\n// Look for required fields\ninfo.properties.forEach(prop => {\n  if (prop.required) {\n    console.log(`Required: ${prop.name} (${prop.type})`);\n  }\n});\n```\n\n---\n\n## Summary\n\n**Most Common Errors**:\n1. `missing_required` (45%) - Always check get_node\n2. `invalid_value` (28%) - Check allowed values\n3. `type_mismatch` (12%) - Use correct data types\n4. `invalid_expression` (8%) - Use Expression Syntax skill\n5. `invalid_reference` (5%) - Clean stale connections\n\n**Auto-Fixed**:\n- `operator_structure` - Trust auto-sanitization!\n\n**Related Skills**:\n- **[SKILL.md](SKILL.md)** - Main validation guide\n- **[FALSE_POSITIVES.md](FALSE_POSITIVES.md)** - When to ignore warnings\n- **n8n Expression Syntax** - Fix expression errors\n- **n8n MCP Tools Expert** - Use validation tools correctly\n",
        "skills/n8n-validation-expert/FALSE_POSITIVES.md": "# False Positives Guide\n\nWhen validation warnings are acceptable and how to handle them.\n\n---\n\n## What Are False Positives?\n\n**Definition**: Validation warnings that are technically \"issues\" but acceptable in your specific use case.\n\n**Key insight**: Not all warnings need to be fixed!\n\nMany warnings are context-dependent:\n- ~40% of warnings are acceptable in specific use cases\n- Using `ai-friendly` profile reduces false positives by 60%\n\n---\n\n## Philosophy\n\n### âœ… Good Practice\n```\n1. Run validation with 'runtime' profile\n2. Fix all ERRORS\n3. Review each WARNING\n4. Decide if acceptable for your use case\n5. Document why you accepted it\n6. Deploy with confidence\n```\n\n### âŒ Bad Practice\n```\n1. Ignore all warnings blindly\n2. Use 'minimal' profile to avoid warnings\n3. Deploy without understanding risks\n```\n\n---\n\n## Common False Positives\n\n### 1. Missing Error Handling\n\n**Warning**:\n```json\n{\n  \"type\": \"best_practice\",\n  \"message\": \"No error handling configured\",\n  \"suggestion\": \"Add continueOnFail: true and retryOnFail: true\"\n}\n```\n\n#### When Acceptable\n\n**âœ… Development/Testing Workflows**\n```javascript\n// Testing workflow - failures are obvious\n{\n  \"name\": \"Test Slack Integration\",\n  \"nodes\": [{\n    \"type\": \"n8n-nodes-base.slack\",\n    \"parameters\": {\n      \"resource\": \"message\",\n      \"operation\": \"post\",\n      \"channel\": \"#test\"\n      // No error handling - OK for testing\n    }\n  }]\n}\n```\n\n**Reasoning**: You WANT to see failures during testing.\n\n**âœ… Non-Critical Notifications**\n```javascript\n// Nice-to-have notification\n{\n  \"name\": \"Optional Slack Notification\",\n  \"parameters\": {\n    \"channel\": \"#general\",\n    \"text\": \"FYI: Process completed\"\n    // If this fails, no big deal\n  }\n}\n```\n\n**Reasoning**: Notification failure doesn't affect core functionality.\n\n**âœ… Manual Trigger Workflows**\n```javascript\n// Manual workflow - user is watching\n{\n  \"nodes\": [{\n    \"type\": \"n8n-nodes-base.webhook\",\n    \"parameters\": {\n      \"path\": \"manual-test\"\n      // No error handling - user will retry manually\n    }\n  }]\n}\n```\n\n**Reasoning**: User is present to see and handle errors.\n\n#### When to Fix\n\n**âŒ Production Automation**\n```javascript\n// BAD: Critical workflow without error handling\n{\n  \"name\": \"Process Customer Orders\",\n  \"nodes\": [{\n    \"type\": \"n8n-nodes-base.postgres\",\n    \"parameters\": {\n      \"query\": \"INSERT INTO orders...\"\n      // âŒ Should have error handling!\n    }\n  }]\n}\n```\n\n**Fix**:\n```javascript\n{\n  \"parameters\": {\n    \"query\": \"INSERT INTO orders...\",\n    \"continueOnFail\": true,\n    \"retryOnFail\": true,\n    \"maxTries\": 3,\n    \"waitBetweenTries\": 1000\n  }\n}\n```\n\n**âŒ Critical Integrations**\n```javascript\n// BAD: Payment processing without error handling\n{\n  \"name\": \"Process Payment\",\n  \"type\": \"n8n-nodes-base.stripe\"\n  // âŒ Payment failures MUST be handled!\n}\n```\n\n---\n\n### 2. No Retry Logic\n\n**Warning**:\n```json\n{\n  \"type\": \"best_practice\",\n  \"message\": \"External API calls should retry on failure\",\n  \"suggestion\": \"Add retryOnFail: true with exponential backoff\"\n}\n```\n\n#### When Acceptable\n\n**âœ… APIs with Built-in Retry**\n```javascript\n// Stripe has its own retry mechanism\n{\n  \"type\": \"n8n-nodes-base.stripe\",\n  \"parameters\": {\n    \"resource\": \"charge\",\n    \"operation\": \"create\"\n    // Stripe SDK retries automatically\n  }\n}\n```\n\n**âœ… Idempotent Operations**\n```javascript\n// GET request - safe to retry manually if needed\n{\n  \"method\": \"GET\",\n  \"url\": \"https://api.example.com/status\"\n  // Read-only, no side effects\n}\n```\n\n**âœ… Local/Internal Services**\n```javascript\n// Internal API with high reliability\n{\n  \"url\": \"http://localhost:3000/process\"\n  // Local service, failures are rare and obvious\n}\n```\n\n#### When to Fix\n\n**âŒ Flaky External APIs**\n```javascript\n// BAD: Known unreliable API without retries\n{\n  \"url\": \"https://unreliable-api.com/data\"\n  // âŒ Should retry!\n}\n\n// GOOD:\n{\n  \"url\": \"https://unreliable-api.com/data\",\n  \"retryOnFail\": true,\n  \"maxTries\": 3,\n  \"waitBetweenTries\": 2000\n}\n```\n\n**âŒ Non-Idempotent Operations**\n```javascript\n// BAD: POST without retry - may lose data\n{\n  \"method\": \"POST\",\n  \"url\": \"https://api.example.com/create\"\n  // âŒ Could timeout and lose data\n}\n```\n\n---\n\n### 3. Missing Rate Limiting\n\n**Warning**:\n```json\n{\n  \"type\": \"best_practice\",\n  \"message\": \"API may have rate limits\",\n  \"suggestion\": \"Add rate limiting or batch requests\"\n}\n```\n\n#### When Acceptable\n\n**âœ… Internal APIs**\n```javascript\n// Internal microservice - no rate limits\n{\n  \"url\": \"http://internal-api/process\"\n  // Company controls both ends\n}\n```\n\n**âœ… Low-Volume Workflows**\n```javascript\n// Runs once per day\n{\n  \"trigger\": {\n    \"type\": \"n8n-nodes-base.cron\",\n    \"parameters\": {\n      \"mode\": \"everyDay\",\n      \"hour\": 9\n    }\n  },\n  \"nodes\": [{\n    \"type\": \"n8n-nodes-base.httpRequest\",\n    \"parameters\": {\n      \"url\": \"https://api.example.com/daily-report\"\n      // Once per day = no rate limit concerns\n    }\n  }]\n}\n```\n\n**âœ… APIs with Server-Side Limits**\n```javascript\n// API returns 429 and n8n handles it\n{\n  \"url\": \"https://api.example.com/data\",\n  \"options\": {\n    \"response\": {\n      \"response\": {\n        \"neverError\": false  // Will error on 429\n      }\n    }\n  },\n  \"retryOnFail\": true  // Retry on 429\n}\n```\n\n#### When to Fix\n\n**âŒ High-Volume Public APIs**\n```javascript\n// BAD: Loop hitting rate-limited API\n{\n  \"nodes\": [{\n    \"type\": \"n8n-nodes-base.splitInBatches\",\n    \"parameters\": {\n      \"batchSize\": 100\n    }\n  }, {\n    \"type\": \"n8n-nodes-base.httpRequest\",\n    \"parameters\": {\n      \"url\": \"https://api.github.com/...\"\n      // âŒ GitHub has strict rate limits!\n    }\n  }]\n}\n\n// GOOD: Add rate limiting\n{\n  \"type\": \"n8n-nodes-base.httpRequest\",\n  \"parameters\": {\n    \"url\": \"https://api.github.com/...\",\n    \"options\": {\n      \"batching\": {\n        \"batch\": {\n          \"batchSize\": 10,\n          \"batchInterval\": 1000  // 1 second between batches\n        }\n      }\n    }\n  }\n}\n```\n\n---\n\n### 4. Unbounded Database Queries\n\n**Warning**:\n```json\n{\n  \"type\": \"performance\",\n  \"message\": \"SELECT without LIMIT can return massive datasets\",\n  \"suggestion\": \"Add LIMIT clause or use pagination\"\n}\n```\n\n#### When Acceptable\n\n**âœ… Small Known Datasets**\n```javascript\n// Config table with ~10 rows\n{\n  \"query\": \"SELECT * FROM app_config\"\n  // Known to be small, no LIMIT needed\n}\n```\n\n**âœ… Aggregation Queries**\n```javascript\n// COUNT/SUM operations\n{\n  \"query\": \"SELECT COUNT(*) as total FROM users WHERE active = true\"\n  // Aggregation, not returning rows\n}\n```\n\n**âœ… Development/Testing**\n```javascript\n// Testing with small dataset\n{\n  \"query\": \"SELECT * FROM test_users\"\n  // Test database has 5 rows\n}\n```\n\n#### When to Fix\n\n**âŒ Production Queries on Large Tables**\n```javascript\n// BAD: User table could have millions of rows\n{\n  \"query\": \"SELECT * FROM users\"\n  // âŒ Could return millions of rows!\n}\n\n// GOOD: Add LIMIT\n{\n  \"query\": \"SELECT * FROM users LIMIT 1000\"\n}\n\n// BETTER: Use pagination\n{\n  \"query\": \"SELECT * FROM users WHERE id > {{$json.lastId}} LIMIT 1000\"\n}\n```\n\n---\n\n### 5. Missing Input Validation\n\n**Warning**:\n```json\n{\n  \"type\": \"best_practice\",\n  \"message\": \"Webhook doesn't validate input data\",\n  \"suggestion\": \"Add IF node to validate required fields\"\n}\n```\n\n#### When Acceptable\n\n**âœ… Internal Webhooks**\n```javascript\n// Webhook from your own backend\n{\n  \"type\": \"n8n-nodes-base.webhook\",\n  \"parameters\": {\n    \"path\": \"internal-trigger\"\n    // Your backend already validates\n  }\n}\n```\n\n**âœ… Trusted Sources**\n```javascript\n// Webhook from Stripe (cryptographically signed)\n{\n  \"type\": \"n8n-nodes-base.webhook\",\n  \"parameters\": {\n    \"path\": \"stripe-webhook\",\n    \"authentication\": \"headerAuth\"\n    // Stripe signature validates authenticity\n  }\n}\n```\n\n#### When to Fix\n\n**âŒ Public Webhooks**\n```javascript\n// BAD: Public webhook without validation\n{\n  \"type\": \"n8n-nodes-base.webhook\",\n  \"parameters\": {\n    \"path\": \"public-form-submit\"\n    // âŒ Anyone can send anything!\n  }\n}\n\n// GOOD: Add validation\n{\n  \"nodes\": [\n    {\n      \"name\": \"Webhook\",\n      \"type\": \"n8n-nodes-base.webhook\"\n    },\n    {\n      \"name\": \"Validate Input\",\n      \"type\": \"n8n-nodes-base.if\",\n      \"parameters\": {\n        \"conditions\": {\n          \"boolean\": [\n            {\n              \"value1\": \"={{$json.body.email}}\",\n              \"operation\": \"isNotEmpty\"\n            },\n            {\n              \"value1\": \"={{$json.body.email}}\",\n              \"operation\": \"regex\",\n              \"value2\": \"^[^@]+@[^@]+\\\\.[^@]+$\"\n            }\n          ]\n        }\n      }\n    }\n  ]\n}\n```\n\n---\n\n### 6. Hardcoded Credentials\n\n**Warning**:\n```json\n{\n  \"type\": \"security\",\n  \"message\": \"Credentials should not be hardcoded\",\n  \"suggestion\": \"Use n8n credential system\"\n}\n```\n\n#### When Acceptable\n\n**âœ… Public APIs (No Auth)**\n```javascript\n// Truly public API with no secrets\n{\n  \"url\": \"https://api.ipify.org\"\n  // No credentials needed\n}\n```\n\n**âœ… Demo/Example Workflows**\n```javascript\n// Example workflow in documentation\n{\n  \"url\": \"https://example.com/api\",\n  \"headers\": {\n    \"Authorization\": \"Bearer DEMO_TOKEN\"\n  }\n  // Clearly marked as example\n}\n```\n\n#### When to Fix (Always!)\n\n**âŒ Real Credentials**\n```javascript\n// BAD: Real API key in workflow\n{\n  \"headers\": {\n    \"Authorization\": \"Bearer sk_live_abc123...\"\n  }\n  // âŒ NEVER hardcode real credentials!\n}\n\n// GOOD: Use credentials system\n{\n  \"authentication\": \"headerAuth\",\n  \"credentials\": {\n    \"headerAuth\": {\n      \"id\": \"credential-id\",\n      \"name\": \"My API Key\"\n    }\n  }\n}\n```\n\n---\n\n## Validation Profile Strategies\n\n### Strategy 1: Progressive Strictness\n\n**Development**:\n```javascript\nvalidate_node({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"ai-friendly\"  // Fewer warnings during development\n})\n```\n\n**Pre-Production**:\n```javascript\nvalidate_node({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"  // Balanced validation\n})\n```\n\n**Production Deployment**:\n```javascript\nvalidate_node({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"strict\"  // All warnings, review each one\n})\n```\n\n### Strategy 2: Profile by Workflow Type\n\n**Quick Automations**:\n- Profile: `ai-friendly`\n- Accept: Most warnings\n- Fix: Only errors + security warnings\n\n**Business-Critical Workflows**:\n- Profile: `strict`\n- Accept: Very few warnings\n- Fix: Everything possible\n\n**Integration Testing**:\n- Profile: `minimal`\n- Accept: All warnings (just testing connections)\n- Fix: Only errors that prevent execution\n\n---\n\n## Decision Framework\n\n### Should I Fix This Warning?\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Is it a SECURITY warning?       â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ Always fix                â”‚\nâ”‚ NO  â†’ Continue                  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Is this a production workflow?  â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ Continue                  â”‚\nâ”‚ NO  â†’ Probably acceptable       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Does it handle critical data?   â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ Fix the warning           â”‚\nâ”‚ NO  â†’ Continue                  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â†“\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Is there a known workaround?    â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚ YES â†’ Acceptable if documented  â”‚\nâ”‚ NO  â†’ Fix the warning           â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## Documentation Template\n\nWhen accepting a warning, document why:\n\n```javascript\n// workflows/customer-notifications.json\n\n{\n  \"nodes\": [{\n    \"name\": \"Send Slack Notification\",\n    \"type\": \"n8n-nodes-base.slack\",\n    \"parameters\": {\n      \"channel\": \"#notifications\"\n      // ACCEPTED WARNING: No error handling\n      // Reason: Non-critical notification, failures are acceptable\n      // Reviewed: 2025-10-20\n      // Reviewer: Engineering Team\n    }\n  }]\n}\n```\n\n---\n\n## Known n8n Issues\n\n### Issue #304: IF Node Metadata Warning\n\n**Warning**:\n```json\n{\n  \"type\": \"metadata_incomplete\",\n  \"message\": \"IF node missing conditions.options metadata\",\n  \"node\": \"IF\"\n}\n```\n\n**Status**: False positive for IF v2.2+\n\n**Why it occurs**: Auto-sanitization adds metadata, but validation runs before sanitization\n\n**What to do**: Ignore - metadata is added on save\n\n### Issue #306: Switch Branch Count\n\n**Warning**:\n```json\n{\n  \"type\": \"configuration_mismatch\",\n  \"message\": \"Switch has 3 rules but 4 output connections\",\n  \"node\": \"Switch\"\n}\n```\n\n**Status**: False positive when using \"fallback\" mode\n\n**Why it occurs**: Fallback creates extra output\n\n**What to do**: Ignore if using fallback intentionally\n\n### Issue #338: Credential Validation in Test Mode\n\n**Warning**:\n```json\n{\n  \"type\": \"credentials_invalid\",\n  \"message\": \"Cannot validate credentials without execution context\"\n}\n```\n\n**Status**: False positive during static validation\n\n**Why it occurs**: Credentials validated at runtime, not build time\n\n**What to do**: Ignore - credentials are validated when workflow runs\n\n---\n\n## Summary\n\n### Always Fix\n- âŒ Security warnings\n- âŒ Hardcoded credentials\n- âŒ SQL injection risks\n- âŒ Production workflow errors\n\n### Usually Fix\n- âš ï¸ Error handling (production)\n- âš ï¸ Retry logic (external APIs)\n- âš ï¸ Input validation (public webhooks)\n- âš ï¸ Rate limiting (high volume)\n\n### Often Acceptable\n- âœ… Error handling (dev/test)\n- âœ… Retry logic (internal APIs)\n- âœ… Rate limiting (low volume)\n- âœ… Query limits (small datasets)\n\n### Always Acceptable\n- âœ… Known n8n issues (#304, #306, #338)\n- âœ… Auto-sanitization warnings\n- âœ… Metadata completeness (auto-fixed)\n\n**Golden Rule**: If you accept a warning, document WHY.\n\n**Related Files**:\n- **[SKILL.md](SKILL.md)** - Main validation guide\n- **[ERROR_CATALOG.md](ERROR_CATALOG.md)** - Error types and fixes\n",
        "skills/n8n-validation-expert/README.md": "# n8n Validation Expert\n\nExpert guidance for interpreting and fixing n8n validation errors.\n\n## Overview\n\n**Skill Name**: n8n Validation Expert\n**Priority**: Medium\n**Purpose**: Interpret validation errors and guide systematic fixing through the validation loop\n\n## The Problem This Solves\n\nValidation errors are common:\n\n- Validation often requires iteration (79% lead to feedback loops)\n- **7,841 validate â†’ fix cycles** (avg 23s thinking + 58s fixing)\n- **2-3 iterations** average to achieve valid configuration\n\n**Key insight**: Validation is an iterative process, not a one-shot fix!\n\n## What This Skill Teaches\n\n### Core Concepts\n\n1. **Error Severity Levels**\n   - Errors (must fix) - Block execution\n   - Warnings (should fix) - Don't block but indicate issues\n   - Suggestions (optional) - Nice-to-have improvements\n\n2. **The Validation Loop**\n   - Configure â†’ Validate â†’ Read errors â†’ Fix â†’ Validate again\n   - Average 2-3 iterations to success\n   - 23 seconds thinking + 58 seconds fixing per cycle\n\n3. **Validation Profiles**\n   - `minimal` - Quick checks, most permissive\n   - `runtime` - Recommended for most use cases\n   - `ai-friendly` - Reduces false positives for AI workflows\n   - `strict` - Maximum safety, many warnings\n\n4. **Auto-Sanitization System**\n   - Automatically fixes operator structure issues\n   - Runs on every workflow save\n   - Fixes binary/unary operator problems\n   - Adds IF/Switch metadata\n\n5. **False Positives**\n   - Not all warnings need fixing\n   - 40% of warnings are acceptable in context\n   - Use `ai-friendly` profile to reduce by 60%\n   - Document accepted warnings\n\n## File Structure\n\n```\nn8n-validation-expert/\nâ”œâ”€â”€ SKILL.md (690 lines)\nâ”‚   Core validation concepts and workflow\nâ”‚   - Validation philosophy\nâ”‚   - Error severity levels\nâ”‚   - The validation loop pattern\nâ”‚   - Validation profiles\nâ”‚   - Common error types\nâ”‚   - Auto-sanitization system\nâ”‚   - Workflow validation\nâ”‚   - Recovery strategies\nâ”‚   - Best practices\nâ”‚\nâ”œâ”€â”€ ERROR_CATALOG.md (865 lines)\nâ”‚   Complete error reference with examples\nâ”‚   - 9 error types with real examples\nâ”‚   - missing_required (45% of errors)\nâ”‚   - invalid_value (28%)\nâ”‚   - type_mismatch (12%)\nâ”‚   - invalid_expression (8%)\nâ”‚   - invalid_reference (5%)\nâ”‚   - operator_structure (2%, auto-fixed)\nâ”‚   - Recovery patterns\nâ”‚   - Summary with frequencies\nâ”‚\nâ”œâ”€â”€ FALSE_POSITIVES.md (669 lines)\nâ”‚   When warnings are acceptable\nâ”‚   - Philosophy of warning acceptance\nâ”‚   - 6 common false positive types\nâ”‚   - When acceptable vs when to fix\nâ”‚   - Validation profile strategies\nâ”‚   - Decision framework\nâ”‚   - Documentation template\nâ”‚   - Known n8n issues (#304, #306, #338)\nâ”‚\nâ””â”€â”€ README.md (this file)\n    Skill metadata and statistics\n```\n\n**Total**: ~2,224 lines across 4 files\n\n## Common Error Types\n\n| Error Type | Priority | Auto-Fix | Severity |\n|---|---|---|---|\n| missing_required | Highest | âŒ | Error |\n| invalid_value | High | âŒ | Error |\n| type_mismatch | Medium | âŒ | Error |\n| invalid_expression | Medium | âŒ | Error |\n| invalid_reference | Low | âŒ | Error |\n| operator_structure | Low | âœ… | Warning |\n\n## Key Insights\n\n### 1. Validation is Iterative\nDon't expect to get it right on the first try. Multiple validation cycles (typically 2-3) are normal and expected!\n\n### 2. False Positives Exist\nMany validation warnings are acceptable in production workflows. This skill helps you recognize which ones to address vs. which to ignore.\n\n### 3. Auto-Sanitization Works\nCertain error types (like operator structure issues) are automatically fixed by n8n. Don't waste time manually fixing these!\n\n### 4. Profile Matters\n- `ai-friendly` reduces false positives by 60%\n- `runtime` is the sweet spot for most use cases\n- `strict` has value pre-production but is noisy\n\n### 5. Error Messages Help\nValidation errors include fix guidance - read them carefully!\n\n## Usage Examples\n\n### Example 1: Basic Validation Loop\n\n```javascript\n// Iteration 1\nlet config = {\n  resource: \"channel\",\n  operation: \"create\"\n};\n\nconst result1 = validate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n// â†’ Error: Missing \"name\"\n\n// Iteration 2\nconfig.name = \"general\";\nconst result2 = validate_node_operation({...});\n// â†’ Valid! âœ…\n```\n\n### Example 2: Handling False Positives\n\n```javascript\n// Run validation\nconst result = validate_node_operation({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n\n// Fix errors (must fix)\nif (!result.valid) {\n  result.errors.forEach(error => {\n    console.log(`MUST FIX: ${error.message}`);\n  });\n}\n\n// Review warnings (context-dependent)\nresult.warnings.forEach(warning => {\n  if (warning.type === 'best_practice' && isDevWorkflow) {\n    console.log(`ACCEPTABLE: ${warning.message}`);\n  } else {\n    console.log(`SHOULD FIX: ${warning.message}`);\n  }\n});\n```\n\n### Example 3: Using Auto-Fix\n\n```javascript\n// Check what can be auto-fixed\nconst preview = n8n_autofix_workflow({\n  id: \"workflow-id\",\n  applyFixes: false  // Preview mode\n});\n\nconsole.log(`Can auto-fix: ${preview.fixCount} issues`);\n\n// Apply fixes\nif (preview.fixCount > 0) {\n  n8n_autofix_workflow({\n    id: \"workflow-id\",\n    applyFixes: true\n  });\n}\n```\n\n## When This Skill Activates\n\n**Trigger phrases**:\n- \"validation error\"\n- \"validation failing\"\n- \"what does this error mean\"\n- \"false positive\"\n- \"validation loop\"\n- \"operator structure\"\n- \"validation profile\"\n\n**Common scenarios**:\n- Encountering validation errors\n- Stuck in validation feedback loops\n- Wondering if warnings need fixing\n- Choosing the right validation profile\n- Understanding auto-sanitization\n\n## Integration with Other Skills\n\n### Works With:\n- **n8n MCP Tools Expert** - How to use validation tools correctly\n- **n8n Expression Syntax** - Fix invalid_expression errors\n- **n8n Node Configuration** - Understand required fields\n- **n8n Workflow Patterns** - Validate pattern implementations\n\n### Complementary:\n- Use MCP Tools Expert to call validation tools\n- Use Expression Syntax to fix expression errors\n- Use Node Configuration to understand dependencies\n- Use Workflow Patterns to validate structure\n\n## Testing\n\n**Evaluations**: 4 test scenarios\n\n1. **eval-001-missing-required-field.json**\n   - Tests error interpretation\n   - Guides to get_node_essentials\n   - References ERROR_CATALOG.md\n\n2. **eval-002-false-positive.json**\n   - Tests warning vs error distinction\n   - Explains false positives\n   - References FALSE_POSITIVES.md\n   - Suggests ai-friendly profile\n\n3. **eval-003-auto-sanitization.json**\n   - Tests auto-sanitization understanding\n   - Explains operator structure fixes\n   - Advises trusting auto-fix\n\n4. **eval-004-validation-loop.json**\n   - Tests iterative validation process\n   - Explains 2-3 iteration pattern\n   - Provides systematic approach\n\n## Success Metrics\n\n**Before this skill**:\n- Users confused by validation errors\n- Multiple failed attempts to fix\n- Frustration with \"validation loops\"\n- Fixing issues that auto-fix handles\n- Fixing all warnings unnecessarily\n\n**After this skill**:\n- Systematic error resolution\n- Understanding of iteration process\n- Recognition of false positives\n- Trust in auto-sanitization\n- Context-aware warning handling\n- 94% success within 3 iterations\n\n## Related Documentation\n\n- **n8n-mcp MCP Server**: Provides validation tools\n- **n8n Validation API**: validate_node_operation, validate_workflow, n8n_autofix_workflow\n- **n8n Issues**: #304 (IF metadata), #306 (Switch branches), #338 (credentials)\n\n## Version History\n\n- **v1.0** (2025-10-20): Initial implementation\n  - SKILL.md with core concepts\n  - ERROR_CATALOG.md with 9 error types\n  - FALSE_POSITIVES.md with 6 false positive patterns\n  - 4 evaluation scenarios\n\n## Author\n\nConceived by Romuald CzÅ‚onkowski - [www.aiadvisors.pl/en](https://www.aiadvisors.pl/en)\n\nPart of the n8n-skills meta-skill collection.\n",
        "skills/n8n-validation-expert/SKILL.md": "---\nname: n8n-validation-expert\ndescription: Interpret validation errors and guide fixing them. Use when encountering validation errors, validation warnings, false positives, operator structure issues, or need help understanding validation results. Also use when asking about validation profiles, error types, or the validation loop process.\n---\n\n# n8n Validation Expert\n\nExpert guide for interpreting and fixing n8n validation errors.\n\n---\n\n## Validation Philosophy\n\n**Validate early, validate often**\n\nValidation is typically iterative:\n- Expect validation feedback loops\n- Usually 2-3 validate â†’ fix cycles\n- Average: 23s thinking about errors, 58s fixing them\n\n**Key insight**: Validation is an iterative process, not one-shot!\n\n---\n\n## Error Severity Levels\n\n### 1. Errors (Must Fix)\n**Blocks workflow execution** - Must be resolved before activation\n\n**Types**:\n- `missing_required` - Required field not provided\n- `invalid_value` - Value doesn't match allowed options\n- `type_mismatch` - Wrong data type (string instead of number)\n- `invalid_reference` - Referenced node doesn't exist\n- `invalid_expression` - Expression syntax error\n\n**Example**:\n```json\n{\n  \"type\": \"missing_required\",\n  \"property\": \"channel\",\n  \"message\": \"Channel name is required\",\n  \"fix\": \"Provide a channel name (lowercase, no spaces, 1-80 characters)\"\n}\n```\n\n### 2. Warnings (Should Fix)\n**Doesn't block execution** - Workflow can be activated but may have issues\n\n**Types**:\n- `best_practice` - Recommended but not required\n- `deprecated` - Using old API/feature\n- `performance` - Potential performance issue\n\n**Example**:\n```json\n{\n  \"type\": \"best_practice\",\n  \"property\": \"errorHandling\",\n  \"message\": \"Slack API can have rate limits\",\n  \"suggestion\": \"Add onError: 'continueRegularOutput' with retryOnFail\"\n}\n```\n\n### 3. Suggestions (Optional)\n**Nice to have** - Improvements that could enhance workflow\n\n**Types**:\n- `optimization` - Could be more efficient\n- `alternative` - Better way to achieve same result\n\n---\n\n## The Validation Loop\n\n### Pattern from Telemetry\n**7,841 occurrences** of this pattern:\n\n```\n1. Configure node\n   â†“\n2. validate_node (23 seconds thinking about errors)\n   â†“\n3. Read error messages carefully\n   â†“\n4. Fix errors\n   â†“\n5. validate_node again (58 seconds fixing)\n   â†“\n6. Repeat until valid (usually 2-3 iterations)\n```\n\n### Example\n```javascript\n// Iteration 1\nlet config = {\n  resource: \"channel\",\n  operation: \"create\"\n};\n\nconst result1 = validate_node({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n// â†’ Error: Missing \"name\"\n\n// â±ï¸  23 seconds thinking...\n\n// Iteration 2\nconfig.name = \"general\";\n\nconst result2 = validate_node({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n// â†’ Error: Missing \"text\"\n\n// â±ï¸  58 seconds fixing...\n\n// Iteration 3\nconfig.text = \"Hello!\";\n\nconst result3 = validate_node({\n  nodeType: \"nodes-base.slack\",\n  config,\n  profile: \"runtime\"\n});\n// â†’ Valid! âœ…\n```\n\n**This is normal!** Don't be discouraged by multiple iterations.\n\n---\n\n## Validation Profiles\n\nChoose the right profile for your stage:\n\n### minimal\n**Use when**: Quick checks during editing\n\n**Validates**:\n- Only required fields\n- Basic structure\n\n**Pros**: Fastest, most permissive\n**Cons**: May miss issues\n\n### runtime (RECOMMENDED)\n**Use when**: Pre-deployment validation\n\n**Validates**:\n- Required fields\n- Value types\n- Allowed values\n- Basic dependencies\n\n**Pros**: Balanced, catches real errors\n**Cons**: Some edge cases missed\n\n**This is the recommended profile for most use cases**\n\n### ai-friendly\n**Use when**: AI-generated configurations\n\n**Validates**:\n- Same as runtime\n- Reduces false positives\n- More tolerant of minor issues\n\n**Pros**: Less noisy for AI workflows\n**Cons**: May allow some questionable configs\n\n### strict\n**Use when**: Production deployment, critical workflows\n\n**Validates**:\n- Everything\n- Best practices\n- Performance concerns\n- Security issues\n\n**Pros**: Maximum safety\n**Cons**: Many warnings, some false positives\n\n---\n\n## Common Error Types\n\n### 1. missing_required\n**What it means**: A required field is not provided\n\n**How to fix**:\n1. Use `get_node` to see required fields\n2. Add the missing field to your configuration\n3. Provide an appropriate value\n\n**Example**:\n```javascript\n// Error\n{\n  \"type\": \"missing_required\",\n  \"property\": \"channel\",\n  \"message\": \"Channel name is required\"\n}\n\n// Fix\nconfig.channel = \"#general\";\n```\n\n### 2. invalid_value\n**What it means**: Value doesn't match allowed options\n\n**How to fix**:\n1. Check error message for allowed values\n2. Use `get_node` to see options\n3. Update to a valid value\n\n**Example**:\n```javascript\n// Error\n{\n  \"type\": \"invalid_value\",\n  \"property\": \"operation\",\n  \"message\": \"Operation must be one of: post, update, delete\",\n  \"current\": \"send\"\n}\n\n// Fix\nconfig.operation = \"post\";  // Use valid operation\n```\n\n### 3. type_mismatch\n**What it means**: Wrong data type for field\n\n**How to fix**:\n1. Check expected type in error message\n2. Convert value to correct type\n\n**Example**:\n```javascript\n// Error\n{\n  \"type\": \"type_mismatch\",\n  \"property\": \"limit\",\n  \"message\": \"Expected number, got string\",\n  \"current\": \"100\"\n}\n\n// Fix\nconfig.limit = 100;  // Number, not string\n```\n\n### 4. invalid_expression\n**What it means**: Expression syntax error\n\n**How to fix**:\n1. Use n8n Expression Syntax skill\n2. Check for missing `{{}}` or typos\n3. Verify node/field references\n\n**Example**:\n```javascript\n// Error\n{\n  \"type\": \"invalid_expression\",\n  \"property\": \"text\",\n  \"message\": \"Invalid expression: $json.name\",\n  \"current\": \"$json.name\"\n}\n\n// Fix\nconfig.text = \"={{$json.name}}\";  // Add {{}}\n```\n\n### 5. invalid_reference\n**What it means**: Referenced node doesn't exist\n\n**How to fix**:\n1. Check node name spelling\n2. Verify node exists in workflow\n3. Update reference to correct name\n\n**Example**:\n```javascript\n// Error\n{\n  \"type\": \"invalid_reference\",\n  \"property\": \"expression\",\n  \"message\": \"Node 'HTTP Requets' does not exist\",\n  \"current\": \"={{$node['HTTP Requets'].json.data}}\"\n}\n\n// Fix - correct typo\nconfig.expression = \"={{$node['HTTP Request'].json.data}}\";\n```\n\n---\n\n## Auto-Sanitization System\n\n### What It Does\n**Automatically fixes common operator structure issues** on ANY workflow update\n\n**Runs when**:\n- `n8n_create_workflow`\n- `n8n_update_partial_workflow`\n- Any workflow save operation\n\n### What It Fixes\n\n#### 1. Binary Operators (Two Values)\n**Operators**: equals, notEquals, contains, notContains, greaterThan, lessThan, startsWith, endsWith\n\n**Fix**: Removes `singleValue` property (binary operators compare two values)\n\n**Before**:\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"equals\",\n  \"singleValue\": true  // âŒ Wrong!\n}\n```\n\n**After** (automatic):\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"equals\"\n  // singleValue removed âœ…\n}\n```\n\n#### 2. Unary Operators (One Value)\n**Operators**: isEmpty, isNotEmpty, true, false\n\n**Fix**: Adds `singleValue: true` (unary operators check single value)\n\n**Before**:\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"isEmpty\"\n  // Missing singleValue âŒ\n}\n```\n\n**After** (automatic):\n```javascript\n{\n  \"type\": \"boolean\",\n  \"operation\": \"isEmpty\",\n  \"singleValue\": true  // âœ… Added\n}\n```\n\n#### 3. IF/Switch Metadata\n**Fix**: Adds complete `conditions.options` metadata for IF v2.2+ and Switch v3.2+\n\n### What It CANNOT Fix\n\n#### 1. Broken Connections\nReferences to non-existent nodes\n\n**Solution**: Use `cleanStaleConnections` operation in `n8n_update_partial_workflow`\n\n#### 2. Branch Count Mismatches\n3 Switch rules but only 2 output connections\n\n**Solution**: Add missing connections or remove extra rules\n\n#### 3. Paradoxical Corrupt States\nAPI returns corrupt data but rejects updates\n\n**Solution**: May require manual database intervention\n\n---\n\n## False Positives\n\n### What Are They?\nValidation warnings that are technically \"wrong\" but acceptable in your use case\n\n### Common False Positives\n\n#### 1. \"Missing error handling\"\n**Warning**: No error handling configured\n\n**When acceptable**:\n- Simple workflows where failures are obvious\n- Testing/development workflows\n- Non-critical notifications\n\n**When to fix**: Production workflows handling important data\n\n#### 2. \"No retry logic\"\n**Warning**: Node doesn't retry on failure\n\n**When acceptable**:\n- APIs with their own retry logic\n- Idempotent operations\n- Manual trigger workflows\n\n**When to fix**: Flaky external services, production automation\n\n#### 3. \"Missing rate limiting\"\n**Warning**: No rate limiting for API calls\n\n**When acceptable**:\n- Internal APIs with no limits\n- Low-volume workflows\n- APIs with server-side rate limiting\n\n**When to fix**: Public APIs, high-volume workflows\n\n#### 4. \"Unbounded query\"\n**Warning**: SELECT without LIMIT\n\n**When acceptable**:\n- Small known datasets\n- Aggregation queries\n- Development/testing\n\n**When to fix**: Production queries on large tables\n\n### Reducing False Positives\n\n**Use `ai-friendly` profile**:\n```javascript\nvalidate_node({\n  nodeType: \"nodes-base.slack\",\n  config: {...},\n  profile: \"ai-friendly\"  // Fewer false positives\n})\n```\n\n---\n\n## Validation Result Structure\n\n### Complete Response\n```javascript\n{\n  \"valid\": false,\n  \"errors\": [\n    {\n      \"type\": \"missing_required\",\n      \"property\": \"channel\",\n      \"message\": \"Channel name is required\",\n      \"fix\": \"Provide a channel name (lowercase, no spaces)\"\n    }\n  ],\n  \"warnings\": [\n    {\n      \"type\": \"best_practice\",\n      \"property\": \"errorHandling\",\n      \"message\": \"Slack API can have rate limits\",\n      \"suggestion\": \"Add onError: 'continueRegularOutput'\"\n    }\n  ],\n  \"suggestions\": [\n    {\n      \"type\": \"optimization\",\n      \"message\": \"Consider using batch operations for multiple messages\"\n    }\n  ],\n  \"summary\": {\n    \"hasErrors\": true,\n    \"errorCount\": 1,\n    \"warningCount\": 1,\n    \"suggestionCount\": 1\n  }\n}\n```\n\n### How to Read It\n\n#### 1. Check `valid` field\n```javascript\nif (result.valid) {\n  // âœ… Configuration is valid\n} else {\n  // âŒ Has errors - must fix before deployment\n}\n```\n\n#### 2. Fix errors first\n```javascript\nresult.errors.forEach(error => {\n  console.log(`Error in ${error.property}: ${error.message}`);\n  console.log(`Fix: ${error.fix}`);\n});\n```\n\n#### 3. Review warnings\n```javascript\nresult.warnings.forEach(warning => {\n  console.log(`Warning: ${warning.message}`);\n  console.log(`Suggestion: ${warning.suggestion}`);\n  // Decide if you need to address this\n});\n```\n\n#### 4. Consider suggestions\n```javascript\n// Optional improvements\n// Not required but may enhance workflow\n```\n\n---\n\n## Workflow Validation\n\n### validate_workflow (Structure)\n**Validates entire workflow**, not just individual nodes\n\n**Checks**:\n1. **Node configurations** - Each node valid\n2. **Connections** - No broken references\n3. **Expressions** - Syntax and references valid\n4. **Flow** - Logical workflow structure\n\n**Example**:\n```javascript\nvalidate_workflow({\n  workflow: {\n    nodes: [...],\n    connections: {...}\n  },\n  options: {\n    validateNodes: true,\n    validateConnections: true,\n    validateExpressions: true,\n    profile: \"runtime\"\n  }\n})\n```\n\n### Common Workflow Errors\n\n#### 1. Broken Connections\n```json\n{\n  \"error\": \"Connection from 'Transform' to 'NonExistent' - target node not found\"\n}\n```\n\n**Fix**: Remove stale connection or create missing node\n\n#### 2. Circular Dependencies\n```json\n{\n  \"error\": \"Circular dependency detected: Node A â†’ Node B â†’ Node A\"\n}\n```\n\n**Fix**: Restructure workflow to remove loop\n\n#### 3. Multiple Start Nodes\n```json\n{\n  \"warning\": \"Multiple trigger nodes found - only one will execute\"\n}\n```\n\n**Fix**: Remove extra triggers or split into separate workflows\n\n#### 4. Disconnected Nodes\n```json\n{\n  \"warning\": \"Node 'Transform' is not connected to workflow flow\"\n}\n```\n\n**Fix**: Connect node or remove if unused\n\n---\n\n## Recovery Strategies\n\n### Strategy 1: Start Fresh\n**When**: Configuration is severely broken\n\n**Steps**:\n1. Note required fields from `get_node`\n2. Create minimal valid configuration\n3. Add features incrementally\n4. Validate after each addition\n\n### Strategy 2: Binary Search\n**When**: Workflow validates but executes incorrectly\n\n**Steps**:\n1. Remove half the nodes\n2. Validate and test\n3. If works: problem is in removed nodes\n4. If fails: problem is in remaining nodes\n5. Repeat until problem isolated\n\n### Strategy 3: Clean Stale Connections\n**When**: \"Node not found\" errors\n\n**Steps**:\n```javascript\nn8n_update_partial_workflow({\n  id: \"workflow-id\",\n  operations: [{\n    type: \"cleanStaleConnections\"\n  }]\n})\n```\n\n### Strategy 4: Use Auto-fix\n**When**: Operator structure errors\n\n**Steps**:\n```javascript\nn8n_autofix_workflow({\n  id: \"workflow-id\",\n  applyFixes: false  // Preview first\n})\n\n// Review fixes, then apply\nn8n_autofix_workflow({\n  id: \"workflow-id\",\n  applyFixes: true\n})\n```\n\n---\n\n## Best Practices\n\n### âœ… Do\n\n- Validate after every significant change\n- Read error messages completely\n- Fix errors iteratively (one at a time)\n- Use `runtime` profile for pre-deployment\n- Check `valid` field before assuming success\n- Trust auto-sanitization for operator issues\n- Use `get_node` when unclear about requirements\n- Document false positives you accept\n\n### âŒ Don't\n\n- Skip validation before activation\n- Try to fix all errors at once\n- Ignore error messages\n- Use `strict` profile during development (too noisy)\n- Assume validation passed (always check result)\n- Manually fix auto-sanitization issues\n- Deploy with unresolved errors\n- Ignore all warnings (some are important!)\n\n---\n\n## Detailed Guides\n\nFor comprehensive error catalogs and false positive examples:\n\n- **[ERROR_CATALOG.md](ERROR_CATALOG.md)** - Complete list of error types with examples\n- **[FALSE_POSITIVES.md](FALSE_POSITIVES.md)** - When warnings are acceptable\n\n---\n\n## Summary\n\n**Key Points**:\n1. **Validation is iterative** (avg 2-3 cycles, 23s + 58s)\n2. **Errors must be fixed**, warnings are optional\n3. **Auto-sanitization** fixes operator structures automatically\n4. **Use runtime profile** for balanced validation\n5. **False positives exist** - learn to recognize them\n6. **Read error messages** - they contain fix guidance\n\n**Validation Process**:\n1. Validate â†’ Read errors â†’ Fix â†’ Validate again\n2. Repeat until valid (usually 2-3 iterations)\n3. Review warnings and decide if acceptable\n4. Deploy with confidence\n\n**Related Skills**:\n- n8n MCP Tools Expert - Use validation tools correctly\n- n8n Expression Syntax - Fix expression errors\n- n8n Node Configuration - Understand required fields\n",
        "skills/n8n-workflow-patterns/README.md": "# n8n Workflow Patterns\n\nProven architectural patterns for building n8n workflows.\n\n---\n\n## Purpose\n\nTeaches architectural patterns for building n8n workflows. Provides structure, best practices, and proven approaches for common use cases.\n\n## Activates On\n\n- build workflow\n- workflow pattern\n- workflow architecture\n- workflow structure\n- webhook processing\n- http api\n- api integration\n- database sync\n- ai agent\n- chatbot\n- scheduled task\n- automation pattern\n\n## File Count\n\n7 files, ~3,700 lines total\n\n## Priority\n\n**HIGH** - Addresses 813 webhook searches (most common use case)\n\n## Dependencies\n\n**n8n-mcp tools**:\n- search_nodes (find nodes for patterns)\n- get_node (understand node operations)\n- search_templates (find example workflows)\n- ai_agents_guide (AI pattern guidance)\n\n**Related skills**:\n- n8n MCP Tools Expert (find and configure nodes)\n- n8n Expression Syntax (write expressions in patterns)\n- n8n Node Configuration (configure pattern nodes)\n- n8n Validation Expert (validate pattern implementations)\n\n## Coverage\n\n### The 5 Core Patterns\n\n1. **Webhook Processing** (Most Common - 813 searches)\n   - Receive HTTP requests â†’ Process â†’ Respond\n   - Critical gotcha: Data under $json.body\n   - Authentication, validation, error handling\n\n2. **HTTP API Integration** (892 templates)\n   - Fetch from REST APIs â†’ Transform â†’ Store/Use\n   - Authentication methods, pagination, rate limiting\n   - Error handling and retries\n\n3. **Database Operations** (456 templates)\n   - Read/Write/Sync database data\n   - Batch processing, transactions, performance\n   - Security: parameterized queries, read-only access\n\n4. **AI Agent Workflow** (234 templates, 270 AI nodes)\n   - AI agents with tool access and memory\n   - 8 AI connection types\n   - ANY node can be an AI tool\n\n5. **Scheduled Tasks** (28% of all workflows)\n   - Recurring automation workflows\n   - Cron schedules, timezone handling\n   - Monitoring and error handling\n\n### Cross-Cutting Concerns\n\n- Data flow patterns (linear, branching, parallel, loops)\n- Error handling strategies\n- Performance optimization\n- Security best practices\n- Testing approaches\n- Monitoring and logging\n\n## Evaluations\n\n5 scenarios (100% coverage expected):\n1. **eval-001**: Webhook workflow structure\n2. **eval-002**: HTTP API integration pattern\n3. **eval-003**: Database sync pattern\n4. **eval-004**: AI agent workflow with tools\n5. **eval-005**: Scheduled report generation\n\n## Key Features\n\nâœ… **5 Proven Patterns**: Webhook, HTTP API, Database, AI Agent, Scheduled tasks\nâœ… **Complete Examples**: Working workflow configurations for each pattern\nâœ… **Best Practices**: Proven approaches from real-world n8n usage\nâœ… **Common Gotchas**: Documented mistakes and their fixes\nâœ… **Integration Guide**: How patterns work with other skills\nâœ… **Template Examples**: Real examples from 2,653+ n8n templates\n\n## Files\n\n- **SKILL.md** (486 lines) - Pattern overview, selection guide, checklist\n- **webhook_processing.md** (554 lines) - Webhook patterns, data structure, auth\n- **http_api_integration.md** (763 lines) - REST APIs, pagination, rate limiting\n- **database_operations.md** (854 lines) - DB operations, batch processing, security\n- **ai_agent_workflow.md** (918 lines) - AI agents, tools, memory, 8 connection types\n- **scheduled_tasks.md** (845 lines) - Cron schedules, timezone, monitoring\n- **README.md** (this file) - Skill metadata\n\n## Success Metrics\n\n**Expected outcomes**:\n- Users select appropriate pattern for their use case\n- Workflows follow proven structural patterns\n- Common gotchas avoided (webhook $json.body, SQL injection, etc.)\n- Proper error handling implemented\n- Security best practices followed\n\n## Pattern Selection Stats\n\nCommon workflow composition:\n\n**Trigger Distribution**:\n- Webhook: 35% (most common)\n- Schedule: 28%\n- Manual: 22%\n- Service triggers: 15%\n\n**Transformation Nodes**:\n- Set: 68%\n- Code: 42%\n- IF: 38%\n- Switch: 18%\n\n**Output Channels**:\n- HTTP Request: 45%\n- Slack: 32%\n- Database: 28%\n- Email: 24%\n\n**Complexity**:\n- Simple (3-5 nodes): 42%\n- Medium (6-10 nodes): 38%\n- Complex (11+ nodes): 20%\n\n## Critical Insights\n\n**Webhook Processing**:\n- 813 searches (most common use case!)\n- #1 gotcha: Data under $json.body (not $json directly)\n- Must choose response mode: onReceived vs lastNode\n\n**API Integration**:\n- Authentication via credentials (never hardcode!)\n- Pagination essential for large datasets\n- Rate limiting prevents API bans\n- continueOnFail: true for error handling\n\n**Database Operations**:\n- Always use parameterized queries (SQL injection prevention)\n- Batch processing for large datasets\n- Read-only access for AI tools\n- Transaction handling for multi-step operations\n\n**AI Agents**:\n- 8 AI connection types (ai_languageModel, ai_tool, ai_memory, etc.)\n- ANY node can be an AI tool (connect to ai_tool port)\n- Memory essential for conversations (Window Buffer recommended)\n- Tool descriptions critical (AI uses them to decide when to call)\n\n**Scheduled Tasks**:\n- Set workflow timezone explicitly (DST handling)\n- Prevent overlapping executions (use locks)\n- Error Trigger workflow for alerts\n- Batch processing for large data\n\n## Workflow Creation Checklist\n\nEvery pattern follows this checklist:\n\n### Planning Phase\n- [ ] Identify the pattern (webhook, API, database, AI, scheduled)\n- [ ] List required nodes (use search_nodes)\n- [ ] Understand data flow (input â†’ transform â†’ output)\n- [ ] Plan error handling strategy\n\n### Implementation Phase\n- [ ] Create workflow with appropriate trigger\n- [ ] Add data source nodes\n- [ ] Configure authentication/credentials\n- [ ] Add transformation nodes (Set, Code, IF)\n- [ ] Add output/action nodes\n- [ ] Configure error handling\n\n### Validation Phase\n- [ ] Validate each node configuration\n- [ ] Validate complete workflow\n- [ ] Test with sample data\n- [ ] Handle edge cases\n\n### Deployment Phase\n- [ ] Review workflow settings\n- [ ] Activate workflow\n- [ ] Monitor first executions\n- [ ] Document workflow\n\n## Real Template Examples\n\n**Weather to Slack** (Template #2947):\n```\nSchedule (daily 8 AM) â†’ HTTP Request (weather) â†’ Set â†’ Slack\n```\n\n**Webhook Processing**: 1,085 templates\n**HTTP API Integration**: 892 templates\n**Database Operations**: 456 templates\n**AI Workflows**: 234 templates\n\nUse `search_templates` to find examples for your use case!\n\n## Integration with Other Skills\n\n**Pattern Selection** (this skill):\n1. Identify use case\n2. Select appropriate pattern\n3. Follow pattern structure\n\n**Node Discovery** (n8n MCP Tools Expert):\n4. Find nodes for pattern (search_nodes)\n5. Understand node operations (get_node)\n\n**Implementation** (n8n Expression Syntax + Node Configuration):\n6. Write expressions ({{$json.body.field}})\n7. Configure nodes properly\n\n**Validation** (n8n Validation Expert):\n8. Validate workflow structure\n9. Fix validation errors\n\n## Last Updated\n\n2025-10-20\n\n---\n\n**Part of**: n8n-skills repository\n**Conceived by**: Romuald CzÅ‚onkowski - [www.aiadvisors.pl/en](https://www.aiadvisors.pl/en)\n",
        "skills/n8n-workflow-patterns/SKILL.md": "---\nname: n8n-workflow-patterns\ndescription: Proven workflow architectural patterns from real n8n workflows. Use when building new workflows, designing workflow structure, choosing workflow patterns, planning workflow architecture, or asking about webhook processing, HTTP API integration, database operations, AI agent workflows, or scheduled tasks.\n---\n\n# n8n Workflow Patterns\n\nProven architectural patterns for building n8n workflows.\n\n---\n\n## The 5 Core Patterns\n\nBased on analysis of real workflow usage:\n\n1. **[Webhook Processing](webhook_processing.md)** (Most Common)\n   - Receive HTTP requests â†’ Process â†’ Output\n   - Pattern: Webhook â†’ Validate â†’ Transform â†’ Respond/Notify\n\n2. **[HTTP API Integration](http_api_integration.md)**\n   - Fetch from REST APIs â†’ Transform â†’ Store/Use\n   - Pattern: Trigger â†’ HTTP Request â†’ Transform â†’ Action â†’ Error Handler\n\n3. **[Database Operations](database_operations.md)**\n   - Read/Write/Sync database data\n   - Pattern: Schedule â†’ Query â†’ Transform â†’ Write â†’ Verify\n\n4. **[AI Agent Workflow](ai_agent_workflow.md)**\n   - AI agents with tools and memory\n   - Pattern: Trigger â†’ AI Agent (Model + Tools + Memory) â†’ Output\n\n5. **[Scheduled Tasks](scheduled_tasks.md)**\n   - Recurring automation workflows\n   - Pattern: Schedule â†’ Fetch â†’ Process â†’ Deliver â†’ Log\n\n---\n\n## Pattern Selection Guide\n\n### When to use each pattern:\n\n**Webhook Processing** - Use when:\n- Receiving data from external systems\n- Building integrations (Slack commands, form submissions, GitHub webhooks)\n- Need instant response to events\n- Example: \"Receive Stripe payment webhook â†’ Update database â†’ Send confirmation\"\n\n**HTTP API Integration** - Use when:\n- Fetching data from external APIs\n- Synchronizing with third-party services\n- Building data pipelines\n- Example: \"Fetch GitHub issues â†’ Transform â†’ Create Jira tickets\"\n\n**Database Operations** - Use when:\n- Syncing between databases\n- Running database queries on schedule\n- ETL workflows\n- Example: \"Read Postgres records â†’ Transform â†’ Write to MySQL\"\n\n**AI Agent Workflow** - Use when:\n- Building conversational AI\n- Need AI with tool access\n- Multi-step reasoning tasks\n- Example: \"Chat with AI that can search docs, query database, send emails\"\n\n**Scheduled Tasks** - Use when:\n- Recurring reports or summaries\n- Periodic data fetching\n- Maintenance tasks\n- Example: \"Daily: Fetch analytics â†’ Generate report â†’ Email team\"\n\n---\n\n## Common Workflow Components\n\nAll patterns share these building blocks:\n\n### 1. Triggers\n- **Webhook** - HTTP endpoint (instant)\n- **Schedule** - Cron-based timing (periodic)\n- **Manual** - Click to execute (testing)\n- **Polling** - Check for changes (intervals)\n\n### 2. Data Sources\n- **HTTP Request** - REST APIs\n- **Database nodes** - Postgres, MySQL, MongoDB\n- **Service nodes** - Slack, Google Sheets, etc.\n- **Code** - Custom JavaScript/Python\n\n### 3. Transformation\n- **Set** - Map/transform fields\n- **Code** - Complex logic\n- **IF/Switch** - Conditional routing\n- **Merge** - Combine data streams\n\n### 4. Outputs\n- **HTTP Request** - Call APIs\n- **Database** - Write data\n- **Communication** - Email, Slack, Discord\n- **Storage** - Files, cloud storage\n\n### 5. Error Handling\n- **Error Trigger** - Catch workflow errors\n- **IF** - Check for error conditions\n- **Stop and Error** - Explicit failure\n- **Continue On Fail** - Per-node setting\n\n---\n\n## Workflow Creation Checklist\n\nWhen building ANY workflow, follow this checklist:\n\n### Planning Phase\n- [ ] Identify the pattern (webhook, API, database, AI, scheduled)\n- [ ] List required nodes (use search_nodes)\n- [ ] Understand data flow (input â†’ transform â†’ output)\n- [ ] Plan error handling strategy\n\n### Implementation Phase\n- [ ] Create workflow with appropriate trigger\n- [ ] Add data source nodes\n- [ ] Configure authentication/credentials\n- [ ] Add transformation nodes (Set, Code, IF)\n- [ ] Add output/action nodes\n- [ ] Configure error handling\n\n### Validation Phase\n- [ ] Validate each node configuration (validate_node)\n- [ ] Validate complete workflow (validate_workflow)\n- [ ] Test with sample data\n- [ ] Handle edge cases (empty data, errors)\n\n### Deployment Phase\n- [ ] Review workflow settings (execution order, timeout, error handling)\n- [ ] Activate workflow using `activateWorkflow` operation\n- [ ] Monitor first executions\n- [ ] Document workflow purpose and data flow\n\n---\n\n## Data Flow Patterns\n\n### Linear Flow\n```\nTrigger â†’ Transform â†’ Action â†’ End\n```\n**Use when**: Simple workflows with single path\n\n### Branching Flow\n```\nTrigger â†’ IF â†’ [True Path]\n             â””â†’ [False Path]\n```\n**Use when**: Different actions based on conditions\n\n### Parallel Processing\n```\nTrigger â†’ [Branch 1] â†’ Merge\n       â””â†’ [Branch 2] â†—\n```\n**Use when**: Independent operations that can run simultaneously\n\n### Loop Pattern\n```\nTrigger â†’ Split in Batches â†’ Process â†’ Loop (until done)\n```\n**Use when**: Processing large datasets in chunks\n\n### Error Handler Pattern\n```\nMain Flow â†’ [Success Path]\n         â””â†’ [Error Trigger â†’ Error Handler]\n```\n**Use when**: Need separate error handling workflow\n\n---\n\n## Common Gotchas\n\n### 1. Webhook Data Structure\n**Problem**: Can't access webhook payload data\n\n**Solution**: Data is nested under `$json.body`\n```javascript\nâŒ {{$json.email}}\nâœ… {{$json.body.email}}\n```\nSee: n8n Expression Syntax skill\n\n### 2. Multiple Input Items\n**Problem**: Node processes all input items, but I only want one\n\n**Solution**: Use \"Execute Once\" mode or process first item only\n```javascript\n{{$json[0].field}}  // First item only\n```\n\n### 3. Authentication Issues\n**Problem**: API calls failing with 401/403\n\n**Solution**:\n- Configure credentials properly\n- Use the \"Credentials\" section, not parameters\n- Test credentials before workflow activation\n\n### 4. Node Execution Order\n**Problem**: Nodes executing in unexpected order\n\n**Solution**: Check workflow settings â†’ Execution Order\n- v0: Top-to-bottom (legacy)\n- v1: Connection-based (recommended)\n\n### 5. Expression Errors\n**Problem**: Expressions showing as literal text\n\n**Solution**: Use {{}} around expressions\n- See n8n Expression Syntax skill for details\n\n---\n\n## Integration with Other Skills\n\nThese skills work together with Workflow Patterns:\n\n**n8n MCP Tools Expert** - Use to:\n- Find nodes for your pattern (search_nodes)\n- Understand node operations (get_node)\n- Create workflows (n8n_create_workflow)\n- Deploy templates (n8n_deploy_template)\n- Use ai_agents_guide for AI pattern guidance\n\n**n8n Expression Syntax** - Use to:\n- Write expressions in transformation nodes\n- Access webhook data correctly ({{$json.body.field}})\n- Reference previous nodes ({{$node[\"Node Name\"].json.field}})\n\n**n8n Node Configuration** - Use to:\n- Configure specific operations for pattern nodes\n- Understand node-specific requirements\n\n**n8n Validation Expert** - Use to:\n- Validate workflow structure\n- Fix validation errors\n- Ensure workflow correctness before deployment\n\n---\n\n## Pattern Statistics\n\nCommon workflow patterns:\n\n**Most Common Triggers**:\n1. Webhook - 35%\n2. Schedule (periodic tasks) - 28%\n3. Manual (testing/admin) - 22%\n4. Service triggers (Slack, email, etc.) - 15%\n\n**Most Common Transformations**:\n1. Set (field mapping) - 68%\n2. Code (custom logic) - 42%\n3. IF (conditional routing) - 38%\n4. Switch (multi-condition) - 18%\n\n**Most Common Outputs**:\n1. HTTP Request (APIs) - 45%\n2. Slack - 32%\n3. Database writes - 28%\n4. Email - 24%\n\n**Average Workflow Complexity**:\n- Simple (3-5 nodes): 42%\n- Medium (6-10 nodes): 38%\n- Complex (11+ nodes): 20%\n\n---\n\n## Quick Start Examples\n\n### Example 1: Simple Webhook â†’ Slack\n```\n1. Webhook (path: \"form-submit\", POST)\n2. Set (map form fields)\n3. Slack (post message to #notifications)\n```\n\n### Example 2: Scheduled Report\n```\n1. Schedule (daily at 9 AM)\n2. HTTP Request (fetch analytics)\n3. Code (aggregate data)\n4. Email (send formatted report)\n5. Error Trigger â†’ Slack (notify on failure)\n```\n\n### Example 3: Database Sync\n```\n1. Schedule (every 15 minutes)\n2. Postgres (query new records)\n3. IF (check if records exist)\n4. MySQL (insert records)\n5. Postgres (update sync timestamp)\n```\n\n### Example 4: AI Assistant\n```\n1. Webhook (receive chat message)\n2. AI Agent\n   â”œâ”€ OpenAI Chat Model (ai_languageModel)\n   â”œâ”€ HTTP Request Tool (ai_tool)\n   â”œâ”€ Database Tool (ai_tool)\n   â””â”€ Window Buffer Memory (ai_memory)\n3. Webhook Response (send AI reply)\n```\n\n### Example 5: API Integration\n```\n1. Manual Trigger (for testing)\n2. HTTP Request (GET /api/users)\n3. Split In Batches (process 100 at a time)\n4. Set (transform user data)\n5. Postgres (upsert users)\n6. Loop (back to step 3 until done)\n```\n\n---\n\n## Detailed Pattern Files\n\nFor comprehensive guidance on each pattern:\n\n- **[webhook_processing.md](webhook_processing.md)** - Webhook patterns, data structure, response handling\n- **[http_api_integration.md](http_api_integration.md)** - REST APIs, authentication, pagination, retries\n- **[database_operations.md](database_operations.md)** - Queries, sync, transactions, batch processing\n- **[ai_agent_workflow.md](ai_agent_workflow.md)** - AI agents, tools, memory, langchain nodes\n- **[scheduled_tasks.md](scheduled_tasks.md)** - Cron schedules, reports, maintenance tasks\n\n---\n\n## Real Template Examples\n\nFrom n8n template library:\n\n**Template #2947**: Weather to Slack\n- Pattern: Scheduled Task\n- Nodes: Schedule â†’ HTTP Request (weather API) â†’ Set â†’ Slack\n- Complexity: Simple (4 nodes)\n\n**Webhook Processing**: Most common pattern\n- Most common: Form submissions, payment webhooks, chat integrations\n\n**HTTP API**: Common pattern\n- Most common: Data fetching, third-party integrations\n\n**Database Operations**: Common pattern\n- Most common: ETL, data sync, backup workflows\n\n**AI Agents**: Growing in usage\n- Most common: Chatbots, content generation, data analysis\n\nUse `search_templates` and `get_template` from n8n-mcp tools to find examples!\n\n---\n\n## Best Practices\n\n### âœ… Do\n\n- Start with the simplest pattern that solves your problem\n- Plan your workflow structure before building\n- Use error handling on all workflows\n- Test with sample data before activation\n- Follow the workflow creation checklist\n- Use descriptive node names\n- Document complex workflows (notes field)\n- Monitor workflow executions after deployment\n\n### âŒ Don't\n\n- Build workflows in one shot (iterate! avg 56s between edits)\n- Skip validation before activation\n- Ignore error scenarios\n- Use complex patterns when simple ones suffice\n- Hardcode credentials in parameters\n- Forget to handle empty data cases\n- Mix multiple patterns without clear boundaries\n- Deploy without testing\n\n---\n\n## Summary\n\n**Key Points**:\n1. **5 core patterns** cover 90%+ of workflow use cases\n2. **Webhook processing** is the most common pattern\n3. Use the **workflow creation checklist** for every workflow\n4. **Plan pattern** â†’ **Select nodes** â†’ **Build** â†’ **Validate** â†’ **Deploy**\n5. Integrate with other skills for complete workflow development\n\n**Next Steps**:\n1. Identify your use case pattern\n2. Read the detailed pattern file\n3. Use n8n MCP Tools Expert to find nodes\n4. Follow the workflow creation checklist\n5. Use n8n Validation Expert to validate\n\n**Related Skills**:\n- n8n MCP Tools Expert - Find and configure nodes\n- n8n Expression Syntax - Write expressions correctly\n- n8n Validation Expert - Validate and fix errors\n- n8n Node Configuration - Configure specific operations\n",
        "skills/n8n-workflow-patterns/ai_agent_workflow.md": "# AI Agent Workflow Pattern\n\n**Use Case**: Build AI agents with tool access, memory, and reasoning capabilities.\n\n---\n\n## Pattern Structure\n\n```\nTrigger â†’ AI Agent (Model + Tools + Memory) â†’ [Process Response] â†’ Output\n```\n\n**Key Characteristic**: AI-powered decision making with tool use\n\n---\n\n## Core AI Connection Types\n\nn8n supports **8 AI connection types** for building agent workflows:\n\n1. **ai_languageModel** - The LLM (OpenAI, Anthropic, etc.)\n2. **ai_tool** - Functions the agent can call\n3. **ai_memory** - Conversation context\n4. **ai_outputParser** - Parse structured outputs\n5. **ai_embedding** - Vector embeddings\n6. **ai_vectorStore** - Vector database\n7. **ai_document** - Document loaders\n8. **ai_textSplitter** - Text chunking\n\n---\n\n## Core Components\n\n### 1. Trigger\n**Options**:\n- **Webhook** - Chat interfaces, API calls (most common)\n- **Manual** - Testing and development\n- **Schedule** - Periodic AI tasks\n\n### 2. AI Agent Node\n**Purpose**: Orchestrate LLM with tools and memory\n\n**Configuration**:\n```javascript\n{\n  agent: \"conversationalAgent\",  // or \"openAIFunctionsAgent\"\n  promptType: \"define\",\n  text: \"You are a helpful assistant that can search docs, query databases, and send emails.\"\n}\n```\n\n**Connections**:\n- **ai_languageModel input** - Connected to LLM node\n- **ai_tool inputs** - Connected to tool nodes\n- **ai_memory input** - Connected to memory node (optional)\n\n### 3. Language Model\n**Available providers**:\n- OpenAI (GPT-4, GPT-3.5)\n- Anthropic (Claude)\n- Google (Gemini)\n- Local models (Ollama, LM Studio)\n\n**Example** (OpenAI Chat Model):\n```javascript\n{\n  model: \"gpt-4\",\n  temperature: 0.7,\n  maxTokens: 1000\n}\n```\n\n### 4. Tools (ANY Node Can Be a Tool!)\n**Critical insight**: Connect ANY n8n node to agent via `ai_tool` port\n\n**Common tool types**:\n- HTTP Request - Call APIs\n- Database nodes - Query data\n- Code - Custom functions\n- Search nodes - Web/document search\n- Pre-built tool nodes (Calculator, Wikipedia, etc.)\n\n### 5. Memory (Optional but Recommended)\n**Purpose**: Maintain conversation context\n\n**Types**:\n- **Buffer Memory** - Store recent messages\n- **Window Buffer Memory** - Store last N messages\n- **Summary Memory** - Summarize conversation\n\n### 6. Output Processing\n**Purpose**: Format AI response for delivery\n\n**Common patterns**:\n- Return directly (chat response)\n- Store in database (conversation history)\n- Send to communication channel (Slack, email)\n\n---\n\n## Common Use Cases\n\n### 1. Conversational Chatbot\n**Flow**: Webhook (chat message) â†’ AI Agent â†’ Webhook Response\n\n**Example** (Customer support bot):\n```\n1. Webhook (path: \"chat\", POST)\n   - Receives: {user_id, message, session_id}\n\n2. Window Buffer Memory (load context by session_id)\n\n3. AI Agent\n   â”œâ”€ OpenAI Chat Model (gpt-4)\n   â”œâ”€ HTTP Request Tool (search knowledge base)\n   â”œâ”€ Database Tool (query customer orders)\n   â””â”€ Window Buffer Memory (conversation context)\n\n4. Code (format response)\n\n5. Webhook Response (send reply)\n```\n\n**AI Agent prompt**:\n```\nYou are a customer support assistant.\nYou can:\n1. Search the knowledge base for answers\n2. Look up customer orders\n3. Provide shipping information\n\nBe helpful and professional.\n```\n\n### 2. Document Q&A\n**Flow**: Upload docs â†’ Embed â†’ Store â†’ Query with AI\n\n**Example** (Internal documentation assistant):\n```\nSetup Phase (run once):\n1. Read Files (load documentation)\n2. Text Splitter (chunk into paragraphs)\n3. Embeddings (OpenAI Embeddings)\n4. Vector Store (Pinecone/Qdrant) (store vectors)\n\nQuery Phase (recurring):\n1. Webhook (receive question)\n2. AI Agent\n   â”œâ”€ OpenAI Chat Model (gpt-4)\n   â”œâ”€ Vector Store Tool (search similar docs)\n   â””â”€ Buffer Memory (context)\n3. Webhook Response (answer with citations)\n```\n\n### 3. Data Analysis Assistant\n**Flow**: Request â†’ AI Agent (with data tools) â†’ Analysis â†’ Visualization\n\n**Example** (SQL analyst agent):\n```\n1. Webhook (data question: \"What were sales last month?\")\n\n2. AI Agent\n   â”œâ”€ OpenAI Chat Model (gpt-4)\n   â”œâ”€ Postgres Tool (execute queries)\n   â””â”€ Code Tool (data analysis)\n\n3. Code (generate visualization data)\n\n4. Webhook Response (answer + chart data)\n```\n\n**Postgres Tool Configuration**:\n```javascript\n{\n  name: \"query_database\",\n  description: \"Execute SQL queries to analyze sales data. Use SELECT queries only.\",\n  // Node executes AI-generated SQL\n}\n```\n\n### 4. Workflow Automation Agent\n**Flow**: Command â†’ AI Agent â†’ Execute actions â†’ Report\n\n**Example** (DevOps assistant):\n```\n1. Slack (slash command: /deploy production)\n\n2. AI Agent\n   â”œâ”€ OpenAI Chat Model (gpt-4)\n   â”œâ”€ HTTP Request Tool (GitHub API)\n   â”œâ”€ HTTP Request Tool (Deploy API)\n   â””â”€ Postgres Tool (deployment logs)\n\n3. Agent actions:\n   - Check if tests passed\n   - Create deployment\n   - Log deployment\n   - Notify team\n\n4. Slack (deployment status)\n```\n\n### 5. Email Processing Agent\n**Flow**: Email received â†’ AI Agent â†’ Categorize â†’ Route â†’ Respond\n\n**Example** (Support ticket router):\n```\n1. Email Trigger (new support email)\n\n2. AI Agent\n   â”œâ”€ OpenAI Chat Model (gpt-4)\n   â”œâ”€ Vector Store Tool (search similar tickets)\n   â””â”€ HTTP Request Tool (create Jira ticket)\n\n3. Agent actions:\n   - Categorize urgency (low/medium/high)\n   - Find similar past tickets\n   - Create ticket in appropriate project\n   - Draft response\n\n4. Email (send auto-response)\n5. Slack (notify assigned team)\n```\n\n---\n\n## Tool Configuration\n\n### Making ANY Node an AI Tool\n\n**Critical concept**: Any n8n node can become an AI tool!\n\n**Requirements**:\n1. Connect node to AI Agent via `ai_tool` port (NOT main port)\n2. Configure tool name and description\n3. Define input schema (optional)\n\n**Example** (HTTP Request as tool):\n```javascript\n{\n  // Tool metadata (for AI)\n  name: \"search_github_issues\",\n  description: \"Search GitHub issues by keyword. Returns issue titles and URLs.\",\n\n  // HTTP Request configuration\n  method: \"GET\",\n  url: \"https://api.github.com/search/issues\",\n  sendQuery: true,\n  queryParameters: {\n    \"q\": \"={{$json.query}} repo:{{$json.repo}}\",\n    \"per_page\": \"5\"\n  }\n}\n```\n\n**How it works**:\n1. AI Agent sees tool: `search_github_issues(query, repo)`\n2. AI decides to use it: `search_github_issues(\"bug\", \"n8n-io/n8n\")`\n3. n8n executes HTTP Request with parameters\n4. Result returned to AI Agent\n5. AI Agent processes result and responds\n\n### Pre-built Tool Nodes\n\n**Available in @n8n/n8n-nodes-langchain**:\n\n- **Calculator Tool** - Math operations\n- **Wikipedia Tool** - Wikipedia search\n- **Serper Tool** - Google search\n- **Wolfram Alpha Tool** - Computational knowledge\n- **Custom Tool** - Define with Code node\n\n**Example** (Calculator Tool):\n```\nAI Agent\n  â”œâ”€ OpenAI Chat Model\n  â””â”€ Calculator Tool (ai_tool connection)\n\nUser: \"What's 15% of 2,847?\"\nAI: *uses calculator tool* â†’ \"426.05\"\n```\n\n### Database as Tool\n\n**Pattern**: Postgres/MySQL node connected as ai_tool\n\n**Configuration**:\n```javascript\n{\n  // Tool metadata\n  name: \"query_customers\",\n  description: \"Query customer database. Use SELECT queries to find customer information by email, name, or ID.\",\n\n  // Postgres config\n  operation: \"executeQuery\",\n  query: \"={{$json.sql}}\",  // AI provides SQL\n  // Security: Use read-only database user!\n}\n```\n\n**Safety**: Create read-only DB user for AI tools!\n\n```sql\nCREATE USER ai_readonly WITH PASSWORD 'secure_password';\nGRANT SELECT ON customers, orders TO ai_readonly;\n-- NO INSERT, UPDATE, DELETE access\n```\n\n### Code Node as Tool\n\n**Pattern**: Custom Python/JavaScript function\n\n**Example** (Data processor):\n```javascript\n// Tool metadata\n{\n  name: \"process_csv\",\n  description: \"Process CSV data and return statistics. Input: csv_string\"\n}\n\n// Code node\nconst csv = $input.first().json.csv_string;\nconst lines = csv.split('\\n');\nconst data = lines.slice(1).map(line => line.split(','));\n\nreturn [{\n  json: {\n    row_count: data.length,\n    columns: lines[0].split(','),\n    summary: {\n      // Calculate statistics\n    }\n  }\n}];\n```\n\n---\n\n## Memory Configuration\n\n### Buffer Memory\n**Stores all messages** (until cleared)\n\n```javascript\n{\n  memoryType: \"bufferMemory\",\n  sessionKey: \"={{$json.body.user_id}}\"  // Per-user memory\n}\n```\n\n### Window Buffer Memory\n**Stores last N messages** (recommended)\n\n```javascript\n{\n  memoryType: \"windowBufferMemory\",\n  sessionKey: \"={{$json.body.session_id}}\",\n  contextWindowLength: 10  // Last 10 messages\n}\n```\n\n### Summary Memory\n**Summarizes old messages** (for long conversations)\n\n```javascript\n{\n  memoryType: \"summaryMemory\",\n  sessionKey: \"={{$json.body.session_id}}\",\n  maxTokenLimit: 2000\n}\n```\n\n**How it works**:\n1. Conversation grows beyond limit\n2. AI summarizes old messages\n3. Summary stored, old messages discarded\n4. Saves tokens while maintaining context\n\n---\n\n## Agent Types\n\n### 1. Conversational Agent\n**Best for**: General chat, customer support\n\n**Features**:\n- Natural conversation flow\n- Memory integration\n- Tool use with reasoning\n\n**When to use**: Most common use case\n\n### 2. OpenAI Functions Agent\n**Best for**: Tool-heavy workflows, structured outputs\n\n**Features**:\n- Optimized for function calling\n- Better tool selection\n- Structured responses\n\n**When to use**: Multiple tools, need reliable tool calling\n\n### 3. ReAct Agent\n**Best for**: Step-by-step reasoning\n\n**Features**:\n- Think â†’ Act â†’ Observe loop\n- Visible reasoning process\n- Good for debugging\n\n**When to use**: Complex multi-step tasks\n\n---\n\n## Prompt Engineering for Agents\n\n### System Prompt Structure\n```\nYou are a [ROLE].\n\nYou can:\n- [CAPABILITY 1]\n- [CAPABILITY 2]\n- [CAPABILITY 3]\n\nGuidelines:\n- [GUIDELINE 1]\n- [GUIDELINE 2]\n\nFormat:\n- [OUTPUT FORMAT]\n```\n\n### Example (Customer Support)\n```\nYou are a customer support assistant for Acme Corp.\n\nYou can:\n- Search the knowledge base for answers\n- Look up customer orders and shipping status\n- Create support tickets for complex issues\n\nGuidelines:\n- Be friendly and professional\n- If you don't know something, say so and offer to create a ticket\n- Always verify customer identity before sharing order details\n\nFormat:\n- Keep responses concise\n- Use bullet points for multiple items\n- Include relevant links when available\n```\n\n### Example (Data Analyst)\n```\nYou are a data analyst assistant with access to the company database.\n\nYou can:\n- Query sales, customer, and product data\n- Perform data analysis and calculations\n- Generate summary statistics\n\nGuidelines:\n- Write efficient SQL queries (always use LIMIT)\n- Explain your analysis methodology\n- Highlight important trends or anomalies\n- Use read-only queries (SELECT only)\n\nFormat:\n- Provide numerical answers with context\n- Include query used (for transparency)\n- Suggest follow-up analyses when relevant\n```\n\n---\n\n## Error Handling\n\n### Pattern 1: Tool Execution Errors\n```\nAI Agent (continueOnFail on tool nodes)\n  â†’ IF (tool error occurred)\n    â””â”€ Code (log error)\n    â””â”€ Webhook Response (user-friendly error)\n```\n\n### Pattern 2: LLM API Errors\n```\nMain Workflow:\n  AI Agent â†’ Process Response\n\nError Workflow:\n  Error Trigger\n    â†’ IF (rate limit error)\n      â””â”€ Wait â†’ Retry\n    â†’ ELSE\n      â””â”€ Notify Admin\n```\n\n### Pattern 3: Invalid Tool Outputs\n```javascript\n// Code node - validate tool output\nconst result = $input.first().json;\n\nif (!result || !result.data) {\n  throw new Error('Tool returned invalid data');\n}\n\nreturn [{ json: result }];\n```\n\n---\n\n## Performance Optimization\n\n### 1. Choose Right Model\n```\nFast & cheap: GPT-3.5-turbo, Claude 3 Haiku\nBalanced: GPT-4, Claude 3 Sonnet\nPowerful: GPT-4-turbo, Claude 3 Opus\n```\n\n### 2. Limit Context Window\n```javascript\n{\n  memoryType: \"windowBufferMemory\",\n  contextWindowLength: 5  // Only last 5 messages\n}\n```\n\n### 3. Optimize Tool Descriptions\n```javascript\n// âŒ Vague\ndescription: \"Search for things\"\n\n// âœ… Clear and concise\ndescription: \"Search GitHub issues by keyword and repository. Returns top 5 matching issues with titles and URLs.\"\n```\n\n### 4. Cache Embeddings\nFor document Q&A, embed documents once:\n\n```\nSetup (run once):\n  Documents â†’ Embed â†’ Store in Vector DB\n\nQuery (fast):\n  Question â†’ Search Vector DB â†’ AI Agent\n```\n\n### 5. Async Tools for Slow Operations\n```\nAI Agent â†’ [Queue slow tool request]\n       â†’ Return immediate response\n       â†’ [Background: Execute tool + notify when done]\n```\n\n---\n\n## Security Considerations\n\n### 1. Read-Only Database Tools\n```sql\n-- Create limited user for AI tools\nCREATE USER ai_agent_ro WITH PASSWORD 'secure';\nGRANT SELECT ON public.* TO ai_agent_ro;\n-- NO write access!\n```\n\n### 2. Validate Tool Inputs\n```javascript\n// Code node - validate before execution\nconst query = $json.query;\n\nif (query.toLowerCase().includes('drop ') ||\n    query.toLowerCase().includes('delete ') ||\n    query.toLowerCase().includes('update ')) {\n  throw new Error('Invalid query - write operations not allowed');\n}\n```\n\n### 3. Rate Limiting\n```\nWebhook â†’ IF (check user rate limit)\n        â”œâ”€ [Within limit] â†’ AI Agent\n        â””â”€ [Exceeded] â†’ Error (429 Too Many Requests)\n```\n\n### 4. Sanitize User Input\n```javascript\n// Code node\nconst userInput = $json.body.message\n  .trim()\n  .substring(0, 1000);  // Max 1000 chars\n\nreturn [{ json: { sanitized: userInput } }];\n```\n\n### 5. Monitor Tool Usage\n```\nAI Agent â†’ Log Tool Calls\n        â†’ IF (suspicious pattern)\n          â””â”€ Alert Admin + Pause Agent\n```\n\n---\n\n## Testing AI Agents\n\n### 1. Start with Manual Trigger\nReplace webhook with manual trigger:\n```\nManual Trigger\n  â†’ Set (mock user input)\n  â†’ AI Agent\n  â†’ Code (log output)\n```\n\n### 2. Test Tools Independently\nBefore connecting to agent:\n```\nManual Trigger â†’ Tool Node â†’ Verify output format\n```\n\n### 3. Test with Standard Questions\nCreate test suite:\n```\n1. \"Hello\" - Test basic response\n2. \"Search for bug reports\" - Test tool calling\n3. \"What did I ask before?\" - Test memory\n4. Invalid input - Test error handling\n```\n\n### 4. Monitor Token Usage\n```javascript\n// Code node - log token usage\nconsole.log('Input tokens:', $node['AI Agent'].json.usage.input_tokens);\nconsole.log('Output tokens:', $node['AI Agent'].json.usage.output_tokens);\n```\n\n### 5. Test Edge Cases\n- Empty input\n- Very long input\n- Tool returns no results\n- Tool returns error\n- Multiple tool calls in sequence\n\n---\n\n## Common Gotchas\n\n### 1. âŒ Wrong: Connecting tools to main port\n```\nHTTP Request â†’ AI Agent  // Won't work as tool!\n```\n\n### âœ… Correct: Use ai_tool connection type\n```\nHTTP Request --[ai_tool]--> AI Agent\n```\n\n### 2. âŒ Wrong: Vague tool descriptions\n```\ndescription: \"Get data\"  // AI won't know when to use this\n```\n\n### âœ… Correct: Specific descriptions\n```\ndescription: \"Query customer orders by email address. Returns order ID, status, and shipping info.\"\n```\n\n### 3. âŒ Wrong: No memory for conversations\n```\nEvery message is standalone - no context!\n```\n\n### âœ… Correct: Add memory\n```\nWindow Buffer Memory --[ai_memory]--> AI Agent\n```\n\n### 4. âŒ Wrong: Giving AI write access\n```\nPostgres (full access) as tool  // AI could DELETE data!\n```\n\n### âœ… Correct: Read-only access\n```\nPostgres (read-only user) as tool  // Safe\n```\n\n### 5. âŒ Wrong: Unbounded tool responses\n```\nTool returns 10MB of data â†’ exceeds token limit\n```\n\n### âœ… Correct: Limit tool output\n```javascript\n{\n  query: \"SELECT * FROM table LIMIT 10\"  // Only 10 rows\n}\n```\n\n---\n\n## Real Template Examples\n\nFrom n8n template library (234 AI templates):\n\n**Simple Chatbot**:\n```\nWebhook â†’ AI Agent (GPT-4 + Memory) â†’ Webhook Response\n```\n\n**Document Q&A**:\n```\nSetup: Files â†’ Embed â†’ Vector Store\nQuery: Webhook â†’ AI Agent (GPT-4 + Vector Store Tool) â†’ Response\n```\n\n**SQL Analyst**:\n```\nWebhook â†’ AI Agent (GPT-4 + Postgres Tool) â†’ Format â†’ Response\n```\n\nUse `search_templates({query: \"ai agent\"})` to find more!\n\n---\n\n## Checklist for AI Agent Workflows\n\n### Planning\n- [ ] Define agent purpose and capabilities\n- [ ] List required tools (APIs, databases, etc.)\n- [ ] Design conversation flow\n- [ ] Plan memory strategy (per-user, per-session)\n- [ ] Consider token costs\n\n### Implementation\n- [ ] Choose appropriate LLM model\n- [ ] Write clear system prompt\n- [ ] Connect tools via ai_tool ports (NOT main)\n- [ ] Add tool descriptions\n- [ ] Configure memory (Window Buffer recommended)\n- [ ] Test each tool independently\n\n### Security\n- [ ] Use read-only database access for tools\n- [ ] Validate tool inputs\n- [ ] Sanitize user inputs\n- [ ] Add rate limiting\n- [ ] Monitor for abuse\n\n### Testing\n- [ ] Test with diverse inputs\n- [ ] Verify tool calling works\n- [ ] Check memory persistence\n- [ ] Test error scenarios\n- [ ] Monitor token usage and costs\n\n### Deployment\n- [ ] Add error handling\n- [ ] Set up logging\n- [ ] Monitor performance\n- [ ] Set cost alerts\n- [ ] Document agent capabilities\n\n---\n\n## Summary\n\n**Key Points**:\n1. **8 AI connection types** - Use ai_tool for tools, ai_memory for context\n2. **ANY node can be a tool** - Connect to ai_tool port\n3. **Memory is essential** for conversations (Window Buffer recommended)\n4. **Tool descriptions matter** - AI uses them to decide when to call tools\n5. **Security first** - Read-only database access, validate inputs\n\n**Pattern**: Trigger â†’ AI Agent (Model + Tools + Memory) â†’ Output\n\n**Related**:\n- [webhook_processing.md](webhook_processing.md) - Receiving chat messages\n- [http_api_integration.md](http_api_integration.md) - Tools that call APIs\n- [database_operations.md](database_operations.md) - Database tools for agents\n",
        "skills/n8n-workflow-patterns/database_operations.md": "# Database Operations Pattern\n\n**Use Case**: Read, write, sync, and manage database data in workflows.\n\n---\n\n## Pattern Structure\n\n```\nTrigger â†’ [Query/Read] â†’ [Transform] â†’ [Write/Update] â†’ [Verify/Log]\n```\n\n**Key Characteristic**: Data persistence and synchronization\n\n---\n\n## Core Components\n\n### 1. Trigger\n**Options**:\n- **Schedule** - Periodic sync/maintenance (most common)\n- **Webhook** - Event-driven writes\n- **Manual** - One-time operations\n\n### 2. Database Read Nodes\n**Supported databases**:\n- Postgres\n- MySQL\n- MongoDB\n- Microsoft SQL\n- SQLite\n- Redis\n- And more via community nodes\n\n### 3. Transform\n**Purpose**: Map between different database schemas or formats\n\n**Typical nodes**:\n- **Set** - Field mapping\n- **Code** - Complex transformations\n- **Merge** - Combine data from multiple sources\n\n### 4. Database Write Nodes\n**Operations**:\n- INSERT - Create new records\n- UPDATE - Modify existing records\n- UPSERT - Insert or update\n- DELETE - Remove records\n\n### 5. Verification\n**Purpose**: Confirm operations succeeded\n\n**Methods**:\n- Query to verify records\n- Count rows affected\n- Log results\n\n---\n\n## Common Use Cases\n\n### 1. Data Synchronization\n**Flow**: Schedule â†’ Read Source DB â†’ Transform â†’ Write Target DB â†’ Log\n\n**Example** (Postgres to MySQL sync):\n```\n1. Schedule (every 15 minutes)\n2. Postgres (SELECT * FROM users WHERE updated_at > {{$json.last_sync}})\n3. IF (check if records exist)\n4. Set (map Postgres schema to MySQL schema)\n5. MySQL (INSERT or UPDATE users)\n6. Postgres (UPDATE sync_log SET last_sync = NOW())\n7. Slack (notify: \"Synced X users\")\n```\n\n**Incremental sync query**:\n```sql\nSELECT *\nFROM users\nWHERE updated_at > $1\nORDER BY updated_at ASC\nLIMIT 1000\n```\n\n**Parameters**:\n```javascript\n{\n  \"parameters\": [\n    \"={{$node['Get Last Sync'].json.last_sync}}\"\n  ]\n}\n```\n\n### 2. ETL (Extract, Transform, Load)\n**Flow**: Extract from multiple sources â†’ Transform â†’ Load into warehouse\n\n**Example** (Consolidate data):\n```\n1. Schedule (daily at 2 AM)\n2. [Parallel branches]\n   â”œâ”€ Postgres (SELECT orders)\n   â”œâ”€ MySQL (SELECT customers)\n   â””â”€ MongoDB (SELECT products)\n3. Merge (combine all data)\n4. Code (transform to warehouse schema)\n5. Postgres (warehouse - INSERT into fact_sales)\n6. Email (send summary report)\n```\n\n### 3. Data Validation & Cleanup\n**Flow**: Schedule â†’ Query â†’ Validate â†’ Update/Delete invalid records\n\n**Example** (Clean orphaned records):\n```\n1. Schedule (weekly)\n2. Postgres (SELECT users WHERE email IS NULL OR email = '')\n3. IF (invalid records exist)\n4. Postgres (UPDATE users SET status='inactive' WHERE email IS NULL)\n5. Postgres (DELETE FROM users WHERE created_at < NOW() - INTERVAL '1 year' AND status='inactive')\n6. Slack (alert: \"Cleaned X invalid records\")\n```\n\n### 4. Backup & Archive\n**Flow**: Schedule â†’ Query â†’ Export â†’ Store\n\n**Example** (Archive old records):\n```\n1. Schedule (monthly)\n2. Postgres (SELECT * FROM orders WHERE created_at < NOW() - INTERVAL '2 years')\n3. Code (convert to JSON)\n4. Write File (save to archive.json)\n5. Google Drive (upload archive)\n6. Postgres (DELETE FROM orders WHERE created_at < NOW() - INTERVAL '2 years')\n```\n\n### 5. Real-time Data Updates\n**Flow**: Webhook â†’ Parse â†’ Update Database\n\n**Example** (Update user status):\n```\n1. Webhook (receive status update)\n2. Postgres (UPDATE users SET status = {{$json.body.status}} WHERE id = {{$json.body.user_id}})\n3. IF (rows affected > 0)\n4. Redis (SET user:{{$json.body.user_id}}:status {{$json.body.status}})\n5. Webhook Response ({\"success\": true})\n```\n\n---\n\n## Database Node Configuration\n\n### Postgres\n\n#### SELECT Query\n```javascript\n{\n  operation: \"executeQuery\",\n  query: \"SELECT id, name, email FROM users WHERE created_at > $1 LIMIT $2\",\n  parameters: [\n    \"={{$json.since_date}}\",\n    \"100\"\n  ]\n}\n```\n\n#### INSERT\n```javascript\n{\n  operation: \"insert\",\n  table: \"users\",\n  columns: \"id, name, email, created_at\",\n  values: [\n    {\n      id: \"={{$json.id}}\",\n      name: \"={{$json.name}}\",\n      email: \"={{$json.email}}\",\n      created_at: \"={{$now}}\"\n    }\n  ]\n}\n```\n\n#### UPDATE\n```javascript\n{\n  operation: \"update\",\n  table: \"users\",\n  updateKey: \"id\",\n  columns: \"name, email, updated_at\",\n  values: {\n    id: \"={{$json.id}}\",\n    name: \"={{$json.name}}\",\n    email: \"={{$json.email}}\",\n    updated_at: \"={{$now}}\"\n  }\n}\n```\n\n#### UPSERT (INSERT ... ON CONFLICT)\n```javascript\n{\n  operation: \"executeQuery\",\n  query: `\n    INSERT INTO users (id, name, email)\n    VALUES ($1, $2, $3)\n    ON CONFLICT (id)\n    DO UPDATE SET name = $2, email = $3, updated_at = NOW()\n  `,\n  parameters: [\n    \"={{$json.id}}\",\n    \"={{$json.name}}\",\n    \"={{$json.email}}\"\n  ]\n}\n```\n\n### MySQL\n\n#### SELECT with JOIN\n```javascript\n{\n  operation: \"executeQuery\",\n  query: `\n    SELECT u.id, u.name, o.order_id, o.total\n    FROM users u\n    LEFT JOIN orders o ON u.id = o.user_id\n    WHERE u.created_at > ?\n  `,\n  parameters: [\n    \"={{$json.since_date}}\"\n  ]\n}\n```\n\n#### Bulk INSERT\n```javascript\n{\n  operation: \"insert\",\n  table: \"orders\",\n  columns: \"user_id, total, status\",\n  values: $json.orders  // Array of objects\n}\n```\n\n### MongoDB\n\n#### Find Documents\n```javascript\n{\n  operation: \"find\",\n  collection: \"users\",\n  query: JSON.stringify({\n    created_at: { $gt: new Date($json.since_date) },\n    status: \"active\"\n  }),\n  limit: 100\n}\n```\n\n#### Insert Document\n```javascript\n{\n  operation: \"insert\",\n  collection: \"users\",\n  document: JSON.stringify({\n    name: $json.name,\n    email: $json.email,\n    created_at: new Date()\n  })\n}\n```\n\n#### Update Document\n```javascript\n{\n  operation: \"update\",\n  collection: \"users\",\n  query: JSON.stringify({ _id: $json.user_id }),\n  update: JSON.stringify({\n    $set: {\n      status: $json.status,\n      updated_at: new Date()\n    }\n  })\n}\n```\n\n---\n\n## Batch Processing\n\n### Pattern 1: Split In Batches\n**Use when**: Processing large datasets to avoid memory issues\n\n```\nPostgres (SELECT 10000 records)\n  â†’ Split In Batches (100 items per batch)\n  â†’ Transform\n  â†’ MySQL (write batch)\n  â†’ Loop (until all processed)\n```\n\n### Pattern 2: Paginated Queries\n**Use when**: Database has millions of records\n\n```\nSet (initialize: offset=0, limit=1000)\n  â†’ Loop Start\n  â†’ Postgres (SELECT * FROM large_table LIMIT {{$json.limit}} OFFSET {{$json.offset}})\n  â†’ IF (records returned)\n    â”œâ”€ Process records\n    â”œâ”€ Set (increment offset by 1000)\n    â””â”€ Loop back\n  â””â”€ [No records] â†’ End\n```\n\n**Query**:\n```sql\nSELECT * FROM large_table\nORDER BY id\nLIMIT $1 OFFSET $2\n```\n\n### Pattern 3: Cursor-Based Pagination\n**Better performance for large datasets**:\n\n```\nSet (initialize: last_id=0)\n  â†’ Loop Start\n  â†’ Postgres (SELECT * FROM table WHERE id > {{$json.last_id}} ORDER BY id LIMIT 1000)\n  â†’ IF (records returned)\n    â”œâ”€ Process records\n    â”œâ”€ Code (get max id from batch)\n    â””â”€ Loop back\n  â””â”€ [No records] â†’ End\n```\n\n**Query**:\n```sql\nSELECT * FROM table\nWHERE id > $1\nORDER BY id ASC\nLIMIT 1000\n```\n\n---\n\n## Transaction Handling\n\n### Pattern 1: BEGIN/COMMIT/ROLLBACK\n**For databases that support transactions**:\n\n```javascript\n// Node 1: Begin Transaction\n{\n  operation: \"executeQuery\",\n  query: \"BEGIN\"\n}\n\n// Node 2-N: Your operations\n{\n  operation: \"executeQuery\",\n  query: \"INSERT INTO ...\",\n  continueOnFail: true\n}\n\n// Node N+1: Commit or Rollback\n{\n  operation: \"executeQuery\",\n  query: \"={{$node['Operation'].json.error ? 'ROLLBACK' : 'COMMIT'}}\"\n}\n```\n\n### Pattern 2: Atomic Operations\n**Use database features for atomicity**:\n\n```sql\n-- Upsert example (atomic)\nINSERT INTO inventory (product_id, quantity)\nVALUES ($1, $2)\nON CONFLICT (product_id)\nDO UPDATE SET quantity = inventory.quantity + $2\n```\n\n### Pattern 3: Error Rollback\n**Manual rollback on error**:\n\n```\nTry Operations:\n  Postgres (INSERT orders)\n  MySQL (INSERT order_items)\n\nError Trigger:\n  Postgres (DELETE FROM orders WHERE id = {{$json.order_id}})\n  MySQL (DELETE FROM order_items WHERE order_id = {{$json.order_id}})\n```\n\n---\n\n## Data Transformation\n\n### Schema Mapping\n```javascript\n// Code node - map schemas\nconst sourceData = $input.all();\n\nreturn sourceData.map(item => ({\n  json: {\n    // Source â†’ Target mapping\n    user_id: item.json.id,\n    full_name: `${item.json.first_name} ${item.json.last_name}`,\n    email_address: item.json.email,\n    registration_date: new Date(item.json.created_at).toISOString(),\n    // Computed fields\n    is_premium: item.json.plan_type === 'pro',\n    // Default values\n    status: item.json.status || 'active'\n  }\n}));\n```\n\n### Data Type Conversions\n```javascript\n// Code node - convert data types\nreturn $input.all().map(item => ({\n  json: {\n    // String to number\n    user_id: parseInt(item.json.user_id),\n    // String to date\n    created_at: new Date(item.json.created_at),\n    // Number to boolean\n    is_active: item.json.active === 1,\n    // JSON string to object\n    metadata: JSON.parse(item.json.metadata || '{}'),\n    // Null handling\n    email: item.json.email || null\n  }\n}));\n```\n\n### Aggregation\n```javascript\n// Code node - aggregate data\nconst items = $input.all();\n\nconst summary = items.reduce((acc, item) => {\n  const date = item.json.created_at.split('T')[0];\n  if (!acc[date]) {\n    acc[date] = { count: 0, total: 0 };\n  }\n  acc[date].count++;\n  acc[date].total += item.json.amount;\n  return acc;\n}, {});\n\nreturn Object.entries(summary).map(([date, data]) => ({\n  json: {\n    date,\n    count: data.count,\n    total: data.total,\n    average: data.total / data.count\n  }\n}));\n```\n\n---\n\n## Performance Optimization\n\n### 1. Use Indexes\nEnsure database has proper indexes:\n\n```sql\n-- Add index for sync queries\nCREATE INDEX idx_users_updated_at ON users(updated_at);\n\n-- Add index for lookups\nCREATE INDEX idx_orders_user_id ON orders(user_id);\n```\n\n### 2. Limit Result Sets\nAlways use LIMIT:\n\n```sql\n-- âœ… Good\nSELECT * FROM large_table\nWHERE created_at > $1\nLIMIT 1000\n\n-- âŒ Bad (unbounded)\nSELECT * FROM large_table\nWHERE created_at > $1\n```\n\n### 3. Use Prepared Statements\nParameterized queries are faster:\n\n```javascript\n// âœ… Good - prepared statement\n{\n  query: \"SELECT * FROM users WHERE id = $1\",\n  parameters: [\"={{$json.id}}\"]\n}\n\n// âŒ Bad - string concatenation\n{\n  query: \"SELECT * FROM users WHERE id = '={{$json.id}}'\"\n}\n```\n\n### 4. Batch Writes\nWrite multiple records at once:\n\n```javascript\n// âœ… Good - batch insert\n{\n  operation: \"insert\",\n  table: \"orders\",\n  values: $json.items  // Array of 100 items\n}\n\n// âŒ Bad - individual inserts in loop\n// 100 separate INSERT statements\n```\n\n### 5. Connection Pooling\nConfigure in credentials:\n\n```javascript\n{\n  host: \"db.example.com\",\n  database: \"mydb\",\n  user: \"user\",\n  password: \"pass\",\n  // Connection pool settings\n  min: 2,\n  max: 10,\n  idleTimeoutMillis: 30000\n}\n```\n\n---\n\n## Error Handling\n\n### Pattern 1: Check Rows Affected\n```\nDatabase Operation (UPDATE users...)\n  â†’ IF ({{$json.rowsAffected === 0}})\n    â””â”€ Alert: \"No rows updated - record not found\"\n```\n\n### Pattern 2: Constraint Violations\n```javascript\n// Database operation with continueOnFail: true\n{\n  operation: \"insert\",\n  continueOnFail: true\n}\n\n// Next node: Check for errors\nIF ({{$json.error !== undefined}})\n  â†’ IF ({{$json.error.includes('duplicate key')}})\n    â””â”€ Log: \"Record already exists - skipping\"\n  â†’ ELSE\n    â””â”€ Alert: \"Database error: {{$json.error}}\"\n```\n\n### Pattern 3: Rollback on Error\n```\nTry Operations:\n  â†’ Database Write 1\n  â†’ Database Write 2\n  â†’ Database Write 3\n\nError Trigger:\n  â†’ Rollback Operations\n  â†’ Alert Admin\n```\n\n---\n\n## Security Best Practices\n\n### 1. Use Parameterized Queries (Prevent SQL Injection)\n```javascript\n// âœ… SAFE - parameterized\n{\n  query: \"SELECT * FROM users WHERE email = $1\",\n  parameters: [\"={{$json.email}}\"]\n}\n\n// âŒ DANGEROUS - SQL injection risk\n{\n  query: \"SELECT * FROM users WHERE email = '={{$json.email}}'\"\n}\n```\n\n### 2. Least Privilege Access\n**Create dedicated workflow user**:\n\n```sql\n-- âœ… Good - limited permissions\nCREATE USER n8n_workflow WITH PASSWORD 'secure_password';\nGRANT SELECT, INSERT, UPDATE ON orders TO n8n_workflow;\nGRANT SELECT ON users TO n8n_workflow;\n\n-- âŒ Bad - too much access\nGRANT ALL PRIVILEGES TO n8n_workflow;\n```\n\n### 3. Validate Input Data\n```javascript\n// Code node - validate before write\nconst email = $json.email;\nconst name = $json.name;\n\n// Validation\nif (!email || !email.includes('@')) {\n  throw new Error('Invalid email address');\n}\n\nif (!name || name.length < 2) {\n  throw new Error('Invalid name');\n}\n\n// Sanitization\nreturn [{\n  json: {\n    email: email.toLowerCase().trim(),\n    name: name.trim()\n  }\n}];\n```\n\n### 4. Encrypt Sensitive Data\n```javascript\n// Code node - encrypt before storage\nconst crypto = require('crypto');\n\nconst algorithm = 'aes-256-cbc';\nconst key = Buffer.from($credentials.encryptionKey, 'hex');\nconst iv = crypto.randomBytes(16);\n\nconst cipher = crypto.createCipheriv(algorithm, key, iv);\nlet encrypted = cipher.update($json.sensitive_data, 'utf8', 'hex');\nencrypted += cipher.final('hex');\n\nreturn [{\n  json: {\n    encrypted_data: encrypted,\n    iv: iv.toString('hex')\n  }\n}];\n```\n\n---\n\n## Common Gotchas\n\n### 1. âŒ Wrong: Unbounded queries\n```sql\nSELECT * FROM large_table  -- Could return millions\n```\n\n### âœ… Correct: Use LIMIT\n```sql\nSELECT * FROM large_table\nORDER BY created_at DESC\nLIMIT 1000\n```\n\n### 2. âŒ Wrong: String concatenation in queries\n```javascript\nquery: \"SELECT * FROM users WHERE id = '{{$json.id}}'\"\n```\n\n### âœ… Correct: Parameterized queries\n```javascript\nquery: \"SELECT * FROM users WHERE id = $1\",\nparameters: [\"={{$json.id}}\"]\n```\n\n### 3. âŒ Wrong: No transaction for multi-step operations\n```\nINSERT into orders\nINSERT into order_items  // Fails â†’ orphaned order record\n```\n\n### âœ… Correct: Use transaction\n```\nBEGIN\nINSERT into orders\nINSERT into order_items\nCOMMIT (or ROLLBACK on error)\n```\n\n### 4. âŒ Wrong: Processing all items at once\n```\nSELECT 1000000 records â†’ Process all â†’ OOM error\n```\n\n### âœ… Correct: Batch processing\n```\nSELECT records â†’ Split In Batches (1000) â†’ Process â†’ Loop\n```\n\n---\n\n## Real Template Examples\n\nFrom n8n template library (456 database templates):\n\n**Data Sync**:\n```\nSchedule â†’ Postgres (SELECT new records) â†’ Transform â†’ MySQL (INSERT)\n```\n\n**ETL Pipeline**:\n```\nSchedule â†’ [Multiple DB reads] â†’ Merge â†’ Transform â†’ Warehouse (INSERT)\n```\n\n**Backup**:\n```\nSchedule â†’ Postgres (SELECT all) â†’ JSON â†’ Google Drive (upload)\n```\n\nUse `search_templates({query: \"database\"})` to find more!\n\n---\n\n## Checklist for Database Workflows\n\n### Planning\n- [ ] Identify source and target databases\n- [ ] Understand schema differences\n- [ ] Plan transformation logic\n- [ ] Consider batch size for large datasets\n- [ ] Design error handling strategy\n\n### Implementation\n- [ ] Use parameterized queries (never concatenate)\n- [ ] Add LIMIT to all SELECT queries\n- [ ] Use appropriate operation (INSERT/UPDATE/UPSERT)\n- [ ] Configure credentials properly\n- [ ] Test with small dataset first\n\n### Performance\n- [ ] Add database indexes for queries\n- [ ] Use batch operations\n- [ ] Implement pagination for large datasets\n- [ ] Configure connection pooling\n- [ ] Monitor query execution times\n\n### Security\n- [ ] Use parameterized queries (SQL injection prevention)\n- [ ] Least privilege database user\n- [ ] Validate and sanitize input\n- [ ] Encrypt sensitive data\n- [ ] Never log sensitive data\n\n### Reliability\n- [ ] Add transaction handling if needed\n- [ ] Check rows affected\n- [ ] Handle constraint violations\n- [ ] Implement retry logic\n- [ ] Add Error Trigger workflow\n\n---\n\n## Summary\n\n**Key Points**:\n1. **Always use parameterized queries** (prevent SQL injection)\n2. **Batch processing** for large datasets\n3. **Transaction handling** for multi-step operations\n4. **Limit result sets** to avoid memory issues\n5. **Validate input data** before writes\n\n**Pattern**: Trigger â†’ Query â†’ Transform â†’ Write â†’ Verify\n\n**Related**:\n- [http_api_integration.md](http_api_integration.md) - Fetching data to store in DB\n- [scheduled_tasks.md](scheduled_tasks.md) - Periodic database maintenance\n",
        "skills/n8n-workflow-patterns/http_api_integration.md": "# HTTP API Integration Pattern\n\n**Use Case**: Fetch data from REST APIs, transform it, and use it in workflows.\n\n---\n\n## Pattern Structure\n\n```\nTrigger â†’ HTTP Request â†’ [Transform] â†’ [Action] â†’ [Error Handler]\n```\n\n**Key Characteristic**: External data fetching with error handling\n\n---\n\n## Core Components\n\n### 1. Trigger\n**Options**:\n- **Schedule** - Periodic fetching (most common)\n- **Webhook** - Triggered by external event\n- **Manual** - On-demand execution\n\n### 2. HTTP Request Node\n**Purpose**: Call external REST APIs\n\n**Configuration**:\n```javascript\n{\n  method: \"GET\",                    // GET, POST, PUT, DELETE, PATCH\n  url: \"https://api.example.com/users\",\n  authentication: \"predefinedCredentialType\",\n  sendQuery: true,\n  queryParameters: {\n    \"page\": \"={{$json.page}}\",\n    \"limit\": \"100\"\n  },\n  sendHeaders: true,\n  headerParameters: {\n    \"Accept\": \"application/json\",\n    \"X-API-Version\": \"v1\"\n  }\n}\n```\n\n### 3. Response Processing\n**Purpose**: Extract and transform API response data\n\n**Typical flow**:\n```\nHTTP Request â†’ Code (parse) â†’ Set (map fields) â†’ Action\n```\n\n### 4. Action\n**Common actions**:\n- Store in database\n- Send to another API\n- Create notifications\n- Update spreadsheet\n\n### 5. Error Handler\n**Purpose**: Handle API failures gracefully\n\n**Error Trigger Workflow**:\n```\nError Trigger â†’ Log Error â†’ Notify Admin â†’ Retry Logic (optional)\n```\n\n---\n\n## Common Use Cases\n\n### 1. Data Fetching & Storage\n**Flow**: Schedule â†’ HTTP Request â†’ Transform â†’ Database\n\n**Example** (Fetch GitHub issues):\n```\n1. Schedule (every hour)\n2. HTTP Request\n   - Method: GET\n   - URL: https://api.github.com/repos/owner/repo/issues\n   - Auth: Bearer Token\n   - Query: state=open\n3. Code (filter by labels)\n4. Set (map to database schema)\n5. Postgres (upsert issues)\n```\n\n**Response Handling**:\n```javascript\n// Code node - filter issues\nconst issues = $input.all();\nreturn issues\n  .filter(item => item.json.labels.some(l => l.name === 'bug'))\n  .map(item => ({\n    json: {\n      id: item.json.id,\n      title: item.json.title,\n      created_at: item.json.created_at\n    }\n  }));\n```\n\n### 2. API to API Integration\n**Flow**: Trigger â†’ Fetch from API A â†’ Transform â†’ Send to API B\n\n**Example** (Jira to Slack):\n```\n1. Schedule (every 15 minutes)\n2. HTTP Request (GET Jira tickets updated today)\n3. IF (check if tickets exist)\n4. Set (format for Slack)\n5. HTTP Request (POST to Slack webhook)\n```\n\n### 3. Data Enrichment\n**Flow**: Trigger â†’ Fetch base data â†’ Call enrichment API â†’ Combine â†’ Store\n\n**Example** (Enrich contacts with company data):\n```\n1. Postgres (SELECT new contacts)\n2. Code (extract company domains)\n3. HTTP Request (call Clearbit API for each domain)\n4. Set (combine contact + company data)\n5. Postgres (UPDATE contacts with enrichment)\n```\n\n### 4. Monitoring & Alerting\n**Flow**: Schedule â†’ Check API health â†’ IF unhealthy â†’ Alert\n\n**Example** (API health check):\n```\n1. Schedule (every 5 minutes)\n2. HTTP Request (GET /health endpoint)\n3. IF (status !== 200 OR response time > 2000ms)\n4. Slack (alert #ops-team)\n5. PagerDuty (create incident)\n```\n\n### 5. Batch Processing\n**Flow**: Trigger â†’ Fetch large dataset â†’ Split in Batches â†’ Process â†’ Loop\n\n**Example** (Process all users):\n```\n1. Manual Trigger\n2. HTTP Request (GET /api/users?limit=1000)\n3. Split In Batches (100 items per batch)\n4. HTTP Request (POST /api/process for each batch)\n5. Wait (2 seconds between batches - rate limiting)\n6. Loop (back to step 4 until all processed)\n```\n\n---\n\n## Authentication Methods\n\n### 1. None (Public APIs)\n```javascript\n{\n  authentication: \"none\"\n}\n```\n\n### 2. Bearer Token (Most Common)\n**Setup**: Create credential\n```javascript\n{\n  authentication: \"predefinedCredentialType\",\n  nodeCredentialType: \"httpHeaderAuth\",\n  headerAuth: {\n    name: \"Authorization\",\n    value: \"Bearer YOUR_TOKEN\"\n  }\n}\n```\n\n**Access in workflow**:\n```javascript\n{\n  authentication: \"predefinedCredentialType\",\n  nodeCredentialType: \"httpHeaderAuth\"\n}\n```\n\n### 3. API Key (Header or Query)\n**Header auth**:\n```javascript\n{\n  sendHeaders: true,\n  headerParameters: {\n    \"X-API-Key\": \"={{$credentials.apiKey}}\"\n  }\n}\n```\n\n**Query auth**:\n```javascript\n{\n  sendQuery: true,\n  queryParameters: {\n    \"api_key\": \"={{$credentials.apiKey}}\"\n  }\n}\n```\n\n### 4. Basic Auth\n**Setup**: Create \"Basic Auth\" credential\n```javascript\n{\n  authentication: \"predefinedCredentialType\",\n  nodeCredentialType: \"httpBasicAuth\"\n}\n```\n\n### 5. OAuth2\n**Setup**: Create OAuth2 credential with:\n- Authorization URL\n- Token URL\n- Client ID\n- Client Secret\n- Scopes\n\n```javascript\n{\n  authentication: \"predefinedCredentialType\",\n  nodeCredentialType: \"oAuth2Api\"\n}\n```\n\n---\n\n## Handling API Responses\n\n### Success Response (200-299)\n**Default**: Data flows to next node\n\n**Access response**:\n```javascript\n// Entire response\n{{$json}}\n\n// Specific fields\n{{$json.data.id}}\n{{$json.results[0].name}}\n```\n\n### Pagination\n\n#### Pattern 1: Offset-based\n```\n1. Set (initialize: page=1, has_more=true)\n2. HTTP Request (GET /api/items?page={{$json.page}})\n3. Code (check if more pages)\n4. IF (has_more === true)\n   â””â†’ Set (increment page) â†’ Loop to step 2\n```\n\n**Code node** (check pagination):\n```javascript\nconst items = $input.first().json;\nconst currentPage = $json.page || 1;\n\nreturn [{\n  json: {\n    items: items.results,\n    page: currentPage + 1,\n    has_more: items.next !== null\n  }\n}];\n```\n\n#### Pattern 2: Cursor-based\n```\n1. HTTP Request (GET /api/items)\n2. Code (extract next_cursor)\n3. IF (next_cursor exists)\n   â””â†’ Set (cursor={{$json.next_cursor}}) â†’ Loop to step 1\n```\n\n#### Pattern 3: Link Header\n```javascript\n// Code node - parse Link header\nconst linkHeader = $input.first().json.headers['link'];\nconst hasNext = linkHeader && linkHeader.includes('rel=\"next\"');\n\nreturn [{\n  json: {\n    items: $input.first().json.body,\n    has_next: hasNext,\n    next_url: hasNext ? parseNextUrl(linkHeader) : null\n  }\n}];\n```\n\n### Error Responses (400-599)\n\n**Configure HTTP Request**:\n```javascript\n{\n  continueOnFail: true,  // Don't stop workflow on error\n  ignoreResponseCode: true  // Get response even on error\n}\n```\n\n**Handle errors**:\n```\nHTTP Request (continueOnFail: true)\n  â†’ IF (check error)\n    â”œâ”€ [Success Path]\n    â””â”€ [Error Path] â†’ Log â†’ Retry or Alert\n```\n\n**IF condition**:\n```javascript\n{{$json.error}} is empty\n// OR\n{{$json.statusCode}} < 400\n```\n\n---\n\n## Rate Limiting\n\n### Pattern 1: Wait Between Requests\n```\nSplit In Batches (1 item per batch)\n  â†’ HTTP Request\n  â†’ Wait (1 second)\n  â†’ Loop\n```\n\n### Pattern 2: Exponential Backoff\n```javascript\n// Code node\nconst maxRetries = 3;\nlet retryCount = $json.retryCount || 0;\n\nif ($json.error && retryCount < maxRetries) {\n  const delay = Math.pow(2, retryCount) * 1000; // 1s, 2s, 4s\n\n  return [{\n    json: {\n      ...$json,\n      retryCount: retryCount + 1,\n      waitTime: delay\n    }\n  }];\n}\n```\n\n### Pattern 3: Respect Rate Limit Headers\n```javascript\n// Code node - check rate limit\nconst headers = $input.first().json.headers;\nconst remaining = parseInt(headers['x-ratelimit-remaining'] || '999');\nconst resetTime = parseInt(headers['x-ratelimit-reset'] || '0');\n\nif (remaining < 10) {\n  const now = Math.floor(Date.now() / 1000);\n  const waitSeconds = resetTime - now;\n\n  return [{\n    json: {\n      shouldWait: true,\n      waitSeconds: Math.max(waitSeconds, 0)\n    }\n  }];\n}\n\nreturn [{ json: { shouldWait: false } }];\n```\n\n---\n\n## Request Configuration\n\n### GET Request\n```javascript\n{\n  method: \"GET\",\n  url: \"https://api.example.com/users\",\n  sendQuery: true,\n  queryParameters: {\n    \"page\": \"1\",\n    \"limit\": \"100\",\n    \"filter\": \"active\"\n  }\n}\n```\n\n### POST Request (JSON Body)\n```javascript\n{\n  method: \"POST\",\n  url: \"https://api.example.com/users\",\n  sendBody: true,\n  bodyParametersJson: JSON.stringify({\n    name: \"={{$json.name}}\",\n    email: \"={{$json.email}}\",\n    role: \"user\"\n  })\n}\n```\n\n### POST Request (Form Data)\n```javascript\n{\n  method: \"POST\",\n  url: \"https://api.example.com/upload\",\n  sendBody: true,\n  bodyParametersUi: {\n    parameter: [\n      { name: \"file\", value: \"={{$json.fileData}}\" },\n      { name: \"filename\", value: \"={{$json.filename}}\" }\n    ]\n  },\n  sendHeaders: true,\n  headerParameters: {\n    \"Content-Type\": \"multipart/form-data\"\n  }\n}\n```\n\n### PUT/PATCH Request (Update)\n```javascript\n{\n  method: \"PATCH\",\n  url: \"https://api.example.com/users/={{$json.userId}}\",\n  sendBody: true,\n  bodyParametersJson: JSON.stringify({\n    status: \"active\",\n    last_updated: \"={{$now}}\"\n  })\n}\n```\n\n### DELETE Request\n```javascript\n{\n  method: \"DELETE\",\n  url: \"https://api.example.com/users/={{$json.userId}}\"\n}\n```\n\n---\n\n## Error Handling Patterns\n\n### Pattern 1: Retry on Failure\n```\nHTTP Request (continueOnFail: true)\n  â†’ IF (error occurred)\n    â””â†’ Wait (5 seconds)\n    â””â†’ HTTP Request (retry)\n```\n\n### Pattern 2: Fallback API\n```\nHTTP Request (Primary API, continueOnFail: true)\n  â†’ IF (failed)\n    â””â†’ HTTP Request (Fallback API)\n```\n\n### Pattern 3: Error Trigger Workflow\n**Main Workflow**:\n```\nHTTP Request â†’ Process Data\n```\n\n**Error Workflow**:\n```\nError Trigger\n  â†’ Set (extract error details)\n  â†’ Slack (alert team)\n  â†’ Database (log error for analysis)\n```\n\n### Pattern 4: Circuit Breaker\n```javascript\n// Code node - circuit breaker logic\nconst failures = $json.recentFailures || 0;\nconst threshold = 5;\n\nif (failures >= threshold) {\n  throw new Error('Circuit breaker open - too many failures');\n}\n\nreturn [{ json: { canProceed: true } }];\n```\n\n---\n\n## Response Transformation\n\n### Extract Nested Data\n```javascript\n// Code node\nconst response = $input.first().json;\n\nreturn response.data.items.map(item => ({\n  json: {\n    id: item.id,\n    name: item.attributes.name,\n    email: item.attributes.contact.email\n  }\n}));\n```\n\n### Flatten Arrays\n```javascript\n// Code node - flatten nested array\nconst items = $input.all();\nconst flattened = items.flatMap(item =>\n  item.json.results.map(result => ({\n    json: {\n      parent_id: item.json.id,\n      ...result\n    }\n  }))\n);\n\nreturn flattened;\n```\n\n### Combine Multiple API Responses\n```\nHTTP Request 1 (users)\n  â†’ Set (store users)\n  â†’ HTTP Request 2 (orders for each user)\n  â†’ Merge (combine users + orders)\n```\n\n---\n\n## Testing & Debugging\n\n### 1. Test with Manual Trigger\nReplace Schedule with Manual Trigger for testing\n\n### 2. Use Postman/Insomnia First\n- Test API outside n8n\n- Understand response structure\n- Verify authentication\n\n### 3. Log Responses\n```javascript\n// Code node - log for debugging\nconsole.log('API Response:', JSON.stringify($input.first().json, null, 2));\nreturn $input.all();\n```\n\n### 4. Check Execution Data\n- View node output in n8n UI\n- Check headers, body, status code\n- Verify data structure\n\n### 5. Use Binary Data Properly\nFor file downloads:\n```javascript\n{\n  method: \"GET\",\n  url: \"https://api.example.com/download/file.pdf\",\n  responseFormat: \"file\",  // Important for binary data\n  outputPropertyName: \"data\"\n}\n```\n\n---\n\n## Performance Optimization\n\n### 1. Parallel Requests\nUse **Split In Batches** with multiple items:\n```\nSet (create array of IDs)\n  â†’ Split In Batches (10 items per batch)\n  â†’ HTTP Request (processes all 10 in parallel)\n  â†’ Loop\n```\n\n### 2. Caching\n```\nIF (check cache exists)\n  â”œâ”€ [Cache Hit] â†’ Use cached data\n  â””â”€ [Cache Miss] â†’ HTTP Request â†’ Store in cache\n```\n\n### 3. Conditional Fetching\nOnly fetch if data changed:\n```\nHTTP Request (GET with If-Modified-Since header)\n  â†’ IF (status === 304)\n    â””â”€ Use existing data\n  â†’ IF (status === 200)\n    â””â”€ Process new data\n```\n\n### 4. Batch API Calls\nIf API supports batch operations:\n```javascript\n{\n  method: \"POST\",\n  url: \"https://api.example.com/batch\",\n  bodyParametersJson: JSON.stringify({\n    requests: $json.items.map(item => ({\n      method: \"GET\",\n      url: `/users/${item.id}`\n    }))\n  })\n}\n```\n\n---\n\n## Common Gotchas\n\n### 1. âŒ Wrong: Hardcoded URLs\n```javascript\nurl: \"https://api.example.com/prod/users\"\n```\n\n### âœ… Correct: Use environment variables\n```javascript\nurl: \"={{$env.API_BASE_URL}}/users\"\n```\n\n### 2. âŒ Wrong: Credentials in parameters\n```javascript\nheaderParameters: {\n  \"Authorization\": \"Bearer sk-abc123xyz\"  // âŒ Exposed!\n}\n```\n\n### âœ… Correct: Use credentials system\n```javascript\nauthentication: \"predefinedCredentialType\",\nnodeCredentialType: \"httpHeaderAuth\"\n```\n\n### 3. âŒ Wrong: No error handling\n```javascript\nHTTP Request â†’ Process (fails if API down)\n```\n\n### âœ… Correct: Handle errors\n```javascript\nHTTP Request (continueOnFail: true) â†’ IF (error) â†’ Handle\n```\n\n### 4. âŒ Wrong: Blocking on large responses\nProcessing 10,000 items synchronously\n\n### âœ… Correct: Use batching\n```\nSplit In Batches (100 items) â†’ Process â†’ Loop\n```\n\n---\n\n## Real Template Examples\n\nFrom n8n template library (892 API integration templates):\n\n**GitHub to Notion**:\n```\nSchedule â†’ HTTP Request (GitHub API) â†’ Transform â†’ HTTP Request (Notion API)\n```\n\n**Weather to Slack**:\n```\nSchedule â†’ HTTP Request (Weather API) â†’ Set (format) â†’ Slack\n```\n\n**CRM Sync**:\n```\nSchedule â†’ HTTP Request (CRM A) â†’ Transform â†’ HTTP Request (CRM B)\n```\n\nUse `search_templates({query: \"http api\"})` to find more!\n\n---\n\n## Checklist for API Integration\n\n### Planning\n- [ ] Test API with Postman/curl first\n- [ ] Understand response structure\n- [ ] Check rate limits\n- [ ] Review authentication method\n- [ ] Plan error handling\n\n### Implementation\n- [ ] Use credentials (never hardcode)\n- [ ] Configure proper HTTP method\n- [ ] Set correct headers (Content-Type, Accept)\n- [ ] Handle pagination if needed\n- [ ] Add query parameters properly\n\n### Error Handling\n- [ ] Set continueOnFail: true if needed\n- [ ] Check response status codes\n- [ ] Implement retry logic\n- [ ] Add Error Trigger workflow\n- [ ] Alert on failures\n\n### Performance\n- [ ] Use batching for large datasets\n- [ ] Add rate limiting if needed\n- [ ] Consider caching\n- [ ] Test with production load\n\n### Security\n- [ ] Use HTTPS only\n- [ ] Store secrets in credentials\n- [ ] Validate API responses\n- [ ] Use environment variables\n\n---\n\n## Summary\n\n**Key Points**:\n1. **Authentication** via credentials system (never hardcode)\n2. **Error handling** is critical (continueOnFail + IF checks)\n3. **Pagination** for large datasets\n4. **Rate limiting** to respect API limits\n5. **Transform responses** to match your needs\n\n**Pattern**: Trigger â†’ HTTP Request â†’ Transform â†’ Action â†’ Error Handler\n\n**Related**:\n- [webhook_processing.md](webhook_processing.md) - Receiving HTTP requests\n- [database_operations.md](database_operations.md) - Storing API data\n",
        "skills/n8n-workflow-patterns/scheduled_tasks.md": "# Scheduled Tasks Pattern\n\n**Use Case**: Recurring automation workflows that run automatically on a schedule.\n\n---\n\n## Pattern Structure\n\n```\nSchedule Trigger â†’ [Fetch Data] â†’ [Process] â†’ [Deliver] â†’ [Log/Notify]\n```\n\n**Key Characteristic**: Time-based automated execution\n\n---\n\n## Core Components\n\n### 1. Schedule Trigger\n**Purpose**: Execute workflow at specified times\n\n**Modes**:\n- **Interval** - Every X minutes/hours/days\n- **Cron** - Specific times (advanced)\n- **Days & Hours** - Simple recurring schedule\n\n### 2. Data Source\n**Common sources**:\n- HTTP Request (APIs)\n- Database queries\n- File reads\n- Service-specific nodes\n\n### 3. Processing\n**Typical operations**:\n- Filter/transform data\n- Aggregate statistics\n- Generate reports\n- Check conditions\n\n### 4. Delivery\n**Output channels**:\n- Email\n- Slack/Discord/Teams\n- File storage\n- Database writes\n\n### 5. Logging\n**Purpose**: Track execution history\n\n**Methods**:\n- Database log entries\n- File append\n- Monitoring service\n\n---\n\n## Schedule Configuration\n\n### Interval Mode\n**Best for**: Simple recurring tasks\n\n**Examples**:\n```javascript\n// Every 15 minutes\n{\n  mode: \"interval\",\n  interval: 15,\n  unit: \"minutes\"\n}\n\n// Every 2 hours\n{\n  mode: \"interval\",\n  interval: 2,\n  unit: \"hours\"\n}\n\n// Every day at midnight\n{\n  mode: \"interval\",\n  interval: 1,\n  unit: \"days\"\n}\n```\n\n### Days & Hours Mode\n**Best for**: Specific days and times\n\n**Examples**:\n```javascript\n// Weekdays at 9 AM\n{\n  mode: \"daysAndHours\",\n  days: [\"monday\", \"tuesday\", \"wednesday\", \"thursday\", \"friday\"],\n  hour: 9,\n  minute: 0\n}\n\n// Every Monday at 6 PM\n{\n  mode: \"daysAndHours\",\n  days: [\"monday\"],\n  hour: 18,\n  minute: 0\n}\n```\n\n### Cron Mode (Advanced)\n**Best for**: Complex schedules\n\n**Examples**:\n```javascript\n// Every weekday at 9 AM\n{\n  mode: \"cron\",\n  expression: \"0 9 * * 1-5\"\n}\n\n// First day of every month at midnight\n{\n  mode: \"cron\",\n  expression: \"0 0 1 * *\"\n}\n\n// Every 15 minutes during business hours (9 AM - 5 PM) on weekdays\n{\n  mode: \"cron\",\n  expression: \"*/15 9-17 * * 1-5\"\n}\n```\n\n**Cron format**: `minute hour day month weekday`\n- `*` = any value\n- `*/15` = every 15 units\n- `1-5` = range (Monday-Friday)\n- `1,15` = specific values\n\n**Cron examples**:\n```\n0 */6 * * *      Every 6 hours\n0 9,17 * * *     At 9 AM and 5 PM daily\n0 0 * * 0        Every Sunday at midnight\n*/30 * * * *     Every 30 minutes\n0 0 1,15 * *     1st and 15th of each month\n```\n\n---\n\n## Common Use Cases\n\n### 1. Daily Reports\n**Flow**: Schedule â†’ Fetch data â†’ Aggregate â†’ Format â†’ Email\n\n**Example** (Sales report):\n```\n1. Schedule (daily at 9 AM)\n\n2. Postgres (query yesterday's sales)\n   SELECT date, SUM(amount) as total, COUNT(*) as orders\n   FROM orders\n   WHERE date = CURRENT_DATE - INTERVAL '1 day'\n   GROUP BY date\n\n3. Code (calculate metrics)\n   - Total revenue\n   - Order count\n   - Average order value\n   - Comparison to previous day\n\n4. Set (format email body)\n   Subject: Daily Sales Report - {{$json.date}}\n   Body: Formatted HTML with metrics\n\n5. Email (send to team@company.com)\n\n6. Slack (post summary to #sales)\n```\n\n### 2. Data Synchronization\n**Flow**: Schedule â†’ Fetch from source â†’ Transform â†’ Write to target\n\n**Example** (CRM to data warehouse sync):\n```\n1. Schedule (every hour)\n\n2. Set (store last sync time)\n   SELECT MAX(synced_at) FROM sync_log\n\n3. HTTP Request (fetch new CRM contacts since last sync)\n   GET /api/contacts?updated_since={{$json.last_sync}}\n\n4. IF (check if new records exist)\n\n5. Set (transform CRM schema to warehouse schema)\n\n6. Postgres (warehouse - INSERT new contacts)\n\n7. Postgres (UPDATE sync_log SET synced_at = NOW())\n\n8. IF (error occurred)\n   â””â”€ Slack (alert #data-team)\n```\n\n### 3. Monitoring & Health Checks\n**Flow**: Schedule â†’ Check endpoints â†’ Alert if down\n\n**Example** (Website uptime monitor):\n```\n1. Schedule (every 5 minutes)\n\n2. HTTP Request (GET https://example.com/health)\n   - timeout: 10 seconds\n   - continueOnFail: true\n\n3. IF (status !== 200 OR response_time > 2000ms)\n\n4. Redis (check alert cooldown - don't spam)\n   - Key: alert:website_down\n   - TTL: 30 minutes\n\n5. IF (no recent alert sent)\n\n6. [Alert Actions]\n   â”œâ”€ Slack (notify #ops-team)\n   â”œâ”€ PagerDuty (create incident)\n   â”œâ”€ Email (alert@company.com)\n   â””â”€ Redis (set alert cooldown)\n\n7. Postgres (log uptime check result)\n```\n\n### 4. Cleanup & Maintenance\n**Flow**: Schedule â†’ Find old data â†’ Archive/Delete â†’ Report\n\n**Example** (Database cleanup):\n```\n1. Schedule (weekly on Sunday at 2 AM)\n\n2. Postgres (find old records)\n   SELECT * FROM logs\n   WHERE created_at < NOW() - INTERVAL '90 days'\n   LIMIT 10000\n\n3. IF (records exist)\n\n4. Code (export to JSON for archive)\n\n5. Google Drive (upload archive file)\n   - Filename: logs_archive_{{$now.format('YYYY-MM-DD')}}.json\n\n6. Postgres (DELETE archived records)\n   DELETE FROM logs\n   WHERE id IN ({{$json.archived_ids}})\n\n7. Slack (report: \"Archived X records, deleted Y records\")\n```\n\n### 5. Data Enrichment\n**Flow**: Schedule â†’ Find incomplete records â†’ Enrich â†’ Update\n\n**Example** (Enrich contacts with company data):\n```\n1. Schedule (nightly at 3 AM)\n\n2. Postgres (find contacts without company data)\n   SELECT id, email, domain FROM contacts\n   WHERE company_name IS NULL\n   AND created_at > NOW() - INTERVAL '7 days'\n   LIMIT 100\n\n3. Split In Batches (10 contacts per batch)\n\n4. HTTP Request (call Clearbit enrichment API)\n   - For each contact domain\n   - Rate limit: wait 1 second between batches\n\n5. Set (map API response to database schema)\n\n6. Postgres (UPDATE contacts with company data)\n\n7. Wait (1 second - rate limiting)\n\n8. Loop (back to step 4 until all batches processed)\n\n9. Email (summary: \"Enriched X contacts\")\n```\n\n### 6. Backup Automation\n**Flow**: Schedule â†’ Export data â†’ Compress â†’ Store â†’ Verify\n\n**Example** (Database backup):\n```\n1. Schedule (daily at 2 AM)\n\n2. Code (execute pg_dump)\n   const { exec } = require('child_process');\n   exec('pg_dump -h db.example.com mydb > backup.sql')\n\n3. Code (compress backup)\n   const zlib = require('zlib');\n   // Compress backup.sql to backup.sql.gz\n\n4. AWS S3 (upload compressed backup)\n   - Bucket: backups\n   - Key: db/backup-{{$now.format('YYYY-MM-DD')}}.sql.gz\n\n5. AWS S3 (list old backups)\n   - Keep last 30 days only\n\n6. AWS S3 (delete old backups)\n\n7. IF (error occurred)\n   â”œâ”€ PagerDuty (critical alert)\n   â””â”€ Email (backup failed!)\n   ELSE\n   â””â”€ Slack (#devops: \"âœ… Backup completed\")\n```\n\n### 7. Content Publishing\n**Flow**: Schedule â†’ Fetch content â†’ Format â†’ Publish\n\n**Example** (Automated social media posts):\n```\n1. Schedule (every 3 hours during business hours)\n   - Cron: 0 9,12,15,18 * * 1-5\n\n2. Google Sheets (read content queue)\n   - Sheet: \"Scheduled Posts\"\n   - Filter: status=pending AND publish_time <= NOW()\n\n3. IF (posts available)\n\n4. HTTP Request (shorten URLs in post)\n\n5. HTTP Request (POST to Twitter API)\n\n6. HTTP Request (POST to LinkedIn API)\n\n7. Google Sheets (update status=published)\n\n8. Slack (notify #marketing: \"Posted: {{$json.title}}\")\n```\n\n---\n\n## Timezone Considerations\n\n### Set Workflow Timezone\n```javascript\n// In workflow settings\n{\n  timezone: \"America/New_York\"  // EST/EDT\n}\n```\n\n### Common Timezones\n```\nAmerica/New_York    - Eastern (US)\nAmerica/Chicago     - Central (US)\nAmerica/Denver      - Mountain (US)\nAmerica/Los_Angeles - Pacific (US)\nEurope/London       - GMT/BST\nEurope/Paris        - CET/CEST\nAsia/Tokyo          - JST\nAustralia/Sydney    - AEDT\nUTC                 - Universal Time\n```\n\n### Handle Daylight Saving\n**Best practice**: Use timezone-aware scheduling\n\n```javascript\n// âŒ Bad: UTC schedule for \"9 AM local\"\n// Will be off by 1 hour during DST transitions\n\n// âœ… Good: Set workflow timezone\n{\n  timezone: \"America/New_York\",\n  schedule: {\n    mode: \"daysAndHours\",\n    hour: 9  // Always 9 AM Eastern, regardless of DST\n  }\n}\n```\n\n---\n\n## Error Handling\n\n### Pattern 1: Error Trigger Workflow\n**Main workflow**: Normal execution\n**Error workflow**: Alerts and recovery\n\n**Main**:\n```\nSchedule â†’ Fetch â†’ Process â†’ Deliver\n```\n\n**Error**:\n```\nError Trigger (for main workflow)\n  â†’ Set (extract error details)\n  â†’ Slack (#ops-team: \"âŒ Scheduled job failed\")\n  â†’ Email (admin alert)\n  â†’ Postgres (log error for analysis)\n```\n\n### Pattern 2: Retry with Backoff\n```\nSchedule â†’ HTTP Request (continueOnFail: true)\n  â†’ IF (error)\n    â”œâ”€ Wait (5 minutes)\n    â”œâ”€ HTTP Request (retry 1)\n    â””â”€ IF (still error)\n      â”œâ”€ Wait (15 minutes)\n      â”œâ”€ HTTP Request (retry 2)\n      â””â”€ IF (still error)\n        â””â”€ Alert admin\n```\n\n### Pattern 3: Partial Failure Handling\n```\nSchedule â†’ Split In Batches\n  â†’ Process (continueOnFail: true)\n  â†’ Code (track successes and failures)\n  â†’ Report:\n    \"âœ… Processed: 95/100\"\n    \"âŒ Failed: 5/100\"\n```\n\n---\n\n## Performance Optimization\n\n### 1. Batch Processing\nFor large datasets:\n\n```\nSchedule â†’ Query (LIMIT 10000)\n  â†’ Split In Batches (100 items)\n  â†’ Process batch\n  â†’ Loop\n```\n\n### 2. Parallel Processing\nWhen operations are independent:\n\n```\nSchedule\n  â”œâ”€ [Branch 1: Update DB]\n  â”œâ”€ [Branch 2: Send emails]\n  â””â”€ [Branch 3: Generate report]\n  â†’ Merge (wait for all) â†’ Final notification\n```\n\n### 3. Skip if Already Running\nPrevent overlapping executions:\n\n```\nSchedule â†’ Redis (check lock)\n  â†’ IF (lock exists)\n    â””â”€ End (skip this execution)\n  â†’ ELSE\n    â”œâ”€ Redis (set lock, TTL 30 min)\n    â”œâ”€ [Execute workflow]\n    â””â”€ Redis (delete lock)\n```\n\n### 4. Early Exit on No Data\nDon't waste time if nothing to process:\n\n```\nSchedule â†’ Query (check if work exists)\n  â†’ IF (no results)\n    â””â”€ End workflow (exit early)\n  â†’ ELSE\n    â””â”€ Process data\n```\n\n---\n\n## Monitoring & Logging\n\n### Pattern 1: Execution Log Table\n```sql\nCREATE TABLE workflow_executions (\n  id SERIAL PRIMARY KEY,\n  workflow_name VARCHAR(255),\n  started_at TIMESTAMP,\n  completed_at TIMESTAMP,\n  status VARCHAR(50),\n  records_processed INT,\n  error_message TEXT\n);\n```\n\n**Log execution**:\n```\nSchedule\n  â†’ Set (record start)\n  â†’ [Workflow logic]\n  â†’ Postgres (INSERT execution log)\n```\n\n### Pattern 2: Metrics Collection\n```\nSchedule â†’ [Execute]\n  â†’ Code (calculate metrics)\n    - Duration\n    - Records processed\n    - Success rate\n  â†’ HTTP Request (send to monitoring system)\n    - Datadog, Prometheus, etc.\n```\n\n### Pattern 3: Summary Notifications\nDaily/weekly execution summaries:\n\n```\nSchedule (daily at 6 PM) â†’ Query execution logs\n  â†’ Code (aggregate today's executions)\n  â†’ Email (summary report)\n    \"Today's Workflow Executions:\n     - 24/24 successful\n     - 0 failures\n     - Avg duration: 2.3 min\"\n```\n\n---\n\n## Testing Scheduled Workflows\n\n### 1. Use Manual Trigger for Testing\n**Development pattern**:\n```\nManual Trigger (for testing)\n  â†’ [Same workflow logic]\n  â†’ [Outputs]\n\n// Once tested, replace with Schedule Trigger\n```\n\n### 2. Test with Different Times\n```javascript\n// Code node - simulate different times\nconst testTime = new Date('2024-01-15T09:00:00Z');\nreturn [{ json: { currentTime: testTime } }];\n```\n\n### 3. Dry Run Mode\n```\nSchedule â†’ Set (dryRun: true)\n  â†’ IF (dryRun)\n    â””â”€ Log what would happen (don't execute)\n  â†’ ELSE\n    â””â”€ Execute normally\n```\n\n### 4. Shorter Interval for Testing\n```javascript\n// Testing: every 1 minute\n{\n  mode: \"interval\",\n  interval: 1,\n  unit: \"minutes\"\n}\n\n// Production: every 1 hour\n{\n  mode: \"interval\",\n  interval: 1,\n  unit: \"hours\"\n}\n```\n\n---\n\n## Common Gotchas\n\n### 1. âŒ Wrong: Ignoring timezone\n```javascript\nSchedule (9 AM)  // 9 AM in which timezone?\n```\n\n### âœ… Correct: Set workflow timezone\n```javascript\n// Workflow settings\n{\n  timezone: \"America/New_York\"\n}\n```\n\n### 2. âŒ Wrong: Overlapping executions\n```\nSchedule (every 5 min) â†’ Long-running task (10 min)\n// Two executions running simultaneously!\n```\n\n### âœ… Correct: Add execution lock\n```\nSchedule â†’ Redis (check lock)\n  â†’ IF (locked) â†’ Skip\n  â†’ ELSE â†’ Execute\n```\n\n### 3. âŒ Wrong: No error handling\n```\nSchedule â†’ API call â†’ Process (fails silently)\n```\n\n### âœ… Correct: Add error workflow\n```\nMain: Schedule â†’ Execute\nError: Error Trigger â†’ Alert\n```\n\n### 4. âŒ Wrong: Processing all data at once\n```\nSchedule â†’ SELECT 1000000 records â†’ Process (OOM)\n```\n\n### âœ… Correct: Batch processing\n```\nSchedule â†’ SELECT with pagination â†’ Split In Batches â†’ Process\n```\n\n### 5. âŒ Wrong: Hardcoded dates\n```javascript\nquery: \"SELECT * FROM orders WHERE date = '2024-01-15'\"\n```\n\n### âœ… Correct: Dynamic dates\n```javascript\nquery: \"SELECT * FROM orders WHERE date = CURRENT_DATE - INTERVAL '1 day'\"\n```\n\n---\n\n## Real Template Examples\n\nFrom n8n template library:\n\n**Template #2947** (Weather to Slack):\n```\nSchedule (daily 8 AM)\n  â†’ HTTP Request (weather API)\n  â†’ Set (format message)\n  â†’ Slack (post to #general)\n```\n\n**Daily backup**:\n```\nSchedule (nightly 2 AM)\n  â†’ Postgres (export data)\n  â†’ Google Drive (upload)\n  â†’ Email (confirmation)\n```\n\n**Monitoring**:\n```\nSchedule (every 5 min)\n  â†’ HTTP Request (health check)\n  â†’ IF (down) â†’ PagerDuty alert\n```\n\nUse `search_templates({query: \"schedule\"})` to find more!\n\n---\n\n## Checklist for Scheduled Workflows\n\n### Planning\n- [ ] Define schedule frequency (interval, cron, days & hours)\n- [ ] Set workflow timezone\n- [ ] Estimate execution duration\n- [ ] Plan for failures and retries\n- [ ] Consider timezone and DST\n\n### Implementation\n- [ ] Configure Schedule Trigger\n- [ ] Set workflow timezone in settings\n- [ ] Add early exit for no-op cases\n- [ ] Implement batch processing for large data\n- [ ] Add execution logging\n\n### Error Handling\n- [ ] Create Error Trigger workflow\n- [ ] Implement retry logic\n- [ ] Add alert notifications\n- [ ] Log errors for analysis\n- [ ] Handle partial failures gracefully\n\n### Monitoring\n- [ ] Log each execution (start, end, status)\n- [ ] Track metrics (duration, records, success rate)\n- [ ] Set up daily/weekly summaries\n- [ ] Alert on consecutive failures\n- [ ] Monitor resource usage\n\n### Testing\n- [ ] Test with Manual Trigger first\n- [ ] Verify timezone behavior\n- [ ] Test error scenarios\n- [ ] Check for overlapping executions\n- [ ] Validate output quality\n\n### Deployment\n- [ ] Document workflow purpose\n- [ ] Set up monitoring\n- [ ] Configure alerts\n- [ ] Activate workflow in n8n UI âš ï¸ **Manual activation required** (API/MCP cannot activate)\n- [ ] Test in production (short interval first)\n- [ ] Monitor first few executions\n\n---\n\n## Advanced Patterns\n\n### Dynamic Scheduling\n**Change schedule based on conditions**:\n\n```\nSchedule (check every hour) â†’ Code (check if it's time to run)\n  â†’ IF (business hours AND weekday)\n    â””â”€ Execute workflow\n  â†’ ELSE\n    â””â”€ Skip\n```\n\n### Dependent Schedules\n**Chain workflows**:\n\n```\nWorkflow A (daily 2 AM): Data sync\n  â†’ On completion â†’ Trigger Workflow B\n\nWorkflow B: Generate report (depends on fresh data)\n```\n\n### Conditional Execution\n**Skip based on external factors**:\n\n```\nSchedule â†’ HTTP Request (check feature flag)\n  â†’ IF (feature enabled)\n    â””â”€ Execute\n  â†’ ELSE\n    â””â”€ Skip\n```\n\n---\n\n## Summary\n\n**Key Points**:\n1. **Set workflow timezone** explicitly\n2. **Batch processing** for large datasets\n3. **Error handling** is critical (Error Trigger + retries)\n4. **Prevent overlaps** with execution locks\n5. **Monitor and log** all executions\n\n**Pattern**: Schedule â†’ Fetch â†’ Process â†’ Deliver â†’ Log\n\n**Schedule Modes**:\n- **Interval**: Simple recurring (every X minutes/hours)\n- **Days & Hours**: Specific days and times\n- **Cron**: Advanced complex schedules\n\n**Related**:\n- [http_api_integration.md](http_api_integration.md) - Fetching data on schedule\n- [database_operations.md](database_operations.md) - Scheduled database tasks\n- [webhook_processing.md](webhook_processing.md) - Alternative to scheduling\n",
        "skills/n8n-workflow-patterns/webhook_processing.md": "# Webhook Processing Pattern\n\n**Use Case**: Receive HTTP requests from external systems and process them instantly.\n\n---\n\n## Pattern Structure\n\n```\nWebhook â†’ [Validate] â†’ [Transform] â†’ [Action] â†’ [Response/Notify]\n```\n\n**Key Characteristic**: Instant event-driven processing\n\n---\n\n## Core Components\n\n### 1. Webhook Node (Trigger)\n**Purpose**: Create HTTP endpoint to receive data\n\n**Configuration**:\n```javascript\n{\n  path: \"form-submit\",        // URL path: https://n8n.example.com/webhook/form-submit\n  httpMethod: \"POST\",         // GET, POST, PUT, DELETE\n  responseMode: \"onReceived\", // or \"lastNode\" for custom response\n  responseData: \"allEntries\"  // or \"firstEntryJson\"\n}\n```\n\n**Critical Gotcha**: Data is nested under `$json.body`\n```javascript\nâŒ {{$json.email}}\nâœ… {{$json.body.email}}\n```\n\n### 2. Validation (Optional but Recommended)\n**Purpose**: Verify incoming data before processing\n\n**Options**:\n- **IF node** - Check required fields exist\n- **Code node** - Custom validation logic\n- **Stop and Error** - Fail gracefully with message\n\n**Example**:\n```javascript\n// IF node condition\n{{$json.body.email}} is not empty AND\n{{$json.body.name}} is not empty\n```\n\n### 3. Transformation\n**Purpose**: Map webhook data to desired format\n\n**Typical nodes**:\n- **Set** - Field mapping\n- **Code** - Complex transformations\n\n**Example** (Set node):\n```javascript\n{\n  \"user_email\": \"={{$json.body.email}}\",\n  \"user_name\": \"={{$json.body.name}}\",\n  \"timestamp\": \"={{$now}}\"\n}\n```\n\n### 4. Action\n**Purpose**: Do something with the data\n\n**Common actions**:\n- Store in database (Postgres, MySQL, MongoDB)\n- Send notification (Slack, Email, Discord)\n- Call another API (HTTP Request)\n- Update external system (CRM, support ticket)\n\n### 5. Response (If responseMode: \"lastNode\")\n**Purpose**: Send custom HTTP response\n\n**Webhook Response Node**:\n```javascript\n{\n  statusCode: 200,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  },\n  body: {\n    \"status\": \"success\",\n    \"message\": \"Form received\"\n  }\n}\n```\n\n---\n\n## Common Use Cases\n\n### 1. Form Submissions\n**Flow**: Form â†’ Webhook â†’ Validate â†’ Database â†’ Email Confirmation\n\n**Example**:\n```\n1. Webhook (path: \"contact-form\", POST)\n2. IF (check email & message not empty)\n3. Postgres (insert into contacts table)\n4. Email (send confirmation to user)\n5. Slack (notify team in #leads)\n6. Webhook Response ({\"status\": \"success\"})\n```\n\n**Real Data Access**:\n```javascript\nName: {{$json.body.name}}\nEmail: {{$json.body.email}}\nMessage: {{$json.body.message}}\n```\n\n### 2. Payment Webhooks (Stripe, PayPal)\n**Flow**: Payment Provider â†’ Webhook â†’ Verify â†’ Update Database â†’ Send Receipt\n\n**Security**: Verify webhook signatures\n```javascript\n// Code node - verify Stripe signature\nconst crypto = require('crypto');\nconst signature = $input.item.headers['stripe-signature'];\nconst secret = $credentials.stripeWebhookSecret;\n\n// Verify signature matches\nconst expectedSig = crypto\n  .createHmac('sha256', secret)\n  .update($input.item.body)\n  .digest('hex');\n\nif (signature !== expectedSig) {\n  throw new Error('Invalid webhook signature');\n}\n\nreturn $input.item.body; // Return validated body\n```\n\n### 3. Chat Platform Integrations (Slack, Discord, Teams)\n**Flow**: Chat Command â†’ Webhook â†’ Process â†’ Respond\n\n**Example** (Slack slash command):\n```\n1. Webhook (path: \"slack-command\", POST)\n2. Code (parse Slack payload: $json.body.text, $json.body.user_id)\n3. HTTP Request (fetch data from API)\n4. Set (format Slack message)\n5. Webhook Response (immediate Slack response)\n```\n\n**Slack Data Access**:\n```javascript\nCommand: {{$json.body.command}}\nText: {{$json.body.text}}\nUser ID: {{$json.body.user_id}}\nChannel ID: {{$json.body.channel_id}}\n```\n\n### 4. GitHub/GitLab Webhooks\n**Flow**: Git Event â†’ Webhook â†’ Parse â†’ Notify/Deploy\n\n**Example** (new PR notification):\n```\n1. Webhook (path: \"github\", POST)\n2. IF (check $json.body.action equals \"opened\")\n3. Set (extract PR details: title, author, url)\n4. Slack (notify #dev-team)\n5. Webhook Response (200 OK)\n```\n\n**GitHub Data Access**:\n```javascript\nEvent Type: {{$json.headers['x-github-event']}}\nAction: {{$json.body.action}}\nPR Title: {{$json.body.pull_request.title}}\nAuthor: {{$json.body.pull_request.user.login}}\nURL: {{$json.body.pull_request.html_url}}\n```\n\n### 5. IoT Device Data\n**Flow**: Device â†’ Webhook â†’ Validate â†’ Store â†’ Alert (if threshold)\n\n**Example** (temperature sensor):\n```\n1. Webhook (path: \"sensor-data\", POST)\n2. Set (extract sensor readings)\n3. Postgres (insert into sensor_readings)\n4. IF (temperature > 80)\n5. Email (alert admin)\n```\n\n---\n\n## Webhook Data Structure\n\n### Standard Structure\n```json\n{\n  \"headers\": {\n    \"content-type\": \"application/json\",\n    \"user-agent\": \"...\",\n    \"x-custom-header\": \"...\"\n  },\n  \"params\": {\n    \"id\": \"123\"  // From URL: /webhook/form/:id\n  },\n  \"query\": {\n    \"token\": \"abc\"  // From URL: /webhook/form?token=abc\n  },\n  \"body\": {\n    // âš ï¸ YOUR DATA IS HERE!\n    \"name\": \"John\",\n    \"email\": \"john@example.com\"\n  }\n}\n```\n\n### Accessing Different Parts\n```javascript\n// Headers\n{{$json.headers['content-type']}}\n{{$json.headers['x-api-key']}}\n\n// URL Parameters\n{{$json.params.id}}\n\n// Query Parameters\n{{$json.query.token}}\n{{$json.query.page}}\n\n// Body (MOST COMMON)\n{{$json.body.email}}\n{{$json.body.user.name}}\n{{$json.body.items[0].price}}\n```\n\n---\n\n## Authentication & Security\n\n### 1. Query Parameter Token\n**Simple but less secure**\n```javascript\n// IF node - validate token\n{{$json.query.token}} equals \"your-secret-token\"\n```\n\n### 2. Header-Based Auth\n**Better security**\n```javascript\n// IF node - check header\n{{$json.headers['x-api-key']}} equals \"your-api-key\"\n```\n\n### 3. Signature Verification\n**Best security** (for webhooks from services like Stripe, GitHub)\n```javascript\n// Code node\nconst crypto = require('crypto');\nconst signature = $input.item.headers['x-signature'];\nconst secret = $credentials.webhookSecret;\n\nconst calculatedSig = crypto\n  .createHmac('sha256', secret)\n  .update(JSON.stringify($input.item.body))\n  .digest('hex');\n\nif (signature !== `sha256=${calculatedSig}`) {\n  throw new Error('Invalid signature');\n}\n\nreturn $input.item.body;\n```\n\n### 4. IP Whitelist\n**Restrict access by IP** (n8n workflow settings)\n- Configure in workflow settings\n- Only allow specific IP ranges\n- Use for internal systems\n\n---\n\n## Response Modes\n\n### onReceived (Default)\n**Behavior**: Immediate 200 OK response, workflow continues in background\n\n**Use when**:\n- Long-running workflows\n- Response doesn't depend on workflow result\n- Fire-and-forget processing\n\n**Configuration**:\n```javascript\n{\n  responseMode: \"onReceived\",\n  responseCode: 200\n}\n```\n\n### lastNode (Custom Response)\n**Behavior**: Wait for workflow completion, send custom response\n\n**Use when**:\n- Need to return data to caller\n- Synchronous processing required\n- Form submissions with confirmation\n\n**Configuration**:\n```javascript\n{\n  responseMode: \"lastNode\"\n}\n```\n\n**Then add Webhook Response node**:\n```javascript\n{\n  statusCode: 200,\n  headers: {\n    \"Content-Type\": \"application/json\"\n  },\n  body: {\n    \"id\": \"={{$json.record_id}}\",\n    \"status\": \"success\"\n  }\n}\n```\n\n---\n\n## Error Handling\n\n### Pattern 1: Try-Catch with Error Trigger\n```\nMain Flow:\n  Webhook â†’ [nodes...] â†’ Success Response\n\nError Flow:\n  Error Trigger â†’ Log Error â†’ Slack Alert â†’ Error Response\n```\n\n**Error Trigger Configuration**:\n```javascript\n{\n  workflowId: \"current-workflow-id\"\n}\n```\n\n**Error Response** (if responseMode: \"lastNode\"):\n```javascript\n{\n  statusCode: 500,\n  body: {\n    \"status\": \"error\",\n    \"message\": \"Processing failed\"\n  }\n}\n```\n\n### Pattern 2: Validation Early Exit\n```\nWebhook â†’ IF (validate) â†’ [True: Process]\n                       â””â†’ [False: Error Response]\n```\n\n**False Branch Response**:\n```javascript\n{\n  statusCode: 400,\n  body: {\n    \"status\": \"error\",\n    \"message\": \"Invalid data: missing email\"\n  }\n}\n```\n\n### Pattern 3: Continue On Fail\n**Per-node setting**: Continue even if node fails\n\n**Use case**: Non-critical notifications\n```\nWebhook â†’ Database (critical) â†’ Slack (continueOnFail: true)\n```\n\n---\n\n## Testing Webhooks\n\n### 1. Use Manual Trigger\nReplace Webhook with Manual Trigger for testing:\n```\nManual Trigger â†’ [set test data] â†’ rest of workflow\n```\n\n### 2. Use curl\n```bash\ncurl -X POST https://n8n.example.com/webhook/form-submit \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"email\": \"test@example.com\", \"name\": \"Test User\"}'\n```\n\n### 3. Use Postman/Insomnia\n- Create request collection\n- Test different payloads\n- Verify responses\n\n### 4. Webhook.site\n- Use webhook.site for testing\n- Copy webhook.site URL to your service\n- View requests and debug\n\n---\n\n## Performance Considerations\n\n### Large Payloads\n- Webhook timeout: 120 seconds (default)\n- For large data, consider async processing:\n  ```\n  Webhook â†’ Queue (Redis/DB) â†’ Response (immediate)\n\n  Separate Workflow:\n  Schedule â†’ Check Queue â†’ Process\n  ```\n\n### High Volume\n- Use \"Execute Once\" mode if processing all items together\n- Consider rate limiting\n- Monitor execution times\n- Scale n8n instance if needed\n\n### Retries\n- Webhook calls typically don't retry automatically\n- Implement retry logic on caller side\n- Or use queue pattern for guaranteed processing\n\n---\n\n## Common Gotchas\n\n### 1. âŒ Wrong: Accessing webhook data\n```javascript\n{{$json.email}}  // Empty or undefined\n```\n\n### âœ… Correct\n```javascript\n{{$json.body.email}}  // Data is under .body\n```\n\n### 2. âŒ Wrong: Response mode confusion\nUsing Webhook Response node with responseMode: \"onReceived\" (ignored)\n\n### âœ… Correct\nSet responseMode: \"lastNode\" to use Webhook Response node\n\n### 3. âŒ Wrong: No validation\nAssuming data is always present and valid\n\n### âœ… Correct\nValidate data early with IF node or Code node\n\n### 4. âŒ Wrong: Hardcoded paths\nUsing same path for dev/prod\n\n### âœ… Correct\nUse environment variables: `{{$env.WEBHOOK_PATH_PREFIX}}/form-submit`\n\n---\n\n## Real Template Examples\n\nFrom n8n template library (1,085 webhook templates):\n\n**Simple Form to Slack**:\n```\nWebhook â†’ Set â†’ Slack\n```\n\n**Payment Processing**:\n```\nWebhook â†’ Verify Signature â†’ Update Database â†’ Send Receipt â†’ Notify Admin\n```\n\n**Chat Bot**:\n```\nWebhook â†’ Parse Command â†’ AI Agent â†’ Format Response â†’ Webhook Response\n```\n\nUse `search_templates({query: \"webhook\"})` to find more!\n\n---\n\n## Checklist for Webhook Workflows\n\n### Setup\n- [ ] Choose descriptive webhook path\n- [ ] Configure HTTP method (POST most common)\n- [ ] Choose response mode (onReceived vs lastNode)\n- [ ] Test webhook URL before connecting services\n\n### Security\n- [ ] Add authentication (token, signature, IP whitelist)\n- [ ] Validate incoming data\n- [ ] Sanitize user input (if storing/displaying)\n- [ ] Use HTTPS (always)\n\n### Data Handling\n- [ ] Remember data is under $json.body\n- [ ] Handle missing fields gracefully\n- [ ] Transform data to desired format\n- [ ] Log important data (for debugging)\n\n### Error Handling\n- [ ] Add Error Trigger workflow\n- [ ] Validate required fields\n- [ ] Return appropriate error responses\n- [ ] Alert team on failures\n\n### Testing\n- [ ] Test with curl/Postman\n- [ ] Test error scenarios\n- [ ] Verify response format\n- [ ] Monitor first executions\n\n---\n\n## Summary\n\n**Key Points**:\n1. **Data under $json.body** (most common mistake!)\n2. **Validate early** to catch bad data\n3. **Choose response mode** based on use case\n4. **Secure webhooks** with auth\n5. **Handle errors** gracefully\n\n**Pattern**: Webhook â†’ Validate â†’ Transform â†’ Action â†’ Response\n\n**Related**:\n- [n8n Expression Syntax](../../n8n-expression-syntax/SKILL.md) - Accessing webhook data correctly\n- [http_api_integration.md](http_api_integration.md) - Making HTTP requests in response\n"
      },
      "plugins": [
        {
          "name": "n8n-mcp-skills",
          "source": "./",
          "description": "Complete bundle: 7 expert skills for building flawless n8n workflows using n8n-mcp MCP server. Includes skills for expression syntax, MCP tools usage, workflow patterns, validation, node configuration, JavaScript code, and Python code.",
          "version": "1.0.0",
          "author": {
            "name": "Romuald CzÅ‚onkowski",
            "url": "https://www.aiadvisors.pl/en"
          },
          "category": "automation",
          "keywords": [
            "n8n",
            "workflow",
            "mcp",
            "automation",
            "validation",
            "expressions",
            "code",
            "javascript",
            "python",
            "skills"
          ],
          "homepage": "https://github.com/czlonkowski/n8n-skills",
          "repository": "https://github.com/czlonkowski/n8n-skills",
          "license": "MIT",
          "categories": [
            "automation",
            "code",
            "expressions",
            "javascript",
            "mcp",
            "n8n",
            "python",
            "skills",
            "validation",
            "workflow"
          ],
          "install_commands": [
            "/plugin marketplace add czlonkowski/n8n-skills",
            "/plugin install n8n-mcp-skills@n8n-mcp-skills"
          ]
        }
      ]
    }
  ]
}