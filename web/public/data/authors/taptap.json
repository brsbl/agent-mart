{
  "author": {
    "id": "taptap",
    "display_name": "TapTap",
    "avatar_url": "https://avatars.githubusercontent.com/u/31462231?v=4"
  },
  "marketplaces": [
    {
      "name": "taptap-plugins",
      "version": null,
      "description": "TapTap Claude Code 插件库 - 提供开发工作流自动化插件",
      "repo_full_name": "taptap/claude-plugins-marketplace",
      "repo_url": "https://github.com/taptap/claude-plugins-marketplace",
      "repo_description": null,
      "signals": {
        "stars": 2,
        "forks": 0,
        "pushed_at": "2026-02-10T04:41:38Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"taptap-plugins\",\n  \"owner\": {\n    \"name\": \"TapTap AI Team\",\n    \"email\": \"\"\n  },\n  \"metadata\": {\n    \"description\": \"TapTap Claude Code 插件库 - 提供开发工作流自动化插件\",\n    \"version\": \"0.1.17\",\n    \"pluginRoot\": \"./plugins\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"spec\",\n      \"source\": \"./plugins/spec\",\n      \"description\": \"Spec-Driven Development 插件，自动执行完整开发流程\",\n      \"version\": \"0.1.3\",\n      \"author\": {\n        \"name\": \"TapTap AI Team\"\n      },\n      \"category\": \"productivity\",\n      \"keywords\": [\"spec\", \"sdd\"],\n      \"strict\": true\n    },\n    {\n      \"name\": \"git\",\n      \"source\": \"./plugins/git\",\n      \"description\": \"Git 工作流命令插件，提供提交、推送、创建 MR 和分支清理功能\",\n      \"version\": \"0.1.6\",\n      \"author\": {\n        \"name\": \"TapTap AI Team\"\n      },\n      \"category\": \"version-control\",\n      \"keywords\": [\"git\", \"commit\"],\n      \"strict\": true\n    },\n    {\n      \"name\": \"sync\",\n      \"source\": \"./plugins/sync\",\n      \"description\": \"项目配置同步插件，提供 MCP 和开发环境配置同步功能\",\n      \"version\": \"0.1.13\",\n      \"author\": {\n        \"name\": \"TapTap AI Team\"\n      },\n      \"category\": \"productivity\",\n      \"keywords\": [\"sync\", \"mcp\", \"config\"],\n      \"strict\": true\n    },\n    {\n      \"name\": \"quality\",\n      \"source\": \"./plugins/quality\",\n      \"description\": \"代码质量插件，提供 AI 驱动的代码审查和质量检查功能，支持跨部门多语言（Go/Java/Python/Kotlin/Swift/TypeScript）\",\n      \"version\": \"0.0.2\",\n      \"author\": {\n        \"name\": \"TapTap AI Team\"\n      },\n      \"category\": \"code-quality\",\n      \"keywords\": [\"review\", \"quality\", \"bug-detection\", \"security\", \"performance\"],\n      \"strict\": true\n    }\n  ]\n}\n",
        "README.md": "[English](./README.en.md) | 中文\n\n# TapTap Claude Code Plugins Marketplace\n\nTapTap 团队维护的 Claude Code 插件库，提供开发工作流自动化工具。\n\n## 团队配置\n\n对于团队项目，可以在项目根目录配置 `.claude/settings.json`，Claude Code 会自动安装插件，无需手动执行安装命令。\n\n### 1. 配置 settings\n\n在项目根目录执行以下命令：\n\n```bash\nmkdir -p .claude && echo '{\n  \"extraKnownMarketplaces\": {\n    \"taptap-plugins\": {\n      \"source\": {\n        \"source\": \"github\",\n        \"repo\": \"taptap/claude-plugins-marketplace\"\n      }\n    }\n  },\n  \"enabledPlugins\": {\n    \"spec@taptap-plugins\": true,\n    \"sync@taptap-plugins\": true,\n    \"git@taptap-plugins\": true,\n    \"quality@taptap-plugins\": true\n  }\n}' > .claude/settings.json\n```\n\n**可选：按仓库配置 Git 插件行为**\n\n在 `.claude/settings.json` 的 `env` 字段中可配置 Git 插件行为：\n\n| 环境变量 | 默认值 | 说明 |\n|----------|--------|------|\n| `GIT_ALLOW_NO_TICKET` | `\"true\"` | 是否允许 no-ticket 提交，设为 `\"false\"` 可禁用 |\n\n示例（禁用 no-ticket，要求必须提供任务 ID）：\n\n```json\n{\n  \"env\": {\n    \"GIT_ALLOW_NO_TICKET\": \"false\"\n  },\n  \"enabledPlugins\": { ... }\n}\n```\n\n### 2. 执行 /sync\n\n一键配置 MCP、自动更新和 Cursor 同步：\n\n```bash\n# 在 Claude Code 中执行\n/sync:basic\n\n# 配置完成后，重启 Claude Code 和 Cursor 即可使用\n```\n\n**包含功能：**\n\n- ✅ 配置 context7 和 sequential-thinking MCP（自动获取最新文档）\n- ✅ 启用插件自动重载 + CLI 工具检测（修改后重启会话即可生效）\n- ✅ 同步配置到 Cursor（含 Spec Skills 规则）\n- ✅ 同步 GitLab Merge Request 默认模板\n- ✅ 支持 GitHub Pull Request 模板\n\n### 3. 验证安装\n\n```bash\n# 查看已安装插件\n/plugin\n\n# 查看可用命令\n/help\n```\n\n## 插件列表\n\n\n| 插件      | 版本    | 描述                                                                |\n| ------- | ----- | ----------------------------------------------------------------- |\n| spec    | 0.1.3 | Spec-Driven Development 工作流插件                                     |\n| git     | 0.1.6 | Git 工作流自动化插件（三种提交方式：commit、commit+push、commit+push+MR）            |\n| sync    | 0.1.13 | 开发环境配置同步插件（MCP + Hooks + Cursor + Spec Skills 规则 + Claude Skills） |\n| quality | 0.0.2 | AI 驱动的代码质量检查插件（9 个并行 Agent，支持 Bug 检测、代码质量、安全检查、性能分析）              |\n\n\n详细说明请查看各插件目录下的 README.md。\n\n**版本历史**：查看 [CHANGELOG.md](./CHANGELOG.md) 了解各版本更新内容。\n\n## 日常使用\n\n### Git 工作流（推荐）\n\n适用于需要创建 MR 的开发场景：\n\n```bash\n# 1. 提供任务链接，自动创建分支、提交、推送并创建 MR\n/git:commit-push-pr https://xindong.atlassian.net/browse/TAP-12345\n\n# 或提供飞书任务链接\n/git:commit-push-pr https://project.feishu.cn/pojq34/story/detail/12345\n```\n\n**命令执行流程：**\n\n- 自动从任务链接提取 Task ID\n- **智能判断分支前缀**：分析 `git diff` 内容自动选择合适的前缀\n  - `docs/`：仅修改文档文件\n  - `test/`：仅修改测试文件\n  - `fix/`：包含 bug 修复关键词\n  - `feat/`：新增功能或文件\n  - `refactor/`：代码重构\n  - `perf/`：性能优化\n  - `chore/`：配置或维护任务\n- 如果在 main/master 分支，会询问分支描述并创建功能分支（如 `feat/TAP-12345-description`）\n- 分析代码变更，生成符合规范的提交信息\n- 推送代码并自动创建 Merge Request / Pull Request\n\n**平台支持：**\n\n\n| 平台     | CLI 工具 | 模板路径                                         |\n| ------ | ------ | -------------------------------------------- |\n| GitLab | `glab` | `.gitlab/merge_request_templates/default.md` |\n| GitHub | `gh`   | `.github/PULL_REQUEST_TEMPLATE.md`           |\n\n\n> 💡 命令会自动检测仓库类型和可用的 CLI 工具，选择合适的方式创建 MR/PR。\n\n**CLI 工具配置：** 使用 `/sync:git-cli-auth` 命令检测和配置认证\n\n```bash\n# 配置 git cli Token\n/sync:git-cli-auth\n\n# 或使用原始命令\ngh auth login        # GitHub\nglab auth login      # GitLab\n```\n\n### 快速提交与推送\n\nGit 插件提供三种提交方式，根据需求选择：\n\n**1. 仅提交（本地开发）**\n\n```bash\n# 适用于：还需要多次提交，暂不推送\n/git:commit\n```\n\n**2. 提交并推送（备份到远程）**\n\n```bash\n# 适用于：功能完成，需要备份到远程，但不创建 MR\n/git:commit-push\n```\n\n**3. 提交、推送并创建 MR（完整流程）**\n\n```bash\n# 适用于：功能完成，立即创建合并请求\n/git:commit-push-pr https://xindong.atlassian.net/browse/TAP-12345\n```\n\n**说明**：\n\n- 所有命令都会自动从分支名提取 Task ID\n- 在 main/master 分支会自动创建功能分支\n- `/git:commit-push-pr` 支持智能分支前缀判断\n\n### Spec 驱动开发\n\n> ⚠️ **警告**：此功能正在开发中，暂不推荐使用\n\n从需求文档生成技术方案并执行开发：\n\n```bash\n# 根据任务需求生成完整的技术方案和执行计划\n/spec https://xindong.atlassian.net/browse/TAP-12345\n```\n\n#### 模块发现（module-discovery）\n\nAI 开始工作时**自动读取**模块索引，快速了解项目结构：\n\n\n| 路径                                    | 说明                                   |\n| ------------------------------------- | ------------------------------------ |\n| `tap-agents/tap-agents-configs.md`    | 项目配置文件（项目类型、项目名称、业务模块目录、主要类后缀、文件扩展名） |\n| `tap-agents/prompts/module-map.md`    | 模块索引（P0/P1/P2 优先级分类 + 关键词定位表）        |\n| `tap-agents/prompts/modules/[模块名].md` | 各模块详细文档                              |\n\n\n**工作流程：**\n\n1. AI 检查 `module-map.md` 是否存在\n2. 如不存在，询问用户是否生成（使用 `generate-module-map.md` prompt）\n3. 读取模块索引，利用关键词快速定位代码\n\n#### 文档自动同步（doc-auto-sync）\n\nAI 修改代码时**自动维护**模块文档：\n\n\n| 触发场景 | AI 行为                                      |\n| ---- | ------------------------------------------ |\n| 新增模块 | 创建 `modules/[模块名].md` + 更新 `module-map.md` |\n| 修改模块 | 检查并更新对应文档                                  |\n| 文档缺失 | 自动创建文档（强制执行）                               |\n| 文档过期 | 信任代码，自动更新文档                                |\n\n\n**配置项（在 `tap-agents/tap-agents-configs.md` 中定义）：**\n\n- `「项目类型」`：iOS / Android / Web / Backend 等\n- `「项目名称」`：项目名称\n- `「业务模块目录」`：主要业务代码目录（如 `TapTap`、`src/modules`）\n- `「主要类后缀」`：识别主要类的后缀（如 `ViewController`、`Service`）\n- `「文件扩展名」`：代码文件扩展名（如 `.swift`、`.kt`、`.go`）\n\n### 代码质量检查\n\n使用 AI 驱动的代码审查，自动检测潜在问题：\n\n```bash\n# 审查当前分支的所有变更\n/review\n\n# 审查特定 Merge Request\n/review --mr 123\n\n# 审查特定文件\n/review path/to/file.go\n```\n\n**功能亮点：**\n\n- **9 个并行 Agent**：同时执行，审查速度快\n- **四维度审查**：Bug 检测、代码质量、安全检查、性能分析\n- **置信度评分**：阈值 80，自动过滤低置信度问题\n- **冗余确认**：同类问题由 2 个 Agent 独立发现，置信度 +20\n- **多语言支持**：Go/Java/Python/Kotlin/Swift/TypeScript\n- **智能规范检查**：自动检测 CLAUDE.md/CONTRIBUTING.md 并遵循项目规范\n\n### 开发环境同步\n\n```bash\n# 一键配置开发环境（推荐新成员使用）\n/sync:basic\n\n# 或单独执行各项配置\n/sync:mcp            # 配置 context7 和 sequential-thinking MCP\n/sync:hooks          # 启用插件自动重载\n/sync:cursor         # 同步配置到 Cursor IDE\n\n# 配置飞书文档 MCP（可选）\n/sync:mcp-feishu https://open.feishu.cn/mcp/stream/mcp_xxxxx\n\n# 配置飞书项目 MCP（可选）\n/sync:mcp-feishu-project https://project.feishu.cn/mcp_server/v1?mcpKey=xxx&projectKey=yyy&userKey=zzz\n\n# 配置 Grafana MCP（可选，自动安装 Golang 和 mcp-grafana）\n/sync:mcp-grafana <username> <password>\n```\n\n**功能说明：**\n\n- **MCP 服务器**：自动获取 GitHub 库的最新文档（context7）和结构化问题解决（sequential-thinking）\n- **自动重载**：修改插件后重启会话自动生效，无需手动重装\n- **Cursor 同步**：在 Cursor IDE 中使用 Git 命令和 Spec Skills 规则（doc-auto-sync、module-discovery 等）\n\n## 更新插件\n\n```bash\n# 更新指定插件\n/plugin update spec@taptap-plugins\n\n# 或重新安装\n/plugin uninstall spec@taptap-plugins\n/plugin install spec@taptap-plugins\n```\n\n## 问题反馈\n\n请在 [GitHub Issues](https://github.com/taptap/claude-plugins-marketplace/issues) 提交问题。",
        "plugins/spec/README.md": "# Spec-Driven Development Plugin\n\nSpec-Driven Development 插件，从任务工单和 PRD 自动执行完整开发流程，并提供模块发现与文档自动同步能力。\n\n## 功能概述\n\n通过贴入任务工单链接和 PRD 链接触发完整的开发工作流：\n\n```\n用户：实现 https://your-project-system.example.com/story/detail/123456 https://your-docs.example.com/wiki/DOC001\n\n→ 解析任务 ID (123456)\n→ 读取任务工单标题\n→ 创建工作分支 (feat-PROJ-12345-xxx)\n→ 读取 PRD 内容\n→ 生成 spec/plan/tasks\n→ ⏸️ 输出文档摘要，等待用户确认\n→ 用户确认后开始实现\n→ 自动判断并行/顺序执行\n→ 实现代码\n→ 自动提交并创建 MR\n```\n\n## Skills\n\n### module-discovery\n\n**触发条件**：需要定位代码位置或询问模块功能时（自动执行）\n\n**功能**：\n- 读取 `module-map.md` 获取项目模块索引\n- 根据关键词快速定位相关模块\n- 支持按优先级（P0/P1/P2）组织模块\n- 提供关键词到模块的映射表\n\n**使用场景**：\n- 收到开发需求时，快速定位代码模块\n- 需要了解模块详情时，读取模块文档\n- 新增或修改模块时，配合 doc-auto-sync 同步更新\n\n### doc-auto-sync\n\n**触发条件**：修改模块代码时（强制执行）\n\n**功能**：\n- 维护分层文档系统（module-map.md + 模块文档）\n- 新增模块时自动创建文档\n- 修改模块时自动更新文档\n- 处理文档与代码不一致情况\n- 提供文档检查脚本（check-docs.py、check-stale-docs.py）\n\n**文档结构**：\n```\ntap-agents/prompts/\n├── module-map.md           # 根索引\n└── modules/\n    ├── ModuleA.md          # 模块A详情\n    └── ModuleB.md          # 模块B详情\n```\n\n### implementing-from-task\n\n**触发条件**：识别用户输入的任务工单链接 + PRD 链接\n\n**功能**：\n- 自动解析任务 ID 创建分支\n- 从 PRD 链接获取内容\n- 生成 spec/plan/tasks 文档\n- 智能判断执行方式（并行/顺序）\n- 自动实现并提交\n\n### merging-parallel-work\n\n**触发条件**：用户明确指定执行时（测试中）\n\n**功能**：\n- 使用 git worktree 管理并行开发\n- 按顺序合并各模块分支到主分支\n- AI 自动解决冲突（import 合并、配置智能合并）\n- 生成合并报告与验证结果\n- 提供回退策略\n\n**工作流程**：\n1. 创建 worktree（每个独立模块一个）\n2. 分配任务到各 worktree\n3. 各 agent 在 worktree 中独立工作\n4. 合并分支并解决冲突\n5. 清理 worktree 和临时分支\n6. 创建统一 MR\n\n## Commands\n\n| 命令 | 功能 |\n|------|------|\n| `/workflow-status` | 查看当前 SDD 工作流状态 |\n\n## 动作词映射\n\n| 动作词 | 分支前缀 | Commit Type |\n|--------|---------|-------------|\n| 实现/新增/开发 | feat- | feat |\n| 修复/修 bug | fix- | fix |\n| 重构 | refactor- | refactor |\n| 优化 | perf- | perf |\n\n## 并行执行判断\n\n系统自动分析任务依赖：\n\n- **存在依赖** → 按顺序执行\n- **完全独立 且 任务数 >= 2** → 并行执行\n\n团队成员无需理解多 agent 机制，完全自动化。\n\n## 生成的文件结构\n\n```\nspecs/\n└── PROJ-12345/\n    ├── spec.md      # 功能规范\n    ├── plan.md      # 实现计划\n    └── tasks.md     # 任务清单\n```\n\n## 依赖\n\n- 文档读取工具（读取任务工单和 PRD）\n- git 插件（使用 GitLab push options 创建 MR）\n\n## 使用示例\n\n```bash\n# 实现新功能（贴任务工单链接 + PRD 链接）\n实现 https://your-project-system.example.com/story/detail/123456 https://your-docs.example.com/wiki/DOC001\n\n# 修复 Bug\n修复 https://your-project-system.example.com/story/detail/123456 https://your-docs.example.com/doc/DOC002\n\n# 省略动作词（默认 feat）\nhttps://your-project-system.example.com/story/detail/123456 https://your-docs.example.com/wiki/DOC003\n\n# 简写任务 ID\n修复 123456 https://your-docs.example.com/wiki/DOC004\n\n# 查看工作流状态\n/workflow-status\n```\n\n## 输入格式\n\n支持以下输入组合：\n\n| 格式 | 示例 |\n|------|------|\n| 动作词 + 任务工单链接 + PRD 链接 | `实现 https://your-project-system.example.com/.../123456 https://your-docs.example.com/wiki/xxx` |\n| 动作词 + 任务 ID + PRD 链接 | `修复 123456 https://your-docs.example.com/wiki/xxx` |\n| 任务工单链接 + PRD 链接 | `https://your-project-system.example.com/.../123456 https://your-docs.example.com/wiki/xxx` |\n\n**链接识别规则**：\n- 任务工单：项目管理系统的任务详情页 URL\n- PRD：文档系统的文档链接\n- 根据项目实际使用的系统调整 URL 匹配规则\n\n## 环境配置\n\n确保已配置：\n- 文档访问权限\n- Git 远程仓库（remote origin）\n",
        "plugins/git/README.md": "# Git Commands Plugin\n\nGit 工作流命令插件，提供三种提交方式：commit、commit+push、commit+push+MR。\n\n## 功能概览\n\n| 组件 | 触发方式 | 功能范围 | 智能前缀 |\n|------|----------|---------|----------|\n| `/git:commit` | 显式调用 | 仅 commit | ❌ 固定 feat/ |\n| `/git:commit-push` | 显式调用 | Commit + Push | ❌ 固定 feat/ |\n| `/git:commit-push-pr` | 显式调用 | Commit + Push + MR | ✅ 自动判断 |\n| `git-flow` Skill | 自然语言 | 根据用户意图决定 | ✅ 分析 diff |\n\n**说明**：\n- **显式调用**: 用户直接输入斜杠命令，如 `/git:commit`\n- **自然语言**: 用户用自然语言描述，如\"帮我提交代码\"\n- **智能前缀**: 根据 git diff 分析自动判断分支类型（feat/, fix/, docs/, 等）\n\n## 架构说明\n\n### 文件结构\n\n本插件采用三层架构设计：\n\n📋 **规范层** - [reference.md](skills/git-flow/reference.md)\n- 分支命名规则（feat/, fix/, refactor/, 等）\n- Commit 格式规范（含中英文正文结构）\n- Type 类型定义 & Description 生成原则\n- 任务 ID 提取（三级优先级策略）\n- 分支检查逻辑 & 智能分支前缀判断\n- 文件排除规则\n\n🎯 **触发层**\n- **Commands**: `/git:commit`, `/git:commit-push`, `/git:commit-push-pr`\n- **Skill**: `git-flow` (自然语言触发)\n\n### 调用流程图\n\n#### 调用关系\n```\n              用户交互\n                 │\n        ┌────────┴────────┐\n        │                 │\n   显式命令          自然语言\n  /git:xxx         \"帮我提交\"\n        │                 │\n        │        ┌────────┘\n        │        │ Skill触发\n        │        │ (SKILL.md)\n        └────┬───┘\n             │\n      ┌──────▼──────┐\n      │ Commands 层  │\n      │ 执行流程    │\n      └──────┬──────┘\n             │\n      ┌──────▼────────┐\n      │  规范层        │\n      │ reference.md  │\n      ├───────────────┤\n      │ • 分支命名    │\n      │ • Type定义    │\n      │ • Commit格式  │\n      │ • 任务ID提取  │\n      │ • 分支检查    │\n      └───────────────┘\n```\n\n## 提交规范\n\n详细规范参见：[skills/git-flow/reference.md](skills/git-flow/reference.md)\n\n**快速参考：**\n- 格式：`type(scope): 中文描述 #TASK-ID`\n- Type：feat, fix, docs, style, refactor, test, chore\n- 任务 ID：从分支名自动提取（TAP-xxx）\n\n## 命令对比\n\n### 三个命令的区别\n\n| 特性 | commit | commit-push | commit-push-pr |\n|------|--------|-------------|----------------|\n| Commit | ✅ | ✅ | ✅ |\n| Push | ❌ | ✅ | ✅ |\n| 创建 MR | ❌ | ❌ | ✅ |\n| 智能前缀 | ❌ | ❌ | ✅ |\n| Master 检查 | ✅ | ✅ | ✅ (含智能前缀) |\n\n**推荐使用场景**：\n- **commit**: 本地开发，还需多次提交\n- **commit-push**: 功能完成，需要备份到远程\n- **commit-push-pr**: 功能完成，立即创建合并请求\n\n### Skill vs Commands\n\n| 方面 | Skill (自然语言) | Commands (显式调用) |\n|------|-----------------|-------------------|\n| 触发方式 | \"帮我提交\"、\"commit 一下\" | `/git:commit` |\n| 灵活性 | 高（理解意图） | 低（固定流程） |\n| 适用场景 | 快速操作 | 精确控制 |\n| 共享逻辑 | ✅ 相同 | ✅ 相同 |\n\n## master 分支保护\n\n在 master 分支执行提交命令时：\n- ✅ 提供任务 ID/链接 → 自动创建工作分支\n- ❌ 未提供 → 中断并提示\n\n## 使用示例\n\n```bash\n# 显式调用命令\n/git:commit                # 仅提交\n/git:commit-push           # 提交并推送\n/git:commit-push-pr        # 提交、推送并创建 MR\n\n# 自然语言（触发 git-flow Skill）\n「帮我提交一下」\n「commit 代码」\n「提交并推送」\n「提交并创建 MR」\n```\n\n## 依赖\n\n### 系统要求\n- Git 命令行工具（≥ 2.0）\n- GitLab 仓库配置（remote origin）\n\n### 内部依赖\n- **规范文档**: [reference.md](skills/git-flow/reference.md) - 完整规范 + 执行逻辑\n- **触发配置**: [SKILL.md](skills/git-flow/SKILL.md)\n\n### 外部依赖（可选）\n- 飞书任务管理（任务链接提取）\n- Jira 集成（TAP-xxx 任务 ID）\n\n## 工作原理\n\n### 任务 ID 提取策略（三级优先级）\n\n1. **优先级 1**: 从分支名自动提取\n   - 正则匹配: `TAP-[0-9]+`\n   - 示例: `feat/TAP-85404-user-profile` → `TAP-85404`\n\n2. **优先级 2**: 从用户输入提取\n   - 飞书链接: `https://*.feishu.cn/**`\n   - Jira 链接: `https://xindong.atlassian.net/browse/TAP-xxxxx`\n   - 直接 ID: `TAP-xxxxx`\n\n3. **优先级 3**: 询问用户\n   - 使用 AskUserQuestion 工具\n   - 提供 \"提供任务 ID\" 或 \"使用 #no-ticket\" 选项\n\n### 智能分支前缀判断（仅 commit-push-pr）\n\n分析 `git diff --stat` 和 `git diff` 内容，按优先级判断：\n\n1. **docs/**: 仅修改文档文件（*.md, *.txt）\n2. **test/**: 仅修改测试文件（*_test.go, *.test.js）\n3. **fix/**: 包含关键词 \"fix\"、\"修复\"、\"bug\"\n4. **feat/**: 新增文件或包含 \"feat\"、\"新增\"\n5. **refactor/**: 包含 \"refactor\"、\"重构\"\n6. **perf/**: 包含 \"perf\"、\"优化\"\n7. **chore/**: 配置文件、依赖更新（默认）\n\n### Master 分支保护机制\n\n所有命令检测到 master/main 分支时：\n1. 检查用户输入中是否有任务 ID/链接\n2. 如果有：询问分支描述，创建工作分支\n3. 如果没有：中断并提示用户提供任务链接/ID\n\n防止直接在 master 分支提交。\n\n### Commit 信息格式\n\n```\ntype(scope): 中文描述 #TASK-ID\n\n## 改动内容\n- 列出主要改动点\n\n## 影响面\n- 说明影响的模块、向后兼容性、风险评估\n\nGenerated-By: Claude Code <https://claude.ai/code>\n\nCo-Authored-By: Claude <noreply@anthropic.com>\n```\n\n**关键规则**：\n- 标题与正文空一行\n- `## 改动内容` 和 `## 影响面` 是必填项\n- `## 影响面` 与 `Generated-By` 空一行\n- `Generated-By` 与 `Co-Authored-By` 空一行\n- 两行签名必须放在正文末尾\n\n**严格禁止**：\n- ❌ `Co-Authored-By: Claude Sonnet 4.5 <...>` - 禁止带模型版本\n- ❌ `Co-Authored-By: Claude Opus 4.5 <...>` - 禁止带模型版本\n",
        "plugins/sync/README.md": "# Sync Plugin\n\n项目配置同步插件，提供 MCP 和开发环境配置同步功能。\n\n## 快速开始\n\n### 新成员环境配置（推荐）\n\n一键配置开发环境：\n\n```bash\n/sync:basic\n```\n\n这个命令会自动完成：\n- ✅ 配置 MCP 服务器（context7 + sequential-thinking）\n- ✅ 启用自动更新钩子（Marketplace autoUpdate）+ CLI 工具检测\n- ✅ 同步配置到 Cursor IDE（git-flow rules + commands）\n- ✅ 同步 GitLab Merge Request 默认模板\n- ✅ 同步 Claude Skills（grafana-dashboard-design）\n- ✅ 配置 Status Line（项目/分支/Context/模型/Worktree）\n- ✅ 启用 TapTap Plugins（spec/sync/git/quality）\n- 📎 可选：`--with-spec` 同步 Spec Skills 到 Cursor\n\n### 飞书 MCP 配置（可选）\n\n如果团队使用飞书文档 MCP：\n\n```bash\n/sync:mcp-feishu https://open.feishu.cn/mcp/stream/mcp_xxxxx\n```\n\n如果团队使用飞书项目 MCP：\n\n```bash\n/sync:mcp-feishu-project https://project.feishu.cn/mcp_server/v1?mcpKey=xxx&projectKey=yyy&userKey=zzz\n```\n\n**功能：**\n- ✅ 同时配置到 Claude Code 和 Cursor\n- ✅ 验证连接状态\n- ✅ 避免重复配置\n\n### Grafana MCP 配置（可选）\n\n配置 Grafana MCP 以查询 Dashboard、Prometheus/Loki 数据源：\n\n```bash\n/sync:mcp-grafana <username> <password>\n```\n\n**功能：**\n- ✅ 自动安装 Golang 和 mcp-grafana（如果未安装）\n- ✅ 同时配置到 Claude Code 和 Cursor\n- ✅ 详细的安装日志\n\n**Cursor 用户**：如果没有配置 Claude Code，可以使用 `/sync-mcp-grafana` 命令（需先运行 `/sync:cursor` 同步命令模板）\n\n## 使用场景\n\n### 场景 1: 新成员加入团队\n\n1. 克隆代码仓库\n2. 运行 `/sync:basic` 一键配置环境\n3. （可选）运行 `/sync:mcp-feishu <URL>` 配置飞书\n4. 重启 IDE\n\n**效果：**\n- ✅ MCP 服务器配置完成，可以自动获取最新文档\n- ✅ 自动更新机制启用（Marketplace autoUpdate），更新插件后无需手动重装\n- ✅ Cursor IDE 配置同步，两个工具无缝切换\n\n### 场景 2: 学习新框架\n\n在对话中提到 GitHub 仓库或框架名称，context7 自动获取最新文档：\n\n```\n用户: 我想了解 Next.js 14 的 App Router 实现\nAI: 💡 正在使用 context7 获取 Next.js 的最新文档...\n    根据最新文档，App Router 是...\n```\n\n### 场景 3: 插件开发\n\n更新插件 → 重启会话 → 自动更新机制生效（前提：已运行 `/sync:basic`）\n\n**效果：**\n- 🔧 **开发者**：无需手动 uninstall + install\n- 📦 **团队成员**：git pull 后自动获取最新插件\n\n## 高级用法\n\n如果需要单独执行某个配置步骤：\n\n### （可选）启用 git pre-commit：自动同步 git-flow snippets\n\n当你修改 `plugins/git/skills/git-flow/snippets/` 并准备提交时，可启用本仓库的版本化 `pre-commit` hook，自动运行同步脚本并暂存同步产物，避免漏提交。\n\n启用方式（一次性）：\n\n```bash\ngit config core.hooksPath .githooks\nchmod +x .githooks/pre-commit\n```\n\n详细说明见：`.githooks/README.md`\n\n### `/sync:mcp`\n\n配置 context7 和 sequential-thinking MCP 服务器。\n\n```bash\n/sync:mcp\n```\n\n**功能：**\n- 同步到 `~/.claude.json`（Claude Code 用户级配置）\n- 同步到 `~/.cursor/mcp.json`（Cursor 用户级配置）\n- 跳过已存在的配置，不覆盖用户自定义内容\n\n**MCP 说明：**\n- **context7**: 拉取最新的库文档和代码示例（AI 自动调用）\n- **sequential-thinking**: 提供结构化问题解决（AI 自动调用）\n\n### `/sync:hooks`\n\n配置 SessionStart 钩子，启用自动更新（Marketplace autoUpdate）。\n\n```bash\n/sync:hooks\n```\n\n**功能：**\n- 同步 plugin hooks 配置到项目级 `.claude/hooks/hooks.json`\n- 启用 SessionStart 自动更新（autoUpdate）\n- 智能合并现有 hooks 配置\n\n**效果：**\n- 会话启动时自动启用 marketplace 插件自动更新（autoUpdate）\n- 会话启动时自动检测并尝试安装 `gh`/`glab`，并提示认证环境变量配置方式\n- 支持本地插件开发和团队插件更新\n\n**管理 hooks：**\n- 禁用：删除 `.claude/hooks/hooks.json` 中的 SessionStart 配置\n- 卸载：直接删除 `.claude/hooks/hooks.json` 文件\n\n### `/sync:cursor`\n\n同步配置到 Cursor IDE。\n\n```bash\n/sync:cursor\n```\n\n**功能：**\n- 同步 Git Flow Rules 到 `.cursor/rules/git-flow.mdc`\n- 同步 Spec Skills 规则到 `.cursor/rules/`（需 `/sync:basic --with-spec`）\n  - `doc-auto-sync.mdc` - AI 改动模块代码时自动同步文档（alwaysApply: true）\n  - `module-discovery.mdc` - 开发前必须读取模块索引定位目标（alwaysApply: true）\n  - `generate-module-map.mdc` - 生成模块索引的 prompt（alwaysApply: false）\n  - 已跳过：`implementing-from-task`、`merging-parallel-work`（测试中）\n- 同步 Git Commands 到 `.cursor/commands/`\n- 直接覆盖（每次重新生成最新内容）\n- 自动删除旧的 `sync-claude-plugin.mdc` 文件\n\n## 自动触发 Skills\n\n插件包含两个自动触发的 skills，无需手动调用：\n\n### `context7`\n\n当检测到 GitHub URL 或询问开源库时，自动使用 context7 MCP 获取最新文档。\n\n**触发条件：**\n- 消息包含 GitHub URL（`github.com`）\n- 询问特定框架/库的使用方法\n- 需要最新版本的 API 参考\n\n**行为：**\n- 自动检测需求\n- 告知用户正在使用 context7（透明提示）\n- 基于最新文档提供准确回答\n\n**详细文档：**\n- [context7 使用指南](skills/context7/context7-usage.md)\n\n### `mcp-feishu`\n\n当用户提供飞书文档 MCP URL 并请求配置时触发，自动同时配置到 Claude Code 和 Cursor。\n\n### `mcp-feishu-project`\n\n当用户提供飞书项目 MCP URL 或请求配置飞书项目 MCP 时触发，自动同时配置到 Claude Code 和 Cursor。支持查询项目任务、工作项、需求等。\n\n## Commands 列表\n\n| 命令 | 说明 | 推荐度 |\n|------|------|--------|\n| `/sync:basic` | 一键配置开发环境 | ⭐ 推荐 |\n| `/sync:mcp-feishu <URL>` | 配置飞书文档 MCP | 可选 |\n| `/sync:mcp-feishu-project <URL>` | 配置飞书项目 MCP | 可选 |\n| `/sync:mcp-grafana <user> <pass>` | 配置 Grafana MCP（自动安装依赖） | 可选 |\n| `/sync:mcp` | 仅配置 MCP 服务器 | 高级 |\n| `/sync:hooks` | 仅配置自动更新钩子（autoUpdate） | 高级 |\n| `/sync:cursor` | 仅同步到 Cursor | 高级 |\n| `/sync:statusline` | 配置 Status Line（状态栏） | 高级 |\n| `/sync:git-cli-auth` | 检测并配置 gh/glab 认证 | 高级 |\n\n**Cursor 专用命令**（通过 `/sync:cursor` 同步到项目）：\n\n| 命令 | 说明 |\n|------|------|\n| `/sync-mcp-grafana <user> <pass>` | 配置 Grafana MCP 到 Cursor |\n\n## MCP 懒加载配置\n\n当配置了多个 MCP 服务器时，所有工具描述会占用大量 context。Claude Code 支持懒加载配置，超过阈值时延迟加载 MCP 工具描述。\n\n### 配置方法\n\n在 `~/.claude/settings.json` 或项目级 `.claude/settings.json` 中添加：\n\n```json\n{\n  \"env\": {\n    \"ENABLE_TOOL_SEARCH\": \"auto:1\"\n  }\n}\n```\n\n### 参数说明\n\n| 值 | 行为 |\n|---|---|\n| `auto` | 默认值，超过 10% context 时延迟加载 |\n| `auto:1` | 超过 1% context 时延迟加载（推荐） |\n| `auto:N` | 超过 N% context 时延迟加载 |\n| `true` | 始终启用工具搜索 |\n| `false` | 禁用，所有 MCP 工具预加载 |\n\n### 工作原理\n\n1. 会话启动时计算 MCP 工具描述占 context 的百分比\n2. 超过阈值时，工具描述不预加载\n3. 需要使用时通过 MCPSearch 工具按需发现\n\n### 验证\n\n1. 配置后重启 Claude Code\n2. 配置多个 MCP 后观察是否有工具被延迟加载\n3. 使用 MCP 工具时会先通过 MCPSearch 发现\n\n## 配置文件位置\n\n### Claude Code\n- `~/.claude.json` - MCP 配置（context7 + sequential-thinking + 飞书/Grafana，用户级）\n- `.claude/hooks/hooks.json` - Hooks 配置（项目级）\n- `~/.claude/settings.json` - 用户级配置（MCP 懒加载等）\n\n### Cursor\n- `~/.cursor/mcp.json` - MCP 配置（context7 + sequential-thinking + 飞书/Grafana，全局）\n- `.cursor/rules/git-flow.mdc` - Git 工作流规范\n- `.cursor/rules/doc-auto-sync.mdc` - 模块文档自动同步规则（--with-spec）\n- `.cursor/rules/module-discovery.mdc` - 模块发现规则（--with-spec）\n- `.cursor/rules/generate-module-map.mdc` - 模块索引生成 prompt（--with-spec）\n- `.cursor/commands/git-*.md` - Git 命令\n- `.cursor/commands/sync-mcp-grafana.md` - Grafana MCP 配置命令\n- `~/.claude/scripts/statusline.sh` - Status Line 脚本\n\n### Golang & mcp-grafana（由 `/sync:mcp-grafana` 安装）\n- `~/go-sdk/current/` - Golang 安装目录\n- `~/go/bin/mcp-grafana` - mcp-grafana 二进制\n- `~/.claude/plugins/logs/ensure-golang-*.log` - 安装日志\n\n## 配置模板\n\n插件提供了标准的 MCP 配置模板，位于 `skills/mcp-templates/` 目录：\n\n- `context7.json` - context7 MCP 配置\n- `sequential-thinking.json` - sequential-thinking MCP 配置\n\n这些模板会被 `/sync:mcp` 和 `/sync:basic` 命令使用，确保团队成员使用统一的配置格式。\n\n## 自动更新机制（Marketplace autoUpdate）\n\n### 工作原理\n\n配置 SessionStart hook 后：\n\n1. **会话启动时**：自动执行 `set-auto-update-plugins.sh`\n2. **脚本行为**：\n   - 自动启用 marketplace `taptap-plugins` 的 `autoUpdate=true`\n   - 写入位置：`~/.claude/plugins/known_marketplaces.json`\n3. **效果**：后续插件更新将由 Claude 的 marketplace 自动更新机制接管（无需手动配置）\n4. **额外行为**：执行 `ensure-cli-tools.sh`（macOS/Linux）检测 `gh`/`glab` 状态并提示认证配置\n\n### 脚本位置\n\n- 自动更新脚本：`.claude/hooks/scripts/set-auto-update-plugins.sh`\n- CLI 工具检测：`.claude/hooks/scripts/ensure-cli-tools.sh`\n- Hook 配置：`.claude/hooks/hooks.json`\n\n### 自动发现插件\n\n脚本会自动发现所有本地插件，无需手动维护插件列表：\n- ✅ 新增插件自动生效\n- ✅ 删除插件自动清理\n- ✅ 无需手动更新配置\n\n## 相关文档\n\n- [context7 使用指南](skills/context7/context7-usage.md)\n- [飞书 MCP 配置指南](skills/mcp-feishu/mcp-http-configuration.md)\n- [Plugin 开发指南](../../docs/plugin-guidelines.md)\n- [Skill 编写指南](../../docs/skill-guidelines.md)\n\n## 版本历史\n\n- **v0.1.13** - 镜像 git 插件 no-ticket 按需配置改动到 cursor-templates；Cursor 命令模板新增 `GIT_ALLOW_NO_TICKET` 环境变量上下文；git-flow.mdc 新增仓库级配置段；更新 snippets（02-extract-task-id.md、03-commit-format.md）匹配 git 插件规则\n- **v0.1.12** - 重构 `/sync:basic` 为并行 agent 架构（Phase 0 路径解析 + 6 个命名 subagent）；命令执行行数从 ~550 精简至 ~150（Phase 0: ≤2 Bash 调用）；新增 4 个辅助脚本（ensure-mcp.sh、ensure-plugins.sh、ensure-statusline.sh、ensure-tool-search.sh）；新增 agents/ 目录包含 6 个专用 subagent；更新 hooks、mcp-feishu、mcp-feishu-project、mcp-grafana 命令的错误处理和路径解析；更新 hooks.json 配置结构；更新 mcp-feishu 和 mcp-feishu-project skill 定义\n- **v0.1.11** - MCP 配置（context7 + sequential-thinking）改为写入用户级文件（`~/.claude.json` + `~/.cursor/mcp.json`），跨项目复用；新增 `/sync:statusline` 命令（配置状态栏：项目/分支/Context/模型/Worktree）；`/sync:basic` 新增 Status Line 配置阶段、TapTap Plugins 自动启用、MCP 懒加载配置；Spec Skills 改为 `--with-spec` 可选参数；ensure-cli-tools 改为后台静默运行；新增 MCP 懒加载配置文档；清理 statusline.sh debug 输出\n- **v0.1.10** - 新增 `/sync:mcp-feishu-project` 命令，配置飞书项目 MCP（project.feishu.cn）；新增 `mcp-feishu-project` skill 自动触发\n- **v0.1.9** - 新增 `/sync:mcp-grafana` 命令（自动安装 Golang 和 mcp-grafana）；新增 `--dev` 开发模式参数；新增 Claude Skills 同步（`grafana-dashboard-design`）；新增 Cursor 命令 `sync-mcp-grafana.md`\n- **v0.1.8** - 重构 Spec Skills 同步：删除单一索引文件 `sync-claude-plugin.mdc`，改为独立 `.mdc` 规则文件（`doc-auto-sync.mdc`、`module-discovery.mdc`、`generate-module-map.mdc`）；过滤测试中的 skills\n- **v0.1.6** - 重构 hooks 架构为项目相对路径；新增自动更新脚本 (`set-auto-update-plugins.sh`)；新增 git-flow snippets 自动同步脚本和 pre-commit hook；移除 Windows 支持；脚本日志增强\n- **v0.1.5** - `/sync:basic` 增加 GitLab MR 默认模板同步；SessionStart hooks 增加 gh/glab 检测脚本；新增 `/sync:git-cli-auth`\n- **v0.1.4** - 新增 Claude Plugin Skills 索引同步（`sync-claude-plugin.mdc`）\n- **v0.1.3** - 新增 Cursor 模板直接复制方式\n- **v0.1.0** - 命令简化、自动发现插件\n- **v0.0.1** - 初始版本\n",
        "plugins/quality/README.md": "# quality Plugin\n\n> AI 驱动的代码质量检查插件，支持多语言、多维度、高并行的自动化代码审查\n\n## 简介\n\n`quality` 插件为 Claude Code 提供智能代码审查能力，使用 **9 个并行 AI Agent** 对代码变更进行全方位检查。通过置信度评分和冗余确认机制，有效减少误报和漏报。\n\n### 核心特性\n\n- **🚀 高性能并行架构**: 9 个 Agent 同时执行，审查速度 ≈ 单个最慢 Agent 的时间\n- **🎯 置信度过滤**: 基于 0-100 评分，阈值 80，自动过滤低置信度问题\n- **🔄 冗余确认机制**: 每个维度 2 个 Agent 独立审查，同时发现的问题置信度 +20\n- **🌐 多语言支持**: 支持 Go/Java/Python/Kotlin/Swift/TypeScript 等语言\n- **📋 智能规范检查**: 自动检测项目中的 CLAUDE.md/CONTRIBUTING.md，无则跳过\n- **🔍 四维度全覆盖**: Bug 检测、代码质量、安全检查、性能分析\n\n## 架构设计\n\n### 9 Agent 并行架构\n\n```\n                                /review 命令\n                                      |\n                    +-----------------+-----------------+\n                    |                 |                 |\n            Pre-check         Context Collection   Parallel Review\n                |                     |                 |\n                |                     |        +--------+--------+\n                |                     |        |                 |\n                |                     |    规范检查(可选)   4 维度并行\n                |                     |        |                 |\n                |                     |  project-standards   Bug × 2\n                |                     |    -reviewer        质量 × 2\n                |                     |                     安全 × 2\n                |                     |                     性能 × 2\n                |                     |                        |\n                +---------------------+------------------------+\n                                      |\n                            Verification & Report\n                                      |\n                          终端输出 / GitLab MR 评论\n```\n\n### Agent 职责分工\n\n| Agent | 模型 | 职责 | 审查重点 |\n|-------|------|------|---------|\n| **规范检查（可选）** | | | |\n| project-standards-reviewer | Sonnet 4.5 | 项目规范检查 | CLAUDE.md/CONTRIBUTING.md 规范遵循 |\n| **Bug 检测（2× 冗余）** | | | |\n| bug-detector-1 | Opus 4.5 | Bug 检测 #1 | 逻辑错误、nil/null 指针、资源泄漏、死锁 |\n| bug-detector-2 | Opus 4.5 | Bug 检测 #2 | 同上，独立分析减少漏报 |\n| **代码质量（2× 冗余）** | | | |\n| code-quality-analyzer-1 | Sonnet 4.5 | 代码质量 #1 | 可读性、命名规范、代码结构、复杂度 |\n| code-quality-analyzer-2 | Sonnet 4.5 | 代码质量 #2 | 同上，独立分析减少漏报 |\n| **安全检查（2× 冗余）** | | | |\n| security-analyzer-1 | Opus 4.5 | 安全检查 #1 | SQL 注入、XSS、敏感信息泄漏、弱加密 |\n| security-analyzer-2 | Opus 4.5 | 安全检查 #2 | 同上，独立分析减少漏报 |\n| **性能分析（2× 冗余）** | | | |\n| performance-analyzer-1 | Sonnet 4.5 | 性能分析 #1 | N+1 查询、循环优化、内存分配、算法复杂度 |\n| performance-analyzer-2 | Sonnet 4.5 | 性能分析 #2 | 同上，独立分析减少漏报 |\n\n### 置信度评分机制\n\n```\n基础置信度（0-100）\n  ↓\n判断是否有冗余确认\n  ↓ 是\n+20 冗余加成\n  ↓\n过滤阈值：80\n  ↓\n≥80: 高置信度（直接报告）\n60-79: 中等置信度（标记需人工确认）\n<60: 自动过滤\n```\n\n**冗余加成规则**：\n- bug-detector-1 + bug-detector-2 都发现 → +20\n- code-quality-analyzer-1 + code-quality-analyzer-2 都发现 → +20\n- security-analyzer-1 + security-analyzer-2 都发现 → +20\n- performance-analyzer-1 + performance-analyzer-2 都发现 → +20\n\n## 快速开始\n\n### 安装\n\n插件会自动加载（通过 marketplace.json），无需手动安装。\n\n### 基础使用\n\n#### 1. 审查当前分支的变更\n\n```bash\n# 在项目根目录\n/review\n```\n\n这将自动检测主分支（main/master）并审查当前分支的所有变更。\n\n#### 2. 审查特定 Merge Request\n\n```bash\n/review --mr 123\n```\n\n#### 3. 审查特定文件\n\n```bash\n/review app/regulation/internal/service/consumemessage/consume.go\n```\n\n### 使用示例\n\n#### 场景 1: 日常代码审查（Go 项目）\n\n```bash\n$ /review\n\n# 🔍 代码审查报告\n\n## 📊 总览\n\n- **审查范围**: feat-TAP-85924-ai-llm-channel-optimize → master\n- **变更文件**: 5 个文件\n- **涉及语言**: Go\n- **发现问题**: 3 个（高置信度：2 个）\n- **审查维度**: Bug 检测、代码质量、安全检查、性能分析\n\n---\n\n## 🐛 Bug 检测 (Bug Detection)\n\n### Go\n\n#### ⚠️ High Confidence (≥80)\n\n**app/regulation/internal/service/consumemessage/consume.go:45** `90/100`\n```go\nresult, _ := db.Query(\"SELECT * FROM users WHERE id = ?\", userID)\n```\n**问题**: 忽略了数据库查询的错误返回值，可能导致程序在数据库故障时崩溃\n**建议**: 始终检查并处理 error 返回值\n```go\nresult, err := db.Query(\"SELECT * FROM users WHERE id = ?\", userID)\nif err != nil {\n    return fmt.Errorf(\"查询用户失败: %w\", err)\n}\ndefer result.Close()\n```\n**检测来源**: bug-detector-1 + bug-detector-2（冗余确认）\n\n---\n\n## ⚡ 性能分析 (Performance Analysis)\n\n### Go\n\n#### ⚠️ High Confidence (≥80)\n\n**app/regulation/internal/service/consumemessage/consume.go:78** `85/100`\n```go\nfor _, user := range users {\n    db.Query(\"SELECT * FROM orders WHERE user_id = ?\", user.ID)\n}\n```\n**问题**: N+1 查询问题，循环中执行数据库查询会导致性能瓶颈\n**影响**: 当用户数量为 1000 时，将执行 1001 次查询（1 + 1000）\n**建议**: 使用 IN 查询或 JOIN 一次性获取所有数据\n```go\nuserIDs := make([]int, len(users))\nfor i, user := range users {\n    userIDs[i] = user.ID\n}\n// 使用 IN 查询\nquery := \"SELECT * FROM orders WHERE user_id IN (?)\"\ndb.Query(query, userIDs)\n```\n**检测来源**: performance-analyzer-1 + performance-analyzer-2（冗余确认）\n\n---\n\n## ✅ 审查结论\n\n### 高优先级修复（置信度 ≥80）\n- [ ] consume.go:45 - 未检查数据库查询错误\n- [ ] consume.go:78 - N+1 查询性能问题\n\n### 统计信息\n- **Bug 检测**: 1 个问题（高置信度：1）\n- **代码质量**: 0 个问题\n- **安全检查**: 0 个问题\n- **性能分析**: 1 个问题（高置信度：1）\n```\n\n#### 场景 2: 跨语言项目审查\n\n```bash\n$ /review\n\n# 审查范围包含 Go + TypeScript\n\n## 🐛 Bug 检测\n\n### Go\n[Go 相关问题]\n\n### TypeScript\n[TypeScript 相关问题]\n\n## 📐 代码质量\n\n### Go\n[Go 相关问题]\n\n### TypeScript\n[TypeScript 相关问题]\n```\n\n问题按语言分组展示，方便不同团队协作。\n\n#### 场景 3: 智能规范检查\n\n```bash\n# 项目根目录存在 CLAUDE.md\n\n$ /review\n\n## 📋 项目规范检查 (Project Standards)\n\n> 根据 CLAUDE.md 进行检查\n\n### 规范文件: CLAUDE.md\n\n#### ⚠️ High Confidence (≥80)\n\n**app/regulation/internal/service/consume.go:23** `85/100`\n\n**问题**: 提交信息缺少任务 ID，违反 Git 工作流规范\n**规范引用**: CLAUDE.md - \"Git 工作流规范 - 提交必须包含 #TAP-xxxxx\"\n**建议**: 在提交信息中添加任务 ID，格式：`feat: 实现消息消费 #TAP-85924`\n```\n\n## 支持的语言\n\n### v0.0.1（当前版本）\n\n| 语言 | 支持状态 | Bug 检测 | 代码质量 | 安全检查 | 性能分析 |\n|------|---------|---------|---------|---------|---------|\n| Go | ✅ 完整支持 | ✅ | ✅ | ✅ | ✅ |\n| Java | 🚧 基础支持 | ✅ | ⚠️ | ⚠️ | ⚠️ |\n| Python | 🚧 基础支持 | ✅ | ⚠️ | ⚠️ | ⚠️ |\n| Kotlin | 🚧 基础支持 | ✅ | ⚠️ | ⚠️ | ⚠️ |\n| Swift | 🚧 基础支持 | ✅ | ⚠️ | ⚠️ | ⚠️ |\n| TypeScript | 🚧 基础支持 | ✅ | ⚠️ | ⚠️ | ⚠️ |\n\n- ✅ 完整支持：包含语言特定的检查规则和示例\n- 🚧 基础支持：使用通用规则，部分语言特性可能未覆盖\n- ⚠️ 待完善：占位文件已创建，详细规则将在后续版本添加\n\n### v0.0.2+（规划中）\n\n更多语言支持：Rust、Ruby、C++、C#、PHP、C 等\n\n详见：[docs/supported-languages.md](docs/supported-languages.md)\n\n## 审查维度\n\n### 1. 🐛 Bug 检测\n\n检测潜在的运行时错误和逻辑缺陷：\n\n**Go 示例**：\n- Error handling 缺失或不当\n- Nil pointer dereference\n- Goroutine 泄漏\n- Defer 陷阱（循环中的 defer）\n- Mutex 死锁\n- Range 变量捕获问题\n\n**通用检测**：\n- 逻辑错误\n- 空指针/空引用\n- 数组越界\n- 资源泄漏\n- 并发问题\n\n### 2. 📐 代码质量\n\n评估代码的可读性、可维护性和最佳实践：\n\n- 命名规范（变量、函数、类型）\n- 函数设计（长度、职责单一性）\n- 代码组织（包/模块结构）\n- 注释规范（必要性和清晰度）\n- Magic number 和硬编码值\n- 代码重复（DRY 原则）\n\n### 3. 🔒 安全检查\n\n识别安全漏洞和风险：\n\n- SQL 注入\n- 命令注入\n- 路径遍历\n- XSS（跨站脚本）\n- CSRF（跨站请求伪造）\n- 敏感信息泄漏（日志、错误信息）\n- 弱加密算法\n- 不安全的随机数生成\n\n### 4. ⚡ 性能分析\n\n发现性能瓶颈和优化机会：\n\n- 数据库 N+1 查询\n- 算法复杂度问题\n- 不必要的内存分配\n- 字符串拼接低效\n- 锁竞争和锁粒度\n- 并发调度优化\n- 缓存缺失\n\n详见：[skills/code-reviewing/review-dimensions.md](skills/code-reviewing/review-dimensions.md)\n\n## 配置\n\n### 基础配置（无需额外配置）\n\n插件使用本地 git 命令获取代码变更，无需额外配置即可使用：\n\n```bash\n# 自动检测主分支（main/master）并获取差异\ngit diff <base_branch>...HEAD\n```\n\n### 高级配置（可选）\n\n#### 1. 自定义置信度阈值\n\n在项目根目录创建 `.claude/plugins/quality/config.yaml`：\n\n```yaml\nconfidence_threshold: 80  # 默认值\nshow_medium_confidence: true  # 是否显示中等置信度问题（60-79）\n```\n\n#### 2. 自定义目标分支\n\n```yaml\ndefault_target_branch: master  # 默认值\n# 或使用环境变量\n# TARGET_BRANCH: develop\n```\n\n#### 3. GitLab 集成（v0.0.3+）\n\n详见：[docs/gitlab-integration.md](docs/gitlab-integration.md)\n\n## 工作原理\n\n### 6 阶段工作流\n\n```\n1. Pre-check\n   ├─ 检查 git 状态\n   ├─ 确认是否在 git 仓库中\n   └─ 获取当前分支信息\n\n2. Context Collection\n   ├─ 检测项目规范文件（CLAUDE.md, CONTRIBUTING.md）\n   ├─ 获取代码变更（git diff）\n   ├─ 识别变更的编程语言\n   └─ 统计变更文件数量\n\n3. Parallel Review（9 个 Agent 并行执行）\n   ├─ project-standards-reviewer（如果有规范文件）\n   ├─ bug-detector-1, bug-detector-2\n   ├─ code-quality-analyzer-1, code-quality-analyzer-2\n   ├─ security-analyzer-1, security-analyzer-2\n   └─ performance-analyzer-1, performance-analyzer-2\n\n4. Verification\n   ├─ 合并 9 个 Agent 的结果\n   ├─ 检测重复问题（同文件+同行+相似描述）\n   ├─ 应用冗余加成（+20 置信度）\n   └─ 过滤低置信度问题（<60）\n\n5. Report Generation\n   ├─ 按语言分组\n   ├─ 按维度分类\n   ├─ 生成统计信息\n   └─ 应用报告模板\n\n6. Output\n   └─ 终端 Markdown 输出（v0.0.1）\n   └─ GitLab MR 评论（v0.0.3+，可选）\n```\n\n### 语言识别\n\n自动识别代码变更中的编程语言：\n\n```bash\n# 基于文件扩展名\n.go      → Go\n.java    → Java\n.py      → Python\n.kt      → Kotlin\n.swift   → Swift\n.ts, .tsx, .vue → TypeScript\n```\n\n每个 Agent 会自动引用对应的语言检查规则（`skills/language-checks/{language}-checks.md`）。\n\n### 置信度计算示例\n\n```\n# 示例：bug-detector-1 发现一个问题\n\n1. Agent 自评置信度: 75（基于代码上下文、模式匹配等）\n\n2. 检查是否有冗余确认:\n   - bug-detector-2 也发现了相同问题（同文件+同行+相似描述）\n   - 应用冗余加成: 75 + 20 = 95\n\n3. 置信度过滤:\n   - 95 ≥ 80 → 高置信度，直接报告\n   - 标记为\"冗余确认\"\n\n4. 输出:\n   **文件路径:行号** `95/100`\n   **检测来源**: bug-detector-1 + bug-detector-2（冗余确认）\n```\n\n## 适用场景\n\n### 1. Merge Request 代码审查\n\n```bash\n# 在 MR 分支上\n/review\n\n# 自动审查相对于 master 的所有变更\n# 发现潜在问题并生成报告\n```\n\n### 2. 日常开发自查\n\n```bash\n# 提交代码前自查\ngit add .\n/review\n\n# 快速发现问题，避免提交有缺陷的代码\n```\n\n### 3. 项目规范遵循检查\n\n```bash\n# 项目有 CLAUDE.md 规范文件\n/review\n\n# 自动检查代码是否遵循项目规范\n# 例如：Git 提交格式、命名规范、代码组织等\n```\n\n### 4. 跨部门协作\n\n```bash\n# 多语言项目（如 Mono Repo）\n/review\n\n# 报告按语言分组\n# Server 团队查看 Go/Java 问题\n# Android 团队查看 Kotlin 问题\n# iOS 团队查看 Swift 问题\n# Web 团队查看 TypeScript 问题\n```\n\n## 目录结构\n\n```\n.claude/plugins/quality/\n├── .claude-plugin/\n│   └── plugin.json              # 插件元数据\n├── commands/\n│   └── review.md                # /review 命令定义\n├── agents/                      # 9 个 Agent 定义\n│   ├── project-standards-reviewer.md\n│   ├── bug-detector-1.md\n│   ├── bug-detector-2.md\n│   ├── code-quality-analyzer-1.md\n│   ├── code-quality-analyzer-2.md\n│   ├── security-analyzer-1.md\n│   ├── security-analyzer-2.md\n│   ├── performance-analyzer-1.md\n│   └── performance-analyzer-2.md\n├── skills/\n│   ├── code-reviewing/          # 通用审查 Skill\n│   │   ├── SKILL.md\n│   │   ├── review-dimensions.md\n│   │   └── confidence-scoring.md\n│   └── language-checks/         # 语言特定检查规则\n│       ├── go-checks.md         # ✅ 完整\n│       ├── java-checks.md       # 🚧 占位\n│       ├── python-checks.md     # 🚧 占位\n│       ├── kotlin-checks.md     # 🚧 占位\n│       ├── swift-checks.md      # 🚧 占位\n│       └── typescript-checks.md # 🚧 占位\n├── templates/\n│   ├── review-report.md         # 终端报告模板\n│   └── issue-comment.md         # GitLab MR 评论模板\n├── docs/\n│   ├── supported-languages.md   # 支持的语言详情\n│   ├── gitlab-integration.md    # GitLab 集成指南\n│   └── future-roadmap.md        # 未来路线图\n└── README.md                    # 本文档\n```\n\n## 常见问题\n\n### Q1: 为什么需要 9 个 Agent？\n\n**答**:\n1. **并行性能**: 9 个 Agent 同时执行，总耗时 ≈ 单个最慢 Agent\n2. **维度专业化**: 每个维度有专门的 Agent，审查更深入\n3. **冗余确认**: 每个维度 2 个 Agent 独立审查，减少漏报\n4. **规范检查**: 智能检测项目规范，有则检查，无则跳过\n\n对比串行执行：\n- 串行：Agent1 → Agent2 → ... → Agent9（耗时累加）\n- 并行：Agent1 + Agent2 + ... + Agent9（耗时 ≈ max(Agent[i])）\n\n### Q2: 置信度评分如何计算？\n\n**答**: 置信度由 Agent 基于以下因素自评（0-100）：\n\n- **代码模式匹配度**: 问题模式是否明确匹配已知缺陷\n- **上下文完整性**: 代码上下文是否足够判断\n- **语言特定规则**: 是否符合语言特定的最佳实践\n- **静态分析确定性**: 问题是否可以静态确定（非推测）\n\n**冗余加成**: 当 2 个同类 Agent 都发现相同问题时 +20\n\n### Q3: 如何处理误报？\n\n**答**:\n1. **置信度阈值**: 默认 80，过滤大部分误报\n2. **冗余确认**: 2 个 Agent 同时发现的问题更可靠\n3. **中等置信度标记**: 60-79 的问题标记为\"需人工确认\"\n4. **持续优化**: 根据反馈调整 Agent prompt 和检查规则\n\n如果发现误报，请在项目 issues 中反馈，帮助我们改进。\n\n### Q4: 为什么有些语言只有基础支持？\n\n**答**: v0.0.1 优先完成 Go 语言的完整支持（包含详细的检查规则和示例）。其他语言：\n\n- **基础支持**: 使用通用的 Bug 检测规则，可以发现明显的问题\n- **占位文件**: 已创建文件框架，包含规划的检查项\n- **逐步完善**: 后续版本会补充其他语言的详细规则\n\n你可以参与贡献，为其他语言编写检查规则！\n\n### Q5: 如何与 GitLab 集成？\n\n**答**:\n- **v0.0.1**: 使用本地 git 命令，无需额外配置\n- **v0.0.3+**: 支持 GitLab MCP Server 或 glab CLI，可以直接在 MR 中发布评论\n\n详见：[docs/gitlab-integration.md](docs/gitlab-integration.md)\n\n### Q6: 可以自定义检查规则吗？\n\n**答**:\n可以！在项目根目录创建 `.claude/plugins/quality/custom-checks/` 目录，添加自定义规则：\n\n```markdown\n# custom-checks/my-project-rules.md\n\n## Go 自定义规则\n\n### 禁止使用 panic\n置信度: 90\n\n#### 检测模式\n```go\npanic(\"错误\")\n```\n\n#### 建议\n使用 error 返回值代替 panic\n```\n\n### Q7: 审查会修改我的代码吗？\n\n**答**: 不会。`/review` 命令只进行静态分析和报告生成，不会修改任何代码。修复建议仅作为参考，由开发者决定是否采纳。\n\n### Q8: 支持私有 GitLab 实例吗？\n\n**答**: 支持（v0.0.3+）。配置 GitLab MCP Server 或 glab CLI 时指定私有实例的 URL：\n\n```yaml\n# .mcp.json\n{\n  \"servers\": {\n    \"gitlab\": {\n      \"command\": \"gitlab-mcp\",\n      \"env\": {\n        \"GITLAB_URL\": \"https://your-gitlab.company.com\",\n        \"GITLAB_TOKEN\": \"${GITLAB_TOKEN}\"\n      }\n    }\n  }\n}\n```\n\n## 贡献指南\n\n欢迎为 quality plugin 贡献代码和文档！\n\n### 贡献语言检查规则\n\n1. 选择一个语言（如 Java）\n2. 编辑 `skills/language-checks/java-checks.md`\n3. 参考 `go-checks.md` 的结构，添加：\n   - Bug 检测规则和示例\n   - 代码质量规则和示例\n   - 安全检查规则和示例\n   - 性能优化规则和示例\n4. 提交 MR\n\n### 贡献 Agent 改进\n\n1. 编辑 `agents/[agent-name].md`\n2. 优化 Agent prompt，提高准确率\n3. 在本地测试验证\n4. 提交 MR\n\n### 报告问题\n\n在项目 issues 中报告：\n- 误报案例（包含代码片段和审查结果）\n- 漏报案例（应该发现但未发现的问题）\n- 功能建议\n\n## 版本历史\n\n### v0.0.1 (当前版本)\n\n- ✅ 9 个并行 Agent 架构\n- ✅ 置信度评分和冗余确认机制\n- ✅ Go 语言完整支持（Bug/质量/安全/性能）\n- ✅ 智能规范检查（CLAUDE.md/CONTRIBUTING.md）\n- ✅ 终端 Markdown 报告输出\n- ✅ 其他 5 种语言基础支持（Java/Python/Kotlin/Swift/TypeScript）\n\n### 未来计划\n\n详见：[docs/future-roadmap.md](docs/future-roadmap.md)\n\n**v0.0.2**：\n- 补充 Java/Python/Kotlin/Swift/TypeScript 的详细检查规则\n- 添加更多语言（Rust, Ruby, C++, C#）\n- 优化语言识别算法\n\n**v0.0.3**：\n- GitLab MR inline comments 支持\n- 自动发布审查结果到 MR\n- 审查历史和趋势分析\n\n**v0.1.0**：\n- `/lint` 命令（运行语言特定 linter）\n- `/format` 命令（代码格式化）\n- `/coverage` 命令（测试覆盖率）\n"
      },
      "plugins": [
        {
          "name": "spec",
          "source": "./plugins/spec",
          "description": "Spec-Driven Development 插件，自动执行完整开发流程",
          "version": "0.1.3",
          "author": {
            "name": "TapTap AI Team"
          },
          "category": "productivity",
          "keywords": [
            "spec",
            "sdd"
          ],
          "strict": true,
          "categories": [
            "productivity",
            "sdd",
            "spec"
          ],
          "install_commands": [
            "/plugin marketplace add taptap/claude-plugins-marketplace",
            "/plugin install spec@taptap-plugins"
          ]
        },
        {
          "name": "git",
          "source": "./plugins/git",
          "description": "Git 工作流命令插件，提供提交、推送、创建 MR 和分支清理功能",
          "version": "0.1.6",
          "author": {
            "name": "TapTap AI Team"
          },
          "category": "version-control",
          "keywords": [
            "git",
            "commit"
          ],
          "strict": true,
          "categories": [
            "commit",
            "git",
            "version-control"
          ],
          "install_commands": [
            "/plugin marketplace add taptap/claude-plugins-marketplace",
            "/plugin install git@taptap-plugins"
          ]
        },
        {
          "name": "sync",
          "source": "./plugins/sync",
          "description": "项目配置同步插件，提供 MCP 和开发环境配置同步功能",
          "version": "0.1.13",
          "author": {
            "name": "TapTap AI Team"
          },
          "category": "productivity",
          "keywords": [
            "sync",
            "mcp",
            "config"
          ],
          "strict": true,
          "categories": [
            "config",
            "mcp",
            "productivity",
            "sync"
          ],
          "install_commands": [
            "/plugin marketplace add taptap/claude-plugins-marketplace",
            "/plugin install sync@taptap-plugins"
          ]
        },
        {
          "name": "quality",
          "source": "./plugins/quality",
          "description": "代码质量插件，提供 AI 驱动的代码审查和质量检查功能，支持跨部门多语言（Go/Java/Python/Kotlin/Swift/TypeScript）",
          "version": "0.0.2",
          "author": {
            "name": "TapTap AI Team"
          },
          "category": "code-quality",
          "keywords": [
            "review",
            "quality",
            "bug-detection",
            "security",
            "performance"
          ],
          "strict": true,
          "categories": [
            "bug-detection",
            "code-quality",
            "performance",
            "quality",
            "review",
            "security"
          ],
          "install_commands": [
            "/plugin marketplace add taptap/claude-plugins-marketplace",
            "/plugin install quality@taptap-plugins"
          ]
        }
      ]
    }
  ]
}