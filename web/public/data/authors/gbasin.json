{
  "author": {
    "id": "gbasin",
    "display_name": "Gary Basin",
    "avatar_url": "https://avatars.githubusercontent.com/u/10901359?u=422dac87858673b7fc20c43cb8d27e00ca41e51e&v=4"
  },
  "marketplaces": [
    {
      "name": "pl4n",
      "version": null,
      "description": "Multi-agent ensemble planning CLI (Bun + TypeScript)",
      "repo_full_name": "gbasin/pl4n",
      "repo_url": "https://github.com/gbasin/pl4n",
      "repo_description": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-09T19:09:22Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"$schema\": \"https://anthropic.com/claude-code/marketplace.schema.json\",\n  \"name\": \"pl4n\",\n  \"owner\": {\n    \"name\": \"Gary Basin\"\n  },\n  \"metadata\": {\n    \"description\": \"Multi-agent ensemble planning CLI (Bun + TypeScript)\",\n    \"version\": \"0.2.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"pl4n\",\n      \"source\": \"./plugin\",\n      \"description\": \"Orchestrate Claude Code and Codex to collaboratively create implementation plans with human-in-the-loop review\",\n      \"version\": \"0.2.0\",\n      \"author\": {\n        \"name\": \"Gary Basin\"\n      },\n      \"repository\": \"https://github.com/gbasin/pl4n\",\n      \"license\": \"MIT\",\n      \"keywords\": [\n        \"planning\",\n        \"multi-agent\",\n        \"ensemble\",\n        \"orchestration\",\n        \"implementation-plans\",\n        \"codex\",\n        \"claude-code\"\n      ],\n      \"category\": \"development\"\n    }\n  ]\n}\n",
        "README.md": "# Pl4n (Bun + TypeScript)\n\nMulti-agent ensemble planning CLI. Orchestrates multiple AI agents (Claude Code, OpenAI Codex) to collaboratively create implementation plans with human-in-the-loop review.\n\n## Why Pl4n?\n\n\"A droid is only as good as its plan.\" Planning with multiple models produces more robust plans through:\n\n- **Diversity**: Different models notice different things when exploring codebases\n- **Peer review**: Agents critique each other's drafts before synthesis\n- **Iteration**: Human feedback refines plans across multiple turns\n\n## Install\n\nFrom source:\n\n```bash\nbun install\nbun run src/index.ts --help\n```\n\n## Quick Start\n\n```bash\n# Start a planning session (blocks until first turn is complete)\nbun run src/index.ts init \"Add user authentication\"\n\n# Review and edit the plan\n# Edit .pl4n/sessions/<id>/turns/001.md\n\n# Continue to next turn (blocks until agents complete)\nbun run src/index.ts continue --session <session_id>\n\n# Approve when satisfied\nbun run src/index.ts approve --session <session_id>\n```\n\n## Web Editor\n\nPl4n can launch a lightweight web editor for reviewing and editing plans. When `init` or\n`continue` completes, the server starts (if needed) and an `edit_url` is included in the\nJSON output.\n\n```bash\n# Default behavior: start server and emit edit_url\nbun run src/index.ts init \"Add user authentication\"\n\n# Disable web editor\nPL4N_WEB=0 bun run src/index.ts init \"Add user authentication\"\n```\n\nManual server control:\n\n```bash\npl4n server start            # start daemon\npl4n server stop             # stop daemon\npl4n server status           # check running status\npl4n server start --restart  # kill existing server, then start\npl4n server start --foreground   # run in foreground (dev)\npl4n server start --workspace /path/to/root  # scan a specific workspace\npl4n server start --bind 127.0.0.1           # bind address\n```\n\nFor remote access (Tailscale/VPN), override the host used in URLs:\n\n```bash\nPL4N_HOST=100.x.x.x bun run src/index.ts init \"Add user authentication\"\n```\n\nTroubleshooting:\n- If the browser cannot connect, check local firewall settings and that the port is reachable.\n- If port 3456 (or `PL4N_PORT`) is taken, the server will try the next available port.\n- Clipboard copy is best-effort; the URL is always printed in JSON output.\n\nServer configuration lives in `~/.pl4n/config.yaml`:\n\n```yaml\nworkspaces:\n  - /Users/you/code\n  - /Users/you/work\nbind: 0.0.0.0\nport: 3456\nauth:\n  mode: strict\n```\n\nAuth modes:\n- `strict` (default) requires a `t` query param token for UI and API requests (the CLI provides `edit_url` with tokens).\n- `trusted` skips token checks for allowlisted client IPs; other clients still need tokens.\n\nFor LAN + Tailscale access without tokens, use trusted mode with a CIDR allowlist:\n\n```yaml\nauth:\n  mode: trusted\n  trusted_cidrs:\n    - 127.0.0.0/8\n    - 10.0.0.0/8\n    - 172.16.0.0/12\n    - 192.168.0.0/16\n    - 100.64.0.0/10\n```\n\nIf `trusted_cidrs` is omitted, Pl4n defaults to the list shown above. CIDRs must be IPv4\n(`::1` and IPv4-mapped IPv6 are supported; other IPv6 ranges are not).\n\nYou can also set a single workspace via `PL4N_WORKSPACE=/path/to/root`.\nServer env overrides: `PL4N_BIND=0.0.0.0`, `PL4N_HOME=/custom/.pl4n`.\n\nThe server UI starts at `/projects` and links to project-scoped session lists and editors.\n\n## How It Works\n\n### Turn-Based Planning\n\nEach turn follows this flow:\n\n```\n┌─────────────┐    ┌─────────────┐    ┌─────────────┐    ┌─────────────┐\n│   DRAFT     │ -> │ PEER REVIEW │ -> │  SYNTHESIS  │ -> │ USER REVIEW │\n│             │    │             │    │             │    │             │\n│ Each agent  │    │ Agents      │    │ Merge into  │    │ Human edits │\n│ writes plan │    │ review peer │    │ unified     │    │ turns/001.md│\n└─────────────┘    └─────────────┘    └─────────────┘    └─────────────┘\n```\n\n1. **Draft**: Each agent explores the codebase and writes an independent plan\n2. **Peer Review**: Agents review each other's drafts and refine their own\n3. **Synthesis**: Plans are merged into a unified proposal\n4. **User Review**: Human edits `turns/NNN.md`, then calls `continue` or `approve`\n\n### Session Continuation\n\nAgents maintain context across turns via CLI session continuation:\n- Claude Code: `--resume <session_id>`\n- Codex: `resume <thread_id>`\n\nThis means agents accumulate codebase knowledge rather than starting fresh each turn.\n\n### User Feedback as Diff\n\nWhen you edit `turns/001.md` and call `continue`, agents receive your changes as a diff. They interpret your edits naturally:\n- Deletions = remove this\n- Additions = add this requirement\n- Comments = feedback to address\n\n## Commands\n\n| Command | Description |\n|---------|-------------|\n| `pl4n init \"task\"` | Start new planning session (blocks until first turn complete) |\n| `pl4n status --session <id>` | Check progress without blocking |\n| `pl4n continue --session <id>` | Start next turn after your edits (blocks until complete) |\n| `pl4n approve --session <id>` | Lock plan as final |\n| `pl4n list` | List all sessions |\n| `pl4n clean --session <id>` | Remove session data |\n| `pl4n diff --session <id>` | Show changes between turns |\n| `pl4n server start|stop|status` | Manage web editor server |\n\n## File Structure\n\n```\n.pl4n/\n├── pl4n.yaml                        # Agent/tool configuration\n└── sessions/\n    └── swift-river/                  # Human-friendly session ID\n        ├── meta.yaml                 # Task description, timestamp\n        ├── state.yaml                # Turn, phase, agent_plan_ids mapping\n        ├── plans/\n        │   ├── sunny-glade.md         # Agent's persistent plan (plan_id)\n        │   └── amber-marsh.md         # Another agent's plan\n        ├── turns/\n        │   ├── 001.md                # Turn 1 synthesis (USER EDITS THIS)\n        │   ├── 001.snapshot.md       # Pre-edit snapshot (for diffing)\n        │   ├── 001-autosave.md       # Web editor autosave (cleared on save/continue)\n        │   ├── 001/                  # Debug snapshots\n        │   │   ├── sunny-glade-draft.md\n        │   │   └── sunny-glade-reviewed.md\n        │   ├── 002.md\n        │   └── ...\n        │\n        ├── agents/\n        │   ├── sunny-glade/\n        │   │   ├── agent.log         # Session-wide debug log (appended)\n        │   │   └── session.txt       # CLI session ID for --resume\n        │   ├── amber-marsh/\n        │   │   ├── agent.log\n        │   │   └── session.txt\n        │   └── synthesizer/\n        │       ├── agent.log\n        │       └── session.txt\n        │\n        └── PLAN.md                   # Symlink to approved turn\n```\n\nGlobal server state:\n\n```\n~/.pl4n/\n├── config.yaml                       # Server config (workspaces, bind, port)\n├── token                             # Global auth token for the web UI\n├── server.json                       # PID/port metadata for the daemon\n└── server.log                        # Server logs\n```\n\n**Key points:**\n- Plan IDs (`sunny-glade`, `amber-marsh`) are opaque names mapped to agents in `state.yaml`\n- Agents read/write their persistent plan file (e.g., `sunny-glade.md`)\n- After synthesis, all agent plan files are synced to the canonical state\n- Debug logs span the entire session (appended each turn)\n- `meta.yaml` stores a `config` snapshot from `.pl4n/pl4n.yaml` at session init\n\n## Configuration\n\nEdit `.pl4n/pl4n.yaml` (or `.pl4n/pl4n.yml`) to configure agents:\n\n```yaml\nclaude:\n  allowed_tools:\n    - Read\n    - Edit\n    - Write\n  # See .pl4n/pl4n.yaml for the full default list\ncodex:\n  full_auto: true\n  search: true\nagents:\n  - id: opus\n    type: claude\n    model: opus\n    enabled: true\n  - id: codex\n    type: codex\n    model: gpt-5.2-codex\n    thinking: xhigh\n    enabled: true\nsynthesizer:\n  id: synthesizer\n  type: claude\n  model: opus\n  enabled: true\n```\n\nIf the file is missing, defaults are used.\nFor Codex agents, `thinking` maps to `model_reasoning_effort` (valid values: none, minimal, low, medium, high, xhigh).\nCodex constraints live under `codex` (defaults) or `agents[].codex` (overrides), with keys:\n`full_auto`, `sandbox`, `approval_policy`, `dangerously_bypass`, `add_dir`, `search`, `config`, and `mcp`.\n`config` and `mcp` are serialized to JSON and passed via `--config`.\nFor Claude agents, `claude.allowed_tools` maps to `--allowedTools`, and `claude.add_dir` maps to\n`--add-dir`. Claude's allowlist is best-effort; shell commands can still write if they redirect\noutput. Override defaults per agent with `agents[].claude` or `agents[].codex`.\nIf you pass `--pl4n-dir`, the config is loaded from that directory.\n\n## Architecture\n\n```\nsrc/\n├── cli.ts          # CLI commands (sade)\n├── models.ts       # Data models (SessionState, Phase, AgentConfig)\n├── session.ts      # Session lifecycle management\n├── orchestrator.ts # Turn orchestration (draft -> peer review -> synthesis)\n├── prompts.ts      # Agent prompt templates\n├── names.ts        # Human-friendly name generator\n└── adapters/\n    ├── base.ts     # AgentAdapter interface\n    ├── claude.ts   # Claude Code adapter (subprocess, --resume)\n    └── codex.ts    # Codex CLI adapter (subprocess, resume)\n```\n\n## Development\n\n```bash\nbun install\n```\n\nRun tests and checks:\n\n```bash\nbun run lint\nbun run typecheck\nbun run test\nbun run build\n```\n\nBuild the web editor assets:\n\n```bash\nbun run build:web\n```\n\n## Design Decisions\n\n- **File-based protocol**: Agents communicate via files, making the system agent-agnostic\n- **Turn-based iteration**: Each turn produces a numbered synthesis file\n- **Opaque plan IDs**: Prevents models from confusing which file belongs to which agent\n- **Session continuation**: Agents preserve codebase exploration context across turns\n- **No special syntax**: Users edit plans naturally; agents interpret the diff\n",
        "plugin/README.md": "# Pl4n Claude Code Plugin (Bun)\n\nClaude Code plugin for the pl4n multi-agent ensemble planning CLI.\n\n## Installation\n\n```bash\n# Add the pl4n marketplace\n/plugin marketplace add gbasin/pl4n\n\n# Install the plugin\n/plugin install pl4n@pl4n\n```\n\nOr install directly:\n```bash\n/plugin install github:gbasin/pl4n\n```\n\n## Commands\n\n| Command | Description |\n|---------|-------------|\n| `/pl4n:plan <feature>` | Start a planning session |\n| `/pl4n:continue <session_id>` | Continue after editing |\n| `/pl4n:approve <session_id>` | Lock plan as final |\n| `/pl4n:status <session_id>` | Check session status |\n| `/pl4n:list` | List all sessions |\n\n## Example\n\n```\n> /pl4n:plan Add rate limiting to API endpoints\n\nStarted planning session `swift-river` for \"Add rate limiting to API endpoints\"\nAgents are working...\n\nDone! Plan ready at: .pl4n/sessions/swift-river/turns/001.md\n\n> [edit the file]\n\n> /pl4n:continue swift-river\n\nTurn 2 complete. Plan at: .pl4n/sessions/swift-river/turns/002.md\n\n> /pl4n:approve swift-river\n\nPlan approved! Final plan: .pl4n/sessions/swift-river/PLAN.md\n```\n\n## Skill\n\nThe plugin includes a skill that teaches Claude about pl4n syntax and workflow. It activates automatically when discussing planning sessions.\n\n## Prerequisites\n\nRequires the pl4n CLI to be available:\n\n```bash\nbun install\nbun run src/index.ts --help\n```\n"
      },
      "plugins": [
        {
          "name": "pl4n",
          "source": "./plugin",
          "description": "Orchestrate Claude Code and Codex to collaboratively create implementation plans with human-in-the-loop review",
          "version": "0.2.0",
          "author": {
            "name": "Gary Basin"
          },
          "repository": "https://github.com/gbasin/pl4n",
          "license": "MIT",
          "keywords": [
            "planning",
            "multi-agent",
            "ensemble",
            "orchestration",
            "implementation-plans",
            "codex",
            "claude-code"
          ],
          "category": "development",
          "categories": [
            "claude-code",
            "codex",
            "development",
            "ensemble",
            "implementation-plans",
            "multi-agent",
            "orchestration",
            "planning"
          ],
          "install_commands": [
            "/plugin marketplace add gbasin/pl4n",
            "/plugin install pl4n@pl4n"
          ]
        }
      ]
    }
  ]
}