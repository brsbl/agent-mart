{
  "author": {
    "id": "gbasin",
    "display_name": "Gary Basin",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/10901359?u=422dac87858673b7fc20c43cb8d27e00ca41e51e&v=4",
    "url": "https://github.com/gbasin",
    "bio": null,
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 0,
      "total_skills": 1,
      "total_stars": 1,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "figma-to-react",
      "version": null,
      "description": "Convert Figma designs to pixel-perfect React components with Tailwind CSS",
      "owner_info": {
        "name": "Gary Basin",
        "email": "gary@gbasin.com"
      },
      "keywords": [],
      "repo_full_name": "gbasin/figma-to-react",
      "repo_url": "https://github.com/gbasin/figma-to-react",
      "repo_description": "Claude Code plugin for converting linear Figma screen flows into React components with exact assets, iOS-native animations, and automated visual verification",
      "homepage": null,
      "signals": {
        "stars": 1,
        "forks": 0,
        "pushed_at": "2025-12-25T19:19:54Z",
        "created_at": "2025-12-18T20:37:15Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 714
        },
        {
          "path": ".claude-plugin/plugin.json",
          "type": "blob",
          "size": 79
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 6689
        },
        {
          "path": "hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "hooks/hooks.json",
          "type": "blob",
          "size": 2773
        },
        {
          "path": "skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/figma-to-react",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/figma-to-react/SKILL.md",
          "type": "blob",
          "size": 2722
        },
        {
          "path": "skills/figma-to-react/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/figma-to-react/references/step-1-setup.md",
          "type": "blob",
          "size": 1548
        },
        {
          "path": "skills/figma-to-react/references/step-2-detect-structure.md",
          "type": "blob",
          "size": 939
        },
        {
          "path": "skills/figma-to-react/references/step-3-confirm-config.md",
          "type": "blob",
          "size": 1996
        },
        {
          "path": "skills/figma-to-react/references/step-3b-preview-route.md",
          "type": "blob",
          "size": 3962
        },
        {
          "path": "skills/figma-to-react/references/step-4-generation.md",
          "type": "blob",
          "size": 3767
        },
        {
          "path": "skills/figma-to-react/references/step-4b-validate-dimensions.md",
          "type": "blob",
          "size": 11108
        },
        {
          "path": "skills/figma-to-react/references/step-5-import-tokens.md",
          "type": "blob",
          "size": 1199
        },
        {
          "path": "skills/figma-to-react/references/step-6-validation.md",
          "type": "blob",
          "size": 3576
        },
        {
          "path": "skills/figma-to-react/references/step-7-rename-assets.md",
          "type": "blob",
          "size": 1887
        },
        {
          "path": "skills/figma-to-react/references/step-8-disarm-hook.md",
          "type": "blob",
          "size": 1139
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"figma-to-react\",\n  \"owner\": {\n    \"name\": \"Gary Basin\",\n    \"email\": \"gary@gbasin.com\"\n  },\n  \"metadata\": {\n    \"description\": \"Convert Figma designs to pixel-perfect React components with Tailwind CSS\",\n    \"version\": \"0.9.27\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"figma-to-react\",\n      \"source\": \"./\",\n      \"description\": \"Convert Figma designs to pixel-perfect React components with Tailwind CSS\",\n      \"version\": \"0.9.27\",\n      \"author\": {\n        \"name\": \"Gary Basin\"\n      },\n      \"repository\": \"https://github.com/gbasin/figma-to-react\",\n      \"license\": \"MIT\",\n      \"keywords\": [\"figma\", \"react\", \"tailwind\", \"design-to-code\", \"ios\", \"mobile\"],\n      \"category\": \"design\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"figma-to-react\",\n  \"version\": \"0.9.27\",\n  \"skills\": \"./skills/\"\n}\n",
        "README.md": "# figma-to-react\n\nA Claude Code plugin that converts Figma designs into pixel-perfect TypeScript React components with Tailwind CSS.\n\n## Features\n\n- **Pixel-perfect conversion** — Uses Figma MCP output verbatim, preserving exact layout and styling\n- **Visual validation** — Automated screenshot comparison with iterative fixes until match\n- **Smart asset handling** — Downloads, deduplicates by content hash, renames to semantic names\n- **Token extraction** — Extracts CSS variables from Figma designs automatically\n- **Auto-detection** — Detects framework, directories, and frame dimensions\n- **Collapsed container fix** — Automatically fixes containers with only absolute children\n\n## Prerequisites\n\n1. **Figma MCP Server** — Either web or desktop, authenticated:\n   ```\n   mcp__figma__whoami\n   ```\n\n2. **React + Tailwind CSS project** — Vite, Next.js, or CRA\n\n3. **Tools** (auto-installed by the skill):\n   - **Bun** — Fast TypeScript runtime for scripts\n   - **ImageMagick** — Visual comparison (or `brew install imagemagick`)\n   - **oxlint** — Fast Tailwind linting (via Bun)\n   - **Playwright** — Headless screenshot capture\n\n## Installation\n\n```bash\n# Add the marketplace\n/plugin marketplace add gbasin/figma-to-react\n\n# Install the plugin\n/plugin install figma-to-react\n\n# Restart Claude Code to activate hooks\n```\n\n## Usage\n\n```\nConvert this Figma flow to React: https://www.figma.com/design/abc123/My-Flow?node-id=1-234\n```\n\nOr use the skill directly:\n\n```\n/figma-to-react\n```\n\n## How It Works\n\n### Workflow\n\n| Step | Description |\n|------|-------------|\n| 1. Setup | Install tools, create temp dirs, arm capture hooks |\n| 2. Detect | Scan project for framework, paths, patterns |\n| 3. Confirm | Present config to user for approval |\n| 3b. Preview | Create standalone preview (Vite: HTML entry, Next.js: pages/) |\n| 4. Generate | Process each screen in parallel via sub-agents |\n| 4b. Dimensions | Validate dimension coverage, prompt for missing |\n| 5. Tokens | Import extracted CSS variables into project |\n| 6. Validate | Screenshot comparison loop with auto-fixes |\n| 7. Rename | Intelligently rename assets from MCP descriptions |\n| 8. Cleanup | Disarm hooks, remove temp files |\n\n### Generation Pipeline\n\nFor each screen:\n\n```\nget_metadata → extract dimensions → save to /tmp/figma-to-react/metadata/\n     ↓\nget_design_context → hook captures response → /tmp/figma-to-react/captures/\n     ↓\nprocess-figma.sh → extract tokens, download assets, transform code\n     ↓\nfix-collapsed-containers.sh → add explicit dimensions where needed\n     ↓\nbun oxlint --fix → auto-fix ~90% of Tailwind issues\n```\n\n### Visual Validation Loop\n\n```\ncapture screenshot → compare to Figma reference → calculate diff %\n     ↓\n≤5% diff? → Done\n     ↓\n>5% diff? → LLM makes targeted fix → loop (max 10 passes)\n     ↓\nNo improvement? → Revert, try different approach\n```\n\n## Output Structure\n\n```\nsrc/{flow}/\n├── screens/\n│   ├── registry.ts\n│   └── components/\n│       ├── WelcomeScreen.tsx\n│       ├── SelectBankScreen.tsx\n│       └── ...\n└── {Flow}DemoPage.tsx\n\npublic/{flow}-assets/\n├── logo.svg\n├── arrow-back.svg\n└── ...\n\nsrc/styles/\n└── figma-tokens.css\n```\n\n## Scripts\n\n| Script | Purpose |\n|--------|---------|\n| `process-figma.sh` | Main processor: tokens, assets, code transform |\n| `extract-tokens.sh` | Parse CSS variables from MCP output |\n| `fix-collapsed-containers.sh` | Add explicit dimensions to collapsing containers |\n| `validate-dimensions-coverage.sh` | Check if all collapse-prone elements have dimensions |\n| `add-missing-dimensions.sh` | Add user-provided dimensions to metadata |\n| `validate-component.sh` | Orchestrate single validation pass (deterministic) |\n| `validate-visual.sh` | ImageMagick RMSE comparison |\n| `capture-screenshot.ts` | Playwright headless capture |\n| `save-component-metadata.sh` | Link component names to nodeIds |\n| `rename-assets.sh` | Semantic asset naming + deduplication |\n| `find-shared-components.ts` | Detect shared components across multiple screens |\n\n## Hooks\n\nThe plugin uses PostToolUse hooks to capture Figma MCP responses:\n\n| Hook | Trigger | Action |\n|------|---------|--------|\n| `capture-figma-response.sh` | `get_design_context` | Save response, suppress output |\n| `capture-figma-metadata.sh` | `get_metadata` | Extract frame dimensions |\n| `capture-figma-screenshot.sh` | `get_screenshot` | Decode and save image |\n\nHooks always capture for debugging. Output suppression only activates when the skill is running (saves ~50KB context per screen).\n\n## Key Features\n\n### Content Hash Deduplication\n\nSame icon across multiple screens = one file. Assets are downloaded once and deduplicated by MD5 hash.\n\n### Collapsed Container Detection\n\nContainers with only absolutely-positioned children would collapse. The plugin detects these and adds explicit `h-[Xpx]` dimensions from Figma metadata.\n\n### Root Dimension Hardcoding\n\nReplaces `size-full` on root elements with explicit `w-[390px] h-[844px]` to ensure pixel-perfect sizing regardless of container.\n\n### Intelligent Asset Renaming\n\nParses MCP component descriptions like `Source: boxicons --- icon, x, close` to rename `asset-abc.svg` → `close-icon.svg`.\n\n## Development\n\nPrereqs: Node 20+, pnpm 9+, and Bun (https://bun.sh) for screenshot capture.\n\n```bash\npnpm install\npnpm test:e2e        # Run tests (~10s)\npnpm test:e2e:watch  # Watch mode\n```\n\n### Test Fixtures\n\nTests use captured Figma responses from the Onfido Web SDK Community file:\n- Frame 237-2571: Motion / Mobile 3\n- Frame 238-1790: Motion / Mobile 4\n\n### Project Structure\n\n```\n├── skills/figma-to-react/\n│   ├── SKILL.md              # Skill definition\n│   ├── references/           # Step guides (1-8, 3b, 4b)\n│   ├── scripts/              # Shell & TS processors + hook scripts\n│   └── templates/            # Preview route templates\n├── hooks/\n│   └── hooks.json            # Hook configuration (matchers → scripts)\n├── tests/e2e/\n│   ├── fixtures/             # Captured MCP responses\n│   └── *.test.ts             # Test suites\n└── .claude-plugin/\n    └── plugin.json           # Plugin manifest\n```\n\n## Troubleshooting\n\n**Hooks not working?**\n- Restart Claude Code after installation\n- Check `hooks/hooks.json` exists and has correct matchers\n\n**Visual validation failing?**\n- Install ImageMagick: `brew install imagemagick`\n- Ensure dev server is running\n\n**Assets not downloading?**\n- Check Figma MCP authentication\n- Verify asset URLs are accessible\n\n## License\n\nMIT\n",
        "hooks/hooks.json": "{\n  \"description\": \"Hooks for figma-to-react plugin - captures Figma MCP responses verbatim\",\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"mcp__plugin_figma_figma__get_metadata\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/skills/figma-to-react/scripts/capture-figma-metadata.sh\",\n            \"timeout\": 30\n          }\n        ]\n      },\n      {\n        \"matcher\": \"mcp__plugin_figma_figma-desktop__get_metadata\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/skills/figma-to-react/scripts/capture-figma-metadata.sh\",\n            \"timeout\": 30\n          }\n        ]\n      },\n      {\n        \"matcher\": \"mcp__figma__get_metadata\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/skills/figma-to-react/scripts/capture-figma-metadata.sh\",\n            \"timeout\": 30\n          }\n        ]\n      },\n      {\n        \"matcher\": \"mcp__plugin_figma_figma__get_design_context\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/skills/figma-to-react/scripts/capture-figma-response.sh\",\n            \"timeout\": 30\n          }\n        ]\n      },\n      {\n        \"matcher\": \"mcp__plugin_figma_figma-desktop__get_design_context\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/skills/figma-to-react/scripts/capture-figma-response.sh\",\n            \"timeout\": 30\n          }\n        ]\n      },\n      {\n        \"matcher\": \"mcp__figma__get_design_context\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/skills/figma-to-react/scripts/capture-figma-response.sh\",\n            \"timeout\": 30\n          }\n        ]\n      },\n      {\n        \"matcher\": \"mcp__plugin_figma_figma__get_screenshot\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/skills/figma-to-react/scripts/capture-figma-screenshot.sh\",\n            \"timeout\": 30\n          }\n        ]\n      },\n      {\n        \"matcher\": \"mcp__plugin_figma_figma-desktop__get_screenshot\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/skills/figma-to-react/scripts/capture-figma-screenshot.sh\",\n            \"timeout\": 30\n          }\n        ]\n      },\n      {\n        \"matcher\": \"mcp__figma__get_screenshot\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/skills/figma-to-react/scripts/capture-figma-screenshot.sh\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "skills/figma-to-react/SKILL.md": "---\nname: figma-to-react\nversion: 0.9.27\ndescription: Convert Figma designs to pixel-perfect React components with Tailwind CSS.\nlicense: MIT\ncompatibility: Requires Figma MCP server (mcp__figma__*). React + Tailwind CSS project. Uses oxlint for fast linting.\nallowed-tools: Bash Read Write Edit Glob Grep Task WebFetch TodoWrite AskUserQuestion mcp__plugin_figma_figma__get_metadata mcp__plugin_figma_figma__get_screenshot mcp__plugin_figma_figma__get_design_context mcp__plugin_figma_figma-desktop__get_metadata mcp__plugin_figma_figma-desktop__get_screenshot mcp__plugin_figma_figma-desktop__get_design_context mcp__figma__get_metadata mcp__figma__get_screenshot mcp__figma__get_design_context\n---\n\n# Figma to React\n\nConvert Figma designs to pixel-perfect React components with Tailwind CSS.\n\n## Workflow\n\nThe workflow is a **status-driven loop**. Always check status before and after each step:\n\n```\nLOOP:\n  1. Run: $SKILL_DIR/scripts/status.sh\n  2. Read the step file for current_step (e.g., step-4b-validate-dimensions.md)\n  3. Execute that step's instructions\n  4. Go to step 1 (until step 8 complete)\n```\n\n### Step Reference\n\nCreate a TodoWrite list with these steps (Glob to find each file):\n\n```\n1. Setup - step-1-setup.md\n2. Detect structure - step-2-detect-structure.md\n3. Confirm config - step-3-confirm-config.md\n3b. Create preview route - step-3b-preview-route.md\n4. Generate screens (parallel) - step-4-generation.md\n4b. Validate dimensions - step-4b-validate-dimensions.md\n5. Import tokens - step-5-import-tokens.md\n6. Validate screens (parallel) - step-6-validation.md\n7. Rename assets - step-7-rename-assets.md\n8. Disarm hook - step-8-disarm-hook.md\n```\n\n### Pre-flight Checks\n\nEach step file has a pre-flight check. If status.sh says you're on step 4b but you're trying to execute step 5:\n1. **STOP** - don't execute step 5\n2. Update TodoWrite to uncheck wrongly-completed steps\n3. Read the correct step file (step 4b)\n\nThis prevents skipping steps, which was a common failure mode.\n\n## Recovery After Compaction\n\nIf context is compacted, run `$SKILL_DIR/scripts/status.sh` to see exactly where you are.\nThe script infers state from /tmp files - no context needed.\n\n**State files used by status.sh:**\n- `/tmp/figma-to-react/capture-active` - Skill is active\n- `/tmp/figma-to-react/config.json` - Config with screens/screenNames mapping\n- `/tmp/figma-to-react/steps/4b/*.json` - Dimension validation results\n- `/tmp/figma-to-react/steps/4b/user-decisions.json` - User decisions on missing dims\n- `/tmp/figma-to-react/steps/5/complete.json` - Token import done\n- `/tmp/figma-to-react/validation/*/result.json` - Visual validation results\n- `/tmp/figma-to-react/steps/7/complete.json` - Asset rename done\n",
        "skills/figma-to-react/references/step-1-setup.md": "# Step 1: Setup\n\nPrepare the environment and install required tools.\n\n## Install Tools\n\n```bash\n# Bun for fast TypeScript execution, ImageMagick for visual comparison\ncommand -v bun >/dev/null || brew install oven-sh/bun/bun\nbrew install imagemagick\n\n# Playwright for screenshot capture, oxlint for fast linting\npnpm add -D playwright oxlint && bunx playwright install chromium\n```\n\n## Arm the Capture Hook\n\n```bash\n# Clean up any previous run\nrm -rf /tmp/figma-to-react\n\n# Arm the hook\nmkdir -p /tmp/figma-to-react/captures\ntouch /tmp/figma-to-react/capture-active\n```\n\n## What This Does\n\n**Tool installations:**\n- Bun runs TypeScript scripts directly (faster than tsx/ts-node)\n- ImageMagick provides the `magick` CLI for image comparison (used in step 6)\n- Playwright enables headless screenshot capture of rendered components\n- oxlint for fast linting of generated components\n\n**Capture hook:**\nThe PostToolUse hook watches for Figma MCP calls. When the marker file exists:\n- Captures full response to `/tmp/figma-to-react/captures/figma-{nodeId}.txt`\n- Suppresses raw output from Claude's context (saves ~50KB per screen)\n- Shows brief confirmation: \"Captured to figma-{nodeId}.txt\"\n\nWithout the marker file, Figma MCP works normally (useful for debugging).\n\n**Recovery files (created in step 3):**\n- `input.txt` - Raw Figma links from user (one per line)\n- `config.json` - Confirmed output paths\n\nThese enable recovery if context is compacted during a multi-screen job.\n\n## Next Step\n\nMark this step complete. Read step-2-detect-structure.md.\n",
        "skills/figma-to-react/references/step-2-detect-structure.md": "# Step 2: Detect Project Structure\n\nScan the codebase to detect framework and conventions.\n\n## Actions\n\n```bash\n# Check package.json for framework\ncat package.json | grep -E '\"(react|next|vite|@vitejs)\"'\n\n# Find existing component directories\nls -d src/components/ components/ app/components/ 2>/dev/null\n\n# Find existing style directories\nls -d src/styles/ styles/ src/css/ 2>/dev/null\n\n# Find public/static asset directories\nls -d public/ static/ public/assets/ 2>/dev/null\n```\n\n## What to Look For\n\n- **Framework**: Vite, Next.js, Create React App\n- **Component location**: Where existing components live\n- **Styles location**: Where CSS/tokens should go\n- **Assets location**: Where static files are served from\n\n## Output\n\nPrepare a configuration summary for user confirmation:\n- Components directory\n- Assets directory\n- Tokens file path\n- URL prefix for assets\n\n## Next Step\n\nMark this step complete. Read step-3-confirm-config.md.\n",
        "skills/figma-to-react/references/step-3-confirm-config.md": "# Step 3: Confirm Configuration\n\nUse hardcoded defaults with quick override option.\n\n## Default Paths\n\n```\nComponents: src/components/figma/\nAssets:     public/figma-assets/\nTokens:     src/styles/figma-tokens.css\nURL prefix: /figma-assets\n```\n\n## Present to User\n\n```\nDetected: [Framework] + React + Tailwind\n\nOutput paths:\n  Components: src/components/figma/\n  Assets:     public/figma-assets/\n  Tokens:     src/styles/figma-tokens.css\n\nProceed with defaults? [Y/edit]\n```\n\nIf user types \"edit\", use `AskUserQuestion` to gather custom paths.\n\n## Parse Figma URL\n\nExtract from user's Figma link:\n```\nhttps://www.figma.com/design/{fileKey}/{fileName}?node-id={nodeId}\n```\n\nGet list of nodeIds to process (may be multiple screens).\n\n## Write Recovery Files\n\nSave state for compaction resilience. If context is compacted mid-job, agent can re-read these files to recover.\n\n**1. Save raw user input** (use actual links/IDs from user, not these examples):\n```bash\ncat > /tmp/figma-to-react/input.txt << 'EOF'\nhttps://www.figma.com/design/abc123/MyFile?node-id=237-2571\nhttps://www.figma.com/design/abc123/MyFile?node-id=237-2572\nEOF\n```\nStore exactly what the user provided (links or node IDs), one per line.\n\n**2. Save confirmed config** (use actual values from current job, not these examples):\n\n```bash\n# EXAMPLE ONLY - replace with actual values:\ncat > /tmp/figma-to-react/config.json << 'EOF'\n{\n  \"componentDir\": \"src/components/figma\",\n  \"assetDir\": \"public/figma-assets\",\n  \"tokensFile\": \"src/styles/figma-tokens.css\",\n  \"urlPrefix\": \"/figma-assets\",\n  \"screens\": [\"237:2571\", \"237:2572\"],\n  \"screenNames\": {\n    \"237:2571\": \"LoginScreen\",\n    \"237:2572\": \"HomeScreen\"\n  }\n}\nEOF\n```\n\n**IMPORTANT:** The `screens` and `screenNames` fields are required for status.sh to track parallel progress.\n- `screens`: Array of all nodeIds from the user's Figma links\n- `screenNames`: Map from nodeId to component name you'll generate\n\n## Next Step\n\nMark this step complete. Read step-3b-preview-route.md.\n",
        "skills/figma-to-react/references/step-3b-preview-route.md": "# Step 3b: Create Preview Route\n\nCreate the preview infrastructure BEFORE component generation so users can watch components appear in real-time.\n\n## Why Before Generation\n\n- Preview route with dynamic imports auto-discovers new components\n- User sees components appear as step 4 generates them\n- During step 4b (dimension validation), user can see the preview while deciding\n\n## Key Principle: Standalone Preview\n\nThe preview must render components in isolation, without inheriting any layout chrome (headers, navbars) from the user's app. This ensures pixel-perfect screenshot validation.\n\n## Framework Detection\n\nFrom step 2, determine:\n- **Vite/React Router** → separate HTML entry point\n- **Next.js** → pages/ directory (bypasses App Router layouts)\n\n## Vite/React Router Implementation\n\nUse a **separate HTML entry point** to avoid inheriting any App.tsx layout:\n\n1. Copy templates to project:\n   ```bash\n   cp $SKILL_DIR/templates/figma-preview.html figma-preview.html\n   cp $SKILL_DIR/templates/figma-preview-entry.vite.tsx src/pages/figma-preview-entry.tsx\n   ```\n\n2. Adjust the glob path if components aren't in `src/components/figma/` (see \"Adjust Glob/Import Path\" below)\n\n**Why separate entry?** This bypasses the main App.tsx entirely. No routes to configure, no layout inheritance.\n\n**Template locations:**\n- `$SKILL_DIR/templates/figma-preview.html`\n- `$SKILL_DIR/templates/figma-preview-entry.vite.tsx`\n\n## Next.js Implementation\n\nUse the `pages/` directory to bypass App Router layouts entirely:\n\n1. Copy templates to project:\n   ```bash\n   mkdir -p pages app/api/figma-screens\n   cp $SKILL_DIR/templates/figma-preview.nextjs-pages.tsx pages/figma-preview.tsx\n   cp $SKILL_DIR/templates/figma-screens-api.nextjs.ts app/api/figma-screens/route.ts\n   ```\n\n2. Update the CSS import path in `pages/figma-preview.tsx` if needed:\n   ```tsx\n   import '../app/globals.css'; // Adjust to your global CSS location\n   ```\n\n3. Access via: `http://localhost:3000/figma-preview?screen=ComponentName`\n\n**Why pages/ directory?** Even in App Router projects, pages in `pages/` don't inherit `app/layout.tsx`. No changes to existing app structure needed.\n\n**Template locations:**\n- `$SKILL_DIR/templates/figma-preview.nextjs-pages.tsx`\n- `$SKILL_DIR/templates/figma-screens-api.nextjs.ts`\n\n## Adjust Glob/Import Path If Needed\n\nIf `componentDir` in config differs from default (`src/components/figma`), update the import pattern:\n\n**Vite:**\n```tsx\n// Default\nconst modules = import.meta.glob('../components/figma/*.tsx');\n\n// Custom location\nconst modules = import.meta.glob('../../path/to/figma/*.tsx');\n```\n\n**Next.js:**\n```tsx\n// Default\nimport(`@/components/figma/${screenName}`)\n\n// Custom location - update the path accordingly\n```\n\n## Start Dev Server (Required)\n\n**IMPORTANT:** The preview won't work without a running dev server.\n\n1. Start the dev server:\n   ```bash\n   pnpm dev\n   # or: npm run dev\n   ```\n\n2. Wait for startup and note the port from output (e.g., `localhost:5173` for Vite, `localhost:3000` for Next.js)\n\n3. Verify the preview works by curling the URL:\n   ```bash\n   # Vite\n   curl -s http://localhost:5173/figma-preview.html | grep \"figma-preview-root\"\n\n   # Next.js\n   curl -s http://localhost:3000/figma-preview | grep \"Figma Preview\"\n   ```\n\n   If this returns nothing, the server isn't serving the preview correctly.\n\n## Tell the User\n\nAfter verifying the server:\n\n**Vite:**\n```\nPreview created at /figma-preview.html\nDev server running at http://localhost:[port]\n\nAs components are generated, they will automatically appear in the preview.\nOpen http://localhost:[port]/figma-preview.html to watch progress.\n```\n\n**Next.js:**\n```\nPreview route created at /figma-preview\nDev server running at http://localhost:[port]\n\nAs components are generated, they will automatically appear in the preview.\nOpen http://localhost:[port]/figma-preview to watch progress.\n```\n\n## Next Step\n\nMark this step complete. Read step-4-generation.md.\n",
        "skills/figma-to-react/references/step-4-generation.md": "# Step 4: Generate Screens (Parallel)\n\nSpawn sub-agents to process each screen. Can run in parallel.\n\n## Pre-flight Check\n\n```bash\n$SKILL_DIR/scripts/status.sh --check 4\n```\n\nIf this fails, it prints the correct step. Uncheck wrongly-completed TodoWrite items and read that step file instead.\n\n> **Preview Available:** The preview was created in step 3b. As components are\n> generated, they automatically appear in the preview. Tell the user they can watch\n> progress there (Vite: `/figma-preview.html?screen=...`, Next.js: `/figma-preview?screen=...`).\n\n## For Each Screen\n\nSpawn a sub-agent using Task tool:\n\n```\nTask(\n  subagent_type: \"general-purpose\",\n  prompt: \"\"\"\n    Process Figma screen for the figma-to-react skill.\n\n    INPUTS:\n    - fileKey: \"{fileKey}\"\n    - nodeId: \"{nodeId}\"\n    - componentName: \"{ComponentName}\"\n    - componentPath: \"{componentDir}/{ComponentName}.tsx\"\n    - assetDir: \"{assetDir}\"\n    - urlPrefix: \"{urlPrefix}\"\n    - tokensFile: \"{tokensFile}\"\n    - SKILL_DIR: \"{skillDir}\"\n\n    STEPS:\n    1. Call the Figma MCP get_metadata tool to get frame dimensions.\n\n       Use whichever server is available:\n       - mcp__figma__get_metadata (direct MCP - uses fileKey)\n       - mcp__plugin_figma_figma__get_metadata (marketplace plugin - uses fileKey)\n       - mcp__plugin_figma_figma-desktop__get_metadata (desktop plugin - uses active tab)\n\n       Parameters:\n         fileKey: \"{fileKey}\" (not needed for desktop)\n         nodeId: \"{nodeId}\"\n\n       A hook automatically extracts dimensions and saves them to\n       /tmp/figma-to-react/metadata/{nodeId}.json.\n\n    2. Call the Figma MCP get_design_context tool.\n\n       Use whichever server is available:\n       - mcp__figma__get_design_context (direct MCP - uses fileKey)\n       - mcp__plugin_figma_figma__get_design_context (marketplace plugin - uses fileKey)\n       - mcp__plugin_figma_figma-desktop__get_design_context (desktop plugin - uses active tab)\n\n       Parameters:\n         fileKey: \"{fileKey}\" (web only)\n         nodeId: \"{nodeId}\"\n         clientFrameworks: \"react\"\n         clientLanguages: \"typescript\"\n\n       The hook will capture response to /tmp/figma-to-react/captures/figma-{nodeId}.txt\n\n    3. Run the processing script:\n       $SKILL_DIR/scripts/process-figma.sh \\\\\n         /tmp/figma-to-react/captures/figma-{nodeId}.txt \\\\\n         {componentPath} \\\\\n         {assetDir} \\\\\n         {urlPrefix} \\\\\n         {tokensFile}\n\n    4. Link component name to metadata:\n       $SKILL_DIR/scripts/save-component-metadata.sh \\\\\n         \"{ComponentName}\" \"{nodeId}\" \"{componentPath}\"\n\n       This adds the component name to the dimensions already saved by the hook.\n\n    5. Lint and auto-fix Tailwind issues:\n       bun oxlint --fix {componentPath}\n\n       This auto-fixes ~90% of MCP output issues:\n       - Class ordering\n       - Unnecessary arbitrary values (translate-x-[-50%] → -translate-x-1/2)\n       - Redundant classes (filter in TW v3)\n       - Shorthand opportunities (top-X bottom-X → inset-y-X)\n\n    6. Check for remaining issues:\n       bun oxlint {componentPath}\n\n       Fix these manually based on the component's intent.\n\n    7. Return summary: component path, asset count, oxlint fixes applied, any errors.\n       (Dimensions are already in the metadata file.)\n  \"\"\"\n)\n```\n\n## Why Sub-Agents\n\n- Each Figma MCP response is ~50KB\n- Sub-agents keep this isolated from parent context\n- Multiple screens can run in parallel\n- Parent only sees summaries\n\n## Collect Results\n\nTrack for each screen:\n- Component file path\n- Figma nodeId (needed for validation)\n- Success/failure status\n\nDimensions are stored in `/tmp/figma-to-react/metadata/{ComponentName}.json` for step 6.\n\n## Next Step\n\nMark this step complete. Read step-4b-validate-dimensions.md.\n",
        "skills/figma-to-react/references/step-4b-validate-dimensions.md": "# Step 4b: Validate Dimension Coverage\n\nCheck that all collapse-prone elements have dimensions in the metadata. Prompt user for any missing values.\n\n> **Note:** All code blocks in this document are **examples only**. Use the actual node IDs, file paths, and element names from the current conversion at runtime.\n\n## Pre-flight Check\n\n```bash\n$SKILL_DIR/scripts/status.sh --check 4b\n```\n\nIf this fails, it prints the correct step. Uncheck wrongly-completed TodoWrite items and read that step file instead.\n\n## Why This Step\n\nThe MCP metadata may not include dimensions for all node IDs in the generated TSX, especially:\n- Nested component instances (IDs like `I237:2572;2708:1961`)\n- Elements from component libraries\n- Deeply nested frames\n\nWithout dimensions, `fix-collapsed-containers.sh` can't fix elements that collapse due to absolute-positioned children.\n\n## Multi-Screen: Detect Shared Components First\n\nWhen converting **2+ screens**, run shared component detection BEFORE asking about any dimensions:\n\n```bash\nbun $SKILL_DIR/scripts/find-shared-components.ts \\\n  /tmp/figma-to-react/captures/figma-*.txt\n```\n\n**Output example:**\n```json\n{\n  \"shared\": [\n    {\n      \"definitionId\": \"2708:1961\",\n      \"name\": \"exit button\",\n      \"instances\": [\n        {\"instanceId\": \"I237:2417;2708:1961\", \"screen\": \"237:2416\"},\n        {\"instanceId\": \"I237:2572;2708:1961\", \"screen\": \"237:2571\"}\n      ]\n    }\n  ],\n  \"total_shared\": 15\n}\n```\n\nSave this output. When handling missing dimensions below:\n- **Shared components** → ask ONCE, apply to ALL instances across ALL screen JSONs\n- **Screen-specific** → ask and apply per-screen as normal\n\nTo check if a missing element is shared:\n1. Extract definition ID from instance ID (last segment after `;`)\n2. Check if that definition ID is in the shared list\n\n**Skip this section for single-screen conversions.**\n\n## Use the Preview\n\nThe preview (step 3b) is available at:\n- **Vite**: `/figma-preview.html?screen={ComponentName}`\n- **Next.js**: `/figma-preview?screen={ComponentName}`\n\nWhen asking the user about missing dimensions, remind them they can check the preview\nto see how elements currently render before deciding on dimensions.\n\n## For Each Generated Screen\n\nRun the validation script and **save output** for status.sh tracking:\n\n```bash\nmkdir -p /tmp/figma-to-react/steps/4b\n\n# For each screen, save validation output\n$SKILL_DIR/scripts/validate-dimensions-coverage.sh \\\n  /tmp/figma-to-react/captures/figma-{nodeId}.txt \\\n  /tmp/figma-to-react/metadata/{nodeId}-dimensions.json \\\n  > /tmp/figma-to-react/steps/4b/{nodeId}.json\n```\n\nReplace `{nodeId}` with the actual node ID (e.g., `237-2571`).\n\n**IMPORTANT:** The saved JSON is used by status.sh to track partial completion.\n\n### Batch Processing (Multi-Screen)\n\nFor multi-screen conversions, validate all files at once using directory mode:\n\n```bash\n# Validate all captures against all metadata files\n$SKILL_DIR/scripts/validate-dimensions-coverage.sh \\\n  /tmp/figma-to-react/captures/ \\\n  /tmp/figma-to-react/metadata/\n```\n\nOr specify multiple files explicitly:\n\n```bash\n# Validate specific screens\n$SKILL_DIR/scripts/validate-dimensions-coverage.sh \\\n  /tmp/figma-to-react/captures/figma-237-2571.txt \\\n  /tmp/figma-to-react/captures/figma-237-2416.txt \\\n  /tmp/figma-to-react/metadata/\n```\n\nThe script auto-matches capture files to dimension files by node ID (e.g., `figma-237-2571.txt` → `237-2571-dimensions.json`).\n\nThe script outputs JSON with any missing dimensions (example output):\n\n```json\n{\n  \"missing\": [\n    {\"id\": \"I237:2572;2708:1961;2026:14620\", \"name\": \"padding\"},\n    {\"id\": \"I237:2583;2603:5165\", \"name\": \"footer\"}\n  ],\n  \"critical_missing\": 2\n}\n```\n\n## If Missing Dimensions Found\n\n1. **Show the user** what's missing with friendly names (example format):\n   ```\n   Found 3 elements that may need dimensions:\n   1. padding (exit button) - I237:2572;2708:1961;2026:14620\n   2. padding (back button) - I237:2572;2708:1962;2026:14620\n   3. footer - I237:2583;2603:5165\n   ```\n\n2. **Ask about EACH element separately** using AskUserQuestion with multiple questions.\n   Build the questions array from the actual missing elements. Example structure:\n   ```\n   AskUserQuestion(questions: [\n     {\n       question: \"Dimensions for 'padding' in exit button?\",\n       header: \"Exit btn\",\n       options: [\n         {label: \"48 x 48\", description: \"Square button\"},\n         {label: \"Skip\", description: \"Don't fix\"}\n       ]\n     },\n     {\n       question: \"Dimensions for 'padding' in back button?\",\n       header: \"Back btn\",\n       options: [\n         {label: \"48 x 48\", description: \"Square button\"},\n         {label: \"Skip\", description: \"Don't fix\"}\n       ]\n     },\n     {\n       question: \"Dimensions for 'footer'?\",\n       header: \"Footer\",\n       options: [\n         {label: \"Skip\", description: \"Likely doesn't need fixing\"},\n         {label: \"393 x 32\", description: \"Full width footer\"}\n       ]\n     }\n   ])\n   ```\n\n   Tips for options:\n   - Suggest common sizes based on element name (buttons often 48x48, footers often full-width)\n   - Always include \"Skip\" option\n   - Include \"Let me check Figma\" if unsure what to suggest\n\n3. **Save decisions to disk** before applying - see [Save User Decisions](#save-user-decisions) below.\n\n4. **For each non-skipped dimension**, run (substitute actual values):\n   ```bash\n   $SKILL_DIR/scripts/add-missing-dimensions.sh \\\n     /tmp/figma-to-react/metadata/{nodeId}-dimensions.json \\\n     \"{element-id}\" {width} {height}\n   ```\n   Replace `{nodeId}`, `{element-id}`, `{width}`, and `{height}` with the actual values.\n\n   ### Batch Adding Dimensions\n\n   **Multiple IDs to single file (same dimensions):**\n   ```bash\n   # Add 393x48 to multiple button IDs in one file\n   $SKILL_DIR/scripts/add-missing-dimensions.sh \\\n     /tmp/figma-to-react/metadata/2006-2030-dimensions.json \\\n     393 48 \\\n     \"I2006:2037;2189:5232\" \"I2006:2037;2190:6255\" \"I2006:2037;2189:5226;661:724\"\n   ```\n\n   **Multiple files (same dimensions):**\n   ```bash\n   # Add 393x48 to IDs across multiple files\n   $SKILL_DIR/scripts/add-missing-dimensions.sh 393 48 \\\n     --file /tmp/figma-to-react/metadata/2006-2062-dimensions.json \"I2006:2073;2603:5160\" \"I2006:2073;2603:5161\" \\\n     --file /tmp/figma-to-react/metadata/2006-2075-dimensions.json \"I2006:2086;2603:5160\" \"I2006:2086;2603:5161\" \\\n     --file /tmp/figma-to-react/metadata/237-2416-dimensions.json \"I237:2428;2603:5160\"\n   ```\n\n   **For shared components (multi-screen):** Apply to ALL instances across ALL screen JSONs using batch mode:\n   ```bash\n   # If \"exit button\" (definition 2708:1961) is 48x48, apply to both screens in one call:\n   $SKILL_DIR/scripts/add-missing-dimensions.sh 48 48 \\\n     --file /tmp/figma-to-react/metadata/237-2416-dimensions.json \"I237:2417;2708:1961\" \\\n     --file /tmp/figma-to-react/metadata/237-2571-dimensions.json \"I237:2572;2708:1961\"\n   ```\n\n   **Note:** Manually-added dimensions get a `manual: true` flag in the JSON. This tells\n   `fix-collapsed-containers.sh` to **aggressively replace** relative sizing classes\n   (`h-full`, `w-full`, `h-auto`, `w-auto`, `h-fit`, `w-fit`) with explicit pixel values.\n\n   Dimensions from Figma MCP (without the flag) use **conservative** behavior that preserves\n   relative sizing classes, trusting the original design intent.\n\n5. **Re-run fix-collapsed-containers.sh** if any dimensions were added (substitute actual paths):\n   ```bash\n   $SKILL_DIR/scripts/fix-collapsed-containers.sh \\\n     {componentPath} \\\n     /tmp/figma-to-react/metadata/{nodeId}-dimensions.json \\\n     > {componentPath}.tmp && mv {componentPath}.tmp {componentPath}\n   ```\n   Replace `{componentPath}` and `{nodeId}` with the actual values from the current conversion.\n\n   ### Batch Fixing Collapsed Containers\n\n   **Directory mode (auto-match files by node ID):**\n   ```bash\n   # Process all tsx files in output/ with matching dimensions in metadata/\n   $SKILL_DIR/scripts/fix-collapsed-containers.sh \\\n     /path/to/output/ \\\n     /tmp/figma-to-react/metadata/\n   ```\n   Files are matched by finding the node ID in the tsx content (e.g., `PersonaScreen1.tsx` with `data-node-id=\"2006:2038\"` matches `2006-2038-dimensions.json`).\n\n   **Multiple pairs mode:**\n   ```bash\n   # Fix multiple specific file pairs\n   $SKILL_DIR/scripts/fix-collapsed-containers.sh \\\n     --pair /path/to/PersonaScreen1.tsx /tmp/figma-to-react/metadata/2006-2038-dimensions.json \\\n     --pair /path/to/PersonaScreen2.tsx /tmp/figma-to-react/metadata/2006-2062-dimensions.json \\\n     --pair /path/to/PersonaScreen3.tsx /tmp/figma-to-react/metadata/2006-2075-dimensions.json\n   ```\n   Batch modes fix files **in-place** (no stdout redirection needed).\n\n## Skip Conditions\n\n- If `critical_missing` is 0, no user interaction needed\n- Some elements may render correctly despite being flagged (false positives)\n\n## Many Missing Dimensions (>5)\n\nIf many elements are flagged, **still ask the user** - don't decide for them:\n\n```\nAskUserQuestion(questions: [\n  {\n    question: \"21 collapse-prone elements found. How to proceed?\",\n    header: \"Dimensions\",\n    options: [\n      {label: \"Skip all\", description: \"Proceed to visual validation - fix issues there if any\"},\n      {label: \"Show me the list\", description: \"I'll pick which ones to fix\"},\n      {label: \"Fix common patterns\", description: \"Auto-fix buttons (48x48), icons (24x24)\"}\n    ]\n  }\n])\n```\n\n**Never skip silently.** The user should always make the call.\n\n## Save User Decisions\n\nSave decisions to disk **before** applying them. This protects against compaction—if\ncontext is summarized between asking and applying, specific dimension values would be lost.\nSince `add-missing-dimensions.sh` is idempotent, recovery just means re-applying all\nnon-skip decisions from the saved file.\n\n```bash\n# EXAMPLE STRUCTURE - use actual IDs and decisions from current job:\ncat > /tmp/figma-to-react/steps/4b/user-decisions.json << EOF\n{\n  \"timestamp\": \"$(date -Iseconds)\",\n  \"total_missing\": ${TOTAL_MISSING},\n  \"addressed_ids\": [\n    \"${ID_1}\",\n    \"${ID_2}\",\n    \"${ID_3}\"\n  ],\n  \"decisions\": [\n    {\"id\": \"${ID_1}\", \"action\": \"48x48\", \"width\": 48, \"height\": 48},\n    {\"id\": \"${ID_2}\", \"action\": \"skip\"},\n    {\"id\": \"${ID_3}\", \"action\": \"48x48\", \"width\": 48, \"height\": 48}\n  ]\n}\nEOF\n```\n\nReplace `${...}` placeholders with actual values from the validation output and user responses.\n\n`addressed_ids` must include ALL IDs from ALL validation JSONs:\n- If 10 missing dimensions were found across all screens, all 10 must appear\n- If you only ask about some, status.sh will detect incomplete and bounce you back\n- \"skip\" counts as addressed\n\n### Partial Completion / Recovery\n\nIf resuming after compaction, check `user-decisions.json` first. If it exists, re-apply\nall non-skip decisions (idempotent). If not, re-ask the user.\n\nIf status.sh says you're still on step 4b:\n1. Read `next_action` field for remaining count\n2. Diff validation JSONs against `addressed_ids` to find remaining IDs\n3. Ask user about remaining, append to user-decisions.json\n\n## Next Step\n\nMark this step complete. Read step-5-import-tokens.md.\n",
        "skills/figma-to-react/references/step-5-import-tokens.md": "# Step 5: Import Tokens CSS\n\nOne-time setup to import generated design tokens.\n\n## Pre-flight Check\n\n```bash\n$SKILL_DIR/scripts/status.sh --check 5\n```\n\nIf this fails, it prints the correct step. Uncheck wrongly-completed TodoWrite items and read that step file instead.\n\n## Check If Already Imported\n\nLook for existing import in main CSS file:\n```bash\ngrep -l \"figma-tokens.css\" src/index.css src/App.css src/styles/*.css 2>/dev/null\n```\n\n## If Not Imported\n\nAdd to main CSS file (e.g., `src/index.css`):\n\n```css\n@import \"./styles/figma-tokens.css\";\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n```\n\nThe import must come BEFORE Tailwind directives.\n\n## Why This Matters\n\nFigma MCP outputs code like:\n```jsx\nclassName=\"bg-[var(--background\\/overlay,rgba(0,0,0,0.8))]\"\n```\n\nThe CSS variables need to be defined for Tailwind to parse these correctly. The tokens file provides:\n```css\n:root {\n  --background\\/overlay: rgba(0,0,0,0.8);\n}\n```\n\n## Mark Complete\n\nAfter importing (or if already imported), save completion marker:\n\n```bash\nmkdir -p /tmp/figma-to-react/steps/5\necho '{\"complete\": true}' > /tmp/figma-to-react/steps/5/complete.json\n```\n\n## Next Step\n\nRead step-6-validation.md.\n",
        "skills/figma-to-react/references/step-6-validation.md": "# Step 6: Validate Screens\n\nCompare rendered components to Figma screenshots. Fix until visual diff ≤ 5%.\n\n## Pre-flight Check\n\n```bash\n$SKILL_DIR/scripts/status.sh --check 6\n```\n\nIf this fails, it prints the correct step. Uncheck wrongly-completed TodoWrite items and read that step file instead.\n\n## Prerequisites\n\n- Dev server running (started in step 3b)\n- Preview created (step 3b)\n- Figma screenshots captured\n- Bun installed (step 1)\n\n## Preview URL Format\n\nThe preview URL depends on framework (from step 3b):\n\n- **Vite**: `http://localhost:{port}/figma-preview.html?screen={ComponentName}`\n- **Next.js**: `http://localhost:{port}/figma-preview?screen={ComponentName}`\n\n## Script: validate-component.sh\n\nRuns one validation pass. Captures screenshot, compares, returns status.\n\n```bash\n$SKILL_DIR/scripts/validate-component.sh \\\n  <component> <figma-png> <preview-url> <component-path> [prev-diff]\n```\n\n**Exit codes:**\n| Code | Status | Action |\n|------|--------|--------|\n| 0 | `success` | Done - diff ≤ 5% |\n| 1 | `needs_fix` | Make ONE fix, re-run with new diff as prev-diff |\n| 2 | `good_enough` | Done - diff ≤ 1% |\n| 5 | `max_passes` | Done - 10 passes reached, accept current state |\n| 6 | `no_improvement` | Change was reverted, try a DIFFERENT fix |\n\n**Output (JSON):**\n```json\n{\n  \"status\": \"needs_fix\",\n  \"pass\": 2,\n  \"diff\": 8.45,\n  \"prev_diff\": 12.30,\n  \"diff_image\": \"/tmp/.../pass-2/diff.png\",\n  \"message\": \"Pass 2: 8.45% (improved 3.85% from 12.30%)\"\n}\n```\n\n## Validation Loop\n\nFor each screen, spawn a sub-agent:\n\n```\nTask(\n  subagent_type: \"general-purpose\",\n  prompt: \"\"\"\n    Validate component until done.\n\n    INPUTS:\n    - component: \"{ComponentName}\"\n    - componentPath: \"{componentPath}\"\n    - figmaPng: \"/tmp/figma-to-react/screenshots/figma-{nodeId}.png\"\n    - previewUrl: \"{previewUrl}\" (see Preview URL Format above)\n    - SKILL_DIR: \"{skillDir}\"\n\n    NOTE: previewUrl format depends on framework - see Preview URL Format section\n\n    Track current diff across iterations.\n\n    LOOP:\n\n    1. RUN VALIDATION\n       result=$($SKILL_DIR/scripts/validate-component.sh \\\n         \"{ComponentName}\" \"{figmaPng}\" \"{previewUrl}\" \"{componentPath}\" $PREV_DIFF)\n\n       Parse JSON output. Note the exit code.\n\n    2. CHECK STATUS\n       - Exit 0 or 2: DONE - report success\n       - Exit 5: DONE - max passes reached, report final state\n       - Exit 1: Continue to step 3 (fix needed)\n       - Exit 6: Continue to step 3 (try different fix, change was reverted)\n\n    3. FIX\n       - Read diff_image from output\n       - Bright areas = differences\n       - Make ONE targeted fix to {componentPath}\n       - If exit was 6: your last fix didn't help, try something DIFFERENT\n       - Update PREV_DIFF to current diff\n       - Go to step 1\n\n    RETURN: final status, diff %, fixes made\n  \"\"\"\n)\n```\n\n## Run in Parallel\n\nSpawn all validation sub-agents simultaneously. Each uses its own preview URL.\n\n## Save Results\n\nEach validation must save its final result for status.sh tracking:\n\n```bash\n# The validate-component.sh script outputs JSON. Save it:\nmkdir -p /tmp/figma-to-react/validation/{ComponentName}\n\n$SKILL_DIR/scripts/validate-component.sh \\\n  \"{ComponentName}\" \"{figmaPng}\" \"{previewUrl}\" \"{componentPath}\" $PREV_DIFF \\\n  | tee /tmp/figma-to-react/validation/{ComponentName}/result.json\n```\n\nOr let the sub-agent redirect stdout to result.json after the final pass.\n\n**Note:** status.sh checks for `result.json` with status = `success`, `good_enough`, or `max_passes` to determine completion.\n\n## Next Step\n\nRead step-7-rename-assets.md.\n",
        "skills/figma-to-react/references/step-7-rename-assets.md": "# Step 7: Rename Generic Assets (Optional)\n\nOffer to rename assets with generic names to meaningful ones.\n\n## Pre-flight Check\n\n```bash\n$SKILL_DIR/scripts/status.sh --check 7\n```\n\nIf this fails, it prints the correct step. Uncheck wrongly-completed TodoWrite items and read that step file instead.\n\n## Check for Generic Names\n\nLook for assets like:\n- `asset.svg`, `asset-1.svg`, `asset-abc123.svg`\n- `image.png`, `image-1.png`\n\n```bash\nls {assetDir}/*.{svg,png,jpg} 2>/dev/null | grep -E '(asset|image)[-0-9]*\\.'\n```\n\n## If Generic Assets Found\n\nPresent to user:\n```\nFound 12 assets with generic names. Analyze and rename?\n\nCurrent -> Suggested:\n  asset.svg      -> close-icon.svg (X shape, likely close button)\n  asset-1.svg    -> back-arrow.svg (left-pointing arrow)\n  image.png      -> face-capture-bg.png (blurred face photo)\n\nApply renames? [Y/n/select]\n```\n\n## Renaming Process\n\nUse the rename-assets.sh script:\n```bash\n# Single component\n$SKILL_DIR/scripts/rename-assets.sh \\\n  /tmp/figma-to-react/captures/figma-{nodeId}.txt \\\n  {assetDir} \\\n  {componentPath}\n\n# Directory of components (finds all .tsx files)\n$SKILL_DIR/scripts/rename-assets.sh \\\n  /tmp/figma-to-react/captures/figma-{nodeId}.txt \\\n  {assetDir} \\\n  src/components/\n\n# Multiple component files\n$SKILL_DIR/scripts/rename-assets.sh \\\n  /tmp/figma-to-react/captures/figma-{nodeId}.txt \\\n  {assetDir} \\\n  src/A.tsx src/B.tsx\n```\n\nThe script has two phases:\n1. **Rename**: Parses MCP output for component descriptions, renames `asset-*.svg` to meaningful names\n2. **Dedup**: Merges identical assets (normalizes SVG ids before comparing), keeps shortest/best name\n\n## Mark Complete\n\nAfter renaming (or if no generic assets found), save completion marker:\n\n```bash\nmkdir -p /tmp/figma-to-react/steps/7\necho '{\"complete\": true}' > /tmp/figma-to-react/steps/7/complete.json\n```\n\n## Next Step\n\nRead step-8-disarm-hook.md.\n",
        "skills/figma-to-react/references/step-8-disarm-hook.md": "# Step 8: Disarm Hook and Finalize\n\nClean up and verify the workflow completed successfully.\n\n## Pre-flight Check\n\n```bash\n$SKILL_DIR/scripts/status.sh --check 8\n```\n\nIf this fails, it prints the correct step. Uncheck wrongly-completed TodoWrite items and read that step file instead.\n\n## Disarm the Hook\n\n```bash\nrm /tmp/figma-to-react/capture-active\n```\n\nThis returns Figma MCP to normal operation (output shown, not suppressed).\n\n## Verify Results\n\n1. **Components generated**: Check that all .tsx files exist\n2. **Tokens imported**: Verify CSS import is in main stylesheet\n3. **Assets downloaded**: Check asset directory has files\n4. **Dev server works**: Components render without errors\n\n## Summary to User\n\n```\nFigma to React complete!\n\nGenerated:\n  - {N} components in {componentDir}/\n  - {M} assets in {assetDir}/\n  - Design tokens in {tokensFile}\n\nNext steps:\n  1. Add interactivity (onClick, useState, etc.)\n  2. Import fonts used in Figma designs\n  3. Connect to your app's routing\n```\n\n## Cleanup\n\nRemove temporary files:\n```bash\nrm -rf /tmp/figma-to-react\n```\n\n## Skill Complete\n\nAll steps done. Mark final todo as complete.\n"
      },
      "plugins": [
        {
          "name": "figma-to-react",
          "source": "./",
          "description": "Convert Figma designs to pixel-perfect React components with Tailwind CSS",
          "version": "0.9.27",
          "author": {
            "name": "Gary Basin"
          },
          "repository": "https://github.com/gbasin/figma-to-react",
          "license": "MIT",
          "keywords": [
            "figma",
            "react",
            "tailwind",
            "design-to-code",
            "ios",
            "mobile"
          ],
          "category": "design",
          "categories": [
            "design",
            "design-to-code",
            "figma",
            "ios",
            "mobile",
            "react",
            "tailwind"
          ],
          "install_commands": [
            "/plugin marketplace add gbasin/figma-to-react",
            "/plugin install figma-to-react@figma-to-react"
          ]
        }
      ]
    }
  ]
}