{
  "author": {
    "id": "superfly",
    "display_name": "fly.io",
    "avatar_url": "https://avatars.githubusercontent.com/u/22525303?v=4"
  },
  "marketplaces": [
    {
      "name": "superfly-plugins",
      "version": null,
      "description": "Assorted Claude Code plugins for Fly.io and Sprites",
      "repo_full_name": "superfly/claude-plugins",
      "repo_url": "https://github.com/superfly/claude-plugins",
      "repo_description": "An unofficial Claude Code plugin marketplace from Fly.io",
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-21T14:12:32Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"superfly-plugins\",\n  \"owner\": {\n    \"name\": \"Fly.io\",\n    \"email\": \"support@fly.io\"\n  },\n  \"metadata\": {\n    \"description\": \"Assorted Claude Code plugins for Fly.io and Sprites\",\n    \"version\": \"0.1.0\",\n    \"pluginRoot\": \"./\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"sprite-handoff\",\n      \"source\": \"./sprite-handoff\",\n      \"description\": \"Offload Claude Code sessions to Sprites.dev sandboxes - run code remotely, sync files, manage background tasks\",\n      \"category\": \"cloud\",\n      \"tags\": [\"sprites\", \"cloud\", \"sandbox\", \"remote-execution\", \"handoff\"]\n    }\n  ]\n}\n",
        "README.md": "<p align=\"center\">\n  <img src=\"hero.png\" alt=\"Superfly Plugins\" />\n</p>\n\n<h1 align=\"center\">Superfly Plugins</h1>\n\n<p align=\"center\">A Claude Code plugin marketplace from <a href=\"https://fly.io\">Fly.io</a>.</p>\n\n## Installation\n\n```\n/plugin marketplace add superfly/claude-plugins\n```\n\n## Updating Plugins\n\nPlugins auto-update when Claude Code starts. To manually refresh and update:\n\n```\n/plugin marketplace update superfly-plugins\n```\n\nThis fetches the latest marketplace data and updates installed plugins to their newest versions.\n\n## Available Plugins\n\n| Plugin | Description | Install |\n|--------|-------------|---------|\n| [sprite-handoff](./sprite-handoff) | Offload Claude Code sessions to Sprites.dev cloud sandboxes | `/plugin install sprite-handoff@superfly-plugins` |\n\n## License\n\nMIT\n",
        "sprite-handoff/README.md": "# sprite-handoff\n\nA Claude Code plugin for offloading sessions to [Sprites.dev](https://sprites.dev) cloud sandboxes.\n\n## Features\n\n- **One-Command Handoff**: Sync files and launch Claude Code on a sprite with a single command\n- **Git Worktree Isolation**: Each session gets its own git worktree for clean state management\n- **Session Persistence**: Resume sessions by ID - no need to re-sync files\n- **Pull Changes Back**: Fetch modified files from remote sessions to your local machine\n- **Background Tasks**: Run long-running builds/tests in the cloud while you work locally\n\n## Prerequisites\n\n1. **Sprites CLI installed and authenticated**:\n   ```bash\n   # Install (if not already)\n   curl -sSL https://sprites.dev/install.sh | bash\n\n   # Authenticate\n   sprite org auth\n   ```\n\n2. **Git repository**: The sync command uses git to determine which files to transfer\n\n3. **Go 1.21+** (for building the CLI tool)\n\n## Installation\n\nInstall via the Superfly Plugins marketplace:\n\n```\n/plugin marketplace add superfly/claude-plugins\n/plugin install sprite-handoff@superfly-plugins\n```\n\nTo manually check for updates:\n\n```\n/plugin marketplace update superfly-plugins\n```\n\n## Quick Start\n\n```bash\n# Hand off a task to a sprite (syncs files + launches Claude)\n./bin/sprite-handoff run my-sprite \"Run the test suite and fix any failures\"\n\n# Resume a previous session\n./bin/sprite-handoff run my-sprite \"Continue fixing the tests\" --resume <session-id>\n\n# Pull changed files back to local machine\n./bin/sprite-handoff pull <session-id>\n\n# List all sessions\n./bin/sprite-handoff sessions list\n```\n\n## CLI Commands\n\n### Core Commands\n\n| Command | Description |\n|---------|-------------|\n| `run <sprite> <prompt>` | Sync files and run Claude Code on a sprite |\n| `pull <session-id>` | Pull changed files from a session back to local |\n| `sessions list` | List all handoff sessions |\n| `sessions info <id>` | Show details about a session |\n| `sessions clean` | Remove old sessions |\n\n### File Operations\n\n| Command | Description |\n|---------|-------------|\n| `sync <sprite> [dir]` | Sync git-tracked files to a sprite |\n| `read <sprite> <path>` | Read a file from sprite filesystem |\n| `write <sprite> <remote> <local>` | Write a local file to sprite |\n| `list <sprite> [path]` | List directory contents |\n| `delete <sprite> <path>` | Delete a file or directory |\n\n### Authentication\n\n| Command | Description |\n|---------|-------------|\n| `token` | Print sprite auth token |\n| `claude-token` | Print Claude Code OAuth token |\n\n## The `run` Command\n\nThe main command for handing off work to a sprite:\n\n```bash\nsprite-handoff run <sprite-name> <prompt> [flags]\n\nFlags:\n  --resume, -r <id>     Resume an existing session\n  --model <model>       Claude model (sonnet, opus, haiku)\n  --max-budget <amt>    Maximum budget in USD\n  --source <dir>        Source directory (default: .)\n  -v, --verbose         Verbose output\n```\n\n### New Session Flow\n\n1. Creates a bare git repo on the sprite (if first time for this project)\n2. Creates a new git worktree for session isolation\n3. Syncs all git-tracked files to the worktree\n4. Creates an initial commit\n5. Saves session metadata (locally and remotely)\n6. Launches Claude Code with your prompt\n\n### Resume Flow\n\n1. Looks up session by ID from local cache\n2. Verifies worktree still exists\n3. Launches Claude Code with `--resume` flag\n4. No re-sync needed - worktree preserves state\n\n## Architecture\n\n### Directory Structure on Sprite\n\n```\n/handoffs/\n├── my-project/                    # Bare git repo (one per project)\n├── my-project.worktrees/\n│   ├── <session-uuid-1>/          # Working directory for session 1\n│   └── <session-uuid-2>/          # Working directory for session 2\n└── .sessions/\n    ├── <session-uuid-1>.json      # Session metadata\n    └── <session-uuid-2>.json\n```\n\n### Local Session Cache\n\nSessions are cached locally at `~/.sprite-handoff/sessions.json` for quick lookups.\n\n## Using as a Claude Code Plugin\n\nWhen installed as a Claude Code plugin, there are three ways to interact with sprite-handoff:\n\n### 1. Slash Commands (Primary Entry Point)\n\n| Command | Description |\n|---------|-------------|\n| `/sprite:handoff \"prompt\"` | **Main entry** - hand off current task to a remote sprite |\n| `/sprite:create` | Create a new sprite or select an existing one |\n| `/sprite:sync` | Sync git-tracked files to the active sprite |\n| `/sprite:exec` | Execute commands in the active sprite |\n| `/sprite:sessions` | List, attach, or kill running sessions |\n| `/sprite:status` | Show current sprite status, disk usage, and sessions |\n\n### 2. Natural Language via Agent\n\nThe `sprite-orchestrator` agent triggers automatically on phrases like:\n- \"Hand this off to a sprite\"\n- \"Run this in a sprite\"\n- \"Let the sprite handle this\"\n- \"Offload this work to the cloud\"\n\nThe agent coordinates the full workflow: sprite selection/creation, context generation, file sync, and remote Claude launch.\n\n### 3. Direct CLI\n\nThe Go binary can also be invoked directly from your terminal:\n\n```bash\n./bin/sprite-handoff run my-sprite \"Run tests\"\n./bin/sprite-handoff pull <session-id>\n./bin/sprite-handoff sessions list\n```\n\n### Recommended Workflow\n\n1. **Invoke**: Use `/sprite:handoff \"Run tests and fix failures\"` or natural language\n2. **Automatic**: Plugin syncs files, creates isolated git worktree, launches remote Claude\n3. **Continue**: You receive a session ID and can continue local work\n4. **Retrieve**: Pull changes back with `/sprite:sessions` or `sprite-handoff pull <session-id>`\n\n## Development\n\n### Building\n\n```bash\nmake build          # Build for current platform\nmake build-all      # Build for all platforms\n```\n\n### Testing\n\n```bash\nmake test           # Run unit tests\nmake test-unit      # Run unit tests only\nmake test-coverage  # Run with coverage report\n```\n\n### Integration & E2E Tests\n\nIntegration and E2E tests require a real sprite:\n\n```bash\n# Set environment variables\nexport SPRITE_NAME=my-test-sprite\n\n# Run integration tests\nmake test-integration\n\n# Run E2E tests\nmake test-e2e\n\n# Run all tests\nmake test-all\n```\n\n### Code Quality\n\n```bash\nmake fmt            # Format code\nmake lint           # Run linter\nmake vet            # Run go vet\n```\n\n## Project Structure\n\n```\nsprite-handoff/\n├── .claude-plugin/\n│   └── plugin.json         # Plugin manifest\n├── cmd/\n│   └── sprite-handoff/\n│       └── main.go         # CLI entry point\n├── internal/\n│   ├── api/                # Sprites Filesystem API client\n│   ├── config/             # Token and config management\n│   ├── session/            # Session metadata management\n│   ├── sync/               # Git file sync logic\n│   └── worktree/           # Git worktree operations\n├── tests/\n│   ├── integration/        # Integration tests\n│   └── e2e/                # End-to-end tests\n├── commands/               # Plugin commands\n├── agents/                 # Plugin agents\n├── bin/                    # Built binaries\n├── Makefile\n└── README.md\n```\n\n## Authentication\n\n### Sprite Token\n\nUsed for Sprites.dev API calls. Read from:\n1. `SPRITE_TOKEN` environment variable\n2. macOS keychain (sprites CLI stores it there)\n3. `~/.sprites/sprites.json` config file\n\n### Claude Token\n\nUsed to authenticate Claude Code on remote sprites. Read from:\n1. `ANTHROPIC_API_KEY` environment variable\n2. macOS keychain (\"Claude Code-credentials\" entry)\n\nThe token is passed to remote Claude via `CLAUDE_CODE_OAUTH_TOKEN` environment variable.\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "sprite-handoff",
          "source": "./sprite-handoff",
          "description": "Offload Claude Code sessions to Sprites.dev sandboxes - run code remotely, sync files, manage background tasks",
          "category": "cloud",
          "tags": [
            "sprites",
            "cloud",
            "sandbox",
            "remote-execution",
            "handoff"
          ],
          "categories": [
            "cloud",
            "handoff",
            "remote-execution",
            "sandbox",
            "sprites"
          ],
          "install_commands": [
            "/plugin marketplace add superfly/claude-plugins",
            "/plugin install sprite-handoff@superfly-plugins"
          ]
        }
      ]
    }
  ]
}