{
  "author": {
    "id": "andrewm4894",
    "display_name": "Andrew Maguire",
    "avatar_url": "https://avatars.githubusercontent.com/u/2178292?u=8461034c2873afbebfe143bfb48bdc409bdc2980&v=4"
  },
  "marketplaces": [
    {
      "name": "log-cleaner-marketplace",
      "version": null,
      "description": "Claude Code log cleaner plugin marketplace",
      "repo_full_name": "andrewm4894/claude-log-cleaner",
      "repo_url": "https://github.com/andrewm4894/claude-log-cleaner",
      "repo_description": "Claude Code plugin to auto-delete session logs after configurable retention period",
      "signals": {
        "stars": 3,
        "forks": 0,
        "pushed_at": "2026-01-12T16:20:45Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"$schema\": \"https://anthropic.com/claude-code/marketplace.schema.json\",\n  \"name\": \"log-cleaner-marketplace\",\n  \"description\": \"Claude Code log cleaner plugin marketplace\",\n  \"owner\": {\n    \"name\": \"andrewm4894\",\n    \"email\": \"andrewm4894@gmail.com\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"log-cleaner\",\n      \"description\": \"Auto-delete Claude Code session logs after configurable retention period to prevent sensitive data exposure\",\n      \"version\": \"2.8.0\",\n      \"category\": \"security\",\n      \"source\": \"./plugins/log-cleaner\",\n      \"homepage\": \"https://github.com/andrewm4894/claude-log-cleaner\"\n    }\n  ]\n}\n",
        "README.md": "# Claude Log Cleaner\n\nA Claude Code plugin that automatically deletes session log files after a configurable retention period to prevent sensitive data exposure.\n\n> **The Problem:** I watched [this YouTube video](https://www.youtube.com/watch?v=TWhKGqYQT9g) and freaked out a bit - Claude Code stores a ton of log files locally in `~/.claude/` - files that can contain API keys, tokens, and other secrets from your sessions. That's another attack surface sitting on your laptop. This plugin helps reduce that risk by automatically cleaning up old logs and giving you easy commands to scan for exposed secrets.\n\n## Why This Plugin?\n\nClaude Code stores session logs in `~/.claude/` that can contain sensitive information from your chat sessions, including:\n\n- API keys (OpenAI, Anthropic, PostHog, etc.)\n- Bearer tokens and authentication headers\n- Database credentials\n- Environment variables\n- Other secrets passed through commands\n\nThis plugin helps you maintain security hygiene by automatically cleaning up old logs.\n\n## Requirements\n\n- Python 3.8+\n- Optional: `trufflehog` or `detect-secrets` for enhanced secret scanning\n\n### Enhanced Scanning (Optional)\n\nInstall one or both for improved secret detection. All available scanners run together for maximum coverage.\n\n**TruffleHog** (recommended) - 700+ secret detectors:\n```bash\nbrew install trufflehog\n```\n\n**detect-secrets** - 20+ secret types:\n```bash\npip install detect-secrets\n```\n\nWithout these, the plugin uses built-in regex patterns for common secrets (OpenAI, Anthropic, GitHub, AWS, Slack, PostHog).\n\n## Installation\n\n### Step 1: Add the marketplace\n\n```\n/plugin marketplace add andrewm4894/claude-log-cleaner\n```\n\n### Step 2: Install the plugin\n\n```\n/plugin install log-cleaner@log-cleaner-marketplace\n```\n\n### Updating\n\n```\n/plugin update log-cleaner@log-cleaner-marketplace\n```\n\n### Uninstalling\n\n```\n# Uninstall the plugin\n/plugin uninstall log-cleaner\n\n# Remove the marketplace (optional)\n/plugin marketplace remove log-cleaner-marketplace\n```\n\n### Reinstalling (fresh install)\n\nIf updates aren't working, try a full reinstall:\n\n```\n# Remove everything\n/plugin uninstall log-cleaner\n/plugin marketplace remove log-cleaner-marketplace\n\n# Reinstall\n/plugin marketplace add andrewm4894/claude-log-cleaner\n/plugin install log-cleaner@log-cleaner-marketplace\n```\n\n### Local Development\n\n```bash\n# Clone the repository\ngit clone https://github.com/andrewm4894/claude-log-cleaner.git\n\n# In Claude Code, load the plugin for testing:\nclaude --plugin-dir /path/to/claude-log-cleaner/plugins/log-cleaner\n```\n\n## Commands\n\n| Command | Description |\n|---------|-------------|\n| `/log-cleaner:clean` | Manually run cleanup |\n| `/log-cleaner:status` | Show directory sizes and config |\n| `/log-cleaner:set-retention <hours>` | Set retention period |\n| `/log-cleaner:scan` | Scan logs for exposed secrets |\n\n### Examples\n\n```bash\n# Check current status\n/log-cleaner:status\n\n# Preview what would be deleted (dry run)\n/log-cleaner:clean --dry-run\n\n# Set retention to 48 hours\n/log-cleaner:set-retention 48\n\n# Delete files older than 1 hour\n/log-cleaner:clean --hours 1\n\n# Scan for secrets in your logs\n/log-cleaner:scan\n```\n\n## Configuration\n\nThe plugin creates a config file at `~/.claude/log-cleaner-config.json`:\n\n```json\n{\n  \"retention_hours\": 24,\n  \"clean_on_session_end\": true,\n  \"dry_run\": false\n}\n```\n\n### Options\n\n| Option | Default | Description |\n|--------|---------|-------------|\n| `retention_hours` | 24 | Hours to retain files before deletion |\n| `clean_on_session_end` | true | Auto-clean when Claude Code session ends |\n| `dry_run` | false | Preview mode (no actual deletion) |\n\n**Note:** Config values are used as defaults. The `--dry-run` CLI flag overrides the config value for that run.\n\n## What Gets Cleaned\n\nThe plugin cleans all Claude Code data directories:\n\n- `~/.claude/debug/` - Session debug logs\n- `~/.claude/file-history/` - File edit history\n- `~/.claude/projects/` - Project-specific data\n- `~/.claude/todos/` - Todo lists\n- `~/.claude/plans/` - Planning data\n- `~/.claude/shell-snapshots/` - Shell state snapshots\n\n## Automatic Cleanup\n\nThe plugin hooks into Claude Code's `SessionEnd` event to automatically clean old logs when you finish a session. This ensures cleanup happens regularly without manual intervention.\n\nTo disable automatic cleanup, edit the config:\n\n```json\n{\n  \"clean_on_session_end\": false\n}\n```\n\n## Security Considerations\n\n- Logs may contain sensitive data from your conversations\n- This plugin helps but is not a complete security solution\n- Consider also:\n  - Rotating API keys regularly\n  - Using environment variables instead of hardcoded secrets\n  - Reviewing what data you paste into Claude Code\n\n## License\n\nMIT\n\n## Contributing\n\nIssues and PRs welcome at https://github.com/andrewm4894/claude-log-cleaner\n"
      },
      "plugins": [
        {
          "name": "log-cleaner",
          "description": "Auto-delete Claude Code session logs after configurable retention period to prevent sensitive data exposure",
          "version": "2.8.0",
          "category": "security",
          "source": "./plugins/log-cleaner",
          "homepage": "https://github.com/andrewm4894/claude-log-cleaner",
          "categories": [
            "security"
          ],
          "install_commands": [
            "/plugin marketplace add andrewm4894/claude-log-cleaner",
            "/plugin install log-cleaner@log-cleaner-marketplace"
          ]
        }
      ]
    }
  ]
}