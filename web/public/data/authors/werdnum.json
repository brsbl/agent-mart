{
  "author": {
    "id": "werdnum",
    "display_name": "Andrew Garrett",
    "avatar_url": "https://avatars.githubusercontent.com/u/271070?u=35a65b6570ad6e6583a59f5da907e62b6b7dcf36&v=4"
  },
  "marketplaces": [
    {
      "name": "werdnum-plugins",
      "version": null,
      "description": "Safety checks for Bash commands with auto-fix suggestions - prevents dangerous operations, enforces timeouts, blocks commits to main branch, and suggests command rewrites",
      "repo_full_name": "werdnum/claude-code-plugins",
      "repo_url": "https://github.com/werdnum/claude-code-plugins",
      "repo_description": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-02-11T08:10:15Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"werdnum-plugins\",\n  \"owner\": {\n    \"name\": \"Andrew Garrett\",\n    \"email\": \"andrewgarrett@google.com\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"bash-guard\",\n      \"source\": \"./plugins/bash-guard\",\n      \"version\": \"1.0.0\",\n      \"description\": \"Safety checks for Bash commands with auto-fix suggestions - prevents dangerous operations, enforces timeouts, blocks commits to main branch, and suggests command rewrites\"\n    },\n    {\n      \"name\": \"format-and-lint\",\n      \"source\": \"./plugins/format-and-lint\",\n      \"version\": \"1.0.0\",\n      \"description\": \"Auto-format and lint files after edits with support for Python, TypeScript, and Angular\"\n    },\n    {\n      \"name\": \"guardian\",\n      \"source\": \"./plugins/guardian\",\n      \"version\": \"1.0.0\",\n      \"description\": \"Test verification, pre-commit review workflow, and stop validation to ensure code quality\"\n    },\n    {\n      \"name\": \"development-agents\",\n      \"source\": \"./plugins/development-agents\",\n      \"version\": \"1.0.0\",\n      \"description\": \"Collection of specialized development agents and commands for common workflows\"\n    },\n    {\n      \"name\": \"python-utils\",\n      \"source\": \"./plugins/python-utils\",\n      \"version\": \"1.0.0\",\n      \"description\": \"Python development utilities including advanced refactoring capabilities with rope\"\n    },\n    {\n      \"name\": \"jj-snapshot\",\n      \"source\": \"./plugins/jj-snapshot\",\n      \"version\": \"1.0.0\",\n      \"description\": \"Automatically snapshot repository state with Jujutsu (jj) after each file edit\"\n    },\n    {\n      \"name\": \"workspace-reuse\",\n      \"source\": \"./plugins/workspace-reuse\",\n      \"version\": \"1.0.0\",\n      \"description\": \"Manage workspace state for reuse between tasks - auto-switch from merged PR branches, fetch updates, and block stale operations\"\n    }\n  ]\n}\n",
        "README.md": "# Claude Code Plugins\n\nPersonal collection of Claude Code plugins for development workflows, extracted from real-world projects and designed for reusability across codebases.\n\n## Table of Contents\n\n- [Overview](#overview)\n- [Quick Start](#quick-start)\n- [Available Plugins](#available-plugins)\n- [Configuration Philosophy](#configuration-philosophy)\n- [Plugin Comparison](#plugin-comparison)\n- [Installation Guide](#installation-guide)\n- [Usage Examples](#usage-examples)\n- [Continuous Integration](#continuous-integration)\n- [Development](#development)\n- [Architecture](#architecture)\n- [Contributing](#contributing)\n- [License](#license)\n\n## Overview\n\nThis repository serves as a local plugin marketplace for Claude Code, containing four production-ready plugins that enhance development workflows:\n\n1. **bash-guard** - Safety enforcement for shell commands\n2. **format-and-lint** - Automated code quality checks\n3. **guardian** - Test verification and quality gates\n4. **development-agents** - Specialized AI agents for development tasks\n\nAll plugins were extracted from the `family-assistant` and `websidian` projects, refactored for reusability, and enhanced with comprehensive configuration systems.\n\n### Why These Plugins?\n\nThese plugins solve real development workflow challenges:\n\n- **Prevent mistakes** before they happen (bash-guard)\n- **Maintain code quality** automatically (format-and-lint)\n- **Enforce testing discipline** without manual checking (guardian)\n- **Delegate specialized tasks** to focused agents (development-agents)\n\n## Quick Start\n\n### 1. Add the Marketplace\n\n```bash\n# Local path (for development)\n/plugin marketplace add /data/ssd/sync/workspace/src/claude-code-plugins\n\n# Or from git remote\n/plugin marketplace add https://github.com/your-username/claude-code-plugins\n```\n\n### 2. Install Plugins\n\n```bash\n# Install all plugins\n/plugin install bash-guard@werdnum-plugins\n/plugin install format-and-lint@werdnum-plugins\n/plugin install guardian@werdnum-plugins\n/plugin install development-agents@werdnum-plugins\n\n# Or browse and install interactively\n/plugin\n```\n\n### 3. Verify Installation\n\n```bash\n/plugin list\n```\n\n### 4. Bootstrap Configuration (Recommended)\n\nUse the `/bootstrap-plugins` command to automatically configure all plugins:\n\n```bash\n/bootstrap-plugins\n```\n\nThis command will:\n- Auto-detect your project type and characteristics\n- Ask a few critical configuration questions\n- Generate optimal configurations for all plugins\n- Set up the marketplace in `.claude/settings.json`\n\n### 5. Manual Configuration (Alternative)\n\nIf you prefer manual setup, each plugin works out of the box with sensible defaults. To customize:\n\n```bash\n# Create project-specific config\nmkdir -p .claude\necho '{\"bannedCommands\": {\"enabled\": true}}' > .claude/bash-guard.json\n\n# Or create global config\nmkdir -p ~/.config/claude-code\necho '{\"linting\": {\"enabled\": true}}' > ~/.config/claude-code/format-lint.json\n```\n\n## Available Plugins\n\n### bash-guard\n\n**Category**: Safety & Protection\n**Hook Type**: PreToolUse (Bash)\n**Configuration**: `bash-guard.json`\n\nPrevents dangerous shell commands from executing and enforces best practices. Supports automatic command rewriting and timeout enforcement with suggestion-based feedback.\n\n**Key Features**:\n- Block dangerous commands (rm -rf /, fork bombs, etc.)\n- Prevent commits to protected branches (main/master)\n- Enforce minimum timeouts for long-running commands\n- Block specific commands from running in background\n- **Auto-fix/Suggestion mode**: Suggest command rewrites and timeout adjustments\n- **Command replacement**: Transform problematic commands into safer alternatives\n\n**Use Cases**:\n- Prevent accidental system damage\n- Enforce git workflow conventions\n- Ensure adequate test timeouts\n- Project-specific command restrictions\n\n**[Full Documentation →](plugins/bash-guard/README.md)**\n\n---\n\n### format-and-lint\n\n**Category**: Code Quality\n**Hook Type**: PostToolUse (Edit/Write)\n**Configuration**: `format-lint.json`\n\nAutomatically format and lint code after edits, providing immediate feedback on code quality issues.\n\n**Key Features**:\n- **Python**: ruff format, ruff check, basedpyright, ast-grep\n- **TypeScript/JavaScript**: prettier, eslint\n- **Angular**: prettier, eslint for .ts/.html/.css\n- File formatters: ensure newline at EOF, trim whitespace\n- Informational only (doesn't block)\n\n**Use Cases**:\n- Maintain consistent code style\n- Catch type errors immediately\n- Enforce project-specific patterns (ast-grep)\n- Multi-language projects\n\n**[Full Documentation →](plugins/format-and-lint/README.md)**\n\n---\n\n### guardian\n\n**Category**: Quality Gates\n**Hook Types**: PreToolUse (Bash), Stop\n**Configuration**: `guardian.json`\n\nEnsures code quality through test verification, pre-commit workflows, and completion validation.\n\n**Key Features**:\n- **Test Verification**: Ensures tests run and pass before commits\n- **Pre-Commit Review**: Executes git adds, runs pre-commit hooks, optional code review\n- **Stop Validation**: \"Keep going\" prompts to ensure work completeness\n- **Oneshot Mode**: Strict requirements for automated/CI environments\n\n**Use Cases**:\n- Enforce testing discipline\n- Automate pre-commit workflows\n- Prevent incomplete work sessions\n- CI/CD integration with oneshot mode\n\n**[Full Documentation →](plugins/guardian/README.md)**\n\n---\n\n### development-agents\n\n**Category**: Specialized Agents\n**Hook Type**: None (agents & commands)\n**Configuration**: None required\n\nCollection of specialized AI agents for focused development tasks.\n\n**Included Agents**:\n- **systematic-debugger** (Opus): Methodical bug investigation\n- **focused-coder** (Haiku): Self-contained implementation tasks\n- **mechanical-coder**: Repetitive changes with ast-grep\n- **codebase-researcher**: Code exploration and understanding\n- **external-research-specialist**: Web research and documentation\n- **playwright-qa-tester**: UI testing with Playwright\n- **parallel-coder**: Coordinating parallel development\n\n**Included Commands**:\n- **/bootstrap-plugins**: Auto-configure all plugins for your project\n- **/test**: Run tests and display output\n\n**Use Cases**:\n- Delegate debugging to specialized agent\n- Parallel implementation across files\n- Research unfamiliar APIs\n- Systematic code exploration\n\n**[Full Documentation →](plugins/development-agents/README.md)**\n\n## Configuration Philosophy\n\nAll plugins (except development-agents) support a **layered configuration system**:\n\n```\nProject Override (.claude/plugin-name.json)\n           ↓\nGlobal Override (~/.config/claude-code/plugin-name.json)\n           ↓\nPlugin Defaults (config/plugin-name-config.json)\n```\n\n### How Configuration Merging Works\n\n1. **Plugin defaults** provide sensible out-of-the-box behavior\n2. **Global overrides** customize behavior across all your projects\n3. **Project overrides** handle project-specific requirements\n\n**Merge Strategy**:\n- Objects: Deep merge (recursive)\n- Arrays/Primitives: Complete replacement\n\n**Example**:\n\n```json\n// Plugin defaults\n{\"timeouts\": {\"pytest\": 300000}, \"enabled\": true}\n\n// Global override\n{\"timeouts\": {\"pytest\": 600000}}\n\n// Result\n{\"timeouts\": {\"pytest\": 600000}, \"enabled\": true}\n```\n\n### Environment Variables\n\nPlugins respect environment variables:\n\n- `CLAUDE_CODE_REMOTE`: Skip resource-intensive checks in remote sessions\n- `ONESHOT_MODE`: Enable strict validation for CI/CD\n- `VIRTUAL_ENV`: Python virtual environment path\n- `CLAUDE_PLUGIN_ROOT`: Plugin installation directory (set automatically)\n\n## Plugin Comparison\n\n| Feature | bash-guard | format-and-lint | guardian | development-agents |\n|---------|-----------|-----------------|----------|-------------------|\n| **Hook Type** | PreToolUse | PostToolUse | PreToolUse + Stop | None |\n| **Blocks Execution** | Yes | No | Yes | N/A |\n| **Configuration** | Required | Recommended | Recommended | None |\n| **Language Support** | Shell | Python/TS/Angular | Language-agnostic | All |\n| **Use Case** | Prevention | Quality | Enforcement | Delegation |\n| **Performance Impact** | Low | Medium | High | Variable |\n\n## Installation Guide\n\n### Prerequisites\n\n- Claude Code CLI installed\n- Git repository (optional, for guardian plugin)\n- Development tools installed in your project:\n  - Python: ruff, basedpyright (for format-and-lint)\n  - Node: prettier, eslint (for format-and-lint)\n  - pre-commit (optional, for guardian)\n\n### Step-by-Step Installation\n\n#### 1. Add the Marketplace\n\nFor local development:\n```bash\n/plugin marketplace add /data/ssd/sync/workspace/src/claude-code-plugins\n```\n\nFor remote repository:\n```bash\n/plugin marketplace add https://github.com/your-username/claude-code-plugins\n```\n\n#### 2. List Available Marketplaces\n\n```bash\n/plugin marketplace list\n```\n\nYou should see `werdnum-plugins` in the list.\n\n#### 3. Browse Plugins\n\n```bash\n/plugin\n```\n\nSelect \"Browse Plugins\" and choose the \"werdnum-plugins\" marketplace.\n\n#### 4. Install Desired Plugins\n\n```bash\n# Install individually\n/plugin install bash-guard@werdnum-plugins\n\n# Or install all\n/plugin install bash-guard@werdnum-plugins\n/plugin install format-and-lint@werdnum-plugins\n/plugin install guardian@werdnum-plugins\n/plugin install development-agents@werdnum-plugins\n```\n\n#### 5. Verify Installation\n\n```bash\n/plugin list\n```\n\nYou should see all installed plugins with their status (enabled/disabled).\n\n#### 6. Enable/Disable Plugins\n\n```bash\n/plugin enable bash-guard\n/plugin disable format-and-lint\n```\n\n### Uninstalling Plugins\n\n```bash\n/plugin uninstall bash-guard@werdnum-plugins\n```\n\n## Usage Examples\n\n### Example 1: Bootstrapping Plugin Configuration\n\n**Scenario**: Setting up a new Python project with all plugins\n\n```bash\n# After installing plugins\n/bootstrap-plugins\n```\n\n**Interactive prompts**:\n```\nQ: Should commits to the main branch be blocked?\nA: Enable protection\n\nQ: How strict should test verification be?\nA: Strict - Always require tests before commits\n\nQ: Enable LLM code review before commits?\nA: Enable code review\n\nQ: How thorough should completion checks be?\nA: Strict - Verify formatting, tests, and commits\n```\n\n**Result**:\n```\n✅ Detected Configuration:\n   - Language: Python (pytest detected)\n   - Test command: pytest\n   - Virtual environment: .venv/\n   - Pre-commit framework: pre-commit\n   - Main branch: main\n\n✅ Files Created/Updated:\n   - .claude/settings.json (marketplace + plugins enabled)\n   - .claude/bash-guard.json (branch protection + timeouts)\n   - .claude/format-lint.json (Python tools enabled)\n   - .claude/guardian.json (test verification configured)\n\n✅ All plugins configured and ready to use!\n```\n\n### Example 2: Preventing Dangerous Commands\n\n**Scenario**: Prevent accidental deletion of entire filesystem\n\n```bash\n# With bash-guard installed\nClaude attempts: rm -rf /\n\n# Result: ❌ Blocked\n• This command would delete the entire filesystem. Please use a more specific path.\n```\n\n### Example 2: Automatic Code Formatting\n\n**Scenario**: Python code formatting after edits\n\n```python\n# Before (messy formatting)\ndef hello( name ):\n    print(f\"hello {name}\")\n\n# Claude edits file with format-and-lint installed\n# After (automatically formatted)\ndef hello(name):\n    print(f\"hello {name}\")\n```\n\n**Output**:\n```\n✅ ruff format (0.3s)\n✅ ruff check (0.2s)\n✅ basedpyright (1.5s)\n```\n\n### Example 3: Test Verification Before Commit\n\n**Scenario**: Attempt to commit without running tests\n\n```bash\n# With guardian installed\nClaude attempts: git commit -m \"Add new feature\"\n\n# Result: ❌ Blocked\n❌ Tests have not been run since modifying src/feature.py at 2025-10-22T14:30:00\nYou MUST run 'poe test' before finishing\n```\n\n### Example 4: Using Specialized Agents\n\n**Scenario**: Debug an intermittent test failure\n\n```\nUser: \"The test_calendar_sync test fails 30% of the time with a timeout\"\n\nClaude: I'll use the systematic-debugger agent to investigate this methodically.\n\n# Launches systematic-debugger agent\n# Agent performs hypothesis-driven debugging\n# Returns with root cause analysis and fix\n```\n\n### Example 5: Project-Specific Configuration\n\n**Scenario**: Custom banned commands for containerized app\n\nCreate `.claude/bash-guard.json`:\n```json\n{\n  \"bannedCommands\": {\n    \"customPatterns\": [\n      {\n        \"regexp\": \"localhost:3000\",\n        \"explanation\": \"Use docker-backend:3000 instead. The app runs in a container.\"\n      }\n    ]\n  }\n}\n```\n\nNow when Claude tries to use `localhost:3000`, it's blocked with your custom message.\n\n### Example 6: Oneshot Mode for CI/CD\n\n**Scenario**: Strict validation in automated environment\n\n```bash\nexport ONESHOT_MODE=true\n\n# Claude works on task\n# At session end, guardian validates:\n# ✓ Git repository initialized\n# ✓ On feature branch (not main)\n# ✓ All changes committed\n# ✓ All commits pushed\n# ✓ Tests passing\n\n# Only allows exit when ALL requirements met\n```\n\n## Continuous Integration\n\n### Plugin Validation\n\n![Validate Plugins](https://github.com/werdnum/claude-code-plugins/actions/workflows/validate-plugins.yml/badge.svg)\n\nThis repository includes automated CI that validates all plugins on every push and pull request.\n\n**What Gets Validated**:\n- ✅ Marketplace manifest (`.claude-plugin/marketplace.json`) is valid JSON\n- ✅ All plugins listed in the marketplace exist\n- ✅ Each plugin passes `claude plugin validate` checks\n- ✅ Plugin manifests are well-formed and complete\n\n**Workflow**: [`.github/workflows/validate-plugins.yml`](.github/workflows/validate-plugins.yml)\n\n**When It Runs**:\n- Every push to `main`, `master`, or `claude/**` branches\n- Every pull request to `main` or `master`\n\n**Local Validation**:\n```bash\n# Validate a specific plugin\nclaude plugin validate plugins/bash-guard\n\n# Validate all plugins\nfor plugin in plugins/*/; do\n  echo \"Validating $plugin...\"\n  claude plugin validate \"$plugin\"\ndone\n```\n\n## Development\n\n### Repository Structure\n\n```\nclaude-code-plugins/\n├── .claude-plugin/\n│   └── marketplace.json          # Marketplace manifest\n├── plugins/\n│   ├── bash-guard/\n│   │   ├── .claude-plugin/\n│   │   │   └── plugin.json       # Plugin manifest\n│   │   ├── hooks/\n│   │   │   └── hooks.json        # Hook definitions\n│   │   ├── scripts/              # Hook scripts\n│   │   ├── config/               # Default configuration\n│   │   └── README.md\n│   ├── format-and-lint/\n│   ├── guardian/\n│   └── development-agents/\n├── PLUGIN_PLAN.md                # Implementation plan\n├── CLAUDE.md                     # Project instructions\n└── README.md                     # This file\n```\n\n### Creating a New Plugin\n\n1. **Create directory structure**:\n   ```bash\n   mkdir -p plugins/my-plugin/{.claude-plugin,hooks,scripts,config}\n   ```\n\n2. **Create plugin manifest** (`plugins/my-plugin/.claude-plugin/plugin.json`):\n   ```json\n   {\n     \"name\": \"my-plugin\",\n     \"version\": \"1.0.0\",\n     \"description\": \"What this plugin does\",\n     \"author\": \"Your Name\",\n     \"tags\": [\"tag1\", \"tag2\"],\n     \"hooks\": \"hooks/hooks.json\"\n   }\n   ```\n\n3. **Define hooks** (if applicable) (`plugins/my-plugin/hooks/hooks.json`):\n   ```json\n   {\n     \"PreToolUse\": [\n       {\n         \"matcher\": \"Bash\",\n         \"hooks\": [\n           {\n             \"type\": \"command\",\n             \"command\": \"/usr/bin/env python3 ${CLAUDE_PLUGIN_ROOT}/scripts/my-script.py\"\n           }\n         ]\n       }\n     ]\n   }\n   ```\n\n4. **Create hook scripts** in `scripts/` directory\n\n5. **Add default configuration** in `config/` directory\n\n6. **Write comprehensive README.md**\n\n7. **Update marketplace.json**:\n   ```json\n   {\n     \"plugins\": [\n       {\n         \"name\": \"my-plugin\",\n         \"path\": \"plugins/my-plugin\",\n         \"version\": \"1.0.0\",\n         \"description\": \"What this plugin does\"\n       }\n     ]\n   }\n   ```\n\n8. **Test locally**:\n   ```bash\n   /plugin marketplace update werdnum-plugins\n   /plugin install my-plugin@werdnum-plugins\n   ```\n\n### Hook Types Reference\n\n- **PreToolUse**: Runs before tool execution (can block)\n- **PostToolUse**: Runs after tool execution (informational)\n- **Stop**: Runs when user tries to stop session\n- **SessionStart**: Runs at session start\n\n### Testing Guidelines\n\n1. **Test with defaults**: Ensure plugin works without configuration\n2. **Test with overrides**: Verify configuration merging\n3. **Test error handling**: Ensure graceful failures\n4. **Test in both projects**: family-assistant and websidian\n5. **Test environment variables**: CLAUDE_CODE_REMOTE, ONESHOT_MODE, etc.\n\n## Architecture\n\n### Configuration Loading\n\nAll plugins use a common pattern for configuration:\n\n```python\ndef load_config() -> dict[str, Any]:\n    plugin_root = Path(os.environ.get(\"CLAUDE_PLUGIN_ROOT\", ...))\n\n    # 1. Load defaults\n    config = load_json(plugin_root / \"config\" / \"plugin-config.json\")\n\n    # 2. Merge global overrides\n    global_config = load_json(Path.home() / \".config\" / \"claude-code\" / \"plugin.json\")\n    config = merge_config(config, global_config)\n\n    # 3. Merge project overrides\n    project_config = load_json(Path.cwd() / \".claude\" / \"plugin.json\")\n    config = merge_config(config, project_config)\n\n    return config\n```\n\n### Hook Execution Flow\n\n```\nTool Call\n    ↓\nPreToolUse Hooks (in order)\n    ↓ (if not blocked)\nTool Execution\n    ↓\nPostToolUse Hooks (informational)\n    ↓\nResult Returned\n```\n\n### Plugin Interactions\n\nPlugins are designed to work independently but can complement each other:\n\n- **bash-guard** prevents dangerous commands\n- **format-and-lint** ensures code quality after edits\n- **guardian** enforces testing discipline before commits\n- **development-agents** provides specialized capabilities\n\n## Contributing\n\n### Guidelines\n\n1. **Follow existing patterns**: Use the same configuration system\n2. **Write comprehensive READMEs**: Include examples and troubleshooting\n3. **Make features toggleable**: Everything should be configurable\n4. **Provide sensible defaults**: Plugins should work out of the box\n5. **Test thoroughly**: In multiple environments and configurations\n\n### Commit Message Format\n\nWrite descriptive, detailed commit messages. Explain **what** was done and **why**.\n\nGood example:\n```\nAdd support for custom timeout patterns in bash-guard\n\nAllow users to specify minimum timeouts for custom command patterns\nthrough the configuration file. This enables project-specific timeout\nrequirements beyond the built-in pytest/poe test patterns.\n\nThe implementation uses the same regex matching as banned commands,\nmaking it consistent with existing configuration patterns.\n```\n\n## Documentation\n\n- [Claude Code Plugins Guide](https://docs.claude.com/en/docs/claude-code/plugins.md)\n- [Plugin Marketplaces Guide](https://docs.claude.com/en/docs/claude-code/plugin-marketplaces.md)\n- [Plugin PLAN.md](PLUGIN_PLAN.md) - Original implementation plan\n\n## License\n\nMIT - Personal use\n\n## Acknowledgments\n\nExtracted from real-world usage in:\n- **family-assistant**: FastAPI + React application\n- **websidian**: Angular application\n\nThese plugins represent patterns that proved valuable across multiple projects and are now available for reuse.\n\n",
        "plugins/bash-guard/README.md": "# bash-guard\n\nSafety checks for Bash commands in Claude Code - prevents dangerous operations, enforces timeouts, blocks commits to protected branches, and rate limits BashOutput polling.\n\n## Table of Contents\n\n- [Overview](#overview)\n- [Features](#features)\n- [Installation](#installation)\n- [Quick Start](#quick-start)\n- [Configuration](#configuration)\n- [Usage Examples](#usage-examples)\n- [Advanced Configuration](#advanced-configuration)\n- [How It Works](#how-it-works)\n- [Troubleshooting](#troubleshooting)\n- [API Reference](#api-reference)\n\n## Overview\n\nbash-guard is a PreToolUse hook plugin that intercepts Bash and BashOutput tool calls before execution, checking them against configurable safety rules. It acts as a safety net to prevent dangerous commands, enforce git workflow conventions, ensure adequate timeouts for long-running operations, and prevent excessive polling of background processes.\n\n**Hook Type**: PreToolUse (Bash, BashOutput)\n**Blocks Execution**: Yes\n**Configuration File**: `bash-guard.json`\n\n## Prerequisites\n\n- **uv**: Required for running hook scripts with PEP 723 inline dependencies\n  ```bash\n  # Install uv\n  curl -LsSf https://astral.sh/uv/install.sh | sh\n  ```\n- **Python 3.11+**: Available on system (uv will use it automatically)\n\n## Features\n\n### 1. Banned Command Patterns\n\nBlock dangerous commands with customizable patterns and helpful explanations:\n\n- System-destroying commands (rm -rf /, fork bombs)\n- Dangerous disk operations (dd, mkfs)\n- Security risks (chmod 777 /)\n- Claude-specific anti-patterns (cd usage, 2>&1 redirects)\n- Custom project-specific patterns\n\n### 2. Main Branch Protection\n\nPrevent direct commits to protected branches:\n\n- Blocks `git commit` on main/master branches by default\n- Configurable list of protected branches\n- Helpful suggestions for creating feature branches\n- Can be disabled if needed\n\n### 3. Timeout Enforcement\n\nEnsure minimum timeouts for long-running commands:\n\n- pytest: 5 minutes (300,000ms) by default\n- poe test: 15 minutes (900,000ms) by default\n- Custom patterns with custom timeouts\n- Detects both missing and insufficient timeouts\n\n### 4. Background Restrictions\n\nPrevent specific commands from running in background:\n\n- Blocks `poe test` from running with `run_in_background: true`\n- Custom patterns for project-specific restrictions\n- Ensures critical operations complete before continuing\n\n### 5. BashOutput Rate Limiting\n\nPrevent excessive polling of background process output:\n\n- Limits BashOutput calls to 2 per minute\n- Limits BashOutput calls to 3 per 5 minutes\n- **Enforced by sleeping**: When rate limit is exceeded, the hook waits until the rate limit window resets\n- Configurable thresholds and can be disabled if needed\n- Uses transcript analysis to track call frequency\n\n### 6. Auto-Fix / Suggestion Mode\n\nbash-guard can suggest command modifications instead of just blocking:\n\n- **Command Rewrites**: Transform problematic commands into safer alternatives\n- **Timeout Auto-Setting**: Automatically add or increase timeouts as needed\n- **Background Flag Fixes**: Change run_in_background to false when required\n\n**Current Status**: Suggestion mode is enabled by default (`use_updated_input: false`)\n\nThe plugin uses Claude Code's `updatedInput` feature to modify commands before execution. However, this feature is currently broken in Claude Code v2.0.34 (see [GitHub issue #4368](https://github.com/anthropics/claude-code/issues/4368)). When disabled (default), the plugin blocks commands but provides detailed suggestions showing exactly what needs to be fixed.\n\n**Example Suggestion Output**:\n```\n• Command needs modifications:\n• Auto-setting timeout to 5 minutes for this command\n•   Reason: pytest requires at least 5 minutes for comprehensive test execution\n•\n• Suggested command:\n•   pytest tests/\n•   timeout: 300000\n```\n\n**When the bug is fixed**, you can enable auto-fix by setting `use_updated_input: true` in your configuration. The plugin will then automatically apply modifications instead of blocking with suggestions.\n\n## Installation\n\n```bash\n# Add the marketplace (if not already added)\n/plugin marketplace add /data/ssd/sync/workspace/src/claude-code-plugins\n\n# Install bash-guard\n/plugin install bash-guard@werdnum-plugins\n\n# Verify installation\n/plugin list\n```\n\n## Quick Start\n\nThe plugin works immediately after installation with sensible defaults. No configuration required!\n\n**What's protected by default:**\n\n```bash\n# ❌ Blocked: Dangerous system commands\nrm -rf /\nmkfs.ext4 /dev/sda\nchmod -R 777 /\n\n# ❌ Blocked: Git commits to main branch\ngit checkout main\ngit commit -m \"Fix\"\n\n# ❌ Blocked: Insufficient timeouts\npytest  # Requires timeout: 300000 (5 minutes)\npoe test  # Requires timeout: 900000 (15 minutes)\n\n# ❌ Blocked: Background execution\npoe test  # With run_in_background: true\n\n# ✅ Allowed: Safe operations\npytest tests/unit/  # With timeout: 300000\ngit checkout -b feature/my-feature\ngit commit -m \"Add feature\"\n```\n\n## Configuration\n\n### Configuration Locations\n\nbash-guard supports a layered configuration system:\n\n1. **Plugin Defaults**: `<plugin-root>/config/bash-guard-config.json`\n2. **Global Overrides**: `~/.config/claude-code/bash-guard.json`\n3. **Project Overrides**: `.claude/bash-guard.json`\n\nConfiguration merges: Project → Global → Defaults\n\n### Basic Configuration\n\nCreate `.claude/bash-guard.json` in your project:\n\n```json\n{\n  \"use_updated_input\": false,\n  \"default_timeout_ms\": 120000,\n  \"command_rules\": [\n    {\n      \"regexp\": \"\\\\bnpm\\\\s+run\\\\s+dev\\\\b\",\n      \"action\": \"block\",\n      \"explanation\": \"The dev server is already running. Do not start another instance.\"\n    }\n  ],\n  \"timeout_requirements\": [\n    {\n      \"regexp\": \"^npm\\\\s+test\\\\b\",\n      \"minimum_timeout_ms\": 300000,\n      \"explanation\": \"npm test requires at least 5 minutes for comprehensive testing\"\n    }\n  ]\n}\n```\n\n### Configuration Options\n\n#### Global Settings\n\n```json\n{\n  \"use_updated_input\": false,\n  \"default_timeout_ms\": 120000\n}\n```\n\n**Options**:\n- `use_updated_input` (boolean): Enable auto-fix mode (currently disabled due to Claude Code bug)\n- `default_timeout_ms` (number): Default timeout in milliseconds for commands without explicit timeout\n\n#### Command Rules (Block or Replace)\n\n```json\n{\n  \"command_rules\": [\n    {\n      \"regexp\": \"^\\\\s*rm\\\\s+-rf\\\\s+/\\\\s*$\",\n      \"action\": \"block\",\n      \"explanation\": \"This command would delete the entire filesystem.\"\n    },\n    {\n      \"regexp\": \"python\\\\s+-m\\\\s+pytest\",\n      \"action\": \"replace\",\n      \"replacement\": \"pytest\",\n      \"explanation\": \"Use pytest directly instead of python -m pytest for better performance\"\n    }\n  ]\n}\n```\n\n**Options**:\n- `regexp` (string): Regular expression pattern to match commands\n- `action` (string): Either \"block\" (prevent execution) or \"replace\" (suggest rewrite)\n- `explanation` (string): Human-readable explanation shown to Claude\n- `replacement` (string, required for \"replace\" action): Replacement pattern (supports regex capture groups)\n\n**Actions**:\n- `block`: Command is blocked with explanation\n- `replace`: Command is rewritten (or suggested for rewrite if use_updated_input is false)\n\n#### Timeout Requirements\n\n```json\n{\n  \"timeout_requirements\": [\n    {\n      \"regexp\": \"^pytest\\\\b\",\n      \"minimum_timeout_ms\": 300000,\n      \"explanation\": \"pytest requires at least 5 minutes for comprehensive test execution\"\n    },\n    {\n      \"regexp\": \"^poe\\\\s+test\\\\b\",\n      \"minimum_timeout_ms\": 900000,\n      \"explanation\": \"poe test requires at least 15 minutes for full test suite\"\n    },\n    {\n      \"regexp\": \"^npm\\\\s+run\\\\s+e2e\\\\b\",\n      \"minimum_timeout_ms\": 600000,\n      \"explanation\": \"E2E tests require at least 10 minutes\"\n    }\n  ]\n}\n```\n\n**Options**:\n- `regexp` (string): Pattern to match commands requiring specific timeout\n- `minimum_timeout_ms` (number): Minimum timeout in milliseconds\n- `explanation` (string): Explanation shown when timeout is insufficient\n\n**Timeout values**:\n- 120000ms = 2 minutes\n- 300000ms = 5 minutes\n- 600000ms = 10 minutes\n- 900000ms = 15 minutes\n\n#### Background Restrictions\n\n```json\n{\n  \"background_restrictions\": [\n    {\n      \"regexp\": \"^poe\\\\s+test\\\\b\",\n      \"explanation\": \"poe test must run in foreground to ensure proper output capture\"\n    },\n    {\n      \"regexp\": \"^npm\\\\s+test\\\\b\",\n      \"explanation\": \"npm test must run in foreground for test result visibility\"\n    }\n  ]\n}\n```\n\n**Options**:\n- `regexp` (string): Pattern to match commands that should not run in background\n- `explanation` (string): Explanation shown when command is run in background\n\n#### BashOutput Rate Limiting\n\n```json\n{\n  \"bashoutput_rate_limit\": {\n    \"enabled\": true,\n    \"max_calls_per_minute\": 2,\n    \"max_calls_per_5_minutes\": 3\n  }\n}\n```\n\n**Options**:\n- `enabled` (boolean): Enable or disable BashOutput rate limiting (default: true)\n- `max_calls_per_minute` (number): Maximum BashOutput calls allowed per minute (default: 2)\n- `max_calls_per_5_minutes` (number): Maximum BashOutput calls allowed per 5 minutes (default: 3)\n\n**How it works**:\n- When rate limit is exceeded, the hook sleeps until the rate limit window resets\n- This enforces the rate limit rather than just telling Claude to wait\n- The hook has a 6-minute timeout to accommodate maximum possible wait times\n\n**Use cases**:\n- Automatically prevent rapid polling loops\n- Reduce unnecessary resource consumption\n- Ensure proper pacing for background process monitoring\n\n**To disable rate limiting**:\n```json\n{\n  \"bashoutput_rate_limit\": {\n    \"enabled\": false\n  }\n}\n```\n\n**To adjust thresholds**:\n```json\n{\n  \"bashoutput_rate_limit\": {\n    \"enabled\": true,\n    \"max_calls_per_minute\": 5,\n    \"max_calls_per_5_minutes\": 10\n  }\n}\n```\n\n## Usage Examples\n\n### Example 1: Preventing System Damage\n\n```bash\nUser: \"Remove all log files\"\nClaude attempts: rm -rf /var/log\n\nResult: ❌ Blocked\n• Using rm with -rf on /var/log could delete important system logs.\n  Please use a more specific path.\n```\n\n### Example 2: Enforcing Git Workflow\n\n```bash\nUser: \"Commit the changes\"\nClaude attempts: git commit -m \"Update feature\"\nCurrent branch: main\n\nResult: ❌ Blocked\n• You're currently on the 'main' branch. Direct commits to protected branches are not allowed.\n• Please create a feature branch first: git checkout -b feature-name\n• Then you can commit your changes and create a pull request.\n```\n\n### Example 3: Ensuring Adequate Test Timeouts\n\n```bash\nClaude attempts: poe test\n\nResult: ❌ Blocked\n• Command 'poe test' requires a minimum timeout of 15 minutes.\n  No timeout was specified, using default timeout of 2.0 minutes.\n  Please add 'timeout: 900000' to your Bash tool call.\n```\n\n### Example 4: Project-Specific Restrictions\n\nCreate `.claude/bash-guard.json`:\n\n```json\n{\n  \"bannedCommands\": {\n    \"customPatterns\": [\n      {\n        \"regexp\": \"localhost:5173\",\n        \"explanation\": \"Use devcontainer-backend-1:5173 instead. The frontend runs in a container.\"\n      },\n      {\n        \"regexp\": \"\\\\bpkill\\\\b.*\\\\bpoe\\\\b\",\n        \"explanation\": \"Don't kill the dev server - it's auto-reloading. Check logs if needed.\"\n      }\n    ]\n  }\n}\n```\n\nNow bash-guard enforces your project-specific conventions!\n\n### Example 5: BashOutput Rate Limiting\n\n```bash\nClaude attempts: BashOutput for background shell (3rd call in 1 minute)\n\nResult: ⏳ Waiting (enforced)\n• BashOutput rate limit: 3 calls in the last minute (max: 2). Waiting 45.0s...\n• Rate limit wait complete, proceeding with BashOutput\n```\n\n**Why this helps**:\n- Enforces rate limits by actually waiting (not just telling Claude to wait)\n- Prevents rapid polling loops automatically\n- Reduces transcript size and processing overhead\n- Improves overall session performance\n\n## Advanced Configuration\n\n### Command Replacement (Replace Action)\n\nUse the `replace` action to automatically rewrite commands to safer or better alternatives:\n\n```json\n{\n  \"command_rules\": [\n    {\n      \"regexp\": \"python\\\\s+-m\\\\s+pytest(.*)\",\n      \"action\": \"replace\",\n      \"replacement\": \"pytest\\\\1\",\n      \"explanation\": \"Use pytest directly instead of python -m pytest\"\n    },\n    {\n      \"regexp\": \"npm\\\\s+run\\\\s+build\\\\s+--\\\\s+--mode=(\\\\w+)\",\n      \"action\": \"replace\",\n      \"replacement\": \"npm run build:\\\\1\",\n      \"explanation\": \"Use build scripts for different modes\"\n    }\n  ]\n}\n```\n\n**Regex capture groups**:\n- `\\\\1`, `\\\\2`, etc. in `replacement` refer to captured groups from `regexp`\n- Example: `(.*)` captures everything, `\\\\1` inserts it in replacement\n\n**When use_updated_input is false** (current default):\n- Command is blocked with suggestions showing the rewritten version\n- Claude sees the suggestion and can manually apply it\n\n**When use_updated_input is true** (when bug is fixed):\n- Command is automatically rewritten and executed\n- More seamless but less transparent\n\n### Enabling Auto-Fix Mode (Experimental)\n\nTo test the `updatedInput` feature (for when the bug is fixed):\n\n```json\n{\n  \"use_updated_input\": true\n}\n```\n\n**Warning**: This currently doesn't work in Claude Code v2.0.34. The JSON output is generated correctly but not applied to tool execution. Keep this disabled unless you're testing with a newer version.\n\n### Regular Expression Tips\n\nPatterns use Python's `re` module syntax:\n\n- `^` - Start of string\n- `$` - End of string\n- `\\\\b` - Word boundary\n- `\\\\s` - Whitespace\n- `.*` - Any characters\n- `+` - One or more\n- `?` - Zero or one\n- `[abc]` - Character class\n\n**Examples**:\n\n```regexp\n^\\\\s*cd\\\\s+            # Matches cd commands at start\n\\\\bgit\\\\s+commit\\\\b.*--no-verify  # git commit with --no-verify\nlocalhost:(8000|5173)  # localhost with specific ports\n2>&1                   # stderr redirect (literal)\n```\n\n### Global Configuration Example\n\nSet up global rules in `~/.config/claude-code/bash-guard.json`:\n\n```json\n{\n  \"command_rules\": [\n    {\n      \"regexp\": \"\\\\bsudo\\\\s+rm\\\\b\",\n      \"action\": \"block\",\n      \"explanation\": \"Using sudo with rm is dangerous. Double-check what you're deleting.\"\n    },\n    {\n      \"regexp\": \"\\\\bcurl\\\\s+.*\\\\|\\\\s*bash\",\n      \"action\": \"block\",\n      \"explanation\": \"Piping curl to bash is a security risk. Download and inspect first.\"\n    }\n  ]\n}\n```\n\nThis applies to all your projects using bash-guard!\n\n**Note**: Main branch protection is handled by a separate script (`check-main-branch-commit.py`) and doesn't use this configuration file.\n\n### Environment-Specific Configuration\n\nUse different timeout requirements based on environment:\n\n```json\n{\n  \"timeout_requirements\": [\n    {\n      \"regexp\": \"^poe\\\\s+test\\\\b\",\n      \"minimum_timeout_ms\": 900000,\n      \"explanation\": \"Full test suite needs 15 minutes in development\"\n    }\n  ]\n}\n```\n\nIn CI (where resources may differ):\n```bash\n# CI typically has more resources - reduce timeout requirement\necho '{\"timeout_requirements\": [{\"regexp\": \"^poe\\\\\\\\s+test\\\\\\\\b\", \"minimum_timeout_ms\": 300000}]}' > .claude/bash-guard.json\n```\n\n## How It Works\n\n### Architecture\n\n```\nBash Tool Call\n    ↓\nbash-guard PreToolUse Hook\n    ↓\n1. Load Configuration (Plugin → Global → Project)\n2. Check Banned Commands\n3. Check Main Branch Protection\n4. Check Background Restrictions\n5. Check Timeout Requirements\n    ↓\nAllow (exit 0) or Block (exit 2) with message\n```\n\n### Script Files\n\n- **check-banned-commands.py**: Checks all banned patterns, background restrictions, and timeouts\n- **check-main-branch-commit.py**: Checks git branch for commit commands\n\n### Configuration Loading\n\n```python\n# 1. Load plugin defaults\nconfig = load_json(\"config/bash-guard-config.json\")\n\n# 2. Merge global overrides\nglobal_config = load_json(\"~/.config/claude-code/bash-guard.json\")\nconfig = merge_config(config, global_config)\n\n# 3. Merge project overrides\nproject_config = load_json(\".claude/bash-guard.json\")\nconfig = merge_config(config, project_config)\n```\n\n### Exit Codes\n\n- **0**: Command allowed, proceed with execution\n- **2**: Command blocked, display message to Claude\n\n## Troubleshooting\n\n### Command Blocked Unexpectedly\n\n**Problem**: A safe command is being blocked\n\n**Solution**: Check which pattern is matching by reviewing the explanation. You can:\n\n1. Remove the specific pattern from your project config by creating an empty `command_rules` array:\n\n```json\n{\n  \"command_rules\": []\n}\n```\n\n2. Or override with more specific patterns that don't match your use case\n\n3. Or use the `replace` action instead of `block` to suggest a rewrite\n\n### Configuration Not Loading\n\n**Problem**: Changes to configuration aren't taking effect\n\n**Solution**:\n\n1. Verify JSON is valid: `cat .claude/bash-guard.json | jq .`\n2. Check file location:\n   - Global: `~/.config/claude-code/bash-guard.json`\n   - Project: `.claude/bash-guard.json` (repository root)\n3. Restart Claude Code session\n4. Check for typos in configuration keys\n\n### Timeout Too Strict\n\n**Problem**: Timeout requirement is too high for your needs\n\n**Solution**: Override the specific timeout requirement in your project config:\n\n```json\n{\n  \"timeout_requirements\": [\n    {\n      \"regexp\": \"^poe\\\\s+test\\\\b\",\n      \"minimum_timeout_ms\": 300000,\n      \"explanation\": \"Reduced timeout for faster tests\"\n    }\n  ]\n}\n```\n\nOr remove all timeout requirements:\n\n```json\n{\n  \"timeout_requirements\": []\n}\n```\n\n### Branch Protection Too Restrictive\n\n**Problem**: Need to commit to main branch for hotfix\n\n**Solution**: Temporarily disable:\n\n```json\n{\n  \"mainBranchProtection\": {\"enabled\": false}\n}\n```\n\nOr adjust protected branches:\n\n```json\n{\n  \"mainBranchProtection\": {\n    \"protectedBranches\": [\"production\"]\n  }\n}\n```\n\n### Custom Pattern Not Working\n\n**Problem**: Your regex pattern isn't matching\n\n**Solution**: Test your regex:\n\n```python\nimport re\npattern = r\"your-pattern-here\"\ncommand = \"your-test-command\"\nprint(bool(re.search(pattern, command)))\n```\n\nRemember to escape special characters: `\\\\b`, `\\\\s`, etc.\n\n### Auto-Fix Not Working\n\n**Problem**: Set `use_updated_input: true` but commands aren't being auto-fixed\n\n**Solution**: This is a known bug in Claude Code v2.0.34. The `updatedInput` feature is broken - the hook generates correct JSON output but Claude Code doesn't apply the modifications.\n\n**Workaround**: Keep `use_updated_input: false` (the default). The plugin will block commands with detailed suggestions showing exactly what needs to be fixed. Claude can then manually apply the suggestions.\n\n**Tracking**: See [GitHub issue #4368](https://github.com/anthropics/claude-code/issues/4368)\n\n**When fixed**: Update to a newer Claude Code version and set `use_updated_input: true` to enable seamless auto-fixing.\n\n## API Reference\n\n### Configuration Schema\n\n```typescript\ninterface BashGuardConfig {\n  // Global settings\n  use_updated_input?: boolean;        // Enable auto-fix mode (default: false)\n  default_timeout_ms?: number;        // Default timeout in ms (default: 120000)\n\n  // Command rules (block or replace)\n  command_rules?: Array<{\n    regexp: string;                   // Pattern to match\n    action: \"block\" | \"replace\";      // Action to take\n    explanation: string;              // Explanation shown to Claude\n    replacement?: string;             // Required for \"replace\" action\n  }>;\n\n  // Timeout requirements\n  timeout_requirements?: Array<{\n    regexp: string;                   // Pattern to match\n    minimum_timeout_ms: number;       // Minimum timeout in ms\n    explanation: string;              // Explanation shown when insufficient\n  }>;\n\n  // Background execution restrictions\n  background_restrictions?: Array<{\n    regexp: string;                   // Pattern to match\n    explanation: string;              // Explanation shown when run in background\n  }>;\n\n  // BashOutput rate limiting\n  bashoutput_rate_limit?: {\n    enabled?: boolean;                // Enable rate limiting (default: true)\n    max_calls_per_minute?: number;    // Max calls per minute (default: 2)\n    max_calls_per_5_minutes?: number; // Max calls per 5 minutes (default: 3)\n  };\n}\n```\n\n### Default Configuration\n\nSee `config/bash-guard-config.json` for complete defaults.\n\n### Environment Variables\n\n- `CLAUDE_PLUGIN_ROOT`: Plugin installation directory (set automatically by Claude Code)\n\n## Related Documentation\n\n- [Main Repository README](../../README.md)\n- [Configuration Philosophy](../../README.md#configuration-philosophy)\n- [format-and-lint Plugin](../format-and-lint/README.md) - Code quality checks\n- [guardian Plugin](../guardian/README.md) - Test verification\n\n## License\n\nMIT - Personal use\n\n---\n\n**Need help?** Check the [main repository README](../../README.md) or create an issue with your question.\n",
        "plugins/format-and-lint/README.md": "# format-and-lint\n\nAuto-format and lint files after edits with support for Python, TypeScript/JavaScript, and Angular projects.\n\n## Features\n\n- **File Formatting**: Ensure newline at EOF, trim trailing whitespace (configurable)\n- **Python Linting**: ruff (format + check), basedpyright, ast-grep conformance/hints\n- **TypeScript Linting**: prettier, eslint (for `frontend/` directory)\n- **Angular Linting**: prettier, eslint (for `app/` directory)\n- **Linter Ignore Guard**: Discourages silencing linter warnings without proper justification\n- **Informational Only**: PostToolUse hooks don't block - they provide feedback\n\nAll features are individually toggleable via configuration.\n\n### Linter Ignore Guard\n\nAutomatically detects when linter ignore comments are added (such as `type: ignore`, `noqa`, `eslint-disable`, `@ts-ignore`, etc.) and provides educational feedback encouraging developers to:\n\n1. **Fix the underlying issue** (always preferred)\n2. **Add clear justification** if suppression is truly necessary\n\nSupports multiple languages and tools:\n- Python: `type: ignore`, `noqa`, `pylint: disable`, `fmt: off`\n- TypeScript/JavaScript: `@ts-ignore`, `@ts-expect-error`, `eslint-disable`, `prettier-ignore`\n- Rust: `#[allow(`, `rustfmt::skip`\n- Go: `nolint`\n- Ruby: `rubocop:disable`\n- Java: `@SuppressWarnings`\n- General: `ast-grep-ignore`\n\nThe guard differentiates between justified and unjustified suppressions based on the presence of explanatory text containing keywords like \"because\", \"workaround\", \"third-party\", etc.\n\n## Prerequisites\n\n- **uv**: Required for running hook scripts with PEP 723 inline dependencies\n  ```bash\n  # Install uv\n  curl -LsSf https://astral.sh/uv/install.sh | sh\n  ```\n- **Python 3.11+**: Available on system (uv will use it automatically)\n- **Language-specific tools**: Install based on your project type\n  - Python: `ruff`, `basedpyright` (installed in venv or via uv)\n  - TypeScript/Angular: `prettier`, `eslint` (installed via npm)\n\n## Installation\n\n```bash\n/plugin install format-and-lint@werdnum-plugins\n```\n\n## Quick Start\n\nWorks out of the box for Python projects. Configure for TypeScript/Angular as needed.\n\n## Configuration\n\nLayered configuration system: Project → Global → Defaults\n\n### Python Configuration\n\nCreate `.claude/format-lint.json`:\n\n```json\n{\n  \"linting\": {\n    \"python\": {\n      \"enabled\": true,\n      \"venvPath\": \"${VIRTUAL_ENV:-.venv}\",\n      \"tools\": {\n        \"ruff-format\": { \"enabled\": true, \"timeout\": 5000 },\n        \"ruff-check\": { \"enabled\": true, \"showDiff\": true },\n        \"basedpyright\": { \"enabled\": true, \"maxErrorsShown\": 5 },\n        \"ast-grep-hints\": { \"enabled\": true, \"filterMode\": \"new-code-only\" }\n      }\n    }\n  }\n}\n```\n\n### TypeScript Configuration\n\nFor React/Next.js projects with `frontend/` directory:\n\n```json\n{\n  \"linting\": {\n    \"typescript\": {\n      \"enabled\": true,\n      \"projectDir\": \"frontend\",\n      \"tools\": {\n        \"prettier\": { \"enabled\": true, \"npmScript\": \"format\" },\n        \"eslint\": { \"enabled\": true, \"npmScript\": \"lint:fix\" }\n      }\n    }\n  }\n}\n```\n\n### Angular Configuration\n\nFor Angular projects with `app/` directory:\n\n```json\n{\n  \"linting\": {\n    \"angular\": {\n      \"enabled\": true,\n      \"projectDir\": \"app\",\n      \"tools\": {\n        \"prettier\": { \"enabled\": true },\n        \"eslint\": { \"enabled\": true }\n      }\n    }\n  }\n}\n```\n\n### Formatting Configuration\n\n```json\n{\n  \"formatting\": {\n    \"enabled\": true,\n    \"formatters\": {\n      \"ensure_newline\": {\n        \"enabled\": true,\n        \"patterns\": [\"*.py\", \"*.js\", \"*.ts\", \"*.md\"],\n        \"command\": \"sed -i -e '${ /./s/$/\\\\n/ }' {}\"\n      }\n    },\n    \"exclude\": [\"*.min.js\", \"dist/*\", \"node_modules/*\"]\n  }\n}\n```\n\n## Filter Modes for ast-grep-hints\n\n- `all`: Show all hints\n- `new-code-only`: (default) Only show hints in newly added code (Edit tool)\n- `new-files-only`: Only show hints in new files (Write tool)\n\n## Timeouts\n\nAll timeouts in milliseconds:\n- ruff-format: 5000ms (5 seconds)\n- ruff-check: 2000ms (2 seconds)\n- basedpyright: 8000ms (8 seconds)\n- ast-grep: 2000ms (2 seconds)\n- prettier/eslint: 5000-8000ms\n\n## Disabling Features\n\nDisable entire categories or specific tools:\n\n```json\n{\n  \"formatting\": { \"enabled\": false },\n  \"linting\": {\n    \"python\": {\n      \"tools\": {\n        \"basedpyright\": { \"enabled\": false }\n      }\n    }\n  }\n}\n```\n\n## How It Works\n\nRegisters a PostToolUse hook that runs after Edit, Write, or NotebookEdit operations:\n\n1. **Formatting**: Runs configured formatters based on file patterns\n2. **Linting**: Runs appropriate linters based on file type and project structure\n3. **Feedback**: Provides informational output (doesn't block operations)\n\n## Virtual Environment\n\nPython tools use `venvPath` configuration. Default: `${VIRTUAL_ENV:-.venv}`\n\nThe `${VIRTUAL_ENV:-.venv}` syntax means: use VIRTUAL_ENV environment variable if set, otherwise use `.venv`.\n\n## Troubleshooting\n\n**Linters not running**: Check that tools are installed in your virtual environment or node_modules\n\n**Wrong project directory**: Override `projectDir` in configuration\n\n**Too slow**: Disable expensive linters or increase timeouts\n\n**ast-grep not found**: Set correct `scriptPath` or disable ast-grep tools\n",
        "plugins/guardian/README.md": "# guardian\n\nEnsures code quality through test verification, pre-commit review workflows, and stop validation.\n\n## Features\n\n- **Test Verification** (PreToolUse): Ensures tests run and pass before commits\n- **Pre-Commit Review** (PreToolUse): Executes git adds, runs pre-commit hooks, optional code review\n- **Stop Validation** (Stop hook): \"Keep going\" prompts to ensure work is complete\n\nAll features are individually toggleable via configuration.\n\n## Prerequisites\n\n- **uv**: Required for running hook scripts with PEP 723 inline dependencies\n  ```bash\n  # Install uv\n  curl -LsSf https://astral.sh/uv/install.sh | sh\n  ```\n- **Python 3.11+**: Available on system (uv will use it automatically)\n- **Optional**: Project scripts with their own dependencies\n  - `scripts/review-changes.py` requires `llm`, `llm-gemini`, `llm-openrouter` (has PEP 723 annotations)\n  - Install via: `uv pip install llm llm-gemini llm-openrouter`\n\n## Installation\n\n```bash\n/plugin install guardian@werdnum-plugins\n```\n\n## Quick Start\n\nWorks out of the box with:\n- Test verification for `poe test` and `pytest` commands\n- Pre-commit hook execution (if `.pre-commit-config.yaml` exists)\n- Stop validation for uncommitted changes and test status\n\n## Features\n\n### Test Verification\n\nEnsures tests have been run successfully since the last file modification before allowing commits:\n\n- Tracks file modifications in transcript\n- Verifies test commands ran after modifications\n- Falls back to `.report.json` file when transcript is stale (>5 minutes)\n- Skips verification in remote Claude Code sessions (CLAUDE_CODE_REMOTE=true)\n- Excludes documentation and config files from test requirements\n\n#### Relaxed Test File Verification\n\nWhen only test files have been modified since the last full test run, the hook allows individual test verification instead of requiring a full test suite re-run. This is useful when:\n\n1. You run the full test suite (`poe test`)\n2. Code review suggests minor formatting fixes in a test file\n3. You can now verify just the modified test file instead of the entire suite\n\n**Requirements:**\n- At least one full passing test run must exist as a baseline\n- Only test files (matching `testFilePatterns`) have been modified since that baseline\n- Each modified test file must have been individually run and passed after its modification\n\n**Configuration:**\n```json\n{\n  \"testVerification\": {\n    \"relaxedTestFileVerification\": {\n      \"enabled\": true,\n      \"testFilePatterns\": [\n        \"^tests?/\",\n        \"_test\\\\.py$\",\n        \"test_[^/]*\\\\.py$\"\n      ],\n      \"singleTestCommand\": {\n        \"local\": \"pytest {file}\",\n        \"remote\": null\n      }\n    }\n  }\n}\n```\n\nThe `singleTestCommand` uses `{file}` as a placeholder for the test file path. If not configured, the hook suggests appropriate commands based on file extension.\n\n### Pre-Commit Review\n\nRuns workflow before git commits and PR creation:\n\n1. Executes any `git add` commands in the commit command\n2. Stashes unstaged changes to isolate staged changes\n3. Runs pre-commit hooks with auto-fix iterations (max 5)\n4. Optional external code review script\n5. Restores stashed changes after workflow\n\nBypass mechanisms:\n- `Reviewed: cache-{id}` for minor issues\n- `Bypass-Review: {reason}` for escalation to user\n\n### Stop Validation\n\nValidates work is complete before stopping session:\n\n**Regular Mode**:\n- Runs format/lint commands\n- Warns about uncommitted changes\n- Warns about unpushed commits\n- Checks test status\n- Prompts \"Have you fulfilled the user's request?\"\n\n**Oneshot Mode** (ONESHOT_MODE=true):\n- Strict requirements: git repo, feature branch, clean working dir, all commits pushed, tests pass\n- Blocks exit until all requirements met\n- Allow acknowledged failure with `.claude/FAILURE_REASON` file\n\n## Configuration\n\nExample `.claude/guardian.json`:\n\n```json\n{\n  \"testVerification\": {\n    \"enabled\": true,\n    \"testCommands\": {\n      \"local\": [\n        {\"pattern\": \"^poe\\\\s+test\", \"name\": \"poe test\"},\n        {\"pattern\": \"^pytest\\\\b\", \"name\": \"pytest\"}\n      ]\n    },\n    \"triggerCommands\": [\"git commit\", \"echo done\"],\n    \"relaxedTestFileVerification\": {\n      \"enabled\": true,\n      \"testFilePatterns\": [\n        \"^tests?/\",\n        \"_test\\\\.py$\",\n        \"test_[^/]*\\\\.py$\"\n      ],\n      \"singleTestCommand\": {\n        \"local\": \"pytest {file}\"\n      }\n    }\n  },\n  \"preCommitReview\": {\n    \"enabled\": true,\n    \"workflow\": {\n      \"runPreCommitHooks\": {\"enabled\": true, \"maxIterations\": 5}\n    }\n  },\n  \"stopValidation\": {\n    \"enabled\": true,\n    \"validation\": {\n      \"formatAndLint\": {\n        \"enabled\": false\n      }\n    }\n  }\n}\n```\n\n## Disabling Features\n\nDisable in `.claude/guardian.json`:\n\n```json\n{\n  \"testVerification\": {\"enabled\": false},\n  \"preCommitReview\": {\"enabled\": false},\n  \"stopValidation\": {\"enabled\": false}\n}\n```\n\n## Environment Variables\n\n- `CLAUDE_CODE_REMOTE`: Skip test verification and review when true\n- `ONESHOT_MODE`: Enable strict stop validation requirements\n- `VIRTUAL_ENV`: Python virtual environment path (default: `.venv`)\n\n## File Exclusions\n\nFiles matching these patterns don't require tests:\n- Documentation: `docs/`, `*.md`, `*.txt`, `README`, `LICENSE`\n- Config: `.claude/`, `.github/`, `.devcontainer/`, `.gitignore`\n- Deployment: `deploy/`, `contrib/`, `scripts/`\n- Temporary: `scratch/`, `tmp/`\n\n## Troubleshooting\n\n**Tests required for docs changes**: Override `excludeFromTestRequirement` in config\n\n**Pre-commit hooks fail**: Check `.pre-commit-config.yaml` and hook implementations\n\n**Stop hook disabled**: Check line 4 of `stop-validation-hook.sh` - may be disabled due to Claude bug\n\n**Oneshot mode too strict**: Use `.claude/FAILURE_REASON` file to acknowledge inability to complete\n\n## Notes\n\n- Test verification uses transcript parsing (Claude Code session history)\n- Falls back to `.report.json` when transcript >5 minutes old\n- Pre-commit workflow stashes/restores unstaged changes automatically\n- Stop validation provides \"keep going\" feedback to ensure completeness\n",
        "plugins/development-agents/README.md": "# development-agents\n\nCollection of specialized development agents and commands for common workflows.\n\n## Installation\n\n```bash\n/plugin install development-agents@werdnum-plugins\n```\n\n## Agents\n\n### systematic-debugger\n\n**Model**: Opus | **Color**: Yellow\n\nUse for test failures, unexpected behavior, performance issues, or technical problems requiring methodical investigation and root cause analysis.\n\n**Approach**:\n- Hypothesis-driven debugging\n- Systematic evidence gathering\n- Targeted tests over throwaway scripts\n- Research when encountering unfamiliar patterns\n- Persistent when making progress, pivot when stuck\n\n**Example uses**:\n- Intermittent test failures\n- Production bugs that can't be reproduced locally\n- Performance degradation\n- Complex multi-component issues\n\n### focused-coder\n\n**Model**: Haiku | **Color**: Orange\n\nUse for well-defined, self-contained coding tasks. Works excellently in parallel with other focused-coder instances.\n\n**Responsibilities**:\n- Implement specific task within narrow scope\n- Fix lint errors in working files\n- Run relevant tests and fix test failures\n- Stay within assigned scope\n\n**Example uses**:\n- Add type hints to a specific file\n- Implement a new function in a module\n- Fix lint errors in a file\n- Update test fixtures\n- Refactor a specific module\n\n### mechanical-coder\n\nUse for repetitive changes across many files with ast-grep or similar mechanical tools.\n\n**Example uses**:\n- Rename function across codebase\n- Update import statements\n- Apply consistent pattern changes\n- Bulk refactoring with ast-grep\n\n### codebase-researcher\n\nUse for code exploration and understanding - finding files, understanding architecture, mapping dependencies.\n\n**Example uses**:\n- \"Where are errors handled?\"\n- \"How does the authentication system work?\"\n- \"What files implement the calendar feature?\"\n- \"Map out the API endpoint structure\"\n\n### external-research-specialist\n\nUse for web research, documentation lookup, and gathering external information.\n\n**Example uses**:\n- \"What's the latest best practice for React hooks?\"\n- \"Find examples of FastAPI background tasks\"\n- \"Research this error message\"\n- \"Compare authentication libraries\"\n\n### playwright-qa-tester\n\nUse for UI testing with Playwright - manual testing and automated test writing.\n\n**Example uses**:\n- \"Test the login flow manually\"\n- \"Write Playwright test for the checkout process\"\n- \"Debug why the button click isn't working\"\n- \"Capture screenshots of the dashboard\"\n\n### parallel-coder\n\nUse for coordinating parallel development across multiple independent tasks.\n\n**Example uses**:\n- \"Implement feature X while someone else works on feature Y\"\n- Coordinating multiple focused-coder agents\n- Managing independent workstreams\n\n## Commands\n\n### /bootstrap-plugins\n\nAutomatically configures all werdnum-plugins for your project through intelligent auto-detection and minimal user interaction.\n\n```\n/bootstrap-plugins\n```\n\n**What it does**:\n- Auto-detects project characteristics (languages, test commands, pre-commit frameworks, etc.)\n- Asks critical configuration questions (branch protection, test verification, code review)\n- Generates/updates configuration files for all plugins:\n  - `.claude/settings.json` - Marketplace and plugin enablement\n  - `.claude/bash-guard.json` - Command safety and timeouts\n  - `.claude/format-lint.json` - Formatting and linting\n  - `.claude/guardian.json` - Test verification and workflows\n- Intelligently merges with existing configurations\n\n**Supported pre-commit frameworks**:\n- Python's pre-commit (`.pre-commit-config.yaml`)\n- Husky (`.husky/`, `package.json`)\n- Lefthook (`lefthook.yml`)\n- Manual git hooks\n\n**When to use**: Run once when setting up a new project to bootstrap all plugin configurations.\n\n### /test\n\nRuns tests and sends output to Claude.\n\n```\n/test\n```\n\nExecutes `poe test` and displays results.\n\n## Usage Tips\n\n- Use **systematic-debugger** for tricky bugs, **focused-coder** for clear implementation tasks\n- Run multiple **focused-coder** agents in parallel on different files\n- Use **codebase-researcher** before starting work to understand the codebase\n- **external-research-specialist** is great for looking up unfamiliar APIs or patterns\n- **playwright-qa-tester** can both test manually and write automated tests\n\n## Agent Coordination\n\nAgents are stateless - they complete a task and return results. For complex multi-step work:\n\n1. Use main Claude instance to coordinate\n2. Launch agents for specific subtasks\n3. Gather results and synthesize\n4. Iterate as needed\n\n## No Configuration Needed\n\nAll agents are prompt-based and work out of the box. No configuration files required.\n\n",
        "plugins/jj-snapshot/README.md": "# jj-snapshot Plugin\n\nAutomatically snapshot repository state with Jujutsu (jj) after each file edit in Claude Code.\n\n## Overview\n\nThis plugin runs `jj status` silently after every file edit operation (Edit, Write, or NotebookEdit). Since Jujutsu automatically creates snapshots when the working copy changes, running `jj status` ensures that the current repository state is captured and tracked in jj's operation log.\n\n## Features\n\n- **Automatic Snapshots**: Runs `jj status` after each file edit to snapshot the repo state\n- **Silent Operation**: Runs completely in the background without interrupting Claude Code workflow\n- **Safe Fallback**: Gracefully handles cases where jj is not installed or the directory is not a jj repository\n- **Zero Configuration**: Works out of the box with no setup required\n\n## How It Works\n\nThe plugin uses a PostToolUse hook that triggers after Edit, Write, or NotebookEdit operations. When triggered, it:\n\n1. Checks if jj is installed on the system\n2. Verifies the current directory is inside a jj repository\n3. Runs `jj status` silently to create a snapshot\n4. Exits without producing any output\n\n## Installation\n\nInstall this plugin from the werdnum-plugins marketplace:\n\n```bash\n/plugin install jj-snapshot@werdnum-plugins\n```\n\n## Requirements\n\n- [Jujutsu (jj)](https://github.com/martinvonz/jj) version control system installed\n- Working within a jj repository\n\nIf jj is not installed or you're not in a jj repository, the plugin will silently do nothing.\n\n## Benefits\n\n- **Version History**: Every file edit is automatically captured in jj's operation log\n- **Easy Rollback**: Use `jj op log` to see all changes and `jj op undo` to roll back if needed\n- **Complete Audit Trail**: Track exactly what changes Claude Code made and when\n- **No Manual Snapshots**: Never forget to snapshot your work again\n\n## Technical Details\n\n- **Hook Type**: PostToolUse\n- **Trigger Tools**: Edit, Write, NotebookEdit\n- **Timeout**: 5 seconds\n- **Script**: `/scripts/snapshot.sh`\n\n## Example Workflow\n\n1. Claude Code edits a file using the Edit tool\n2. The jj-snapshot hook triggers automatically\n3. `jj status` runs silently in the background\n4. jj creates a snapshot of the current state\n5. You continue working without interruption\n\nLater, you can view the complete history:\n\n```bash\njj op log\n```\n\nAnd undo changes if needed:\n\n```bash\njj op undo\n```\n\n## Compatibility\n\nWorks with all jj repositories and is compatible with other Claude Code plugins.\n\n## Author\n\nAndrew Garrett (andrewgarrett@google.com)\n",
        "plugins/workspace-reuse/README.md": "# Workspace Reuse Plugin\n\nManage workspace state for seamless reuse between tasks. This plugin automatically handles branch management to help you quickly move between completed and new work.\n\n## Features\n\n### Session Start Behavior\n\nWhen starting a new Claude Code session:\n\n1. **On a branch with merged PR**: Automatically switches to main/master and pulls latest changes, notifying both user and agent\n2. **On a feature branch (no merged PR)**: Runs `git fetch` and shows `git status` to the agent\n3. **On main/master**: Automatically runs `git pull` to get latest changes\n\n### Post-Prompt Check\n\nAfter each prompt submission, checks if you're on a branch with a merged PR and automatically switches to main if so.\n\n### Push Protection\n\nBlocks `git push` commands to branches that have merged PRs, with instructions to create a new branch and PR.\n\n### PR Edit Protection\n\nBlocks `gh pr edit` commands for PRs that are already merged.\n\n## Hook Events\n\n| Event | Behavior |\n|-------|----------|\n| `SessionStart` | Branch detection, auto-switch from merged PRs, fetch/pull |\n| `UserPromptSubmit` | Check for merged PR branch and switch if needed |\n| `PreToolUse` (Bash) | Block push to merged PR branches |\n| `PreToolUse` (Bash) | Block editing merged PRs |\n\n## Requirements\n\n- Git repository\n- GitHub CLI (`gh`) installed and authenticated\n\n## Installation\n\n```\n/plugin install workspace-reuse@werdnum-plugins\n```\n"
      },
      "plugins": [
        {
          "name": "bash-guard",
          "source": "./plugins/bash-guard",
          "version": "1.0.0",
          "description": "Safety checks for Bash commands with auto-fix suggestions - prevents dangerous operations, enforces timeouts, blocks commits to main branch, and suggests command rewrites",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add werdnum/claude-code-plugins",
            "/plugin install bash-guard@werdnum-plugins"
          ]
        },
        {
          "name": "format-and-lint",
          "source": "./plugins/format-and-lint",
          "version": "1.0.0",
          "description": "Auto-format and lint files after edits with support for Python, TypeScript, and Angular",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add werdnum/claude-code-plugins",
            "/plugin install format-and-lint@werdnum-plugins"
          ]
        },
        {
          "name": "guardian",
          "source": "./plugins/guardian",
          "version": "1.0.0",
          "description": "Test verification, pre-commit review workflow, and stop validation to ensure code quality",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add werdnum/claude-code-plugins",
            "/plugin install guardian@werdnum-plugins"
          ]
        },
        {
          "name": "development-agents",
          "source": "./plugins/development-agents",
          "version": "1.0.0",
          "description": "Collection of specialized development agents and commands for common workflows",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add werdnum/claude-code-plugins",
            "/plugin install development-agents@werdnum-plugins"
          ]
        },
        {
          "name": "python-utils",
          "source": "./plugins/python-utils",
          "version": "1.0.0",
          "description": "Python development utilities including advanced refactoring capabilities with rope",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add werdnum/claude-code-plugins",
            "/plugin install python-utils@werdnum-plugins"
          ]
        },
        {
          "name": "jj-snapshot",
          "source": "./plugins/jj-snapshot",
          "version": "1.0.0",
          "description": "Automatically snapshot repository state with Jujutsu (jj) after each file edit",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add werdnum/claude-code-plugins",
            "/plugin install jj-snapshot@werdnum-plugins"
          ]
        },
        {
          "name": "workspace-reuse",
          "source": "./plugins/workspace-reuse",
          "version": "1.0.0",
          "description": "Manage workspace state for reuse between tasks - auto-switch from merged PR branches, fetch updates, and block stale operations",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add werdnum/claude-code-plugins",
            "/plugin install workspace-reuse@werdnum-plugins"
          ]
        }
      ]
    }
  ]
}