{
  "author": {
    "id": "gmickel",
    "display_name": "Gordon Mickel",
    "avatar_url": "https://avatars.githubusercontent.com/u/139907?u=91c15b326ccaa99d3ffcd930ff828a76b7b04c71&v=4"
  },
  "marketplaces": [
    {
      "name": "gmickel-claude-marketplace",
      "version": null,
      "description": "Plan-first workflows for Claude Code. Two plugins: flow (Beads integration) and flow-next (zero-dep, Ralph autonomous mode).",
      "repo_full_name": "gmickel/gmickel-claude-marketplace",
      "repo_url": "https://github.com/gmickel/gmickel-claude-marketplace",
      "repo_description": "Claude Code plugins for reliable AI coding. Flow-Next: plan-first workflows, Ralph autonomous mode (overnight coding with fresh context), multi-model review gates via RepoPrompt/Codex, re-anchoring to prevent drift, receipt-based gating.",
      "signals": {
        "stars": 480,
        "forks": 34,
        "pushed_at": "2026-02-02T02:08:20Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"gmickel-claude-marketplace\",\n  \"owner\": {\n    \"name\": \"Gordon Mickel\",\n    \"url\": \"https://github.com/gmickel\"\n  },\n  \"metadata\": {\n    \"description\": \"Plan-first workflows for Claude Code. Two plugins: flow (Beads integration) and flow-next (zero-dep, Ralph autonomous mode).\",\n    \"version\": \"0.20.6\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"flow\",\n      \"description\": \"Two-step planning + execution workflow with optional Beads integration. Includes 6 subagents, 5 commands, 7 skills.\",\n      \"version\": \"0.8.4\",\n      \"author\": {\n        \"name\": \"Gordon Mickel\",\n        \"email\": \"gordon@mickel.tech\",\n        \"url\": \"https://mickel.tech\"\n      },\n      \"homepage\": \"https://mickel.tech/apps/flow\",\n      \"tags\": [\n        \"claude-code\",\n        \"plugin\",\n        \"workflow\",\n        \"planning\",\n        \"execution\"\n      ],\n      \"source\": \"./plugins/flow\"\n    },\n    {\n      \"name\": \"flow-next\",\n      \"description\": \"Zero-dependency planning + execution with .flow/ task tracking and Ralph autonomous mode (multi-model review gates). Worker subagent per task for context isolation. Includes 20 subagents, 11 commands, 16 skills.\",\n      \"version\": \"0.20.6\",\n      \"author\": {\n        \"name\": \"Gordon Mickel\",\n        \"email\": \"gordon@mickel.tech\",\n        \"url\": \"https://mickel.tech\"\n      },\n      \"homepage\": \"https://mickel.tech/apps/flow-next\",\n      \"tags\": [\n        \"claude-code\",\n        \"plugin\",\n        \"workflow\",\n        \"planning\",\n        \"execution\"\n      ],\n      \"source\": \"./plugins/flow-next\"\n    }\n  ]\n}\n",
        "README.md": "<div align=\"center\">\n\n# gmickel claude marketplace\n\n[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)\n[![Claude Code](https://img.shields.io/badge/Claude_Code-Plugin_Marketplace-blueviolet)](https://claude.ai/code)\n\n[![Flow-next](https://img.shields.io/badge/Flow--next-v0.20.6-green)](plugins/flow-next/)\n[![Flow-next Docs](https://img.shields.io/badge/Docs-ğŸ“–-informational)](plugins/flow-next/README.md)\n\n[![Author](https://img.shields.io/badge/Author-Gordon_Mickel-orange)](https://mickel.tech)\n[![Twitter](https://img.shields.io/badge/@gmickel-black?logo=x)](https://twitter.com/gmickel)\n[![Sponsor](https://img.shields.io/badge/Sponsor-â¤-ea4aaa)](https://github.com/sponsors/gmickel)\n[![Discord](https://img.shields.io/badge/Discord-Join-5865F2?logo=discord&logoColor=white)](https://discord.gg/nHEmyJB5tg)\n\n**Plugins that make AI agents actually work.**\n\n</div>\n\n> ğŸ’¬ **[Join the Discord](https://discord.gg/nHEmyJB5tg)** â€” discussions, updates, feature requests, bug reports\n>\n> ğŸ”„ **Update issues?** Run: `claude plugin update flow-next@gmickel-claude-marketplace`\n>\n> ğŸ†• **[/flow-next:epic-review](plugins/flow-next/README.md#cross-model-reviews)**: Epic-completion review gate. Catches requirement gaps that per-task reviews missâ€”before epic closes.\n>\n> ğŸ¤– **[Ralph mode](plugins/flow-next/docs/ralph.md)**: Ship features while you sleep. Fresh context per iteration, multi-model review gates, auto-blocks stuck tasks.\n>\n> ğŸ“¡ **Cross-platform reviews**: [RepoPrompt](https://repoprompt.com/?atp=KJbuL4) (macOS) or [Codex CLI](plugins/flow-next/README.md#cross-model-reviews) (any OS)\n>\n> ğŸ§ª **OpenCode user?** Try [flow-next-opencode](https://github.com/gmickel/flow-next-opencode) (experimental port)\n\n---\n\n## The Problem\n\nProcess failures, not model failures:\n\n- Starting to code before understanding the codebase\n- Reinventing patterns already there\n- Forgetting the plan mid-implementation\n- Skipping edge cases obvious in hindsight\n\nThis marketplace ships plugins that fix these problems.\n\n---\n\n## Flow-Next\n\n**Plan first, work second. Zero external dependencies.**\n\n```bash\n# Install\n/plugin marketplace add https://github.com/gmickel/gmickel-claude-marketplace\n/plugin install flow-next\n\n# Setup (configures review backend + CLI tools)\n/flow-next:setup\n\n# Use\n/flow-next:plan Add a contact form with validation\n/flow-next:work fn-1\n```\n\n### Why It Works\n\n| Problem | Solution |\n|---------|----------|\n| Context drift | **Re-anchoring** before EVERY task â€” re-reads specs + git state from `.flow/` |\n| 200K token limits | **Fresh context per task** â€” worker subagent starts clean each task |\n| Single-model blind spots | **Cross-model reviews** â€” RepoPrompt or Codex as second opinion |\n| Forgotten requirements | **Dependency graphs** â€” tasks declare blockers, nothing runs out of order |\n| \"It worked on my machine\" | **Evidence recording** â€” commits, test output, PRs tracked per task |\n| Infinite retry loops | **Auto-block stuck tasks** â€” fails after N attempts, moves on |\n| Team conflicts | **Multi-user safe** â€” scan-based IDs, soft claims, no coordination server |\n\n### Commands\n\n| Command | What It Does |\n|---------|--------------|\n| `/flow-next:plan` | Research codebase, create epic + tasks |\n| `/flow-next:work` | Execute tasks with re-anchoring |\n| `/flow-next:interview` | Deep spec refinement (40+ questions) |\n| `/flow-next:plan-review` | Cross-model plan review |\n| `/flow-next:impl-review` | Cross-model implementation review |\n| `/flow-next:prime` | Assess codebase agent-readiness, propose fixes |\n| `/flow-next:ralph-init` | Scaffold autonomous loop |\n\nğŸ“– **[Full documentation](plugins/flow-next/README.md)** â€” CLI reference, workflow details, troubleshooting\n\nğŸ¤” **Confused when to use Interview vs Plan vs Work?** See [When to Use What](plugins/flow-next/README.md#when-to-use-what)\n\n---\n\n## Ralph (Autonomous Mode)\n\nRun overnight, walk away. Fresh context per iteration + multi-model review gates.\n\n```bash\n/flow-next:ralph-init           # One-time setup\nscripts/ralph/ralph.sh          # Run from terminal\n```\n\n**How Ralph differs:**\n\n| Aspect | Typical Agents | Ralph |\n|--------|---------------|-------|\n| Context | Accumulates (drift) | Fresh each iteration |\n| Review | Self-review only | Cross-model gates |\n| Stuck tasks | Infinite retry | Auto-block after N failures |\n| Validation | Tests only | Tests + receipts + reviews |\n\nğŸ“– **[Ralph deep dive](plugins/flow-next/docs/ralph.md)** â€” guard hooks, receipt gating, sentinel controls\n\nğŸ–¥ï¸ **[Ralph TUI](flow-next-tui/)** â€” Terminal UI for monitoring (`bun add -g @gmickel/flow-next-tui`)\n\n---\n\n## Install\n\n```bash\n# Add marketplace\n/plugin marketplace add https://github.com/gmickel/gmickel-claude-marketplace\n\n# Install flow-next\n/plugin install flow-next\n\n# Setup (configures review backend + CLI tools)\n/flow-next:setup\n```\n\n---\n\n## Other Plugins\n\n| Plugin | Status |\n|--------|--------|\n| **flow-next** | Active development. Recommended. |\n| **flow** | Legacy. [Documentation](plugins/flow/README.md) |\n\n---\n\n## Ecosystem\n\n| Project | Platform |\n|---------|----------|\n| [flow-next-opencode](https://github.com/gmickel/flow-next-opencode) | OpenCode |\n| [FlowFactory](https://github.com/Gitmaxd/flowfactory) | Factory.ai Droid |\n\n---\n\n## Also Check Out\n\n> **[GNO](https://gno.sh)** â€” Local hybrid search for your notes, docs, and code. Give Claude Code long-term memory over your files via MCP.\n>\n> ```bash\n> bun install -g @gmickel/gno && gno mcp install --target claude-code\n> ```\n\n---\n\n## Contributing\n\n1. Create `plugins/<name>/` with `.claude-plugin/plugin.json`\n2. Add commands/agents/skills under that plugin root\n3. Update `.claude-plugin/marketplace.json`\n4. Validate: `jq . .claude-plugin/marketplace.json`\n\n---\n\n<div align=\"center\">\n\nMade by [Gordon Mickel](https://mickel.tech) Â· [@gmickel](https://twitter.com/gmickel) Â· [gordon@mickel.tech](mailto:gordon@mickel.tech)\n\n[![Sponsor](https://img.shields.io/badge/Sponsor_this_project-â¤-ea4aaa?style=for-the-badge)](https://github.com/sponsors/gmickel)\n\n</div>\n",
        "plugins/flow/README.md": "<div align=\"center\">\n\n# Flow\n\n[![Website](https://img.shields.io/badge/Website-mickel.tech%2Fapps%2Fflow-blue?style=for-the-badge)](https://mickel.tech/apps/flow)\n\n[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](../../LICENSE)\n[![Claude Code](https://img.shields.io/badge/Claude_Code-Plugin-blueviolet)](https://claude.ai/code)\n[![Version](https://img.shields.io/badge/Version-0.8.4-green)](../../CHANGELOG.md)\n[![Status](https://img.shields.io/badge/Status-Legacy-orange)](../flow-next/)\n[![Commands](https://img.shields.io/badge/Commands-5-green)](commands/)\n[![Agents](https://img.shields.io/badge/Agents-6-yellow)](agents/)\n[![Skills](https://img.shields.io/badge/Skills-7-blue)](skills/)\n\n**Plan first, work second.**\n\n</div>\n\n> **âš ï¸ Legacy plugin.** New users should install [flow-next](../flow-next/) instead.\n>\n> Flow is stable but no longer developed. Flow-next has Ralph mode, better tooling, and works with Beads/plan files too. Flow is kept for existing users only.\n\n---\n\n## The Problem\n\nMost agent failures aren't about model capabilityâ€”they're about process:\n\n- âœ— Starting to code before understanding the codebase\n- âœ— Reinventing patterns that already exist in the repo\n- âœ— Forgetting the original plan mid-implementation\n- âœ— Missing edge cases that were obvious in hindsight\n\n## How Flow Fixes It\n\n| Failure Mode | Solution |\n|--------------|----------|\n| Weak research | 3 agents gather context in parallel *before* any code is written |\n| Ignoring existing code | Explicit pattern reuseâ€”agents find what already exists |\n| Drifting from plan | Plan re-read before every task in the execute loop |\n| Missing edge cases | Gap analyst identifies missing flows before implementation |\n| Shallow self-review | Cross-model review via [RepoPrompt](https://repoprompt.com/?atp=KJbuL4) catches what same-model review misses |\n\nFlow doesn't make Claude smarter. It makes the workflow disciplined enough that capability translates to results.\n\n---\n\n## Install\n\n```bash\n/plugin marketplace add https://github.com/gmickel/gmickel-claude-marketplace\n/plugin install flow\n```\n\n> **RepoPrompt v1.5.62+ Required** â€” Flow v0.8.1+ requires RepoPrompt 1.5.62 or later for review features (`-t` flag, progress notifications).\n> If using an older RepoPrompt, downgrade Flow: `/plugin install flow@0.8.0`\n\n---\n\n## Quick Start\n\n```bash\n/flow:plan Add OAuth login for users\n/flow:work plans/add-oauth-login.md\n```\n\nThat's it. Two commands, one disciplined workflow.\n\n### Optional: Interview First\n\nFor complex features, start with an interview to flesh out requirements:\n\n```bash\n/flow:interview docs/oauth-spec.md   # or a bead ID\n/flow:plan Add OAuth login for users\n/flow:work plans/add-oauth-login.md\n```\n\nInterview asks 40+ deep questions about technical details, edge cases, testing strategy, etc.\n\n### What Happens\n\n**`/flow:plan`**:\n1. Runs 3 research agents in parallel (patterns, best practices, docs)\n2. Runs gap analyst to find edge cases and missing flows\n3. Writes `plans/<slug>.md` with references and acceptance checks\n4. Optionally runs Carmack-level review via different model\n\n**`/flow:work`**:\n1. Reads plan fully, clarifies blockers\n2. Sets up branch or worktree\n3. Executes task loopâ€”re-reads plan before each task\n4. Runs tests + lint\n5. Ships with clear Definition of Done\n6. Optionally runs Carmack-level implementation review\n\n---\n\n## Commands\n\n| Command | Description |\n|---------|-------------|\n| `/flow:plan` | Research + produce `plans/<slug>.md` |\n| `/flow:work` | Execute a plan end-to-end |\n| `/flow:interview` | Deep interview about a spec/bead, write refined details back |\n| `/flow:plan-review` | Carmack-level plan review via rp-cli |\n| `/flow:impl-review` | Carmack-level impl review (current branch) |\n\n---\n\n## Cross-Model Review\n\nWhen [RepoPrompt](https://repoprompt.com/?atp=KJbuL4) rp-cli is detected, both `/flow:plan` and `/flow:work` ask upfront:\n\n```\nReview â€” Run Carmack-level review after?\na) Yes, RepoPrompt chat\nb) Yes, export for external LLM (ChatGPT, Claude web)\nc) No\n```\n\n**Option a)**: Review runs via RepoPrompt's chat with a **different model**. We recommend GPT-5.2 High.\n\n**Option b)**: Exports full context (files, codemaps, review prompt) to `~/Desktop/` and opens the file. Paste into ChatGPT Pro, Claude web, or any LLM.\n\n**Why cross-model?** Same-model self-review has blind spots. A different model catches things Claude missedâ€”architectural issues, edge cases, security gaps.\n\n**Review criteria:**\n- Simplicity & minimalism (YAGNI)\n- DRY & code reuse\n- Idiomatic patterns\n- Architecture & data flow\n- Edge cases & error handling\n- Testability\n- Performance\n- Security\n- Maintainability\n\n**Output:** Issues with severity (Critical/Major/Minor/Nitpick), location, problem, suggestion, rationale. Overall: Ship âœ“ / Needs Work âš  / Major Rethink âœ—\n\n---\n\n## Usage Patterns\n\n### Standalone\n\n```bash\n/flow:plan Add OAuth login for users\n/flow:work plans/add-oauth-login.md\n/flow:plan-review plans/add-oauth-login.md\n/flow:impl-review\n```\n\n### With Beads\n\n```bash\n/flow:work bd-a3f8e9              # Work on Beads epic\n/flow:plan-review bd-a3f8e9       # Review Beads epic\n```\n\n### Chaining\n\n```bash\n/flow:plan Add rate limiting to API, then implement it with /flow:work\n```\n\n### Natural Language\n\n```\nHelp me plan out adding OAuth login for users\n```\n```\nImplement the plan in plans/add-oauth-login.md\n```\n```\nReview my current branch changes\n```\n\nClaude auto-triggers the matching skill based on intent.\n\n---\n\n## RepoPrompt Integration\n\nWhen rp-cli is detected, `/flow:plan` asks which research approach to use:\n\n| Aspect | repo-scout (fast) | context-scout (deep) |\n|--------|-------------------|----------------------|\n| Tools | Grep, Glob, Read | RepoPrompt rp-cli |\n| Speed | ~45 seconds | Slower (builder takes time) |\n| Tokens | ~65k | ~45k (30% less) |\n| Best for | Bug fixes, simple changes | Complex features, architecture |\n\n**Recommendation:** Use `context-scout` when architecture understanding matters. Use `repo-scout` for quick fixes.\n\n### Direct Invocation\n\n```bash\n# Agent (isolated subprocess)\n> Use context-scout to understand how authentication works\n\n# Skill (current conversation)\n> use rp to explore how auth works\n```\n\n---\n\n## Workflow Detail\n\n### `/flow:plan` â€” (Interview â†’) Research â†’ Plan â†’ Review\n\n```\nâ”Œ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”\n  OPTIONAL: /flow:interview\nâ”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\n  â”‚ Deep interview (40+ questions) about spec/bead                  â”‚\nâ”‚ â”‚ â†’ Technical details, edge cases, testing, architecture          â”‚  â”‚\n  â”‚ â†’ Writes refined spec back to source                            â”‚\nâ”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ”” â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”˜\n                                   â”‚\n                                   â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ > /flow:plan gno-40i                                                  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                   â”‚\n                                   â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ SETUP (if rp-cli detected)                                            â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  Q1: Use RepoPrompt for deeper context?   â—‹ Yes (context-scout)       â”‚\nâ”‚      (slower, better for complex features) â—‹ No (repo-scout) [faster] â”‚\nâ”‚                                                                       â”‚\nâ”‚  Q2: Run Carmack-level review?            â—‹ RepoPrompt â—‹ Export â—‹ No  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                   â”‚\n                                   â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ PHASE 1: Parallel Research                                            â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚\nâ”‚  â”‚ context-scout (rp)  â”‚  â”‚ practice-scoutâ”‚  â”‚ docs-scout  â”‚          â”‚\nâ”‚  â”‚ OR repo-scout       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜          â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚                 â”‚                 â”‚\nâ”‚             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚\nâ”‚                                   â–¼                                   â”‚\nâ”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚\nâ”‚              â”‚ Patterns, practices, docs  â”‚                           â”‚\nâ”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                   â”‚\n                                   â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ PHASE 2: Gap Analysis                                                 â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚ flow-gap-analyst                                                â”‚  â”‚\nâ”‚  â”‚ â†’ Edge cases, missing flows, requirements                       â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                   â”‚\n                                   â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ PHASE 3: Write Plan                                                   â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  Beads ID input â†’ update issue, create child tasks                    â”‚\nâ”‚  Text input     â†’ plans/<slug>.md or new Beads epic                   â”‚\nâ”‚                                                                       â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚ gno-40i: Linear Scan Optimization                               â”‚  â”‚\nâ”‚  â”‚ â”œâ”€â”€ .1: hybrid.ts optimization                                  â”‚  â”‚\nâ”‚  â”‚ â”œâ”€â”€ .2: vsearch.ts optimization                                 â”‚  â”‚\nâ”‚  â”‚ â”œâ”€â”€ .3: rerank.ts optimization                                  â”‚  â”‚\nâ”‚  â”‚ â”œâ”€â”€ .4: search.ts optimization                                  â”‚  â”‚\nâ”‚  â”‚ â””â”€â”€ .5: Run tests â”€â”€depends onâ”€â”€â–¶ [.1-.4]                       â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                   â”‚\n                                   â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ PHASE 4: Plan Review (if opted in)                                    â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  rp-cli builder â†’ context    rp-cli chat â†’ Carmack review             â”‚\nâ”‚                                                                       â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚ Simplicity Â· DRY Â· Idiomatic Â· Architecture Â· Edge cases        â”‚  â”‚\nâ”‚  â”‚ Testability Â· Performance Â· Security Â· Maintainability          â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ”‚                                                                       â”‚\nâ”‚  Output: Ship âœ“ â”‚ Needs Work âš  â”‚ Major Rethink âœ—                      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                   â”‚\n                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                    â–¼                             â–¼\n             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n             â”‚  Ship âœ“    â”‚                â”‚  Iterate   â”‚\n             â”‚ Ready for  â”‚                â”‚  Fix and   â”‚\n             â”‚ /flow:work â”‚                â”‚  re-review â”‚\n             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\n                                                 â””â”€â”€â”€â”€â”€â”€â–¶ Back to Review\n```\n\n### `/flow:work` â€” Setup â†’ Execute â†’ Ship\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ > /flow:work gno-40i                    (review: auto if rp-cli)      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                   â”‚\n                                   â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ PHASE 1: Confirm                                                      â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  bd show gno-40i â†’ read plan/issue                                    â”‚\nâ”‚  Read referenced files (hybrid.ts, vsearch.ts, rerank.ts, search.ts)  â”‚\nâ”‚  Ask blocking questions â†’ get user go-ahead                           â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                   â”‚\n                                   â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ PHASE 2: Setup (MUST ASK)                                             â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  \"Work on current branch, new branch, or isolated worktree?\"          â”‚\nâ”‚                                                                       â”‚\nâ”‚     â—‹ Current branch     â—‹ New branch     â—‹ Worktree                  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                   â”‚\n                                   â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ PHASE 3-4: Execute Loop                                               â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                                                       â”‚\nâ”‚  bd ready --parent gno-40i â†’ pick next task                           â”‚\nâ”‚                                                                       â”‚\nâ”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚\nâ”‚  â”‚  For each child task:                                           â”‚  â”‚\nâ”‚  â”‚                                                                 â”‚  â”‚\nâ”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚\nâ”‚  â”‚  â”‚bd updateâ”‚ -> â”‚ Implement â”‚ -> â”‚ Test â”‚ -> â”‚ git commit    â”‚  â”‚  â”‚\nâ”‚  â”‚  â”‚in_progress   â”‚  + test   â”‚    â”‚ pass â”‚    â”‚ bd close task â”‚  â”‚  â”‚\nâ”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚\nâ”‚  â”‚                                                                 â”‚  â”‚\nâ”‚  â”‚  .1 âœ“ â†’ .2 âœ“ â†’ .3 âœ“ â†’ .4 âœ“ â†’ .5 (unblocked) âœ“                   â”‚  â”‚\nâ”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚\nâ”‚                                                                       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                   â”‚\n                                   â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ PHASE 5: Quality                                                      â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  bun test â†’ 521 pass    bun run lint â†’ no issues                      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                   â”‚\n                                   â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ PHASE 6: Ship                                                         â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  bd close gno-40i â†’ close epic                                        â”‚\nâ”‚  bd sync â†’ commit beads changes                                       â”‚\nâ”‚  git push â†’ push to remote                                            â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                                   â”‚\n                                   â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ PHASE 7: Impl Review (if opted in)                                    â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚  rp-cli builder â†’ context around changed files                        â”‚\nâ”‚  rp-cli chat â†’ Carmack review of implementation                       â”‚\nâ”‚                                                                       â”‚\nâ”‚  Output: Ship âœ“ â”‚ Needs Work âš  (fix and re-review)                    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## Agents\n\n| Agent | Purpose | Used By |\n|-------|---------|---------|\n| `repo-scout` | Find existing patterns, conventions, related code | `/flow:plan` |\n| `practice-scout` | Gather best practices and pitfalls | `/flow:plan` |\n| `docs-scout` | Fetch relevant framework/library docs | `/flow:plan` |\n| `flow-gap-analyst` | Identify missing flows, edge cases, requirements | `/flow:plan` |\n| `quality-auditor` | Review changes for correctness, security, tests | `/flow:work` |\n| `context-scout` | Token-efficient codebase exploration via RepoPrompt | On-demand |\n\n---\n\n## Skills\n\n| Skill | Purpose |\n|-------|---------|\n| `flow-plan` | Planning workflow logic |\n| `flow-work` | Execution workflow logic |\n| `interview` | Deep interview to flesh out specs/beads |\n| `flow-plan-review` | Plan review via rp-cli + chat |\n| `flow-impl-review` | Impl review via rp-cli + chat |\n| `worktree-kit` | Manage git worktrees for parallel work |\n| `rp-explorer` | Token-efficient codebase exploration via rp-cli |\n\nSkills use **progressive disclosure**: only name + description (~100 tokens) loaded at startup. Full logic loads on-demand when triggered.\n\n**Two ways to trigger**:\n1. **Explicit**: `/flow:plan add OAuth` or `/flow:work plans/oauth.md`\n2. **Natural language**: \"help me plan out adding OAuth\" â€” Claude auto-triggers the matching skill\n\n---\n\n## Beads Integration\n\nFlow has optional [Beads](https://github.com/steveyegge/beads) (`bd`) integration for dependency-aware issue tracking.\n\n**When Beads is detected** (`.beads/` exists or CLAUDE.md mentions it):\n\n| Command | Beads Mode |\n|---------|-----------|\n| `/flow:plan` | Create epic/tasks instead of markdown |\n| `/flow:work <beads-id>` | Track via `bd ready`/`bd close` instead of TodoWrite |\n| `/flow:plan-review <beads-id>` | Review Beads epic directly |\n\n**Fallback**: If `bd` unavailable, uses markdown plans + TodoWrite (no config needed).\n\n---\n\n## Plan Depths\n\n- **SHORT**: Bugs, small changes â€” just problem, acceptance checks, key context\n- **STANDARD**: Most features â€” overview, approach, risks, acceptance, test notes, refs\n- **DEEP**: Large/critical â€” detailed phases, alternatives, rollout/rollback, metrics\n\n---\n\n## Definition of Done\n\n- All plan steps completed or explicitly deferred\n- All tasks done (Beads children closed or TodoWrite complete)\n- Tests pass\n- Lint/format pass\n- Docs updated if needed\n\n---\n\n## Who It's For\n\nDevelopers who want Claude Code to ship reliably, not just generate code. If you've ever had an agent \"finish\" a task only to realize it forgot half the requirementsâ€”this is for you.\n\n---\n\n## Development\n\n```bash\nclaude --plugin-dir ./plugins/flow\n```\n\n### Conventions\n\n- Plan files live in `plans/`\n- Prefer reuse of centralized code\n- Tests and linting are part of the plan\n\n---\n\n## Other Platforms\n\n### OpenAI Codex (Experimental)\n\nFlow partially works in OpenAI Codex with some limitations:\n\n**Caveats:**\n- No subagent support (research scouts run inline or are skipped)\n\n**Install:**\n```bash\n./scripts/install-codex.sh flow\n```\n\n### Community Ports and Inspired Projects\n\n| Project | Platform |\n|---------|----------|\n| [FlowFactory](https://github.com/Gitmaxd/flowfactory) | Factory.ai Droid |\n\n---\n\n<div align=\"center\">\n\nMade by [Gordon Mickel](https://mickel.tech) Â· [gordon@mickel.tech](mailto:gordon@mickel.tech)\n\n</div>\n",
        "plugins/flow-next/README.md": "<div align=\"center\">\n\n# Flow-Next\n\n[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](../../LICENSE)\n[![Claude Code](https://img.shields.io/badge/Claude_Code-Plugin-blueviolet)](https://claude.ai/code)\n\n[![Version](https://img.shields.io/badge/Version-0.20.6-green)](../../CHANGELOG.md)\n\n[![Status](https://img.shields.io/badge/Status-Active_Development-brightgreen)](../../CHANGELOG.md)\n[![Discord](https://img.shields.io/badge/Discord-Join-5865F2?logo=discord&logoColor=white)](https://discord.gg/nHEmyJB5tg)\n\n**Plan first, work second. Zero external dependencies.**\n\n</div>\n\n---\n\n> **Active development.** [Changelog](../../CHANGELOG.md) | [Report issues](https://github.com/gmickel/gmickel-claude-marketplace/issues)\n\nğŸŒ **Prefer a visual overview?** See the [Flow-Next app page](https://mickel.tech/apps/flow-next) for diagrams and examples.\n\n> **New: Codex Review Backend.** Cross-model reviews now work on Linux/Windows via OpenAI Codex CLI. Same Carmack-level criteria as RepoPrompt. See [Cross-Model Reviews](#cross-model-reviews) for setup.\n\n---\n\n## Table of Contents\n\n- [What Is This?](#what-is-this)\n- [Why It Works](#why-it-works)\n- [Quick Start](#quick-start) â€” Install, setup, use\n- [When to Use What](#when-to-use-what) â€” Interview vs Plan vs Work\n- [Agent Readiness Assessment](#agent-readiness-assessment) â€” `/flow-next:prime`\n- [Troubleshooting](#troubleshooting)\n- [Ralph (Autonomous Mode)](#ralph-autonomous-mode) â€” Run overnight\n- [Features](#features) â€” Re-anchoring, multi-user, reviews, dependencies\n- [Commands](#commands) â€” All slash commands + flags\n  - [Command Reference](#command-reference) â€” Detailed input docs for each command\n- [The Workflow](#the-workflow) â€” Planning and work phases\n- [.flow/ Directory](#flow-directory) â€” File structure\n- [flowctl CLI](#flowctl-cli) â€” Direct CLI usage\n\n---\n\n## What Is This?\n\nFlow-Next is a Claude Code plugin for plan-first orchestration. Bundled task tracking, dependency graphs, re-anchoring, and cross-model reviews.\n\nEverything lives in your repo. No external services. No global config. Uninstall: delete `.flow/` (and `scripts/ralph/` if enabled).\n\n<table>\n<tr>\n<td><img src=\"../../assets/flow-next-plan.png\" alt=\"Planning Phase\" width=\"400\"/></td>\n<td><img src=\"../../assets/flow-next-work.png\" alt=\"Implementation Phase\" width=\"400\"/></td>\n</tr>\n<tr>\n<td align=\"center\"><em>Planning: dependency-ordered tasks</em></td>\n<td align=\"center\"><em>Execution: fixes, evidence, review</em></td>\n</tr>\n</table>\n\n---\n\n## Epic-first task model\n\nFlow-Next does not support standalone tasks.\n\nEvery unit of work belongs to an epic fn-N (even if it's a single task).\n\nTasks are always fn-N.M and inherit context from the epic spec.\n\nFlow-Next always creates an epic container (even for one-offs) so every task has a durable home for context, re-anchoring, and automation. You never have to think about it.\n\nRationale: keeps the system simple, improves re-anchoring, makes automation (Ralph) reliable.\n\n\"One-off request\" -> epic with one task.\n\n---\n\n## Why It Works\n\n### You Control the Granularity\n\nWork task-by-task with full review cycles for maximum control. Or throw the whole epic at it and let Flow-Next handle everything. Same guarantees either way.\n\n```bash\n# One task at a time (review after each)\n/flow-next:work fn-1.1\n\n# Entire epic (review after all tasks complete)\n/flow-next:work fn-1\n```\n\nBoth get: re-anchoring before each task, evidence recording, cross-model review (if rp-cli available).\n\n**Review timing**: The RepoPrompt review runs once at the end of the work packageâ€”after a single task if you specified `fn-N.M`, or after all tasks if you specified `fn-N`. For tighter review loops on large epics, work task-by-task.\n\n### No Context Length Worries\n\n- **Tasks sized at planning:** Every task is scoped to fit one work iteration\n- **Re-anchor every task:** Fresh context from `.flow/` specs before each task\n- **Survives compaction:** Re-anchors after conversation summarization too\n- **Fresh context in Ralph:** Each iteration starts with a clean context window\n\nNever worry about 200K token limits again.\n\n### Reviewer as Safety Net\n\nIf drift happens despite re-anchoring, a different model catches it before it compounds:\n\n1. Claude implements task\n2. GPT reviews via RepoPrompt (sees full files, not diffs)\n3. Reviews block until `SHIP` verdict\n4. Fix â†’ re-review cycles continue until approved\n\nTwo models catch what one misses.\n\n---\n\n### Zero Friction\n\n- **Works in 30 seconds.** Install the plugin, run a command. No setup.\n- **Non-invasive.** No CLAUDE.md edits. No daemons. (Ralph uses plugin hooks for enforcement.)\n- **Clean uninstall.** Delete `.flow/` (and `scripts/ralph/` if enabled).\n- **Multi-user safe.** Teams work parallel branches without coordination servers.\n\n---\n\n## Quick Start\n\n### 1. Install\n\n```bash\n# Add marketplace\n/plugin marketplace add https://github.com/gmickel/gmickel-claude-marketplace\n\n# Install flow-next\n/plugin install flow-next\n```\n\n### 2. Setup (Recommended)\n\n```bash\n/flow-next:setup\n```\n\nThis is technically optional but **highly recommended**. It:\n- **Configures review backend** (RepoPrompt, Codex, or none) â€” required for cross-model reviews\n- Copies `flowctl` to `.flow/bin/` for direct CLI access\n- Adds flow-next instructions to CLAUDE.md/AGENTS.md (helps other AI tools understand your project)\n- Creates `.flow/usage.md` with full CLI reference\n\n**Idempotent** - safe to re-run. Detects plugin updates and refreshes scripts automatically.\n\nAfter setup:\n```bash\nexport PATH=\".flow/bin:$PATH\"\nflowctl --help\nflowctl epics                # List all epics\nflowctl tasks --epic fn-1    # List tasks for epic\nflowctl ready --epic fn-1    # What's ready to work on\n```\n\n### 3. Use\n\n```bash\n# Plan: research, create epic with tasks\n/flow-next:plan Add a contact form with validation\n\n# Work: execute tasks in dependency order\n/flow-next:work fn-1\n\n# Or work directly from a spec file (creates epic automatically)\n/flow-next:work docs/my-feature-spec.md\n```\n\nThat's it. Flow-Next handles research, task ordering, reviews, and audit trails.\n\n### When to Use What\n\nFlow-next is flexible. There's no single \"correct\" order â€” the right sequence depends on how well-defined your spec already is.\n\n**The key question: How fleshed out is your idea?**\n\n#### Vague idea or rough concept\n\n```\nInterview â†’ Plan â†’ Work\n```\n\n1. **Interview first** â€” `/flow-next:interview \"your rough idea\"` asks 40+ deep questions to surface requirements, edge cases, and decisions you haven't thought about\n2. **Plan** â€” `/flow-next:plan fn-1` takes the refined spec and researches best practices, current docs, repo patterns, then splits into properly-sized tasks\n3. **Work** â€” `/flow-next:work fn-1` executes with re-anchoring and reviews\n\n#### Well-written spec or PRD\n\n```\nPlan â†’ Interview â†’ Work\n```\n\n1. **Plan first** â€” `/flow-next:plan specs/my-feature.md` researches best practices and current patterns, then breaks your spec into epic + tasks\n2. **Interview after** â€” `/flow-next:interview fn-1` runs deep questions against the plan to catch edge cases, missing requirements, or assumptions\n3. **Work** â€” `/flow-next:work fn-1` executes\n\n#### Minimal planning\n\n```\nPlan â†’ Work\n```\n\nSkip interview entirely for well-understood changes. Plan still researches best practices and splits into tasks.\n\n#### Quick single-task (spec already complete)\n\n```\nWork directly\n```\n\n```bash\n/flow-next:work specs/small-fix.md\n```\n\nFor small, self-contained changes where you already have a complete spec. Creates an epic with **one task** and executes immediately. You get flow tracking, re-anchoring, and optional review â€” without full planning overhead.\n\nBest for: bug fixes, small features, well-scoped changes that don't need task splitting.\n\n**Note:** This does NOT split into multiple tasks. For detailed specs that need breakdown, use Plan first.\n\n**Summary:**\n\n| Starting point | Recommended sequence |\n|----------------|---------------------|\n| Vague idea, rough notes | Interview â†’ Plan â†’ Work |\n| Detailed spec/PRD | Plan â†’ Interview â†’ Work |\n| Well-understood, needs task splitting | Plan â†’ Work |\n| Small single-task, spec complete | Work directly (creates 1 epic + 1 task) |\n\n**Interview vs Plan boundary:**\n- **Interview** creates an epic with refined requirements (problem, decisions, edge cases). It does NOT create tasks or research the codebase.\n- **Plan** researches best practices, analyzes existing patterns, and creates sized tasks with dependencies.\n\nYou can always run interview again after planning to catch anything missed. Interview writes back to the epic spec only â€” it won't modify existing tasks.\n\n---\n\n## Agent Readiness Assessment\n\n> Inspired by [Factory.ai's Agent Readiness framework](https://factory.ai/news/agent-readiness)\n\n`/flow-next:prime` assesses your codebase for agent-readiness and proposes improvements. Works for greenfield and brownfield projects.\n\n### The Problem\n\nAgents waste cycles when codebases lack:\n- **Pre-commit hooks** â†’ waits 10min for CI instead of 5sec local feedback\n- **Documented env vars** â†’ guesses, fails, guesses again\n- **CLAUDE.md** â†’ doesn't know project conventions\n- **Test commands** â†’ can't verify changes work\n\nThese are **environment problems**, not agent problems. Prime helps fix them.\n\n### Quick Start\n\n```bash\n/flow-next:prime                 # Full assessment + interactive fixes\n/flow-next:prime --report-only   # Just show the report\n/flow-next:prime --fix-all       # Apply all fixes without asking\n```\n\n### The Eight Pillars\n\nPrime evaluates your codebase across eight pillars (48 criteria total):\n\n#### Agent Readiness (Pillars 1-5) â€” Scored, Fixes Offered\n\n| Pillar | What It Checks |\n|--------|----------------|\n| **1. Style & Validation** | Linters, formatters, type checking, pre-commit hooks |\n| **2. Build System** | Build tool, commands, lock files, monorepo tooling |\n| **3. Testing** | Test framework, commands, verification, coverage, E2E |\n| **4. Documentation** | README, CLAUDE.md, setup docs, architecture |\n| **5. Dev Environment** | .env.example, Docker, devcontainer, runtime version |\n\n#### Production Readiness (Pillars 6-8) â€” Reported Only\n\n| Pillar | What It Checks |\n|--------|----------------|\n| **6. Observability** | Structured logging, tracing, metrics, error tracking, health endpoints |\n| **7. Security** | Branch protection, secret scanning, CODEOWNERS, Dependabot |\n| **8. Workflow & Process** | CI/CD, PR templates, issue templates, release automation |\n\n**Two-tier approach**: Pillars 1-5 determine your agent maturity level and are eligible for fixes. Pillars 6-8 are reported for visibility but no fixes are offered â€” these are team/production decisions.\n\n### Maturity Levels\n\n| Level | Name | Description | Overall Score |\n|-------|------|-------------|---------------|\n| 1 | Minimal | Basic project structure only | <30% |\n| 2 | Functional | Can build and run, limited docs | 30-49% |\n| 3 | **Standardized** | Agent-ready for routine work | 50-69% |\n| 4 | Optimized | Fast feedback loops, comprehensive docs | 70-84% |\n| 5 | Autonomous | Full autonomous operation capable | 85%+ |\n\n**Level 3 is the target** for most teams. It means agents can handle routine work: bug fixes, tests, docs, dependency updates.\n\n### How It Works\n\n1. **Parallel Assessment** â€” 9 haiku scouts run in parallel (~15-20 seconds):\n\n   Agent Readiness scouts:\n   - `tooling-scout` â€” linters, formatters, pre-commit, type checking\n   - `claude-md-scout` â€” CLAUDE.md/AGENTS.md analysis\n   - `env-scout` â€” environment setup\n   - `testing-scout` â€” test infrastructure\n   - `build-scout` â€” build system\n   - `docs-gap-scout` â€” README, ADRs, architecture docs\n\n   Production Readiness scouts:\n   - `observability-scout` â€” logging, tracing, metrics, health endpoints\n   - `security-scout` â€” GitHub API checks, CODEOWNERS, Dependabot\n   - `workflow-scout` â€” CI/CD, templates, automation\n\n2. **Verification** â€” Verifies test commands actually work (e.g., `pytest --collect-only`)\n\n3. **Synthesize Report** â€” Calculates Agent Readiness score, Production Readiness score, and maturity level\n\n4. **Interactive Remediation** â€” Uses `AskUserQuestion` for agent readiness fixes only:\n   ```\n   Which tooling improvements should I add?\n   â˜ Add pre-commit hooks (Recommended)\n   â˜ Add linter config\n   â˜ Add runtime version file\n   ```\n\n5. **Apply Fixes** â€” Creates/modifies files based on your selections\n\n6. **Re-assess** â€” Optionally re-run to show improvement\n\n### Example Report\n\n```markdown\n# Agent Readiness Report\n\n**Repository**: my-project\n**Assessed**: 2026-01-23\n\n## Scores Summary\n\n| Category | Score | Level |\n|----------|-------|-------|\n| **Agent Readiness** (Pillars 1-5) | 73% | Level 4 - Optimized |\n| Production Readiness (Pillars 6-8) | 17% | â€” |\n| **Overall** | 52% | â€” |\n\n## Agent Readiness (Pillars 1-5)\n\n| Pillar | Score | Status |\n|--------|-------|--------|\n| Style & Validation | 67% (4/6) | âš ï¸ |\n| Build System | 100% (6/6) | âœ… |\n| Testing | 67% (4/6) | âš ï¸ |\n| Documentation | 83% (5/6) | âœ… |\n| Dev Environment | 83% (5/6) | âœ… |\n\n## Production Readiness (Pillars 6-8) â€” Report Only\n\n| Pillar | Score | Status |\n|--------|-------|--------|\n| Observability | 33% (2/6) | âŒ |\n| Security | 17% (1/6) | âŒ |\n| Workflow & Process | 0% (0/6) | âŒ |\n\n## Top Recommendations (Agent Readiness)\n\n1. **Tooling**: Add pre-commit hooks â€” 5 sec feedback vs 10 min CI wait\n2. **Tooling**: Add Python type checking â€” catch errors locally\n3. **Docs**: Update README â€” replace generic template\n```\n\n### Remediation Templates\n\nPrime offers fixes for agent readiness gaps (**not** team governance):\n\n| Fix | What Gets Created |\n|-----|-------------------|\n| CLAUDE.md | Project overview, commands, structure, conventions |\n| .env.example | Template with detected env vars |\n| Pre-commit (JS) | Husky + lint-staged config |\n| Pre-commit (Python) | `.pre-commit-config.yaml` |\n| Linter config | ESLint, Biome, or Ruff config (if none exists) |\n| Formatter config | Prettier or Biome config (if none exists) |\n| .nvmrc/.python-version | Runtime version pinning |\n| .gitignore entries | .env, build outputs, node_modules |\n\nTemplates adapt to your project's detected conventions and existing tools. Won't suggest ESLint if you have Biome, etc.\n\n### User Consent Required\n\n**By default, prime asks before every change** using interactive checkboxes. You choose what gets created.\n\n- **Asks first** â€” uses `AskUserQuestion` tool for interactive selection per category\n- **Never overwrites** existing files without explicit consent\n- **Never commits** changes (leaves for you to review)\n- **Never deletes** files\n- **Merges** with existing configs when possible\n- **Respects** your existing tools (won't add ESLint if you have Biome)\n\nUse `--fix-all` to skip questions and apply everything. Use `--report-only` to just see the assessment.\n\n### Flags\n\n| Flag | Description |\n|------|-------------|\n| `--report-only` | Skip remediation, just show report |\n| `--fix-all` | Apply all recommendations without asking |\n| `<path>` | Assess a different directory |\n\n---\n\n### Interactive vs Autonomous (The Handoff)\n\nAfter planning completes, you choose how to execute:\n\n| Mode | Command | When to Use |\n|------|---------|-------------|\n| **Interactive** | `/flow-next:work fn-1` | Complex tasks, learning a codebase, taste matters, want to intervene |\n| **Autonomous (Ralph)** | `scripts/ralph/ralph.sh` | Clear specs, bulk implementation, overnight runs |\n\n**The heuristic:** If you can write checkboxes, you can Ralph it. If you can't, you're not ready to loopâ€”you're ready to think.\n\nFor full autonomous mode, prepare 5-10 plans before starting Ralph. See [Ralph Mode](#ralph-autonomous-mode) for setup.\n\n> ğŸ“– Deep dive: [Ralph Mode: Why AI Agents Should Forget](https://medium.com/byte-sized-brainwaves/ralph-mode-why-ai-agents-should-forget-9f98bec6fc91)\n\n---\n\n## Troubleshooting\n\n### Reset a stuck task\n\n```bash\n# Check task status\nflowctl show fn-1.2 --json\n\n# Reset to todo (from done/blocked)\nflowctl task reset fn-1.2\n\n# Reset + dependents in same epic\nflowctl task reset fn-1.2 --cascade\n```\n\n### Clean up `.flow/` safely\n\nRun manually in terminal (not via AI agent):\n\n```bash\n# Remove all flow state (keeps git history)\nrm -rf .flow/\n\n# Re-initialize\nflowctl init\n```\n\n### Debug Ralph runs\n\n```bash\n# Check run progress\ncat scripts/ralph/runs/*/progress.txt\n\n# View iteration logs\nls scripts/ralph/runs/*/iter-*.log\n\n# Check for blocked tasks\nls scripts/ralph/runs/*/block-*.md\n```\n\n### Receipt validation failing\n\n```bash\n# Check receipt exists\nls scripts/ralph/runs/*/receipts/\n\n# Verify receipt format\ncat scripts/ralph/runs/*/receipts/impl-fn-1.1.json\n# Must have: {\"type\":\"impl_review\",\"id\":\"fn-1.1\",...}\n```\n\n### Custom rp-cli instructions conflicting\n\n> **Caution**: If you have custom instructions for `rp-cli` in your `CLAUDE.md` or `AGENTS.md`, they may conflict with Flow-Next's RepoPrompt integration.\n\nFlow-Next's plan-review and impl-review skills include specific instructions for `rp-cli` usage (window selection, builder workflow, chat commands). Custom rp-cli instructions can override these and cause unexpected behavior.\n\n**Symptoms:**\n- Reviews not using the correct RepoPrompt window\n- Builder not selecting expected files\n- Chat commands failing or behaving differently\n\n**Fix:** Remove or comment out custom rp-cli instructions from your `CLAUDE.md`/`AGENTS.md` when using Flow-Next reviews. The plugin provides complete rp-cli guidance.\n\n---\n\n## Uninstall\n\nRun manually in terminal (DCG blocks these from AI agents):\n\n```bash\nrm -rf .flow/               # Core flow state\nrm -rf scripts/ralph/       # Ralph (if enabled)\n```\n\nOr use `/flow-next:uninstall` which cleans up docs and prints commands to run.\n\n---\n\n## Ralph (Autonomous Mode)\n\n> **âš ï¸ Safety first**: Ralph defaults to `YOLO=1` (skips permission prompts).\n> - Start with `ralph_once.sh` to observe one iteration\n> - Consider [Docker sandbox](https://docs.docker.com/ai/sandboxes/claude-code/) for isolation\n> - Consider [DCG (Destructive Command Guard)](https://github.com/Dicklesworthstone/destructive_command_guard) to block destructive commands â€” see [DCG setup](docs/ralph.md#additional-safety-dcg-optional)\n>\n> **Community sandbox setups** (alternative approaches):\n> - [devcontainer-for-claude-yolo-and-flow-next](https://github.com/Ranudar/devcontainer-for-claude-yolo-and-flow-next) â€” VS Code devcontainer with Playwright, firewall whitelisting, and RepoPrompt MCP bridge\n> - [agent-sandbox](https://github.com/novotnyllc/agent-sandbox) â€” Docker Sandbox (Desktop 4.50+) with seccomp/user namespace isolation, .NET + Node.js\n\nRalph is the repo-local autonomous loop that plans and works through tasks end-to-end.\n\n**Setup (one-time, inside Claude):**\n```bash\n/flow-next:ralph-init\n```\n\nOr from terminal without entering Claude:\n```bash\nclaude -p \"/flow-next:ralph-init\"\n```\n\n**Run (outside Claude):**\n```bash\nscripts/ralph/ralph.sh\n```\n\nRalph writes run artifacts under `scripts/ralph/runs/`, including review receipts used for gating.\n\nğŸ“– **[Ralph deep dive](docs/ralph.md)**\n\nğŸ–¥ï¸ **[Ralph TUI](../../flow-next-tui/)** â€” Terminal UI for monitoring runs in real-time (`bun add -g @gmickel/flow-next-tui`)\n\n### How Ralph Differs from Other Autonomous Agents\n\nAutonomous coding agents are taking the industry by stormâ€”loop until done, commit, repeat. Most solutions gate progress by tests and linting alone. Ralph goes further.\n\n**Multi-model review gates**: Ralph uses [RepoPrompt](https://repoprompt.com/?atp=KJbuL4) (macOS) or OpenAI Codex CLI (cross-platform) to send plan and implementation reviews to a *different* model. A second set of eyes catches blind spots that self-review misses. RepoPrompt's builder provides full file context; Codex uses context hints from changed files.\n\n**Review loops until Ship**: Reviews don't just flag issuesâ€”they block progress until resolved. Ralph runs fix â†’ re-review cycles until the reviewer returns `<verdict>SHIP</verdict>`. No \"LGTM with nits\" that get ignored.\n\n**Receipt-based gating**: Reviews must produce a receipt JSON file proving they ran. No receipt = no progress. This prevents drift where Claude skips the review step and marks things done anyway.\n\n**Guard hooks**: Plugin hooks enforce workflow rules deterministicallyâ€”blocking `--json` flags, preventing new chats on re-reviews, requiring receipts before stop. Only active when `FLOW_RALPH=1`; zero impact for non-Ralph users. See [Guard Hooks](docs/ralph.md#guard-hooks).\n\n**Atomic window selection**: The `setup-review` command handles RepoPrompt window matching atomically. Claude can't skip steps or invent window IDsâ€”the entire sequence runs as one unit or fails.\n\nThe result: code that's been reviewed by two models, tested, linted, and iteratively refined. Not perfect, but meaningfully more robust than single-model autonomous loops.\n\n### Controlling Ralph\n\nExternal agents (Clawdbot, GitHub Actions, etc.) can pause/resume/stop Ralph runs without killing processes.\n\n**CLI commands:**\n```bash\n# Check status\nflowctl status                    # Epic/task counts + active runs\nflowctl status --json             # JSON for automation\n\n# Control active run\nflowctl ralph pause               # Pause run (auto-detects if single)\nflowctl ralph resume              # Resume paused run\nflowctl ralph stop                # Request graceful stop\nflowctl ralph status              # Show run state\n\n# Specify run when multiple active\nflowctl ralph pause --run <id>\n```\n\n**Sentinel files (manual control):**\n```bash\n# Pause: touch PAUSE file in run directory\ntouch scripts/ralph/runs/<run-id>/PAUSE\n# Resume: remove PAUSE file\nrm scripts/ralph/runs/<run-id>/PAUSE\n# Stop: touch STOP file (kept for audit)\ntouch scripts/ralph/runs/<run-id>/STOP\n```\n\nRalph checks sentinels at iteration boundaries (after Claude returns, before next iteration).\n\n**Task retry/rollback:**\n```bash\n# Reset completed/blocked task to todo\nflowctl task reset fn-1-add-oauth.3\n\n# Reset + cascade to dependent tasks (same epic)\nflowctl task reset fn-1-add-oauth.2 --cascade\n```\n\n---\n\n## Human-in-the-Loop Workflow (Detailed)\n\nDefault flow when you drive manually:\n\n```mermaid\nflowchart TD\n  A[Idea or short spec<br/>prompt or doc] --> B{Need deeper spec?}\n  B -- yes --> C[Optional: /flow-next:interview fn-N or spec.md<br/>40+ deep questions to refine spec]\n  C --> D[Refined spec]\n  B -- no --> D\n  D --> E[/flow-next:plan idea or fn-N/]\n  E --> F[Parallel subagents: repo patterns + online docs + best practices]\n  F --> G[flow-gap-analyst: edge cases + missing reqs]\n  G --> H[Writes .flow/ epic + tasks + deps]\n  H --> I{Plan review?}\n  I -- yes --> J[/flow-next:plan-review fn-N/]\n  J --> K{Plan passes review?}\n  K -- no --> L[Re-anchor + fix plan]\n  L --> J\n  K -- yes --> M[/flow-next:work fn-N/]\n  I -- no --> M\n  M --> N[Re-anchor before EVERY task]\n  N --> O[Implement]\n  O --> P[Test + verify acceptance]\n  P --> Q[flowctl done: write done summary + evidence]\n  Q --> R{Impl review?}\n  R -- yes --> S[/flow-next:impl-review/]\n  S --> T{Next ready task?}\n  R -- no --> T\n  T -- yes --> N\n  T -- no --> V{Epic review?}\n  V -- yes --> W[/flow-next:epic-review fn-N/]\n  W --> X{Epic passes review?}\n  X -- no --> Y[Fix gaps inline]\n  Y --> W\n  X -- yes --> U[Close epic]\n  V -- no --> U\n  classDef optional stroke-dasharray: 6 4,stroke:#999;\n  class C,J,S,W optional;\n```\n\nNotes:\n- `/flow-next:interview` accepts Flow IDs or spec file paths and writes refinements back\n- `/flow-next:plan` accepts new ideas or an existing Flow ID to update the plan\n\nTip: with RP 1.5.68+, use `flowctl rp setup-review --create` to auto-open RepoPrompt windows. Alternatively, open RP on your repo beforehand for faster context loading.\nPlan review in rp mode requires `flowctl rp chat-send`; if rp-cli/windows unavailable, the review gate retries.\n\n---\n\n## Features\n\nBuilt for reliability. These are the guardrails.\n\n**Re-anchoring prevents drift**\n\nBefore EVERY task, Flow-Next re-reads the epic spec, task spec, and git state from `.flow/`. This forces Claude back to the source of truth - no hallucinated scope creep, no forgotten requirements. In Ralph mode, this happens automatically each iteration.\n\nUnlike agents that carry accumulated context (where early mistakes compound), re-anchoring gives each task a fresh, accurate starting point.\n\n### Re-anchoring\n\nBefore EVERY task, Flow-Next re-reads:\n- Epic spec and task spec from `.flow/`\n- Current git status and recent commits\n- Validation state\n\nPer Anthropic's long-running agent guidance: agents must re-anchor from sources of truth to prevent drift. The reads are cheap; drift is expensive.\n\n### Multi-user Safe\n\nTeams can work in parallel branches without coordination servers:\n\n- **Merge-safe IDs**: Scans existing files to allocate the next ID. No shared counters.\n- **Soft claims**: Tasks track an `assignee` field. Prevents accidental duplicate work.\n- **Actor resolution**: Auto-detects from git email, `FLOW_ACTOR` env, or `$USER`.\n- **Local validation**: `flowctl validate --all` catches issues before commit.\n\n```bash\n# Actor A starts task\nflowctl start fn-1.1   # Sets assignee automatically\n\n# Actor B tries same task\nflowctl start fn-1.1   # Fails: \"claimed by actor-a@example.com\"\nflowctl start fn-1.1 --force  # Override if needed\n```\n\n### Parallel Worktrees\n\nMultiple agents can work simultaneously in different git worktrees, sharing task state:\n\n```bash\n# Main repo\ngit worktree add ../feature-a fn-1-branch\ngit worktree add ../feature-b fn-2-branch\n\n# Both worktrees share task state via .git/flow-state/\ncd ../feature-a && flowctl start fn-1.1   # Agent A claims task\ncd ../feature-b && flowctl start fn-2.1   # Agent B claims different task\n```\n\n**How it works:**\n- Runtime state (status, assignee, evidence) lives in `.git/flow-state/` â€” shared across worktrees\n- Definition files (title, description, deps) stay in `.flow/` â€” tracked in git\n- Per-task `fcntl` locking prevents race conditions\n\n**State directory resolution:**\n1. `FLOW_STATE_DIR` env (explicit override)\n2. `git --git-common-dir` + `/flow-state` (worktree-aware)\n3. `.flow/state` fallback (non-git or old git)\n\n**Commands:**\n```bash\nflowctl state-path                # Show resolved state directory\nflowctl migrate-state             # Migrate existing repo (optional)\nflowctl migrate-state --clean     # Migrate + remove runtime from tracked files\n```\n\n**Backward compatible** â€” existing repos work without migration. The merged read path automatically falls back to definition files when no state file exists.\n\n### Zero Dependencies\n\nEverything is bundled:\n- `flowctl.py` ships with the plugin\n- No external tracker CLI to install\n- No external services\n- Just Python 3\n\n### Bundled Skills\n\nUtility skills available during planning and implementation:\n\n| Skill | Use Case |\n|-------|----------|\n| `browser` | Web automation via agent-browser CLI (verify UI, scrape docs, test flows) |\n| `flow-next-rp-explorer` | Token-efficient codebase exploration via RepoPrompt |\n| `flow-next-worktree-kit` | Git worktree management for parallel work |\n| `flow-next-export-context` | Export context for external LLM review |\n\n### Non-invasive\n\n- No daemons\n- No CLAUDE.md edits\n- Delete `.flow/` to uninstall; if you enabled Ralph, also delete `scripts/ralph/`\n- Ralph uses plugin hooks for workflow enforcement (only active when `FLOW_RALPH=1`)\n\n### CI-ready\n\n```bash\nflowctl validate --all\n```\n\nExits 1 on errors. Drop into pre-commit hooks or GitHub Actions. See `docs/ci-workflow-example.yml`.\n\n### One File Per Task\n\nEach epic and task gets its own JSON + markdown file pair. Merge conflicts are rare and easy to resolve.\n\n### Cross-Model Reviews\n\nTwo models catch what one misses. Reviews use a second model (via RepoPrompt or Codex) to verify plans and implementations before they ship.\n\n**Three review types:**\n- **Plan reviews** â€” Verify architecture before coding starts\n- **Impl reviews** â€” Verify each task implementation\n- **Completion reviews** â€” Verify epic delivers all spec requirements before closing\n\n**Review criteria (Carmack-level, identical for both backends):**\n\n| Review Type | Criteria |\n|-------------|----------|\n| **Plan** | Completeness, Feasibility, Clarity, Architecture, Risks (incl. security), Scope, Testability |\n| **Impl** | Correctness, Simplicity, DRY, Architecture, Edge Cases, Tests, Security |\n| **Completion** | Spec compliance: all requirements delivered, docs updated, no gaps |\n\nReviews block progress until `<verdict>SHIP</verdict>`. Fix â†’ re-review cycles continue until approved.\n\n#### RepoPrompt (Recommended)\n\n[RepoPrompt](https://repoprompt.com/?atp=KJbuL4) provides the best review experience on macOS.\n\n**Why recommended:**\n- Best-in-class context builder for reviews (full file context, smart selection)\n- Enables **context-scout** for deeper codebase discovery (alternative: repo-scout works without RP)\n- Visual diff review UI + persistent chat threads\n\n**Setup:**\n```bash\n# Install rp-cli (macOS only, requires RP 1.5.68+ for auto-open)\nbrew install --cask repoprompt\n# Window auto-opens if needed with --create flag (or open manually for faster context)\n```\n\n**Usage:**\n```bash\n/flow-next:plan-review fn-1 --review=rp\n/flow-next:impl-review --review=rp\n```\n\n#### Codex (Cross-Platform Alternative)\n\nOpenAI Codex CLI works on any platform (macOS, Linux, Windows).\n\n**Why use Codex:**\n- Cross-platform (no macOS requirement)\n- Terminal-based (no GUI needed)\n- Session continuity via thread IDs\n- Same Carmack-level review criteria as RepoPrompt\n- Uses GPT 5.2 High by default (no config needed)\n\n**Trade-off:** Uses heuristic context hints from changed files rather than RepoPrompt's intelligent file selection.\n\n**Setup:**\n```bash\n# Install and authenticate Codex CLI\nnpm install -g @openai/codex\ncodex auth\n```\n\n**Usage:**\n```bash\n/flow-next:plan-review fn-1 --review=codex\n/flow-next:impl-review --review=codex\n\n# Or via flowctl directly\nflowctl codex plan-review fn-1 --base main\nflowctl codex impl-review fn-1.3 --base main\n```\n\n**Verify installation:**\n```bash\nflowctl codex check\n```\n\n#### Configuration\n\nSet default review backend:\n```bash\n# Per-project (saved in .flow/config.json)\nflowctl config set review.backend rp      # or codex, or none\n\n# Per-session (environment variable)\nexport FLOW_REVIEW_BACKEND=codex\n```\n\nPriority: `--review=...` argument > `FLOW_REVIEW_BACKEND` env > `.flow/config.json` > error.\n\n**No auto-detect.** Run `/flow-next:setup` to configure your preferred review backend, or pass `--review=X` explicitly.\n\n#### Which to Choose?\n\n| Scenario | Recommendation |\n|----------|----------------|\n| macOS with GUI available | RepoPrompt (better context) |\n| Linux/Windows | Codex (only option) |\n| CI/headless environments | Codex (no GUI needed) |\n| Ralph overnight runs | Either works; RP auto-opens with --create (1.5.68+) |\n\nWithout a backend configured, reviews fail with a clear error. Run `/flow-next:setup` or pass `--review=X`.\n\n### Dependency Graphs\n\nTasks declare their blockers. `flowctl ready` shows what can start. Nothing executes until dependencies resolve.\n\n**Epic-level dependencies**: During planning, `epic-scout` runs in parallel with other research scouts to find relationships with existing open epics. If the new plan depends on APIs/patterns from another epic, dependencies are auto-set via `flowctl epic add-dep`. Findings reported at end of planningâ€”no prompts needed.\n\n### Auto-Block Stuck Tasks\n\nAfter MAX_ATTEMPTS_PER_TASK failures (default 5), Ralph:\n1. Writes `block-<task>.md` with failure context\n2. Marks task blocked via `flowctl block`\n3. Moves to next task\n\nPrevents infinite retry loops. Review `block-*.md` files in the morning to understand what went wrong.\n\n### Plan-Sync (Opt-in)\n\nSynchronizes downstream task specs when implementation drifts from the original plan.\n\n**Automatic (opt-in):**\n```bash\nflowctl config set planSync.enabled true\n```\n\nWhen enabled, after each task completes, a plan-sync agent:\n1. Compares what was planned vs what was actually built\n2. Identifies downstream tasks that reference stale assumptions (names, APIs, data structures)\n3. Updates affected task specs with accurate info\n\nSkip conditions: disabled (default), task failed, no downstream tasks.\n\n**Cross-epic sync (opt-in, default false):**\n```bash\nflowctl config set planSync.crossEpic true\n```\n\nWhen enabled, plan-sync also checks other open epics for stale references. Useful when multiple epics share APIs/patterns, but increases sync time. Disabled by default to avoid long Ralph loops.\n\n**Manual trigger:**\n```bash\n/flow-next:sync fn-1.2              # Sync from specific task\n/flow-next:sync fn-1                # Scan whole epic for drift\n/flow-next:sync fn-1.2 --dry-run    # Preview changes without writing\n```\n\nManual sync ignores `planSync.enabled` configâ€”if you run it, you want it. Works with any source task status (not just done).\n\n### Memory System (Opt-in)\n\nPersistent learnings that survive context compaction.\n\n```bash\n# Enable\nflowctl config set memory.enabled true\nflowctl memory init\n\n# Manual entries\nflowctl memory add --type pitfall \"Always use flowctl rp wrappers\"\nflowctl memory add --type convention \"Tests in __tests__ dirs\"\nflowctl memory add --type decision \"SQLite over Postgres for simplicity\"\n\n# Query\nflowctl memory list\nflowctl memory search \"flowctl\"\nflowctl memory read --type pitfalls\n```\n\nWhen enabled:\n- **Planning**: `memory-scout` runs in parallel with other scouts\n- **Work**: worker reads memory files directly during re-anchor\n- **Ralph only**: NEEDS_WORK reviews auto-capture to `pitfalls.md`\n\nMemory retrieval works in both manual and Ralph modes. Auto-capture from reviews only happens in Ralph mode (via hooks). Use `flowctl memory add` for manual entries.\n\nConfig lives in `.flow/config.json`, separate from Ralph's `scripts/ralph/config.env`.\n\n---\n\n## Commands\n\nTen commands, complete workflow:\n\n| Command | What It Does |\n|---------|--------------|\n| `/flow-next:plan <idea>` | Research the codebase, create epic with dependency-ordered tasks |\n| `/flow-next:work <id\\|file>` | Execute epic, task, or spec file, re-anchoring before each |\n| `/flow-next:interview <id>` | Deep interview to flesh out a spec before planning |\n| `/flow-next:plan-review <id>` | Carmack-level plan review via RepoPrompt |\n| `/flow-next:impl-review` | Carmack-level impl review of current branch |\n| `/flow-next:epic-review <id>` | Epic-completion review: verify implementation matches spec |\n| `/flow-next:prime` | Assess codebase agent-readiness, propose fixes ([details](#agent-readiness-assessment)) |\n| `/flow-next:sync <id>` | Manual plan-sync: update downstream tasks after implementation drift |\n| `/flow-next:ralph-init` | Scaffold repo-local Ralph harness (`scripts/ralph/`) |\n| `/flow-next:setup` | Optional: install flowctl locally + add docs (for power users) |\n| `/flow-next:uninstall` | Remove flow-next from project (keeps tasks if desired) |\n\nWork accepts an epic (`fn-N`), task (`fn-N.M`), or markdown spec file (`.md`). Spec files auto-create an epic with one task.\n\n### Autonomous Mode (Flags)\n\nAll commands accept flags to skip questions:\n\n```bash\n# Plan with flags\n/flow-next:plan Add caching --research=grep --no-review\n/flow-next:plan Add auth --research=rp --review=rp\n\n# Work with flags\n/flow-next:work fn-1 --branch=current --no-review\n/flow-next:work fn-1 --branch=new --review=export\n\n# Reviews with flags\n/flow-next:plan-review fn-1 --review=rp\n/flow-next:impl-review --review=export\n```\n\nNatural language also works:\n\n```bash\n/flow-next:plan Add webhooks, use context-scout, skip review\n/flow-next:work fn-1 current branch, no review\n```\n\n| Command | Available Flags |\n|---------|-----------------|\n| `/flow-next:plan` | `--research=rp\\|grep`, `--review=rp\\|codex\\|export\\|none`, `--no-review` |\n| `/flow-next:work` | `--branch=current\\|new\\|worktree`, `--review=rp\\|codex\\|export\\|none`, `--no-review` |\n| `/flow-next:plan-review` | `--review=rp\\|codex\\|export` |\n| `/flow-next:impl-review` | `--review=rp\\|codex\\|export` |\n| `/flow-next:prime` | `--report-only`, `--fix-all` |\n| `/flow-next:sync` | `--dry-run` |\n\n### Command Reference\n\nDetailed input documentation for each command.\n\n#### `/flow-next:plan`\n\n```\n/flow-next:plan <idea or fn-N> [--research=rp|grep] [--review=rp|codex|export|none]\n```\n\n| Input | Description |\n|-------|-------------|\n| `<idea>` | Free-form feature description (\"Add user authentication with OAuth\") |\n| `fn-N` | Existing epic ID to update the plan |\n| `--research=rp` | Use RepoPrompt context-scout for deeper codebase discovery |\n| `--research=grep` | Use grep-based repo-scout (default, faster) |\n| `--review=rp\\|codex\\|export\\|none` | Review backend after planning |\n| `--no-review` | Shorthand for `--review=none` |\n\n#### `/flow-next:work`\n\n```\n/flow-next:work <id|file> [--branch=current|new|worktree] [--review=rp|codex|export|none]\n```\n\n| Input | Description |\n|-------|-------------|\n| `fn-N` | Execute entire epic (all tasks in dependency order) |\n| `fn-N.M` | Execute single task |\n| `path/to/spec.md` | Create epic from spec file, execute immediately |\n| `--branch=current` | Work on current branch |\n| `--branch=new` | Create new branch `fn-N-slug` (default) |\n| `--branch=worktree` | Create git worktree for isolated work |\n| `--review=rp\\|codex\\|export\\|none` | Review backend after work |\n| `--no-review` | Shorthand for `--review=none` |\n\n#### `/flow-next:interview`\n\n```\n/flow-next:interview <id|file>\n```\n\n| Input | Description |\n|-------|-------------|\n| `fn-N` | Interview about epic to refine requirements |\n| `fn-N.M` | Interview about specific task |\n| `path/to/spec.md` | Interview about spec file |\n| `\"rough idea\"` | Interview about a new idea (creates epic) |\n\nDeep questioning (40+ questions) to surface requirements, edge cases, and decisions.\n\n#### `/flow-next:plan-review`\n\n```\n/flow-next:plan-review <fn-N> [--review=rp|codex|export] [focus areas]\n```\n\n| Input | Description |\n|-------|-------------|\n| `fn-N` | Epic ID to review |\n| `--review=rp` | Use RepoPrompt (macOS, visual builder) |\n| `--review=codex` | Use OpenAI Codex CLI (cross-platform) |\n| `--review=export` | Export context for manual review |\n| `[focus areas]` | Optional: \"focus on security\" or \"check API design\" |\n\nCarmack-level criteria: Completeness, Feasibility, Clarity, Architecture, Risks, Scope, Testability.\n\n#### `/flow-next:impl-review`\n\n```\n/flow-next:impl-review [--review=rp|codex|export] [focus areas]\n```\n\n| Input | Description |\n|-------|-------------|\n| `--review=rp` | Use RepoPrompt (macOS, visual builder) |\n| `--review=codex` | Use OpenAI Codex CLI (cross-platform) |\n| `--review=export` | Export context for manual review |\n| `[focus areas]` | Optional: \"focus on performance\" or \"check error handling\" |\n\nReviews current branch changes. Carmack-level criteria: Correctness, Simplicity, DRY, Architecture, Edge Cases, Tests, Security.\n\n#### `/flow-next:epic-review`\n\n```\n/flow-next:epic-review <fn-N> [--review=rp|codex|none]\n```\n\n| Input | Description |\n|-------|-------------|\n| `fn-N` | Epic ID to review |\n| `--review=rp` | Use RepoPrompt (macOS, visual builder) |\n| `--review=codex` | Use OpenAI Codex CLI (cross-platform) |\n| `--review=none` | Skip review |\n\nReviews epic implementation against spec. Runs after all tasks complete. Catches requirement gaps, missing functionality, incomplete doc updates.\n\n#### `/flow-next:prime`\n\n```\n/flow-next:prime [--report-only] [--fix-all] [path]\n```\n\n| Input | Description |\n|-------|-------------|\n| (no args) | Assess current directory, interactive fixes |\n| `--report-only` | Show assessment report, skip remediation |\n| `--fix-all` | Apply all recommendations without asking |\n| `[path]` | Assess a different directory |\n\nSee [Agent Readiness Assessment](#agent-readiness-assessment) for details.\n\n#### `/flow-next:sync`\n\n```\n/flow-next:sync <id> [--dry-run]\n```\n\n| Input | Description |\n|-------|-------------|\n| `fn-N` | Sync entire epic's downstream tasks |\n| `fn-N.M` | Sync from specific task |\n| `--dry-run` | Preview changes without writing |\n\nUpdates downstream task specs when implementation drifts from plan.\n\n#### `/flow-next:ralph-init`\n\n```\n/flow-next:ralph-init\n```\n\nNo arguments. Scaffolds `scripts/ralph/` for autonomous operation.\n\n#### `/flow-next:setup`\n\n```\n/flow-next:setup\n```\n\nNo arguments. Optional setup that:\n- Configures review backend (rp, codex, or none)\n- Copies flowctl to `.flow/bin/`\n- Adds flow-next instructions to CLAUDE.md/AGENTS.md\n\n#### `/flow-next:uninstall`\n\n```\n/flow-next:uninstall\n```\n\nNo arguments. Interactive removal with option to keep tasks.\n\n---\n\n## The Workflow\n\n### Defaults (manual and Ralph)\n\nFlow-Next uses the same defaults in manual and Ralph runs. Ralph bypasses prompts only.\n\n- plan: `--research=grep`\n- work: `--branch=new`\n- review: from `.flow/config.json` (set via `/flow-next:setup`), or `none` if not configured\n\nOverride via flags or `scripts/ralph/config.env`.\n\n### Planning Phase\n\n1. **Research (parallel subagents)**: `repo-scout` (or `context-scout` if rp-cli) + `practice-scout` + `docs-scout` + `github-scout` + `epic-scout` + `docs-gap-scout`\n2. **Gap analysis**: `flow-gap-analyst` finds edge cases + missing requirements\n3. **Epic creation**: Writes spec to `.flow/specs/fn-N.md`, sets epic dependencies from `epic-scout` findings\n4. **Task breakdown**: Creates tasks + explicit dependencies in `.flow/tasks/`, adds doc update acceptance criteria from `docs-gap-scout`\n5. **Validate**: `flowctl validate --epic fn-N`\n6. **Review** (optional): `/flow-next:plan-review fn-N` with re-anchor + fix loop until \"Ship\"\n\n### Work Phase\n\n1. **Re-anchor**: Re-read epic + task specs + git state (EVERY task)\n2. **Execute**: Implement using existing patterns\n3. **Test**: Verify acceptance criteria\n4. **Record**: `flowctl done` adds summary + evidence to the task spec\n5. **Review** (optional): `/flow-next:impl-review` via RepoPrompt\n6. **Loop**: Next ready task â†’ repeat until no ready tasks. Close epic manually (`flowctl epic close fn-N`) or let Ralph close at loop end.\n\n---\n\n## Ralph Mode (Autonomous, Opt-In)\n\nRalph is repo-local and opt-in. Files are created only by `/flow-next:ralph-init`. Remove manually with `rm -rf scripts/ralph/`.\n`/flow-next:ralph-init` also writes `scripts/ralph/.gitignore` so run logs stay out of git.\n\nWhat it automates (one unit per iteration, fresh context each time):\n- Selector chooses plan vs work unit (`flowctl next`)\n- Plan gate = plan review loop until Ship (if enabled)\n- Work gate = one task until pass (tests + validate + optional impl review)\n - Single run branch: all epics work on one `ralph-<run-id>` branch (cherry-pick/revert friendly)\n\nEnable:\n```bash\n/flow-next:ralph-init\n./scripts/ralph/ralph_once.sh   # one iteration (observe)\n./scripts/ralph/ralph.sh        # full loop (AFK)\n```\n\n**Watch mode** - see what Claude is doing:\n```bash\n./scripts/ralph/ralph.sh --watch           # Stream tool calls in real-time\n./scripts/ralph/ralph.sh --watch verbose   # Also stream model responses\n```\n\nRun scripts from terminal (not inside Claude Code). `ralph_once.sh` runs one iteration so you can observe before going fully autonomous.\n\n### Ralph defaults vs recommended (plan review gate)\n\n`REQUIRE_PLAN_REVIEW` controls whether Ralph must pass the **plan review gate** before doing any implementation work.\n\n**Default (safe, won't stall):**\n\n* `REQUIRE_PLAN_REVIEW=0`\n  Ralph can proceed to work tasks even if `rp-cli` is missing or unavailable overnight.\n\n**Recommended (best results, requires rp-cli):**\n\n* `REQUIRE_PLAN_REVIEW=1`\n* `PLAN_REVIEW=rp`\n\nThis forces Ralph to run `/flow-next:plan-review` until the epic plan is approved before starting tasks.\n\n**Tip:** If you don't have `rp-cli` installed, keep `REQUIRE_PLAN_REVIEW=0` or Ralph may repeatedly select the plan gate and make no progress.\n\nRalph verifies RepoPrompt reviews via receipt JSON files in `scripts/ralph/runs/<run>/receipts/` (plan + impl).\n\n### Ralph loop (one iteration)\n\n```mermaid\nflowchart TD\n  A[ralph.sh iteration] --> B[flowctl next]\n  B -->|status=plan| C[/flow-next:plan-review fn-N/]\n  C -->|verdict=SHIP| D[flowctl epic set-plan-review-status=ship]\n  C -->|verdict!=SHIP| A\n\n  B -->|status=work| E[/flow-next:work fn-N.M/]\n  E --> F[tests + validate]\n  F -->|fail| A\n\n  F -->|WORK_REVIEW!=none| R[/flow-next:impl-review/]\n  R -->|verdict=SHIP| G[flowctl done + git commit]\n  R -->|verdict!=SHIP| A\n\n  F -->|WORK_REVIEW=none| G\n\n  G --> A\n\n  B -->|status=completion_review| CR[/flow-next:epic-review fn-N/]\n  CR -->|verdict=SHIP| CRD[flowctl epic set-completion-review-status=ship]\n  CR -->|verdict!=SHIP| A\n  CRD --> A\n\n  B -->|status=none| H[close done epics]\n  H --> I[<promise>COMPLETE</promise>]\n```\n\n**YOLO safety**: YOLO mode uses `--dangerously-skip-permissions`. Use a sandbox/container and no secrets in env for unattended runs.\n\n---\n\n## .flow/ Directory\n\n```\n.flow/\nâ”œâ”€â”€ meta.json              # Schema version\nâ”œâ”€â”€ config.json            # Project settings (memory enabled, etc.)\nâ”œâ”€â”€ epics/\nâ”‚   â””â”€â”€ fn-1-add-oauth.json      # Epic metadata (id, title, status, deps)\nâ”œâ”€â”€ specs/\nâ”‚   â””â”€â”€ fn-1-add-oauth.md        # Epic spec (plan, scope, acceptance)\nâ”œâ”€â”€ tasks/\nâ”‚   â”œâ”€â”€ fn-1-add-oauth.1.json    # Task metadata (id, status, priority, deps, assignee)\nâ”‚   â”œâ”€â”€ fn-1-add-oauth.1.md      # Task spec (description, acceptance, done summary)\nâ”‚   â””â”€â”€ ...\nâ””â”€â”€ memory/                # Persistent learnings (opt-in)\n    â”œâ”€â”€ pitfalls.md        # Lessons from NEEDS_WORK reviews\n    â”œâ”€â”€ conventions.md     # Project patterns\n    â””â”€â”€ decisions.md       # Architectural choices\n```\n\nFlowctl accepts schema v1 and v2; new fields are optional and defaulted.\n\nNew fields:\n- Epic JSON: `plan_review_status`, `plan_reviewed_at`, `completion_review_status`, `completion_reviewed_at`, `depends_on_epics`, `branch_name`\n- Task JSON: `priority`\n\n### ID Format\n\n- **Epic**: `fn-N-slug` where `slug` is derived from the epic title (e.g., `fn-1-add-oauth`, `fn-2-fix-login-bug`)\n- **Task**: `fn-N-slug.M` (e.g., `fn-1-add-oauth.1`, `fn-2-fix-login-bug.2`)\n\nThe slug is automatically generated from the epic title (lowercase, hyphens for spaces, max 40 chars). This makes IDs human-readable and self-documenting.\n\n**Backwards compatibility**: Legacy formats `fn-N` (no suffix) and `fn-N-xxx` (random 3-char suffix) are still fully supported. Existing epics don't need migration.\n\nThere are no task IDs outside an epic. If you want a single task, create an epic with one task.\n\n### Separation of Concerns\n\n- **JSON files**: Metadata only (IDs, status, dependencies, assignee)\n- **Markdown files**: Narrative content (specs, descriptions, summaries)\n\n---\n\n## flowctl CLI\n\nBundled Python script for managing `.flow/`. Flow-Next's commands handle epic/task creation automaticallyâ€”use `flowctl` for direct inspection, fixes, or advanced workflows:\n\n```bash\n# Setup\nflowctl init                              # Create .flow/ structure\nflowctl detect                            # Check if .flow/ exists\n\n# Epics\nflowctl epic create --title \"...\"         # Create epic\nflowctl epic create --title \"...\" --branch \"fn-1-epic\"\nflowctl epic set-plan fn-1 --file spec.md # Set epic spec from file\nflowctl epic set-plan-review-status fn-1 --status ship\nflowctl epic close fn-1                   # Close epic (requires all tasks done)\n\n# Tasks\nflowctl task create --epic fn-1 --title \"...\" --deps fn-1.2,fn-1.3 --priority 10\nflowctl task set-description fn-1.1 --file desc.md\nflowctl task set-acceptance fn-1.1 --file accept.md\n\n# Dependencies\nflowctl dep add fn-1.3 fn-1.2             # fn-1.3 depends on fn-1.2\n\n# Workflow\nflowctl ready --epic fn-1                 # Show ready/in_progress/blocked\nflowctl next                              # Select next plan/work unit\nflowctl start fn-1.1                      # Claim and start task\nflowctl done fn-1.1 --summary-file s.md --evidence-json e.json\nflowctl block fn-1.2 --reason-file r.md\n\n# Queries\nflowctl show fn-1 --json                  # Epic with all tasks\nflowctl cat fn-1                          # Print epic spec\n\n# Validation\nflowctl validate --epic fn-1              # Validate single epic\nflowctl validate --all                    # Validate everything (for CI)\n\n# Review helpers\nflowctl rp chat-send --window W --tab T --message-file m.md\nflowctl prep-chat --message-file m.md --selected-paths a.ts b.ts -o payload.json\n```\n\nğŸ“– **[Full CLI reference](docs/flowctl.md)**  \nğŸ¤– **[Ralph deep dive](docs/ralph.md)**\n\n---\n\n## Task Completion\n\nWhen a task completes, `flowctl done` appends structured data to the task spec:\n\n### Done Summary\n\n```markdown\n## Done summary\n\n- Added ContactForm component with Zod validation\n- Integrated with server action for submission\n- All tests passing\n\nFollow-ups:\n- Consider rate limiting (out of scope)\n```\n\n### Evidence\n\n```markdown\n## Evidence\n\n- Commits: a3f21b9\n- Tests: bun test\n- PRs:\n```\n\nThis creates a complete audit trail: what was planned, what was done, how it was verified.\n\n---\n\n## Flow vs Flow-Next\n\n| | Flow | Flow-Next |\n|:--|:--|:--|\n| **Task tracking** | External tracker or standalone plan files | `.flow/` directory (bundled flowctl) |\n| **Install** | Plugin + optional external tracker | Plugin only |\n| **Artifacts** | Standalone plan files | `.flow/specs/` and `.flow/tasks/` |\n| **Config edits** | External config edits (if using tracker) | None |\n| **Multi-user** | Via external tracker | Built-in (scan-based IDs, soft claims) |\n| **Uninstall** | Remove plugin + external tracker config | Delete `.flow/` (and `scripts/ralph/` if enabled) |\n\n**Choose Flow-Next if you want:**\n- Zero external dependencies\n- No config file edits\n- Clean uninstall (delete `.flow/`, and `scripts/ralph/` if enabled)\n- Built-in multi-user safety\n\n**Choose Flow if you:**\n- Already use an external tracker for issue tracking\n- Want plan files as standalone artifacts\n- Need full issue management features\n\n---\n\n## Requirements\n\n- Python 3.8+\n- git\n- Optional: [RepoPrompt](https://repoprompt.com/?atp=KJbuL4) for macOS GUI reviews + enables **context-scout** (deeper codebase discovery than repo-scout). Reviews work without it via Codex backend.\n- Optional: OpenAI Codex CLI (`npm install -g @openai/codex`) for cross-platform terminal-based reviews\n\nWithout a review backend, reviews are skipped.\n\n---\n\n## Development\n\n```bash\nclaude --plugin-dir ./plugins/flow-next\n```\n\n---\n\n## Other Platforms\n\n### OpenAI Codex (Experimental)\n\nFlow-Next partially works in OpenAI Codex with some limitations:\n\n**Caveats:**\n- No subagent support (research scouts run inline or are skipped)\n- `/flow-next:setup` not supported â€” use manual project setup below\n\n**Install:**\n```bash\n./scripts/install-codex.sh flow-next\n```\n\n**Per-project setup** (run in each project):\n```bash\n# Initialize .flow/ directory\n~/.codex/bin/flowctl init\n\n# Optional: copy flowctl locally for project portability\nmkdir -p .flow/bin\ncp ~/.codex/bin/flowctl .flow/bin/\ncp ~/.codex/bin/flowctl.py .flow/bin/\nchmod +x .flow/bin/flowctl\n\n# Optional: configure review backend (codex recommended for Codex CLI)\n~/.codex/bin/flowctl config set review.backend codex\n```\n\n**Optional AGENTS.md snippet** (helps Codex understand flow-next):\n```markdown\n<!-- BEGIN FLOW-NEXT -->\n## Flow-Next\n\nThis project uses Flow-Next for task tracking. Use `.flow/bin/flowctl` or `~/.codex/bin/flowctl`.\n\nQuick commands:\n- `flowctl list` â€” list epics + tasks\n- `flowctl ready --epic fn-N` â€” what's ready\n- `flowctl start fn-N.M` â€” claim task\n- `flowctl done fn-N.M --summary-file s.md --evidence-json e.json`\n<!-- END FLOW-NEXT -->\n```\n\n### Community Ports and Inspired Projects\n\n| Project | Platform | Based On |\n|---------|----------|----------|\n| [flow-next-opencode](https://github.com/gmickel/flow-next-opencode) | OpenCode | Flow-Next |\n| [FlowFactory](https://github.com/Gitmaxd/flowfactory) | Factory.ai Droid | Flow |\n\n---\n\n<div align=\"center\">\n\nMade by [Gordon Mickel](https://mickel.tech) Â· [@gmickel](https://twitter.com/gmickel)\n\n</div>\n"
      },
      "plugins": [
        {
          "name": "flow",
          "description": "Two-step planning + execution workflow with optional Beads integration. Includes 6 subagents, 5 commands, 7 skills.",
          "version": "0.8.4",
          "author": {
            "name": "Gordon Mickel",
            "email": "gordon@mickel.tech",
            "url": "https://mickel.tech"
          },
          "homepage": "https://mickel.tech/apps/flow",
          "tags": [
            "claude-code",
            "plugin",
            "workflow",
            "planning",
            "execution"
          ],
          "source": "./plugins/flow",
          "categories": [
            "claude-code",
            "execution",
            "planning",
            "plugin",
            "workflow"
          ],
          "install_commands": [
            "/plugin marketplace add gmickel/gmickel-claude-marketplace",
            "/plugin install flow@gmickel-claude-marketplace"
          ]
        },
        {
          "name": "flow-next",
          "description": "Zero-dependency planning + execution with .flow/ task tracking and Ralph autonomous mode (multi-model review gates). Worker subagent per task for context isolation. Includes 20 subagents, 11 commands, 16 skills.",
          "version": "0.20.6",
          "author": {
            "name": "Gordon Mickel",
            "email": "gordon@mickel.tech",
            "url": "https://mickel.tech"
          },
          "homepage": "https://mickel.tech/apps/flow-next",
          "tags": [
            "claude-code",
            "plugin",
            "workflow",
            "planning",
            "execution"
          ],
          "source": "./plugins/flow-next",
          "categories": [
            "claude-code",
            "execution",
            "planning",
            "plugin",
            "workflow"
          ],
          "install_commands": [
            "/plugin marketplace add gmickel/gmickel-claude-marketplace",
            "/plugin install flow-next@gmickel-claude-marketplace"
          ]
        }
      ]
    }
  ]
}