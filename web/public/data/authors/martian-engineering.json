{
  "author": {
    "id": "Martian-Engineering",
    "display_name": "martian engineering",
    "avatar_url": "https://avatars.githubusercontent.com/u/181138551?v=4"
  },
  "marketplaces": [
    {
      "name": "martian-engineering",
      "version": null,
      "description": "Claude Code plugins by Martian Engineering",
      "repo_full_name": "Martian-Engineering/claude-team",
      "repo_url": "https://github.com/Martian-Engineering/claude-team",
      "repo_description": "MCP server for orchestrating multiple Claude Code sessions via iTerm2",
      "signals": {
        "stars": 13,
        "forks": 3,
        "pushed_at": "2026-02-05T00:06:36Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"martian-engineering\",\n  \"owner\": {\n    \"name\": \"Martian Engineering\",\n    \"email\": \"josh@martianengineering.com\"\n  },\n  \"metadata\": {\n    \"description\": \"Claude Code plugins by Martian Engineering\",\n    \"version\": \"1.0.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"claude-team\",\n      \"source\": {\n        \"source\": \"github\",\n        \"repo\": \"Martian-Engineering/claude-team\"\n      },\n      \"description\": \"MCP server for spawning and orchestrating multiple Claude Code sessions via iTerm2\",\n      \"version\": \"0.1.0\",\n      \"author\": {\n        \"name\": \"Josh Lehman\"\n      },\n      \"homepage\": \"https://github.com/Martian-Engineering/claude-team\",\n      \"repository\": \"https://github.com/Martian-Engineering/claude-team\",\n      \"license\": \"MIT\",\n      \"keywords\": [\"mcp\", \"iterm2\", \"orchestration\", \"multi-agent\"],\n      \"category\": \"productivity\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"claude-team\",\n  \"version\": \"0.1.0\",\n  \"description\": \"MCP server for spawning and orchestrating multiple Claude Code sessions via iTerm2\",\n  \"author\": {\n    \"name\": \"Josh Lehman\",\n    \"email\": \"josh@martianengineering.com\",\n    \"url\": \"https://github.com/Martian-Engineering\"\n  },\n  \"homepage\": \"https://github.com/Martian-Engineering/claude-team\",\n  \"repository\": \"https://github.com/Martian-Engineering/claude-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"mcp\", \"iterm2\", \"orchestration\", \"multi-agent\"],\n  \"commands\": \"./commands/\",\n  \"mcpServers\": \"./.mcp.json\"\n}\n",
        "README.md": "# Claude Team MCP Server\n\nAn MCP server that allows one Claude Code session to spawn and manage a team of other Claude Code (or Codex) sessions via terminal backends (tmux or iTerm2).\n\n## Introduction\n\n`claude-team` is an MCP server and a set of slash commands for allowing Claude Code to orchestrate a \"team\" of other Claude Code sessions. It uses terminal backends (tmux or iTerm2) to spawn new terminal sessions and run Claude Code within them.\n\n### Why?\n\n- **Parallelism:** Many development tasks can be logically parallelized, but managing that parallelism is difficult for humans with limited attention spans. Claude, meanwhile, is very effective at it.\n- **Context management:** Offloading implementation to a worker gives the implementing agent a fresh context window (smarter), and keeps the manager's context free of implementation details.\n- **Background work:** Sometimes you want to have Claude Code go research something or answer a question without blocking the main thread of work.\n- **Visibility:** `claude-team` spawns real Claude Code sessions. You can watch them, interrupt and take control, or close them out.\n\nBut, *why not just use Claude Code sub-agents*, you ask? They're opaque -- they go off and do things and you, the user, cannot effectively monitor their work, interject, or continue a conversation with them. Using a full Claude Code session obviates this problem.\n\n### Terminal Backends\n\n`claude-team` supports two terminal backends:\n\n| Backend | Platform | Status |\n|---------|----------|--------|\n| **tmux** | macOS, Linux | Primary. Auto-selected when running inside tmux. |\n| **iTerm2** | macOS only | Fully supported. Requires Python API enabled. |\n\nBackend selection order:\n1. `CLAUDE_TEAM_TERMINAL_BACKEND` environment variable (`tmux` or `iterm`)\n2. Config file setting (`terminal.backend`)\n3. Auto-detect: if `TMUX` env var is set, use tmux; otherwise iTerm2\n\n### Git Worktrees: Isolated Branches per Worker\n\nA key feature of `claude-team` is **git worktree support**. When spawning workers with `use_worktree: true` (the default), each worker gets:\n\n- **Its own working directory** - A git worktree at `{repo}/.worktrees/{name}/`\n- **Its own branch** - Automatically created from the current HEAD\n- **Shared repository history** - All worktrees share the same `.git` database, so commits are immediately visible across workers\n\nWorktree naming depends on how workers are spawned:\n- With a bead (issue tracker ID): `{repo}/.worktrees/{bead}-{annotation}/`\n- Without: `{repo}/.worktrees/{worker-name}-{uuid}-{annotation}/`\n\nThe `.worktrees` directory is automatically added to `.gitignore`.\n\n### Codex Support\n\nWorkers can run either Claude Code or OpenAI Codex. Set `agent_type: \"codex\"` in the worker config (or set the default in the config file) to spawn Codex workers instead of Claude Code workers.\n\n## Features\n\n- **Spawn Workers**: Create Claude Code or Codex sessions with multi-pane layouts\n- **Terminal Backends**: tmux (cross-platform) and iTerm2 (macOS)\n- **Git Worktrees**: Isolate each worker in its own branch and working directory\n- **Send Messages**: Inject prompts into managed workers (single or broadcast)\n- **Read Logs**: Retrieve conversation history from worker JSONL files\n- **Monitor Status**: Check if workers are idle, processing, or waiting for input\n- **Idle Detection**: Wait for workers to complete using stop-hook markers\n- **Event Polling**: Track worker lifecycle events (started, completed, stuck)\n- **Visual Identity**: Each worker gets a unique tab color and themed name (Marx Brothers, Beatles, etc.)\n- **Session Recovery**: Discover and adopt orphaned sessions after MCP server restarts\n- **HTTP Mode**: Run as a persistent service with streamable-http transport\n- **Config File**: Centralized configuration at `~/.claude-team/config.json`\n\n## Requirements\n\n- Python 3.11+\n- `uv` package manager\n- **tmux backend**: tmux installed (macOS or Linux)\n- **iTerm2 backend**: macOS with iTerm2 and Python API enabled (Preferences > General > Magic > Enable Python API)\n- **Codex workers** (optional): OpenAI Codex CLI installed\n\n## Installation\n\n### As Claude Code Plugin (recommended)\n\n```bash\n# Add the Martian Engineering marketplace\n/plugin marketplace add Martian-Engineering/claude-team\n\n# Install the plugin\n/plugin install claude-team@martian-engineering\n```\n\nThis automatically configures the MCP server - no manual setup needed.\n\n### From PyPI\n\n```bash\nuvx --from claude-team-mcp@latest claude-team\n```\n\n### From Source\n\n```bash\ngit clone https://github.com/Martian-Engineering/claude-team.git\ncd claude-team\nuv sync\n```\n\n## Configuration for Claude Code\n\nAdd to your Claude Code MCP settings. You can configure this at:\n- **Global**: `~/.claude/settings.json`\n- **Project**: `.claude/settings.json` in your project directory\n\n### Using PyPI package\n\n```json\n{\n  \"mcpServers\": {\n    \"claude-team\": {\n      \"command\": \"uvx\",\n      \"args\": [\"--from\", \"claude-team-mcp@latest\", \"claude-team\"]\n    }\n  }\n}\n```\n\n### Using local clone\n\n```json\n{\n  \"mcpServers\": {\n    \"claude-team\": {\n      \"command\": \"uv\",\n      \"args\": [\"run\", \"--directory\", \"/path/to/claude-team\", \"python\", \"-m\", \"claude_team_mcp\"]\n    }\n  }\n}\n```\n\n### Project-level with auto project path\n\nFor project-scoped `.mcp.json` files, use `CLAUDE_TEAM_PROJECT_DIR` so workers inherit the project path:\n\n```json\n{\n  \"mcpServers\": {\n    \"claude-team\": {\n      \"command\": \"uvx\",\n      \"args\": [\"--from\", \"claude-team-mcp@latest\", \"claude-team\"],\n      \"env\": { \"CLAUDE_TEAM_PROJECT_DIR\": \"${PWD}\" }\n    }\n  }\n}\n```\n\nAfter adding the configuration, restart Claude Code for it to take effect.\n\n## Config File\n\n`claude-team` reads configuration from `~/.claude-team/config.json`. Manage it with the CLI:\n\n```bash\nclaude-team config init          # Create default config\nclaude-team config init --force  # Overwrite existing config\nclaude-team config show          # Show effective config (file + env overrides)\nclaude-team config get <key>     # Get value by dotted path (e.g. defaults.layout)\nclaude-team config set <key> <value>  # Set and persist a value\n```\n\n### Config Schema\n\n```json\n{\n  \"version\": 1,\n  \"commands\": {\n    \"claude\": null,\n    \"codex\": null\n  },\n  \"defaults\": {\n    \"agent_type\": \"claude\",\n    \"skip_permissions\": false,\n    \"use_worktree\": true,\n    \"layout\": \"auto\"\n  },\n  \"terminal\": {\n    \"backend\": null\n  },\n  \"events\": {\n    \"max_size_mb\": 1,\n    \"recent_hours\": 24\n  },\n  \"issue_tracker\": {\n    \"override\": null\n  }\n}\n```\n\n| Section | Key | Description |\n|---------|-----|-------------|\n| `commands.claude` | string | Override Claude CLI command (e.g. `\"happy\"`) |\n| `commands.codex` | string | Override Codex CLI command (e.g. `\"happy codex\"`) |\n| `defaults.agent_type` | `\"claude\"` or `\"codex\"` | Default agent type for new workers |\n| `defaults.skip_permissions` | bool | Default `--dangerously-skip-permissions` flag |\n| `defaults.use_worktree` | bool | Create git worktrees by default |\n| `defaults.layout` | `\"auto\"` or `\"new\"` | Default layout mode for spawn_workers |\n| `terminal.backend` | `\"tmux\"` or `\"iterm\"` | Terminal backend override (null = auto-detect) |\n| `events.max_size_mb` | int | Max event log file size before rotation |\n| `events.recent_hours` | int | Hours of events to retain |\n| `issue_tracker.override` | `\"beads\"` or `\"pebbles\"` | Force a specific issue tracker |\n\n## Environment Variables\n\n| Variable | Default | Description |\n|----------|---------|-------------|\n| `CLAUDE_TEAM_TERMINAL_BACKEND` | (auto-detect) | Force terminal backend: `tmux` or `iterm`. Highest precedence. |\n| `CLAUDE_TEAM_PROJECT_DIR` | (none) | Enables `\"project_path\": \"auto\"` in worker configs. |\n| `CLAUDE_TEAM_COMMAND` | `claude` | Override the CLI command for Claude Code workers. |\n| `CLAUDE_TEAM_CODEX_COMMAND` | `codex` | Override the CLI command for Codex workers. |\n\n## MCP Tools\n\n### Worker Management\n\n| Tool | Description |\n|------|-------------|\n| `spawn_workers` | Create workers with multi-pane layouts. Supports Claude Code and Codex agents. |\n| `list_workers` | List all managed workers with status. Filter by status or project. |\n| `examine_worker` | Get detailed worker status including conversation stats and last response preview. |\n| `close_workers` | Gracefully terminate one or more workers. Worktree branches are preserved. |\n| `discover_workers` | Find existing Claude Code/Codex sessions running in tmux or iTerm2. |\n| `adopt_worker` | Import a discovered session into the managed registry. |\n\n### Communication\n\n| Tool | Description |\n|------|-------------|\n| `message_workers` | Send a message to one or more workers. Supports wait modes: `none`, `any`, `all`. |\n| `read_worker_logs` | Get paginated conversation history from a worker's JSONL file. |\n| `annotate_worker` | Add a coordinator note to a worker (visible in `list_workers` output). |\n\n### Monitoring\n\n| Tool | Description |\n|------|-------------|\n| `check_idle_workers` | Quick non-blocking check if workers are idle. |\n| `wait_idle_workers` | Block until workers are idle. Modes: `all` (fan-out/fan-in) or `any` (pipeline). |\n| `poll_worker_changes` | Read worker event log for started/completed/stuck workers since a timestamp. |\n\n### Utilities\n\n| Tool | Description |\n|------|-------------|\n| `list_worktrees` | List git worktrees created by claude-team for a repository. Supports orphan cleanup. |\n| `issue_tracker_help` | Quick reference for the detected issue tracker (Beads or Pebbles). |\n\n### Worker Identification\n\nWorkers can be referenced by any of three identifiers:\n- **Internal ID**: Short hex string (e.g., `3962c5c4`)\n- **Terminal ID**: Prefixed terminal session ID (e.g., `iterm:UUID` or `tmux:%1`)\n- **Worker name**: Human-friendly name (e.g., `Groucho`, `Aragorn`)\n\nAll tools accept any of these formats.\n\n### Tool Details\n\n#### spawn_workers\n\n```\nWorkerConfig fields:\n  project_path: str         - Required. Explicit path or \"auto\" (uses CLAUDE_TEAM_PROJECT_DIR)\n  agent_type: str           - \"claude\" (default) or \"codex\"\n  name: str                 - Optional worker name override (auto-picked from themed sets if omitted)\n  annotation: str           - Task description (shown in badge, used in branch names)\n  bead: str                 - Issue tracker ID (for badge, branch naming, and workflow instructions)\n  prompt: str               - Additional instructions (combined with standard worker prompt)\n  skip_permissions: bool    - Start with --dangerously-skip-permissions\n  use_worktree: bool        - Create isolated git worktree (default: true)\n  worktree: WorktreeConfig  - Optional: { branch: str, base: str } for explicit branch/base\n\nTop-level arguments:\n  workers: list[WorkerConfig]  - 1-4 worker configurations\n  layout: str                  - \"auto\" (reuse windows) or \"new\" (fresh window)\n\nReturns:\n  sessions, layout, count, coordinator_guidance\n```\n\nWorker assignment is determined by `bead` and/or `prompt`:\n- **bead only**: Worker follows issue tracker workflow (mark in_progress, implement, close, commit)\n- **bead + prompt**: Issue tracker workflow plus additional custom instructions\n- **prompt only**: Custom task with no issue tracking\n- **neither**: Worker spawns idle, waiting for a message\n\n#### message_workers\n\n```\nArguments:\n  session_ids: list[str]   - Worker IDs to message (accepts any identifier format)\n  message: str             - The prompt to send\n  wait_mode: str           - \"none\" (default), \"any\", or \"all\"\n  timeout: float           - Max seconds to wait (default: 600)\n\nReturns:\n  success, session_ids, results, [idle_session_ids, all_idle, timed_out]\n```\n\n#### wait_idle_workers\n\n```\nArguments:\n  session_ids: list[str]   - Worker IDs to wait on\n  mode: str                - \"all\" (default) or \"any\"\n  timeout: float           - Max seconds to wait (default: 600)\n  poll_interval: float     - Seconds between checks (default: 2)\n\nReturns:\n  session_ids, idle_session_ids, all_idle, waiting_on, mode, waited_seconds, timed_out\n```\n\n#### poll_worker_changes\n\n```\nArguments:\n  since: str                    - ISO timestamp to filter events from (or null for latest)\n  stale_threshold_minutes: int  - Minutes without activity before marking stuck (default: 20)\n  include_snapshots: bool       - Include periodic snapshot events (default: false)\n\nReturns:\n  events, summary (started/completed/stuck), active_count, idle_count, poll_ts\n```\n\n## HTTP Server Mode\n\nRun `claude-team` as a persistent HTTP service instead of stdio:\n\n```bash\nclaude-team --http              # Default port 8766\nclaude-team --http --port 9000  # Custom port\n```\n\nHTTP mode enables:\n- **Streamable HTTP transport** for MCP communication\n- **Worker poller** that periodically snapshots worker state and emits lifecycle events\n- **MCP Resources** for read-only session access:\n  - `sessions://list` - List all managed sessions\n  - `sessions://{session_id}/status` - Detailed session status\n  - `sessions://{session_id}/screen` - Terminal screen content\n\n## Slash Commands\n\nInstall slash commands for common workflows:\n\n```bash\nmake install-commands\n```\n\n| Command | Description |\n|---------|-------------|\n| `/spawn-workers` | Analyze tasks, create worktrees, and spawn workers with appropriate prompts |\n| `/check-workers` | Generate a status report for all active workers |\n| `/merge-worker` | Directly merge a worker's branch back to parent (for internal changes) |\n| `/pr-worker` | Create a pull request from a worker's branch |\n| `/team-summary` | Generate end-of-session summary of all worker activity |\n| `/cleanup-worktrees` | Remove worktrees for merged branches |\n\n## Issue Tracker Support\n\n`claude-team` supports both Pebbles (`pb`) and Beads (`bd --no-db`).\nThe tracker is auto-detected by marker directories in the project root:\n\n- `.pebbles` -> Pebbles\n- `.beads` -> Beads\n\nIf both markers exist, Pebbles is selected by default. This can be overridden in the config file with `issue_tracker.override`. Worker prompts and coordination guidance use the detected tracker commands.\n\n## Usage Patterns\n\n### Basic: Spawn and Message\n\nFrom your Claude Code session, spawn workers and send them tasks:\n\n```\n\"Spawn two workers for frontend and backend work\"\n-> Uses spawn_workers with two WorkerConfigs pointing at different project paths\n-> Returns workers named e.g. \"Simon\" and \"Garfunkel\"\n\n\"Send Simon the message: Review the React components\"\n-> Uses message_workers with session_ids=[\"Simon\"]\n\n\"Check on Garfunkel's progress\"\n-> Uses examine_worker with session_id=\"Garfunkel\"\n```\n\n### Parallel Work with Worktrees\n\nSpawn workers in isolated branches for parallel development:\n\n```\n\"Spawn three workers with worktrees to work on different features\"\n-> Uses spawn_workers with use_worktree=true (default)\n-> Creates worktrees at {repo}/.worktrees/\n-> Each worker gets their own branch\n\n\"Message all workers with their tasks, then wait for completion\"\n-> Uses message_workers with wait_mode=\"all\"\n\n\"Create PRs for each worker's branch\"\n-> Uses /pr-worker for each completed worker\n```\n\n### Issue Tracker Integration\n\nAssign workers to issue tracker items for structured workflows:\n\n```\n\"Spawn a worker for issue cic-123\"\n-> spawn_workers with bead=\"cic-123\", annotation=\"Fix auth bug\"\n-> Worker automatically marks issue in_progress, implements, closes, and commits\n\n\"Spawn workers for all ready issues\"\n-> Check `bd ready` or `pb ready` for available work\n-> Spawn one worker per issue with bead assignments\n```\n\n### Coordinated Workflow\n\nUse the manager to coordinate between workers:\n\n```\n\"Spawn a backend worker to create a new API endpoint\"\n-> Wait for completion with wait_idle_workers\n\n\"Now spawn a frontend worker and tell it about the new endpoint\"\n-> Pass context from read_worker_logs of the backend worker\n\n\"Spawn a test worker to write integration tests\"\n-> Coordinate based on both previous workers' output\n```\n\n## Architecture\n\n```\n┌──────────────────────────────────────────────────────────────────┐\n│                Manager Claude Code Session                       │\n│                (has claude-team MCP server)                       │\n├──────────────────────────────────────────────────────────────────┤\n│                         MCP Tools                                │\n│  spawn_workers | message_workers | wait_idle_workers | etc.      │\n└───────────────────────────┬──────────────────────────────────────┘\n                            │\n               ┌────────────┼────────────┐\n               ▼            ▼            ▼\n         ┌──────────┐ ┌──────────┐ ┌──────────┐\n         │ Groucho  │ │ Harpo    │ │ Chico    │\n         │ (tmux)   │ │ (tmux)   │ │ (tmux)   │\n         │          │ │          │ │          │\n         │  Claude  │ │  Claude  │ │  Codex   │\n         │   Code   │ │   Code   │ │          │\n         │          │ │          │ │          │\n         │ worktree │ │ worktree │ │ worktree │\n         │ .worktrees/ │ .worktrees/ │ .worktrees/ │\n         └──────────┘ └──────────┘ └──────────┘\n```\n\nThe manager maintains:\n- **Session Registry**: Maps worker IDs/names to terminal sessions\n- **Terminal Backend**: Persistent connection to tmux or iTerm2 for terminal control\n- **JSONL Monitoring**: Reads Claude/Codex session files for conversation state and idle detection\n- **Worktree Tracking**: Manages git worktrees for isolated worker branches\n- **Event Log**: Records worker lifecycle events for polling and diagnostics\n\n## Development\n\n```bash\n# Sync dependencies (with dev tools)\nuv sync --group dev\n\n# Run tests\nuv run pytest\n\n# Run the server directly (for debugging)\nuv run python -m claude_team_mcp\n\n# Run in HTTP mode\nuv run python -m claude_team_mcp --http\n\n# Install slash commands\nmake install-commands\n```\n\n## Troubleshooting\n\n### tmux backend\n\n**\"tmux not found\"**\n- Install tmux: `brew install tmux` (macOS) or `apt install tmux` (Linux)\n- Ensure tmux is in your PATH\n\n**Workers not detected after restart**\n- Use `discover_workers` to find orphaned sessions\n- Use `adopt_worker` to re-register them\n- Sessions are matched via markers written to JSONL files\n\n### iTerm2 backend\n\n**\"Could not connect to iTerm2\"**\n- Make sure iTerm2 is running\n- Enable: iTerm2 > Preferences > General > Magic > Enable Python API\n\n### General\n\n**\"Session not found\"**\n- The worker may have been closed externally\n- Use `list_workers` to see active workers\n- Workers can be referenced by ID, terminal ID, or name\n\n**\"No JSONL session file found\"**\n- Claude Code may still be starting up\n- Wait a few seconds and try again\n- Check that Claude Code is actually running in the worker pane\n\n**Worktree issues**\n- Use `list_worktrees` to see worktrees for a repository\n- Orphaned worktrees can be cleaned up with `list_worktrees` + `remove_orphans=true`\n- Worktrees are stored at `{repo}/.worktrees/`\n\n## Upgrading\n\nAfter a new version is published to PyPI, you may need to force-refresh the cached version:\n\n```bash\nuv cache clean --force\nuv tool install --force --refresh claude-team-mcp\n```\n\nThis is necessary because `uvx` aggressively caches tool environments.\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "claude-team",
          "source": {
            "source": "github",
            "repo": "Martian-Engineering/claude-team"
          },
          "description": "MCP server for spawning and orchestrating multiple Claude Code sessions via iTerm2",
          "version": "0.1.0",
          "author": {
            "name": "Josh Lehman"
          },
          "homepage": "https://github.com/Martian-Engineering/claude-team",
          "repository": "https://github.com/Martian-Engineering/claude-team",
          "license": "MIT",
          "keywords": [
            "mcp",
            "iterm2",
            "orchestration",
            "multi-agent"
          ],
          "category": "productivity",
          "categories": [
            "iterm2",
            "mcp",
            "multi-agent",
            "orchestration",
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add Martian-Engineering/claude-team",
            "/plugin install claude-team@martian-engineering"
          ]
        }
      ]
    }
  ]
}