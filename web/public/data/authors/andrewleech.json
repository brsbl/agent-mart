{
  "author": {
    "id": "andrewleech",
    "display_name": "Andrew Leech",
    "avatar_url": "https://avatars.githubusercontent.com/u/3318786?u=bbb703de38f85c76b1316cdaee8d61c1646a2454&v=4"
  },
  "marketplaces": [
    {
      "name": "claude-reflections-local",
      "version": null,
      "description": "Local development marketplace for claude-reflections",
      "repo_full_name": "andrewleech/claude-reflections",
      "repo_url": "https://github.com/andrewleech/claude-reflections",
      "repo_description": "Simple claude exptension to provide claude the ability to search and read it's own project conversation history",
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-02-12T00:13:46Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"claude-reflections-local\",\n  \"owner\": {\n    \"name\": \"corona\"\n  },\n  \"metadata\": {\n    \"description\": \"Local development marketplace for claude-reflections\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"claude-reflections\",\n      \"version\": \"0.1.0\",\n      \"source\": \"./\",\n      \"description\": \"Minimal conversation memory with vector search and Agent SDK retrieval\",\n      \"author\": {\n        \"name\": \"corona\"\n      }\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"claude-reflections\",\n  \"version\": \"0.2.0\",\n  \"description\": \"Minimal conversation memory with vector search\",\n  \"author\": {\n    \"name\": \"corona\"\n  },\n  \"skills\": [\"./.claude/skills/reflections\"]\n}\n",
        "README.md": "# claude-reflections\n\nMinimal conversation memory with vector search.\n\n## Overview\n\n`claude-reflections` is a Claude Code plugin that indexes your past conversations and makes them searchable. The **reflections** skill is automatically triggered when you ask about past conversations, searches for relevant context, and reads the original JSONL files to provide detailed answers.\n\n### Key Features\n\n- **No persistent services** (except Qdrant for vector storage)\n- **Reversible indexing** - vectors point back to original JSONL files\n- **Per-project isolation** - each project has its own collection and state\n- **Incremental indexing** - only processes new messages on each run\n- **Auto-indexing on search** - search automatically indexes before searching\n- **Skill-based integration** - automatically triggered by conversation questions\n\n## Architecture\n\n```\n+----------------+     +----------------+     +----------------+\n|  Claude Code   | --> |     Skill      | --> |  CLI Commands  |\n|  (user asks    |     |  (reflections) |     |  (index +      |\n|   question)    |     |                |     |   search)      |\n+----------------+     +----------------+     +--------+-------+\n                                                       |\n                                                       v\n                                              +----------------+\n                                              |     Qdrant     |\n                                              |  (vectors with |\n                                              |  file:line ref)|\n                                              +----------------+\n\nSkill workflow:\n1. User asks: \"How did we fix X?\"\n2. Skill determines project name from $PWD\n3. Skill runs: uv run claude-reflections search \"X\"\n4. CLI auto-indexes (incremental), then searches\n5. Skill reads JSONL files at returned line numbers\n6. Skill synthesizes answer from actual conversation content\n```\n\n## Installation\n\n### Prerequisites\n\n- Python 3.11+\n- [uv](https://docs.astral.sh/uv/) package manager\n- Docker (for Qdrant)\n- Qdrant v1.16 (pinned in install.sh)\n\n### Automated Install (Recommended)\n\n```bash\ncd /path/to/claude-reflections\n./install.sh\n```\n\nThis will:\n- Start Qdrant v1.16 in Docker on a random available port\n- Install Python dependencies (qdrant-client ~=1.16.0)\n- Download the embedding model\n- Create local marketplace at `~/.claude/plugins/local-marketplace`\n- Symlink plugin into marketplace\n- Update `~/.claude/settings.json` with plugin configuration\n\n**After installation:**\n1. Restart Claude Code\n2. Verify installation:\n   - Ask: \"What skills are available?\" → should show `reflections`\n   - Ask: \"What plugins are installed?\" → should show `claude-reflections`\n3. Try asking: \"How did we implement X?\" to trigger the skill\n\n### Manual Installation\n\nIf you prefer manual setup:\n\n1. **Start Qdrant:**\n   ```bash\n   docker run -d --name claude-reflections-qdrant \\\n     -p 6333:6333 \\\n     -v ~/.claude/reflections/qdrant_storage:/qdrant/storage \\\n     qdrant/qdrant:v1.16\n   ```\n\n2. **Install Python dependencies:**\n   ```bash\n   cd /path/to/claude-reflections\n   uv sync\n   ```\n\n3. **Create local marketplace:**\n   ```bash\n   mkdir -p ~/.claude/plugins/local-marketplace/.claude-plugin\n   mkdir -p ~/.claude/plugins/local-marketplace/plugins\n\n   # Symlink plugin\n   ln -s /path/to/claude-reflections \\\n     ~/.claude/plugins/local-marketplace/plugins/claude-reflections\n   ```\n\n4. **Create marketplace manifest:**\n   ```bash\n   cat > ~/.claude/plugins/local-marketplace/.claude-plugin/marketplace.json << 'EOF'\n   {\n     \"$schema\": \"https://anthropic.com/claude-code/marketplace.schema.json\",\n     \"name\": \"local\",\n     \"description\": \"Local development plugins\",\n     \"owner\": {\"name\": \"your-name\"},\n     \"plugins\": [{\n       \"name\": \"claude-reflections\",\n       \"description\": \"Minimal conversation memory with vector search\",\n       \"version\": \"0.2.0\",\n       \"source\": \"./plugins/claude-reflections\",\n       \"category\": \"productivity\"\n     }]\n   }\n   EOF\n   ```\n\n5. **Update Claude Code settings** (`~/.claude/settings.json`):\n   ```json\n   {\n     \"enabledPlugins\": {\n       \"claude-reflections@local\": true\n     },\n     \"extraKnownMarketplaces\": {\n       \"local\": {\n         \"source\": {\n           \"source\": \"directory\",\n           \"path\": \"/home/YOUR_USER/.claude/plugins/local-marketplace\"\n         }\n       }\n     }\n   }\n   ```\n\n6. **Restart Claude Code** for changes to take effect\n\n### Development Setup\n\nFor development without the marketplace:\n\n```bash\n# Clone and setup\ncd ~/claude-reflections\nuv sync --all-extras\n\n# Install pre-commit hooks\nuv run pre-commit install\n```\n\n## Usage\n\n### Skill Usage (via Claude Code)\n\nOnce installed, the **reflections** skill is automatically available in Claude Code. The skill is triggered when you ask questions about past conversations:\n\n**Example questions:**\n- \"How did we fix the authentication bug?\"\n- \"What approach did we take for Docker configuration?\"\n- \"What have we discussed about X?\"\n\nThe skill automatically:\n1. Determines the current project from your working directory\n2. Searches past conversations using vector similarity\n3. Reads relevant JSONL files for full context\n4. Provides synthesized answers based on actual conversations\n\n**Search automatically indexes before searching** (incremental), ensuring results are always up-to-date.\n\nSee [`.claude/skills/reflections/SKILL.md`](.claude/skills/reflections/SKILL.md) for complete usage details.\n\n### CLI Commands\n\n```bash\n# List available projects\nclaude-reflections list\n\n# Index a project (incremental)\nclaude-reflections index --project my-project\n\n# Full reindex\nclaude-reflections index --project my-project --full\n\n# Search\nclaude-reflections search \"Docker configuration\" --project my-project\n\n# Check status\nclaude-reflections status\n```\n\n## Configuration\n\n### Environment Variables\n\n- `QDRANT_URL` - Qdrant server URL (default: `http://localhost:6333`)\n- `REFLECTIONS_STATE_DIR` - State directory (default: `~/.claude/reflections`)\n\n### Per-Project State\n\nEach project's state is stored in:\n```\n~/.claude/reflections/<project>/state.json\n```\n\n## Development\n\n```bash\n# Install dev dependencies\nuv sync --all-extras\n\n# Run tests\nuv run pytest\n\n# Run linting\nuv run ruff check .\nuv run ruff format --check .\n\n# Run type checking\nuv run mypy src/claude_reflections\n```\n\n## How It Works\n\n1. **Indexing**: Parses JSONL files from `~/.claude/projects/<project>/*.jsonl`\n2. **Content Extraction**: Extracts user prompts and assistant text responses (skips thinking blocks and tool use)\n3. **Embedding**: Generates 384-dimensional embeddings using FastEmbed (all-MiniLM-L6-v2)\n4. **Storage**: Stores vectors in Qdrant with payloads containing file path and line number\n5. **Search**: CLI auto-indexes (incremental), then performs vector similarity search\n6. **Skill**: Reads original JSONL files at returned line numbers to provide detailed answers\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "claude-reflections",
          "version": "0.1.0",
          "source": "./",
          "description": "Minimal conversation memory with vector search and Agent SDK retrieval",
          "author": {
            "name": "corona"
          },
          "categories": [],
          "install_commands": [
            "/plugin marketplace add andrewleech/claude-reflections",
            "/plugin install claude-reflections@claude-reflections-local"
          ]
        }
      ]
    }
  ]
}