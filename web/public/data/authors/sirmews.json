{
  "author": {
    "id": "sirmews",
    "display_name": "Navishkar Rao",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/7651718?u=f5d2627169df0a4985287a6a1542ebca60d27cd2&v=4",
    "url": "https://github.com/sirmews",
    "bio": "I have nothing witty to say.",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 5,
      "total_skills": 0,
      "total_stars": 17,
      "total_forks": 2
    }
  },
  "marketplaces": [
    {
      "name": "claude-hook-advisor-marketplace",
      "version": "1.0.0",
      "description": "Official marketplace for Claude Hook Advisor plugin - intelligent command history tracking with automatic failure detection",
      "owner_info": {
        "name": "sirmews",
        "url": "https://github.com/sirmews"
      },
      "keywords": [],
      "repo_full_name": "sirmews/claude-hook-advisor",
      "repo_url": "https://github.com/sirmews/claude-hook-advisor",
      "repo_description": "Suggest alternatives based on matching keywords so Claude stops doing dumb things.",
      "homepage": "",
      "signals": {
        "stars": 17,
        "forks": 2,
        "pushed_at": "2025-11-30T06:34:41Z",
        "created_at": "2025-07-22T09:10:47Z",
        "license": "NOASSERTION"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 1200
        },
        {
          "path": "plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 587
        },
        {
          "path": "plugin/README.md",
          "type": "blob",
          "size": 6805
        },
        {
          "path": "plugin/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/commands/history-failures.md",
          "type": "blob",
          "size": 432
        },
        {
          "path": "plugin/commands/history-search.md",
          "type": "blob",
          "size": 438
        },
        {
          "path": "plugin/commands/history-session.md",
          "type": "blob",
          "size": 476
        },
        {
          "path": "plugin/commands/history.md",
          "type": "blob",
          "size": 450
        },
        {
          "path": "plugin/commands/validate.md",
          "type": "blob",
          "size": 338
        },
        {
          "path": "plugin/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugin/hooks/hooks.json",
          "type": "blob",
          "size": 618
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"claude-hook-advisor-marketplace\",\n  \"description\": \"Official marketplace for Claude Hook Advisor plugin - intelligent command history tracking with automatic failure detection\",\n  \"version\": \"1.0.0\",\n  \"owner\": {\n    \"name\": \"sirmews\",\n    \"url\": \"https://github.com/sirmews\"\n  },\n  \"pluginRoot\": \"./plugin\",\n  \"plugins\": [\n    {\n      \"name\": \"claude-hook-advisor\",\n      \"description\": \"Intelligent command history tracking with automatic failure detection. Tracks all bash commands Claude runs (successful and failed) with semantic directory aliasing and command mapping.\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"sirmews\",\n        \"url\": \"https://github.com/sirmews/claude-hook-advisor\"\n      },\n      \"homepage\": \"https://github.com/sirmews/claude-hook-advisor\",\n      \"repository\": {\n        \"type\": \"git\",\n        \"url\": \"https://github.com/sirmews/claude-hook-advisor\"\n      },\n      \"license\": \"MIT\",\n      \"keywords\": [\n        \"bash\",\n        \"history\",\n        \"command-tracking\",\n        \"debugging\",\n        \"hooks\",\n        \"automation\",\n        \"failure-detection\"\n      ],\n      \"category\": \"developer-tools\",\n      \"source\": \"./plugin\"\n    }\n  ]\n}\n",
        "plugin/.claude-plugin/plugin.json": "{\n  \"name\": \"claude-hook-advisor\",\n  \"description\": \"Intelligent command history tracking with automatic failure detection. Tracks all bash commands Claude runs (successful and failed) with semantic directory aliasing and command mapping.\",\n  \"version\": \"1.0.0\",\n  \"author\": {\n    \"name\": \"sirmews\",\n    \"url\": \"https://github.com/sirmews/claude-hook-advisor\"\n  },\n  \"repository\": {\n    \"type\": \"git\",\n    \"url\": \"https://github.com/sirmews/claude-hook-advisor\"\n  },\n  \"keywords\": [\n    \"bash\",\n    \"history\",\n    \"command-tracking\",\n    \"debugging\",\n    \"hooks\",\n    \"automation\"\n  ]\n}\n",
        "plugin/README.md": "# Claude Hook Advisor Plugin\n\nA Claude Code plugin that provides intelligent command history tracking with automatic failure detection.\n\n## Features\n\n### ðŸŽ¯ Automatic Command Tracking\n- **All commands captured**: Both successful and failed bash commands\n- **Failure detection**: Automatically identifies failed commands (no manual checking needed)\n- **Rich metadata**: Timestamps, exit codes, working directories, session IDs\n\n### ðŸ“Š Slash Commands for Easy Access\n- `/history` - View recent command history (last 20 commands)\n- `/history-failures` - Show only failed commands with AI analysis\n- `/history-search <pattern>` - Search for specific commands (e.g., `/history-search git`)\n- `/history-session <id>` - View all commands from a specific session\n\n### ðŸ”§ Smart Hooks\n- **PreToolUse**: Logs every command attempt as \"pending\"\n- **PostToolUse**: Updates status to \"success\" when complete\n- **UserPromptSubmit**: Enables semantic directory aliasing\n\n### ðŸŽ¨ Additional Capabilities\n- **Command mapping**: Replace commands automatically (npm â†’ bun)\n- **Directory aliasing**: Use natural language for paths (\"docs\" â†’ ~/Documents/Documentation)\n\n## Prerequisites\n\n**Install the claude-hook-advisor binary first:**\n\n```bash\n# From crates.io (recommended)\ncargo install claude-hook-advisor\n\n# Or from source\ngit clone https://github.com/sirmews/claude-hook-advisor.git\ncd claude-hook-advisor\ncargo install --path .\n```\n\n**Verify installation:**\n```bash\nwhich claude-hook-advisor\n# Should output: ~/.cargo/bin/claude-hook-advisor\n```\n\n## Installation\n\n### Option 1: Local Plugin Installation\n\n1. **Copy the plugin directory** to your project:\n   ```bash\n   cp -r plugin ~/.claude/plugins/claude-hook-advisor\n   ```\n\n2. **Enable the plugin** in your `.claude/settings.json`:\n   ```json\n   {\n     \"plugins\": [\n       \"~/.claude/plugins/claude-hook-advisor\"\n     ]\n   }\n   ```\n\n3. **Create configuration file** in your project root:\n   ```bash\n   cat > .claude-hook-advisor.toml << 'EOF'\n   [commands]\n   # Add your command mappings here\n   # npm = \"bun\"\n\n   [semantic_directories]\n   # Add your directory aliases here\n   # docs = \"~/Documents/Documentation\"\n\n   [command_history]\n   enabled = true\n   log_file = \"~/.claude-hook-advisor/bash-history.db\"\n   EOF\n   ```\n\n4. **Restart Claude Code** to activate the plugin\n\n### Option 2: Project-Specific Installation\n\nPlace the plugin directory in your project's `.claude/plugins/` folder:\n\n```bash\nmkdir -p .claude/plugins\ncp -r plugin .claude/plugins/claude-hook-advisor\n```\n\nAdd to `.claude/settings.local.json`:\n```json\n{\n  \"plugins\": [\n    \"./.claude/plugins/claude-hook-advisor\"\n  ]\n}\n```\n\n## Usage\n\n### View Command History\n\nSimply type:\n```\n/history\n```\n\nYou'll see:\n```\nCommand History (5 records)\n================================================================================\n\n2025-11-12T14:30:35Z  âœ— FAILED\n  Command: npm test\n  CWD:     /home/user/my-project\n  Session: abc123-def456\n\n2025-11-12T14:30:30Z  âœ“\n  Command: git status\n  CWD:     /home/user/my-project\n  Session: abc123-def456\n```\n\n### Debug Failed Commands\n\n```\n/history-failures\n```\n\nClaude will automatically:\n- Show all failed commands\n- Analyze why they failed\n- Suggest fixes\n\n### Search for Specific Commands\n\n```\n/history-search git\n```\n\nFinds all commands containing \"git\" in the history.\n\n### Review a Specific Session\n\n```\n/history-session abc123-def456\n```\n\nShows complete timeline of a session's commands.\n\n## How It Works\n\n### Automatic Failure Detection\n\nThe plugin uses a clever two-hook approach:\n\n1. **PreToolUse Hook**: Logs every command Claude attempts with status=\"pending\"\n2. **PostToolUse Hook**: Updates status to \"success\" when commands complete\n\n**Key Insight**: Claude Code only fires PostToolUse for successful commands. Any command that remains \"pending\" means it failed!\n\nThis workaround solves the limitation where Claude Code doesn't send PostToolUse events for failed commands.\n\n### Database Storage\n\nAll commands are stored in SQLite at `~/.claude-hook-advisor/bash-history.db` (configurable).\n\nEach record includes:\n- Timestamp (ISO 8601)\n- Command text\n- Status (success/pending)\n- Exit code\n- Working directory\n- Session ID\n\n## Configuration\n\nEdit `.claude-hook-advisor.toml` in your project root:\n\n```toml\n[commands]\nnpm = \"bun\"              # Replace npm with bun\nyarn = \"bun\"             # Replace yarn with bun\ncurl = \"wget --verbose\"  # Use wget instead of curl\n\n[semantic_directories]\ndocs = \"~/Documents/Documentation\"\nproject_docs = \"~/Documents/my-project\"\n\n[command_history]\nenabled = true\nlog_file = \"~/.claude-hook-advisor/bash-history.db\"\n```\n\n## Troubleshooting\n\n### Plugin Not Loading\n\n1. **Check binary installation**:\n   ```bash\n   which claude-hook-advisor\n   ```\n   Should return `~/.cargo/bin/claude-hook-advisor`\n\n2. **Verify plugin path** in settings.json is correct\n\n3. **Check logs** in Claude Code for errors\n\n4. **Restart Claude Code** after installation\n\n### History Not Recording\n\n1. **Verify config file exists** at `.claude-hook-advisor.toml`\n\n2. **Check history is enabled**:\n   ```toml\n   [command_history]\n   enabled = true\n   ```\n\n3. **Test manually**:\n   ```bash\n   claude-hook-advisor --history\n   ```\n\n### Hooks Not Firing\n\n1. **Restart Claude Code** (hooks load at session start)\n\n2. **Check hooks.json** is in `plugin/hooks/hooks.json`\n\n3. **Verify permissions**:\n   ```bash\n   chmod +x ~/.cargo/bin/claude-hook-advisor\n   ```\n\n## Advanced Usage\n\n### Query History Directly\n\nYou can use the CLI directly for advanced queries:\n\n```bash\n# Last 50 commands\nclaude-hook-advisor --history --limit 50\n\n# Only failures\nclaude-hook-advisor --history --failures\n\n# Search pattern\nclaude-hook-advisor --history --pattern \"npm\"\n\n# Specific session\nclaude-hook-advisor --history --session abc123\n```\n\n### Combine with Other Tools\n\nThe command history is stored in SQLite, so you can query it directly:\n\n```bash\n# View schema\nsqlite3 ~/.claude-hook-advisor/bash-history.db \".schema\"\n\n# Custom queries\nsqlite3 ~/.claude-hook-advisor/bash-history.db \\\n  \"SELECT command, status FROM commands WHERE status='pending' LIMIT 10\"\n```\n\n## Use Cases\n\n- **Debugging**: \"What commands failed in my last session?\"\n- **Learning**: \"Show me all git commands Claude used\"\n- **Auditing**: Track all command attempts for compliance\n- **Optimization**: Find commands that frequently fail\n- **Recovery**: \"What was that curl command that worked yesterday?\"\n\n## Support\n\n- **GitHub**: https://github.com/sirmews/claude-hook-advisor\n- **Issues**: https://github.com/sirmews/claude-hook-advisor/issues\n- **Docs**: https://github.com/sirmews/claude-hook-advisor#readme\n\n## License\n\nSame as claude-hook-advisor main project.\n\n## Credits\n\nCreated by [sirmews](https://github.com/sirmews) as part of the claude-hook-advisor project.\n",
        "plugin/commands/history-failures.md": "---\ndescription: Show only failed bash commands from history\nallowed-tools: Bash(claude-hook-advisor:*)\n---\n\n!claude-hook-advisor --history --failures --limit 20\n\nThe output above shows all commands that failed. Let me analyze these failures and:\n1. Identify patterns in the errors\n2. Suggest fixes for the failed commands\n3. Explain why each command might have failed\n\nWhat would you like me to help with regarding these failures?\n",
        "plugin/commands/history-search.md": "---\ndescription: Search command history by pattern (usage: /history-search <pattern>)\nallowed-tools: Bash(claude-hook-advisor:*)\n---\n\n!claude-hook-advisor --history --pattern \"$ARGUMENTS\" --limit 50\n\nI've searched the command history for commands matching \"$ARGUMENTS\". The results above show all matching commands with their success/failure status.\n\nLet me help you understand these results or find specific commands you're looking for.\n",
        "plugin/commands/history-session.md": "---\ndescription: Show command history for a specific session (usage: /history-session <session-id>)\nallowed-tools: Bash(claude-hook-advisor:*)\n---\n\n!claude-hook-advisor --history --session \"$1\" --limit 100\n\nThe output above shows all commands from session \"$1\". This includes:\n- All commands attempted in this session\n- Success and failure status for each\n- Complete timeline of command execution\n\nLet me analyze this session's activity and help you understand what happened.\n",
        "plugin/commands/history.md": "---\ndescription: Show recent bash command history (last 20 commands)\nallowed-tools: Bash(claude-hook-advisor:*)\n---\n\n!claude-hook-advisor --history --limit 20\n\nThe command history above shows all recent bash commands I've executed. Each entry includes:\n- âœ“ for successful commands\n- âœ— FAILED for commands that failed\n- Timestamp, command, working directory, and session ID\n\nLet me analyze this history and answer any questions you have about it.\n",
        "plugin/commands/validate.md": "---\ndescription: Validate claude-hook-advisor installation and configuration\nallowed-tools: Bash(claude-hook-advisor:*)\n---\n\n!claude-hook-advisor --validate\n\nThe validation output above shows the health of your claude-hook-advisor installation:\n\nâœ“ = Working correctly\nâœ— = Needs attention\n\nLet me analyze any issues and suggest fixes.\n",
        "plugin/hooks/hooks.json": "{\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Bash\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"claude-hook-advisor --hook\"\n          }\n        ]\n      }\n    ],\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Bash\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"claude-hook-advisor --hook\"\n          }\n        ]\n      }\n    ],\n    \"UserPromptSubmit\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"claude-hook-advisor --hook\"\n          }\n        ]\n      }\n    ]\n  }\n}\n"
      },
      "plugins": [
        {
          "name": "claude-hook-advisor",
          "description": "Intelligent command history tracking with automatic failure detection. Tracks all bash commands Claude runs (successful and failed) with semantic directory aliasing and command mapping.",
          "version": "1.0.0",
          "author": {
            "name": "sirmews",
            "url": "https://github.com/sirmews/claude-hook-advisor"
          },
          "homepage": "https://github.com/sirmews/claude-hook-advisor",
          "repository": {
            "type": "git",
            "url": "https://github.com/sirmews/claude-hook-advisor"
          },
          "license": "MIT",
          "keywords": [
            "bash",
            "history",
            "command-tracking",
            "debugging",
            "hooks",
            "automation",
            "failure-detection"
          ],
          "category": "developer-tools",
          "source": "./plugin",
          "categories": [
            "automation",
            "bash",
            "command-tracking",
            "debugging",
            "developer-tools",
            "failure-detection",
            "history",
            "hooks"
          ],
          "install_commands": [
            "/plugin marketplace add sirmews/claude-hook-advisor",
            "/plugin install claude-hook-advisor@claude-hook-advisor-marketplace"
          ]
        }
      ]
    }
  ]
}