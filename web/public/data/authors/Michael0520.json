{
  "author": {
    "id": "Michael0520",
    "display_name": "Michael Lo",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/60827537?u=6e532d2633baefefd6aee132572dc3c395042d95&v=4",
    "url": "https://github.com/Michael0520",
    "bio": "Web Frontend Engineer",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 13,
      "total_commands": 9,
      "total_skills": 17,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "milo-claudekit",
      "version": null,
      "description": "A collection of plugins for Claude Code.",
      "owner_info": {
        "name": "Michael0520"
      },
      "keywords": [],
      "repo_full_name": "Michael0520/milo-claudekit",
      "repo_url": "https://github.com/Michael0520/milo-claudekit",
      "repo_description": null,
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-28T09:36:43Z",
        "created_at": "2026-01-17T15:35:50Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 2249
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/chrome-devtools-mcp",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/chrome-devtools-mcp/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/chrome-devtools-mcp/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 181
        },
        {
          "path": "plugins/chrome-devtools-mcp/README.md",
          "type": "blob",
          "size": 478
        },
        {
          "path": "plugins/chrome-devtools-mcp/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/chrome-devtools-mcp/skills/chrome-devtools-mcp",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/chrome-devtools-mcp/skills/chrome-devtools-mcp/SKILL.md",
          "type": "blob",
          "size": 8979
        },
        {
          "path": "plugins/continuous-learning",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/continuous-learning/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/continuous-learning/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 184
        },
        {
          "path": "plugins/continuous-learning/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/continuous-learning/commands/learn.md",
          "type": "blob",
          "size": 1190
        },
        {
          "path": "plugins/continuous-learning/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/continuous-learning/hooks/hooks.json",
          "type": "blob",
          "size": 287
        },
        {
          "path": "plugins/dependabot",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/dependabot/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/dependabot/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 177
        },
        {
          "path": "plugins/dependabot/README.md",
          "type": "blob",
          "size": 528
        },
        {
          "path": "plugins/dependabot/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/dependabot/commands/merge.md",
          "type": "blob",
          "size": 5299
        },
        {
          "path": "plugins/dependabot/commands/setup.md",
          "type": "blob",
          "size": 1701
        },
        {
          "path": "plugins/git",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/git/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/git/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 146
        },
        {
          "path": "plugins/git/README.md",
          "type": "blob",
          "size": 1646
        },
        {
          "path": "plugins/git/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/git/commands/commit.md",
          "type": "blob",
          "size": 2023
        },
        {
          "path": "plugins/git/commands/ignore.md",
          "type": "blob",
          "size": 1585
        },
        {
          "path": "plugins/git/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/git/hooks/hooks.json",
          "type": "blob",
          "size": 292
        },
        {
          "path": "plugins/guard",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/guard/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/guard/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 160
        },
        {
          "path": "plugins/guard/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/guard/hooks/hooks.json",
          "type": "blob",
          "size": 294
        },
        {
          "path": "plugins/legacy-analyzer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/legacy-analyzer/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/legacy-analyzer/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 171
        },
        {
          "path": "plugins/legacy-analyzer/README.md",
          "type": "blob",
          "size": 402
        },
        {
          "path": "plugins/legacy-analyzer/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/legacy-analyzer/agents/legacy-scope-analyzer.md",
          "type": "blob",
          "size": 3691
        },
        {
          "path": "plugins/license",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/license/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/license/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 170
        },
        {
          "path": "plugins/license/README.md",
          "type": "blob",
          "size": 340
        },
        {
          "path": "plugins/license/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/license/commands/setup.md",
          "type": "blob",
          "size": 1852
        },
        {
          "path": "plugins/milo-core",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/milo-core/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/milo-core/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 168
        },
        {
          "path": "plugins/milo-core/README.md",
          "type": "blob",
          "size": 1032
        },
        {
          "path": "plugins/milo-core/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/milo-core/agents/angular-code-review.md",
          "type": "blob",
          "size": 2323
        },
        {
          "path": "plugins/milo-core/agents/one-ui-migration-checker.md",
          "type": "blob",
          "size": 14203
        },
        {
          "path": "plugins/milo-core/agents/security-reviewer.md",
          "type": "blob",
          "size": 6232
        },
        {
          "path": "plugins/milo-core/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/milo-core/commands/sync-notion.md",
          "type": "blob",
          "size": 2096
        },
        {
          "path": "plugins/milo-core/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/milo-core/hooks/pre-commit-check.sh",
          "type": "blob",
          "size": 724
        },
        {
          "path": "plugins/one-ui-migration",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 194
        },
        {
          "path": "plugins/one-ui-migration/README.md",
          "type": "blob",
          "size": 1493
        },
        {
          "path": "plugins/one-ui-migration/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/agents/migration-executor.md",
          "type": "blob",
          "size": 4897
        },
        {
          "path": "plugins/one-ui-migration/agents/migration-reviewer.md",
          "type": "blob",
          "size": 6137
        },
        {
          "path": "plugins/one-ui-migration/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/check-barrel-files",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/check-barrel-files/SKILL.md",
          "type": "blob",
          "size": 3583
        },
        {
          "path": "plugins/one-ui-migration/skills/compare-i18n-keys",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/compare-i18n-keys/SKILL.md",
          "type": "blob",
          "size": 2380
        },
        {
          "path": "plugins/one-ui-migration/skills/form-extraction",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/form-extraction/SKILL.md",
          "type": "blob",
          "size": 3628
        },
        {
          "path": "plugins/one-ui-migration/skills/form-extraction/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/form-extraction/references/patterns.md",
          "type": "blob",
          "size": 8297
        },
        {
          "path": "plugins/one-ui-migration/skills/full-migration-pipeline",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/full-migration-pipeline/SKILL.md",
          "type": "blob",
          "size": 14274
        },
        {
          "path": "plugins/one-ui-migration/skills/generate-qa-test-cases",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/generate-qa-test-cases/SKILL.md",
          "type": "blob",
          "size": 7876
        },
        {
          "path": "plugins/one-ui-migration/skills/icon-replacement",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/icon-replacement/SKILL.md",
          "type": "blob",
          "size": 9281
        },
        {
          "path": "plugins/one-ui-migration/skills/migrate-page-gitlab",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/migrate-page-gitlab/SKILL.md",
          "type": "blob",
          "size": 9104
        },
        {
          "path": "plugins/one-ui-migration/skills/migrate-page",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/migrate-page/SKILL.md",
          "type": "blob",
          "size": 10039
        },
        {
          "path": "plugins/one-ui-migration/skills/migration-lint",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/migration-lint/SKILL.md",
          "type": "blob",
          "size": 17912
        },
        {
          "path": "plugins/one-ui-migration/skills/migration-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/migration-patterns/SKILL.md",
          "type": "blob",
          "size": 5279
        },
        {
          "path": "plugins/one-ui-migration/skills/migration-planning",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/migration-planning/SKILL.md",
          "type": "blob",
          "size": 7860
        },
        {
          "path": "plugins/one-ui-migration/skills/migration-review",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/migration-review/SKILL.md",
          "type": "blob",
          "size": 9244
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/SKILL.md",
          "type": "blob",
          "size": 5662
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/guides",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/guides/create-dialog.md",
          "type": "blob",
          "size": 4294
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/guides/create-page.md",
          "type": "blob",
          "size": 3931
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/guides/create-table.md",
          "type": "blob",
          "size": 4669
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/index.md",
          "type": "blob",
          "size": 3210
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/angular-20-syntax.md",
          "type": "blob",
          "size": 3762
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/api-types.md",
          "type": "blob",
          "size": 12330
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/checklist.md",
          "type": "blob",
          "size": 23677
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/ddd-architecture.md",
          "type": "blob",
          "size": 11255
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/migration-checklist.md",
          "type": "blob",
          "size": 7531
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/migration-context.md",
          "type": "blob",
          "size": 1766
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/migration-workflow.md",
          "type": "blob",
          "size": 7829
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/pitfalls.md",
          "type": "blob",
          "size": 11124
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/pitfalls",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/pitfalls/angular-syntax.md",
          "type": "blob",
          "size": 6621
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/pitfalls/ddd-violations.md",
          "type": "blob",
          "size": 9790
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/pitfalls/forms-services.md",
          "type": "blob",
          "size": 13069
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/pitfalls/index.md",
          "type": "blob",
          "size": 2121
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/pitfalls/translation-layout.md",
          "type": "blob",
          "size": 7079
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/shared-stores.md",
          "type": "blob",
          "size": 9696
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/state-management.md",
          "type": "blob",
          "size": 7450
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/auth.md",
          "type": "blob",
          "size": 1515
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/common-table.md",
          "type": "blob",
          "size": 5103
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/form-builder.md",
          "type": "blob",
          "size": 10353
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/forms",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/forms/error-handling.md",
          "type": "blob",
          "size": 7216
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/forms/patterns.md",
          "type": "blob",
          "size": 9738
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/forms/validators.md",
          "type": "blob",
          "size": 16355
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/loading-states.md",
          "type": "blob",
          "size": 5848
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/mx-components.md",
          "type": "blob",
          "size": 13490
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/one-validators.md",
          "type": "blob",
          "size": 13883
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/routing.md",
          "type": "blob",
          "size": 3181
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/shared-helpers.md",
          "type": "blob",
          "size": 7100
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/signal-store.md",
          "type": "blob",
          "size": 3184
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/tables",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/tables/advanced.md",
          "type": "blob",
          "size": 5851
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/tables/auto-generate.md",
          "type": "blob",
          "size": 5110
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/tables/basics.md",
          "type": "blob",
          "size": 8772
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/tables/columns.md",
          "type": "blob",
          "size": 13940
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/transloco.md",
          "type": "blob",
          "size": 2792
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/ui",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/ui/buttons.md",
          "type": "blob",
          "size": 4609
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/ui/components.md",
          "type": "blob",
          "size": 3609
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/ui/dialogs.md",
          "type": "blob",
          "size": 7621
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/ui/forms.md",
          "type": "blob",
          "size": 2470
        },
        {
          "path": "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/ui/page-layout.md",
          "type": "blob",
          "size": 4710
        },
        {
          "path": "plugins/one-ui-migration/skills/ui-layout-guide",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/ui-layout-guide/SKILL.md",
          "type": "blob",
          "size": 5423
        },
        {
          "path": "plugins/one-ui-migration/skills/verify-legacy-with-qa-testcases",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/one-ui-migration/skills/verify-legacy-with-qa-testcases/SKILL.md",
          "type": "blob",
          "size": 11413
        },
        {
          "path": "plugins/rubric",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/rubric/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/rubric/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 168
        },
        {
          "path": "plugins/rubric/README.md",
          "type": "blob",
          "size": 3737
        },
        {
          "path": "plugins/rubric/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/rubric/agents/code-analyzer.md",
          "type": "blob",
          "size": 2553
        },
        {
          "path": "plugins/rubric/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/rubric/commands/config.md",
          "type": "blob",
          "size": 5691
        },
        {
          "path": "plugins/rubric/commands/create.md",
          "type": "blob",
          "size": 3977
        },
        {
          "path": "plugins/rubric/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/rubric/hooks/hooks.json",
          "type": "blob",
          "size": 449
        },
        {
          "path": "plugins/session-memory",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/session-memory/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/session-memory/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 182
        },
        {
          "path": "plugins/session-memory/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/session-memory/hooks/hooks.json",
          "type": "blob",
          "size": 514
        },
        {
          "path": "plugins/worktree-manager",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/worktree-manager/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/worktree-manager/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 193
        },
        {
          "path": "plugins/worktree-manager/README.md",
          "type": "blob",
          "size": 692
        },
        {
          "path": "plugins/worktree-manager/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/worktree-manager/skills/worktree-manager",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/worktree-manager/skills/worktree-manager/README.md",
          "type": "blob",
          "size": 4189
        },
        {
          "path": "plugins/worktree-manager/skills/worktree-manager/SKILL.md",
          "type": "blob",
          "size": 20770
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"milo-claudekit\",\n  \"owner\": {\n    \"name\": \"Michael0520\"\n  },\n  \"metadata\": {\n    \"description\": \"A collection of plugins for Claude Code.\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"dependabot\",\n      \"source\": \"./plugins/dependabot\",\n      \"description\": \"Commands to interact with Dependabot on GitHub repositories.\"\n    },\n    {\n      \"name\": \"git\",\n      \"source\": \"./plugins/git\",\n      \"description\": \"Common repository operations for git\"\n    },\n    {\n      \"name\": \"license\",\n      \"source\": \"./plugins/license\",\n      \"description\": \"Commands to manage open source licenses in current repository\"\n    },\n    {\n      \"name\": \"rubric\",\n      \"source\": \"./plugins/rubric\",\n      \"description\": \"Automated code standards checks based on custom rubrics\"\n    },\n    {\n      \"name\": \"chrome-devtools-mcp\",\n      \"source\": \"./plugins/chrome-devtools-mcp\",\n      \"description\": \"UI testing and browser automation via Chrome DevTools MCP\"\n    },\n    {\n      \"name\": \"worktree-manager\",\n      \"source\": \"./plugins/worktree-manager\",\n      \"description\": \"Git worktree management for parallel development\"\n    },\n    {\n      \"name\": \"one-ui-migration\",\n      \"source\": \"./plugins/one-ui-migration\",\n      \"description\": \"Angular 16 to 20 migration with DDD architecture\"\n    },\n    {\n      \"name\": \"milo-core\",\n      \"source\": \"./plugins/milo-core\",\n      \"description\": \"Personal Claude Code settings, rules, docs, and agents\"\n    },\n    {\n      \"name\": \"legacy-analyzer\",\n      \"source\": \"./plugins/legacy-analyzer\",\n      \"description\": \"Analyze legacy codebase and generate migration plan\"\n    },\n    {\n      \"name\": \"continuous-learning\",\n      \"source\": \"./plugins/continuous-learning\",\n      \"description\": \"Extract and save reusable patterns from Claude Code sessions\"\n    },\n    {\n      \"name\": \"guard\",\n      \"source\": \"./plugins/guard\",\n      \"description\": \"PreToolUse guards for safer Claude Code operations\"\n    },\n    {\n      \"name\": \"session-memory\",\n      \"source\": \"./plugins/session-memory\",\n      \"description\": \"Persist and restore session context across Claude Code sessions\"\n    },\n    {\n      \"name\": \"superpowers\",\n      \"source\": {\n        \"source\": \"github\",\n        \"repo\": \"obra/superpowers\"\n      }\n    }\n  ]\n}\n",
        "plugins/chrome-devtools-mcp/.claude-plugin/plugin.json": "{\n  \"name\": \"chrome-devtools-mcp\",\n  \"description\": \"UI testing and browser automation via Chrome DevTools MCP\",\n  \"version\": \"1.1.0\",\n  \"author\": {\n    \"name\": \"Michael0520\"\n  }\n}\n",
        "plugins/chrome-devtools-mcp/README.md": "Chrome DevTools MCP\n===\n\n## Purpose\n\nUI testing and browser automation via Chrome DevTools MCP. Use for taking screenshots, checking console errors, testing UI interactions, or verifying visual changes.\n\n## Skills\n\n| Skill | Description |\n|-------|-------------|\n| chrome-devtools-mcp | Chrome DevTools MCP integration for UI testing |\n\n## Configuration\n\nEnsure Chrome DevTools MCP is configured:\n\n```bash\nclaude mcp add chrome-devtools -- npx -y chrome-devtools-mcp@latest\n```\n",
        "plugins/chrome-devtools-mcp/skills/chrome-devtools-mcp/SKILL.md": "---\nname: chrome-devtools-mcp\ndescription: Testing UI and automating browsers via Chrome DevTools MCP. Use when taking screenshots, checking console errors, testing UI interactions, or verifying visual changes.\nlicense: MIT\ncompatibility: Requires Chrome DevTools MCP server configured via 'claude mcp add chrome-devtools'\nallowed-tools: mcp__chrome-devtools__*\n---\n\n# Chrome DevTools MCP - UI Testing Skill\n\n## Auto-activation Triggers\n\n### English\n- \"test UI\", \"test the UI\", \"UI test\"\n- \"open browser\", \"launch browser\"\n- \"take screenshot\", \"capture screenshot\"\n- \"check console errors\", \"any console errors\"\n- \"test in browser\", \"verify in browser\"\n\n### 中文\n- \"測試 UI\"、\"UI 測試\"、\"測試畫面\"\n- \"開瀏覽器\"、\"啟動瀏覽器\"\n- \"截圖\"、\"擷取畫面\"\n- \"檢查錯誤\"、\"有沒有錯誤\"、\"console 錯誤\"\n- \"瀏覽器測試\"、\"在瀏覽器驗證\"\n\n### Auto-trigger Scenarios\n- User completed a feature and needs visual verification\n- User asks to verify a UI change\n- User wants to debug a visual issue\n\n## Prerequisites\n\nEnsure Chrome DevTools MCP is configured in Claude Code:\n\n```bash\nclaude mcp add chrome-devtools -- npx -y chrome-devtools-mcp@latest\n```\n\nOr with options:\n```bash\n# Headless mode (no UI)\nclaude mcp add chrome-devtools -- npx -y chrome-devtools-mcp@latest --headless\n\n# Isolated session (clean browser state)\nclaude mcp add chrome-devtools -- npx -y chrome-devtools-mcp@latest --isolated\n```\n\n## Available MCP Tools (26 total)\n\n### Navigation & Pages\n| Tool | Description |\n|------|-------------|\n| `mcp__chrome-devtools__new_page` | Open new page with URL |\n| `mcp__chrome-devtools__navigate_page` | Navigate to URL, back, forward, reload |\n| `mcp__chrome-devtools__list_pages` | List all open pages |\n| `mcp__chrome-devtools__select_page` | Select page by index |\n| `mcp__chrome-devtools__close_page` | Close page by index |\n| `mcp__chrome-devtools__wait_for` | Wait for text to appear |\n\n### Input & Interaction\n| Tool | Description |\n|------|-------------|\n| `mcp__chrome-devtools__click` | Click element by uid |\n| `mcp__chrome-devtools__fill` | Fill input/textarea/select |\n| `mcp__chrome-devtools__fill_form` | Fill multiple form elements |\n| `mcp__chrome-devtools__hover` | Hover over element |\n| `mcp__chrome-devtools__drag` | Drag element to another |\n| `mcp__chrome-devtools__press_key` | Press key or combination |\n| `mcp__chrome-devtools__handle_dialog` | Accept/dismiss browser dialogs |\n| `mcp__chrome-devtools__upload_file` | Upload file through input |\n\n### Debugging & Inspection\n| Tool | Description |\n|------|-------------|\n| `mcp__chrome-devtools__take_snapshot` | Get page A11y tree with UIDs |\n| `mcp__chrome-devtools__take_screenshot` | Capture page/element screenshot |\n| `mcp__chrome-devtools__evaluate_script` | Run JavaScript in page |\n| `mcp__chrome-devtools__list_console_messages` | List console messages |\n| `mcp__chrome-devtools__get_console_message` | Get specific console message |\n\n### Network\n| Tool | Description |\n|------|-------------|\n| `mcp__chrome-devtools__list_network_requests` | List network requests |\n| `mcp__chrome-devtools__get_network_request` | Get request details |\n\n### Performance\n| Tool | Description |\n|------|-------------|\n| `mcp__chrome-devtools__performance_start_trace` | Start performance trace |\n| `mcp__chrome-devtools__performance_stop_trace` | Stop trace recording |\n| `mcp__chrome-devtools__performance_analyze_insight` | Analyze performance insights |\n\n### Emulation\n| Tool | Description |\n|------|-------------|\n| `mcp__chrome-devtools__emulate` | Emulate network/CPU throttling |\n| `mcp__chrome-devtools__resize_page` | Resize viewport |\n\n## Common UI Testing Patterns\n\n### 1. Basic Page Verification\n\n```\n1. take_snapshot → Get page structure with element UIDs\n2. take_screenshot → Visual verification\n3. list_console_messages → Check for errors\n```\n\n### 2. Form Testing Flow\n\n```\n1. new_page → Open target URL\n2. take_snapshot → Get form element UIDs\n3. fill_form → Fill all form fields\n4. click → Submit button\n5. wait_for → Wait for success message\n6. take_screenshot → Capture result\n```\n\n### 3. Interactive Component Testing\n\n```\n1. take_snapshot → Get element UIDs\n2. click → Trigger component action\n3. take_snapshot → Verify state change\n4. list_console_messages → Check for errors\n```\n\n### 4. Responsive Design Testing\n\n```\n1. resize_page → Set mobile viewport (375x667)\n2. take_screenshot → Mobile view\n3. resize_page → Set tablet viewport (768x1024)\n4. take_screenshot → Tablet view\n5. resize_page → Set desktop viewport (1920x1080)\n6. take_screenshot → Desktop view\n```\n\n### 5. Performance Audit\n\n```\n1. performance_start_trace → Begin recording\n2. navigate_page → Load page\n3. performance_stop_trace → End recording\n4. performance_analyze_insight → Get CWV scores\n```\n\n### 6. Network Request Verification\n\n```\n1. navigate_page → Load page\n2. list_network_requests → See all requests\n3. get_network_request → Check specific API response\n```\n\n## Workflow: Post-Feature UI Verification\n\nWhen you complete a feature that requires UI testing:\n\n### Step 1: Start Browser\n```\nUse: mcp__chrome-devtools__new_page\nURL: http://localhost:{PORT}/path-to-feature\n\nCommon ports:\n- Next.js: 3000 or custom (this project: 1408)\n- Vite: 5173\n- Angular: 4200\n```\n\n### Step 2: Take Snapshot (ALWAYS do this first)\n```\nUse: mcp__chrome-devtools__take_snapshot\nThis returns element UIDs needed for interactions\n```\n\n### Step 3: Interact with Elements\n```\nUse element UIDs from snapshot to:\n- click buttons\n- fill forms\n- hover for tooltips\n```\n\n### Step 4: Verify Results\n```\n- take_screenshot for visual verification\n- list_console_messages for error checking\n- take_snapshot for DOM state verification\n```\n\n## Error Handling\n\n### Navigation Timeout\nIf `navigate_page` times out:\n1. Check if dev server is running\n2. Use `new_page` instead of `navigate_page`\n3. Increase timeout: `timeout: 30000`\n\n### Element Not Found\nIf click/fill fails:\n1. Re-run `take_snapshot` to get latest UIDs\n2. Verify element is within viewport\n3. Use `wait_for` to wait for element to appear\n\n### Page Not Loading\nIf page fails to load:\n1. Verify URL is correct\n2. Check dev server logs\n3. Try `navigate_page` with `type: \"reload\"`\n\n## Tips\n\n1. **Always take_snapshot first** - You need element UIDs before interacting\n2. **Prefer snapshot over screenshot** - Faster and provides actionable data\n3. **Check console after interactions** - Catch runtime errors early\n4. **Use wait_for after navigation** - Ensure page is loaded before interacting\n5. **Filter network requests** - Use resourceTypes to focus on API calls\n6. **Re-snapshot after interactions** - UIDs may change after DOM updates\n\n## Quick Reference\n\n```\n# Open dev server and test\nmcp__chrome-devtools__new_page → http://localhost:{PORT}\n\n# Get page structure\nmcp__chrome-devtools__take_snapshot\n\n# Interact (use UID from snapshot)\nmcp__chrome-devtools__click → uid: \"abc123\"\nmcp__chrome-devtools__fill → uid: \"input1\", value: \"test\"\n\n# Verify\nmcp__chrome-devtools__take_screenshot\nmcp__chrome-devtools__list_console_messages → types: [\"error\", \"warn\"]\n```\n\n## Complete Example: Testing a Login Form\n\nComplete login form testing workflow:\n\n```\nStep 1: Open login page\n────────────────────\nmcp__chrome-devtools__new_page\n  url: \"http://localhost:3000/login\"\n\nStep 2: Get page structure\n────────────────────\nmcp__chrome-devtools__take_snapshot\n\nOutput:\n  uid=1_10 textbox \"Email\"\n  uid=1_15 textbox \"Password\"\n  uid=1_20 button \"Sign In\"\n\nStep 3: Fill form\n────────────────────\nmcp__chrome-devtools__fill_form\n  elements: [\n    { uid: \"1_10\", value: \"test@example.com\" },\n    { uid: \"1_15\", value: \"password123\" }\n  ]\n\nStep 4: Click login\n────────────────────\nmcp__chrome-devtools__click\n  uid: \"1_20\"\n\nStep 5: Wait for result\n────────────────────\nmcp__chrome-devtools__wait_for\n  text: \"Welcome\"\n  timeout: 5000\n\nStep 6: Verify\n────────────────────\nmcp__chrome-devtools__take_screenshot  → Verify UI is correct\nmcp__chrome-devtools__list_console_messages → Check for errors\n  types: [\"error\", \"warn\"]\n\nStep 7: Check API requests (optional)\n────────────────────\nmcp__chrome-devtools__list_network_requests\n  resourceTypes: [\"fetch\", \"xhr\"]\n```\n\n## Responsive Testing Example\n\nTest responsive design across breakpoints:\n\n```\n# Mobile (iPhone SE)\nmcp__chrome-devtools__resize_page → width: 375, height: 667\nmcp__chrome-devtools__take_screenshot\n\n# Tablet (iPad)\nmcp__chrome-devtools__resize_page → width: 768, height: 1024\nmcp__chrome-devtools__take_screenshot\n\n# Desktop\nmcp__chrome-devtools__resize_page → width: 1920, height: 1080\nmcp__chrome-devtools__take_screenshot\n```\n",
        "plugins/continuous-learning/.claude-plugin/plugin.json": "{\n  \"name\": \"continuous-learning\",\n  \"description\": \"Extract and save reusable patterns from Claude Code sessions\",\n  \"version\": \"0.1.0\",\n  \"author\": {\n    \"name\": \"Michael0520\"\n  }\n}\n",
        "plugins/continuous-learning/commands/learn.md": "---\ndescription: Manually extract and save learnable patterns from current session\n---\n\n# /learn Command\n\nExtract learnable patterns from the current session and save them to `~/.claude/learned/`.\n\n## Usage\n\n```\n/learn\n```\n\n## What It Does\n\n1. Analyzes the current conversation for learnable patterns\n2. Identifies patterns in these categories:\n   - **error-resolution**: How errors were diagnosed and fixed\n   - **framework-workaround**: Workarounds for framework limitations\n   - **debugging**: Debugging approaches and techniques\n   - **convention**: Best practices and coding conventions\n3. Saves patterns as markdown files to the learned directory\n\n## Pattern Format\n\nEach saved pattern includes:\n- Category\n- Date extracted\n- Context (the problem)\n- Solution (how it was resolved)\n\n## Configuration\n\nIn `claudekit.json`:\n\n```json\n{\n  \"learning\": {\n    \"enabled\": true,\n    \"minSessionLength\": 10,\n    \"outputDir\": \"~/.claude/learned/\",\n    \"categories\": [\"error-resolution\", \"debugging\"]\n  }\n}\n```\n\n## Notes\n\n- Patterns are automatically extracted at session end if enabled\n- Use this command for mid-session extraction\n- Duplicate patterns are avoided by using timestamped filenames\n",
        "plugins/continuous-learning/hooks/hooks.json": "{\n  \"description\": \"Extract learnable patterns at session end\",\n  \"hooks\": {\n    \"Stop\": [\n      {\n        \"matcher\": \"\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/dist/learn.js\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/dependabot/.claude-plugin/plugin.json": "{\n  \"name\": \"dependabot\",\n  \"description\": \"Commands to interact with Dependabot on GitHub repositories.\",\n  \"version\": \"0.4.1\",\n  \"author\": {\n    \"name\": \"Aotokitsuruya\"\n  }\n}\n",
        "plugins/dependabot/README.md": "Dependabot Plugin\n===\n\n## Purpose\n\nManage Dependabot configuration and automate Dependabot pull request workflows in GitHub repositories.\n\n## Commands\n\n| Command              | Description                                                        |\n|----------------------|--------------------------------------------------------------------|\n| `/dependabot:setup`  | Create dependabot.yml configuration file for dependency updates    |\n| `/dependabot:merge`  | Automatically approve and merge Dependabot pull requests           |\n",
        "plugins/dependabot/commands/merge.md": "---\nallowed-tools: Bash(gh auth:*), Bash(gh pr view:*), Bash(gh pr list:*), Bash(gh pr checks:*), Bash(gh pr merge:*), Bash(gh pr review:*), Bash(gh repo view:*), Bash(sleep)\ndescription: Automatically approve and merge Dependabot pull requests in current repository\n---\n\n# Rule\n\nThe `<execute>ARGUMENTS</execute>` will execute the main procedure.\n\n# Role\n\nYou are a DevOps automation specialist with expertise in dependency management and GitHub workflow automation.\n\n# Context\n\n- Current user: !`gh auth status --active`\n- Viewer permission: !`gh repo view --json viewerPermission -q '.viewerPermission'`\n- Dependabot PRs: !`gh pr list --author 'dependabot[bot]' --state open --json number,title -q '.[] | {number: .number, title: .title}'`\n\n# Definition\n\n<function name=\"is_major_update\">\n    <parameters>pr_title</parameters>\n    <description>Determine if PR is a major version update</description>\n    <step>1. Parse version numbers from PR title</step>\n    <step>2. Check if major version changed</step>\n    <return>Boolean indicating if major update</return>\n</function>\n\n<function name=\"is_mergeable\">\n    <parameters>pr_number</parameters>\n    <description>Check if PR is mergeable</description>\n    <step>1. Use `gh pr view {pr_number} --json mergeable` to get mergeable status</step>\n    <step>2. Use `gh pr checks {pr_number}` to check status of required checks</step>\n    <return>Mergeable status (MERGEABLE/CONFLICTING/UNKNOWN)</return>\n</function>\n\n<function name=\"check_pr_status\">\n    <parameters>pr_number</parameters>\n    <description>Get PR status and determine next action</description>\n    <step>1. Use `gh pr checks {pr_number} --watch` to wait for checks to complete</step>\n    <step>2. Use `gh pr view {pr_number} --json body,state,mergeable,commits,reviewDecision,labels` to get PR details</step>\n    <return>PR state and metadata</return>\n</function>\n\n<function name=\"enable_auto_merge\">\n    <parameters>pr_number</parameters>\n    <description>Enable auto-merge on a PR</description>\n    <step>1. Use `gh pr merge {pr_number} --auto --squash` to enable auto-merge</step>\n    <condition if=\"Squash merge not supported\">\n        <step>2. Use `gh pr merge {pr_number} --auto --merge` as fallback</step>>\n    </condition>\n    <step>3. Use `gh pr view {pr_number} --json autoMergeRequest` to confirm auto-merge is enabled</step>\n    <return>Auto-merge enablement status</return>\n</function>\n\n<function name=\"approve_pr\">\n    <parameters>pr_number</parameters>\n    <description>Approve a single Dependabot PR</description>\n    <step>1. Use `gh pr review {pr_number} --approve` to approve the PR</step>\n    <step>2. Check approval status</step>\n    <return>Approval result</return>\n</function>\n\n<procedure name=\"merge\">\n    <parameters>pr_number</parameters>\n    <description>Merge a single Dependabot PR</description>\n    <condition if=\"is_major_update(pr_title)\">\n        <step>1. Skip major version updates for manual review</step>\n        <return>\"Skipped major update PR #{pr_number} for manual review\"</return>\n    </condition>\n    <condition if=\"is_mergeable(pr_number) != 'MERGEABLE'\">\n        <step>2. Log and skip non-mergeable PR</step>\n        <return>\"PR #{pr_number} is not mergeable\"</return>\n    </condition>\n    <step>3. Call <execute function=\"enable_auto_merge\">{pr_number}</execute> to enable auto-merge</step>\n    <step>4. Call <execute function=\"approve_pr\">{pr_number}</execute> to approve the PR</step>\n    <step>5. Monitor PR status using <execute function=\"check_pr_status\">{pr_number}</execute> until merged or closed</step>\n    <condition if=\"Dependabot is rebasing\">\n        <step>6. Wait until rebase completes</step>\n        <step>7. Re-enable auto-merge and re-approve if needed</step>\n        <step>8. Monitor until merged or closed</step>\n    </condition>\n    <condition if=\"PR closed without merging\">\n        <step>9. Log and skip to next PR</step>\n        <return>\"PR #{pr_number} was closed without merging\"</return>\n    </condition>\n    <condition if=\"PR has conflects\">\n        <step>10. Check if Dependabot is already rebasing and wait for it</step>\n        <step>11. If no rebasing in message body, use AskUserQuestion tool to confirm if user wants to comment with \"@dependabot rebase\" to rebase or skip</step>\n        <step>12. Monitor PR status again</step>\n        <step>13. Re-enable auto-merge and re-approve if needed</step>\n        <step>14. Monitor until merged or closed</step>\n    </condition>\n    <return>\"PR #{pr_number} merged successfully\"</return>\n</procedure>\n\n<procedure name=\"main\">\n    <description>Process multiple PRs in parallel with retry logic</description>\n    <condition if=\"No open Dependabot PRs\">\n        <return>\"No open Dependabot PRs found\"</return>\n    </condition>\n    <step>1. For each PR, spawn a separate process to call <execute procedure=\"merge\">{pr_number}</execute></step>\n    <step>2. Implement retry logic with exponential backoff for transient failures (max 5 attempts)</step>\n    <condition if=\"has skipped PRs due to major updates\">\n        <step>3. Use ask question tool to confirm if user wants to merge skipped major update PRs manually</step>\n    </condition>\n    <return>Summary of merge results for all PRs</return>\n</procedure>\n\n# Task\n\n<execute procedure=\"main\">$ARGUMENTS</execute>\n",
        "plugins/dependabot/commands/setup.md": "---\nallowed-tools: Read, Write, Edit, LS, Grep, Glob, TodoWrite, WebFetch(domain:docs.github.com)\ndescription: Create dependabot.yml configuration file to make repository use Dependabot for dependency updates\n---\n\n# Rule\n\nThe `<execute>ARGUMENTS</execute>` will execute the main procedure.\n\n# Role\n\nYou are a DevOps automation specialist with expertise in dependency management and GitHub workflow automation.\n\n# Preferences\n\nBy the default, use minimal and default configuration necessary to setup config. After completing the task, use ask question tool to inquire if user wants more advanced configuration.\n\n> The options should allow stop withount advanced configuration.\n\n# Definition\n\n<procedure name=\"main\">\n    <description>Set up Dependabot in the current repository</description>\n    <step>1. Review repository structure to identify package manager files (e.g., package.json, requirements.txt, etc.)</step>\n    <step>2. Read \"https://docs.github.com/en/code-security/dependabot/working-with-dependabot/dependabot-options-reference\" for Dependabot configuration options</step>\n    <condition if=\"dependabot.yml already exists\">\n        <step>3. Use ask question tool to provide customization options or overwrite existing configuration</step>\n        <return>Message indicating existing configuration was found and action taken</return>\n    </condition>\n    <step>3. Create a `.github/dependabot.yml` file with appropriate configuration for detected package managers</step>\n    <step>4. Write the configuration file to the repository</step>\n    <return>Confirmation message indicating Dependabot setup is complete</return>\n</procedure>\n\n# Task\n\n<execute procedure=\"main\">$ARGUMENTS</execute>\n",
        "plugins/git/.claude-plugin/plugin.json": "{\n  \"name\": \"git\",\n  \"description\": \"Common repository operations for git\",\n  \"version\": \"0.5.1\",\n  \"author\": {\n    \"name\": \"Aotokitsuruya\"\n  }\n}\n",
        "plugins/git/README.md": "Git Plugin\n===\n\n## Purpose\n\nCommon repository operations for git.\n\n## Commands\n\n| Command        | Description                                                       |\n|----------------|-------------------------------------------------------------------|\n| `/git:commit`  | Create a git commit message based on current context             |\n| `/git:ignore`  | Set up `.gitignore` file by detecting language and downloading templates |\n\n## Hooks\n\n| Hook Event | Matcher | Description                                                      |\n|------------|---------|------------------------------------------------------------------|\n| Stop       | *       | Prevents commits exceeding configured file/line change thresholds |\n\n## Configuration\n\n| Option                         | Type    | Default | Description                                              |\n|--------------------------------|---------|---------|----------------------------------------------------------|\n| `commit.threshold.enabled`     | boolean | -       | Enable or disable the commit hook                        |\n| `commit.threshold.maxFilesChanged` | number | 10 | Maximum number of files that can be changed              |\n| `commit.threshold.maxLinesChanged` | number | 500 | Maximum number of lines that can be changed              |\n| `commit.threshold.logic`       | string  | \"OR\"    | Threshold logic: \"OR\" (either) or \"AND\" (both)           |\n| `commit.threshold.blockReason` | string  | -       | Custom block message with placeholder support: `{changedFiles}`, `{maxChangedFiles}`, `{changedLines}`, `{untrackedLines}`, `{totalChangedLines}`, `{maxChangedLines}` |\n",
        "plugins/git/commands/commit.md": "---\nallowed-tools: Read, TodoWrite, Bash(git status:*), Bash(git log:*), Bash(git diff:*)\ndescription: Create a git commit message based on current context\n---\n\n# Rule\n\nThe `<execute>ARGUMENTS</execute>` will execute the main procedure.\n\n# Role\n\nYou are a assistant to write git commit messages.\n\n# Conventional Commits\n\nBy the default, follow Conventional Commits specification unless instructed otherwise.\n\n- According the context determine the appropriate type, scope, and description for the commit message.\n- Ensure the scope is relevant to the changes made. e.g. monorepo subdirectory, specific feature, bug fix area.\n\n# Commit Message\n\nThe commit message should explain why the changes were made, not just what changes were made.\n\nWhen not clearly the intent of the changes from the diff, use AskUserQuestion tool to clarify with the user before determining the commit message.\n\n# Co-Authored-By\n\nWhen this command is executed without any prior conversation history, it means the changes is made solely by the user. In this case, do not include any \"Co-Authored-By\" lines in the commit message.\n\n# Definition\n\n<procedure name=\"main\">\n    <description>Create a git commit message based on current context</description>\n    <condition if=\"has conversation history\">\n        <step>1. Analyze the recent conversation history to understand the changes made</step>\n    </condition>\n    <step>2. Use \"git\" command to get changed files and their statuses</step>\n    <step>3. Based on the changes and conversation context, generate a concise and descriptive git commit message</step>\n    <step>4. Use same style and tone as previous commit messages if available</step>\n    <condition if=\"no conversation history\">\n        <step>6. Remove \"Co-Authored-by\" lines from the commit message if present</step>\n    </condition>\n    <step>5. Use Bash tool to make commit for the changes with the generated message</step>\n    <return>Commit confirmation message</return>\n</procedure>\n\n# Task\n\n<execute name=\"main\">$ARGUMENTS</execute>\n",
        "plugins/git/commands/ignore.md": "---\ndescription: Set up a .gitignore file for this project\n---\n\n# Rule\n\nThe `<execute>ARGUMENTS</execute>` will execute the main procedure.\n\n# Role\n\nYou are a assistant to help setup repositories.\n\n\n# Definition\n\n<function name=\"detect\">\n    <description>Detect primary language of current directory</description>\n    <step>1. Check for presence of specific files to identify language (e.g., package.json for Node, Gemfile for Ruby)</step>\n    <return>Detected language or empty if none found</return>\n</function>\n\n<function name=\"download\">\n  <description>Download .gitignore file from GitHub</description>\n  <parameters name=\"language\">Programming language to download .gitignore for</parameters>\n  <step>1. Construct URL for .gitignore file based on language</step>\n  <step>2. Use curl to download the .gitignore file from \"https://raw.githubusercontent.com/github/gitignore/main/{language}.gitignore\"</step>\n  <step>3. Save the file as .gitignore in the current directory</step>\n  <return>Download status</return>\n</function>\n\n<procedure name=\"main\">\n    <description>Main procedure to set up .gitignore</description>\n    <parameters name=\"language\">Optional programming language</parameters>\n    <step>1. Use {language} if provided, otherwise <execute name=\"detect\" /></step>\n    <step>2. If no language detected, confirm with user to proceed without specific .gitignore</step>\n    <step>3. Call <execute name=\"download\">$language</execute> to download the .gitignore file</step>\n    <return>Result message</return>\n</procedure>\n\n# Task\n\n<execute name=\"main\">$ARGUMENTS</execute>\n",
        "plugins/git/hooks/hooks.json": "{\n  \"description\": \"Automatic make git operation if condition met\",\n  \"hooks\": {\n    \"Stop\": [\n      {\n        \"matcher\": \"\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/dist/commit.js\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/guard/.claude-plugin/plugin.json": "{\n  \"name\": \"guard\",\n  \"description\": \"PreToolUse guards for safer Claude Code operations\",\n  \"version\": \"0.1.0\",\n  \"author\": {\n    \"name\": \"Michael0520\"\n  }\n}\n",
        "plugins/guard/hooks/hooks.json": "{\n  \"description\": \"PreToolUse guards for safer operations\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Bash\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/dist/guard.js\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/legacy-analyzer/.claude-plugin/plugin.json": "{\n  \"name\": \"legacy-analyzer\",\n  \"description\": \"Analyze legacy codebase and generate migration plan\",\n  \"version\": \"1.0.0\",\n  \"author\": {\n    \"name\": \"Michael0520\"\n  }\n}\n",
        "plugins/legacy-analyzer/README.md": "# Legacy Analyzer\n\nAnalyze legacy codebase and generate migration plan.\n\n## Purpose\n\nAnalyzes Angular legacy codebases and produces migration-ready specification with implementation plan, ensuring 100% behavior parity.\n\n## Agents\n\n| Agent | Description |\n|-------|-------------|\n| `legacy-scope-analyzer` | Analyze legacy scope and generate migration plan. Trigger: `migrate legacy scope for {path}` |\n",
        "plugins/legacy-analyzer/agents/legacy-scope-analyzer.md": "---\nname: legacy-scope-analyzer\ndescription: Analyze legacy scope and generate migration plan. Trigger: migrate legacy scope for {path}\nlicense: MIT\ncompatibility: Requires Angular legacy codebase with routing and i18n\ntools: Read, Grep, Glob, Bash\nmodel: sonnet\n---\n\n# Legacy Scope Analyzer Agent\n\nAnalyze Angular legacy codebase and produce a **migration-ready specification** with implementation plan.\n\n## Trigger\n\n`migrate legacy scope for {path}`\n\n## Output\n\nA single document with:\n1. **Spec** - What exists in legacy code\n2. **Plan** - How to implement in new architecture\n\n---\n\n## Phase 1: Analyze Legacy Code\n\n### 1.1 Structure Analysis\n\n```bash\n# Routes\nrg -n 'path:|loadChildren|Routes' --type ts {path}\n\n# Components\nrg -l '@Component' --type ts {path}\n\n# Modules\nrg -l '@NgModule' --type ts {path}\n```\n\n### 1.2 API Calls\n\n```bash\nrg -n 'this\\.http\\.(get|post|put|delete|patch)' --type ts {path}\nrg -n 'ApiService|HttpClient' --type ts {path}\n```\n\n### 1.3 i18n Keys\n\n```bash\n# Templates\nrg -o \"'\\w+(\\.\\w+)+'\" --type html {path}\nrg -n '\\| *translate' --type html {path}\n\n# TypeScript\nrg -n 'translate|TranslocoService|instant' --type ts {path}\n```\n\n### 1.4 Forms\n\n```bash\nrg -n 'FormGroup|FormControl|FormBuilder|Validators' --type ts {path}\n```\n\n### 1.5 UI Components\n\n```bash\nrg -n 'MatDialog|DialogRef|openDialog' --type ts {path}\nrg -n 'selector:' --type ts {path}\n```\n\n### 1.6 State Management\n\n```bash\nrg -n 'Store|@ngrx|BehaviorSubject|ReplaySubject' --type ts {path}\n```\n\n---\n\n## Phase 2: Generate Output Document\n\n```markdown\n# Migration: {scope-name}\n\n## Spec Summary\n\n| Category | Count |\n|----------|-------|\n| Components | X |\n| API Endpoints | X |\n| i18n Keys | X |\n| Forms | X |\n\n---\n\n## 1. Feature Specs (BDD)\n\n### Feature: {Name}\n\n**Scenario: {description}**\n- Given {precondition}\n- When {action}\n- Then {result}\n\n---\n\n## 2. API Endpoints\n\n| Method | Endpoint | Used In |\n|--------|----------|---------|\n| GET | /api/xxx | Component |\n\n---\n\n## 3. i18n Keys\n\n| Key | Used In |\n|-----|---------|\n| SCOPE.KEY | component |\n\n---\n\n## 4. Forms\n\n### {FormName}\n\n| Field | Type | Validators |\n|-------|------|------------|\n| name | text | required |\n\n---\n\n## 5. Components\n\n| Legacy Component | Type |\n|------------------|------|\n| XxxComponent | Page |\n| YyyDialogComponent | Dialog |\n\n---\n\n## 6. Migration Plan\n\n### New File Structure\n\n```\nlibs/{scope}/\n├── domain/\n│   ├── models/{scope}.model.ts\n│   └── ports/{scope}.port.ts\n├── data/\n│   └── {scope}.repository.ts\n├── features/\n│   └── {feature}/\n│       ├── {feature}.store.ts\n│       └── {feature}.component.ts\n└── ui/\n    └── components/\n```\n\n### Implementation Order\n\n1. **Domain Layer**\n   - [ ] Create models from API response types\n   - [ ] Define port interface\n\n2. **Data Layer**\n   - [ ] Implement repository with endpoints:\n     - GET /api/xxx\n     - POST /api/xxx\n\n3. **Feature Layer**\n   - [ ] Create SignalStore with:\n     - State: {list state properties}\n     - Computed: {list computed}\n     - Methods: {list methods}\n   - [ ] Implement components:\n     - [ ] {Component1} - {purpose}\n     - [ ] {Component2} - {purpose}\n\n4. **UI Layer**\n   - [ ] Create presentational components\n\n5. **i18n**\n   - [ ] Map all keys to new translation files\n\n### Parity Checklist\n\n- [ ] All API endpoints implemented\n- [ ] All i18n keys mapped\n- [ ] All form validators match\n- [ ] All BDD scenarios pass\n```\n\n---\n\n## Guidelines\n\n1. **Be concise** - Focus on actionable items\n2. **Prioritize** - Order implementation by dependencies\n3. **Checklist format** - Easy to track progress\n4. **DDD structure** - Follow one-ui-migration patterns\n",
        "plugins/license/.claude-plugin/plugin.json": "{\n  \"name\": \"license\",\n  \"description\": \"Commands to configure open source licenses for projects.\",\n  \"version\": \"0.2.0\",\n  \"author\": {\n    \"name\": \"Aotokitsuruya\"\n  }\n}\n",
        "plugins/license/README.md": "License Plugin\n===\n\n## Purpose\n\nManage open source licenses in current repository.\n\n## Commands\n\n| Command           | Description                                              |\n|-------------------|----------------------------------------------------------|\n| `/license:setup`  | Setup LICENSE file for the project (defaults to MIT)     |\n",
        "plugins/license/commands/setup.md": "---\ndescription: Setup LICENSE file for the project\n---\n\n# Rule\n\nThe `<execute>ARGUMENTS</execute>` will execute the main procedure.\n\n# Role\n\nYou are a expert in open source licensing and repository management.\n\n# Definition\n\n<function name=\"download\">\n    <parameters name=\"license_type\">Type of license to download (e.g., MIT, Apache-2.0)</parameters>\n    <description>Download LICENSE file from GitHub</description>\n    <step>1. Use curl to download the license text from \"https://raw.githubusercontent.com/github/choosealicense.com/gh-pages/_licenses/{license_type}.txt\"</step>\n    <condition if=\"License type not found\">\n        <step>2. If the license type is not found, return an error message indicating invalid license type</step>\n        <return>\"Error: Invalid license type '{license_type}'. Please provide a valid license type.\"</return>\n    </condition>\n    <step>3. Save the file as LICENSE in the current directory</step>\n    <return>Download status</return>\n</function>\n\n<procedure name=\"main\">\n    <description>Main procedure to set up LICENSE file</description>\n    <parameters name=\"license_type\">Type of license (default: MIT)</parameters>\n    <step>1. Use {license_type} if provided, otherwise default to \"MIT\"</step>\n    <condition if=\"LICENSE file already exists\">\n        <step>2. If LICENSE file already exists, return a message indicating no action taken</step>\n        <return>\"LICENSE file already exists. No action taken.\"</return>\n    </condition>\n    <step>3. Call <execute name=\"download\">$license_type</execute> to download the LICENSE file</step>\n    <step>4. Remove front matter if present in the downloaded LICENSE file</step>\n    <step>5. Ask user to update the copyright year and holder in the LICENSE file</step>\n    <return>Result message</return>\n</procedure>\n\n# Task\n\n<execute name=\"main\">$ARGUMENTS</execute>\n",
        "plugins/milo-core/.claude-plugin/plugin.json": "{\n  \"name\": \"milo-core\",\n  \"description\": \"Personal Claude Code settings, rules, docs, and agents\",\n  \"version\": \"1.4.0\",\n  \"author\": {\n    \"name\": \"Michael0520\"\n  }\n}\n",
        "plugins/milo-core/README.md": "Milo Core\n===\n\n## Purpose\n\nPersonal Claude Code settings backup - rules, docs, agents, commands, and hooks.\n\n## Rules\n\n| Rule | Description |\n|------|-------------|\n| angular-code-quality.md | Angular best practices |\n| ddd.md | Domain-Driven Design layers |\n| prompt-quality.md | Effective prompt patterns |\n| security.md | Security practices |\n| typescript.md | TypeScript type safety |\n\n## Docs\n\n| Doc | Description |\n|-----|-------------|\n| ddd-architecture.md | DDD architecture reference |\n| prompt-templates.md | Reusable prompt patterns |\n| tdd-examples.md | TDD examples |\n| typescript-patterns.md | TypeScript patterns |\n\n## Agents\n\n| Agent | Description |\n|-------|-------------|\n| angular-code-review | Review Angular code quality |\n| one-ui-migration-checker | Check One-UI migration compliance |\n\n## Commands\n\n| Command | Description |\n|---------|-------------|\n| sync-notion | Sync markdown files to Notion |\n\n## Hooks\n\n| Hook | Description |\n|------|-------------|\n| pre-commit-check.sh | Commit confirmation hook |\n",
        "plugins/milo-core/agents/angular-code-review.md": "---\nname: angular-code-review\ndescription: Review Angular code quality. Trigger: review code for {path}\nlicense: MIT\ncompatibility: Requires Angular 14+ project with TypeScript\ntools: Read, Grep, Glob\nmodel: sonnet\n---\n\n# Angular Code Review Agent\n\nReview code for general Angular best practices. Suggestions only, not strict rules.\n\n## Trigger\n\n`review code for {path}`\n\n## When to Use This Agent\n\nUse this agent when:\n- Reviewing Angular code for best practices\n- Checking code quality before PR review\n- Finding common Angular anti-patterns\n\n---\n\n## Rules Reference\n\n**Full rules with examples**: `global/rules/angular-code-quality.md`\n\nRead that file for fix patterns when issues are found.\n\n## Quick Reference\n\n| # | Rule | Bad Pattern | Good Pattern |\n|---|------|-------------|--------------|\n| 1 | Type Organization | `interface X {}` in component | `export interface X {}` in model.ts |\n| 2 | No Getter | `get isX(): boolean` | `readonly isX = computed(...)` |\n| 3 | Dialog Cancel | `(click)=\"cancel()\"` | `mat-dialog-close` |\n| 4 | Dead Code | `next: () => {}` | Remove entirely |\n| 5 | Over-Engineering | toSignal → computed chain | Simple method |\n| 6 | Type Safety | `: any` | Proper type |\n| 7 | OnPush | Default CD | `OnPush` |\n| 8 | No NgModule | `@NgModule` | Standalone (default in Angular 20) |\n\n## Detection Commands\n\n```bash\n# 1. Types in components (should be in model.ts)\nrg -n '^interface |^type ' --type ts --glob '!**/model.ts' --glob '!*.spec.ts' {path}\n\n# 2. Getter usage\nrg -n '^\\s+get \\w+\\(\\)' --type ts --glob '!*.spec.ts' {path}\n\n# 3. Dialog cancel methods\nrg -n '\\(click\\)=\"cancel\\(\\)\"' --type html {path}\n\n# 4. Empty callbacks\nrg -n 'next:\\s*\\(\\)\\s*=>\\s*\\{\\}' --type ts --glob '!*.spec.ts' {path}\n\n# 5. Any type\nrg -n ': any\\b|as any\\b' --type ts --glob '!*.spec.ts' {path}\n\n# 6. Missing OnPush\nrg -l '@Component' --type ts {path} | xargs rg -L 'OnPush'\n\n# 7. NgModule (should not exist in Angular 20)\nrg -n '@NgModule' --type ts --glob '!*.spec.ts' {path}\n```\n\n## Report Format\n\n```\nANGULAR CODE REVIEW: {path}\n\nFINDINGS:\n1. Type Organization: X issues\n   • file.ts:15 - interface DialogData\n   → Move to model.ts (see rules #1)\n\n2. Getter Usage: X issues\n   • file.ts:42 - get isLoading()\n   → Use computed() (see rules #2)\n\nFIX GUIDE: global/rules/angular-code-quality.md\n```\n",
        "plugins/milo-core/agents/one-ui-migration-checker.md": "---\nname: one-ui-migration-checker\ndescription: Checking One-UI migration compliance against 29 rules. Trigger: check migration for {path}\nlicense: MIT\ncompatibility: Requires Angular 20+ project with @ngrx/signals and one-ui-migration skill rules\ntools: Read, Grep, Glob, Bash\nmodel: sonnet\n---\n\n# One-UI Migration Checker\n\nCheck code against one-ui migration rules. Violations = PR rejected.\n\n## Trigger\n\n`check migration for {path}`\n\n## When to Use This Agent\n\nUse this agent when:\n- Validating migration work before creating a PR\n- Checking if code follows all 29 One-UI migration rules\n- Auditing migrated components for compliance\n\n---\n\n## Rules Reference\n\n**Rules location**: `projects/one-ui/skills/one-ui-migration/rules/`\n\n```\nrules/\n├── index.md                    # Router entry\n├── tools/                      # Tool reference (9 files)\n│   ├── one-validators.md\n│   ├── form-builder.md\n│   ├── signal-store.md\n│   ├── common-table.md\n│   ├── dialog.md\n│   ├── mx-components.md\n│   ├── page-layout.md\n│   ├── transloco.md\n│   └── auth.md\n├── guides/                     # Integration guides (3 files)\n│   ├── create-page.md\n│   ├── create-dialog.md\n│   └── create-table.md\n└── reference/                  # Reference docs (3 files)\n    ├── ddd-architecture.md\n    ├── angular-20-syntax.md\n    └── checklist.md\n```\n\n---\n\n## Quick Check (29 Rules)\n\n### Category A: Angular 20 Syntax (Rules 1-5)\n\n| # | Symptom | Pattern | Fix | Reference |\n|---|---------|---------|-----|-----------|\n| 1 | Old control flow | `*ngIf`, `*ngFor` | `@if`, `@for (track)` | `reference/angular-20-syntax.md` |\n| 2 | Old DI | `constructor(private x)` | `inject()` | `reference/angular-20-syntax.md` |\n| 3 | Old decorators | `@Input()`, `@Output()` | `input()`, `output()` | `reference/angular-20-syntax.md` |\n| 4 | Old state | `BehaviorSubject` | `signal()` | `tools/signal-store.md` |\n| 5 | Async pipe | `\\| async` | Signal call `()` | `tools/signal-store.md` |\n\n### Category B: Forms (Rules 6-8)\n\n| # | Symptom | Pattern | Fix | Reference |\n|---|---------|---------|-----|-----------|\n| 6 | Wrong validators | `Validators.required` | `OneValidators.required` | `tools/one-validators.md` |\n| 7 | Nullable forms | `inject(FormBuilder)` | `NonNullableFormBuilder` | `tools/form-builder.md` |\n| 8 | No error directive | `<mat-error>` without directive | `oneUiFormError` | `tools/mx-components.md` |\n\n### Category C: Storage & Types (Rules 9-11)\n\n| # | Symptom | Pattern | Fix | Reference |\n|---|---------|---------|-----|-----------|\n| 9 | Wrong storage | `localStorage` | `sessionStorage` + `mx_token` | `tools/auth.md` |\n| 10 | Wrong button | `mat-raised-button` | `mat-flat-button` | `tools/mx-components.md` |\n| 11 | No type | `: any` | Proper type | `reference/checklist.md` |\n\n### Category D: DDD Layer (Rules 12-13)\n\n| # | Symptom | Pattern | Fix | Reference |\n|---|---------|---------|-----|-----------|\n| 12 | Store in UI layer | `inject(Store)` in ui/ | Move to features/ | `reference/ddd-architecture.md` |\n| 13 | HTTP in features | `HttpClient` in features/ | Move to domain/ | `reference/ddd-architecture.md` |\n\n### Category E: UI Patterns - Page Layout (Rules 14-15)\n\n| # | Symptom | Pattern | Fix | Reference |\n|---|---------|---------|-----|-----------|\n| 14 | Wrong page wrapper | `mat-card` | `gl-page-content` + `content-wrapper` | `tools/page-layout.md` |\n| 15 | Old translation pipe | `\\| translate` | `*transloco=\"let t\"` | `tools/transloco.md` |\n\n### Category F: UI Patterns - Dialog (Rules 16-19)\n\n| # | Symptom | Pattern | Fix | Reference |\n|---|---------|---------|-----|-----------|\n| 16 | Loading button clickable | `[disabled]=\"form.invalid\"` | Add `\\|\\| loading()` | `tools/dialog.md` |\n| 17 | Dialog closes on error | `close()` after submit | Close in `next:` callback only | `tools/dialog.md` |\n| 18 | Missing viewContainerRef | `dialog.open()` without vcr | Pass `viewContainerRef` | `tools/dialog.md` |\n| 19 | Manual cancel handler | `(click)=\"cancel()\"` | Use `mat-dialog-close` | `tools/dialog.md` |\n\n### Category G: UI Patterns - Table (Rules 20-23)\n\n| # | Symptom | Pattern | Fix | Reference |\n|---|---------|---------|-----|-----------|\n| 20 | Text overflow | Plain text in cell | `gl-ellipsis-text` + `mxAutoTooltip` | `tools/common-table.md` |\n| 21 | Custom column no filter | `noAutoGenerate: true` without `filter` | Add filter function | `tools/common-table.md` |\n| 22 | Missing MatSortModule | `mat-sort-header` without import | Import `MatSortModule` | `tools/common-table.md` |\n\n### Category H: UI Patterns - Tabs (Rules 23-24)\n\n| # | Symptom | Pattern | Fix | Reference |\n|---|---------|---------|-----|-----------|\n| 23 | Missing mxTabGroup | `mat-tab-group` without directive | Add `mxTabGroup` | `tools/mx-components.md` |\n| 24 | Tab animation | No `animationDuration=\"0ms\"` | Add attribute | `tools/mx-components.md` |\n\n### Category I: UI Patterns - Button (Rules 25-26)\n\n| # | Symptom | Pattern | Fix | Reference |\n|---|---------|---------|-----|-----------|\n| 25 | Loading but not disabled | `mxButtonIsLoading` without `loading()` in disabled | Add `\\|\\| loading()` | `tools/mx-components.md` |\n\n### Category J: State Management (Rules 26-27)\n\n| # | Symptom | Pattern | Fix | Reference |\n|---|---------|---------|-----|-----------|\n| 26 | Old rxMethod | `rxMethod` | `queryMethod`/`mutationMethod` | `tools/signal-store.md` |\n\n### Category K: Translation (Rules 27-29)\n\n| # | Symptom | Pattern | Fix | Reference |\n|---|---------|---------|-----|-----------|\n| 27 | Creating new keys | Key not in Legacy en.json | Use existing keys only | `tools/transloco.md` |\n\n---\n\n## Detection Commands\n\nRun these in order. Stop at first failure category.\n\n### Category A: Angular 20 Syntax (Rules 1-5)\n\n```bash\n# 1. Old control flow\nrg -n '\\*ngIf|\\*ngFor|\\[ngSwitch\\]' --type html {path}\n\n# 2. Constructor injection\nrg -n 'constructor\\(private|constructor\\(readonly' --type ts --glob '!*.spec.ts' {path}\n\n# 3. Old decorators\nrg -n '@Input\\(\\)|@Output\\(\\)' --type ts --glob '!*.spec.ts' {path}\n\n# 4. BehaviorSubject\nrg -n 'BehaviorSubject|Subject<' --type ts --glob '!*.spec.ts' {path}\n\n# 5. Async pipe\nrg -n '\\| async' --type html {path}\n```\n\n### Category B: Forms (Rules 6-8)\n\n```bash\n# 6. Angular Validators\nrg -n 'Validators\\.' --type ts --glob '!*.spec.ts' {path}\n\n# 7. FormBuilder (should be NonNullableFormBuilder)\nrg -n 'inject\\(FormBuilder\\)' --type ts --glob '!*.spec.ts' {path}\n\n# 8. mat-error without oneUiFormError\nrg -n '<mat-error>' --type html {path} | rg -v 'oneUiFormError'\n```\n\n### Category C: Storage & Types (Rules 9-11)\n\n```bash\n# 9. localStorage\nrg -n 'localStorage' --type ts --glob '!*.spec.ts' {path}\n\n# 10. mat-raised-button\nrg -n 'mat-raised-button' --type html {path}\n\n# 11. any type\nrg -n ': any\\b|as any\\b' --type ts --glob '!*.spec.ts' {path}\n```\n\n### Category D: DDD Layer (Rules 12-13)\n\n```bash\n# 12. Store in UI layer (WRONG)\nrg -n 'inject\\(.*Store\\)' --glob '**/ui/**/*.ts' --glob '!*.spec.ts' {path}\n\n# 13. HttpClient in features (WRONG)\nrg -n 'inject\\(HttpClient\\)' --glob '**/features/**/*.ts' --glob '!*.spec.ts' {path}\n```\n\n### Category E: UI Patterns - Page Layout (Rules 14-15)\n\n```bash\n# 14. mat-card (should be gl-page-content)\nrg -n 'mat-card' --type html {path}\n\n# 15. Old translation pipe\nrg -n '\\| translate' --type html {path}\n```\n\n### Category F: UI Patterns - Dialog (Rules 16-19)\n\n```bash\n# 16. Loading button - check if disabled includes loading()\nrg -n 'mxButtonIsLoading' --type html {path} -A2 -B2\n\n# 17. Dialog close - should be inside next: callback\nrg -n '\\.close\\(\\)' --type ts --glob '**/*dialog*.ts' --glob '!*.spec.ts' {path} -B5\n\n# 18. dialog.open without viewContainerRef\nrg -n '\\.open\\(' --type ts --glob '!*.spec.ts' {path} -A5 | rg -v 'viewContainerRef'\n\n# 19. Manual cancel handler\nrg -n '\\(click\\)=\"cancel\\(\\)\"|\\(click\\)=\"onCancel\\(\\)\"' --type html {path}\n```\n\n### Category G: UI Patterns - Table (Rules 20-22)\n\n```bash\n# 20. Table cells without ellipsis (manual review)\nrg -n 'matCellDef' --type html {path} | rg -v 'gl-ellipsis-text|mx-status|mat-icon|mat-checkbox'\n\n# 21. noAutoGenerate without filter function\nrg -n 'noAutoGenerate.*true' --type ts {path} -A10\n\n# 22. mat-sort-header usage (check imports separately)\nrg -n 'mat-sort-header' --type html {path}\n```\n\n### Category H: UI Patterns - Tabs (Rules 23-24)\n\n```bash\n# 23. mat-tab-group without mxTabGroup\nrg -n 'mat-tab-group' --type html {path} | rg -v 'mxTabGroup'\n\n# 24. mat-tab-group without animationDuration\nrg -n 'mat-tab-group' --type html {path} | rg -v 'animationDuration'\n```\n\n### Category I: UI Patterns - Button (Rule 25)\n\n```bash\n# 25. mxButtonIsLoading but disabled doesn't include loading()\nrg -n 'mxButtonIsLoading' --type html {path} -B2 -A2\n```\n\n### Category J: State Management (Rule 26)\n\n```bash\n# 26. rxMethod (should be queryMethod/mutationMethod)\nrg -n 'rxMethod' --type ts --glob '!*.spec.ts' {path}\n```\n\n---\n\n## Report Format\n\n```\n═══════════════════════════════════════════════════════════════\n  ONE-UI MIGRATION CHECK: {path}\n═══════════════════════════════════════════════════════════════\n\n❌ ERRORS (must fix before PR):\n\nCategory A: Angular 20 Syntax\n1. [Rule 1] Old control flow (3 files)\n   • page.component.html:15 - *ngIf=\"loading\"\n   • list.component.html:8 - *ngFor=\"let item of items\"\n   → Fix: @if (loading) { } / @for (item of items; track item.id) { }\n   → Ref: rules/reference/angular-20-syntax.md\n\nCategory D: DDD Layer\n2. [Rule 12] Store injected in UI layer (1 file)\n   • ui/form.component.ts:12 - inject(UserStore)\n   → Fix: Move component to features/ layer\n   → Ref: rules/reference/ddd-architecture.md\n\nCategory F: Dialog\n3. [Rule 16] Loading button still clickable (1 file)\n   • dialog.component.html:45 - [disabled]=\"form.invalid\"\n   → Fix: [disabled]=\"form.invalid || loading()\"\n   → Ref: rules/tools/dialog.md\n\n⚠️ WARNINGS (should fix):\n\n1. [Rule 11] any type usage (2 files)\n   • api.ts:45 - response: any\n   → Fix: Add proper TypeScript type\n\n📋 MANUAL REVIEW NEEDED:\n\n1. [Rule 17] Dialog close timing - verify close is in next: callback\n2. [Rule 20] Table cells - verify text columns use gl-ellipsis-text\n3. [Rule 21] Custom columns - verify filter functions exist\n\n───────────────────────────────────────────────────────────────\n  SUMMARY: 3 errors, 1 warning, 3 manual reviews\n  STATUS: ❌ NOT READY FOR PR\n═══════════════════════════════════════════════════════════════\n```\n\n---\n\n## Quick Scan Script\n\n```bash\necho \"=== One-UI Migration Quick Scan: {path} ===\"\n\necho -e \"\\n[A] Angular 20 Syntax (Rules 1-5):\"\necho -n \"  *ngIf/*ngFor: \"; rg -c '\\*ngIf|\\*ngFor' --type html {path} 2>/dev/null | wc -l\necho -n \"  constructor DI: \"; rg -c 'constructor\\(private' --type ts {path} 2>/dev/null | wc -l\necho -n \"  @Input/@Output: \"; rg -c '@Input\\(\\)|@Output\\(\\)' --type ts {path} 2>/dev/null | wc -l\necho -n \"  BehaviorSubject: \"; rg -c 'BehaviorSubject' --type ts {path} 2>/dev/null | wc -l\necho -n \"  | async: \"; rg -c '\\| async' --type html {path} 2>/dev/null | wc -l\n\necho -e \"\\n[B] Forms (Rules 6-8):\"\necho -n \"  Validators.: \"; rg -c 'Validators\\.' --type ts {path} 2>/dev/null | wc -l\necho -n \"  FormBuilder: \"; rg -c 'inject\\(FormBuilder\\)' --type ts {path} 2>/dev/null | wc -l\necho -n \"  mat-error no directive: \"; rg '<mat-error>' --type html {path} 2>/dev/null | rg -vc 'oneUiFormError' 2>/dev/null || echo \"0\"\n\necho -e \"\\n[C] Storage & Types (Rules 9-11):\"\necho -n \"  localStorage: \"; rg -c 'localStorage' --type ts {path} 2>/dev/null | wc -l\necho -n \"  mat-raised-button: \"; rg -c 'mat-raised-button' --type html {path} 2>/dev/null | wc -l\necho -n \"  any type: \"; rg -c ': any' --type ts {path} 2>/dev/null | wc -l\n\necho -e \"\\n[D] DDD Layer (Rules 12-13):\"\necho -n \"  Store in ui/: \"; rg -c 'inject\\(.*Store\\)' --glob '**/ui/**/*.ts' {path} 2>/dev/null | wc -l\necho -n \"  HttpClient in features/: \"; rg -c 'inject\\(HttpClient\\)' --glob '**/features/**/*.ts' {path} 2>/dev/null | wc -l\n\necho -e \"\\n[E] Page Layout (Rules 14-15):\"\necho -n \"  mat-card: \"; rg -c 'mat-card' --type html {path} 2>/dev/null | wc -l\necho -n \"  | translate: \"; rg -c '\\| translate' --type html {path} 2>/dev/null | wc -l\n\necho -e \"\\n[F] Dialog (Rules 16-19):\"\necho -n \"  mxButtonIsLoading: \"; rg -c 'mxButtonIsLoading' --type html {path} 2>/dev/null | wc -l\necho -n \"  .close() calls: \"; rg -c '\\.close\\(\\)' --glob '**/*dialog*.ts' {path} 2>/dev/null | wc -l\necho -n \"  cancel handlers: \"; rg -c '\\(click\\)=\"cancel' --type html {path} 2>/dev/null | wc -l\n\necho -e \"\\n[G] Table (Rules 20-22):\"\necho -n \"  matCellDef: \"; rg -c 'matCellDef' --type html {path} 2>/dev/null | wc -l\necho -n \"  noAutoGenerate: \"; rg -c 'noAutoGenerate' --type ts {path} 2>/dev/null | wc -l\necho -n \"  mat-sort-header: \"; rg -c 'mat-sort-header' --type html {path} 2>/dev/null | wc -l\n\necho -e \"\\n[H] Tabs (Rules 23-24):\"\necho -n \"  mat-tab-group: \"; rg -c 'mat-tab-group' --type html {path} 2>/dev/null | wc -l\n\necho -e \"\\n[J] State (Rule 26):\"\necho -n \"  rxMethod: \"; rg -c 'rxMethod' --type ts {path} 2>/dev/null | wc -l\n\necho -e \"\\n=== Scan Complete ===\"\n```\n\n---\n\n## Rule Severity\n\n| Severity | Rules | Description |\n|----------|-------|-------------|\n| **BLOCKER** | 1-5, 12-13 | PR will be rejected |\n| **ERROR** | 6-10, 14-19, 23-26 | Must fix |\n| **WARNING** | 11, 20-22 | Should fix |\n\n---\n\n## Notes\n\n1. **Zero tolerance**: Rules 1-5, 12-13 are PR blockers\n2. **Exclude tests**: Always use `--glob '!*.spec.ts'`\n3. **Manual review**: Rules 17, 20, 21 need context check\n4. **Reference files**: Always point to specific `rules/` file for fixes\n",
        "plugins/milo-core/agents/security-reviewer.md": "---\nname: security-reviewer\ndescription: Review code for security vulnerabilities. Trigger: security review for {path}\nlicense: MIT\ncompatibility: Works with any TypeScript/JavaScript project\ntools: Read, Grep, Glob, Bash\nmodel: opus\n---\n\n# Security Reviewer Agent\n\nIdentify and remediate security vulnerabilities focusing on OWASP Top 10 and common web security issues.\n\n## Trigger\n\n`security review for {path}`\n\n## When to Use This Agent\n\nUse this agent when:\n- Adding new API endpoints\n- Modifying authentication/authorization code\n- Handling user input or file uploads\n- Working with database queries\n- Integrating external APIs\n- Updating dependencies\n- Before security-sensitive PRs\n\n---\n\n## Severity Levels\n\n| Level | Description | Action |\n|-------|-------------|--------|\n| **CRITICAL** | Exploitable now, data breach risk | Block merge, fix immediately |\n| **HIGH** | Significant vulnerability | Block merge, fix before release |\n| **MEDIUM** | Potential risk, needs attention | Should fix, can merge with plan |\n| **LOW** | Minor issue, best practice | Recommended fix |\n\n## OWASP Top 10 Checks\n\n### 1. Injection (A03:2021)\n\n```bash\n# SQL injection - string concatenation in queries\nrg -n 'query\\s*\\(' --type ts {path} | rg -v 'parameterized|prepared|\\$\\d|\\?'\nrg -n '\\$\\{.*\\}.*(?:SELECT|INSERT|UPDATE|DELETE|WHERE)' --type ts {path}\n\n# Command injection\nrg -n 'exec\\(|execSync\\(|spawn\\(' --type ts {path}\nrg -n 'child_process' --type ts {path}\n\n# NoSQL injection\nrg -n '\\$where|\\$regex' --type ts {path}\n```\n\n**CRITICAL if found:** User input in SQL/command without sanitization\n\n### 2. Broken Authentication (A07:2021)\n\n```bash\n# Hardcoded credentials\nrg -n 'password\\s*=\\s*[\"\\x27]|api_key\\s*=\\s*[\"\\x27]|secret\\s*=\\s*[\"\\x27]' -i --type ts {path}\nrg -n 'Bearer [A-Za-z0-9\\-_]+\\.[A-Za-z0-9\\-_]+' --type ts {path}\n\n# Weak session handling\nrg -n 'session\\[|localStorage\\.setItem.*token|sessionStorage' --type ts {path}\n```\n\n**CRITICAL if found:** Hardcoded secrets, exposed tokens\n\n### 3. Sensitive Data Exposure (A02:2021)\n\n```bash\n# Logging sensitive data\nrg -n 'console\\.log.*password|console\\.log.*token|console\\.log.*secret' -i --type ts {path}\nrg -n 'Logger\\.(info|debug|log).*password' -i --type ts {path}\n\n# Unencrypted sensitive data\nrg -n 'creditCard|ssn|socialSecurity' -i --type ts {path}\n```\n\n**HIGH if found:** Sensitive data in logs or unencrypted\n\n### 4. XSS - Cross-Site Scripting (A03:2021)\n\n```bash\n# Dangerous DOM manipulation\nrg -n 'innerHTML\\s*=|outerHTML\\s*=|document\\.write' --type ts {path}\nrg -n '\\[innerHTML\\]=' --type html {path}\n\n# React dangerouslySetInnerHTML\nrg -n 'dangerouslySetInnerHTML' --type tsx {path}\n\n# Angular bypassSecurityTrust\nrg -n 'bypassSecurityTrust' --type ts {path}\n```\n\n**HIGH if found:** User input rendered without sanitization\n\n### 5. Broken Access Control (A01:2021)\n\n```bash\n# Missing authorization checks\nrg -n '@(Get|Post|Put|Delete|Patch)\\(' --type ts {path} | rg -v '@(UseGuards|Roles|Auth)'\n\n# Direct object references\nrg -n 'params\\.(id|userId)|req\\.params\\.' --type ts {path}\n```\n\n**HIGH if found:** Endpoints without authorization\n\n### 6. Security Misconfiguration (A05:2021)\n\n```bash\n# Debug mode in production\nrg -n 'debug:\\s*true|DEBUG\\s*=\\s*true' --type ts {path}\nrg -n 'enableProdMode' --type ts {path}\n\n# CORS misconfiguration\nrg -n \"origin:\\s*['\\\"]\\\\*['\\\"]|credentials:\\s*true\" --type ts {path}\n\n# Missing security headers\nrg -n 'helmet|Content-Security-Policy|X-Frame-Options' --type ts {path}\n```\n\n**MEDIUM if found:** Permissive CORS, missing security headers\n\n### 7. Vulnerable Dependencies (A06:2021)\n\n```bash\n# Check for known vulnerable packages\nnpm audit --json 2>/dev/null | head -50\n# or\nbun audit 2>/dev/null | head -50\n```\n\n**Severity varies:** Based on vulnerability severity\n\n## Additional Security Checks\n\n### Debug Statements\n\n```bash\n# Console statements (should not be in production)\nrg -n 'console\\.(log|debug|info|warn|trace)\\(' --type ts --glob '!*.spec.ts' {path}\n\n# Debugger statements\nrg -n '\\bdebugger\\b' --type ts {path}\n```\n\n**LOW:** Debug statements in production code\n\n### Error Handling\n\n```bash\n# Exposing stack traces\nrg -n 'stack|stackTrace|\\.stack' --type ts {path}\nrg -n 'catch.*console\\.(log|error)' --type ts {path}\n```\n\n**MEDIUM if found:** Stack traces exposed to users\n\n### Cryptography\n\n```bash\n# Weak crypto algorithms\nrg -n 'md5|sha1|DES|RC4' -i --type ts {path}\nrg -n \"createHash\\(['\\\"]md5|createHash\\(['\\\"]sha1\" --type ts {path}\n\n# Hardcoded encryption keys\nrg -n 'encryptionKey\\s*=\\s*[\"\\x27]|iv\\s*=\\s*[\"\\x27]' --type ts {path}\n```\n\n**HIGH if found:** Weak crypto or hardcoded keys\n\n### File Operations\n\n```bash\n# Path traversal\nrg -n 'readFile.*req\\.|writeFile.*req\\.' --type ts {path}\nrg -n '\\.\\./|\\.\\.\\\\' --type ts {path}\n\n# Unrestricted file uploads\nrg -n 'multer|upload|formidable' --type ts {path}\n```\n\n**HIGH if found:** Unsanitized file paths\n\n## Report Format\n\n```\nSECURITY REVIEW: {path}\nDate: {date}\n\nSUMMARY:\n- CRITICAL: X issues\n- HIGH: X issues\n- MEDIUM: X issues\n- LOW: X issues\n\nCRITICAL FINDINGS:\n1. [A03] SQL Injection\n   Location: src/api/users.ts:45\n   Code: `db.query(\"SELECT * FROM users WHERE id = \" + userId)`\n   Impact: Database compromise, data breach\n   Fix: Use parameterized queries\n   ```typescript\n   db.query(\"SELECT * FROM users WHERE id = $1\", [userId])\n   ```\n\nHIGH FINDINGS:\n1. [A07] Hardcoded API Key\n   Location: src/services/api.ts:12\n   Code: `const API_KEY = \"sk-abc123...\"`\n   Impact: Credential exposure if code is leaked\n   Fix: Use environment variables\n   ```typescript\n   const API_KEY = process.env.API_KEY\n   if (!API_KEY) throw new Error('API_KEY not configured')\n   ```\n\nRECOMMENDATIONS:\n1. Run `npm audit fix` to address dependency vulnerabilities\n2. Add security headers middleware (helmet)\n3. Implement rate limiting on authentication endpoints\n\nMERGE DECISION:\n❌ BLOCKED - {X} CRITICAL and {Y} HIGH issues must be resolved\n```\n\n## Quick Commands\n\n```bash\n# Full security scan\nrg -n 'password|secret|api_key|token|credential' -i --type ts {path}\n\n# Find all user input handling\nrg -n 'req\\.(body|query|params)|request\\.' --type ts {path}\n\n# Find all database operations\nrg -n 'findOne|findMany|create|update|delete|query|execute' --type ts {path}\n```\n",
        "plugins/milo-core/commands/sync-notion.md": "---\ndescription: Sync repo markdown files to Notion pages using MCP\nargument-hint: [notion-page-url-or-id]\n---\n\n## Notion Sync Task\n\nSync all markdown files (*.md) from the current repo to their corresponding Notion pages.\n\n### Steps\n\n1. **Find markdown files**: Use Glob to find all `*.md` files in the repo root (exclude CLAUDE.md, README.md, and files in hidden directories)\n\n2. **Identify Notion target**:\n   - If `$ARGUMENTS` is provided, use it as the Notion page URL or ID\n   - Otherwise, search Notion for a page matching the repo directory name\n\n3. **Fetch page structure**: Use `notion-fetch` to get the main page and its sub-pages\n\n4. **Map files to pages**: Match markdown filenames to Notion page titles by:\n   - Stripping number prefixes (e.g., `01-`, `02-`)\n   - Removing the `.md` extension\n   - Matching against Notion sub-page titles\n\n5. **Sync each file**:\n   - Read the local markdown file content\n   - Use `notion-update-page` with `replace_content` command to fully overwrite\n   - Report success/failure for each file\n\n### Arguments\n\n- `$ARGUMENTS` (optional): Notion page URL or page ID\n  - Example URL: `https://notion.so/workspace/Page-Title-abc123`\n  - Example ID: `2bef08b5-ac20-80a8-ad04-d68b4b4812e1`\n\n### Example Usage\n\n```\n/sync-notion\n/sync-notion https://notion.so/your-page\n/sync-notion 2bef08b5-ac20-80a8-ad04-d68b4b4812e1\n```\n\n### Output Format\n\nReport a summary table after syncing:\n\n| File | Notion Page | Status |\n|------|-------------|--------|\n| 01-xxx.md | Page Title | ✅ Synced |\n| 02-yyy.md | Page Title | ✅ Synced |\n| 03-zzz.md | Page Title | ❌ Failed (reason) |\n\n### Prerequisites\n\n1. Notion MCP must be configured:\n   ```bash\n   # Add to ~/.zshrc\n   export NOTION_API_KEY=\"your-api-key\"\n\n   # Add MCP server\n   claude mcp add notion --env NOTION_API_KEY=$NOTION_API_KEY -- npx @notionhq/notion-mcp-server\n   ```\n\n2. Notion integration must have access to target pages\n\n### Notes\n\n- This command requires Notion MCP to be configured\n- Files are fully replaced (not merged) on each sync\n- The command works with any repo that has markdown files\n",
        "plugins/milo-core/hooks/pre-commit-check.sh": "#!/bin/bash\n# Pre-commit check hook for Claude Code\n# Intercepts git commit and forces user confirmation\n# Ensures: 1) diff reviewed 2) related docs updated 3) no missing changes\n\nread -r input\ntool_name=$(echo \"$input\" | jq -r '.tool_name // empty')\ncommand=$(echo \"$input\" | jq -r '.tool_input.command // empty')\n\n# Only intercept git commit commands\nif [[ \"$tool_name\" == \"Bash\" && \"$command\" == *\"git commit\"* ]]; then\n  cat << 'EOF'\n{\n  \"hookSpecificOutput\": {\n    \"hookEventName\": \"PreToolUse\",\n    \"permissionDecision\": \"ask\",\n    \"permissionDecisionReason\": \"Commit 前請確認:\\n1. git diff --staged 已檢視\\n2. 相關文件已更新 (README, CLAUDE.md 等)\\n3. 無遺漏的變更\"\n  }\n}\nEOF\n  exit 0\nfi\n\nexit 0\n",
        "plugins/one-ui-migration/.claude-plugin/plugin.json": "{\n  \"name\": \"one-ui-migration\",\n  \"description\": \"Angular 16 to 20 migration with DDD architecture and SignalStore patterns\",\n  \"version\": \"1.6.0\",\n  \"author\": {\n    \"name\": \"Michael0520\"\n  }\n}\n",
        "plugins/one-ui-migration/README.md": "One-UI Migration\n===\n\n## Purpose\n\nAngular 16 to 20 migration with DDD architecture and SignalStore patterns. Follow One-UI migration standards for MXSecurity project.\n\n## Agents\n\n| Agent | Description |\n|-------|-------------|\n| migration-executor | Execute migrations: analysis, DDD structure, syntax transforms, build verification |\n| migration-reviewer | Review migrations: compliance check, completeness review, QA verification |\n\n## Skills\n\n| Skill | Description |\n|-------|-------------|\n| one-ui-migration | Core migration rules, DDD architecture, Angular 20 patterns |\n| migrate-page | Migrate page from local source with DDD architecture |\n| migrate-page-gitlab | Migrate page from GitLab source with DDD architecture |\n| full-migration-pipeline | Complete end-to-end migration workflow |\n| migration-planning | Plan migrations with superpowers integration |\n| migration-lint | Compliance checker with auto-fix capabilities |\n| migration-review | Compare source vs target completeness |\n| form-extraction | Extract and analyze Angular Reactive Forms |\n| compare-i18n-keys | Compare translation keys between codebases |\n| check-barrel-files | Check for redundant barrel files |\n| generate-qa-test-cases | Generate QA test cases from code |\n| verify-legacy-with-qa-testcases | Verify legacy against test cases |\n| migration-patterns | Query migration patterns and examples |\n| icon-replacement | Find replacement icons for migration |\n| ui-layout-guide | UI layout optimization guide |\n",
        "plugins/one-ui-migration/agents/migration-executor.md": "# Migration Executor Agent\n\nSpecialized agent for executing Angular 16 → 20 migrations with DDD architecture.\n\n## Trigger\n\n- \"migrate page {path}\"\n- \"execute migration for {feature}\"\n- \"run full migration pipeline\"\n\n## Tools\n\n- Read, Grep, Glob, Bash, Edit, Write, WebFetch\n\n## Core Skill\n\n**Main:** `one-ui-migration` skill - Contains all rules and patterns\n\n## Integrated Skills\n\n| Phase | Skill | Purpose |\n|-------|-------|---------|\n| Analysis | `migrate-page` | Local source analysis |\n| Analysis | `migrate-page-gitlab` | GitLab source fetch |\n| Analysis | `form-extraction` | Extract form structure |\n| Helper | `migration-patterns` | Query patterns |\n| Helper | `icon-replacement` | Find icon replacements |\n| Helper | `ui-layout-guide` | UI layout guidance |\n| Planning | `migration-planning` | Integrate with superpowers workflow |\n\n## Required Rules\n\nBefore migration, read these rules from `one-ui-migration` skill:\n\n### Reference (Architecture)\n\n| File | Purpose |\n|------|---------|\n| `rules/reference/ddd-architecture.md` | DDD 4-layer structure |\n| `rules/reference/angular-20-syntax.md` | Syntax transforms |\n| `rules/reference/api-types.md` | API type definitions |\n| `rules/reference/pitfalls.md` | Common mistakes |\n\n### Tools (Implementation)\n\n| File | Purpose |\n|------|---------|\n| `rules/tools/signal-store.md` | SignalStore patterns |\n| `rules/tools/form-builder.md` | Form creation |\n| `rules/tools/one-validators.md` | OneValidators usage |\n| `rules/tools/common-table.md` | Table component |\n| `rules/tools/loading-states.md` | Loading state management |\n| `rules/tools/routing.md` | Route configuration |\n| `rules/tools/transloco.md` | Translation |\n| `rules/tools/ui/dialogs.md` | Dialog patterns |\n| `rules/tools/ui/page-layout.md` | Page structure |\n| `rules/tools/ui/buttons.md` | Button patterns |\n\n### Guides (Step-by-step)\n\n| File | Purpose |\n|------|---------|\n| `rules/guides/create-page.md` | Complete page creation |\n| `rules/guides/create-dialog.md` | Dialog creation |\n| `rules/guides/create-table.md` | Table creation |\n\n## Workflow\n\n### Phase 1: Source Analysis\n\n```\n1. Determine source type (local or GitLab)\n2. Execute migrate-page or migrate-page-gitlab\n3. Execute form-extraction for form analysis\n4. Output: MIGRATION-ANALYSIS.md\n```\n\n### Phase 2: DDD Structure Generation\n\n```bash\n# Generate all library types\nnx g @one-ui/one-plugin:library mxsecurity {page-name} all\n```\n\n**Layer Implementation Order:**\n\n1. **Domain Layer** (`domain/`)\n   - `*.model.ts` - Types and interfaces\n   - `*.api.ts` - API service (inline URLs)\n   - `*.store.ts` - SignalStore\n   - `*.helper.ts` - Pure functions\n   - `*.def.ts` - Constants\n\n2. **UI Layer** (`ui/`)\n   - Tables using `CommonTableComponent`\n   - Forms with `input()`/`output()`\n   - NO store injection\n\n3. **Features Layer** (`features/`)\n   - Page components (inject store)\n   - Dialog components\n   - Orchestration logic\n\n4. **Shell Layer** (`shell/`)\n   - Route definitions\n   - Provider configuration\n\n### Phase 3: Syntax Modernization\n\nApply transforms automatically:\n\n| From | To |\n|------|-----|\n| `*ngIf=\"x\"` | `@if (x) { }` |\n| `*ngFor=\"let i of items\"` | `@for (i of items; track i.id) { }` |\n| `constructor(private x)` | `inject()` |\n| `@Input()` | `input()` |\n| `@Output()` | `output()` |\n| `Validators.*` | `OneValidators.*` |\n| `BehaviorSubject` | `signal()` |\n| `mat-raised-button` | `mat-flat-button` |\n\n### Phase 4: Build Verification\n\n```bash\n# Type check\nnpx tsc --noEmit --project libs/mxsecurity/{page-name}/domain/tsconfig.lib.json\n\n# Lint all layers\nnx lint mxsecurity-{page-name}-domain\nnx lint mxsecurity-{page-name}-features\nnx lint mxsecurity-{page-name}-ui\nnx lint mxsecurity-{page-name}-shell\n\n# Build\nnx build mxsecurity-web\n```\n\n## Chunked Migration Strategy\n\n**Principle: Process from large sections to small units**\n\n1. **Segment by `mat-tab`** - Process each tab independently\n2. **Segment by `mat-card`** - Within each tab, process each card\n3. **Verify incrementally** - Run lint after each segment\n\n```markdown\n### Tab 1: General Settings\n- [x] Card 1.1: Basic Info\n- [ ] Card 1.2: Network Config\n\n### Tab 2: Security\n- [ ] Card 2.1: Authentication\n```\n\n## Critical Rules\n\n### MUST DO\n\n- Use exact same translation keys as source\n- Preserve form field row groupings\n- Use `OneValidators` (not `Validators`)\n- Use `inject()` (not constructor injection)\n- Use standalone components with `OnPush`\n\n### MUST NOT DO\n\n- Add features not in Legacy\n- Create new API endpoints\n- Use `any` type\n- Use `BehaviorSubject`\n- Add padding to page components\n- Create new translation keys\n\n## Output\n\n- `{target}/domain/src/lib/docs/MIGRATION-ANALYSIS.md`\n- Generated DDD library structure\n- Migrated components with Angular 20 syntax\n\n## Handoff to Reviewer\n\nAfter migration complete, invoke `migration-reviewer` agent:\n\n```\n\"review migration for libs/mxsecurity/{feature}\"\n```\n",
        "plugins/one-ui-migration/agents/migration-reviewer.md": "# Migration Reviewer Agent\n\nSpecialized agent for reviewing and validating Angular migrations against DDD architecture and migration standards.\n\n## Trigger\n\n- \"review migration for {path}\"\n- \"check migration compliance\"\n- \"validate migrated code\"\n- \"run migration QA\"\n\n## Tools\n\n- Read, Grep, Glob, Bash\n\n## Core Skill\n\n**Main:** `one-ui-migration` skill - Contains all rules and validation criteria\n\n## Integrated Skills\n\n| Phase | Skill | Purpose |\n|-------|-------|---------|\n| Compliance | `migration-lint` | 18-rule compliance check with auto-fix |\n| Completeness | `migration-review` | Compare source vs target |\n| Translation | `compare-i18n-keys` | Verify translation keys |\n| Structure | `check-barrel-files` | Check redundant exports |\n| QA | `generate-qa-test-cases` | Generate test cases |\n| QA | `verify-legacy-with-qa-testcases` | Verify against legacy |\n\n## Required Rules\n\nBefore review, read these rules from `one-ui-migration` skill:\n\n### Compliance Rules\n\n| File | Purpose |\n|------|---------|\n| `rules/reference/checklist.md` | Full compliance checklist |\n| `rules/reference/ddd-architecture.md` | Layer responsibilities |\n| `rules/reference/angular-20-syntax.md` | Syntax requirements |\n| `rules/reference/pitfalls.md` | Common violations |\n| `rules/reference/pitfalls/index.md` | Pitfall categories |\n\n### Validation Patterns\n\n| File | Purpose |\n|------|---------|\n| `rules/tools/forms/validators.md` | OneValidators patterns |\n| `rules/tools/forms/error-handling.md` | Error display patterns |\n| `rules/tools/ui/page-layout.md` | Page structure rules |\n| `rules/tools/ui/dialogs.md` | Dialog patterns |\n| `rules/tools/ui/buttons.md` | Button patterns |\n| `rules/tools/tables/basics.md` | Table patterns |\n\n## Workflow\n\n### Phase 1: Identify Scope\n\n```bash\n# Get changed files\ngit diff --name-only HEAD~1\ngit diff --cached --name-only\n\n# Or review specific path\nls -la libs/mxsecurity/{feature}/\n```\n\nFocus on files in `libs/mxsecurity/`.\n\n### Phase 2: Build & Lint Verification\n\n```bash\n# Build check\nnx build mxsecurity-web --skip-nx-cache\n\n# Lint check\nnx lint mxsecurity-{feature}-domain\nnx lint mxsecurity-{feature}-features\nnx lint mxsecurity-{feature}-ui\nnx lint mxsecurity-{feature}-shell\n\n# Type check\nnpx tsc --noEmit -p apps/mxsecurity/mxsecurity/tsconfig.app.json\n```\n\n### Phase 3: DDD Architecture Check\n\n| Layer | Rule |\n|-------|------|\n| `ui/` | `input()` + `output()` only, NO store injection |\n| `features/` | Can inject store, contains dialogs |\n| `domain/` | Models, API, Store, Helpers |\n| `shell/` | Routes only |\n\n**Common Violations:**\n\n```\n❌ UI component injecting Store\n❌ Dialog in ui/ layer (should be features/)\n❌ Business logic in features/ (should be domain/)\n❌ HTTP calls in ui/ (should be domain/)\n```\n\n### Phase 4: Angular 20 Syntax Check\n\n| Pattern | Required |\n|---------|----------|\n| Control flow | `@if`, `@for`, `@switch` |\n| Signals | `signal()`, `computed()`, `input()`, `output()` |\n| DI | `inject()` function |\n| Components | Standalone with `OnPush` |\n\n**Forbidden Patterns:**\n\n```\n❌ *ngIf, *ngFor, ngSwitch\n❌ @Input(), @Output() decorators\n❌ constructor injection\n❌ BehaviorSubject, Subject\n❌ non-standalone components\n```\n\n### Phase 5: Form Validation Check\n\n| Check | Rule |\n|-------|------|\n| Validators | `OneValidators.*` (NOT `Validators.*`) |\n| Error display | `oneUiFormError` directive |\n| Form access | `controls.xxx` (NOT `.get('xxx')`) |\n| Number input | `oneUiNumberOnly` directive |\n\n### Phase 6: UI Patterns Check\n\n| Component | Rule |\n|-----------|------|\n| Buttons | `mat-flat-button` (NOT `mat-raised-button`) |\n| Loading | `[mxButtonIsLoading]` directive |\n| Page layout | `content-wrapper` (NOT `mat-card`) |\n| Password | `mx-password-input` component |\n| Tooltips | `mxLabelTooltip` (NOT `matTooltip` on icons) |\n\n### Phase 7: Translation & Layout Check\n\n```bash\n# Compare translation keys\n/compare-i18n-keys --from={source} --to={target}\n```\n\n| Check | Rule |\n|-------|------|\n| Translation keys | Must match source exactly |\n| Form layout | Must match source field groupings |\n| Row structure | Preserve `.form-row` patterns |\n\n### Phase 8: Generate Report\n\n```markdown\n## Migration Review Report\n\n**Target:** {path}\n**Date:** {date}\n\n### Build Status\n\n| Check | Status |\n|-------|--------|\n| Build | ✅/❌ |\n| Lint | ✅/❌ |\n| TypeCheck | ✅/❌ |\n\n### Compliance Summary\n\n| Category | Status | Issues |\n|----------|--------|--------|\n| DDD Architecture | ✅/❌ | {count} |\n| Angular 20 Syntax | ✅/❌ | {count} |\n| Form Validation | ✅/❌ | {count} |\n| UI Patterns | ✅/❌ | {count} |\n| Translation Keys | ✅/❌ | {count} |\n\n### Issues Found\n\n#### CRITICAL (Must Fix)\n\n| File | Line | Issue | Fix |\n|------|------|-------|-----|\n\n#### HIGH (Should Fix)\n\n| File | Line | Issue | Fix |\n|------|------|-------|-----|\n\n#### MEDIUM (Consider)\n\n| File | Line | Issue | Suggestion |\n|------|------|-------|------------|\n\n### Auto-Fixed Issues\n\n| File | Issue | Applied Fix |\n|------|-------|-------------|\n\n### Summary\n\n- **Critical:** {count} (must fix before PR)\n- **High:** {count} (should fix)\n- **Medium:** {count} (optional)\n- **Auto-fixed:** {count}\n```\n\n## Auto-Fix Rules\n\n| Pattern | Replacement |\n|---------|-------------|\n| `*ngIf=\"x\"` | `@if (x) { }` |\n| `*ngFor=\"let x of xs\"` | `@for (x of xs; track x.id) { }` |\n| `Validators.required` | `OneValidators.required` |\n| `Validators.email` | `OneValidators.email` |\n| `.get('field')` | `controls.field` |\n| `mat-raised-button` | `mat-flat-button` |\n| `appNumberOnly` | `oneUiNumberOnly` |\n| `class=\"section-title\"` | `class=\"gl-title-md\"` |\n\n## Exit Criteria\n\nReview passes when:\n\n- [ ] All CRITICAL issues resolved\n- [ ] Build passes\n- [ ] Lint passes\n- [ ] No DDD violations\n- [ ] Translation keys match source\n- [ ] Form layouts match source\n\n## Output\n\n- Review report (displayed in conversation)\n- `{target}/domain/src/lib/docs/QA-TEST-CASES.md` (if QA phase run)\n- `{target}/domain/src/lib/docs/LEGACY-VERIFICATION-REPORT.md` (if QA phase run)\n\n## Handoff\n\nAfter review passes, ready for:\n\n1. Code review by team\n2. PR creation\n3. Merge to main branch\n",
        "plugins/one-ui-migration/skills/check-barrel-files/SKILL.md": "---\nname: check-barrel-files\ndescription: Check for redundant barrel files (index.ts) that only re-export a single item.\n---\n\n# Check Barrel Files Command\n\nCheck for redundant barrel files (index.ts) that only re-export a single item.\n\n## Arguments\n\n- `$ARGUMENTS` - The library path to check (e.g., `libs/mxsecurity/account-page`)\n\n## Problem Description\n\nRedundant barrel files are `index.ts` files that:\n1. Only contain a single `export * from './xxx'` statement\n2. Are intermediate files that add no value\n\n### Bad Pattern\n\n```\nlibs/scope/domain/features/src/\n├── index.ts                    # exports from './lib/my-dialog'\n└── lib/\n    └── my-dialog/\n        ├── index.ts            # Redundant: only exports './my-dialog.component'\n        └── my-dialog.component.ts\n```\n\n### Good Pattern\n\n```\nlibs/scope/domain/features/src/\n├── index.ts                    # exports from './lib/my-dialog/my-dialog.component'\n└── lib/\n    └── my-dialog/\n        └── my-dialog.component.ts   # No intermediate barrel file\n```\n\n## Check Process\n\n### Step 1: Find All index.ts Files\n\nFind all `index.ts` files in the target path:\n\n```bash\nfind {$ARGUMENTS} -name \"index.ts\" -type f\n```\n\n### Step 2: Analyze Each Barrel File\n\nFor each `index.ts` file found:\n\n1. Read the file content\n2. Count the number of export statements\n3. If only ONE export exists, check if it exports from a folder (barrel) or a file\n\n### Step 3: Identify Redundant Barrels\n\nA barrel file is redundant if:\n- It contains only ONE export statement\n- The export is `export * from './folder-name'`\n- The target folder has its own `index.ts` that also only exports one item\n\n### Step 4: Generate Report\n\nOutput a markdown report:\n\n```markdown\n# Barrel File Check Report\n\n**Path:** {$ARGUMENTS}\n**Date:** {current_date}\n\n## Summary\n\n| Total index.ts | Redundant | OK |\n|----------------|-----------|-----|\n| X              | Y         | Z   |\n\n## Redundant Barrel Files\n\n| File | Exports | Recommendation |\n|------|---------|----------------|\n| `lib/my-dialog/index.ts` | `./my-dialog.component` | Delete, update parent to export directly |\n\n## Recommended Fixes\n\n### 1. {path/to/redundant/index.ts}\n\n**Current:**\n```typescript\n// src/index.ts\nexport * from './lib/my-dialog';\n\n// lib/my-dialog/index.ts\nexport * from './my-dialog.component';\n```\n\n**Recommended:**\n```typescript\n// src/index.ts\nexport * from './lib/my-dialog/my-dialog.component';\n\n// Delete: lib/my-dialog/index.ts\n```\n\n## Valid Barrel Files (No Action Needed)\n\n| File | Export Count | Reason |\n|------|--------------|--------|\n| `domain/src/index.ts` | 5 | Multiple exports |\n```\n\n## Auto-Fix Option\n\nAfter showing the report, ask the user:\n\n> Found {N} redundant barrel files. Would you like me to fix them automatically?\n\nIf user confirms, for each redundant barrel:\n1. Update the parent `index.ts` to export directly from the component file\n2. Delete the redundant `index.ts` file\n\n## Examples\n\n### Example 1: Simple Redundant Barrel\n\n```\nBefore:\n  features/src/index.ts → export * from './lib/account-dialog'\n  features/src/lib/account-dialog/index.ts → export * from './account-dialog.component'\n\nAfter:\n  features/src/index.ts → export * from './lib/account-dialog/account-dialog.component'\n  (deleted: features/src/lib/account-dialog/index.ts)\n```\n\n### Example 2: Valid Multi-Export Barrel (Keep)\n\n```\ndomain/src/index.ts:\n  export * from './lib/account-page.api';\n  export * from './lib/account-page.model';\n  export * from './lib/account-page.store';\n\n→ This is valid, do not modify\n```\n",
        "plugins/one-ui-migration/skills/compare-i18n-keys/SKILL.md": "---\nname: compare-i18n-keys\ndescription: Compare translation keys between legacy Angular translate pipe and new Transloco t() function. Use when migrating i18n keys from old codebase to new codebase, or when the user asks to compare/fix translation keys.\n---\n\nCompare translation keys between legacy Angular `translate` pipe and new Transloco `t()` function, then fix the new project.\n\n## Arguments\n\n- `$ARGUMENTS` - Format: `--from <source_path> --to <target_path>`\n  - `--from`: Source HTML file in old project\n  - `--to`: Target HTML file in new project\n\n## Process\n\n### Step 1: Extract Keys from Source (Legacy Angular)\n\nRead the source file and extract translation keys using these patterns:\n\n**Pattern 1: Basic translate pipe**\n```\n{{ 'key' | translate }}\n```\n\n**Pattern 2: Translate pipe with parameters**\n```\n{{ 'key' | translate: { param: value } }}\n```\n\n**Pattern 3: Translate in attribute**\n```\nplaceholder=\"{{ 'key' | translate }}\"\nlabel=\"{{ 'key' | translate }}\"\nmatTooltip=\"{{ 'key' | translate }}\"\n```\n\n### Step 2: Extract Keys from Target (Transloco)\n\nRead the target file and extract translation keys using these patterns:\n\n**Pattern 1: Basic t() function**\n```\n{{ t('key') }}\nt('key')\n```\n\n**Pattern 2: t() in attribute binding**\n```\n[label]=\"t('key')\"\n[placeholder]=\"t('key')\"\n[matTooltip]=\"t('key')\"\n```\n\n### Step 3: Compare and Generate Report\n\nCreate a comparison report with:\n\n| Category | Description |\n|----------|-------------|\n| **OK** | Key matches exactly |\n| **DIFFERENT** | Key exists but different (may be intentional) |\n| **MISSING** | Source key not found in target |\n| **EXTRA** | Target key not in source (informational) |\n\n### Step 4: Output Report\n\n```markdown\n# i18n Key Comparison Report\n\n**Source:** {from_path}\n**Target:** {to_path}\n\n## Summary\n\n| Category | Count |\n|----------|-------|\n| Matching Keys | X |\n| Different Keys | Y |\n| Missing Keys | Z |\n\n**Match Rate: XX%**\n\n## Missing Keys (Need Fix)\n\n| Source Key | Context |\n|------------|---------|\n| `key.name` | Where it's used |\n\n## Different Keys (Review)\n\n| Source Key | Target Key |\n|------------|------------|\n| `old.key` | `new.key` |\n```\n\n### Step 5: Apply Fixes\n\nIf user confirms, fix the target file by replacing incorrect keys with correct ones from source.\n\n## Usage\n\n```bash\n/compare-i18n-keys --from=/path/to/legacy/component.html --to=/path/to/new/component.html\n```\n",
        "plugins/one-ui-migration/skills/form-extraction/SKILL.md": "---\nname: form-extraction\ndescription: Extract and analyze Angular Reactive Forms from source code for migration comparison and validation. Use when comparing forms between legacy and migrated code.\n---\n\n# Form Extraction Skill\n\nExtract and analyze Angular Reactive Forms from source code for migration comparison and validation.\n\n## Quick Commands\n\n### Extract Form Controls\n\n```bash\n# From HTML - formControlName\ngrep -oE 'formControlName=\"[^\"]+\"' {path}/**/*.html | sort -u\n\n# From HTML - formGroupName\ngrep -oE 'formGroupName=\"[^\"]+\"' {path}/**/*.html | sort -u\n\n# From TypeScript - form definitions\ngrep -E '(this\\.fb\\.group|this\\.#fb\\.group|this\\.fb\\.nonNullable\\.group|new FormGroup|new UntypedFormGroup)' {path}/**/*.ts\n```\n\n### Extract Validators\n\n```bash\n# Angular Validators (old)\ngrep -oE 'Validators\\.(required|email|minLength|maxLength|min|max|pattern|nullValidator)(\\([^)]*\\))?' {path}/**/*.ts | sort -u\n\n# OneValidators (new)\ngrep -oE 'OneValidators\\.[a-zA-Z]+(\\([^)]*\\))?' {path}/**/*.ts | sort -u\n\n# Custom validators\ngrep -oE '#?[a-zA-Z]+Validator\\b' {path}/**/*.ts | sort -u\n```\n\n## Form Definition Patterns\n\n| Pattern | Example |\n| ------- | ------- |\n| FormBuilder | `this.fb.group({ ... })` |\n| Private FB | `this.#fb.group({ ... })` |\n| NonNullable | `this.fb.nonNullable.group({ ... })` |\n| Direct | `new FormGroup({ ... })` |\n| Untyped | `new UntypedFormGroup({ ... })` |\n\n## Validator Patterns\n\n| Pattern | Example |\n| ------- | ------- |\n| Array syntax | `controlName: ['', [Validators.required]]` |\n| Object syntax | `controlName: this.fb.control('', { validators: [...] })` |\n| Group-level | `this.fb.group({...}, { validators: [...] })` |\n| Async | `controlName: ['', [], [asyncValidator]]` |\n\n## Validator Mapping (Old → New)\n\n| Old (Validators) | New (OneValidators) |\n| ---------------- | ------------------- |\n| `Validators.required` | `OneValidators.required` |\n| `Validators.email` | `OneValidators.email` |\n| `Validators.minLength(n)` | `OneValidators.minLength(n)` |\n| `Validators.maxLength(n)` | `OneValidators.maxLength(n)` |\n| `Validators.min(n)` | `OneValidators.range(min, max)` |\n| `Validators.max(n)` | `OneValidators.range(min, max)` |\n| `Validators.pattern(x)` | `OneValidators.pattern(x)` |\n\n## Error Display Patterns\n\n### Validators with Built-in Messages (use `oneUiFormError` directly)\n\nThese validators have i18n messages built-in, use simple pattern:\n\n```html\n<mat-error oneUiFormError=\"fieldName\"></mat-error>\n```\n\n| Validator | Built-in Message Key |\n| --------- | -------------------- |\n| `required` | `validators.required` |\n| `minLength` | `validators.require_min_length` |\n| `maxLength` | `validators.invalid_max_length` |\n| `range` | `validators.invalid_range` |\n| `rangeLength` | `validators.invalid_range` |\n| `email` | `validators.invalid_email` |\n\n### All Other Validators (MUST use `@if/@else`)\n\n**All validators NOT in the list above** need explicit error handling with custom messages:\n\n```html\n@if (ctrl.hasError('pattern')) {\n  <mat-error>{{ t('validators.your_custom_pattern_message') }}</mat-error>\n} @else if (ctrl.hasError('duplicate')) {\n  <mat-error>{{ t('validators.duplicate_xxx') }}</mat-error>\n} @else {\n  <mat-error oneUiFormError=\"fieldName\"></mat-error>\n}\n```\n\n| Validator | Reason |\n| --------- | ------ |\n| `pattern` | Generic message `validators.invalid`, need specific message |\n| `duplicate` | Default `validators.duplicate`, often need context-specific message |\n| Custom validators | No built-in message |\n| Any other validator | Not in the 6 basic validators list |\n\n## References\n\n- Detailed patterns: `rules/tools/forms/patterns.md`\n",
        "plugins/one-ui-migration/skills/form-extraction/references/patterns.md": "# Form Extraction Patterns - Detailed Reference\n\n## Form Group Definition Patterns\n\n### Pattern 1: FormBuilder (Injected)\n\n```typescript\n// Old style - constructor injection\nconstructor(private fb: FormBuilder) {}\n\nform = this.fb.group({\n  username: ['', [Validators.required, Validators.maxLength(32)]],\n  password: ['', [Validators.required]]\n});\n```\n\n### Pattern 2: FormBuilder (Private Field with inject)\n\n```typescript\n// New style - inject function\nreadonly #fb = inject(NonNullableFormBuilder);\n\nform = this.#fb.group({\n  username: ['', [OneValidators.required, OneValidators.maxLength(32)]],\n  password: ['', [OneValidators.required]]\n});\n```\n\n### Pattern 3: NonNullableFormBuilder\n\n```typescript\nreadonly #fb = inject(NonNullableFormBuilder);\n\n// Using nonNullable explicitly\nform = this.#fb.group({\n  name: [''],  // Type: FormControl<string>, not FormControl<string | null>\n});\n```\n\n### Pattern 4: Direct FormGroup Instantiation\n\n```typescript\n// Less common, but still used\nform = new FormGroup({\n  username: new FormControl('', [Validators.required]),\n  password: new FormControl('')\n});\n```\n\n### Pattern 5: UntypedFormGroup (Legacy)\n\n```typescript\n// Legacy untyped forms\nform = new UntypedFormGroup({\n  username: new UntypedFormControl('', [Validators.required])\n});\n```\n\n### Pattern 6: Nested Form Groups\n\n```typescript\nform = this.#fb.group({\n  basicInfo: this.#fb.group({\n    name: ['', [OneValidators.required]],\n    email: ['', [OneValidators.email]]\n  }),\n  address: this.#fb.group({\n    street: [''],\n    city: ['']\n  })\n});\n```\n\n### Pattern 7: FormArray\n\n```typescript\nform = this.#fb.group({\n  users: this.#fb.array([\n    this.#fb.group({\n      name: ['', [OneValidators.required]]\n    })\n  ])\n});\n```\n\n## Validator Definition Patterns\n\n### Pattern 1: Array Syntax (Most Common)\n\n```typescript\n// [defaultValue, [syncValidators], [asyncValidators]]\nusername: ['', [Validators.required, Validators.maxLength(32)]]\n\n// With async validator\nemail: ['', [Validators.required], [this.#emailExistsValidator()]]\n```\n\n### Pattern 2: Object Syntax\n\n```typescript\nusername: this.fb.control('', {\n  validators: [Validators.required],\n  asyncValidators: [this.#asyncValidator()],\n  updateOn: 'blur'\n})\n```\n\n### Pattern 3: Group-Level Validators (Cross-Field)\n\n```typescript\nform = this.#fb.group(\n  {\n    password: ['', [OneValidators.required]],\n    confirmPassword: ['', [OneValidators.required]]\n  },\n  {\n    validators: [this.#passwordMatchValidator()]\n  }\n);\n\n#passwordMatchValidator(): ValidatorFn {\n  return (group: AbstractControl): ValidationErrors | null => {\n    const controls = (group as typeof this.form).controls;\n    const password = controls.password.value;\n    const confirm = controls.confirmPassword.value;\n    return password === confirm ? null : { passwordMismatch: true };\n  };\n}\n```\n\n### Pattern 4: Conditional Validators\n\n```typescript\n// Adding validators dynamically\nthis.form.controls.field.addValidators([OneValidators.required]);\nthis.form.controls.field.removeValidators([OneValidators.required]);\nthis.form.controls.field.updateValueAndValidity();\n```\n\n## HTML Form Binding Patterns\n\n### formControlName\n\n```html\n<input matInput formControlName=\"username\" />\n<mat-select formControlName=\"role\"></mat-select>\n<mat-checkbox formControlName=\"active\"></mat-checkbox>\n```\n\n### formGroupName (Nested)\n\n```html\n<div formGroupName=\"basicInfo\">\n  <input formControlName=\"name\" />\n  <input formControlName=\"email\" />\n</div>\n```\n\n### formArrayName\n\n```html\n<div formArrayName=\"users\">\n  @for (user of form.controls.users.controls; track $index) {\n    <div [formGroupName]=\"$index\">\n      <input formControlName=\"name\" />\n    </div>\n  }\n</div>\n```\n\n### [formGroup] Binding\n\n```html\n<form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n  ...\n</form>\n```\n\n## Extraction Regex Patterns\n\n### TypeScript Patterns\n\n```bash\n# FormBuilder group definitions\ngrep -E '(this\\.fb|this\\.#fb|this\\.\\w+fb)\\.group\\(' {path}/**/*.ts\n\n# FormControl definitions\ngrep -E 'new (FormControl|UntypedFormControl)\\(' {path}/**/*.ts\n\n# Validators usage\ngrep -oE 'Validators\\.\\w+(\\([^)]*\\))?' {path}/**/*.ts\n\n# OneValidators usage\ngrep -oE 'OneValidators\\.\\w+(\\([^)]*\\))?' {path}/**/*.ts\n\n# Custom validators (private methods)\ngrep -E '#\\w+Validator\\s*\\(' {path}/**/*.ts\n\n# Form control access patterns\ngrep -E '\\.controls\\.\\w+' {path}/**/*.ts\ngrep -E \"\\.get\\(['\\\"][^'\\\"]+['\\\"]\\)\" {path}/**/*.ts\n```\n\n### HTML Patterns\n\n```bash\n# All form bindings\ngrep -oE 'formControlName=\"[^\"]+\"' {path}/**/*.html\ngrep -oE 'formGroupName=\"[^\"]+\"' {path}/**/*.html\ngrep -oE 'formArrayName=\"[^\"]+\"' {path}/**/*.html\ngrep -oE '\\[formGroup\\]=\"[^\"]+\"' {path}/**/*.html\ngrep -oE '\\[formControlName\\]=\"[^\"]+\"' {path}/**/*.html\n```\n\n## Common Issues in Migration\n\n### Issue 1: Missing Validators\n\n```typescript\n// Source (old)\nname: ['', [Validators.required, Validators.maxLength(32)]]\n\n// Target (new) - WRONG: missing maxLength\nname: ['', [OneValidators.required]]\n\n// Target (new) - CORRECT\nname: ['', [OneValidators.required, OneValidators.maxLength(32)]]\n```\n\n### Issue 2: Wrong Form Access Pattern\n\n```typescript\n// Old - using .get()\nconst value = this.form.get('username')?.value;\n\n// New - using .controls (type-safe)\nconst value = this.form.controls.username.value;\n```\n\n### Issue 3: Missing Cross-Field Validators\n\n```typescript\n// Source has group-level validator - don't miss it!\nthis.fb.group({...}, { validators: [this.matchValidator()] })\n```\n\n### Issue 4: Async Validators Not Migrated\n\n```typescript\n// Source\nemail: ['', [Validators.required], [this.emailExistsValidator()]]\n\n// Target - WRONG: missing async validator\nemail: ['', [OneValidators.required]]\n\n// Target - CORRECT\nemail: ['', [OneValidators.required], [this.#emailExistsValidator()]]\n```\n\n### Issue 5: Wrong Error Display Pattern\n\n```html\n<!-- WRONG: pattern/duplicate validators need custom error messages -->\n<mat-error oneUiFormError=\"account\"></mat-error>\n\n<!-- CORRECT: Use @if/@else for pattern, duplicate, custom validators -->\n@if (ctrl.hasError('pattern')) {\n  <mat-error>{{ t('validators.invalid_format_not_space') }}</mat-error>\n} @else if (ctrl.hasError('duplicate')) {\n  <mat-error>{{ t('validators.duplicate_account') }}</mat-error>\n} @else {\n  <mat-error oneUiFormError=\"account\"></mat-error>\n}\n```\n\n## Form Label Patterns\n\n### mxLabel Directive\n\nUse `mxLabel` directive on `mat-label` to enable label features like tooltips and optional indicators.\n\n**Import:**\n```typescript\nimport { MxLabelDirective } from '@moxa/formoxa/mx-label';\n\n@Component({\n  imports: [MxLabelDirective]\n})\n```\n\n### mxLabelOptional (Optional Field Indicator)\n\nFor fields without `required` validator, add `mxLabelOptional` to show \"(Optional)\" text.\n\n```html\n<!-- Field WITHOUT required validator → add mxLabelOptional -->\n<mat-form-field>\n  <mat-label mxLabel mxLabelOptional>{{ t('field.label') }}</mat-label>\n  <input matInput formControlName=\"optionalField\" />\n</mat-form-field>\n```\n\n**Note:** Don't specify `[mxLabelOptionalText]` - use the default value.\n\n### mxLabelTooltip (Field Tooltip)\n\nUse `mxLabelTooltip` instead of `mat-icon` with `matTooltip` for field hints.\n\n```html\n<!-- ❌ WRONG - Don't use mat-icon with matTooltip -->\n<div class=\"form-row\">\n  <mat-form-field>\n    <mat-label>{{ t('field.label') }}</mat-label>\n    <mat-select formControlName=\"field\">...</mat-select>\n  </mat-form-field>\n  <mat-icon class=\"info-icon\" [matTooltip]=\"t('field.hint')\">info</mat-icon>\n</div>\n\n<!-- ✅ CORRECT - Use mxLabelTooltip -->\n<mat-form-field>\n  <mat-label mxLabel [mxLabelTooltip]=\"t('field.hint')\">\n    {{ t('field.label') }}\n  </mat-label>\n  <mat-select formControlName=\"field\">...</mat-select>\n</mat-form-field>\n```\n\n### Combined Usage\n\n```html\n<!-- Optional field with tooltip -->\n<mat-form-field>\n  <mat-label mxLabel mxLabelOptional [mxLabelTooltip]=\"t('field.hint')\">\n    {{ t('field.label') }}\n  </mat-label>\n  <input matInput formControlName=\"optionalField\" />\n</mat-form-field>\n```\n\n---\n\n## Error Display Quick Reference\n\n| Validator | Error Display |\n| --------- | ------------- |\n| `required`, `minLength`, `maxLength`, `range`, `rangeLength`, `email` | **MUST** use `<mat-error oneUiFormError=\"field\">` |\n| **All other validators** (pattern, duplicate, custom, etc.) | **MUST** use `@if/@else` with custom message |\n",
        "plugins/one-ui-migration/skills/full-migration-pipeline/SKILL.md": "---\nname: full-migration-pipeline\ndescription: Complete Angular migration pipeline that orchestrates all migration skills in sequence. Use when performing end-to-end page migration with analysis, implementation, quality checks, and QA verification.\n---\n\n# Full Migration Pipeline\n\nAutomated execution of the complete Angular migration workflow, orchestrating all related skills in sequence.\n\n## Arguments\n\n- `$ARGUMENTS` - Format: `--from <source_path> --to <target_path>` or `--page <page_name>`\n  - `--from`: Legacy project path (e.g., `/Users/jayden/f2e-networking-jayden/apps/mxsecurity-web/src/app/pages/account`)\n  - `--to`: New project path (e.g., `libs/mxsecurity/account-page`)\n  - `--page`: GitLab page name (e.g., `time`, `account`) - When using this parameter, source code is automatically fetched from GitLab\n\n## Pipeline Workflow\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│                    FULL MIGRATION PIPELINE                       │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                  │\n│  Phase 1: Analysis                                               │\n│  ┌─────────────────────────────────────────────────────────┐    │\n│  │ 1.1 Execute migrate-page (analysis + document generation)│    │\n│  │ 1.2 Execute form-extraction (extract form structure)     │    │\n│  │     Output: MIGRATION-ANALYSIS.md                         │    │\n│  └─────────────────────────────────────────────────────────┘    │\n│                           ↓                                      │\n│  Phase 2: Implementation (Manual)                                │\n│  ┌─────────────────────────────────────────────────────────┐    │\n│  │ 2.1 Create Domain Layer (model, api, store, helper)      │    │\n│  │ 2.2 Create UI Layer (tables, forms)                       │    │\n│  │ 2.3 Create Features Layer (page, dialogs)                 │    │\n│  │ 2.4 Create Shell Layer (routes)                           │    │\n│  │     [Await user confirmation]                             │    │\n│  └─────────────────────────────────────────────────────────┘    │\n│                           ↓                                      │\n│  Phase 3: Quality Assurance                                      │\n│  ┌─────────────────────────────────────────────────────────┐    │\n│  │ 3.1 Execute migration-lint (compliance check + auto-fix) │    │\n│  │ 3.2 Execute migration-review (migration completeness)    │    │\n│  │ 3.3 Execute compare-i18n-keys (translation key compare)  │    │\n│  │ 3.4 Execute check-barrel-files (check redundant barrels) │    │\n│  └─────────────────────────────────────────────────────────┘    │\n│                           ↓                                      │\n│  Phase 4: QA Verification                                        │\n│  ┌─────────────────────────────────────────────────────────┐    │\n│  │ 4.1 Execute generate-qa-test-cases (generate test cases) │    │\n│  │ 4.2 Execute verify-legacy-with-qa-testcases (verify old) │    │\n│  │     Output: QA-TEST-CASES.md, LEGACY-VERIFICATION-REPORT.md│   │\n│  └─────────────────────────────────────────────────────────┘    │\n│                           ↓                                      │\n│  Phase 5: Final Report                                           │\n│  ┌─────────────────────────────────────────────────────────┐    │\n│  │ Output MIGRATION-SUMMARY.md (consolidate all results)    │    │\n│  └─────────────────────────────────────────────────────────┘    │\n│                                                                  │\n└─────────────────────────────────────────────────────────────────┘\n```\n\n## Execution Flow\n\n### Phase 1: Analysis\n\n**Automated Execution:**\n\n1. **Determine Source Type**\n   - If `--page` is provided: Use GitLab API to fetch source code\n   - If `--from` is provided: Use local files\n\n2. **Execute Migration Analysis**\n   ```\n   Execute based on source type:\n   - /migrate-page --from={source} --to={target}\n   - /migrate-page-gitlab --page={page_name}\n   ```\n\n3. **Extract Form Structure** (Auxiliary Analysis)\n   - Read form definitions from source code\n   - List all formControlName and validators\n\n**Output:**\n- `{target}/domain/src/lib/docs/MIGRATION-ANALYSIS.md`\n\n**User Prompt:**\n> Phase 1 analysis complete. Proceed to Phase 2 implementation?\n\n---\n\n### Phase 2: Implementation\n\n**Implementation Guidelines:**\n\nDisplay pending implementation checklist (based on MIGRATION-ANALYSIS.md):\n\n```markdown\n## Implementation Checklist\n\n### Domain Layer\n- [ ] Create `{feature}.model.ts` - API types, view models\n- [ ] Create `{feature}.api.ts` - API service (inline URLs directly, do not use constants)\n- [ ] Create `{feature}.store.ts` - SignalStore\n- [ ] Create `{feature}.helper.ts` - Pure functions (if needed)\n\n### Features Layer (Implement First)\n- [ ] Create Page component\n- [ ] Create Dialog components (if applicable)\n- [ ] Verify store injection\n\n### UI Layer (Extract from Features)\n- [ ] Extract Table components to UI layer\n- [ ] Extract Form components to UI layer\n- [ ] Verify input()/output() usage, no store injection\n\n### Shell Layer\n- [ ] Create routes\n- [ ] Register in app.routes.ts\n```\n\n#### Important: Form/Table Extraction to UI Layer\n\n**Implementation Order:**\n1. First complete page functionality in Features Layer\n2. Then extract Form and Table to UI Layer\n3. Features Layer should only retain orchestration code\n\n**Extraction Criteria:**\n- `<form>` containing `<mat-form-field>` -> Extract to UI\n- Tables -> Prefer `common-table` pattern (reference `libs/mxsecurity/shared/ui/src/lib/common-table`)\n- Dialogs remain in Features (but forms inside Dialogs can be extracted to UI)\n\n**Table Implementation Approach:**\n- Prefer using `CommonTableComponent` with `MxColumnDef[]` for column definitions\n- Only create standalone table component in UI layer for complex customization requirements\n\n**Exceptions (No Extraction Required):**\n- Extremely simple pages (e.g., only radio group without form validation)\n- Components used by a single page without complex form logic\n\n#### Patterns to Avoid\n\n```typescript\n// DO NOT use TRANSLOCO_SCOPE\nproviders: [{ provide: TRANSLOCO_SCOPE, useValue: { scope: 'xxx' } }]\n\n// DO NOT use endpoint constants\nreadonly #ENDPOINTS = { API: '/api/xxx' };\n\n// CORRECT: Inline URLs directly\nthis.#rest.get('/api/xxx');\n```\n\n#### Chunked Migration Strategy (Reducing Omission Risk)\n\n**Principle: Process from large sections to small units, completing each before proceeding**\n\n```\nPage Structure Analysis:\n┌─────────────────────────────────────┐\n│ Page                                │\n│ ┌─────────────────────────────────┐ │\n│ │ mat-tab-group                   │ │\n│ │ ┌───────────┬───────────┐       │ │\n│ │ │  Tab 1    │  Tab 2    │       │ │\n│ │ ├───────────┴───────────┤       │ │\n│ │ │ mat-card / section 1  │       │ │\n│ │ ├───────────────────────┤       │ │\n│ │ │ mat-card / section 2  │       │ │\n│ │ └───────────────────────┘       │ │\n│ └─────────────────────────────────┘ │\n└─────────────────────────────────────┘\n```\n\n**Step 1: Segment by `mat-tab`**\n- First identify the number of tabs on the page\n- Process each tab independently, completing one before proceeding to the next\n- Create a checklist corresponding to each tab\n\n**Step 2: Segment by `mat-card` / `content-wrapper`**\n- Within each tab, identify all cards/sections\n- Treat each card as an independent migration unit\n- Verify immediately after completing each card\n\n**Step 3: Migrate and Verify Incrementally**\n- Migration order: top to bottom, left to right\n- Execute `/migration-lint` after completing each segment\n- Compare with legacy code to confirm no omissions\n\n**Example Checklist:**\n```markdown\n## Chunked Migration Progress\n\n### Tab 1: General Settings\n- [x] Card 1.1: Basic Info\n- [x] Card 1.2: Network Config\n- [ ] Card 1.3: Advanced Options\n\n### Tab 2: Security\n- [ ] Card 2.1: Authentication\n- [ ] Card 2.2: Certificates\n```\n\n**Generate Library Structure:**\n```bash\nnx g @one-ui/one-plugin:library mxsecurity {page-name} all\n```\n\n**Await User Confirmation:**\n> After completing the above implementation, enter \"done\" or \"continue\" to proceed to Phase 3.\n> For pattern queries, use /migration-patterns <keyword>\n\n---\n\n### Phase 3: Quality Assurance\n\n**Automated Execution:**\n\n1. **Compliance Check + Auto-fix**\n   ```\n   /migration-lint {target}\n   ```\n   - Auto-fix: mat-raised-button -> mat-flat-button\n   - Auto-fix: *ngIf -> @if\n   - Auto-fix: Validators -> OneValidators\n   - Generate compliance report\n\n2. **Migration Completeness Check**\n   ```\n   /migration-review --from={source} --to={target}\n   ```\n   - Compare form controls\n   - Compare validators\n   - Compare translation keys\n   - Compare event bindings\n\n3. **Translation Key Comparison** (For primary HTML files)\n   ```\n   /compare-i18n-keys --from={source}/*.html --to={target}/**/*.html\n   ```\n\n4. **Check Redundant Barrel Files**\n   ```\n   /check-barrel-files {target}\n   ```\n\n**Output:**\n- Reports for each check (displayed in conversation)\n- List of auto-fixed changes\n\n**User Prompt:**\n> Phase 3 quality assurance complete. X issues auto-fixed, Y issues require manual intervention.\n> Proceed to Phase 4 QA verification?\n\n---\n\n### Phase 4: QA Verification\n\n**Automated Execution:**\n\n1. **Generate QA Test Cases**\n   ```\n   /generate-qa-test-cases {target}\n   ```\n   - Extract test cases from new code\n   - Generate structured test report\n\n2. **Verify Legacy Code**\n   ```\n   /verify-legacy-with-qa-testcases {source}\n   ```\n   - Verify legacy code using test cases\n   - Confirm functional consistency\n\n**Output:**\n- `{target}/domain/src/lib/docs/QA-TEST-CASES.md`\n- `{target}/domain/src/lib/docs/LEGACY-VERIFICATION-REPORT.md`\n\n---\n\n### Phase 5: Final Report\n\n**Auto-generate MIGRATION-SUMMARY.md:**\n\n```markdown\n# {Feature Name} Migration Summary Report\n\n**Migration Date:** {date}\n**Source:** {source_path}\n**Target:** {target_path}\n\n## Migration Status\n\n| Phase | Status | Notes |\n|-------|--------|-------|\n| Phase 1: Analysis | Complete | |\n| Phase 2: Implementation | Complete | |\n| Phase 3: Quality Assurance | Complete | X items auto-fixed |\n| Phase 4: QA Verification | Complete | |\n\n## Generated Documents\n\n- [x] MIGRATION-ANALYSIS.md\n- [x] QA-TEST-CASES.md\n- [x] LEGACY-VERIFICATION-REPORT.md\n- [x] MIGRATION-SUMMARY.md (this document)\n\n## Compliance Report Summary\n\n### Auto-fixed Items\n{List of auto-fixed items}\n\n### Items Requiring Manual Intervention\n{List of items requiring manual intervention}\n\n## Migration Completeness\n\n| Category | Source | Target | Completeness |\n|----------|--------|--------|--------------|\n| Form Controls | X | X | 100% |\n| Validators | X | X | 100% |\n| Translation Keys | X | X | 100% |\n| Event Bindings | X | X | 100% |\n\n## Next Steps\n\n1. [ ] Execute comprehensive testing\n2. [ ] Code Review\n3. [ ] Merge to main branch\n```\n\n**Output Location:** `{target}/domain/src/lib/docs/MIGRATION-SUMMARY.md`\n\n---\n\n## Usage Examples\n\n### Migration from Local Source\n\n```bash\n/full-migration-pipeline --from=/Users/jayden/f2e-networking-jayden/apps/mxsecurity-web/src/app/pages/account --to=libs/mxsecurity/account-page\n```\n\n### Migration from GitLab\n\n```bash\n/full-migration-pipeline --page=account\n```\n\n## Interruption and Resumption\n\nIf the workflow is interrupted, continue from a specific phase:\n\n```bash\n# Execute Phase 3 quality assurance only\n/migration-lint libs/mxsecurity/account-page\n\n# Execute Phase 4 QA verification only\n/generate-qa-test-cases libs/mxsecurity/account-page\n/verify-legacy-with-qa-testcases /path/to/legacy\n```\n\n## Auxiliary Skills\n\nAvailable for use at any point during pipeline execution:\n\n| Skill | Purpose |\n|-------|---------|\n| `/migration-patterns <keyword>` | Query migration patterns |\n| `/icon-replacement <icon>` | Find replacement icons |\n| `/ui-layout-guide <query>` | UI layout guidelines |\n",
        "plugins/one-ui-migration/skills/generate-qa-test-cases/SKILL.md": "---\nname: generate-qa-test-cases\ndescription: Generate QA test cases in Traditional Chinese from project code analysis.\n---\n\n# Generate QA Test Cases\n\nAnalyze project code and generate comprehensive test cases for QA testing.\n\n**Important: Reports should be written in Traditional Chinese.**\n\n## Arguments\n\n- `$ARGUMENTS` - Target path to analyze (e.g., `libs/mxsecurity/account-page`)\n\n## Analysis Process\n\n### Step 1: Locate and Read Files\n\nRead all relevant files from the target path:\n\n- `**/*.ts` - TypeScript files (components, services, models)\n- `**/*.html` - Template files\n- `**/*.model.ts` - Data models\n- `**/*.def.ts` - Constants and definitions\n- `**/*.api.ts` - API service files\n\n### Step 2: Extract Form Fields and Validation Rules\n\n**From TypeScript files, extract:**\n\n1. **Form Group Definitions**\n   - `this.fb.group({...})` or `new FormGroup({...})`\n   - `this.fb.nonNullable.group({...})`\n\n2. **Form Controls with Validators**\n   - `Validators.*` usage\n   - `OneValidators.*` usage\n   - Custom validators\n\n3. **Conditional Validators**\n   - `setValidators()` / `clearValidators()` calls\n   - Dynamic validation logic\n\n**Output Format:**\n\n```markdown\n## Form Fields and Validation Rules\n\n### Form: {formName}\n\n| Field Name | Type     | Required | Validators                                 | Conditions       |\n| ---------- | -------- | -------- | ------------------------------------------ | ---------------- |\n| username   | text     | Yes      | required, maxLength(32), pattern(alphanum) | Always           |\n| password   | password | Yes      | required, minLength(8), complexity         | Create mode only |\n```\n\n### Step 3: Extract Error Messages\n\n**From HTML templates, extract:**\n\n1. **mat-error elements**\n   - Error conditions (`*ngIf` / `@if`)\n   - Translation keys for error messages\n\n2. **Error message mappings**\n   - `hasError('required')` → message\n   - `hasError('minlength')` → message\n   - Custom error keys\n\n3. **oneUiFormError directive usage**\n   - Auto-generated error messages\n\n**Output Format:**\n\n```markdown\n## Validation Error Messages\n\n### Field: {fieldName}\n\n| Validation Rule | Error Condition         | Error Message (Translation Key)     |\n| --------------- | ----------------------- | ----------------------------------- |\n| required        | `hasError('required')`  | `COMMON.VALIDATION.REQUIRED`        |\n| minLength(8)    | `hasError('minlength')` | `COMMON.VALIDATION.MIN_LENGTH`      |\n| pattern         | `hasError('pattern')`   | `ACCOUNT.VALIDATION.INVALID_FORMAT` |\n```\n\n### Step 4: Extract Conditional Field Visibility\n\n**From templates and components, extract:**\n\n1. **Conditional rendering**\n   - `@if (condition)` / `*ngIf=\"condition\"`\n   - `[hidden]=\"condition\"`\n   - `[disabled]=\"condition\"`\n\n2. **Mode-based visibility**\n   - Create vs Edit mode differences\n   - Role-based field visibility\n\n3. **Dependent field logic**\n   - Field A value affects Field B visibility\n   - Cascading selections\n\n**Output Format:**\n\n```markdown\n## Conditional Field Visibility\n\n### Trigger: {triggerField} = {value}\n\n| Affected Field  | Visibility | Enabled | Notes                            |\n| --------------- | ---------- | ------- | -------------------------------- |\n| passwordField   | Hidden     | -       | Only shown in create mode        |\n| confirmPassword | Shown      | Enabled | Appears when password is entered |\n```\n\n### Step 5: Extract API Payload Format\n\n**From API service files, extract:**\n\n1. **POST/PUT endpoints**\n   - Method signatures\n   - Payload interfaces\n\n2. **Request payload structure**\n   - Required fields\n   - Optional fields\n   - Field types\n\n3. **Data transformations**\n   - Form data → API payload mapping\n\n**Output Format:**\n\n````markdown\n## API Payload Format\n\n### Endpoint: POST /auth/accountSet\n\n#### Create Account (mode: 1)\n\n```json\n{\n  \"userName\": \"string (required)\",\n  \"mode\": 1,\n  \"userEnable\": \"number (0|1)\",\n  \"authority\": \"number (1|2)\",\n  \"new_pw\": \"string (required)\",\n  \"confirm_pw\": \"string (required)\"\n}\n```\n````\n\n#### Edit Account (mode: 2)\n\n```json\n{\n  \"userName\": \"string (required)\",\n  \"mode\": 2,\n  \"userEnable\": \"number (0|1)\",\n  \"authority\": \"number (1|2)\"\n}\n```\n\n````\n\n### Step 6: Generate Boundary Test Cases\n\nBased on extracted validation rules, generate test cases:\n\n1. **String Length Boundaries**\n   - minLength: test with (min-1), min, (min+1)\n   - maxLength: test with (max-1), max, (max+1)\n\n2. **Numeric Range Boundaries**\n   - min: test with (min-1), min, (min+1)\n   - max: test with (max-1), max, (max+1)\n\n3. **Pattern Validation**\n   - Valid pattern examples\n   - Invalid pattern examples\n   - Edge cases (empty, special chars)\n\n4. **Required Fields**\n   - Empty string\n   - Whitespace only\n   - Null/undefined\n\n**Output Format:**\n\n```markdown\n## Boundary Test Cases\n\n### Field: username\n\n| Test Case ID | Input Value | Expected Result | Validation Rule |\n|--------------|-------------|-----------------|-----------------|\n| TC-USER-001 | \"\" (empty) | Error: Required | required |\n| TC-USER-002 | \"   \" (spaces) | Error: Required | required |\n| TC-USER-003 | \"a\" (1 char) | Error: Min length | minLength(4) |\n| TC-USER-004 | \"abcd\" (4 chars) | Valid | minLength(4) |\n| TC-USER-005 | \"a\".repeat(32) | Valid | maxLength(32) |\n| TC-USER-006 | \"a\".repeat(33) | Error: Max length | maxLength(32) |\n| TC-USER-007 | \"user@123\" | Error: Invalid char | pattern(alphanum) |\n| TC-USER-008 | \"user_123\" | Valid | pattern(alphanum) |\n````\n\n### Step 7: Generate Interaction Test Cases\n\nBased on conditional visibility and mode logic:\n\n1. **Mode Switching**\n   - Create mode field states\n   - Edit mode field states\n   - Transition between modes\n\n2. **Dependent Fields**\n   - Trigger field changes\n   - Expected field state changes\n\n3. **Form Submission**\n   - Valid submission\n   - Partial validation errors\n   - Server error handling\n\n**Output Format:**\n\n```markdown\n## Interaction Test Cases\n\n### Scenario: Create New Account\n\n| Step | Action                               | Expected Result                    |\n| ---- | ------------------------------------ | ---------------------------------- |\n| 1    | Click \"Create\" button                | Dialog opens with empty form       |\n| 2    | Leave all fields empty, click Submit | Show required errors on all fields |\n| 3    | Enter username \"admin\"               | Show \"username exists\" error       |\n| 4    | Enter valid username                 | Error clears                       |\n| 5    | Enter password \"123\"                 | Show \"min length\" error            |\n| 6    | Enter password \"ValidPass1!\"         | Error clears                       |\n| 7    | Enter mismatched confirm password    | Show \"password mismatch\" error     |\n| 8    | Enter matching confirm password      | Error clears                       |\n| 9    | Click Submit                         | Account created, dialog closes     |\n```\n\n## Output\n\nGenerate a comprehensive test case document at:\n`{target}/domain/src/lib/docs/QA-TEST-CASES.md`\n\n### Document Structure\n\n```markdown\n# QA Test Cases - {Feature Name}\n\nGenerated: {current_date}\nSource: {target_path}\n\n## Table of Contents\n\n1. [Form Fields and Validation Rules](#form-fields-and-validation-rules)\n2. [Validation Error Messages](#validation-error-messages)\n3. [Conditional Field Visibility](#conditional-field-visibility)\n4. [API Payload Format](#api-payload-format)\n5. [Boundary Test Cases](#boundary-test-cases)\n6. [Interaction Test Cases](#interaction-test-cases)\n\n---\n\n{Generated sections from Steps 2-7}\n```\n\n## Notes\n\n- Reports should be written in Traditional Chinese\n- Focus on extracting actual validation rules from code, not assumptions\n- Include translation keys for error messages to help QA verify correct text\n- Cross-reference form field names with API payload field names\n- Highlight any discrepancies between form validation and API expectations\n",
        "plugins/one-ui-migration/skills/icon-replacement/SKILL.md": "---\nname: icon-replacement\ndescription: Find replacement icons for migration. Use when migrating old code that uses icons not available in the new system, or when you need to find a suitable icon from the available icon set.\n---\n\nFind and suggest replacement icons during migration. This skill provides the complete list of available icons in the One-UI system.\n\n## Arguments\n\n- `$ARGUMENTS` - Query or command:\n  - `<old-icon-name>` - Find a replacement for a specific icon\n  - `list` - Show all available icons\n  - `search <keyword>` - Search icons by keyword\n  - `category <name>` - Show icons by category (navigation, action, status, network, file, etc.)\n\n## Available Icons\n\n### Navigation & Menu\n- `icon:arrow_back`\n- `icon:arrow_forward`\n- `icon:arrow_left`\n- `icon:arrow_right`\n- `icon:arrow_upward`\n- `icon:arrow_downward`\n- `icon:arrow_drop_down`\n- `icon:arrow_drop_up`\n- `icon:arrow_circle_down`\n- `icon:arrow_circle_up`\n- `icon:navigate_before`\n- `icon:navigate_next`\n- `icon:first_page`\n- `icon:last_page`\n- `icon:keyboard_arrow_down`\n- `icon:keyboard_arrow_up`\n- `icon:menu`\n- `icon:apps`\n- `icon:home`\n- `icon:dashboard`\n\n### Actions\n- `icon:add`\n- `icon:add_box`\n- `icon:add_circle`\n- `icon:add_link`\n- `icon:remove`\n- `icon:remove_circle`\n- `icon:edit`\n- `icon:edit_attributes`\n- `icon:edit_notifications`\n- `icon:edit_off`\n- `icon:delete_forever`\n- `icon:save`\n- `icon:cancel`\n- `icon:clear`\n- `icon:done`\n- `icon:check_circle`\n- `icon:refresh`\n- `icon:sync_alt`\n- `icon:loop`\n- `icon:undo`\n- `icon:redo`\n- `icon:download`\n- `icon:upload`\n- `icon:send`\n- `icon:forward`\n- `icon:launch`\n- `icon:search`\n- `icon:filter_alt`\n- `icon:tune`\n- `icon:settings`\n- `icon:settings_applications`\n- `icon:settings_ethernet`\n- `icon:settings_input_component`\n- `icon:settings_power`\n- `icon:settings_remote`\n- `icon:settings_suggest`\n- `icon:build`\n- `icon:create_new_folder`\n- `icon:attach_file`\n- `icon:file_copy`\n- `icon:link`\n- `icon:link_off`\n- `icon:login`\n- `icon:lock`\n- `icon:lock_open`\n- `icon:vpn_key`\n- `icon:fullscreen`\n- `icon:fullscreen_exit`\n- `icon:drag_indicator`\n- `icon:place_item`\n\n### Status & Indicators\n- `icon:info`\n- `icon:info_outline`\n- `icon:help`\n- `icon:help_outline`\n- `icon:warning`\n- `icon:error`\n- `icon:priority_high`\n- `icon:notifications`\n- `icon:notifications_active`\n- `icon:notifications_none`\n- `icon:notifications_off`\n- `icon:circle`\n- `icon:panorama_fish_eye`\n- `icon:highlight_off`\n- `icon:hide_source`\n- `icon:visibility`\n- `icon:visibility_off`\n- `icon:task_alt`\n- `icon:pending_actions`\n- `icon:running_with_errors`\n- `icon:sync_disabled`\n- `icon:sync_problem`\n- `icon:troubleshoot`\n- `icon:verified_user`\n- `icon:policy`\n- `icon:security`\n\n### Network & Connectivity\n- `icon:wifi`\n- `icon:wifi_off`\n- `icon:wifi_1_bar`\n- `icon:wifi_2_bar`\n- `icon:wifi_medium_darkTheme`\n- `icon:wifi_medium_lightTheme`\n- `icon:wifi_strength_darkTheme`\n- `icon:wifi_strength_lightTheme`\n- `icon:wifi_weak_darkTheme`\n- `icon:wifi_weak_lightTheme`\n- `icon:signal_cellular_alt`\n- `icon:signal_cellular_alt_1_bar`\n- `icon:signal_cellular_alt_2_bar`\n- `icon:lan`\n- `icon:device_hub`\n- `icon:router`\n- `icon:cable`\n- `icon:cloud_off`\n- `icon:cloud_queue`\n- `icon:cloud-upload-outline`\n- `icon:api`\n- `icon:storage`\n- `icon:network_manage`\n\n### Files & Documents\n- `icon:folder`\n- `icon:folder_off`\n- `icon:folder_open`\n- `icon:article`\n- `icon:description`\n- `icon:assignment`\n- `icon:inventory`\n- `icon:archive`\n- `icon:unarchive`\n\n### People & Accounts\n- `icon:person`\n- `icon:account_box`\n- `icon:account_tree`\n- `icon:group_work`\n- `icon:engineering-maintenance`\n\n### Time & Schedule\n- `icon:schedule`\n- `icon:schedule_send`\n- `icon:today`\n- `icon:event_busy`\n- `icon:event_note`\n- `icon:history`\n- `icon:update`\n- `icon:upgrade`\n\n### UI Elements\n- `icon:star`\n- `icon:star_border`\n- `icon:favorite`\n- `icon:favorite_border`\n- `icon:bookmark_star`\n- `icon:push_pin`\n- `icon:outlined-push_pin`\n- `icon:label`\n- `icon:local_offer`\n- `icon:category`\n- `icon:style`\n- `icon:widgets`\n- `icon:extension`\n- `icon:more_vert`\n- `icon:unfold_less`\n- `icon:unfold_more`\n- `icon:density_large`\n- `icon:density_medium`\n- `icon:density_small`\n- `icon:view_headline`\n- `icon:grid`\n- `icon:format_list_numbered_rtl`\n\n### Trends & Analytics\n- `icon:trending_up`\n- `icon:trending_down`\n- `icon:trending_flat`\n- `icon:calculate`\n- `icon:functions`\n\n### Location & GPS\n- `icon:location`\n- `icon:my_location`\n- `icon:gps_fixed`\n- `icon:near_me`\n- `icon:outlined-near_me`\n- `icon:apartment`\n- `icon:room_preferences`\n\n### Media & Image\n- `icon:camera`\n- `icon:image-outline`\n- `icon:wallpaper`\n- `icon:center_focus_weak`\n\n### Communication\n- `icon:email`\n- `icon:mark_email_unread`\n- `icon:sms`\n- `icon:phone`\n- `icon:outlined-feedback`\n\n### Play Controls\n- `icon:play_circle`\n- `icon:pause_circle`\n- `icon:restart_alt`\n- `icon:power_settings_new`\n- `icon:left_circle`\n\n### MX Custom Icons (Moxa-specific)\n- `icon:mx-509_certificate`\n- `icon:mx-application_cog_outline`\n- `icon:mx-application_empty`\n- `icon:mx-calendar_clock`\n- `icon:mx-circle_dash`\n- `icon:mx-cog-off`\n- `icon:mx-cursor-add-outline`\n- `icon:mx-cursor-add`\n- `icon:mx-cursor-outline`\n- `icon:mx-cursor`\n- `icon:mx-default_route`\n- `icon:mx-empty_state_404`\n- `icon:mx-empty_state_500`\n- `icon:mx-empty_state_box`\n- `icon:mx-empty_state_module_not_found`\n- `icon:mx-ethernet_port`\n- `icon:mx-export`\n- `icon:mx-file-eye-outline`\n- `icon:mx-file_cog_outline`\n- `icon:mx-folder-cog`\n- `icon:mx-form-textbox`\n- `icon:mx-forward`\n- `icon:mx-grid`\n- `icon:mx-horizontal-line`\n- `icon:mx-horizontal_align_center`\n- `icon:mx-https`\n- `icon:mx-ip_network_outline`\n- `icon:mx-lan`\n- `icon:mx-moxa_device_extension`\n- `icon:mx-moxa_m`\n- `icon:mx-network_service`\n- `icon:mx-package_update`\n- `icon:mx-redundancy`\n- `icon:mx-remote_vpn`\n- `icon:mx-restart`\n- `icon:mx-ring`\n- `icon:mx-router_empty`\n- `icon:mx-safety_check`\n- `icon:mx-scan_device`\n- `icon:mx-switching`\n- `icon:mx-system-dashboard`\n- `icon:mx-tag-search`\n- `icon:mx-ungroup`\n- `icon:mx-verified_error`\n- `icon:mx-verified_unknow`\n- `icon:mx-vertical-line`\n- `icon:mx-wan`\n\n### Project Types\n- `icon:project_type_agt`\n- `icon:project_type_tpe`\n- `icon:apollo_project`\n- `icon:tenancy`\n\n### Misc\n- `icon:local_activity`\n- `icon:card_membership`\n- `icon:medical_information`\n- `icon:dynamic_form`\n- `icon:shape_line_outline`\n- `icon:cleaning_services`\n- `icon:low_priority`\n- `icon:multiple_stop`\n- `icon:terminal`\n- `icon:vertical_align_center`\n- `icon:pan_tool`\n- `icon:pan_tool-outline`\n- `icon:outlined-gpp_bad`\n- `icon:outlined-stop_circle`\n- `icon:outlined-verified_user`\n- `icon:outlined-view_week`\n\n## Common Icon Replacements\n\nWhen migrating from legacy icons, use these suggested replacements:\n\n| Legacy Icon | Replacement | Reason |\n|-------------|-------------|--------|\n| `close` | `icon:clear` or `icon:cancel` | Clear for dismiss, cancel for cancel action |\n| `check` | `icon:done` or `icon:check_circle` | Done for simple check, check_circle for emphasis |\n| `add_circle_outline` | `icon:add_circle` | Unified style |\n| `remove_circle_outline` | `icon:remove_circle` | Unified style |\n| `settings_outline` | `icon:settings` | Unified style |\n| `cloud_upload` | `icon:cloud-upload-outline` | Use outline variant |\n| `cloud_download` | `icon:download` | Use generic download |\n| `file_download` | `icon:download` | Use generic download |\n| `file_upload` | `icon:upload` | Use generic upload |\n| `exit_to_app` | `icon:login` or `icon:launch` | Login for auth, launch for external |\n| `open_in_new` | `icon:launch` | Use launch for external links |\n| `content_copy` | `icon:file_copy` | Use file_copy |\n| `feedback` | `icon:outlined-feedback` | Use outlined variant |\n| `pin` | `icon:push_pin` | Use push_pin |\n| `ethernet` | `icon:settings_ethernet` or `icon:mx-ethernet_port` | Use MX variant for ports |\n| `network_check` | `icon:network_manage` | Use network_manage |\n| `vpn_lock` | `icon:mx-remote_vpn` | Use MX VPN icon |\n| `restart` | `icon:restart_alt` or `icon:mx-restart` | Use MX variant if available |\n| `sync` | `icon:sync_alt` or `icon:loop` | sync_alt for bidirectional, loop for repeat |\n| `bolt` | `icon:power_settings_new` | Use power icon |\n| `certificate` | `icon:mx-509_certificate` | Use MX certificate icon |\n\n## Workflow\n\n### For `<old-icon-name>` query:\n1. Search for exact match in available icons\n2. If not found, suggest closest alternatives based on:\n   - Semantic meaning\n   - Visual similarity\n   - Common use cases\n3. Provide 2-3 options with explanations\n\n### For `search <keyword>`:\n1. Search icon names containing the keyword\n2. Return all matches grouped by category\n\n### For `category <name>`:\n1. Return all icons in that category\n2. Categories: navigation, action, status, network, file, people, time, ui, trend, location, media, communication, play, mx, project, misc\n\n## Output Format\n\n### For replacement queries:\n```\n## Icon Replacement for `{old-icon}`\n\n**Recommended:** `icon:{recommended}` - {reason}\n\n**Alternatives:**\n- `icon:{alt1}` - {reason1}\n- `icon:{alt2}` - {reason2}\n\n**Usage:**\n```html\n<mat-icon svgIcon=\"{recommended}\"></mat-icon>\n```\n```\n\n### For search/list:\n```\n## Icons matching \"{keyword}\"\n\n### {Category 1}\n- `icon:name1`\n- `icon:name2`\n\n### {Category 2}\n- `icon:name3`\n```\n",
        "plugins/one-ui-migration/skills/migrate-page-gitlab/SKILL.md": "---\nname: migrate-page-gitlab\ndescription: Migrate Angular page from GitLab source following DDD architecture. Use when migrating pages from GitLab repository (Angular 16) to Angular 20 with domain-driven design patterns.\n---\n\n# Page Migration Command (GitLab Source)\n\nMigrate a page from GitLab repository (Angular 16) to new one-ui monorepo (Angular 20) following DDD architecture.\n\n## Arguments\n\n- `$ARGUMENTS` - Format: `--page <page_name>`\n  - `--page`: Page folder name in GitLab (e.g., `time`, `account`, `ddns`)\n\n**Target Path Convention**\n\nTarget path is automatically derived as `libs/mxsecurity/{page_name}-page`\nExample: `--page time` → `libs/mxsecurity/time-page`\n\n**GitLab Source Base URL**\n\n`https://gitlab.com/moxa/sw/f2e/networking/f2e-networking/-/tree/main/apps/mxsecurity-web/src/app/pages/{page_name}`\n\n**GitLab Access Token**\n\nSet environment variable `GITLAB_TOKEN` or use `private_token=${GITLAB_TOKEN}` for authenticated access.\n\n> **Security Note**: Never hardcode tokens in skill files. Use environment variables instead.\n\n## Workflow\n\n### Phase 1: Fetch Source from GitLab & Analysis\n\n**GitLab URLs (with token):**\n\n- Tree API: `https://gitlab.com/api/v4/projects/moxa%2Fsw%2Ff2e%2Fnetworking%2Ff2e-networking/repository/tree?path=apps/mxsecurity-web/src/app/pages/{page_name}&ref=main&private_token=${GITLAB_TOKEN}`\n- Raw file: `https://gitlab.com/api/v4/projects/moxa%2Fsw%2Ff2e%2Fnetworking%2Ff2e-networking/repository/files/{url_encoded_path}/raw?ref=main&private_token=${GITLAB_TOKEN}`\n\nUse WebFetch to fetch source files (`*.component.ts`, `*.component.html`, `*.component.scss`, `*.service.ts`, `*.model.ts`).\n\nAnalyze the fetched source and create a migration analysis document in `{target}/domain/src/lib/docs/MIGRATION-ANALYSIS.md`:\n\n1. **File Structure Analysis**\n   - List all files fetched from GitLab\n   - Categorize by type: components, services, models, templates, styles\n\n2. **Component Analysis**\n   - Identify all components and their relationships\n   - Note parent/child relationships\n   - Identify dialog components\n   - Identify table/form components\n\n3. **Form Validation Analysis**\n   - List all form controls and their validators\n   - Identify `Validators.*` usage that needs `OneValidators.*` replacement\n   - Document custom validators\n\n4. **API Calls Analysis**\n   - List all HTTP calls (endpoints, methods, request/response types)\n   - Identify API services being used\n   - Document data flow\n\n5. **Dependencies Analysis**\n   - Third-party libraries used\n   - Angular Material components used\n   - Shared services/utils used\n\n6. **Translation Keys Analysis (CRITICAL)**\n   - **DO NOT create new translation keys**\n   - **DO NOT modify existing translation keys**\n   - List all translation keys used in source HTML templates\n   - Copy exact keys for use in migrated components\n\n7. **Form Layout Analysis (CRITICAL)**\n   - **DO NOT change form field row groupings**\n   - Analyze `fxLayout=\"row\"` patterns in source templates\n   - Document which fields appear on same row\n   - Use `.form-row` class in migrated components to preserve layout\n\n### Phase 2: DDD Structure Migration\n\nReference documents from `one-ui-migration` skill's `rules/` directory:\n\n**Reference Docs** (`rules/reference/`):\n- `ddd-architecture.md` - DDD layers, helper files\n- `api-types.md` - API types, def files\n- `checklist.md` - Full compliance checklist\n- `pitfalls/` - Common migration mistakes\n\n**Tool Docs** (`rules/tools/`):\n- `forms/validators.md` - OneValidators usage, pattern constants\n- `forms/error-handling.md` - Template errors, custom errors\n- `ui/page-layout.md` - Page layout, breadcrumb\n- `ui/forms.md` - Form layout, validation\n- `ui/buttons.md` - Button types, loading states\n- `ui/components.md` - File upload, form patterns\n- `ui/dialogs.md` - Dialog config, viewContainerRef\n- `tables/basics.md` - CommonTableComponent\n- `tables/columns.md` - Column API, custom templates\n- `tables/advanced.md` - Paginator config\n\n**Guides** (`rules/guides/`):\n- `create-page.md` - Page creation guide\n- `create-dialog.md` - Dialog creation guide\n- `create-table.md` - Table creation guide\n\nGenerate libraries using the Nx plugin:\n\n```bash\n# Generate all library types at once\nnx g @one-ui/one-plugin:library mxsecurity {page-name} all\n\n# Or generate individually if needed\nnx g @one-ui/one-plugin:library mxsecurity {page-name} domain\nnx g @one-ui/one-plugin:library mxsecurity {page-name} features\nnx g @one-ui/one-plugin:library mxsecurity {page-name} ui\nnx g @one-ui/one-plugin:library mxsecurity {page-name} shell\n```\n\n### Phase 3: Layer-by-Layer Migration\n\n1. **Domain Layer** (`domain/`) - see `rules/reference/ddd-architecture.md`\n   - API response types → use existing types from `@one-ui/mxsecurity/shared/domain` (e.g., `SRV_USER_ACCOUNT`)\n   - If API type missing → create in `libs/mxsecurity/shared/domain/src/lib/models/api/`\n   - Page-specific models (view models, form models) → `*.model.ts`\n   - Migrate API service → `*.api.ts`\n   - Create SignalStore → `*.store.ts`\n   - Migrate constants → `*.def.ts`\n   - Extract pure functions → `*.helper.ts` (data transformations, serialization)\n   - Keep `MIGRATION-ANALYSIS.md` in `domain/src/lib/docs/` folder\n\n2. **UI Layer** (`ui/`) - see `rules/tools/tables/basics.md`\n   - Migrate tables → use `CommonTableComponent` pattern\n   - Migrate forms → use `input()`, `output()` pattern\n   - Table toolbar → use `mat-stroked-button` with `general.button.create`/`delete`\n   - Keep components dumb (no store injection, no HTTP)\n\n3. **Features Layer** (`features/`) - see `rules/tools/ui/forms.md`, `buttons.md` and `dialogs.md`\n   - Migrate page component → smart component pattern\n   - Migrate dialogs → use `smallDialogConfig`, `mediumDialogConfig`, `largeDialogConfig`\n   - Form tooltips → use `mxLabelTooltip` instead of `mat-icon` with `matTooltip`\n   - Inject store, pass data to UI via inputs\n\n4. **Shell Layer** (`shell/`)\n   - Create routes with resolver pattern\n   - Provide store and services\n\n5. **App Routes Registration** (see `rules/tools/ui/page-layout.md`)\n   - Add route to `apps/mxsecurity/mxsecurity/src/app/app.routes.ts`\n   - Register in `appRoutes` children array with breadcrumb resolver\n\n### Phase 4: Syntax Modernization\n\nApply Angular 20 syntax updates (see `rules/reference/angular-20-syntax.md`):\n\n- `*ngIf` → `@if`\n- `*ngFor` → `@for (item of items; track item.id)`\n- `constructor(private service: Service)` → `inject()`\n- `@Input()` → `input()`\n- `@Output()` → `output()`\n- `BehaviorSubject` → `signal()`\n\n**Form Validation** (see `rules/tools/forms/validators.md`):\n\n- `Validators.required` → `OneValidators.required` (no parentheses)\n- `Validators.email` → `OneValidators.email` (no parentheses)\n- `Validators.minLength(n)` → `OneValidators.minLength(n)`\n- Import from `@one-ui/mxsecurity/shared/domain`\n\n**UI Patterns**:\n\n- Buttons (see `buttons.md`):\n  - `mat-raised-button` → `mat-flat-button`\n  - Form tooltips: Use `mxLabelTooltip` instead of `mat-icon` with `matTooltip`\n  - Loading states: Use `MxLoadingButtonDirective` with `[mxButtonIsLoading]=\"loading()\"`\n\n- Page Layout (see `ui/page-layout.md`):\n  - `mat-card` → `<div class=\"content-wrapper\">`\n\n- Dialogs (see `dialogs.md`):\n  - Dialog sizing: Use `smallDialogConfig`, `mediumDialogConfig`, `largeDialogConfig`\n  - Dialog API calls: Call API inside dialog, close only on success via `next` callback\n  - Dialog viewContainerRef: Set `viewContainerRef: this.#viewContainerRef` when dialog uses store\n\n- Tables (see `basics.md`):\n  - Table toolbar buttons: Use `mat-stroked-button` with `general.button.create`/`general.button.delete`\n\n**Translation Keys** (see `rules/reference/pitfalls/translation-layout.md`):\n\n- **MUST use exact same translation keys as source**\n- Read source HTML templates to find correct keys\n- DO NOT create new keys or modify existing ones\n- Example: `{{ 'general.common.name' | translate }}` → `{{ t('general.common.name') }}`\n\n**Number-Only Input Directive** (see `rules/reference/pitfalls/forms-services.md`):\n\n- **MUST replace `appNumberOnly` with `oneUiNumberOnly`**\n- Import `NumberOnlyDirective` from `@one-ui/mxsecurity/shared/domain`\n\n### Phase 5: Verification\n\n```bash\n# Type check\nnpx tsc --noEmit --project libs/mxsecurity/{page-name}/domain/tsconfig.lib.json\n\n# Lint\nnx lint mxsecurity-{page-name}-domain\nnx lint mxsecurity-{page-name}-features\nnx lint mxsecurity-{page-name}-ui\nnx lint mxsecurity-{page-name}-shell\n\n# Build\nnx build mxsecurity-web\n```\n\n## Output Format\n\nAfter completing migration analysis (Phase 1), save the analysis to:\n`{target}/domain/src/lib/docs/MIGRATION-ANALYSIS.md`\n\n## Example Usage\n\n```\n/migrate-page-gitlab --page time\n/migrate-page-gitlab --page account\n/migrate-page-gitlab --page ddns\n```\n\nThese will automatically migrate to:\n\n- `libs/mxsecurity/time-page`\n- `libs/mxsecurity/account-page`\n- `libs/mxsecurity/ddns-page`\n\n## Reference Examples\n\n- MAF Account Settings: `libs/maf/act-account/`\n- Switch L3 Interface: `libs/switch/l3-interface/`\n- MXsecurity Login: `libs/mxsecurity/login-page/`\n",
        "plugins/one-ui-migration/skills/migrate-page/SKILL.md": "---\nname: migrate-page\ndescription: Migrate Angular page from local source following DDD architecture. Use when migrating pages from Angular 16 to Angular 20 with domain-driven design patterns.\n---\n\n# Page Migration Command\n\nMigrate a page from legacy Angular project (Angular 16) to new one-ui monorepo (Angular 20) following DDD architecture.\n\n## Arguments\n\n- `$ARGUMENTS` - Format: `--from <source_path> --to <target_path>`\n  - `--from`: Source path in old project (e.g., `/Users/jayden/f2e-networking-jayden/apps/mxsecurity-web/src/app/pages/account`)\n  - `--to`: Target path in new project (e.g., `libs/mxsecurity/account-page`)\n\n> **Note: No page ID required**\n>\n> Only provide `--from` and `--to` path arguments, no additional page ID needed.\n\n## Workflow\n\n### Phase 1: Source Analysis\n\nAnalyze the source path and create a migration analysis document in `{target}/domain/src/lib/docs/MIGRATION-ANALYSIS.md`:\n\n1. **File Structure Analysis**\n   - List all files in the source directory\n   - Categorize by type: components, services, models, templates, styles\n\n2. **Component Analysis**\n   - Identify all components and their relationships\n   - Note parent/child relationships\n   - Identify dialog components\n   - Identify table/form components\n\n3. **Form Validation Analysis**\n   - List all form controls and their validators\n   - Identify `Validators.*` usage that needs `OneValidators.*` replacement\n   - Document custom validators\n\n4. **API Calls Analysis**\n   - List all HTTP calls (endpoints, methods, request/response types)\n   - Identify API services being used\n   - Document data flow\n\n5. **Dependencies Analysis**\n   - Third-party libraries used\n   - Angular Material components used\n   - Shared services/utils used\n\n6. **UI Interactions (for E2E testing)**\n   - Button clicks and their actions\n   - Form submissions\n   - Dialog open/close triggers\n   - Table operations (select, edit, delete, add)\n   - Navigation actions\n\n7. **Translation Keys Analysis (CRITICAL)**\n   - **DO NOT create new translation keys**\n   - **DO NOT modify existing translation keys**\n   - List all translation keys used in source HTML templates\n   - Copy exact keys for use in migrated components\n   - Document all translation keys by category:\n     - Page titles\n     - Tab labels\n     - Dialog titles and descriptions\n     - Form field labels\n     - Button labels\n     - Tooltip texts\n     - Table column headers\n     - Error messages and hints\n\n8. **Form Layout Analysis (CRITICAL)**\n   - **DO NOT change form field row groupings**\n   - Analyze `fxLayout=\"row\"` patterns in source templates\n   - Document which fields appear on same row\n   - Use `.form-row` class in migrated components to preserve layout\n\n### Phase 2: DDD Structure Migration\n\nReference documents from `one-ui-migration` skill's `rules/` directory:\n\n**Reference Docs** (`rules/reference/`):\n- `ddd-architecture.md` - DDD layers, helper files\n- `api-types.md` - API types, def files\n- `checklist.md` - Full compliance checklist\n- `pitfalls/` - Common migration mistakes\n\n**Tool Docs** (`rules/tools/`):\n- `forms/validators.md` - OneValidators usage, pattern constants\n- `forms/error-handling.md` - Template errors, custom errors\n- `ui/page-layout.md` - Page layout, breadcrumb\n- `ui/forms.md` - Form layout, validation\n- `ui/buttons.md` - Button types, loading states\n- `ui/components.md` - File upload, form patterns\n- `ui/dialogs.md` - Dialog config, viewContainerRef\n- `tables/basics.md` - CommonTableComponent\n- `tables/columns.md` - Column API, custom templates\n- `tables/advanced.md` - Paginator config\n\n**Guides** (`rules/guides/`):\n- `create-page.md` - Page creation guide\n- `create-dialog.md` - Dialog creation guide\n- `create-table.md` - Table creation guide\n\nGenerate libraries using the Nx plugin:\n\n```bash\n# Generate all library types at once\nnx g @one-ui/one-plugin:library mxsecurity {page-name} all\n\n# Or generate individually if needed\nnx g @one-ui/one-plugin:library mxsecurity {page-name} domain\nnx g @one-ui/one-plugin:library mxsecurity {page-name} features\nnx g @one-ui/one-plugin:library mxsecurity {page-name} ui\nnx g @one-ui/one-plugin:library mxsecurity {page-name} shell\n```\n\n### Chunked Migration Strategy (Reducing Omission Risk)\n\n**Principle: Process from large sections to small units, completing each before proceeding**\n\n1. **Segment by `mat-tab`** - First identify the number of tabs on the page, then process each tab independently\n2. **Segment by `mat-card` / section** - Within each tab, identify all cards/sections\n3. **Migrate and verify incrementally** - Execute `/migration-lint` immediately after completing each segment\n\n**Example Checklist:**\n```markdown\n### Tab 1: General Settings\n- [x] Card 1.1: Basic Info\n- [ ] Card 1.2: Network Config\n\n### Tab 2: Security\n- [ ] Card 2.1: Authentication\n```\n\n### Phase 3: Layer-by-Layer Migration\n\n1. **Domain Layer** (`domain/`) - see `rules/reference/ddd-architecture.md`\n   - API response types → use existing types from `@one-ui/mxsecurity/shared/domain` (e.g., `SRV_USER_ACCOUNT`)\n   - If API type missing → create in `libs/mxsecurity/shared/domain/src/lib/models/api/`\n   - Page-specific models (view models, form models) → `*.model.ts`\n   - Migrate API service → `*.api.ts`\n   - Create SignalStore → `*.store.ts`\n   - Migrate constants → `*.def.ts`\n   - Extract pure functions → `*.helper.ts` (data transformations, serialization)\n   - Keep `MIGRATION-ANALYSIS.md` in `domain/src/lib/docs/` folder\n\n2. **UI Layer** (`ui/`) - see `rules/tools/tables/basics.md`\n   - Migrate tables → use `CommonTableComponent` pattern\n   - Migrate forms → use `input()`, `output()` pattern\n   - Table toolbar → use `mat-stroked-button` with `general.button.create`/`delete`\n   - Keep components dumb (no store injection, no HTTP)\n\n3. **Features Layer** (`features/`) - see `rules/tools/ui/forms.md`, `buttons.md` and `dialogs.md`\n   - Migrate page component → smart component pattern\n   - Migrate dialogs → use `smallDialogConfig`, `mediumDialogConfig`, `largeDialogConfig`\n   - Form tooltips → use `mxLabelTooltip` instead of `mat-icon` with `matTooltip`\n   - Inject store, pass data to UI via inputs\n\n4. **Shell Layer** (`shell/`)\n   - Create routes with resolver pattern\n   - Provide store and services\n\n5. **App Routes Registration** (see `rules/tools/ui/page-layout.md`)\n   - Add route to `apps/mxsecurity/mxsecurity/src/app/app.routes.ts`\n   - Register in `appRoutes` children array with breadcrumb resolver:\n\n   ```typescript\n   import { createBreadcrumbResolver, ROUTES_ALIASES } from '@one-ui/mxsecurity/shared/domain';\n\n   {\n     path: ROUTES_ALIASES['{pageAlias}'].route,\n     loadChildren: () =>\n       import('@one-ui/mxsecurity/{page-name}/shell').then((m) => m.createRoutes()),\n     resolve: {\n       breadcrumb: createBreadcrumbResolver(ROUTES_ALIASES['{pageAlias}'].id)\n     }\n   }\n   ```\n\n### Phase 4: Syntax Modernization\n\nApply Angular 20 syntax updates (see `rules/reference/angular-20-syntax.md`):\n\n- `*ngIf` → `@if`\n- `*ngFor` → `@for (item of items; track item.id)`\n- `constructor(private service: Service)` → `inject()`\n- `@Input()` → `input()`\n- `@Output()` → `output()`\n- `BehaviorSubject` → `signal()`\n\n**Form Validation** (see `rules/tools/forms/validators.md`):\n\n- `Validators.required` → `OneValidators.required` (no parentheses)\n- `Validators.email` → `OneValidators.email` (no parentheses)\n- `Validators.minLength(n)` → `OneValidators.minLength(n)`\n- Import from `@one-ui/mxsecurity/shared/domain`\n\n**UI Patterns**:\n\n- Buttons (see `buttons.md`):\n  - `mat-raised-button` → `mat-flat-button`\n  - Form tooltips: Use `mxLabelTooltip` instead of `mat-icon` with `matTooltip`\n  - Loading states: Use `MxLoadingButtonDirective` with `[mxButtonIsLoading]=\"loading()\"`\n\n- Page Layout (see `ui/page-layout.md`):\n  - `mat-card` → `<div class=\"content-wrapper\">`\n\n- Dialogs (see `dialogs.md`):\n  - Dialog sizing: Use `smallDialogConfig`, `mediumDialogConfig`, `largeDialogConfig`\n  - Dialog API calls: Call API inside dialog, close only on success via `next` callback\n  - Dialog viewContainerRef: Set `viewContainerRef: this.#viewContainerRef` when dialog uses store\n\n- Tables (see `basics.md`):\n  - Table toolbar buttons: Use `mat-stroked-button` with `general.button.create`/`general.button.delete`\n\n**Helper Files** (see `rules/reference/ddd-architecture.md`):\n\n- Extract pure functions to `*.helper.ts` files in domain layer\n- Keep store files focused on state management\n\n**Translation Keys** (see `rules/reference/pitfalls/translation-layout.md`):\n\n- **MUST use exact same translation keys as source**\n- Read source HTML templates to find correct keys\n- DO NOT create new keys or modify existing ones\n- Example: `{{ 'general.common.name' | translate }}` → `{{ t('general.common.name') }}`\n\n**Number-Only Input Directive** (see `rules/reference/pitfalls/forms-services.md`):\n\n- **MUST replace `appNumberOnly` with `oneUiNumberOnly`**\n- Search source for `appNumberOnly` usage: `grep -r \"appNumberOnly\" {source_path}`\n- Import `NumberOnlyDirective` from `@one-ui/mxsecurity/shared/domain`\n- Location: `libs/mxsecurity/shared/domain/src/lib/directives/number-only.directive.ts`\n\n### Phase 5: Verification\n\n```bash\n# Type check\nnpx tsc --noEmit --project libs/mxsecurity/{page-name}/domain/tsconfig.lib.json\n\n# Lint\nnx lint mxsecurity-{page-name}-domain\nnx lint mxsecurity-{page-name}-features\nnx lint mxsecurity-{page-name}-ui\nnx lint mxsecurity-{page-name}-shell\n\n# Build\nnx build mxsecurity-web\n```\n\n## Output Format\n\nAfter completing migration analysis (Phase 1), save the analysis to:\n`{target}/domain/src/lib/docs/MIGRATION-ANALYSIS.md`\n\nThe document should contain:\n\n- File structure overview\n- Component hierarchy\n- Form validations to migrate\n- API endpoints to migrate\n- UI interaction steps (for E2E testing)\n- Migration checklist with checkboxes\n\n## Reference Examples\n\n- MAF Account Settings: `libs/maf/act-account/`\n- Switch L3 Interface: `libs/switch/l3-interface/`\n- MXsecurity Login: `libs/mxsecurity/login-page/`\n",
        "plugins/one-ui-migration/skills/migration-lint/SKILL.md": "---\nname: migration-lint\ndescription: Comprehensive Angular migration compliance checker with auto-fix capabilities. Use when reviewing migrated code for DDD architecture, Angular 20 syntax, and UI pattern compliance.\n---\n\n# Migration Lint Command\n\nReview and fix migrated Angular code for compliance. This command reads ALL migration guidelines and performs a comprehensive checklist review.\n\n## Arguments\n\n- `$ARGUMENTS` - Target path to review (e.g., `libs/mxsecurity/connection-management-page`)\n\n## Workflow\n\n### Step 1: Load ALL Migration Guidelines\n\n**IMPORTANT:** Read the core SKILL.md first, then reference documents as needed from ``.\n\n**Core:** `one-ui-migration skill`\n\n| # | Topic | File | Category |\n|---|-------|------|----------|\n| 1 | Migration Context | rules/reference/migration-context.md | Foundation |\n| 2 | Angular 20 Syntax | rules/reference/angular-20-syntax.md | Foundation |\n| 3 | DDD Architecture | rules/reference/ddd-architecture.md | Architecture |\n| 4 | State Management | rules/reference/state-management.md | Architecture |\n| 5 | Authentication | rules/tools/auth.md | Architecture |\n| 6 | Migration Checklist | rules/reference/migration-checklist.md | Foundation |\n| 7 | Pitfalls Index | rules/reference/pitfalls/index.md | Pitfalls |\n| 7a | Pitfalls: Translation & Layout | rules/reference/pitfalls/translation-layout.md | Pitfalls |\n| 7b | Pitfalls: DDD Violations | rules/reference/pitfalls/ddd-violations.md | Pitfalls |\n| 7c | Pitfalls: Angular Syntax | rules/reference/pitfalls/angular-syntax.md | Pitfalls |\n| 7d | Pitfalls: Forms & Services | rules/reference/pitfalls/forms-services.md | Pitfalls |\n| 8 | Validators | rules/tools/forms/validators.md | Forms |\n| 9 | Error Handling | rules/tools/forms/error-handling.md | Forms |\n| 10 | Form Patterns | rules/tools/forms/patterns.md | Forms |\n| 11 | Page Layout | rules/tools/ui/page-layout.md | UI Patterns |\n| 12a | Forms | rules/tools/ui/forms.md | UI Patterns |\n| 12b | Buttons | rules/tools/ui/buttons.md | UI Patterns |\n| 12c | Components | rules/tools/ui/components.md | UI Patterns |\n| 13 | Dialogs | rules/tools/ui/dialogs.md | UI Patterns |\n| 14 | Table Basics | rules/tools/tables/basics.md | Tables |\n| 15 | Table Columns | rules/tools/tables/columns.md | Tables |\n| 16 | Table Advanced | rules/tools/tables/advanced.md | Tables |\n| 17 | API Type Definitions | rules/reference/api-types.md | API |\n| 18 | Shared Stores | rules/reference/shared-stores.md | State |\n\n### Step 2: Read Target Files\n\nRead all `.ts`, `.html`, and `.scss` files in the target path:\n- `{target}/domain/src/lib/**/*.ts`\n- `{target}/features/src/lib/**/*.ts`\n- `{target}/features/src/lib/**/*.html`\n- `{target}/features/src/lib/**/*.scss`\n- `{target}/ui/src/lib/**/*.ts`\n- `{target}/ui/src/lib/**/*.html`\n- `{target}/ui/src/lib/**/*.scss`\n- `{target}/shell/src/lib/**/*.ts`\n\n### Step 3: Comprehensive Checklist Review\n\n**Check EVERY item from EVERY migration file:**\n\n---\n\n## Checklist by Category\n\n### Category 1: Foundation & Pitfalls\n\n#### migration-context.md\n- [ ] Project follows one-ui monorepo structure\n- [ ] Uses correct scope tags (`scope:mxsecurity`)\n- [ ] Library types match DDD pattern (`domain`, `features`, `ui`, `shell`)\n\n#### angular-syntax.md\n- [ ] Uses `@if` instead of `*ngIf`\n- [ ] Uses `@for (item of items; track item.id)` instead of `*ngFor`\n- [ ] Uses `@switch` instead of `ngSwitch`\n- [ ] Uses `inject()` instead of constructor injection\n- [ ] Uses `input()` instead of `@Input()`\n- [ ] Uses `output()` instead of `@Output()`\n- [ ] Uses `viewChild()` / `viewChildren()` instead of `@ViewChild()` / `@ViewChildren()`\n- [ ] Uses `contentChild()` / `contentChildren()` instead of `@ContentChild()` / `@ContentChildren()`\n- [ ] Uses `model()` for two-way binding where appropriate\n- [ ] Components are standalone (default in Angular 20)\n- [ ] Uses `ChangeDetectionStrategy.OnPush`\n\n#### migration-checklist.md\n- [ ] Domain layer contains only business logic, models, services, state\n- [ ] Features layer contains smart components with store injection\n- [ ] UI layer contains presentational components with input/output ONLY (NO store injection)\n- [ ] Shell layer contains routing configuration\n- [ ] Barrel exports (`index.ts`) are properly configured\n\n#### pitfalls/translation-layout.md\n- [ ] Translation keys match source exactly (no new keys created)\n- [ ] Form layout matches source (row groupings preserved)\n- [ ] No padding in page component styles\n- [ ] Page uses `gl-page-content` class (not ng-container)\n- [ ] Table toolbar button order: Refresh → Create/Delete (only if old code has refresh)\n\n#### pitfalls/ddd-violations.md\n- [ ] No form templates in features layer (extract to UI)\n- [ ] No store injection in UI components\n- [ ] Dialogs are in features layer (not UI)\n- [ ] No business logic in features (move to domain)\n- [ ] No HTTP calls in UI components\n\n#### pitfalls/angular-syntax.md\n- [ ] No mixing old/new control flow (`*ngIf` with `@for`)\n- [ ] All `@for` loops have `track`\n- [ ] No NgModule patterns (use standalone)\n- [ ] `langChanged()` called at field level (not in computed)\n- [ ] Uses `inject()` instead of constructor injection\n\n#### pitfalls/forms-services.md\n- [ ] `mutationMethod`/`queryMethod` imported from `@one-ui/mxsecurity/shared/domain` (NOT `shared/util`)\n- [ ] No unnecessary `.def.ts` files for constants\n- [ ] Uses `MxSnackbarService` (not `MatSnackBar`)\n- [ ] Uses `controls.xxx` (not `.get('xxx')`)\n- [ ] Form valueChanges uses `toSignal()` in effects\n- [ ] Uses `EMPTY_DASH` constant (not `utils.emptyDash`)\n- [ ] Uses `oneUiNumberOnly` (not `appNumberOnly`)\n- [ ] Uses `mx-password-input` for password fields\n- [ ] Uses `mx-key-value` for readonly displays\n- [ ] No `TRANSLOCO_SCOPE` provider (use global translation keys)\n- [ ] No endpoint constants (`#ENDPOINTS = {}`) - inline URLs directly in API methods\n\n---\n\n### Category 2: Architecture\n\n#### ddd-architecture.md\n- [ ] Domain layer has correct structure\n- [ ] Features layer has correct structure\n- [ ] UI layer has correct structure\n- [ ] Shell layer has correct structure\n- [ ] Dependencies flow correctly (UI → Domain, Features → UI/Domain)\n- [ ] No UI components importing from features\n- [ ] Shared domain utilities used where appropriate\n\n#### state-management.md\n- [ ] Uses NgRx SignalStore for state management\n- [ ] Store follows correct naming convention (`XxxStore`)\n- [ ] Uses `withEntities()` for entity management\n- [ ] Uses `withRequestStatus()` for loading states\n- [ ] Uses `withDataService()` for API integration\n- [ ] Effects handle success/error properly\n- [ ] Uses `patchState()` correctly\n- [ ] Store is provided in correct scope\n\n#### authentication.md\n- [ ] Uses `AuthStore` for authentication state\n- [ ] Permission checks use correct patterns\n- [ ] Protected routes have guards\n- [ ] API calls include proper authentication headers\n\n---\n\n### Category 3: Forms (forms/)\n\n#### validators.md\n- [ ] Uses `OneValidators.required` (not `Validators.required`)\n- [ ] Uses `OneValidators.email` (not `Validators.email`)\n- [ ] Uses `OneValidators.minLength(n)` (not `Validators.minLength`)\n- [ ] Uses `OneValidators.maxLength(n)` (not `Validators.maxLength`)\n- [ ] Uses `OneValidators.min(n)` (not `Validators.min`)\n- [ ] Uses `OneValidators.max(n)` (not `Validators.max`)\n- [ ] Uses `OneValidators.pattern(x)` (not `Validators.pattern`)\n- [ ] Custom validators follow correct patterns\n- [ ] Cross-field validators implemented correctly\n- [ ] Import from `@one-ui/mxsecurity/shared/domain`\n\n#### error-handling.md\n- [ ] Form errors displayed using `<mat-error>`\n- [ ] Error messages use translation keys\n- [ ] Async validators handle errors\n- [ ] API errors displayed to user\n- [ ] Uses `MxSnackbarService` for notifications\n\n#### patterns.md\n- [ ] Uses `NonNullableFormBuilder` (not `FormBuilder`)\n- [ ] Form controls accessed via `controls.xxx` (not `.get('xxx')`)\n- [ ] `getRawValue()` used for form submission\n- [ ] Dynamic forms use `FormArray` correctly\n- [ ] Form reset/patch follows patterns\n- [ ] Forms in UI layer use `input()`/`output()` for data flow\n\n---\n\n### Category 4: UI Patterns (ui/)\n\n#### ui/page-layout.md\n- [ ] Root wrapper has `class=\"gl-page-content\"`\n- [ ] Uses `<one-ui-breadcrumb />` at top\n- [ ] Uses `<mx-page-title [title]=\"t('...')\">` for page title\n- [ ] Content wrapped in `class=\"content-wrapper\"` (NOT `mat-card`)\n- [ ] Uses `*transloco=\"let t\"` pattern\n- [ ] Section titles use `class=\"gl-title-md\"`\n\n#### buttons.md\n- [ ] Submit button uses `mat-flat-button color=\"primary\"`\n- [ ] Cancel button uses `mat-button`\n- [ ] Toolbar buttons use `mat-stroked-button`\n- [ ] NO `mat-raised-button` (use `mat-flat-button`)\n- [ ] Loading state uses `[mxButtonIsLoading]` directive\n- [ ] Disabled state properly handles `noPermission()`\n\n#### forms.md\n- [ ] Single form field NOT wrapped in `<div class=\"form-row\">`\n- [ ] Multiple fields on same row use `<div class=\"form-row\">`\n\n#### dialogs.md\n- [ ] Uses shared dialog config (`smallDialogConfig`, `mediumDialogConfig`, `largeDialogConfig`)\n- [ ] Has `viewContainerRef: this.#viewContainerRef` when dialog uses store\n- [ ] `ConfirmDialogComponent` result checked as boolean (NOT `result?.confirm`)\n- [ ] Dialog data typed properly\n- [ ] Dialog returns correct type\n- [ ] `afterClosed()` subscription cleaned up properly\n\n---\n\n### Category 5: Tables (tables/)\n\n#### basics.md\n- [ ] Uses `<mx-table>` component\n- [ ] Column definitions use `MxColumnDef[]`\n- [ ] Has `data-testid` attributes\n- [ ] Loading state shows skeleton\n- [ ] Empty state handled properly\n\n#### columns.md\n- [ ] Column types match data\n- [ ] Custom templates import `MatTableModule` and `MatSortModule`\n- [ ] Link columns use proper navigation\n- [ ] Status columns use proper styling\n- [ ] Action columns positioned correctly\n\n#### advanced.md\n- [ ] Selection implemented correctly (if applicable)\n- [ ] Sorting configured properly\n- [ ] Pagination implemented (if applicable)\n- [ ] Filtering works correctly (if applicable)\n- [ ] Toolbar buttons use `mat-stroked-button`\n\n---\n\n### Category 6: API & Services\n\n#### api-types.md\n- [ ] API types defined in domain layer\n- [ ] Request/Response types properly typed\n- [ ] Uses proper HTTP methods\n- [ ] Error responses typed\n- [ ] Enums defined for constants\n- [ ] NO endpoint constants (`#ENDPOINTS = {...}`) - inline URL strings directly in methods\n\n#### shared-stores.md\n- [ ] Uses shared stores where appropriate (e.g., `TimeZoneStore`)\n- [ ] Shared store initialization handled\n- [ ] Cross-feature state accessed via shared stores\n- [ ] No duplicate state management\n\n---\n\n### Category 7: Additional Checks\n\n#### Translation (Transloco)\n- [ ] Uses `*transloco=\"let t\"` or `@let t = translocoT`\n- [ ] NO `translate` pipe\n- [ ] Translation keys follow naming convention\n- [ ] Parameters passed correctly to `t()`\n\n#### Directives\n- [ ] `oneUiNumberOnly` (not `appNumberOnly`)\n- [ ] Custom directives use `one-ui` prefix\n\n#### Services\n- [ ] `MxSnackbarService` (not `MatSnackBar`)\n- [ ] Snackbar: `snackBar.open(msg)` (not `snackBar.open(msg, '', { duration: 3000 })`)\n\n#### Constants\n- [ ] `EMPTY_DASH` from `@one-ui/mxsecurity/shared/domain` (not `utils.emptyDash`)\n\n#### Imports\n- [ ] No circular imports\n- [ ] Imports from correct library paths\n- [ ] No relative imports crossing library boundaries\n\n#### Password Fields\n- [ ] Uses `<mx-password-input>` for password fields\n\n#### Readonly Display\n- [ ] Uses `<mx-key-value>` for readonly key-value displays\n\n---\n\n### Step 4: Fix Issues\n\n**Auto-fix the following issues:**\n\n| Issue | Fix |\n|-------|-----|\n| `mat-raised-button` | → `mat-flat-button` |\n| `*ngIf` | → `@if` |\n| `*ngFor` | → `@for (item of items; track item.id)` |\n| `Validators.required` | → `OneValidators.required` |\n| `Validators.email` | → `OneValidators.email` |\n| `Validators.minLength(n)` | → `OneValidators.minLength(n)` |\n| `Validators.maxLength(n)` | → `OneValidators.maxLength(n)` |\n| `.get('xxx')` | → `controls.xxx` |\n| `class=\"section-title\"` | → `class=\"gl-title-md\"` |\n| `appNumberOnly` | → `oneUiNumberOnly` |\n| `this.utils.emptyDash` | → `EMPTY_DASH` |\n| `readonly #ENDPOINTS = {` | → Remove constant, inline URLs directly in each method |\n| `from '@one-ui/mxsecurity/shared/util'` (for mutationMethod/queryMethod) | → `from '@one-ui/mxsecurity/shared/domain'` |\n\n### Step 5: Generate Report\n\nOutput a compliance report:\n\n```markdown\n## Migration Lint Report\n\n**Path:** {target_path}\n**Date:** {current_date}\n\n### Checklist Summary\n\n| Category | Files Checked | Pass | Fail | N/A |\n|----------|---------------|------|------|-----|\n| Foundation (01, 02, 06) | 3 | Pass | Fail | - |\n| Architecture (03, 04, 05) | 3 | Pass | Fail | - |\n| Pitfalls (08, 08a, 08b, 08c, 08d) | 5 | Pass | Fail | - |\n| Forms (09a, 09b, 09c) | 3 | Pass | Fail | - |\n| UI Patterns (10a, 10b, 10c) | 3 | Pass | Fail | - |\n| Tables (11a, 11b, 11c) | 3 | Pass | Fail | - |\n| API & Services (12, 13) | 2 | Pass | Fail | - |\n| **Total** | **22** | **X** | **Y** | **Z** |\n\n### Issues Fixed\n\n| File | Line | Issue | Fix Applied |\n|------|------|-------|-------------|\n| component.html | 15 | mat-raised-button | Changed to mat-flat-button |\n\n### Issues Found (Manual Review Needed)\n\n| File | Line | Issue | Recommendation | Guide Ref |\n|------|------|-------|----------------|-----------|\n| component.ts | 42 | Missing viewContainerRef | Add viewContainerRef to dialog config | dialogs.md |\n| store.ts | 20 | Store in UI layer | Move to features layer | ddd-architecture.md |\n\n### Detailed Checklist Results\n\n#### migration-context.md (Pass)\n- [x] Project follows one-ui monorepo structure\n- [x] Uses correct scope tags\n\n#### angular-syntax.md (Warning)\n- [x] Uses @if instead of *ngIf\n- [ ] Uses inject() instead of constructor injection (line 45)\n\n... (continue for all files)\n\n### Summary\n\n- **Migration Files Checked:** 22/22\n- **Auto-fixed:** X issues\n- **Manual review needed:** Y issues\n- **Passed checks:** Z items\n- **Failed checks:** W items\n```\n\n## Quick Reference\n\n### Button Types\n\n```html\n<!-- Form submit button -->\n<button mat-flat-button color=\"primary\" type=\"submit\">Apply</button>\n\n<!-- Table toolbar button -->\n<button mat-stroked-button>Create</button>\n\n<!-- Cancel/secondary button -->\n<button mat-button type=\"button\">Cancel</button>\n```\n\n### Page Layout\n\n```html\n<div *transloco=\"let t\" class=\"gl-page-content\">\n  <one-ui-breadcrumb />\n  <mx-page-title [title]=\"t('page.title')\" />\n\n  <div class=\"content-wrapper\">\n    <!-- content here, NO mat-card -->\n  </div>\n</div>\n```\n\n### Form Row\n\n```html\n<!-- Single field - NO form-row wrapper -->\n<mat-form-field>\n  <mat-label>{{ t('label') }}</mat-label>\n  <input matInput formControlName=\"field\" />\n</mat-form-field>\n\n<!-- Multiple fields on same row - USE form-row wrapper -->\n<div class=\"form-row\">\n  <mat-form-field>...</mat-form-field>\n  <mat-form-field>...</mat-form-field>\n</div>\n```\n\n### Dialog Config\n\n```typescript\nimport { mediumDialogConfig } from '@one-ui/mxsecurity/shared/domain';\n\nthis.#dialog.open(MyDialog, {\n  ...mediumDialogConfig,\n  data: dialogData,\n  viewContainerRef: this.#viewContainerRef  // Required if dialog uses store\n});\n```\n\n### Validators\n\n```typescript\nimport { OneValidators } from '@one-ui/mxsecurity/shared/domain';\n\nthis.#fb.group({\n  name: ['', [OneValidators.required, OneValidators.maxLength(32)]],\n  email: ['', [OneValidators.required, OneValidators.email]],\n  port: ['', [OneValidators.required, OneValidators.min(1), OneValidators.max(65535)]]\n});\n```\n\n### ConfirmDialogComponent\n\n```typescript\n// ConfirmDialogComponent returns boolean, NOT { confirm: boolean }\nconst dialogRef = this.#dialog.open<ConfirmDialogComponent, ConfirmDialogData, boolean>(\n  ConfirmDialogComponent,\n  {\n    ...mediumDialogConfig,\n    viewContainerRef: this.#viewContainerRef,\n    data: { title: '...', desc: '...' }\n  }\n);\n\ndialogRef.afterClosed().subscribe((result) => {\n  if (result) {  // result is boolean\n    this.doSomething();\n  }\n});\n```\n\n### Snackbar Service\n\n```typescript\n// Use MxSnackbarService instead of MatSnackBar\nimport { MxSnackbarService } from '@moxa/formoxa/mx-snackbar';\n\nreadonly #snackBar = inject(MxSnackbarService);\n\n// Simple usage\nthis.#snackBar.open('Success message');\n\n// Persistent message (no auto-dismiss)\nthis.#snackBar.open('Saving...', { duration: 0 });\n```\n\n### Section Title\n\n```html\n<!-- Use gl-title-md class (global style) -->\n<h3 class=\"gl-title-md\">{{ t('section.title') }}</h3>\n\n<!-- NOT section-title (requires custom SCSS) -->\n<h3 class=\"section-title\">{{ t('section.title') }}</h3>\n```\n\n### Form Controls Access\n\n```typescript\n// .get() - no type safety\nconst value = this.form.get('username')?.value;\n\n// controls.xxx - type safe\nconst value = this.form.controls.username.value;\n\n// In ValidatorFn - use type assertion\n#myValidator(): ValidatorFn {\n  return (formGroup: AbstractControl): null => {\n    const controls = (formGroup as typeof this.form).controls;\n    const fieldValue = controls.fieldName.value;\n    return null;\n  };\n}\n```\n\n### Password Input\n\n```html\n<!-- Use mx-password-input for password fields -->\n<mx-password-input\n  formControlName=\"password\"\n  [maxlength]=\"32\"\n></mx-password-input>\n```\n\n### Key-Value Display\n\n```html\n<!-- Use mx-key-value for readonly displays -->\n<mx-key-value [key]=\"t('label')\" [value]=\"displayValue\"></mx-key-value>\n```\n\n### UI Component Pattern\n\n```typescript\n// UI components use input()/output() ONLY - NO store injection\nexport class MyUiComponent {\n  readonly data = input<MyData>();\n  readonly isLoading = input<boolean>(false);\n\n  readonly save = output<MyData>();\n  readonly cancel = output<void>();\n}\n```\n\n### Features Component Pattern\n\n```typescript\n// Features components can inject stores\nexport class MyFeatureComponent {\n  readonly #store = inject(MyStore);\n\n  readonly data = this.#store.data;\n  readonly isLoading = this.#store.isLoading;\n}\n```\n",
        "plugins/one-ui-migration/skills/migration-patterns/SKILL.md": "---\nname: migration-patterns\ndescription: Query Angular migration patterns and examples. Use when looking up patterns (table, form, dialog, layout, button, store) or asking questions about migration guidelines.\n---\n\nQuery Angular migration patterns and examples. This skill loads the migration documentation and helps with pattern lookup and answering migration questions.\n\n## Arguments\n\n- `$ARGUMENTS` - Query keyword or question:\n  - `table` - Table migration patterns (CommonTableComponent)\n  - `form` - Form patterns (validators, NonNullableFormBuilder)\n  - `dialog` - Dialog patterns (config, loading, viewContainerRef)\n  - `layout` - Page layout (gl-page-content, content-wrapper)\n  - `button` - Button patterns (mat-flat-button, loading states)\n  - `ddd` - DDD architecture (domain/features/ui/shell)\n  - `api` - API type definitions\n  - `store` - SignalStore patterns\n  - `syntax` - Angular 20 syntax (@if, @for, inject, signal)\n  - `validator` - OneValidators usage\n  - `error` - Error handling patterns\n  - `pitfall` - Common pitfalls to avoid\n  - Or ask any question about migration\n\n**Note:** For code review/linting, use `/migration-lint` instead.\n\n## Workflow\n\n### Step 1: Load Relevant Documentation\n\nBased on the query, read the appropriate documentation files from `rules/`:\n\n| Query | Files to Read |\n|-------|---------------|\n| `table` | tables/basics.md, tables/columns.md, tables/advanced.md |\n| `form` | forms/validators.md, forms/patterns.md, ui/forms.md |\n| `dialog` | ui/dialogs.md |\n| `layout` | ui/page-layout.md |\n| `button` | ui/buttons.md |\n| `ddd` | ddd-architecture.md |\n| `api` | api-types.md |\n| `store` | state-management.md |\n| `syntax` | angular-syntax.md |\n| `validator` | forms/validators.md |\n| `error` | forms/error-handling.md |\n| `pitfall` | pitfalls/index.md |\n\n### Step 2: Process Query\n\n**For keyword queries (table, form, etc.):**\n- Summarize the key patterns and rules\n- Provide code examples\n- List common mistakes to avoid\n\n**For questions:**\n- Search through all migration docs\n- Provide specific answers with code examples\n- Reference the source document\n\n## Quick Reference\n\n### Table Components (UI Layer)\n\n```typescript\n// Required imports for custom column templates\nimport { MatSortModule } from '@angular/material/sort';\nimport { MatTableModule } from '@angular/material/table';\n\n@Component({\n  imports: [\n    CommonTableComponent,\n    MatSortModule,   // Required for mat-sort-header\n    MatTableModule,  // Required for matColumnDef, *matCellDef\n  ]\n})\n```\n\n### Form Validation\n\n```typescript\nimport { OneValidators } from '@one-ui/mxsecurity/shared/domain';\n\n// Correct\nthis.#fb.group({\n  name: ['', [OneValidators.required, OneValidators.maxLength(32)]],\n  ip: ['', [OneValidators.required, ipv4Validator]]\n});\n```\n\n### Form Field Tooltip (mxLabelTooltip)\n\n**DO NOT use `mat-icon` with `matTooltip`**. Use `mxLabelTooltip` directive on `mat-label` instead.\n\n```html\n<!-- WRONG - Don't use mat-icon with info tooltip -->\n<div class=\"form-row\">\n  <mat-form-field>\n    <mat-label>{{ t('field.label') }}</mat-label>\n    <mat-select formControlName=\"field\">...</mat-select>\n  </mat-form-field>\n  <mat-icon class=\"info-icon\" [matTooltip]=\"t('field.hint')\">info</mat-icon>\n</div>\n\n<!-- CORRECT - Use mxLabelTooltip -->\n<mat-form-field>\n  <mat-label mxLabel [mxLabelTooltip]=\"t('field.hint')\">\n    {{ t('field.label') }}\n  </mat-label>\n  <mat-select formControlName=\"field\">...</mat-select>\n</mat-form-field>\n```\n\n**Required import:**\n\n```typescript\nimport { MxLabelDirective } from '@moxa/formoxa/mx-label';\n\n@Component({\n  imports: [MxLabelDirective]\n})\n```\n\n### Button Types\n\n```html\n<!-- Form submit button -->\n<button mat-flat-button color=\"primary\" type=\"submit\">Apply</button>\n\n<!-- Table toolbar button -->\n<button mat-stroked-button>Create</button>\n```\n\n### Page Layout\n\n```html\n<div *transloco=\"let t\" class=\"gl-page-content\">\n  <one-ui-breadcrumb />\n  <mx-page-title [title]=\"t('page.title')\" />\n\n  <div class=\"content-wrapper\">\n    <!-- content here -->\n  </div>\n</div>\n```\n\n### Card Container (IMPORTANT)\n\n**DO NOT use `<mat-card>`**. Always use `class=\"content-wrapper\"` instead.\n\n```html\n<!-- WRONG - Don't use mat-card -->\n<mat-card>\n  <mat-card-header>...</mat-card-header>\n  <mat-card-content>...</mat-card-content>\n</mat-card>\n\n<!-- CORRECT - Use content-wrapper -->\n<div class=\"content-wrapper\">\n  <!-- content here -->\n</div>\n\n<!-- If you need mat-card structure, add content-wrapper class -->\n<mat-card class=\"content-wrapper\">\n  <mat-card-header>...</mat-card-header>\n  <mat-card-content>...</mat-card-content>\n</mat-card>\n```\n\nThe `content-wrapper` class provides:\n- Consistent padding (16px)\n- Border radius (8px)\n- Surface background color\n- Gap between child elements (8px)\n\n### Dialog Config\n\n```typescript\nimport { mediumDialogConfig } from '@one-ui/mxsecurity/shared/domain';\n\nthis.#dialog.open(MyDialog, {\n  ...mediumDialogConfig,\n  data: dialogData,\n  viewContainerRef: this.#viewContainerRef  // Required if dialog uses store\n});\n```\n\n## Output Format\n\n### For keyword queries:\nProvide a concise summary with:\n1. Key rules (do's and don'ts)\n2. Code examples\n3. Common mistakes\n\n### For questions:\nProvide the answer with:\n1. Direct answer\n2. Code example\n3. Source reference (which doc file)\n",
        "plugins/one-ui-migration/skills/migration-planning/SKILL.md": "---\nname: migration-planning\ndescription: Planning One-UI migrations with superpowers workflow integration. Ensures tool references are included in brainstorming and plan writing.\nlicense: MIT\ncompatibility: Requires superpowers plugin and one-ui-migration skill\nallowed-tools: Read, Bash, Edit, Write, Glob, Grep\n---\n\n# Migration Planning Skill\n\n> **Purpose**: Integrate superpowers workflow with one-ui-migration tool references to ensure compliant migration plans.\n\n## When to Use\n\n- Before starting a migration with `superpowers:brainstorming`\n- When writing migration plans with `superpowers:writing-plans`\n- When you need to plan a feature migration\n\n---\n\n## Tool Reference Requirements\n\n### Component-to-Tool Mapping\n\n| If Legacy has... | You MUST reference... |\n|------------------|----------------------|\n| Forms | `rules/tools/form-builder.md` + `rules/tools/one-validators.md` |\n| Tables | `rules/tools/common-table.md` + `rules/tools/transloco.md` |\n| Dialogs | `rules/tools/ui/dialogs.md` + `rules/tools/form-builder.md` |\n| State management | `rules/tools/signal-store.md` + `rules/tools/loading-states.md` |\n| Status display | `rules/tools/mx-components.md` |\n| Page layout | `rules/tools/ui/page-layout.md` + `rules/tools/transloco.md` |\n| Authentication | `rules/tools/auth.md` |\n| Translation | `rules/tools/transloco.md` |\n| Route configuration | `rules/tools/routing.md` |\n\n---\n\n## Superpowers Integration\n\n### During `superpowers:brainstorming`\n\nBefore proposing any design, identify which tools are needed:\n\n```markdown\n## Tool Analysis\n\nLegacy component uses:\n- [ ] Forms → Reference `form-builder.md`, `one-validators.md`\n- [ ] Tables → Reference `common-table.md`\n- [ ] Dialogs → Reference `ui/dialogs.md`\n- [ ] State → Reference `signal-store.md`, `loading-states.md`\n- [ ] MX Components → Reference `mx-components.md`\n- [ ] Routes → Reference `routing.md`\n\n**Required tools for this migration:**\n1. `rules/tools/signal-store.md` - Store pattern\n2. `rules/tools/form-builder.md` - Form creation\n3. ...\n```\n\n### During `superpowers:writing-plans`\n\nEvery task MUST include a Tool References section:\n\n```markdown\n### Task N: Create {component}\n\n**Layer**: domain | features | ui | shell\n**Files**: libs/mxsecurity/{feature}/{layer}/src/lib/...\n\n**Tool References**:\n- [ ] `rules/tools/signal-store.md` - queryMethod/mutationMethod\n- [ ] `rules/tools/one-validators.md` - OneValidators\n\n**Implementation**:\n[code here]\n\n**Verification Checklist** (from tool files):\n- [ ] No `Validators` import (use `OneValidators`)\n- [ ] No `BehaviorSubject` (use `signal()`)\n- [ ] No `FormBuilder` (use `NonNullableFormBuilder`)\n```\n\n---\n\n## Tool Checklists\n\n### signal-store.md Checklist\n\n- [ ] Use `queryMethod` for GET requests (not `rxMethod`)\n- [ ] Use `mutationMethod` for POST/PUT/DELETE\n- [ ] State interface extends `LoadingState`\n- [ ] No `BehaviorSubject` or `Subject<>`\n- [ ] Use `loading()` signal for loading state\n\n### form-builder.md Checklist\n\n- [ ] Use `NonNullableFormBuilder` (not `FormBuilder`)\n- [ ] Initialize with default values\n- [ ] Use `getRawValue()` to submit\n\n### one-validators.md Checklist\n\n- [ ] Import `OneValidators` from `@one-ui/shared/domain`\n- [ ] No `Validators` from `@angular/forms`\n- [ ] Use `OneValidators.required`, `OneValidators.range`, etc.\n\n### common-table.md Checklist\n\n- [ ] Import `CommonTableComponent`, `SELECT_COLUMN_KEY`, `EDIT_COLUMN_KEY`\n- [ ] Custom columns (`noAutoGenerate: true`) have `filter` function\n- [ ] Import `MatSortModule` when using `mat-sort-header`\n- [ ] Text cells use `gl-ellipsis-text` + `mxAutoTooltip`\n- [ ] Toolbar order: Refresh -> Create -> Delete\n\n### ui/dialogs.md Checklist\n\n- [ ] Pass `viewContainerRef` when opening dialog\n- [ ] Cancel button uses `mat-dialog-close` (not `(click)=\"cancel()\"`)\n- [ ] `.close()` only in `next:` callback (not after mutation call)\n- [ ] Submit button: `[disabled]=\"form.invalid || loading()\"`\n\n### mx-components.md Checklist\n\n- [ ] `mxButtonIsLoading` requires `loading()` in `[disabled]`\n- [ ] Form errors use `oneUiFormError` directive\n- [ ] `mat-tab-group` has `mxTabGroup` and `animationDuration=\"0ms\"`\n- [ ] Status display uses `mx-status` component\n\n### ui/page-layout.md Checklist\n\n- [ ] Use `gl-page-content` (not `mat-card`)\n- [ ] Content inside `<div class=\"content-wrapper\">`\n- [ ] No padding on page component\n\n### transloco.md Checklist\n\n- [ ] Use `*transloco=\"let t\"` (not `| translate`)\n- [ ] Do NOT create new translation keys\n- [ ] Verify keys exist in Legacy `en.json`\n\n### auth.md Checklist\n\n- [ ] Use `sessionStorage` (not `localStorage`)\n- [ ] Token key is `mx_token`\n\n### loading-states.md Checklist\n\n- [ ] State interface extends `LoadingState`\n- [ ] Use `loadingInitialState()` for initial state\n- [ ] Use `loading()` signal in templates\n- [ ] Loading button: `[mxButtonIsLoading]=\"loading()\" [disabled]=\"loading()\"`\n\n### routing.md Checklist\n\n- [ ] Use `ROUTES_ALIASES` for route paths\n- [ ] Use `createBreadcrumbResolver` for breadcrumb resolution\n- [ ] Routes use `loadChildren` with dynamic import\n- [ ] Shell module exports `createRoutes()` function\n\n---\n\n## Task Template\n\nUse this template for each task in the plan:\n\n```markdown\n### Task {N}: {Description}\n\n**Layer**: {domain | features | ui | shell}\n**Files**:\n- `libs/mxsecurity/{feature}/{layer}/src/lib/{file}.ts`\n\n**Tool References**:\n- `rules/tools/{tool1}.md`\n- `rules/tools/{tool2}.md`\n\n**Implementation**:\n```typescript\n// code\n```\n\n**Verification**:\n- [ ] {checklist item from tool file}\n- [ ] {checklist item from tool file}\n```\n\n---\n\n## Migration Planning Workflow\n\n```\n1. Analyze Legacy\n   └── Identify components, forms, tables, dialogs, state\n   └── Map to required tools\n\n2. superpowers:brainstorming\n   └── Include Tool Analysis section\n   └── List all required tool references\n\n3. superpowers:writing-plans\n   └── Each task has Tool References\n   └── Each task has Verification Checklist\n\n4. Execute Plan\n   └── Read tool files before implementing\n   └── Follow checklist for each task\n\n5. Validate\n   └── Run one-ui-migration-checker\n   └── All 29 rules pass\n```\n\n---\n\n## Example: User Management Migration\n\n### Tool Analysis\n\nLegacy `user-management` uses:\n- Table with selection, edit, delete\n- Create/Edit dialog with form\n- Enable/disable status\n- Store for state management\n\n**Required tools**:\n1. `signal-store.md` - Store pattern\n2. `loading-states.md` - Loading state management\n3. `common-table.md` - Table component\n4. `ui/dialogs.md` - Dialog pattern\n5. `form-builder.md` - Form in dialog\n6. `one-validators.md` - Form validation\n7. `mx-components.md` - MxStatus, mxButtonIsLoading\n8. `transloco.md` - Translations\n9. `routing.md` - Route configuration\n\n### Task Example\n\n```markdown\n### Task 1: Create UserStore\n\n**Layer**: domain\n**Files**: `libs/mxsecurity/user/domain/src/lib/user.store.ts`\n\n**Tool References**:\n- `rules/tools/signal-store.md`\n\n**Implementation**:\n```typescript\nexport const UserStore = signalStore(\n  withState(initialState),\n  withMethods((store, api = inject(UserApiService)) => ({\n    loadUsers: queryMethod<void, User[]>({\n      store,\n      observe: () => api.getAll$(),\n      next: (users) => patchState(store, { users })\n    }),\n    deleteUser: mutationMethod<string, void>({\n      store,\n      observe: (id) => api.delete$(id),\n      next: () => store.loadUsers()\n    })\n  }))\n);\n```\n\n**Verification**:\n- [ ] Uses `queryMethod` for GET (not `rxMethod`)\n- [ ] Uses `mutationMethod` for DELETE\n- [ ] State extends `LoadingState`\n- [ ] No `BehaviorSubject`\n```\n\n---\n\n## Related Skills\n\n- `one-ui-migration` - Main migration skill\n- `superpowers:brainstorming` - Design phase\n- `superpowers:writing-plans` - Planning phase\n\n## Validation\n\nAfter plan execution, run:\n```\ncheck migration for libs/mxsecurity/{feature}\n```\n",
        "plugins/one-ui-migration/skills/migration-review/SKILL.md": "---\nname: migration-review\ndescription: Review migration completeness between old and new codebase.\n---\n\n# Migration Review Command\n\nReview migration completeness between source (old codebase) and target (new codebase).\n\n## Arguments\n\n- `$ARGUMENTS` - Format: `--from <source_path> --to <target_path>`\n  - `--from`: Source path in old project (e.g., `/Users/jayden/f2e-networking-jayden/apps/mxsecurity-web/src/app/pages/account`)\n  - `--to`: Target path in new project (e.g., `libs/mxsecurity/account-page`)\n\n## Review Process\n\n### Step 0: Switch to Feature Worktree\n\nBefore starting the review, switch to the feature's worktree to ensure you're working in the correct context:\n\n```bash\ncd /Users/jayden/one-ui-mxsecurity\n```\n\nThis ensures the `--to` target path is accessible and you're reviewing the latest code in the feature branch.\n\n### Step 1: Read All Files\n\nRead all `.ts` and `.html` files from both `--from` and `--to` directories.\n\n### Step 2: Extract and Compare Form Controls\n\n**Reference:** `form-extraction skill`\n\nUse the form-extraction skill to extract form controls from both source and target:\n\n```bash\n# From HTML\ngrep -oE 'formControlName=\"[^\"]+\"' {path}/**/*.html | sort -u\ngrep -oE 'formGroupName=\"[^\"]+\"' {path}/**/*.html | sort -u\n\n# From TypeScript\ngrep -E '(this\\.fb\\.group|this\\.#fb\\.group|new FormGroup|new UntypedFormGroup)' {path}/**/*.ts\n```\n\n**Compare:** List all form controls from source that are missing in target.\n\n### Step 3: Extract and Compare Form Validators\n\n**Reference:** `form-extraction skill`\n\nUse the form-extraction skill to extract validators:\n\n```bash\n# Source (old) - Angular Validators\ngrep -oE 'Validators\\.(required|email|minLength|maxLength|min|max|pattern)(\\([^)]*\\))?' {from}/**/*.ts | sort -u\n\n# Target (new) - OneValidators\ngrep -oE 'OneValidators\\.[a-zA-Z]+(\\([^)]*\\))?' {to}/**/*.ts | sort -u\n\n# Custom validators\ngrep -oE '#?[a-zA-Z]+Validator\\b' {path}/**/*.ts | sort -u\n```\n\n**Compare:** For each form control, verify all validators from source exist in target.\n\n**Validator Mapping:**\n\n| Old (Validators) | New (OneValidators) |\n| ---------------- | ------------------- |\n| `Validators.required` | `OneValidators.required` |\n| `Validators.email` | `OneValidators.email` |\n| `Validators.minLength(n)` | `OneValidators.minLength(n)` |\n| `Validators.maxLength(n)` | `OneValidators.maxLength(n)` |\n| `Validators.min(n)` + `Validators.max(m)` | `OneValidators.range(n, m)` |\n| `Validators.pattern(x)` | `OneValidators.pattern(x)` |\n\n**For detailed patterns, see:** `rules/tools/forms/patterns.md`\n\n### Step 4: Extract and Compare HTML Keys\n\n**From HTML files, extract and compare:**\n\n1. **CSS Classes** (functional classes only, skip styling classes)\n   - Classes used in `*ngIf` conditions\n   - Classes used in JavaScript/TypeScript logic\n\n2. **Angular Directives**\n   - `*ngIf` / `@if` conditions\n   - `*ngFor` / `@for` iterations\n   - `[ngClass]` bindings\n   - `[ngStyle]` bindings\n\n3. **Material Components**\n   - All `<mat-xxx>` components used\n\n4. **Event Bindings**\n   - All `(click)`, `(submit)`, `(change)` etc.\n\n5. **Property Bindings**\n   - All `[disabled]`, `[hidden]`, `[value]` etc.\n\n6. **Translation Keys**\n   - Source (old): `{{ 'xxx' | translate }}` or `[translate]=\"'xxx'\"`\n   - Target (new): `{{ t('xxx') }}` with `*transloco=\"let t\"`\n\n### Step 5: UI Guidelines Review\n\n**Check target files for UI guideline compliance:**\n\n1. **Button Types (CRITICAL - Auto-fix)**\n   - `mat-raised-button` → `mat-flat-button`\n   - Search and replace all occurrences in target\n\n2. **Page Layout Structure (CRITICAL - Tables won't display without this!)**\n   - Root wrapper **MUST** have `class=\"gl-page-content\"` - without this, tables and content may not display!\n   - Content must be wrapped in `class=\"content-wrapper\"`\n   - `<one-ui-breadcrumb />` should come first\n   - `<mx-page-title>` should use `[title]` input binding (not content projection)\n   - Use `<div *transloco=\"let t\" class=\"gl-page-content\">` NOT `<ng-container>`\n\n3. **Dialog Configuration**\n   - Should use shared dialog config (`smallDialogConfig`, `mediumDialogConfig`, etc.)\n   - Should NOT have custom `min-width` in SCSS\n   - Should NOT use `panelClass` for sizing\n\n4. **Table Toolbar**\n   - Action buttons should use `#rightToolbarTemplate`\n   - Icons should use `svgIcon=\"icon:xxx\"` format\n   - Should include `data-testid` attributes\n\n5. **Translation**\n   - Should use `transloco` (not `translate` pipe)\n   - Should use `*transloco=\"let t\"` pattern\n\n6. **Form Error Display** (Reference: `form-extraction skill`)\n   - `required`, `minLength`, `maxLength`, `range`, `rangeLength`, `email` → **MUST** use `<mat-error oneUiFormError=\"field\">`\n   - **All other validators** (`pattern`, `duplicate`, custom, etc.) → **MUST** use `@if/@else` with custom message\n\n7. **Special Input Fields**\n   - Password fields → Must use `<mx-password-input>` (not manual toggle)\n   - Number-only fields → Must use `oneUiNumberOnly` directive (not `appNumberOnly`)\n\n8. **Tab Groups**\n   - Must use `mxTabGroup` directive: `<mat-tab-group mxTabGroup animationDuration=\"0ms\">`\n\n**Auto-fix:** If `mat-raised-button` is found, automatically replace with `mat-flat-button`.\n\n### Step 6: Generate Report\n\nOutput a markdown report with the following sections:\n\n```markdown\n# Migration Review Report\n\n**Source:** {from_path}\n**Target:** {to_path}\n**Date:** {current_date}\n\n## Summary\n\n| Category            | Source | Target | Missing | Completeness |\n| ------------------- | ------ | ------ | ------- | ------------ |\n| Form Controls       | X      | Y      | Z       | XX%          |\n| Form Validators     | X      | Y      | Z       | XX%          |\n| Material Components | X      | Y      | Z       | XX%          |\n| Event Bindings      | X      | Y      | Z       | XX%          |\n| Translation Keys    | X      | Y      | Z       | XX%          |\n| UI Guidelines       | -      | X      | Y       | XX%          |\n\n**Overall Completeness: XX%**\n\n## UI Guidelines Compliance\n\n| Rule                  | Status     | Notes                    |\n| --------------------- | ---------- | ------------------------ |\n| mat-flat-button       | OK/FIXED   | Auto-fixed X occurrences |\n| Page Layout Structure | OK/MISSING | Details...               |\n| Dialog Config         | OK/MISSING | Details...               |\n| Table Toolbar         | OK/MISSING | Details...               |\n| Translation Pattern   | OK/MISSING | Details...               |\n| Form Error Display    | OK/MISSING | Non-basic validators use @if/@else? |\n| Password Fields       | OK/MISSING | Using mx-password-input? |\n| Number Input          | OK/MISSING | Using oneUiNumberOnly? |\n| Tab Groups            | OK/MISSING | Using mxTabGroup? |\n\n## Critical Missing Items\n\n### Form Controls (CRITICAL)\n\n- [ ] `controlName` - not found in target\n\n### Form Validators (CRITICAL)\n\n- [ ] `controlName: Validators.required` - not found in target\n\n## Warnings\n\n- Source uses `*ngIf` but target should use `@if`\n- Source uses `*ngFor` but target should use `@for`\n\n## Detailed Comparison\n\n### Form Controls\n\n| Control Name | In Source | In Target | Status  |\n| ------------ | --------- | --------- | ------- |\n| username     | Yes       | Yes       | OK      |\n| password     | Yes       | No        | MISSING |\n\n### Form Validators\n\n| Control  | Validator | In Source | In Target | Status  |\n| -------- | --------- | --------- | --------- | ------- |\n| username | required  | Yes       | Yes       | OK      |\n| username | maxLength | Yes       | No        | MISSING |\n\n### Material Components\n\n...\n```\n\n## Focus Areas\n\n1. **Form Validation Completeness** - This is CRITICAL\n   - Every validator in source must exist in target\n   - Pay attention to custom validators\n   - Check group-level validators (cross-field validation)\n   - **Error display**: Only `required`, `minLength`, `maxLength`, `range`, `rangeLength`, `email` use `oneUiFormError`; all others MUST use `@if/@else`\n\n2. **HTML Key Migration** - This is CRITICAL\n   - Every `formControlName` must exist\n   - Every event binding must be migrated\n\n3. **UI Guidelines Compliance** - This is CRITICAL (Auto-fix)\n   - `mat-raised-button` → `mat-flat-button` (auto-fix)\n   - Page layout structure (`gl-page-content`, `content-wrapper`)\n   - Dialog config (use shared configs)\n   - Table toolbar patterns\n\n4. **Syntax Modernization** (Warnings only)\n   - `*ngIf` → `@if`\n   - `*ngFor` → `@for`\n   - `Validators.*` → `OneValidators.*`\n   - `appNumberOnly` → `oneUiNumberOnly`\n   - Password manual toggle → `mx-password-input`\n\n## Step 7: Generate MIGRATION-ANALYSIS.md (REQUIRED)\n\n**IMPORTANT:** Always generate the migration analysis document after completing the review.\n\n**Location:** `{target}/domain/src/lib/docs/MIGRATION-ANALYSIS.md`\n\n**Required Sections:**\n1. Overview (source, target, date, status)\n2. Migration Summary table\n3. UI Guidelines Compliance table\n4. File Structure\n5. Detailed Comparison (form controls, validators, translation keys, API endpoints)\n6. DDD Architecture Compliance\n7. Syntax Modernization\n8. Issues Fixed During Migration\n9. Notes\n\n**Example:**\n```bash\nmkdir -p {target}/domain/src/lib/docs\n```\n\nThen create the file with full migration analysis content.\n",
        "plugins/one-ui-migration/skills/one-ui-migration/SKILL.md": "---\nname: one-ui-migration\ndescription: Migrating Angular 16 to 20 with DDD architecture and SignalStore patterns. Use when converting components, structuring features, or following One-UI migration standards.\nlicense: MIT\ncompatibility: Requires Angular 20+ project with @ngrx/signals, @one-ui/shared dependencies\nallowed-tools: Read, Bash, Edit, Write, Glob, Grep\n---\n\n# One-UI Migration Skill\n\n> **Core Principle**: MIGRATE, DON'T INNOVATE — 100% behavior parity with Legacy\n\n## Task Router\n\n### What tool do I need?\n\n| I need to... | Check this |\n|--------------|------------|\n| **Add form validation** | `rules/tools/one-validators.md` |\n| **Create a form** | `rules/tools/form-builder.md` |\n| **Use shared helpers** | `rules/tools/shared-helpers.md` |\n| **Manage state (Store)** | `rules/tools/signal-store.md` |\n| **Handle loading states** | `rules/tools/loading-states.md` |\n| **Create a table** | `rules/tools/common-table.md` |\n| **Simplify table columns** | `rules/tools/tables/auto-generate.md` |\n| **Create a dialog** | `rules/tools/ui/dialogs.md` |\n| **Use MX components** | `rules/tools/mx-components.md` |\n| **Page structure** | `rules/tools/ui/page-layout.md` |\n| **Configure routes** | `rules/tools/routing.md` |\n| **Translate text** | `rules/tools/transloco.md` |\n| **Handle authentication** | `rules/tools/auth.md` |\n\n### What do I need to build?\n\n| I need to... | Check this guide |\n|--------------|------------------|\n| **Create a complete page** | `rules/guides/create-page.md` |\n| **Create a dialog** | `rules/guides/create-dialog.md` |\n| **Create a table** | `rules/guides/create-table.md` |\n\n### Reference\n\n| I need to... | Check this |\n|--------------|------------|\n| **DDD layer rules** | `rules/reference/ddd-architecture.md` |\n| **Common migration mistakes** | `rules/reference/pitfalls.md` |\n| **Angular 20 syntax transforms** | `rules/reference/angular-20-syntax.md` |\n| **Pre-PR checklist** | `rules/reference/checklist.md` |\n\n---\n\n## Quick Reference\n\n### Essential Transforms\n\n| Angular 16 | Angular 20 |\n|------------|------------|\n| `*ngIf=\"x\"` | `@if (x) { }` |\n| `*ngFor=\"let i of items\"` | `@for (i of items; track i.id) { }` |\n| `constructor(private x)` | `inject()` |\n| `@Input()` | `input()` / `input.required()` |\n| `@Output()` | `output()` |\n| `BehaviorSubject` | `signal()` |\n| `get x()` | `computed()` |\n| `Validators` | `OneValidators` |\n\n### DDD 4-Layer Quick Decision\n\n```\nHTTP/Business logic?  → domain/\nInjects Store?        → features/\nPure I/O?             → ui/\nRoute definitions?    → shell/\n```\n\n### Critical Migration Rules (NEW)\n\n**Form Validation Error Display**:\n```\n✅ Basic validators (required, maxLength, range) → Use oneUiFormError directive\n❌ Pattern validators → MUST use @if/@else with custom messages\n❌ Custom validators → MUST use @if/@else with custom messages\n```\n\n**DDD Violations to Avoid** (see `rules/reference/pitfalls.md`):\n```\n❌ Violation 0: Page form template in features/ (MOST COMMON!)\n❌ Violation 1: UI component injecting Store\n❌ Violation 2: Dialog in ui/ layer\n❌ Violation 3: Business logic in features/\n❌ Violation 4: UI form making HTTP calls\n```\n\n### Forbidden Patterns\n\n```\n❌ Add features not in Legacy\n❌ \"Improve\" Legacy behavior\n❌ Create new API endpoints\n❌ Use `any` type\n❌ Use BehaviorSubject\n❌ Use constructor injection\n❌ Use mat-raised-button (use mat-flat-button)\n❌ Use text icons (use svgIcon=\"icon:xxx\")\n❌ Add padding to page components\n❌ Create new translation keys\n```\n\n---\n\n## Activation Triggers\n\n- \"migrate this component\"\n- \"convert to standalone\"\n- \"how should I structure this\"\n- \"where should this go\"\n- \"what's the pattern for\"\n- \"check migration rules\"\n\n---\n\n## Rules Directory Structure\n\n```\nrules/\n├── index.md\n├── tools/\n│   ├── one-validators.md\n│   ├── form-builder.md\n│   ├── signal-store.md\n│   ├── loading-states.md\n│   ├── common-table.md\n│   ├── mx-components.md\n│   ├── routing.md\n│   ├── transloco.md\n│   ├── auth.md\n│   ├── shared-helpers.md\n│   ├── forms/\n│   │   ├── validators.md\n│   │   ├── error-handling.md\n│   │   └── patterns.md\n│   ├── tables/\n│   │   ├── basics.md\n│   │   ├── columns.md\n│   │   ├── advanced.md\n│   │   └── auto-generate.md\n│   └── ui/\n│       ├── page-layout.md\n│       ├── forms.md\n│       ├── buttons.md\n│       ├── components.md\n│       └── dialogs.md\n├── guides/\n│   ├── create-page.md\n│   ├── create-dialog.md\n│   └── create-table.md\n└── reference/\n    ├── ddd-architecture.md\n    ├── angular-20-syntax.md\n    ├── api-types.md\n    ├── checklist.md\n    ├── migration-checklist.md\n    ├── migration-context.md\n    ├── migration-workflow.md\n    ├── shared-stores.md\n    ├── state-management.md\n    ├── pitfalls.md\n    └── pitfalls/\n        ├── index.md\n        ├── angular-syntax.md\n        ├── ddd-violations.md\n        ├── forms-services.md\n        └── translation-layout.md\n```\n\n---\n\n## Migration Planning\n\nFor complex migrations, use **migration-planning** skill:\n\n```\n/one-ui-migration:plan {feature-name}\n```\n\nThis integrates `superpowers:brainstorming` and `superpowers:writing-plans` with tool reference checklists.\n\nSee: `skills/migration-planning/SKILL.md`\n\n---\n\n## Post-Migration Validation\n\nUse **one-ui-migration-checker** agent:\n\n```\n\"check migration for libs/mxsecurity/{feature}\"\n```\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/guides/create-dialog.md": "# Guide: Creating a Dialog\n\n## Overview\n\nCreate a form dialog for creating or editing data.\n\n## Required Tools\n\n| Tool | Purpose |\n|------|---------|\n| [dialog](../tools/ui/dialogs.md) | Dialog basics |\n| [form-builder](../tools/form-builder.md) | Form creation |\n| [one-validators](../tools/one-validators.md) | Form validation |\n| [mx-components](../tools/mx-components.md) | mxLabel, mxButtonIsLoading |\n| [transloco](../tools/transloco.md) | Translation |\n\n---\n\n## Steps\n\n### 1. Define Dialog Data Type\n\n```typescript\n// feature.model.ts\nexport interface FeatureDialogData {\n  mode: 'create' | 'edit';\n  item?: Item;\n}\n```\n\n### 2. Create Dialog Component\n\n```typescript\n// feature-dialog.component.ts\n@Component({\n  selector: 'one-ui-feature-dialog',\n  imports: [\n    MatDialogModule, MatButtonModule, MatFormFieldModule, MatInputModule,\n    ReactiveFormsModule, TranslocoModule,\n    MxLoadingButtonDirective, MxLabelDirective, OneUiFormErrorDirective\n  ],\n  templateUrl: './feature-dialog.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FeatureDialogComponent {\n  readonly #dialogRef = inject(MatDialogRef<FeatureDialogComponent>);\n  readonly #store = inject(FeatureStore);\n  readonly #fb = inject(NonNullableFormBuilder);\n  readonly data = inject<FeatureDialogData>(MAT_DIALOG_DATA);\n\n  readonly loading = this.#store.loading;\n  readonly isEditMode = this.data.mode === 'edit';\n\n  form = this.#fb.group({\n    name: [this.data.item?.name ?? '', [OneValidators.required, OneValidators.maxLength(32)]],\n    description: [this.data.item?.description ?? '', [OneValidators.maxLength(255)]]\n  });\n\n  onSubmit() {\n    if (this.form.invalid) return;\n    const value = this.form.getRawValue();\n\n    if (this.isEditMode) {\n      this.#store.updateItem({\n        id: this.data.item!.id,\n        data: value,\n        next: () => this.#dialogRef.close({ success: true })\n      });\n    } else {\n      this.#store.createItem({\n        input: value,\n        next: () => this.#dialogRef.close({ success: true })\n      });\n    }\n  }\n}\n```\n\n### 3. Create Dialog Template\n\n```html\n<!-- feature-dialog.component.html -->\n<h2 *transloco=\"let t\" mat-dialog-title>\n  {{ isEditMode ? t('features.xxx.edit_title') : t('features.xxx.create_title') }}\n</h2>\n\n<mat-dialog-content *transloco=\"let t\">\n  <form [formGroup]=\"form\" class=\"dialog-form\">\n    <mat-form-field>\n      <mat-label mxLabel [mxLabelTooltip]=\"t('features.xxx.name_hint')\">\n        {{ t('general.common.name') }}\n      </mat-label>\n      <input matInput formControlName=\"name\" />\n      <mat-error oneUiFormError=\"name\"></mat-error>\n    </mat-form-field>\n\n    <mat-form-field>\n      <mat-label>{{ t('general.common.description') }}</mat-label>\n      <textarea matInput formControlName=\"description\" rows=\"3\"></textarea>\n      <mat-hint align=\"end\">{{ form.value.description?.length || 0 }} / 255</mat-hint>\n      <mat-error oneUiFormError=\"description\"></mat-error>\n    </mat-form-field>\n  </form>\n</mat-dialog-content>\n\n<div *transloco=\"let t\" mat-dialog-actions align=\"end\">\n  <button mat-button color=\"primary\" [disabled]=\"loading()\" mat-dialog-close>\n    {{ t('general.button.cancel') }}\n  </button>\n  <button mat-flat-button color=\"primary\"\n    [disabled]=\"form.invalid || loading()\"\n    [mxButtonIsLoading]=\"loading()\"\n    (click)=\"onSubmit()\">\n    {{ t('general.button.submit') }}\n  </button>\n</div>\n```\n\n### 4. Open Dialog from Page\n\n```typescript\n// feature-page.component.ts\nreadonly #dialog = inject(MatDialog);\nreadonly #viewContainerRef = inject(ViewContainerRef);\n\nopenCreateDialog() {\n  this.#dialog.open(FeatureDialogComponent, {\n    ...mediumDialogConfig,\n    viewContainerRef: this.#viewContainerRef,  // Required!\n    data: { mode: 'create' }\n  });\n}\n\nopenEditDialog(item: Item) {\n  this.#dialog.open(FeatureDialogComponent, {\n    ...mediumDialogConfig,\n    viewContainerRef: this.#viewContainerRef,  // Required!\n    data: { mode: 'edit', item }\n  });\n}\n```\n\n---\n\n## Checklist\n\n- [ ] Dialog is in Features Layer (not UI Layer)\n- [ ] Uses `NonNullableFormBuilder`\n- [ ] Uses `OneValidators` (not Angular `Validators`)\n- [ ] Uses `oneUiFormError` directive\n- [ ] Submit button has `loading()` in `[disabled]`\n- [ ] Only closes on API success (`next:` callback)\n- [ ] Opens with `viewContainerRef`\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/guides/create-page.md": "# Guide: Creating a New Page\n\n## Overview\n\nCreate a complete CRUD page with table, create/edit dialog.\n\n## Required Tools\n\n| Tool | Purpose |\n|------|---------|\n| [page-layout](../tools/ui/page-layout.md) | Page structure |\n| [common-table](../tools/common-table.md) | Data table |\n| [dialog](../tools/ui/dialogs.md) | Create/edit dialog |\n| [signal-store](../tools/signal-store.md) | State management |\n| [transloco](../tools/transloco.md) | Translation |\n\n---\n\n## Steps\n\n### 1. Create Store (Domain Layer)\n\n```typescript\n// domain/feature.store.ts\nexport const FeatureStore = signalStore(\n  withState({ ...loadingInitialState, items: [] }),\n  withMethods((store, api = inject(FeatureApiService)) => ({\n    loadItems: queryMethod<void, Item[]>({\n      store,\n      observe: () => api.getAll$(),\n      next: (items) => patchState(store, { items })\n    }),\n    createItem: mutationMethod<CreateInput, Item>({...}),\n    deleteItems: mutationMethod<string[], void>({...})\n  }))\n);\n```\n\n### 2. Create Table Component (UI Layer)\n\n```typescript\n// ui/feature-table.component.ts\n@Component({\n  selector: 'one-ui-feature-table',\n  imports: [CommonTableComponent, TranslocoModule, ...],\n  templateUrl: './feature-table.component.html'\n})\nexport class FeatureTableComponent {\n  tableData = input.required<Item[]>();\n  loading = input<boolean>(false);\n  add = output<void>();\n  edit = output<Item>();\n  delete = output<string[]>();\n}\n```\n\n### 3. Create Dialog Component (Features Layer)\n\n```typescript\n// features/feature-dialog/feature-dialog.component.ts\n@Component({\n  selector: 'one-ui-feature-dialog',\n  imports: [MatDialogModule, ReactiveFormsModule, ...],\n  templateUrl: './feature-dialog.component.html'\n})\nexport class FeatureDialogComponent {\n  readonly #store = inject(FeatureStore);\n  readonly #dialogRef = inject(MatDialogRef);\n  // ...\n}\n```\n\n### 4. Create Page Component (Features Layer)\n\n```typescript\n// features/feature-page.component.ts\n@Component({\n  selector: 'one-ui-feature-page',\n  imports: [TranslocoModule, BreadcrumbComponent, MxPageTitleComponent, FeatureTableComponent],\n  template: `\n    <div *transloco=\"let t\" class=\"gl-page-content\">\n      <one-ui-breadcrumb />\n      <mx-page-title [title]=\"t('features.xxx.page_title')\" />\n      <div class=\"content-wrapper\">\n        <one-ui-feature-table\n          [tableData]=\"items()\"\n          [loading]=\"loading()\"\n          (add)=\"openCreateDialog()\"\n          (edit)=\"openEditDialog($event)\"\n          (delete)=\"onDelete($event)\"\n          (refresh)=\"store.loadItems()\"\n        />\n      </div>\n    </div>\n  `,\n  styles: `:host { display: block; }`\n})\nexport class FeaturePageComponent {\n  readonly store = inject(FeatureStore);\n  readonly #dialog = inject(MatDialog);\n  readonly #viewContainerRef = inject(ViewContainerRef);\n  // ...\n}\n```\n\n### 5. Configure Routes (Shell Layer)\n\n```typescript\n// shell/feature.routes.ts\nexport const createRoutes = (): Route[] => [\n  {\n    path: '',\n    component: FeaturePageComponent,\n    providers: [FeatureStore, FeatureApiService],\n    resolve: { data: () => inject(FeatureStore).loadItems() }\n  }\n];\n```\n\n---\n\n## File Structure\n\n```\nlibs/mxsecurity/{feature}/\n├── domain/\n│   ├── feature.model.ts\n│   ├── feature.api.ts\n│   └── feature.store.ts\n├── features/\n│   ├── feature-page.component.ts\n│   └── feature-dialog/\n│       ├── feature-dialog.component.ts\n│       └── feature-dialog.component.html\n├── ui/\n│   └── feature-table/\n│       ├── feature-table.component.ts\n│       └── feature-table.component.html\n└── shell/\n    └── feature.routes.ts\n```\n\n---\n\n## Checklist\n\n- [ ] Store uses `queryMethod` / `mutationMethod`\n- [ ] Table uses `input()` / `output()`, does not inject Store\n- [ ] Dialog opened with `viewContainerRef`\n- [ ] Page uses `gl-page-content` + `content-wrapper`\n- [ ] Translation keys from Legacy\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/guides/create-table.md": "# Guide: Creating a Table\n\n## Overview\n\nCreate a data table with selection, editing, search, and sorting features.\n\n## Required Tools\n\n| Tool | Purpose |\n|------|---------|\n| [common-table](../tools/common-table.md) | Table component |\n| [transloco](../tools/transloco.md) | Column header translation |\n| [mx-components](../tools/mx-components.md) | MxStatus for status display |\n\n---\n\n## Steps\n\n### 1. Create Table Component (UI Layer)\n\n```typescript\n// ui/feature-table/feature-table.component.ts\n@Component({\n  selector: 'one-ui-feature-table',\n  imports: [\n    CommonTableComponent,\n    TranslocoModule,\n    MatButtonModule,\n    MatSortModule,\n    MatTableModule,\n    MxStatusComponent,\n    oneUiTableMaxSizeDirective\n  ],\n  templateUrl: './feature-table.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FeatureTableComponent {\n  readonly #transloco = inject(TranslocoService);\n\n  // Inputs - Do NOT inject Store!\n  tableData = input.required<Item[]>();\n  tableMaxSize = input.required<number>();\n  loading = input<boolean>(false);\n\n  // Outputs\n  add = output<void>();\n  edit = output<Item>();\n  delete = output<string[]>();\n  refresh = output<void>();\n\n  selection: Item[] = [];\n\n  readonly columns = computed(() => [\n    {\n      key: SELECT_COLUMN_KEY,\n      disable: (row) => row.isCurrentUser\n    },\n    { key: 'name', header: this.#transloco.translate('general.common.name') },\n    {\n      key: 'status',\n      header: this.#transloco.translate('general.common.status'),\n      noAutoGenerate: true,\n      filter: (data, filter) => {\n        const status = data.enabled\n          ? this.#transloco.translate('general.common.enable')\n          : this.#transloco.translate('general.common.disable');\n        return status.toLowerCase().includes(filter.toLowerCase());\n      }\n    },\n    { key: EDIT_COLUMN_KEY, stickyEnd: true }\n  ]);\n\n  onDelete() {\n    const ids = this.selection.map(item => item.id);\n    this.delete.emit(ids);\n  }\n}\n```\n\n### 2. Create Table Template\n\n```html\n<!-- feature-table.component.html -->\n<one-ui-common-table\n  *transloco=\"let t\"\n  headerSticky selectable editable\n  [data]=\"tableData()\" [columns]=\"columns()\" [loading]=\"loading()\"\n  (edit)=\"edit.emit($event)\" (select)=\"selection = $event\"\n>\n  <!-- Toolbar: Refresh → Create → Delete order -->\n  <ng-template #rightToolbarTemplate>\n    <button mat-button (click)=\"refresh.emit()\">\n      <mat-icon svgIcon=\"icon:refresh\"></mat-icon>\n      {{ t('general.tooltip.refresh') }}\n    </button>\n    @if (selection.length === 0) {\n      <button mat-stroked-button (click)=\"add.emit()\">{{ t('general.button.create') }}</button>\n    }\n    @if (selection.length >= 1) {\n      <button mat-stroked-button (click)=\"onDelete()\">{{ t('general.button.delete') }}</button>\n    }\n  </ng-template>\n\n  <!-- Custom columns -->\n  <ng-template #tableColumnsTemplate>\n    <ng-container matColumnDef=\"status\">\n      <th *matHeaderCellDef mat-header-cell mat-sort-header>\n        {{ t('general.common.status') }}\n      </th>\n      <td *matCellDef=\"let row\" mat-cell>\n        @if (row.enabled) {\n          <mx-status statusType=\"success\" statusIcon=\"icon:task_alt\" [statusText]=\"t('general.common.enable')\" />\n        } @else {\n          <mx-status statusType=\"neutral\" statusIcon=\"icon:hide_source\" [statusText]=\"t('general.common.disable')\" />\n        }\n      </td>\n    </ng-container>\n  </ng-template>\n\n  <!-- Footer -->\n  <ng-template #tableFooterTemplate>\n    <span oneUiTableMaxSize>{{ t('general.table_function.limit_count') }} {{ tableMaxSize() }}</span>\n  </ng-template>\n</one-ui-common-table>\n```\n\n### 3. Use in Page\n\n```typescript\n// features/feature-page.component.ts\n<one-ui-feature-table\n  [tableData]=\"items()\"\n  [tableMaxSize]=\"tableMaxSize()\"\n  [loading]=\"loading()\"\n  (add)=\"openCreateDialog()\"\n  (edit)=\"openEditDialog($event)\"\n  (delete)=\"onDelete($event)\"\n  (refresh)=\"store.loadItems()\"\n/>\n```\n\n---\n\n## Custom Column Notes\n\n1. Set `noAutoGenerate: true`\n2. Provide `filter` function (otherwise search won't work)\n3. Import `MatSortModule` (otherwise `mat-sort-header` won't work)\n\n---\n\n## Text Overflow Handling\n\n```html\n<td mat-cell *matCellDef=\"let row\">\n  <span class=\"gl-ellipsis-text\" mxAutoTooltip [matTooltip]=\"row.description\">\n    {{ row.description }}\n  </span>\n</td>\n```\n\n```scss\n.mat-column-description {\n  min-width: 300px;\n  max-width: 300px;\n}\n```\n\n---\n\n## Checklist\n\n- [ ] Table is in UI Layer (does not inject Store)\n- [ ] Uses `input()` / `output()`\n- [ ] Toolbar order: Refresh → Create → Delete\n- [ ] Custom columns have `filter` function\n- [ ] Import `MatSortModule`\n- [ ] Long text uses `gl-ellipsis-text` + `mxAutoTooltip`\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/index.md": "# One-UI Migration Rules\n\n> Angular 16 (f2e-networking) → Angular 20 (one-ui)\n\n## Core Principle\n\n```\nMIGRATE, DON'T INNOVATE\n```\n\n100% behavior parity with Legacy. No improvements, no optimizations, no new features.\n\n---\n\n## What do you need? → Check this\n\n### Tool Reference\n\n| I need to... | Check this tool |\n|--------------|-----------------|\n| Add form validation | [tools/one-validators.md](./tools/one-validators.md) ⭐ |\n| Create a form | [tools/form-builder.md](./tools/form-builder.md) ⭐ |\n| Use shared helpers | [tools/shared-helpers.md](./tools/shared-helpers.md) 🆕 |\n| Manage state | [tools/signal-store.md](./tools/signal-store.md) |\n| Handle loading states | [tools/loading-states.md](./tools/loading-states.md) |\n| Create a table | [tools/common-table.md](./tools/common-table.md) |\n| Create a dialog | [tools/ui/dialogs.md](./tools/ui/dialogs.md) |\n| Use MX components | [tools/mx-components.md](./tools/mx-components.md) |\n| Page structure | [tools/ui/page-layout.md](./tools/ui/page-layout.md) |\n| Configure routes | [tools/routing.md](./tools/routing.md) |\n| Translate text | [tools/transloco.md](./tools/transloco.md) |\n| Handle authentication | [tools/auth.md](./tools/auth.md) |\n\n⭐ = Enhanced with new patterns | 🆕 = New documentation\n\n### Integration Guides\n\n| I need to... | Check this guide |\n|--------------|------------------|\n| Create a complete page | [guides/create-page.md](./guides/create-page.md) |\n| Create a dialog | [guides/create-dialog.md](./guides/create-dialog.md) |\n| Create a table | [guides/create-table.md](./guides/create-table.md) |\n\n### Reference\n\n| I need to... | Check this |\n|--------------|------------|\n| DDD layer rules | [reference/ddd-architecture.md](./reference/ddd-architecture.md) ⭐ |\n| Common migration mistakes | [reference/pitfalls.md](./reference/pitfalls.md) 🆕 |\n| Angular 20 syntax transforms | [reference/angular-20-syntax.md](./reference/angular-20-syntax.md) |\n| Pre-PR checklist | [reference/checklist.md](./reference/checklist.md) ⭐ |\n\n⭐ = Enhanced with new patterns | 🆕 = New documentation\n\n---\n\n## Import Paths\n\n```typescript\n// Domain - API & State\nimport { MxRestService } from '@one-ui/mxsecurity/shared/domain';\nimport { queryMethod, mutationMethod, LoadingState, loadingInitialState } from '@one-ui/shared/domain';\n\n// Domain - Validators\nimport { OneValidators } from '@one-ui/shared/domain';\n\n// Features - Dialog\nimport { mediumDialogConfig, CONFIRM_DIALOG_CONFIG } from '@one-ui/shared/domain';\nimport { ConfirmDialogComponent } from '@one-ui/shared/ui';\n\n// UI - Table\nimport { CommonTableComponent, SELECT_COLUMN_KEY, EDIT_COLUMN_KEY } from '@one-ui/shared/ui';\n\n// UI - Form\nimport { OneUiFormErrorDirective } from '@one-ui/shared/ui/form';\nimport { MxLabelDirective } from '@moxa/formoxa/mx-label';\nimport { MxLoadingButtonDirective } from '@moxa/formoxa/mx-button';\nimport { MxStatusComponent } from '@moxa/formoxa/mx-status';\n\n// UI - Page Layout\nimport { BreadcrumbComponent } from '@one-ui/shared/ui';\nimport { MxPageTitleComponent } from '@moxa/formoxa/mx-page-title';\n\n// Routing - Breadcrumb\nimport { createBreadcrumbResolver, ROUTES_ALIASES } from '@one-ui/mxsecurity/shared/domain';\n```\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/angular-20-syntax.md": "# Angular 20 Syntax\n\n## Control Flow\n\n| Angular 16 | Angular 20 |\n|------------|------------|\n| `*ngIf=\"x\"` | `@if (x) { }` |\n| `*ngIf=\"x; else tpl\"` | `@if (x) { } @else { }` |\n| `*ngFor=\"let i of arr\"` | `@for (i of arr; track i.id) { }` |\n| `[ngSwitch]=\"x\"` | `@switch (x) { @case (v) { } }` |\n\n### Examples\n\n```html\n<!-- ❌ Angular 16 -->\n<div *ngIf=\"isLoading; else content\">Loading...</div>\n<ng-template #content>\n  <div *ngFor=\"let item of items\">{{ item.name }}</div>\n</ng-template>\n\n<!-- ✅ Angular 20 -->\n@if (isLoading()) {\n  <div>Loading...</div>\n} @else {\n  @for (item of items(); track item.id) {\n    <div>{{ item.name }}</div>\n  }\n}\n```\n\n## Dependency Injection\n\n| Angular 16 | Angular 20 |\n|------------|------------|\n| `constructor(private svc: X)` | `readonly #svc = inject(X);` |\n| `@Inject(TOKEN) val` | `#val = inject(TOKEN);` |\n\n### Example\n\n```typescript\n// ❌ Angular 16\nexport class MyComponent {\n  constructor(\n    private store: FeatureStore,\n    private dialog: MatDialog,\n    @Inject(MAT_DIALOG_DATA) public data: DialogData\n  ) {}\n}\n\n// ✅ Angular 20\nexport class MyComponent {\n  readonly #store = inject(FeatureStore);\n  readonly #dialog = inject(MatDialog);\n  readonly data = inject<DialogData>(MAT_DIALOG_DATA);\n}\n```\n\n## Component I/O\n\n| Angular 16 | Angular 20 |\n|------------|------------|\n| `@Input() x: T` | `x = input<T>();` |\n| `@Input() x!: T` | `x = input.required<T>();` |\n| `@Output() e = new EventEmitter<T>()` | `e = output<T>();` |\n\n### Example\n\n```typescript\n// ❌ Angular 16\nexport class TableComponent {\n  @Input() data: Item[] = [];\n  @Input() loading!: boolean;\n  @Output() edit = new EventEmitter<Item>();\n  @Output() delete = new EventEmitter<string[]>();\n}\n\n// ✅ Angular 20\nexport class TableComponent {\n  data = input<Item[]>([]);\n  loading = input.required<boolean>();\n  edit = output<Item>();\n  delete = output<string[]>();\n}\n```\n\n## Signals\n\n| Angular 16 | Angular 20 |\n|------------|------------|\n| `new BehaviorSubject<T>(v)` | `signal<T>(v)` |\n| `subject.value` | `sig()` |\n| `subject.next(v)` | `sig.set(v)` |\n| `combineLatest([a$, b$])` | `computed(() => [a(), b()])` |\n| `\\| async` | `()` (signal call) |\n\n### Example\n\n```typescript\n// ❌ Angular 16\nexport class MyComponent {\n  private isOpen$ = new BehaviorSubject<boolean>(false);\n\n  toggle() {\n    this.isOpen$.next(!this.isOpen$.value);\n  }\n}\n\n// Template\n<div *ngIf=\"isOpen$ | async\">Content</div>\n\n// ✅ Angular 20\nexport class MyComponent {\n  readonly isOpen = signal(false);\n\n  toggle() {\n    this.isOpen.set(!this.isOpen());\n  }\n}\n\n// Template\n@if (isOpen()) {\n  <div>Content</div>\n}\n```\n\n## Computed Values\n\n```typescript\n// ❌ Angular 16\nget filteredItems(): Item[] {\n  return this.items.filter(i => i.active);\n}\n\n// ✅ Angular 20\nreadonly filteredItems = computed(() =>\n  this.items().filter(i => i.active)\n);\n```\n\n## i18n (Translation)\n\n| Angular 16 | Angular 20 |\n|------------|------------|\n| `@ngx-translate` | `@jsverse/transloco` |\n| `{{ 'key' \\| translate }}` | `{{ t('key') }}` |\n| `translate.instant('key')` | `transloco.translate('key')` |\n\n### Template Example\n\n```html\n<!-- ❌ Angular 16 -->\n<div>{{ 'general.common.name' | translate }}</div>\n\n<!-- ✅ Angular 20 -->\n<div *transloco=\"let t\">\n  {{ t('general.common.name') }}\n</div>\n```\n\n## Buttons\n\n| Angular 16 | Angular 20 |\n|------------|------------|\n| `mat-raised-button` | `mat-flat-button` |\n\n## Standalone Components\n\nAll components must be standalone (no NgModule):\n\n```typescript\n@Component({\n  selector: 'one-ui-feature',\n  standalone: true,  // Default in Angular 20, can omit\n  imports: [CommonModule, MatButtonModule, TranslocoModule],\n  template: `...`,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class FeatureComponent {}\n```\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/api-types.md": "# API Type Definitions Guidelines\n\n## Overview\n\nAPI response types should be defined in the shared domain library, not in individual page domain libraries. This ensures consistency and reusability across the application.\n\n## GET API Endpoint → Type Location\n\n| Endpoint Pattern            | Type Location                                          | Example                               |\n| --------------------------- | ------------------------------------------------------ | ------------------------------------- |\n| `/status/xxx`               | `libs/mxsecurity/shared/domain/src/lib/models/api/status/` | `/status/gnssStatus`                  |\n| `/setting/data/xxx/SRV_XXX` | `libs/mxsecurity/shared/domain/src/lib/models/api/srv/`    | `/setting/data/gnss/SRV_GNSS_GENERAL` |\n| `/auth/xxx`                 | `libs/mxsecurity/shared/domain/src/lib/models/api/auth/`   | `/auth/login`                         |\n| `/data/xxx`                 | `libs/mxsecurity/shared/domain/src/lib/models/api/data/`   | `/data/menuTree`                      |\n\n## Directory Structure\n\n```text\nlibs/mxsecurity/shared/domain/src/lib/models/api/\n├── auth/          # /auth/* endpoints\n│   ├── auth-login.def.ts\n│   └── index.ts\n├── data/          # /data/* endpoints\n│   ├── menu-tree.def.ts\n│   └── index.ts\n├── srv/           # /setting/data/xxx/SRV_* endpoints\n│   ├── srv-user-account.def.ts\n│   ├── srv-pw-policy.def.ts\n│   ├── srv-gnss-general.def.ts\n│   └── index.ts\n├── status/        # /status/* endpoints\n│   ├── gnss-status.def.ts\n│   └── index.ts\n└── index.ts       # Re-exports all\n```\n\n## Rules\n\n### 1. API Response Types → Shared Domain\n\nAPI response types (types returned from REST calls) should be defined in:\n\n```text\nlibs/mxsecurity/shared/domain/src/lib/models/api/\n```\n\nExample:\n\n```typescript\n// ✅ Correct: Use shared API types\nimport { SRV_USER_ACCOUNT } from '@one-ui/mxsecurity/shared/domain';\n\nreturn this.#rest.get<SRV_USER_ACCOUNT>(this.#ENDPOINTS.USER_ACCOUNT);\n```\n\n```typescript\n// ❌ Incorrect: Defining API types in page domain\n// libs/mxsecurity/account-page/domain/src/lib/account-page.model.ts\nexport interface SrvUserAccount {\n  SRV_USER_ACCOUNT_Table: SrvUserAccountEntry[];\n}\n```\n\n### 2. Page-Specific Models → Page Domain\n\nPage-specific models (view models, form models, table data models) should be defined in the page's domain library:\n\n```text\nlibs/mxsecurity/{page-name}/domain/src/lib/{page-name}.model.ts\n```\n\nThese include:\n\n- Table data items (transformed for UI display)\n- Form models\n- Dialog data interfaces\n- Component-specific computed models\n\nExample:\n\n```typescript\n// libs/mxsecurity/account-page/domain/src/lib/account-page.model.ts\n\n// ✅ Correct: Page-specific view model\nexport interface AccountTableDataItem {\n  key: number;\n  username: string;\n  authority: string; // Translated display value\n  authorityRaw: AuthorityType; // Original API value\n  enable: string; // Translated display value\n  enableRaw: number; // Original API value\n  passwordExpire: string;\n  loginOn: boolean;\n  enableClass?: string;\n}\n\n// ✅ Correct: Dialog-specific data interface\nexport interface AccountSettingDialogData {\n  row?: AccountTableDataItem;\n  accountData?: AccountTableDataItem[];\n  passwordPolicy: PasswordPolicy;\n  adminNumber: number;\n}\n```\n\n### 3. Missing API Types → Create in Shared Domain\n\nIf the API type doesn't exist in the shared domain, create it:\n\n```bash\n# Create new API type file\ntouch libs/mxsecurity/shared/domain/src/lib/models/api/srv/srv-new-endpoint.def.ts\n```\n\nThen export it from the shared domain index:\n\n```typescript\n// libs/mxsecurity/shared/domain/src/index.ts\nexport * from './lib/models/api/srv/srv-new-endpoint.def';\n```\n\n### 4. Interface Naming Convention\n\nInterface names should reflect their **specific usage context**, not be generic placeholders.\n\n```typescript\n// ❌ Incorrect: Generic name used for specific operation\ndeleteAccount$(userName: string): Observable<AccountPageApiResponse> {\n  const payload: AccountSetPayload = { ... };  // Generic name\n  return this.#rest.post(...);\n}\n\n// ✅ Correct: Name reflects the specific operation\ndeleteAccount$(userName: string): Observable<AccountPageApiResponse> {\n  const payload: DeleteAccountPayload = { ... };  // Specific name\n  return this.#rest.post(...);\n}\n```\n\nEach API method should have a corresponding interface:\n\n| API Method        | Interface Name         |\n| ----------------- | ---------------------- |\n| `createAccount$`  | `CreateAccountInput`   |\n| `editAccount$`    | `EditAccountInput`     |\n| `changePassword$` | `ChangePasswordInput`  |\n| `deleteAccount$`  | `DeleteAccountPayload` |\n\n### 5. API Endpoints - Inline Strings, No Constants\n\n**DO NOT** define endpoint constants. Inline the endpoint strings directly in each method.\n\n```typescript\n// ❌ Incorrect: Defining endpoint constants\n@Injectable()\nexport class MyPageApiService {\n  readonly #ENDPOINTS = {\n    STATUS_CSR: '/status/csr',\n    AUTH_CSR_GEN: '/auth/csrGen'\n  } as const;\n\n  getCsrList$(): Observable<CsrApiEntry[]> {\n    return this.#restService.get<CsrApiEntry[]>(this.#ENDPOINTS.STATUS_CSR);\n  }\n\n  createCsr$(payload: CreateCsrPayload): Observable<void> {\n    return this.#restService.post<void>(this.#ENDPOINTS.AUTH_CSR_GEN, payload);\n  }\n}\n```\n\n```typescript\n// ✅ Correct: Inline endpoint strings directly\n@Injectable()\nexport class MyPageApiService {\n  readonly #restService = inject(RestService);\n\n  getCsrList$(): Observable<CsrApiEntry[]> {\n    return this.#restService.get<CsrApiEntry[]>('/status/csr');\n  }\n\n  createCsr$(payload: CreateCsrPayload): Observable<void> {\n    return this.#restService.post<void>('/auth/csrGen', payload);\n  }\n}\n```\n\n**Why inline?**\n\n- Endpoints are only used once per method\n- No benefit from abstraction\n- Easier to read and understand\n- Less code to maintain\n\n### 6. Update Response Types - Use SettingDataResponse\n\nThe legacy system often used `void` for POST/update responses. **The new system requires proper typing.**\n\nUse `SettingDataResponse<K, T>` for all update/POST operations:\n\n```typescript\n// libs/mxsecurity/shared/domain/src/lib/models/global/api.model.ts\nexport type SettingDataResponse<K extends string, T> = {\n  [P in K]: T;\n} & {\n  success: string;\n};\n```\n\n**API Service - Define Response Types:**\n\n```typescript\n// ❌ Incorrect: Using void (legacy pattern)\nupdateDot1xCfg$(cfg: Dot1xCfg): Observable<void> {\n  return this.#rest.post<void>('/setting/data/?SRV=SRV_DOT1X_CFG', cfg);\n}\n\n// ✅ Correct: Use SettingDataResponse with proper types\nupdateDot1xCfg$(cfg: Dot1xCfg) {\n  return this.#rest.post<UpdateDot1xCfgResponse>('/setting/data/?SRV=SRV_DOT1X_CFG', cfg);\n}\n```\n\n**Model File - Define Response Type Aliases:**\n\n```typescript\n// libs/mxsecurity/{page}/domain/src/lib/{page}.model.ts\n\nimport type {\n  SettingDataResponse,\n  SRV_DOT1X_CFG,\n  SRV_DOT1X_PORT,\n  SRV_DOT1X_USER_DB\n} from '@one-ui/mxsecurity/shared/domain';\n\n// Define response type aliases for each update operation\nexport type UpdateDot1xCfgResponse = SettingDataResponse<'SRV_DOT1X_CFG', SRV_DOT1X_CFG>;\nexport type UpdateDot1xPortResponse = SettingDataResponse<'SRV_DOT1X_PORT', SRV_DOT1X_PORT>;\nexport type UpdateDot1xUserDbResponse = SettingDataResponse<'SRV_DOT1X_USER_DB', SRV_DOT1X_USER_DB>;\nexport type ReauthPortResponse = SettingDataResponse<'result', string>;\n```\n\n**Store - Use Response Types in mutationMethod:**\n\n```typescript\n// ❌ Incorrect: Using void or unknown\nupdateGeneralSettings: mutationMethod<GeneralFormValue, void>({ ... })\nupdateGeneralSettings: mutationMethod<GeneralFormValue, unknown>({ ... })\n\n// ✅ Correct: Use the proper response type\nupdateGeneralSettings: mutationMethod<GeneralFormValue, UpdateDot1xCfgResponse>({\n  store,\n  observe: (formValue) => {\n    const cfg = store.dot1xCfg();\n    if (!cfg) throw new Error('Config not loaded');\n    const updatedCfg = buildGeneralCfgUpdate(cfg, formValue);\n    return api.updateDot1xCfg$(updatedCfg);\n  }\n})\n```\n\n**Using Response in Component (with skipSnackbar):**\n\nWhen you need to show a custom message from the API response:\n\n```typescript\n// Use skipSnackbar: true and handle the response manually\nthis.#store.reauthPort(() => ({\n  input: this.dialogData.row.portIndex,\n  skipSnackbar: true,\n  next: (response: ReauthPortResponse) => {\n    this.#snackBar.open(response.result); // Show API result message\n    this.#store.loadPageData();\n    this.#dialogRef.close({ success: true });\n  }\n}));\n```\n\n**Response Type Pattern Summary:**\n\n| API Response Key      | Response Type                             |\n| --------------------- | ----------------------------------------- |\n| Returns `SRV_*` data  | `SettingDataResponse<'SRV_XXX', SRV_XXX>` |\n| Returns result string | `SettingDataResponse<'result', string>`   |\n\n## Summary\n\n| Type Category      | Location                                        | Example                             |\n| ------------------ | ----------------------------------------------- | ----------------------------------- |\n| API Response Types | `libs/mxsecurity/shared/domain/src/lib/models/api/` | `SRV_USER_ACCOUNT`, `SRV_PW_POLICY` |\n| Page View Models   | `libs/mxsecurity/{page}/domain/src/lib/*.model.ts`  | `AccountTableDataItem`              |\n| Page Form Models   | `libs/mxsecurity/{page}/domain/src/lib/*.model.ts`  | `AccountSettingDialogData`          |\n| Page Constants     | `libs/mxsecurity/{page}/domain/src/lib/*.def.ts`    | `AuthorityType`, `AccountMode`      |\n\n---\n\n## Quick Reference\n\n### Type Location Decision Tree\n\n```\nIs it a GET response type?\n├── Yes → Define in shared domain (libs/mxsecurity/shared/domain/src/lib/models/api/)\n│         ├── /status/* → api/status/\n│         ├── /setting/data/*/SRV_* → api/srv/\n│         ├── /auth/* → api/auth/\n│         └── /data/* → api/data/\n│\n└── No (POST response) → Does it return SRV data?\n    ├── Yes → Use SettingDataResponse in feature model.ts\n    │         export type XxxResponse = SettingDataResponse<'SRV_XXX', SRV_XXX>;\n    │\n    └── No → Define custom response in feature model.ts\n              export interface CustomActionResponse { result: string; }\n```\n\n### Naming Conventions\n\n| Type            | Naming Pattern                     | Example                 |\n| --------------- | ---------------------------------- | ----------------------- |\n| SRV GET type    | `SRV_XXX_YYY` (uppercase)          | `SRV_GNSS_GENERAL`      |\n| Status GET type | `XxxStatusResponse`                | `GnssStatusResponse`    |\n| POST response   | `XxxResponse`                      | `GnssGeneralResponse`   |\n| View model      | `XxxTableDataItem`, `XxxFormValue` | `GnssTableDataItem`     |\n| Dialog data     | `XxxDialogData`                    | `GnssSettingDialogData` |\n| Composite type  | `XxxPageData`                      | `GnssPageData`          |\n\n### Import Paths\n\n```typescript\n// GET response types - from shared domain\nimport type { SRV_GNSS_GENERAL, GnssStatusResponse } from '@one-ui/mxsecurity/shared/domain';\n\n// SettingDataResponse helper - from shared domain\nimport type { SettingDataResponse } from '@one-ui/mxsecurity/shared/domain';\n\n// Feature-specific types - from feature domain\nimport type { GnssGeneralResponse, GnssTableDataItem } from './gnss-page.model';\n```\n\n### Feature model.ts Template\n\n```typescript\n// libs/mxsecurity/{page}/domain/src/lib/{page}.model.ts\n\nimport type { SettingDataResponse, SRV_XXX } from '@one-ui/mxsecurity/shared/domain';\n\n// ========== POST Response Types (using SettingDataResponse) ==========\nexport type XxxResponse = SettingDataResponse<'SRV_XXX', SRV_XXX>;\n\n// ========== View Models (for UI components) ==========\nexport interface XxxTableDataItem {\n  index: number;\n  name: string;\n  status: string;\n  statusRaw: number; // Original API value\n}\n\n// ========== Form Models ==========\nexport interface XxxFormValue {\n  enabled: boolean;\n  name: string;\n}\n\n// ========== Dialog Data ==========\nexport interface XxxDialogData {\n  mode: 'create' | 'edit';\n  initialData?: XxxTableDataItem;\n}\n\n// ========== Composite Types (for forkJoin) ==========\nexport interface XxxPageData {\n  config: SRV_XXX;\n  status: XxxStatusResponse;\n}\n```\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/checklist.md": "# Migration Checklist\n\n> Found an issue → See Wrong/Correct → Quick fix\n> Need more details → Click 📖 link\n\n---\n\n## Quick Verification Commands\n\n```bash\n# Check for forbidden patterns (all should return 0 results)\nrg -n 'BehaviorSubject|Subject<' --type ts --glob '!*.spec.ts' {path}\nrg -n 'constructor\\(private' --type ts --glob '!*.spec.ts' {path}\nrg -n ': any' --type ts --glob '!*.spec.ts' {path}\nrg -n '\\*ngIf|\\*ngFor|\\*ngSwitch' --type html {path}\nrg -n 'mat-raised-button' --type html {path}\nrg -n 'localStorage' --type ts --glob '!*.spec.ts' {path}\nrg -n '\\| async' --type html {path}\nrg -n '<mat-icon>[a-z_]+</mat-icon>' --type html {path}  # Text icons (should use svgIcon)\n\n# Check for new pattern violations\nrg -n 'from \"@angular/forms\".*Validators' --type ts {path}  # Should use OneValidators\nrg -n '\\.get\\([\"\\']' --type html {path}  # Should use .controls.xxx\nrg -n '<form.*formGroup.*mat-form-field' features/ --type html  # Forms in features layer\n\n# Lint & Test\nnx lint {scope}-{feature}-domain\nnx test {scope}-{feature}-domain --coverage\nnpx tsc --noEmit --project libs/{scope}/{feature}/domain/tsconfig.lib.json\n```\n\n---\n\n## Angular 20 Syntax (8 items)\n\n📖 Details: [angular-20-syntax.md](./angular-20-syntax.md)\n\n### Control Flow\n\n- [ ] All `*ngIf` → `@if`\n- [ ] All `*ngFor` → `@for` (with `track`)\n- [ ] All `*ngSwitch` → `@switch`\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `*ngIf=\"isLoading\"` | `@if (isLoading()) { }` |\n| `*ngFor=\"let item of items\"` | `@for (item of items; track item.id) { }` |\n| `[ngSwitch]=\"value\"` | `@switch (value) { @case ('a') { } }` |\n\n🔍 Check: `rg -n '\\*ngIf|\\*ngFor|\\*ngSwitch' --type html {path}`\n\n### Dependency Injection\n\n- [ ] All constructor DI → `inject()`\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `constructor(private store: MyStore)` | `readonly #store = inject(MyStore);` |\n| `constructor(@Inject(TOKEN) data)` | `readonly data = inject(TOKEN);` |\n\n🔍 Check: `rg -n 'constructor\\(private' --type ts {path}`\n\n### Component I/O\n\n- [ ] All `@Input()` → `input()` or `input.required()`\n- [ ] All `@Output()` → `output()`\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `@Input() data: Item[] = []` | `data = input<Item[]>([]);` |\n| `@Input() loading!: boolean` | `loading = input.required<boolean>();` |\n| `@Output() edit = new EventEmitter<Item>()` | `edit = output<Item>();` |\n\n### Signals\n\n- [ ] All `BehaviorSubject` → `signal()`\n- [ ] Convert to standalone component\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `new BehaviorSubject<boolean>(false)` | `signal<boolean>(false)` |\n| `subject.value` | `sig()` |\n| `subject.next(value)` | `sig.set(value)` |\n\n🔍 Check: `rg -n 'BehaviorSubject|Subject<' --type ts {path}`\n\n---\n\n## State Management (8 items)\n\n📖 Details: [signal-store.md](../tools/signal-store.md) | [loading-states.md](../tools/loading-states.md)\n\n### SignalStore Pattern\n\n- [ ] Use NgRx SignalStore pattern\n- [ ] Extend `LoadingState` interface in store state\n- [ ] Use `loadingInitialState` spread in initial state\n\n```typescript\n// ✅ Correct pattern\ninterface State extends LoadingState {\n  items: Item[];\n}\n\nconst initialState: State = {\n  ...loadingInitialState,\n  items: []\n};\n\nexport const FeatureStore = signalStore(\n  withState(initialState),\n  withMethods((store, api = inject(ApiService)) => ({\n    // ...\n  }))\n);\n```\n\n### API Methods\n\n- [ ] Use `queryMethod` for GET requests (auto page loading)\n- [ ] Use `mutationMethod` for POST/PUT/DELETE (auto snackbar)\n- [ ] Use `showPageLoading: false` for background refresh\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `rxMethod<void>(pipe(...))` | `queryMethod<void, Data[]>({ store, observe, next })` |\n| Manual `patchState({ loading: true })` | `queryMethod` handles automatically |\n\n### Observable to Signal\n\n- [ ] All `| async` → signal call `()`\n- [ ] All `combineLatest` → `computed()`\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `{{ data$ \\| async }}` | `{{ data() }}` |\n| `*ngIf=\"loading$ \\| async\"` | `@if (loading()) { }` |\n| `combineLatest([a$, b$])` | `computed(() => [a(), b()])` |\n\n🔍 Check: `rg -n '\\| async' --type html {path}`\n\n---\n\n## Loading States (5 items)\n\n📖 Details: [loading-states.md](../tools/loading-states.md)\n\n### Button Loading\n\n- [ ] Use `[mxButtonIsLoading]` for submit buttons\n- [ ] Include `loading()` in `[disabled]` condition\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `[disabled]=\"form.invalid\"` | `[disabled]=\"form.invalid \\|\\| loading()\"` |\n| Only `[mxButtonIsLoading]` | `[mxButtonIsLoading]` + `loading()` in disabled |\n\n```html\n<!-- ❌ Wrong: Button still clickable during loading -->\n<button [mxButtonIsLoading]=\"loading()\" [disabled]=\"form.invalid\">\n\n<!-- ✅ Correct: Properly disabled -->\n<button\n  mat-flat-button\n  [mxButtonIsLoading]=\"loading()\"\n  [disabled]=\"form.invalid || loading()\"\n  (click)=\"onSubmit()\">\n  {{ t('general.button.submit') }}\n</button>\n```\n\n🔍 Check: `rg -n 'mxButtonIsLoading.*disabled.*form\\.invalid[^|]' --type html {path}`\n\n### Dialog Close Timing\n\n- [ ] Dialog close only on API success (use callback, not immediate close)\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `this.store.update(data); this.dialogRef.close();` | `this.store.update({ input: data, next: () => this.dialogRef.close() });` |\n\n```typescript\n// ❌ Wrong: Closes immediately, even on API failure\nonSubmit(): void {\n  this.#store.updateItem(formData);\n  this.#dialogRef.close();\n}\n\n// ✅ Correct: Close only on success\nonSubmit(): void {\n  this.#store.updateItem({\n    input: this.form.getRawValue(),\n    next: () => this.#dialogRef.close({ success: true })\n  });\n}\n```\n\n### LoadingState Signals\n\n- [ ] Use correct loading signal for UI\n\n| Signal | Use Case |\n|--------|----------|\n| `fetching()` | GET requests (queryMethod) |\n| `updating()` | POST/PUT/DELETE (mutationMethod) |\n| `loading()` | Either (fetching \\|\\| updating) |\n| `successful()` | After mutation succeeded - use in effect() |\n\n---\n\n## DDD Architecture (18 items)\n\n📖 Details: [ddd-architecture.md](./ddd-architecture.md)\n\n### Layer Placement\n\n- [ ] Business logic / API → `domain/`\n- [ ] Smart component (injects Store) → `features/`\n- [ ] Dialog → `features/` (NOT ui/)\n- [ ] Table / Form (dumb component) → `ui/`\n- [ ] Routes → `shell/`\n\n| Component Type | Layer | Can Inject |\n|---------------|-------|------------|\n| API Service | domain/ | HttpClient, MxRestService |\n| Store | domain/ | ApiService |\n| Page Component | features/ | Store, MatDialog |\n| Dialog | features/ | Store, DialogRef |\n| Table | ui/ | FormBuilder, TranslocoService only |\n| Form | ui/ | FormBuilder, TranslocoService only |\n\n### 5-File Pattern in domain/\n\n- [ ] `{feature}.api-model.ts` (Backend API types - OpenAPI schema)\n- [ ] `{feature}.model.ts` (Frontend UI view models, constants)\n- [ ] `{feature}.api.ts` (HTTP calls)\n- [ ] `{feature}.store.ts` (SignalStore)\n- [ ] `{feature}.helper.ts` (optional, pure functions)\n\n```\nlibs/{scope}/{feature}/domain/src/lib/\n├── {feature}.api-model.ts  # Types from backend API\n├── {feature}.model.ts      # UI view models, constants\n├── {feature}.api.ts        # HTTP calls\n├── {feature}.store.ts      # SignalStore\n├── {feature}.helper.ts     # Pure functions (optional)\n└── index.ts                # Public exports\n```\n\n⚠️ **No Re-export**: Import types directly from source. Do NOT re-export `api-model` types in `model.ts`.\n\n### API Types Location\n\n- [ ] API types in `libs/{scope}/shared/domain/src/lib/api/*.api-model.ts`\n- [ ] Import API types from `@one-ui/{scope}/shared/domain`\n\n```typescript\n// ✅ Correct: Import from separate files\nimport type { User, UserCreate } from './{feature}.api-model';  // Backend types\nimport type { UserTableItem } from './{feature}.model';          // UI types\n```\n\n### UI Components Rules\n\n- [ ] Use `input()` to receive data\n- [ ] Use `output()` to emit events\n- [ ] NO store injection\n- [ ] NO HTTP calls\n- [ ] NO business logic\n\n```typescript\n// ❌ Wrong: UI component injecting store\n@Component({ selector: 'one-ui-user-table' })\nexport class UserTableComponent {\n  readonly #store = inject(UserStore);  // ❌ NOT allowed\n}\n\n// ✅ Correct: UI component with input/output only\n@Component({ selector: 'one-ui-user-table' })\nexport class UserTableComponent {\n  users = input.required<User[]>();\n  deleteUser = output<string>();\n}\n```\n\n### Feature Components Rules\n\n- [ ] Inject stores\n- [ ] Pass data to UI via `[property]`\n- [ ] Handle UI events via `(event)`\n- [ ] Manage dialog lifecycle\n\n### Domain Layer\n\n- [ ] Export public API via `index.ts`\n\n---\n\n## Form Validation (18 items)\n\n📖 Details: [one-validators.md](../tools/one-validators.md) | [form-builder.md](../tools/form-builder.md)\n\n### Import\n\n- [ ] Import `{ OneValidators }` (not `{ Validators }`)\n- [ ] Use `NonNullableFormBuilder` (not `FormBuilder`)\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `import { Validators } from '@angular/forms'` | `import { OneValidators } from '@one-ui/shared/domain'` |\n| `inject(FormBuilder)` | `inject(NonNullableFormBuilder)` |\n\n### Validators\n\n- [ ] `Validators.required` → `OneValidators.required`\n- [ ] `Validators.minLength` → `OneValidators.minLength`\n- [ ] `Validators.maxLength` → `OneValidators.maxLength`\n- [ ] `Validators.pattern` → `OneValidators.pattern`\n\n```typescript\n// ✅ Correct usage\nform = this.#fb.group({\n  name: ['', [OneValidators.required, OneValidators.maxLength(32)]],\n  port: [8080, [OneValidators.required, OneValidators.range(1, 65535)]]\n});\n```\n\n### Enhanced Validators\n\n- [ ] Custom validators use `validatorFnWithMessage` (ensures `__renderErrorMessage__` property)\n- [ ] Validators with parameters use `validatorWithMessage`\n- [ ] Error messages use i18n keys (not hardcoded strings)\n\n```typescript\n// ✅ Correct: Enhanced validator with i18n\nimport { validatorFnWithMessage } from '@one-ui/shared/domain';\n\nconst customValidator = validatorFnWithMessage(\n  (c) => c.value?.length > 32 ? { maxLength: true } : null,\n  'validators.maxLength',                    // i18n error message\n  (c) => `${c.value?.length ?? 0} / 32`     // hint renderer\n);\n```\n\n### Form Error Display (NEW: Error Display Strategy)\n\n- [ ] **Basic validators** (required, minLength, maxLength, range, rangeLength, email) → Use `oneUiFormError` directive\n- [ ] **Pattern validators** → Use `@if/@else` with custom error messages\n- [ ] **Custom validators** → Use `@if/@else` with custom error messages\n- [ ] Add `oneUiFormHint` directive to `<mat-hint>` for range/length fields\n- [ ] Remove manual error message handling for basic validators\n- [ ] Remove manual character count (`{{ form.get('x')?.value?.length }}`)\n- [ ] Do NOT add `[hintIndex]` unless multiple hints needed (default is 0)\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `<mat-error *ngIf=\"...\">Required</mat-error>` | `<mat-error oneUiFormError=\"fieldName\"></mat-error>` (basic validators) |\n| Pattern validator with directive only | `@if (form.controls.x.hasError('pattern')) { <mat-error>{{ t('validators.invalid_format') }}</mat-error> } @else { <mat-error oneUiFormError=\"x\"></mat-error> }` |\n| Manual hint text | `<mat-hint oneUiFormHint=\"port\"></mat-hint>` |\n| `{{ form.get('name')?.value?.length }} / 32` | `<mat-hint oneUiFormHint=\"name\"></mat-hint>` |\n| `[maxlength]=\"32\"` + manual char count | `OneValidators.maxLength(32)` + `oneUiFormHint` |\n| Plain `ValidatorFn` | `validatorFnWithMessage(fn, errorMsg, hintMsg?)` |\n\n📖 Details: [one-validators.md#error-display-strategy](../tools/one-validators.md#error-display-strategy)\n\n### Number Input\n\n- [ ] Use `oneUiNumberOnly` directive instead of `type=\"number\"`\n- [ ] Use `type=\"text\"` with `oneUiNumberOnly`\n- [ ] Use `OneValidators.range()` for min/max validation (NOT HTML `min`/`max` attributes)\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `<input type=\"number\" formControlName=\"port\">` | `<input type=\"text\" oneUiNumberOnly formControlName=\"port\">` |\n| `<input type=\"text\" min=\"1\" max=\"65535\">` | `OneValidators.range(1, 65535)` + `oneUiFormHint` |\n\n### Form Directive Imports\n\n- [ ] Import `OneUiFormErrorDirective` from `@one-ui/shared/ui/form`\n- [ ] Import `OneUiFormHintDirective` from `@one-ui/shared/ui/form`\n\n```typescript\nimport { OneUiFormErrorDirective, OneUiFormHintDirective } from '@one-ui/shared/ui/form';\n\n@Component({\n  imports: [OneUiFormErrorDirective, OneUiFormHintDirective, ...]\n})\n```\n\n---\n\n## UI Components (12 items)\n\n📖 Details: [mx-components.md](../tools/mx-components.md) | [dialog.md](../tools/ui/dialogs.md)\n\n### Buttons\n\n- [ ] All `mat-raised-button` → `mat-flat-button`\n- [ ] All components use `OnPush`\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `mat-raised-button` | `mat-flat-button` |\n| Default change detection | `changeDetection: ChangeDetectionStrategy.OnPush` |\n\n🔍 Check: `rg -n 'mat-raised-button' --type html {path}`\n\n### Icons (CRITICAL)\n\n- [ ] All icons use `svgIcon` attribute (NOT text content)\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `<mat-icon>refresh</mat-icon>` | `<mat-icon svgIcon=\"icon:refresh\"></mat-icon>` |\n| `<mat-icon>edit</mat-icon>` | `<mat-icon svgIcon=\"icon:edit\"></mat-icon>` |\n| `<mat-icon>delete</mat-icon>` | `<mat-icon svgIcon=\"icon:delete\"></mat-icon>` |\n\n🔍 Check: `rg -n '<mat-icon>[a-z_]+</mat-icon>' --type html {path}`\n\n### MX Components\n\n- [ ] Use `MxStatusComponent` for status columns (not plain text)\n- [ ] Use `mxLabelTooltip` for hints (not mat-icon with matTooltip)\n- [ ] Use `mxLabelOptional` for optional fields\n- [ ] Use `mx-file-uploader` for file inputs\n\n```html\n<!-- ❌ Wrong: Plain text status -->\n<td>{{ row.enabled ? 'Enabled' : 'Disabled' }}</td>\n\n<!-- ✅ Correct: MxStatus component -->\n@if (row.enabled) {\n  <mx-status statusType=\"success\" statusIcon=\"icon:task_alt\" [statusText]=\"t('general.common.enable')\" />\n} @else {\n  <mx-status statusType=\"neutral\" statusIcon=\"icon:hide_source\" [statusText]=\"t('general.common.disable')\" />\n}\n```\n\n```html\n<!-- ❌ Wrong: mat-icon with tooltip -->\n<mat-icon matSuffix [matTooltip]=\"hint\">info</mat-icon>\n\n<!-- ✅ Correct: mxLabelTooltip -->\n<mat-label mxLabel [mxLabelTooltip]=\"t('hint')\">{{ t('label') }}</mat-label>\n```\n\n### Dialog\n\n- [ ] Dialog uses `viewContainerRef` when injecting store\n\n```typescript\n// ❌ Wrong: Missing viewContainerRef\nthis.#dialog.open(FeatureDialogComponent, {\n  ...mediumDialogConfig,\n  data: { mode: 'create' }\n});\n\n// ✅ Correct: Include viewContainerRef\nthis.#dialog.open(FeatureDialogComponent, {\n  ...mediumDialogConfig,\n  viewContainerRef: this.#viewContainerRef,  // Required!\n  data: { mode: 'create' }\n});\n```\n\n### Table\n\n- [ ] Table toolbar order: Refresh → Create → Delete\n- [ ] Use `oneUiTableMaxSize` directive for table footer\n\n```html\n<!-- ✅ Correct toolbar order -->\n<ng-template #rightToolbarTemplate>\n  <!-- 1. Refresh (always visible) -->\n  <button mat-button (click)=\"refresh.emit()\">\n    <mat-icon svgIcon=\"icon:refresh\"></mat-icon>\n  </button>\n  <!-- 2. Create (when nothing selected) -->\n  @if (selection.length === 0) {\n    <button mat-stroked-button (click)=\"add.emit()\">{{ t('general.button.create') }}</button>\n  }\n  <!-- 3. Delete (when items selected) -->\n  @if (selection.length >= 1) {\n    <button mat-stroked-button (click)=\"onDelete()\">{{ t('general.button.delete') }}</button>\n  }\n</ng-template>\n```\n\n---\n\n## Translation Keys (9 items)\n\n📖 Details: [transloco.md](../tools/transloco.md)\n\n### Critical Rules\n\n- [ ] DO NOT create new translation keys\n- [ ] DO NOT modify existing translation keys\n- [ ] Read source HTML to find exact keys\n- [ ] Copy keys exactly as they appear\n- [ ] Verify keys exist in `assets/i18n/en.json`\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `t('features.user.my_custom_label')` | `t('features.user.page_title')` (from Legacy) |\n| Creating new key structure | Copy exact key from source HTML |\n\n### Key Patterns\n\n- [ ] Use `general.*` for common terms\n- [ ] Use `features.{feature}.*` for feature-specific\n- [ ] Translation keys match source EXACTLY\n- [ ] All tooltip/hint keys from source\n\n| Pattern | Example |\n|---------|---------|\n| `general.common.*` | `general.common.name`, `general.common.status` |\n| `general.button.*` | `general.button.create`, `general.button.delete` |\n| `general.tooltip.*` | `general.tooltip.refresh` |\n| `features.{feature}.*` | `features.user.page_title` |\n\n---\n\n## Form Layout (5 items)\n\n### Critical Rules\n\n- [ ] DO NOT change form field row groupings\n- [ ] Analyze source for `fxLayout=\"row\"` patterns\n- [ ] Use `.form-row` class to maintain layout\n- [ ] Field order matches source exactly\n- [ ] Single vs multi-field rows match source\n\n```html\n<!-- Source (Legacy) has two fields on same row -->\n<div fxLayout=\"row\">\n  <mat-form-field>organization_name</mat-form-field>\n  <mat-form-field>organizational_unit</mat-form-field>\n</div>\n\n<!-- ❌ Wrong: Separated into different rows -->\n<mat-form-field>organization_name</mat-form-field>\n<mat-form-field>organizational_unit</mat-form-field>\n\n<!-- ✅ Correct: Keep same row grouping -->\n<div class=\"form-row\">\n  <mat-form-field>organization_name</mat-form-field>\n  <mat-form-field>organizational_unit</mat-form-field>\n</div>\n```\n\n---\n\n## Page Layout (4 items)\n\n📖 Details: [page-layout.md](../tools/ui/page-layout.md)\n\n- [ ] Use `gl-page-content` wrapper class\n- [ ] Use `content-wrapper` (not mat-card)\n- [ ] Page component has NO padding (`:host { display: block; }`)\n- [ ] Layout padding handled by shell/app layout\n\n---\n\n## Routing (4 items)\n\n📖 Details: [routing.md](../tools/routing.md)\n\n- [ ] Use `ROUTES_ALIASES` for route paths (not hardcoded strings)\n- [ ] Include `createBreadcrumbResolver` in route resolve\n- [ ] Feature routes use `createRoutes()` pattern\n- [ ] Route providers include Store and ApiService\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `path: 'my-feature'` | `path: ROUTES_ALIASES['myFeature'].route` |\n| Missing breadcrumb resolver | `resolve: { breadcrumb: createBreadcrumbResolver(...) }` |\n\n```typescript\n// ✅ Correct route configuration\n{\n  path: ROUTES_ALIASES['myFeature'].route,\n  loadChildren: () => import('@one-ui/mxsecurity/my-feature/shell').then((m) => m.createRoutes()),\n  resolve: {\n    breadcrumb: createBreadcrumbResolver(ROUTES_ALIASES['myFeature'].id)\n  }\n}\n```\n\n```html\n<!-- ✅ Correct page structure -->\n<div *transloco=\"let t\" class=\"gl-page-content\">\n  <one-ui-breadcrumb />\n  <mx-page-title [title]=\"t('features.xxx.page_title')\" />\n  <div class=\"content-wrapper\">\n    <!-- Page content -->\n  </div>\n</div>\n```\n\n```scss\n// ❌ Wrong: Page component with padding\n:host {\n  display: block;\n  padding: 24px;  // ❌ NO!\n}\n\n// ✅ Correct: Only display: block\n:host {\n  display: block;\n}\n```\n\n---\n\n## Tab Group (5 items)\n\n📖 Details: [mx-components.md](../tools/mx-components.md)\n\n- [ ] Import `MxTabGroupDirective` from `@moxa/formoxa/mx-tabs`\n- [ ] Add `MxTabGroupDirective` to imports array\n- [ ] `mat-tab-group` has `mxTabGroup` directive\n- [ ] `mat-tab-group` has `animationDuration=\"0ms\"`\n- [ ] `mat-tab-group` has `[mat-stretch-tabs]=\"false\"`\n\n```typescript\nimport { MxTabGroupDirective } from '@moxa/formoxa/mx-tabs';\n\n@Component({\n  imports: [MatTabsModule, MxTabGroupDirective, ...]\n})\n```\n\n```html\n<!-- ✅ Correct tab group -->\n<mat-tab-group mxTabGroup animationDuration=\"0ms\" [mat-stretch-tabs]=\"false\">\n  <mat-tab [label]=\"t('tab.general')\">...</mat-tab>\n</mat-tab-group>\n```\n\n---\n\n## Storage & Auth (3 items)\n\n📖 Details: [auth.md](../tools/auth.md)\n\n- [ ] Token uses `sessionStorage` (not `localStorage`)\n- [ ] Token key is `'mx_token'`\n- [ ] Use `parseJwt` from `@one-ui/mxsecurity/shared/domain`\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `localStorage.getItem('token')` | `sessionStorage.getItem('mx_token')` |\n| `localStorage.setItem(...)` | `sessionStorage.setItem('mx_token', value)` |\n\n🔍 Check: `rg -n 'localStorage' --type ts {path}`\n\n---\n\n## Code Quality (12 items)\n\n### DDD Violations\n\n📖 Details: [pitfalls.md](./pitfalls.md)\n\n- [ ] **Violation 0**: Page form templates are extracted to UI layer (NOT in features page component)\n- [ ] **Violation 1**: UI components do NOT inject stores (use input/output only)\n- [ ] **Violation 2**: Dialogs are in features/ (NOT in ui/)\n- [ ] **Violation 3**: Business logic is in domain/ (NOT in features/)\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `features/{page}/{page}.html` contains `<form>` | `ui/{feature}-form/` component with input/output |\n| UI component `inject(Store)` | UI component uses `input()` and `output()` |\n| Dialog in `ui/` | Dialog in `features/` |\n| Features component makes HTTP calls | Features calls store methods |\n\n### General Quality\n\n- [ ] No `any` types (use proper TypeScript types)\n- [ ] No magic numbers (use config constants)\n- [ ] API endpoints centralized in `api.ts`\n- [ ] Update imports to `@one-ui/mxsecurity/*` paths\n- [ ] Prefer type union over enum\n- [ ] Use `readonly #` prefix for private injected services\n- [ ] Lint passes\n- [ ] Tests ≥ 95% coverage for domain layer\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `: any` | Proper type definition |\n| `if (status === 1)` | `if (status === STATUS.ACTIVE)` |\n| `enum Status { }` | `type Status = 'active' \\| 'inactive'` |\n| `private store` | `readonly #store` |\n\n🔍 Check: `rg -n ': any' --type ts --glob '!*.spec.ts' {path}`\n\n---\n\n## Table Component (13 items)\n\n📖 Details: [common-table.md](../tools/common-table.md) | [create-table.md](../guides/create-table.md) | [auto-generate.md](../tools/tables/auto-generate.md)\n\n- [ ] Use `CommonTableComponent` from `@one-ui/shared/ui`\n- [ ] Create data item interface in domain layer (`model.ts`)\n- [ ] Create table component in UI layer\n- [ ] Define columns using `TableColumn<T>`\n- [ ] Use `input()` for data, `output()` for events\n- [ ] Plain text columns use auto-generation (no `noAutoGenerate`, no custom template)\n- [ ] Date columns pre-formatted as string in `viewData` computed\n- [ ] Only Angular component columns (`<mx-status>`, `<mat-icon>`, `<button>`) have `noAutoGenerate: true`\n- [ ] Custom columns have filter function for searchable\n- [ ] Custom columns have `mat-sort-header` in `<th>`\n- [ ] `EDIT_COLUMN_KEY` has `stickyEnd: true`\n- [ ] Long text columns use `truncate` + `rowTooltip` / `rowTooltipDisable`\n- [ ] Composite headers use `translate()` + `langChanged()`\n\n```typescript\n// ✅ Correct column definition\nreadonly columns = computed(() => [\n  { key: SELECT_COLUMN_KEY, disable: (row) => row.isCurrentUser },\n  // auto-generate: plain text\n  { key: 'name', header: 'general.common.name' },\n  // auto-generate: long text with truncate + tooltip\n  {\n    key: 'description',\n    header: 'general.common.description',\n    width: '300px',\n    truncate: true,\n    rowTooltip: (row: unknown) => (row as RowType).description ?? '',\n    rowTooltipDisable: (row: unknown) => !(row as RowType).description\n  },\n  // custom template: Angular component required\n  {\n    key: 'status',\n    header: this.#transloco.translate('general.common.status'),\n    noAutoGenerate: true,\n    filter: (data, filter) => {\n      const status = data.enabled ? 'Enabled' : 'Disabled';\n      return status.toLowerCase().includes(filter.toLowerCase());\n    }\n  },\n  { key: EDIT_COLUMN_KEY, stickyEnd: true }\n]);\n```\n\n---\n\n## Final Steps\n\n1. Run `one-ui-migration-checker` agent: `check migration for {path}`\n2. Run linting: `nx lint {scope}-{feature}-domain`\n3. Run tests: `nx test {scope}-{feature}-domain --coverage`\n4. Type check: `npx tsc --noEmit`\n5. Visual comparison with Legacy app\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/ddd-architecture.md": "# DDD Architecture\n\n## Layer Decision Flow\n\n```\nQUESTION: Does component have HTTP calls or business logic?\n  YES → domain/\n  NO  ↓\n\nQUESTION: Does component inject Store or manage dialogs?\n  YES → features/\n  NO  ↓\n\nQUESTION: Does component ONLY have input()/output()?\n  YES → ui/\n  NO  ↓\n\nQUESTION: Does component define routes/guards/resolvers?\n  YES → shell/\n```\n\n## Layer Constraints\n\n| Layer | CAN Inject | CANNOT |\n|-------|------------|--------|\n| **domain/** | HttpClient, MxRestService, other services | Import from features or ui |\n| **features/** | Store, MatDialog, ViewContainerRef | Make HTTP calls directly |\n| **ui/** | FormBuilder, TranslocoService | Store, HttpClient, MatDialog |\n| **shell/** | Store (in resolvers only) | Business logic |\n\n---\n\n## 5-File Pattern (Domain Layer)\n\n```\nlibs/{scope}/{feature}/domain/src/lib/\n├── {feature}.api-model.ts  # Backend API types (OpenAPI schema)\n├── {feature}.model.ts      # Frontend UI view models, constants\n├── {feature}.api.ts        # HTTP calls (MxRestService)\n├── {feature}.store.ts      # SignalStore\n├── {feature}.helper.ts     # Pure utility functions (optional)\n└── index.ts                # Public exports\n```\n\n| File | Contains | When to Modify |\n|------|----------|----------------|\n| `*.api-model.ts` | Types from backend API (OpenAPI) | When backend API changes |\n| `*.model.ts` | UI view models, constants, type unions, enums | When UI requirements change |\n| `*.api.ts` | HTTP calls using MxRestService | When endpoints change |\n| `*.store.ts` | SignalStore with queryMethod/mutationMethod | When state logic changes |\n| `*.helper.ts` | Pure functions for data transformation, serialization | When transformation logic needed |\n\n> **Note**: Constants and enums can go in `*.model.ts` (no need for separate `*.def.ts`)\n\n---\n\n## api-model.ts (Backend Types)\n\nTypes that match the backend API response structure:\n\n```typescript\n/**\n * {Feature} API Models\n * Source: OpenAPI schema / Backend API\n */\n\n// Entity types from backend\nexport interface User {\n  userId?: string;\n  username?: string;\n  role?: { id: number; name: string };\n}\n\n// Request types\nexport interface UserCreate {\n  username: string;\n  password: string;\n}\n\n// Response wrappers\nexport interface UserResponse { data: User; }\nexport interface UsersResponse { data: User[]; }\n```\n\n---\n\n## model.ts (Frontend Types)\n\nUI view models, constants, type unions, and translation key mappings:\n\n```typescript\n/**\n * {Feature} UI Models\n * Frontend-defined types for UI layer\n */\n\n// Constants - feature-specific defaults\nexport const FEATURE_DEFAULTS = {\n  TABLE_MAX_SIZE: 10,\n  PASSWORD_MIN_LENGTH: 4,\n  PASSWORD_MAX_LENGTH: 64\n} as const;\n\n// Type union (preferred over enum)\nexport type UserRole = 'admin' | 'user' | 'supervisor';\n\n// Type union with const object for runtime values\nexport const USER_STATUS = {\n  Active: 'active',\n  Inactive: 'inactive'\n} as const;\nexport type UserStatus = typeof USER_STATUS[keyof typeof USER_STATUS];\n\n// Translation key mappings for feature-specific values\nexport const ROLE_TRANSLATION_KEYS: Record<UserRole, string> = {\n  admin: 'features.user_management.role.admin',\n  user: 'features.user_management.role.user',\n  supervisor: 'features.user_management.role.supervisor'\n};\n\n// View model for table display (flattened from API type)\nexport interface UserTableItem {\n  key: number;\n  username: string;\n  roleName: string;      // Flattened: user.role.name\n  roleRaw: UserRole;     // For filtering/sorting\n}\n\n// Dialog data\nexport interface UserDialogData {\n  mode: 'create' | 'edit';\n  item?: UserTableItem;\n}\n```\n\n> **Important**: Put feature-specific constants, enums, and translation mappings in `*.model.ts`. Only use shared domain patterns for validators (e.g., `VAILD_REGEX_NOT_SPACE` from `@one-ui/shared/domain`).\n\n---\n\n## helper.ts (Pure Functions)\n\n**Purpose**: Extract pure functions for data transformations and serialization to keep store files focused on state management.\n\n**When to use `*.helper.ts`**:\n- Transform API responses to table/UI data models\n- Serialize form data to API payloads\n- Complex data parsing or formatting\n- Any pure function with no side effects\n\n**Example - Data Transformation**:\n\n```typescript\n// user-management.helper.ts\nimport type { User } from './user-management.api-model';\nimport type { UserTableItem, ROLE_TRANSLATION_KEYS } from './user-management.model';\n\n/**\n * Transform API user to table display item\n */\nexport function toTableItem(apiUser: User, index: number): UserTableItem {\n  return {\n    key: index,\n    username: apiUser.username ?? '',\n    roleName: getRoleTranslationKey(apiUser.role),\n    roleRaw: apiUser.role ?? 'user'\n  };\n}\n\n/**\n * Get translation key for role\n */\nfunction getRoleTranslationKey(role: string): string {\n  return ROLE_TRANSLATION_KEYS[role as UserRole] ?? ROLE_TRANSLATION_KEYS.user;\n}\n\n/**\n * Transform multiple users to table data\n */\nexport function transformToTableData(users: User[]): UserTableItem[] {\n  return users.map((user, index) => toTableItem(user, index));\n}\n```\n\n**Example - Serialization**:\n\n```typescript\n// config.helper.ts\nimport type { ConfigFormValue, ConfigPayload } from './config.model';\n\n/**\n * Serialize form value to API payload format\n */\nexport function serializeConfigPayload(formValue: ConfigFormValue): ConfigPayload {\n  return {\n    entries: formValue.entries.map(entry => ({\n      id: entry.id,\n      name: entry.name.trim(),\n      enabled: entry.enabled ? 1 : 0,  // Boolean to number\n      raw: `${entry.interface}+${entry.port}+${entry.protocol}+`\n    }))\n  };\n}\n```\n\n**Usage in Store**:\n\n```typescript\n// user-management.store.ts\nimport { transformToTableData } from './user-management.helper';\n\nexport const UserManagementStore = signalStore(\n  withState({ users: [], tableData: [] }),\n  withComputed((store) => ({\n    // Use helper to transform data\n    tableData: computed(() => transformToTableData(store.users()))\n  })),\n  withMethods((store, api = inject(UserManagementApiService)) => ({\n    loadUsers: queryMethod<void, User[]>({\n      store,\n      observe: () => api.getUsers(),\n      next: (users) => patchState(store, { users })\n    })\n  }))\n);\n```\n\n**Benefits**:\n- Keeps store files focused on state management only\n- Makes pure functions testable in isolation\n- Improves code reusability across components\n- Clear separation between state logic and data transformation\n\n---\n\n## Import Pattern\n\n⚠️ **No Re-export**: Import types directly from source. Do NOT re-export `api-model` types in `model.ts`.\n\n```typescript\n// In api.ts - import from api-model\nimport type { User, UserCreate, UserResponse } from './{feature}.api-model';\n\n// In store.ts - import from both\nimport type { User, UserCreate } from './{feature}.api-model';\nimport type { UserTableItem } from './{feature}.model';\n\n// In helper.ts - transform API to UI\nimport type { User } from './{feature}.api-model';\nimport type { UserTableItem, ROLE_TRANSLATION_KEYS } from './{feature}.model';\n\nexport function toTableItem(apiUser: User, index: number): UserTableItem {\n  return {\n    key: index,\n    username: apiUser.username ?? '',\n    roleName: ROLE_TRANSLATION_KEYS[apiUser.role] ?? '',\n    roleRaw: apiUser.role\n  };\n}\n```\n\n---\n\n## api.ts (HTTP Calls)\n\n```typescript\nimport type { User, UserCreate, UsersResponse } from './{feature}.api-model';\n\n@Injectable({ providedIn: 'root' })\nexport class FeatureApiService {\n  readonly #api = inject(MxRestService);\n  readonly #ENDPOINTS = {\n    USERS: '/api/users'\n  } as const;\n\n  getUsers$(): Observable<User[]> {\n    return this.#api.get$<UsersResponse>(this.#ENDPOINTS.USERS)\n      .pipe(map(res => res.data));\n  }\n\n  createUser$(data: UserCreate): Observable<User> {\n    return this.#api.post$<User>(this.#ENDPOINTS.USERS, data);\n  }\n}\n```\n\n---\n\n## Shared API Types (Centralized)\n\nFor API types used across multiple features:\n\n```\nlibs/{scope}/shared/domain/src/lib/api/\n├── user.api-model.ts\n├── config.api-model.ts\n├── device.api-model.ts\n└── index.ts\n```\n\n```typescript\n// Import shared API types\nimport type { User } from '@one-ui/{scope}/shared/domain';\n```\n\n---\n\n## Full Directory Structure\n\n```\nlibs/{scope}/{feature}/\n├── domain/\n│   ├── {feature}.api-model.ts  # Backend types\n│   ├── {feature}.model.ts      # UI types\n│   ├── {feature}.api.ts        # HTTP calls\n│   ├── {feature}.store.ts      # SignalStore\n│   ├── {feature}.helper.ts     # Pure functions\n│   └── index.ts\n├── features/\n│   ├── {feature}-page.component.ts\n│   └── {feature}-dialog/\n│       ├── {feature}-dialog.component.ts\n│       └── {feature}-dialog.component.html\n├── ui/\n│   ├── {feature}-table/\n│   │   ├── {feature}-table.component.ts\n│   │   └── {feature}-table.component.html\n│   └── {feature}-form/\n└── shell/\n    └── {feature}.routes.ts\n```\n\n---\n\n## Type vs Enum\n\nPrefer TypeScript `type` union over `enum`:\n\n```typescript\n// ❌ Avoid enum (generates extra JavaScript)\nenum Status {\n  Active = 'active',\n  Inactive = 'inactive'\n}\n\n// ✅ Prefer type union (better tree-shaking)\ntype Status = 'active' | 'inactive';\n\n// ✅ With const object for runtime values\nconst STATUS = {\n  Active: 'active',\n  Inactive: 'inactive'\n} as const;\ntype Status = typeof STATUS[keyof typeof STATUS];\n```\n\n---\n\n## Layer Violations\n\n### ❌ UI injects Store\n\n```typescript\n// UI component - WRONG\n@Component({ selector: 'one-ui-user-table' })\nexport class UserTableComponent {\n  readonly #store = inject(UserStore);  // ❌ NOT allowed in UI\n}\n```\n\n### ✅ UI uses input/output\n\n```typescript\n// UI component - CORRECT\n@Component({ selector: 'one-ui-user-table' })\nexport class UserTableComponent {\n  users = input.required<User[]>();\n  deleteUser = output<string>();\n}\n```\n\n### ❌ Dialog in UI layer\n\n```\n❌ libs/{scope}/{feature}/ui/{feature}-dialog/\n✅ libs/{scope}/{feature}/features/{feature}-dialog/\n```\n\n### ❌ Features makes HTTP calls\n\n```typescript\n// Features component - WRONG\nexport class FeaturePageComponent {\n  readonly #http = inject(HttpClient);  // ❌ NOT allowed\n\n  loadData() {\n    this.#http.get('/api/users');  // ❌ HTTP in features\n  }\n}\n```\n\n### ✅ Features uses Store\n\n```typescript\n// Features component - CORRECT\nexport class FeaturePageComponent {\n  readonly #store = inject(FeatureStore);\n\n  constructor() {\n    this.#store.loadUsers();  // ✅ Delegate to store\n  }\n}\n```\n\n---\n\n## Legacy Path Mapping\n\n```\nLEGACY (f2e-networking)              → NEW (one-ui)\nsrc/app/pages/{Page}/                → libs/{scope}/{feature}/features/\nsrc/app/components/                  → libs/{scope}/{feature}/ui/\nsrc/app/services/{name}.service.ts   → libs/{scope}/{feature}/domain/\nsrc/app/models/{name}.model.ts       → libs/{scope}/{feature}/domain/{feature}.api-model.ts\n                                       libs/{scope}/{feature}/domain/{feature}.model.ts\n```\n\n---\n\n## Related References\n\n- [checklist.md](./checklist.md) - DDD Architecture checklist\n- [signal-store.md](../tools/signal-store.md) - Store pattern in domain\n- [create-page.md](../guides/create-page.md) - Full page creation guide\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/migration-checklist.md": "# Migration Checklist\n\nWhen migrating a component/feature from old project:\n\n## Angular 20 Syntax\n\n- [ ] Convert to standalone component\n- [ ] Replace `*ngIf` → `@if`\n- [ ] Replace `*ngFor` → `@for (item of items; track item.id)`\n- [ ] Replace `*ngSwitch` → `@switch`\n- [ ] Replace constructor injection → `inject()`\n- [ ] Replace `BehaviorSubject` → `signal()`\n- [ ] Replace `@Input()` → `input()` (Angular 17.1+)\n- [ ] Replace `@Output()` → `output()` (Angular 17.3+)\n\n## DDD Architecture\n\n- [ ] Identify component type:\n  - [ ] Business logic → `domain/`\n  - [ ] Smart component → `features/`\n  - [ ] Dialog → `features/`\n  - [ ] Table → `ui/`\n  - [ ] Form → `ui/`\n  - [ ] Routes → `shell/`\n- [ ] Create proper directory structure (domain/features/ui/shell)\n\n### ⚠️ Page Forms Must Be in UI Layer (CRITICAL)\n\n- [ ] **DO NOT put form templates directly in page components**\n- [ ] Extract page forms to `ui/` layer as separate components (e.g., `*-setting`, `*-form`)\n- [ ] Page component in `features/` should only:\n  - [ ] Import and use the form component from `ui/`\n  - [ ] Pass data to form via `input()`\n  - [ ] Handle form submission via `output()`\n- [ ] Form component in `ui/` should:\n  - [ ] Receive initial values via `input()`\n  - [ ] Emit form data via `output()` (e.g., `save`, `apply`)\n  - [ ] Have NO store injection\n  - [ ] Have NO direct API calls\n\n**Example Structure:**\n```\nlibs/mxsecurity/ddns-page/\n├── features/\n│   └── ddns-page/\n│       └── ddns-page.component.ts  # Smart component - imports form, handles events\n└── ui/\n    └── ddns-setting/\n        ├── ddns-setting.component.ts   # Form component - NO store\n        └── ddns-setting.component.html # Form template\n```\n\n- [ ] Ensure UI components:\n  - [ ] Use `input()` to receive data from parent\n  - [ ] Use `output()` to emit events to parent\n  - [ ] Have NO store injection\n  - [ ] Have NO HTTP calls\n  - [ ] Have NO business logic\n- [ ] Ensure Feature components:\n  - [ ] Inject stores\n  - [ ] Pass data to UI components via `[property]`\n  - [ ] Handle UI events via `(event)`\n  - [ ] Manage dialog lifecycle\n- [ ] Ensure Domain layer:\n  - [ ] Use NgRx SignalStore for state management\n  - [ ] Use `queryMethod` for GET requests\n  - [ ] Use `mutationMethod` for POST/PUT/DELETE requests\n  - [ ] Export public API via `index.ts`\n\n## State Management\n\n- [ ] Use NgRx SignalStore pattern\n- [ ] Use `queryMethod`/`mutationMethod` for API calls\n- [ ] Move data loading to route resolvers (shell layer)\n- [ ] Use `sessionStorage` for token storage\n\n## Code Quality\n\n- [ ] Update imports to use `@one-ui/mxsecurity/*` path aliases\n- [ ] Add proper TypeScript types (no `any`)\n- [ ] Use `OnPush` change detection\n- [ ] Add `track` expression in `@for` loops\n- [ ] Check Context7 for latest Angular best practices\n\n## Form Validation\n\n- [ ] Replace `import { Validators }` with `import { OneValidators }`\n- [ ] Replace `Validators.required` with `OneValidators.required`\n- [ ] Replace `Validators.minLength(n)` with `OneValidators.minLength(n)` or `OneValidators.rangeLength(min, max, field)`\n- [ ] Replace `Validators.min(n)` + `Validators.max(m)` with `OneValidators.range(n, m)` ⚠️ **NO separate min/max!**\n- [ ] Replace `Validators.pattern(ValidatorPattern.XXX)` with corresponding `OneValidators` method\n- [ ] Replace custom validators with OneValidators equivalents\n- [ ] Add `oneUiFormError` directive to `<mat-error>` tags\n- [ ] Remove manual error message handling code\n\n## ⚠️ Password Input Component (CRITICAL)\n\n- [ ] **DO NOT manually implement password visibility toggle**\n- [ ] Use `MxPasswordInputComponent` from `@moxa/formoxa/mx-password-input`\n- [ ] Import: `import { MxPasswordInputComponent } from '@moxa/formoxa/mx-password-input';`\n\n**❌ Wrong - Manual implementation:**\n```html\n<input matInput [type]=\"hidePassword() ? 'password' : 'text'\" />\n<button mat-icon-button (click)=\"togglePasswordVisibility()\">\n  <mat-icon>{{ hidePassword() ? 'visibility_off' : 'visibility' }}</mat-icon>\n</button>\n```\n\n**✅ Correct - Use mx-password-input:**\n```html\n<mat-form-field>\n  @let passwordCtrl = form.controls.password;\n  <mat-label>{{ t('general.common_account.password') }}</mat-label>\n  <mx-password-input formControlName=\"password\" [maxlength]=\"45\"></mx-password-input>\n  <mat-hint align=\"end\">{{ passwordCtrl.value.length }} / 45</mat-hint>\n  <mat-error oneUiFormError=\"password\"></mat-error>\n</mat-form-field>\n```\n\n## ⚠️ Translation Keys (CRITICAL)\n\n- [ ] **DO NOT create new translation keys**\n- [ ] **DO NOT modify existing translation keys**\n- [ ] Read source HTML templates to find exact translation keys\n- [ ] Copy translation keys exactly as they appear in source\n- [ ] Verify all translation keys match source:\n  - [ ] Page titles\n  - [ ] Tab labels\n  - [ ] Dialog titles and descriptions\n  - [ ] Form field labels\n  - [ ] Button labels\n  - [ ] Tooltip texts\n  - [ ] Table column headers\n  - [ ] Error messages\n  - [ ] Hints and placeholders\n\n## ⚠️ Form Layout (CRITICAL)\n\n- [ ] **DO NOT change form field row groupings**\n- [ ] Analyze source for `fxLayout=\"row\"` patterns\n- [ ] Use `.form-row` class to maintain same layout\n- [ ] Verify field groupings match source exactly:\n  - [ ] Which fields appear on same row\n  - [ ] Order of fields within rows\n  - [ ] Single-field rows vs multi-field rows\n\n## ⚠️ Page Component Styling (CRITICAL)\n\n- [ ] **DO NOT add `padding: 24px` to page components**\n- [ ] Layout padding is handled by shell/app layout\n- [ ] Page component SCSS should only have `:host { display: block; }`\n\n## ⚠️ Table Toolbar Button Order (CRITICAL)\n\n- [ ] Button order must be: **Refresh → Create/Delete** (if applicable)\n- [ ] Refresh button: only add if old code has refresh button, comes first\n- [ ] Create button: shown when `selection.length === 0`\n- [ ] Delete button: shown when `selection.length >= 1`\n\n## ⚠️ No data-testid Attributes (CRITICAL)\n\n- [ ] **DO NOT add `data-testid` attributes**\n- [ ] This project does not use `data-testid` for testing\n- [ ] Remove any `data-testid` attributes from migrated code\n- [ ] Remove any `[attr.data-testid]` bindings from templates\n\n## ⚠️ Tab Group Configuration (CRITICAL)\n\n- [ ] Import `MxTabGroupDirective` from `@moxa/formoxa/mx-tabs`\n- [ ] Add `MxTabGroupDirective` to component's `imports` array\n- [ ] `<mat-tab-group>` must include the following attributes:\n  - [ ] `mxTabGroup` directive\n  - [ ] `animationDuration=\"0ms\"`\n  - [ ] `[mat-stretch-tabs]=\"false\"`\n- [ ] Example:\n  ```typescript\n  import { MxTabGroupDirective } from '@moxa/formoxa/mx-tabs';\n\n  @Component({\n    imports: [MatTabsModule, MxTabGroupDirective, ...]\n  })\n  ```\n  ```html\n  <mat-tab-group mxTabGroup animationDuration=\"0ms\" [mat-stretch-tabs]=\"false\">\n  ```\n\n## ⚠️ Number-Only Input Directive (CRITICAL)\n\n- [ ] **Replace `appNumberOnly` with `oneUiNumberOnly`**\n- [ ] Search old project for `appNumberOnly` usage\n- [ ] Import `NumberOnlyDirective` from `@one-ui/mxsecurity/shared/domain`\n- [ ] Add `NumberOnlyDirective` to component's `imports` array\n\n**❌ Old project:**\n```html\n<input matInput formControlName=\"port\" appNumberOnly />\n```\n\n**✅ New project:**\n```typescript\nimport { NumberOnlyDirective } from '@one-ui/mxsecurity/shared/domain';\n\n@Component({\n  imports: [NumberOnlyDirective, ...]\n})\n```\n```html\n<input matInput formControlName=\"port\" oneUiNumberOnly />\n```\n\n**Location:** `libs/mxsecurity/shared/domain/src/lib/directives/number-only.directive.ts`\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/migration-context.md": "# MXsecurity Migration Context\n\nThis guide assists with migrating the MXsecurity project from Angular 16 to Angular 20 in the one-ui monorepo.\n\n## 🎯 Migration Context\n\n**Source Project**: `/Users/jayden/f2e-networking-jayden/apps/mxsecurity-web` (Angular 16)\n**Target Project**: `/Users/jayden/one-ui/apps/mxsecurity/mxsecurity` (Angular 20)\n\n## 🎯 Migration Workflow\n\n1. **Analyze old component** in `/Users/jayden/f2e-networking-jayden/apps/mxsecurity-web`\n2. **Identify domain concepts** - What business logic, API calls, state?\n3. **Create library structure** - domain, features, ui, shell as needed\n4. **Migrate in layers**:\n   - API types → `shared/api`\n   - Services → `domain/`\n   - State → `domain/` (SignalStore)\n   - Smart components → `features/`\n   - Dumb components → `ui/`\n   - Routes → `shell/`\n5. **Update syntax** - Use checklist above\n6. **Test and verify** - Type check, lint, build\n\n## 🔧 Nx Commands\n\n```bash\n# Create new library (use script for consistency)\n./scripts/nx-generate-lib.sh --scope mxsecurity --domain-name my-feature --type domain\n\n# Type check\nnpx tsc --noEmit --project libs/mxsecurity/[feature]/tsconfig.lib.json\n\n# Lint\nnx lint mxsecurity-[feature]-[type]\n\n# Build\nnx build mxsecurity\n```\n\n## 📞 Getting Help\n\nWhen stuck:\n\n1. Check this guide first\n2. Look at reference projects in `libs/switch/`\n3. Use Context7 to query latest Angular docs\n4. Review `/Users/jayden/one-ui/CLAUDE.md` for general patterns\n5. Check old implementation in `/Users/jayden/f2e-networking-jayden/apps/mxsecurity-web`\n\n---\n\n**Remember**: Always use Angular 20 syntax, standalone components, signals, the SignalStore pattern, and **OneValidators** for form validation. Migration is about modernizing, not just copying old code.\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/migration-workflow.md": "# Angular Migration Workflow\n\nComplete Angular migration workflow documentation, including skill usage and best practices.\n\n## Skills Classification Overview\n\n| Category | Skills | Purpose |\n| -------- | ------ | ------- |\n| **Automated Pipeline** | `full-migration-pipeline` | One-click complete migration |\n| **Primary Migration Flow** | `migrate-page`, `migrate-page-gitlab` | Execute full migration |\n| **Core Reference** | `one-ui-migration`, `migration-patterns` | Migration principles and pattern queries |\n| **Quality Assurance** | `migration-lint`, `migration-review` | Code compliance checks |\n| **QA Verification** | `generate-qa-test-cases`, `verify-legacy-with-qa-testcases` | Test case generation and verification |\n| **Auxiliary Tools** | `form-extraction`, `compare-i18n-keys`, `icon-replacement`, `ui-layout-guide`, `check-barrel-files` | Task-specific assistance |\n\n## Migration Workflow Diagram\n\n```mermaid\nflowchart TB\n    subgraph Phase1[\"Phase 1: Analysis\"]\n        START([Start Migration]) --> MIGRATE[\"/migrate-page\\nor\\n/migrate-page-gitlab\"]\n        MIGRATE --> ANALYSIS[\"Generate MIGRATION-ANALYSIS.md\"]\n        ANALYSIS --> FORM_EXT[\"/form-extraction\\nExtract form controls\"]\n        ANALYSIS --> I18N_EXT[\"Extract translation keys\"]\n    end\n\n    subgraph Phase2[\"Phase 2: Implementation\"]\n        FORM_EXT --> DOMAIN[\"Create Domain Layer\\n- *.model.ts\\n- *.api.ts\\n- *.store.ts\"]\n        I18N_EXT --> DOMAIN\n        DOMAIN --> UI[\"Create UI Layer\\n- Tables\\n- Forms\"]\n        UI --> FEATURES[\"Create Features Layer\\n- Page Component\\n- Dialogs\"]\n        FEATURES --> SHELL[\"Create Shell Layer\\n- Routes\"]\n    end\n\n    subgraph Phase3[\"Phase 3: Quality Assurance\"]\n        SHELL --> LINT[\"/migration-lint\\nCompliance check + auto-fix\"]\n        LINT --> REVIEW[\"/migration-review\\nMigration completeness check\"]\n        REVIEW --> I18N_CMP[\"/compare-i18n-keys\\nTranslation key comparison\"]\n        I18N_CMP --> BARREL[\"/check-barrel-files\\nCheck redundant barrels\"]\n    end\n\n    subgraph Phase4[\"Phase 4: QA Verification\"]\n        BARREL --> QA_GEN[\"/generate-qa-test-cases\\nGenerate QA test cases\"]\n        QA_GEN --> QA_VERIFY[\"/verify-legacy-with-qa-testcases\\nVerify legacy code\"]\n        QA_VERIFY --> DONE([Migration Complete])\n    end\n\n    subgraph Support[\"Auxiliary Skills (Available Anytime)\"]\n        PATTERNS[\"/migration-patterns\\nQuery migration patterns\"]\n        ICONS[\"/icon-replacement\\nIcon replacement\"]\n        LAYOUT[\"/ui-layout-guide\\nUI layout guidelines\"]\n    end\n\n    DOMAIN -.->|Query| PATTERNS\n    UI -.->|Query| PATTERNS\n    UI -.->|Query| ICONS\n    UI -.->|Query| LAYOUT\n    FEATURES -.->|Query| PATTERNS\n\n    style Phase1 fill:#e1f5fe\n    style Phase2 fill:#fff3e0\n    style Phase3 fill:#f3e5f5\n    style Phase4 fill:#e8f5e9\n    style Support fill:#fafafa\n```\n\n## Skills Dependency Diagram\n\n```mermaid\ngraph LR\n    subgraph Core[\"Core Knowledge Base\"]\n        MIG[\"one-ui-migration\\n(Core Principles)\"]\n        PAT[\"migration-patterns\\n(Pattern Queries)\"]\n    end\n\n    subgraph MainFlow[\"Primary Flow Skills\"]\n        MP[\"migrate-page\"]\n        MG[\"migrate-page-gitlab\"]\n    end\n\n    subgraph QualityCheck[\"Quality Check Skills\"]\n        LINT[\"migration-lint\"]\n        REV[\"migration-review\"]\n    end\n\n    subgraph QATools[\"QA Tool Skills\"]\n        GEN[\"generate-qa-test-cases\"]\n        VER[\"verify-legacy-with-qa-testcases\"]\n    end\n\n    subgraph Helpers[\"Auxiliary Skills\"]\n        FORM[\"form-extraction\"]\n        I18N[\"compare-i18n-keys\"]\n        ICON[\"icon-replacement\"]\n        UI[\"ui-layout-guide\"]\n        BARREL[\"check-barrel-files\"]\n    end\n\n    MIG -->|Reference| MP\n    MIG -->|Reference| MG\n    MIG -->|Reference| LINT\n    MIG -->|Reference| REV\n    PAT -->|Provides Query| MP\n    PAT -->|Provides Query| MG\n\n    FORM -->|Referenced By| REV\n    FORM -->|Referenced By| LINT\n\n    GEN -->|Outputs To| VER\n\n    MP --> REV\n    MG --> REV\n    REV --> LINT\n```\n\n## Detailed Phase Descriptions\n\n### Phase 1: Analysis\n\n**Objective:** Understand legacy code structure, generate migration analysis document\n\n| Step | Skill | Output |\n| ---- | ----- | ------ |\n| 1 | `/migrate-page --from=<source> --to=<target>` | `MIGRATION-ANALYSIS.md` |\n| 2 | `/form-extraction` (auxiliary) | Form controls list |\n\n**Output Location:** `{target}/domain/src/lib/docs/MIGRATION-ANALYSIS.md`\n\n### Phase 2: Implementation\n\n**Objective:** Create each layer following DDD architecture\n\n| Layer | Contents | Query Skill |\n| ----- | -------- | ----------- |\n| Domain | `*.model.ts`, `*.api.ts`, `*.store.ts`, `*.helper.ts` | `/migration-patterns store` |\n| UI | Tables, Forms (input/output only) | `/migration-patterns table`, `/ui-layout-guide` |\n| Features | Page Component, Dialogs | `/migration-patterns dialog` |\n| Shell | Routes, Resolvers | - |\n\n### Phase 3: Quality Assurance\n\n**Objective:** Ensure code compliance with migration standards\n\n| Step | Skill | Description |\n| ---- | ----- | ----------- |\n| 1 | `/migration-lint <path>` | Auto-fix + generate compliance report |\n| 2 | `/migration-review --from=<old> --to=<new>` | Compare migration completeness |\n| 3 | `/compare-i18n-keys --from=<old.html> --to=<new.html>` | Verify translation key consistency |\n| 4 | `/check-barrel-files <path>` | Remove redundant barrel files |\n\n### Phase 4: QA Verification\n\n**Objective:** Generate test cases, confirm functional consistency\n\n| Step | Skill | Output |\n| ---- | ----- | ------ |\n| 1 | `/generate-qa-test-cases <path>` | `QA-TEST-CASES.md` |\n| 2 | `/verify-legacy-with-qa-testcases <legacy-path>` | `LEGACY-VERIFICATION-REPORT.md` |\n\n**Output Location:** `{target}/domain/src/lib/docs/`\n\n## Best Practice Workflow (Sequence)\n\n```mermaid\nsequenceDiagram\n    participant Dev as Developer\n    participant M as migrate-page\n    participant L as migration-lint\n    participant R as migration-review\n    participant Q as generate-qa-test-cases\n    participant V as verify-legacy-with-qa-testcases\n\n    Dev->>M: 1. Execute migration analysis\n    M-->>Dev: Output MIGRATION-ANALYSIS.md\n    Dev->>Dev: 2. Manually implement each Layer\n    Dev->>L: 3. Execute compliance check\n    L-->>Dev: Auto-fix + report\n    Dev->>R: 4. Check migration completeness\n    R-->>Dev: Missing items report\n    Dev->>Dev: 5. Fix missing items\n    Dev->>Q: 6. Generate QA test cases\n    Q-->>Dev: QA-TEST-CASES.md\n    Dev->>V: 7. Verify legacy code\n    V-->>Dev: LEGACY-VERIFICATION-REPORT.md\n    Dev->>Dev: 8. Confirm functional consistency\n```\n\n## Auxiliary Skills Usage Timing\n\n| Skill | When to Use |\n| ----- | ----------- |\n| `/migration-patterns <keyword>` | Whenever querying migration patterns (table, form, dialog, layout, button, store, syntax, validator) |\n| `/icon-replacement <icon-name>` | When encountering legacy icons that need replacement |\n| `/ui-layout-guide <query>` | When querying best practices for UI layout creation |\n| `/form-extraction` | When needing to extract form structure for comparison |\n\n## Notes\n\n- E2E test generation and API Mock generation are not currently required\n- Performance checks are secondary to migration, implementation deferred\n\n## Quick Command Reference\n\n```bash\n# One-click complete migration workflow (recommended)\n/full-migration-pipeline --from=/path/to/old --to=libs/mxsecurity/xxx-page\n/full-migration-pipeline --page=xxx  # From GitLab\n\n# Manual execution of each phase\n/migrate-page --from=/path/to/old --to=libs/mxsecurity/xxx-page\n/migration-lint libs/mxsecurity/xxx-page\n/migration-review --from=/path/to/old --to=libs/mxsecurity/xxx-page\n/generate-qa-test-cases libs/mxsecurity/xxx-page\n/verify-legacy-with-qa-testcases /path/to/old\n\n# Query patterns\n/migration-patterns table\n/migration-patterns form\n/migration-patterns dialog\n\n# Auxiliary tools\n/icon-replacement settings\n/ui-layout-guide card\n/check-barrel-files libs/mxsecurity/xxx-page\n```\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/pitfalls.md": "# Common Migration Pitfalls\n\nThis document describes common mistakes when migrating to One-UI with DDD architecture.\n\n---\n\n## DDD Architecture Violations\n\n### ❌ Violation 0: Page Form Template in Features Layer\n\n**⚠️ THIS IS THE MOST COMMON MIGRATION MISTAKE**\n\nPage setting forms **MUST** be extracted to the UI layer, NOT embedded directly in the page component template.\n\n#### Wrong Structure\n\n```\n❌ WRONG:\nlibs/{scope}/{feature}/\n├── features/\n│   └── {feature}-page/\n│       ├── {feature}-page.component.ts\n│       └── {feature}-page.component.html   # ❌ Contains <form> with <mat-form-field>\n└── ui/\n    └── (empty or missing)                  # ❌ No form component!\n```\n\n#### Correct Structure\n\n```\n✅ CORRECT:\nlibs/{scope}/{feature}/\n├── features/\n│   └── {feature}-page/\n│       ├── {feature}-page.component.ts     # Smart component - orchestrates\n│       └── {feature}-page.component.html   # Only imports form UI component\n└── ui/\n    └── {feature}-form/\n        ├── {feature}-form.component.ts    # Form logic - NO store injection\n        └── {feature}-form.component.html  # Form template with mat-form-field\n```\n\n#### ❌ Wrong Code Example\n\n```html\n<!-- features/{feature}-page/{feature}-page.component.html -->\n<div class=\"gl-page-content\">\n  <one-ui-breadcrumb />\n  <mx-page-title [title]=\"t('features.{feature}.page_title')\" />\n\n  <!-- ❌ WRONG - Form template directly in page component -->\n  <div class=\"content-wrapper\">\n    <form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n      <mat-form-field>\n        <mat-label>{{ t('general.common.name') }}</mat-label>\n        <mat-select formControlName=\"name\">\n          @for (option of options; track option.value) {\n            <mat-option [value]=\"option.value\">{{ option.text }}</mat-option>\n          }\n        </mat-select>\n      </mat-form-field>\n      <!-- ... more form fields ... -->\n      <button mat-flat-button type=\"submit\">{{ t('general.button.apply') }}</button>\n    </form>\n  </div>\n</div>\n```\n\n#### ✅ Correct Code Example\n\n**Page Component (Features)**:\n```html\n<!-- features/{feature}-page/{feature}-page.component.html -->\n<div class=\"gl-page-content\">\n  <one-ui-breadcrumb />\n  <mx-page-title [title]=\"t('features.{feature}.page_title')\" />\n\n  <div class=\"content-wrapper\">\n    <!-- ✅ CORRECT - Use UI component -->\n    <one-ui-{feature}-form\n      [initialData]=\"store.data()\"\n      [loading]=\"store.loading()\"\n      [noPermission]=\"noPermission\"\n      (apply)=\"onApply($event)\"\n    />\n  </div>\n</div>\n```\n\n```typescript\n// features/{feature}-page/{feature}-page.component.ts\n@Component({\n  selector: 'one-ui-{feature}-page',\n  imports: [/* UI component */]\n})\nexport class FeaturePageComponent {\n  readonly store = inject(FeatureStore);\n\n  onApply(payload: FormPayload) {\n    this.store.updateSettings({ input: payload });\n  }\n}\n```\n\n**Form Component (UI)**:\n```typescript\n// ui/{feature}-form/{feature}-form.component.ts\n@Component({\n  selector: 'one-ui-{feature}-form'\n})\nexport class FeatureFormComponent {\n  // ✅ Inputs - receive data from parent\n  initialData = input<SettingsData | null>(null);\n  loading = input<boolean>(false);\n  noPermission = input<boolean>(false);\n\n  // ✅ Outputs - emit events to parent\n  apply = output<FormPayload>();\n\n  // ✅ Form logic only - NO store injection\n  readonly #fb = inject(NonNullableFormBuilder);\n  readonly form = this.#fb.group({ /* ... */ });\n\n  onSubmit() {\n    if (this.form.valid) {\n      this.apply.emit(this.form.getRawValue());\n    }\n  }\n}\n```\n\n#### Why This Matters\n\n- **Reusability**: Form components can be reused in dialogs or other contexts\n- **Testability**: Form logic can be tested without mocking stores\n- **Separation of Concerns**: Features handle orchestration, UI handles presentation\n- **Consistency**: Same pattern as table components\n\n#### How to Fix\n\n1. Create a new component in `ui/` directory (e.g., `{feature}-form/`)\n2. Move the `<form>` template from page component to UI component\n3. Move form-related logic (form group, validation, options) to UI component\n4. Add `input()` for data and `output()` for events\n5. Update page component to use the new UI component with input/output bindings\n\n---\n\n### ❌ Violation 1: UI Component Injecting Store\n\nUI components should **NEVER** inject stores. They should only receive data via `input()` and emit events via `output()`.\n\n#### ❌ Wrong Code\n\n```typescript\n// ui/user-table/user-table.component.ts\n@Component({\n  selector: 'one-ui-user-table'\n})\nexport class UserTableComponent {\n  private store = inject(UserManagementStore); // ❌ NO!\n\n  users = this.store.users; // ❌ NO!\n\n  deleteUser(id: string) {\n    this.store.deleteUser(id); // ❌ NO!\n  }\n}\n```\n\n#### ✅ Correct Code\n\n```typescript\n// ui/user-table/user-table.component.ts\n@Component({\n  selector: 'one-ui-user-table',\n  template: `\n    <button (click)=\"delete.emit(user.id)\">Delete</button>\n  `\n})\nexport class UserTableComponent {\n  users = input.required<User[]>();      // ✅ Input\n  delete = output<string>();             // ✅ Output\n}\n\n// features/user-management-page/user-management-page.component.ts\n@Component({\n  template: `\n    <one-ui-user-table\n      [users]=\"users()\"\n      (delete)=\"onDelete($event)\"\n    />\n  `\n})\nexport class UserManagementPageComponent {\n  private store = inject(UserManagementStore); // ✅ Features inject store\n  users = this.store.users;\n\n  onDelete(id: string) {\n    this.store.deleteUser(id); // ✅ Features call store\n  }\n}\n```\n\n---\n\n### ❌ Violation 2: Dialog in UI Layer\n\nDialogs manage their own lifecycle and often interact with stores, so they belong in the **features** layer, not the UI layer.\n\n#### ❌ Wrong Structure\n\n```\n❌ libs/{scope}/{feature}/ui/create-user-dialog/\n```\n\n#### ✅ Correct Structure\n\n```\n✅ libs/{scope}/{feature}/features/create-user-dialog/\n```\n\n#### ✅ Correct Code\n\n```typescript\n// features/create-user-dialog/create-user-dialog.component.ts\n@Component({\n  selector: 'one-ui-create-user-dialog',\n  template: `\n    <h2 mat-dialog-title>Create User</h2>\n    <mat-dialog-content>\n      <one-ui-user-form          <!-- ✅ Use UI component -->\n        [user]=\"null\"\n        (save)=\"onSave($event)\"\n      />\n    </mat-dialog-content>\n  `\n})\nexport class CreateUserDialogComponent {\n  private dialogRef = inject(MatDialogRef); // ✅ Features manage dialog\n\n  onSave(user: User) {\n    this.dialogRef.close(user);\n  }\n}\n```\n\n---\n\n### ❌ Violation 3: Business Logic in Features\n\nFeatures components should only orchestrate. Business logic (HTTP calls, validation, data transformation) belongs in the **domain** layer.\n\n#### ❌ Wrong Code\n\n```typescript\n// features/user-management-page/user-management-page.component.ts\n@Component({\n  selector: 'one-ui-user-management-page'\n})\nexport class UserManagementPageComponent {\n  private http = inject(HttpClient);\n\n  loadUsers() {\n    // ❌ NO! Business logic belongs in domain layer\n    this.http.get('/api/users').subscribe((users) => {\n      this.users = users;\n    });\n  }\n\n  validateUser(user: User): boolean {\n    // ❌ NO! Validation logic belongs in domain layer\n    return user.email.includes('@') && user.age >= 18;\n  }\n}\n```\n\n#### ✅ Correct Code\n\n```typescript\n// domain/user-management.store.ts\nexport const UserManagementStore = signalStore(\n  withMethods((store, api = inject(UserManagementApiService)) => ({\n    loadUsers: queryMethod<void, User[]>({\n      store,\n      observe: () => api.getUsers(), // ✅ API call in domain\n      next: (users) => patchState(store, { users })\n    })\n  }))\n);\n\n// domain/user.validator.ts\nexport function validateUser(user: User): boolean {\n  return user.email.includes('@') && user.age >= 18; // ✅ Logic in domain\n}\n\n// features/user-management-page/user-management-page.component.ts\nexport class UserManagementPageComponent {\n  private store = inject(UserManagementStore);\n\n  constructor() {\n    effect(() => {\n      this.store.loadUsers(); // ✅ Features just call store methods\n    });\n  }\n}\n```\n\n---\n\n### ❌ Violation 4: UI Form Making HTTP Calls\n\nUI forms should only emit events. Features components handle the actual API calls via stores.\n\n#### ❌ Wrong Code\n\n```typescript\n// ui/user-form/user-form.component.ts\n@Component({\n  selector: 'one-ui-user-form'\n})\nexport class UserFormComponent {\n  private http = inject(HttpClient); // ❌ NO!\n\n  onSubmit() {\n    // ❌ NO! HTTP calls belong in domain layer\n    this.http.post('/api/users', this.form.value).subscribe();\n  }\n}\n```\n\n#### ✅ Correct Code\n\n```typescript\n// ui/user-form/user-form.component.ts\n@Component({\n  selector: 'one-ui-user-form',\n  template: `\n    <form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n      <button type=\"submit\">Save</button>\n    </form>\n  `\n})\nexport class UserFormComponent {\n  save = output<User>(); // ✅ Output event\n\n  onSubmit() {\n    if (this.form.valid) {\n      this.save.emit(this.form.value); // ✅ Just emit\n    }\n  }\n}\n\n// features/user-management-page/user-management-page.component.ts\n@Component({\n  template: `\n    <one-ui-user-form (save)=\"onSave($event)\" />\n  `\n})\nexport class UserManagementPageComponent {\n  private store = inject(UserManagementStore);\n\n  onSave(user: User) {\n    this.store.createUser(user); // ✅ Features call store\n  }\n}\n```\n\n---\n\n### ❌ Violation 5: Shared Component in Wrong Layer\n\nGeneric, reusable components belong in **UI layer**. Feature-specific components belong in **features layer**.\n\n#### ❌ Wrong Placement\n\n```\n❌ libs/{scope}/shared/ui/user-management-page/      # Feature-specific in shared\n❌ libs/{scope}/{feature}/features/generic-table/    # Generic in features\n```\n\n#### ✅ Correct Placement\n\n```\n✅ libs/{scope}/{feature}/ui/user-table/             # Generic in UI\n✅ libs/{scope}/{feature}/features/user-page/        # Feature-specific in features\n```\n\n---\n\n## Quick Reference: Layer Responsibilities\n\n| Layer | Responsibilities | Can Inject | Cannot Inject |\n|-------|------------------|------------|---------------|\n| **UI** | Presentational components, forms, tables | FormBuilder, TranslocoService | Store, HttpClient, MatDialog |\n| **Features** | Page components, dialogs, orchestration | Store, MatDialog, ViewContainerRef | HttpClient (use store) |\n| **Domain** | Business logic, state, API services | HttpClient, MxRestService | Nothing from features/ui |\n| **Shell** | Routing, layout | Store (for guards) | Business logic |\n\n---\n\n## Quick Reference: What Goes Where\n\n| Component Type | Layer | Can Use Store? | Can Make HTTP Calls? |\n|----------------|-------|----------------|---------------------|\n| Page component | Features | ✅ Yes | ❌ No (use store) |\n| Dialog | Features | ✅ Yes | ❌ No (use store) |\n| Form component | UI | ❌ No | ❌ No |\n| Table component | UI | ❌ No | ❌ No |\n| Store | Domain | N/A | ✅ Yes (via API service) |\n| API service | Domain | N/A | ✅ Yes |\n\n---\n\n## Related References\n\n- [ddd-architecture.md](./ddd-architecture.md) - Complete DDD architecture guide\n- [checklist.md](./checklist.md) - Pre-PR validation checklist\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/pitfalls/angular-syntax.md": "# Common Pitfalls: Angular Syntax\n\n## 1. Mixing Old and New Control Flow\n\n```typescript\n// ❌ Don't mix\n<div *ngIf=\"condition\">\n  @for (item of items; track item.id) {\n    {{ item }}\n  }\n</div>\n\n// ✅ Use new syntax consistently\n@if (condition) {\n  @for (item of items; track item.id) {\n    <div>{{ item }}</div>\n  }\n}\n```\n\n---\n\n## 2. Forgetting `track` in `@for`\n\n```typescript\n// ❌ Missing track\n@for (item of items) {\n  <div>{{ item }}</div>\n}\n\n// ✅ Always provide track\n@for (item of items; track item.id) {\n  <div>{{ item }}</div>\n}\n```\n\n### Common Track Patterns\n\n```html\n<!-- Track by id (most common) -->\n@for (item of items; track item.id) { ... }\n\n<!-- Track by unique property -->\n@for (option of options; track option.value) { ... }\n\n<!-- Track by index (when no unique id) -->\n@for (item of items; track $index) { ... }\n\n<!-- Track by object identity (simple primitives) -->\n@for (value of values; track value) { ... }\n```\n\n---\n\n## 3. Using Module-based Patterns\n\n```typescript\n// ❌ Don't create NgModules\n@NgModule({\n  declarations: [MyComponent],\n  imports: [CommonModule]\n})\nexport class MyModule {}\n\n// ✅ Use standalone everywhere\n@Component({\n  standalone: true,\n  imports: [CommonModule]\n})\nexport class MyComponent {}\n```\n\n---\n\n## 4. Not Using Signals with SignalStore\n\n```typescript\n// ❌ Mixing observables unnecessarily\nexport class MyComponent {\n  data$ = this.store.data$.pipe(...);\n}\n\n// ✅ Use signals directly\nexport class MyComponent {\n  data = computed(() => this.store.data());\n}\n```\n\n---\n\n## 5. mxLabelOptionalText - Use Default Value\n\n```html\n<!-- ❌ WRONG - Don't specify mxLabelOptionalText, use default -->\n<mat-label mxLabel mxLabelOptional [mxLabelOptionalText]=\"t('general.label.optional')\">\n  {{ t('features.email_settings.mail_server') }}\n</mat-label>\n\n<!-- ✅ CORRECT - Use default value -->\n<mat-label mxLabel mxLabelOptional>\n  {{ t('features.email_settings.mail_server') }}\n</mat-label>\n```\n\n---\n\n## 6. langChanged() Must Be Called in Injection Context\n\n`langChanged()` uses `inject()` internally, so it **must** be called at class field level (injection context), NOT inside `computed()`.\n\n```typescript\n// ❌ WRONG - inject() fails because computed() is not an injection context\nexport class MyComponent {\n  readonly options = computed(() => {\n    langChanged(); // ❌ ERROR: NG0203 inject() must be called from injection context\n    return [...];\n  });\n}\n\n// ✅ CORRECT - Call langChanged() at class field level, use returned signal in computed()\nexport class MyComponent {\n  readonly #transloco = inject(TranslocoService);\n  readonly #langChanged = langChanged(); // ✅ Called at field level (injection context)\n\n  readonly options = computed(() => {\n    this.#langChanged(); // ✅ Call the stored signal to trigger reactivity\n    return [\n      { value: 1, text: this.#transloco.translate('key1') },\n      { value: 2, text: this.#transloco.translate('key2') }\n    ];\n  });\n}\n```\n\nReference: `libs/mxsecurity/account-page/ui/src/lib/account-table/account-table.component.ts`\n\n---\n\n## 7. Constructor vs inject() with Field Initializers\n\n**CRITICAL**: When using field initializers that depend on injected services, you MUST use `inject()` instead of constructor injection.\n\n```typescript\n// ❌ WRONG - Constructor injection with field initializer\nexport class MyComponent {\n  readonly form = this.#fb.group({ ... }); // ❌ ERROR: #fb is undefined!\n\n  constructor(private fb: NonNullableFormBuilder) {\n    this.#fb = fb;  // Too late! Field initializer already ran\n  }\n}\n\n// ✅ CORRECT - Use inject() for field initializers\nexport class MyComponent {\n  readonly #fb = inject(NonNullableFormBuilder);  // ✅ Available immediately\n  readonly form = this.#fb.group({ ... });  // ✅ Works!\n}\n```\n\n### Why This Happens\n\nField initializers run BEFORE the constructor body. With constructor injection, the injected service isn't available until the constructor runs, but field initializers have already executed by then.\n\n---\n\n## 8. input() vs @Input() Signal Behavior\n\n```typescript\n// ❌ WRONG - Treating input signal as property\nexport class MyComponent {\n  readonly data = input<Data>();\n\n  ngOnInit() {\n    console.log(this.data);  // ❌ Logs the Signal, not the value!\n  }\n}\n\n// ✅ CORRECT - Call the signal to get value\nexport class MyComponent {\n  readonly data = input<Data>();\n\n  ngOnInit() {\n    console.log(this.data());  // ✅ Logs the actual value\n  }\n}\n```\n\n---\n\n## 9. output() vs @Output() EventEmitter\n\n```typescript\n// ❌ WRONG - Using EventEmitter with output()\nexport class MyComponent {\n  readonly save = new EventEmitter<Data>();  // ❌ Don't mix patterns\n}\n\n// ✅ CORRECT - Use output() function\nexport class MyComponent {\n  readonly save = output<Data>();  // ✅ Returns OutputEmitterRef\n\n  onSave() {\n    this.save.emit(this.form.getRawValue());\n  }\n}\n```\n\n---\n\n## 10. computed() vs effect() Usage\n\n```typescript\n// ❌ WRONG - Using effect() for derived state\nexport class MyComponent {\n  filteredItems: Item[] = [];\n\n  constructor() {\n    effect(() => {\n      this.filteredItems = this.items().filter(i => i.active);  // ❌ Side effect for state\n    });\n  }\n}\n\n// ✅ CORRECT - Use computed() for derived state\nexport class MyComponent {\n  readonly filteredItems = computed(() =>\n    this.items().filter(i => i.active)  // ✅ Pure derivation\n  );\n}\n\n// ✅ CORRECT - Use effect() for side effects (logging, API calls)\nexport class MyComponent {\n  constructor() {\n    effect(() => {\n      console.log('Items changed:', this.items());  // ✅ Side effect\n    });\n  }\n}\n```\n\n---\n\n## 11. viewChild() Signal Query\n\n```typescript\n// ❌ WRONG - Old @ViewChild pattern\nexport class MyComponent {\n  @ViewChild('myElement') myElement?: ElementRef;\n\n  ngAfterViewInit() {\n    this.myElement?.nativeElement.focus();\n  }\n}\n\n// ✅ CORRECT - Use viewChild() signal query\nexport class MyComponent {\n  readonly myElement = viewChild<ElementRef>('myElement');\n\n  constructor() {\n    effect(() => {\n      const el = this.myElement();\n      if (el) {\n        el.nativeElement.focus();\n      }\n    });\n  }\n}\n```\n\n---\n\n## Quick Reference: Old vs New Syntax\n\n| Old | New |\n|-----|-----|\n| `*ngIf=\"condition\"` | `@if (condition) { }` |\n| `*ngFor=\"let item of items\"` | `@for (item of items; track item.id) { }` |\n| `[ngSwitch]=\"value\"` | `@switch (value) { }` |\n| `@Input()` | `input()` |\n| `@Output()` | `output()` |\n| `@ViewChild()` | `viewChild()` |\n| `@ViewChildren()` | `viewChildren()` |\n| `@ContentChild()` | `contentChild()` |\n| `@ContentChildren()` | `contentChildren()` |\n| `constructor(private svc: Service)` | `inject(Service)` |\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/pitfalls/ddd-violations.md": "# Common Pitfalls: DDD Architecture Violations\n\n## ❌ **Violation 0: Page Form Template in Features Layer (MOST COMMON MISTAKE)**\n\n**⚠️ THIS IS THE MOST COMMON MIGRATION MISTAKE - ALWAYS CHECK FOR THIS!**\n\nPage setting forms **MUST** be extracted to the UI layer, NOT embedded directly in the page component template.\n\n```\n❌ WRONG STRUCTURE:\nlibs/mxsecurity/dosPolicy-page/\n├── features/\n│   └── dosPolicy-page/\n│       ├── dosPolicy-page.component.ts\n│       └── dosPolicy-page.component.html   # ❌ Contains <form> with <mat-form-field>\n└── ui/\n    └── (empty or missing)                  # ❌ No form component!\n\n✅ CORRECT STRUCTURE:\nlibs/mxsecurity/dosPolicy-page/\n├── features/\n│   └── dosPolicy-page/\n│       ├── dosPolicy-page.component.ts     # Smart component - orchestrates\n│       └── dosPolicy-page.component.html   # Only imports <one-ui-dos-log-setting>\n└── ui/\n    └── dos-log-setting/\n        ├── dos-log-setting.component.ts    # Form logic - NO store injection\n        └── dos-log-setting.component.html  # Form template with mat-form-field\n```\n\n### ❌ WRONG - Form in Features Template\n\n```html\n<!-- features/dosPolicy-page/dosPolicy-page.component.html -->\n<div class=\"gl-page-content\">\n  <one-ui-breadcrumb />\n  <mx-page-title [title]=\"t('features.dos_policy.page_title')\" />\n\n  <!-- ❌ WRONG - Form template directly in page component -->\n  <div class=\"content-wrapper\">\n    <form [formGroup]=\"logForm\" (ngSubmit)=\"onApplyLogSettings()\">\n      <mat-form-field>\n        <mat-label>{{ t('general.common.log') }}</mat-label>\n        <mat-select formControlName=\"log\">\n          @for (option of logOptions; track option.value) {\n            <mat-option [value]=\"option.value\">{{ option.text }}</mat-option>\n          }\n        </mat-select>\n      </mat-form-field>\n      <!-- ... more form fields ... -->\n      <button mat-flat-button type=\"submit\">{{ t('general.button.apply') }}</button>\n    </form>\n  </div>\n</div>\n```\n\n### ✅ CORRECT - Form Extracted to UI Layer\n\n```html\n<!-- features/dosPolicy-page/dosPolicy-page.component.html -->\n<div class=\"gl-page-content\">\n  <one-ui-breadcrumb />\n  <mx-page-title [title]=\"t('features.dos_policy.page_title')\" />\n\n  <div class=\"content-wrapper\">\n    <!-- ✅ CORRECT - Use UI component -->\n    <one-ui-dos-log-setting\n      [initialData]=\"store.rawData()\"\n      [loading]=\"store.loading()\"\n      [noPermission]=\"noPermission\"\n      (apply)=\"onApplyLogSettings($event)\"\n    />\n  </div>\n</div>\n```\n\n```typescript\n// ui/dos-log-setting/dos-log-setting.component.ts\n@Component({\n  selector: 'one-ui-dos-log-setting'\n})\nexport class DosLogSettingComponent {\n  // ✅ Inputs - receive data from parent\n  initialData = input<SRV_IPT_DOS | null>(null);\n  loading = input<boolean>(false);\n  noPermission = input<boolean>(false);\n\n  // ✅ Outputs - emit events to parent\n  apply = output<LogSettingsPayload>();\n\n  // ✅ Form logic only - NO store injection\n  readonly #fb = inject(NonNullableFormBuilder);\n  readonly form = this.#fb.group({ ... });\n\n  onSubmit() {\n    if (this.form.valid) {\n      this.apply.emit(buildLogSettingsPayload(this.form.getRawValue()));\n    }\n  }\n}\n```\n\n### Why this matters\n\n- **Reusability**: Form components can be reused in dialogs or other contexts\n- **Testability**: Form logic can be tested without mocking stores\n- **Separation of Concerns**: Features handle orchestration, UI handles presentation\n- **Consistency**: Same pattern as table components\n\n### How to fix existing violations\n\n1. Create a new component in `ui/` directory (e.g., `dos-log-setting/`)\n2. Move the `<form>` template from page component to UI component\n3. Move form-related logic (form group, validation, options) to UI component\n4. Add `input()` for data and `output()` for events\n5. Update page component to use the new UI component with input/output bindings\n\n---\n\n## ❌ **Violation 1: UI Component Injecting Store**\n\n```typescript\n// ❌ WRONG - UI component should NOT inject store\n@Component({\n  selector: 'one-ui-user-table',\n  template: `...`\n})\nexport class UserTableComponent {\n  private store = inject(UserManagementStore); // ❌ NO!\n\n  users = this.store.users; // ❌ NO!\n\n  deleteUser(id: string) {\n    this.store.deleteUser(id); // ❌ NO!\n  }\n}\n```\n\n```typescript\n// ✅ CORRECT - UI component receives data via input, emits events via output\n@Component({\n  selector: 'one-ui-user-table',\n  template: ` <button (click)=\"deleteUser.emit(user.id)\">Delete</button> `\n})\nexport class UserTableComponent {\n  users = input.required<User[]>(); // ✅ Input\n  deleteUser = output<string>(); // ✅ Output\n}\n\n// Feature component handles the store interaction\n@Component({\n  selector: 'one-ui-user-management-page',\n  template: ` <one-ui-user-table [users]=\"users()\" (deleteUser)=\"onDeleteUser($event)\" /> `\n})\nexport class UserManagementPageComponent {\n  private store = inject(UserManagementStore); // ✅ Features inject store\n  users = this.store.users;\n\n  onDeleteUser(id: string) {\n    this.store.deleteUser(id); // ✅ Features call store\n  }\n}\n```\n\n---\n\n## ❌ **Violation 2: Dialog in UI Layer**\n\n```typescript\n// ❌ WRONG - Dialog in ui/\nlibs/mxsecurity/user-management/ui/create-user-dialog/  // ❌ NO!\n```\n\n```typescript\n// ✅ CORRECT - Dialog in features/\nlibs/mxsecurity/user-management/features/create-user-dialog/  // ✅ YES!\n\n// Dialog can use UI components inside\n@Component({\n  selector: 'one-ui-create-user-dialog',\n  template: `\n    <h2 mat-dialog-title>Create User</h2>\n    <mat-dialog-content>\n      <one-ui-user-form          <!-- ✅ Use UI component -->\n        [user]=\"null\"\n        (save)=\"onSave($event)\"\n      />\n    </mat-dialog-content>\n  `\n})\nexport class CreateUserDialogComponent {\n  private dialogRef = inject(MatDialogRef); // ✅ Features manage dialog\n}\n```\n\n---\n\n## ❌ **Violation 3: Business Logic in Features**\n\n```typescript\n// ❌ WRONG - Business logic in features component\n@Component({\n  selector: 'one-ui-user-management-page',\n  template: `...`\n})\nexport class UserManagementPageComponent {\n  private http = inject(HttpClient);\n\n  loadUsers() {\n    // ❌ NO! Business logic belongs in domain layer\n    this.http.get('/api/users').subscribe((users) => {\n      this.users = users;\n    });\n  }\n\n  validateUser(user: User): boolean {\n    // ❌ NO! Validation logic belongs in domain layer\n    return user.email.includes('@') && user.age >= 18;\n  }\n}\n```\n\n```typescript\n// ✅ CORRECT - Business logic in domain layer\n// domain/user-management.store.ts\nexport const UserManagementStore = signalStore(\n  withMethods((store, api = inject(UserManagementApiService)) => ({\n    loadUsers: queryMethod<void, User[]>({\n      store,\n      observe: () => api.getUsers(), // ✅ API call in domain\n      next: (users) => patchState(store, { users })\n    })\n  }))\n);\n\n// domain/user.validator.ts\nexport function validateUser(user: User): boolean {\n  return user.email.includes('@') && user.age >= 18; // ✅ Logic in domain\n}\n\n// features/user-management-page.component.ts\nexport class UserManagementPageComponent {\n  private store = inject(UserManagementStore);\n\n  constructor() {\n    effect(() => {\n      this.store.loadUsers(); // ✅ Features just call store methods\n    });\n  }\n}\n```\n\n---\n\n## ❌ **Violation 4: Form with HTTP Calls in UI**\n\n```typescript\n// ❌ WRONG - UI form making HTTP calls\n@Component({\n  selector: 'one-ui-user-form',\n  template: `...`\n})\nexport class UserFormComponent {\n  private http = inject(HttpClient); // ❌ NO!\n\n  onSubmit() {\n    // ❌ NO! HTTP calls belong in domain layer\n    this.http.post('/api/users', this.form.value).subscribe();\n  }\n}\n```\n\n```typescript\n// ✅ CORRECT - UI form emits events, features handle API\n// ui/user-form.component.ts\n@Component({\n  selector: 'one-ui-user-form',\n  template: `\n    <form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n      <button type=\"submit\">Save</button>\n    </form>\n  `\n})\nexport class UserFormComponent {\n  save = output<User>(); // ✅ Output event\n\n  onSubmit() {\n    if (this.form.valid) {\n      this.save.emit(this.form.value); // ✅ Just emit\n    }\n  }\n}\n\n// features/user-management-page.component.ts\n@Component({\n  template: ` <one-ui-user-form (save)=\"onSave($event)\" /> `\n})\nexport class UserManagementPageComponent {\n  private store = inject(UserManagementStore);\n\n  onSave(user: User) {\n    this.store.createUser(user); // ✅ Features call store\n  }\n}\n```\n\n---\n\n## ❌ **Violation 5: Shared Component in Wrong Layer**\n\n```typescript\n// ❌ WRONG - Generic table in features (not reusable)\nlibs/mxsecurity/user-management/features/user-table/  // ❌ NO!\n\n// ❌ WRONG - Feature-specific component in ui (not generic)\nlibs/mxsecurity/shared/ui/user-management-page/      // ❌ NO!\n```\n\n```typescript\n// ✅ CORRECT - Generic components in ui, specific in features\nlibs/mxsecurity/user-management/ui/user-table/        // ✅ Generic table in ui\nlibs/mxsecurity/user-management/features/user-management-page/  // ✅ Specific page in features\n```\n\n---\n\n## Quick Reference: Layer Responsibilities\n\n| Layer | Responsibilities | Can Inject |\n|-------|------------------|------------|\n| **UI** | Presentational components, forms, tables | Services (NOT stores) |\n| **Features** | Page components, dialogs, orchestration | Stores, Services |\n| **Domain** | Business logic, state, API services | HttpClient, Services |\n| **Shell** | Routing, layout | Stores (for guards) |\n\n## Quick Reference: What Goes Where\n\n| Component Type | Layer | Can Use Store? |\n|----------------|-------|----------------|\n| Page component | Features | ✅ Yes |\n| Dialog | Features | ✅ Yes |\n| Form component | UI | ❌ No |\n| Table component | UI | ❌ No |\n| Button/Input | UI | ❌ No |\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/pitfalls/forms-services.md": "# Common Pitfalls: Forms & Services\n\n## ⚠️ Store Methods Import Path - Use shared/domain NOT shared/util\n\n**CRITICAL**: `mutationMethod` and `queryMethod` must be imported from `@one-ui/mxsecurity/shared/domain`, NOT from `@one-ui/mxsecurity/shared/util`.\n\n### ❌ **WRONG - Importing from shared/util**\n\n```typescript\n// ❌ WRONG - This path does not exist\nimport { mutationMethod, queryMethod } from '@one-ui/mxsecurity/shared/util';\n```\n\n### ✅ **CORRECT - Importing from shared/domain**\n\n```typescript\n// ✅ CORRECT - Import from shared/domain\nimport { loadingInitialState, mutationMethod, queryMethod } from '@one-ui/mxsecurity/shared/domain';\n```\n\n### Full Store Example\n\n```typescript\nimport { inject } from '@angular/core';\nimport { patchState, signalStore, withMethods, withState } from '@ngrx/signals';\nimport type { LoadingState } from '@one-ui/mxsecurity/shared/domain';\nimport { loadingInitialState, mutationMethod, queryMethod } from '@one-ui/mxsecurity/shared/domain';\nimport { MyApiService } from './my-page.api';\n\nexport const MyStore = signalStore(\n  withState(initialState),\n  withMethods((store, api = inject(MyApiService)) => ({\n    loadPageData: queryMethod<void, Response>({\n      store,\n      observe: () => api.getData$(),\n      next: (data) => patchState(store, { data })\n    }),\n    updateData: mutationMethod<Request, Response>({\n      store,\n      observe: (input) => api.updateData$(input)\n    })\n  }))\n);\n```\n\n---\n\n## ⚠️ Constants and Enums - Don't Create Separate Definition Files\n\n**CRITICAL**: Don't create separate `.def.ts` files for constants/enums that are only used in one place.\n\n### ❌ **WRONG - Creating Unnecessary Definition Files**\n\n```typescript\n// ❌ WRONG - libs/mxsecurity/8021x-page/domain/src/lib/8021x-page.def.ts\nexport enum AuthMode {\n  RADIUS = 0,\n  LOCAL = 1,\n  RADIUS_LOCAL = 2\n}\n\nexport const LOCAL_DATABASE_SIZE_RANGE = { max: 32 };\nexport const PORT_AUTH_ENABLE = { ... };\n```\n\n### ✅ **CORRECT - Define Constants Where Used**\n\n```typescript\n// ✅ CORRECT - Define enum directly in the component that uses it\n// libs/mxsecurity/8021x-page/ui/src/lib/general-settings-form/general-settings-form.component.ts\nenum AuthMode {\n  RADIUS = 0,\n  LOCAL = 1,\n  RADIUS_LOCAL = 2\n}\n\n@Component({ ... })\nexport class GeneralSettingsFormComponent {\n  readonly authModeOptions = [\n    { value: AuthMode.RADIUS, text: 'RADIUS' },\n    { value: AuthMode.LOCAL, text: 'Local' },\n    { value: AuthMode.RADIUS_LOCAL, text: 'RADIUS + Local' }\n  ];\n}\n```\n\n```typescript\n// ✅ CORRECT - Define constant directly in the component\n// libs/mxsecurity/8021x-page/ui/src/lib/local-database-table/local-database-table.component.ts\n@Component({ ... })\nexport class LocalDatabaseTableComponent {\n  readonly tableMaxSize = 32;  // Not imported from .def.ts\n}\n```\n\n### Guidelines\n\n- **Only extract to shared domain** when genuinely reused across multiple files\n- **Use API types directly** from `@one-ui/mxsecurity/shared/domain` instead of creating local type aliases\n- **Delete unused exports** - if a constant is no longer used, remove it completely\n\n---\n\n## ⚠️ Service Usage - Use MxSnackbarService\n\n**CRITICAL**: Don't use `MatSnackBar` directly. Always use `MxSnackbarService` from `@moxa/formoxa/mx-snackbar`.\n\n### ❌ **WRONG - Using MatSnackBar Directly**\n\n```typescript\nimport { MatSnackBar } from '@angular/material/snack-bar';\n\n@Component({ ... })\nexport class MyComponent {\n  readonly #snackBar = inject(MatSnackBar);  // ❌ WRONG\n\n  showMessage() {\n    this.#snackBar.open('Success!', 'Close', { duration: 3000 });  // ❌ WRONG\n  }\n}\n```\n\n### ✅ **CORRECT - Using MxSnackbarService**\n\n```typescript\nimport { MxSnackbarService } from '@moxa/formoxa/mx-snackbar';\n\n@Component({ ... })\nexport class MyComponent {\n  readonly #snackBar = inject(MxSnackbarService);  // ✅ CORRECT\n\n  showMessage() {\n    this.#snackBar.open('Success!');  // ✅ CORRECT - consistent styling\n  }\n}\n```\n\n### Why Use MxSnackbarService\n\n- Provides consistent styling and behavior across the application\n- Automatically handles i18n and theming\n- Follows Moxa design system guidelines\n\n---\n\n## ⚠️ Form Controls - Use controls.xxx Instead of .get()\n\n**CRITICAL**: Use typed `controls.xxx` instead of `.get('xxx')` for better type safety.\n\n### ❌ **WRONG - Using .get()**\n\n```typescript\n// ❌ WRONG - No type safety, requires null check\nconst value = this.form.get('username')?.value;\nconst control = this.form.get('password');\nif (control) {\n  control.setErrors({ ... });\n}\n```\n\n### ✅ **CORRECT - Using controls.xxx**\n\n```typescript\n// ✅ CORRECT - Type safe, no null check needed\nconst value = this.form.controls.username.value;\nconst control = this.form.controls.password;\ncontrol.setErrors({ ... });\n```\n\n### In ValidatorFn (with type assertion)\n\nWhen using `ValidatorFn`, the parameter is `AbstractControl` which doesn't have typed controls. Use type assertion:\n\n```typescript\n#myValidator(): ValidatorFn {\n  return (formGroup: AbstractControl): null => {\n    // ✅ Cast to typed form to access controls\n    const controls = (formGroup as typeof this.form).controls;\n    const fieldA = controls.fieldA.value;\n    const fieldB = controls.fieldB.value;\n    const fieldBControl = controls.fieldB;\n\n    // No null check needed - typed controls are guaranteed to exist\n    if (fieldA > fieldB) {\n      fieldBControl.setErrors({ customError: true });\n    }\n\n    return null;\n  };\n}\n```\n\n### Why Use controls.xxx\n\n- **Type safety** - TypeScript knows the control types\n- **No null checks** - Typed controls are guaranteed to exist\n- **Better IDE support** - Autocomplete and refactoring work correctly\n- **Compile-time errors** - Typos in control names are caught at build time\n\n---\n\n## ⚠️ Effect with Form Controls - MUST Use toSignal()\n\n**CRITICAL**: When using Angular `effect()` to react to form control value changes, you **MUST** use `toSignal()` to convert `valueChanges` to a signal. Reading form control values directly is **NOT reactive**.\n\n### ❌ **WRONG - Not Reactive**\n\n```typescript\nconstructor() {\n  // ❌ WRONG - This effect will NOT re-run when the form control value changes!\n  effect(() => {\n    const retryEnabled = this.form.controls.authenticationRetry.value;  // Not a signal!\n    if (retryEnabled) {\n      this.form.controls.authenticationRetryInterval.enable();\n    } else {\n      this.form.controls.authenticationRetryInterval.disable();\n    }\n  });\n}\n```\n\n### ✅ **CORRECT - Using toSignal()**\n\n```typescript\nimport { toSignal } from '@angular/core/rxjs-interop';\n\n// Convert valueChanges to a signal\nreadonly #authenticationRetryChange = toSignal(\n  this.form.controls.authenticationRetry.valueChanges,\n  { initialValue: false }\n);\n\nconstructor() {\n  // ✅ CORRECT - Effect will re-run when the signal changes\n  effect(\n    () => {\n      const retryEnabled = this.#authenticationRetryChange();  // Reading a signal!\n      if (retryEnabled) {\n        this.form.controls.authenticationRetryInterval.enable();\n      } else {\n        this.form.controls.authenticationRetryInterval.disable();\n      }\n    },\n    { allowSignalWrites: true }  // Required when effect modifies form state\n  );\n}\n```\n\n### Key Points\n\n1. **Use `toSignal()`** - Convert `valueChanges` Observable to a signal\n2. **Provide `initialValue`** - Required for synchronous access before first emission\n3. **Use `allowSignalWrites: true`** - Required when the effect modifies signals or form state\n\nSee `forms/patterns.md` for detailed examples and patterns.\n\n---\n\n## ⚠️ Empty Value Display - Use EMPTY_DASH\n\n**CRITICAL**: When migrating code that displays empty/null values, replace `this.utils.emptyDash` and `this.utils.emptyData` with `EMPTY_DASH` from shared domain.\n\n### ❌ **Old System**\n\n```typescript\n// Old patterns using utils service\nthis.utils.emptyDash    // returns '--' or '---'\nthis.utils.emptyData    // returns '--' or '---'\n```\n\n### ✅ **New System - Use EMPTY_DASH**\n\n```typescript\nimport { EMPTY_DASH } from '@one-ui/mxsecurity/shared/domain';\n\n// Use EMPTY_DASH constant\nconst display = value ? value : EMPTY_DASH;\n\n// In template data transformation\nsport: row.sport ? `${row.sport}` : EMPTY_DASH,\ndport: row.dport ? `${row.dport}` : EMPTY_DASH,\n```\n\n### Location\n\n```\nlibs/mxsecurity/shared/domain/src/lib/helpers/text.helper.ts\n```\n\n### Exception\n\nIf the old code uses `emptyDash`/`emptyData` with special conditional logic (e.g., checking if value equals the empty string for specific behavior), handle those cases separately rather than blindly replacing.\n\n---\n\n## ⚠️ appNumberOnly Directive - MUST Migrate to oneUiNumberOnly\n\n**CRITICAL**: When migrating from the old project, if you see `appNumberOnly` directive on input fields, you **MUST** replace it with `oneUiNumberOnly` from the new shared library.\n\n### ❌ **Old Project - appNumberOnly**\n\n```html\n<!-- Old project uses appNumberOnly -->\n<input matInput formControlName=\"port\" appNumberOnly />\n```\n\n### ✅ **New Project - oneUiNumberOnly**\n\n```html\n<!-- New project uses oneUiNumberOnly -->\n<input matInput formControlName=\"port\" oneUiNumberOnly />\n```\n\n### Import and Setup\n\n```typescript\nimport { NumberOnlyDirective } from '@one-ui/mxsecurity/shared/domain';\n\n@Component({\n  imports: [\n    // ...\n    NumberOnlyDirective  // Add to imports\n  ]\n})\nexport class MyComponent {}\n```\n\n### What It Does\n\nThe `NumberOnlyDirective` (`libs/mxsecurity/shared/domain/src/lib/directives/number-only.directive.ts`):\n\n- Restricts input to numeric characters only (0-9)\n- Automatically strips non-numeric characters on input\n- Sets the form control value to `number | null` (not string)\n- Uses `{ emitEvent: false }` to prevent unnecessary form change events\n\n### Common Use Cases\n\n- Port number inputs (e.g., RADIUS port, SSH port)\n- Numeric ID fields\n- Count/quantity fields\n\n### Migration Search Pattern\n\nWhen migrating a page, search for `appNumberOnly` in the old project:\n\n```bash\ngrep -r \"appNumberOnly\" /path/to/old/project/src/app/pages/{page-name}/\n```\n\nReplace all occurrences with `oneUiNumberOnly` and ensure the directive is imported.\n\n---\n\n## ⚠️ Password Fields - Use mx-password-input\n\n**CRITICAL**: For password input fields, use the `<mx-password-input>` component instead of manually implementing show/hide password toggle.\n\n### ❌ **WRONG - Manual Password Toggle**\n\n```html\n<!-- ❌ WRONG - Manual implementation -->\n<mat-form-field>\n  <mat-label>Password</mat-label>\n  <input matInput [type]=\"hidePassword ? 'password' : 'text'\" formControlName=\"password\" />\n  <button mat-icon-button matSuffix (click)=\"hidePassword = !hidePassword\">\n    <mat-icon>{{ hidePassword ? 'visibility_off' : 'visibility' }}</mat-icon>\n  </button>\n</mat-form-field>\n```\n\n### ✅ **CORRECT - Use mx-password-input**\n\n```html\n<!-- ✅ CORRECT - Use component -->\n<mx-password-input\n  formControlName=\"password\"\n  [maxlength]=\"32\"\n></mx-password-input>\n```\n\n```typescript\nimport { MxPasswordInputComponent } from '@moxa/formoxa/mx-password-input';\n\n@Component({\n  imports: [MxPasswordInputComponent]\n})\nexport class MyComponent {}\n```\n\n---\n\n## ⚠️ TRANSLOCO_SCOPE - DO NOT USE\n\n**CRITICAL**: Do NOT use `TRANSLOCO_SCOPE` provider in components. The mxsecurity project uses global translation keys, not scoped translations.\n\n### ❌ **WRONG - Using TRANSLOCO_SCOPE**\n\n```typescript\nimport { TRANSLOCO_SCOPE } from '@jsverse/transloco';\n\n@Component({\n  selector: 'one-ui-my-page',\n  providers: [\n    {\n      provide: TRANSLOCO_SCOPE,\n      useValue: {\n        scope: 'my-feature',\n        alias: 'feature'\n      }\n    }\n  ]\n})\nexport class MyPageComponent {}\n```\n\n### ✅ **CORRECT - No TRANSLOCO_SCOPE**\n\n```typescript\nimport { TranslocoModule } from '@jsverse/transloco';\n\n@Component({\n  selector: 'one-ui-my-page',\n  imports: [TranslocoModule]\n  // NO providers for TRANSLOCO_SCOPE\n})\nexport class MyPageComponent {}\n```\n\n### Template Usage\n\n```html\n<!-- Use global keys directly -->\n<div *transloco=\"let t\">\n  <mx-page-title [title]=\"t('features.my_feature.page_title')\" />\n  <button>{{ t('general.button.apply') }}</button>\n</div>\n```\n\n### Reference\n\nFor correct patterns, refer to `libs/switch` projects which use global translation keys.\n\n---\n\n## ⚠️ Readonly Display - Use mx-key-value\n\n**CRITICAL**: For displaying readonly key-value pairs (like \"Current Time: 2024-01-01 12:00:00\"), use `<mx-key-value>` instead of disabled form fields.\n\n### ❌ **WRONG - Disabled Form Field**\n\n```html\n<!-- ❌ WRONG - Don't use disabled form field for readonly display -->\n<mat-form-field>\n  <mat-label>Current Time</mat-label>\n  <input matInput [value]=\"currentTime()\" disabled />\n</mat-form-field>\n```\n\n### ✅ **CORRECT - Use mx-key-value**\n\n```html\n<!-- ✅ CORRECT - Use mx-key-value component -->\n<mx-key-value\n  [key]=\"t('features.time.current_time')\"\n  [value]=\"currentTime()\"\n></mx-key-value>\n```\n\n```typescript\nimport { MxKeyValueComponent } from '@moxa/formoxa/mx-key-value';\n\n@Component({\n  imports: [MxKeyValueComponent]\n})\nexport class MyComponent {}\n```\n\n### Note\n\nUse `[key]` attribute (NOT `[label]`) for the label text.\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/pitfalls/index.md": "# Common Migration Pitfalls - Index\n\nThis document has been split into multiple files for better organization. Please refer to the specific files below:\n\n## File Structure\n\n| File | Topics |\n|------|--------|\n| [translation-layout.md](./translation-layout.md) | Translation keys, form layout, page styling, gl-page-content, table toolbar |\n| [ddd-violations.md](./ddd-violations.md) | DDD architecture violations (5 types) |\n| [angular-syntax.md](./angular-syntax.md) | Angular syntax pitfalls, signals, control flow |\n| [forms-services.md](./forms-services.md) | Forms, services, directives, constants |\n\n---\n\n## Quick Reference\n\n### Translation & Layout\n- ⚠️ Translation Keys - MUST Match Source Exactly\n- ⚠️ Form Layout - MUST Match Source Exactly\n- ⚠️ Page Component Styling - NO Padding\n- ⚠️ Page Layout - MUST Use gl-page-content\n- ⚠️ Table Toolbar Button Order\n\n### DDD Architecture Violations\n- ❌ Violation 0: Page Form Template in Features Layer (MOST COMMON)\n- ❌ Violation 1: UI Component Injecting Store\n- ❌ Violation 2: Dialog in UI Layer\n- ❌ Violation 3: Business Logic in Features\n- ❌ Violation 4: Form with HTTP Calls in UI\n- ❌ Violation 5: Shared Component in Wrong Layer\n\n### Angular Syntax Pitfalls\n- Mixing Old and New Control Flow\n- Forgetting `track` in `@for`\n- Using Module-based Patterns\n- Not Using Signals with SignalStore\n- mxLabelOptionalText - Use Default Value\n- langChanged() Must Be Called in Injection Context\n- Constructor vs inject() with Field Initializers\n- input() vs @Input() Signal Behavior\n- output() vs @Output() EventEmitter\n- computed() vs effect() Usage\n- viewChild() Signal Query\n\n### Forms & Services\n- ⚠️ Constants and Enums - Don't Create Separate Definition Files\n- ⚠️ Service Usage - Use MxSnackbarService\n- ⚠️ Form Controls - Use controls.xxx Instead of .get()\n- ⚠️ Effect with Form Controls - MUST Use toSignal()\n- ⚠️ Empty Value Display - Use EMPTY_DASH\n- ⚠️ appNumberOnly Directive - MUST Migrate to oneUiNumberOnly\n- ⚠️ Password Fields - Use mx-password-input\n- ⚠️ Readonly Display - Use mx-key-value\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/pitfalls/translation-layout.md": "# Common Pitfalls: Translation & Layout\n\n## ⚠️ Translation Keys - MUST Match Source Exactly\n\n**CRITICAL**: Translation keys must be **exactly the same** as the old system. Do NOT create new translation keys or modify existing ones.\n\n### Why This Matters\n\n- Translation files are shared across the application\n- Existing translation keys already have translations in multiple languages\n- Creating new keys means missing translations and broken i18n\n\n### ❌ **WRONG - Creating New Translation Keys**\n\n```typescript\n// ❌ WRONG - Inventing new translation keys\nheader: this.#transloco.translate('features.cert_signing_request.csr_table.name')\nheader: this.#transloco.translate('features.cert_signing_request.csr_table.subject')\n\n// ❌ WRONG - Modifying key structure\n{{ t('features.cert_signing_request.dialog.create_title') }}\n{{ t('features.cert_signing_request.form.country') }}\n```\n\n### ✅ **CORRECT - Use Exact Keys from Source**\n\n```typescript\n// ✅ CORRECT - Copy exact keys from old system\nheader: this.#transloco.translate('general.common.name')\nheader: this.#transloco.translate('features.trusted_ca_cert.subject')\n\n// ✅ CORRECT - Match source exactly\n{{ t('features.cert_signing_request.title_create_csr_dialog_title') }}\n{{ t('features.cert_signing_request.country_name') }}\n```\n\n### How to Find Correct Translation Keys\n\n1. **Read the source HTML template** in the old project\n2. **Copy the exact translation key** including the full path\n3. **Do NOT abbreviate or restructure** the key path\n\nExample - Check source file:\n```html\n<!-- Source: /Users/jayden/f2e-networking-jayden/apps/mxsecurity-web/src/app/pages/xxx/xxx.component.html -->\n{{ 'features.cert_signing_request.title_create_csr_dialog_title' | translate }}\n{{ 'general.common.name' | translate }}\n{{ 'features.trusted_ca_cert.subject' | translate }}\n```\n\nUse these **exact same keys** in the migrated code:\n```html\n<!-- Target: New Angular 20 component -->\n{{ t('features.cert_signing_request.title_create_csr_dialog_title') }}\n{{ t('general.common.name') }}\n{{ t('features.trusted_ca_cert.subject') }}\n```\n\n### Common Translation Key Patterns in MXsecurity\n\n| Type | Pattern | Example |\n|------|---------|---------|\n| Page title | `features.{feature}.page_title` | `features.cert_signing_request.page_title` |\n| Dialog title | `features.{feature}.title_{action}_{type}_dialog_title` | `features.cert_signing_request.title_create_csr_dialog_title` |\n| Form field | `features.{feature}.{field_name}` | `features.cert_signing_request.country_name` |\n| Common | `general.common.{name}` | `general.common.name` |\n| Button | `general.button.{action}` | `general.button.create` |\n| Tooltip | `general.tooltip.{action}` | `general.tooltip.export` |\n\n---\n\n## ⚠️ Form Layout - MUST Match Source Exactly\n\n**CRITICAL**: Form field layouts (row groupings) must match the source exactly. Do NOT change which fields appear on the same row.\n\n### Why This Matters\n\n- UI consistency with the old system\n- Users expect the same visual layout\n- Field groupings often have logical meaning\n\n### ❌ **WRONG - Changing Form Layout**\n\n```html\n<!-- Source has org + orgUnit on same row -->\n<div fxLayout=\"row\">\n  <mat-form-field>organization_name</mat-form-field>\n  <mat-form-field>organizational_unit_name</mat-form-field>\n</div>\n\n<!-- ❌ WRONG - Migrated with each field on separate row -->\n<mat-form-field>organization_name</mat-form-field>\n<mat-form-field>organizational_unit_name</mat-form-field>\n```\n\n### ✅ **CORRECT - Preserve Row Groupings**\n\n```html\n<!-- ✅ CORRECT - Use .form-row to maintain same layout -->\n<div class=\"form-row\">\n  <mat-form-field>organization_name</mat-form-field>\n  <mat-form-field>organizational_unit_name</mat-form-field>\n</div>\n```\n\n### How to Preserve Form Layout\n\n1. **Analyze source template** - Look for `fxLayout=\"row\"` or similar row groupings\n2. **Use `.form-row` class** - Available in `libs/mxsecurity/shared/styles/_form.scss`\n3. **Group fields exactly as source** - Same fields on same row\n\n---\n\n## ⚠️ Page Component Styling - NO Padding\n\n**CRITICAL**: Do NOT add `padding: 24px` to page components. The layout padding is handled by the shell/app layout.\n\n### ❌ **WRONG - Adding Padding to Page Component**\n\n```scss\n// ❌ WRONG - page-name.component.scss\n:host {\n  display: block;\n  padding: 24px;  // ❌ NO! Don't add padding\n}\n```\n\n### ✅ **CORRECT - No Padding in Page Component**\n\n```scss\n// ✅ CORRECT - page-name.component.scss\n:host {\n  display: block;\n}\n```\n\n---\n\n## ⚠️ Page Layout - MUST Use gl-page-content\n\n**CRITICAL**: All page components **MUST** use `class=\"gl-page-content\"` on the root element. Without this class, **tables and content will NOT display correctly!**\n\n### ❌ **WRONG - Using ng-container (Tables won't display!)**\n\n```html\n<!-- ❌ WRONG - ng-container doesn't create DOM element, so styles don't apply -->\n<ng-container *transloco=\"let t\">\n  <one-ui-breadcrumb />\n  <mx-page-title>{{ t('features.xxx.page_title') }}</mx-page-title>\n  <div class=\"content-wrapper\">\n    <one-ui-my-table [tableData]=\"tableData()\" />  <!-- ❌ Won't display! -->\n  </div>\n</ng-container>\n```\n\n### ✅ **CORRECT - Use div with gl-page-content class**\n\n```html\n<!-- ✅ CORRECT - div with gl-page-content class -->\n<div *transloco=\"let t\" class=\"gl-page-content\">\n  <one-ui-breadcrumb />\n  <mx-page-title [title]=\"t('features.xxx.page_title')\" />\n  <div class=\"content-wrapper\">\n    <one-ui-my-table [tableData]=\"tableData()\" />  <!-- ✅ Displays correctly -->\n  </div>\n</div>\n```\n\n### Why This Happens\n\n`<ng-container>` is a logical grouping element that doesn't create a DOM element. The `gl-page-content` styles require a real DOM element to apply properly. Without it, the page layout CSS doesn't work and content (especially tables) won't be visible.\n\n### Also Note\n\n- Use `<mx-page-title [title]=\"t('...')\" />` with input binding\n- NOT `<mx-page-title>{{ t('...') }}</mx-page-title>` with content projection\n\n---\n\n## ⚠️ Table Toolbar Button Order\n\n**CRITICAL**: Table toolbar buttons must follow a specific order: **Refresh → Create/Delete** (if applicable)\n\n### Button Order Pattern\n\n```html\n<ng-template #rightToolbarTemplate>\n  <!-- 1. Refresh button (only if old code has it, comes first) -->\n  <button mat-button (click)=\"refresh.emit()\">\n    <mat-icon svgIcon=\"icon:refresh\"></mat-icon>\n    {{ t('general.tooltip.refresh') }}\n  </button>\n\n  <!-- 2. Create button (shown when nothing selected) -->\n  @if (selection.length === 0) {\n    <button mat-stroked-button (click)=\"add.emit()\">\n      {{ t('general.button.create') }}\n    </button>\n  }\n\n  <!-- 3. Delete button (shown when items selected) -->\n  @if (selection.length >= 1) {\n    <button mat-stroked-button (click)=\"onDelete()\">\n      {{ t('general.button.delete') }}\n    </button>\n  }\n</ng-template>\n```\n\n### Button Visibility Rules\n\n| Button | Visibility | Position |\n|--------|------------|----------|\n| Refresh | Only if old code has it | First |\n| Create | When `selection.length === 0` | After Refresh |\n| Delete | When `selection.length >= 1` | After Refresh |\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/shared-stores.md": "# Shared Stores\n\nThis document describes shared stores that are commonly used across multiple pages.\n\n## PortDataStore\n\nManages port data (allPortMap, normalPortMap) for the entire application.\n\n**Location:** `libs/mxsecurity/shared/domain/src/lib/store/port-data/port-data.store.ts`\n\n**Legacy Equivalent:** `apps/mxsecurity-web/src/app/shared/Service/utils.service.ts`\n\n### Import\n\n```typescript\nimport { PortDataStore, type PortMapType } from '@one-ui/mxsecurity/shared/domain';\n```\n\n### PortMapType Interface\n\n```typescript\nexport interface PortMapType {\n  name: string; // Port display name (e.g., \"Port 1\")\n  index: number; // Port index (0-based)\n  laMember: boolean; // Whether this port is a Link Aggregation member\n  exist: boolean; // Whether this port exists\n  bandwidth: number; // Port bandwidth\n  laGroup: number; // LA group number (0 = disabled, 1-4 = group index)\n  descName: string; // Port description name\n}\n```\n\n### Method Mapping (Legacy → New)\n\n| Legacy (UtilsService)                 | New (PortDataStore)                    |\n| ------------------------------------- | -------------------------------------- |\n| `allPortMap` property                 | `allPortMap()` signal                  |\n| `normalPortMap` property              | `normalPortMap()` signal               |\n| `portNumber` getter                   | `portCount()` computed                 |\n| `getPortNameByIndex(index: number)`   | `getPortNameByIndex(index)`            |\n| `getPortNameByIndex(index: number[])` | `getPortNamesByIndices(indices)`       |\n| `updateLocalStoragePortData()`        | `loadPortData()` / `refreshPortData()` |\n\n### Usage in Components\n\n```typescript\n@Component({...})\nexport class MyPageComponent {\n  readonly #portDataStore = inject(PortDataStore);\n\n  // Read port data (reactive)\n  readonly allPorts = this.#portDataStore.allPortMap;\n  readonly normalPorts = this.#portDataStore.normalPortMap;\n  readonly portCount = this.#portDataStore.portCount;\n\n  // Get port name by index\n  getPortName(index: number): string {\n    return this.#portDataStore.getPortNameByIndex(index);\n  }\n\n  // Get multiple port names\n  getPortNames(indices: number[]): string {\n    return this.#portDataStore.getPortNamesByIndices(indices);\n  }\n\n  // Filter ports (example: exclude LA members)\n  readonly availablePorts = computed(() =>\n    this.#portDataStore.normalPortMap().filter(port => !port.laMember)\n  );\n}\n```\n\n### When Port Data is Loaded\n\nPort data is automatically loaded in two scenarios:\n\n1. **App Initialization (Login):** `login-page.store.ts` calls `loadPortData()` after login\n2. **Auto-login (Page Refresh):** `app-init.config.ts` calls `loadPortData()` if already logged in\n\n### When to Refresh Port Data\n\nCall `refreshPortData()` after operations that may change port configuration:\n\n```typescript\n// Example: After config restore\nthis.#portDataStore.refreshPortData();\n```\n\n**Known scenarios requiring refresh:**\n\n- After config restore (`config-bk-res-page`)\n- After LA (Link Aggregation) settings change\n- After port settings change\n\n### Legacy Code Pattern vs New Pattern\n\n**Legacy (reading from sessionStorage):**\n\n```typescript\n// Old way - reading from sessionStorage\nconst normalPortMap: PortMapType[] = JSON.parse(sessionStorage.getItem('normalPortMap'));\nconst allPort = filter(normalPortMap, (port) => !port.laMember);\n```\n\n**New (using PortDataStore):**\n\n```typescript\n// New way - using PortDataStore signal\nreadonly #portDataStore = inject(PortDataStore);\n\nreadonly availablePorts = computed(() =>\n  this.#portDataStore.normalPortMap().filter(port => !port.laMember)\n);\n```\n\n### API Service\n\nThe underlying API service is `PortDataApiService`:\n\n**Location:** `libs/mxsecurity/shared/domain/src/lib/api/port-data.api.ts`\n\nIt fetches data from 4 APIs:\n\n- `SRV_PORT_LINK_STATUS` - port link status\n- `SRV_TRUNK_SETTING` - trunk/LA settings (if supported)\n- `portBandwidth` - port bandwidth data\n- `portDesc` - port descriptions\n\n## AuthStore\n\nManages authentication state and service permissions for the entire application.\n\n**Location:** `libs/mxsecurity/shared/domain/src/lib/store/auth/auth.store.ts`\n\n**Legacy Equivalent:** `apps/mxsecurity-web/src/app/shared/Service/auth.service.ts` (the `auth` object)\n\n### Import\n\n```typescript\nimport { AuthStore } from '@one-ui/mxsecurity/shared/domain';\n```\n\n### serviceDefine\n\nThe `serviceDefine` property contains boolean flags indicating which services/features are available on the current device. This is critical for:\n\n1. **Conditional API calls** - Only fetch data for services that exist on the device\n2. **Tab/Section visibility** - Show/hide UI elements based on device capabilities\n3. **Feature gating** - Enable/disable functionality based on device support\n\n### Method Mapping (Legacy → New)\n\n| Legacy (auth service)                          | New (AuthStore)                                      |\n| ---------------------------------------------- | ---------------------------------------------------- |\n| `auth.serviceDefine`                           | `AuthStore.serviceDefine()`                          |\n| `auth.serviceDefine.SRV_PORT_EVENT`            | `AuthStore.serviceDefine()?.SRV_PORT_EVENT`          |\n| `auth.serviceDefine.SRV_CPU_USAGE_ALARM`       | `AuthStore.serviceDefine()?.SRV_CPU_USAGE_ALARM`     |\n| `auth.serviceDefine.SRV_PORT_USAGE_ALARM`      | `AuthStore.serviceDefine()?.SRV_PORT_USAGE_ALARM`    |\n| `auth.serviceDefine.SRV_PORT_RXDISCARD_ALARM`  | `AuthStore.serviceDefine()?.SRV_PORT_RXDISCARD_ALARM`|\n| `auth.serviceDefine.SRV_LICENSE_NOTIFICATION`  | `AuthStore.serviceDefine()?.SRV_LICENSE_NOTIFICATION`|\n| `auth.serviceDefine.SRV_TRUNK_SETTING`         | `AuthStore.serviceDefine()?.SRV_TRUNK_SETTING`       |\n| `auth.serviceDefine.SRV_IGMP_SNOOP`            | `AuthStore.serviceDefine()?.SRV_IGMP_SNOOP`          |\n| `auth.serviceDefine.SRV_POWER_MANAGEMENT`      | `AuthStore.serviceDefine()?.SRV_POWER_MANAGEMENT`    |\n\n### Usage in Store\n\n```typescript\nimport { AuthStore } from '@one-ui/mxsecurity/shared/domain';\n\nexport const MyPageStore = signalStore(\n  withMethods((store, authStore = inject(AuthStore)) => {\n    // Get permissions for conditional API calls\n    const getPermissions = () => {\n      const serviceDefine = authStore.serviceDefine();\n      return {\n        SRV_PORT_EVENT: serviceDefine?.SRV_PORT_EVENT ?? false,\n        SRV_CPU_USAGE_ALARM: serviceDefine?.SRV_CPU_USAGE_ALARM ?? false,\n      };\n    };\n\n    return {\n      // Permission getters for tab visibility\n      hasPortEventPermission: () => authStore.serviceDefine()?.SRV_PORT_EVENT ?? false,\n      hasCpuUsageAlarmPermission: () => authStore.serviceDefine()?.SRV_CPU_USAGE_ALARM ?? false,\n\n      loadPageData: queryMethod({\n        observe: () => api.loadPageData$(getPermissions()),\n        // ...\n      }),\n    };\n  })\n);\n```\n\n### Usage in Components\n\n```typescript\n@Component({...})\nexport class MyPageComponent {\n  readonly #store = inject(MyPageStore);\n\n  // Expose permission checks to template\n  readonly hasPortEventPermission = this.#store.hasPortEventPermission;\n  readonly hasCpuUsageAlarmPermission = this.#store.hasCpuUsageAlarmPermission;\n}\n```\n\n### Usage in Templates (Tab Visibility)\n\n```html\n<mat-tab-group>\n  <!-- Always visible tab -->\n  <mat-tab [label]=\"t('general.common.system')\">...</mat-tab>\n\n  <!-- Permission-based tabs -->\n  @if (hasPortEventPermission()) {\n    <mat-tab [label]=\"t('general.common_port.port')\">...</mat-tab>\n  }\n  @if (hasCpuUsageAlarmPermission()) {\n    <mat-tab [label]=\"t('features.event_notification.cpu_usage')\">...</mat-tab>\n  }\n</mat-tab-group>\n```\n\n### Legacy Code Pattern vs New Pattern\n\n**Legacy (checking auth.serviceDefine directly):**\n\n```typescript\n// Old way - in Angular controller/component\nif (this.auth.serviceDefine.SRV_PORT_EVENT) {\n  this.loadPortEventData();\n}\n\n// Old way - in template\n<div *ngIf=\"auth.serviceDefine.SRV_CPU_USAGE_ALARM\">...</div>\n```\n\n**New (using AuthStore in store + exposing to component):**\n\n```typescript\n// New way - in store\nhasPortEventPermission: () => authStore.serviceDefine()?.SRV_PORT_EVENT ?? false,\n\n// New way - in component\nreadonly hasPortEventPermission = this.#store.hasPortEventPermission;\n\n// New way - in template\n@if (hasPortEventPermission()) { ... }\n```\n\n### Common serviceDefine Flags\n\n| Flag                          | Description                              |\n| ----------------------------- | ---------------------------------------- |\n| `SRV_PORT_EVENT`              | Port event notifications                 |\n| `SRV_CPU_USAGE_ALARM`         | CPU usage alarm feature                  |\n| `SRV_PORT_USAGE_ALARM`        | Port usage alarm feature                 |\n| `SRV_PORT_RXDISCARD_ALARM`    | Port RX discard alarm feature            |\n| `SRV_LICENSE_NOTIFICATION`    | License notification feature             |\n| `SRV_TRUNK_SETTING`           | Link Aggregation (trunk) settings        |\n| `SRV_IGMP_SNOOP`              | IGMP snooping feature                    |\n| `SRV_POWER_MANAGEMENT`        | Power management (PoE) feature           |\n| `SRV_CELLULAR`                | Cellular modem feature                   |\n| `SRV_VPN`                     | VPN feature                              |\n| `SRV_FIREWALL`                | Firewall feature                         |\n\n### Important Notes\n\n1. **Always use optional chaining** - `serviceDefine()` may be `null` before auth is loaded\n2. **Default to `false`** - If permission is undefined, treat as not available\n3. **Permission vs Data** - Use permissions for tab visibility, not data availability\n4. **Conditional API calls** - Skip API calls for services not available on device (prevents 404 errors)\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/reference/state-management.md": "# State Management with NgRx SignalStore\n\n## NgRx SignalStore Pattern\n\n**Always use NgRx SignalStore pattern:**\n\n```typescript\nimport { signalStore, withState, withMethods, withComputed } from '@ngrx/signals';\nimport { queryMethod, mutationMethod, type LoadingState } from '@one-ui/mxsecurity/shared/domain';\n\ninterface State extends LoadingState {\n  data: MyData | null;\n}\n\nconst initialState: State = {\n  ...loadingInitialState,\n  data: null\n};\n\nexport const MyFeatureStore = signalStore(\n  withState(initialState),\n  withComputed(({ data }) => ({\n    hasData: computed(() => data() !== null)\n  })),\n  withMethods((store, api = inject(MyApiService)) => ({\n    loadData: queryMethod<void, MyData>({\n      store,\n      observe: () => api.getData(),\n      next: (data) => {\n        patchState(store, { data });\n      }\n    }),\n\n    updateData: mutationMethod<MyData, void>({\n      store,\n      observe: (payload) => api.updateData(payload)\n    })\n  }))\n);\n```\n\n## API Response Typing - DO NOT USE `void`\n\n**CRITICAL**: API methods must use actual response types, NOT `void`.\n\n### ❌ WRONG - Using `void`\n\n```typescript\n// api.ts\nsaveSettings$(payload: SRV_BCAST_FWD): Observable<void> {\n  return this.#rest.post<void>(...);\n}\n\n// store.ts\nupdateData: mutationMethod<MyData, void>({\n  store,\n  observe: (payload) => api.saveData(payload)\n})\n```\n\n### ✅ CORRECT - Using actual response type\n\n```typescript\n// shared/domain - generic response type\nexport type SettingDataResponse<K extends string, T> = {\n  [P in K]: T;\n} & {\n  success: string;\n};\n\n// model.ts - feature-specific response type\nexport type BroadcastForwardingSettingsResponse = SettingDataResponse<'SRV_BCAST_FWD', SRV_BCAST_FWD>;\n\n// api.ts\nsaveSettings$(payload: SRV_BCAST_FWD): Observable<BroadcastForwardingSettingsResponse> {\n  return this.#rest.post<BroadcastForwardingSettingsResponse>(...);\n}\n\n// store.ts\nupdateData: mutationMethod<MyData, BroadcastForwardingSettingsResponse>({\n  store,\n  observe: (payload) => api.saveData(payload)\n})\n```\n\n### Why?\n\n1. **API Contract**: Types should reflect actual API responses for accurate intellisense\n2. **Developer Experience**: Other developers can understand the response structure\n3. **Type Safety**: Enables proper type checking when accessing response data\n\n---\n\n## Loading State Pattern\n\nUse `queryMethod` and `mutationMethod` from `@one-ui/mxsecurity/shared/domain`:\n\n- **`queryMethod`**: For fetching data (GET requests)\n  - Automatically manages `fetching`, `loading` states\n  - Shows page loading indicator\n  - **Does NOT show success snackbar** (manual handling required if needed)\n\n- **`mutationMethod`**: For modifying data (POST/PUT/DELETE requests)\n  - Automatically manages `updating`, `loading` states\n  - **Automatically shows success snackbar** (default: `response_handler.res_global_success`)\n  - Handles errors with ErrorsHandler\n\n```typescript\ninterface State extends LoadingState {\n  // fetching: boolean\n  // updating: boolean\n  // loading: boolean\n  // successful: boolean\n  // fetchingCount: number\n  // updatingCount: number\n}\n```\n\n---\n\n## ⚠️ mutationMethod Success Message (IMPORTANT)\n\n`mutationMethod` **automatically shows a success snackbar** after successful API calls. You do NOT need to manually show a snackbar in most cases.\n\n### ✅ Correct - Let mutationMethod handle snackbar\n\n```typescript\n// In page component\nonFormSubmit(formValue: FormValue) {\n  this.#store.updateSettings(() => ({\n    input: formValue,\n    next: () => this.#store.loadPageData() // Just reload data, no manual snackbar\n  }));\n}\n```\n\n### ❌ Wrong - Manually showing snackbar (redundant)\n\n```typescript\n// In page component\nonFormSubmit(formValue: FormValue) {\n  this.#store.updateSettings(() => ({\n    input: formValue,\n    next: () => {\n      this.#store.loadPageData();\n      // ❌ This is redundant - mutationMethod already shows success snackbar\n      this.#snackBar.open(this.#transloco.translate('response_handler.res_global_success'), '', {\n        duration: 3000\n      });\n    }\n  }));\n}\n```\n\n### Custom Success Message\n\nIf you need a different success message:\n\n```typescript\nthis.#store.updateSettings(() => ({\n  input: formValue,\n  successMessage: 'custom.success.key' // Custom i18n key\n}));\n```\n\n### Skip Success Snackbar\n\nIf you want to skip the success snackbar entirely:\n\n```typescript\nthis.#store.updateSettings(() => ({\n  input: formValue,\n  skipSnackbar: true\n}));\n```\n\n### queryMethod Does NOT Show Snackbar\n\nNote that `queryMethod` does NOT automatically show a success snackbar. If you need to show a message after a refresh/load operation, you must do it manually:\n\n```typescript\n// Refresh needs manual snackbar\nonRefresh() {\n  this.#store.loadPageData(() => ({\n    next: () => {\n      this.#snackBar.open(this.#transloco.translate('response_handler.res_complete_refresh'), '', {\n        duration: 3000\n      });\n    }\n  }));\n}\n```\n\n## Route Resolver Pattern\n\nPlace data loading in route resolvers, not component constructors:\n\n```typescript\n// login-page.routes.ts\nimport { inject } from '@angular/core';\nimport { Route } from '@angular/router';\nimport { LoginPageStore, LoginPageApiService } from '@one-ui/mxsecurity/login-page/domain';\nimport { LoginPageComponent } from '@one-ui/mxsecurity/login-page/features';\n\nconst loadStaticDataResolverFn = (store = inject(LoginPageStore)) => {\n  store.loadStaticData();\n  return true;\n};\n\nexport const createRoutes = (): Route[] => [\n  {\n    path: '',\n    component: LoginPageComponent,\n    providers: [LoginPageStore, LoginPageApiService],\n    resolve: {\n      loadStaticData: () => loadStaticDataResolverFn()\n    }\n  }\n];\n```\n\n## Store Best Practices\n\n1. **Use Signals with SignalStore**\n\n```typescript\n// ❌ Mixing observables unnecessarily\nexport class MyComponent {\n  data$ = this.store.data$.pipe(...);\n}\n\n// ✅ Use signals directly\nexport class MyComponent {\n  data = computed(() => this.store.data());\n}\n```\n\n2. **Expose Store Signals to Template**\n\n```typescript\nexport class MyPageComponent {\n  private store = inject(MyFeatureStore);\n\n  // Expose store signals to template\n  users = this.store.users;\n  isLoading = this.store.loading;\n  error = this.store.error;\n}\n```\n\n3. **Use Effect for Side Effects**\n\n```typescript\nconstructor() {\n  effect(() => {\n    // React to signal changes\n    if (this.store.successful()) {\n      this.router.navigate(['/success']);\n    }\n  });\n}\n```\n\n## Shared Services\n\n### FileDownloadService\n\nLocation: `libs/mxsecurity/shared/domain/src/lib/services/file-download.service.ts`\n\nUse this service for downloading files from the server:\n\n```typescript\nimport { FileDownloadService } from '@one-ui/mxsecurity/shared/domain';\n\n// In store\nwithMethods((store, fileDownload = inject(FileDownloadService)) => ({\n  exportFile: mutationMethod<void, void>({\n    store,\n    observe: () =>\n      api.triggerExport$().pipe(\n        switchMap(() => fileDownload.downloadAndSave$('filename.ini'))\n      )\n  })\n}))\n```\n\n**Available Methods:**\n\n- `apiHost`: Get the API host from `window.location.origin`\n- `downloadFile$(fileName, basePath?)`: Download file and return `Observable<{ url, fileName }>`\n- `downloadAndSave$(fileName, basePath?)`: Download file and trigger browser download\n\n**Example - Local Config Backup:**\n\n```typescript\nlocalBackup: mutationMethod<void, void>({\n  store,\n  observe: () =>\n    api.localConfigExport$().pipe(\n      switchMap(() => fileDownload.downloadAndSave$('MOXA_CFG.ini'))\n    )\n})\n```\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/auth.md": "# Auth\n\n## What is this?\n\nOne-UI authentication tools: Token storage, JWT parsing, AuthStore.\n\n## When to use\n\nWhen accessing token or user information.\n\n---\n\n## Token Storage\n\n**Must use `sessionStorage`** with key `mx_token`:\n\n```typescript\n// ✅ CORRECT\nsessionStorage.getItem('mx_token')\nsessionStorage.setItem('mx_token', value)\nsessionStorage.removeItem('mx_token')\n```\n\n---\n\n## JWT Parsing\n\n```typescript\nimport { parseJwt, type LoginData } from '@one-ui/mxsecurity/shared/domain';\n\nconst jwtData: LoginData = parseJwt(token);\n\n// LoginData structure\ninterface LoginData {\n  from_ip: string;\n  login_time: number;\n  role: string;\n  sesstion_id: string;  // Note: API has typo\n  username: string;\n}\n```\n\n---\n\n## AuthStore\n\n```typescript\nimport { AuthStore } from '@one-ui/mxsecurity/shared/domain';\n\n@Component({...})\nexport class MyComponent {\n  readonly #authStore = inject(AuthStore);\n\n  readonly username = this.#authStore.username;\n  readonly role = this.#authStore.role;\n  readonly isLoggedIn = this.#authStore.isLoggedIn;\n}\n```\n\n---\n\n## Common Mistakes\n\n```typescript\n// ❌ WRONG: Using localStorage\nlocalStorage.getItem('token')\nlocalStorage.setItem('token', value)\n\n// ✅ CORRECT: Using sessionStorage + mx_token\nsessionStorage.getItem('mx_token')\nsessionStorage.setItem('mx_token', value)\n\n// ❌ WRONG: Wrong key\nsessionStorage.getItem('token')\n\n// ✅ CORRECT: Correct key\nsessionStorage.getItem('mx_token')\n```\n\n---\n\n## Related Tools\n\n- [signal-store.md](./signal-store.md) - Store management\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/common-table.md": "# CommonTableComponent\n\n## What is this?\n\nOne-UI shared table component with selection, editing, search, and sorting features.\n\n## When to use\n\nWhen displaying CRUD lists.\n\n## Import\n\n```typescript\nimport { CommonTableComponent, SELECT_COLUMN_KEY, EDIT_COLUMN_KEY, oneUiTableMaxSizeDirective } from '@one-ui/shared/ui';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatSortModule } from '@angular/material/sort';\n```\n\n---\n\n## Basic Usage\n\n```html\n<one-ui-common-table\n  *transloco=\"let t\"\n  headerSticky selectable editable\n  [data]=\"tableData()\" [columns]=\"columns()\" [loading]=\"loading()\"\n  (edit)=\"edit.emit($event)\" (select)=\"selection = $event\"\n>\n  <ng-template #rightToolbarTemplate>\n    <!-- Toolbar buttons -->\n  </ng-template>\n</one-ui-common-table>\n```\n\n---\n\n## Features\n\n| Feature | Type | Description |\n|---------|------|-------------|\n| `selectable` | boolean | Multi-select checkbox |\n| `editable` | boolean | Edit button column |\n| `searchable` | boolean | Search functionality |\n| `headerSticky` | boolean | Fixed header |\n| `expandable` | boolean | Expandable rows |\n| `loading` | boolean | Loading state |\n\n---\n\n## Column Definition\n\n```typescript\nreadonly columns = computed(() => [\n  {\n    key: SELECT_COLUMN_KEY,\n    disable: (row) => row.isCurrentUser  // Disable selection\n  },\n  { key: 'name', header: this.#transloco.translate('general.common.name') },\n  {\n    key: 'status',\n    header: this.#transloco.translate('general.common.status'),\n    noAutoGenerate: true,  // Use custom template\n    filter: (data, filter) => {\n      const status = data.enabled ? 'Enabled' : 'Disabled';\n      return status.toLowerCase().includes(filter.toLowerCase());\n    }\n  },\n  { key: EDIT_COLUMN_KEY, stickyEnd: true }\n]);\n```\n\n### Column API\n\n| Property | Type | Description |\n|----------|------|-------------|\n| `key` | string | Column key (must match data property) |\n| `header` | string | Column header (i18n key for auto-generate, or pre-translated string) |\n| `stickyEnd` | boolean | Stick to right side |\n| `width` | string | Column width (`minWidth`; with `truncate`, also sets `maxWidth`) |\n| `truncate` | boolean | Truncate cell text with ellipsis (requires `width`) |\n| `noAutoGenerate` | boolean | Use custom template (only for Angular components) |\n| `filter` | function | Custom search filter |\n| `disable` | function | Disable row operations |\n| `rowTooltip` | function | Row cell tooltip content |\n| `rowTooltipDisable` | function | Disable row tooltip when no data |\n\n---\n\n## Custom Column Template\n\n```html\n<ng-template #tableColumnsTemplate>\n  <ng-container matColumnDef=\"status\">\n    <th *matHeaderCellDef mat-header-cell mat-sort-header>Status</th>\n    <td *matCellDef=\"let row\" mat-cell>\n      <mx-status [statusType]=\"row.enabled ? 'success' : 'neutral'\" />\n    </td>\n  </ng-container>\n</ng-template>\n```\n\n⚠️ When using custom columns, you must import `MatSortModule`.\n\n---\n\n## Toolbar Button Order\n\n**Fixed order**: Refresh → Create → Delete\n\n```html\n<ng-template #rightToolbarTemplate>\n  <button mat-button (click)=\"refresh.emit()\">\n    <mat-icon svgIcon=\"icon:refresh\"></mat-icon>\n    {{ t('general.tooltip.refresh') }}\n  </button>\n  @if (selection.length === 0) {\n    <button mat-stroked-button (click)=\"add.emit()\">{{ t('general.button.create') }}</button>\n  }\n  @if (selection.length >= 1) {\n    <button mat-stroked-button (click)=\"onDelete()\">{{ t('general.button.delete') }}</button>\n  }\n</ng-template>\n```\n\n---\n\n## Text Overflow Handling\n\n```html\n<td mat-cell *matCellDef=\"let row\">\n  <span class=\"gl-ellipsis-text\" mxAutoTooltip [matTooltip]=\"row.description\">\n    {{ row.description }}\n  </span>\n</td>\n```\n\n```scss\n.mat-column-description {\n  min-width: 300px;\n  max-width: 300px;\n}\n```\n\n---\n\n## Table Footer (oneUiTableMaxSize)\n\nDisplay max item count in table footer.\n\n```typescript\nimport { oneUiTableMaxSizeDirective } from '@one-ui/shared/ui';\n```\n\n```html\n<one-ui-common-table ...>\n  <!-- ... other templates ... -->\n\n  <ng-template #tableFooterTemplate>\n    <span oneUiTableMaxSize>{{ t('general.table_function.limit_count') }} {{ tableMaxSize() }}</span>\n  </ng-template>\n</one-ui-common-table>\n```\n\nIn component:\n```typescript\ntableMaxSize = input.required<number>();  // Pass from store or config\n```\n\n---\n\n## Common Mistakes\n\n```typescript\n// ❌ WRONG: Custom column missing filter function\n{\n  key: 'status',\n  noAutoGenerate: true\n  // Search won't work on this column\n}\n\n// ✅ CORRECT: Provide filter function\n{\n  key: 'status',\n  noAutoGenerate: true,\n  filter: (data, filter) => {\n    const status = data.enabled ? 'Enabled' : 'Disabled';\n    return status.toLowerCase().includes(filter.toLowerCase());\n  }\n}\n\n// ❌ WRONG: Missing MatSortModule\n@Component({\n  imports: [CommonTableComponent, MatTableModule]  // mat-sort-header won't work\n})\n\n// ✅ CORRECT: Include MatSortModule\n@Component({\n  imports: [CommonTableComponent, MatTableModule, MatSortModule]\n})\n```\n\n---\n\n## Related Tools\n\n- [transloco.md](./transloco.md) - Table header translation\n- [mx-components.md](./mx-components.md) - MxStatus component\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/form-builder.md": "# NonNullableFormBuilder\n\n## What is this?\n\nAngular's FormBuilder, but all values are non-nullable by default, avoiding `null` type issues.\n\n## When to use\n\nWhen creating Reactive Forms.\n\n## Import\n\n```typescript\nimport { NonNullableFormBuilder, ReactiveFormsModule } from '@angular/forms';\n```\n\n---\n\n## Basic Usage\n\n```typescript\n@Component({...})\nexport class FeatureDialogComponent {\n  readonly #fb = inject(NonNullableFormBuilder);\n\n  form = this.#fb.group({\n    name: ['', [OneValidators.required, OneValidators.maxLength(32)]],\n    description: ['', [OneValidators.maxLength(255)]],\n    port: [8080, [OneValidators.required, OneValidators.range(1, 65535)]]\n  });\n}\n```\n\n---\n\n## FormGroup-Level Validation\n\nFor cross-field validation (e.g., password confirmation):\n\n```typescript\nform = this.#fb.group(\n  {\n    password: ['', [OneValidators.required]],\n    confirmPassword: ['', [OneValidators.required]]\n  },\n  { validators: [Validators.passwordMatch()] }  // FormGroup validator\n);\n```\n\n---\n\n## Getting Form Values\n\n```typescript\n// Get all values (including disabled fields)\nconst value = this.form.getRawValue();\n\n// Get values (excluding disabled fields)\nconst value = this.form.value;\n```\n\n---\n\n## Common Mistakes\n\n```typescript\n// ❌ WRONG: Using FormBuilder (values can be null)\nreadonly #fb = inject(FormBuilder);\n\n// ✅ CORRECT: Using NonNullableFormBuilder\nreadonly #fb = inject(NonNullableFormBuilder);\n```\n\n---\n\n## Advanced Form Patterns\n\n### Pattern 1: Form Initialization with Nullish Coalescing\n\nWhen creating forms in dialogs with edit mode support, initialize form values directly instead of using `ngOnInit` with `patchValue`:\n\n#### ❌ Verbose Pattern\n\n```typescript\nreadonly form = this.#fb.group({\n  inboundInterface: ['', [OneValidators.required]],\n  outboundInterface: ['', [OneValidators.required]]\n});\n\nngOnInit() {\n  if (this.dialogData.row) {\n    this.form.patchValue({\n      inboundInterface: this.dialogData.row.inboundInterfaceRaw,\n      outboundInterface: this.dialogData.row.outboundInterfaceRaw\n    });\n  }\n}\n```\n\n#### ✅ Simplified Pattern\n\n```typescript\nreadonly form = this.#fb.group({\n  inboundInterface: [this.dialogData.row?.inboundInterfaceRaw ?? '', [OneValidators.required]],\n  outboundInterface: [this.dialogData.row?.outboundInterfaceRaw ?? '', [OneValidators.required]]\n});\n```\n\n**Benefits**:\n- Eliminates the need for conditional `patchValue` in `ngOnInit`\n- Uses optional chaining (`?.`) and nullish coalescing (`??`) for cleaner code\n- Reduces boilerplate when handling create/edit modes in the same dialog\n\n---\n\n### Pattern 2: Cross-Field Validation\n\nFor validators that depend on multiple fields (e.g., \"field A !== field B\"), use **control-level validators** with `updateValueAndValidity()`:\n\n#### ❌ Old Pattern - Group Validator with setErrors()\n\n```typescript\n// Group validator - AVOID\nform = new FormGroup(\n  {\n    inboundInterface: new FormControl(null, [Validators.required]),\n    outboundInterface: new FormControl(null, [Validators.required])\n  },\n  [this.checkIfDuplicate()]  // Group validator\n);\n\nprivate checkIfDuplicate(): ValidatorFn {\n  return (form: FormGroup): ValidationErrors | null => {\n    if (form.value.inboundInterface === form.value.outboundInterface) {\n      // ⚠️ setErrors() overwrites ALL errors on the control!\n      form.get('inboundInterface').setErrors({ duplicate: true });\n      form.get('outboundInterface').setErrors({ duplicate: true });\n    } else {\n      form.get('inboundInterface').setErrors(null);  // Clears required error too!\n      form.get('outboundInterface').setErrors(null);\n    }\n    return null;\n  };\n}\n```\n\n#### ✅ New Pattern - Control Validator with updateValueAndValidity()\n\n```typescript\nreadonly form = this.#fb.group({\n  inboundInterface: ['', [OneValidators.required]],\n  outboundInterface: ['', [OneValidators.required, this.#sameInterfaceValidator()]],\n  udp: ['', [OneValidators.required]]\n});\n\nconstructor() {\n  // Re-validate outboundInterface when dependencies change\n  merge(\n    this.form.controls.inboundInterface.valueChanges,\n    this.form.controls.udp.valueChanges\n  )\n    .pipe(takeUntilDestroyed())\n    .subscribe(() => this.form.controls.outboundInterface.updateValueAndValidity());\n}\n\n#sameInterfaceValidator(): ValidatorFn {\n  return (control: AbstractControl): ValidationErrors | null => {\n    const outbound = control.value;\n    const inbound = control.parent?.get('inboundInterface')?.value;\n    if (inbound && outbound && inbound === outbound) {\n      return { duplicate: true };  // Returns error, doesn't overwrite others\n    }\n    return null;\n  };\n}\n```\n\n**Benefits of control-level validators**:\n- Doesn't use `setErrors()` which can overwrite other errors\n- Returns validation errors directly\n- Uses `updateValueAndValidity()` to trigger re-validation when dependencies change\n- Error keys are clearer and more specific\n\n---\n\n### Pattern 3: Reactive Effects with Form Controls\n\nWhen using Angular `effect()` to react to form control changes, you **MUST** use `toSignal()` to convert the form control's `valueChanges` to a signal. Reading form control values directly in an effect is **NOT reactive**.\n\n#### ❌ Wrong Pattern - Not Reactive\n\n```typescript\nconstructor() {\n  // This effect will NOT re-run when the form control value changes!\n  effect(() => {\n    const retryEnabled = this.form.controls.authenticationRetry.value;  // Not a signal!\n    if (retryEnabled) {\n      this.form.controls.authenticationRetryInterval.enable();\n    } else {\n      this.form.controls.authenticationRetryInterval.disable();\n    }\n  });\n}\n```\n\n#### ✅ Correct Pattern - Using toSignal()\n\n```typescript\nimport { toSignal } from '@angular/core/rxjs-interop';\n\n// Convert valueChanges to a signal\nreadonly #authenticationRetryChange = toSignal(\n  this.form.controls.authenticationRetry.valueChanges,\n  { initialValue: false }\n);\n\nconstructor() {\n  // Effect will re-run when the signal changes\n  effect(\n    () => {\n      const retryEnabled = this.#authenticationRetryChange();  // Reading a signal!\n      if (retryEnabled) {\n        this.form.controls.authenticationRetryInterval.enable();\n      } else {\n        this.form.controls.authenticationRetryInterval.disable();\n      }\n    },\n    { allowSignalWrites: true }  // Required when effect modifies form state\n  );\n}\n```\n\n**Key Points**:\n1. **Use `toSignal()`** - Convert `valueChanges` Observable to a signal\n2. **Provide `initialValue`** - Required for synchronous access before first emission\n3. **Use `allowSignalWrites: true`** - Required when the effect modifies signals or form state\n4. **Use private naming `#`** - For internal signal fields\n\n**Real-World Example: Mutual Exclusion**:\n\n```typescript\nreadonly #primaryLocalRadiusServerChange = toSignal(\n  this.form.controls.primaryLocalRadiusServer.valueChanges,\n  { initialValue: 0 }\n);\n\nreadonly #secondaryLocalRadiusServerChange = toSignal(\n  this.form.controls.secondaryLocalRadiusServer.valueChanges,\n  { initialValue: 0 }\n);\n\nconstructor() {\n  // When primary is enabled, disable secondary and reset its value\n  effect(\n    () => {\n      const primaryLocal = this.#primaryLocalRadiusServerChange();\n      if (primaryLocal === 1) {\n        this.form.controls.serverAddress1.disable();\n        // Reset secondary if also enabled (mutual exclusion)\n        if (this.form.controls.secondaryLocalRadiusServer.value === 1) {\n          this.form.controls.secondaryLocalRadiusServer.setValue(0);\n        }\n      } else {\n        this.form.controls.serverAddress1.enable();\n      }\n    },\n    { allowSignalWrites: true }\n  );\n}\n```\n\n---\n\n### Pattern 4: Accessing Form Controls in Templates\n\nUse `form.controls.xxx` instead of `form.get('xxx')` for type safety and cleaner code. For commonly accessed values, use `@let` to avoid repetition.\n\n#### ❌ Old Pattern\n\n```html\n<form [formGroup]=\"form\">\n  @if (form.get('method')?.value === 'SCP' || form.get('method')?.value === 'SFTP') {\n    <mat-form-field>\n      <input matInput formControlName=\"account\" />\n      <mat-hint>{{ form.get('account')?.value?.length ?? 0 }} / 31</mat-hint>\n    </mat-form-field>\n  }\n\n  @if (form.get('method')?.value === 'TFTP' || form.get('method')?.value === 'SCP') {\n    <!-- More fields... -->\n  }\n</form>\n```\n\n#### ✅ New Pattern\n\n```html\n<form [formGroup]=\"form\">\n  @let method = form.controls.method.value;\n\n  @if (method === 'SCP' || method === 'SFTP') {\n    <mat-form-field>\n      <input matInput formControlName=\"account\" />\n      <mat-hint>{{ form.controls.account.value.length }} / 31</mat-hint>\n    </mat-form-field>\n  }\n\n  @if (method === 'TFTP' || method === 'SCP') {\n    <!-- More fields... -->\n  }\n</form>\n```\n\n**Guidelines**:\n- Use `form.controls.xxx` instead of `form.get('xxx')` - better type safety\n- Use `@let` for values accessed multiple times (e.g., `@let method = form.controls.method.value;`)\n- For single-use access, direct `form.controls.xxx.value` is sufficient\n- `@let` must be placed inside the `<form>` tag (within the template scope)\n\n---\n\n### Pattern 5: Cancel Button in Dialogs\n\nUse `mat-dialog-close` directive instead of creating an `onCancel()` method:\n\n#### ❌ Verbose Pattern\n\n```typescript\n// Component\nonCancel() {\n  this.#dialogRef.close();\n}\n```\n\n```html\n<!-- Template -->\n<button mat-button (click)=\"onCancel()\">Cancel</button>\n```\n\n#### ✅ Simplified Pattern\n\n```html\n<!-- Template - no component method needed -->\n<button mat-button mat-dialog-close>Cancel</button>\n\n<!-- With return value -->\n<button mat-button [mat-dialog-close]=\"{ cancelled: true }\">Cancel</button>\n```\n\n---\n\n## When to Use Each Pattern\n\n| Scenario | Pattern |\n|----------|---------|\n| Re-validate field when another field changes | `valueChanges.pipe(takeUntilDestroyed()).subscribe(() => control.updateValueAndValidity())` |\n| Enable/disable fields based on another field | `toSignal()` + `effect()` with `allowSignalWrites: true` |\n| Complex state updates based on form changes | `toSignal()` + `effect()` |\n| Simple value transformation | `valueChanges` with RxJS operators |\n| Form initialization in dialogs | Nullish coalescing (`??`) in initial value |\n| Template value caching | `@let` directive |\n\n---\n\n## Related Tools\n\n- [one-validators.md](./one-validators.md) - Form validation\n- [mx-components.md](./mx-components.md) - oneUiFormError, mxLabel\n- [dialogs.md](./ui/dialogs.md) - Dialog patterns\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/forms/error-handling.md": "# Form Error Handling\n\n## Template Error Display\n\n### Required Import\n\nYou **MUST** import `OneUiFormErrorDirective` in your component to use the `oneUiFormError` directive:\n\n```typescript\nimport { OneUiFormErrorDirective } from '@one-ui/shared/ui/form';\n\n@Component({\n  imports: [\n    // ... other imports\n    OneUiFormErrorDirective  // ✅ Required\n  ]\n})\n```\n\n### Basic Usage\n\nUse `oneUiFormError` directive to automatically display error messages:\n\n```html\n<mat-form-field>\n  <mat-label>{{ t('general.common_account.username') }}</mat-label>\n  <input matInput formControlName=\"username\" />\n  <mat-error oneUiFormError=\"username\"></mat-error>\n</mat-form-field>\n```\n\nThis will automatically show the correct i18n error message based on the validation error.\n\n---\n\n## CRITICAL: Always Specify Control Name\n\n**CRITICAL:** Always specify the control name in `oneUiFormError` directive to prevent displaying errors from wrong controls:\n\n### ❌ Wrong - No control name\n\n```html\n<mat-error oneUiFormError></mat-error>\n<!-- May display errors from other controls! -->\n```\n\n### ✅ Correct - With control name\n\n```html\n<mat-error oneUiFormError=\"username\"></mat-error>\n<mat-error oneUiFormError=\"password\"></mat-error>\n<mat-error oneUiFormError=\"email\"></mat-error>\n```\n\n---\n\n## Handling Custom Errors\n\nFor custom errors (like `duplicate`, `notSame`) that are set manually via `setErrors()`, you must handle them separately since they don't have the `__renderErrorMessage__` function:\n\n```html\n<!-- Pattern: Check custom error first, fallback to oneUiFormError -->\n<mat-form-field>\n  <mat-label>{{ t('general.common_account.username') }}</mat-label>\n  <input matInput formControlName=\"username\" />\n  @if (form.controls.username.hasError('duplicate')) {\n    <mat-error>{{ t('features.account_management.username_taken') }}</mat-error>\n  } @else {\n    <mat-error oneUiFormError=\"username\"></mat-error>\n  }\n</mat-form-field>\n\n<!-- Password confirmation with notSame error -->\n<mat-form-field>\n  <mat-label>{{ t('general.common_account.confirm_password') }}</mat-label>\n  <mx-password-input formControlName=\"confirmPassword\"></mx-password-input>\n  @if (form.controls.confirmPassword.hasError('notSame')) {\n    <mat-error>{{ t('features.account_management.new_pwd_not_match') }}</mat-error>\n  } @else {\n    <mat-error oneUiFormError=\"confirmPassword\"></mat-error>\n  }\n</mat-form-field>\n```\n\n---\n\n## Long Error Messages (mat-long-error)\n\n**CRITICAL**: When error messages are long (e.g., listing allowed characters), use the `mat-long-error` class on `mat-form-field` to prevent text truncation and alignment issues.\n\n### When to Use\n\nUse `mat-long-error` for error messages like:\n- `invalid_format_system_symbol`: \"Not in correct format, must be a-z, A-Z, 0-9 or . - _ @ ! # $ % ^ & * ( )\"\n- Any error message that lists multiple allowed/disallowed characters\n- Field is inside a `.form-row` (horizontal layout) with long error message\n\n### The Problem\n\nWithout `mat-long-error`, form fields in a row may not align properly when one has a long error message:\n\n```\n┌─────────────────┐      0 / 16\n│ Common Name     │      ┌─────────────────┐\n│ /]              │      │ Email Address   │\n└─────────────────┘      └─────────────────┘\nNot in correct format,        ← Misaligned!\nmust be a-z, A-Z, 0-9...\n```\n\n### Pattern: Conditional Class Binding\n\nApply `mat-long-error` only when the specific error is active:\n\n```html\n<!-- ✅ Correct: Conditional class binding -->\n<mat-form-field [class.mat-long-error]=\"form.controls.fieldName.hasError('pattern')\">\n  @let fieldCtrl = form.controls.fieldName;\n  <mat-label>{{ t('field.label') }}</mat-label>\n  <input matInput formControlName=\"fieldName\" />\n  @if (fieldCtrl.hasError('pattern')) {\n    <mat-error>{{ t('validators.invalid_format_system_symbol') }}</mat-error>\n  } @else {\n    <mat-error oneUiFormError=\"fieldName\"></mat-error>\n  }\n</mat-form-field>\n\n<!-- ❌ Incorrect: Static class always applied -->\n<mat-form-field class=\"mat-long-error\">\n  ...\n</mat-form-field>\n```\n\n### Complete Example (Form Row)\n\n```html\n<div class=\"form-row\">\n  <mat-form-field [class.mat-long-error]=\"form.controls.mailhub.hasError('pattern')\">\n    @let mailhubCtrl = form.controls.mailhub;\n    <mat-label mxLabel mxLabelOptional>\n      {{ t('features.email_settings.mail_server') }}\n    </mat-label>\n    <input matInput formControlName=\"mailhub\" [maxlength]=\"128\" />\n    <mat-hint align=\"end\">{{ mailhubCtrl.value.length }} / 128</mat-hint>\n    @if (mailhubCtrl.hasError('pattern')) {\n      <mat-error>{{ t('validators.invalid_format_system_symbol') }}</mat-error>\n    } @else {\n      <mat-error oneUiFormError=\"mailhub\"></mat-error>\n    }\n  </mat-form-field>\n\n  <mat-form-field>\n    <mat-label>{{ t('features.cert_signing_request.email_address') }}</mat-label>\n    <input matInput formControlName=\"ea\" type=\"email\" />\n    <mat-error oneUiFormError=\"ea\"></mat-error>\n  </mat-form-field>\n</div>\n```\n\n### Key Points\n\n- Apply `[class.mat-long-error]` on `<mat-form-field>`, NOT on `<mat-error>`\n- Use conditional binding to only apply when the long error is active\n- Reference the form control directly in the binding (e.g., `form.controls.fieldName.hasError('pattern')`)\n- This ensures proper display of long error messages without affecting other error states\n\n### CSS Definition (in `_form.scss`)\n\n```scss\n.form-row {\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;  // ✅ Use flex-start, not center\n  gap: 8px;\n}\n\nmat-form-field.mat-long-error.ng-invalid.ng-touched {\n  margin-bottom: 30px !important;\n}\n```\n\n**Note:** `.form-row` uses `align-items: flex-start` to ensure fields align at the top when one has an error.\n\n---\n\n## Preserve Error Keys from Old System\n\nWhen migrating validators, **preserve the same error keys** as the old system for easier verification and translation compatibility:\n\n| Old Error Key | Description |\n|---------------|-------------|\n| `is_invalid_max_udp_port` | Exceeded max UDP port count |\n| `is_invalid_udp_port` | Invalid UDP port (not a number) |\n| `is_invalid_range` | Value out of range |\n| `is_duplicate_udp_port` | Duplicate UDP port |\n| `is_multicst` | Same inbound/outbound interface |\n| `duplicate` | Duplicate entry |\n\n---\n\n## Full Form Example\n\n```html\n<form [formGroup]=\"form\">\n  <!-- Standard field with oneUiFormError -->\n  <mat-form-field>\n    <mat-label>{{ t('general.common_account.email') }}</mat-label>\n    <input matInput formControlName=\"email\" />\n    <mat-error oneUiFormError=\"email\"></mat-error>\n  </mat-form-field>\n\n  <!-- Field with custom error handling -->\n  <mat-form-field>\n    <mat-label>{{ t('general.common_account.username') }}</mat-label>\n    <input matInput formControlName=\"username\" maxlength=\"32\" />\n    <mat-hint align=\"end\">{{ form.controls.username.value?.length || 0 }} / 32</mat-hint>\n    @if (form.controls.username.hasError('duplicate')) {\n      <mat-error>{{ t('features.account_management.username_taken') }}</mat-error>\n    } @else {\n      <mat-error oneUiFormError=\"username\"></mat-error>\n    }\n  </mat-form-field>\n</form>\n```\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/forms/patterns.md": "# Form Patterns and Best Practices\n\n## Use NonNullableFormBuilder and getRawValue()\n\n**ALWAYS** use `NonNullableFormBuilder` instead of `FormBuilder` for better type safety:\n\n### ❌ Old Pattern\n\n```typescript\nimport { FormBuilder } from '@angular/forms';\n\nreadonly #fb = inject(FormBuilder);\n\nonSubmit() {\n  const formValue = this.form.value;  // Type: { name?: string | null, email?: string | null }\n  // Need type assertion or null checks\n}\n```\n\n### ✅ New Pattern\n\n```typescript\nimport { NonNullableFormBuilder } from '@angular/forms';\n\nreadonly #fb = inject(NonNullableFormBuilder);\n\nonSubmit() {\n  const { name, email } = this.form.getRawValue();  // Type: { name: string, email: string }\n  // No null checks needed, cleaner destructuring\n}\n```\n\n**Benefits:**\n- `NonNullableFormBuilder` - Form control values are non-nullable by default\n- `getRawValue()` - Returns all values (including disabled controls) with proper typing\n- Better type inference, no need for type assertions\n\n---\n\n## Dialog Best Practices\n\n### Use mat-dialog-close for Cancel Button\n\nUse `mat-dialog-close` directive instead of creating an `onCancel()` method:\n\n#### ❌ Verbose Pattern\n\n```typescript\n// Component\nonCancel() {\n  this.#dialogRef.close();\n}\n```\n\n```html\n<!-- Template -->\n<button mat-button (click)=\"onCancel()\">Cancel</button>\n```\n\n#### ✅ Simplified Pattern\n\n```html\n<!-- Template - no component method needed -->\n<button mat-button mat-dialog-close>Cancel</button>\n\n<!-- With return value -->\n<button mat-button [mat-dialog-close]=\"{ cancelled: true }\">Cancel</button>\n```\n\n### Dialog Form Initialization\n\nWhen creating forms in dialogs with edit mode support, initialize form values directly instead of using `ngOnInit` with `patchValue`:\n\n### ❌ Verbose Pattern\n\n```typescript\nreadonly form = this.#fb.group({\n  inboundInterface: ['', [OneValidators.required]],\n  outboundInterface: ['', [OneValidators.required]]\n});\n\nngOnInit() {\n  if (this.dialogData.row) {\n    this.form.patchValue({\n      inboundInterface: this.dialogData.row.inboundInterfaceRaw,\n      outboundInterface: this.dialogData.row.outboundInterfaceRaw\n    });\n  }\n}\n```\n\n### ✅ Simplified Pattern\n\n```typescript\nreadonly form = this.#fb.group({\n  inboundInterface: [this.dialogData.row?.inboundInterfaceRaw ?? '', [OneValidators.required]],\n  outboundInterface: [this.dialogData.row?.outboundInterfaceRaw ?? '', [OneValidators.required]]\n});\n```\n\nThis approach:\n- Eliminates the need for conditional `patchValue` in `ngOnInit`\n- Uses optional chaining (`?.`) and nullish coalescing (`??`) for cleaner code\n- Reduces boilerplate when handling create/edit modes in the same dialog\n\n---\n\n## Cross-Field Validation\n\nFor validators that depend on multiple fields (e.g., \"inbound interface !== outbound interface\"), use **control-level validators** instead of **group-level validators**:\n\n### ❌ Old Pattern - Group Validator with setErrors()\n\n```typescript\n// Group validator - AVOID\nbroadcastForwardingForm = new FormGroup(\n  {\n    inboundInterface: new FormControl(null, [Validators.required]),\n    outboundInterface: new FormControl(null, [Validators.required])\n  },\n  [this.checkIfDuplicate()]  // Group validator\n);\n\nprivate checkIfDuplicate(): ValidatorFn {\n  return (form: FormGroup): ValidationErrors | null => {\n    if (form.value.inboundInterface === form.value.outboundInterface) {\n      // ⚠️ setErrors() overwrites ALL errors on the control!\n      form.get('inboundInterface').setErrors({ is_multicst: true });\n      form.get('outboundInterface').setErrors({ is_multicst: true });\n    } else {\n      form.get('inboundInterface').setErrors(null);  // Clears required error too!\n      form.get('outboundInterface').setErrors(null);\n    }\n    return null;\n  };\n}\n```\n\n### ✅ New Pattern - Control Validator with updateValueAndValidity()\n\n```typescript\nreadonly form = this.#fb.group({\n  inboundInterface: ['', [OneValidators.required]],\n  outboundInterface: ['', [OneValidators.required, this.#sameInterfaceValidator()]],\n  udp: ['', [OneValidators.required]]\n});\n\nconstructor() {\n  // Re-validate outboundInterface when inboundInterface changes\n  merge(\n    this.form.controls.inboundInterface.valueChanges,\n    this.form.controls.udp.valueChanges\n  )\n    .pipe(takeUntilDestroyed())\n    .subscribe(() => this.form.controls.outboundInterface.updateValueAndValidity());\n}\n\n#sameInterfaceValidator(): ValidatorFn {\n  return (control: AbstractControl): ValidationErrors | null => {\n    const outbound = control.value;\n    const inbound = control.parent?.get('inboundInterface')?.value;\n    if (inbound && outbound && inbound === outbound) {\n      return { is_multicst: true };  // Returns error, doesn't overwrite others\n    }\n    return null;\n  };\n}\n```\n\n**Benefits of control-level validators:**\n- Doesn't use `setErrors()` which can overwrite other errors\n- Returns validation errors directly\n- Uses `updateValueAndValidity()` to trigger re-validation when dependencies change\n- Error keys are clearer and more specific\n\n---\n\n## Accessing Form Controls in Templates\n\nUse `form.controls.xxx` instead of `form.get('xxx')` for type safety and cleaner code. For commonly accessed values, use `@let` to avoid repetition.\n\n### ❌ Old Pattern\n\n```html\n<form [formGroup]=\"form\">\n  @if (form.get('method')?.value === 'SCP' || form.get('method')?.value === 'SFTP') {\n    <mat-form-field>\n      <input matInput formControlName=\"account\" />\n      <mat-hint>{{ form.get('account')?.value?.length ?? 0 }} / 31</mat-hint>\n    </mat-form-field>\n  }\n\n  @if (form.get('method')?.value === 'TFTP' || form.get('method')?.value === 'SCP') {\n    <!-- More fields... -->\n  }\n</form>\n```\n\n### ✅ New Pattern\n\n```html\n<form [formGroup]=\"form\">\n  @let method = form.controls.method.value;\n\n  @if (method === 'SCP' || method === 'SFTP') {\n    <mat-form-field>\n      <input matInput formControlName=\"account\" />\n      <mat-hint>{{ form.controls.account.value?.length ?? 0 }} / 31</mat-hint>\n    </mat-form-field>\n  }\n\n  @if (method === 'TFTP' || method === 'SCP') {\n    <!-- More fields... -->\n  }\n</form>\n```\n\n**Guidelines:**\n- Use `form.controls.xxx` instead of `form.get('xxx')` - better type safety, no optional chaining needed on the control itself\n- Use `@let` for values accessed multiple times (e.g., `@let method = form.controls.method.value;`)\n- For single-use access, direct `form.controls.xxx.value` is sufficient\n- `@let` must be placed inside the `<form>` tag (within the template scope)\n\n---\n\n## Reactive Effects with Form Controls\n\nWhen using Angular `effect()` to react to form control changes, you **MUST** use `toSignal()` to convert the form control's `valueChanges` to a signal. Reading form control values directly in an effect is **NOT reactive**.\n\n### ❌ Wrong Pattern - Not Reactive\n\n```typescript\nconstructor() {\n  // This effect will NOT re-run when the form control value changes!\n  effect(() => {\n    const retryEnabled = this.form.controls.authenticationRetry.value;  // Not a signal!\n    if (retryEnabled) {\n      this.form.controls.authenticationRetryInterval.enable();\n    } else {\n      this.form.controls.authenticationRetryInterval.disable();\n    }\n  });\n}\n```\n\n### ✅ Correct Pattern - Using toSignal()\n\n```typescript\nimport { toSignal } from '@angular/core/rxjs-interop';\n\n// Convert valueChanges to a signal\nreadonly #authenticationRetryChange = toSignal(\n  this.form.controls.authenticationRetry.valueChanges,\n  { initialValue: false }\n);\n\nconstructor() {\n  // Effect will re-run when the signal changes\n  effect(\n    () => {\n      const retryEnabled = this.#authenticationRetryChange();  // Reading a signal!\n      if (retryEnabled) {\n        this.form.controls.authenticationRetryInterval.enable();\n      } else {\n        this.form.controls.authenticationRetryInterval.disable();\n      }\n    },\n    { allowSignalWrites: true }  // Required when effect modifies form state\n  );\n}\n```\n\n### Key Points\n\n1. **Use `toSignal()`** - Convert `valueChanges` Observable to a signal\n2. **Provide `initialValue`** - Required for synchronous access before first emission\n3. **Use `allowSignalWrites: true`** - Required when the effect modifies signals or form state\n4. **Use private naming `#`** - For internal signal fields\n\n### Real-World Example: Mutual Exclusion\n\nWhen two form controls should be mutually exclusive (only one can be enabled at a time):\n\n```typescript\nreadonly #primaryLocalRadiusServerChange = toSignal(\n  this.form.controls.primaryLocalRadiusServer.valueChanges,\n  { initialValue: 0 }\n);\n\nreadonly #secondaryLocalRadiusServerChange = toSignal(\n  this.form.controls.secondaryLocalRadiusServer.valueChanges,\n  { initialValue: 0 }\n);\n\nconstructor() {\n  // When primary is enabled, disable secondary and reset its value\n  effect(\n    () => {\n      const primaryLocal = this.#primaryLocalRadiusServerChange();\n      if (primaryLocal === 1) {\n        this.form.controls.serverAddress1.disable();\n        // Reset secondary if also enabled (mutual exclusion)\n        if (this.form.controls.secondaryLocalRadiusServer.value === 1) {\n          this.form.controls.secondaryLocalRadiusServer.setValue(0);\n        }\n      } else {\n        this.form.controls.serverAddress1.enable();\n      }\n    },\n    { allowSignalWrites: true }\n  );\n\n  // Similar effect for secondary...\n}\n```\n\n### When to Use Each Pattern\n\n| Scenario | Pattern |\n| --- | --- |\n| Re-validate field when another field changes | `valueChanges.pipe(takeUntilDestroyed()).subscribe(() => control.updateValueAndValidity())` |\n| Enable/disable fields based on another field | `toSignal()` + `effect()` with `allowSignalWrites: true` |\n| Complex state updates based on form changes | `toSignal()` + `effect()` |\n| Simple value transformation | `valueChanges` with RxJS operators |\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/forms/validators.md": "# OneValidators Usage Guide\n\n## CRITICAL: Use OneValidators Instead of Angular Validators\n\n**ALWAYS** use `OneValidators` from `@one-ui/mxsecurity/shared/domain` instead of Angular's built-in `Validators`.\n\n### ❌ Old Pattern (Angular 16)\n\n```typescript\nimport { Validators } from '@angular/forms';\nimport { ValidatorPattern } from '@mxsecurity-web/shared/validator/validators';\n\nthis.form = this.fb.group({\n  username: ['', [Validators.required, Validators.minLength(4), Validators.maxLength(32)]],\n  password: ['', [Validators.required, Validators.pattern(ValidatorPattern.VALID_REGEX_VIRGINIA_GUIDELINE)]],\n  email: ['', [Validators.required, Validators.email]]\n});\n```\n\n### ✅ New Pattern (Angular 20)\n\n```typescript\nimport { OneValidators } from '@one-ui/mxsecurity/shared/domain';\nimport { OneUiFormErrorDirective } from '@one-ui/shared/ui/form';\n\n@Component({\n  imports: [\n    ReactiveFormsModule,\n    MatFormFieldModule,\n    MatInputModule,\n    OneUiFormErrorDirective  // ✅ Required for oneUiFormError directive\n  ]\n})\nexport class MyFormComponent {\n  readonly #fb = inject(NonNullableFormBuilder);\n\n  form = this.#fb.group({\n    username: ['', [OneValidators.required, OneValidators.maxLength(32)]],\n    password: ['', [OneValidators.required, OneValidators.minLength(8)]],\n    email: ['', [OneValidators.required, OneValidators.email]]\n  });\n}\n```\n\n## Why OneValidators?\n\nOneValidators provides:\n\n- ✅ **Built-in i18n error messages** - Automatically translated\n- ✅ **Better UX** - Error messages work with `oneUiFormError` directive\n- ✅ **Type safety** - Full TypeScript support\n- ✅ **Consistency** - Unified validation across the entire app\n\n## Available OneValidators\n\n### **Basic Validators**\n\n```typescript\nOneValidators.required        // Required field (no parentheses - already a ValidatorFn)\nOneValidators.minLength(4)    // Minimum string length\nOneValidators.maxLength(32)   // Maximum string length\nOneValidators.pattern(REGEX)  // Regex pattern (import pattern constants from shared/domain)\nOneValidators.range(1, 100)   // Number range (min/max) - USE THIS FOR NUMERIC VALUES\nOneValidators.rangeLength(4, 32, 'Username')  // String length range with field name\nOneValidators.email           // Email validation (no parentheses)\n```\n\n> **IMPORTANT:** `OneValidators` does NOT have separate `min()` or `max()` validators. For numeric range validation, always use `OneValidators.range(min, max)`.\n\n> **Note:** `OneValidators` only provides basic, commonly-used validators. For pattern validation, always use `OneValidators.pattern()` with imported pattern constants.\n\n### **MXsecurity Custom Validators**\n\n```typescript\nOneValidators.duplicate(tableData, 'name')  // Check uniqueness in table\nOneValidators.checkHostMac()                // Ensure it's not a multicast MAC\nOneValidators.checkSpaceCount(4)            // Max 4 spaces\nOneValidators.matchFieldsValidator('password', 'confirmPassword')  // Cross-field match\n```\n\n---\n\n## Using Shared Pattern Constants\n\n**IMPORTANT**: When using `OneValidators.pattern()`, always import pattern constants from `@one-ui/mxsecurity/shared/domain` instead of defining local regex patterns. The pattern names are preserved from the original `ValidatorPattern` class for easier code review.\n\n```typescript\n// ❌ BAD: Local pattern definition\nconst VALID_REGEX = /^[0-9a-zA-Z_@!#$%^&*()./ -]+$/;\nOneValidators.pattern(VALID_REGEX)\n\n// ✅ GOOD: Import shared pattern constant (same name as ValidatorPattern.VAILD_REGEX)\nimport { OneValidators, VAILD_REGEX } from '@one-ui/mxsecurity/shared/domain';\nOneValidators.pattern(VAILD_REGEX)\n```\n\n### Available Pattern Constants\n\nAll patterns from `ValidatorPattern` class are available with the **same names**:\n\n| Pattern Constant                          | Description                                      |\n| ----------------------------------------- | ------------------------------------------------ |\n| `IPADDR_REGEX`                            | IPv4 address (0.0.0.0 - 255.255.255.255)         |\n| `IPADDR_NOT_ZERO_REGEX`                   | IPv4 address (first octet 1-255)                 |\n| `VAILD_REGEX`                             | Alphanumeric + special chars + space             |\n| `VALID_REGEX_NEWLINE`                     | Same as VAILD_REGEX + newline                    |\n| `VALID_REGEX_VIRGINIA_GUIDELINE`          | Virginia guideline password chars                |\n| `VALID_REGEX_VIRGINIA_GUIDELINE_WITH_ANGLE` | Virginia guideline + angle brackets            |\n| `VAILD_REGEX_ALLOW_COMMA`                 | VAILD_REGEX + comma                              |\n| `VAILD_REGEX_NOT_SPACE`                   | Alphanumeric + special chars (no space)          |\n| `VAILD_REGEX_NOT_SPACE_WITH_FIRST_NOT_NUMBER` | No space, first char not number              |\n| `VALID_REGEX_FIRST_NOT_NUMBER_AND_NOT_SPACE` | First char must be letter                     |\n| `VAILD_REGEX_SYSTEM_SYMBOL`               | System symbol chars                              |\n| `VAILD_REGEX_SYSTEM_SYMBOL_NO_PERCENT`    | System symbol chars (no %)                       |\n| `VAILD_REGEX_SYSTEM_SYMBOL_PPPOE`         | PPPoE symbol chars                               |\n| `VAILD_NUMBER`                            | Digits only                                      |\n| `VAILD_NUMBER_WITH_COMMA_AND_DASH`        | Number ranges (e.g., 1,2,5-10)                   |\n| `VAILD_HEX`                               | Hex with 0x prefix                               |\n| `VAILD_MAC`                               | MAC address                                      |\n| `VAILD_REGEX_LEVEL_1`                     | Alphanumeric + dot/underscore/dash               |\n| `VAILD_REGEX_RESERVED_CHAR_NOT_SPACE`     | Alphanumeric only                                |\n| `VAILD_REGEX_DOMAIN_NAME`                 | Domain name                                      |\n| `VAILD_REGEX_ASCII`                       | Printable ASCII                                  |\n| `VALID_PURE_HEX`                          | Hex without 0x prefix                            |\n| `VALID_EVEN`                              | Even length string                               |\n| `VALID_NOT_CHAR_AND_DOT_DASH_IN_BEGIN_END`| No dot/dash at begin/end                         |\n| `IPV6_ADDR_REGEX`                         | IPv6 address                                     |\n\n### Pattern Usage Example\n\n```typescript\nimport { Component, inject } from '@angular/core';\nimport { NonNullableFormBuilder, ReactiveFormsModule } from '@angular/forms';\nimport { OneValidators, VAILD_REGEX, VAILD_MAC } from '@one-ui/mxsecurity/shared/domain';\n\n@Component({\n  // ...\n})\nexport class MyFormComponent {\n  readonly #fb = inject(NonNullableFormBuilder);\n\n  readonly form = this.#fb.group({\n    name: ['', [OneValidators.required, OneValidators.maxLength(32), OneValidators.pattern(VAILD_REGEX)]],\n    macAddress: ['', [OneValidators.required, OneValidators.pattern(VAILD_MAC)]]\n  });\n}\n```\n\n---\n\n## Usage Examples\n\n### Example 1: Login Form\n\n```typescript\nimport { NonNullableFormBuilder } from '@angular/forms';\nimport { OneValidators } from '@one-ui/mxsecurity/shared/domain';\n\nform = this.fb.group({\n  username: ['', [OneValidators.required, OneValidators.rangeLength(4, 32, 'Username')]],\n  password: ['', [OneValidators.required, OneValidators.rangeLength(4, 64, 'Password')]]\n});\n```\n\n### Example 2: User Form with Password Confirmation\n\n```typescript\nimport { OneValidators, VALID_REGEX_VIRGINIA_GUIDELINE_WITH_ANGLE } from '@one-ui/mxsecurity/shared/domain';\n\nform = this.fb.group(\n  {\n    username: ['', [OneValidators.required]],\n    password: ['', [\n      OneValidators.required,\n      OneValidators.minLength(8),\n      OneValidators.pattern(VALID_REGEX_VIRGINIA_GUIDELINE_WITH_ANGLE)\n    ]],\n    confirmPassword: ['', [OneValidators.required]]\n  },\n  {\n    validators: [OneValidators.matchFieldsValidator('password', 'confirmPassword')]\n  }\n);\n```\n\n### Example 3: Network Configuration Form\n\n```typescript\nform = this.fb.group({\n  macAddress: [\n    '',\n    [\n      OneValidators.required,\n      OneValidators.pattern(/^([0-9A-Fa-f]{2}:){5}[0-9A-Fa-f]{2}$/),\n      OneValidators.checkHostMac() // Ensure it's not a multicast MAC\n    ]\n  ],\n  description: ['', [OneValidators.checkSpaceCount(4)]] // Max 4 spaces\n});\n```\n\n### Example 4: Table Entry Form (Unique Check)\n\n```typescript\n// Existing table data\nexistingUsers = [\n  { name: 'admin', role: 'admin' },\n  { name: 'user1', role: 'user' }\n];\n\nform = this.fb.group({\n  name: ['', [OneValidators.required, OneValidators.duplicate(this.existingUsers, 'name')]],\n  role: ['', [OneValidators.required]]\n});\n```\n\n### Example 5: Numeric Range Validation\n\n```typescript\n// ❌ BAD: OneValidators.min and OneValidators.max DO NOT EXIST!\nform = this.fb.group({\n  keyId: [null, [OneValidators.required, OneValidators.min(1), OneValidators.max(65535)]]  // ❌ WRONG!\n});\n\n// ✅ GOOD: Use OneValidators.range(min, max) for numeric range validation\nconst KEY_ID_MIN = 1;\nconst KEY_ID_MAX = 65535;\n\nform = this.fb.group({\n  keyId: [null, [OneValidators.required, OneValidators.range(KEY_ID_MIN, KEY_ID_MAX)]]  // ✅ Correct\n});\n```\n\n---\n\n## Common Patterns from Old System → New System\n\n| Old Pattern                                                                    | New Pattern                                                         |\n| ------------------------------------------------------------------------------ | ------------------------------------------------------------------- |\n| `Validators.required`                                                          | `OneValidators.required`                                            |\n| `Validators.minLength(4)`                                                      | `OneValidators.minLength(4)`                                        |\n| `Validators.min(1), Validators.max(100)`                                       | `OneValidators.range(1, 100)` ⚠️ **IMPORTANT**                      |\n| `Validators.pattern(ValidatorPattern.VALID_REGEX_VIRGINIA_GUIDELINE)`          | `OneValidators.pattern(VALID_REGEX_VIRGINIA_GUIDELINE)`             |\n| `Validators.pattern(ValidatorPattern.VALID_REGEX_VIRGINIA_GUIDELINE_WITH_ANGLE)` | `OneValidators.pattern(VALID_REGEX_VIRGINIA_GUIDELINE_WITH_ANGLE)` |\n| `Validators.pattern(ValidatorPattern.VAILD_REGEX)`                             | `OneValidators.pattern(VAILD_REGEX)`                                |\n| `Validators.pattern(/^[0-9a-zA-Z_@!#$%^&*()./ -]+$/)`                          | `OneValidators.pattern(VAILD_REGEX)`                                |\n| `ValidatorFunction.checkHostMac()`                                             | `OneValidators.checkHostMac()`                                      |\n| `ValidatorFunction.checkSpaceCount(4)`                                         | `OneValidators.checkSpaceCount(4)`                                  |\n| `ValidatorFunction.requiredUniqueEntry(data, 'name')`                          | `OneValidators.duplicate(data, 'name')`                             |\n| `ValidatorFunction.matchFieldsValidator('pwd', 'confirm')`                     | `OneValidators.matchFieldsValidator('pwd', 'confirm')`              |\n\n> ⚠️ **IMPORTANT:** `OneValidators` does NOT have separate `min()` or `max()` validators. Always combine them into `OneValidators.range(min, max)` for numeric validation.\n\n---\n\n## ⚠️ CRITICAL: Error Display Patterns\n\n### Which Validators Can Use `oneUiFormError` Directly?\n\n| Validator | Built-in Message | Usage |\n| --------- | ---------------- | ----- |\n| `required` | `validators.required` | ✅ Use `oneUiFormError` directly |\n| `minLength` | `validators.require_min_length` | ✅ Use `oneUiFormError` directly |\n| `maxLength` | `validators.invalid_max_length` | ✅ Use `oneUiFormError` directly |\n| `range` | `validators.invalid_range` | ✅ Use `oneUiFormError` directly |\n| `rangeLength` | `validators.invalid_range` | ✅ Use `oneUiFormError` directly |\n| `email` | `validators.invalid_email` | ✅ Use `oneUiFormError` directly |\n| `pattern` | `validators.invalid` (too generic) | ❌ **MUST** use `@if/@else` |\n| `duplicate` | `validators.duplicate` (may need specificity) | ❌ **MUST** use `@if/@else` |\n| Custom validators | No built-in message | ❌ **MUST** use `@if/@else` |\n| **All other validators** | Not in above 6 basic validators | ❌ **MUST** use `@if/@else` |\n\n### Pattern 1: Simple Usage (Validators with Built-in Messages)\n\n```html\n<mat-form-field>\n  <mat-label>{{ t('label') }}</mat-label>\n  <input matInput formControlName=\"name\" />\n  <mat-error oneUiFormError=\"name\"></mat-error>\n</mat-form-field>\n```\n\n### Pattern 2: Custom Messages (All Other Validators)\n\n```html\n<mat-form-field>\n  <mat-label>{{ t('label') }}</mat-label>\n  <input matInput formControlName=\"account\" />\n  @if (form.controls.account.hasError('pattern')) {\n    <mat-error>{{ t('validators.invalid_format_not_space') }}</mat-error>\n  } @else if (form.controls.account.hasError('duplicate')) {\n    <mat-error>{{ t('validators.duplicate_account') }}</mat-error>\n  } @else {\n    <mat-error oneUiFormError=\"account\"></mat-error>\n  }\n</mat-form-field>\n```\n\n### ❌ Incorrect Pattern\n\n```html\n<!-- oneUiFormError directive cannot display pattern-specific error messages -->\n<mat-form-field>\n  <mat-label>{{ t('general.common_account.account') }}</mat-label>\n  <input matInput formControlName=\"account\" />\n  <mat-error oneUiFormError=\"account\"></mat-error>  <!-- ❌ Pattern error will not display correctly -->\n</mat-form-field>\n```\n\n### ✅ Correct Pattern\n\n```html\n<!-- Use @if/@else to handle pattern errors -->\n<mat-form-field>\n  <mat-label>{{ t('general.common_account.account') }}</mat-label>\n  <input matInput formControlName=\"account\" />\n  @if (form.controls.account.hasError('pattern')) {\n    <mat-error>{{ t('validators.invalid_format_not_space') }}</mat-error>  <!-- ✅ Custom pattern error message -->\n  } @else {\n    <mat-error oneUiFormError=\"account\"></mat-error>  <!-- ✅ Other errors handled by directive -->\n  }\n</mat-form-field>\n```\n\n### Common Pattern Error Messages\n\n| Pattern Constant | Error Message Translation Key |\n|------------------|------------------------------|\n| `VAILD_REGEX_NOT_SPACE` | `validators.invalid_format_not_space` |\n| `VAILD_REGEX_LEVEL_1` | `validators.invalid_regex_level_1` |\n| `IPADDR_REGEX` | `validators.invalid_ip_address` |\n\n### Complete Example\n\n```html\n<!-- Configuration Name with pattern validation -->\n<mat-form-field>\n  <mat-label>{{ t('features.config_bk_res.configuration_name') }}</mat-label>\n  <input matInput maxlength=\"32\" formControlName=\"configurationName\" />\n  <mat-hint align=\"end\">{{ form.controls.configurationName.value.length }} / 32</mat-hint>\n  @if (form.controls.configurationName.hasError('pattern')) {\n    <mat-error>{{ t('validators.invalid_regex_level_1') }}</mat-error>\n  } @else {\n    <mat-error oneUiFormError=\"configurationName\"></mat-error>\n  }\n</mat-form-field>\n\n<!-- Account with pattern validation -->\n<mat-form-field>\n  <mat-label>{{ t('general.common_account.account') }}</mat-label>\n  <input matInput maxlength=\"31\" formControlName=\"account\" />\n  <mat-hint align=\"end\">{{ form.controls.account.value.length }} / 31</mat-hint>\n  @if (form.controls.account.hasError('pattern')) {\n    <mat-error>{{ t('validators.invalid_format_not_space') }}</mat-error>\n  } @else {\n    <mat-error oneUiFormError=\"account\"></mat-error>\n  }\n</mat-form-field>\n\n<!-- IP Address with pattern validation -->\n<mat-form-field>\n  <mat-label>{{ t('general.common.server_ip_address') }}</mat-label>\n  <input matInput maxlength=\"31\" formControlName=\"ipAddress\" />\n  <mat-hint align=\"end\">{{ form.controls.ipAddress.value.length }} / 31</mat-hint>\n  @if (form.controls.ipAddress.hasError('pattern')) {\n    <mat-error>{{ t('validators.invalid_ip_address') }}</mat-error>\n  } @else {\n    <mat-error oneUiFormError=\"ipAddress\"></mat-error>\n  }\n</mat-form-field>\n```\n\n### Why is this necessary?\n\n1. **`oneUiFormError` directive** is designed to handle built-in `OneValidators` error messages (e.g., `required`, `minLength`, `maxLength`)\n2. **Pattern validation** error messages need to display different messages based on the specific pattern type, which cannot be automatically inferred by the directive\n3. **Legacy code** uses the same `@if`/`@else` pattern, so migration must maintain consistency\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/loading-states.md": "# Loading States\n\n## What is this?\n\nOne-UI loading state management with automatic page loading and button loading patterns.\n\n## When to use\n\n- Page loading during data fetch\n- Button loading during form submit\n- Background refresh without loading indicator\n\n## Import\n\n```typescript\nimport { queryMethod, mutationMethod, loadingInitialState, type LoadingState } from '@one-ui/shared/domain';\nimport { MxLoadingButtonDirective } from '@moxa/formoxa/mx-button';\n```\n\n---\n\n## LoadingState Interface\n\n```typescript\ninterface LoadingState {\n  fetching: boolean;      // GET requests in progress\n  updating: boolean;      // POST/PUT/DELETE in progress\n  loading: boolean;       // fetching || updating\n  successful: boolean;    // Last mutation succeeded\n  fetchingCount: number;  // Concurrent GET count\n  updatingCount: number;  // Concurrent mutation count\n}\n```\n\n| Signal | When True | Use Case |\n|--------|-----------|----------|\n| `fetching()` | `queryMethod` executing | Show page loading |\n| `updating()` | `mutationMethod` executing | Show button loading |\n| `loading()` | Either fetching or updating | General loading check |\n| `successful()` | After mutation succeeded | Trigger navigation/close dialog |\n\n---\n\n## Page Loading vs Button Loading\n\n| Type | Trigger | UI | Auto-managed |\n|------|---------|-----|--------------|\n| **Page Loading** | `queryMethod` | Full-page spinner overlay | ✅ Yes |\n| **Button Loading** | `mutationMethod` | Button spinner + disabled | ⚠️ Partial (need `[disabled]`) |\n\n---\n\n## Page Loading (queryMethod)\n\n`queryMethod` automatically shows full-page loading spinner.\n\n```typescript\n// ✅ Auto page loading\nloadItems: queryMethod<void, Item[]>({\n  store,\n  observe: () => api.getAll$(),\n  next: (items) => patchState(store, { items })\n})\n```\n\n### Background Refresh (No Loading)\n\n```typescript\n// ✅ No loading indicator\nloadItems: queryMethod<void, Item[]>({\n  store,\n  observe: () => api.getAll$(),\n  next: (items) => patchState(store, { items }),\n  showPageLoading: false  // Silent refresh\n})\n```\n\nUse `showPageLoading: false` for:\n- Auto-refresh / polling\n- Partial data updates\n- Silent background sync\n\n---\n\n## Button Loading (mutationMethod)\n\n`mutationMethod` sets `updating()` but does NOT auto-disable button.\n\n### Critical Pattern\n\n```html\n<!-- ❌ Wrong: Button still clickable -->\n<button\n  mat-flat-button\n  [mxButtonIsLoading]=\"loading()\"\n  [disabled]=\"form.invalid\">\n  Submit\n</button>\n\n<!-- ✅ Correct: Include loading() in disabled -->\n<button\n  mat-flat-button\n  [mxButtonIsLoading]=\"loading()\"\n  [disabled]=\"form.invalid || loading()\">\n  Submit\n</button>\n```\n\n### Why Both Are Required\n\n| Directive | Effect |\n|-----------|--------|\n| `[mxButtonIsLoading]=\"loading()\"` | Shows spinner inside button |\n| `[disabled]=\"... \\|\\| loading()\"` | Actually prevents clicks |\n\n⚠️ `[mxButtonIsLoading]` only shows spinner UI — it does NOT disable the button!\n\n---\n\n## Dialog Close on Success\n\nUse `successful()` signal or callback to close dialog only after API success.\n\n### Pattern 1: Callback (Recommended)\n\n```typescript\nonSubmit(): void {\n  this.#store.createItem({\n    input: this.form.getRawValue(),\n    next: () => this.#dialogRef.close({ success: true })  // Close on success\n  });\n}\n```\n\n### Pattern 2: Effect with successful()\n\n```typescript\nconstructor() {\n  effect(() => {\n    if (this.#store.successful()) {\n      this.#dialogRef.close({ success: true });\n    }\n  });\n}\n```\n\n### Common Mistake\n\n```typescript\n// ❌ Wrong: Closes immediately, even on API failure\nonSubmit(): void {\n  this.#store.updateItem(formData);\n  this.#dialogRef.close();  // Closes before API completes!\n}\n```\n\n---\n\n## Common Disabled Patterns\n\n| Pattern | Expression | Use Case |\n|---------|------------|----------|\n| Basic | `form.invalid \\|\\| loading()` | Standard form submit |\n| With pristine | `form.invalid \\|\\| !form.dirty \\|\\| loading()` | Enable only after changes |\n| With async | `form.invalid \\|\\| asyncValidating() \\|\\| loading()` | Wait for async validators |\n\n---\n\n## Migration from Manual Loading\n\n### Before (Manual)\n\n```typescript\n// ❌ Old pattern with manual loading\ninterface State {\n  loading: boolean;\n  items: Item[];\n}\n\nloadData: rxMethod<void>(\n  pipe(\n    tap(() => patchState(store, { loading: true })),\n    switchMap(() => api.getData$()),\n    tapResponse({\n      next: (data) => patchState(store, { data, loading: false }),\n      error: () => patchState(store, { loading: false })\n    })\n  )\n)\n```\n\n### After (LoadingState)\n\n```typescript\n// ✅ New pattern with LoadingState\ninterface State extends LoadingState {\n  items: Item[];\n}\n\nconst initialState: State = {\n  ...loadingInitialState,\n  items: []\n};\n\nloadData: queryMethod<void, Item[]>({\n  store,\n  observe: () => api.getData$(),\n  next: (data) => patchState(store, { data })\n})\n```\n\n---\n\n## Troubleshooting\n\n### Page Loading Not Showing\n\n1. Verify store uses `queryMethod` (not `rxMethod`)\n2. Check you didn't pass `showPageLoading: false`\n3. Verify `ShellComponent` passes `[isPageLoading]` to layout\n\n### Page Loading Stuck\n\n1. Check API error handling\n2. Verify `observe` returns proper Observable\n3. Check for concurrent request issues\n\n### Button Still Clickable During Loading\n\nMissing `loading()` in `[disabled]`:\n\n```html\n<!-- ❌ Missing -->\n[disabled]=\"form.invalid\"\n\n<!-- ✅ Fixed -->\n[disabled]=\"form.invalid || loading()\"\n```\n\n### Refresh Not Triggering Loading\n\n```typescript\n// ❌ Wrong: showPageLoading: false\nonRefresh(): void {\n  this.store.loadItems(() => ({ showPageLoading: false }));\n}\n\n// ✅ Correct: Default shows loading\nonRefresh(): void {\n  this.store.loadItems();\n}\n```\n\n---\n\n## Related Tools\n\n- [signal-store.md](./signal-store.md) - SignalStore pattern\n- [dialogs.md](./ui/dialogs.md) - Dialog with loading\n- [mx-components.md](./mx-components.md) - MxLoadingButtonDirective\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/mx-components.md": "# MX Components\n\n## What is this?\n\nMoxa Formoxa UI components and directives for forms, status display, buttons, etc.\n\n## When to use\n\nCreating forms, displaying status, loading buttons, etc.\n\n---\n\n## Mat-Icon (CRITICAL)\n\n**Must use `svgIcon` attribute, NOT text content.**\n\n```typescript\nimport { MatIconModule } from '@angular/material/icon';\n```\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `<mat-icon>refresh</mat-icon>` | `<mat-icon svgIcon=\"icon:refresh\"></mat-icon>` |\n| `<mat-icon>edit</mat-icon>` | `<mat-icon svgIcon=\"icon:edit\"></mat-icon>` |\n| `<mat-icon>delete</mat-icon>` | `<mat-icon svgIcon=\"icon:delete\"></mat-icon>` |\n\n### Common Icons\n\n| Icon | svgIcon Value | Use Case |\n|------|---------------|----------|\n| Refresh | `icon:refresh` | Table refresh button |\n| Edit | `icon:edit` | Edit row |\n| Delete | `icon:delete` | Delete action |\n| Add | `icon:add` | Create new |\n| Search | `icon:search` | Search field |\n| Info | `icon:info` | Information tooltip |\n| Warning | `icon:warning` | Warning status |\n| Error | `icon:error` | Error status |\n| Check | `icon:task_alt` | Success/enabled status |\n| Hide | `icon:hide_source` | Disabled status |\n| Visibility | `icon:visibility` | Show password |\n| Visibility Off | `icon:visibility_off` | Hide password |\n\n```html\n<!-- ❌ Wrong: Text icon -->\n<button mat-button>\n  <mat-icon>refresh</mat-icon>\n  Refresh\n</button>\n\n<!-- ✅ Correct: svgIcon -->\n<button mat-button (click)=\"refresh.emit()\">\n  <mat-icon svgIcon=\"icon:refresh\"></mat-icon>\n  {{ t('general.tooltip.refresh') }}\n</button>\n```\n\n---\n\n## MxStatus\n\nDisplays enabled/disabled and other statuses.\n\n```typescript\nimport { MxStatusComponent } from '@moxa/formoxa/mx-status';\n```\n\n```html\n@if (row.enabled) {\n  <mx-status statusType=\"success\" statusIcon=\"icon:task_alt\" [statusText]=\"t('general.common.enable')\" />\n} @else {\n  <mx-status statusType=\"neutral\" statusIcon=\"icon:hide_source\" [statusText]=\"t('general.common.disable')\" />\n}\n```\n\n| statusType | statusIcon | Use Case |\n|------------|------------|----------|\n| `success` | `icon:task_alt` | Enabled, connected, complete |\n| `neutral` | `icon:hide_source` | Disabled, disconnected |\n| `warning` | `icon:warning` | Warning |\n| `error` | `icon:error` | Error |\n\n---\n\n## mxLabel\n\nForm field label with tooltip and optional indicator support.\n\n```typescript\nimport { MxLabelDirective } from '@moxa/formoxa/mx-label';\n```\n\n```html\n<!-- Standard field with tooltip -->\n<mat-form-field>\n  <mat-label mxLabel [mxLabelTooltip]=\"t('field.hint')\">{{ t('field.label') }}</mat-label>\n  <input matInput formControlName=\"fieldName\" />\n</mat-form-field>\n\n<!-- Optional field -->\n<mat-form-field>\n  <mat-label mxLabel mxLabelOptional [mxLabelOptionalText]=\"t('general.common.optional')\">\n    {{ t('field.label') }}\n  </mat-label>\n  <input matInput formControlName=\"optionalField\" />\n</mat-form-field>\n```\n\n| Directive | Use |\n|-----------|-----|\n| `mxLabel` | Base directive (required) |\n| `mxLabelOptional` | Shows \"Optional\" |\n| `[mxLabelOptionalText]` | Custom optional text |\n| `[mxLabelTooltip]` | Info tooltip |\n\n---\n\n## mxButtonIsLoading\n\nButton loading state (shows spinner).\n\n```typescript\nimport { MxLoadingButtonDirective } from '@moxa/formoxa/mx-button';\n```\n\n```html\n<button mat-flat-button color=\"primary\"\n  [mxButtonIsLoading]=\"loading()\"\n  [disabled]=\"form.invalid || loading()\"\n  (click)=\"onSubmit()\">\n  {{ t('general.button.submit') }}\n</button>\n```\n\n⚠️ **Note**: `[mxButtonIsLoading]` only shows spinner, **does NOT auto-disable**! You must manually add `loading()` to `[disabled]`.\n\n---\n\n## Form Validation Directives\n\n> 📖 For validator definitions, see [one-validators.md](./one-validators.md)\n\n### Quick Reference\n\n| Directive | Purpose | Example |\n|-----------|---------|---------|\n| `oneUiFormError` | Auto-display validation errors | `<mat-error oneUiFormError=\"name\">` |\n| `oneUiFormHint` | Auto-display hints (char count / range) | `<mat-hint oneUiFormHint=\"name\">` |\n| `oneUiNumberOnly` | Restrict input to numbers only | `<input type=\"text\" oneUiNumberOnly>` |\n\n### oneUiFormError\n\nAutomatically displays form validation error messages. Reads i18n error messages from Enhanced Validators (`validatorFnWithMessage` / `validatorWithMessage`).\n\n```typescript\nimport { OneUiFormErrorDirective } from '@one-ui/shared/ui/form';\n```\n\n```html\n<mat-form-field>\n  <mat-label>{{ t('field.label') }}</mat-label>\n  <input matInput formControlName=\"fieldName\" />\n  <mat-error oneUiFormError=\"fieldName\"></mat-error>\n</mat-form-field>\n```\n\n**How It Works:**\n1. Directive reads the `__renderErrorMessage__` property from the validator\n2. If validator was created with `validatorFnWithMessage`, error message is automatically resolved\n3. Supports both i18n keys and dynamic message functions\n\n### oneUiFormHint\n\nAutomatically displays hints from Enhanced Validators. Supports character count, range hints, and custom hint messages.\n\n```typescript\nimport { OneUiFormHintDirective } from '@one-ui/shared/ui/form';\n```\n\n```html\n<mat-form-field>\n  <mat-label>{{ t('field.port') }}</mat-label>\n  <input matInput type=\"text\" oneUiNumberOnly formControlName=\"port\" />\n  <mat-hint oneUiFormHint=\"port\"></mat-hint>  <!-- Shows \"1 ~ 65535\" -->\n  <mat-error oneUiFormError=\"port\"></mat-error>\n</mat-form-field>\n```\n\n**Multiple Hints (hintIndex):**\n\nWhen a form control has multiple validators with hints, use `[hintIndex]` to select which hint to display:\n\n```html\n<!-- Display first hint (default, hintIndex=0) -->\n<mat-hint oneUiFormHint=\"password\"></mat-hint>\n\n<!-- Display second hint (hintIndex=1) -->\n<mat-hint oneUiFormHint=\"password\" [hintIndex]=\"1\"></mat-hint>\n```\n\n### oneUiNumberOnly\n\nRestricts input to numbers only, replacing native HTML `type=\"number\"`.\n\n```typescript\nimport { NumberOnlyDirective } from '@one-ui/mxsecurity/shared/domain';\n```\n\n```html\n<!-- ✅ Correct: Use type=\"text\" with oneUiNumberOnly -->\n<input matInput type=\"text\" formControlName=\"port\" oneUiNumberOnly />\n\n<!-- ❌ Wrong: Don't use type=\"number\" -->\n<input matInput type=\"number\" formControlName=\"port\" />\n```\n\n| `type=\"number\"` Problems | `oneUiNumberOnly` Solution |\n|--------------------------|---------------------------|\n| Scroll wheel accidentally changes value | No such issue |\n| Allows `e`, `+`, `-` characters | Only allows 0-9 |\n| Scientific notation input (e.g., `1e5`) | Not allowed |\n| Inconsistent behavior across browsers | Unified behavior |\n\n### Complete Form Example\n\n```typescript\n// ===== Component =====\nimport { OneValidators, validatorFnWithMessage } from '@one-ui/shared/domain';\nimport { OneUiFormErrorDirective, OneUiFormHintDirective } from '@one-ui/shared/ui/form';\nimport { NumberOnlyDirective } from '@one-ui/mxsecurity/shared/domain';\n\n// Custom validator with character count hint\nconst descriptionValidator = validatorFnWithMessage(\n  (c) => (c.value?.length ?? 0) > 255 ? { maxLength: true } : null,\n  'validators.maxLength',\n  (c) => `${c.value?.length ?? 0} / 255`\n);\n\nform = this.#fb.group({\n  name: ['', [OneValidators.required, OneValidators.maxLength(32)]],\n  port: [514, [OneValidators.required, OneValidators.range(1, 65535)]],\n  description: ['', [descriptionValidator]]\n});\n```\n\n```html\n<!-- ===== Template ===== -->\n<form [formGroup]=\"form\">\n  <!-- Name field -->\n  <mat-form-field>\n    <mat-label mxLabel [mxLabelTooltip]=\"t('field.name.hint')\">{{ t('field.name') }}</mat-label>\n    <input matInput formControlName=\"name\" />\n    <mat-error oneUiFormError=\"name\"></mat-error>\n  </mat-form-field>\n\n  <!-- Port field with number-only input -->\n  <mat-form-field>\n    <mat-label>{{ t('field.port') }}</mat-label>\n    <input matInput type=\"text\" oneUiNumberOnly formControlName=\"port\" />\n    <mat-hint oneUiFormHint=\"port\"></mat-hint>  <!-- Shows \"1 ~ 65535\" -->\n    <mat-error oneUiFormError=\"port\"></mat-error>\n  </mat-form-field>\n\n  <!-- Description with character count -->\n  <mat-form-field>\n    <mat-label mxLabel mxLabelOptional [mxLabelOptionalText]=\"t('general.common.optional')\">\n      {{ t('field.description') }}\n    </mat-label>\n    <textarea matInput formControlName=\"description\"></textarea>\n    <mat-hint oneUiFormHint=\"description\"></mat-hint>  <!-- Shows \"0 / 255\" -->\n    <mat-error oneUiFormError=\"description\"></mat-error>\n  </mat-form-field>\n\n  <button mat-flat-button color=\"primary\"\n    [mxButtonIsLoading]=\"loading()\"\n    [disabled]=\"form.invalid || loading()\">\n    {{ t('general.button.submit') }}\n  </button>\n</form>\n```\n\n### Common Mistakes\n\n| ❌ Wrong | ✅ Correct |\n|----------|-----------|\n| `{{ form.get('name')?.value?.length }} / 32` | `<mat-hint oneUiFormHint=\"name\">` |\n| `*ngIf=\"form.get('x')?.hasError('required')\"` | `<mat-error oneUiFormError=\"x\">` |\n| `[maxlength]=\"32\"` + manual char count | `OneValidators.maxLength(32)` + `oneUiFormHint` |\n| Hardcoded error messages | i18n keys in `validatorFnWithMessage` |\n| `<input type=\"number\">` | `<input type=\"text\" oneUiNumberOnly>` |\n| `min=\"1\" max=\"65535\"` HTML attributes | `OneValidators.range(1, 65535)` |\n\n### Form Directives Import\n\n```typescript\nimport { OneUiFormErrorDirective, OneUiFormHintDirective } from '@one-ui/shared/ui/form';\nimport { NumberOnlyDirective } from '@one-ui/mxsecurity/shared/domain';\n\n@Component({\n  imports: [\n    // ... other imports\n    OneUiFormErrorDirective,\n    OneUiFormHintDirective,\n    NumberOnlyDirective\n  ]\n})\n```\n\n---\n\n## MxFileUploader\n\nFile upload component.\n\n```typescript\nimport { MxFileUploaderComponent } from '@moxa/formoxa/mx-file-uploader';\n```\n\n```html\n<mat-form-field>\n  <mat-label>{{ t('general.common.select_file') }}</mat-label>\n  <mx-file-uploader\n    formControlName=\"fileSelection\"\n    (onUpload)=\"onLocalFileSelected($event)\"\n  ></mx-file-uploader>\n  <mat-error oneUiFormError=\"fileSelection\"></mat-error>\n</mat-form-field>\n```\n\n---\n\n## MxPasswordVisibility\n\nPassword field visibility toggle component.\n\n```typescript\nimport { MxPasswordVisibilityComponent } from '@moxa/formoxa/mx-password-visibility';\n```\n\n```html\n<mat-form-field>\n  <mat-label mxLabel>{{ t('general.common.password') }}</mat-label>\n  <input matInput [type]=\"passwordVisible ? 'text' : 'password'\" formControlName=\"password\" />\n  <mx-password-visibility matSuffix [(visible)]=\"passwordVisible\" />\n  <mat-error oneUiFormError=\"password\"></mat-error>\n</mat-form-field>\n```\n\n```typescript\n// In component\npasswordVisible = false;\n```\n\n---\n\n## mxAutoTooltip\n\nAuto-detects text overflow and shows tooltip only when text is truncated.\n\n```typescript\nimport { MxAutoTooltipDirective } from '@moxa/formoxa/mx-auto-tooltip';\nimport { MatTooltipModule } from '@angular/material/tooltip';\n```\n\n**Must use with `gl-ellipsis-text` class:**\n\n```html\n<td mat-cell *matCellDef=\"let row\">\n  <span class=\"gl-ellipsis-text\" mxAutoTooltip [matTooltip]=\"row.description\">\n    {{ row.description }}\n  </span>\n</td>\n```\n\n```scss\n// Set column width constraints\n.mat-column-description {\n  min-width: 300px;\n  max-width: 300px;\n}\n```\n\n| Class/Directive | Purpose |\n|-----------------|---------|\n| `gl-ellipsis-text` | CSS class for text truncation with ellipsis |\n| `mxAutoTooltip` | Only shows tooltip when text overflows |\n| `[matTooltip]` | The full text to display in tooltip |\n\n---\n\n## Form Row Layout\n\nUse `.form-row` class to group multiple fields on the same row.\n\n```html\n<!-- ❌ Wrong: Fields on separate rows when Legacy has them on same row -->\n<mat-form-field>\n  <mat-label>{{ t('organization_name') }}</mat-label>\n  <input matInput formControlName=\"organizationName\" />\n</mat-form-field>\n<mat-form-field>\n  <mat-label>{{ t('organizational_unit') }}</mat-label>\n  <input matInput formControlName=\"organizationalUnit\" />\n</mat-form-field>\n\n<!-- ✅ Correct: Keep same row grouping as Legacy -->\n<div class=\"form-row\">\n  <mat-form-field>\n    <mat-label>{{ t('organization_name') }}</mat-label>\n    <input matInput formControlName=\"organizationName\" />\n  </mat-form-field>\n  <mat-form-field>\n    <mat-label>{{ t('organizational_unit') }}</mat-label>\n    <input matInput formControlName=\"organizationalUnit\" />\n  </mat-form-field>\n</div>\n```\n\n⚠️ **Migration Rule**: Analyze Legacy source for `fxLayout=\"row\"` patterns and replicate with `.form-row` class.\n\n---\n\n## MxTabGroup\n\nTab component directive.\n\n```typescript\nimport { MxTabGroupDirective } from '@moxa/formoxa/mx-tabs';\n```\n\n```html\n<mat-tab-group mxTabGroup animationDuration=\"0ms\" [mat-stretch-tabs]=\"false\">\n  <mat-tab [label]=\"t('tab.general')\">...</mat-tab>\n  <mat-tab [label]=\"t('tab.advanced')\">...</mat-tab>\n</mat-tab-group>\n```\n\n---\n\n## Common Import List\n\n```typescript\n// Forms\nimport { ReactiveFormsModule, NonNullableFormBuilder } from '@angular/forms';\nimport { MatFormFieldModule } from '@angular/material/form-field';\nimport { MatInputModule } from '@angular/material/input';\n\n// MX Components\nimport { MxLabelDirective } from '@moxa/formoxa/mx-label';\nimport { MxLoadingButtonDirective } from '@moxa/formoxa/mx-button';\nimport { MxStatusComponent } from '@moxa/formoxa/mx-status';\n\n// Form Validation & Hints\nimport { OneUiFormErrorDirective, OneUiFormHintDirective } from '@one-ui/shared/ui/form';\nimport { OneValidators, validatorFnWithMessage, validatorWithMessage } from '@one-ui/shared/domain';\n\n// Number Input\nimport { NumberOnlyDirective } from '@one-ui/mxsecurity/shared/domain';\n```\n\n---\n\n## Related Tools\n\n- [form-builder.md](./form-builder.md) - Form creation\n- [one-validators.md](./one-validators.md) - Form validation\n- [dialogs.md](./ui/dialogs.md) - Forms in dialogs\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/one-validators.md": "# OneValidators\n\n## What is this?\n\nOne-UI's form validation utility, replacing Angular's native `Validators`.\n\n## When to use\n\nWhen forms need validation (required, length, range, pattern, etc.).\n\n## Quick Reference\n\n| Need | How to Use |\n|------|------------|\n| Basic validation | `OneValidators.required` / `.maxLength(n)` / `.range(min, max)` |\n| Custom error message | `OneValidators.maxLength(8).error('i18n.key')` |\n| Custom validator + message | `validatorFnWithMessage(fn, errorMsg, hintMsg?)` |\n| Display error (basic validators) | `<mat-error oneUiFormError=\"field\">` → see [Error Display Strategy](#error-display-strategy) |\n| Display error (pattern/custom) | `@if/@else` with custom messages → see [Error Display Strategy](#error-display-strategy) |\n| Display hint | `<mat-hint oneUiFormHint=\"field\">` → see [mx-components.md](./mx-components.md#form-validation-directives) |\n\n## Validation Flow\n\n**Step 1: Define Validators (TypeScript)**\n- Option A: `OneValidators.required`, `OneValidators.maxLength(n)` — built-in validators\n- Option B: `validatorFnWithMessage(fn, errorMsg, hintMsg?)` — custom validator with message\n\n**Step 2: Display in Template (HTML)**\n- `<mat-error oneUiFormError=\"fieldName\">` — auto-displays error message\n- `<mat-hint oneUiFormHint=\"fieldName\">` — auto-displays hint (character count / range)\n\n---\n\n## Error Display Strategy\n\n**CRITICAL**: The way you display error messages depends on the validator type.\n\n### Strategy Decision Table\n\n| Validator Type | Display Method | Reason |\n|---------------|----------------|--------|\n| **Basic 6** (`required`, `minLength`, `maxLength`, `range`, `rangeLength`, `email`) | ✅ Use `oneUiFormError` directive | Built-in i18n messages |\n| **pattern** | ❌ MUST use `@if/@else` | Needs specific message per pattern type |\n| **duplicate** | ❌ MUST use `@if/@else` | Needs context-specific message |\n| **Custom validators** | ❌ MUST use `@if/@else` | No built-in messages |\n| **All other validators** | ❌ MUST use `@if/@else` | Not in basic 6 |\n\n### Pattern 1: Basic Validators (Use Directive)\n\nFor the **6 basic validators** with built-in i18n support:\n\n```html\n<mat-form-field>\n  <mat-label>{{ t('label') }}</mat-label>\n  <input matInput formControlName=\"name\" />\n  <mat-error oneUiFormError=\"name\"></mat-error>\n</mat-form-field>\n```\n\n**Built-in i18n messages:**\n- `required` → `validators.required`\n- `minLength` → `validators.require_min_length`\n- `maxLength` → `validators.invalid_max_length`\n- `range` → `validators.invalid_range`\n- `rangeLength` → `validators.invalid_range`\n- `email` → `validators.invalid_email`\n\n### Pattern 2: Pattern/Custom Validators (Use @if/@else)\n\nFor **pattern validators** and **custom validators**, you MUST use `@if/@else`:\n\n```html\n<mat-form-field>\n  <mat-label>{{ t('general.common_account.account') }}</mat-label>\n  <input matInput formControlName=\"account\" />\n  @if (form.controls.account.hasError('pattern')) {\n    <mat-error>{{ t('validators.invalid_format_not_space') }}</mat-error>\n  } @else if (form.controls.account.hasError('duplicate')) {\n    <mat-error>{{ t('validators.duplicate_account') }}</mat-error>\n  } @else {\n    <mat-error oneUiFormError=\"account\"></mat-error>\n  }\n</mat-form-field>\n```\n\n### Why This Strategy?\n\n1. **`oneUiFormError` directive** handles the 6 basic validators with built-in i18n\n2. **Pattern validation** errors are too generic (`validators.invalid`) without context\n3. **Custom validators** need specific messages that only you know\n4. **Legacy consistency** - this matches the pattern used in the original codebase\n\n### Common Pattern Error Messages\n\nWhen using `OneValidators.pattern()` with shared constants from `@one-ui/shared/domain`:\n\n| Pattern Constant | Error Message i18n Key |\n|------------------|----------------------|\n| `VAILD_REGEX_NOT_SPACE` | `validators.invalid_format_not_space` |\n| `VAILD_REGEX_LEVEL_1` | `validators.invalid_regex_level_1` |\n| `IPADDR_REGEX` | `validators.invalid_ip_address` |\n| `VAILD_MAC` | `validators.invalid_mac_address` |\n| `VALID_REGEX_VIRGINIA_GUIDELINE` | `validators.notMeetPolicy` |\n\n### Complete Examples\n\n#### Example 1: Mix of Basic and Pattern Validators\n\n```typescript\n// Component\nimport { OneValidators } from '@one-ui/shared/domain';\n\nform = this.#fb.group({\n  name: ['', [OneValidators.required, OneValidators.maxLength(32)]],  // Basic only\n  account: ['', [\n    OneValidators.required,     // Basic\n    OneValidators.maxLength(31), // Basic\n    OneValidators.pattern(VAILD_REGEX_NOT_SPACE)  // Pattern - needs custom message!\n  ]]\n});\n```\n\n```html\n<!-- Template -->\n<!-- Name: Basic validators only - use directive -->\n<mat-form-field>\n  <mat-label>{{ t('general.common.name') }}</mat-label>\n  <input matInput formControlName=\"name\" />\n  <mat-error oneUiFormError=\"name\"></mat-error>\n</mat-form-field>\n\n<!-- Account: Has pattern validator - use @if/@else -->\n<mat-form-field>\n  <mat-label>{{ t('general.common_account.account') }}</mat-label>\n  <input matInput maxlength=\"31\" formControlName=\"account\" />\n  <mat-hint align=\"end\">{{ form.controls.account.value.length }} / 31</mat-hint>\n  @if (form.controls.account.hasError('pattern')) {\n    <mat-error>{{ t('validators.invalid_format_not_space') }}</mat-error>\n  } @else {\n    <mat-error oneUiFormError=\"account\"></mat-error>\n  }\n</mat-form-field>\n```\n\n#### Example 2: IP Address with Pattern Validation\n\n```typescript\nform = this.#fb.group({\n  ipAddress: ['', [\n    OneValidators.required,\n    OneValidators.pattern(IPADDR_REGEX)\n  ]]\n});\n```\n\n```html\n<mat-form-field>\n  <mat-label>{{ t('general.common.server_ip_address') }}</mat-label>\n  <input matInput formControlName=\"ipAddress\" />\n  @if (form.controls.ipAddress.hasError('pattern')) {\n    <mat-error>{{ t('validators.invalid_ip_address') }}</mat-error>\n  } @else {\n    <mat-error oneUiFormError=\"ipAddress\"></mat-error>\n  }\n</mat-form-field>\n```\n\n#### Example 3: Configuration Name with Multiple Patterns\n\n```typescript\nform = this.#fb.group({\n  configurationName: ['', [\n    OneValidators.required,\n    OneValidators.maxLength(32),\n    OneValidators.pattern(VAILD_REGEX_LEVEL_1)\n  ]]\n});\n```\n\n```html\n<mat-form-field>\n  <mat-label>{{ t('features.config_bk_res.configuration_name') }}</mat-label>\n  <input matInput maxlength=\"32\" formControlName=\"configurationName\" />\n  <mat-hint align=\"end\">{{ form.controls.configurationName.value.length }} / 32</mat-hint>\n  @if (form.controls.configurationName.hasError('pattern')) {\n    <mat-error>{{ t('validators.invalid_regex_level_1') }}</mat-error>\n  } @else {\n    <mat-error oneUiFormError=\"configurationName\"></mat-error>\n  }\n</mat-form-field>\n```\n\n### ❌ Common Mistakes\n\n```html\n<!-- ❌ WRONG: Using directive for pattern validator -->\n<mat-form-field>\n  <input matInput formControlName=\"account\" />\n  <mat-error oneUiFormError=\"account\"></mat-error>  <!-- Will show generic \"invalid\" message -->\n</mat-form-field>\n\n<!-- ✅ CORRECT: Using @if/@else for pattern validator -->\n<mat-form-field>\n  <input matInput formControlName=\"account\" />\n  @if (form.controls.account.hasError('pattern')) {\n    <mat-error>{{ t('validators.invalid_format_not_space') }}</mat-error>\n  } @else {\n    <mat-error oneUiFormError=\"account\"></mat-error>\n  }\n</mat-form-field>\n```\n\n---\n\n## Import\n\n```typescript\nimport { OneValidators } from '@one-ui/shared/domain';\n```\n\n---\n\n## Basic Usage\n\n```typescript\nform = this.#fb.group({\n  name: ['', [OneValidators.required, OneValidators.maxLength(32)]],\n  description: ['', [OneValidators.maxLength(255)]],\n  port: ['', [OneValidators.required, OneValidators.range(1, 65535)]]\n});\n```\n\n---\n\n## Full API\n\n### Basic Validators\n\n| Method | Description | Has Built-in i18n? |\n|--------|-------------|-------------------|\n| `OneValidators.required` | Required field | ✅ Yes - use directive |\n| `OneValidators.minLength(n)` | Minimum length | ✅ Yes - use directive |\n| `OneValidators.maxLength(n)` | Maximum length | ✅ Yes - use directive |\n| `OneValidators.min(n)` | Minimum value | ⚠️ Use `range()` instead |\n| `OneValidators.max(n)` | Maximum value | ⚠️ Use `range()` instead |\n| `OneValidators.range(min, max)` | Numeric range | ✅ Yes - use directive |\n| `OneValidators.rangeLength(min, max, fieldName)` | Length range | ✅ Yes - use directive |\n| `OneValidators.email` | Email format | ✅ Yes - use directive |\n| `OneValidators.pattern(regex)` | Regex pattern | ❌ No - use @if/@else |\n\n> **Note**: For numeric range validation, always use `OneValidators.range(min, max)` instead of separate `min()` and `max()` validators.\n\n### Custom Validators\n\n| Method | Description |\n|--------|-------------|\n| `OneValidators.duplicate(tableData, 'fieldName')` | Duplicate check |\n| `OneValidators.matchFieldsValidator('password', 'confirmPassword')` | Field matching |\n\n### Override Error Messages\n\n```typescript\n// Default message\nOneValidators.minLength(8)\n\n// Custom message\nOneValidators.minLength(8).error('validators.notMeetPolicy')\nOneValidators.pattern(PATTERN).error('validators.notMeetPolicy')\n```\n\n---\n\n## Enhanced Validators\n\nFor custom validators that need automatic error/hint message rendering with `oneUiFormError` and `oneUiFormHint` directives.\n\n> 📖 For template usage, see [mx-components.md - Form Validation Directives](./mx-components.md#form-validation-directives)\n\n### validatorFnWithMessage\n\nWraps a simple `ValidatorFn` with error and optional hint message renderers.\n\n```typescript\nimport { validatorFnWithMessage } from '@one-ui/shared/domain';\n\n// Basic usage - error message only\nconst myValidator = validatorFnWithMessage(\n  (control) => control.value === 'invalid' ? { invalid: true } : null,\n  'validators.invalidValue'  // i18n key for error message\n);\n\n// With hint message (common for character count)\nconst maxLengthValidator = validatorFnWithMessage(\n  (control) => control.value?.length > 32 ? { maxLength: true } : null,\n  'validators.maxLength',\n  (control) => `${control.value?.length ?? 0} / 32`\n);\n```\n\n### validatorWithMessage\n\nFor validators that need parameters (factory function pattern).\n\n```typescript\nimport { validatorWithMessage } from '@one-ui/shared/domain';\n\nconst maxLength = validatorWithMessage(\n  (max: number) => (control) =>\n    control.value?.length > max ? { maxLength: true } : null,\n  (max: number) => `validators.maxLength`,\n  (max: number) => (control) => `${control.value?.length ?? 0} / ${max}`\n);\n```\n\n### Error/Hint Message Types\n\n| Type | Example |\n|------|---------|\n| i18n key | `'validators.required'` |\n| Dynamic function | `(control) => ({ key: 'validators.maxLength', params: { max: 32 } })` |\n| String function (hint) | `(control) => \\`${control.value?.length ?? 0} / 32\\`` |\n\n### Why Use Enhanced Validators?\n\n| Without Enhanced Validators | With Enhanced Validators |\n|----------------------------|--------------------------|\n| Manual `{{ form.get('x')?.value?.length }} / 32` | `<mat-hint oneUiFormHint=\"x\">` |\n| Manual `*ngIf` for each error type | `<mat-error oneUiFormError=\"x\">` |\n| Repeated error message logic | Centralized in validator |\n| No i18n support in hints | Automatic i18n translation |\n\n---\n\n## MXSecurity-specific Validators\n\n```typescript\nimport { Validators } from '@one-ui/mxsecurity/shared/ui';\n\n// Pattern validators\nValidators.name32          // a-z, A-Z, 0-9, . _ - (max 32)\nValidators.name50          // a-z, A-Z, 0-9, . _ - (max 50)\nValidators.ipv4            // IPv4 format\nValidators.domain          // FQDN format\nValidators.portPattern     // 1-65535\n\n// Function validators\nValidators.ipOrDomain      // IPv4 OR domain\nValidators.port            // Port number\nValidators.passwordStrength(level, minLen)\nValidators.passwordMatch() // FormGroup-level\n\n// Async validators\nValidators.usernameExists(500)\nValidators.emailExists(500, excludeEmail?)\n```\n\n---\n\n## Common Mistakes\n\n```typescript\n// ❌ WRONG: Using Angular's native Validators\nimport { Validators } from '@angular/forms';\nValidators.required\nValidators.minLength(3)\n\n// ✅ CORRECT: Using OneValidators\nimport { OneValidators } from '@one-ui/shared/domain';\nOneValidators.required\nOneValidators.minLength(3)\n```\n\n---\n\n## Complete Example\n\n```typescript\n// ===== Component =====\nimport { OneValidators, validatorFnWithMessage } from '@one-ui/shared/domain';\n\n// Custom validator with character count hint\nconst descriptionValidator = validatorFnWithMessage(\n  (c) => (c.value?.length ?? 0) > 255 ? { maxLength: true } : null,\n  'validators.maxLength',\n  (c) => `${c.value?.length ?? 0} / 255`\n);\n\nform = this.#fb.group({\n  name: ['', [OneValidators.required, OneValidators.maxLength(32)]],\n  port: [514, [OneValidators.required, OneValidators.range(1, 65535)]],\n  description: ['', [descriptionValidator]]\n});\n```\n\n```html\n<!-- ===== Template ===== -->\n<form [formGroup]=\"form\">\n  <!-- Name field -->\n  <mat-form-field>\n    <mat-label>{{ t('field.name') }}</mat-label>\n    <input matInput formControlName=\"name\" />\n    <mat-error oneUiFormError=\"name\"></mat-error>\n  </mat-form-field>\n\n  <!-- Port field with number-only input -->\n  <mat-form-field>\n    <mat-label>{{ t('field.port') }}</mat-label>\n    <input matInput type=\"text\" oneUiNumberOnly formControlName=\"port\" />\n    <mat-hint oneUiFormHint=\"port\"></mat-hint>  <!-- Shows \"1 ~ 65535\" -->\n    <mat-error oneUiFormError=\"port\"></mat-error>\n  </mat-form-field>\n\n  <!-- Description with character count -->\n  <mat-form-field>\n    <mat-label>{{ t('field.description') }}</mat-label>\n    <textarea matInput formControlName=\"description\"></textarea>\n    <mat-hint oneUiFormHint=\"description\"></mat-hint>  <!-- Shows \"0 / 255\" -->\n    <mat-error oneUiFormError=\"description\"></mat-error>\n  </mat-form-field>\n</form>\n```\n\n---\n\n## Related Tools\n\n- [form-builder.md](./form-builder.md) - NonNullableFormBuilder\n- [mx-components.md](./mx-components.md#form-validation-directives) - oneUiFormError / oneUiFormHint directives\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/routing.md": "# Routing\n\n## What is this?\n\nOne-UI routing configuration with breadcrumb resolver and route aliases.\n\n## When to use\n\nWhen adding new page routes to the application.\n\n## Import\n\n```typescript\nimport { createBreadcrumbResolver, ROUTES_ALIASES } from '@one-ui/mxsecurity/shared/domain';\n```\n\n---\n\n## Route Configuration\n\n### Basic Route with Breadcrumb\n\n```typescript\n// app.routes.ts\nimport { createBreadcrumbResolver, ROUTES_ALIASES } from '@one-ui/mxsecurity/shared/domain';\n\nexport const routes: Route[] = [\n  {\n    path: ROUTES_ALIASES['myFeature'].route,\n    loadChildren: () => import('@one-ui/mxsecurity/my-feature/shell').then((m) => m.createRoutes()),\n    resolve: {\n      breadcrumb: createBreadcrumbResolver(ROUTES_ALIASES['myFeature'].id)\n    }\n  }\n];\n```\n\n### ROUTES_ALIASES Structure\n\n```typescript\n// Each feature has an alias entry\nROUTES_ALIASES['myFeature'] = {\n  id: 'my-feature',        // Breadcrumb translation key\n  route: 'my-feature'      // URL path segment\n};\n```\n\n---\n\n## Feature Routes (Shell Layer)\n\n```typescript\n// libs/{scope}/{feature}/shell/src/lib/{feature}.routes.ts\nimport { Route } from '@angular/router';\nimport { FeaturePageComponent } from '@one-ui/{scope}/{feature}/features';\nimport { FeatureStore, FeatureApiService } from '@one-ui/{scope}/{feature}/domain';\n\nconst loadDataResolver = (store = inject(FeatureStore)) => {\n  store.loadItems();\n  return true;\n};\n\nexport const createRoutes = (): Route[] => [\n  {\n    path: '',\n    component: FeaturePageComponent,\n    providers: [FeatureStore, FeatureApiService],\n    resolve: {\n      data: () => loadDataResolver()\n    }\n  }\n];\n```\n\n---\n\n## Nested Routes\n\n```typescript\n// For features with sub-pages\nexport const createRoutes = (): Route[] => [\n  {\n    path: '',\n    component: FeaturePageComponent,\n    providers: [FeatureStore, FeatureApiService],\n    resolve: { data: () => loadDataResolver() }\n  },\n  {\n    path: ':id',\n    component: FeatureDetailComponent,\n    resolve: { data: () => loadDetailResolver() }\n  }\n];\n```\n\n---\n\n## Breadcrumb Display\n\nThe `<one-ui-breadcrumb />` component automatically reads the resolved breadcrumb data:\n\n```html\n<!-- In page template -->\n<div *transloco=\"let t\" class=\"gl-page-content\">\n  <one-ui-breadcrumb />\n  <mx-page-title [title]=\"t('features.xxx.page_title')\" />\n  <!-- ... -->\n</div>\n```\n\n---\n\n## Common Mistakes\n\n```typescript\n// ❌ WRONG: Missing breadcrumb resolver\n{\n  path: 'my-feature',\n  loadChildren: () => import('./my-feature/shell').then((m) => m.createRoutes())\n  // Breadcrumb won't display correctly\n}\n\n// ✅ CORRECT: Include breadcrumb resolver\n{\n  path: ROUTES_ALIASES['myFeature'].route,\n  loadChildren: () => import('./my-feature/shell').then((m) => m.createRoutes()),\n  resolve: {\n    breadcrumb: createBreadcrumbResolver(ROUTES_ALIASES['myFeature'].id)\n  }\n}\n```\n\n```typescript\n// ❌ WRONG: Hardcoded route path\n{\n  path: 'my-feature',  // Don't hardcode\n  ...\n}\n\n// ✅ CORRECT: Use ROUTES_ALIASES\n{\n  path: ROUTES_ALIASES['myFeature'].route,\n  ...\n}\n```\n\n---\n\n## Related Tools\n\n- [page-layout.md](./ui/page-layout.md) - Page structure with breadcrumb\n- [signal-store.md](./signal-store.md) - Store used in resolvers\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/shared-helpers.md": "# Shared Helpers\n\n## What is this?\n\nCommon utility functions available in One-UI shared domain that can be reused across features.\n\n## When to use\n\nWhen you need common operations like JWT parsing, IP sorting, dialog configurations, or file downloads.\n\n---\n\n## Available Shared Helpers\n\n### Dialog Configuration\n\nPre-configured dialog sizes for consistent UI:\n\n```typescript\nimport {\n  smallDialogConfig,\n  mediumDialogConfig,\n  largeDialogConfig,\n  extraLargeDialogConfig\n} from '@one-ui/shared/domain';\n\n// Small dialog (400px width)\nthis.dialog.open(MyDialog, { ...smallDialogConfig, data });\n\n// Medium dialog (560px width)\nthis.dialog.open(MyDialog, { ...mediumDialogConfig, data });\n\n// Large dialog (720px width)\nthis.dialog.open(MyDialog, { ...largeDialogConfig, data });\n\n// Extra large dialog (960px width)\nthis.dialog.open(MyDialog, { ...extraLargeDialogConfig, data });\n```\n\n---\n\n### JWT Parsing\n\nParse JWT tokens to extract payload data:\n\n```typescript\nimport { parseJwt } from '@one-ui/shared/domain';\n\n// Get JWT from storage\nconst token = sessionStorage.getItem('mx_token');\n\n// Parse to get payload\nconst payload = parseJwt(token);\n\n// Access claims\nconsole.log(payload.userId);\nconsole.log(payload.username);\nconsole.log(payload.exp); // Expiration time\n```\n\n**Type Definition**:\n```typescript\ninterface JwtPayload {\n  [key: string]: any;\n  exp?: number;  // Expiration time (Unix timestamp)\n  iat?: number;  // Issued at (Unix timestamp)\n}\n```\n\n---\n\n### IP Address Utilities\n\nConvert IP addresses to numbers for proper sorting:\n\n```typescript\nimport { convertIpToNumber } from '@one-ui/shared/domain';\n\n// Problem: String sorting of IPs is wrong\n// ['192.168.1.10', '192.168.1.2'].sort()  → ['192.168.1.10', '192.168.1.2'] ❌\n\n// Solution: Convert to number for sorting\nconst columns = computed(() => [\n  {\n    key: 'ipAddress',\n    header: this.#transloco.translate('general.common.ip_address'),\n    sort: (data) => convertIpToNumber(data.ipAddress)  // ✅ Correct numeric sort\n  }\n]);\n```\n\n**How it works**:\n```typescript\nconvertIpToNumber('192.168.1.1')   // → 3232235777\nconvertIpToNumber('192.168.1.10')  // → 3232235786\nconvertIpToNumber('10.0.0.1')      // → 167772161\n```\n\n---\n\n### Options Lookup\n\nGet display text from an options array by value:\n\n```typescript\nimport { getTextByValue } from '@one-ui/shared/domain';\n\n// Default usage (looks for 'value' and 'text' fields)\nconst options = [\n  { value: '1', text: 'Option 1' },\n  { value: '2', text: 'Option 2' }\n];\ngetTextByValue(options, '1'); // → 'Option 1'\n\n// Custom field names\nconst interfaces = [\n  { id: 'eth0', label: 'Ethernet 0' },\n  { id: 'eth1', label: 'Ethernet 1' }\n];\ngetTextByValue(interfaces, 'eth0', 'id', 'label'); // → 'Ethernet 0'\n```\n\n**Signature**:\n```typescript\nfunction getTextByValue<T = any>(\n  options: T[],\n  value: any,\n  valueField: string = 'value',\n  textField: string = 'text'\n): string\n```\n\n---\n\n### File Download\n\nUtilities for handling file downloads:\n\n```typescript\nimport { createDownloadOptions, triggerFileDownload } from '@one-ui/shared/domain';\n\n// Create download options for API calls\nconst downloadOptions = createDownloadOptions();\n\n// Make API call with download options\nthis.http.get('/api/export/config', downloadOptions)\n  .subscribe(blob => {\n    // Trigger file download in browser\n    triggerFileDownload(blob, 'config.json');\n  });\n```\n\n**createDownloadOptions()**:\nReturns HTTP options for blob responses:\n```typescript\n{\n  responseType: 'blob',\n  observe: 'response'\n}\n```\n\n**triggerFileDownload(blob, filename)**:\n- Creates a temporary download link\n- Triggers download in the browser\n- Automatically cleans up the temporary link\n\n---\n\n## Common Use Cases\n\n### Table Column Sorting\n\n```typescript\nreadonly columns = computed(() => [\n  // String column - default sorting\n  {\n    key: 'name',\n    header: this.#transloco.translate('general.common.name')\n  },\n  // IP address column - numeric sorting\n  {\n    key: 'ipAddress',\n    header: this.#transloco.translate('general.common.ip_address'),\n    sort: (data) => convertIpToNumber(data.ipAddress)\n  },\n  // Status column - display text from options\n  {\n    key: 'status',\n    header: this.#transloco.translate('general.common.status'),\n    valueFormatter: (data) => getTextByValue(STATUS_OPTIONS, data.statusRaw)\n  }\n]);\n```\n\n### Dialog with Standard Size\n\n```typescript\nopenEditDialog(user: User) {\n  const dialogRef = this.#dialog.open(UserEditDialog, {\n    ...mediumDialogConfig,\n    viewContainerRef: this.#viewContainerRef,\n    data: { mode: 'edit', user }\n  });\n\n  dialogRef.afterClosed().subscribe(result => {\n    if (result) {\n      this.#store.updateUser({ input: result });\n    }\n  });\n}\n```\n\n### Config Export/Import\n\n```typescript\n// Export config\nexportConfig() {\n  const downloadOptions = createDownloadOptions();\n\n  this.#api.exportConfig$(downloadOptions).subscribe(blob => {\n    triggerFileDownload(blob, `config-${Date.now()}.json`);\n  });\n}\n\n// Import config\nimportConfig(file: File) {\n  const formData = new FormData();\n  formData.append('file', file);\n\n  this.#api.importConfig$(formData).subscribe(() => {\n    this.#snackbar.success('Config imported successfully');\n  });\n}\n```\n\n### Authentication\n\n```typescript\n// Check if user is authenticated\nisAuthenticated(): boolean {\n  const token = sessionStorage.getItem('mx_token');\n  if (!token) return false;\n\n  const payload = parseJwt(token);\n  const now = Math.floor(Date.now() / 1000);\n\n  // Check if token is expired\n  return payload.exp ? payload.exp > now : false;\n}\n\n// Get current user info\ngetCurrentUser(): User | null {\n  const token = sessionStorage.getItem('mx_token');\n  if (!token) return null;\n\n  const payload = parseJwt(token);\n  return {\n    userId: payload.sub,\n    username: payload.username,\n    role: payload.role\n  };\n}\n```\n\n---\n\n## Project-Specific Helpers\n\nSome projects may have additional shared helpers in their own shared domain. Check your project's shared domain for:\n\n- Date/time formatting utilities\n- Project-specific validators\n- Custom data transformations\n- Business logic helpers\n\n**Example Project Structure**:\n```\nlibs/{scope}/shared/domain/src/lib/\n├── helpers/\n│   ├── dialog-config.ts        # ✅ Generic\n│   ├── parseJwt.ts             # ✅ Generic\n│   ├── ip-address.helper.ts    # ✅ Generic\n│   ├── get-text-by-value.ts    # ✅ Generic\n│   └── time.helper.ts          # ⚠️ Project-specific\n```\n\n---\n\n## When to Add a Helper to Shared Domain\n\nAdd a helper to shared domain when:\n\n1. **Reusability**: The function is used by **2+ features**\n2. **Pure Function**: No side effects, just input → output\n3. **Generic**: Not tied to a specific feature's domain logic\n\n**Don't add to shared domain when**:\n- Only used in one feature (keep in feature's helper file)\n- Contains feature-specific business logic\n- Depends on feature-specific types or state\n\n---\n\n## Related Tools\n\n- [ddd-architecture.md](../reference/ddd-architecture.md#helper-ts-pure-functions) - Helper file patterns\n- [dialogs.md](./ui/dialogs.md) - Dialog patterns\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/signal-store.md": "# SignalStore\n\n## What is this?\n\nNGRX SignalStore for managing component state, replacing BehaviorSubject and rxMethod.\n\n## When to use\n\n- Pages that need to manage state (lists, loading, error)\n- Need to call API and update UI\n\n## Import\n\n```typescript\nimport { patchState, signalStore, withState, withMethods, withComputed } from '@ngrx/signals';\nimport { queryMethod, mutationMethod, loadingInitialState, type LoadingState } from '@one-ui/shared/domain';\n```\n\n---\n\n## Basic Usage\n\n```typescript\ninterface State extends LoadingState {\n  items: Item[];\n}\n\nconst initialState: State = {\n  ...loadingInitialState,\n  items: []\n};\n\nexport const FeatureStore = signalStore(\n  withState(initialState),\n\n  withComputed(({ items }) => ({\n    itemCount: computed(() => items().length)\n  })),\n\n  withMethods((store, api = inject(FeatureApiService)) => ({\n    // GET requests\n    loadItems: queryMethod<void, Item[]>({\n      store,\n      observe: () => api.getAll$(),\n      next: (items) => patchState(store, { items })\n    }),\n\n    // POST/PUT/DELETE requests\n    createItem: mutationMethod<CreateInput, Item>({\n      store,\n      observe: (input) => api.create$(input),\n      next: (item) => patchState(store, { items: [...store.items(), item] })\n    })\n  }))\n);\n```\n\n---\n\n## queryMethod vs mutationMethod\n\n| Method | Use Case | Loading State | Success Feedback |\n|--------|----------|---------------|------------------|\n| `queryMethod` | GET requests | `fetching()` | None |\n| `mutationMethod` | POST/PUT/DELETE | `updating()` | Auto snackbar |\n\n---\n\n## Loading States\n\n`LoadingState` automatically manages these states:\n\n```typescript\nstore.updating()   // POST/PUT/DELETE in progress\nstore.fetching()   // GET in progress\nstore.loading()    // updating() || fetching()\nstore.successful() // Last mutation succeeded\n```\n\n---\n\n## Background Refresh\n\nTo not show loading animation:\n\n```typescript\nloadItems: queryMethod<void, Item[]>({\n  store,\n  observe: () => api.getAll$(),\n  next: (items) => patchState(store, { items }),\n  showPageLoading: false  // No loading indicator\n})\n```\n\n---\n\n## Routes with Resolver\n\n```typescript\nconst loadDataResolver = (store = inject(FeatureStore)) => {\n  store.loadItems();\n  return true;\n};\n\nexport const createRoutes = (): Route[] => [\n  {\n    path: '',\n    component: FeaturePageComponent,\n    providers: [FeatureStore, FeatureApiService],\n    resolve: { data: () => loadDataResolver() }\n  }\n];\n```\n\n---\n\n## Common Mistakes\n\n```typescript\n// ❌ WRONG: Using BehaviorSubject\nprivate items$ = new BehaviorSubject<Item[]>([]);\n\n// ✅ CORRECT: Using signal\nreadonly items = signal<Item[]>([]);\n\n// ❌ WRONG: Using rxMethod with manual loading management\nloadData: rxMethod<void>(pipe(\n  tap(() => patchState(store, { loading: true })),\n  switchMap(() => api.getData$()),\n  ...\n))\n\n// ✅ CORRECT: Using queryMethod (auto-manages loading)\nloadData: queryMethod<void, Data[]>({\n  store,\n  observe: () => api.getData$(),\n  next: (data) => patchState(store, { data })\n})\n```\n\n---\n\n## Related Tools\n\n- [dialogs.md](./ui/dialogs.md) - Using Store in Dialog\n- [../reference/ddd-architecture.md](../reference/ddd-architecture.md) - Store belongs in Domain layer\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/tables/advanced.md": "# MXsecurity Table Migration - Advanced Features\n\n## Table Footer Styling\n\nWhen using `#tableFooterTemplate` with table max size display, you **MUST** import and apply the `oneUiTableMaxSizeDirective`:\n\n**Component TypeScript:**\n\n```typescript\nimport { oneUiTableMaxSizeDirective } from '@one-ui/mxsecurity/shared/domain';\n\n@Component({\n  imports: [\n    CommonTableComponent,\n    // ... other imports\n    oneUiTableMaxSizeDirective  // ✅ Required for footer styling\n  ]\n})\n```\n\n**Template:**\n\n```html\n<ng-template #tableFooterTemplate>\n  <!-- ✅ Add oneUiTableMaxSize directive to the span -->\n  <span oneUiTableMaxSize>{{ t('general.table_function.limit_count') }} {{ tableMaxSize() }}</span>\n</ng-template>\n```\n\nThe directive applies the following styles to the footer:\n\n- Flex layout with space-between\n- Proper padding and alignment\n- Text styling classes (`text-on-surface-variant`, `gl-body-sm`)\n\n---\n\n## Hardcode tableMaxSize in Template\n\nFor simple tables where `tableMaxSize` is a static value, **hardcode it directly in the template** instead of passing it through the store.\n\n### ❌ Don't do this (over-engineered)\n\n```typescript\n// arp-page.def.ts - Unnecessary file\nexport const ARP_PAGE_DEFAULTS = {\n  TABLE_MAX_SIZE: 1024\n} as const;\n\n// arp-page.store.ts - Unnecessary computed\nwithComputed((state) => ({\n  tableData: computed(() => state.arpEntries()),\n  tableMaxSize: computed(() => ARP_PAGE_DEFAULTS.TABLE_MAX_SIZE)  // ❌ Over-engineered\n}))\n\n// arp-table.component.ts - Unnecessary input\nreadonly tableMaxSize = input.required<number>();  // ❌ Over-engineered\n\n// arp-page.component.html - Unnecessary binding\n<one-ui-arp-table [tableData]=\"tableData()\" [tableMaxSize]=\"tableMaxSize()\" />  // ❌ Over-engineered\n```\n\n### ✅ Do this instead (simple and direct)\n\n```typescript\n// arp-page.store.ts - Clean store\nwithComputed((state) => ({\n  tableData: computed(() => state.arpEntries())\n  // No tableMaxSize needed\n}))\n\n// arp-table.component.ts - No tableMaxSize input needed\nreadonly tableData = input.required<ArpTableDataItem[]>();\n// No tableMaxSize input\n\n// arp-page.component.html - Clean binding\n<one-ui-arp-table [tableData]=\"tableData()\" (refresh)=\"onRefresh()\" />\n```\n\n```html\n<!-- arp-table.component.html - Hardcode the value directly -->\n<ng-template #tableFooterTemplate>\n  <span oneUiTableMaxSize>{{ t('general.table_function.limit_count') }} 1024</span>\n</ng-template>\n```\n\n### When to hardcode vs pass as input\n\n| Scenario                                                 | Approach                |\n| -------------------------------------------------------- | ----------------------- |\n| Static value that never changes                          | ✅ Hardcode in template |\n| Value from API response                                  | Pass as input           |\n| Value that varies by configuration                       | Pass as input           |\n| Value used in business logic (e.g., `isExceedTableSize`) | Pass as input           |\n\n---\n\n## CRITICAL: Paginator Configuration\n\n**If the old system's table does NOT have page change or page size functionality, you MUST disable these in the new table:**\n\n```html\n<one-ui-common-table\n  *transloco=\"let t\"\n  headerSticky\n  selectable\n  [data]=\"tableData()\"\n  [columns]=\"columns()\"\n  [disableChangePage]=\"true\"\n  [hidePageSize]=\"true\"\n  (select)=\"select($event)\"\n></one-ui-common-table>\n```\n\n| Property              | Default | Description                                   |\n| --------------------- | ------- | --------------------------------------------- |\n| `[disableChangePage]` | `false` | Hides the page navigation buttons (< 1 2 3 >) |\n| `[hidePageSize]`      | `false` | Hides the \"Items per page\" dropdown           |\n\n### How to Determine\n\nCheck the old system's paginator configuration:\n\n```html\n<!-- Old system with full paginator (keep defaults) -->\n<mat-paginator [pageSizeOptions]=\"[10, 20, 50]\" showFirstLastButtons></mat-paginator>\n\n<!-- Old system with limited paginator (add disableChangePage/hidePageSize) -->\n<mat-paginator [pageSize]=\"10\"></mat-paginator>\n<!-- or no paginator at all -->\n```\n\n### Example: Simple Table with Fixed Page Size\n\n```html\n<!-- ✅ Correct: Old system had no page change/size options -->\n<one-ui-common-table\n  *transloco=\"let t\"\n  headerSticky\n  selectable\n  [data]=\"tableData()\"\n  [columns]=\"columns()\"\n  [disableChangePage]=\"true\"\n  [hidePageSize]=\"true\"\n  (select)=\"select($event)\"\n>\n  <!-- ... templates ... -->\n</one-ui-common-table>\n\n<!-- ❌ Incorrect: Leaving paginator with full functionality when old system didn't have it -->\n<one-ui-common-table [data]=\"tableData()\" [columns]=\"columns()\">\n  <!-- Missing disableChangePage and hidePageSize -->\n</one-ui-common-table>\n```\n\n**IMPORTANT:** Always check the old system's pagination behavior before migrating. The new table should match the old system's functionality exactly.\n\n---\n\n## Migration Checklist\n\n- [ ] Create `TableDataItem` interface in domain layer\n- [ ] Create `TableComponent` in UI layer\n- [ ] Define columns using `TableColumn<TableDataItem>`\n- [ ] Use `input()` for data and config\n- [ ] Use `output()` for events (add, edit, delete, refresh)\n- [ ] Implement toolbar templates (`#rightToolbarTemplate`)\n- [ ] Add custom column templates if needed (e.g., status styling with `MxStatus`)\n- [ ] Use `@one-ui/shared/ui` for `CommonTableComponent`\n- [ ] Import `MatTableModule` and `MatSortModule` for custom column templates\n- [ ] Set `noAutoGenerate: true` for custom template columns\n- [ ] Add custom `filter` function for translated/formatted columns\n- [ ] Add `EDIT_COLUMN_KEY` with `stickyEnd: true` if table is editable\n- [ ] Import `oneUiTableMaxSizeDirective` for footer styling\n- [ ] **Check old system's paginator** - add `[disableChangePage]` and `[hidePageSize]` if needed\n- [ ] Test selection, sorting, pagination, search\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/tables/auto-generate.md": "# Table Migration - Auto-Generate Columns\n\n## Overview\n\n`CommonTableComponent` auto-generates header and cell templates for columns that do **not** have `noAutoGenerate: true`:\n\n```html\n<!-- auto-generated header -->\n{{ column.header ? t(column.header) : '' }}\n\n<!-- auto-generated cell -->\n<span class=\"tooltip-wrapper\" [matTooltip]=\"tooltip\" [matTooltipDisabled]=\"tooltipDisabled\">\n  {{ row[column.key] | noData }}\n</span>\n```\n\n- `header` accepts an **i18n key**, translated by the template's `t()`\n- Cell displays `row[key]` directly — value must be **display-ready** (string or number)\n- Tooltip controlled via column config's `rowTooltip` / `rowTooltipDisable`\n\n---\n\n## When to Auto-Generate\n\n| Cell Content | Auto-Generate | Approach |\n|---|:---:|---|\n| Plain text `{{ row.xxx }}` | ✅ | Remove `noAutoGenerate`, set `header` i18n key |\n| `{{ row.xxx \\| noData }}` | ✅ | Same — auto-generate includes `noData` pipe |\n| `{{ row.xxx \\| date:'yyyy-MM-dd HH:mm:ss' }}` | ✅ | Pre-format in `viewData` computed |\n| Ellipsis + tooltip (long text) | ✅ | Use `truncate` + `rowTooltip` / `rowTooltipDisable` |\n| Composite header (multiple i18n keys) | ✅ | Pre-translate with `translate()` + `langChanged()` |\n| Angular component (`<mx-status>`, `<mat-icon>`) | ❌ | Keep `noAutoGenerate: true` |\n| `<button>` | ❌ | Keep `noAutoGenerate: true` |\n| `<mat-checkbox>` | ❌ | Keep `noAutoGenerate: true` |\n\n> **Core rule:** Cell shows text only → auto-generate. Cell needs Angular component → keep custom template.\n\n---\n\n## Migration Steps\n\n### Step 1: Classify Columns\n\nCheck each `noAutoGenerate: true` column's HTML cell content and decide whether it can be converted using the table above.\n\n---\n\n### Step 2: Pre-format Date Columns\n\nCreate a `viewData` computed to format dates as strings:\n\n```typescript\nimport { formatDate } from '@angular/common';\n\nreadonly viewData = computed(() =>\n  this.data().map((row) => ({\n    ...row,\n    createdAt: row.createdAt\n      ? formatDate(row.createdAt, 'yyyy-MM-dd HH:mm:ss', this.#transloco.getActiveLang())\n      : ''\n  }))\n);\n```\n\nBind HTML to `[data]=\"viewData()\"`.\n\n> Once dates are pre-formatted as strings, any custom `filter` function for date columns can be removed — the default text search matches correctly.\n\n---\n\n### Step 3: Long Text Columns (Truncate + Tooltip)\n\nFor columns with content that may overflow (e.g. activation codes), use `width`, `truncate`, `rowTooltip`:\n\n```typescript\n{\n  key: 'activationCode',\n  header: 'pages.system.license.activationCode',\n  width: '300px',\n  truncate: true,\n  rowTooltip: (row: unknown) => (row as RowType).activationCode ?? '',\n  rowTooltipDisable: (row: unknown) => !(row as RowType).activationCode\n}\n```\n\n| Property | Effect |\n|---|---|\n| `width` | Sets `<th>` `minWidth`; with `truncate`, also sets `<th>` and `<td>` `maxWidth` |\n| `truncate` | Adds `gl-ellipsis-text` class (`overflow: hidden; text-overflow: ellipsis; white-space: nowrap`) |\n| `rowTooltip` | Shows full content on hover |\n| `rowTooltipDisable` | Disables tooltip when no data |\n\n> `TableColumn<R = unknown>` callback parameter is `unknown` — cast is required.\n\n---\n\n### Step 4: Composite Headers\n\nPre-translate with `translate()` and use `langChanged()` to update on language switch:\n\n```typescript\nimport { langChanged } from '@one-ui/shared/ui/translation';\n\nreadonly #langChanged = langChanged();\n\nreadonly columns = computed<TableColumn[]>(() => {\n  this.#langChanged();\n  return [\n    {\n      key: 'duration',\n      header: `${this.#transloco.translate('key.duration')} (${this.#transloco.translate('key.days')})`\n    }\n  ];\n});\n```\n\n> `t(column.header)` returns the raw string when no matching key is found, so pre-translated strings display correctly.\n\n---\n\n### Step 5: Remove Custom Template Blocks\n\nDelete `<ng-container matColumnDef=\"xxx\">` blocks for columns converted to auto-generate.\n\nIf **all** columns are auto-generated, remove the entire `<ng-template #tableColumnsTemplate>`.\n\n---\n\n### Step 6: Clean Up Imports\n\n| Import | Remove When |\n|---|---|\n| `DatePipe` | Dates handled by `formatDate()` in TS |\n| `MatTableModule` / `MatSortModule` | No custom `matColumnDef` remains |\n| `MxTooltipDirective` | Tooltip handled by `rowTooltip` |\n| `NoDataPipe` | Auto-generate includes `noData` pipe |\n\n---\n\n### Step 7: Verify\n\n```bash\nnpx nx build <app> --configuration=development --skip-nx-cache\nnpx nx run-many -t lint -p <lib> --skip-nx-cache\n```\n\n---\n\n## Reference Examples\n\n**mx-ros account-page** — Data-driven complete example:\n- `libs/mx-ros/account-page/domain/src/lib/account-page.helper.ts` — Data transforms (date, enum → display string)\n- `libs/mx-ros/account-page/ui/src/lib/account-table/account-table.component.ts` — Column config (only `enable` uses `noAutoGenerate` for `<mx-status>`)\n\n**mxsecurity license tables** — Date + tooltip + composite header:\n- `libs/mxsecurity/license/ui/src/lib/license-history-table/` — Date pre-format + tooltip + composite header\n- `libs/mxsecurity/license/ui/src/lib/device-license-table/` — 6 columns auto-generate, 4 columns kept (component/icon)\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/tables/basics.md": "# MXsecurity Table Migration - Basics\n\n## Comparison Analysis\n\n### Old MXsecurity Account Table (Angular 16)\n\n**Location**: `/Users/jayden/f2e-networking-jayden/apps/mxsecurity-web/src/app/pages/account`\n\n**Features**:\n\n- Uses `MatTableDataSource` with `MatSort` and `MatPaginator`\n- Columns: select, edit, enable, username, authority, passwordExpire\n- Uses `SelectionModel` for multi-selection\n- Filter functionality with search input\n- Responsive design (expansion panels for mobile)\n- Business logic mixed in component (not DDD compliant)\n\n**Issues**:\n\n- ❌ Uses legacy Angular Material (`@angular/material/legacy-*`)\n- ❌ Uses old `*ngIf`, `*ngFor` syntax\n- ❌ Business logic in component (HTTP calls, data transformation)\n- ❌ No separation of concerns\n\n---\n\n### Shared TableComponent (Target)\n\n**Location**: `libs/shared/ui/src/lib/table/common-table.component.ts`\n\n**Features**:\n| Feature | Support | Notes |\n|---------|---------|-------|\n| Multi-selection | ✅ `selectable` | With checkbox, disabled per row |\n| Edit button | ✅ `editable` | With disabled per row |\n| Sorting | ✅ Built-in | MatSort integrated |\n| Pagination | ✅ Built-in | MatPaginator integrated |\n| Disable page change | ✅ `[disableChangePage]=\"true\"` | Hide page navigation buttons |\n| Hide page size | ✅ `[hidePageSize]=\"true\"` | Hide \"Items per page\" dropdown |\n| Search/Filter | ✅ `searchable` | With MxTableSearch |\n| Sticky header | ✅ `headerSticky` | |\n| Expandable rows | ✅ `expandable` | With detail template |\n| Custom columns | ✅ `tableColumnsTemplate` | For custom rendering |\n| Toolbar | ✅ `leftToolbarTemplate`, `rightToolbarTemplate` | For add/delete buttons |\n| Footer | ✅ `tableFooterTemplate` | For max size display |\n| Loading state | ✅ `loading` | |\n\n---\n\n## Conclusion: Can Use Shared TableComponent\n\nThe shared `CommonTableComponent` in `libs/shared/ui/src/lib/table` **CAN** be directly used for MXsecurity migration. It provides all required features.\n\n---\n\n## Table Title with leftToolbarTemplate\n\nWhen a table needs a title (e.g., from legacy `<mat-card-title>`), use `#leftToolbarTemplate` with `mx-table__title` class:\n\n```html\n<one-ui-common-table searchable [data]=\"tableData()\" [columns]=\"columns()\">\n  <ng-template #leftToolbarTemplate>\n    <span class=\"mx-table__title\">{{ t('features.xxx.table_title') }}</span>\n  </ng-template>\n</one-ui-common-table>\n```\n\n### Table Title with Auto-Refresh\n\nFor status tables that need title, time, and auto-refresh button:\n\n```html\n<one-ui-common-table searchable [data]=\"tableData()\" [columns]=\"columns()\">\n  <ng-template #leftToolbarTemplate>\n    <span class=\"mx-table__title\">{{ t('features.xxx.table_title') }}</span>\n  </ng-template>\n  <ng-template #rightToolbarTemplate>\n    <span class=\"update-time\">{{ formattedTime() }}</span>\n    <button\n      mat-icon-button\n      [matTooltip]=\"autoRefresh() ? t('general.tooltip.auto_refresh_enabled') : t('general.tooltip.auto_refresh_disabled')\"\n      (click)=\"onToggleAutoRefresh()\"\n    >\n      <mat-icon [svgIcon]=\"autoRefresh() ? 'icon:sync_alt' : 'icon:sync_disabled'\"></mat-icon>\n    </button>\n  </ng-template>\n</one-ui-common-table>\n```\n\n**Component SCSS for update-time:**\n\n```scss\n.update-time {\n  font-size: 14px;\n  color: var(--mx-on-surface-variant);\n}\n```\n\n**Legacy to New Mapping:**\n\n| Legacy | New |\n|--------|-----|\n| `<mat-card-title>Title</mat-card-title>` | `<span class=\"mx-table__title\">Title</span>` in `#leftToolbarTemplate` |\n| Last update time in header | `<span class=\"update-time\">` in `#rightToolbarTemplate` |\n| Auto-refresh button in header | `mat-icon-button` in `#rightToolbarTemplate` |\n\n---\n\n## Table Toolbar Button Style\n\n**Table toolbar buttons (Add/Delete) must use:**\n\n- **Button type:** `mat-stroked-button` (outlined button)\n- **Add button text:** `{{ t('general.button.create') }}`\n- **Delete button text:** `{{ t('general.button.delete') }}`\n- **No icons** - text only\n\n```html\n<!-- ✅ Correct: mat-stroked-button with text -->\n<button mat-stroked-button [disabled]=\"isExceedTableSize()\" (click)=\"addAccount.emit()\">\n  {{ t('general.button.create') }}\n</button>\n\n<button mat-stroked-button (click)=\"onDeleteAccount()\">{{ t('general.button.delete') }}</button>\n\n<!-- ❌ Incorrect: mat-button with icon -->\n<button mat-button (click)=\"addAccount.emit()\">\n  <mat-icon svgIcon=\"icon:add\"></mat-icon>\n  {{ t('general.common_action.add') }}\n</button>\n```\n\n---\n\n## Migration Pattern\n\n### Reference: MAF Account Settings Table\n\n**Location**: `libs/maf/act-account/ui/src/lib/account-settings-table`\n\nThis is the pattern to follow:\n\n```typescript\n// account-table.component.ts (UI Layer)\n@Component({\n  selector: 'one-ui-account-table',\n  imports: [CommonTableComponent, TranslocoModule, MatTooltipModule, MatButtonModule, MatIconModule],\n  templateUrl: './account-table.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class AccountTableComponent {\n  // Inputs\n  readonly tableData = input.required<AccountTableDataItem[]>();\n  readonly tableMaxSize = input.required<number>();\n\n  // Outputs\n  addAccount = output<void>();\n  editAccount = output<AccountTableDataItem>();\n  deleteAccount = output<number[]>();\n\n  // Internal state\n  selection: AccountTableDataItem[] = [];\n\n  // Columns definition\n  readonly columns: Signal<TableColumn<AccountTableDataItem>[]> = computed(() => {\n    return [\n      {\n        key: '_select',\n        disable: (row) => row.isCurrentUser // Disable select for current user\n      },\n      {\n        key: 'enable',\n        header: this.transloco.translate('general.common.status')\n      },\n      {\n        key: 'username',\n        header: this.transloco.translate('general.common_account.username')\n      },\n      {\n        key: 'authority',\n        header: this.transloco.translate('general.common_account.authority')\n      },\n      {\n        key: 'passwordExpire',\n        header: this.transloco.translate('features.account_management.password_expire')\n      }\n    ];\n  });\n\n  readonly isExceedTableSize = computed(() => {\n    return this.tableData().length >= this.tableMaxSize();\n  });\n\n  select(data: AccountTableDataItem[]) {\n    this.selection = data;\n  }\n\n  onDeleteAccount() {\n    this.deleteAccount.emit(this.selection.map((item) => item.key));\n  }\n}\n```\n\n### Template Pattern\n\n```html\n<!-- account-table.component.html -->\n<one-ui-common-table\n  *transloco=\"let t\"\n  headerSticky\n  selectable\n  editable\n  [data]=\"tableData()\"\n  [columns]=\"columns()\"\n  (edit)=\"editAccount.emit($event)\"\n  (select)=\"select($event)\"\n>\n  <!-- Right Toolbar: Add/Delete buttons -->\n  <ng-template #rightToolbarTemplate>\n    @if (selection.length === 0) {\n    <span\n      [matTooltip]=\"t('features.account_management.rule_size_limitation', { size: tableMaxSize() })\"\n      [matTooltipDisabled]=\"!isExceedTableSize()\"\n    >\n      <button mat-stroked-button [disabled]=\"isExceedTableSize()\" (click)=\"addAccount.emit()\">\n        {{ t('general.button.create') }}\n      </button>\n    </span>\n    } @if (selection.length >= 1) {\n    <button mat-stroked-button (click)=\"onDeleteAccount()\">{{ t('general.button.delete') }}</button>\n    }\n  </ng-template>\n\n  <!-- Custom Column Templates (if needed) -->\n  <ng-template #tableColumnsTemplate>\n    <!-- Enable/Status column with MxStatusComponent -->\n    <ng-container matColumnDef=\"enable\">\n      <th *matHeaderCellDef mat-header-cell mat-sort-header>{{ t('general.common.status') }}</th>\n      <td *matCellDef=\"let row\" mat-cell>\n        @if (row.enableRaw === 1) {\n        <mx-status statusType=\"success\" statusIcon=\"icon:task_alt\" [statusText]=\"t('general.common.enable')\" />\n        } @else {\n        <mx-status statusType=\"neutral\" statusIcon=\"icon:hide_source\" [statusText]=\"t('general.common.disable')\" />\n        }\n      </td>\n    </ng-container>\n  </ng-template>\n\n  <!-- Footer: Max size display -->\n  <ng-template #tableFooterTemplate>\n    <span oneUiTableMaxSize>{{ t('general.table_function.limit_count') }} {{ tableMaxSize() }}</span>\n  </ng-template>\n</one-ui-common-table>\n```\n\n---\n\n## Column Mapping\n\n| Old Column       | New Column Key   | Notes                                |\n| ---------------- | ---------------- | ------------------------------------ |\n| `select`         | `_select`        | Built-in, use `selectable` attribute |\n| `edit`           | `_edit`          | Built-in, use `editable` attribute   |\n| `enable`         | `enable`         | May need custom template for styling |\n| `username`       | `username`       | Direct mapping                       |\n| `authority`      | `authority`      | Direct mapping                       |\n| `passwordExpire` | `passwordExpire` | Direct mapping                       |\n| `dummy`          | (not needed)     | Remove                               |\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/tables/columns.md": "# Table Migration - Column Configuration\n\n## TableColumn API\n\n```typescript\ntype TableColumn<R = any> = {\n  key: string; // Column key (must match data property)\n  header?: string; // Column header text\n  sticky?: boolean; // Stick to left\n  stickyEnd?: boolean; // Stick to right\n  disabled?: boolean; // Disable sorting\n  tooltip?: string; // Header tooltip\n  visible?: boolean; // Show/hide column\n  width?: string; // Column width\n  truncate?: boolean; // Truncate cell text with ellipsis (requires width)\n  noAutoGenerate?: boolean; // Use custom template\n  filter?: (data: R, filter: string) => boolean; // Custom filter\n  sort?: (data: R, sortId: string) => string | number; // Custom sort\n  disable?: (data: R) => boolean; // Disable row action\n  rowTooltip?: (data: R) => string; // Row tooltip\n  rowTooltipDisable?: (data: R) => boolean; // Disable row tooltip\n};\n\n// Special column keys\nconst SELECT_COLUMN_KEY = '_select'; // Checkbox column\nconst EDIT_COLUMN_KEY = '_edit'; // Edit button column\nconst EXPAND_COLUMN_KEY = '_expand'; // Expand button column\n```\n\n---\n\n## Enable/Status Column with MxStatus\n\nWhen displaying enable/disable or status columns, use `MxStatusComponent` instead of plain text with CSS classes:\n\n**Component TypeScript:**\n\n```typescript\nimport { MxStatusComponent } from '@moxa/formoxa/mx-status';\n\n@Component({\n  imports: [\n    CommonTableComponent,\n    MxStatusComponent,  // ✅ Required for status display\n    // ... other imports\n  ]\n})\n```\n\n**Template:**\n\n```html\n<ng-template #tableColumnsTemplate>\n  <ng-container matColumnDef=\"enable\">\n    <th *matHeaderCellDef mat-header-cell mat-sort-header>{{ t('general.common.status') }}</th>\n    <td *matCellDef=\"let row\" mat-cell>\n      @if (row.enableRaw === 1) {\n      <mx-status statusType=\"success\" statusIcon=\"icon:task_alt\" [statusText]=\"t('general.common.enable')\" />\n      } @else {\n      <mx-status statusType=\"neutral\" statusIcon=\"icon:hide_source\" [statusText]=\"t('general.common.disable')\" />\n      }\n    </td>\n  </ng-container>\n</ng-template>\n```\n\n**MxStatus Props:**\n\n| Prop         | Values                                    | Description                  |\n| ------------ | ----------------------------------------- | ---------------------------- |\n| `statusType` | `success`, `warning`, `error`, `neutral`  | Status color theme           |\n| `statusIcon` | `icon:task_alt`, `icon:hide_source`, etc. | SVG icon name                |\n| `statusText` | string                                    | Display text (use transloco) |\n\n**Don't use plain text with CSS classes:**\n\n```html\n<!-- ❌ Incorrect: Plain text with CSS class -->\n<td mat-cell [class]=\"row.enableClass\">{{ row.enable }}</td>\n\n<!-- ✅ Correct: Use MxStatusComponent -->\n<td mat-cell>\n  @if (row.enableRaw === 1) {\n  <mx-status statusType=\"success\" ... />\n  } @else {\n  <mx-status statusType=\"neutral\" ... />\n  }\n</td>\n```\n\n---\n\n## Custom Template Columns: noAutoGenerate and filter\n\nWhen a column uses a custom template (via `#tableColumnsTemplate`), you **MUST**:\n\n1. Set `noAutoGenerate: true` in the column configuration\n2. Provide a custom `filter` function if the table has search functionality\n3. **Import `MatTableModule` and `MatSortModule`** for the template directives to work\n\n### Required Imports for Custom Column Templates\n\n> ⚠️ **CRITICAL**: `CommonTableComponent` does NOT handle external template directives. You MUST import these modules in components that have `#tableColumnsTemplate`.\n\n| Directives Used in Template                        | Required Module  |\n| -------------------------------------------------- | ---------------- |\n| `matColumnDef`, `*matHeaderCellDef`, `*matCellDef` | `MatTableModule` |\n| `mat-sort-header`                                  | `MatSortModule`  |\n\n```typescript\nimport { MatSortModule } from '@angular/material/sort';\nimport { MatTableModule } from '@angular/material/table';\n\n@Component({\n  imports: [\n    CommonTableComponent,\n    MatSortModule,   // ✅ Required for mat-sort-header in custom columns\n    MatTableModule,  // ✅ Required for matColumnDef, *matHeaderCellDef, *matCellDef\n    // ... other imports\n  ]\n})\n```\n\n**Common Error Message:**\n\n```\nA structural directive `matHeaderCellDef` was used in the template without a corresponding import in the component.\n```\n\n**Solution:** Add `MatTableModule` and `MatSortModule` imports to the component.\n\n### Component TypeScript\n\n```typescript\nreadonly columns: Signal<TableColumn<AccountTableDataItem>[]> = computed(() => {\n  this.#langChanged();\n  return [\n    {\n      key: SELECT_COLUMN_KEY,\n      disable: (row: AccountTableDataItem) => row.loginOn\n    },\n    {\n      key: 'enable',\n      header: this.#transloco.translate('general.common.status'),\n      noAutoGenerate: true,  // ✅ Required for custom template columns\n      filter: (data: AccountTableDataItem, filter: string) => {\n        // ✅ Custom filter for translated status text\n        const searchText = filter.trim().toLowerCase();\n        if (!searchText) {\n          return true;\n        }\n\n        const enableStatus = data.enableRaw === 1\n          ? this.#transloco.translate('general.common.enable')\n          : this.#transloco.translate('general.common.disable');\n\n        return enableStatus.toLowerCase().includes(searchText);\n      }\n    },\n    {\n      key: 'username',\n      header: this.#transloco.translate('general.common_account.username')\n    }\n    // ... other columns\n  ];\n});\n```\n\n### Why is this important?\n\n| Property         | Purpose                                              | When to Use                                                                              |\n| ---------------- | ---------------------------------------------------- | ---------------------------------------------------------------------------------------- |\n| `noAutoGenerate` | Tells the table to skip auto-generating cell content | Any column with custom `<ng-template>` in `#tableColumnsTemplate`                        |\n| `filter`         | Custom search/filter logic for the column            | When the displayed text differs from raw data (e.g., translated status, formatted dates) |\n\n### Common Mistakes\n\n```typescript\n// ❌ Incorrect: Missing noAutoGenerate for custom template column\n{\n  key: 'enable',\n  header: this.#transloco.translate('general.common.status')\n}\n\n// ❌ Incorrect: Filtering on raw data instead of displayed text\n{\n  key: 'enable',\n  noAutoGenerate: true,\n  filter: (data, filter) => data.enableRaw.toString().includes(filter)  // Wrong!\n}\n\n// ✅ Correct: Filter on translated text that user sees\n{\n  key: 'enable',\n  noAutoGenerate: true,\n  filter: (data: AccountTableDataItem, filter: string) => {\n    const searchText = filter.trim().toLowerCase();\n    if (!searchText) { return true; }\n\n    const enableStatus = data.enableRaw === 1\n      ? this.#transloco.translate('general.common.enable')\n      : this.#transloco.translate('general.common.disable');\n\n    return enableStatus.toLowerCase().includes(searchText);\n  }\n}\n```\n\n---\n\n## Edit Column with stickyEnd\n\nWhen using the `editable` attribute on `<one-ui-common-table>`, you **MUST** add the `EDIT_COLUMN_KEY` to your columns array with `stickyEnd: true` to keep the edit button visible when scrolling horizontally.\n\n**Component TypeScript:**\n\n```typescript\nimport { EDIT_COLUMN_KEY, SELECT_COLUMN_KEY, type TableColumn } from '@one-ui/shared/domain';\n\nreadonly columns: Signal<TableColumn<AccountTableDataItem>[]> = computed(() => {\n  return [\n    {\n      key: SELECT_COLUMN_KEY,\n      disable: (row: AccountTableDataItem) => row.loginOn\n    },\n    {\n      key: 'username',\n      header: this.#transloco.translate('general.common_account.username')\n    },\n    // ... other columns\n    {\n      key: EDIT_COLUMN_KEY,\n      stickyEnd: true  // ✅ Keep edit button visible on horizontal scroll\n    }\n  ];\n});\n```\n\n**Template:**\n\n```html\n<one-ui-common-table\n  *transloco=\"let t\"\n  selectable\n  editable      <!-- ✅ Enable edit button -->\n  [data]=\"tableData()\"\n  [columns]=\"columns()\"\n  (edit)=\"editAccount.emit($event)\"\n>\n```\n\n**Why `stickyEnd: true`?**\n\n- Keeps the edit button column fixed to the right side of the table\n- Ensures edit functionality is always accessible even with many columns\n- Provides better UX for tables with horizontal scroll\n\n---\n\n## Action Column with #actionTemplate\n\nWhen adding a custom action button (like re-auth, delete, etc.) besides the built-in edit button, use `#actionTemplate`.\n\n### What `#actionTemplate` provides automatically:\n\n- `stickyEnd` - Column sticks to the right\n- `mxTableThIsAction` - Proper header styling\n- `width: 1%` - Minimal column width (shrink to fit icon)\n- Column position before edit button (edit is always rightmost)\n\n### Component TypeScript\n\n```typescript\nimport { EDIT_COLUMN_KEY, type TableColumn } from '@one-ui/shared/domain';\nimport { CommonTableComponent } from '@one-ui/shared/ui/table';\n\n@Component({\n  imports: [\n    CommonTableComponent,\n    MatIconModule,\n    MatTooltipModule\n    // ... other imports\n  ]\n})\nexport class MyTableComponent {\n  readonly noPermission = input<boolean>(false);\n\n  // ✅ No need to define action column - just define your data columns\n  readonly columns: Signal<TableColumn<MyData>[]> = computed(() => {\n    return [\n      { key: 'name', header: 'Name' },\n      { key: 'status', header: 'Status', noAutoGenerate: true },\n      {\n        key: EDIT_COLUMN_KEY,\n        stickyEnd: true,\n        disable: () => this.noPermission()\n      }\n    ];\n  });\n\n  onReauth(row: MyData) {\n    // Handle reauth action\n  }\n}\n```\n\n### Template\n\n```html\n<one-ui-common-table *transloco=\"let t\" editable [data]=\"tableData()\" [columns]=\"columns()\" (edit)=\"onEdit($event)\">\n  <!-- Action Column: Just provide #actionTemplate -->\n  <ng-template #actionTemplate let-row>\n    <mat-icon\n      svgIcon=\"icon:task_alt\"\n      [matTooltip]=\"t('tooltip.reauth')\"\n      [matTooltipDisabled]=\"noPermission() || row.enable !== 1\"\n      (click)=\"!(noPermission() || row.enable !== 1) && onReauth(row)\"\n    />\n  </ng-template>\n\n  <!-- Other custom columns still use #tableColumnsTemplate -->\n  <ng-template #tableColumnsTemplate>\n    <ng-container matColumnDef=\"status\">\n      <th *matHeaderCellDef mat-header-cell>{{ t('status') }}</th>\n      <td *matCellDef=\"let row\" mat-cell>\n        <mx-status ... />\n      </td>\n    </ng-container>\n  </ng-template>\n</one-ui-common-table>\n```\n\n### Column Order\n\nThe columns are displayed in this order:\n\n1. Expand column (if expandable)\n2. Select column (if selectable)\n3. User-defined columns\n4. **Action column** (if `#actionTemplate` exists)\n5. **Edit column** (always rightmost, if editable)\n\n### Comparison: Before vs After\n\n**Before (manual column definition):**\n\n```typescript\n// ❌ Verbose: Need to define action column in columns array\ncolumns = [\n  { key: 'name', header: 'Name' },\n  { key: 'reauth', header: '', noAutoGenerate: true }, // Extra definition needed\n  { key: EDIT_COLUMN_KEY, stickyEnd: true }\n];\n```\n\n```html\n<!-- ❌ Verbose: Manual stickyEnd, mxTableThIsAction, width -->\n<ng-template #tableColumnsTemplate>\n  <ng-container matColumnDef=\"reauth\" stickyEnd>\n    <th *matHeaderCellDef mat-header-cell mxTableThIsAction></th>\n    <td *matCellDef=\"let row\" mat-cell style=\"width: 1%\">\n      <mat-icon ... />\n    </td>\n  </ng-container>\n</ng-template>\n```\n\n**After (with #actionTemplate):**\n\n```typescript\n// ✅ Clean: No action column definition needed\ncolumns = [\n  { key: 'name', header: 'Name' },\n  { key: EDIT_COLUMN_KEY, stickyEnd: true }\n];\n```\n\n```html\n<!-- ✅ Clean: Just provide content -->\n<ng-template #actionTemplate let-row>\n  <mat-icon ... />\n</ng-template>\n```\n\n### When to use each approach\n\n| Scenario                                     | Use                                              |\n| -------------------------------------------- | ------------------------------------------------ |\n| Action button (icon only, no header)         | `#actionTemplate`                                |\n| Custom data display (status, formatted text) | `noAutoGenerate: true` + `#tableColumnsTemplate` |\n| Built-in edit button                         | `EDIT_COLUMN_KEY` with `stickyEnd: true`         |\n| Built-in checkbox selection                  | `SELECT_COLUMN_KEY`                              |\n\n---\n\n## Pagination Control\n\nWhen you need to hide or disable pagination features, use these attributes on `<one-ui-common-table>`:\n\n### Available Attributes\n\n| Attribute            | Type      | Default | Description                              |\n| -------------------- | --------- | ------- | ---------------------------------------- |\n| `showTablePagination`| `boolean` | `true`  | Show/hide entire pagination bar          |\n| `disableChangePage`  | `boolean` | `false` | Disable page navigation (prev/next)      |\n| `hidePageSize`       | `boolean` | `false` | Hide page size selector dropdown         |\n| `pageSize`           | `number`  | `50`    | Items per page                           |\n| `pageSizeOptions`    | `number[]`| `[50, 100, 200, 1000]` | Page size options    |\n\n### Usage Examples\n\n**Hide pagination completely:**\n\n```html\n<one-ui-common-table\n  [showTablePagination]=\"false\"\n  [data]=\"tableData()\"\n  [columns]=\"columns()\"\n>\n```\n\n**Show pagination bar but disable navigation and hide page size:**\n\n```html\n<one-ui-common-table\n  [disableChangePage]=\"true\"\n  [hidePageSize]=\"true\"\n  [data]=\"tableData()\"\n  [columns]=\"columns()\"\n>\n```\n\n**Common use cases:**\n\n| Scenario                              | Attributes                                     |\n| ------------------------------------- | ---------------------------------------------- |\n| Small fixed-size table (e.g., ≤20 items) | `[showTablePagination]=\"false\"`             |\n| Show count only, no navigation        | `[disableChangePage]=\"true\" [hidePageSize]=\"true\"` |\n| Custom page size                      | `[pageSize]=\"20\" [pageSizeOptions]=\"[10, 20, 50]\"` |\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/transloco.md": "# Transloco\n\n## What is this?\n\nOne-UI i18n translation tool, replacing ngx-translate.\n\n## When to use\n\nWhen displaying translated text.\n\n## Import\n\n```typescript\nimport { TranslocoModule, TranslocoService } from '@jsverse/transloco';\n```\n\n---\n\n## Basic Usage\n\n### In Template\n\n```html\n<div *transloco=\"let t\">\n  <h1>{{ t('features.user.page_title') }}</h1>\n  <button>{{ t('general.button.create') }}</button>\n</div>\n```\n\n### In Component\n\n```typescript\nreadonly #transloco = inject(TranslocoService);\n\ngetMessage() {\n  return this.#transloco.translate('features.xxx.success_message');\n}\n```\n\n---\n\n## Key Conventions\n\n| Prefix | Use | Example |\n|--------|-----|---------|\n| `general.common.*` | Common terms | `general.common.name`, `general.common.status` |\n| `general.button.*` | Button text | `general.button.create`, `general.button.delete` |\n| `general.tooltip.*` | Tooltips | `general.tooltip.refresh` |\n| `features.{feature}.*` | Feature-specific | `features.user.page_title` |\n\n---\n\n## Common Keys\n\n```typescript\n// Buttons\nt('general.button.create')\nt('general.button.delete')\nt('general.button.cancel')\nt('general.button.submit')\nt('general.button.apply')\nt('general.button.save')\n\n// Common terms\nt('general.common.name')\nt('general.common.description')\nt('general.common.status')\nt('general.common.enable')\nt('general.common.disable')\nt('general.common.optional')\n\n// Table\nt('general.tooltip.refresh')\nt('general.table_function.limit_count')\n```\n\n---\n\n## Table Column Translation\n\n```typescript\nreadonly columns = computed(() => [\n  { key: 'name', header: this.#transloco.translate('general.common.name') },\n  { key: 'status', header: this.#transloco.translate('general.common.status') }\n]);\n```\n\n---\n\n## Common Mistakes\n\n```html\n<!-- ❌ WRONG: Using old syntax -->\n<h1>{{ 'features.user.page_title' | translate }}</h1>\n\n<!-- ✅ CORRECT: Using *transloco -->\n<div *transloco=\"let t\">\n  <h1>{{ t('features.user.page_title') }}</h1>\n</div>\n```\n\n```typescript\n// ❌ WRONG: Creating new translation key\nt('features.user.my_custom_label')  // This key doesn't exist!\n\n// ✅ CORRECT: Only use keys that exist in Legacy\nt('features.user.page_title')  // Verify exists in assets/i18n/en.json\n```\n\n---\n\n## Migration Key Points\n\n1. **Do NOT create new translation keys**\n2. **Do NOT modify existing translation keys**\n3. **Copy EXACT keys from Legacy**\n4. **Verify key exists in `assets/i18n/en.json`**\n\n### Finding Legacy Keys\n\n```bash\n# Search Legacy i18n files\ngrep -r \"page_title\" ~/moxa/f2e-networking/apps/*/src/assets/i18n/en.json\n\n# Search Legacy template usage\ngrep -r \"'features.user\" ~/moxa/f2e-networking/apps/*/src/app/\n```\n\n---\n\n## Related Tools\n\n- [common-table.md](./common-table.md) - Table header translation\n- [dialogs.md](./ui/dialogs.md) - Dialog title translation\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/ui/buttons.md": "# Buttons Guidelines\n\n## Buttons (Material Buttons)\n\n**Button Types in MXsecurity:**\n\n- **`mat-button`**: Text button - use for secondary actions (Cancel, Close)\n- **`mat-flat-button`**: ✅ **REQUIRED** - Use for primary/secondary actions in dialogs and forms\n- **`mat-raised-button`**: ❌ **DO NOT USE** - deprecated in mxsecurity, use `mat-flat-button` instead\n- **`mat-stroked-button`**: Outlined button - for tertiary actions\n\n### Dialog Action Buttons Example\n\n```html\n<div mat-dialog-actions align=\"end\">\n  <!-- Secondary action: text button -->\n  <button mat-button mat-dialog-close color=\"primary\">{{ 'general.button.cancel' | transloco }}</button>\n\n  <!-- Primary action: flat button ✅ -->\n  <button mat-flat-button color=\"primary\" (click)=\"submit()\">{{ 'general.button.submit' | transloco }}</button>\n</div>\n```\n\n### Migration Guide\n\nReplace all `mat-raised-button` with `mat-flat-button`:\n\n```html\n<!-- ❌ OLD -->\n<button mat-raised-button color=\"primary\">Save</button>\n\n<!-- ✅ NEW -->\n<button mat-flat-button color=\"primary\">Save</button>\n```\n\n---\n\n## Loading States\n\nUse the loading pattern from shared domain:\n\n```typescript\n@if (store.loading()) {\n  <mat-progress-bar mode=\"indeterminate\" />\n}\n\n@if (store.fetching()) {\n  <mat-spinner />\n}\n```\n\n---\n\n## Page Form Apply Button Pattern\n\n**CRITICAL**: Page-level form Apply buttons must use `mxButtonIsLoading` for loading state AND include `loading()` in the disabled condition.\n\n### Required Import\n\n```typescript\nimport { MxLoadingButtonDirective } from '@moxa/formoxa/mx-button';\n\n@Component({\n  imports: [\n    // ...\n    MxLoadingButtonDirective\n  ]\n})\n```\n\n### Template Pattern\n\n```html\n<!-- ✅ Correct: Both disabled and mxButtonIsLoading -->\n<button\n  mat-flat-button\n  color=\"primary\"\n  type=\"submit\"\n  [disabled]=\"noPermission || loading()\"\n  [mxButtonIsLoading]=\"loading()\"\n>\n  {{ t('general.button.apply') }}\n</button>\n\n<!-- ❌ Incorrect: Only mxButtonIsLoading without loading() in disabled -->\n<button\n  mat-flat-button\n  color=\"primary\"\n  type=\"submit\"\n  [disabled]=\"noPermission\"\n  [mxButtonIsLoading]=\"loading()\"\n>\n  {{ t('general.button.apply') }}\n</button>\n\n<!-- ❌ Incorrect: Only disabled without mxButtonIsLoading -->\n<button\n  mat-flat-button\n  color=\"primary\"\n  type=\"submit\"\n  [disabled]=\"noPermission || loading()\"\n>\n  {{ t('general.button.apply') }}\n</button>\n```\n\n### Complete Page Example\n\n```html\n<div *transloco=\"let t\" class=\"gl-page-content\">\n  <one-ui-breadcrumb />\n  <mx-page-title [title]=\"t('features.xxx.page_title')\" />\n\n  <div class=\"content-wrapper\">\n    <form [formGroup]=\"form\" (ngSubmit)=\"onApply()\">\n      <div class=\"form-column\">\n        <mat-checkbox color=\"primary\" formControlName=\"enable\">\n          {{ t('features.xxx.enable_option') }}\n        </mat-checkbox>\n        <div>\n          <button\n            mat-flat-button\n            color=\"primary\"\n            type=\"submit\"\n            [disabled]=\"noPermission || loading()\"\n            [mxButtonIsLoading]=\"loading()\"\n          >\n            {{ t('general.button.apply') }}\n          </button>\n        </div>\n      </div>\n    </form>\n  </div>\n</div>\n```\n\n**Key Points:**\n\n- **ALWAYS use both** `[disabled]` and `[mxButtonIsLoading]` together\n- `[disabled]=\"noPermission || loading()\"` - prevents interaction during loading AND when user lacks permission\n- `[mxButtonIsLoading]=\"loading()\"` - shows visual loading spinner on the button\n- Import `MxLoadingButtonDirective` from `@moxa/formoxa/mx-button`\n- The `mxButtonIsLoading` directive does NOT automatically disable the button - you must include `loading()` in the disabled condition\n\n---\n\n## Table Toolbar Buttons\n\n**Refresh Button Pattern:**\n\n> **Note:** Only add refresh button if the old code has one. Not all tables need refresh buttons.\n\nToolbar action buttons should be placed in `#rightToolbarTemplate`:\n\n```html\n<one-ui-common-table *transloco=\"let t\" [data]=\"tableData()\" [columns]=\"columns()\">\n  <!-- Right Toolbar: Action buttons -->\n  <ng-template #rightToolbarTemplate>\n    <button data-testid=\"test-xxx-table-btn-xxx\" mat-button (click)=\"refresh.emit()\">\n      <mat-icon data-testid=\"test-xxx-table-icon-xxx\" svgIcon=\"icon:refresh\"></mat-icon>\n      {{ t('general.tooltip.refresh') }}\n    </button>\n  </ng-template>\n</one-ui-common-table>\n```\n\n**Key Points:**\n\n- Use `#rightToolbarTemplate` for action buttons (not `#leftToolbarTemplate`)\n- Use `mat-button` (text button) for toolbar actions\n- Use `svgIcon=\"icon:refresh\"` for icon (not `<mat-icon>refresh</mat-icon>`)\n- Include both icon and text label for accessibility\n- Add `data-testid` attributes for testing\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/ui/components.md": "# UI Components Guidelines\n\n## File Upload Component (MxFileUploaderComponent)\n\n**CRITICAL: Use `MxFileUploaderComponent` instead of manual file input**\n\nWhen a form needs a file upload field, use `MxFileUploaderComponent` from `@moxa/formoxa/mx-file-uploader` instead of creating a manual `<input type=\"file\">` with a folder icon button.\n\n### ❌ Old Pattern (Manual File Input)\n\n```html\n<mat-form-field class=\"suffix-form-field\">\n  <mat-label>{{ t('general.common.select_file') }}</mat-label>\n  <input\n    matInput\n    formControlName=\"fileSelection\"\n    readonly\n    (click)=\"onFileInputClick()\"\n    (keydown)=\"$event.preventDefault()\"\n  />\n  <button mat-icon-button matSuffix type=\"button\" (click)=\"onFileInputClick()\">\n    <mat-icon>folder_open</mat-icon>\n  </button>\n  <mat-error oneUiFormError=\"fileSelection\"></mat-error>\n</mat-form-field>\n<input\n  #fileInput\n  class=\"hidden-file-input\"\n  type=\"file\"\n  (change)=\"onLocalFileSelected($event)\"\n/>\n```\n\n```typescript\n// Component code for manual approach\nreadonly fileInput = viewChild<ElementRef<HTMLInputElement>>('fileInput');\n\nonFileInputClick(): void {\n  this.fileInput()?.nativeElement.click();\n}\n\nonLocalFileSelected(event: Event): void {\n  const input = event.target as HTMLInputElement;\n  if (input.files && input.files.length > 0) {\n    const file = input.files[0];\n    // handle file...\n  }\n}\n```\n\n### ✅ New Pattern (MxFileUploaderComponent)\n\n```html\n<mat-form-field>\n  <mat-label>{{ t('general.common.select_file') }}</mat-label>\n  <mx-file-uploader\n    data-testid=\"test-xxx-input-file\"\n    formControlName=\"fileSelection\"\n    (onUpload)=\"onLocalFileSelected($event)\"\n  ></mx-file-uploader>\n  <mat-error oneUiFormError=\"fileSelection\"></mat-error>\n</mat-form-field>\n```\n\n```typescript\n// Component code - much simpler!\nonLocalFileSelected(file: File | null): void {\n  if (file) {\n    // handle file...\n  }\n}\n```\n\n### Required Import\n\n```typescript\nimport { MxFileUploaderComponent } from '@moxa/formoxa/mx-file-uploader';\n\n@Component({\n  imports: [\n    // ...\n    MxFileUploaderComponent\n  ]\n})\n```\n\n### Key Points\n\n- Use `MxFileUploaderComponent` for all file selection fields\n- No need for hidden `<input type=\"file\">` element\n- No need for `viewChild` to reference the file input\n- No need for `onFileInputClick()` method\n- The `(onUpload)` event emits `File | null` directly (not `Event`)\n- Works with reactive forms via `formControlName`\n- Automatically handles the folder icon and file name display\n\n### Reference Example\n\nSee `libs/switch/shared/features/src/lib/import-file/import-file.component.html` for a complete example.\n\n---\n\n## Form Components (UI Layer Pattern)\n\nForms should be in the `ui/` layer and emit events:\n\n```typescript\n@Component({\n  selector: 'one-ui-my-form',\n  standalone: true,\n  imports: [ReactiveFormsModule, MatFormFieldModule, MatInputModule],\n  template: `\n    <form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n      <mat-form-field>\n        <mat-label>Name</mat-label>\n        <input matInput formControlName=\"name\" />\n        <mat-error oneUiFormError=\"name\"></mat-error>\n      </mat-form-field>\n\n      <button mat-flat-button color=\"primary\" type=\"submit\">Save</button>\n    </form>\n  `,\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class MyFormComponent {\n  initialData = input<MyData | null>(null);\n\n  save = output<MyData>();\n  cancel = output<void>();\n\n  private fb = inject(NonNullableFormBuilder);\n\n  form = this.fb.group({\n    name: ['', [OneValidators.required()]]\n  });\n\n  onSubmit() {\n    if (this.form.valid) {\n      this.save.emit(this.form.getRawValue());\n    }\n  }\n}\n```\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/ui/dialogs.md": "# Dialog Components Guidelines\n\n## Dialog Configuration\n\nUse the shared dialog config instead of custom CSS for dialog sizing:\n\n**Import from shared domain:**\n\n```typescript\nimport { smallDialogConfig, mediumDialogConfig, largeDialogConfig } from '@one-ui/mxsecurity/shared/domain';\n```\n\n**Available Configs:**\n\n| Config | Width | Use Case |\n| ------ | ----- | -------- |\n| `smallDialogConfig` | 400px | Confirmation dialogs, simple alerts |\n| `mediumDialogConfig` | 560px | Standard forms, settings dialogs |\n| `largeDialogConfig` | 720px | Complex forms, multi-step dialogs |\n| `extraLargeDialogConfig` | 960px | Large data tables, wizard dialogs |\n\n---\n\n## Opening a Dialog\n\n```typescript\n// ✅ Correct: Use shared config with viewContainerRef\nconst dialogRef = this.#dialog.open(MyDialogComponent, {\n  ...smallDialogConfig,\n  viewContainerRef: this.#viewContainerRef,  // REQUIRED when dialog uses store\n  data: { ... }\n});\n\n// ❌ Incorrect: Don't use panelClass for sizing\nconst dialogRef = this.#dialog.open(MyDialogComponent, {\n  panelClass: 'mx-dialog-sm',  // Don't use this\n  data: { ... }\n});\n```\n\n---\n\n## CRITICAL: viewContainerRef is Required for Store Access\n\nWhen a dialog component injects the store (e.g., for loading state or API calls), you MUST set `viewContainerRef` when opening the dialog. This ensures the dialog uses the same injector as the parent component and can access the provided store.\n\n```typescript\n// In page component\nreadonly #viewContainerRef = inject(ViewContainerRef);\n\nopenDialog() {\n  this.#dialog.open(MyDialogComponent, {\n    ...mediumDialogConfig,\n    viewContainerRef: this.#viewContainerRef,  // Required for store access\n    data: dialogData\n  });\n}\n```\n\n---\n\n## Don't Add Custom Width in SCSS\n\n```scss\n// ❌ Incorrect: Don't add custom width in dialog SCSS\nmat-dialog-content {\n  min-width: 300px;\n}\n\n// ✅ Correct: Use shared dialog config instead\n// The config already handles width and common settings:\n// - autoFocus: false\n// - disableClose: true\n```\n\n---\n\n## Dialog Component Structure\n\nDialogs should be in the `features/` layer:\n\n```typescript\n@Component({\n  selector: 'one-ui-create-item-dialog',\n  standalone: true,\n  imports: [MatDialogModule, MyFormComponent],\n  template: `\n    <h2 mat-dialog-title>{{ 'create.title' | transloco }}</h2>\n    <mat-dialog-content>\n      <one-ui-my-form (save)=\"onSave($event)\" />\n    </mat-dialog-content>\n    <mat-dialog-actions align=\"end\">\n      <button mat-button mat-dialog-close>{{ 'general.button.cancel' | transloco }}</button>\n    </mat-dialog-actions>\n  `\n})\nexport class CreateItemDialogComponent {\n  private dialogRef = inject(MatDialogRef<CreateItemDialogComponent>);\n\n  onSave(data: MyData) {\n    this.dialogRef.close(data);\n  }\n}\n```\n\n---\n\n## Dialog Loading State Pattern\n\n**CRITICAL**: Dialogs that perform API calls must show loading state and close only after the API completes successfully.\n\n### Required Import\n\n```typescript\nimport { MxLoadingButtonDirective } from '@moxa/formoxa/mx-button';\n\n@Component({\n  imports: [\n    // ...\n    MxLoadingButtonDirective\n  ]\n})\n```\n\n### Dialog Component Pattern\n\nDialogs should inject the store directly and call API methods within the dialog:\n\n```typescript\n@Component({\n  selector: 'one-ui-my-dialog',\n  standalone: true,\n  imports: [MatButtonModule, MatDialogModule, MxLoadingButtonDirective, TranslocoModule],\n  templateUrl: './my-dialog.component.html',\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class MyDialogComponent {\n  readonly #dialogRef = inject(MatDialogRef<MyDialogComponent>);\n  readonly #store = inject(MyStore);\n  readonly dialogData = inject<MyDialogData>(MAT_DIALOG_DATA);\n\n  /** Use store's loading signal for button state */\n  readonly loading = this.#store.loading;\n\n  onSubmit() {\n    // Call store mutation method with next callback for dialog close\n    this.#store.createEntry(() => ({\n      input: this.formData,\n      next: () => {\n        this.#store.loadPageData(); // Refresh data\n        this.#dialogRef.close(); // Close dialog on success\n      }\n    }));\n  }\n}\n```\n\n### Template Pattern\n\n```html\n<div mat-dialog-actions align=\"end\">\n  <!-- Cancel button: use mat-dialog-close directive, no onCancel() needed -->\n  <button mat-button color=\"primary\" [disabled]=\"loading()\" mat-dialog-close>\n    {{ t('general.button.cancel') }}\n  </button>\n\n  <!-- Submit button: disabled when invalid or loading, shows spinner when loading -->\n  <button\n    mat-flat-button\n    color=\"primary\"\n    [disabled]=\"form.invalid || loading()\"\n    [mxButtonIsLoading]=\"loading()\"\n    (click)=\"onSubmit()\"\n  >\n    {{ t('general.button.submit') }}\n  </button>\n</div>\n```\n\n### Delete Dialog Pattern\n\n```html\n<div mat-dialog-actions align=\"end\">\n  <button mat-button color=\"primary\" [disabled]=\"loading()\" mat-dialog-close>\n    {{ t('general.button.cancel') }}\n  </button>\n  <button\n    mat-flat-button\n    color=\"warn\"\n    [disabled]=\"loading()\"\n    [mxButtonIsLoading]=\"loading()\"\n    (click)=\"onDelete()\"\n  >\n    {{ t('general.button.delete') }}\n  </button>\n</div>\n```\n\n---\n\n## Page Component Opening Dialog\n\nWhen opening a dialog that uses the store, you MUST set `viewContainerRef`:\n\n```typescript\n// Page component\nreadonly #dialog = inject(MatDialog);\nreadonly #viewContainerRef = inject(ViewContainerRef);\n\nopenSettingDialog() {\n  this.#dialog.open(SettingDialogComponent, {\n    ...mediumDialogConfig,\n    viewContainerRef: this.#viewContainerRef,  // Required for store access\n    data: dialogData\n  });\n}\n```\n\n---\n\n## ConfirmDialogComponent Return Type\n\n**CRITICAL**: `ConfirmDialogComponent` returns `boolean` directly, NOT an object like `{ confirm: boolean }`.\n\n### ❌ Wrong - Incorrect return type\n\n```typescript\nconst dialogRef = this.#dialog.open<ConfirmDialogComponent, ConfirmDialogData, { confirm: boolean }>(\n  ConfirmDialogComponent,\n  { ...mediumDialogConfig, data: { title: '...', desc: '...' } }\n);\n\ndialogRef.afterClosed().subscribe((result) => {\n  if (result?.confirm) {  // ❌ Wrong! result is boolean, not { confirm: boolean }\n    this.doSomething();\n  }\n});\n```\n\n### ✅ Correct - Boolean return type\n\n```typescript\nconst dialogRef = this.#dialog.open<ConfirmDialogComponent, ConfirmDialogData, boolean>(\n  ConfirmDialogComponent,\n  {\n    ...mediumDialogConfig,\n    viewContainerRef: this.#viewContainerRef,\n    data: {\n      title: this.#transloco.translate('features.xxx.confirm_title'),\n      desc: this.#transloco.translate('features.xxx.confirm_desc')\n    }\n  }\n);\n\ndialogRef.afterClosed().subscribe((result) => {\n  if (result) {  // ✅ Correct! result is boolean (true/false)\n    this.doSomething();\n  }\n});\n```\n\n### ConfirmDialogComponent Behavior\n\n- Returns `true` when user clicks confirm/submit button\n- Returns `false` or `undefined` when user clicks cancel or closes dialog\n- Always use `if (result)` to check for confirmation\n\n---\n\n## Key Points Summary\n\n- Import `MxLoadingButtonDirective` from `@moxa/formoxa/mx-button`\n- Use store's `loading` signal: `readonly loading = this.#store.loading`\n- Use `[mxButtonIsLoading]=\"loading()\"` on submit/action buttons\n- Use `[disabled]=\"form.invalid || loading()\"` for form dialogs\n- Use `[disabled]=\"loading()\"` for confirmation dialogs (both cancel and action buttons)\n- **Use `mat-dialog-close` directive for cancel button** - no `onCancel()` method needed\n- Call API via store mutation method inside the dialog\n- Close dialog with `this.#dialogRef.close()` in the `next` callback after API success\n- Refresh data with `this.#store.loadPageData()` before closing\n- **CRITICAL**: Set `viewContainerRef: this.#viewContainerRef` when opening the dialog\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/ui/forms.md": "# Forms Guidelines\n\n## Form Row Usage (form-row)\n\n**IMPORTANT**: Only use `<div class=\"form-row\">` when there are **multiple elements** in the same row. If there's only one element, don't wrap it.\n\n### ✅ Correct - Multiple elements in one row\n\n```html\n<div class=\"form-row\">\n  <mat-form-field>\n    <mat-label>{{ t('features.radius.server_address') }}</mat-label>\n    <input matInput formControlName=\"serverAddress\" />\n  </mat-form-field>\n\n  <mat-form-field>\n    <mat-label>{{ t('general.common_port.port') }}</mat-label>\n    <input matInput type=\"number\" formControlName=\"port\" />\n  </mat-form-field>\n</div>\n```\n\n### ✅ Correct - Single element, no wrapper needed\n\n```html\n<mat-form-field>\n  <mat-label>{{ t('features.radius.share_key') }}</mat-label>\n  <mx-password-input formControlName=\"shareKey\"></mx-password-input>\n</mat-form-field>\n\n<button mat-flat-button color=\"primary\" type=\"submit\">\n  {{ t('general.button.apply') }}\n</button>\n```\n\n### ❌ Wrong - Unnecessary wrapper for single element\n\n```html\n<div class=\"form-row\">\n  <mat-form-field>\n    <mat-label>{{ t('features.radius.share_key') }}</mat-label>\n    <mx-password-input formControlName=\"shareKey\"></mx-password-input>\n  </mat-form-field>\n</div>\n\n<div class=\"form-row\">\n  <button mat-flat-button color=\"primary\" type=\"submit\">\n    {{ t('general.button.apply') }}\n  </button>\n</div>\n```\n\n---\n\n## Form Submit Button Disabled State\n\n**CRITICAL**: Submit buttons must be disabled when the form is invalid.\n\n```html\n<!-- ✅ Correct: Disable button when form is invalid -->\n<div mat-dialog-actions align=\"end\">\n  <button mat-button color=\"primary\" mat-dialog-close>\n    {{ t('general.button.cancel') }}\n  </button>\n  <button mat-flat-button color=\"primary\" [disabled]=\"form.invalid\" (click)=\"onSubmit()\">\n    {{ t('general.button.submit') }}\n  </button>\n</div>\n\n<!-- ❌ Incorrect: No disabled state -->\n<button mat-flat-button color=\"primary\" (click)=\"onSubmit()\">\n  {{ t('general.button.submit') }}\n</button>\n```\n\n**Key Points:**\n\n- Use `[disabled]=\"form.invalid\"` on submit buttons\n- This provides immediate visual feedback to users\n- Prevents submission of invalid forms\n- Works with both form-level and control-level validation\n\n---\n\n## Form Label Patterns (mxLabel, mxLabelOptional, mxLabelTooltip)\n\nSee `rules/tools/forms/patterns.md` → \"Form Label Patterns\" section.\n\n---\n\n## Long Error Messages (mat-long-error)\n\nSee `forms/error-handling.md` → \"Long Error Messages (mat-long-error)\" section.\n",
        "plugins/one-ui-migration/skills/one-ui-migration/rules/tools/ui/page-layout.md": "# Page Layout Structure\n\n> ⚠️ **CRITICAL: All page components MUST use `class=\"gl-page-content\"` on the root element.**\n> Without this class, content (especially tables) may not display correctly!\n\nAll page components must use the standard page layout wrapper classes:\n\n```html\n<div *transloco=\"let t\" class=\"gl-page-content\">\n  <one-ui-breadcrumb />\n  <mx-page-title [title]=\"t('features.xxx.page_title')\" />\n  <div class=\"content-wrapper\">\n    <!-- Page content goes here -->\n  </div>\n</div>\n```\n\n## Required Classes\n\n| Class | Purpose |\n| ----- | ------- |\n| `gl-page-content` | **CRITICAL** - Root wrapper for page content, provides consistent page padding and layout. Tables won't display without this! |\n| `content-wrapper` | Inner wrapper for main content area below the title |\n\n---\n\n## Section Titles (gl-title-md)\n\n**CRITICAL**: Use `gl-title-md` class for section titles within forms or content areas.\n\n```html\n<!-- ✅ Correct -->\n<div class=\"gl-title-md\">{{ t('features.radius.primary_server') }}</div>\n\n<!-- ❌ Wrong - custom class -->\n<div class=\"section-title\">{{ t('features.radius.primary_server') }}</div>\n```\n\n---\n\n## Key Points\n\n- `*transloco=\"let t\"` should be on the root element for translation scope\n- `<one-ui-breadcrumb />` comes first for navigation\n- `<mx-page-title>` uses `[title]` input binding (not content projection)\n- All main content (tables, forms, etc.) goes inside `content-wrapper`\n- ❌ **DO NOT USE `mat-card`** - use `<div class=\"content-wrapper\">` instead\n\n---\n\n## ⚠️ Common Mistake - Using ng-container\n\n```html\n<!-- ❌ WRONG: Tables and content won't display properly! -->\n<ng-container *transloco=\"let t\">\n  <one-ui-breadcrumb />\n  <mx-page-title>{{ t('...') }}</mx-page-title>\n  <div class=\"content-wrapper\">\n    <!-- content here won't display correctly -->\n  </div>\n</ng-container>\n\n<!-- ✅ CORRECT: Use div with gl-page-content class -->\n<div *transloco=\"let t\" class=\"gl-page-content\">\n  <one-ui-breadcrumb />\n  <mx-page-title [title]=\"t('...')\" />\n  <div class=\"content-wrapper\">\n    <!-- content displays correctly -->\n  </div>\n</div>\n```\n\n**Why this happens:** `<ng-container>` doesn't create a DOM element, so the `gl-page-content` styles can't be applied. The page layout CSS requires a real DOM element with this class.\n\n---\n\n## ❌ Don't use mat-card\n\n```html\n<!-- ❌ Incorrect: Using mat-card -->\n<mat-card>\n  <mat-card-content>\n    <one-ui-my-table [tableData]=\"tableData()\" />\n  </mat-card-content>\n</mat-card>\n\n<!-- ✅ Correct: Using content-wrapper -->\n<div class=\"content-wrapper\">\n  <one-ui-my-table [tableData]=\"tableData()\" />\n</div>\n```\n\n---\n\n## Example - Page with Form and Table\n\n```html\n<div *transloco=\"let t\" class=\"gl-page-content\">\n  <one-ui-breadcrumb />\n  <mx-page-title [title]=\"t('features.xxx.page_title')\" />\n\n  <!-- Form Section -->\n  <div class=\"content-wrapper\">\n    <form [formGroup]=\"form\" (ngSubmit)=\"onSubmit()\">\n      <!-- form fields -->\n    </form>\n  </div>\n\n  <!-- Table Section -->\n  <div class=\"content-wrapper\">\n    <one-ui-my-table [tableData]=\"tableData()\" />\n  </div>\n</div>\n```\n\n## Example - Page with Table\n\n```html\n<div *transloco=\"let t\" class=\"gl-page-content\">\n  <one-ui-breadcrumb />\n  <mx-page-title [title]=\"t('features.account_management.page_title')\" />\n  <div class=\"content-wrapper\">\n    <one-ui-account-table\n      [tableData]=\"tableData()\"\n      [tableMaxSize]=\"tableMaxSize()\"\n      (addAccount)=\"onAddAccount()\"\n      (editAccount)=\"onEditAccount($event)\"\n      (deleteAccount)=\"onDeleteAccount($event)\"\n    />\n  </div>\n</div>\n```\n\n---\n\n## Route Configuration (Breadcrumb)\n\nWhen adding a new page route in `apps/mxsecurity/mxsecurity/src/app/app.routes.ts`, you **MUST** add the breadcrumb resolver:\n\n```typescript\nimport { authGuard, createBreadcrumbResolver, menuTreeResolver, ROUTES_ALIASES } from '@one-ui/mxsecurity/shared/domain';\n\nexport const appRoutes: Route[] = [\n  {\n    path: '',\n    component: ShellComponent,\n    canActivate: [authGuard],\n    canActivateChild: [authGuard],\n    resolve: {\n      menuTree: menuTreeResolver\n    },\n    children: [\n      {\n        path: ROUTES_ALIASES['broadcastForwarding'].route,\n        loadChildren: () =>\n          import('@one-ui/mxsecurity/broadcast-forwarding-page/shell').then((m) => m.createRoutes()),\n        // ✅ Required: Add breadcrumb resolver\n        resolve: {\n          breadcrumb: createBreadcrumbResolver(ROUTES_ALIASES['broadcastForwarding'].id)\n        }\n      }\n    ]\n  }\n];\n```\n\n**Key Points:**\n\n- Import `createBreadcrumbResolver` from `@one-ui/mxsecurity/shared/domain`\n- Use `ROUTES_ALIASES['routeKey'].id` as the parameter\n- This enables the `<one-ui-breadcrumb />` component to display correct navigation\n",
        "plugins/one-ui-migration/skills/ui-layout-guide/SKILL.md": "---\nname: ui-layout-guide\ndescription: UI layout optimization guide for Angular pages. Use when reviewing or creating page layouts, dashboard cards, info grids, or any UI component that needs consistent styling.\n---\n\nUI layout optimization guide for Angular pages. This skill provides guidance on using shared styles and creating consistent, clean layouts.\n\n## Arguments\n\n- `$ARGUMENTS` - Query or command:\n  - `review <path>` - Review component for layout optimization\n  - `dashboard` - Dashboard card layout patterns\n  - `card` - Card component patterns\n  - `grid` - Grid and info-grid patterns\n  - `spacing` - Margin and padding utilities\n  - `text` - Text styling classes\n  - `form` - Form layout patterns\n  - Or ask any question about UI layout\n\n## Shared Styles Location\n\nAll shared styles are in `libs/mxsecurity/shared/styles/`:\n\n| File | Purpose |\n|------|---------|\n| `_layout.scss` | Margin/padding utilities (.mr-4, .mt-8, .p-16, etc.) |\n| `_text.scss` | Text color classes (.text-on-surface-variant) |\n| `_form.scss` | Form layout (.form-row, .form-column) |\n| `_shared.scss` | Main entry point, includes .content-wrapper |\n| `_table.scss` | Table-specific styles |\n| `_material-custom.scss` | Material UI overrides |\n| `_formoxa-custom.scss` | FormOXA UI overrides |\n\n## Layout Utilities Reference\n\n### Margin Classes (from _layout.scss)\n\nGenerated for sizes 4, 8, 12, 16, 20, 24, 28, 32, 36, 40 (px):\n\n```scss\n.mr-{size}  // margin-right\n.ml-{size}  // margin-left\n.mt-{size}  // margin-top\n.mb-{size}  // margin-bottom\n.mx-{size}  // margin left + right\n.my-{size}  // margin top + bottom\n.m-{size}   // margin all sides\n```\n\n### Padding Classes (from _layout.scss)\n\nGenerated for sizes 4, 8, 12, 16, 20, 24, 28, 32 (px):\n\n```scss\n.pr-{size}  // padding-right\n.pl-{size}  // padding-left\n.pt-{size}  // padding-top\n.pb-{size}  // padding-bottom\n.px-{size}  // padding left + right\n.py-{size}  // padding top + bottom\n.p-{size}   // padding all sides\n```\n\n### Text Classes (from _text.scss)\n\n```scss\n.text-on-surface-variant     // Secondary text color\n.text-on-surface-variant-op-38  // Disabled text (38% opacity)\n```\n\n### Form Layout Classes (from _form.scss)\n\n```scss\n.form-row {\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  gap: 8px;\n}\n\n.form-column {\n  display: flex;\n  flex-direction: column;\n  gap: 16px;\n}\n```\n\n## Dashboard Card Patterns\n\n### Standard Card Structure\n\n```html\n<mat-card class=\"dashboard-card\">\n  <mat-card-header>\n    <mat-card-title class=\"card-title-row\">\n      <span class=\"card-title\">{{ title }}</span>\n      <div class=\"header-actions\">\n        <!-- Optional: refresh button, menu, etc. -->\n      </div>\n    </mat-card-title>\n  </mat-card-header>\n  <mat-card-content>\n    <!-- Card content -->\n  </mat-card-content>\n  <mat-card-actions align=\"end\">\n    <!-- Optional: action buttons -->\n  </mat-card-actions>\n</mat-card>\n```\n\n### Card Grid Layout\n\n```scss\n.card-container {\n  display: grid;\n  grid-template-columns: repeat(2, 1fr);\n  gap: 16px;\n\n  @media (max-width: 900px) {\n    grid-template-columns: 1fr;\n  }\n}\n```\n\n### Key-Value Pattern (for key-value displays)\n\nUse FormOXA's `mx-key-value` component instead of raw `<dt>` / `<dd>` elements:\n\n**Import in component:**\n```typescript\nimport { MxKeyValueComponent, MxKeyValueGroupDirective } from '@moxa/formoxa/mx-key-value';\n\n@Component({\n  imports: [MxKeyValueComponent, MxKeyValueGroupDirective],\n  // ...\n})\n```\n\n**Template usage:**\n```html\n<mx-key-value-group>\n  <mx-key-value\n    [key]=\"t('features.example.label')\"\n    keySize=\"md\"\n    [value]=\"data().value\"\n    valueSize=\"md\"\n    direction=\"horizontal\"\n  ></mx-key-value>\n  <mx-key-value\n    [key]=\"t('features.example.another_label')\"\n    keySize=\"md\"\n    [value]=\"data().anotherValue\"\n    valueSize=\"md\"\n    direction=\"horizontal\"\n  ></mx-key-value>\n</mx-key-value-group>\n```\n\n**Properties:**\n- `key` - Label text (supports i18n)\n- `value` - Display value\n- `keySize` - Key font size: `'sm'` | `'md'` | `'lg'`\n- `valueSize` - Value font size: `'sm'` | `'md'` | `'lg'`\n- `direction` - Layout direction: `'horizontal'` | `'vertical'`\n\n## Best Practices\n\n### DO\n\n- Use shared utility classes for spacing (`.mt-16`, `.mb-8`)\n- Use CSS Grid for card layouts\n- Use Flexbox for single-direction layouts\n- Use Material Design color tokens via `one-theme`\n- Keep consistent gap sizes (8px, 16px)\n- Use responsive breakpoints (900px for 2-col, 600px for 1-col)\n\n### DON'T\n\n- Hardcode colors - use theme variables\n- Mix margin/padding in component styles when utilities exist\n- Create duplicate layout classes that exist in shared styles\n- Use different gap sizes across similar components\n\n## Color Usage\n\nAlways use theme colors from `one-theme`:\n\n```scss\n@use 'sass:map';\n@use 'one-theme' as *;\n\n.label {\n  color: map.get($mx-light, onSurfaceVariant);  // Secondary text\n}\n\n.value {\n  color: map.get($mx-light, onSurface);  // Primary text\n}\n\n.background {\n  background-color: map.get($mx-light, surface);\n}\n```\n\n## Review Checklist\n\nWhen reviewing a component for layout optimization:\n\n1. [ ] Uses shared spacing utilities where appropriate\n2. [ ] Uses theme colors instead of hardcoded values\n3. [ ] Grid layouts are responsive\n4. [ ] Consistent gap sizes (8px or 16px)\n5. [ ] Card headers use `.card-title-row` for flex layout\n6. [ ] Info displays use `mx-key-value` component from FormOXA\n7. [ ] No duplicate styles that exist in shared files\n",
        "plugins/one-ui-migration/skills/verify-legacy-with-qa-testcases/SKILL.md": "---\nname: verify-legacy-with-qa-testcases\ndescription: Verify legacy code against QA test cases to confirm migration completeness.\n---\n\n# Verify Legacy Code with QA Test Cases\n\nUse the new project's QA test cases to verify that the old (legacy) project's code implementation is complete and correct. This helps confirm migration completeness by checking if all expected behaviors exist in the legacy code.\n\n**Important: Reports should be written in Traditional Chinese.**\n\n## Arguments\n\n- `$ARGUMENTS` - Path to the old project's source code to verify (e.g., `/Users/jayden/f2e-networking-jayden/apps/mxsecurity-web/src/app/pages/account`)\n\n## Inputs\n\n- **QA Test Cases**: Located in the new project's domain docs folder. Infer the path from the old project path structure.\n  - Example: If old path is `.../pages/alg`, look for `libs/mxsecurity/alg-page/domain/src/lib/docs/QA-TEST-CASES.md`\n- **Old Project Code**: `$ARGUMENTS`\n\n## Verification Process\n\n### Step 1: Read and Parse QA Test Cases\n\nRead the QA-TEST-CASES.md file and extract:\n\n1. **Form Fields and Validation Rules**\n   - Field names, types, validators\n   - Expected validation behavior\n\n2. **Validation Error Messages**\n   - Error conditions and expected messages\n\n3. **Conditional Field Visibility**\n   - Mode-based field visibility rules\n   - Special conditions\n\n4. **API Payload Format**\n   - Expected request/response structures\n\n5. **Boundary Test Cases**\n   - Input validation boundaries\n\n6. **Interaction Test Cases**\n   - User flow expectations\n\n### Step 2: Analyze Old Project Code\n\nRead all relevant files from the old project path:\n\n- `**/*.ts` - TypeScript files (components, services)\n- `**/*.html` - Template files\n- `**/*.component.ts` - Component logic\n- `**/*.service.ts` - Service files\n\nExtract from the old code:\n\n1. **Form Definitions**\n   - FormGroup/FormControl definitions\n   - Validators used\n\n2. **Validation Logic**\n   - Validator implementations\n   - Error handling\n\n3. **Template Bindings**\n   - Conditional rendering (`*ngIf`, `@if`)\n   - Error message displays\n\n4. **API Calls**\n   - HTTP request payloads\n   - Response handling\n\n### Step 3: Generate Verification Report\n\nCompare each test case requirement against the old code implementation.\n\n**Output Format:**\n\n````markdown\n# Legacy Code Verification Report\n\nGenerated: {current_date}\nQA Test Cases: {qa_test_cases_path}\nLegacy Code Path: {old_project_path}\n\n## Summary\n\n| Category              | Total | Verified | Missing | Partial |\n| --------------------- | ----- | -------- | ------- | ------- |\n| Form Fields           | X     | X        | X       | X       |\n| Validation Rules      | X     | X        | X       | X       |\n| Error Messages        | X     | X        | X       | X       |\n| Conditional Display   | X     | X        | X       | X       |\n| API Payloads          | X     | X        | X       | X       |\n| Boundary Test Cases   | X     | X        | X       | X       |\n| Interaction Flows     | X     | X        | X       | X       |\n\n## Detailed Verification\n\n### 1. Form Fields Verification\n\n| Field     | Expected                      | Found in Legacy | Status | Notes |\n| --------- | ----------------------------- | --------------- | ------ | ----- |\n| username  | text, required, maxLength(32) | Found           | PASS   |       |\n| authority | select, required              | Found           | PASS   |       |\n| ...       | ...                           | ...             | ...    | ...   |\n\n### 2. Validation Rules Verification\n\n| Rule                   | Expected Behavior    | Legacy Implementation              | Status |\n| ---------------------- | -------------------- | ---------------------------------- | ------ |\n| username.required      | Show error if empty  | `Validators.required` found        | PASS   |\n| username.maxLength(32) | Limit to 32 chars    | `Validators.maxLength(32)` found   | PASS   |\n| ...                    | ...                  | ...                                | ...    |\n\n### 3. Error Messages Verification\n\n| Field    | Error Type | Expected Key         | Found in Template | Status |\n| -------- | ---------- | -------------------- | ----------------- | ------ |\n| username | required   | validators.required  | Yes               | PASS   |\n| username | duplicate  | validators.duplicate | No                | FAIL   |\n| ...      | ...        | ...                  | ...               | ...    |\n\n### 4. Conditional Display Verification\n\n| Condition             | Expected Behavior | Legacy Implementation     | Status |\n| --------------------- | ----------------- | ------------------------- | ------ |\n| ADD mode: oldPassword | Hidden            | `*ngIf=\"!isAddMode\"`      | PASS   |\n| EDIT mode: username   | Disabled          | `[disabled]=\"isEditMode\"` | PASS   |\n| ...                   | ...               | ...                       | ...    |\n\n### 5. API Payload Verification\n\n| Operation       | Expected Payload                                            | Legacy Payload  | Status  | Difference    |\n| --------------- | ----------------------------------------------------------- | --------------- | ------- | ------------- |\n| Create (mode=1) | {userName, mode, userEnable, authority, new_pw, confirm_pw} | Matches         | PASS    |               |\n| Edit (mode=3)   | {userName, mode, userEnable, authority}                     | Partial match   | PARTIAL | Missing: mode |\n| ...             | ...                                                         | ...             | ...     | ...           |\n\n### 6. Boundary Test Cases Verification\n\n| Test Case ID | Requirement                   | Legacy Handling | Status |\n| ------------ | ----------------------------- | --------------- | ------ |\n| TC-USER-001  | Empty username → error        | Yes             | PASS   |\n| TC-USER-006  | 33 chars → max length error   | Yes             | PASS   |\n| ...          | ...                           | ...             | ...    |\n\n### 7. Interaction Flow Verification\n\n| Scenario           | Steps Verified | Status  | Missing Steps |\n| ------------------ | -------------- | ------- | ------------- |\n| Create new account | 8/8            | PASS    | None          |\n| Edit account       | 7/7            | PASS    | None          |\n| Change password    | 6/8            | PARTIAL | Steps 3, 4    |\n| ...                | ...            | ...     | ...           |\n\n## Issues Found\n\n### Critical Issues (Must fix before migration)\n\n1. **[Critical]** Missing validation: username `duplicate` validator\n   - Location: `account-setting.component.ts`\n   - Expected: Check for duplicate username in existing accounts\n   - Found: No duplicate check implemented\n\n2. **[Critical]** API payload mismatch: Edit operation missing `mode` field\n   - Location: `account.service.ts:45`\n   - Expected: `{ userName, mode: 3, userEnable, authority }`\n   - Found: `{ userName, userEnable, authority }`\n\n### Warnings (Should review)\n\n1. **[Warning]** Different error message key\n   - Expected: `validators.duplicate_password`\n   - Found: `account.error.same_password`\n   - Impact: Different translation key, may show wrong message\n\n### Info (Minor differences)\n\n1. **[Info]** Legacy code has additional validation\n   - Legacy code trims username before validation\n   - Not required but acceptable\n\n## Migration Checklist\n\nBased on verification results, these items need attention:\n\n- [ ] Add username duplicate validation\n- [ ] Fix Edit API payload to include mode field\n- [ ] Update error message keys to match new standard\n- [ ] Verify password comparison validation triggers correctly\n- [ ] Test disable admin confirmation flow\n\n## Reference Code Snippets\n\n### Missing Duplicate Validator (add to new code)\n\n```typescript\n// Legacy location: account-setting.component.ts:XX\n// This validation logic should be migrated:\n{old_code_snippet}\n```\n````\n\n### API Payload to Fix\n\n```typescript\n// Expected (from test cases):\n{\n  userName: string,\n  mode: 3,\n  userEnable: number,\n  authority: number\n}\n\n// Found in legacy (account.service.ts:XX):\n{old_api_payload}\n```\n\n````\n\n### Step 4: Output Location\n\nSave the verification report to the **new project's docs folder** (same location as QA-TEST-CASES.md):\n\n```\n{new_project_libs_path}/domain/src/lib/docs/LEGACY-VERIFICATION-REPORT.md\n```\n\nFor example, if analyzing ALG page:\n- QA Test Cases: `libs/mxsecurity/alg-page/domain/src/lib/docs/QA-TEST-CASES.md`\n- Verification Report: `libs/mxsecurity/alg-page/domain/src/lib/docs/LEGACY-VERIFICATION-REPORT.md`\n\nThis keeps all documentation for a feature together in the new project repository.\n\n**Important: Reports should be written in Traditional Chinese.**\n\n## Usage Example\n\n```bash\n# Verify legacy ALG page implementation against new QA test cases\n/verify-legacy-with-qa-testcases /Users/jayden/f2e-networking-jayden/apps/mxsecurity-web/src/app/pages/alg\n\n# Verify legacy account page implementation\n/verify-legacy-with-qa-testcases /Users/jayden/f2e-networking-jayden/apps/mxsecurity-web/src/app/pages/account\n```\n\n## Notes\n\n- Reports should be written in Traditional Chinese\n- Focus on functional requirements, not implementation details\n- Flag differences between expected behavior (test cases) and actual code (legacy code)\n- Highlight missing functionality that needs to be added during migration\n- Identify outdated patterns in legacy code that should NOT be migrated\n\n## Items NOT to Flag as Issues\n\nThe following differences are expected and handled by the new project architecture. Do not report these as issues:\n\n1. **Apply Button Loading State** - New project always uses `[mxButtonIsLoading]=\"loading()\"` and `[disabled]=\"loading()\"` on Apply buttons. Legacy code may not have this.\n2. **formTouchedGuard** - New project uses `canDeactivate: [formTouchedGuard]` for unsaved changes warning. Legacy code may not have this.\n3. **Auto-reload after save** - New project calls `loadPageData()` after successful save. Legacy code may only show success toast.\n4. **SignalStore vs HttpClient** - New project uses NgRx SignalStore. Legacy code uses direct HttpClient calls.\n5. **Transloco vs ngx-translate** - New project uses `@jsverse/transloco`. Legacy code uses `@ngx-translate/core`.\n6. **Standalone components** - New project uses standalone components. Legacy code may use NgModules.\n7. **Breadcrumb component** - New project includes `<one-ui-breadcrumb />`. Legacy code may not have this.\n8. **untracked() in effects** - New project wraps `setValue()` calls in `untracked()`. Legacy code may not.\n9. **Range validator vs min/max validators** - New project uses `OneValidators.range(min, max)` for combined range validation. Legacy code uses separate `Validators.min()` and `Validators.max()`. Functionally equivalent, this is an expected difference.\n10. **Apply button checks form validity** - New project uses `[disabled]=\"form.invalid || noPermission()\"` on Apply buttons. Legacy code may only check `noPermission`. This is an improvement in the new project.\n11. **Form check bugs in legacy** - Legacy project may use wrong form name in `onSubmit` method (e.g., `generalForm.invalid` instead of `serverForm.invalid`). These are legacy bugs that are fixed in the new project.\n12. **Missing error messages in templates** - Legacy project may be missing error messages for certain fields (e.g., required errors). New project uses `oneUiFormError` directive to handle these automatically.\n",
        "plugins/rubric/.claude-plugin/plugin.json": "{\n  \"name\": \"rubric\",\n  \"description\": \"Automated code standards checks based on custom rubrics\",\n  \"version\": \"0.7.1\",\n  \"author\": {\n    \"name\": \"Aotokitsuruya\"\n  }\n}\n",
        "plugins/rubric/README.md": "# Rubric Plugin\n\nAutomated code standards checks based on custom rubrics.\n\n## Purpose\n\nAutomatically validates file changes against custom rubrics (coding standards, style guides, documentation requirements) when using Edit or Write operations.\n\n## Commands\n\n| Command | Description |\n|---------|-------------|\n| `/rubric:config [rubric-path]` | Configure rubric settings for the current project |\n| `/rubric:create <path>` | Create new rubric document based on code analysis of the given path |\n\n## Agents\n\n| Agent | Description |\n|-------|-------------|\n| `code-analyzer` | Analyzes code patterns, conventions, best practices, and contracts for rubric generation |\n\n## Hooks\n\n| Hook Event   | Matcher      | Description                                                                 |\n|--------------|--------------|-----------------------------------------------------------------------------|\n| PostToolUse  | Edit\\|Write  | Validates edited/written files against configured rubric rules              |\n\n## Configuration\n\nRules can be defined via Claude Code rule files (`.claude/rules/*.md`) or `claudekit.json`. Rule files support `name` and `paths` frontmatter fields.\n\n| Option                  | Type      | Required | Default                                       | Description                                      |\n|-------------------------|-----------|----------|-----------------------------------------------|--------------------------------------------------|\n| `rubric.enforce`        | boolean   | No       | `true`                                        | Block operations on rubric violations            |\n| `rubric.reviewMessage`  | string    | No       | See below                                     | Custom message template with `{references}` placeholder |\n| `rubric.rules`          | array     | No       | `[]`                                          | List of rubric rules to apply                    |\n| `rubric.rules[].name`   | string    | No       | `\"Unnamed Rule\"`                              | Human-readable rule name                         |\n| `rubric.rules[].pattern`| string    | Yes      | -                                             | Regex pattern to match file paths                |\n| `rubric.rules[].path`   | string    | Yes      | -                                             | Path to rubric document (relative to project root) |\n\n**Default Review Message:**\n```\nEnsure review changes against {references}, fix rubrics violations and keep the code clean before proceeding.\n```\n\n**Examples:**\n\nBasic setup with enforcement:\n```json\n{\n  \"rubric\": {\n    \"rules\": [\n      {\n        \"name\": \"README Guidelines\",\n        \"pattern\": \"README\\\\.md$\",\n        \"path\": \"docs/rubrics/readme.md\"\n      },\n      {\n        \"name\": \"TypeScript Style Guide\",\n        \"pattern\": \"\\\\.ts$\",\n        \"path\": \"docs/rubrics/typescript.md\"\n      }\n    ]\n  }\n}\n```\n\nCustom message with warning mode:\n```json\n{\n  \"rubric\": {\n    \"enforce\": false,\n    \"reviewMessage\": \"Please review your changes against {references} before committing.\",\n    \"rules\": [\n      {\n        \"name\": \"API Documentation\",\n        \"pattern\": \"src/api/.*\\\\.ts$\",\n        \"path\": \"docs/rubrics/api-docs.md\"\n      }\n    ]\n  }\n}\n```\n\nMultiple patterns:\n```json\n{\n  \"rubric\": {\n    \"rules\": [\n      {\n        \"name\": \"Component Standards\",\n        \"pattern\": \"components/.*\\\\.(tsx|jsx)$\",\n        \"path\": \"docs/rubrics/components.md\"\n      },\n      {\n        \"name\": \"Test Requirements\",\n        \"pattern\": \"\\\\.(test|spec)\\\\.(ts|js)$\",\n        \"path\": \"docs/rubrics/testing.md\"\n      }\n    ]\n  }\n}\n```\n\n**Note:** Patterns use JavaScript regex syntax. Remember to escape special regex characters with double backslashes in JSON strings.\n",
        "plugins/rubric/agents/code-analyzer.md": "---\nname: code-analyzer\ndescription: Analyze the given path, module, or package and identity the pattern, conventions, and best practices used in the codebase. Trigger: analyze code for {path}\nlicense: MIT\ncompatibility: Works with any codebase, no special dependencies required\ntools: Glob, Grep, LS, Read, TodoWrite, BashOutput\nmodel: sonnet\ncolor: green\n---\n\n## Trigger\n\n`analyze code for {path}`\n\n## When to Use This Agent\n\nUse this agent when:\n- Understanding patterns and conventions in an unfamiliar codebase\n- Creating rubrics for code quality standards\n- Auditing code for best practices compliance\n\n---\n\nYou are a senior software engineer who delivers high-quality code analysis and recommendations. Your task is to analyze the given path, module, or package and identity the pattern, conventions, and best practices used in the codebase.\n\n# Core Mission\n\nProvide a complete understanding of how the patterns, conventions, and best practices are applied in the codebase by finding most used patterns, conventions, and best practices.\n\n# Analysis Approach\n\nIn given path, module, or package, search for the following:\n\n1. **Conventinos**\n\n- Identify naming conventions for variables, functions, classes, and files.\n- Check for consistent contract and interface definitions.\n- Look for consistent use of comments and documentation styles.\n\n2. **Patterns**\n\n- Identify common design patterns (e.g., Singleton, Factory, Observer).\n- Look for architectural patterns (e.g., MVC, Microservices).\n- Analyze the responsibility in current modules and classes.\n\n3. **Best Practices**\n\n- Check for code readability and maintainability.\n- Look for error handling and logging practices.\n- Analyze testing strategies and coverage.\n\n4. **Contracts**\n\n- Identify how contracts are defined and enforced.\n- Look for the use of interfaces and abstract classes.\n- Check for adherence to SOLID principles.\n\n# Output\n\nProvide comprehensive analysis that helps developers understand the codebase deeply enough to create rubrics for code quality and consistency. Include examples and references to specific parts of the codebase where applicable.\n\n- Summary of identified patterns, conventions, and best practices.\n- Examples of each identified item with code snippets.\n- Key takeaways and recommendations for maintaining or improving code quality for each identified item.\n- Prioritize findings based on their impact on code quality and maintainability.\n\nStructure your response with maximum clarity, using headings, bullet points, and code blocks where appropriate.\n",
        "plugins/rubric/commands/config.md": "---\nallowed-tools: Glob, Grep, Read, Write, Edit, LS\nargument-hint: \"[rubric-path]\"\ndescription: Configure rubric settings for the current project\n---\n\n# Rule\n\nThe `<execute>ARGUMENTS</execute>` will execute the main procedure.\n\n# Role\n\nYou are a assistant to help update config.\n\n# Config Schema\n\nThe configuration file `claudekit.json` has the following structure:\n\n```json\n{\n  \"rubric\": {\n    \"enforce\": true, // Omitted otherwise user ask for config change\n    \"reviewMessage\": \"Make self-review with {references}\", // Omitted otherwise user ask for config change, the {references} placeholder must be included\n    \"rules\": [\n      {\n        \"name\": \"JavaScript Files\", // Optional descriptive name for the rule\n        \"pattern\": \".*\\\\.js$\",\n        \"path\": \"path/to/rubric/document.md\"\n      }\n    ]\n  }\n}\n```\n\n# Pattern\n\nPrevent to use `^` to match the start of the edited file path, as the path may be relative or absolute.\n\nBy default, prefer to use  `.*\\\\.js$` to match any path ending with `.js`.\n\n- The relative and absolute path matching should be supported.\n- Use `$` to ensure the file extension is at the end of the path.\n\n# Definition\n\n<function name=\"read_config\">\n    <description>Read existing claudekit.json configuration file</description>\n    <step>1. Check if [.claude/]claudekit[.local].json file exists</step>\n    <condition if=\"file exists\">\n        <step>2. Read and parse the JSON content of the file</step>\n        <return>Parsed JSON object</return>\n    </condition>\n    <condition if=\"file does not exist\">\n        <return>Empty JSON object</return>\n    </condition>\n</function>\n\n<function name=\"apply_rule\">\n    <description>Update claudekit.json with new rubric rule</description>\n    <parameters name=\"config\">Existing configuration object</parameters>\n    <parameters name=\"name\">Rubric name</parameters>\n    <parameters name=\"pattern\">File pattern to apply rubric in RegExp</parameters>\n    <parameters name=\"path\">Path to the rubric document</parameters>\n    <step>1. Call <execute name=\"read_config\" /> to get current configuration</step>\n    <step>2. Update or add the rubric configuration under \"rubric.rules\" key with provided {name}, {pattern}, and {path}</step>\n    <step>3. Write the updated configuration back to [.claude/]claudekit[.local].json file</step>\n    <return>Configuration update status</return>\n</function>\n\n<function name=\"apply_enforce\">\n    <description>Update claudekit.json with new enforce setting</description>\n    <parameters name=\"config\">Existing configuration object</parameters>\n    <parameters name=\"enforce\">Boolean to enable or disable enforcement</parameters>\n    <step>1. Call <execute name=\"read_config\" /> to get current configuration</step>\n    <step>2. Update or add the \"rubric.enforce\" key with provided {enforce} value</step>\n    <>\n    <step>3. Write the updated configuration back to [.claude/]claudekit[.local].json file</step>\n    <return>Configuration update status</return>\n</function>\n\n<function name=\"apply_review_message\">\n    <description>Update claudekit.json with new review message</description>\n    <parameters name=\"config\">Existing configuration object</parameters>\n    <parameters name=\"message\">Review message template</parameters>\n    <step>1. Ensure references placeholder {references} is included in the message</step>\n    <step>2. Call <execute name=\"read_config\" /> to get current configuration</step>\n    <step>3. Update or add the \"rubric.reviewMessage\" key with provided {message}</step>\n    <step>4. Write the updated configuration back to [.claude/]claudekit[.local].json file</step>\n    <return>Configuration update status</return>\n</function>\n\n<procedure name=\"main\">\n    <description>Update claudekit.json to modify rubric config</description>\n    <parameters name=\"path\">Document path define the rubric</parameters>\n    <condition if=\"path not provided\">\n        <step>1. Confirm with user to update rules or change config, e.g. enforce or reviewMessage</step>\n        <step>2. Set {action} to user input</step>\n    </condition>\n    <condition if=\"{action} is enforce\">\n        <step>3. Ask user to provide enforce value (true/false) use ask question tool</step>\n        <step>4. Set {enforce} to user input</step>\n        <step>5. <execute name=\"apply_enforce\">{config} {enforce}</execute> to update the config file</step>\n        <return>Configuration update status</return>\n    </condition>\n    <condition if=\"{action} is reviewMessage\">\n        <step>3. Ask user to provide the review message template</step>\n        <step>4. Set {message} to user input</step>\n        <step>5. <execute name=\"apply_review_message\">{config} {message}</execute> to update the config file</step>\n        <return>Configuration update status</return>\n    </condition>\n    <condition if=\"{action} is rules or path provided\">\n        <step>3. Ask user to provide the path to the rubric document</step>\n        <step>4. Set {path} to user input</step>\n    </condition>\n    <step>5. Review the provided {path} to understand the rubric apply to the project</step>\n    <step>6. Set {name} and {pattern} based on the rubric document</step>\n    <step>7. Use ask question tool to confirm with user if the detected {name} and {pattern} are correct</step>\n    <condition if=\"user deny the detected name or pattern\">\n        <step>8. Ask user to provide the correct {name} and {pattern}</step>\n        <step>9. Set {name} and {pattern} to user input</step>\n    </condition>\n    <step>10. <execute name=\"apply_config\">{config} {name} {pattern} {path}</execute> to update the config file</step>\n    <return>Configuration update status</return>\n</procedure>\n\n# Task\n\n<execute name=\"main\">$ARGUMENTS</execute>\n",
        "plugins/rubric/commands/create.md": "---\nallowed-tools: [\"Glob\", \"Grep\", \"Read\", \"Task\", \"Write\", \"Edit\", \"LS\"]\nargument-hint: path to analyze\ndescription: Create new rubric document based on code analysis of the given path\n---\n\n# Rule\n\nThe `<execute>ARGUMENTS</execute>` will execute the main procedure.\n\n# Role\n\nYou are a tech lead to creating rubric document based on code analysis of the given path.\n\n# Rubric Template\n\nWhen creating or updating a rubric document, use the following template if applicable:\n\n````markdown\n# [Rubric Name]\n\nThis document outlines the criteria for evaluating the quality of [package]. We assert at least 80% of the criteria must be met to pass.\n\n## Criteria\n\n### [Criterion 1 Name] (1 points)\n\n> [Description of the criterion and what to look for]\n\n```[code language]\n[Most identified code snippet demonstrating the criterion]\n```\n- [Additional notes or guidelines related to the criterion]\n\n### [Criterion 2 Name] (1 points)\n> [Description of the criterion and what to look for]\n\n```[code language]\n[Most identified code snippet demonstrating the criterion]\n```\n\n- [Additional notes or guidelines related to the criterion]\n\n# [Additional criteria as needed]\n\n- [Additional notes or guidelines related to the criterion]\n````\n\nDo not give summary or explanation in the rubric document, keep it concise and focused on the criteria and its guidelines.\n\n# Best Practices\n\nEach rubric usually have 3 ~ 5 criteria with 2 ~ 5 guidelines. Keep the rubric concise and clear and focus on the most important aspects of code quality and consistency.\n\n# Definition\n\n<function name=\"call_analyze_agent\">\n    <parameters name=\"path\">path, module, or package to analyze</parameters>\n    <parameters name=\"type\">type of analysis: conventions, patterns, best practices, contracts</parameters>\n    <description>Call code-analyzer agent to analyze the given path</description>\n    <step>1. Execute code-analyzer agent with the given {path} and {type}</step>\n    <return>Analysis result from the agent</return>\n</function>\n\n<procedure name=\"code_analyzer\">\n    <parameters name=\"path\">path, module, or package to analyze</parameters>\n    <description>Analyze the given path, module, or package and identity the pattern, conventions, and best practices used in the codebase.</description>\n    <loop for=\"type in ['conventions', 'patterns', 'best practices', 'contracts']\" parallel=\"true\">\n        <step>1. Call <execute name=\"call_analyze_agent\" path=\"{path}\" type=\"{type}\" /> to perform {type} analysis</step>\n        <step>2. Collect and aggregate the analysis results</step>\n    </loop>\n    <return>Aggregated analysis result</return>\n</procedure>\n\n<procedure name=\"main\">\n    <parameters name=\"path\">path, module, or package to analyze</parameters>\n    <step>1. Take a brief look at the codebase in the given {path} to understand its structure and components</step>\n    <step>2. Search existing rubric documents (default: `.claude/rules`) and set {similar_rubric} to the most relevant one if found</step>\n    <condition if=\"similar_rubric found\">\n        <step>3. Ask user create new rubric or update existing {similar_rubric}</step>\n        <step>4. Set {overwrite} based on user response</step>\n    </condition>\n    <condition if=\"similar_rubric not found\">\n        <step>3. Set {overwrite} to false</step>\n    </condition>\n    <step>5. Call <execute name=\"code_analyzer\" path=\"{path}\" /> to analyze the codebase and identify patterns, conventions, and best practices</step>\n    <step>6. Create rubric based on the analysis result using the provided rubric template</step>\n    <step>7. If {overwrite} is true, update the existing {similar_rubric} document; otherwise, create a new rubric document in `.claude/rules` directory</step>\n    <step>8. Save the rubric document</step>\n    <step>9. Inform user can use `/rubric:config` command to apply the rubric to the project</step>\n    <return>Rubric creation or update status</return>\n</procedure>\n\n# Task\n\n<execute name=\"main\">$ARGUMENTS</execute>\n",
        "plugins/rubric/hooks/hooks.json": "{\n  \"description\": \"Automatic code review and formatting after Edit or Write operations\",\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Edit|Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/dist/review.js\"\n          },\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/dist/format.js\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/session-memory/.claude-plugin/plugin.json": "{\n  \"name\": \"session-memory\",\n  \"description\": \"Persist and restore session context across Claude Code sessions\",\n  \"version\": \"0.1.0\",\n  \"author\": {\n    \"name\": \"Michael0520\"\n  }\n}\n",
        "plugins/session-memory/hooks/hooks.json": "{\n  \"description\": \"Save and load session context across Claude Code sessions\",\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"matcher\": \"\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/dist/load.js\"\n          }\n        ]\n      }\n    ],\n    \"Stop\": [\n      {\n        \"matcher\": \"\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/dist/save.js\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/worktree-manager/.claude-plugin/plugin.json": "{\n  \"name\": \"worktree-manager\",\n  \"description\": \"Git worktree management for parallel development with Claude Code agents\",\n  \"version\": \"1.1.0\",\n  \"author\": {\n    \"name\": \"Michael0520\"\n  }\n}\n",
        "plugins/worktree-manager/README.md": "Worktree Manager\n===\n\n## Purpose\n\nGit worktree management for parallel development with Claude Code agents. Create isolated worktrees, allocate ports, and launch agents in separate terminal windows.\n\n## Skills\n\n| Skill | Description |\n|-------|-------------|\n| worktree-manager | Manage git worktrees for parallel development |\n\n## Configuration\n\nSkill config at `~/.claude/skills/worktree-manager/config.json`:\n\n| Option | Default | Description |\n|--------|---------|-------------|\n| terminal | ghostty | Terminal app (ghostty, iterm2, tmux) |\n| portPool.start | 8100 | First port in pool |\n| portPool.end | 8199 | Last port in pool |\n| portsPerWorktree | 2 | Ports allocated per worktree |\n",
        "plugins/worktree-manager/skills/worktree-manager/README.md": "# Worktree Manager\n\n![Worktree Manager](cover.png)\n\nA Claude Code skill for managing parallel development environments using git worktrees.\n\n## Installation\n\nClone this repo into your Claude skills directory:\n\n```bash\n# Global installation (available in all projects)\ngit clone git@github.com:Wirasm/worktree-manager-skill.git ~/.claude/skills/worktree-manager\n\n# Or project-specific (available only in that project)\ngit clone git@github.com:Wirasm/worktree-manager-skill.git .claude/skills/worktree-manager\n```\n\nRestart Claude Code after installation.\n\n## Configuration\n\nEdit `~/.claude/skills/worktree-manager/config.json` to customize:\n\n```json\n{\n  \"terminal\": \"ghostty\",\n  \"shell\": \"bash\",\n  \"claudeCommand\": \"claude --dangerously-skip-permissions\",\n  \"portPool\": { \"start\": 8100, \"end\": 8199 },\n  \"portsPerWorktree\": 2,\n  \"worktreeBase\": \"~/tmp/worktrees\"\n}\n```\n\n| Setting            | Default                                 | Description                                                                               |\n| ------------------ | --------------------------------------- | ----------------------------------------------------------------------------------------- |\n| `terminal`         | `ghostty`                               | Terminal to open agents in (`ghostty`, `iterm2`, `tmux`, `wezterm`, `kitty`, `alacritty`) |\n| `shell`            | `bash`                                  | Shell to use (`bash`, `zsh`, `fish`)                                                      |\n| `claudeCommand`    | `claude --dangerously-skip-permissions` | Command to launch Claude Code                                                             |\n| `portPool`         | `8100-8199`                             | Port range for dev servers                                                                |\n| `portsPerWorktree` | `2`                                     | Ports allocated per worktree (e.g., API + frontend)                                       |\n| `worktreeBase`     | `~/tmp/worktrees`                       | Where worktrees are created                                                               |\n\n## What This Does\n\n**The problem:** You're working on a feature when an urgent bug comes in. You have uncommitted changes, half-finished work, a dev server running. Switching branches means stashing everything, stopping servers, and losing your flow. When you come back, you have to reconstruct your entire environment.\n\n**The solution:** Git worktrees let you have multiple branches checked out simultaneously in separate directories. Each is a complete, independent working copy. But setting them up manually is tedious—you need to create the worktree, copy environment files, install dependencies, configure ports so nothing conflicts, and remember to clean everything up later.\n\n**This skill automates all of that.** Just say:\n\n> \"Spin up worktrees for feature/auth and fix/payment-bug\"\n\nClaude will:\n\n1. Create isolated worktree directories for each branch\n2. Copy necessary files (`.env`, `.agents/`, etc.)\n3. Install dependencies automatically\n4. Allocate unique ports so dev servers don't conflict\n5. Open new terminal windows with Claude Code agents ready to work\n\nAll worktrees are tracked in a global registry, so you can check status across all your projects and clean up when branches are merged.\n\n**Why it's valuable:**\n\n- **Parallel development** — Work on multiple features simultaneously with dedicated Claude agents\n- **Zero context switching** — Each worktree maintains its own state, dependencies, and running servers\n- **No port conflicts** — Global port allocation ensures dev servers across projects never collide\n- **Easy cleanup** — One command removes worktrees, kills servers, and releases ports when you're done\n\n## Usage\n\nThe skill activates automatically when you mention worktrees:\n\n- \"Create a worktree for feature/dark-mode\"\n- \"Spin up 3 worktrees for these tickets\"\n- \"What's the status of my worktrees?\"\n- \"Clean up the auth worktree\"\n\n## Requirements\n\n- `jq` — Install with `brew install jq` (macOS) or `apt install jq` (Linux)\n- `git` — For worktree operations\n- A supported terminal application\n\n## License\n\nMIT\n",
        "plugins/worktree-manager/skills/worktree-manager/SKILL.md": "---\nname: worktree-manager\ndescription: Managing git worktrees for parallel development with Claude Code agents. Use when creating worktrees, spinning up parallel branches, checking worktree status, or cleaning up merged branches.\nlicense: MIT\ncompatibility: Requires git, jq, and a terminal emulator (Ghostty, iTerm2, or tmux)\nallowed-tools: Read, Bash, Edit, Write, Glob, Grep\n---\n\n# Global Worktree Manager\n\nManage parallel development across ALL projects using git worktrees with Claude Code agents. Each worktree is an isolated copy of the repo on a different branch, stored centrally at `~/tmp/worktrees/`.\n\n**IMPORTANT**: You (Claude) can perform ALL operations manually using standard tools (jq, git, bash). Scripts are helpers, not requirements. If a script fails, fall back to manual operations described in this document.\n\n## When This Skill Activates\n\n**Trigger phrases:**\n- \"spin up worktrees for X, Y, Z\"\n- \"create 3 worktrees for features A, B, C\"\n- \"new worktree for feature/auth\"\n- \"what's the status of my worktrees?\"\n- \"show all worktrees\" / \"show worktrees for this project\"\n- \"clean up merged worktrees\"\n- \"clean up the auth worktree\"\n- \"launch agent in worktree X\"\n\n---\n\n## File Locations\n\n| File | Purpose |\n|------|---------|\n| `~/.claude/worktree-registry.json` | **Global registry** - tracks all worktrees across all projects |\n| `~/.claude/skills/worktree-manager/config.json` | **Skill config** - terminal, shell, port range settings |\n| `~/.claude/skills/worktree-manager/scripts/` | **Helper scripts** - optional, can do everything manually |\n| `~/tmp/worktrees/` | **Worktree storage** - all worktrees live here |\n| `.claude/worktree.json` (per-project) | **Project config** - optional custom settings |\n\n---\n\n## Core Concepts\n\n### Centralized Worktree Storage\nAll worktrees live in `~/tmp/worktrees/<project-name>/<branch-slug>/`\n\n```\n~/tmp/worktrees/\n├── obsidian-ai-agent/\n│   ├── feature-auth/           # branch: feature/auth\n│   ├── feature-payments/       # branch: feature/payments\n│   └── fix-login-bug/          # branch: fix/login-bug\n└── another-project/\n    └── feature-dark-mode/\n```\n\n### Branch Slug Convention\nBranch names are slugified for filesystem safety by replacing `/` with `-`:\n- `feature/auth` → `feature-auth`\n- `fix/login-bug` → `fix-login-bug`\n- `feat/user-profile` → `feat-user-profile`\n\n**Slugify manually:** `echo \"feature/auth\" | tr '/' '-'` → `feature-auth`\n\n### Port Allocation Rules\n- **Global pool**: 8100-8199 (100 ports total)\n- **Per worktree**: 2 ports allocated (for API + frontend patterns)\n- **Globally unique**: Ports are tracked globally to avoid conflicts across projects\n- **Check before use**: Always verify port isn't in use by system: `lsof -i :<port>`\n\n---\n\n## Global Registry\n\n### Location\n`~/.claude/worktree-registry.json`\n\n### Schema\n```json\n{\n  \"worktrees\": [\n    {\n      \"id\": \"unique-uuid\",\n      \"project\": \"obsidian-ai-agent\",\n      \"repoPath\": \"/Users/rasmus/Projects/obsidian-ai-agent\",\n      \"branch\": \"feature/auth\",\n      \"branchSlug\": \"feature-auth\",\n      \"worktreePath\": \"/Users/rasmus/tmp/worktrees/obsidian-ai-agent/feature-auth\",\n      \"ports\": [8100, 8101],\n      \"createdAt\": \"2025-12-04T10:00:00Z\",\n      \"validatedAt\": \"2025-12-04T10:02:00Z\",\n      \"agentLaunchedAt\": \"2025-12-04T10:03:00Z\",\n      \"task\": \"Implement OAuth login\",\n      \"prNumber\": null,\n      \"status\": \"active\"\n    }\n  ],\n  \"portPool\": {\n    \"start\": 8100,\n    \"end\": 8199,\n    \"allocated\": [8100, 8101]\n  }\n}\n```\n\n### Field Descriptions\n\n**Worktree entry fields:**\n| Field | Type | Description |\n|-------|------|-------------|\n| `id` | string | Unique identifier (UUID) |\n| `project` | string | Project name (from git remote or directory) |\n| `repoPath` | string | Absolute path to original repository |\n| `branch` | string | Full branch name (e.g., `feature/auth`) |\n| `branchSlug` | string | Filesystem-safe name (e.g., `feature-auth`) |\n| `worktreePath` | string | Absolute path to worktree |\n| `ports` | number[] | Allocated port numbers (usually 2) |\n| `createdAt` | string | ISO 8601 timestamp |\n| `validatedAt` | string\\|null | When validation passed |\n| `agentLaunchedAt` | string\\|null | When agent was launched |\n| `task` | string\\|null | Task description for the agent |\n| `prNumber` | number\\|null | Associated PR number if exists |\n| `status` | string | `active`, `orphaned`, or `merged` |\n\n**Port pool fields:**\n| Field | Type | Description |\n|-------|------|-------------|\n| `start` | number | First port in pool (default: 8100) |\n| `end` | number | Last port in pool (default: 8199) |\n| `allocated` | number[] | Currently allocated ports |\n\n### Manual Registry Operations\n\n**Read entire registry:**\n```bash\ncat ~/.claude/worktree-registry.json | jq '.'\n```\n\n**List all worktrees:**\n```bash\ncat ~/.claude/worktree-registry.json | jq '.worktrees[]'\n```\n\n**List worktrees for specific project:**\n```bash\ncat ~/.claude/worktree-registry.json | jq '.worktrees[] | select(.project == \"my-project\")'\n```\n\n**Get allocated ports:**\n```bash\ncat ~/.claude/worktree-registry.json | jq '.portPool.allocated'\n```\n\n**Find worktree by branch (partial match):**\n```bash\ncat ~/.claude/worktree-registry.json | jq '.worktrees[] | select(.branch | contains(\"auth\"))'\n```\n\n**Add worktree entry manually:**\n```bash\nTMP=$(mktemp)\njq '.worktrees += [{\n  \"id\": \"'$(uuidgen)'\",\n  \"project\": \"my-project\",\n  \"repoPath\": \"/path/to/repo\",\n  \"branch\": \"feature/auth\",\n  \"branchSlug\": \"feature-auth\",\n  \"worktreePath\": \"/Users/me/tmp/worktrees/my-project/feature-auth\",\n  \"ports\": [8100, 8101],\n  \"createdAt\": \"'$(date -u +%Y-%m-%dT%H:%M:%SZ)'\",\n  \"validatedAt\": null,\n  \"agentLaunchedAt\": null,\n  \"task\": \"My task\",\n  \"prNumber\": null,\n  \"status\": \"active\"\n}]' ~/.claude/worktree-registry.json > \"$TMP\" && mv \"$TMP\" ~/.claude/worktree-registry.json\n```\n\n**Add ports to allocated pool:**\n```bash\nTMP=$(mktemp)\njq '.portPool.allocated += [8100, 8101] | .portPool.allocated |= unique | .portPool.allocated |= sort_by(.)' \\\n  ~/.claude/worktree-registry.json > \"$TMP\" && mv \"$TMP\" ~/.claude/worktree-registry.json\n```\n\n**Remove worktree entry:**\n```bash\nTMP=$(mktemp)\njq 'del(.worktrees[] | select(.project == \"my-project\" and .branch == \"feature/auth\"))' \\\n  ~/.claude/worktree-registry.json > \"$TMP\" && mv \"$TMP\" ~/.claude/worktree-registry.json\n```\n\n**Release ports from pool:**\n```bash\nTMP=$(mktemp)\njq '.portPool.allocated = (.portPool.allocated | map(select(. != 8100 and . != 8101)))' \\\n  ~/.claude/worktree-registry.json > \"$TMP\" && mv \"$TMP\" ~/.claude/worktree-registry.json\n```\n\n**Initialize empty registry (if missing):**\n```bash\nmkdir -p ~/.claude\ncat > ~/.claude/worktree-registry.json << 'EOF'\n{\n  \"worktrees\": [],\n  \"portPool\": {\n    \"start\": 8100,\n    \"end\": 8199,\n    \"allocated\": []\n  }\n}\nEOF\n```\n\n---\n\n## Manual Port Allocation\n\nIf `scripts/allocate-ports.sh` fails, allocate ports manually:\n\n**Step 1: Get currently allocated ports**\n```bash\nALLOCATED=$(cat ~/.claude/worktree-registry.json | jq -r '.portPool.allocated[]' | sort -n)\necho \"Currently allocated: $ALLOCATED\"\n```\n\n**Step 2: Find first available port (not in allocated list AND not in use by system)**\n```bash\nfor PORT in $(seq 8100 8199); do\n  # Check if in registry\n  if ! echo \"$ALLOCATED\" | grep -q \"^${PORT}$\"; then\n    # Check if in use by system\n    if ! lsof -i :\"$PORT\" &>/dev/null; then\n      echo \"Available: $PORT\"\n      break\n    fi\n  fi\ndone\n```\n\n**Step 3: Add to allocated pool**\n```bash\nTMP=$(mktemp)\njq '.portPool.allocated += [8100] | .portPool.allocated |= unique | .portPool.allocated |= sort_by(.)' \\\n  ~/.claude/worktree-registry.json > \"$TMP\" && mv \"$TMP\" ~/.claude/worktree-registry.json\n```\n\n---\n\n## What You (Claude) Do vs What Scripts Do\n\n| Task | Script Available | Manual Fallback |\n|------|------------------|-----------------|\n| Determine project name | No | Parse `git remote get-url origin` or `basename $(pwd)` |\n| Detect package manager | No | Check for lockfiles (see Detection section) |\n| Create git worktree | No | `git worktree add <path> -b <branch>` |\n| Copy .agents/ directory | No | `cp -r .agents <worktree-path>/` |\n| Install dependencies | No | Run detected install command |\n| Validate (health check) | No | Start server, curl endpoint, stop server |\n| Allocate ports | `scripts/allocate-ports.sh 2` | Manual (see above) |\n| Register worktree | `scripts/register.sh` | Manual jq (see above) |\n| Launch agent in terminal | `scripts/launch-agent.sh` | Manual (see below) |\n| Show status | `scripts/status.sh` | `cat ~/.claude/worktree-registry.json \\| jq ...` |\n| Cleanup worktree | `scripts/cleanup.sh` | Manual (see Cleanup section) |\n\n---\n\n## Workflows\n\n### 1. Create Multiple Worktrees with Agents\n\n**User says:** \"Spin up 3 worktrees for feature/auth, feature/payments, and fix/login-bug\"\n\n**You do (can parallelize with subagents):**\n\n```\nFor EACH branch (can run in parallel):\n\n1. SETUP\n   a. Get project name:\n      PROJECT=$(basename $(git remote get-url origin 2>/dev/null | sed 's/\\.git$//') 2>/dev/null || basename $(pwd))\n   b. Get repo root:\n      REPO_ROOT=$(git rev-parse --show-toplevel)\n   c. Slugify branch:\n      BRANCH_SLUG=$(echo \"feature/auth\" | tr '/' '-')\n   d. Determine worktree path:\n      WORKTREE_PATH=~/tmp/worktrees/$PROJECT/$BRANCH_SLUG\n\n2. ALLOCATE PORTS\n   Option A (script): ~/.claude/skills/worktree-manager/scripts/allocate-ports.sh 2\n   Option B (manual): Find 2 unused ports from 8100-8199, add to registry\n\n3. CREATE WORKTREE\n   mkdir -p ~/tmp/worktrees/$PROJECT\n   git worktree add $WORKTREE_PATH -b $BRANCH\n   # If branch exists already, omit -b flag\n\n4. COPY UNCOMMITTED RESOURCES\n   cp -r .agents $WORKTREE_PATH/ 2>/dev/null || true\n   cp .env.example $WORKTREE_PATH/.env 2>/dev/null || true\n\n5. INSTALL DEPENDENCIES\n   cd $WORKTREE_PATH\n   # Detect and run: npm install / uv sync / etc.\n\n6. VALIDATE (start server, health check, stop)\n   a. Start server with allocated port\n   b. Wait and health check: curl -sf http://localhost:$PORT/health\n   c. Stop server\n   d. If FAILS: report error but continue with other worktrees\n\n7. REGISTER IN GLOBAL REGISTRY\n   Option A (script): ~/.claude/skills/worktree-manager/scripts/register.sh ...\n   Option B (manual): Update ~/.claude/worktree-registry.json with jq\n\n8. LAUNCH AGENT\n   Option A (script): ~/.claude/skills/worktree-manager/scripts/launch-agent.sh $WORKTREE_PATH \"task\"\n   Option B (manual): Open terminal manually, cd to path, run claude\n\nAFTER ALL COMPLETE:\n- Report summary table to user\n- Note any failures with details\n```\n\n### 2. Check Status\n\n**With script:**\n```bash\n~/.claude/skills/worktree-manager/scripts/status.sh\n~/.claude/skills/worktree-manager/scripts/status.sh --project my-project\n```\n\n**Manual:**\n```bash\n# All worktrees\ncat ~/.claude/worktree-registry.json | jq -r '.worktrees[] | \"\\(.project)\\t\\(.branch)\\t\\(.ports | join(\",\"))\\t\\(.status)\\t\\(.task // \"-\")\"'\n\n# For current project\nPROJECT=$(basename $(git remote get-url origin 2>/dev/null | sed 's/\\.git$//'))\ncat ~/.claude/worktree-registry.json | jq -r \".worktrees[] | select(.project == \\\"$PROJECT\\\") | \\\"\\(.branch)\\t\\(.ports | join(\\\",\\\"))\\t\\(.status)\\\"\"\n```\n\n### 3. Launch Agent Manually\n\nIf `launch-agent.sh` fails:\n\n**For Ghostty:**\n```bash\nopen -na \"Ghostty.app\" --args -e bash -c \"cd '$WORKTREE_PATH' && claude --dangerously-skip-permissions\"\n```\n\n**For iTerm2:**\n```bash\nosascript -e 'tell application \"iTerm2\" to create window with default profile' \\\n  -e 'tell application \"iTerm2\" to tell current session of current window to write text \"cd '\"$WORKTREE_PATH\"' && claude\"'\n```\n\n**For tmux:**\n```bash\ntmux new-session -d -s \"wt-$PROJECT-$BRANCH_SLUG\" -c \"$WORKTREE_PATH\" \"bash -c 'claude --dangerously-skip-permissions'\"\n```\n\n### 4. Cleanup Worktree\n\n**With script:**\n```bash\n~/.claude/skills/worktree-manager/scripts/cleanup.sh my-project feature/auth --delete-branch\n```\n\n**Manual cleanup:**\n```bash\n# 1. Get worktree info from registry\nENTRY=$(cat ~/.claude/worktree-registry.json | jq '.worktrees[] | select(.project == \"my-project\" and .branch == \"feature/auth\")')\nWORKTREE_PATH=$(echo \"$ENTRY\" | jq -r '.worktreePath')\nPORTS=$(echo \"$ENTRY\" | jq -r '.ports[]')\nREPO_PATH=$(echo \"$ENTRY\" | jq -r '.repoPath')\n\n# 2. Kill processes on ports\nfor PORT in $PORTS; do\n  lsof -ti:\"$PORT\" | xargs kill -9 2>/dev/null || true\ndone\n\n# 3. Remove worktree\ncd \"$REPO_PATH\"\ngit worktree remove \"$WORKTREE_PATH\" --force 2>/dev/null || rm -rf \"$WORKTREE_PATH\"\ngit worktree prune\n\n# 4. Remove from registry\nTMP=$(mktemp)\njq 'del(.worktrees[] | select(.project == \"my-project\" and .branch == \"feature/auth\"))' \\\n  ~/.claude/worktree-registry.json > \"$TMP\" && mv \"$TMP\" ~/.claude/worktree-registry.json\n\n# 5. Release ports\nTMP=$(mktemp)\nfor PORT in $PORTS; do\n  jq \".portPool.allocated = (.portPool.allocated | map(select(. != $PORT)))\" \\\n    ~/.claude/worktree-registry.json > \"$TMP\" && mv \"$TMP\" ~/.claude/worktree-registry.json\ndone\n\n# 6. Optionally delete branch\ngit branch -D feature/auth\ngit push origin --delete feature/auth\n```\n\n---\n\n## Package Manager Detection\n\nDetect by checking for lockfiles in priority order:\n\n| File | Package Manager | Install Command |\n|------|-----------------|-----------------|\n| `bun.lockb` | bun | `bun install` |\n| `pnpm-lock.yaml` | pnpm | `pnpm install` |\n| `yarn.lock` | yarn | `yarn install` |\n| `package-lock.json` | npm | `npm install` |\n| `uv.lock` | uv | `uv sync` |\n| `pyproject.toml` (no uv.lock) | uv | `uv sync` |\n| `requirements.txt` | pip | `pip install -r requirements.txt` |\n| `go.mod` | go | `go mod download` |\n| `Cargo.toml` | cargo | `cargo build` |\n\n**Detection logic:**\n```bash\ncd $WORKTREE_PATH\nif [ -f \"bun.lockb\" ]; then bun install\nelif [ -f \"pnpm-lock.yaml\" ]; then pnpm install\nelif [ -f \"yarn.lock\" ]; then yarn install\nelif [ -f \"package-lock.json\" ]; then npm install\nelif [ -f \"uv.lock\" ]; then uv sync\nelif [ -f \"pyproject.toml\" ]; then uv sync\nelif [ -f \"requirements.txt\" ]; then pip install -r requirements.txt\nelif [ -f \"go.mod\" ]; then go mod download\nelif [ -f \"Cargo.toml\" ]; then cargo build\nfi\n```\n\n---\n\n## Dev Server Detection\n\nLook for dev commands in this order:\n\n1. **docker-compose.yml / compose.yml**: `docker-compose up -d` or `docker compose up -d`\n2. **package.json scripts**: Look for `dev`, `start:dev`, `serve`\n3. **Python with uvicorn**: `uv run uvicorn app.main:app --port $PORT`\n4. **Python with Flask**: `flask run --port $PORT`\n5. **Go**: `go run .`\n\n**Port injection**: Most servers accept `PORT` env var or `--port` flag\n\n---\n\n## Project-Specific Config (Optional)\n\nProjects can provide `.claude/worktree.json` for custom settings:\n\n```json\n{\n  \"ports\": {\n    \"count\": 2,\n    \"services\": [\"api\", \"frontend\"]\n  },\n  \"install\": \"uv sync && cd frontend && npm install\",\n  \"validate\": {\n    \"start\": \"docker-compose up -d\",\n    \"healthCheck\": \"curl -sf http://localhost:{{PORT}}/health\",\n    \"stop\": \"docker-compose down\"\n  },\n  \"copyDirs\": [\".agents\", \".env.example\", \"data/fixtures\"]\n}\n```\n\nIf this file exists, use its settings. Otherwise, auto-detect.\n\n---\n\n## Parallel Worktree Creation\n\nWhen creating multiple worktrees, use subagents for parallelization:\n\n```\nUser: \"Spin up worktrees for feature/a, feature/b, feature/c\"\n\nYou:\n1. Allocate ports for ALL worktrees upfront (6 ports total)\n2. Spawn 3 subagents, one per worktree\n3. Each subagent:\n   - Creates its worktree\n   - Installs deps\n   - Validates\n   - Registers (with its pre-allocated ports)\n   - Launches agent\n4. Collect results from all subagents\n5. Report unified summary with any failures noted\n```\n\n---\n\n## Safety Guidelines\n\n1. **Before cleanup**, check PR status:\n   - PR merged → safe to clean everything\n   - PR open → warn user, confirm before proceeding\n   - No PR → warn about unsubmitted work\n\n2. **Before deleting branches**, confirm if:\n   - PR not merged\n   - No PR exists\n   - Worktree has uncommitted changes\n\n3. **Port conflicts**: If port in use by non-worktree process, pick different port\n\n4. **Orphaned worktrees**: If original repo deleted, mark as `orphaned` in status\n\n5. **Max worktrees**: With 100-port pool and 2 ports each, max ~50 concurrent worktrees\n\n---\n\n## Script Reference\n\nScripts are in `~/.claude/skills/worktree-manager/scripts/`\n\n### allocate-ports.sh\n```bash\n~/.claude/skills/worktree-manager/scripts/allocate-ports.sh <count>\n# Returns: space-separated port numbers (e.g., \"8100 8101\")\n# Automatically updates registry\n```\n\n### register.sh\n```bash\n~/.claude/skills/worktree-manager/scripts/register.sh \\\n  <project> <branch> <branch-slug> <worktree-path> <repo-path> <ports> [task]\n# Example:\n~/.claude/skills/worktree-manager/scripts/register.sh \\\n  \"my-project\" \"feature/auth\" \"feature-auth\" \\\n  \"$HOME/tmp/worktrees/my-project/feature-auth\" \\\n  \"/path/to/repo\" \"8100,8101\" \"Implement OAuth\"\n```\n\n### launch-agent.sh\n```bash\n~/.claude/skills/worktree-manager/scripts/launch-agent.sh <worktree-path> [task]\n# Opens new terminal window (Ghostty by default) with Claude Code\n```\n\n### status.sh\n```bash\n~/.claude/skills/worktree-manager/scripts/status.sh [--project <name>]\n# Shows all worktrees, or filtered by project\n```\n\n### cleanup.sh\n```bash\n~/.claude/skills/worktree-manager/scripts/cleanup.sh <project> <branch> [--delete-branch]\n# Kills ports, removes worktree, updates registry\n# --delete-branch also removes local and remote git branches\n```\n\n### release-ports.sh\n```bash\n~/.claude/skills/worktree-manager/scripts/release-ports.sh <port1> [port2] ...\n# Releases ports back to pool\n```\n\n---\n\n## Skill Config\n\nLocation: `~/.claude/skills/worktree-manager/config.json`\n\n```json\n{\n  \"terminal\": \"ghostty\",\n  \"shell\": \"bash\",\n  \"claudeCommand\": \"claude --dangerously-skip-permissions\",\n  \"portPool\": {\n    \"start\": 8100,\n    \"end\": 8199\n  },\n  \"portsPerWorktree\": 2,\n  \"worktreeBase\": \"~/tmp/worktrees\",\n  \"defaultCopyDirs\": [\".agents\", \".env.example\"]\n}\n```\n\n**Options:**\n- **terminal**: `ghostty`, `iterm2`, `tmux`, `wezterm`, `kitty`, `alacritty`\n- **shell**: `bash`, `zsh`, `fish` (adjust syntax in claudeCommand if using fish)\n- **claudeCommand**: The command to launch Claude Code (default uses `--dangerously-skip-permissions` for autonomous operation)\n\n---\n\n## Common Issues\n\n### \"Worktree already exists\"\n```bash\ngit worktree list\ngit worktree remove <path> --force\ngit worktree prune\n```\n\n### \"Branch already exists\"\n```bash\n# Use existing branch (omit -b flag)\ngit worktree add <path> <branch>\n```\n\n### \"Port already in use\"\n```bash\nlsof -i :<port>\n# Kill if stale, or pick different port\n```\n\n### Registry out of sync\n```bash\n# Compare registry to actual worktrees\ncat ~/.claude/worktree-registry.json | jq '.worktrees[].worktreePath'\nfind ~/tmp/worktrees -maxdepth 2 -type d\n\n# Remove orphaned entries or add missing ones\n```\n\n### Validation failed\n1. Check stderr/logs for error message\n2. Common issues: missing env vars, database not running, wrong port\n3. Report to user with details\n4. Continue with other worktrees\n5. User can fix and re-validate manually\n\n---\n\n## Example Session\n\n**User:** \"Spin up 2 worktrees for feature/dark-mode and fix/login-bug\"\n\n**You:**\n1. Detect project: `obsidian-ai-agent` (from git remote)\n2. Detect package manager: `uv` (found uv.lock)\n3. Allocate 4 ports: `~/.claude/skills/worktree-manager/scripts/allocate-ports.sh 4` → `8100 8101 8102 8103`\n4. Create worktrees:\n   ```bash\n   mkdir -p ~/tmp/worktrees/obsidian-ai-agent\n   git worktree add ~/tmp/worktrees/obsidian-ai-agent/feature-dark-mode -b feature/dark-mode\n   git worktree add ~/tmp/worktrees/obsidian-ai-agent/fix-login-bug -b fix/login-bug\n   ```\n5. Copy .agents/:\n   ```bash\n   cp -r .agents ~/tmp/worktrees/obsidian-ai-agent/feature-dark-mode/\n   cp -r .agents ~/tmp/worktrees/obsidian-ai-agent/fix-login-bug/\n   ```\n6. Install deps in each worktree:\n   ```bash\n   (cd ~/tmp/worktrees/obsidian-ai-agent/feature-dark-mode && uv sync)\n   (cd ~/tmp/worktrees/obsidian-ai-agent/fix-login-bug && uv sync)\n   ```\n7. Validate each (start server, health check, stop)\n8. Register both worktrees in `~/.claude/worktree-registry.json`\n9. Launch agents:\n   ```bash\n   ~/.claude/skills/worktree-manager/scripts/launch-agent.sh \\\n     ~/tmp/worktrees/obsidian-ai-agent/feature-dark-mode \"Implement dark mode toggle\"\n   ~/.claude/skills/worktree-manager/scripts/launch-agent.sh \\\n     ~/tmp/worktrees/obsidian-ai-agent/fix-login-bug \"Fix login redirect bug\"\n   ```\n10. Report:\n    ```\n    Created 2 worktrees with agents:\n\n    | Branch | Ports | Path | Task |\n    |--------|-------|------|------|\n    | feature/dark-mode | 8100, 8101 | ~/tmp/worktrees/.../feature-dark-mode | Implement dark mode |\n    | fix/login-bug | 8102, 8103 | ~/tmp/worktrees/.../fix-login-bug | Fix login redirect |\n\n    Both agents running in Ghostty windows.\n    ```\n"
      },
      "plugins": [
        {
          "name": "dependabot",
          "source": "./plugins/dependabot",
          "description": "Commands to interact with Dependabot on GitHub repositories.",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Michael0520/milo-claudekit",
            "/plugin install dependabot@milo-claudekit"
          ]
        },
        {
          "name": "git",
          "source": "./plugins/git",
          "description": "Common repository operations for git",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Michael0520/milo-claudekit",
            "/plugin install git@milo-claudekit"
          ]
        },
        {
          "name": "license",
          "source": "./plugins/license",
          "description": "Commands to manage open source licenses in current repository",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Michael0520/milo-claudekit",
            "/plugin install license@milo-claudekit"
          ]
        },
        {
          "name": "rubric",
          "source": "./plugins/rubric",
          "description": "Automated code standards checks based on custom rubrics",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Michael0520/milo-claudekit",
            "/plugin install rubric@milo-claudekit"
          ]
        },
        {
          "name": "chrome-devtools-mcp",
          "source": "./plugins/chrome-devtools-mcp",
          "description": "UI testing and browser automation via Chrome DevTools MCP",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Michael0520/milo-claudekit",
            "/plugin install chrome-devtools-mcp@milo-claudekit"
          ]
        },
        {
          "name": "worktree-manager",
          "source": "./plugins/worktree-manager",
          "description": "Git worktree management for parallel development",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Michael0520/milo-claudekit",
            "/plugin install worktree-manager@milo-claudekit"
          ]
        },
        {
          "name": "one-ui-migration",
          "source": "./plugins/one-ui-migration",
          "description": "Angular 16 to 20 migration with DDD architecture",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Michael0520/milo-claudekit",
            "/plugin install one-ui-migration@milo-claudekit"
          ]
        },
        {
          "name": "milo-core",
          "source": "./plugins/milo-core",
          "description": "Personal Claude Code settings, rules, docs, and agents",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Michael0520/milo-claudekit",
            "/plugin install milo-core@milo-claudekit"
          ]
        },
        {
          "name": "legacy-analyzer",
          "source": "./plugins/legacy-analyzer",
          "description": "Analyze legacy codebase and generate migration plan",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Michael0520/milo-claudekit",
            "/plugin install legacy-analyzer@milo-claudekit"
          ]
        },
        {
          "name": "continuous-learning",
          "source": "./plugins/continuous-learning",
          "description": "Extract and save reusable patterns from Claude Code sessions",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Michael0520/milo-claudekit",
            "/plugin install continuous-learning@milo-claudekit"
          ]
        },
        {
          "name": "guard",
          "source": "./plugins/guard",
          "description": "PreToolUse guards for safer Claude Code operations",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Michael0520/milo-claudekit",
            "/plugin install guard@milo-claudekit"
          ]
        },
        {
          "name": "session-memory",
          "source": "./plugins/session-memory",
          "description": "Persist and restore session context across Claude Code sessions",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Michael0520/milo-claudekit",
            "/plugin install session-memory@milo-claudekit"
          ]
        },
        {
          "name": "superpowers",
          "source": {
            "source": "github",
            "repo": "obra/superpowers"
          },
          "description": null,
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Michael0520/milo-claudekit",
            "/plugin install superpowers@milo-claudekit"
          ]
        }
      ]
    }
  ]
}