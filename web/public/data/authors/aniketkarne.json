{
  "author": {
    "id": "aniketkarne",
    "display_name": "Aniket",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/12999365?u=f79fa8d4d758b2ac258df1c523d4b803ddd41821&v=4",
    "url": "https://github.com/aniketkarne",
    "bio": "Devops & AI Engineer | Automation Enthusiast | Open Source Contributor : I build tools that bridge AI, dev tooling, and AI & ML with Cloud Ops ",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 6,
      "total_skills": 0,
      "total_stars": 335,
      "total_forks": 41
    }
  },
  "marketplaces": [
    {
      "name": "claude-nights-watch-marketplace",
      "version": null,
      "description": "Official marketplace for Claude Nights Watch plugin",
      "owner_info": {
        "name": "Aniket Karne",
        "email": "[email protected]",
        "url": "https://github.com/aniketkarne/ClaudeNightsWatch"
      },
      "keywords": [],
      "repo_full_name": "aniketkarne/ClaudeNightsWatch",
      "repo_url": "https://github.com/aniketkarne/ClaudeNightsWatch",
      "repo_description": "Autonomous task execution system for Claude CLI that monitors your usage windows and executes predefined tasks automatically",
      "homepage": null,
      "signals": {
        "stars": 335,
        "forks": 41,
        "pushed_at": "2026-01-14T14:02:02Z",
        "created_at": "2025-07-15T11:17:59Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/.mcp.json",
          "type": "blob",
          "size": 207
        },
        {
          "path": ".claude-plugin/hooks.json",
          "type": "blob",
          "size": 916
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 424
        },
        {
          "path": ".claude-plugin/plugin.json",
          "type": "blob",
          "size": 724
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 20307
        },
        {
          "path": "agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "agents/task-executor.md",
          "type": "blob",
          "size": 8234
        },
        {
          "path": "claude-plugins-marketplace",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude-plugins-marketplace/README.md",
          "type": "blob",
          "size": 3997
        },
        {
          "path": "commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "commands/logs.md",
          "type": "blob",
          "size": 2669
        },
        {
          "path": "commands/restart.md",
          "type": "blob",
          "size": 1674
        },
        {
          "path": "commands/setup.md",
          "type": "blob",
          "size": 3229
        },
        {
          "path": "commands/start.md",
          "type": "blob",
          "size": 1963
        },
        {
          "path": "commands/status.md",
          "type": "blob",
          "size": 2111
        },
        {
          "path": "commands/stop.md",
          "type": "blob",
          "size": 1222
        },
        {
          "path": "hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "hooks/hooks.json",
          "type": "blob",
          "size": 916
        },
        {
          "path": "hooks/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "hooks/scripts/check-daemon-status.sh",
          "type": "blob",
          "size": 769
        },
        {
          "path": "hooks/scripts/log-file-changes.sh",
          "type": "blob",
          "size": 639
        },
        {
          "path": "hooks/scripts/session-end-prompt.sh",
          "type": "blob",
          "size": 895
        },
        {
          "path": "marketplace-example",
          "type": "tree",
          "size": null
        },
        {
          "path": "marketplace-example/README.md",
          "type": "blob",
          "size": 3997
        },
        {
          "path": "test",
          "type": "tree",
          "size": null
        },
        {
          "path": "test/README.md",
          "type": "blob",
          "size": 1849
        }
      ],
      "files": {
        ".claude-plugin/.mcp.json": "{\n  \"mcpServers\": {\n    \"nights-watch\": {\n      \"command\": \"${CLAUDE_PLUGIN_ROOT}/mcp-server/nights-watch-server.sh\",\n      \"env\": {\n        \"NIGHTS_WATCH_ROOT\": \"${CLAUDE_PLUGIN_ROOT}\"\n      }\n    }\n  }\n}\n\n",
        ".claude-plugin/hooks.json": "{\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"description\": \"Check Nights Watch daemon status on session start\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/check-daemon-status.sh\"\n          }\n        ]\n      }\n    ],\n    \"SessionEnd\": [\n      {\n        \"description\": \"Optionally prompt to start daemon on session end\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/session-end-prompt.sh\"\n          }\n        ]\n      }\n    ],\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Write|Edit\",\n        \"description\": \"Log significant file modifications for task tracking\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/log-file-changes.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n\n",
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"claude-nights-watch-marketplace\",\n  \"description\": \"Official marketplace for Claude Nights Watch plugin\",\n  \"owner\": {\n    \"name\": \"Aniket Karne\",\n    \"email\": \"[email protected]\",\n    \"url\": \"https://github.com/aniketkarne/ClaudeNightsWatch\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"claude-nights-watch\",\n      \"source\": \"./\",\n      \"description\": \"Autonomous task execution daemon for Claude CLI\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"nights-watch\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Autonomous task execution daemon that monitors Claude usage windows and executes predefined tasks automatically. Keep Claude working 24/7 on your projects.\",\n  \"author\": {\n    \"name\": \"Aniket Karne\",\n    \"email\": \"[email protected]\",\n    \"url\": \"https://github.com/aniketkarne\"\n  },\n  \"homepage\": \"https://github.com/aniketkarne/ClaudeNightsWatch\",\n  \"repository\": \"https://github.com/aniketkarne/ClaudeNightsWatch\",\n  \"license\": \"MIT\",\n  \"keywords\": [\n    \"automation\",\n    \"daemon\",\n    \"task-execution\",\n    \"monitoring\",\n    \"autonomous\",\n    \"productivity\",\n    \"workflow\",\n    \"ci-cd\"\n  ],\n  \"hooks\": \"./hooks.json\",\n  \"mcpServers\": \"./.mcp.json\"\n}\n\n",
        "README.md": "# Claude Nights Watch ğŸŒ™\n\n[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)\n[![Shell Script](https://img.shields.io/badge/Language-Shell-green.svg)](https://www.gnu.org/software/bash/)\n[![Claude Code Plugin](https://img.shields.io/badge/Plugin-Ready-blue.svg)](https://docs.anthropic.com/claude-code)\n[![GitHub stars](https://img.shields.io/github/stars/aniketkarne/ClaudeNightsWatch.svg?style=social&label=Star)](https://github.com/aniketkarne/ClaudeNightsWatch)\n\n**ğŸš€ NEW: Now available as a Claude Code Plugin!** ğŸ‰\n\nAutonomous task execution system for Claude CLI that monitors your usage windows and executes predefined tasks automatically. Built on top of the claude-auto-renew concept but instead of simple renewals, it executes complex tasks from a task.md file.\n\n**âš ï¸ Warning**: This tool uses `--dangerously-skip-permissions` for autonomous execution. Use with caution!\n\n## ğŸ¯ Two Ways to Use Claude Nights Watch\n\nChoose your preferred installation method:\n\n### ğŸ”¥ **Recommended: Claude Code Plugin** (NEW!)\n- **Seamless Integration**: Works directly within Claude Code\n- **7 Slash Commands**: `/nights-watch start/stop/status/logs/task/setup/restart`\n- **AI Agent Integration**: Built-in Task Executor agent for autonomous guidance\n- **Smart Hooks**: Automatic session integration and activity logging\n- **MCP Server**: Programmatic control tools for Claude\n- **Enhanced UX**: Better error handling and user experience\n\n### âš¡ **Original Daemon Method** (Legacy)\n- **Standalone Operation**: Works independently of Claude Code\n- **Script-based Control**: Direct shell script execution\n- **Proven Reliability**: Battle-tested daemon implementation\n- **Full Feature Set**: All core functionality available\n\n## ğŸ¯ Overview\n\nClaude Nights Watch extends the auto-renewal concept to create a fully autonomous task execution system. When your Claude usage window is about to expire, instead of just saying \"hi\", it reads your `task.md` file and executes the defined tasks autonomously.\n\n### Key Features\n\n- ğŸ¤– **Autonomous Execution**: Runs tasks without manual intervention\n- ğŸ“‹ **Task-Based Workflow**: Define tasks in a simple markdown file\n- ğŸ›¡ï¸ **Safety Rules**: Configure safety constraints in `rules.md`\n- â° **Smart Timing**: Uses ccusage for accurate timing or falls back to time-based checking\n- ğŸ“… **Scheduled Start**: Can be configured to start at a specific time\n- ğŸ“Š **Comprehensive Logging**: Track all activities and executions\n- ğŸ”„ **Based on Proven Code**: Built on the reliable claude-auto-renew daemon\n\n## ğŸš€ Quick Start\n\n### Prerequisites\n\n1. [Claude CLI](https://docs.anthropic.com/en/docs/claude-code/quickstart) installed and configured\n2. (Optional) [ccusage](https://www.npmjs.com/package/ccusage) for accurate timing:\n   ```bash\n   npm install -g ccusage\n   ```\n\n---\n\n## ğŸ”¥ Plugin Installation (Recommended)\n\n### Option 1: As Claude Code Plugin\n#### Standard Installation \n```bash\n# Method 1: From marketplace (when available)\nclaude plugins marketplace add https://github.com/aniketkarne/claude-plugins-marketplace\nclaude plugins add claude-nights-watch\n\n# Method 2: Direct from GitHub\nclaude plugins add https://github.com/aniketkarne/ClaudeNightsWatch\n\n# Method 3: From local directory (for development)\nclaude plugins add /path/to/ClaudeNightsWatch\n```\n#### One-Command Installation\nUse the [Claude Plugins CLI](https://claude-plugins.dev) to skip the marketplace setup:\n```bash\nnpx claude-plugins install @aniketkarne/claude-nights-watch-marketplace/claude-nights-watch\n```\n\nThis automatically adds the marketplace and installs the plugin in a single step.\n\n### Plugin Usage\n\n```bash\n# Interactive setup\n/nights-watch setup\n\n# Start daemon\n/nights-watch start\n\n# Check status\n/nights-watch status\n\n# View logs in real-time\n/nights-watch logs -f\n\n# Stop daemon\n/nights-watch stop\n```\n\n**Plugin Features:**\n- ğŸ¯ **7 Slash Commands**: `/nights-watch start/stop/status/logs/task/setup/restart`\n- ğŸ§  **AI Agent**: Built-in Task Executor for autonomous guidance\n- ğŸ”— **MCP Server**: 8 programmatic tools for Claude control\n- ğŸ£ **Smart Hooks**: Automatic session integration\n\n---\n\n## âš¡ Original Daemon Installation (Legacy)\n\n### Option 2: Install as Standalone Daemon\n\n1. Clone this repository:\n   ```bash\n   git clone https://github.com/aniketkarne/ClaudeNightsWatch.git\n   cd ClaudeNightsWatch\n   ```\n\n2. Make scripts executable:\n   ```bash\n   chmod +x *.sh\n   ```\n\n3. Run the interactive setup:\n   ```bash\n   ./setup-nights-watch.sh\n   ```\n\n### Daemon Usage\n\n1. **Create your task file** (`task.md`):\n   ```markdown\n   # Daily Development Tasks\n\n   1. Run linting on all source files\n   2. Update dependencies to latest versions\n   3. Run the test suite\n   4. Generate coverage report\n   5. Create a summary of changes\n   ```\n\n2. **Create safety rules** (`rules.md`):\n   ```markdown\n   # Safety Rules\n\n   - Never delete files without backing up\n   - Only work within the project directory\n   - Always create feature branches for changes\n   - Never commit sensitive information\n   ```\n\n3. **Start the daemon**:\n   ```bash\n   ./claude-nights-watch-manager.sh start\n   ```\n\n**Legacy Commands:**\n```bash\n./claude-nights-watch-manager.sh start [--at TIME]  # Start daemon\n./claude-nights-watch-manager.sh stop              # Stop daemon\n./claude-nights-watch-manager.sh status            # Check status\n./claude-nights-watch-manager.sh logs [-f]         # View logs\n./claude-nights-watch-manager.sh task              # View task/rules\n./claude-nights-watch-manager.sh restart           # Restart daemon\n```\n\n## ğŸ“ Configuration\n\n### Task File (task.md)\n\nThe task file contains the instructions that Claude will execute. It should be clear, specific, and well-structured. See `examples/task.example.md` for a comprehensive example.\n\n### Rules File (rules.md)\n\nThe rules file defines safety constraints and best practices. It's prepended to every task execution to ensure safe autonomous operation. See `examples/rules.example.md` for recommended rules.\n\n### Environment Variables\n\n- `CLAUDE_NIGHTS_WATCH_DIR`: Set the directory containing task.md and rules.md (default: current directory)\n\n## ğŸ® Commands\n\n### ğŸ”¥ Plugin Commands (NEW!)\n\nWhen using as a Claude Code plugin, use slash commands:\n\n```bash\n# Start the daemon\n/nights-watch start\n\n# Start with scheduled time\n/nights-watch start --at \"09:00\"\n/nights-watch start --at \"2025-01-28 14:30\"\n\n# Stop the daemon\n/nights-watch stop\n\n# Check status\n/nights-watch status\n\n# View logs\n/nights-watch logs\n/nights-watch logs -f  # Follow mode\n\n# View current task and rules\n/nights-watch task\n\n# Interactive setup\n/nights-watch setup\n\n# Restart daemon\n/nights-watch restart\n```\n\n### âš¡ Original Daemon Commands (Legacy)\n\nFor standalone daemon usage:\n\n```bash\n# Start the daemon\n./claude-nights-watch-manager.sh start\n\n# Start with scheduled time\n./claude-nights-watch-manager.sh start --at \"09:00\"\n./claude-nights-watch-manager.sh start --at \"2025-01-28 14:30\"\n\n# Stop the daemon\n./claude-nights-watch-manager.sh stop\n\n# Check status\n./claude-nights-watch-manager.sh status\n\n# View logs\n./claude-nights-watch-manager.sh logs\n./claude-nights-watch-manager.sh logs -f  # Follow mode\n\n# Use interactive log viewer\n./view-logs.sh\n\n# View current task and rules\n./claude-nights-watch-manager.sh task\n\n# Restart daemon\n./claude-nights-watch-manager.sh restart\n```\n\n---\n\n## ğŸ§  Plugin Features (NEW!)\n\n### Task Executor Agent\nBuilt-in AI agent that helps with:\n- **Autonomous Task Planning**: Designing effective autonomous workflows\n- **Safety Rule Creation**: Building comprehensive safety constraints\n- **Daemon Management**: Starting, stopping, and troubleshooting\n- **Log Analysis**: Interpreting execution results and identifying issues\n\n**Usage:**\n```\nUser: \"Help me create an autonomous code review workflow\"\nAgent: Provides expert guidance and can execute /nights-watch commands\n\nUser: \"My daemon isn't working, help debug\"\nAgent: Analyzes logs and suggests solutions\n```\n\n### MCP Server Integration\nProvides 8 programmatic tools for Claude:\n- `get_daemon_status` - Query daemon state\n- `start_daemon` - Start with optional schedule\n- `stop_daemon` - Stop the daemon\n- `get_logs` - Retrieve log entries\n- `read_task` - Read task.md content\n- `read_rules` - Read rules.md content\n- `write_task` - Update task.md\n- `write_rules` - Update rules.md\n\n### Smart Hooks\nAutomatic integration with Claude Code sessions:\n- **SessionStart**: Shows daemon status when starting Claude Code\n- **SessionEnd**: Prompts to start daemon if tasks are configured\n- **PostToolUse**: Logs file modifications for audit trail\n\nThese hooks run silently in the background, enhancing your workflow.\n\n## ğŸ”§ How It Works\n\n1. **Monitoring**: The daemon continuously monitors your Claude usage windows\n2. **Timing**: When approaching the 5-hour limit (within 2 minutes), it prepares for execution\n3. **Task Preparation**: Reads both `rules.md` and `task.md`, combining them into a single prompt\n4. **Autonomous Execution**: Executes the task using `claude --dangerously-skip-permissions`\n5. **Logging**: All activities are logged to `logs/claude-nights-watch-daemon.log`\n\n### Timing Logic\n\n- **With ccusage**: Gets accurate remaining time from the API\n- **Without ccusage**: Falls back to timestamp-based checking\n- **Adaptive intervals**:\n  - \\>30 minutes remaining: Check every 10 minutes\n  - 5-30 minutes remaining: Check every 2 minutes\n  - <5 minutes remaining: Check every 30 seconds\n\n## âš ï¸ Safety Considerations\n\n**IMPORTANT**: This tool runs Claude with the `--dangerously-skip-permissions` flag, meaning it will execute tasks without asking for confirmation. \n\n### Best Practices:\n\n1. **Always test tasks manually first** before setting up autonomous execution\n2. **Use comprehensive rules.md** to prevent destructive actions\n3. **Start with simple, safe tasks** and gradually increase complexity\n4. **Monitor logs regularly** to ensure proper execution\n5. **Keep backups** of important data\n6. **Run in isolated environments** when possible\n\n### Recommended Restrictions:\n\n- Limit file system access to project directories\n- Prohibit deletion commands\n- Prevent system modifications\n- Restrict network access\n- Set resource limits\n\n## ğŸ“ File Structure\n\n### ğŸ”¥ Plugin Structure (NEW!)\n\nWhen installed as a Claude Code plugin, the following structure is used:\n\n```\nclaude-nights-watch/\nâ”œâ”€â”€ .claude-plugin/                    # Plugin metadata (NEW!)\nâ”‚   â””â”€â”€ plugin.json                   # Plugin manifest\nâ”œâ”€â”€ commands/                         # Slash command definitions (NEW!)\nâ”‚   â”œâ”€â”€ bin/nights-watch             # Command wrapper\nâ”‚   â”œâ”€â”€ start.md                     # Start command documentation\nâ”‚   â”œâ”€â”€ stop.md                      # Stop command documentation\nâ”‚   â”œâ”€â”€ status.md                    # Status command documentation\nâ”‚   â”œâ”€â”€ logs.md                      # Logs command documentation\nâ”‚   â”œâ”€â”€ task.md                      # Task command documentation\nâ”‚   â”œâ”€â”€ setup.md                     # Setup command documentation\nâ”‚   â””â”€â”€ restart.md                   # Restart command documentation\nâ”œâ”€â”€ agents/                           # AI agents (NEW!)\nâ”‚   â””â”€â”€ task-executor.md             # Autonomous task planning agent\nâ”œâ”€â”€ hooks/                            # Event handlers (NEW!)\nâ”‚   â”œâ”€â”€ hooks.json                   # Hook configuration\nâ”‚   â””â”€â”€ scripts/                     # Hook implementation scripts\nâ”‚       â”œâ”€â”€ check-daemon-status.sh   # Session start hook\nâ”‚       â”œâ”€â”€ session-end-prompt.sh    # Session end hook\nâ”‚       â””â”€â”€ log-file-changes.sh      # File modification hook\nâ”œâ”€â”€ mcp-server/                       # Model Context Protocol (NEW!)\nâ”‚   â””â”€â”€ nights-watch-server.sh       # MCP server implementation\nâ”œâ”€â”€ .mcp.json                        # MCP server configuration (NEW!)\nâ””â”€â”€ [original files continue below...]\n```\n\n### âš¡ Original Daemon Structure (Legacy)\n\nThe original standalone daemon structure:\n\n```\nclaude-nights-watch/\nâ”œâ”€â”€ claude-nights-watch-daemon.sh      # Core daemon process\nâ”œâ”€â”€ claude-nights-watch-manager.sh     # Daemon management interface\nâ”œâ”€â”€ setup-nights-watch.sh              # Interactive setup script\nâ”œâ”€â”€ view-logs.sh                       # Interactive log viewer\nâ”œâ”€â”€ README.md                          # This file\nâ”œâ”€â”€ LICENSE                            # MIT License\nâ”œâ”€â”€ CONTRIBUTING.md                    # Contribution guidelines\nâ”œâ”€â”€ CHANGELOG.md                       # Version history\nâ”œâ”€â”€ SUMMARY.md                         # Project summary\nâ”œâ”€â”€ .gitignore                         # Git ignore file\nâ”œâ”€â”€ .github/                           # GitHub templates\nâ”‚   â”œâ”€â”€ ISSUE_TEMPLATE/\nâ”‚   â”‚   â”œâ”€â”€ bug_report.md\nâ”‚   â”‚   â””â”€â”€ feature_request.md\nâ”‚   â””â”€â”€ pull_request_template.md\nâ”œâ”€â”€ logs/                              # All logs stored here (created on first run)\nâ”œâ”€â”€ examples/                          # Example files\nâ”‚   â”œâ”€â”€ task.example.md                # Example task file\nâ”‚   â””â”€â”€ rules.example.md               # Example rules file\nâ””â”€â”€ test/                              # Test scripts and files\n    â”œâ”€â”€ README.md                      # Testing documentation\n    â”œâ”€â”€ test-immediate-execution.sh    # Direct task execution test\n    â”œâ”€â”€ test-simple.sh                 # Simple functionality test\n    â”œâ”€â”€ test-task-simple.md            # Simple test task\n    â”œâ”€â”€ test-rules-simple.md           # Simple test rules\n    â”œâ”€â”€ test-plugin-comprehensive.sh   # Plugin functionality tests (NEW!)\n    â””â”€â”€ test-functional-realworld.sh   # Real-world testing suite (NEW!)\n```\n\n## ğŸ“Š Logging\n\nAll logs are stored in the `logs/` directory within the project. Each log contains:\n\n- **Timestamps**: Every action is timestamped\n- **Full Prompts**: Complete prompt sent to Claude (rules + task)\n- **Full Responses**: Everything Claude outputs\n- **Status Messages**: Success/failure indicators\n\n### Viewing Logs\n\nUse the interactive log viewer:\n```bash\n./view-logs.sh\n```\n\nFeatures:\n- Browse all log files\n- View full logs or last 50 lines\n- Filter to see only prompts sent to Claude\n- Filter to see only Claude's responses\n- Search for errors\n- Follow logs in real-time\n\n## ğŸ§ª Testing\n\n### Plugin Testing (NEW!)\n\nComprehensive test suites for the Claude Code plugin:\n\n```bash\ncd test\n\n# Run comprehensive plugin structure tests\n./test-plugin-comprehensive.sh\n\n# Run functional and real-world testing\n./test-functional-realworld.sh\n\n# Run immediate execution test (no waiting)\n./test-immediate-execution.sh\n\n# Run simple functionality test\n./test-simple.sh\n```\n\n### Original Daemon Testing (Legacy)\n\n```bash\ncd test\n./test-simple.sh  # Run a simple test\n```\n\nSee `test/README.md` for detailed testing instructions.\n\n**New Testing Features:**\n- **Plugin Structure Validation**: Tests all plugin components\n- **Functional Testing**: Validates script execution and integration\n- **Real-World Simulation**: Tests complete user workflows\n- **Environment Testing**: Validates plugin environment variables\n- **Error Handling**: Tests graceful failure scenarios\n\n## ğŸ› Troubleshooting\n\n### Plugin Issues (NEW!)\n\n**Plugin not loading:**\n```bash\n# Check plugin installation\nclaude plugins list | grep claude-nights-watch\n\n# Reinstall if needed\nclaude plugins remove claude-nights-watch\nclaude plugins add https://github.com/aniketkarne/ClaudeNightsWatch\n\n# Debug mode\nclaude --debug\n```\n\n**Commands not working:**\n```bash\n# Verify command scripts are executable\nls -la ~/.claude/plugins/claude-nights-watch/commands/bin/\n\n# Make executable if needed\nchmod +x ~/.claude/plugins/claude-nights-watch/commands/bin/nights-watch\n```\n\n**Agent not responding:**\n- Ensure plugin is properly installed\n- Check that agent file exists in `agents/task-executor.md`\n- Verify MCP server is running\n\n### Original Daemon Issues (Legacy)\n\n**Daemon won't start:**\n- Check if Claude CLI is installed: `which claude`\n- Verify task.md exists in the working directory\n- Check logs: `./claude-nights-watch-manager.sh logs`\n\n**Tasks not executing:**\n- Verify you have remaining Claude usage: `ccusage blocks`\n- Check if past scheduled start time\n- Ensure task.md is not empty\n- Review logs for errors\n\n**Timing issues:**\n- Install ccusage for better accuracy: `npm install -g ccusage`\n- Check system time is correct\n- Verify `.claude-last-activity` timestamp\n\n### Common Issues (Both Methods)\n\n**Permission errors:**\n```bash\n# Ensure all scripts are executable\nchmod +x *.sh\nchmod +x commands/bin/nights-watch\nchmod +x hooks/scripts/*.sh\nchmod +x mcp-server/*.sh\n```\n\n**Missing dependencies:**\n- Install Claude CLI: https://docs.anthropic.com/claude-code\n- Install ccusage: `npm install -g ccusage` (recommended)\n- Verify bash is available: `which bash`\n\n**Configuration issues:**\n- Check task.md exists and has content\n- Verify rules.md exists (recommended)\n- Ensure proper file permissions\n- Check environment variables\n\n## ğŸ¤ Contributing\n\nContributions are welcome! Please follow these steps:\n\n1. **Fork the repository** on GitHub\n2. **Clone your fork** locally\n3. **Create a feature branch** (`git checkout -b feature/amazing-feature`)\n4. **Make your changes** following our guidelines\n5. **Test thoroughly** using the test suite\n6. **Commit your changes** (`git commit -m 'Add amazing feature'`)\n7. **Push to your fork** (`git push origin feature/amazing-feature`)\n8. **Create a Pull Request** on GitHub\n\nPlease ensure:\n- Code follows existing style\n- Safety is prioritized  \n- Documentation is updated\n- Examples are provided\n- Tests pass\n\nSee [CONTRIBUTING.md](CONTRIBUTING.md) for detailed guidelines.\n\n## ğŸ“„ License\n\nThis project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details.\n\n## ğŸ™ Acknowledgments\n\n- **Created by**: [Aniket Karne](https://github.com/aniketkarne)\n- **Built on top of**: The excellent [CCAutoRenew](https://github.com/aniketkarne/CCAutoRenew) project\n- **Plugin Development**: Complete Claude Code plugin implementation with slash commands, AI agents, MCP server, and smart hooks\n- **Enhanced Features**: Task Executor agent, comprehensive testing suites, and dual installation methods\n- **Thanks to**: The Claude CLI team for the amazing tool and plugin system\n\n---\n\n---\n\n## ğŸ”„ Migration Guide\n\n### From Daemon to Plugin\n\nIf you're currently using the standalone daemon and want to migrate to the plugin:\n\n1. **Install the plugin**:\n   ```bash\n   claude plugins add https://github.com/aniketkarne/ClaudeNightsWatch\n   ```\n\n2. **Copy your existing files**:\n   ```bash\n   # Copy your task.md and rules.md to the new location\n   cp task.md rules.md ~/.claude/plugins/claude-nights-watch/\n   ```\n\n3. **Update your workflow**:\n   - Replace `./claude-nights-watch-manager.sh start` with `/nights-watch start`\n   - Replace `./claude-nights-watch-manager.sh logs` with `/nights-watch logs`\n   - Use `/nights-watch setup` for configuration\n\n4. **Benefits you'll gain**:\n   - ğŸ¤– **AI Agent Integration**: Get help from the Task Executor agent\n   - ğŸ¯ **Better Commands**: More intuitive slash command interface\n   - ğŸ”— **MCP Integration**: Programmatic control for Claude\n   - ğŸ£ **Smart Hooks**: Automatic session integration\n\n### From Plugin to Daemon\n\nIf you prefer the standalone approach:\n\n1. **Install as daemon**:\n   ```bash\n   git clone https://github.com/aniketkarne/ClaudeNightsWatch.git\n   cd ClaudeNightsWatch\n   chmod +x *.sh\n   ```\n\n2. **Copy your plugin files**:\n   ```bash\n   # Copy from plugin location to daemon location\n   cp ~/.claude/plugins/claude-nights-watch/task.md .\n   cp ~/.claude/plugins/claude-nights-watch/rules.md .\n   ```\n\n3. **Use daemon commands**:\n   ```bash\n   ./claude-nights-watch-manager.sh start\n   ```\n\n**Note**: The plugin method is recommended for new users due to better integration and enhanced features.\n\n---\n\n**Remember**: With great automation comes great responsibility. Always review your tasks and rules carefully before enabling autonomous execution! ğŸš¨\n",
        "agents/task-executor.md": "---\ndescription: Specialized agent for autonomous task execution planning, monitoring, and daemon management\ncapabilities:\n  - autonomous-task-planning\n  - daemon-management\n  - task-monitoring\n  - safety-rule-creation\n  - workflow-automation\n  - schedule-optimization\n---\n\n# Task Executor Agent\n\nAn autonomous agent specialized in planning, setting up, and managing long-running task execution workflows with Claude Nights Watch daemon.\n\n## Core Expertise\n\nI am an expert in:\n- **Autonomous Task Planning**: Breaking down complex workflows into autonomous executable tasks\n- **Daemon Management**: Starting, stopping, monitoring, and troubleshooting the Nights Watch daemon\n- **Safety Engineering**: Creating comprehensive safety rules to prevent destructive actions\n- **Schedule Optimization**: Determining optimal timing for automated task execution\n- **Log Analysis**: Interpreting execution logs and identifying issues\n- **Workflow Design**: Designing multi-step autonomous workflows\n\n## When Claude Should Invoke Me\n\nInvoke this agent when users need help with:\n\n### Task Planning\n- \"I want to automate my daily development workflow\"\n- \"How do I set up autonomous code reviews?\"\n- \"Create a task that runs tests and generates reports\"\n- \"What tasks can I safely automate?\"\n\n### Daemon Operations\n- \"Start monitoring my usage windows\"\n- \"Check if my daemon is running\"\n- \"Why isn't my task executing?\"\n- \"How do I schedule tasks for specific times?\"\n\n### Safety and Rules\n- \"What safety rules should I use?\"\n- \"Is it safe to automate database operations?\"\n- \"Create rules that prevent file deletion\"\n- \"Review my rules for security issues\"\n\n### Troubleshooting\n- \"My daemon stopped working\"\n- \"Why did my task fail?\"\n- \"Interpret these logs\"\n- \"Debug autonomous execution issues\"\n\n## Capabilities in Detail\n\n### 1. Autonomous Task Design\nI help users create effective `task.md` files that:\n- Are clear and unambiguous\n- Include proper error handling\n- Have well-defined success criteria\n- Respect safety boundaries\n- Are appropriate for autonomous execution\n\n**Example Workflow:**\n```markdown\n# Daily Code Quality Check\n\n## Objectives:\n1. Run linting on modified files\n2. Fix auto-fixable issues\n3. Generate quality report\n\n## Safety Constraints:\n- Only modify files in src/ directory\n- Never delete files\n- Create backup branch first\n\n## Success Criteria:\n- All linting errors below threshold\n- Report generated in reports/\n- Changes committed to feature branch\n```\n\n### 2. Safety Rule Engineering\nI create comprehensive `rules.md` files with:\n- **Critical Rules**: Absolute prohibitions (e.g., no rm -rf)\n- **Best Practices**: Recommended approaches\n- **Allowed Actions**: Explicitly permitted operations\n- **Forbidden Actions**: Explicitly prohibited operations\n- **Resource Limits**: Maximum file sizes, execution times, etc.\n\n**Safety Layers:**\n- File system protection\n- Git safety (no force push, no history rewriting)\n- Network security (no unauthorized access)\n- Resource management (prevent infinite loops)\n- Data protection (no sensitive information exposure)\n\n### 3. Daemon Management\nI can:\n- Start/stop/restart the daemon\n- Configure scheduled start times\n- Monitor daemon health\n- Interpret status information\n- Troubleshoot common issues\n- Optimize monitoring intervals\n\n### 4. Log Analysis and Debugging\nI analyze logs to:\n- Identify why tasks failed\n- Track execution history\n- Find performance bottlenecks\n- Detect safety violations\n- Suggest improvements\n\n### 5. Schedule Optimization\nI help determine:\n- Best times to start daemon\n- Optimal execution windows\n- How to coordinate with team workflows\n- Timezone considerations\n\n## Integration with Nights Watch\n\n### Available Commands\nI can use these slash commands:\n- `/nights-watch start [--at TIME]` - Start daemon\n- `/nights-watch stop` - Stop daemon\n- `/nights-watch status` - Check status\n- `/nights-watch logs [-f]` - View logs\n- `/nights-watch task` - View current task\n- `/nights-watch setup` - Interactive setup\n- `/nights-watch restart` - Restart daemon\n\n### File Operations\nI work with:\n- `task.md` - Task definitions\n- `rules.md` - Safety constraints\n- `logs/claude-nights-watch-daemon.log` - Execution logs\n\n### Environment Understanding\nI understand:\n- Claude CLI usage windows (5-hour blocks)\n- `ccusage` tool for accurate timing\n- `--dangerously-skip-permissions` implications\n- Daemon process management\n- Background execution patterns\n\n## Example Interactions\n\n### Example 1: First-Time Setup\n**User**: \"I want to automate my test suite to run before each usage window expires\"\n\n**My Response**:\n1. Create a `task.md` file with clear test execution steps\n2. Create safety rules preventing production modifications\n3. Run `/nights-watch setup` for interactive configuration\n4. Start daemon with `/nights-watch start`\n5. Monitor initial execution with `/nights-watch logs -f`\n\n### Example 2: Troubleshooting\n**User**: \"My daemon says it's running but tasks aren't executing\"\n\n**My Analysis**:\n1. Check status: `/nights-watch status`\n2. Review logs: `/nights-watch logs`\n3. Verify task.md exists and is valid\n4. Check if scheduled start time has been reached\n5. Ensure ccusage is working or last activity timestamp is set\n6. Suggest solutions based on findings\n\n### Example 3: Safety Review\n**User**: \"Review my task for safety issues\"\n\n**My Process**:\n1. Read task.md content\n2. Identify potentially dangerous operations\n3. Check if rules.md has appropriate safeguards\n4. Suggest additional safety constraints\n5. Recommend testing approach before autonomous execution\n\n## Best Practices I Promote\n\n### 1. Start Small\n- Begin with simple, read-only tasks\n- Test manually before autonomous execution\n- Gradually increase complexity\n\n### 2. Comprehensive Safety\n- Always create rules.md\n- Use explicit allow/deny lists\n- Set resource limits\n- Log everything\n\n### 3. Monitor Regularly\n- Check logs frequently initially\n- Watch for unexpected behavior\n- Verify success criteria are met\n\n### 4. Iterate and Improve\n- Refine tasks based on execution results\n- Update rules as needed\n- Optimize timing and scheduling\n\n### 5. Test in Isolation\n- Use separate test environments\n- Don't start with production systems\n- Verify rollback procedures\n\n## Risk Assessment\n\nI evaluate tasks based on:\n- **Impact**: What could go wrong?\n- **Reversibility**: Can actions be undone?\n- **Scope**: What systems are affected?\n- **Permissions**: What access is needed?\n- **Dependencies**: What external factors exist?\n\n## Common Patterns I Recognize\n\n### Safe Patterns\n- Read-only operations (analysis, reporting)\n- Idempotent operations (can run multiple times safely)\n- Well-bounded operations (limited scope)\n- Logged operations (full audit trail)\n\n### Risky Patterns\n- Deletion operations (rm, DROP, DELETE)\n- Production modifications\n- Network operations to external systems\n- Unbounded loops or recursion\n- Privilege escalation\n\n## How I Help Users Succeed\n\n1. **Planning Phase**: Design effective autonomous workflows\n2. **Safety Phase**: Create robust safety constraints\n3. **Setup Phase**: Configure daemon correctly\n4. **Launch Phase**: Start monitoring with appropriate timing\n5. **Monitor Phase**: Track execution and identify issues\n6. **Optimize Phase**: Improve based on results\n\n## Technical Knowledge\n\nI understand:\n- Shell scripting and daemon processes\n- Git workflows and safety\n- CI/CD patterns\n- Test automation\n- Log analysis\n- Process monitoring\n- Signal handling (SIGTERM, SIGKILL)\n- File system operations\n- Environment variables\n- Cron-like scheduling\n\n## Limitations and Boundaries\n\nI do NOT:\n- Execute tasks directly (I help set up the daemon to do so)\n- Override safety rules without user consent\n- Recommend risky operations without clear warnings\n- Guarantee perfect execution (testing is essential)\n- Replace human judgment for critical operations\n\n## Summary\n\nI'm your expert companion for autonomous task execution with Claude Nights Watch. I help you:\n- Design safe, effective autonomous workflows\n- Configure and manage the daemon\n- Troubleshoot issues\n- Optimize execution timing\n- Maintain safety and reliability\n\n**Invoke me whenever you need guidance on autonomous task execution, daemon management, or workflow automation.**\n\n",
        "claude-plugins-marketplace/README.md": "# Claude Nights Watch Marketplace\n\nOfficial marketplace for Claude Nights Watch and related productivity plugins for Claude Code.\n\n## ğŸš€ Installation\n\nAdd this marketplace to your Claude Code:\n\n```bash\nclaude plugins marketplace add https://github.com/aniketkarne/claude-plugins-marketplace\n```\n\n## ğŸ“¦ Available Plugins\n\n### Claude Nights Watch\n\n**Autonomous task execution daemon for Claude CLI**\n\nTransform Claude from an interactive assistant into an autonomous worker that executes tasks automatically every 5 hours.\n\n**Install:**\n```bash\nclaude plugins add claude-nights-watch\n```\n\n**Key Features:**\n- ğŸ¤– Autonomous task execution\n- â° Smart usage window monitoring  \n- ğŸ›¡ï¸ Comprehensive safety rules\n- ğŸ“Š Full audit logging\n- ğŸ® 7 slash commands\n- ğŸ¤– Specialized Task Executor agent\n- ğŸ”Œ MCP server integration\n- ğŸ“… Scheduled execution\n\n**Quick Start:**\n```bash\n# Install plugin\nclaude plugins add claude-nights-watch\n\n# Run setup\n/nights-watch setup\n\n# Start daemon\n/nights-watch start\n\n# Monitor\n/nights-watch logs -f\n```\n\n**Documentation:**\n- [Full Installation Guide](https://github.com/aniketkarne/ClaudeNightsWatch/blob/main/PLUGIN_INSTALLATION.md)\n- [Plugin README](https://github.com/aniketkarne/ClaudeNightsWatch/blob/main/PLUGIN_README.md)\n- [Main Documentation](https://github.com/aniketkarne/ClaudeNightsWatch/blob/main/README.md)\n\n**Use Cases:**\n- Daily development tasks (linting, testing, reporting)\n- Continuous code reviews\n- Automated documentation generation\n- Data processing pipelines\n- ETL workflows\n- CI/CD automation\n- Scheduled maintenance tasks\n\n**Safety:**\n- Comprehensive rules system\n- Full execution logging\n- Test suite included\n- Example templates provided\n- Progressive complexity approach\n\n[Learn More â†’](https://github.com/aniketkarne/ClaudeNightsWatch)\n\n---\n\n## ğŸ¤ Contributing\n\nWant to add your plugin to this marketplace?\n\n### Submission Guidelines\n\n1. **Plugin must:**\n   - Be in a public Git repository\n   - Include `.claude-plugin/plugin.json` manifest\n   - Follow Claude Code plugin specifications\n   - Be well-documented with examples\n   - Include safety documentation\n\n2. **Submit a Pull Request:**\n   - Fork this repository\n   - Add your plugin to `plugins.json`\n   - Follow the schema format\n   - Include comprehensive description\n   - Link to documentation\n\n3. **Review Process:**\n   - Code review for safety\n   - Functionality testing\n   - Documentation review\n   - Community feedback\n\n### Plugin Entry Template\n\n```json\n{\n  \"name\": \"your-plugin-name\",\n  \"repository\": \"https://github.com/you/your-plugin\",\n  \"description\": \"Brief one-line description\",\n  \"longDescription\": \"Detailed description with features and benefits\",\n  \"version\": \"1.0.0\",\n  \"author\": \"Your Name\",\n  \"homepage\": \"https://...\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"tag1\", \"tag2\"],\n  \"categories\": [\"category1\"],\n  \"features\": [\"feature 1\", \"feature 2\"],\n  \"documentation\": \"https://...\"\n}\n```\n\n## ğŸ“Š Plugin Statistics\n\n| Plugin | Version | Downloads | Rating |\n|--------|---------|-----------|--------|\n| claude-nights-watch | 1.0.0 | - | â­â­â­â­â­ |\n\n## ğŸ”„ Updates\n\nTo update your installed plugins:\n\n```bash\nclaude plugins update\n```\n\n## ğŸ“ Support\n\n### For Marketplace Issues\nOpen an issue on this repository: [GitHub Issues](https://github.com/aniketkarne/claude-plugins-marketplace/issues)\n\n### For Plugin-Specific Issues\nContact the plugin author or open an issue on their repository.\n\n### Community\n- Discord: [Claude Community](https://discord.gg/claude)\n- Discussions: [GitHub Discussions](https://github.com/aniketkarne/claude-plugins-marketplace/discussions)\n\n## ğŸ“„ License\n\nThis marketplace is MIT licensed. Individual plugins may have different licenses - check each plugin's repository.\n\n## ğŸ™ Acknowledgments\n\n- Claude Code team for the excellent plugin system\n- Plugin authors for their contributions\n- Community for feedback and support\n\n---\n\n**Enhance your Claude Code experience with powerful plugins! ğŸš€**\n\n",
        "commands/logs.md": "---\ndescription: View Claude Nights Watch execution logs with filtering and follow options\nusage: /nights-watch logs [OPTIONS]\nexamples:\n  - /nights-watch logs\n  - /nights-watch logs -f\n  - /nights-watch logs --follow\n---\n\n# View Nights Watch Logs\n\nDisplay execution logs from the Claude Nights Watch daemon, including all prompts sent to Claude, responses received, and status messages.\n\n## Usage\n\n```bash\n/nights-watch logs [OPTIONS]\n```\n\n## Options\n\n- `-f`, `--follow` - Follow log file in real-time (like `tail -f`)\n- No options - Show last 50 lines of logs\n\n## What's Logged\n\n### Daemon Activity\n- Start/stop events\n- Configuration loaded\n- Monitoring status updates\n- Error messages and warnings\n\n### Task Execution\n- **Full Prompts**: Complete prompt sent to Claude (rules + task)\n- **Full Responses**: Everything Claude outputs during execution\n- **Timestamps**: Precise timing of all events\n- **Exit Codes**: Success/failure status\n\n### Example Log Entry\n```\n[2025-10-11 14:30:00] === Claude Nights Watch Daemon Started ===\n[2025-10-11 14:30:00] PID: 12345\n[2025-10-11 14:30:00] Task directory: /path/to/project\n[2025-10-11 14:30:05] Task file found at /path/to/project/task.md\n[2025-10-11 14:30:05] Rules file found at /path/to/project/rules.md\n[2025-10-11 15:25:00] Time remaining: 2 minutes\n[2025-10-11 15:27:00] Reset imminent (2 minutes), preparing to execute task...\n[2025-10-11 15:28:00] Starting task execution from task.md...\n\n=== PROMPT SENT TO CLAUDE ===\nIMPORTANT RULES TO FOLLOW:\n[... rules content ...]\n---END OF RULES---\n\nTASK TO EXECUTE:\n[... task content ...]\n---END OF TASK---\n=== END OF PROMPT ===\n\n=== CLAUDE RESPONSE START ===\n[... Claude's complete response ...]\n=== CLAUDE RESPONSE END ===\n\n[2025-10-11 15:42:00] Task execution completed successfully\n```\n\n## Examples\n\n**View recent logs:**\n```bash\n/nights-watch logs\n```\n\n**Follow logs in real-time:**\n```bash\n/nights-watch logs -f\n```\n\n**Use interactive log viewer:**\n```bash\n# For more advanced viewing with filtering\n${CLAUDE_PLUGIN_ROOT}/view-logs.sh\n```\n\n## Implementation\n\n```bash\n${CLAUDE_PLUGIN_ROOT}/claude-nights-watch-manager.sh logs \"$@\"\n```\n\n## Interactive Log Viewer\n\nFor advanced log viewing with filtering options, use the interactive viewer:\n\n```bash\n${CLAUDE_PLUGIN_ROOT}/view-logs.sh\n```\n\nFeatures:\n- Browse all log files\n- View full logs or last 50 lines\n- Filter to see only prompts\n- Filter to see only responses\n- Search for errors\n- Real-time following\n\n## Log Location\n\nLogs are stored in:\n```\n${CLAUDE_PLUGIN_ROOT}/logs/claude-nights-watch-daemon.log\n```\n\n## See Also\n\n- `/nights-watch status` - Check daemon status\n- `/nights-watch task` - View current task\n\n",
        "commands/restart.md": "---\ndescription: Restart the Claude Nights Watch daemon to apply configuration changes\nusage: /nights-watch restart [--at TIME]\nexamples:\n  - /nights-watch restart\n  - /nights-watch restart --at \"09:00\"\n---\n\n# Restart Nights Watch Daemon\n\nRestart the Claude Nights Watch daemon by stopping the current instance and starting a new one. Useful after modifying task or rules files.\n\n## Usage\n\n```bash\n/nights-watch restart [OPTIONS]\n```\n\n## Options\n\n- `--at TIME` - Schedule daemon to start monitoring at a specific time after restart\n  - Format: `HH:MM` (today) or `YYYY-MM-DD HH:MM` (specific date/time)\n\n## What It Does\n\n1. Stops the currently running daemon gracefully\n2. Waits 2 seconds for clean shutdown\n3. Starts a new daemon instance\n4. Loads latest task.md and rules.md files\n5. Resumes monitoring with fresh configuration\n\n## When to Restart\n\nRestart the daemon when you:\n- Modified `task.md` and want to apply changes\n- Updated `rules.md` safety constraints\n- Changed environment variables\n- Troubleshooting daemon issues\n- Want to reschedule start time\n\n## Examples\n\n**Simple restart:**\n```bash\n/nights-watch restart\n```\n\n**Restart with new schedule:**\n```bash\n/nights-watch restart --at \"09:00\"\n```\n\n## Implementation\n\n```bash\n${CLAUDE_PLUGIN_ROOT}/claude-nights-watch-manager.sh restart \"$@\"\n```\n\n## Restart vs Stop/Start\n\n- **Restart**: Automated stop + start in one command\n- **Stop/Start**: Manual control over timing between operations\n\nBoth achieve the same result, restart is just more convenient.\n\n## See Also\n\n- `/nights-watch stop` - Stop daemon only\n- `/nights-watch start` - Start daemon only\n- `/nights-watch status` - Verify restart was successful\n\n",
        "commands/setup.md": "---\ndescription: Interactive setup wizard for Claude Nights Watch configuration\nusage: /nights-watch setup\nexamples:\n  - /nights-watch setup\n---\n\n# Nights Watch Setup Wizard\n\nLaunch the interactive setup wizard to configure Claude Nights Watch for the first time or modify existing configuration.\n\n## Usage\n\n```bash\n/nights-watch setup\n```\n\n## Setup Process\n\nThe wizard guides you through:\n\n### 1. Prerequisites Check\n- âœ“ Verify Claude CLI is installed\n- âœ“ Check for ccusage (for accurate timing)\n- âœ“ Confirm required permissions\n\n### 2. Task Configuration\n- Create or edit `task.md` file\n- Enter task instructions\n- Review and modify as needed\n\n### 3. Safety Rules Configuration\n- Create or edit `rules.md` file\n- Choose from default safety templates\n- Customize rules for your project\n\n### 4. Daemon Configuration\n- Choose to start daemon immediately or later\n- Optionally schedule a start time\n- Configure monitoring preferences\n\n### 5. Summary\n- Review all configuration\n- Display available commands\n- Optionally start daemon\n\n## Interactive Prompts\n\n```\n================================\nClaude Nights Watch Setup\n================================\n\nChecking prerequisites...\nâœ“ Claude CLI found\n! ccusage not found (will use time-based checking)\nTo install ccusage: npm install -g ccusage\n\n=== Task Configuration ===\ntask.md already exists\nDo you want to view/edit it? (y/n)\n\n=== Safety Rules Configuration ===\nDo you want to create safety rules? (recommended) (y/n)\n\n=== Daemon Configuration ===\nDo you want to start the daemon after setup? (y/n)\nDo you want to schedule a start time? (y/n)\nEnter start time (HH:MM for today, or YYYY-MM-DD HH:MM):\n\n=== Setup Complete ===\nâœ“ Task file: /path/to/task.md\nâœ“ Rules file: /path/to/rules.md\nâœ“ Manager: /path/to/claude-nights-watch-manager.sh\n\nAvailable commands:\n  /nights-watch start    - Start the daemon\n  /nights-watch stop     - Stop the daemon\n  /nights-watch status   - Check daemon status\n  /nights-watch logs     - View logs\n  /nights-watch task     - View current task\n\nStarting daemon...\n```\n\n## What Gets Created\n\n### Files Created\n- `task.md` - Your task instructions (if doesn't exist)\n- `rules.md` - Safety rules (optional, if requested)\n- `logs/` - Directory for daemon logs (on first start)\n\n### Files NOT Modified\n- Existing `task.md` - Only edited if you choose to\n- Existing `rules.md` - Only edited if you choose to\n- Any project files\n\n## First-Time Setup\n\nIf you're setting up for the first time:\n\n1. Run `/nights-watch setup`\n2. Create a simple test task:\n```markdown\n# Test Task\n1. Create a file called test-output.txt\n2. Write \"Hello from Claude Nights Watch\" to it\n3. Report success\n```\n3. Add basic safety rules (wizard provides template)\n4. Start daemon and monitor with `/nights-watch status`\n5. Check logs with `/nights-watch logs -f`\n\n## Implementation\n\n```bash\n${CLAUDE_PLUGIN_ROOT}/setup-nights-watch.sh\n```\n\n## Environment Variables\n\n- `CLAUDE_NIGHTS_WATCH_DIR` - Set custom task directory (default: current directory)\n- `EDITOR` - Preferred text editor (default: nano)\n\n## See Also\n\n- `/nights-watch start` - Start daemon after setup\n- `/nights-watch task` - View configured tasks\n- Example files: `${CLAUDE_PLUGIN_ROOT}/examples/`\n\n",
        "commands/start.md": "---\ndescription: Start the Claude Nights Watch daemon to begin autonomous task execution monitoring\nusage: /nights-watch start [--at TIME]\nexamples:\n  - /nights-watch start\n  - /nights-watch start --at \"09:00\"\n  - /nights-watch start --at \"2025-10-12 14:30\"\n---\n\n# Start Nights Watch Daemon\n\nStarts the Claude Nights Watch daemon to monitor your Claude usage windows and execute tasks from `task.md` automatically.\n\n## Usage\n\n```bash\n/nights-watch start [OPTIONS]\n```\n\n## Options\n\n- `--at TIME` - Schedule daemon to start monitoring at a specific time\n  - Format: `HH:MM` (today) or `YYYY-MM-DD HH:MM` (specific date/time)\n  - Daemon will wait until scheduled time before beginning task execution\n\n## What It Does\n\n1. Checks for required files (`task.md` in current directory)\n2. Starts background daemon process\n3. Begins monitoring Claude usage windows\n4. Executes tasks when approaching the 5-hour limit\n5. Logs all activity to `logs/claude-nights-watch-daemon.log`\n\n## Prerequisites\n\n- `task.md` file must exist in current directory (create one if not present)\n- `rules.md` file is recommended for safety constraints (optional)\n- Claude CLI must be installed and configured\n\n## Examples\n\n**Start immediately:**\n```bash\n/nights-watch start\n```\n\n**Start at 9 AM today:**\n```bash\n/nights-watch start --at \"09:00\"\n```\n\n**Start at specific date and time:**\n```bash\n/nights-watch start --at \"2025-10-12 14:30\"\n```\n\n## Implementation\n\n```bash\n${CLAUDE_PLUGIN_ROOT}/claude-nights-watch-manager.sh start \"$@\"\n```\n\n## Safety Notice\n\nâš ï¸ The daemon uses `--dangerously-skip-permissions` for autonomous execution. Always:\n- Test tasks manually first\n- Use comprehensive `rules.md` for safety constraints\n- Monitor logs regularly\n- Start with simple, non-destructive tasks\n\n## See Also\n\n- `/nights-watch stop` - Stop the daemon\n- `/nights-watch status` - Check daemon status\n- `/nights-watch task` - View/edit current task\n- `/nights-watch logs` - View execution logs\n\n",
        "commands/status.md": "---\ndescription: Check the status of Claude Nights Watch daemon and view current configuration\nusage: /nights-watch status\nexamples:\n  - /nights-watch status\n---\n\n# Nights Watch Status\n\nDisplays comprehensive status information about the Claude Nights Watch daemon, including running state, configuration, and recent activity.\n\n## Usage\n\n```bash\n/nights-watch status\n```\n\n## Information Displayed\n\n### Daemon State\n- **Running/Stopped**: Current daemon status\n- **PID**: Process ID if running\n- **Activity Status**: \n  - âœ… ACTIVE - Currently monitoring and executing tasks\n  - â° WAITING - Waiting for scheduled start time\n\n### Configuration\n- **Task File**: Location and line count of `task.md`\n- **Rules File**: Location and line count of `rules.md` (if present)\n- **Start Time**: Scheduled start time (if configured)\n- **Time Until Start**: Countdown if waiting for scheduled time\n\n### Execution Info\n- **Recent Activity**: Last 5 log entries\n- **Next Execution**: Estimated time until next task execution\n- **Time Since Last Activity**: Hours/minutes since last Claude usage\n\n## Status Indicators\n\n- `âœ… ACTIVE` - Daemon is running and monitoring\n- `â° WAITING` - Daemon is running but waiting for start time\n- `âŒ STOPPED` - Daemon is not running\n\n## Examples\n\n**Check daemon status:**\n```bash\n/nights-watch status\n```\n\n**Sample Output:**\n```\n[INFO] Daemon is running with PID 12345\n[INFO] Status: âœ… ACTIVE - Task execution monitoring enabled\n\n[TASK] Task file: /path/to/task.md (42 lines)\n[TASK] Rules file: /path/to/rules.md (106 lines)\n\n[INFO] Recent activity:\n  [2025-10-11 14:30:00] Daemon started\n  [2025-10-11 14:30:05] Task file loaded\n  [2025-10-11 14:30:10] Monitoring began\n  [2025-10-11 14:35:00] Next check in 10 minutes\n  [2025-10-11 14:45:00] Time remaining: 234 minutes\n\n[INFO] Estimated time until next task execution: 3h 54m\n```\n\n## Implementation\n\n```bash\n${CLAUDE_PLUGIN_ROOT}/claude-nights-watch-manager.sh status\n```\n\n## See Also\n\n- `/nights-watch start` - Start the daemon\n- `/nights-watch logs` - View detailed logs\n- `/nights-watch task` - View current task configuration\n\n",
        "commands/stop.md": "---\ndescription: Stop the Claude Nights Watch daemon and halt autonomous task execution\nusage: /nights-watch stop\nexamples:\n  - /nights-watch stop\n---\n\n# Stop Nights Watch Daemon\n\nStops the running Claude Nights Watch daemon gracefully, halting all autonomous task execution monitoring.\n\n## Usage\n\n```bash\n/nights-watch stop\n```\n\n## What It Does\n\n1. Locates the running daemon process\n2. Sends graceful shutdown signal (SIGTERM)\n3. Waits up to 10 seconds for clean shutdown\n4. Force kills if necessary (SIGKILL)\n5. Cleans up PID file and resources\n\n## Behavior\n\n- **Graceful Shutdown**: Daemon completes current operations before stopping\n- **10-Second Timeout**: If not stopped gracefully, force kill is applied\n- **Safe**: Any running Claude task is allowed to complete\n- **Clean State**: All PID files and locks are removed\n\n## Examples\n\n```bash\n/nights-watch stop\n```\n\n## Implementation\n\n```bash\n${CLAUDE_PLUGIN_ROOT}/claude-nights-watch-manager.sh stop\n```\n\n## Exit Codes\n\n- `0` - Daemon stopped successfully\n- `1` - Daemon was not running or error occurred\n\n## See Also\n\n- `/nights-watch start` - Start the daemon\n- `/nights-watch restart` - Restart the daemon\n- `/nights-watch status` - Check if daemon is running\n\n",
        "hooks/hooks.json": "{\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"description\": \"Check Nights Watch daemon status on session start\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/check-daemon-status.sh\"\n          }\n        ]\n      }\n    ],\n    \"SessionEnd\": [\n      {\n        \"description\": \"Optionally prompt to start daemon on session end\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/session-end-prompt.sh\"\n          }\n        ]\n      }\n    ],\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Write|Edit\",\n        \"description\": \"Log significant file modifications for task tracking\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/log-file-changes.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n\n",
        "hooks/scripts/check-daemon-status.sh": "#!/bin/bash\n\n# Hook: Check daemon status on session start\n# Displays a helpful message if daemon is running or suggests starting it\n\nSCRIPT_DIR=\"$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\" && pwd)\"\nPLUGIN_ROOT=\"$(cd \"$SCRIPT_DIR/../..\" && pwd)\"\nPID_FILE=\"$PLUGIN_ROOT/logs/claude-nights-watch-daemon.pid\"\n\n# Only show status if PID file exists\nif [ -f \"$PID_FILE\" ]; then\n    PID=$(cat \"$PID_FILE\")\n    if kill -0 \"$PID\" 2>/dev/null; then\n        echo \"ğŸŒ™ Claude Nights Watch daemon is running (PID: $PID)\"\n        echo \"   Use /nights-watch status for details\"\n    else\n        echo \"âš ï¸  Nights Watch daemon PID file found but process not running\"\n        echo \"   Use /nights-watch start to restart\"\n    fi\nfi\n\n# Silent if daemon not configured (no PID file)\nexit 0\n\n",
        "hooks/scripts/log-file-changes.sh": "#!/bin/bash\n\n# Hook: Log file changes after Write/Edit operations\n# Tracks significant modifications for task execution audit trail\n\nSCRIPT_DIR=\"$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\" && pwd)\"\nPLUGIN_ROOT=\"$(cd \"$SCRIPT_DIR/../..\" && pwd)\"\nACTIVITY_LOG=\"$PLUGIN_ROOT/logs/nights-watch-activity.log\"\n\n# Ensure log directory exists\nmkdir -p \"$(dirname \"$ACTIVITY_LOG\")\"\n\n# Log the file operation with timestamp\n# This helps track what was modified during autonomous execution\necho \"[$(date '+%Y-%m-%d %H:%M:%S')] File operation: $CLAUDE_TOOL_USE\" >> \"$ACTIVITY_LOG\" 2>/dev/null\n\n# Silent operation - don't interrupt Claude's workflow\nexit 0\n\n",
        "hooks/scripts/session-end-prompt.sh": "#!/bin/bash\n\n# Hook: Session end prompt\n# Reminds users about daemon if task.md exists but daemon isn't running\n\nSCRIPT_DIR=\"$(cd \"$(dirname \"${BASH_SOURCE[0]}\")\" && pwd)\"\nPLUGIN_ROOT=\"$(cd \"$SCRIPT_DIR/../..\" && pwd)\"\nPID_FILE=\"$PLUGIN_ROOT/logs/claude-nights-watch-daemon.pid\"\nTASK_FILE=\"$(pwd)/task.md\"\n\n# Check if task.md exists in current directory\nif [ -f \"$TASK_FILE\" ]; then\n    # Check if daemon is running\n    DAEMON_RUNNING=false\n    if [ -f \"$PID_FILE\" ]; then\n        PID=$(cat \"$PID_FILE\")\n        if kill -0 \"$PID\" 2>/dev/null; then\n            DAEMON_RUNNING=true\n        fi\n    fi\n    \n    # If task exists but daemon not running, suggest starting it\n    if [ \"$DAEMON_RUNNING\" = false ]; then\n        echo \"\"\n        echo \"ğŸ’¡ You have a task.md file but Nights Watch daemon isn't running.\"\n        echo \"   Start autonomous execution: /nights-watch start\"\n    fi\nfi\n\nexit 0\n\n",
        "marketplace-example/README.md": "# Claude Nights Watch Marketplace\n\nOfficial marketplace for Claude Nights Watch and related productivity plugins for Claude Code.\n\n## ğŸš€ Installation\n\nAdd this marketplace to your Claude Code:\n\n```bash\nclaude plugins marketplace add https://github.com/aniketkarne/claude-plugins-marketplace\n```\n\n## ğŸ“¦ Available Plugins\n\n### Claude Nights Watch\n\n**Autonomous task execution daemon for Claude CLI**\n\nTransform Claude from an interactive assistant into an autonomous worker that executes tasks automatically every 5 hours.\n\n**Install:**\n```bash\nclaude plugins add claude-nights-watch\n```\n\n**Key Features:**\n- ğŸ¤– Autonomous task execution\n- â° Smart usage window monitoring  \n- ğŸ›¡ï¸ Comprehensive safety rules\n- ğŸ“Š Full audit logging\n- ğŸ® 7 slash commands\n- ğŸ¤– Specialized Task Executor agent\n- ğŸ”Œ MCP server integration\n- ğŸ“… Scheduled execution\n\n**Quick Start:**\n```bash\n# Install plugin\nclaude plugins add claude-nights-watch\n\n# Run setup\n/nights-watch setup\n\n# Start daemon\n/nights-watch start\n\n# Monitor\n/nights-watch logs -f\n```\n\n**Documentation:**\n- [Full Installation Guide](https://github.com/aniketkarne/ClaudeNightsWatch/blob/main/PLUGIN_INSTALLATION.md)\n- [Plugin README](https://github.com/aniketkarne/ClaudeNightsWatch/blob/main/PLUGIN_README.md)\n- [Main Documentation](https://github.com/aniketkarne/ClaudeNightsWatch/blob/main/README.md)\n\n**Use Cases:**\n- Daily development tasks (linting, testing, reporting)\n- Continuous code reviews\n- Automated documentation generation\n- Data processing pipelines\n- ETL workflows\n- CI/CD automation\n- Scheduled maintenance tasks\n\n**Safety:**\n- Comprehensive rules system\n- Full execution logging\n- Test suite included\n- Example templates provided\n- Progressive complexity approach\n\n[Learn More â†’](https://github.com/aniketkarne/ClaudeNightsWatch)\n\n---\n\n## ğŸ¤ Contributing\n\nWant to add your plugin to this marketplace?\n\n### Submission Guidelines\n\n1. **Plugin must:**\n   - Be in a public Git repository\n   - Include `.claude-plugin/plugin.json` manifest\n   - Follow Claude Code plugin specifications\n   - Be well-documented with examples\n   - Include safety documentation\n\n2. **Submit a Pull Request:**\n   - Fork this repository\n   - Add your plugin to `plugins.json`\n   - Follow the schema format\n   - Include comprehensive description\n   - Link to documentation\n\n3. **Review Process:**\n   - Code review for safety\n   - Functionality testing\n   - Documentation review\n   - Community feedback\n\n### Plugin Entry Template\n\n```json\n{\n  \"name\": \"your-plugin-name\",\n  \"repository\": \"https://github.com/you/your-plugin\",\n  \"description\": \"Brief one-line description\",\n  \"longDescription\": \"Detailed description with features and benefits\",\n  \"version\": \"1.0.0\",\n  \"author\": \"Your Name\",\n  \"homepage\": \"https://...\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"tag1\", \"tag2\"],\n  \"categories\": [\"category1\"],\n  \"features\": [\"feature 1\", \"feature 2\"],\n  \"documentation\": \"https://...\"\n}\n```\n\n## ğŸ“Š Plugin Statistics\n\n| Plugin | Version | Downloads | Rating |\n|--------|---------|-----------|--------|\n| claude-nights-watch | 1.0.0 | - | â­â­â­â­â­ |\n\n## ğŸ”„ Updates\n\nTo update your installed plugins:\n\n```bash\nclaude plugins update\n```\n\n## ğŸ“ Support\n\n### For Marketplace Issues\nOpen an issue on this repository: [GitHub Issues](https://github.com/aniketkarne/claude-plugins-marketplace/issues)\n\n### For Plugin-Specific Issues\nContact the plugin author or open an issue on their repository.\n\n### Community\n- Discord: [Claude Community](https://discord.gg/claude)\n- Discussions: [GitHub Discussions](https://github.com/aniketkarne/claude-plugins-marketplace/discussions)\n\n## ğŸ“„ License\n\nThis marketplace is MIT licensed. Individual plugins may have different licenses - check each plugin's repository.\n\n## ğŸ™ Acknowledgments\n\n- Claude Code team for the excellent plugin system\n- Plugin authors for their contributions\n- Community for feedback and support\n\n---\n\n**Enhance your Claude Code experience with powerful plugins! ğŸš€**\n\n",
        "test/README.md": "# Testing Claude Nights Watch\n\nThis directory contains test scripts and sample files for testing Claude Nights Watch functionality.\n\n## Test Files\n\n### Scripts\n- `test-immediate-execution.sh` - Run a single task immediately without waiting for the 5-hour window\n- `test-simple.sh` - Quick test with a simple task to verify basic functionality\n\n### Sample Tasks\n- `test-task-simple.md` - Simple file creation task for basic testing\n- `test-rules-simple.md` - Minimal safety rules for the simple test\n\n## Running Tests\n\n### 1. Basic Functionality Test\n\nFrom the test directory:\n```bash\n./test-simple.sh\n```\n\nThis will:\n- Copy test task/rules to the main directory\n- Execute the task immediately\n- Clean up after completion\n- Show you where to find the logs\n\n### 2. Manual Test Execution\n\nTo test with your own task:\n```bash\ncd ..  # Go to main directory\ncp test/test-immediate-execution.sh .\n./test-immediate-execution.sh\n```\n\n### 3. Testing the Daemon\n\nTo test the full daemon workflow:\n```bash\ncd ..  # Go to main directory\n# Create your task.md and rules.md\n./claude-nights-watch-manager.sh start\n# Monitor with: ./claude-nights-watch-manager.sh status\n```\n\n## Test Safety\n\nThe test scripts include safety features:\n- Preview prompts before execution\n- Ask for confirmation\n- Log everything to `logs/` directory\n- Use restricted test rules to prevent unwanted actions\n\n## Troubleshooting Tests\n\nIf tests fail:\n1. Check logs in `../logs/claude-nights-watch-test.log`\n2. Verify Claude CLI is installed: `which claude`\n3. Ensure you have active Claude usage: `ccusage blocks`\n4. Check file permissions: all `.sh` files should be executable\n\n## Creating Your Own Tests\n\n1. Create a new task file: `my-test-task.md`\n2. Create corresponding rules: `my-test-rules.md`\n3. Copy and modify `test-simple.sh` to use your files\n4. Run and check logs for results"
      },
      "plugins": [
        {
          "name": "claude-nights-watch",
          "source": "./",
          "description": "Autonomous task execution daemon for Claude CLI",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add aniketkarne/ClaudeNightsWatch",
            "/plugin install claude-nights-watch@claude-nights-watch-marketplace"
          ]
        }
      ]
    }
  ]
}