{
  "author": {
    "id": "snowmead",
    "display_name": "Michael Assaf",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/94772640?u=e188c184b5fa2f5ef02d2d427a05e59bffd7ac50&v=4",
    "url": "https://github.com/snowmead",
    "bio": "the world is changing and we must change with it",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 3,
      "total_skills": 1,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "guardrails",
      "version": null,
      "description": "Plugin marketplace for code quality guardrails including pre-commit hooks, security scanning, and compliance checks",
      "owner_info": {
        "name": "snowmead"
      },
      "keywords": [],
      "repo_full_name": "snowmead/guardrail-agent-skills",
      "repo_url": "https://github.com/snowmead/guardrail-agent-skills",
      "repo_description": null,
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-28T16:31:13Z",
        "created_at": "2026-01-28T15:08:37Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 430
        },
        {
          "path": "claude-code",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude-code/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude-code/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 387
        },
        {
          "path": "claude-code/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude-code/commands/guardrail-setup.md",
          "type": "blob",
          "size": 461
        },
        {
          "path": "claude-code/commands/guardrail-update.md",
          "type": "blob",
          "size": 421
        },
        {
          "path": "claude-code/commands/guardrail.md",
          "type": "blob",
          "size": 428
        },
        {
          "path": "claude-code/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude-code/skills/guardrail-commit-hooks-skill",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude-code/skills/guardrail-commit-hooks-skill/SKILL.md",
          "type": "blob",
          "size": 16979
        },
        {
          "path": "claude-code/skills/guardrail-commit-hooks-skill/languages",
          "type": "tree",
          "size": null
        },
        {
          "path": "claude-code/skills/guardrail-commit-hooks-skill/languages/go.md",
          "type": "blob",
          "size": 4348
        },
        {
          "path": "claude-code/skills/guardrail-commit-hooks-skill/languages/index.md",
          "type": "blob",
          "size": 8672
        },
        {
          "path": "claude-code/skills/guardrail-commit-hooks-skill/languages/javascript.md",
          "type": "blob",
          "size": 5931
        },
        {
          "path": "claude-code/skills/guardrail-commit-hooks-skill/languages/python.md",
          "type": "blob",
          "size": 6592
        },
        {
          "path": "claude-code/skills/guardrail-commit-hooks-skill/languages/rust.md",
          "type": "blob",
          "size": 7851
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"guardrails\",\n  \"owner\": {\n    \"name\": \"snowmead\"\n  },\n  \"metadata\": {\n    \"description\": \"Plugin marketplace for code quality guardrails including pre-commit hooks, security scanning, and compliance checks\",\n    \"version\": \"1.0.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"commit-guardrails\",\n      \"description\": \"Pre-commit hooks and code quality enforcement using prek\",\n      \"source\": \"./claude-code\"\n    }\n  ]\n}\n",
        "claude-code/.claude-plugin/plugin.json": "{\n  \"name\": \"commit-guardrails\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Pre-commit hooks and code quality enforcement using prek\",\n  \"author\": {\n    \"name\": \"snowmead\"\n  },\n  \"repository\": \"https://github.com/snowmead/guardrails\",\n  \"license\": \"MIT\",\n  \"keywords\": [\n    \"pre-commit\",\n    \"hooks\",\n    \"prek\",\n    \"code-quality\",\n    \"guardrails\",\n    \"linting\",\n    \"formatting\"\n  ]\n}\n",
        "claude-code/commands/guardrail-setup.md": "---\nname: guardrail-setup\ndescription: Full setup wizard - install prek, create config, run hooks\nallowed-tools: [Skill, Task, Read, Grep, Glob, Bash, Write, WebSearch, WebFetch, AskUserQuestion]\n---\n\n# /guardrail:setup Command\n\nImmediately invoke the guardrail-commit-hooks-skill using the Skill tool:\n\n- skill: \"commit-guardrails:guardrail-commit-hooks-skill\"\n- args: \"setup $ARGUMENTS\"\n\nThe skill will guide through full prek installation and configuration.\n",
        "claude-code/commands/guardrail-update.md": "---\nname: guardrail-update\ndescription: Update existing prek hooks to latest versions\nallowed-tools: [Skill, Task, Read, Edit, Bash, WebSearch, WebFetch, AskUserQuestion]\n---\n\n# /guardrail:update Command\n\nImmediately invoke the guardrail-commit-hooks-skill using the Skill tool:\n\n- skill: \"commit-guardrails:guardrail-commit-hooks-skill\"\n- args: \"update $ARGUMENTS\"\n\nThe skill will update hooks to their latest versions.\n",
        "claude-code/commands/guardrail.md": "---\nname: guardrail\ndescription: Analyze project and recommend prek pre-commit hooks\nallowed-tools: [Skill, Task, Read, Grep, Glob, WebSearch, WebFetch, AskUserQuestion]\n---\n\n# /guardrail Command\n\nImmediately invoke the guardrail-commit-hooks-skill using the Skill tool:\n\n- skill: \"commit-guardrails:guardrail-commit-hooks-skill\"\n- args: \"analyze $ARGUMENTS\"\n\nThe skill will analyze the project and recommend appropriate hooks.\n",
        "claude-code/skills/guardrail-commit-hooks-skill/SKILL.md": "---\nname: guardrail-commit-hooks-skill\ndescription: |\n  Use this skill when users need help with git pre-commit hooks, code quality guardrails, or prek configuration.\n\n  **Trigger this skill when:**\n  - User mentions \"pre-commit\", \"commit hooks\", \"prek\", or \"guardrails\"\n  - Project has no .pre-commit-config.yaml and user is working on code\n  - User encounters formatting/linting issues that hooks could prevent\n  - User asks about code quality automation\n  - User creates a new project or initializes a git repository\n  - User has existing hooks (husky, pre-commit, lefthook) and asks about alternatives\nlicense: \"MIT. See LICENSE.txt for complete terms\"\n---\n\n# Guardrail Commit Hooks Skill\n\nThis skill helps you create and manage prek pre-commit hooks for code quality guardrails.\n\n## Command Dispatch\n\nThis skill handles three operations based on the `args` parameter:\n\n| Args Pattern | Operation | Description |\n|--------------|-----------|-------------|\n| `analyze ...` | Analyze | Analyze project and recommend hooks |\n| `setup ...` | Setup | Full installation wizard |\n| `update ...` | Update | Update hooks to latest versions |\n\nIf no args are provided, default to the **analyze** operation.\n\n---\n\n## What is prek?\n\nprek is a faster, dependency-free reimplementation of the pre-commit framework written in Rust. It's a drop-in replacement that works with existing `.pre-commit-config.yaml` files.\n\n**Key benefits:**\n\n- 4-10x faster than pre-commit\n- No Python runtime required (single binary)\n- 50% less disk usage\n- Compatible with existing pre-commit configurations\n\n## Always Fetch Current Documentation\n\n**IMPORTANT**: Do not use hardcoded version numbers. Always fetch the latest documentation to get current hook versions.\n\n### Documentation URLs to Fetch\n\nBefore creating or updating configurations, use WebFetch on these URLs:\n\n1. **Quickstart & Installation**: `https://prek.j178.dev/quickstart/`\n2. **Built-in Hooks Reference**: `https://prek.j178.dev/builtin/`\n3. **Configuration Format**: `https://prek.j178.dev/config/`\n4. **Workspace Mode (monorepos)**: `https://prek.j178.dev/workspace/`\n\n### For Latest Hook Versions\n\nFetch GitHub releases to get current versions:\n\n- **Ruff** (Python): `https://api.github.com/repos/astral-sh/ruff-pre-commit/releases/latest`\n- **Biome** (JS/TS): `https://api.github.com/repos/biomejs/pre-commit/releases/latest`\n\n## Installation Commands\n\n```bash\n# Install prek (recommended via uv)\nuv tool install prek\n\n# Alternative: via pip\npip install prek\n\n# Alternative: shell script\ncurl -LsSf https://astral.sh/prek/install.sh | sh\n```\n\n---\n\n## Operation: analyze - Analyze and Recommend Hooks\n\nAnalyze the current project and recommend appropriate prek pre-commit hooks.\n\n### Steps\n\n#### 1. Analyze Project Structure\n\nPerform project analysis to detect languages and existing hooks:\n\n##### Detect Languages\n\nSearch for language-specific configuration files:\n\n| Check | Language |\n|-------|----------|\n| `Glob: **/package.json` (exclude node_modules) | JavaScript/TypeScript |\n| `Glob: **/Cargo.toml` | Rust |\n| `Glob: **/pyproject.toml` or `**/setup.py` | Python |\n| `Glob: **/go.mod` | Go |\n| `Glob: **/pom.xml` or `**/build.gradle` | Java/Kotlin |\n| `Glob: **/Gemfile` | Ruby |\n\n##### Check for Existing Hooks\n\n| Check | Tool |\n|-------|------|\n| `Glob: .pre-commit-config.yaml` | Already using pre-commit/prek |\n| `Glob: .husky/**` | Using husky |\n| `Glob: lefthook.yml` or `.lefthook.yml` | Using lefthook |\n\n##### Check Monorepo Structure\n\nIndicators of monorepo:\n- Multiple `package.json` files at different levels\n- `pnpm-workspace.yaml` or `lerna.json`\n- Multiple `Cargo.toml` with a root workspace\n- Directories like `packages/`, `apps/`, `services/`\n\n#### 2. Check for Existing Hook Tools\n\nIf existing hooks detected:\n\n- If `.pre-commit-config.yaml` exists: \"This project already has pre-commit hooks configured. Would you like to review them or update to latest versions?\"\n- If husky/lefthook detected: Ask if user wants to migrate to prek\n\n#### 3. Fetch Latest Documentation\n\nUse WebFetch to get current hook versions:\n\n```\nWebFetch: https://prek.j178.dev/builtin/\nPrompt: \"List all available built-in hook IDs\"\n\nWebFetch: https://api.github.com/repos/astral-sh/ruff-pre-commit/releases/latest\nPrompt: \"Extract the tag_name for the latest version\"\n```\n\n#### 4. Evaluate Base Hooks for Relevance\n\nBefore generating recommendations, evaluate each base hook for relevance to **this specific project**.\n\n##### Always Include (Universal Benefits)\n\nThese hooks provide value for any project:\n\n```yaml\nrepos:\n  - repo: builtin\n    hooks:\n      - id: trailing-whitespace\n      - id: end-of-file-fixer\n      - id: detect-private-key\n      - id: check-merge-conflict\n      - id: check-added-large-files\n        args: [--maxkb=500]\n```\n\n##### Include If Files Exist\n\nRun these checks and **only include the hook if matches are found**:\n\n| Hook | Check | Include If |\n|------|-------|------------|\n| `check-yaml` | `Glob: **/*.{yml,yaml}` (exclude .git) | YAML files found |\n| `check-json` | `Glob: **/*.json` (exclude node_modules, .git) | JSON files found |\n| `check-toml` | `Glob: **/*.toml` | TOML files found |\n\nExample evaluation:\n```\nGlob: **/*.yml â†’ 3 files found â†’ include check-yaml\nGlob: **/*.json â†’ 0 files found (excluding node_modules) â†’ skip check-json\nGlob: **/*.toml â†’ 1 file found â†’ include check-toml\n```\n\n##### Ask User About Workflow\n\nThe `no-commit-to-branch` hook assumes a feature-branch workflow. **Ask the user before including:**\n\n```\nDo you want to prevent direct commits to main/master branches?\nThis is useful if your team uses feature branches and pull requests.\n```\n\nOnly include if user confirms:\n```yaml\n      - id: no-commit-to-branch\n        args: [--branch, main, --branch, master]\n```\n\n##### Security Hooks (Always Recommend)\n\nAlways recommend gitleaks for comprehensive secret detection:\n\n```yaml\n  - repo: https://github.com/gitleaks/gitleaks\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: gitleaks\n```\n\n#### 5. Generate Recommendations\n\nBased on detected languages and the base hook evaluation above, build a recommended configuration.\n\n**Add language-specific hooks based on detection.**\n\n#### 6. Present to User\n\nShow the complete recommended configuration with explanations:\n\n````\n## Recommended prek Configuration\n\nBased on my analysis, I recommend these pre-commit hooks for your {language} project:\n\n### Universal Hooks\n- `trailing-whitespace` - Removes trailing whitespace\n- `end-of-file-fixer` - Ensures files end with newline\n- `detect-private-key` - Prevents committing secrets\n- `check-merge-conflict` - Catches unresolved conflicts\n- `check-added-large-files` - Prevents bloating the repository\n\n### File Format Validators (based on files detected)\n- `check-yaml` - Validates YAML syntax (included because .yml files found)\n- `check-toml` - Validates TOML syntax (included because .toml files found)\n\n### Security\n- `gitleaks` - Comprehensive secret detection\n\n### {Language} Hooks\n- `{hook}` - {description}\n\n### Proposed Configuration\n\n```yaml\n{full config}\n````\n\nWould you like me to:\n\n1. Create this configuration and set up prek\n2. Modify the configuration first\n3. Skip for now\n\n````\n\nUse AskUserQuestion to get user's decision before proceeding.\n\nIf user approves, suggest running `/guardrail:setup` to complete the installation.\n\n---\n\n## Operation: setup - Full Installation Wizard\n\nComplete setup wizard for prek pre-commit hooks.\n\n### Steps\n\n#### 1. Check prek Installation\n\n```bash\nprek --version\n````\n\nIf not installed, ask user how they'd like to install:\n\n```json\n{\n  \"questions\": [\n    {\n      \"question\": \"prek is not installed. How would you like to install it?\",\n      \"header\": \"Install\",\n      \"multiSelect\": false,\n      \"options\": [\n        {\n          \"label\": \"uv tool install (Recommended)\",\n          \"description\": \"Fast, isolated installation via uv\"\n        },\n        { \"label\": \"pip install\", \"description\": \"Install via pip\" },\n        { \"label\": \"Shell script\", \"description\": \"curl installer script\" }\n      ]\n    }\n  ]\n}\n```\n\nThen run the appropriate install command:\n\n- uv: `uv tool install prek`\n- pip: `pip install prek`\n- shell: `curl -LsSf https://astral.sh/prek/install.sh | sh`\n\n#### 2. Analyze Project\n\nRun the project analysis (see **Operation: analyze** above) to detect:\n\n- Project languages\n- Existing hook configuration\n- Monorepo structure\n\n#### 3. Check for Existing Configuration\n\n```bash\nls -la .pre-commit-config.yaml 2>/dev/null\n```\n\nIf exists:\n\n- Ask if user wants to keep, update, or replace it\n- If keeping: skip to step 5\n- If updating: proceed to step 4\n\n#### 4. Create Configuration\n\n##### Fetch Latest Versions\n\nUse WebFetch to get current versions:\n\n```\nWebFetch: https://prek.j178.dev/builtin/\nPrompt: \"List all built-in hook IDs available\"\n\nWebFetch: https://api.github.com/repos/astral-sh/ruff-pre-commit/releases/latest\nPrompt: \"Get the latest release tag_name\"\n```\n\n##### Generate Config\n\nBuild `.pre-commit-config.yaml` using context-aware hook selection:\n\n**Step 1: Always include universal hooks**\n```yaml\nrepos:\n  - repo: builtin\n    hooks:\n      - id: trailing-whitespace\n      - id: end-of-file-fixer\n      - id: detect-private-key\n      - id: check-merge-conflict\n      - id: check-added-large-files\n        args: [--maxkb=500]\n```\n\n**Step 2: Check for file format validators**\n\nRun glob checks and only include hooks for file types that exist:\n\n| Hook | Check | Include If |\n|------|-------|------------|\n| `check-yaml` | `Glob: **/*.{yml,yaml}` (exclude .git) | YAML files found |\n| `check-json` | `Glob: **/*.json` (exclude node_modules, .git) | JSON files found |\n| `check-toml` | `Glob: **/*.toml` | TOML files found |\n\n**Step 3: Ask about branch protection**\n\nAsk user: \"Do you want to prevent direct commits to main/master branches?\"\n\nOnly include if user confirms:\n```yaml\n      - id: no-commit-to-branch\n        args: [--branch, main, --branch, master]\n```\n\n**Step 4: Add security hooks and language-specific hooks**\n\n```yaml\n  # Security - always recommend\n  - repo: https://github.com/gitleaks/gitleaks\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: gitleaks\n\n  # Language-specific hooks based on detection\n```\n\n##### Show to User\n\nPresent the configuration and ask for confirmation:\n\n```\n## Proposed Configuration\n\n{show yaml}\n\nThis will:\n- Check for trailing whitespace and fix line endings\n- Prevent committing private keys\n- Scan for secrets with gitleaks\n{if check-yaml included} - Validate YAML syntax\n{if check-json included} - Validate JSON syntax\n{if check-toml included} - Validate TOML syntax\n{if no-commit-to-branch included} - Block direct commits to main/master\n- {language-specific descriptions}\n\nCreate this configuration?\n```\n\n##### Write File\n\nAfter approval, use Write tool to create `.pre-commit-config.yaml`\n\n#### 5. Install Git Hooks\n\n```bash\nprek install\n```\n\nThis installs the hooks into `.git/hooks/pre-commit`\n\n#### 6. Run Initial Check\n\n```bash\nprek run --all-files\n```\n\nThis runs all hooks on every file to catch existing issues.\n\n#### 7. Handle Results\n\n**If all hooks pass:**\n\n```\nSetup complete! Pre-commit hooks are now active.\n\nOn every commit, prek will automatically:\n{list what each hook does}\n\nTo update hooks later: /guardrail:update\nTo skip hooks once: git commit --no-verify\n```\n\n**If hooks fail:**\n\n```\nSome hooks found issues in existing files:\n\n{show failures}\n\nThese need to be fixed before commits will succeed.\nWould you like me to help fix these issues?\n```\n\n#### 8. Offer Next Steps\n\n```\n## Next Steps\n\n1. **Fix any issues** found by the initial hook run\n2. **Commit the configuration**: `git add .pre-commit-config.yaml && git commit -m \"Add prek pre-commit hooks\"`\n3. **Share with team**: Other developers can run `prek install` after cloning\n\nYour code quality guardrails are now active!\n```\n\n---\n\n## Operation: update - Update Hook Versions\n\nUpdate existing prek pre-commit hooks to their latest versions.\n\n### Steps\n\n#### 1. Check for Existing Configuration\n\n```bash\nls -la .pre-commit-config.yaml 2>/dev/null\n```\n\nIf no configuration exists:\n\n```\nNo .pre-commit-config.yaml found. Run /guardrail:setup to create one first.\n```\n\n#### 2. Read Current Configuration\n\nUse Read tool to examine `.pre-commit-config.yaml`\n\nExtract:\n\n- Current repos and their versions\n- Which hooks are configured\n\n#### 3. Fetch Latest Versions\n\nFor each external repo in the config, fetch latest version:\n\n**Ruff:**\n\n```\nWebFetch: https://api.github.com/repos/astral-sh/ruff-pre-commit/releases/latest\nPrompt: \"Extract the tag_name\"\n```\n\n**Biome (JS/TS):**\n\n```\nWebFetch: https://api.github.com/repos/biomejs/pre-commit/releases/latest\nPrompt: \"Extract the tag_name\"\n```\n\n#### 4. Compare Versions\n\nShow user what will be updated:\n\n```\n## Hook Version Updates Available\n\n| Hook | Current | Latest | Status |\n|------|---------|--------|--------|\n| ruff-pre-commit | v0.8.0 | v0.8.6 | Update available |\n| mirrors-eslint | v9.15.0 | v9.17.0 | Update available |\n| builtin | - | - | Always current |\n\nWould you like to update these hooks?\n```\n\n#### 5. Ask for Confirmation\n\nUse AskUserQuestion:\n\n```json\n{\n  \"questions\": [\n    {\n      \"question\": \"How would you like to update the hooks?\",\n      \"header\": \"Update\",\n      \"multiSelect\": false,\n      \"options\": [\n        {\n          \"label\": \"Update all\",\n          \"description\": \"Update all hooks to latest versions\"\n        },\n        {\n          \"label\": \"Use prek autoupdate\",\n          \"description\": \"Let prek handle the updates automatically\"\n        },\n        {\n          \"label\": \"Select specific\",\n          \"description\": \"Choose which hooks to update\"\n        },\n        { \"label\": \"Cancel\", \"description\": \"Don't update anything\" }\n      ]\n    }\n  ]\n}\n```\n\n#### 6. Perform Updates\n\n**Option A: Manual updates via Edit tool**\n\nFor each hook to update, use Edit:\n\n```\nold_string: \"rev: v0.8.0\"\nnew_string: \"rev: v0.8.6\"\n```\n\n**Option B: Use prek autoupdate**\n\n```bash\nprek autoupdate\n```\n\n#### 7. Test Updated Hooks\n\n```bash\nprek run --all-files\n```\n\n#### 8. Show Results\n\n**If successful:**\n\n```\n## Updates Complete\n\nUpdated hooks:\n- ruff-pre-commit: v0.8.0 -> v0.8.6\n- mirrors-eslint: v9.15.0 -> v9.17.0\n\nAll hooks passed on existing files.\n\nDon't forget to commit the updated configuration:\ngit add .pre-commit-config.yaml && git commit -m \"Update pre-commit hooks\"\n```\n\n**If hooks fail after update:**\n\n```\n## Updates Applied, But Issues Found\n\nThe updated hooks found new issues in your code:\n\n{show failures}\n\nThis is expected - newer versions may have stricter rules.\nWould you like me to help fix these issues?\n```\n\n#### 9. Optional: Add New Hooks\n\nAfter updating, check if project has new languages that need hooks:\n\n```\nI also noticed you have {language} files that don't have hooks configured.\nWould you like to add {recommended hooks} for {language}?\n```\n\n---\n\n## Language-Specific Hook Recommendations\n\nLanguage-specific configurations are stored in the `languages/` directory for modularity and dynamic updates.\n\n### Discovery Process\n\n1. **Read the registry:** `languages/index.md` lists all supported languages\n2. **Detect project languages:** Match files against detection patterns\n3. **Load language configs:** Read `languages/{language}.md` for each detected language\n4. **Fetch latest versions:** Use documentation URLs in language files\n5. **Generate configuration:** Build `.pre-commit-config.yaml` dynamically\n\n### Adding New Language Support\n\nTo add support for a new language:\n\n1. Create `languages/{language}.md` with detection patterns and tool documentation URLs\n2. Add entry to `languages/index.md`\n3. The agent will automatically discover and use the new configuration\n\n---\n\n## Handling Existing Hook Tools\n\nIf project already uses another hook tool:\n\n1. **Detect** - Check for:\n   - `package.json` with husky config\n   - `.husky/` directory\n   - `lefthook.yml` or `.lefthook.yml`\n   - Existing `.pre-commit-config.yaml` (already using pre-commit)\n\n2. **Ask before migrating** - Use AskUserQuestion:\n   - \"I noticed this project uses {tool}. Would you like to migrate to prek?\"\n   - Explain benefits of prek vs current tool\n\n3. **For existing pre-commit configs** - prek is drop-in compatible:\n   - Just run `prek install -f` to switch from pre-commit to prek\n   - No configuration changes needed\n\n---\n\n## Error Handling\n\nIf hooks fail on commit:\n\n1. The commit is blocked (this is expected behavior)\n2. Read the error output to identify which hook failed\n3. Fix the issues (formatting, linting, etc.)\n4. Re-attempt the commit\n\nTo temporarily skip hooks (not recommended):\n\n```bash\ngit commit --no-verify -m \"message\"\n```\n\n---\n\n## Monorepo Support\n\nFor monorepos, prek supports workspace mode:\n\n- Create `.pre-commit-config.yaml` files in subdirectories\n- Use `orphan: true` to prevent parent config processing\n- Target specific projects with `prek run <project>/`\n\nFetch workspace documentation: `https://prek.j178.dev/workspace/`\n",
        "claude-code/skills/guardrail-commit-hooks-skill/languages/go.md": "---\nlanguage: go\ndetection_patterns: [\"go.mod\", \"*.go\"]\n---\n\n# Go Pre-commit Hooks\n\n## Detection\n\nThis language is detected by finding: `go.mod` or `*.go` files.\n\n## Primary Tools: Native Go Toolchain\n\nThe Go toolchain provides built-in formatting and analysis tools.\n\n- **Documentation:** https://golang.org/cmd/go/\n- **gofumpt Docs:** https://github.com/mvdan/gofumpt\n- **go vet Docs:** https://pkg.go.dev/cmd/vet\n- **prek Docs:** https://prek.j178.dev/builtin/\n\n## Key Hooks\n\n- `gofumpt` - Stricter Go formatter (superset of gofmt, gopls-integrated)\n- `go-vet` - Official Go static analyzer\n- `go-mod-tidy` - Clean up go.mod and go.sum\n\n## Configuration Example\n\n```yaml\nrepos:\n  - repo: builtin\n    hooks:\n      - id: go-vet\n      - id: go-mod-tidy\n\n  # gofumpt - stricter formatting than gofmt\n  - repo: https://github.com/mvdan/gofumpt\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: gofumpt\n        args: [-w]\n```\n\n## Recommended: golangci-lint\n\nComprehensive meta-linter that runs multiple linters in parallel. The standard for Go projects.\n\n- **Documentation:** https://golangci-lint.run/\n- **Repository:** https://github.com/golangci/golangci-lint\n- **Version API:** https://api.github.com/repos/golangci/golangci-lint/releases/latest\n- **Migration Guide (v1 to v2):** https://golangci-lint.run/docs/configuration/\n\n```yaml\nrepos:\n  - repo: https://github.com/golangci/golangci-lint\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: golangci-lint\n        args: [--fix]\n```\n\n**Note:** golangci-lint v2.x introduced breaking configuration changes. Run `golangci-lint migrate` to update existing `.golangci.yml` files.\n\n## Security: govulncheck\n\nOfficial Go vulnerability scanner maintained by the Go security team. Scans dependencies for known vulnerabilities.\n\n- **Documentation:** https://pkg.go.dev/golang.org/x/vuln/cmd/govulncheck\n- **Repository:** https://github.com/golang/vuln\n- **Install:** `go install golang.org/x/vuln/cmd/govulncheck@latest`\n\n```yaml\nrepos:\n  - repo: https://github.com/TekWizely/pre-commit-golang\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: go-vulncheck-mod\n```\n\n**Alternative local hook:**\n\n```yaml\nrepos:\n  - repo: local\n    hooks:\n      - id: govulncheck\n        name: govulncheck\n        entry: govulncheck ./...\n        language: system\n        pass_filenames: false\n        files: (\\.go$|go\\.mod$|go\\.sum$)\n```\n\n## Optional: staticcheck\n\nAdvanced static analysis tool, now the default linter in VS Code for Go.\n\n- **Documentation:** https://staticcheck.dev/\n- **Repository:** https://github.com/dominikh/go-tools\n- **Install:** `go install honnef.co/go/tools/cmd/staticcheck@latest`\n\n```yaml\nrepos:\n  - repo: local\n    hooks:\n      - id: staticcheck\n        name: staticcheck\n        entry: staticcheck ./...\n        language: system\n        pass_filenames: false\n        types: [go]\n```\n\n**Note:** If using golangci-lint, staticcheck is included by default - no need for a separate hook.\n\n## Complete Configuration Example\n\n```yaml\nrepos:\n  # Formatting\n  - repo: https://github.com/mvdan/gofumpt\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: gofumpt\n        args: [-w]\n\n  # Linting (includes staticcheck, go vet, and 50+ linters)\n  - repo: https://github.com/golangci/golangci-lint\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: golangci-lint\n        args: [--fix]\n\n  # Security scanning\n  - repo: https://github.com/TekWizely/pre-commit-golang\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: go-vulncheck-mod\n\n  # Module maintenance\n  - repo: builtin\n    hooks:\n      - id: go-mod-tidy\n```\n\n## Special Considerations\n\n- **gofumpt vs gofmt:** gofumpt is a strict superset of gofmt with additional formatting rules. It's backwards compatible and integrates with gopls.\n- **golangci-lint v2:** Major configuration changes from v1. Use `golangci-lint migrate` to update configs.\n- **govulncheck:** Should run on every commit that changes `.go`, `go.mod`, or `go.sum` files.\n- **Performance:** golangci-lint caches results - subsequent runs are much faster.\n- **Configuration:** Use `.golangci.yml` for golangci-lint customization. See [golden config example](https://gist.github.com/maratori/47a4d00457a92aa426dbd48a18776322).\n- **68% of Go teams** use automated static analysis at commit stage, reducing post-merge defect discovery.\n",
        "claude-code/skills/guardrail-commit-hooks-skill/languages/index.md": "---\nregistry: language-hooks\n---\n\n# Language Hook Registry\n\nThis directory contains language-specific hook configurations for prek pre-commit hooks.\n\n## Supported Languages\n\n| Language | File | Detection Patterns | Primary Tool |\n|----------|------|-------------------|--------------|\n| Python | python.md | `pyproject.toml`, `setup.py`, `requirements.txt` | ruff |\n| Rust | rust.md | `Cargo.toml` | cargo tools (built-in) |\n| JavaScript/TypeScript | javascript.md | `package.json`, `tsconfig.json` | biome |\n| Go | go.md | `go.mod` | golangci-lint, gofumpt |\n\n## Cross-Language Security Hooks\n\nThese hooks should be included in **every project** regardless of language.\n\n### Secret Detection: gitleaks\n\nIndustry-standard secret scanner. Detects API keys, passwords, tokens, and other secrets.\n\n- **Documentation:** https://gitleaks.io/\n- **Repository:** https://github.com/gitleaks/gitleaks\n- **Version API:** https://api.github.com/repos/gitleaks/gitleaks/releases/latest\n\n```yaml\nrepos:\n  - repo: https://github.com/gitleaks/gitleaks\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: gitleaks\n```\n\n### Alternative: detect-secrets (Yelp)\n\n> **âš ï¸ Maintenance Warning**: This project has reduced activity since 2024. Consider using gitleaks or trufflehog instead for actively maintained alternatives.\n\nLighter-weight secret detection with baseline support for managing false positives.\n\n- **Documentation:** https://github.com/Yelp/detect-secrets\n- **Repository:** https://github.com/Yelp/detect-secrets\n\n```yaml\nrepos:\n  - repo: https://github.com/Yelp/detect-secrets\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: detect-secrets\n        args: [--baseline, .secrets.baseline]\n```\n\n### Alternative: trufflehog\n\nDeep scanning for secrets including git history. More thorough but slower.\n\n- **Documentation:** https://trufflesecurity.com/trufflehog\n- **Repository:** https://github.com/trufflesecurity/trufflehog\n\n```yaml\nrepos:\n  - repo: local\n    hooks:\n      - id: trufflehog\n        name: trufflehog\n        entry: trufflehog git file://. --only-verified --fail\n        language: system\n        pass_filenames: false\n        stages: [manual]  # Slow - run manually\n```\n\n## File Format Validators\n\nEnsure configuration files are valid before committing.\n\n### JSON Validation\n\n```yaml\nrepos:\n  - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: check-json\n```\n\n### YAML Validation\n\n```yaml\nrepos:\n  - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: check-yaml\n        args: [--unsafe]  # Allow custom tags\n```\n\n### TOML Validation\n\n```yaml\nrepos:\n  - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: check-toml\n```\n\n## Commit Message Standards\n\n### commitlint (Conventional Commits)\n\nEnforces conventional commit message format for better changelogs and versioning.\n\n- **Documentation:** https://commitlint.js.org/\n- **Repository:** https://github.com/alessandrojcm/commitlint-pre-commit-hook\n\n```yaml\nrepos:\n  - repo: https://github.com/alessandrojcm/commitlint-pre-commit-hook\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: commitlint\n        stages: [commit-msg]\n        additional_dependencies: [\"@commitlint/config-conventional\"]\n```\n\n**Note:** Requires `commitlint.config.js`:\n\n```javascript\nmodule.exports = { extends: ['@commitlint/config-conventional'] };\n```\n\n## Large File Prevention\n\nPrevent accidentally committing large files that should be in Git LFS or excluded.\n\n```yaml\nrepos:\n  - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: check-added-large-files\n        args: [--maxkb=500]  # 500KB limit\n```\n\n## Essential Pre-commit Hooks\n\nStandard hooks to **evaluate for each project**. Not all hooks are relevant to every project.\n\n### Always Include (Universal Benefits)\n\nThese hooks provide value for any project:\n\n```yaml\nrepos:\n  - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: trailing-whitespace\n      - id: end-of-file-fixer\n      - id: check-merge-conflict\n      - id: check-added-large-files\n        args: [--maxkb=500]\n      - id: detect-private-key\n```\n\n### Include If Files Exist\n\nRun these checks and **only include the hook if matches are found**:\n\n| Hook | Detection Check | Skip If |\n|------|-----------------|---------|\n| `check-yaml` | `Glob: **/*.{yml,yaml}` (exclude .git) | No YAML files |\n| `check-json` | `Glob: **/*.json` (exclude node_modules, .git) | No JSON files |\n| `check-toml` | `Glob: **/*.toml` | No TOML files |\n\n```yaml\n      # Only include if YAML files detected\n      - id: check-yaml\n        args: [--unsafe]\n      # Only include if JSON files detected\n      - id: check-json\n      # Only include if TOML files detected\n      - id: check-toml\n```\n\n### Ask User About Workflow\n\nThe `no-commit-to-branch` hook assumes a feature-branch workflow (not all teams use this).\n\n**Ask the user before including:**\n> \"Do you want to prevent direct commits to main/master branches? This is useful if your team uses feature branches and pull requests.\"\n\n```yaml\n      # Only include if user confirms feature-branch workflow\n      - id: no-commit-to-branch\n        args: [--branch, main, --branch, master]\n```\n\n## Complete Cross-Language Configuration\n\nBuild this configuration **dynamically** based on project context:\n\n```yaml\nrepos:\n  # Universal hooks (always include)\n  - repo: https://github.com/pre-commit/pre-commit-hooks\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: trailing-whitespace\n      - id: end-of-file-fixer\n      - id: check-merge-conflict\n      - id: check-added-large-files\n        args: [--maxkb=500]\n      - id: detect-private-key\n      # --- Conditional hooks below ---\n      # Include check-yaml ONLY if Glob: **/*.{yml,yaml} finds files\n      - id: check-yaml\n        args: [--unsafe]\n      # Include check-json ONLY if Glob: **/*.json finds files (exclude node_modules)\n      - id: check-json\n      # Include check-toml ONLY if Glob: **/*.toml finds files\n      - id: check-toml\n      # Include no-commit-to-branch ONLY if user confirms feature-branch workflow\n      - id: no-commit-to-branch\n        args: [--branch, main, --branch, master]\n\n  # Secret detection (always recommend)\n  - repo: https://github.com/gitleaks/gitleaks\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: gitleaks\n\n  # Commit message standards (optional - ask user)\n  - repo: https://github.com/alessandrojcm/commitlint-pre-commit-hook\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: commitlint\n        stages: [commit-msg]\n        additional_dependencies: [\"@commitlint/config-conventional\"]\n```\n\n## Agent Workflow\n\nWhen analyzing a project for hook recommendations:\n\n1. **Read this index** to discover available languages and cross-language hooks\n2. **Evaluate base hooks for relevance:**\n   - Always include: `trailing-whitespace`, `end-of-file-fixer`, `detect-private-key`, `check-merge-conflict`, `check-added-large-files`\n   - Check for files before including: `check-yaml` (if .yml/.yaml exist), `check-json` (if .json exist), `check-toml` (if .toml exist)\n   - Ask user before including: `no-commit-to-branch` (feature-branch workflow)\n3. **Always recommend gitleaks** for comprehensive secret detection\n4. **Detect project languages** using the detection patterns in the table above\n5. **Read relevant language files** for each detected language\n6. **Fetch documentation URLs** from language files to get latest versions\n7. **Generate .pre-commit-config.yaml** dynamically with only relevant hooks\n\n## Adding New Language Support\n\nTo add support for a new language:\n\n1. Create `languages/{language}.md` following the template structure\n2. Add an entry to this index table\n3. Include documentation URLs for dynamic version fetching\n4. Test with a project using that language\n\n## Tool Philosophy\n\nAll recommended tools prioritize:\n\n1. **Security first:** Secret detection and vulnerability scanning in every config\n2. **Speed:** Rust-based tools where possible for maximum performance\n3. **Comprehensiveness:** Multiple layers of checks (format, lint, security, types)\n\n| Tool | Language | Speed | Notes |\n|------|----------|-------|-------|\n| ruff | Python | 10-100x faster | Replaces flake8, black, isort |\n| biome | JS/TS | 10-25x faster | Replaces ESLint + Prettier |\n| cargo tools | Rust | Native | Built into toolchain |\n| golangci-lint | Go | Fast | Meta-linter with caching |\n| gitleaks | All | Fast | Go-based secret scanner |\n",
        "claude-code/skills/guardrail-commit-hooks-skill/languages/javascript.md": "---\nlanguage: javascript\ndetection_patterns: [\"package.json\", \"tsconfig.json\", \"*.js\", \"*.ts\", \"*.jsx\", \"*.tsx\"]\n---\n\n# JavaScript/TypeScript Pre-commit Hooks\n\n## Detection\n\nThis language is detected by finding: `package.json`, `tsconfig.json`, or JS/TS files.\n\n## Primary Tool: Biome\n\nUltra-fast linter and formatter for JavaScript, TypeScript, JSON, CSS, and GraphQL - written in Rust.\n\n- **Purpose:** Linting and formatting (replaces ESLint + Prettier)\n- **Documentation:** https://biomejs.dev/\n- **Guides:** https://biomejs.dev/guides/getting-started/\n- **prek Docs:** https://prek.j178.dev/builtin/\n- **Repository:** https://github.com/biomejs/pre-commit\n- **Version API:** https://api.github.com/repos/biomejs/pre-commit/releases/latest\n\n## Key Hooks\n\n- `biome-check` - Combined linting and formatting check with auto-fix\n- `biome-lint` - Linting only\n- `biome-format` - Formatting only\n\n## Configuration Example\n\n```yaml\nrepos:\n  - repo: https://github.com/biomejs/pre-commit\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: biome-check\n        additional_dependencies: [\"@biomejs/biome@latest\"]\n        args: [--write, --diagnostic-level=error]\n```\n\n## Biome v2.0 Features (2025)\n\nBiome v2 introduced significant enhancements:\n\n- **Type-aware linting:** Leverages TypeScript's type information for smarter analysis\n- **Multi-file analysis:** Cross-file checks for imports, exports, and dependencies\n- **Plugin system:** Extend with custom rules\n- **HTML support:** Now stable for HTML files\n- **Improved monorepo support:** Better handling of workspace configurations\n\n```yaml\n# Biome v2.0 with type-aware linting\nrepos:\n  - repo: https://github.com/biomejs/pre-commit\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: biome-check\n        additional_dependencies: [\"@biomejs/biome@latest\"]\n        args: [--write, --diagnostic-level=error, --files-ignore-unknown=true]\n```\n\n## Alternative: Oxlint (Maximum Speed)\n\nOxlint is 50-100x faster than ESLint and 2x faster than Biome. Good for very large codebases.\n\n- **Documentation:** https://oxc.rs/docs/guide/usage/linter.html\n- **Repository:** https://github.com/oxc-project/oxc\n- **Version API:** https://api.github.com/repos/oxc-project/oxc/releases/latest\n\n```yaml\nrepos:\n  - repo: local\n    hooks:\n      - id: oxlint\n        name: oxlint\n        entry: npx oxlint\n        language: system\n        types_or: [javascript, jsx, ts, tsx]\n```\n\n## Alternative: ESLint v9 (Plugin Ecosystem)\n\nFor projects requiring specific ESLint plugins not yet available in Biome.\n\n- **Documentation:** https://eslint.org/\n- **Flat Config Migration:** https://eslint.org/docs/latest/use/configure/migration-guide\n- **Repository:** https://github.com/pre-commit/mirrors-eslint\n- **Version API:** https://api.github.com/repos/pre-commit/mirrors-eslint/releases/latest\n\n**Note:** ESLint v9 made flat config (`eslint.config.js`) the default. Migrate from `.eslintrc` using the migration guide.\n\n```yaml\nrepos:\n  - repo: https://github.com/pre-commit/mirrors-eslint\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: eslint\n        types_or: [javascript, jsx, ts, tsx]\n        args: [--fix]\n        additional_dependencies:\n          - eslint@latest\n          - typescript\n          - \"@typescript-eslint/parser\"\n          - \"@typescript-eslint/eslint-plugin\"\n```\n\n## Security: Dependency Scanning\n\nJavaScript projects should scan for vulnerable dependencies.\n\n### Option 1: Socket (Behavioral Malware Detection)\n\n- **Documentation:** https://socket.dev/\n- **Purpose:** Detects supply chain attacks, not just known CVEs\n\n### Option 2: npm audit Alternative\n\n```yaml\nrepos:\n  - repo: local\n    hooks:\n      - id: npm-audit\n        name: npm audit\n        entry: npm audit --audit-level=moderate\n        language: system\n        files: package-lock\\.json$\n        pass_filenames: false\n```\n\n### Option 3: OSV Scanner (Google)\n\n- **Documentation:** https://google.github.io/osv-scanner/\n- **Repository:** https://github.com/google/osv-scanner\n\n```yaml\nrepos:\n  - repo: local\n    hooks:\n      - id: osv-scanner\n        name: osv-scanner\n        entry: osv-scanner --lockfile=package-lock.json\n        language: system\n        files: package-lock\\.json$\n        pass_filenames: false\n```\n\n## Security: Secret Detection\n\nPrevent accidentally committing secrets. See index.md for cross-language secret detection hooks.\n\n## Complete Configuration Example\n\n```yaml\nrepos:\n  # Linting and formatting with Biome\n  - repo: https://github.com/biomejs/pre-commit\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: biome-check\n        additional_dependencies: [\"@biomejs/biome@latest\"]\n        args: [--write, --diagnostic-level=error]\n\n  # Dependency vulnerability scanning\n  - repo: local\n    hooks:\n      - id: npm-audit\n        name: npm audit\n        entry: npm audit --audit-level=moderate\n        language: system\n        files: package-lock\\.json$\n        pass_filenames: false\n```\n\n## Framework-Specific Considerations\n\n### React\n- Biome v2 includes React-specific domain rules\n- Configure in `biome.json` under `linter.rules.react`\n\n### Next.js\n- Use Biome for linting/formatting\n- Consider Next.js built-in eslint config for Next-specific rules if needed\n\n### TypeScript Strict Mode\n- Enable `strict: true` in `tsconfig.json`\n- Biome respects TypeScript configuration for type-aware rules\n\n## Special Considerations\n\n- **Biome vs ESLint:** Biome is 10-25x faster and handles both linting and formatting. Use ESLint only if you need plugins not available in Biome.\n- **Oxlint:** Use for maximum speed in very large codebases (50-100x faster than ESLint).\n- **Configuration:** `biome.json` or `biome.jsonc` for Biome settings.\n- **97% Prettier-compatible:** Biome formatting is nearly identical to Prettier.\n- **200+ lint rules:** Covers most ESLint rules plus additional checks.\n- **ESLint v9:** Requires flat config migration from `.eslintrc` to `eslint.config.js`.\n",
        "claude-code/skills/guardrail-commit-hooks-skill/languages/python.md": "---\nlanguage: python\ndetection_patterns: [\"pyproject.toml\", \"setup.py\", \"requirements.txt\", \"*.py\"]\n---\n\n# Python Pre-commit Hooks\n\n## Detection\n\nThis language is detected by finding: `pyproject.toml`, `setup.py`, `requirements.txt`, or `*.py` files.\n\n## Primary Tool: ruff\n\nUltra-fast Python linter and formatter written in Rust.\n\n- **Purpose:** Linting and formatting (replaces flake8, black, isort, pylint, and many others)\n- **Documentation:** https://docs.astral.sh/ruff/\n- **prek Docs:** https://prek.j178.dev/builtin/\n- **Repository:** https://github.com/astral-sh/ruff-pre-commit\n- **Version API:** https://api.github.com/repos/astral-sh/ruff-pre-commit/releases/latest\n\n## Key Hooks\n\n- `ruff` - Linting with auto-fix capability\n- `ruff-format` - Code formatting (black-compatible)\n\n## Configuration Example\n\n```yaml\nrepos:\n  - repo: https://github.com/astral-sh/ruff-pre-commit\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: ruff\n        args: [--fix, --exit-non-zero-on-fix, --unsafe-fixes, --show-fixes]\n      - id: ruff-format\n```\n\n## Security: pip-audit (Dependency Vulnerabilities)\n\nScans Python environments and requirements files for known security vulnerabilities.\n\n- **Documentation:** https://pypi.org/project/pip-audit/\n- **Repository:** https://github.com/pypa/pip-audit\n- **Version API:** https://api.github.com/repos/pypa/pip-audit/releases/latest\n- **Install:** `pip install pip-audit` or `uv pip install pip-audit`\n\n```yaml\nrepos:\n  - repo: https://github.com/pypa/pip-audit\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: pip-audit\n        args: [--desc, --require-hashes]\n```\n\n## Security: bandit (Code Security Analysis)\n\n> **ðŸ’¡ Tip**: Ruff includes Bandit-compatible security rules (S prefix) that run 10-100x faster. Use `ruff check --select S` for basic security checks. Use bandit for specialized analysis requiring its full rule set.\n\nIdentifies common security issues in Python code (SQL injection, hardcoded passwords, etc.).\n\n- **Documentation:** https://bandit.readthedocs.io/\n- **Repository:** https://github.com/PyCQA/bandit\n- **Version API:** https://api.github.com/repos/PyCQA/bandit/releases/latest\n- **Install:** `pip install bandit` or `uv pip install bandit`\n\n```yaml\nrepos:\n  - repo: https://github.com/PyCQA/bandit\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: bandit\n        args: [--recursive, --format, json, --exclude, tests]\n```\n\n## Type Checking: pyright/basedpyright\n\nAdvanced static type checker, faster than mypy with better IDE integration.\n\n- **pyright Documentation:** https://microsoft.github.io/pyright/\n- **basedpyright Documentation:** https://docs.basedpyright.com/\n- **Repository:** https://github.com/RobertCraigie/pyright-python\n- **Version API:** https://api.github.com/repos/RobertCraigie/pyright-python/releases/latest\n\n**Note:** basedpyright is a fork with better IDE compatibility and additional features.\n\n```yaml\nrepos:\n  - repo: https://github.com/RobertCraigie/pyright-python\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: pyright\n```\n\n**Alternative with basedpyright:**\n\n```yaml\nrepos:\n  - repo: local\n    hooks:\n      - id: basedpyright\n        name: basedpyright\n        entry: basedpyright\n        language: system\n        types: [python]\n        pass_filenames: false\n```\n\n## Dependency Management: deptry\n\nDetects unused, missing, and transitive dependencies in your project.\n\n- **Documentation:** https://deptry.com/\n- **Repository:** https://github.com/fpgmaas/deptry\n- **Version API:** https://api.github.com/repos/fpgmaas/deptry/releases/latest\n- **Install:** `pip install deptry` or `uv pip install deptry`\n\n```yaml\nrepos:\n  - repo: https://github.com/fpgmaas/deptry\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: deptry\n```\n\n## Modern Tooling: uv Integration\n\nuv is the modern, Rust-based Python package manager (10-100x faster than pip).\n\n- **Documentation:** https://docs.astral.sh/uv/\n- **Pre-commit Guide:** https://docs.astral.sh/uv/guides/integration/pre-commit/\n- **Repository:** https://github.com/astral-sh/uv-pre-commit\n- **Version API:** https://api.github.com/repos/astral-sh/uv-pre-commit/releases/latest\n\n```yaml\nrepos:\n  - repo: https://github.com/astral-sh/uv-pre-commit\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: uv-lock\n      - id: uv-export\n        args: [--frozen, --no-hashes, -o, requirements.txt]\n```\n\n## Complete Configuration Example\n\n```yaml\nrepos:\n  # Linting and formatting\n  - repo: https://github.com/astral-sh/ruff-pre-commit\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: ruff\n        args: [--fix, --exit-non-zero-on-fix, --unsafe-fixes, --show-fixes]\n      - id: ruff-format\n\n  # Security: dependency vulnerabilities\n  - repo: https://github.com/pypa/pip-audit\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: pip-audit\n\n  # Security: code analysis\n  - repo: https://github.com/PyCQA/bandit\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: bandit\n        args: [--recursive, --exclude, tests]\n\n  # Type checking\n  - repo: https://github.com/RobertCraigie/pyright-python\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: pyright\n\n  # Unused dependencies\n  - repo: https://github.com/fpgmaas/deptry\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: deptry\n```\n\n## Minimal Configuration (Quick Start)\n\nFor projects that want essential checks without full security scanning:\n\n```yaml\nrepos:\n  - repo: https://github.com/astral-sh/ruff-pre-commit\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: ruff\n        args: [--fix]\n      - id: ruff-format\n\n  - repo: https://github.com/PyCQA/bandit\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: bandit\n        args: [--recursive, --exclude, tests]\n```\n\n## Special Considerations\n\n- **ruff:** Handles both linting and formatting in one tool. 10-100x faster than traditional Python linters.\n- **Configuration:** Prefer `pyproject.toml` for all tool configuration (ruff, bandit, pyright, deptry).\n- **pip-audit:** Essential for production projects - catches known vulnerabilities in dependencies.\n- **bandit:** Catches common security anti-patterns like hardcoded passwords, SQL injection risks.\n- **pyright vs mypy:** pyright is faster and has better IDE integration. basedpyright adds extra features.\n- **deptry:** Reduces attack surface by identifying unused dependencies to remove.\n- **uv:** If your project uses uv for package management, use uv-pre-commit hooks for lock file validation.\n- **Replaces:** flake8, black, isort, pylint, pycodestyle, pydocstyle, pyupgrade, and more.\n",
        "claude-code/skills/guardrail-commit-hooks-skill/languages/rust.md": "---\nlanguage: rust\ndetection_patterns: [\"Cargo.toml\", \"*.rs\"]\n---\n\n# Rust Pre-commit Hooks\n\n## Detection\n\nThis language is detected by finding: `Cargo.toml` or `*.rs` files.\n\n## Primary Tools: Cargo Built-ins\n\nNative Rust toolchain provides all necessary tools. No external dependencies required.\n\n- **Documentation:** https://doc.rust-lang.org/cargo/\n- **Clippy Docs:** https://doc.rust-lang.org/clippy/\n- **Rustfmt Docs:** https://rust-lang.github.io/rustfmt/\n- **prek Docs:** https://prek.j178.dev/builtin/\n\n## Key Hooks\n\n- `cargo-check` - Fast compilation check without producing executable\n- `cargo-clippy` - Official Rust linter with extensive checks\n- `cargo-fmt` - Official Rust formatter\n\n## Configuration Example\n\n```yaml\nrepos:\n  - repo: builtin\n    hooks:\n      - id: cargo-check\n      - id: cargo-clippy\n        args: [--workspace, --all-targets, --all-features, --, -D, warnings]\n      - id: cargo-fmt\n        args: [--all, --check]\n```\n\n## Security: cargo-audit (Vulnerability Scanning)\n\nScans dependencies for known security vulnerabilities using the RustSec Advisory Database.\n\n- **Documentation:** https://rustsec.org/\n- **Repository:** https://github.com/rustsec/rustsec/tree/main/cargo-audit\n- **Advisory Database:** https://github.com/RustSec/advisory-db\n- **Install:** `cargo install cargo-audit`\n\n```yaml\nrepos:\n  - repo: local\n    hooks:\n      - id: cargo-audit\n        name: cargo-audit\n        entry: cargo audit\n        language: system\n        pass_filenames: false\n        files: Cargo\\.(toml|lock)$\n```\n\n## Security: cargo-deny (Comprehensive Dependency Auditing)\n\nMore comprehensive than cargo-audit - handles licenses, security vulnerabilities, bans, and dependency sources.\n\n- **Documentation:** https://embarkstudios.github.io/cargo-deny/\n- **Repository:** https://github.com/EmbarkStudios/cargo-deny\n- **Version API:** https://api.github.com/repos/EmbarkStudios/cargo-deny/releases/latest\n- **Install:** `cargo install cargo-deny`\n\n```yaml\nrepos:\n  - repo: https://github.com/EmbarkStudios/cargo-deny\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: cargo-deny\n        args: [--all-features, check]\n```\n\n**Note:** Requires a `deny.toml` configuration file. Generate with `cargo deny init`.\n\n**deny.toml example:**\n\n```toml\n[advisories]\ndb-path = \"~/.cargo/advisory-db\"\ndb-urls = [\"https://github.com/rustsec/advisory-db\"]\nvulnerability = \"deny\"\nunmaintained = \"warn\"\n\n[licenses]\nallow = [\"MIT\", \"Apache-2.0\", \"BSD-3-Clause\"]\ncopyleft = \"warn\"\n\n[bans]\nmultiple-versions = \"warn\"\nwildcards = \"deny\"\n```\n\n## Dependency Management: cargo-machete (Unused Dependencies)\n\nDetects unused dependencies in Cargo.toml to reduce bloat and attack surface.\n\n- **Documentation:** https://github.com/bnjbvr/cargo-machete\n- **Repository:** https://github.com/bnjbvr/cargo-machete\n- **Install:** `cargo install cargo-machete`\n\n```yaml\nrepos:\n  - repo: local\n    hooks:\n      - id: cargo-machete\n        name: cargo-machete\n        entry: cargo machete\n        language: system\n        pass_filenames: false\n        files: Cargo\\.(toml|lock)$\n```\n\n## API Compatibility: cargo-semver-checks\n\nLints for semantic versioning violations. Ensures public API changes match version bumps.\n\n- **Documentation:** https://crates.io/crates/cargo-semver-checks\n- **Repository:** https://github.com/obi1kenobi/cargo-semver-checks\n- **Install:** `cargo install cargo-semver-checks`\n\n**Note:** This tool has 120+ lints and is planned for integration into cargo itself.\n\n```yaml\nrepos:\n  - repo: local\n    hooks:\n      - id: cargo-semver-checks\n        name: cargo-semver-checks\n        entry: cargo semver-checks check-release\n        language: system\n        pass_filenames: false\n        files: Cargo\\.(toml|lock)$\n        stages: [manual]  # Run manually due to performance cost\n```\n\n## Optional: cargo-vet (Enterprise Audit Workflows)\n\nMozilla's shared security audit system for organizations to collaborate on dependency audits.\n\n- **Documentation:** https://mozilla.github.io/cargo-vet/\n- **Repository:** https://github.com/mozilla/cargo-vet\n- **Install:** `cargo install cargo-vet`\n\n```yaml\nrepos:\n  - repo: local\n    hooks:\n      - id: cargo-vet\n        name: cargo-vet\n        entry: cargo vet\n        language: system\n        pass_filenames: false\n        files: Cargo\\.(toml|lock)$\n```\n\n**Note:** cargo-vet allows organizations to share audit results, reducing duplicated security review effort across the Rust ecosystem.\n\n## Advanced: miri (Undefined Behavior Detection)\n\nInterpreter for Rust's mid-level intermediate representation (MIR) that detects undefined behavior.\n\n- **Documentation:** https://github.com/rust-lang/miri\n- **Rust Book:** https://doc.rust-lang.org/nightly/unstable-book/library-features/miri.html\n- **Install:** `rustup +nightly component add miri`\n\n```yaml\nrepos:\n  - repo: local\n    hooks:\n      - id: miri\n        name: miri\n        entry: cargo +nightly miri test\n        language: system\n        pass_filenames: false\n        stages: [manual]\n```\n\n**Aliasing Models:**\n- Default: Stacked Borrows\n- Alternative: Tree Borrows (use `MIRIFLAGS=\"-Zmiri-tree-borrows\"`)\n\n```yaml\n# Tree Borrows variant\nrepos:\n  - repo: local\n    hooks:\n      - id: miri-tree-borrows\n        name: miri (tree borrows)\n        entry: bash -c 'MIRIFLAGS=\"-Zmiri-tree-borrows\" cargo +nightly miri test'\n        language: system\n        pass_filenames: false\n        stages: [manual]\n```\n\n## Complete Configuration Example\n\n```yaml\nrepos:\n  # Core toolchain\n  - repo: builtin\n    hooks:\n      - id: cargo-check\n      - id: cargo-clippy\n        args: [--workspace, --all-targets, --all-features, --, -D, warnings]\n      - id: cargo-fmt\n        args: [--all, --check]\n\n  # Comprehensive dependency auditing (licenses, security, bans)\n  - repo: https://github.com/EmbarkStudios/cargo-deny\n    rev: \"{fetch from Version API}\"\n    hooks:\n      - id: cargo-deny\n        args: [--all-features, check]\n\n  # Unused dependency detection\n  - repo: local\n    hooks:\n      - id: cargo-machete\n        name: cargo-machete\n        entry: cargo machete\n        language: system\n        pass_filenames: false\n        files: Cargo\\.(toml|lock)$\n\n  # Manual checks (run with `prek run --hook-stage manual`)\n  - repo: local\n    hooks:\n      - id: cargo-semver-checks\n        name: cargo-semver-checks\n        entry: cargo semver-checks check-release\n        language: system\n        pass_filenames: false\n        stages: [manual]\n\n      - id: miri\n        name: miri\n        entry: cargo +nightly miri test\n        language: system\n        pass_filenames: false\n        stages: [manual]\n```\n\n## Minimal Configuration (Quick Start)\n\nFor projects that want essential checks without full security scanning:\n\n```yaml\nrepos:\n  - repo: builtin\n    hooks:\n      - id: cargo-check\n      - id: cargo-clippy\n        args: [--all-targets, --, -D, warnings]\n      - id: cargo-fmt\n        args: [--all, --check]\n\n  - repo: local\n    hooks:\n      - id: cargo-audit\n        name: cargo-audit\n        entry: cargo audit\n        language: system\n        pass_filenames: false\n        files: Cargo\\.(toml|lock)$\n```\n\n## Special Considerations\n\n- **Built-in hooks:** Always up-to-date with prek installation, no external version management.\n- **Workspaces:** Use `--workspace` flag for clippy to check all crates.\n- **cargo-deny vs cargo-audit:** cargo-deny is more comprehensive (licenses, bans, sources). Use both for maximum coverage.\n- **cargo-machete:** Reduces attack surface and compilation time by removing unused dependencies.\n- **cargo-semver-checks:** Essential for library crates to ensure API compatibility.\n- **miri:** Slow - use `stages: [manual]` to run only when explicitly requested.\n- **Performance:** Use `stages: [manual]` for slow checks (miri, semver-checks).\n- **90%+ of major Rust projects** use cargo-deny with versions 0.16-0.19 as of 2025.\n"
      },
      "plugins": [
        {
          "name": "commit-guardrails",
          "description": "Pre-commit hooks and code quality enforcement using prek",
          "source": "./claude-code",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add snowmead/guardrail-agent-skills",
            "/plugin install commit-guardrails@guardrails"
          ]
        }
      ]
    }
  ]
}