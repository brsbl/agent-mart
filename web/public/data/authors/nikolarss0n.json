{
  "author": {
    "id": "nikolarss0n",
    "display_name": "nklars0",
    "avatar_url": "https://avatars.githubusercontent.com/u/20460679?u=737d42bd4bcce962126049d972c94aaf270f8e7e&v=4"
  },
  "marketplaces": [
    {
      "name": "playwright-autopilot",
      "version": null,
      "description": "Autonomous Playwright E2E test fixer for Claude Code",
      "repo_full_name": "nikolarss0n/playwright-autopilot",
      "repo_url": "https://github.com/nikolarss0n/playwright-autopilot",
      "repo_description": "Autonomous Playwright E2E test fixer — Claude Code plugin with action capture, DOM snapshots, page object scanning, and business flow memory",
      "signals": {
        "stars": 6,
        "forks": 0,
        "pushed_at": "2026-02-20T16:19:12Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"playwright-autopilot\",\n  \"owner\": {\n    \"name\": \"nikolarss0n\"\n  },\n  \"metadata\": {\n    \"description\": \"Autonomous Playwright E2E test fixer for Claude Code\",\n    \"homepage\": \"https://github.com/nikolarss0n/playwright-autopilot\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"playwright-autopilot\",\n      \"source\": \"./plugin\",\n      \"description\": \"Autonomous Playwright E2E test debugger that understands your page objects, business flows, and test structure. Token-efficient tiered diagnostics — action timelines, focused DOM snapshots, network inspection — with a senior QA mindset: fixes tests through the UI, never JavaScript injection hacks.\"\n    }\n  ]\n}\n",
        "README.md": "# Playwright Autopilot\n\nA [Claude Code](https://docs.anthropic.com/en/docs/claude-code) plugin that debugs and fixes Playwright E2E tests autonomously. It runs your tests with full action capture — DOM snapshots, network requests, console output, screenshots — then investigates failures like a senior QA engineer and ships the fix.\n\n## Quick Start\n\n```bash\n# Add the marketplace\n/plugin marketplace add nikolarss0n/pw-autopilot\n\n# Install the plugin\n/plugin install playwright-autopilot@pw-autopilot\n```\n\nThen ask Claude to fix a failing test:\n\n```\n/playwright-autopilot:fix-e2e tests/checkout.spec.ts\n```\n\nOr just describe what you need — Claude will use the MCP tools automatically:\n\n```\nFix all failing e2e tests in the \"e2e\" project\n```\n\n## What It Does\n\nEvery browser action during a test run is captured with:\n\n- **Before/after DOM snapshots** — aria tree of the page before and after each click, fill, navigation\n- **Network requests** — URL, method, status, timing, request/response bodies\n- **Console output** — errors, warnings, logs tied to the action that produced them\n- **Screenshots** — captured at point of failure\n\nWhen a test fails, Claude doesn't guess — it reads the actual page state, checks for failed API calls, and traces the root cause through the action timeline.\n\n## How It Works\n\n### 1. Capture Hook\n\nA lightweight CJS hook (`captureHook.cjs`) is injected via `NODE_OPTIONS --require` into Playwright's test worker processes. It monkey-patches `BrowserContext._initialize` to add an instrumentation listener that captures every browser action with full context. No modifications to Playwright's source code required — works with any Playwright installation.\n\n### 2. MCP Tools\n\nThe plugin exposes 21 tools via the [Model Context Protocol](https://modelcontextprotocol.io/) that Claude calls on-demand. This is token-efficient by design — instead of dumping entire traces into context, Claude pulls only what it needs:\n\n| Tool | Purpose |\n|------|---------|\n| `e2e_list_projects` | List Playwright projects from config |\n| `e2e_list_tests` | Discover test files and cases |\n| `e2e_run_test` | Run tests with action capture, flaky detection (`retries`, `repeatEach`) |\n| `e2e_get_failure_report` | Error + DOM + network + console summary |\n| `e2e_get_evidence_bundle` | **All** failure evidence in one call — ready for Jira |\n| `e2e_generate_report` | Self-contained HTML or JSON report file |\n| `e2e_suggest_tests` | Test coverage gap analysis |\n| `e2e_get_actions` | Step-by-step action timeline |\n| `e2e_get_action_detail` | Deep dive into a single action |\n| `e2e_get_dom_snapshot` | Aria tree before/after an action |\n| `e2e_get_dom_diff` | What changed in the DOM |\n| `e2e_get_network` | Network requests with filtering |\n| `e2e_get_console` | Console output with filtering |\n| `e2e_get_screenshot` | Failure screenshot as image |\n| `e2e_get_test_source` | Test file with failing line highlighted |\n| `e2e_find_elements` | Search DOM for specific elements |\n| `e2e_scan_page_objects` | Index all page objects and methods |\n| `e2e_get_app_flows` | Read stored application flows |\n| `e2e_save_app_flow` | Save a verified user journey |\n| `e2e_get_context` | Flows + page object index in one call |\n| `e2e_discover_flows` | Auto-scan specs for draft flow map |\n\n### 3. Flow Memory\n\nAfter fixing (or verifying) a test, the plugin saves the confirmed application flow — the sequence of user interactions that make up the happy path. These flows persist in `.e2e-flows.json` and accumulate across sessions.\n\nNext time that test breaks, Claude already knows the intended user journey and jumps straight to identifying what changed. The agent gets faster over time.\n\n### 4. Flaky Detection\n\nTwo complementary modes for identifying flaky tests:\n\n**`retries: N`** — Run the test N+1 times in separate Playwright processes. Each run gets its own `runId` with full action capture. Returns a verdict: `FLAKY`, `CONSISTENT PASS`, or `CONSISTENT FAIL`. Best for debugging with 2-3 retries.\n\n```\ne2e_run_test(location: \"tests/checkout.spec.ts:15\", retries: 2)\n```\n\n**`repeatEach: N`** — Native Playwright `--repeat-each`. All iterations in one process. Fast stress-test for confirming flakiness — use 30-100 for confidence.\n\n```\ne2e_run_test(location: \"tests/checkout.spec.ts:15\", repeatEach: 40)\n```\n\n### 5. Evidence Bundles\n\n`e2e_get_evidence_bundle` packages **all** failure evidence into a single response — error, steps to reproduce, action timeline, failed network requests with bodies, console errors, DOM snapshot, and screenshots. Replaces calling 6+ tools separately.\n\nPass `outputFile: true` to write a markdown file to `test-reports/` for Jira attachments.\n\n### 6. HTML Reports\n\nBatch runs (no `location`) automatically generate a self-contained HTML report with:\n- Pass/fail summary with status badges\n- Collapsible per-test sections\n- Action timelines, failed network requests, console errors\n- DOM snapshots at failure points\n- Screenshots as inline base64 images\n\nReports are written to `test-reports/report-<runId>.html`. You can also call `e2e_generate_report` manually for any run.\n\n### 7. Coverage Analysis\n\n`e2e_suggest_tests` scans your entire project to find coverage gaps:\n\n1. **Untested page object methods** — methods in `.page.ts` / `.service.ts` files that no spec calls\n2. **Missing flow variants** — flows with pre-conditions (e.g. \"no draft exists\") that lack a continuation variant\n3. **Uncovered flow steps** — actions listed in confirmed flows that no spec exercises\n\n### 8. Architecture Awareness\n\nBefore writing any fix, the plugin scans your project for page objects, service layers, and test fixtures. It follows your existing patterns:\n\n- Uses your **Page Object Model** methods instead of writing raw Playwright calls\n- Respects your **business/service layer** separation\n- Uses `getByRole()`, `getByTestId()`, web-first assertions\n- Produces **minimal diffs** — typically one or two lines added\n\n## Debugging Philosophy\n\nThe plugin follows a strict diagnostic methodology:\n\n**Think in user flows, not selectors.** Before touching code, it maps the intended user journey. When a step is missing — a dropdown never selected, a required field never filled — it finds the existing page object method and adds the call.\n\n**Four root cause categories:**\n\n1. **Missing test step** — the test skips a UI interaction the app requires\n2. **Test code bug** — wrong selector, stale assertion, bad test data\n3. **Application bug** — the app itself is broken (reported, not worked around)\n4. **Dirty state** — leftovers from previous test runs interfering\n\n**No hacks.** The plugin will never use `page.evaluate()`, `page.route()`, `page.addInitScript()`, or any JavaScript injection to work around a failing test. If the fix requires those, it's solving the wrong problem.\n\n## Configuration\n\n### Multi-project setup\n\nIf your Playwright project lives in a different directory than where Claude Code runs, set the `PW_PROJECT_DIR` environment variable in `.mcp.json`:\n\n```json\n{\n  \"mcpServers\": {\n    \"playwright-autopilot\": {\n      \"command\": \"node\",\n      \"args\": [\"path/to/plugin/server/mcp-server.js\"],\n      \"env\": {\n        \"PW_PROJECT_DIR\": \"/path/to/your/playwright/project\"\n      }\n    }\n  }\n}\n```\n\n## Requirements\n\n- [Claude Code](https://docs.anthropic.com/en/docs/claude-code) CLI\n- [Playwright](https://playwright.dev/) test project\n- Node.js 18+\n\n## License\n\nMIT\n",
        "plugin/README.md": "# Playwright Autopilot\n\n**Give Claude Code x-ray vision into your Playwright tests.**\n\nPlaywright Autopilot captures every action, DOM snapshot, screenshot, network request, and console message from your test runs — then exposes it all through 18 MCP tools so Claude can debug failures like a senior QA engineer.\n\n> **Stop pasting error logs.** Just say `/fix-e2e tests/checkout.spec.ts` and watch Claude investigate, diagnose, and fix the failure — all inside your terminal.\n\n---\n\n## Why Playwright Autopilot?\n\nRunning `npx playwright test` and reading a stack trace tells you *what* failed. Playwright Autopilot tells you **why**.\n\n| Without Autopilot | With Autopilot |\n|---|---|\n| \"Locator `getByRole('button')` timed out\" | Full DOM snapshot showing the button was renamed to \"Submit Order\" |\n| \"Expected 200, got 400\" | Network request body missing `categoryId` because a dropdown was never selected |\n| \"Test failed\" | Screenshot of the actual page + action timeline showing exactly which step broke |\n| Manual copy-paste of errors into Claude | Claude runs the test, examines DOM, checks network, and fixes it autonomously |\n\n---\n\n## What You Get\n\n### Action-Level DOM Snapshots\n\nEvery Playwright action (click, fill, navigate) captures an **aria snapshot before and after** — so Claude can see exactly what the page looked like at any point in the test. No guessing, no stale screenshots.\n\n```\ne2e_get_dom_snapshot → runId, actionIndex: 5, which: \"both\"\n\nBefore: button \"Add to Cart\" was visible\nAfter:  dialog \"Confirm Purchase\" appeared with \"Total: $42.99\"\n```\n\n### Inline Failure Screenshots\n\nClaude sees the actual failure screenshot rendered right in your conversation. Not a file path — the image itself.\n\n### Network Request Capture\n\nEvery HTTP request during the test is recorded with URL, method, status, headers, and bodies. Filter by URL pattern, method, or status code to find exactly the failed API call.\n\n```\ne2e_get_network → runId, statusMin: 400\n\nPOST /api/orders → 422 Unprocessable Entity\n  Missing required field: \"shippingAddress\"\n```\n\n### Console Output\n\nAll `console.log`, `console.error`, and `console.warn` messages captured and filterable.\n\n### Page Object Discovery\n\nClaude automatically scans your `*.page.ts` and `*.service.ts` files to discover every available method, getter, and `@step`-decorated action — so it uses your existing page objects instead of writing raw `page.click()` calls.\n\n### Application Flow Memory\n\nStore confirmed user journeys (like \"checkout flow\" or \"user registration\") in `.e2e-flows.json`. Claude cross-references these flows against the test timeline to spot missing steps instantly.\n\n### Static Flow Discovery\n\nNo stored flows yet? `e2e_discover_flows` statically analyzes your spec files and extracts the method call sequences per test — giving Claude a flow map without running anything.\n\n---\n\n## Tools Reference\n\n### Test Execution\n| Tool | What It Does |\n|---|---|\n| `e2e_list_tests` | Discover all tests with file paths and line numbers |\n| `e2e_run_test` | Run a test with full action capture, returns a `runId` |\n\n### Failure Investigation\n| Tool | What It Does |\n|---|---|\n| `e2e_get_failure_report` | One-call failure overview: error, timeline, DOM, network, console |\n| `e2e_get_screenshot` | Failure screenshot as inline image |\n| `e2e_get_actions` | Step-by-step action timeline with pass/fail status |\n| `e2e_get_action_detail` | Deep dive into one action: params, timing, error, DOM diff |\n| `e2e_get_dom_snapshot` | Aria tree before/after any action |\n| `e2e_get_dom_diff` | What changed in the DOM during an action |\n| `e2e_find_elements` | Search DOM by role or text (cheaper than full snapshot) |\n| `e2e_get_network` | Network requests with filtering and optional body inspection |\n| `e2e_get_console` | Console output filtered by type |\n| `e2e_get_test_source` | Test file with the failing test highlighted |\n\n### Project Context\n| Tool | What It Does |\n|---|---|\n| `e2e_get_context` | Load flows + page object index in one call |\n| `e2e_scan_page_objects` | Discover all page object classes, methods, and getters |\n| `e2e_get_app_flows` | Read stored application flows |\n| `e2e_save_app_flow` | Save a confirmed user journey |\n| `e2e_discover_flows` | Infer test flows from static analysis of spec files |\n\n---\n\n## Token-Efficient by Design\n\nLLM context is expensive. Every tool is designed to minimize token usage:\n\n- **DOM snapshots** default to `interactiveOnly` mode — buttons, inputs, dropdowns only (~70% smaller)\n- **Network bodies** excluded by default — opt in with `includeBody: true` only when needed\n- **Depth limiting** — scan just the top 2 levels of the DOM tree for orientation, then drill deeper\n- **Element search** — find a specific button or dropdown without loading the entire page tree\n- **Failure report** — comprehensive overview in one call, so Claude doesn't need 5 separate tool calls to understand what happened\n\n---\n\n## The `/fix-e2e` Skill\n\nA built-in Claude Code slash command that walks through a structured investigation workflow:\n\n```\n/fix-e2e tests/checkout.spec.ts:42\n```\n\nClaude will:\n1. Load your project context (page objects, stored flows)\n2. Run the test with full capture\n3. Read the failure report and screenshot\n4. Examine DOM snapshots and network requests\n5. Diagnose the root cause (locator changed? missing step? timing issue? data changed?)\n6. Apply a minimal fix using your existing page objects\n7. Re-run to verify the fix works\n\nNo `page.evaluate()` hacks. No `page.route()` workarounds. Just real UI interactions, the way a QA engineer would fix it.\n\n---\n\n## How It Works\n\nPlaywright Autopilot injects a lightweight capture hook into your Playwright test workers via `NODE_OPTIONS --require`. The hook instruments every browser action to capture:\n\n- Aria snapshots before and after each action\n- DOM diffs between snapshots\n- Network requests and responses during each action\n- Console messages\n- Screenshots on failure\n\nAll data flows to an in-memory capture server and is accessible through the MCP tools. **Nothing is written to disk. Nothing is sent externally. Everything stays local.**\n\nWorks with **any Playwright project** — no fork required, no config changes, no test modifications.\n\n---\n\n## Installation\n\n### As a Claude Code Plugin\n\n```bash\nclaude plugins add playwright-autopilot\n```\n\n### Manual Installation\n\nClone the repository and build:\n\n```bash\ngit clone https://github.com/nicklaros/playwright-autopilot.git\ncd playwright-autopilot/plugin\n./build.sh\n```\n\nAdd to your project's `.mcp.json`:\n\n```json\n{\n  \"mcpServers\": {\n    \"playwright-autopilot\": {\n      \"command\": \"node\",\n      \"args\": [\"/path/to/plugin/server/mcp-server.js\"]\n    }\n  }\n}\n```\n\n---\n\n## Requirements\n\n- Node.js 20+\n- Playwright (any recent version — works with npm upstream, no fork needed)\n- Claude Code\n\n---\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "playwright-autopilot",
          "source": "./plugin",
          "description": "Autonomous Playwright E2E test debugger that understands your page objects, business flows, and test structure. Token-efficient tiered diagnostics — action timelines, focused DOM snapshots, network inspection — with a senior QA mindset: fixes tests through the UI, never JavaScript injection hacks.",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add nikolarss0n/playwright-autopilot",
            "/plugin install playwright-autopilot@playwright-autopilot"
          ]
        }
      ]
    }
  ]
}