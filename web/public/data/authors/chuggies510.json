{
  "author": {
    "id": "chuggies510",
    "display_name": "chuggies510",
    "avatar_url": "https://avatars.githubusercontent.com/u/213517204?u=1f8ebeea66c5c3540c410781fb0f893d82329460&v=4"
  },
  "marketplaces": [
    {
      "name": "feature-dev-harnessed",
      "version": "1.0.0",
      "description": "Feature development with multi-session harness for large features",
      "repo_full_name": "chuggies510/feature-dev-harnessed",
      "repo_url": "https://github.com/chuggies510/feature-dev-harnessed",
      "repo_description": "Feature development with multi-session harness for large features",
      "signals": {
        "stars": 1,
        "forks": 0,
        "pushed_at": "2026-01-29T00:42:16Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"feature-dev-harnessed\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Feature development with multi-session harness for large features\",\n  \"owner\": {\n    \"name\": \"chuggies510\"\n  },\n  \"repository\": \"https://github.com/chuggies510/feature-dev-harnessed\",\n  \"license\": \"MIT\",\n  \"plugins\": [\n    {\n      \"name\": \"feature-dev-harnessed\",\n      \"version\": \"1.0.0\",\n      \"description\": \"Feature development with integrated harness for multi-session execution. Fork of Anthropic's feature-dev with their long-running agent pattern.\",\n      \"author\": {\n        \"name\": \"chuggies510\"\n      },\n      \"source\": \"./\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"feature-dev-harnessed\",\n  \"version\": \"1.1.0\",\n  \"description\": \"Feature development with integrated harness for multi-session execution. Fork of Anthropic's feature-dev with their long-running agent pattern.\",\n  \"author\": {\n    \"name\": \"chuggies510\"\n  }\n}\n",
        "README.md": "# feature-dev-harnessed\n\nFeature development with multi-session execution for large features.\n\nA fork of Anthropic's [feature-dev plugin](https://github.com/anthropics/claude-code/tree/main/plugins/feature-dev) that integrates their [harness pattern for long-running agents](https://www.anthropic.com/engineering/effective-harnesses-for-long-running-agents).\n\n## The Problem\n\nAnthropic's feature-dev plugin provides a thorough 7-phase workflow for feature development. This works well for features that fit in one context window. For larger features, the exploration and architecture phases (1-4) consume significant context, leaving insufficient room for implementation.\n\n## The Solution\n\nThis fork keeps phases 1-4 (planning) and 6-7 (review) exactly as Anthropic designed them. It replaces phase 5 (implementation) with a multi-session harness pattern:\n\n- **Session 1**: Planning - Run phases 1-4, create `feature_list.json` with work items\n- **Sessions 2-N**: Implementation - Execute one item per session with verification\n- **Final Session**: Review - Run phases 6-7, complete the feature\n\nOne command that detects state and does the right thing across multiple sessions.\n\n## When to Use This Plugin\n\n### Use feature-dev-harnessed for:\n\n- **Large features** that require 3+ implementation sessions\n- **Complex features** where thorough exploration consumes significant context\n- **Multi-day features** where you'll return across multiple sessions\n- **Features with many components** that benefit from incremental verification\n\n### Use regular feature-dev for:\n\n- Features completable in a single session\n- Small to medium features with straightforward implementation\n- Quick iterations where multi-session overhead isn't worth it\n\n### Don't use either for:\n\n- Single-line bug fixes\n- Trivial changes\n- Urgent hotfixes\n\n## Workflow\n\n### Planning Session (Phases 1-4)\n\n#### Phase 1: Discovery\n\n**Goal**: Understand what needs to be built\n\n```\nYou: /feature-dev-harnessed:feature-dev Add CSV export for cost reports\nClaude: Let me understand what you need...\n        - What data should be included in the CSV?\n        - Should users be able to select which columns to export?\n        - Any specific formatting requirements?\n```\n\n#### Phase 2: Codebase Exploration\n\n**Goal**: Understand relevant existing code and patterns\n\nLaunches 2-3 `code-explorer` agents in parallel to trace through:\n- Similar features and their implementation patterns\n- Architecture and abstractions in the relevant area\n- UI patterns and extension points\n\n```\nFound similar features:\n- PDF export (src/export/pdf.py): Uses ReportFormatter base class\n- Data filtering (src/reports/filters.py): Column selection pattern\n\nKey files to understand:\n- src/export/base.py:23 - ReportFormatter interface\n- src/reports/cost_report.py:45 - Cost report data structure\n- src/ui/export_button.py:12 - Export button component\n```\n\n#### Phase 3: Clarifying Questions\n\n**Goal**: Fill in gaps and resolve ambiguities before designing\n\n```\nBefore designing the architecture, I need to clarify:\n\n1. Column selection: Include all columns or let user choose?\n2. Formatting: How should currency values be formatted?\n3. File naming: Auto-generate filename or prompt user?\n4. Large reports: Any pagination or size limits?\n```\n\n#### Phase 4: Architecture Design\n\n**Goal**: Design multiple approaches with trade-offs\n\nLaunches 2-3 `code-architect` agents with different focuses:\n\n```\nI've designed 3 approaches:\n\nApproach 1: Minimal Changes\n- Add csv_export() method to existing CostReport class\n- Reuse PDF export button with format parameter\nPros: Fast, minimal code\nCons: Couples CSV logic to report class\n\nApproach 2: Clean Architecture\n- New CsvFormatter implementing ReportFormatter\n- Dedicated export service with format registry\nPros: Extensible, testable, follows existing patterns\nCons: More files, more abstraction\n\nApproach 3: Pragmatic Balance\n- New CsvFormatter class\n- Wire into existing export button component\nPros: Clean separation, minimal refactoring\nCons: Some duplication with PDF formatter\n\nRecommendation: Approach 3 - follows existing patterns without over-engineering.\n\nWhich approach would you like to use?\n```\n\nAfter user approves, creates `feature_list.json` with session-sized work items.\n\n### Implementation Sessions (Phase 5, multi-session)\n\nEach session:\n1. Run smoke tests on previously completed items\n2. Implement the next pending item\n3. Run verification command until it passes\n4. Update artifacts and commit\n\n```\nSession 3: Implementation\n\nSmoke tests: 001 PASS, 002 PASS\nWorking on: 003 - Wire export button to CSV formatter\nVerification: python3 -m pytest tests/test_csv_export.py -v\n\n[Implementation happens here]\n\nVerification PASSED\nReady to commit? Proceed?\n```\n\n### Review Session (Phases 6-7)\n\n#### Phase 6: Quality Review\n\nLaunches 3 `code-reviewer` agents to check:\n- Simplicity, DRY, elegance\n- Bugs and functional correctness\n- Project conventions and abstractions\n\n```\nCode Review Results:\n\nHigh Priority:\n1. Missing error handling for empty reports (src/export/csv.py:45)\n\nMedium Priority:\n1. Could extract common formatting logic from PDF and CSV exporters\n\nAll verification commands pass. Code follows project conventions.\n\nWhat would you like to do? (fix now / fix later / proceed as-is)\n```\n\n#### Phase 7: Summary\n\n```\nFeature Complete: CSV Export for Cost Reports\n\nWhat was built:\n- CsvFormatter class implementing ReportFormatter interface\n- Column selection UI integrated with export button\n- Automated tests for CSV export functionality\n\nKey decisions:\n- Used pragmatic approach with dedicated formatter\n- Reused existing export button component\n- Added column selection based on user feedback\n\nFiles modified:\n- src/export/csv.py (new)\n- src/ui/export_button.py\n- tests/test_csv_export.py (new)\n\nSessions: 5 (1 planning, 3 implementation, 1 review)\n```\n\n## Prerequisites\n\n- [Claude Code](https://claude.ai/code) installed and configured\n- The `feature-dev` plugin from Anthropic's claude-code-plugins marketplace (for agents)\n\n## Installation\n\n```bash\n# Add Anthropic's marketplace (if not already added)\nclaude plugin marketplace add anthropics/claude-code\n\n# Install feature-dev (provides the agents)\nclaude plugin install feature-dev@claude-code\n\n# Add feature-dev-harnessed marketplace\nclaude plugin marketplace add chuggies510/feature-dev-harnessed\n\n# Install this plugin (note: marketplace name is just the repo name)\nclaude plugin install feature-dev-harnessed@feature-dev-harnessed\n```\n\nOr install directly from GitHub:\n```bash\nclaude plugin install github:chuggies510/feature-dev-harnessed\n```\n\n## Usage\n\n```bash\n# Start a new feature (planning session)\n/feature-dev-harnessed:feature-dev \"Add CSV export for cost reports\"\n\n# Continue implementation (subsequent sessions)\n/feature-dev-harnessed:feature-dev\n```\n\n### State Detection\n\nThe command automatically detects what to do based on filesystem state:\n\n| Condition | State | Action |\n|-----------|-------|--------|\n| No `dev/features/active/feature_list.json` | New feature | Run phases 1-4, create artifacts |\n| `feature_list.json` exists with pending items | Mid-implementation | Run one item, verify, commit |\n| All items pass, not reviewed | Ready for review | Run phases 6-7 |\n| `claude-progress.txt` contains \"Feature complete\" | Complete | Archive and summarize |\n\n## Artifacts\n\nAll artifacts are stored in `dev/features/`:\n\n```\ndev/features/\n├── active/                              # Current feature (gitignored)\n│   ├── feature_list.json\n│   ├── claude-progress.txt\n│   └── init.sh\n└── completed/                           # Archived features (committed)\n    └── v3.2.0-csv-export/\n        ├── feature_list.json\n        └── claude-progress.txt\n```\n\n### feature_list.json\n\nMachine-readable work items with version tracking and verification commands.\n\n```json\n{\n  \"feature\": \"csv-export-for-cost-reports\",\n  \"created\": \"2025-11-29\",\n  \"current_version\": \"3.1.1\",\n  \"target_version\": \"3.2.0\",\n  \"version_files\": [\"pyproject.toml\", \".claude/VERSION\"],\n  \"architecture\": \"Pragmatic balance: Add CSV formatter utility...\",\n  \"init_script\": \"./init.sh\",\n  \"items\": [\n    {\n      \"id\": \"001\",\n      \"description\": \"Create CSV formatter utility\",\n      \"verification\": \"python3 -c 'from utils.csv_formatter import format_csv'\",\n      \"status\": \"pass\",\n      \"session_completed\": 2\n    }\n  ]\n}\n```\n\n### claude-progress.txt\n\nHuman-readable session log. Append-only. Helps Claude recover context between sessions.\n\n```\nFeature: csv-export-for-cost-reports\nVersion: 3.1.1 → 3.2.0\nCreated: 2025-11-29\n\nSession 1 (2025-11-29):\nPlanning session. Ran phases 1-4.\nArchitecture chosen: Pragmatic balance...\nNext: 001 (Create CSV formatter utility)\n\nSession 2 (2025-11-29):\nCompleted: 001 (Create CSV formatter utility)\nVerification: PASS\nNext: 002 (Add export button)\n```\n\n## Versioning\n\nThe plugin automatically detects and manages project versions:\n\n1. **Detection** (Phase 2): Searches for `pyproject.toml`, `package.json`, `VERSION`, etc.\n2. **Suggestion** (Phase 4): Recommends version bump based on feature scope:\n   - PATCH: Bug fixes\n   - MINOR: New features (default)\n   - MAJOR: Breaking changes\n3. **Bump** (Phase 7): Updates all version files and CHANGELOG.md\n4. **Archive**: Completed features archived to `dev/features/completed/{version}-{feature}/`\n\n## Starting a New Feature\n\nFeatures are archived automatically on completion. To start a new feature, simply run the command with a description:\n\n```bash\n/feature-dev-harnessed:feature-dev \"New feature description\"\n```\n\nPrevious features are preserved in `dev/features/completed/` for reference.\n\n## Handling Failures\n\n**Smoke test failure (regression)**: Claude stops all new work and fixes the regression until all smoke tests pass. No new items can be implemented until regressions are resolved.\n\n**Verification failure**: Claude will debug and retry until the verification passes. If stuck, you can manually intervene.\n\n**Init script failure**: If `init.sh` fails to start the development environment, Claude will debug and fix before proceeding.\n\n**Mid-feature abandonment**: Delete `feature_list.json` and `claude-progress.txt` to start over, or leave them to resume later.\n\n## Agents\n\nThree specialized agents handle different aspects of feature development. They run in parallel during their respective phases.\n\n### code-explorer\n\n**Purpose**: Deeply analyzes existing codebase by tracing execution paths\n\n**Focus areas**:\n- Entry points and call chains\n- Data flow and transformations\n- Architecture layers and patterns\n- Dependencies and integrations\n\n**Output**: Entry points with file:line references, execution flow, key components, and list of essential files to read.\n\n**When used**: Phase 2 (Codebase Exploration) - launches 2-3 in parallel with different focuses.\n\n### code-architect\n\n**Purpose**: Designs feature architectures and implementation blueprints\n\n**Focus areas**:\n- Codebase pattern analysis\n- Architecture decisions with rationale\n- Component design\n- Implementation roadmap\n\n**Output**: Patterns found, architecture decision, component design, implementation map with specific files, build sequence.\n\n**When used**: Phase 4 (Architecture Design) - launches 2-3 in parallel with different approaches (minimal, clean, pragmatic).\n\n### code-reviewer\n\n**Purpose**: Reviews code for bugs, quality issues, and project conventions\n\n**Focus areas**:\n- Project guideline compliance\n- Bug detection\n- Code quality and simplicity\n- Confidence-based filtering (only reports high-confidence issues)\n\n**Output**: Critical and important issues with file:line references and specific fixes.\n\n**When used**: Phase 6 (Quality Review) - launches 3 in parallel with different focuses (simplicity, correctness, conventions).\n\n## Best Practices\n\n### Writing Good Verification Commands\n\nVerification commands determine if an item is complete. They should:\n\n- **Return exit code 0 on success, non-zero on failure**\n- **Be specific to the item's deliverable**\n- **Be runnable from the project root**\n- **For web apps: prefer browser automation over unit tests**\n\nGood examples:\n```bash\n# Browser automation (preferred for web apps)\nnpx playwright test tests/csv-export.spec.ts\npython -m pytest tests/test_e2e.py --headed\n\n# Import check\npython3 -c 'from utils.csv_formatter import format_csv'\n\n# File existence\ngrep -q 'id=\"export-csv\"' templates/cost-report.html\n\n# Test suite\npython3 -m pytest tests/test_csv_export.py -v\n\n# Build check\nnpm run build && test -f dist/export.js\n```\n\nBad examples:\n```bash\n# Too vague - doesn't verify the specific deliverable\npython3 -c 'import utils'\n\n# Unit test when E2E would be better (for web features)\npython3 -c 'assert CsvFormatter().format([]) == \"\"'  # Doesn't verify UI works\n```\n\n### Manual Verification\n\nSome items can't be verified by a computer (visual checks, interactive testing). Use `manual:` prefix:\n\n```json\n{\n  \"verification\": \"manual: Run the launcher, navigate all menus, verify theme looks like SMB3\"\n}\n```\n\nClaude will prompt: *\"Manual verification required: Run the launcher, navigate all menus, verify theme looks like SMB3. Did it pass? (y/n)\"*\n\nManual items are skipped during smoke tests since they can't be automated.\n\n### Using init.sh\n\nFor projects that need environment setup, create an `init.sh` script:\n\n```bash\n#!/bin/bash\n# Start development server\nnpm run dev &\n\n# Wait for server to be ready\nsleep 3\n\n# Health check\ncurl -s http://localhost:3000/health || exit 1\n\necho \"Development environment ready\"\n```\n\nReference it in `feature_list.json`:\n```json\n{\n  \"init_script\": \"./init.sh\",\n  ...\n}\n```\n\nClaude will run this at the start of each implementation session.\n\n### Sizing Work Items\n\n**Aim for 10-20+ items for complex features.** Prefer too many small items over too few large ones. Small items reduce risk of half-implemented features breaking the next session.\n\nSigns an item is too large:\n- Touches more than 3-4 files\n- Requires multiple sub-tasks\n- Has complex verification logic\n- Would take more than ~30 minutes to implement\n\nSplit large items into smaller ones during planning.\n\n### Session Continuity\n\nBetween sessions, Claude recovers context by:\n1. Reading `feature_list.json` - what's done, what's next\n2. Reading `claude-progress.txt` - decisions made, context from previous sessions\n3. Reading recent git log (20 commits) - what changed since last session\n4. Running `init.sh` (if defined) - starting the development environment\n5. Running smoke tests - verifying all previous work still passes\n\nWrite clear progress entries to help future sessions understand context.\n\n### Tips\n\n- **Be specific in your feature request**: More detail in phase 1 = fewer clarifying questions\n- **Answer clarifying questions thoroughly**: Phase 3 prevents confusion during implementation\n- **Trust the architecture recommendation**: It's based on actual codebase analysis\n- **Review agent outputs**: Agents surface insights about your codebase you might not know\n- **Don't skip phases**: Each phase builds context for the next\n- **Never delete or modify existing tests**: Add new tests, never remove or weaken existing ones\n\n## Credits\n\n- [Anthropic's feature-dev plugin](https://github.com/anthropics/claude-code/tree/main/plugins/feature-dev) - Original 7-phase workflow\n- [Effective harnesses for long-running agents](https://www.anthropic.com/engineering/effective-harnesses-for-long-running-agents) - Multi-session execution pattern\n"
      },
      "plugins": [
        {
          "name": "feature-dev-harnessed",
          "version": "1.0.0",
          "description": "Feature development with integrated harness for multi-session execution. Fork of Anthropic's feature-dev with their long-running agent pattern.",
          "author": {
            "name": "chuggies510"
          },
          "source": "./",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add chuggies510/feature-dev-harnessed",
            "/plugin install feature-dev-harnessed@feature-dev-harnessed"
          ]
        }
      ]
    }
  ]
}