{
  "author": {
    "id": "bfmcneill",
    "display_name": "Ben McNeill",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/16538715?v=4",
    "url": "https://github.com/bfmcneill",
    "bio": null,
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 4,
      "total_commands": 0,
      "total_skills": 10,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "agi-marketplace",
      "version": null,
      "description": "Curated Claude Code plugins for software development",
      "owner_info": {
        "name": "bfmcneill"
      },
      "keywords": [],
      "repo_full_name": "bfmcneill/agi-marketplace",
      "repo_url": "https://github.com/bfmcneill/agi-marketplace",
      "repo_description": null,
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-15T12:05:26Z",
        "created_at": "2026-01-15T07:57:48Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 1064
        },
        {
          "path": "core",
          "type": "tree",
          "size": null
        },
        {
          "path": "core/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "core/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 311
        },
        {
          "path": "core/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "core/skills/agent-behavior",
          "type": "tree",
          "size": null
        },
        {
          "path": "core/skills/agent-behavior/SKILL.md",
          "type": "blob",
          "size": 2212
        },
        {
          "path": "core/skills/design-patterns",
          "type": "tree",
          "size": null
        },
        {
          "path": "core/skills/design-patterns/SKILL.md",
          "type": "blob",
          "size": 4147
        },
        {
          "path": "core/skills/design-patterns/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "core/skills/design-patterns/references/behavioral.md",
          "type": "blob",
          "size": 8135
        },
        {
          "path": "core/skills/design-patterns/references/creational.md",
          "type": "blob",
          "size": 5103
        },
        {
          "path": "core/skills/design-patterns/references/structural.md",
          "type": "blob",
          "size": 6633
        },
        {
          "path": "core/skills/versioning",
          "type": "tree",
          "size": null
        },
        {
          "path": "core/skills/versioning/SKILL.md",
          "type": "blob",
          "size": 2643
        },
        {
          "path": "python",
          "type": "tree",
          "size": null
        },
        {
          "path": "python/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "python/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 266
        },
        {
          "path": "python/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "python/skills/uv-workflow",
          "type": "tree",
          "size": null
        },
        {
          "path": "python/skills/uv-workflow/SKILL.md",
          "type": "blob",
          "size": 4159
        },
        {
          "path": "python/skills/uv-workflow/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "python/skills/uv-workflow/references/commands.md",
          "type": "blob",
          "size": 3554
        },
        {
          "path": "python/skills/uv-workflow/references/gotchas.md",
          "type": "blob",
          "size": 3708
        },
        {
          "path": "python/skills/uv-workflow/references/workflows.md",
          "type": "blob",
          "size": 3083
        },
        {
          "path": "sveltekit",
          "type": "tree",
          "size": null
        },
        {
          "path": "sveltekit/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "sveltekit/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 319
        },
        {
          "path": "sveltekit/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "sveltekit/skills/sveltekit-builder",
          "type": "tree",
          "size": null
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/SKILL.md",
          "type": "blob",
          "size": 8915
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/_sections.md",
          "type": "blob",
          "size": 11472
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/_template.md",
          "type": "blob",
          "size": 647
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general",
          "type": "tree",
          "size": null
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general/bundle-avoid-barrel-imports.md",
          "type": "blob",
          "size": 2116
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general/bundle-dynamic-imports.md",
          "type": "blob",
          "size": 2175
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general/bundle-lazy-components.md",
          "type": "blob",
          "size": 3222
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general/bundle-preload-critical.md",
          "type": "blob",
          "size": 2935
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general/bundle-tree-shake-imports.md",
          "type": "blob",
          "size": 1903
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general/js-avoid-unnecessary-spread.md",
          "type": "blob",
          "size": 2265
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general/js-cache-expensive-computations.md",
          "type": "blob",
          "size": 1948
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general/js-debounce-rapid-events.md",
          "type": "blob",
          "size": 2789
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general/js-early-exit.md",
          "type": "blob",
          "size": 1950
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general/js-parallel-promises.md",
          "type": "blob",
          "size": 1845
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general/js-set-map-lookups.md",
          "type": "blob",
          "size": 2123
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general/rendering-content-visibility.md",
          "type": "blob",
          "size": 1928
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general/rendering-reduce-layout-thrashing.md",
          "type": "blob",
          "size": 2203
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general/rendering-will-change.md",
          "type": "blob",
          "size": 2177
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/general/security-sanitize-input.md",
          "type": "blob",
          "size": 3931
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5",
          "type": "tree",
          "size": null
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/a11y-compiler-warnings.md",
          "type": "blob",
          "size": 2441
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/actions-cleanup-return.md",
          "type": "blob",
          "size": 2487
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/actions-reusable-dom.md",
          "type": "blob",
          "size": 2263
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/async-await-blocks.md",
          "type": "blob",
          "size": 2021
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/async-boundary-pending.md",
          "type": "blob",
          "size": 2041
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/async-error-boundaries.md",
          "type": "blob",
          "size": 1787
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/async-parallel-fetching.md",
          "type": "blob",
          "size": 1754
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/async-suspense-boundaries-strategic.md",
          "type": "blob",
          "size": 2859
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/component-bindable-sparingly.md",
          "type": "blob",
          "size": 2445
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/component-callback-props.md",
          "type": "blob",
          "size": 1826
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/component-props-destructure.md",
          "type": "blob",
          "size": 1306
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/component-snippets-not-slots.md",
          "type": "blob",
          "size": 2098
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/css-class-directive.md",
          "type": "blob",
          "size": 2201
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/css-custom-properties-theming.md",
          "type": "blob",
          "size": 2707
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/css-global-sparingly.md",
          "type": "blob",
          "size": 2062
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/css-scoped-by-default.md",
          "type": "blob",
          "size": 1988
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/css-style-directive.md",
          "type": "blob",
          "size": 1928
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/elements-dynamic-components.md",
          "type": "blob",
          "size": 2018
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/elements-svelte-body.md",
          "type": "blob",
          "size": 1811
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/elements-svelte-head.md",
          "type": "blob",
          "size": 1767
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/elements-svelte-window.md",
          "type": "blob",
          "size": 1988
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/events-modifiers-wrapper.md",
          "type": "blob",
          "size": 1675
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/events-onclick-not-on.md",
          "type": "blob",
          "size": 1322
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/forms-bind-group.md",
          "type": "blob",
          "size": 2581
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/forms-bind-value.md",
          "type": "blob",
          "size": 1692
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/forms-enhance-action.md",
          "type": "blob",
          "size": 2591
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/reactivity-derived-not-effect.md",
          "type": "blob",
          "size": 1682
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/reactivity-effect-cleanup.md",
          "type": "blob",
          "size": 1797
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/reactivity-no-state-mutation-in-derived.md",
          "type": "blob",
          "size": 1912
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/reactivity-use-state-explicit.md",
          "type": "blob",
          "size": 1464
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/remote-batch-queries.md",
          "type": "blob",
          "size": 5315
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/remote-form-progressive.md",
          "type": "blob",
          "size": 5073
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/remote-optimistic-updates.md",
          "type": "blob",
          "size": 5574
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/remote-query-vs-command.md",
          "type": "blob",
          "size": 3818
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/remote-separate-files.md",
          "type": "blob",
          "size": 3721
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/remote-validate-inputs.md",
          "type": "blob",
          "size": 4461
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/rendering-avoid-unnecessary-reactivity.md",
          "type": "blob",
          "size": 1711
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/rendering-keyed-each.md",
          "type": "blob",
          "size": 1967
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/ssr-hydratable-dedup.md",
          "type": "blob",
          "size": 2345
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/ssr-hydration-mismatch.md",
          "type": "blob",
          "size": 2124
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/ssr-inline-script-no-flicker.md",
          "type": "blob",
          "size": 2509
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/ssr-preserve-comments.md",
          "type": "blob",
          "size": 2048
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/state-context-for-subtrees.md",
          "type": "blob",
          "size": 2167
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/state-derived-by-complex.md",
          "type": "blob",
          "size": 2607
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/state-inspect-debugging.md",
          "type": "blob",
          "size": 2273
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/state-lazy-initialization.md",
          "type": "blob",
          "size": 2535
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/state-raw-for-classes.md",
          "type": "blob",
          "size": 2027
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/state-shared-svelte-files.md",
          "type": "blob",
          "size": 1722
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/state-stores-vs-runes.md",
          "type": "blob",
          "size": 2472
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-cache-headers.md",
          "type": "blob",
          "size": 4036
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-env-variables.md",
          "type": "blob",
          "size": 4354
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-error-handling.md",
          "type": "blob",
          "size": 4347
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-form-actions.md",
          "type": "blob",
          "size": 4139
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-load-server-vs-universal.md",
          "type": "blob",
          "size": 2910
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-parallel-load.md",
          "type": "blob",
          "size": 3481
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-preload-data.md",
          "type": "blob",
          "size": 2654
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-streaming-defer.md",
          "type": "blob",
          "size": 3904
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/template-const-simplify.md",
          "type": "blob",
          "size": 2416
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/template-html-xss.md",
          "type": "blob",
          "size": 2360
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/template-if-vs-ternary.md",
          "type": "blob",
          "size": 2959
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/template-key-reset.md",
          "type": "blob",
          "size": 2457
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/transitions-prefer-css.md",
          "type": "blob",
          "size": 2200
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/transitions-reduced-motion.md",
          "type": "blob",
          "size": 2401
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/transitions-use-local.md",
          "type": "blob",
          "size": 1820
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/typescript-generics-snippets.md",
          "type": "blob",
          "size": 2416
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/svelte5/typescript-props-interface.md",
          "type": "blob",
          "size": 2018
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party",
          "type": "tree",
          "size": null
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/_README.md",
          "type": "blob",
          "size": 1857
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/ai-sdk",
          "type": "tree",
          "size": null
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/ai-sdk/chat-class.md",
          "type": "blob",
          "size": 2476
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/ai-sdk/env-private.md",
          "type": "blob",
          "size": 1999
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/ai-sdk/streaming-endpoint.md",
          "type": "blob",
          "size": 1875
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/ai-sdk/tool-validation.md",
          "type": "blob",
          "size": 2188
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/better-auth",
          "type": "tree",
          "size": null
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/better-auth/csrf-protection.md",
          "type": "blob",
          "size": 4701
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/better-auth/hooks-handle.md",
          "type": "blob",
          "size": 2062
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/better-auth/oauth-callbacks.md",
          "type": "blob",
          "size": 3181
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/better-auth/protect-routes.md",
          "type": "blob",
          "size": 2684
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/better-auth/secure-cookies.md",
          "type": "blob",
          "size": 3034
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/better-auth/session-locals.md",
          "type": "blob",
          "size": 2469
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/kysely",
          "type": "tree",
          "size": null
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/kysely/connection-pooling.md",
          "type": "blob",
          "size": 2303
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/kysely/load-vs-action.md",
          "type": "blob",
          "size": 3870
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/kysely/parameterized-queries.md",
          "type": "blob",
          "size": 2934
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/kysely/select-specific-columns.md",
          "type": "blob",
          "size": 2490
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/kysely/transactions-actions.md",
          "type": "blob",
          "size": 3656
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/kysely/type-safe-queries.md",
          "type": "blob",
          "size": 2275
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/lucide-svelte",
          "type": "tree",
          "size": null
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/lucide-svelte/accessibility-labels.md",
          "type": "blob",
          "size": 1909
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/lucide-svelte/consistent-sizing.md",
          "type": "blob",
          "size": 1458
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/lucide-svelte/tree-shake-imports.md",
          "type": "blob",
          "size": 1246
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/shadcn-svelte",
          "type": "tree",
          "size": null
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/shadcn-svelte/accessible-patterns.md",
          "type": "blob",
          "size": 4748
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/shadcn-svelte/bits-ui-primitives.md",
          "type": "blob",
          "size": 3792
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/shadcn-svelte/compose-dont-override.md",
          "type": "blob",
          "size": 2646
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/shadcn-svelte/dark-mode-setup.md",
          "type": "blob",
          "size": 3428
        },
        {
          "path": "sveltekit/skills/sveltekit-builder/references/third-party/shadcn-svelte/form-integration.md",
          "type": "blob",
          "size": 4608
        },
        {
          "path": "ux",
          "type": "tree",
          "size": null
        },
        {
          "path": "ux/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "ux/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 300
        },
        {
          "path": "ux/README.md",
          "type": "blob",
          "size": 2548
        },
        {
          "path": "ux/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "ux/skills/feedback-design",
          "type": "tree",
          "size": null
        },
        {
          "path": "ux/skills/feedback-design/SKILL.md",
          "type": "blob",
          "size": 6968
        },
        {
          "path": "ux/skills/flow-optimization",
          "type": "tree",
          "size": null
        },
        {
          "path": "ux/skills/flow-optimization/SKILL.md",
          "type": "blob",
          "size": 7390
        },
        {
          "path": "ux/skills/progressive-disclosure",
          "type": "tree",
          "size": null
        },
        {
          "path": "ux/skills/progressive-disclosure/SKILL.md",
          "type": "blob",
          "size": 9400
        },
        {
          "path": "ux/skills/psychology-foundations",
          "type": "tree",
          "size": null
        },
        {
          "path": "ux/skills/psychology-foundations/SKILL.md",
          "type": "blob",
          "size": 9166
        },
        {
          "path": "ux/skills/trust-and-recovery",
          "type": "tree",
          "size": null
        },
        {
          "path": "ux/skills/trust-and-recovery/SKILL.md",
          "type": "blob",
          "size": 6876
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"agi-marketplace\",\n  \"description\": \"Curated Claude Code plugins for software development\",\n  \"owner\": {\n    \"name\": \"bfmcneill\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"core\",\n      \"description\": \"Universal development practices: design patterns, agent behavior, versioning, and code quality standards\",\n      \"version\": \"0.1.0\",\n      \"source\": \"./core\"\n    },\n    {\n      \"name\": \"sveltekit\",\n      \"description\": \"Expert guidance for SvelteKit with Svelte 5, runes, remote functions, and recommended stack (Kysely, Better Auth, shadcn-svelte)\",\n      \"version\": \"1.0.0\",\n      \"source\": \"./sveltekit\"\n    },\n    {\n      \"name\": \"python\",\n      \"description\": \"Python development patterns: uv, testing, packaging, and best practices\",\n      \"version\": \"0.1.0\",\n      \"source\": \"./python\"\n    },\n    {\n      \"name\": \"ux\",\n      \"description\": \"Framework-agnostic UX patterns for building satisfying user interfaces: feedback design, flow optimization, progressive disclosure, and trust\",\n      \"version\": \"0.1.0\",\n      \"source\": \"./ux\"\n    }\n  ]\n}\n",
        "core/.claude-plugin/plugin.json": "{\n  \"name\": \"core\",\n  \"description\": \"Universal development practices: design patterns, agent behavior, versioning, and code quality\",\n  \"version\": \"0.1.0\",\n  \"author\": {\n    \"name\": \"rosa\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\"design-patterns\", \"agent-behavior\", \"versioning\", \"semver\", \"best-practices\"]\n}\n",
        "core/skills/agent-behavior/SKILL.md": "---\nname: agent-behavior\ndescription: Use at the start of any coding session to establish activity tracking and working patterns. Defines how the agent should document its work and communicate progress.\n---\n\n# Agent Behavior\n\nRules for how the agent operates, tracks work, and communicates during coding sessions.\n\n## Activity Tracking\n\n**Every session must track what was done.**\n\nLog activity to `docs/activity/` using your judgment on hierarchy:\n\n```\ndocs/activity/\n├── 2025-01-15-feature-auth.md      # By date + feature\n├── 2025-01-15-bugfix-login.md      # By date + type\n└── sessions/\n    └── 2025-01-15-session-1.md     # By session\n```\n\n### Activity Log Format\n\n```markdown\n# [Date] - [Brief Description]\n\n## What Was Done\n- Bullet list of changes made\n- Files modified\n- Decisions made\n\n## Why\n- Reasoning behind approach\n- Trade-offs considered\n\n## What's Next\n- Remaining work\n- Known issues\n- Questions for human\n```\n\n### When to Log\n\n| Situation | Action |\n|-----------|--------|\n| Starting work | Create/update activity log |\n| Completing a task | Summarize what was done |\n| Making a decision | Document the reasoning |\n| Hitting a blocker | Note the issue and questions |\n| Ending session | Final summary of state |\n\n## Working Patterns\n\n### Ask vs. Proceed\n\n| Situation | Action |\n|-----------|--------|\n| Clear requirements | Proceed |\n| Multiple valid approaches | Ask |\n| Destructive operation | Ask |\n| Unclear scope | Ask |\n| Simple fix | Proceed |\n\n### Subagent Usage\n\nUse subagents when:\n- Task is independent and parallelizable\n- Deep exploration needed without polluting main context\n- Multiple files need searching/analysis\n\nDo directly when:\n- Simple, quick operation\n- Context is already loaded\n- Sequential dependency on previous work\n\n### Communication\n\n- **Be concise** - Don't over-explain obvious things\n- **Show progress** - Use todo lists for multi-step work\n- **Surface blockers early** - Don't spin on problems\n- **Summarize at end** - What was done, what's next\n\n## Quality Expectations\n\nBefore marking work \"done\":\n- [ ] Code runs without errors\n- [ ] Tests pass (if applicable)\n- [ ] Activity log updated\n- [ ] No obvious issues left unaddressed\n",
        "core/skills/design-patterns/SKILL.md": "---\nname: design-patterns\ndescription: Use when refactoring code or designing flexible systems. Covers creational, structural, and behavioral patterns with Python examples.\n---\n\n# Design Patterns\n\nClassic object-oriented design patterns for building flexible, maintainable software.\n\n## When to Use This Skill\n\nUse this skill when:\n- **Refactoring code** with complex conditionals or tight coupling\n- **Designing systems** that need flexibility for future changes\n- **Recognizing anti-patterns** that a design pattern would solve\n- **Code reviews** where design decisions need validation\n- **Explaining patterns** to team members\n\n## Pattern Categories\n\n### Creational Patterns\nFocus on object creation mechanisms:\n- **Factory Method** - Decouple object creation from usage\n- **Singleton** - Single global instance\n- **Builder** - Complex object construction step-by-step\n- **Abstract Factory** - Families of related objects\n\n### Structural Patterns\nDeal with object composition:\n- **Decorator** - Add behaviors dynamically\n- **Facade** - Simplify complex subsystems\n- **Adapter** - Make incompatible interfaces work together\n- **Proxy** - Control access, caching, lazy loading\n\n### Behavioral Patterns\nAddress communication between objects:\n- **Observer** - Event notification/subscription\n- **Strategy** - Interchangeable algorithms\n- **Command** - Encapsulate requests as objects\n- **State** - Behavior based on internal state\n\n## Quick Reference\n\n| Pattern | Use When | Complexity |\n|---------|----------|------------|\n| Factory Method | Creating objects without specifying exact class | Medium |\n| Singleton | Need single global instance | Easy |\n| Builder | Complex construction with many optional params | Medium |\n| Decorator | Adding behaviors dynamically | Medium |\n| Facade | Simplifying complex library/subsystem | Easy |\n| Adapter | Integrating incompatible interfaces | Easy |\n| Observer | Multiple objects need state change notifications | Medium |\n| Strategy | Switching algorithms at runtime | Medium |\n| Command | Undo/redo, queuing, scheduling operations | Medium |\n| State | Object behavior varies by internal state | Hard |\n\n## Pattern Selection Guide\n\n**Problem: Large constructor with many optional parameters**\n- Use: Builder\n\n**Problem: Need to ensure only one instance exists**\n- Use: Singleton\n\n**Problem: Class explosion from multiple combinations**\n- Use: Decorator (for behaviors) or Strategy (for algorithms)\n\n**Problem: Complex library needs simpler interface**\n- Use: Facade\n\n**Problem: Objects need to be notified of changes**\n- Use: Observer\n\n**Problem: Large if/else or switch for algorithm selection**\n- Use: Strategy\n\n**Problem: Behavior changes based on object state**\n- Use: State\n\n## Reference Files\n\nDetailed patterns with code examples:\n- `references/creational.md` - Factory, Singleton, Builder, Abstract Factory\n- `references/structural.md` - Decorator, Facade, Adapter, Proxy\n- `references/behavioral.md` - Observer, Strategy, Command, State\n\n## Key Principles\n\n### SOLID Connection\n- **Single Responsibility**: Each pattern isolates concerns\n- **Open/Closed**: Decorator, Strategy enable extension without modification\n- **Liskov Substitution**: Patterns use interfaces/abstract classes\n- **Interface Segregation**: Small, focused interfaces\n- **Dependency Inversion**: Depend on abstractions, not concretions\n\n### When NOT to Use Patterns\n- **Over-engineering**: Don't add patterns \"just in case\"\n- **Simple problems**: If a simple solution works, use it\n- **Premature abstraction**: Wait until you see the pattern emerge\n- **Pattern fever**: Not every problem needs a pattern\n\n## Common Anti-Patterns to Refactor\n\n| Anti-Pattern | Symptom | Pattern Solution |\n|--------------|---------|------------------|\n| God Object | One class does everything | Facade + smaller classes |\n| Spaghetti conditionals | Nested if/else for types | Strategy or State |\n| Hardcoded dependencies | `new ConcreteClass()` everywhere | Factory Method |\n| Copy-paste variations | Similar classes with slight differences | Template Method or Strategy |\n| Callback hell | Deeply nested event handlers | Observer or Command |\n",
        "core/skills/design-patterns/references/behavioral.md": "# Behavioral Patterns\n\nPatterns for communication between objects and responsibility distribution.\n\n## Observer\n\n**Solves**: Notifying multiple objects about state changes; subscription mechanism.\n\n**When to Use**:\n- State changes require updating others (unknown count/types)\n- Objects need to observe temporarily\n- Loose coupling between publishers and subscribers\n- Dynamic subscription list\n\n```python\nfrom typing import List, Callable\n\nclass EventManager:\n    def __init__(self):\n        self._listeners: dict[str, List[Callable]] = {}\n\n    def subscribe(self, event_type: str, listener: Callable):\n        if event_type not in self._listeners:\n            self._listeners[event_type] = []\n        self._listeners[event_type].append(listener)\n\n    def unsubscribe(self, event_type: str, listener: Callable):\n        if event_type in self._listeners:\n            self._listeners[event_type].remove(listener)\n\n    def notify(self, event_type: str, data):\n        if event_type in self._listeners:\n            for listener in self._listeners[event_type]:\n                listener(data)\n\nclass Editor:\n    def __init__(self):\n        self.events = EventManager()\n        self._file = \"\"\n\n    def open_file(self, path: str):\n        self._file = path\n        self.events.notify(\"open\", path)\n\n    def save_file(self):\n        self.events.notify(\"save\", self._file)\n\n# Listeners (observers)\ndef log_listener(filename: str):\n    print(f\"Log: {filename}\")\n\ndef email_listener(filename: str):\n    print(f\"Email notification: {filename} was modified\")\n\n# Usage\neditor = Editor()\neditor.events.subscribe(\"open\", log_listener)\neditor.events.subscribe(\"save\", log_listener)\neditor.events.subscribe(\"save\", email_listener)\n\neditor.open_file(\"document.txt\")  # Log: document.txt\neditor.save_file()                # Log: document.txt, Email: ...\n```\n\n---\n\n## Strategy\n\n**Solves**: Defining interchangeable algorithms; isolating algorithm logic.\n\n**When to Use**:\n- Multiple algorithm variants with runtime switching\n- Large if/else or switch for algorithm selection\n- Similar classes differ only in execution behavior\n- Adding new algorithms without modifying existing code\n\n```python\nfrom abc import ABC, abstractmethod\n\n# Strategy interface\nclass PaymentStrategy(ABC):\n    @abstractmethod\n    def pay(self, amount: float) -> str: pass\n\n# Concrete strategies\nclass CreditCardPayment(PaymentStrategy):\n    def __init__(self, card_number: str):\n        self.card_number = card_number\n\n    def pay(self, amount: float) -> str:\n        return f\"Paid ${amount:.2f} with card {self.card_number[-4:]}\"\n\nclass PayPalPayment(PaymentStrategy):\n    def __init__(self, email: str):\n        self.email = email\n\n    def pay(self, amount: float) -> str:\n        return f\"Paid ${amount:.2f} via PayPal ({self.email})\"\n\nclass CryptoPayment(PaymentStrategy):\n    def __init__(self, wallet: str):\n        self.wallet = wallet\n\n    def pay(self, amount: float) -> str:\n        return f\"Paid ${amount:.2f} in crypto to {self.wallet[:8]}...\"\n\n# Context\nclass ShoppingCart:\n    def __init__(self):\n        self._items: list[tuple[str, float]] = []\n        self._strategy: PaymentStrategy = None\n\n    def add_item(self, name: str, price: float):\n        self._items.append((name, price))\n\n    def set_payment_strategy(self, strategy: PaymentStrategy):\n        self._strategy = strategy\n\n    def checkout(self) -> str:\n        total = sum(price for _, price in self._items)\n        return self._strategy.pay(total)\n\n# Usage - switch strategies at runtime\ncart = ShoppingCart()\ncart.add_item(\"Book\", 29.99)\ncart.add_item(\"Coffee\", 4.99)\n\ncart.set_payment_strategy(CreditCardPayment(\"4111111111111234\"))\nprint(cart.checkout())  # Paid $34.98 with card 1234\n\ncart.set_payment_strategy(PayPalPayment(\"user@email.com\"))\nprint(cart.checkout())  # Paid $34.98 via PayPal\n```\n\n---\n\n## Command\n\n**Solves**: Transforming requests into standalone objects; decoupling sender from receiver.\n\n**When to Use**:\n- Parameterize objects with operations\n- Queue or schedule execution\n- Implement undo/redo functionality\n\n```python\nfrom abc import ABC, abstractmethod\nfrom typing import List\n\n# Command interface\nclass Command(ABC):\n    @abstractmethod\n    def execute(self): pass\n    @abstractmethod\n    def undo(self): pass\n\n# Receiver\nclass TextEditor:\n    def __init__(self):\n        self.text = \"\"\n\n    def insert(self, text: str, position: int):\n        self.text = self.text[:position] + text + self.text[position:]\n\n    def delete(self, start: int, end: int) -> str:\n        deleted = self.text[start:end]\n        self.text = self.text[:start] + self.text[end:]\n        return deleted\n\n# Concrete commands\nclass InsertCommand(Command):\n    def __init__(self, editor: TextEditor, text: str, position: int):\n        self.editor = editor\n        self.text = text\n        self.position = position\n\n    def execute(self):\n        self.editor.insert(self.text, self.position)\n\n    def undo(self):\n        self.editor.delete(self.position, self.position + len(self.text))\n\nclass DeleteCommand(Command):\n    def __init__(self, editor: TextEditor, start: int, end: int):\n        self.editor = editor\n        self.start = start\n        self.end = end\n        self.deleted_text = \"\"\n\n    def execute(self):\n        self.deleted_text = self.editor.delete(self.start, self.end)\n\n    def undo(self):\n        self.editor.insert(self.deleted_text, self.start)\n\n# Invoker with history\nclass CommandHistory:\n    def __init__(self):\n        self._history: List[Command] = []\n\n    def execute(self, command: Command):\n        command.execute()\n        self._history.append(command)\n\n    def undo(self):\n        if self._history:\n            command = self._history.pop()\n            command.undo()\n\n# Usage\neditor = TextEditor()\nhistory = CommandHistory()\n\nhistory.execute(InsertCommand(editor, \"Hello\", 0))\nprint(editor.text)  # \"Hello\"\n\nhistory.execute(InsertCommand(editor, \" World\", 5))\nprint(editor.text)  # \"Hello World\"\n\nhistory.undo()\nprint(editor.text)  # \"Hello\"\n\nhistory.undo()\nprint(editor.text)  # \"\"\n```\n\n---\n\n## State\n\n**Solves**: Altering behavior based on internal state without massive conditionals.\n\n**When to Use**:\n- Object behavior varies significantly by state\n- Large conditional logic for state-dependent behavior\n- Multiple similar states with duplicated code\n- Want independent state management\n\n```python\nfrom abc import ABC, abstractmethod\n\n# State interface\nclass State(ABC):\n    @abstractmethod\n    def play(self, player): pass\n    @abstractmethod\n    def pause(self, player): pass\n    @abstractmethod\n    def stop(self, player): pass\n\n# Concrete states\nclass ReadyState(State):\n    def play(self, player):\n        print(\"Starting playback...\")\n        player.change_state(PlayingState())\n\n    def pause(self, player):\n        print(\"Already paused\")\n\n    def stop(self, player):\n        print(\"Already stopped\")\n\nclass PlayingState(State):\n    def play(self, player):\n        print(\"Already playing\")\n\n    def pause(self, player):\n        print(\"Pausing...\")\n        player.change_state(PausedState())\n\n    def stop(self, player):\n        print(\"Stopping...\")\n        player.change_state(ReadyState())\n\nclass PausedState(State):\n    def play(self, player):\n        print(\"Resuming...\")\n        player.change_state(PlayingState())\n\n    def pause(self, player):\n        print(\"Already paused\")\n\n    def stop(self, player):\n        print(\"Stopping...\")\n        player.change_state(ReadyState())\n\n# Context\nclass AudioPlayer:\n    def __init__(self):\n        self._state = ReadyState()\n\n    def change_state(self, state: State):\n        self._state = state\n\n    def play(self):\n        self._state.play(self)\n\n    def pause(self):\n        self._state.pause(self)\n\n    def stop(self):\n        self._state.stop(self)\n\n# Usage\nplayer = AudioPlayer()\nplayer.play()   # Starting playback...\nplayer.play()   # Already playing\nplayer.pause()  # Pausing...\nplayer.play()   # Resuming...\nplayer.stop()   # Stopping...\n```\n\n**State vs Strategy**:\n- **State**: States know about each other and trigger transitions\n- **Strategy**: Strategies are independent, client chooses which to use\n",
        "core/skills/design-patterns/references/creational.md": "# Creational Patterns\n\nPatterns for object creation mechanisms.\n\n## Factory Method\n\n**Solves**: Creating objects without specifying exact classes; decouples object creation from usage.\n\n**When to Use**:\n- Don't know exact types beforehand\n- Framework users need to extend components\n- Want to reuse existing objects from cache\n\n```python\nfrom abc import ABC, abstractmethod\n\n# Product interface\nclass Transport(ABC):\n    @abstractmethod\n    def deliver(self): pass\n\n# Concrete products\nclass Truck(Transport):\n    def deliver(self):\n        return \"Delivering by truck on land\"\n\nclass Ship(Transport):\n    def deliver(self):\n        return \"Delivering by ship on water\"\n\n# Creator with factory method\nclass Logistics(ABC):\n    @abstractmethod\n    def create_transport(self) -> Transport:\n        pass\n\n    def plan_delivery(self):\n        transport = self.create_transport()\n        return transport.deliver()\n\n# Concrete creators\nclass RoadLogistics(Logistics):\n    def create_transport(self) -> Transport:\n        return Truck()\n\nclass SeaLogistics(Logistics):\n    def create_transport(self) -> Transport:\n        return Ship()\n\n# Usage\nlogistics = RoadLogistics()\nprint(logistics.plan_delivery())  # \"Delivering by truck on land\"\n```\n\n---\n\n## Singleton\n\n**Solves**: Ensuring a class has only one instance with global access.\n\n**When to Use**:\n- Managing limited resources (DB connections, file handlers)\n- Single point of access needed by multiple components\n- Lazy initialization wanted\n\n```python\nclass Database:\n    _instance = None\n\n    def __new__(cls):\n        if cls._instance is None:\n            cls._instance = super().__new__(cls)\n        return cls._instance\n\n    def query(self, sql):\n        return f\"Executing: {sql}\"\n\n# Usage\ndb1 = Database()\ndb2 = Database()\nprint(db1 is db2)  # True - same instance\n```\n\n**Thread-safe variant**:\n```python\nimport threading\n\nclass ThreadSafeDatabase:\n    _instance = None\n    _lock = threading.Lock()\n\n    def __new__(cls):\n        with cls._lock:\n            if cls._instance is None:\n                cls._instance = super().__new__(cls)\n            return cls._instance\n```\n\n---\n\n## Builder\n\n**Solves**: Constructing complex objects step-by-step without massive constructors.\n\n**When to Use**:\n- Constructors with many optional parameters\n- Need various versions of a product\n- Building composite/tree-like objects\n\n```python\nclass Car:\n    def __init__(self):\n        self.seats = None\n        self.engine = None\n        self.trip_computer = False\n        self.gps = False\n\n    def __str__(self):\n        return f\"Car(seats={self.seats}, engine={self.engine})\"\n\nclass CarBuilder:\n    def __init__(self):\n        self.reset()\n\n    def reset(self):\n        self.car = Car()\n        return self\n\n    def set_seats(self, count):\n        self.car.seats = count\n        return self\n\n    def set_engine(self, engine):\n        self.car.engine = engine\n        return self\n\n    def set_trip_computer(self, enabled):\n        self.car.trip_computer = enabled\n        return self\n\n    def set_gps(self, enabled):\n        self.car.gps = enabled\n        return self\n\n    def build(self):\n        product = self.car\n        self.reset()\n        return product\n\n# Usage - fluent interface\ncar = (CarBuilder()\n    .set_seats(2)\n    .set_engine(\"V8\")\n    .set_trip_computer(True)\n    .set_gps(True)\n    .build())\n\nprint(car)  # Car(seats=2, engine=V8)\n```\n\n---\n\n## Abstract Factory\n\n**Solves**: Producing families of related objects without exposing concrete classes.\n\n**When to Use**:\n- Code must work with multiple product families\n- Ensure products from same family work together\n- Adding new variants without modifying existing code\n\n```python\nfrom abc import ABC, abstractmethod\n\n# Abstract products\nclass Button(ABC):\n    @abstractmethod\n    def paint(self): pass\n\nclass Checkbox(ABC):\n    @abstractmethod\n    def paint(self): pass\n\n# Windows family\nclass WinButton(Button):\n    def paint(self):\n        return \"Windows button\"\n\nclass WinCheckbox(Checkbox):\n    def paint(self):\n        return \"Windows checkbox\"\n\n# Mac family\nclass MacButton(Button):\n    def paint(self):\n        return \"macOS button\"\n\nclass MacCheckbox(Checkbox):\n    def paint(self):\n        return \"macOS checkbox\"\n\n# Abstract factory\nclass GUIFactory(ABC):\n    @abstractmethod\n    def create_button(self) -> Button: pass\n    @abstractmethod\n    def create_checkbox(self) -> Checkbox: pass\n\n# Concrete factories\nclass WinFactory(GUIFactory):\n    def create_button(self):\n        return WinButton()\n    def create_checkbox(self):\n        return WinCheckbox()\n\nclass MacFactory(GUIFactory):\n    def create_button(self):\n        return MacButton()\n    def create_checkbox(self):\n        return MacCheckbox()\n\n# Client - works with any factory\nclass Application:\n    def __init__(self, factory: GUIFactory):\n        self.button = factory.create_button()\n        self.checkbox = factory.create_checkbox()\n\n    def render(self):\n        return f\"{self.button.paint()}, {self.checkbox.paint()}\"\n\n# Usage\napp = Application(MacFactory())\nprint(app.render())  # \"macOS button, macOS checkbox\"\n```\n",
        "core/skills/design-patterns/references/structural.md": "# Structural Patterns\n\nPatterns for object composition and relationships.\n\n## Decorator\n\n**Solves**: Adding behaviors dynamically without modifying existing code or class explosion.\n\n**When to Use**:\n- Assign extra behaviors at runtime\n- Avoid multiple inheritance combinations\n- Extend final classes that can't be subclassed\n\n```python\nfrom abc import ABC, abstractmethod\n\n# Component interface\nclass DataSource(ABC):\n    @abstractmethod\n    def write_data(self, data): pass\n    @abstractmethod\n    def read_data(self): pass\n\n# Concrete component\nclass FileDataSource(DataSource):\n    def __init__(self, filename):\n        self.filename = filename\n        self._data = \"\"\n\n    def write_data(self, data):\n        self._data = data\n        print(f\"Writing to {self.filename}: {data}\")\n\n    def read_data(self):\n        return self._data\n\n# Base decorator\nclass DataSourceDecorator(DataSource):\n    def __init__(self, source: DataSource):\n        self._wrappee = source\n\n    def write_data(self, data):\n        self._wrappee.write_data(data)\n\n    def read_data(self):\n        return self._wrappee.read_data()\n\n# Concrete decorators\nclass EncryptionDecorator(DataSourceDecorator):\n    def write_data(self, data):\n        encrypted = f\"[ENCRYPTED]{data}\"\n        self._wrappee.write_data(encrypted)\n\n    def read_data(self):\n        return f\"decrypted({self._wrappee.read_data()})\"\n\nclass CompressionDecorator(DataSourceDecorator):\n    def write_data(self, data):\n        compressed = f\"[COMPRESSED]{data}\"\n        self._wrappee.write_data(compressed)\n\n    def read_data(self):\n        return f\"decompressed({self._wrappee.read_data()})\"\n\n# Usage - chain decorators\nsource = FileDataSource(\"data.txt\")\nsource = EncryptionDecorator(source)\nsource = CompressionDecorator(source)\nsource.write_data(\"secret\")\n# Output: Writing to data.txt: [COMPRESSED][ENCRYPTED]secret\n```\n\n---\n\n## Facade\n\n**Solves**: Providing simplified interface to complex library/framework.\n\n**When to Use**:\n- Simplify interactions with complex subsystems\n- Reduce coupling between client and implementation\n- Isolate from implementation details that may change\n\n```python\n# Complex subsystem classes\nclass VideoFile:\n    def __init__(self, filename):\n        self.filename = filename\n\nclass CodecFactory:\n    @staticmethod\n    def extract(video_file):\n        return \"codec_mp4\"\n\nclass BitrateReader:\n    @staticmethod\n    def read(filename, codec):\n        return f\"Buffer({filename})\"\n\n    @staticmethod\n    def convert(buffer, codec):\n        return f\"Converted: {buffer}\"\n\nclass AudioMixer:\n    @staticmethod\n    def fix(result):\n        return f\"AudioFixed: {result}\"\n\n# Facade - simple interface\nclass VideoConverter:\n    def convert(self, filename: str, format_type: str) -> str:\n        video = VideoFile(filename)\n        codec = CodecFactory.extract(video)\n        buffer = BitrateReader.read(filename, codec)\n        result = BitrateReader.convert(buffer, format_type)\n        result = AudioMixer.fix(result)\n        return result\n\n# Usage - one simple call\nconverter = VideoConverter()\noutput = converter.convert(\"video.ogg\", \"mp4\")\nprint(output)  # \"AudioFixed: Converted: Buffer(video.ogg)\"\n```\n\n---\n\n## Adapter\n\n**Solves**: Making incompatible interfaces work together.\n\n**When to Use**:\n- Integrating existing classes with incompatible interfaces\n- Working with legacy code or third-party libraries\n- Reusing classes that lack common functionality\n\n```python\n# Target interface (what client expects)\nclass RoundPeg:\n    def __init__(self, radius):\n        self.radius = radius\n\n    def get_radius(self):\n        return self.radius\n\n# Incompatible class (can't modify)\nclass SquarePeg:\n    def __init__(self, width):\n        self.width = width\n\n    def get_width(self):\n        return self.width\n\n# Adapter - makes SquarePeg work as RoundPeg\nclass SquarePegAdapter(RoundPeg):\n    def __init__(self, square_peg: SquarePeg):\n        self.square_peg = square_peg\n\n    def get_radius(self):\n        # Calculate minimum circle radius to fit square\n        return self.square_peg.get_width() * (2**0.5) / 2\n\n# Client code\nclass RoundHole:\n    def __init__(self, radius):\n        self.radius = radius\n\n    def fits(self, peg: RoundPeg) -> bool:\n        return self.radius >= peg.get_radius()\n\n# Usage\nhole = RoundHole(5)\nround_peg = RoundPeg(4)\nsquare_peg = SquarePeg(5)\n\nprint(hole.fits(round_peg))  # True\n# print(hole.fits(square_peg))  # Error - incompatible!\n\nadapter = SquarePegAdapter(square_peg)\nprint(hole.fits(adapter))  # True - works now!\n```\n\n---\n\n## Proxy\n\n**Solves**: Controlling access to another object; adding behavior before/after requests.\n\n**When to Use**:\n- Lazy initialization (defer creation)\n- Access control (restrict which clients can use service)\n- Logging/tracking requests\n- Caching results\n- Managing remote services\n\n```python\nfrom abc import ABC, abstractmethod\n\n# Service interface\nclass YouTubeService(ABC):\n    @abstractmethod\n    def get_video_info(self, video_id: str) -> dict: pass\n    @abstractmethod\n    def download_video(self, video_id: str) -> str: pass\n\n# Real service (expensive operations)\nclass ThirdPartyYouTube(YouTubeService):\n    def get_video_info(self, video_id: str) -> dict:\n        print(f\"Fetching info for {video_id}...\")\n        return {\"id\": video_id, \"title\": \"Sample Video\"}\n\n    def download_video(self, video_id: str) -> str:\n        print(f\"Downloading {video_id}...\")\n        return f\"video_data_{video_id}\"\n\n# Caching proxy\nclass CachedYouTubeProxy(YouTubeService):\n    def __init__(self, service: YouTubeService):\n        self._service = service\n        self._cache = {}\n        self._download_cache = {}\n\n    def get_video_info(self, video_id: str) -> dict:\n        if video_id not in self._cache:\n            self._cache[video_id] = self._service.get_video_info(video_id)\n        else:\n            print(f\"Cache hit for {video_id}\")\n        return self._cache[video_id]\n\n    def download_video(self, video_id: str) -> str:\n        if video_id not in self._download_cache:\n            self._download_cache[video_id] = self._service.download_video(video_id)\n        return self._download_cache[video_id]\n\n# Usage\nyoutube = ThirdPartyYouTube()\nproxy = CachedYouTubeProxy(youtube)\n\ninfo1 = proxy.get_video_info(\"abc123\")  # Fetches from service\ninfo2 = proxy.get_video_info(\"abc123\")  # Returns cached\ninfo3 = proxy.get_video_info(\"xyz789\")  # Fetches new video\n```\n\n**Proxy Types**:\n- **Virtual Proxy**: Lazy initialization\n- **Protection Proxy**: Access control\n- **Remote Proxy**: Local interface for remote service\n- **Logging Proxy**: Track requests\n- **Caching Proxy**: Store results\n",
        "core/skills/versioning/SKILL.md": "---\nname: versioning\ndescription: Use when releasing, tagging, or bumping versions. Defines semver rules and keeps package.json/pyproject.toml synced with git tags.\n---\n\n# Versioning\n\nSemantic versioning rules and workflow for consistent releases.\n\n## Semver Rules\n\nFormat: `MAJOR.MINOR.PATCH` (e.g., `1.4.2`)\n\n| Bump | When | Examples |\n|------|------|----------|\n| **MAJOR** | Breaking changes | API removed, incompatible changes, major rewrites |\n| **MINOR** | New features (backward compatible) | New endpoint, new option, new capability |\n| **PATCH** | Bug fixes (backward compatible) | Fix crash, fix typo, fix edge case |\n\n### Decision Tree\n\n```\nIs it a breaking change?\n├── Yes → MAJOR\n└── No → Does it add new functionality?\n    ├── Yes → MINOR\n    └── No → PATCH\n```\n\n### What Counts as Breaking?\n\n**MAJOR (breaking):**\n- Removing a public function/endpoint\n- Changing function signature (required params)\n- Changing return type\n- Renaming exports\n- Dropping support for runtime/dependency\n\n**MINOR (feature):**\n- Adding new function/endpoint\n- Adding optional parameter\n- New configuration option\n- Performance improvement with no API change\n\n**PATCH (fix):**\n- Bug fix\n- Documentation fix\n- Internal refactor (no API change)\n- Dependency update (non-breaking)\n\n## Version Sync Workflow\n\n**Keep these in sync:**\n1. `package.json` version (JS/TS projects)\n2. `pyproject.toml` version (Python projects)\n3. Git tag\n\n### Release Workflow\n\n```bash\n# 1. Update version in manifest\n# package.json: \"version\": \"1.2.0\"\n# OR pyproject.toml: version = \"1.2.0\"\n\n# 2. Commit the version bump\ngit add package.json  # or pyproject.toml\ngit commit -m \"chore: bump version to 1.2.0\"\n\n# 3. Tag the commit\ngit tag -a v1.2.0 -m \"Release 1.2.0: [brief description]\"\n\n# 4. Push with tags\ngit push && git push --tags\n```\n\n### Pre-release Versions\n\nFor work-in-progress releases:\n- `1.2.0-alpha.1` - Early testing\n- `1.2.0-beta.1` - Feature complete, testing\n- `1.2.0-rc.1` - Release candidate\n\n## Common Mistakes\n\n| Mistake | Correct |\n|---------|---------|\n| Bumping MAJOR for new feature | MINOR (if backward compatible) |\n| Bumping PATCH for new option | MINOR (it's new functionality) |\n| Forgetting to tag | Always tag after version bump |\n| Tag without version update | Update manifest first, then tag |\n| Inconsistent tag format | Always use `v` prefix: `v1.2.0` |\n\n## Quick Reference\n\n```bash\n# Check current version\nnode -p \"require('./package.json').version\"\n# or\ngrep version pyproject.toml\n\n# List tags\ngit tag -l\n\n# See what changed since last tag\ngit log $(git describe --tags --abbrev=0)..HEAD --oneline\n```\n",
        "python/.claude-plugin/plugin.json": "{\n  \"name\": \"python\",\n  \"description\": \"Python development patterns: async, testing, packaging, and best practices\",\n  \"version\": \"0.1.0\",\n  \"author\": {\n    \"name\": \"rosa\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\"python\", \"async\", \"pytest\", \"packaging\", \"typing\"]\n}\n",
        "python/skills/uv-workflow/SKILL.md": "---\nname: uv-workflow\ndescription: Use when creating Python projects, managing dependencies, or running Python scripts. Covers uv package manager commands, best practices, and common patterns for modern Python development.\n---\n\n# Python Development with uv\n\nModern Python project management using uv - the fast, Rust-powered package manager.\n\n## When to Use This Skill\n\nUse this skill when:\n- **Creating new Python projects**\n- **Managing dependencies** (adding, removing, updating)\n- **Running Python scripts** in project context\n- **Setting up CI/CD** for Python projects\n- **Troubleshooting** virtual environment or dependency issues\n\n## Why uv?\n\n| Feature | uv | pip | Poetry |\n|---------|-----|-----|--------|\n| Speed | 10-100x faster | Baseline | 2-3x slower |\n| Virtual envs | Automatic | Manual | Automatic |\n| Lockfile | Cross-platform | None | Yes |\n| Python version mgmt | Built-in | No | No |\n| Dev dependencies | Groups | No | Yes |\n\n## Quick Reference\n\n### Project Setup\n```bash\nuv init                     # Create app project\nuv init --package           # Create package (src/ layout)\nuv init --lib               # Create library\n```\n\n### Dependencies\n```bash\nuv add requests             # Add dependency\nuv add -d pytest            # Add dev dependency\nuv add 'requests>=2.28'     # With version constraint\nuv remove requests          # Remove dependency\nuv lock --upgrade           # Update all dependencies\n```\n\n### Running Code\n```bash\nuv run python main.py       # Run script in project env\nuv run pytest               # Run tools with dependencies\nuvx ruff check .            # Run standalone tool (isolated)\n```\n\n### Environment\n```bash\nuv sync                     # Sync env with lockfile\nuv sync --all-groups        # Include all dependency groups\nuv python install 3.11      # Install Python version\nuv python pin 3.11          # Pin project to version\n```\n\n## Critical Rules\n\n### Always Use `uv run`\n\n**Wrong** - bypasses project environment:\n```bash\npython main.py\npytest\n```\n\n**Correct** - uses project environment:\n```bash\nuv run python main.py\nuv run pytest\n```\n\n### `uv run` vs `uvx`\n\n| Command | Use For |\n|---------|---------|\n| `uv run pytest` | Tools that need your project code |\n| `uvx ruff check` | Standalone tools (linters, formatters) |\n\n**Gotcha**: `uvx pytest` won't see your project code!\n\n## Project Structure\n\nuv creates this automatically:\n```\nmy-project/\n├── .venv/              # Auto-created, git-ignored\n├── .python-version     # Python version pin\n├── pyproject.toml      # Project config\n├── uv.lock             # Deterministic lockfile (commit this!)\n└── src/                # Source code (if --package)\n```\n\n## Dependency Groups\n\n```toml\n# pyproject.toml\n[project]\ndependencies = [\"requests\", \"click\"]\n\n[dependency-groups]\ndev = [\"pytest\", \"black\", \"ruff\"]\ndocs = [\"sphinx\"]\ntest = [\"pytest-cov\"]\n```\n\n```bash\nuv add -d pytest              # Add to dev group\nuv add --group docs sphinx    # Add to named group\nuv sync --group docs          # Install specific group\nuv sync --all-groups          # Install all groups\n```\n\n## Reference Files\n\n- `references/commands.md` - Complete command reference\n- `references/workflows.md` - Common workflows and patterns\n- `references/gotchas.md` - Important gotchas and troubleshooting\n\n## Common Workflows\n\n### New Project\n```bash\nuv init my-project\ncd my-project\nuv add requests click\nuv add -d pytest black ruff\nuv run python -c \"print('Ready!')\"\n```\n\n### Existing Project (clone)\n```bash\ngit clone repo\ncd repo\nuv sync --all-groups    # Install from lockfile\nuv run pytest           # Run tests\n```\n\n### Update Dependencies\n```bash\nuv lock --upgrade                    # Update all\nuv lock --upgrade-package requests   # Update specific\nuv sync                              # Apply updates\n```\n\n### Fresh Start (troubleshooting)\n```bash\nrm -rf .venv uv.lock\nuv sync\n```\n\n## Files to Commit\n\n| File | Commit? | Why |\n|------|---------|-----|\n| `pyproject.toml` | Yes | Project definition |\n| `uv.lock` | Yes | Reproducible environments |\n| `.python-version` | Yes | Python version consistency |\n| `.venv/` | No | Local environment |\n",
        "python/skills/uv-workflow/references/commands.md": "# uv Command Reference\n\n## Project Initialization\n\n```bash\nuv init                          # Create default app project\nuv init --package                # Package with src/ layout\nuv init --lib                    # Library project\nuv init --app my-project         # Create in directory\nuv init --bare                   # Minimal structure\n```\n\n## Dependency Management\n\n### Adding Dependencies\n```bash\nuv add requests                  # Add production dependency\nuv add 'requests>=2.28.0'        # With version constraint\nuv add 'requests>=2.28,<3.0'     # Version range\nuv add requests aiohttp          # Multiple packages\n\n# Dev dependencies\nuv add -d pytest                 # Short flag\nuv add --dev pytest              # Long flag\nuv add --group test pytest-cov   # Named group\nuv add --optional aws boto3      # Optional extras (for packages)\n```\n\n### Removing Dependencies\n```bash\nuv remove requests               # Remove package\nuv remove -d pytest              # Remove from dev\n```\n\n### Updating Dependencies\n```bash\nuv lock --upgrade                     # Update all to latest\nuv lock --upgrade-package requests    # Update specific package\nuv lock --upgrade-package 'req*'      # Wildcard match\n```\n\n## Virtual Environments\n\n```bash\nuv sync                          # Sync env with lockfile\nuv sync --all-groups             # Include all dependency groups\nuv sync --group dev --group test # Specific groups\nuv sync --no-dev                 # Without dev dependencies\nuv sync --all-extras             # Include optional dependencies\nuv sync --frozen                 # Don't update lockfile\nuv sync --dry-run                # Preview what would change\n\nuv venv                          # Create .venv manually\nuv venv --python 3.11            # With specific Python\nuv venv myenv                    # Custom name\n```\n\n## Running Code\n\n### Project Scripts\n```bash\nuv run python main.py            # Run script\nuv run python -m mypackage       # Run module\nuv run pytest                    # Run installed tools\nuv run pytest -v tests/          # With arguments\nuv run --python 3.11 main.py     # Force Python version\n```\n\n### Standalone Tools (uvx)\n```bash\nuvx ruff check .                 # Linter (isolated)\nuvx black .                      # Formatter (isolated)\nuvx mypy src/                    # Type checker (isolated)\nuvx cowsay hello                 # Any PyPI tool\n```\n\n## Python Version Management\n\n```bash\nuv python install 3.11           # Install specific version\nuv python install 3.10 3.11 3.12 # Multiple versions\nuv python list                   # Show installed versions\nuv python pin 3.11               # Pin project version\nuv python pin 3.11.0             # Pin exact version\n```\n\n## Building & Publishing\n\n```bash\nuv build                         # Create wheel and sdist\nuv build --wheel                 # Wheel only\nuv build --sdist                 # Source dist only\nuv publish                       # Publish to PyPI\nuv publish --token $PYPI_TOKEN   # With token\n```\n\n## Utility Commands\n\n```bash\nuv version                       # Show uv version\nuv version --short               # Just version number\nuv cache clean                   # Clear cache\nuv cache dir                     # Show cache location\n```\n\n## Environment Variables\n\n```bash\nUV_PROJECT_ENVIRONMENT=./envs    # Custom venv location\nUV_PYTHON=3.11                   # Default Python version\nUV_INDEX_URL=https://...         # Custom PyPI index\nUV_EXTRA_INDEX_URL=https://...   # Additional index\nUV_NO_CACHE=1                    # Disable caching\n```\n",
        "python/skills/uv-workflow/references/gotchas.md": "# uv Gotchas and Troubleshooting\n\n## Critical Gotchas\n\n### 1. Always Use `uv run` for Project Code\n\n**Problem**: Running `python script.py` directly uses system Python, not project environment.\n\n```bash\n# WRONG - bypasses project environment\npython main.py\npytest\n\n# CORRECT - uses project environment\nuv run python main.py\nuv run pytest\n```\n\n**Why it matters**: Without `uv run`, your code can't access project dependencies.\n\n---\n\n### 2. `uv run` vs `uvx` Confusion\n\n**Problem**: Using `uvx` for tools that need your project code.\n\n| Situation | Use |\n|-----------|-----|\n| Running your project's pytest | `uv run pytest` |\n| Running standalone linter | `uvx ruff check .` |\n| Type checking your code | `uv run mypy src/` |\n\n```bash\n# WRONG - pytest can't find your code\nuvx pytest\n\n# CORRECT - pytest sees your project\nuv run pytest\n```\n\n**Rule**: If the tool needs to import your code, use `uv run`.\n\n---\n\n### 3. Python Version Mismatch\n\n**Problem**: uv selects unexpected Python version.\n\n**Symptoms**:\n- Import errors for installed packages\n- \"No wheel available\" errors\n\n**Solution**:\n```bash\n# Check current version\ncat .python-version\n\n# Pin specific version\nuv python pin 3.11\n\n# Force version in command\nuv run --python 3.11 main.py\n```\n\n---\n\n### 4. Missing Build Tools (Windows)\n\n**Problem**: Package installation fails requiring C compiler.\n\n**Error**: \"Microsoft Visual C++ 14.0 or greater is required\"\n\n**Solutions**:\n1. Install Visual Studio Build Tools\n2. Use a package with prebuilt wheels\n3. Check for pure-Python alternative\n\n---\n\n### 5. Stale Virtual Environment\n\n**Problem**: Environment out of sync with lockfile.\n\n**Symptoms**:\n- Import errors after pulling changes\n- Version mismatches\n\n**Solution**:\n```bash\n# Quick fix\nuv sync\n\n# Nuclear option\nrm -rf .venv uv.lock\nuv sync\n```\n\n---\n\n## Common Error Messages\n\n### \"No solution found\"\n\n**Cause**: Dependency conflict.\n\n**Fix**:\n```bash\n# See what's conflicting\nuv lock --verbose\n\n# Try upgrading everything\nuv lock --upgrade\n```\n\n### \"Package not found\"\n\n**Cause**: Typo or package name differs from import name.\n\n**Fix**:\n```bash\n# Search PyPI\nuvx pip search package-name\n\n# Common examples:\nuv add pillow        # import PIL\nuv add python-dotenv # import dotenv\nuv add beautifulsoup4 # import bs4\n```\n\n### \"Wheel not available\"\n\n**Cause**: No prebuilt wheel for your platform/Python version.\n\n**Fixes**:\n1. Try different Python version\n2. Install build dependencies\n3. Check for alternative package\n\n---\n\n## Best Practices\n\n### Commit These Files\n\n```\n✓ pyproject.toml    # Project definition\n✓ uv.lock           # Reproducible environments\n✓ .python-version   # Python version consistency\n✗ .venv/            # Never commit (local only)\n```\n\n### Dependency Organization\n\n```toml\n[project]\ndependencies = [\n    \"fastapi\",\n    \"sqlalchemy\",\n]\n\n[dependency-groups]\ndev = [\"pytest\", \"black\", \"ruff\", \"mypy\"]\ndocs = [\"sphinx\", \"sphinx-rtd-theme\"]\n```\n\n### Version Constraints\n\n```bash\n# Flexible (recommended for apps)\nuv add requests\n\n# Minimum version\nuv add 'requests>=2.28'\n\n# Exact pin (for reproducibility)\nuv add 'requests==2.31.0'\n\n# Range\nuv add 'requests>=2.28,<3.0'\n```\n\n---\n\n## Troubleshooting Checklist\n\n1. **Import not found?**\n   - Are you using `uv run`?\n   - Is package in `pyproject.toml`?\n   - Run `uv sync`\n\n2. **Wrong version?**\n   - Check `uv.lock`\n   - Run `uv lock --upgrade-package <name>`\n   - Run `uv sync`\n\n3. **Environment issues?**\n   - Delete `.venv` and `uv.lock`\n   - Run `uv sync`\n\n4. **CI failing?**\n   - Commit `uv.lock`\n   - Use `uv sync --frozen` in CI\n   - Check Python version matches\n\n5. **Slow first run?**\n   - Normal - uv caches for subsequent runs\n   - Check network/proxy settings\n",
        "python/skills/uv-workflow/references/workflows.md": "# Common uv Workflows\n\n## New Project from Scratch\n\n```bash\n# 1. Create project\nuv init my-app\ncd my-app\n\n# 2. Add dependencies\nuv add fastapi uvicorn\nuv add -d pytest black ruff mypy\n\n# 3. Start coding\nuv run python -c \"print('Ready!')\"\n```\n\n## Clone and Setup Existing Project\n\n```bash\ngit clone https://github.com/org/repo\ncd repo\nuv sync --all-groups    # Reproducible from lockfile\nuv run pytest           # Verify setup\n```\n\n## CI/CD Pipeline\n\n```yaml\n# GitHub Actions\nname: CI\non: [push, pull_request]\n\njobs:\n  test:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Install uv\n        uses: astral-sh/setup-uv@v4\n\n      - name: Install dependencies\n        run: uv sync --all-groups\n\n      - name: Lint\n        run: uv run ruff check .\n\n      - name: Type check\n        run: uv run mypy src/\n\n      - name: Test\n        run: uv run pytest --cov\n```\n\n## Docker Build\n\n```dockerfile\nFROM python:3.11-slim\n\n# Install uv\nCOPY --from=ghcr.io/astral-sh/uv:latest /uv /bin/uv\n\n# Copy dependency files first (cache layer)\nCOPY pyproject.toml uv.lock ./\n\n# Install dependencies\nRUN uv sync --frozen --no-dev\n\n# Copy source code\nCOPY src/ src/\n\n# Run\nCMD [\"uv\", \"run\", \"python\", \"-m\", \"myapp\"]\n```\n\n## Monorepo with Workspaces\n\n```\nmonorepo/\n├── pyproject.toml          # Workspace root\n├── uv.lock                 # Shared lockfile\n├── packages/\n│   ├── core/\n│   │   └── pyproject.toml\n│   └── api/\n│       └── pyproject.toml\n```\n\nRoot pyproject.toml:\n```toml\n[tool.uv.workspace]\nmembers = [\"packages/*\"]\n```\n\n## Inline Script Dependencies (PEP 723)\n\nFor standalone scripts that need dependencies:\n\n```python\n#!/usr/bin/env python3\n# /// script\n# dependencies = [\n#   \"requests>=2.31.0\",\n#   \"click>=8.0.0\",\n# ]\n# ///\n\nimport requests\nimport click\n\n@click.command()\n@click.argument('url')\ndef fetch(url):\n    response = requests.get(url)\n    click.echo(response.text[:100])\n\nif __name__ == \"__main__\":\n    fetch()\n```\n\nRun it:\n```bash\nuv run script.py https://example.com\n# uv auto-installs dependencies from script header\n```\n\n## Migration from Poetry\n\n```bash\n# 1. Export from Poetry\npoetry export -f requirements.txt > requirements.txt\n\n# 2. Init uv project\nuv init\n\n# 3. Add dependencies\nuv add $(cat requirements.txt | cut -d'=' -f1)\n\n# 4. Remove Poetry files\nrm poetry.lock pyproject.toml  # (backup first!)\n```\n\n## Migration from pip/requirements.txt\n\n```bash\n# 1. Init uv project\nuv init\n\n# 2. Add dependencies\nuv add -r requirements.txt\n\n# 3. Add dev dependencies\nuv add -d -r requirements-dev.txt\n\n# 4. Verify\nuv run python -c \"import mypackage\"\n```\n\n## Development Server Workflow\n\n```bash\n# Terminal 1: Run server with auto-reload\nuv run uvicorn main:app --reload\n\n# Terminal 2: Run tests on change\nuv run pytest-watch\n\n# Terminal 3: Type checking\nuv run mypy src/ --watch\n```\n\n## Publishing a Package\n\n```bash\n# 1. Ensure package structure\nuv init --package my-library\n\n# 2. Build\nuv build\n\n# 3. Test locally\nuvx twine check dist/*\n\n# 4. Publish\nuv publish --token $PYPI_TOKEN\n```\n",
        "sveltekit/.claude-plugin/plugin.json": "{\n  \"name\": \"sveltekit\",\n  \"description\": \"Expert guidance for SvelteKit with Svelte 5, runes, remote functions, and recommended stack\",\n  \"version\": \"1.0.0\",\n  \"author\": {\n    \"name\": \"rosa\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\"sveltekit\", \"svelte5\", \"runes\", \"kysely\", \"better-auth\", \"shadcn-svelte\", \"ai-sdk\"]\n}\n",
        "sveltekit/skills/sveltekit-builder/SKILL.md": "---\nname: sveltekit-builder\ndescription: Use when building SvelteKit apps with Svelte 5. Covers runes, SSR, forms, and stack patterns (Kysely, Better Auth, shadcn-svelte).\nlicense: MIT\nmetadata:\n  author: rosa\n  version: \"1.0\"\n---\n\n# SvelteKit Builder\n\nExpert guidance for building production-ready SvelteKit applications with Svelte 5 runes, remote functions, and modern best practices.\n\n## When to Use This Skill\n\nUse this skill when:\n- **Scaffolding new SvelteKit projects** with Svelte 5\n- **Migrating from Svelte 4 to Svelte 5** (reactivity model changed fundamentally)\n- **Implementing remote functions** (SvelteKit's type-safe server functions)\n- **Optimizing performance** (bundle size, SSR, hydration, rendering)\n- **Applying security patterns** (XSS prevention, input validation, secret management)\n- **Integrating recommended stack** (Kysely, Better Auth, shadcn-svelte, Lucide, AI SDK)\n- **Code reviews** where Svelte/SvelteKit patterns need validation\n- **Debugging reactivity issues** or SSR hydration mismatches\n\n## Knowledge Base Structure\n\nThis skill contains **105+ best practice rules** organized by impact and category:\n\n### Svelte 5 Specific (`svelte5/`) - 66 rules\n\n**CRITICAL Impact:**\n- **Reactivity** (`reactivity-*`): $state, $derived, $effect - The foundation changed completely from Svelte 4\n- **Remote Functions** (`remote-*`): Type-safe server functions in .remote.ts files\n- **Security** (`template-html-*`): XSS prevention with {@html}\n- **Async & Data Fetching** (`async-*`): Waterfalls, {#await}, svelte:boundary\n\n**HIGH Impact:**\n- **Component Patterns** (`component-*`): $props, callbacks, snippets (not slots anymore)\n- **SSR & Hydration** (`ssr-*`): Server rendering, hydration mismatches\n- **SvelteKit Patterns** (`sveltekit-*`): Load functions, form actions, error handling\n- **Actions** (`actions-*`): Reusable DOM behavior\n- **Accessibility** (`a11y-*`): Compiler warnings\n\n**MEDIUM Impact:**\n- **State Management** (`state-*`): Shared state, context, stores vs runes\n- **Rendering Optimization** (`rendering-*`): Keyed {#each}, unnecessary reactivity\n- **CSS & Styling** (`css-*`): Scoped styles, theming\n- **Forms** (`forms-*`): Form handling patterns\n- **Transitions & Animation** (`transitions-*`): Smooth animations\n- **Events** (`events-*`): onclick vs on:click\n- **Special Elements** (`elements-*`): svelte:head, svelte:window, svelte:body\n- **Template Patterns** (`template-*`): {@const}, {#key}, {#if}\n\n**LOWER Impact:**\n- **TypeScript** (`typescript-*`): Props interfaces, generics with snippets\n\n### Framework-Agnostic (`general/`) - 15 rules\n\n**HIGH Impact:**\n- **Bundle Optimization** (`bundle-*`): Dynamic imports, tree-shaking, lazy loading\n- **Security** (`security-*`): Input sanitization\n- **Rendering Performance** (`rendering-*`): content-visibility, layout thrashing\n\n**LOWER Impact:**\n- **JavaScript Performance** (`js-*`): Promise.all, Set/Map, debouncing\n\n### Third-Party Stack (`third-party/`) - 24+ rules\n\nOpinionated patterns for the recommended SvelteKit stack:\n\n- **Kysely** (`kysely/*`): Type-safe SQL, connection pooling, transactions\n- **Better Auth** (`better-auth/*`): Session management, route protection, OAuth\n- **shadcn-svelte** (`shadcn-svelte/*`): Accessible components, dark mode, Superforms\n- **Lucide Svelte** (`lucide-svelte/*`): Tree-shakeable icons\n- **AI SDK** (`ai-sdk/*`): Streaming, tool validation, API key management\n\n## How to Use This Skill\n\n### 1. Start with Critical Rules\n\nWhen working on SvelteKit projects, **always check CRITICAL impact rules first**:\n\n```bash\nreferences/svelte5/reactivity-use-state-explicit.md\nreferences/svelte5/remote-separate-files.md\nreferences/svelte5/remote-validate-inputs.md\nreferences/svelte5/template-html-xss.md\nreferences/svelte5/sveltekit-parallel-load.md\n```\n\nThese prevent silent bugs, security vulnerabilities, and performance issues.\n\n### 2. Reference Rules by Category\n\nWhen implementing specific features, consult the relevant category:\n\n- **Building a form?** → Check `forms-*` and `remote-*` (form actions)\n- **Data fetching?** → Check `async-*` and `sveltekit-*` (load functions)\n- **Component communication?** → Check `component-*` ($props, callbacks, snippets)\n- **Performance issues?** → Check `bundle-*`, `rendering-*`, and `async-parallel-fetching`\n- **Hydration errors?** → Check `ssr-*` rules\n\n### 3. Use the Sections Guide\n\nRefer to `references/_sections.md` for:\n- Complete category breakdown\n- Impact levels for each prefix\n- Rule counts per category\n- Comparison with React patterns (for developers migrating)\n\n### 4. Follow Rule Format\n\nEach rule file contains:\n- **Impact level** and description\n- **Explanation** of why it matters\n- **Incorrect example** showing the anti-pattern\n- **Correct example** showing the best practice\n- **Reference links** to official documentation\n\n## Key Principles\n\n### Svelte 5 Migration Critical Points\n\n**Reactivity is no longer automatic:**\n- Svelte 4: `let count = 0;` was reactive\n- Svelte 5: Must use `let count = $state(0);` explicitly\n\n**No more createEventDispatcher:**\n- Svelte 4: `dispatch('change', value)`\n- Svelte 5: Pass callbacks as props\n\n**Slots are now snippets:**\n- Svelte 4: `<slot name=\"header\" />`\n- Svelte 5: `{@render header()}`\n\n**Effects need cleanup:**\n- Always return cleanup functions from `$effect` to prevent memory leaks\n\n### Remote Functions (SvelteKit's Server Functions)\n\nRemote functions are SvelteKit's type-safe server functions (similar to React Server Actions):\n\n1. **Always use `.remote.ts` files** - Never colocate with client code\n2. **Validate inputs with Zod** - Prevent injection attacks\n3. **Use `query()` for reads** - Automatically cached\n4. **Use `form()` for mutations** - Progressive enhancement with `use:enhance`\n5. **Batch queries** - Avoid N+1 problems\n\n### Performance Priorities\n\n1. **Bundle size** - Dynamic imports, tree-shaking (HIGH impact on TTI)\n2. **Parallel data fetching** - Use Promise.all in load functions (CRITICAL)\n3. **SSR optimization** - Avoid hydration mismatches, use hydratable()\n4. **Strategic boundaries** - Place {#await} and svelte:boundary wisely\n\n## Common Patterns\n\n### Data Fetching Pattern\n```svelte\n<script lang=\"ts\">\n  import { getUsers, createUser } from './users.remote.ts';\n  \n  // query() returns a promise - use with {#await}\n  const users = getUsers();\n</script>\n\n{#await users}\n  <p>Loading...</p>\n{:then items}\n  {#each items as user (user.id)}\n    <p>{user.name}</p>\n  {/each}\n{:catch error}\n  <p>Error: {error.message}</p>\n{/await}\n```\n\n### Form with Progressive Enhancement\n```svelte\n<script lang=\"ts\">\n  import { createUser } from './users.remote.ts';\n</script>\n\n<form {...createUser}>\n  <input name=\"name\" required />\n  <input name=\"email\" type=\"email\" required />\n  <button>Create User</button>\n</form>\n```\n\n### Component with Props\n```svelte\n<script lang=\"ts\">\n  interface Props {\n    title: string;\n    count?: number;\n    onUpdate?: (value: number) => void;\n  }\n  \n  let { title, count = 0, onUpdate }: Props = $props();\n  let localCount = $state(count);\n  \n  function increment() {\n    localCount++;\n    onUpdate?.(localCount);\n  }\n</script>\n\n<h2>{title}</h2>\n<button onclick={increment}>Count: {localCount}</button>\n```\n\n## Reference Files\n\nAll rules are in the `references/` directory:\n\n- `references/_sections.md` - Complete category breakdown and comparison tables\n- `references/_template.md` - Template for creating new rules\n- `references/svelte5/*.md` - 66 Svelte 5 and SvelteKit rules\n- `references/general/*.md` - 15 framework-agnostic rules\n- `references/third-party/*/` - 24+ rules for Kysely, Better Auth, shadcn-svelte, Lucide, AI SDK\n\n## When NOT to Use Stores\n\nSvelte 5 runes (`$state`, `$derived`, `$effect`) should be preferred over stores for most use cases:\n\n**Use runes when:**\n- Component-local state\n- Derived computations\n- Simple shared state in `.svelte.js` files\n\n**Use stores when:**\n- Interoperating with Svelte 4 libraries\n- Need subscribe/unsubscribe lifecycle\n- Complex pub/sub patterns\n\nSee `references/svelte5/state-stores-vs-runes.md` for details.\n\n## Integration with Third-Party Libraries\n\nThis skill includes opinionated guidance for the recommended SvelteKit stack. When using these libraries, consult the relevant third-party rules:\n\n- **Database queries** → `references/third-party/kysely/`\n- **Authentication** → `references/third-party/better-auth/`\n- **UI components** → `references/third-party/shadcn-svelte/`\n- **Icons** → `references/third-party/lucide-svelte/`\n- **AI/LLM features** → `references/third-party/ai-sdk/`\n\n## Progressive Disclosure\n\nThis SKILL.md provides high-level guidance. Reference individual rule files for:\n- Detailed explanations\n- Code examples (Incorrect vs Correct)\n- Impact descriptions\n- Official documentation links\n\nAgents should load reference files on-demand based on the specific task at hand, keeping context efficient.\n",
        "sveltekit/skills/sveltekit-builder/references/_sections.md": "# Svelte 5 Best Practices - Section Definitions\n\nRules are organized into two namespaces:\n- **`svelte5/`** - Svelte 5 & SvelteKit specific patterns (66 rules)\n- **`general/`** - Framework-agnostic patterns (15 rules)\n\n---\n\n# Svelte 5 Specific (`svelte5/`)\n\n## Critical Impact\n\n### Reactivity Fundamentals (reactivity-)\n**The foundation of Svelte 5 applications.** Incorrect use of runes leads to bugs, infinite loops, or non-reactive code.\n- `reactivity-use-state-explicit` - Use $state for reactive variables\n- `reactivity-derived-not-effect` - Use $derived for computed values\n- `reactivity-no-state-mutation-in-derived` - Never mutate state in $derived\n- `reactivity-effect-cleanup` - Return cleanup functions from $effect\n\n### Remote Functions (remote-)\n**Type-safe server functions.** SvelteKit's equivalent to React Server Actions.\n- `remote-separate-files` - Keep remote functions in .remote.ts files (CRITICAL)\n- `remote-validate-inputs` - Validate inputs with Zod (CRITICAL)\n- `remote-query-vs-command` - Query for reads, form/command for mutations\n- `remote-form-progressive` - Use form() for progressive enhancement\n- `remote-optimistic-updates` - Use override() for optimistic UI\n- `remote-batch-queries` - Batch queries to avoid N+1\n\n### Security (template-html-)\n**Prevent XSS attacks.** {@html} is dangerous with untrusted content.\n- `template-html-xss` - {@html} is dangerous with untrusted content\n\n### Async & Data Fetching (async-)\n**Eliminating waterfalls and handling async states.**\n- `async-parallel-fetching` - Use Promise.all for independent requests\n- `async-await-blocks` - Use {#await} for promise handling\n- `async-boundary-pending` - Use svelte:boundary for loading states\n- `async-error-boundaries` - Use svelte:boundary for error handling\n- `async-suspense-boundaries-strategic` - Place boundaries strategically\n\n---\n\n## High Impact\n\n### Component Patterns (component-)\n**Props, events, and composition.** Using $props, callbacks, and snippets correctly.\n- `component-props-destructure` - Use $props() for properties\n- `component-callback-props` - Use callbacks instead of createEventDispatcher\n- `component-snippets-not-slots` - Use snippets instead of slots\n- `component-bindable-sparingly` - Use $bindable sparingly\n\n### SSR & Hydration (ssr-)\n**Server rendering without mismatches.**\n- `ssr-preserve-comments` - Preserve comments for hydration\n- `ssr-hydration-mismatch` - Avoid server/client mismatches\n- `ssr-inline-script-no-flicker` - Use inline scripts to prevent flicker\n- `ssr-hydratable-dedup` - Use hydratable() to prevent re-fetching\n\n### SvelteKit Patterns (sveltekit-)\n**Framework-level best practices.**\n- `sveltekit-load-server-vs-universal` - Server vs universal load functions\n- `sveltekit-form-actions` - Use form actions for mutations\n- `sveltekit-error-handling` - Use error() helper and +error.svelte\n- `sveltekit-env-variables` - Protect secrets with $env/static/private\n- `sveltekit-preload-data` - Prefetch data on hover\n- `sveltekit-parallel-load` - Fetch data in parallel in load functions (CRITICAL)\n- `sveltekit-streaming-defer` - Stream non-critical data\n- `sveltekit-cache-headers` - Set cache headers for data\n\n### Actions & Cleanup (actions-)\n**Reusable DOM behavior with proper cleanup.**\n- `actions-reusable-dom` - Use actions for reusable DOM behavior\n- `actions-cleanup-return` - Actions must return destroy()\n\n### Accessibility (a11y-)\n**Don't ignore compiler warnings.**\n- `a11y-compiler-warnings` - Address Svelte's a11y warnings\n\n---\n\n## Medium Impact\n\n### State Management (state-)\n**Organizing application state.**\n- `state-shared-svelte-files` - Use .svelte.js for shared state\n- `state-raw-for-classes` - Use $state.raw for class instances\n- `state-context-for-subtrees` - Use context to avoid prop drilling\n- `state-stores-vs-runes` - When to use stores vs runes\n- `state-derived-by-complex` - Use $derived.by for complex derivations\n- `state-inspect-debugging` - Use $inspect for debugging\n- `state-lazy-initialization` - Use functions for expensive state init\n\n### Rendering Optimization (rendering-)\n**Minimizing DOM updates.**\n- `rendering-keyed-each` - Use keys in {#each} blocks\n- `rendering-avoid-unnecessary-reactivity` - Don't make everything reactive\n\n### CSS & Styling (css-)\n**Scoped styles and theming.**\n- `css-scoped-by-default` - Styles are scoped by default\n- `css-global-sparingly` - Use :global() sparingly\n- `css-style-directive` - Use style:prop={value} directive\n- `css-class-directive` - Use class:name={condition} directive\n- `css-custom-properties-theming` - Use CSS custom properties for theming\n\n### Forms (forms-)\n**Form handling patterns.**\n- `forms-bind-value` - Use bind:value for inputs\n- `forms-bind-group` - Use bind:group for radio/checkbox groups\n- `forms-enhance-action` - Use SvelteKit's enhance action\n\n### Transitions & Animation (transitions-)\n**Smooth animations with accessibility.**\n- `transitions-use-local` - Use |local modifier\n- `transitions-prefer-css` - Prefer CSS transitions over JS\n- `transitions-reduced-motion` - Respect prefers-reduced-motion\n\n### Events (events-)\n**Modern event patterns.**\n- `events-onclick-not-on` - Use onclick instead of on:click\n- `events-modifiers-wrapper` - Use wrapper functions for modifiers\n\n### Special Elements (elements-)\n**Svelte's special element syntax.**\n- `elements-svelte-head` - Use svelte:head for document head\n- `elements-svelte-window` - Use svelte:window for window events\n- `elements-svelte-body` - Use svelte:body for body events\n- `elements-dynamic-components` - Components are dynamic by default\n\n### Template Patterns (template-)\n**Template syntax best practices.**\n- `template-const-simplify` - Use {@const} to simplify expressions\n- `template-key-reset` - Use {#key} to reset component state\n- `template-if-vs-ternary` - Prefer {#if} over complex ternaries\n\n---\n\n## Lower Impact\n\n### TypeScript (typescript-)\n**Type safety patterns.**\n- `typescript-props-interface` - Define Props interface\n- `typescript-generics-snippets` - Use generics with snippets\n\n---\n\n# Framework-Agnostic (`general/`)\n\nThese patterns apply to any JavaScript framework or vanilla JS.\n\n## High Impact\n\n### Bundle Optimization (bundle-)\n**Shrinking initial payload.** Affects Time to Interactive and LCP.\n- `bundle-dynamic-imports` - Code split with dynamic import()\n- `bundle-tree-shake-imports` - Import specific functions\n- `bundle-lazy-components` - Lazy load heavy components\n- `bundle-avoid-barrel-imports` - Avoid barrel index files\n- `bundle-preload-critical` - Preload critical assets\n\n### Security (security-)\n**Input validation and sanitization.**\n- `security-sanitize-input` - Always sanitize user input\n\n### Rendering Performance (rendering-)\n**Browser rendering optimizations.**\n- `rendering-content-visibility` - Use content-visibility: auto for long lists\n- `rendering-reduce-layout-thrashing` - Batch DOM reads and writes\n- `rendering-will-change` - Use will-change sparingly\n\n---\n\n## Lower Impact\n\n### JavaScript Performance (js-)\n**Hot-path optimizations.**\n- `js-parallel-promises` - Use Promise.all for independent operations\n- `js-early-exit` - Return early to avoid computation\n- `js-set-map-lookups` - Use Set/Map for O(1) lookups\n- `js-cache-expensive-computations` - Cache expensive operations\n- `js-avoid-unnecessary-spread` - Don't spread unnecessarily\n- `js-debounce-rapid-events` - Debounce rapid-fire events\n\n---\n\n# Summary\n\n| Namespace | Rules | Description |\n|-----------|-------|-------------|\n| `svelte5/` | 66 | Svelte 5 runes, SvelteKit, Remote Functions, SSR |\n| `general/` | 15 | JS performance, bundling, rendering, security |\n| `third-party/` | 24 | Kysely, Better Auth, shadcn-svelte, Lucide, AI SDK |\n| **Total** | **105** | |\n\n## Svelte 5 Categories\n\n| Prefix | Category | Impact | Count |\n|--------|----------|--------|-------|\n| `reactivity-` | Reactivity | Critical | 4 |\n| `remote-` | Remote Functions | Critical/High | 6 |\n| `template-html-` | Security | Critical | 1 |\n| `async-` | Async | Critical/Medium | 5 |\n| `component-` | Components | High | 4 |\n| `ssr-` | SSR/Hydration | High | 4 |\n| `sveltekit-` | SvelteKit | Critical/High/Medium | 8 |\n| `actions-` | Actions | High | 2 |\n| `a11y-` | Accessibility | High | 1 |\n| `state-` | State | Medium | 7 |\n| `rendering-` | Rendering | Medium | 2 |\n| `css-` | CSS | Medium | 5 |\n| `forms-` | Forms | Medium | 3 |\n| `transitions-` | Transitions | Medium | 3 |\n| `events-` | Events | Medium | 2 |\n| `elements-` | Elements | Medium | 4 |\n| `template-` | Templates | Medium | 3 |\n| `typescript-` | TypeScript | Lower | 2 |\n\n## General Categories\n\n| Prefix | Category | Impact | Count |\n|--------|----------|--------|-------|\n| `bundle-` | Bundle Optimization | High | 5 |\n| `security-` | Security | High | 1 |\n| `rendering-` | Rendering Performance | High/Medium | 3 |\n| `js-` | JS Performance | Lower | 6 |\n\n---\n\n# Third-Party Stack (`third-party/`)\n\nOpinionated patterns for our recommended SvelteKit stack.\n\n## Kysely (Database)\nType-safe SQL query builder - cleaner API than Drizzle.\n- `connection-pooling` - Use connection pooling for serverless (CRITICAL)\n- `parameterized-queries` - Always use parameterized queries (CRITICAL)\n- `type-safe-queries` - Generate types from database schema\n- `transactions-actions` - Use transactions in form actions\n- `load-vs-action` - Reads in load, writes in actions\n- `select-specific-columns` - Select only required columns\n\n## Better Auth (Authentication)\nModern auth library with excellent DX.\n- `hooks-handle` - Validate sessions in hooks.server.ts (CRITICAL)\n- `protect-routes` - Protect routes in handle, not load (CRITICAL)\n- `session-locals` - Access session via event.locals\n- `oauth-callbacks` - Handle OAuth callbacks properly\n- `csrf-protection` - Enable CSRF protection\n- `secure-cookies` - Configure secure cookie settings\n\n## shadcn-svelte (UI Components)\nAccessible components built on Bits UI.\n- `compose-dont-override` - Compose components, don't override\n- `bits-ui-primitives` - Understand Bits UI for customization\n- `form-integration` - Integrate with Superforms\n- `dark-mode-setup` - Set up dark mode with mode-watcher\n- `accessible-patterns` - Maintain accessibility when customizing\n\n## Lucide Svelte (Icons)\nTree-shakeable icon library for Svelte 5.\n- `tree-shake-imports` - Import icons individually\n- `consistent-sizing` - Use consistent sizing with props\n- `accessibility-labels` - Add accessible labels to icons\n\n## AI SDK (AI/LLM)\nVercel's toolkit for AI applications.\n- `tool-validation` - Validate tool inputs with Zod (CRITICAL)\n- `env-private` - Import API keys from $env/static/private (CRITICAL)\n- `streaming-endpoint` - Use streamText for chat endpoints\n- `chat-class` - Use Chat class for UI state management\n\n---\n\n## Comparison with React Best Practices\n\n| Feature | React Rules | Svelte Rules | Notes |\n|---------|-------------|--------------|-------|\n| Server Functions | Server Actions | Remote Functions | Both: type-safe mutations |\n| Data Fetching | SWR, React Query | query(), {#await} | Built-in vs library |\n| Suspense | Suspense boundaries | svelte:boundary | Similar concepts |\n| Hydration | useEffect workarounds | hydratable(), inline scripts | Svelte has better primitives |\n| Reactivity | useState, useMemo, useCallback | $state, $derived | Svelte is simpler |\n| Forms | Server Actions | form(), use:enhance | Both progressive enhancement |\n| Caching | React.cache(), SWR | query caching, headers | Different approaches |\n",
        "sveltekit/skills/sveltekit-builder/references/_template.md": "---\ntitle: Rule Title Here\nimpact: MEDIUM\nimpactDescription: \"optional performance/correctness improvement description\"\ntags: tag1, tag2, tag3\n---\n\n## Rule Title Here\n\n**Impact: MEDIUM** — optional description\n\nBrief explanation of why this matters. Focus on the performance or correctness implications. Keep it to 2-3 sentences.\n\n### Incorrect\n\n```svelte\n<script>\n  // Anti-pattern code here\n</script>\n```\n\nExplain why this is problematic.\n\n### Correct\n\n```svelte\n<script>\n  // Best practice code here\n</script>\n```\n\nExplain why this is better.\n\n### Reference\n\n- [Svelte Docs: Relevant Section](https://svelte.dev/docs/svelte/relevant-section)\n",
        "sveltekit/skills/sveltekit-builder/references/general/bundle-avoid-barrel-imports.md": "---\ntitle: Avoid Barrel File Imports\nimpact: MEDIUM\nimpactDescription: \"Prevents accidental bundling of unused modules, can reduce chunk sizes by 20-50%\"\ntags: bundle, performance, imports, tree-shaking\n---\n\n## Avoid Barrel File Imports\n\n**Impact: MEDIUM** — Prevents accidental bundling of unused modules, can reduce chunk sizes by 20-50%\n\nBarrel files (index.js/index.ts that re-export from multiple modules) can defeat tree shaking and cause the bundler to include code you don't use. While modern bundlers handle simple cases, complex re-exports with side effects or circular dependencies often pull in entire module trees. Import directly from the source file instead.\n\n### Incorrect\n```svelte\n<script>\n  // $lib/components/index.js exports 50+ components\n  import { Button } from '$lib/components';\n\n  // $lib/utils/index.js exports many utilities with complex dependencies\n  import { formatDate } from '$lib/utils';\n\n  // Even icon libraries with barrel exports can be problematic\n  import { IconHome } from '@some-icon-library';\n</script>\n\n<Button>\n  <IconHome />\n  {formatDate(new Date())}\n</Button>\n```\nBarrel imports can accidentally include dozens of unused components and utilities because the bundler must evaluate the entire index file to determine what's actually used.\n\n### Correct\n```svelte\n<script>\n  // Import directly from the component file\n  import Button from '$lib/components/Button.svelte';\n\n  // Import from the specific utility module\n  import { formatDate } from '$lib/utils/date.js';\n\n  // Many icon libraries offer direct imports\n  import IconHome from '@some-icon-library/icons/IconHome.svelte';\n</script>\n\n<Button>\n  <IconHome />\n  {formatDate(new Date())}\n</Button>\n```\nDirect imports guarantee only the specific module is included. The bundler can tree-shake without analyzing complex re-export chains.\n\n### Reference\n- [Barrel Files and Why You Should Stop Using Them](https://marvinh.dev/blog/speeding-up-javascript-ecosystem-part-7/)\n- [Vite Performance Tips](https://vitejs.dev/guide/performance.html)\n- [SvelteKit Best Practices](https://kit.svelte.dev/docs/best-practices)\n",
        "sveltekit/skills/sveltekit-builder/references/general/bundle-dynamic-imports.md": "---\ntitle: Use Dynamic Imports for Code Splitting\nimpact: HIGH\nimpactDescription: \"Reduces initial bundle size by 30-60%, dramatically improving page load times\"\ntags: bundle, performance, code-splitting, lazy-loading\n---\n\n## Use Dynamic Imports for Code Splitting\n\n**Impact: HIGH** — Reduces initial bundle size by 30-60%, dramatically improving page load times\n\nDynamic imports allow you to split your code into smaller chunks that load on demand rather than upfront. This is essential for large applications where loading everything at once creates unacceptable delays. SvelteKit handles code splitting automatically for routes, but you should manually split large components and libraries.\n\n### Incorrect\n```svelte\n<script>\n  import HeavyChart from '$lib/components/HeavyChart.svelte';\n  import { complexCalculation } from '$lib/utils/heavy-math.js';\n\n  let showChart = $state(false);\n</script>\n\n<button onclick={() => showChart = true}>Show Chart</button>\n\n{#if showChart}\n  <HeavyChart data={complexCalculation()} />\n{/if}\n```\nBoth the chart component and heavy math library are loaded immediately even though they may never be used, bloating the initial bundle.\n\n### Correct\n```svelte\n<script>\n  let showChart = $state(false);\n  let ChartComponent = $state(null);\n  let chartData = $state(null);\n\n  async function loadChart() {\n    const [{ default: Chart }, { complexCalculation }] = await Promise.all([\n      import('$lib/components/HeavyChart.svelte'),\n      import('$lib/utils/heavy-math.js')\n    ]);\n\n    ChartComponent = Chart;\n    chartData = complexCalculation();\n    showChart = true;\n  }\n</script>\n\n<button onclick={loadChart}>Show Chart</button>\n\n{#if showChart && ChartComponent}\n  <ChartComponent data={chartData} />\n{/if}\n```\nThe heavy component and library are only fetched when the user clicks the button, keeping the initial bundle small and fast.\n\n### Reference\n- [SvelteKit Code Splitting](https://kit.svelte.dev/docs/page-options#prerender)\n- [MDN Dynamic Imports](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/import)\n- [Vite Code Splitting](https://vitejs.dev/guide/features.html#async-chunk-loading-optimization)\n",
        "sveltekit/skills/sveltekit-builder/references/general/bundle-lazy-components.md": "---\ntitle: Lazy Load Below-Fold and Hidden Components\nimpact: MEDIUM\nimpactDescription: \"Improves Largest Contentful Paint (LCP) by deferring non-critical component loading\"\ntags: bundle, performance, lazy-loading, LCP\n---\n\n## Lazy Load Below-Fold and Hidden Components\n\n**Impact: MEDIUM** — Improves Largest Contentful Paint (LCP) by deferring non-critical component loading\n\nComponents that aren't immediately visible (modals, dialogs, tabs, below-fold content) should load lazily to prioritize above-fold content. This improves Core Web Vitals by reducing the work the browser must do before the page becomes interactive. Use intersection observers or user interactions as triggers.\n\n### Incorrect\n```svelte\n<script>\n  import Modal from '$lib/components/Modal.svelte';\n  import Comments from '$lib/components/Comments.svelte';\n  import RelatedPosts from '$lib/components/RelatedPosts.svelte';\n\n  let showModal = $state(false);\n</script>\n\n<article>\n  <h1>Article Title</h1>\n  <p>Article content...</p>\n</article>\n\n<button onclick={() => showModal = true}>Share</button>\n{#if showModal}\n  <Modal onclose={() => showModal = false}>Share options</Modal>\n{/if}\n\n<!-- These are below the fold -->\n<Comments postId={123} />\n<RelatedPosts categoryId={456} />\n```\nAll components load immediately even though Modal is hidden and Comments/RelatedPosts are below the fold where users may never scroll.\n\n### Correct\n```svelte\n<script>\n  let showModal = $state(false);\n  let ModalComponent = $state(null);\n  let belowFoldVisible = $state(false);\n  let BelowFoldComponents = $state({ Comments: null, RelatedPosts: null });\n\n  async function openModal() {\n    if (!ModalComponent) {\n      const { default: Modal } = await import('$lib/components/Modal.svelte');\n      ModalComponent = Modal;\n    }\n    showModal = true;\n  }\n\n  async function loadBelowFold(node) {\n    const observer = new IntersectionObserver(async (entries) => {\n      if (entries[0].isIntersecting) {\n        const [{ default: Comments }, { default: RelatedPosts }] = await Promise.all([\n          import('$lib/components/Comments.svelte'),\n          import('$lib/components/RelatedPosts.svelte')\n        ]);\n        BelowFoldComponents = { Comments, RelatedPosts };\n        belowFoldVisible = true;\n        observer.disconnect();\n      }\n    }, { rootMargin: '200px' });\n\n    observer.observe(node);\n    return { destroy: () => observer.disconnect() };\n  }\n</script>\n\n<article>\n  <h1>Article Title</h1>\n  <p>Article content...</p>\n</article>\n\n<button onclick={openModal}>Share</button>\n{#if showModal && ModalComponent}\n  <ModalComponent onclose={() => showModal = false}>Share options</ModalComponent>\n{/if}\n\n<div use:loadBelowFold>\n  {#if belowFoldVisible}\n    <BelowFoldComponents.Comments postId={123} />\n    <BelowFoldComponents.RelatedPosts categoryId={456} />\n  {/if}\n</div>\n```\nModal loads only when clicked, and below-fold components load when the user scrolls near them (with 200px buffer for smooth experience).\n\n### Reference\n- [Intersection Observer API](https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API)\n- [Web.dev Lazy Loading](https://web.dev/articles/lazy-loading)\n- [Svelte Actions](https://svelte.dev/docs/svelte/use)\n",
        "sveltekit/skills/sveltekit-builder/references/general/bundle-preload-critical.md": "---\ntitle: Preload Critical Assets and Prefetch Navigations\nimpact: MEDIUM\nimpactDescription: \"Reduces Time to Interactive by 100-500ms for critical resources\"\ntags: bundle, performance, preload, prefetch, resource-hints\n---\n\n## Preload Critical Assets and Prefetch Navigations\n\n**Impact: MEDIUM** — Reduces Time to Interactive by 100-500ms for critical resources\n\nResource hints tell the browser to fetch important assets early. Use `rel=\"preload\"` for resources needed immediately (fonts, critical images, above-fold data) and `rel=\"prefetch\"` for resources likely needed soon (next page navigation). SvelteKit provides built-in mechanisms for this, but manual hints optimize specific scenarios.\n\n### Incorrect\n```svelte\n<!-- +layout.svelte -->\n<script>\n  import { page } from '$app/stores';\n</script>\n\n<!-- No resource hints - browser discovers fonts/images late -->\n<nav>\n  <a href=\"/dashboard\">Dashboard</a>\n  <a href=\"/settings\">Settings</a>\n</nav>\n\n<slot />\n\n<!-- Font loads late, causing layout shift -->\n<style>\n  @font-face {\n    font-family: 'CustomFont';\n    src: url('/fonts/custom.woff2') format('woff2');\n  }\n</style>\n```\nWithout preload hints, the browser discovers critical fonts and assets late in the loading process, causing layout shifts and delayed rendering.\n\n### Correct\n```svelte\n<!-- +layout.svelte -->\n<script>\n  import { page } from '$app/stores';\n  import { preloadData } from '$app/navigation';\n\n  // Prefetch likely navigation targets on hover\n  function handleMouseEnter(href) {\n    preloadData(href);\n  }\n</script>\n\n<svelte:head>\n  <!-- Preload critical font - loads early in parallel -->\n  <link\n    rel=\"preload\"\n    href=\"/fonts/custom.woff2\"\n    as=\"font\"\n    type=\"font/woff2\"\n    crossorigin=\"anonymous\"\n  />\n\n  <!-- Preload critical above-fold image -->\n  <link\n    rel=\"preload\"\n    href=\"/images/hero.webp\"\n    as=\"image\"\n    fetchpriority=\"high\"\n  />\n\n  <!-- Prefetch likely next navigation (low priority) -->\n  {#if $page.url.pathname === '/'}\n    <link rel=\"prefetch\" href=\"/dashboard\" />\n  {/if}\n</svelte:head>\n\n<nav>\n  <a\n    href=\"/dashboard\"\n    onmouseenter={() => handleMouseEnter('/dashboard')}\n  >\n    Dashboard\n  </a>\n  <a\n    href=\"/settings\"\n    onmouseenter={() => handleMouseEnter('/settings')}\n  >\n    Settings\n  </a>\n</nav>\n\n<slot />\n\n<style>\n  @font-face {\n    font-family: 'CustomFont';\n    src: url('/fonts/custom.woff2') format('woff2');\n    font-display: swap;\n  }\n</style>\n```\nCritical fonts preload immediately, preventing layout shift. SvelteKit's `preloadData` prefetches route data on hover for instant navigation. The `fetchpriority=\"high\"` prioritizes the hero image.\n\n### Reference\n- [SvelteKit Preloading](https://kit.svelte.dev/docs/link-options#data-sveltekit-preload-data)\n- [MDN Resource Hints](https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/rel/preload)\n- [Web.dev Preload Critical Assets](https://web.dev/articles/preload-critical-assets)\n",
        "sveltekit/skills/sveltekit-builder/references/general/bundle-tree-shake-imports.md": "---\ntitle: Import Specific Functions for Tree Shaking\nimpact: HIGH\nimpactDescription: \"Can reduce bundle size by 80-95% for utility libraries like lodash\"\ntags: bundle, performance, tree-shaking, imports\n---\n\n## Import Specific Functions for Tree Shaking\n\n**Impact: HIGH** — Can reduce bundle size by 80-95% for utility libraries like lodash\n\nTree shaking removes unused code from your final bundle, but it only works when you import specific named exports. Importing entire libraries or default exports that contain many functions prevents the bundler from eliminating unused code. Always use ES modules (-es variants) and import only what you need.\n\n### Incorrect\n```svelte\n<script>\n  import _ from 'lodash';\n  import * as utils from '$lib/utils';\n  import moment from 'moment';\n\n  let items = $state([3, 1, 4, 1, 5]);\n  let sorted = $derived(_.sortBy(items));\n  let formatted = $derived(moment().format('YYYY-MM-DD'));\n</script>\n\n<p>Sorted: {sorted.join(', ')}</p>\n<p>Date: {formatted}</p>\n```\nImporting the entire lodash library adds ~70KB to your bundle even though you only use one function. Moment.js similarly includes all locales and features.\n\n### Correct\n```svelte\n<script>\n  import { sortBy } from 'lodash-es';\n  import { formatDate } from '$lib/utils/date.js';\n\n  let items = $state([3, 1, 4, 1, 5]);\n  let sorted = $derived(sortBy(items));\n  let formatted = $derived(formatDate(new Date(), 'YYYY-MM-DD'));\n</script>\n\n<p>Sorted: {sorted.join(', ')}</p>\n<p>Date: {formatted}</p>\n```\nNamed imports from ES module variants allow Vite to tree-shake unused code. Using date-fns or custom utilities instead of moment.js further reduces bundle size.\n\n### Reference\n- [Lodash ES Modules](https://lodash.com/per-method-packages)\n- [Vite Tree Shaking](https://vitejs.dev/guide/features.html#build-optimizations)\n- [You Don't Need Moment.js](https://github.com/you-dont-need/You-Dont-Need-Momentjs)\n",
        "sveltekit/skills/sveltekit-builder/references/general/js-avoid-unnecessary-spread.md": "---\ntitle: Avoid Unnecessary Spread Operations\nimpact: LOW\nimpactDescription: \"Spreading creates shallow copies which uses memory and CPU cycles\"\ntags: javascript, performance, memory, optimization\n---\n\n## Avoid Unnecessary Spread Operations\n\n**Impact: LOW** — Spreading creates shallow copies which uses memory and CPU cycles\n\nThe spread operator (`...`) creates new arrays or objects by copying all elements. While useful for immutability, unnecessary spreading wastes memory and processing time, especially in loops or with large collections. Only spread when you actually need a copy.\n\n### Incorrect\n```svelte\n<script>\n  function getActiveUsers(users) {\n    // Unnecessary spread - filter already returns a new array\n    return [...users.filter(u => u.active)];\n  }\n\n  function processData(items) {\n    let result = [];\n    for (const item of items) {\n      // Creates a new array on EVERY iteration - O(n^2) memory operations\n      result = [...result, transform(item)];\n    }\n    return result;\n  }\n\n  function getConfig(options) {\n    // Spreading just to spread - no modification needed\n    const config = { ...defaultConfig };\n    return { ...config };\n  }\n</script>\n```\nEach spread operation allocates memory and copies every element, which adds up quickly in loops.\n\n### Correct\n```svelte\n<script>\n  function getActiveUsers(users) {\n    // filter() already returns a new array\n    return users.filter(u => u.active);\n  }\n\n  function processData(items) {\n    // map() is O(n) - much more efficient\n    return items.map(item => transform(item));\n\n    // Or if building incrementally is necessary:\n    const result = [];\n    for (const item of items) {\n      result.push(transform(item));  // O(1) amortized\n    }\n    return result;\n  }\n\n  function getConfig(options) {\n    // Only spread when actually merging or needing a copy for mutation\n    return { ...defaultConfig, ...options };\n  }\n</script>\n```\nUse array methods that return new arrays, or `push()` for incremental building, and only spread when combining or when immutability is specifically required.\n\n### Reference\n- [MDN Spread syntax](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)\n- [V8 Blog: Elements kinds](https://v8.dev/blog/elements-kinds)\n",
        "sveltekit/skills/sveltekit-builder/references/general/js-cache-expensive-computations.md": "---\ntitle: Cache Results of Expensive Operations\nimpact: MEDIUM\nimpactDescription: \"Recomputing expensive values in loops wastes CPU cycles\"\ntags: javascript, performance, caching, optimization\n---\n\n## Cache Results of Expensive Operations\n\n**Impact: MEDIUM** — Recomputing expensive values in loops wastes CPU cycles\n\nWhen a computation produces the same result regardless of the loop iteration, calculate it once before the loop and reuse the cached value. This is especially important for operations that parse, transform, or fetch data that doesn't change during iteration.\n\n### Incorrect\n```svelte\n<script>\n  function processItems(items, config) {\n    return items.map(item => {\n      // These are recomputed for EVERY item, but never change\n      const settings = JSON.parse(JSON.stringify(config));\n      const threshold = calculateThreshold(config.params);\n      const formatter = new Intl.NumberFormat('en-US', config.format);\n\n      return {\n        ...item,\n        value: item.raw > threshold ? formatter.format(item.raw) : 'N/A'\n      };\n    });\n  }\n</script>\n```\nWith 1,000 items, you're parsing JSON 1,000 times and creating 1,000 formatter objects for identical operations.\n\n### Correct\n```svelte\n<script>\n  function processItems(items, config) {\n    // Compute once, reuse many times\n    const settings = structuredClone(config);\n    const threshold = calculateThreshold(config.params);\n    const formatter = new Intl.NumberFormat('en-US', config.format);\n\n    return items.map(item => ({\n      ...item,\n      value: item.raw > threshold ? formatter.format(item.raw) : 'N/A'\n    }));\n  }\n</script>\n```\nComputing invariant values before the loop ensures each expensive operation runs exactly once.\n\n### Reference\n- [MDN Intl.NumberFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat)\n- [Web.dev: Optimize JavaScript execution](https://web.dev/optimize-javascript-execution/)\n",
        "sveltekit/skills/sveltekit-builder/references/general/js-debounce-rapid-events.md": "---\ntitle: Debounce Rapid-Fire Events\nimpact: MEDIUM\nimpactDescription: \"Scroll, resize, and input events can fire hundreds of times per second\"\ntags: javascript, performance, events, debounce, throttle\n---\n\n## Debounce Rapid-Fire Events\n\n**Impact: MEDIUM** — Scroll, resize, and input events can fire hundreds of times per second\n\nEvents like `scroll`, `resize`, `mousemove`, and `input` can fire at extremely high rates. Running expensive operations on every event causes jank and wasted computation. Debouncing delays execution until events stop, while throttling limits execution to a fixed rate.\n\n### Incorrect\n```svelte\n<script>\n  import { onMount } from 'svelte';\n\n  let searchQuery = $state('');\n  let scrollY = $state(0);\n\n  // Fires on EVERY keystroke - could trigger 10+ API calls while typing \"hello\"\n  async function handleSearch() {\n    const results = await fetch(`/api/search?q=${searchQuery}`);\n    // process results...\n  }\n\n  onMount(() => {\n    // Fires 60+ times per second during scroll\n    window.addEventListener('scroll', () => {\n      scrollY = window.scrollY;\n      recalculateLayout();  // Expensive operation on every scroll event\n    });\n  });\n</script>\n\n<input type=\"text\" bind:value={searchQuery} oninput={handleSearch} />\n```\nRapid events can overwhelm the browser, cause layout thrashing, and make excessive network requests.\n\n### Correct\n```svelte\n<script>\n  import { onMount, onDestroy } from 'svelte';\n\n  let searchQuery = $state('');\n  let scrollY = $state(0);\n  let debounceTimer;\n  let throttleTimer;\n\n  // Debounce: wait until user stops typing for 300ms\n  function handleSearch() {\n    clearTimeout(debounceTimer);\n    debounceTimer = setTimeout(async () => {\n      const results = await fetch(`/api/search?q=${searchQuery}`);\n      // process results...\n    }, 300);\n  }\n\n  // Throttle: run at most once every 100ms\n  function handleScroll() {\n    if (throttleTimer) return;\n\n    throttleTimer = setTimeout(() => {\n      scrollY = window.scrollY;\n      recalculateLayout();\n      throttleTimer = null;\n    }, 100);\n  }\n\n  onMount(() => {\n    window.addEventListener('scroll', handleScroll, { passive: true });\n  });\n\n  onDestroy(() => {\n    window.removeEventListener('scroll', handleScroll);\n    clearTimeout(debounceTimer);\n    clearTimeout(throttleTimer);\n  });\n</script>\n\n<input type=\"text\" bind:value={searchQuery} oninput={handleSearch} />\n```\nDebouncing waits for a pause in events (ideal for search), while throttling ensures consistent intervals (ideal for scroll/resize). Always clean up timers on component destruction.\n\n### Reference\n- [MDN Debounce and Throttle](https://developer.mozilla.org/en-US/docs/Glossary/Debounce)\n- [CSS-Tricks: Debouncing and Throttling](https://css-tricks.com/debouncing-throttling-explained-examples/)\n",
        "sveltekit/skills/sveltekit-builder/references/general/js-early-exit.md": "---\ntitle: Return Early to Avoid Unnecessary Computation\nimpact: MEDIUM\nimpactDescription: \"Early returns prevent wasted CPU cycles on operations that won't matter\"\ntags: javascript, performance, control-flow, optimization\n---\n\n## Return Early to Avoid Unnecessary Computation\n\n**Impact: MEDIUM** — Early returns prevent wasted CPU cycles on operations that won't matter\n\nFunctions should check for invalid inputs or special cases at the start and return immediately. This guard clause pattern avoids running expensive operations when the result would be discarded or when inputs are invalid, and it makes code easier to read by reducing nesting.\n\n### Incorrect\n```svelte\n<script>\n  function processUserData(user) {\n    let result = null;\n\n    if (user) {\n      if (user.isActive) {\n        if (user.hasPermission) {\n          // Expensive operations deeply nested\n          const processed = expensiveTransform(user.data);\n          const validated = validateData(processed);\n          result = formatOutput(validated);\n        }\n      }\n    }\n\n    return result;\n  }\n</script>\n```\nDeep nesting makes code harder to follow and doesn't clearly communicate when computation is skipped.\n\n### Correct\n```svelte\n<script>\n  function processUserData(user) {\n    // Guard clauses at the top\n    if (!user) return null;\n    if (!user.isActive) return null;\n    if (!user.hasPermission) return null;\n\n    // Main logic is flat and easy to read\n    const processed = expensiveTransform(user.data);\n    const validated = validateData(processed);\n    return formatOutput(validated);\n  }\n</script>\n```\nEarly returns make invalid cases explicit, reduce cognitive load, and ensure expensive operations only run when necessary.\n\n### Reference\n- [Refactoring Guru: Replace Nested Conditional with Guard Clauses](https://refactoring.guru/replace-nested-conditional-with-guard-clauses)\n- [Martin Fowler: Guard Clause](https://martinfowler.com/bliki/GuardClause.html)\n",
        "sveltekit/skills/sveltekit-builder/references/general/js-parallel-promises.md": "---\ntitle: Use Promise.all for Independent Async Operations\nimpact: CRITICAL\nimpactDescription: \"Sequential awaits on independent operations waste time waiting unnecessarily\"\ntags: javascript, async, performance, promises\n---\n\n## Use Promise.all for Independent Async Operations\n\n**Impact: CRITICAL** — Sequential awaits on independent operations waste time waiting unnecessarily\n\nWhen multiple async operations don't depend on each other's results, running them in parallel with `Promise.all` can dramatically reduce total execution time. Sequential awaits force each operation to complete before the next begins, even when there's no dependency between them.\n\n### Incorrect\n```svelte\n<script>\n  async function loadDashboard() {\n    // Each await blocks until the previous completes\n    // Total time: user + posts + notifications (e.g., 300ms + 200ms + 150ms = 650ms)\n    const user = await fetchUser();\n    const posts = await fetchPosts();\n    const notifications = await fetchNotifications();\n\n    return { user, posts, notifications };\n  }\n</script>\n```\nSequential awaits add up the wait times of all operations, making load times unnecessarily long.\n\n### Correct\n```svelte\n<script>\n  async function loadDashboard() {\n    // All requests start simultaneously\n    // Total time: max(user, posts, notifications) (e.g., max(300, 200, 150) = 300ms)\n    const [user, posts, notifications] = await Promise.all([\n      fetchUser(),\n      fetchPosts(),\n      fetchNotifications()\n    ]);\n\n    return { user, posts, notifications };\n  }\n</script>\n```\nParallel execution means total time equals the slowest operation, not the sum of all operations.\n\n### Reference\n- [MDN Promise.all](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all)\n- [JavaScript.info Promise API](https://javascript.info/promise-api)\n",
        "sveltekit/skills/sveltekit-builder/references/general/js-set-map-lookups.md": "---\ntitle: Use Set/Map for O(1) Lookups\nimpact: MEDIUM\nimpactDescription: \"Array.includes/find is O(n) while Set.has/Map.get is O(1)\"\ntags: javascript, performance, data-structures, optimization\n---\n\n## Use Set/Map for O(1) Lookups\n\n**Impact: MEDIUM** — Array.includes/find is O(n) while Set.has/Map.get is O(1)\n\nWhen checking membership or looking up values in large collections, `Set` and `Map` provide constant-time operations regardless of collection size. Arrays require scanning through elements one by one, which becomes increasingly slow as the collection grows.\n\n### Incorrect\n```svelte\n<script>\n  const allowedIds = [1, 2, 3, /* ... thousands of IDs */];\n  const userCache = [\n    { id: 1, name: 'Alice' },\n    { id: 2, name: 'Bob' },\n    // ... thousands of users\n  ];\n\n  function isAllowed(id) {\n    // O(n) - must scan entire array each time\n    return allowedIds.includes(id);\n  }\n\n  function getUser(id) {\n    // O(n) - must scan until found\n    return userCache.find(user => user.id === id);\n  }\n\n  // In a loop, this becomes O(n*m) - very slow\n  const filtered = items.filter(item => allowedIds.includes(item.id));\n</script>\n```\nWith 10,000 items, each lookup could check up to 10,000 elements. In a loop, this compounds quickly.\n\n### Correct\n```svelte\n<script>\n  const allowedIds = new Set([1, 2, 3, /* ... thousands of IDs */]);\n  const userCache = new Map([\n    [1, { id: 1, name: 'Alice' }],\n    [2, { id: 2, name: 'Bob' }],\n    // ... thousands of users\n  ]);\n\n  function isAllowed(id) {\n    // O(1) - instant lookup regardless of size\n    return allowedIds.has(id);\n  }\n\n  function getUser(id) {\n    // O(1) - instant lookup\n    return userCache.get(id);\n  }\n\n  // In a loop, this stays O(n) instead of O(n*m)\n  const filtered = items.filter(item => allowedIds.has(item.id));\n</script>\n```\nSet and Map use hash tables internally, providing instant lookups even with millions of entries.\n\n### Reference\n- [MDN Set](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Set)\n- [MDN Map](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map)\n",
        "sveltekit/skills/sveltekit-builder/references/general/rendering-content-visibility.md": "---\ntitle: Use content-visibility: auto for Long Lists\nimpact: HIGH\nimpactDescription: \"Defers off-screen rendering - browser skips layout/paint for hidden items\"\ntags: css, performance, rendering, content-visibility, virtualization\n---\n\n## Use content-visibility: auto for Long Lists\n\n**Impact: HIGH** — Defers off-screen rendering - browser skips layout/paint for hidden items\n\nThe `content-visibility: auto` property tells the browser to skip rendering work for elements that are not currently visible in the viewport. For long lists with 1000+ items, this can provide up to 10x improvement in initial render time because the browser only computes layout and paint for visible content. When users scroll, the browser renders just-in-time.\n\n### Incorrect\n```css\n/* No content-visibility - browser renders ALL 1000+ items at once */\n.list-item {\n  padding: 16px;\n  border-bottom: 1px solid #eee;\n}\n```\nWithout content-visibility, the browser must calculate layout and paint for every single item in the list, even those far below the fold that users may never scroll to see.\n\n### Correct\n```css\n/* Browser skips rendering for off-screen items */\n.list-item {\n  padding: 16px;\n  border-bottom: 1px solid #eee;\n\n  /* Skip rendering until item approaches viewport */\n  content-visibility: auto;\n\n  /* Hint at item size so scrollbar remains stable */\n  contain-intrinsic-size: auto 80px;\n}\n```\nThe `content-visibility: auto` defers rendering work until needed. The `contain-intrinsic-size` property provides an estimated height so the browser can calculate accurate scrollbar size without rendering every item. Use `auto` with the size value to let the browser remember actual sizes after items are rendered once.\n\n### Reference\n- [MDN content-visibility](https://developer.mozilla.org/en-US/docs/Web/CSS/content-visibility)\n- [MDN contain-intrinsic-size](https://developer.mozilla.org/en-US/docs/Web/CSS/contain-intrinsic-size)\n",
        "sveltekit/skills/sveltekit-builder/references/general/rendering-reduce-layout-thrashing.md": "---\ntitle: Batch DOM Reads and Writes to Avoid Layout Thrashing\nimpact: HIGH\nimpactDescription: \"Reading then writing in a loop forces layout recalculation each iteration\"\ntags: javascript, performance, rendering, layout, dom, reflow\n---\n\n## Batch DOM Reads and Writes to Avoid Layout Thrashing\n\n**Impact: HIGH** — Reading then writing in a loop forces layout recalculation each iteration\n\nLayout thrashing occurs when you interleave DOM reads and writes. When you read a layout property (like `offsetHeight` or `getBoundingClientRect`) after making a DOM change, the browser must synchronously recalculate layout to give you an accurate value. In a loop, this can cause dozens or hundreds of forced layouts, turning a fast operation into a multi-second freeze.\n\n### Incorrect\n```javascript\n// Layout thrashing - forces recalculation on EVERY iteration\nconst items = document.querySelectorAll('.item');\n\nitems.forEach(item => {\n  // READ: forces layout calculation\n  const height = item.offsetHeight;\n\n  // WRITE: invalidates layout\n  item.style.height = (height * 2) + 'px';\n\n  // Next iteration's READ will force another full layout recalc\n});\n```\nEach iteration reads `offsetHeight` (forcing layout), then writes `style.height` (invalidating layout). The next iteration's read forces a complete recalculation. With 100 items, this causes 100 forced layouts instead of 1.\n\n### Correct\n```javascript\n// Batched reads and writes - single layout calculation\nconst items = document.querySelectorAll('.item');\n\n// PHASE 1: Read all values first (single layout calculation)\nconst heights = Array.from(items).map(item => item.offsetHeight);\n\n// PHASE 2: Write all values (layout invalidated once, recalculated once)\nitems.forEach((item, index) => {\n  item.style.height = (heights[index] * 2) + 'px';\n});\n```\nBy reading all values first, the browser performs only one layout calculation. All writes then happen without interruption. The browser batches the invalidation and performs a single recalculation after all writes complete.\n\n### Reference\n- [MDN Reflow](https://developer.mozilla.org/en-US/docs/Glossary/Reflow)\n- [What forces layout/reflow](https://gist.github.com/paulirish/5d52fb081b3570c81e3a)\n",
        "sveltekit/skills/sveltekit-builder/references/general/rendering-will-change.md": "---\ntitle: Use will-change Sparingly for Animations\nimpact: MEDIUM\nimpactDescription: \"will-change hints to browser to optimize, but overuse wastes memory\"\ntags: css, performance, rendering, will-change, animations, gpu\n---\n\n## Use will-change Sparingly for Animations\n\n**Impact: MEDIUM** — will-change hints to browser to optimize, but overuse wastes memory\n\nThe `will-change` property tells the browser to set up GPU layers and optimizations in advance for upcoming changes. However, each `will-change` declaration consumes memory and GPU resources. Applying it broadly or leaving it on permanently defeats its purpose and can actually degrade performance by exhausting system resources.\n\n### Incorrect\n```css\n/* Wasteful - applies GPU optimization to everything permanently */\n* {\n  will-change: transform, opacity;\n}\n\n.card {\n  will-change: transform;  /* Always on, even when not animating */\n}\n\n.sidebar {\n  will-change: transform;  /* Static element that never animates */\n}\n```\nApplying `will-change` globally or to static elements wastes GPU memory and can cause the browser to run out of compositor layers, leading to worse performance than having no `will-change` at all.\n\n### Correct\n```css\n/* Only apply will-change when animation is about to start */\n.card {\n  transition: transform 0.3s ease;\n}\n\n/* Add via class or :hover right before animation */\n.card:hover {\n  will-change: transform;\n}\n\n.card:active {\n  transform: scale(0.98);\n}\n\n/* For JS-triggered animations, add class before animating */\n.card.animating {\n  will-change: transform;\n}\n```\n```javascript\n// Add will-change just before animation, remove after\nelement.classList.add('animating');\nelement.addEventListener('transitionend', () => {\n  element.classList.remove('animating');\n}, { once: true });\n```\nApply `will-change` only to elements that will actually animate, and only during the animation. For hover states, the browser has time to optimize between hover and the animation starting. For JavaScript animations, add the class immediately before and remove it after the transition completes.\n\n### Reference\n- [MDN will-change](https://developer.mozilla.org/en-US/docs/Web/CSS/will-change)\n",
        "sveltekit/skills/sveltekit-builder/references/general/security-sanitize-input.md": "---\ntitle: Always Sanitize User Input Before Rendering\nimpact: CRITICAL\nimpactDescription: \"Prevents XSS, injection attacks, and data corruption from malicious or malformed input\"\ntags: security, sanitization, xss, input, validation\n---\n\n## Always Sanitize User Input Before Rendering\n\n**Impact: CRITICAL** — Prevents XSS, injection attacks, and data corruption from malicious or malformed input\n\nUser input should never be trusted. All data from users, URL parameters, APIs, or external sources must be validated and sanitized before use. This includes sanitizing HTML with DOMPurify, encoding data in URLs, escaping special characters in attributes, and validating input types and formats. Defense in depth means applying sanitization at multiple layers.\n\n### Incorrect\n```svelte\n<script>\n  import { page } from '$app/stores';\n\n  let { userComment, searchQuery } = $props();\n\n  // DANGEROUS: Using URL params directly\n  let redirectUrl = $page.url.searchParams.get('redirect');\n</script>\n\n<!-- DANGEROUS: Raw user HTML -->\n{@html userComment}\n\n<!-- DANGEROUS: Unescaped URL parameter in href -->\n<a href={redirectUrl}>Continue</a>\n\n<!-- DANGEROUS: User input in attribute without encoding -->\n<a href=\"/search?q={searchQuery}\">Search results</a>\n\n<!-- DANGEROUS: User input in inline styles -->\n<div style=\"background-image: url({userProvidedUrl})\">\n```\nUnsanitized input enables attackers to inject scripts via `{@html}`, redirect users to malicious sites via manipulated URLs, or break out of attributes to inject event handlers.\n\n### Correct\n```svelte\n<script>\n  import { page } from '$app/stores';\n  import DOMPurify from 'dompurify';\n\n  let { userComment, searchQuery, userProvidedUrl } = $props();\n\n  // Sanitize HTML content\n  let sanitizedComment = $derived(\n    DOMPurify.sanitize(userComment, {\n      ALLOWED_TAGS: ['p', 'br', 'strong', 'em', 'a'],\n      ALLOWED_ATTR: ['href'],\n      ALLOW_DATA_ATTR: false\n    })\n  );\n\n  // Validate and sanitize redirect URLs\n  let safeRedirect = $derived(() => {\n    const redirect = $page.url.searchParams.get('redirect');\n    // Only allow relative URLs or specific trusted domains\n    if (redirect?.startsWith('/') && !redirect.startsWith('//')) {\n      return redirect;\n    }\n    try {\n      const url = new URL(redirect, window.location.origin);\n      const trustedDomains = ['example.com', 'api.example.com'];\n      if (trustedDomains.includes(url.hostname)) {\n        return redirect;\n      }\n    } catch {\n      // Invalid URL\n    }\n    return '/'; // Safe fallback\n  });\n\n  // Encode URL parameters\n  let encodedQuery = $derived(encodeURIComponent(searchQuery));\n\n  // Validate URLs for use in styles/attributes\n  let safeImageUrl = $derived(() => {\n    try {\n      const url = new URL(userProvidedUrl);\n      // Only allow https and specific hosts\n      if (url.protocol === 'https:') {\n        return url.href;\n      }\n    } catch {\n      // Invalid URL\n    }\n    return '/placeholder.png';\n  });\n</script>\n\n<!-- Safe: Sanitized HTML -->\n{@html sanitizedComment}\n\n<!-- Safe: Validated redirect URL -->\n<a href={safeRedirect}>Continue</a>\n\n<!-- Safe: Properly encoded URL parameter -->\n<a href=\"/search?q={encodedQuery}\">Search results</a>\n\n<!-- Safe: Validated and sanitized URL -->\n<div style:background-image=\"url({safeImageUrl})\">\n\n<!-- Best: Avoid user input in dangerous contexts entirely -->\n<img src={safeImageUrl} alt=\"User provided image\" />\n```\nLayered sanitization catches different attack vectors. Use allowlists over blocklists, validate URL protocols and domains, encode special characters, and prefer safe APIs over string concatenation.\n\n### Reference\n- [DOMPurify](https://github.com/cure53/DOMPurify)\n- [OWASP Input Validation Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Input_Validation_Cheat_Sheet.html)\n- [MDN: encodeURIComponent](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/encodeURIComponent)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/a11y-compiler-warnings.md": "---\ntitle: Don't Ignore Svelte's Accessibility Warnings\nimpact: HIGH\nimpactDescription: \"Prevents excluding users with disabilities and avoids legal compliance issues\"\ntags: accessibility, a11y, compiler, warnings\n---\n\n## Don't Ignore Svelte's Accessibility Warnings\n\n**Impact: HIGH** — Prevents excluding users with disabilities and avoids legal compliance issues\n\nSvelte's compiler includes built-in accessibility checks that catch common issues like missing alt text, improper ARIA usage, and non-interactive elements with click handlers. These warnings represent real barriers for users who rely on screen readers, keyboard navigation, or other assistive technologies. Ignoring or suppressing these warnings creates an exclusionary user experience and may violate accessibility laws like the ADA or WCAG guidelines.\n\n### Incorrect\n```svelte\n<!-- svelte-ignore a11y_click_events_have_key_events a11y_no_static_element_interactions -->\n<div onclick={handleClick}>Click me</div>\n\n<!-- svelte-ignore a11y_missing_attribute -->\n<img src={photo.url} />\n\n<!-- svelte-ignore a11y_label_has_associated_control -->\n<label>Email</label>\n<input type=\"email\" />\n```\nSuppressing a11y warnings with `svelte-ignore` comments hides real problems. Screen reader users can't interact with the div, can't understand what the image shows, and the label provides no benefit.\n\n### Correct\n```svelte\n<!-- Interactive element: use a button -->\n<button onclick={handleClick}>Click me</button>\n\n<!-- Or if div styling is needed, make it properly accessible -->\n<div\n  role=\"button\"\n  tabindex=\"0\"\n  onclick={handleClick}\n  onkeydown={(e) => e.key === 'Enter' && handleClick()}\n>\n  Click me\n</div>\n\n<!-- Descriptive alt text -->\n<img src={photo.url} alt={photo.description} />\n\n<!-- Decorative images use empty alt -->\n<img src=\"/decorative-border.svg\" alt=\"\" />\n\n<!-- Properly associated label -->\n<label>\n  Email\n  <input type=\"email\" />\n</label>\n\n<!-- Or use explicit association -->\n<label for=\"email-input\">Email</label>\n<input id=\"email-input\" type=\"email\" />\n```\nAddressing a11y warnings properly ensures all users can interact with your application, regardless of how they access it.\n\n### Reference\n- [Svelte Docs: Accessibility Warnings](https://svelte.dev/docs/svelte/compiler-warnings#a11y_warnings)\n- [WebAIM: Introduction to Web Accessibility](https://webaim.org/intro/)\n- [MDN: ARIA](https://developer.mozilla.org/en-US/docs/Web/Accessibility/ARIA)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/actions-cleanup-return.md": "---\ntitle: Actions Must Return Cleanup Function\nimpact: HIGH\nimpactDescription: \"Prevents memory leaks and stale event handlers\"\ntags: actions, cleanup, memory-leaks, lifecycle\n---\n\n## Actions Must Return Cleanup Function\n\n**Impact: HIGH** — Prevents memory leaks and stale event handlers\n\nActions that add event listeners, create observers, or allocate resources must return an object with a `destroy()` function. This function is called when the element is removed from the DOM, ensuring proper cleanup and preventing memory leaks that can degrade application performance over time.\n\n### Incorrect\n```svelte\n<script>\n  function tooltip(node, text) {\n    const tip = document.createElement('div');\n    tip.className = 'tooltip';\n    tip.textContent = text;\n\n    function showTooltip() {\n      document.body.appendChild(tip);\n      // Position tooltip...\n    }\n\n    function hideTooltip() {\n      tip.remove();\n    }\n\n    node.addEventListener('mouseenter', showTooltip);\n    node.addEventListener('mouseleave', hideTooltip);\n\n    // No cleanup! Event listeners persist after element removal\n  }\n</script>\n\n<button use:tooltip={'Click me'}>Hover</button>\n```\nWithout cleanup, event listeners remain attached to removed elements, causing memory leaks and potential errors when callbacks reference stale data.\n\n### Correct\n```svelte\n<script>\n  function tooltip(node, text) {\n    const tip = document.createElement('div');\n    tip.className = 'tooltip';\n    tip.textContent = text;\n\n    function showTooltip() {\n      document.body.appendChild(tip);\n      // Position tooltip...\n    }\n\n    function hideTooltip() {\n      if (tip.parentNode) {\n        tip.remove();\n      }\n    }\n\n    node.addEventListener('mouseenter', showTooltip);\n    node.addEventListener('mouseleave', hideTooltip);\n\n    return {\n      update(newText) {\n        tip.textContent = newText;\n      },\n      destroy() {\n        node.removeEventListener('mouseenter', showTooltip);\n        node.removeEventListener('mouseleave', hideTooltip);\n        hideTooltip();\n      }\n    };\n  }\n</script>\n\n<button use:tooltip={'Click me'}>Hover</button>\n```\nThe `destroy()` function removes all event listeners and cleans up any DOM elements created by the action. The optional `update()` function handles parameter changes reactively.\n\n### Reference\n- [Svelte Actions Documentation](https://svelte.dev/docs/svelte/use)\n- [MDN: removeEventListener](https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/removeEventListener)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/actions-reusable-dom.md": "---\ntitle: Use Actions for Reusable DOM Behavior\nimpact: MEDIUM\nimpactDescription: \"Improves code reuse and separation of concerns for DOM interactions\"\ntags: actions, dom, reusability, patterns\n---\n\n## Use Actions for Reusable DOM Behavior\n\n**Impact: MEDIUM** — Improves code reuse and separation of concerns for DOM interactions\n\nSvelte actions (`use:action`) provide a clean way to encapsulate reusable DOM behavior that can be applied to any element. They are ideal for cross-cutting concerns like tooltips, click-outside detection, focus trapping, and other DOM manipulations that need to be shared across components.\n\n### Incorrect\n```svelte\n<script>\n  import { onMount } from 'svelte';\n\n  let dialog = $state(null);\n\n  // Inline click-outside logic - not reusable\n  onMount(() => {\n    function handleClick(event) {\n      if (dialog && !dialog.contains(event.target)) {\n        closeDialog();\n      }\n    }\n    document.addEventListener('click', handleClick);\n    return () => document.removeEventListener('click', handleClick);\n  });\n\n  function closeDialog() {\n    // close logic\n  }\n</script>\n\n<div bind:this={dialog}>\n  Dialog content\n</div>\n```\nThis approach duplicates click-outside logic in every component that needs it, making maintenance difficult and code harder to test.\n\n### Correct\n```svelte\n<script>\n  // clickOutside.js - reusable action\n  export function clickOutside(node, callback) {\n    function handleClick(event) {\n      if (!node.contains(event.target)) {\n        callback();\n      }\n    }\n\n    document.addEventListener('click', handleClick, true);\n\n    return {\n      destroy() {\n        document.removeEventListener('click', handleClick, true);\n      }\n    };\n  }\n</script>\n\n<!-- Usage in component -->\n<script>\n  import { clickOutside } from '$lib/actions/clickOutside';\n\n  function closeDialog() {\n    // close logic\n  }\n</script>\n\n<div use:clickOutside={closeDialog}>\n  Dialog content\n</div>\n```\nThe action encapsulates the DOM behavior, making it reusable across components, easier to test in isolation, and keeping components focused on their primary responsibility.\n\n### Reference\n- [Svelte Actions Documentation](https://svelte.dev/docs/svelte/use)\n- [Svelte Tutorial: Actions](https://learn.svelte.dev/tutorial/actions)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/async-await-blocks.md": "---\ntitle: Use Await Blocks for Promise Handling\nimpact: HIGH\nimpactDescription: \"Eliminates boilerplate loading/error state management and prevents race conditions\"\ntags: async, templates, promises, loading-states\n---\n\n## Use Await Blocks for Promise Handling\n\n**Impact: HIGH** — Eliminates boilerplate loading/error state management and prevents race conditions\n\nSvelte's `{#await}` blocks provide declarative promise handling directly in templates. They automatically manage loading, success, and error states without manual state variables, and correctly handle race conditions when promises are replaced before resolving.\n\n### Incorrect\n```svelte\n<script>\n  let data = $state(null);\n  let loading = $state(true);\n  let error = $state(null);\n\n  async function loadData() {\n    loading = true;\n    error = null;\n    try {\n      const response = await fetch('/api/users');\n      data = await response.json();\n    } catch (e) {\n      error = e;\n    } finally {\n      loading = false;\n    }\n  }\n\n  loadData();\n</script>\n\n{#if loading}\n  <p>Loading...</p>\n{:else if error}\n  <p>Error: {error.message}</p>\n{:else}\n  <ul>\n    {#each data as user}\n      <li>{user.name}</li>\n    {/each}\n  </ul>\n{/if}\n```\nManual state management requires extra variables and is prone to race conditions if `loadData()` is called multiple times rapidly.\n\n### Correct\n```svelte\n<script>\n  let promise = $state(fetch('/api/users').then(r => r.json()));\n\n  function reload() {\n    promise = fetch('/api/users').then(r => r.json());\n  }\n</script>\n\n{#await promise}\n  <p>Loading...</p>\n{:then data}\n  <ul>\n    {#each data as user}\n      <li>{user.name}</li>\n    {/each}\n  </ul>\n{:catch error}\n  <p>Error: {error.message}</p>\n{/await}\n\n<button onclick={reload}>Reload</button>\n```\nThe `{#await}` block handles all states declaratively. When `promise` is reassigned, Svelte automatically cancels rendering of the previous promise's result, preventing stale data display.\n\n### Reference\n- [Svelte Await Blocks](https://svelte.dev/docs/svelte/await)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/async-boundary-pending.md": "---\ntitle: Use svelte:boundary for Loading States\nimpact: HIGH\nimpactDescription: \"Proper loading states improve perceived performance and user experience\"\ntags: async, loading, ui, svelte5\n---\n\n## Use svelte:boundary for Loading States\n\n**Impact: HIGH** — Proper loading states improve perceived performance and user experience\n\nThe `<svelte:boundary>` element with a `pending` snippet provides a declarative way to handle async loading states in Svelte 5. It automatically shows fallback content while async operations complete, eliminating the need for manual loading state management and reducing boilerplate code.\n\n### Incorrect\n\n```svelte\n<script>\n  let data = $state(null);\n  let loading = $state(true);\n  let error = $state(null);\n\n  async function loadData() {\n    try {\n      loading = true;\n      data = await fetch('/api/data').then(r => r.json());\n    } catch (e) {\n      error = e;\n    } finally {\n      loading = false;\n    }\n  }\n</script>\n\n{#if loading}\n  <p>Loading...</p>\n{:else if error}\n  <p>Error: {error.message}</p>\n{:else}\n  <DataView {data} />\n{/if}\n```\n\nManual loading state management is verbose and error-prone.\n\n### Correct\n\n```svelte\n<script>\n  import DataView from './DataView.svelte';\n\n  async function loadData() {\n    const response = await fetch('/api/data');\n    if (!response.ok) throw new Error('Failed to fetch');\n    return response.json();\n  }\n\n  const dataPromise = loadData();\n</script>\n\n<svelte:boundary>\n  {#snippet pending()}\n    <div class=\"loading-spinner\">\n      <p>Loading data...</p>\n    </div>\n  {/snippet}\n\n  {#snippet failed(error)}\n    <div class=\"error-message\">\n      <p>Error: {error.message}</p>\n    </div>\n  {/snippet}\n\n  {#await dataPromise then data}\n    <DataView {data} />\n  {/await}\n</svelte:boundary>\n```\n\nThe boundary handles loading and error states declaratively with less code.\n\n### Reference\n\n- [Svelte 5 Documentation: svelte:boundary](https://svelte.dev/docs/svelte/svelte-boundary)\n- [Svelte Tutorial: Await Blocks](https://svelte.dev/tutorial/svelte/await-blocks)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/async-error-boundaries.md": "---\ntitle: Use Error Boundaries for Error Handling\nimpact: HIGH\nimpactDescription: \"Prevents entire app crashes and provides graceful error recovery\"\ntags: errors, error-handling, boundaries, resilience\n---\n\n## Use Error Boundaries for Error Handling\n\n**Impact: HIGH** — Prevents entire app crashes and provides graceful error recovery\n\nSvelte 5's `<svelte:boundary>` element catches errors thrown during rendering of child components, preventing them from crashing the entire application. Combined with the `failed` snippet, it provides a declarative way to show fallback UI and optionally recover from errors.\n\n### Incorrect\n```svelte\n<script>\n  import UserProfile from './UserProfile.svelte';\n  import Dashboard from './Dashboard.svelte';\n</script>\n\n<!-- If UserProfile throws, the entire page crashes -->\n<UserProfile userId={123} />\n<Dashboard />\n```\nAn unhandled error in any component will crash the entire application, leaving users with a blank page or framework error message.\n\n### Correct\n```svelte\n<script>\n  import UserProfile from './UserProfile.svelte';\n  import Dashboard from './Dashboard.svelte';\n</script>\n\n<svelte:boundary>\n  <UserProfile userId={123} />\n\n  {#snippet failed(error, reset)}\n    <div class=\"error-fallback\">\n      <p>Failed to load user profile: {error.message}</p>\n      <button onclick={reset}>Try again</button>\n    </div>\n  {/snippet}\n</svelte:boundary>\n\n<!-- Dashboard remains functional even if UserProfile fails -->\n<Dashboard />\n```\nThe `<svelte:boundary>` isolates errors to a specific subtree. The `failed` snippet receives the error and a `reset` function that re-renders the children, allowing users to retry failed operations without a full page reload.\n\n### Reference\n- [Svelte Boundary](https://svelte.dev/docs/svelte/svelte-boundary)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/async-parallel-fetching.md": "---\ntitle: Fetch Data in Parallel with Promise.all\nimpact: CRITICAL\nimpactDescription: \"Sequential awaits create request waterfalls that dramatically slow page load times\"\ntags: async, performance, data-fetching\n---\n\n## Fetch Data in Parallel with Promise.all\n\n**Impact: CRITICAL** — Sequential awaits create request waterfalls that dramatically slow page load times\n\nWhen you have multiple independent data fetches, awaiting them sequentially forces each request to wait for the previous one to complete. This creates a \"waterfall\" effect where total load time equals the sum of all request times. Using Promise.all allows requests to execute concurrently, reducing total time to the longest single request.\n\n### Incorrect\n\n```svelte\n<script>\n  async function loadData() {\n    const users = await fetch('/api/users').then(r => r.json());\n    const posts = await fetch('/api/posts').then(r => r.json());\n    const comments = await fetch('/api/comments').then(r => r.json());\n\n    return { users, posts, comments };\n  }\n</script>\n```\n\nEach fetch waits for the previous one to complete. If each takes 200ms, total time is 600ms.\n\n### Correct\n\n```svelte\n<script>\n  async function loadData() {\n    const [users, posts, comments] = await Promise.all([\n      fetch('/api/users').then(r => r.json()),\n      fetch('/api/posts').then(r => r.json()),\n      fetch('/api/comments').then(r => r.json())\n    ]);\n\n    return { users, posts, comments };\n  }\n</script>\n```\n\nAll fetches run concurrently. If each takes 200ms, total time is ~200ms (3x faster).\n\n### Reference\n\n- [MDN Promise.all](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all)\n- [Svelte Tutorial: Loading Data](https://svelte.dev/tutorial/kit/loading-data)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/async-suspense-boundaries-strategic.md": "---\ntitle: Place Boundaries Strategically for Faster Initial Paint\nimpact: MEDIUM\nimpactDescription: \"Strategic boundary placement allows static content to render immediately while data loads\"\ntags: async, boundaries, performance, loading, svelte5\n---\n\n## Place Boundaries Strategically for Faster Initial Paint\n\n**Impact: MEDIUM** — Strategic boundary placement allows static content to render immediately while data loads\n\nWrapping an entire page in a single `<svelte:boundary>` blocks all content until all async operations complete. Instead, place boundaries around only the data-dependent sections. This allows static content like headers, navigation, and layout to render immediately, improving perceived performance and First Contentful Paint (FCP).\n\n### Incorrect\n\n```svelte\n<script>\n  const userData = fetchUser();\n  const postsData = fetchPosts();\n  const analyticsData = fetchAnalytics();\n</script>\n\n<!-- Everything waits for all data to load -->\n<svelte:boundary>\n  {#snippet pending()}\n    <FullPageSpinner />\n  {/snippet}\n\n  {#await Promise.all([userData, postsData, analyticsData]) then [user, posts, analytics]}\n    <header>\n      <Logo />\n      <Navigation />\n    </header>\n\n    <main>\n      <UserProfile {user} />\n      <PostList {posts} />\n      <AnalyticsDashboard {analytics} />\n    </main>\n\n    <footer>\n      <Copyright />\n    </footer>\n  {/await}\n</svelte:boundary>\n```\n\nThe entire page shows a spinner until all three API calls complete. Users see nothing useful during the loading period.\n\n### Correct\n\n```svelte\n<script>\n  const userData = fetchUser();\n  const postsData = fetchPosts();\n  const analyticsData = fetchAnalytics();\n</script>\n\n<!-- Static content renders immediately -->\n<header>\n  <Logo />\n  <Navigation />\n</header>\n\n<main>\n  <!-- Each section loads independently -->\n  <svelte:boundary>\n    {#snippet pending()}\n      <UserProfileSkeleton />\n    {/snippet}\n\n    {#await userData then user}\n      <UserProfile {user} />\n    {/await}\n  </svelte:boundary>\n\n  <svelte:boundary>\n    {#snippet pending()}\n      <PostListSkeleton />\n    {/snippet}\n\n    {#await postsData then posts}\n      <PostList {posts} />\n    {/await}\n  </svelte:boundary>\n\n  <svelte:boundary>\n    {#snippet pending()}\n      <AnalyticsSkeleton />\n    {/snippet}\n\n    {#await analyticsData then analytics}\n      <AnalyticsDashboard {analytics} />\n    {/await}\n  </svelte:boundary>\n</main>\n\n<footer>\n  <Copyright />\n</footer>\n```\n\nThe header and footer render instantly. Each data section loads independently with its own skeleton, and content appears progressively as each request completes. Fast requests display immediately without waiting for slow ones.\n\n### Reference\n\n- [Svelte 5 Documentation: svelte:boundary](https://svelte.dev/docs/svelte/svelte-boundary)\n- [Web.dev: Optimize Largest Contentful Paint](https://web.dev/articles/optimize-lcp)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/component-bindable-sparingly.md": "---\ntitle: Use $bindable Sparingly for Two-Way Binding\nimpact: MEDIUM\nimpactDescription: \"Overusing two-way binding makes data flow unpredictable and harder to debug\"\ntags: svelte5, bindable, two-way-binding, state-management, components\n---\n\n## Use $bindable Sparingly for Two-Way Binding\n\n**Impact: MEDIUM** — Overusing two-way binding makes data flow unpredictable and harder to debug\n\nThe `$bindable()` rune enables two-way binding on component props, allowing parent and child to share mutable state. While convenient, overusing it obscures data flow and makes components harder to reason about. Reserve `$bindable` for form inputs and cases where bidirectional updates genuinely simplify the code.\n\n### Incorrect\n\n```svelte\n<!-- UserCard.svelte - Overusing $bindable -->\n<script>\n  let {\n    name = $bindable(),\n    email = $bindable(),\n    isExpanded = $bindable(false),\n    selectedTab = $bindable('profile'),\n    validationErrors = $bindable([])\n  } = $props();\n</script>\n\n<div class=\"card\" class:expanded={isExpanded}>\n  <input bind:value={name} />\n  <input bind:value={email} />\n  <!-- Component modifies parent state in multiple places -->\n</div>\n```\n\nMaking every prop bindable creates implicit two-way data flow everywhere. The parent can't tell which child modified what state, making bugs hard to track and components tightly coupled.\n\n### Correct\n\n```svelte\n<!-- TextInput.svelte - $bindable for form input -->\n<script>\n  let { value = $bindable(''), label, oninput } = $props();\n</script>\n\n<label>\n  {label}\n  <input bind:value oninput={oninput} />\n</label>\n\n<!-- UserCard.svelte - One-way props with callbacks -->\n<script>\n  let {\n    name,\n    email,\n    isExpanded = false,\n    onNameChange,\n    onEmailChange,\n    onToggleExpanded\n  } = $props();\n</script>\n\n<div class=\"card\" class:expanded={isExpanded}>\n  <TextInput label=\"Name\" value={name} oninput={(e) => onNameChange?.(e.target.value)} />\n  <TextInput label=\"Email\" value={email} oninput={(e) => onEmailChange?.(e.target.value)} />\n  <button onclick={() => onToggleExpanded?.()}>Toggle</button>\n</div>\n```\n\nUse `$bindable` only for low-level form components where `bind:value` genuinely simplifies usage. For other state changes, use callback props to make data flow explicit and predictable. The parent controls the state and receives clear signals about what changed.\n\n### Reference\n\n- [Svelte 5 $bindable Documentation](https://svelte.dev/docs/svelte/$bindable)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/component-callback-props.md": "---\ntitle: Use Callback Props Instead of createEventDispatcher\nimpact: HIGH\nimpactDescription: \"createEventDispatcher is deprecated and will be removed in future Svelte versions\"\ntags: svelte5, events, callbacks, components, migration\n---\n\n## Use Callback Props Instead of createEventDispatcher\n\n**Impact: HIGH** — createEventDispatcher is deprecated and will be removed in future Svelte versions\n\nIn Svelte 5, `createEventDispatcher` is deprecated. Instead of dispatching custom events, components should accept callback functions as props. This approach is more explicit, type-safe, and aligns with how modern frameworks handle component communication.\n\n### Incorrect\n\n```svelte\n<script>\n  import { createEventDispatcher } from 'svelte';\n\n  const dispatch = createEventDispatcher();\n\n  function handleClick() {\n    dispatch('select', { id: 123, name: 'Item' });\n  }\n</script>\n\n<button onclick={handleClick}>Select Item</button>\n\n<!-- Parent usage -->\n<!-- <Child on:select={handleSelect} /> -->\n```\n\nThe `createEventDispatcher` pattern is deprecated. It requires importing from Svelte, uses a less type-safe string-based event system, and the `on:` directive for custom events is also deprecated.\n\n### Correct\n\n```svelte\n<script>\n  let { onSelect } = $props();\n\n  function handleClick() {\n    onSelect?.({ id: 123, name: 'Item' });\n  }\n</script>\n\n<button onclick={handleClick}>Select Item</button>\n\n<!-- Parent usage -->\n<!-- <Child onSelect={handleSelect} /> -->\n```\n\nCallback props are regular functions passed as props. They provide better TypeScript support, are more explicit about the component's API, and use optional chaining (`?.`) to safely handle cases where the callback isn't provided.\n\n### Reference\n\n- [Svelte 5 Event Handlers Documentation](https://svelte.dev/docs/svelte/v5-migration-guide#Event-changes)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/component-props-destructure.md": "---\ntitle: Use $props() for Component Properties\nimpact: HIGH\nimpactDescription: \"Using deprecated export let syntax will break in future Svelte versions\"\ntags: svelte5, props, components, migration\n---\n\n## Use $props() for Component Properties\n\n**Impact: HIGH** — Using deprecated export let syntax will break in future Svelte versions\n\nIn Svelte 5, the `export let` syntax for declaring component props is deprecated. The new `$props()` rune provides a more explicit and flexible way to declare props with destructuring, default values, and TypeScript support.\n\n### Incorrect\n\n```svelte\n<script>\n  export let name;\n  export let count = 0;\n  export let disabled = false;\n</script>\n\n<button {disabled}>\n  {name}: {count}\n</button>\n```\n\nThe `export let` syntax is deprecated in Svelte 5. It doesn't work with the new reactivity system and will be removed in future versions.\n\n### Correct\n\n```svelte\n<script>\n  let { name, count = 0, disabled = false } = $props();\n</script>\n\n<button {disabled}>\n  {name}: {count}\n</button>\n```\n\nThe `$props()` rune integrates with Svelte 5's reactivity system. It supports destructuring with defaults, rest props (`...rest`), and works seamlessly with TypeScript for type inference.\n\n### Reference\n\n- [Svelte 5 $props Documentation](https://svelte.dev/docs/svelte/$props)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/component-snippets-not-slots.md": "---\ntitle: Use Snippets Instead of Slots\nimpact: MEDIUM\nimpactDescription: \"Slots are deprecated and snippets provide more flexibility and type safety\"\ntags: svelte5, snippets, slots, components, composition, migration\n---\n\n## Use Snippets Instead of Slots\n\n**Impact: MEDIUM** — Slots are deprecated and snippets provide more flexibility and type safety\n\nIn Svelte 5, slots are deprecated in favor of snippets. Snippets use `{#snippet}` to define reusable content blocks and `{@render}` to render them. This new system is more powerful, supports passing data to content, and works better with TypeScript.\n\n### Incorrect\n\n```svelte\n<!-- Card.svelte -->\n<div class=\"card\">\n  <div class=\"header\">\n    <slot name=\"header\">Default Header</slot>\n  </div>\n  <div class=\"body\">\n    <slot />\n  </div>\n  <div class=\"footer\">\n    <slot name=\"footer\" />\n  </div>\n</div>\n\n<!-- Parent usage -->\n<!--\n<Card>\n  <h2 slot=\"header\">Title</h2>\n  <p>Content goes here</p>\n  <button slot=\"footer\">Action</button>\n</Card>\n-->\n```\n\nThe `<slot>` element and `slot` attribute are deprecated in Svelte 5. They don't support TypeScript well and have limitations when passing data back to the parent.\n\n### Correct\n\n```svelte\n<!-- Card.svelte -->\n<script>\n  let { header, children, footer } = $props();\n</script>\n\n<div class=\"card\">\n  <div class=\"header\">\n    {#if header}\n      {@render header()}\n    {:else}\n      Default Header\n    {/if}\n  </div>\n  <div class=\"body\">\n    {@render children?.()}\n  </div>\n  {#if footer}\n    <div class=\"footer\">\n      {@render footer()}\n    </div>\n  {/if}\n</div>\n\n<!-- Parent usage -->\n<!--\n<Card>\n  {#snippet header()}\n    <h2>Title</h2>\n  {/snippet}\n\n  <p>Content goes here</p>\n\n  {#snippet footer()}\n    <button>Action</button>\n  {/snippet}\n</Card>\n-->\n```\n\nSnippets are passed as props and rendered with `{@render}`. The `children` snippet represents default content (content without a snippet declaration). This approach supports passing parameters to snippets and has full TypeScript support.\n\n### Reference\n\n- [Svelte 5 Snippets Documentation](https://svelte.dev/docs/svelte/snippet)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/css-class-directive.md": "---\ntitle: Use class: Directive for Conditional Classes\nimpact: LOW\nimpactDescription: \"Cleaner and more readable syntax for toggling CSS classes\"\ntags: css, classes, directive, conditional\n---\n\n## Use class: Directive for Conditional Classes\n\n**Impact: LOW** — Cleaner and more readable syntax for toggling CSS classes\n\nSvelte provides the `class:name={condition}` directive for conditionally applying CSS classes. This is cleaner and more readable than using ternary operators or string concatenation in the class attribute. The directive also supports the shorthand `class:name` when the variable name matches the class name.\n\n### Incorrect\n```svelte\n<script>\n  let isActive = $state(false);\n  let isDisabled = $state(false);\n  let isLoading = $state(true);\n</script>\n\n<!-- Ternary operators in class attribute -->\n<button class=\"btn {isActive ? 'active' : ''} {isDisabled ? 'disabled' : ''} {isLoading ? 'loading' : ''}\">\n  Click me\n</button>\n\n<!-- Template literals are even harder to read -->\n<button class={`btn ${isActive ? 'active' : ''} ${isDisabled ? 'disabled' : ''}`}>\n  Click me\n</button>\n\n<!-- Array join pattern -->\n<button class={['btn', isActive && 'active', isDisabled && 'disabled'].filter(Boolean).join(' ')}>\n  Click me\n</button>\n```\nThese patterns are verbose, hard to scan, and prone to accidental extra whitespace. They become increasingly difficult to maintain as more conditional classes are added.\n\n### Correct\n```svelte\n<script>\n  let active = $state(false);\n  let disabled = $state(false);\n  let isLoading = $state(true);\n</script>\n\n<!-- Clean class directives -->\n<button\n  class=\"btn\"\n  class:active\n  class:disabled\n  class:loading={isLoading}\n>\n  Click me\n</button>\n\n<!-- Multiple conditions are easy to scan -->\n<div\n  class=\"card\"\n  class:highlighted={isSelected}\n  class:expanded={isOpen}\n  class:animate={shouldAnimate}\n>\n  Content\n</div>\n```\nThe `class:` directive separates concerns cleanly. Static classes stay in the class attribute, while conditional classes are explicitly listed. The shorthand `class:active` is equivalent to `class:active={active}`.\n\n### Reference\n- [Svelte Docs: class directive](https://svelte.dev/docs/element-directives#class-name)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/css-custom-properties-theming.md": "---\ntitle: Use CSS Custom Properties for Theming\nimpact: MEDIUM\nimpactDescription: \"Enables flexible theming while respecting component encapsulation\"\ntags: css, theming, custom-properties, variables\n---\n\n## Use CSS Custom Properties for Theming\n\n**Impact: MEDIUM** — Enables flexible theming while respecting component encapsulation\n\nCSS custom properties (variables) provide the best way to create themeable components in Svelte. They work naturally with Svelte's scoped styles and can be passed to child components using the `--property={value}` syntax on component elements. This approach maintains encapsulation while allowing parent components to customize child component appearance.\n\n### Incorrect\n```svelte\n<!-- Parent.svelte -->\n<script>\n  import Button from './Button.svelte';\n</script>\n\n<!-- Trying to pass colors as props and build inline styles -->\n<Button backgroundColor=\"blue\" textColor=\"white\" hoverColor=\"darkblue\" />\n\n<!-- Button.svelte -->\n<script>\n  let { backgroundColor, textColor, hoverColor } = $props();\n</script>\n\n<button style=\"background-color: {backgroundColor}; color: {textColor};\">\n  <slot />\n</button>\n\n<style>\n  /* Can't use props in CSS - hover state won't work */\n  button:hover {\n    /* background-color: {hoverColor}; - This doesn't work! */\n  }\n</style>\n```\nPassing style values as props is limited. You cannot use JavaScript props in the `<style>` block for pseudo-selectors, media queries, or other CSS features.\n\n### Correct\n```svelte\n<!-- Parent.svelte -->\n<script>\n  import Button from './Button.svelte';\n</script>\n\n<!-- Pass CSS custom properties to child components -->\n<Button --btn-bg=\"blue\" --btn-color=\"white\" --btn-hover-bg=\"darkblue\">\n  Click me\n</Button>\n\n<!-- Or set them on a wrapper for multiple children -->\n<div class=\"theme-dark\">\n  <Button>Dark Button</Button>\n  <Card>Dark Card</Card>\n</div>\n\n<style>\n  .theme-dark {\n    --btn-bg: #333;\n    --btn-color: #fff;\n    --btn-hover-bg: #555;\n  }\n</style>\n\n<!-- Button.svelte -->\n<button><slot /></button>\n\n<style>\n  button {\n    background-color: var(--btn-bg, #007bff);\n    color: var(--btn-color, white);\n    padding: 0.5rem 1rem;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n  }\n\n  button:hover {\n    background-color: var(--btn-hover-bg, #0056b3);\n  }\n\n  button:focus {\n    outline: 2px solid var(--btn-focus-ring, var(--btn-bg, #007bff));\n  }\n</style>\n```\nCSS custom properties work naturally with all CSS features including pseudo-selectors, media queries, and animations. Provide sensible defaults using `var(--prop, default)` so components work without customization.\n\n### Reference\n- [Svelte Docs: --style-props](https://svelte.dev/docs/component-directives#style-props)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/css-global-sparingly.md": "---\ntitle: Use :global() Sparingly\nimpact: MEDIUM\nimpactDescription: \"Overusing :global() defeats Svelte's style encapsulation and can cause style conflicts\"\ntags: css, global, scoping, styles\n---\n\n## Use :global() Sparingly\n\n**Impact: MEDIUM** — Overusing :global() defeats Svelte's style encapsulation and can cause style conflicts\n\nThe `:global()` modifier allows styles to escape Svelte's scoping, affecting elements anywhere in the DOM. While sometimes necessary, overusing it negates one of Svelte's key benefits: automatic style isolation. Reserve `:global()` for specific use cases like styling injected HTML content, third-party components, or truly global overrides.\n\n### Incorrect\n```svelte\n<script>\n  let isActive = $state(false);\n</script>\n\n<button class=\"btn\" class:active={isActive}>Click me</button>\n\n<style>\n  /* Don't use :global() for styles that should be scoped */\n  :global(.btn) {\n    padding: 0.5rem 1rem;\n    border-radius: 4px;\n  }\n\n  :global(.active) {\n    background: blue;\n    color: white;\n  }\n</style>\n```\nUsing `:global()` here means these styles will affect ALL `.btn` and `.active` elements across the entire application, leading to unintended side effects.\n\n### Correct\n```svelte\n<script>\n  let isActive = $state(false);\n</script>\n\n<button class=\"btn\" class:active={isActive}>Click me</button>\n\n<!-- For injected HTML that needs styling -->\n<div class=\"content\">\n  {@html sanitizedHtml}\n</div>\n\n<style>\n  /* Scoped styles for this component's elements */\n  .btn {\n    padding: 0.5rem 1rem;\n    border-radius: 4px;\n  }\n\n  .active {\n    background: blue;\n    color: white;\n  }\n\n  /* :global() is appropriate for injected HTML content */\n  .content :global(h1) {\n    font-size: 2rem;\n  }\n\n  .content :global(a) {\n    color: var(--link-color);\n  }\n</style>\n```\nKeep styles scoped by default. Use `:global()` only for injected HTML (via `{@html}`), styling third-party library elements, or CSS resets in a dedicated global stylesheet.\n\n### Reference\n- [Svelte Docs: Global styles](https://svelte.dev/docs/svelte-components#style)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/css-scoped-by-default.md": "---\ntitle: Understand CSS Scoping by Default\nimpact: MEDIUM\nimpactDescription: \"Prevents unintended style leaking but requires understanding scoping boundaries\"\ntags: css, scoping, styles, components\n---\n\n## Understand CSS Scoping by Default\n\n**Impact: MEDIUM** — Prevents unintended style leaking but requires understanding scoping boundaries\n\nSvelte automatically scopes all styles in a component's `<style>` block to that component only. This means your CSS won't accidentally affect other parts of your application, but it also means you cannot directly style elements inside child components. Understanding this behavior is essential for managing styles effectively.\n\n### Incorrect\n```svelte\n<!-- Parent.svelte -->\n<script>\n  import ChildComponent from './ChildComponent.svelte';\n</script>\n\n<div class=\"parent\">\n  <ChildComponent />\n</div>\n\n<style>\n  /* This will NOT work - cannot style child component internals */\n  .parent :deep(.child-element) {\n    color: red;\n  }\n\n  /* This also won't work */\n  .child-element {\n    color: red;\n  }\n</style>\n```\nStyles in the parent cannot penetrate child component boundaries. The `.child-element` class inside `ChildComponent` will not be affected.\n\n### Correct\n```svelte\n<!-- Parent.svelte -->\n<script>\n  import ChildComponent from './ChildComponent.svelte';\n</script>\n\n<div class=\"parent\">\n  <ChildComponent --text-color=\"red\" />\n</div>\n\n<style>\n  .parent {\n    /* Styles only affect elements in THIS component */\n    padding: 1rem;\n  }\n</style>\n\n<!-- ChildComponent.svelte -->\n<div class=\"child-element\">Content</div>\n\n<style>\n  .child-element {\n    /* Use CSS custom properties to accept theming from parent */\n    color: var(--text-color, black);\n  }\n</style>\n```\nUse CSS custom properties to allow parents to influence child styling, or use `:global()` when necessary. This respects component encapsulation while enabling customization.\n\n### Reference\n- [Svelte Docs: Scoped styles](https://svelte.dev/docs/svelte-components#style)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/css-style-directive.md": "---\ntitle: Use style: Directive for Dynamic Styles\nimpact: LOW\nimpactDescription: \"Cleaner syntax and automatic handling of undefined values\"\ntags: css, styles, directive, dynamic\n---\n\n## Use style: Directive for Dynamic Styles\n\n**Impact: LOW** — Cleaner syntax and automatic handling of undefined values\n\nSvelte provides the `style:property={value}` directive for applying dynamic inline styles. This is cleaner than manually constructing style strings and automatically handles undefined or null values by omitting the property entirely. It also supports the shorthand `style:property` when the variable name matches the CSS property.\n\n### Incorrect\n```svelte\n<script>\n  let color = $state('red');\n  let fontSize = $state(16);\n  let opacity = $state(undefined);\n</script>\n\n<!-- Manually building style strings is error-prone -->\n<div style=\"color: {color}; font-size: {fontSize}px; opacity: {opacity};\">\n  Content\n</div>\n\n<!-- Even worse with conditionals -->\n<div style=\"color: {color}; {opacity !== undefined ? `opacity: ${opacity};` : ''}\">\n  Content\n</div>\n```\nManually constructing style strings is verbose, hard to read, and doesn't handle undefined values gracefully. The result may include `opacity: undefined;` which is invalid CSS.\n\n### Correct\n```svelte\n<script>\n  let color = $state('red');\n  let fontSize = $state(16);\n  let opacity = $state(undefined);\n</script>\n\n<!-- Clean style directives -->\n<div\n  style:color\n  style:font-size=\"{fontSize}px\"\n  style:opacity\n>\n  Content\n</div>\n\n<!-- Can also use camelCase -->\n<div\n  style:color={color}\n  style:fontSize=\"{fontSize}px\"\n>\n  Content\n</div>\n```\nThe `style:` directive is cleaner and automatically omits properties when the value is undefined or null. The shorthand `style:color` is equivalent to `style:color={color}` when the variable name matches.\n\n### Reference\n- [Svelte Docs: style directive](https://svelte.dev/docs/element-directives#style-property)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/elements-dynamic-components.md": "---\ntitle: Components Are Dynamic by Default in Svelte 5\nimpact: MEDIUM\nimpactDescription: \"Simplifies dynamic component rendering and reduces boilerplate\"\ntags: components, dynamic, svelte5, migration\n---\n\n## Components Are Dynamic by Default in Svelte 5\n\n**Impact: MEDIUM** — Simplifies dynamic component rendering and reduces boilerplate\n\nIn Svelte 5, components can be rendered dynamically without the `<svelte:component>` wrapper. You can use a component directly with a capitalized variable, and Svelte will re-render when the component reference changes. The `<svelte:component>` syntax is still supported but no longer necessary.\n\n### Incorrect\n```svelte\n<script>\n  import Home from './Home.svelte';\n  import About from './About.svelte';\n  import Contact from './Contact.svelte';\n\n  const routes = { home: Home, about: About, contact: Contact };\n\n  let { currentRoute } = $props();\n\n  // Svelte 4 pattern - still works but unnecessary in Svelte 5\n  $: CurrentComponent = routes[currentRoute];\n</script>\n\n<svelte:component this={CurrentComponent} />\n```\nUsing `<svelte:component>` in Svelte 5 adds unnecessary verbosity. The `this` prop pattern is a legacy approach from when components couldn't be rendered dynamically.\n\n### Correct\n```svelte\n<script>\n  import Home from './Home.svelte';\n  import About from './About.svelte';\n  import Contact from './Contact.svelte';\n\n  const routes = { home: Home, about: About, contact: Contact };\n\n  let { currentRoute } = $props();\n\n  let Component = $derived(routes[currentRoute]);\n</script>\n\n<Component />\n\n<!-- Or inline without intermediate variable -->\n{@const Page = routes[currentRoute]}\n<Page />\n```\nIn Svelte 5, any capitalized variable containing a component can be used directly as a tag. When the variable's value changes, Svelte automatically unmounts the old component and mounts the new one. This works with `$derived`, `$state`, or any other reactive source.\n\n### Reference\n- [Svelte Component Directive](https://svelte.dev/docs/svelte/svelte-component)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/elements-svelte-body.md": "---\ntitle: Use svelte:body for Body Event Listeners\nimpact: LOW\nimpactDescription: \"Handles body-specific events with automatic cleanup\"\ntags: events, body, cleanup, beforeunload\n---\n\n## Use svelte:body for Body Event Listeners\n\n**Impact: LOW** — Handles body-specific events with automatic cleanup\n\nThe `<svelte:body>` element allows adding event listeners to `document.body`. This is useful for events that fire on the body element specifically, such as `mouseenter` and `mouseleave` for detecting when the user's mouse enters or leaves the page area.\n\n### Incorrect\n```svelte\n<script>\n  let mouseInPage = $state(true);\n\n  $effect(() => {\n    function handleEnter() {\n      mouseInPage = true;\n    }\n\n    function handleLeave() {\n      mouseInPage = false;\n    }\n\n    document.body.addEventListener('mouseenter', handleEnter);\n    document.body.addEventListener('mouseleave', handleLeave);\n\n    return () => {\n      document.body.removeEventListener('mouseenter', handleEnter);\n      document.body.removeEventListener('mouseleave', handleLeave);\n    };\n  });\n</script>\n\n{#if !mouseInPage}\n  <div class=\"comeback-prompt\">Come back!</div>\n{/if}\n```\nManual event management on `document.body` requires explicit cleanup and is more verbose than necessary.\n\n### Correct\n```svelte\n<script>\n  let mouseInPage = $state(true);\n</script>\n\n<svelte:body\n  onmouseenter={() => mouseInPage = true}\n  onmouseleave={() => mouseInPage = false}\n/>\n\n{#if !mouseInPage}\n  <div class=\"comeback-prompt\">Come back!</div>\n{/if}\n```\nThe `<svelte:body>` element provides clean, declarative syntax for body event listeners with automatic cleanup. Note that for `beforeunload` events, use `<svelte:window>` instead since that event fires on the window object.\n\n### Reference\n- [Svelte Body](https://svelte.dev/docs/svelte/svelte-body)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/elements-svelte-head.md": "---\ntitle: Use svelte:head for Dynamic Document Head\nimpact: MEDIUM\nimpactDescription: \"Ensures proper SEO, accessibility, and document metadata management\"\ntags: seo, meta-tags, document, head, accessibility\n---\n\n## Use svelte:head for Dynamic Document Head\n\n**Impact: MEDIUM** — Ensures proper SEO, accessibility, and document metadata management\n\nThe `<svelte:head>` element allows components to insert elements into the document's `<head>`, such as titles, meta tags, and link elements. This is essential for SEO, social sharing previews, and dynamic page titles that reflect current content.\n\n### Incorrect\n```svelte\n<script>\n  let { pageTitle } = $props();\n\n  $effect(() => {\n    document.title = pageTitle;\n    // Meta tags require even more manual DOM manipulation\n    const meta = document.querySelector('meta[name=\"description\"]');\n    if (meta) meta.content = 'Page description';\n  });\n</script>\n\n<h1>{pageTitle}</h1>\n```\nManual DOM manipulation for head elements is verbose, error-prone, and doesn't work correctly during server-side rendering. It also requires manual cleanup when the component unmounts.\n\n### Correct\n```svelte\n<script>\n  let { pageTitle, description } = $props();\n</script>\n\n<svelte:head>\n  <title>{pageTitle}</title>\n  <meta name=\"description\" content={description} />\n  <meta property=\"og:title\" content={pageTitle} />\n  <link rel=\"canonical\" href=\"https://example.com/page\" />\n</svelte:head>\n\n<h1>{pageTitle}</h1>\n```\nThe `<svelte:head>` element works seamlessly with SSR, automatically updates when reactive values change, and cleans up when the component is destroyed. Multiple components can contribute to the head, with later values taking precedence.\n\n### Reference\n- [Svelte Head](https://svelte.dev/docs/svelte/svelte-head)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/elements-svelte-window.md": "---\ntitle: Use svelte:window for Window Event Listeners\nimpact: MEDIUM\nimpactDescription: \"Provides automatic cleanup and prevents memory leaks from orphaned listeners\"\ntags: events, window, cleanup, memory-leaks\n---\n\n## Use svelte:window for Window Event Listeners\n\n**Impact: MEDIUM** — Provides automatic cleanup and prevents memory leaks from orphaned listeners\n\nThe `<svelte:window>` element provides a declarative way to add event listeners to the `window` object. Listeners are automatically removed when the component is destroyed, preventing memory leaks. It also provides convenient bindings for common window properties.\n\n### Incorrect\n```svelte\n<script>\n  let innerWidth = $state(0);\n\n  $effect(() => {\n    function handleResize() {\n      innerWidth = window.innerWidth;\n    }\n\n    function handleKeydown(e) {\n      if (e.key === 'Escape') closeModal();\n    }\n\n    window.addEventListener('resize', handleResize);\n    window.addEventListener('keydown', handleKeydown);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n      window.removeEventListener('keydown', handleKeydown);\n    };\n  });\n</script>\n\n<p>Window width: {innerWidth}</p>\n```\nManual event listener management requires explicit cleanup in the effect's return function. Missing cleanup leads to memory leaks and duplicate handlers if the component re-mounts.\n\n### Correct\n```svelte\n<script>\n  let innerWidth = $state(0);\n\n  function handleKeydown(e) {\n    if (e.key === 'Escape') closeModal();\n  }\n</script>\n\n<svelte:window\n  bind:innerWidth\n  onkeydown={handleKeydown}\n/>\n\n<p>Window width: {innerWidth}</p>\n```\nThe `<svelte:window>` element automatically handles cleanup. The `bind:innerWidth` binding keeps the variable in sync with the window size without manual resize listeners. Available bindings include `innerWidth`, `innerHeight`, `outerWidth`, `outerHeight`, `scrollX`, `scrollY`, and `online`.\n\n### Reference\n- [Svelte Window](https://svelte.dev/docs/svelte/svelte-window)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/events-modifiers-wrapper.md": "---\ntitle: Use Wrapper Functions for Event Modifiers\nimpact: MEDIUM\nimpactDescription: \"Event modifiers no longer exist in Svelte 5\"\ntags: events, svelte5, migration, modifiers\n---\n\n## Use Wrapper Functions for Event Modifiers\n\n**Impact: MEDIUM** — Event modifiers no longer exist in Svelte 5\n\nEvent modifiers like `|preventDefault`, `|stopPropagation`, and `|once` have been removed in Svelte 5. Instead, implement this logic directly in your event handler functions. This gives you more explicit control over event behavior and makes the code more readable and debuggable.\n\n### Incorrect\n\n```svelte\n<script>\n  function handleSubmit() {\n    console.log('form submitted');\n  }\n</script>\n\n<form on:submit|preventDefault|once={handleSubmit}>\n  <button type=\"submit\">Submit</button>\n</form>\n```\n\nThe `|preventDefault` and `|once` modifiers are not supported in Svelte 5. This syntax will cause compilation errors.\n\n### Correct\n\n```svelte\n<script>\n  let hasSubmitted = $state(false);\n\n  function handleSubmit(event) {\n    event.preventDefault();\n\n    if (hasSubmitted) return;\n    hasSubmitted = true;\n\n    console.log('form submitted');\n  }\n</script>\n\n<form onsubmit={handleSubmit}>\n  <button type=\"submit\">Submit</button>\n</form>\n```\n\nImplementing modifiers directly in the handler provides explicit control. Use `event.preventDefault()` instead of `|preventDefault`, `event.stopPropagation()` instead of `|stopPropagation`, and track state with a variable instead of `|once`. For reusable modifier logic, create helper functions.\n\n### Reference\n\n- [Svelte 5 Migration Guide - Event Modifiers](https://svelte.dev/docs/svelte/v5-migration-guide#Event-changes-Event-modifiers)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/events-onclick-not-on.md": "---\ntitle: Use onclick Instead of on:click\nimpact: MEDIUM\nimpactDescription: \"Using deprecated syntax will cause errors in Svelte 5\"\ntags: events, svelte5, migration\n---\n\n## Use onclick Instead of on:click\n\n**Impact: MEDIUM** — Using deprecated syntax will cause errors in Svelte 5\n\nThe `on:` directive syntax from Svelte 4 is deprecated in Svelte 5. Instead, use native HTML event attributes like `onclick`, `onmouseover`, `onsubmit`, etc. This aligns Svelte more closely with standard HTML and JavaScript, making the framework more intuitive for developers familiar with the DOM.\n\n### Incorrect\n\n```svelte\n<script>\n  function handleClick() {\n    console.log('clicked');\n  }\n</script>\n\n<button on:click={handleClick}>Click me</button>\n```\n\nThe `on:click` directive syntax is deprecated in Svelte 5 and will cause compilation errors.\n\n### Correct\n\n```svelte\n<script>\n  function handleClick() {\n    console.log('clicked');\n  }\n</script>\n\n<button onclick={handleClick}>Click me</button>\n```\n\nUsing the native `onclick` attribute follows standard HTML conventions and is the correct approach in Svelte 5. This works for all DOM events: `onmouseover`, `onkeydown`, `onsubmit`, etc.\n\n### Reference\n\n- [Svelte 5 Migration Guide - Event Handlers](https://svelte.dev/docs/svelte/v5-migration-guide#Event-changes-Event-handlers)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/forms-bind-group.md": "---\ntitle: Use bind:group for Radio Buttons and Checkbox Groups\nimpact: MEDIUM\nimpactDescription: \"Simplifies grouped input management and prevents selection state bugs\"\ntags: forms, binding, radio, checkbox, svelte5\n---\n\n## Use bind:group for Radio Buttons and Checkbox Groups\n\n**Impact: MEDIUM** — Simplifies grouped input management and prevents selection state bugs\n\nThe `bind:group` directive automatically manages the selected value(s) for radio buttons and checkbox groups. For radio buttons, it binds to a single value; for checkboxes, it binds to an array. This eliminates complex manual tracking logic and ensures consistent behavior.\n\n### Incorrect\n```svelte\n<script lang=\"ts\">\n  let selectedSize = $state('');\n  let selectedColors: string[] = $state([]);\n\n  function handleSizeChange(event: Event) {\n    selectedSize = (event.target as HTMLInputElement).value;\n  }\n\n  function handleColorChange(event: Event) {\n    const input = event.target as HTMLInputElement;\n    if (input.checked) {\n      selectedColors = [...selectedColors, input.value];\n    } else {\n      selectedColors = selectedColors.filter(c => c !== input.value);\n    }\n  }\n</script>\n\n<input type=\"radio\" name=\"size\" value=\"small\" onchange={handleSizeChange} />\n<input type=\"radio\" name=\"size\" value=\"medium\" onchange={handleSizeChange} />\n<input type=\"radio\" name=\"size\" value=\"large\" onchange={handleSizeChange} />\n\n<input type=\"checkbox\" value=\"red\" onchange={handleColorChange} />\n<input type=\"checkbox\" value=\"blue\" onchange={handleColorChange} />\n<input type=\"checkbox\" value=\"green\" onchange={handleColorChange} />\n```\nManual handlers for grouped inputs are verbose, error-prone, and require careful array manipulation for checkboxes.\n\n### Correct\n```svelte\n<script lang=\"ts\">\n  let selectedSize = $state('medium');\n  let selectedColors: string[] = $state([]);\n</script>\n\n<input type=\"radio\" name=\"size\" value=\"small\" bind:group={selectedSize} />\n<input type=\"radio\" name=\"size\" value=\"medium\" bind:group={selectedSize} />\n<input type=\"radio\" name=\"size\" value=\"large\" bind:group={selectedSize} />\n\n<input type=\"checkbox\" value=\"red\" bind:group={selectedColors} />\n<input type=\"checkbox\" value=\"blue\" bind:group={selectedColors} />\n<input type=\"checkbox\" value=\"green\" bind:group={selectedColors} />\n```\nThe `bind:group` directive handles all the selection logic automatically, keeping your code clean and bug-free.\n\n### Reference\n- [Svelte Tutorial: Group Inputs](https://svelte.dev/tutorial/svelte/group-inputs)\n- [Svelte Docs: bind:group](https://svelte.dev/docs/svelte/bind#input-bind:group)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/forms-bind-value.md": "---\ntitle: Use bind:value for Form Inputs\nimpact: MEDIUM\nimpactDescription: \"Reduces boilerplate and prevents state synchronization bugs\"\ntags: forms, binding, inputs, svelte5\n---\n\n## Use bind:value for Form Inputs\n\n**Impact: MEDIUM** — Reduces boilerplate and prevents state synchronization bugs\n\nSvelte's `bind:value` directive creates a two-way binding between form inputs and state variables. This eliminates the need for manual `oninput` handlers and ensures the state always reflects the input's current value. Using manual handlers adds unnecessary code and creates opportunities for synchronization bugs.\n\n### Incorrect\n```svelte\n<script lang=\"ts\">\n  let name = $state('');\n  let email = $state('');\n\n  function handleNameInput(event: Event) {\n    name = (event.target as HTMLInputElement).value;\n  }\n\n  function handleEmailInput(event: Event) {\n    email = (event.target as HTMLInputElement).value;\n  }\n</script>\n\n<input type=\"text\" value={name} oninput={handleNameInput} />\n<input type=\"email\" value={email} oninput={handleEmailInput} />\n```\nManual handlers add boilerplate, require type casting, and can lead to bugs if you forget to update the handler when renaming variables.\n\n### Correct\n```svelte\n<script lang=\"ts\">\n  let name = $state('');\n  let email = $state('');\n</script>\n\n<input type=\"text\" bind:value={name} />\n<input type=\"email\" bind:value={email} />\n```\nThe `bind:value` directive handles synchronization automatically, is type-safe, and clearly expresses the intent of two-way binding.\n\n### Reference\n- [Svelte Tutorial: Text Inputs](https://svelte.dev/tutorial/svelte/text-inputs)\n- [Svelte Docs: bind:value](https://svelte.dev/docs/svelte/bind#input-bind:value)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/forms-enhance-action.md": "---\ntitle: Use SvelteKit's enhance Action for Progressive Enhancement\nimpact: HIGH\nimpactDescription: \"Ensures forms work without JavaScript while providing smooth UX when JS is available\"\ntags: forms, sveltekit, progressive-enhancement, actions\n---\n\n## Use SvelteKit's enhance Action for Progressive Enhancement\n\n**Impact: HIGH** — Ensures forms work without JavaScript while providing smooth UX when JS is available\n\nSvelteKit's `enhance` action upgrades standard HTML forms to use fetch requests without full page reloads, while preserving the ability to work without JavaScript. This provides the best of both worlds: accessibility and resilience for users without JS, and a smooth SPA-like experience for those with it. Without `enhance`, forms either require JavaScript or cause jarring full-page reloads.\n\n### Incorrect\n```svelte\n<script lang=\"ts\">\n  import { goto } from '$app/navigation';\n\n  let loading = $state(false);\n\n  async function handleSubmit(event: Event) {\n    event.preventDefault();\n    loading = true;\n\n    const form = event.target as HTMLFormElement;\n    const data = new FormData(form);\n\n    const response = await fetch('/api/subscribe', {\n      method: 'POST',\n      body: data\n    });\n\n    if (response.ok) {\n      goto('/success');\n    }\n    loading = false;\n  }\n</script>\n\n<form onsubmit={handleSubmit}>\n  <input name=\"email\" type=\"email\" required />\n  <button disabled={loading}>Subscribe</button>\n</form>\n```\nThis custom handler breaks when JavaScript is disabled, requires manual loading state management, and doesn't integrate with SvelteKit's form action system.\n\n### Correct\n```svelte\n<script lang=\"ts\">\n  import { enhance } from '$app/forms';\n</script>\n\n<form method=\"POST\" action=\"?/subscribe\" use:enhance>\n  <input name=\"email\" type=\"email\" required />\n  <button>Subscribe</button>\n</form>\n```\n```typescript\n// +page.server.ts\nimport { fail, redirect } from '@sveltejs/kit';\nimport type { Actions } from './$types';\n\nexport const actions: Actions = {\n  subscribe: async ({ request }) => {\n    const data = await request.formData();\n    const email = data.get('email');\n\n    if (!email) {\n      return fail(400, { email, missing: true });\n    }\n\n    // Save to database...\n\n    throw redirect(303, '/success');\n  }\n};\n```\nThe `use:enhance` directive provides automatic loading states, error handling, and works seamlessly with or without JavaScript.\n\n### Reference\n- [SvelteKit Docs: Form Actions](https://svelte.dev/docs/kit/form-actions)\n- [SvelteKit Docs: Progressive Enhancement](https://svelte.dev/docs/kit/form-actions#progressive-enhancement)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/reactivity-derived-not-effect.md": "---\ntitle: Use $derived Instead of $effect for Computed Values\nimpact: CRITICAL\nimpactDescription: \"Using $effect for computed values causes unnecessary re-renders and potential infinite loops\"\ntags: reactivity, derived, effect, svelte5\n---\n\n## Use $derived Instead of $effect for Computed Values\n\n**Impact: CRITICAL** — Using $effect for computed values causes unnecessary re-renders and potential infinite loops\n\nThe `$derived` rune is designed for pure computations that depend on reactive state, while `$effect` is meant exclusively for side effects like DOM manipulation, logging, or external API calls. Using `$effect` to compute and set derived values creates unnecessary state, can cause timing issues, and may trigger infinite update loops.\n\n### Incorrect\n\n```svelte\n<script>\n  let count = $state(0);\n  let doubled = $state(0);\n\n  $effect(() => {\n    doubled = count * 2;\n  });\n</script>\n\n<p>{count} doubled is {doubled}</p>\n```\n\nThis pattern creates redundant state and an extra update cycle. The effect runs after render, meaning `doubled` briefly has a stale value. It also risks infinite loops if the logic becomes more complex.\n\n### Correct\n\n```svelte\n<script>\n  let count = $state(0);\n  let doubled = $derived(count * 2);\n</script>\n\n<p>{count} doubled is {doubled}</p>\n```\n\n`$derived` automatically tracks its dependencies and recalculates synchronously when they change. The value is always consistent with its source state, there's no extra state to manage, and the intent is immediately clear.\n\n### Reference\n\n- [Svelte 5 $derived Documentation](https://svelte.dev/docs/svelte/$derived)\n- [Svelte 5 $effect Documentation](https://svelte.dev/docs/svelte/$effect)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/reactivity-effect-cleanup.md": "---\ntitle: Return Cleanup Functions from $effect\nimpact: HIGH\nimpactDescription: \"Effects without cleanup cause memory leaks and zombie subscriptions\"\ntags: reactivity, effect, cleanup, svelte5\n---\n\n## Return Cleanup Functions from $effect\n\n**Impact: HIGH** — Effects without cleanup cause memory leaks and zombie subscriptions\n\nWhen an `$effect` creates subscriptions, timers, event listeners, or any resource that persists beyond the effect's execution, you must return a cleanup function. This function runs before the effect re-executes and when the component is destroyed. Without proper cleanup, resources accumulate over time, causing memory leaks and unexpected behavior from stale callbacks.\n\n### Incorrect\n\n```svelte\n<script>\n  let seconds = $state(0);\n\n  $effect(() => {\n    setInterval(() => {\n      seconds++;\n    }, 1000);\n  });\n</script>\n\n<p>Elapsed: {seconds}s</p>\n```\n\nEvery time this effect runs (and on component re-mount), a new interval is created without clearing the old one. This causes `seconds` to increment faster and faster, and the intervals continue running even after the component is destroyed.\n\n### Correct\n\n```svelte\n<script>\n  let seconds = $state(0);\n\n  $effect(() => {\n    const interval = setInterval(() => {\n      seconds++;\n    }, 1000);\n\n    return () => {\n      clearInterval(interval);\n    };\n  });\n</script>\n\n<p>Elapsed: {seconds}s</p>\n```\n\nThe cleanup function returned from `$effect` ensures the interval is cleared before the effect re-runs or when the component unmounts. This pattern applies to all resources: `addEventListener`/`removeEventListener`, WebSocket connections, subscription callbacks, and any external resource that needs explicit teardown.\n\n### Reference\n\n- [Svelte 5 $effect Documentation](https://svelte.dev/docs/svelte/$effect)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/reactivity-no-state-mutation-in-derived.md": "---\ntitle: Never Mutate State Inside $derived\nimpact: CRITICAL\nimpactDescription: \"Mutating state in $derived causes compiler errors and unpredictable behavior\"\ntags: reactivity, derived, state, svelte5\n---\n\n## Never Mutate State Inside $derived\n\n**Impact: CRITICAL** — Mutating state in $derived causes compiler errors and unpredictable behavior\n\nThe `$derived` rune must be a pure computation that only reads reactive values and returns a result. Attempting to mutate `$state` variables inside a `$derived` block violates Svelte's reactivity contract, leading to compiler errors, infinite loops, or inconsistent state. Derived values should be computed from state, not modify it.\n\n### Incorrect\n\n```svelte\n<script>\n  let items = $state([1, 2, 3]);\n  let processedCount = $state(0);\n\n  let doubled = $derived(() => {\n    processedCount++; // Mutating state inside $derived!\n    return items.map(x => x * 2);\n  });\n</script>\n\n<p>Processed {processedCount} times</p>\n```\n\nThis code attempts to track how many times the derived value recalculates by mutating `processedCount`. This creates a dependency cycle: the mutation triggers reactivity, which may re-run the derived, causing instability or errors.\n\n### Correct\n\n```svelte\n<script>\n  let items = $state([1, 2, 3]);\n  let doubled = $derived(items.map(x => x * 2));\n\n  // If you need to track recalculations, use $effect for side effects\n  $effect(() => {\n    console.log('doubled recalculated:', doubled);\n  });\n</script>\n```\n\nKeep `$derived` pure by only reading state and computing a return value. If you need to perform side effects when values change (like logging or analytics), use `$effect` separately. This maintains clear separation between computation and side effects.\n\n### Reference\n\n- [Svelte 5 $derived Documentation](https://svelte.dev/docs/svelte/$derived)\n- [Svelte 5 Reactivity Fundamentals](https://svelte.dev/docs/svelte/what-are-runes)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/reactivity-use-state-explicit.md": "---\ntitle: Use $state for Reactive Variables\nimpact: CRITICAL\nimpactDescription: \"Variables without $state will not trigger UI updates, causing silent bugs\"\ntags: reactivity, state, svelte5\n---\n\n## Use $state for Reactive Variables\n\n**Impact: CRITICAL** — Variables without $state will not trigger UI updates, causing silent bugs\n\nIn Svelte 5, the reactivity system has fundamentally changed. Unlike Svelte 4 where `let` declarations were automatically reactive, Svelte 5 requires explicit opt-in to reactivity using the `$state` rune. Without `$state`, variable mutations will not trigger component re-renders, leading to a UI that appears frozen or out of sync with the actual data.\n\n### Incorrect\n\n```svelte\n<script>\n  let count = 0;\n\n  function increment() {\n    count++;\n  }\n</script>\n\n<button onclick={increment}>\n  Clicks: {count}\n</button>\n```\n\nThe button will always display \"Clicks: 0\" because `count` is not reactive. The variable updates internally, but Svelte has no way to know it changed and won't update the DOM.\n\n### Correct\n\n```svelte\n<script>\n  let count = $state(0);\n\n  function increment() {\n    count++;\n  }\n</script>\n\n<button onclick={increment}>\n  Clicks: {count}\n</button>\n```\n\nUsing `$state(0)` tells Svelte to track this variable for reactivity. Now when `count` changes, Svelte automatically updates all places in the template that reference it.\n\n### Reference\n\n- [Svelte 5 Runes Documentation](https://svelte.dev/docs/svelte/$state)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/remote-batch-queries.md": "---\ntitle: Batch Related Queries to Avoid N+1 Problems\nimpact: MEDIUM\nimpactDescription: \"Unbatched queries in loops cause waterfall requests, multiplying latency and server load\"\ntags: sveltekit, remote-functions, performance, batching, n+1\n---\n\n## Batch Related Queries to Avoid N+1 Problems\n\n**Impact: MEDIUM** — Unbatched queries in loops cause waterfall requests, multiplying latency and server load\n\nWhen fetching related data, making individual queries in a loop creates N+1 request patterns where each item triggers a separate server round-trip. SvelteKit provides `query.batch()` to combine multiple queries executed in the same macrotask into a single request. Better yet, design your queries to fetch related data together when possible.\n\n### Incorrect\n```svelte\n<!-- +page.svelte - WRONG: N+1 queries in a loop -->\n<script lang=\"ts\">\n  import { getUsers, getUserPosts } from './data.remote.ts';\n\n  const users = getUsers();\n</script>\n\n{#await users}\n  <p>Loading users...</p>\n{:then userList}\n  {#each userList as user}\n    <div class=\"user-card\">\n      <h2>{user.name}</h2>\n\n      <!-- WRONG: Each user triggers a separate query request -->\n      <!-- 100 users = 101 total requests (1 for users + 100 for posts) -->\n      {#await getUserPosts({ userId: user.id })}\n        <p>Loading posts...</p>\n      {:then posts}\n        <p>{posts.length} posts</p>\n      {/await}\n    </div>\n  {/each}\n{/await}\n```\n\n```typescript\n// data.remote.ts - WRONG: Queries designed for N+1 pattern\nimport { query } from '@sveltejs/kit';\nimport { z } from 'zod';\nimport { db } from '$lib/server/database';\n\nexport const getUsers = query(async () => {\n  return await db.users.findMany();\n});\n\n// This query will be called N times, once per user\nexport const getUserPosts = query(\n  z.object({ userId: z.string() }),\n  async ({ userId }) => {\n    return await db.posts.findMany({ where: { userId } });\n  }\n);\n```\n\nEach user card triggers its own network request. With 100 users, you make 101 requests instead of 1-2.\n\n### Correct\n```typescript\n// data.remote.ts - CORRECT: Design queries to include related data\nimport { query } from '@sveltejs/kit';\nimport { z } from 'zod';\nimport { db } from '$lib/server/database';\n\n// Include related data in the query\nexport const getUsersWithPosts = query(async () => {\n  return await db.users.findMany({\n    include: {\n      posts: {\n        orderBy: { createdAt: 'desc' },\n        take: 5 // Limit to recent posts\n      },\n      _count: {\n        select: { posts: true }\n      }\n    }\n  });\n});\n\n// For paginated/filtered post lists, use a separate query\nexport const getUserPosts = query(\n  z.object({\n    userId: z.string(),\n    page: z.number().default(0)\n  }),\n  async ({ userId, page }) => {\n    return await db.posts.findMany({\n      where: { userId },\n      skip: page * 10,\n      take: 10,\n      orderBy: { createdAt: 'desc' }\n    });\n  }\n);\n```\n\n```svelte\n<!-- +page.svelte - CORRECT: Single query with included data -->\n<script lang=\"ts\">\n  import { getUsersWithPosts } from './data.remote.ts';\n\n  const users = getUsersWithPosts();\n</script>\n\n{#await users}\n  <p>Loading...</p>\n{:then userList}\n  {#each userList as user}\n    <div class=\"user-card\">\n      <h2>{user.name}</h2>\n      <p>{user._count.posts} total posts</p>\n\n      <!-- Data already loaded - no additional requests -->\n      <ul>\n        {#each user.posts as post}\n          <li>{post.title}</li>\n        {/each}\n      </ul>\n    </div>\n  {/each}\n{/await}\n```\n\n### Using query.batch() for Multiple Independent Queries\n```typescript\n// dashboard.remote.ts\nimport { query } from '@sveltejs/kit';\nimport { db } from '$lib/server/database';\n\nexport const getStats = query(async () => {\n  return await db.stats.findFirst();\n});\n\nexport const getRecentActivity = query(async () => {\n  return await db.activity.findMany({ take: 10 });\n});\n\nexport const getNotifications = query(async () => {\n  return await db.notifications.findMany({ where: { read: false } });\n});\n```\n\n```svelte\n<!-- +page.svelte - CORRECT: Batch multiple queries -->\n<script lang=\"ts\">\n  import { query } from '@sveltejs/kit';\n  import { getStats, getRecentActivity, getNotifications } from './dashboard.remote.ts';\n\n  // Batch combines queries in the same macrotask into one request\n  const dashboardData = query.batch({\n    stats: getStats(),\n    activity: getRecentActivity(),\n    notifications: getNotifications()\n  });\n</script>\n\n{#await dashboardData}\n  <p>Loading dashboard...</p>\n{:then { stats, activity, notifications }}\n  <div class=\"dashboard\">\n    <div class=\"stats\">\n      <p>Users: {stats.userCount}</p>\n      <p>Revenue: ${stats.revenue}</p>\n    </div>\n\n    <div class=\"activity\">\n      {#each activity as item}\n        <p>{item.description}</p>\n      {/each}\n    </div>\n\n    <div class=\"notifications\">\n      {#each notifications as note}\n        <p>{note.message}</p>\n      {/each}\n    </div>\n  </div>\n{/await}\n```\n\nDesign your data model and queries to fetch related data together. When you need multiple independent queries, use `query.batch()` to combine them into a single network request.\n\n### Reference\n- [SvelteKit Remote Functions - Batching](https://svelte.dev/docs/kit/remote-functions#batching)\n- [The N+1 Query Problem](https://www.prisma.io/docs/orm/prisma-client/queries/relation-queries#solving-the-n1-problem)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/remote-form-progressive.md": "---\ntitle: Use Form Remote Functions for Progressive Enhancement\nimpact: HIGH\nimpactDescription: \"Using command() for form submissions breaks the app when JavaScript fails to load or is disabled\"\ntags: sveltekit, remote-functions, forms, progressive-enhancement, accessibility\n---\n\n## Use Form Remote Functions for Progressive Enhancement\n\n**Impact: HIGH** — Using command() for form submissions breaks the app when JavaScript fails to load or is disabled\n\nThe `form()` remote function is designed for progressive enhancement: it works as a standard HTML form without JavaScript (full page reload) and enhances to a partial submit when JS is available. It spreads `method`, `action`, and `onsubmit` onto form elements. Using `command()` for form submissions requires JavaScript and leaves users stranded if it fails to load.\n\n### Incorrect\n```typescript\n// contact.remote.ts - WRONG: Using command for form submission\nimport { command } from '@sveltejs/kit';\nimport { z } from 'zod';\nimport { sendEmail } from '$lib/server/email';\n\nexport const submitContact = command(\n  z.object({\n    name: z.string(),\n    email: z.string().email(),\n    message: z.string()\n  }),\n  async ({ name, email, message }) => {\n    await sendEmail({ to: 'support@example.com', subject: `Contact from ${name}`, body: message });\n    return { success: true };\n  }\n);\n```\n\n```svelte\n<!-- +page.svelte - WRONG: Requires JavaScript to submit -->\n<script lang=\"ts\">\n  import { submitContact } from './contact.remote.ts';\n\n  let name = $state('');\n  let email = $state('');\n  let message = $state('');\n  let status = $state<'idle' | 'sending' | 'sent'>('idle');\n\n  async function handleSubmit(e: Event) {\n    e.preventDefault();\n    status = 'sending';\n    await submitContact({ name, email, message });\n    status = 'sent';\n  }\n</script>\n\n<!-- Breaks without JavaScript -->\n<form onsubmit={handleSubmit}>\n  <input bind:value={name} placeholder=\"Name\" />\n  <input bind:value={email} type=\"email\" placeholder=\"Email\" />\n  <textarea bind:value={message}></textarea>\n  <button disabled={status === 'sending'}>\n    {status === 'sending' ? 'Sending...' : 'Send'}\n  </button>\n</form>\n```\n\nWithout JavaScript, the form does nothing. Users on slow connections, with JS disabled, or when JS fails to load cannot submit the form.\n\n### Correct\n```typescript\n// contact.remote.ts - CORRECT: Using form for progressive enhancement\nimport { form } from '@sveltejs/kit';\nimport { z } from 'zod';\nimport { sendEmail } from '$lib/server/email';\n\nexport const submitContact = form(\n  z.object({\n    name: z.string().min(1, 'Name is required'),\n    email: z.string().email('Please enter a valid email'),\n    message: z.string().min(10, 'Message must be at least 10 characters')\n  }),\n  async ({ name, email, message }) => {\n    await sendEmail({\n      to: 'support@example.com',\n      subject: `Contact from ${name}`,\n      body: message,\n      replyTo: email\n    });\n    return { success: true, message: 'Thanks for reaching out!' };\n  }\n);\n```\n\n```svelte\n<!-- +page.svelte - CORRECT: Works with and without JavaScript -->\n<script lang=\"ts\">\n  import { submitContact } from './contact.remote.ts';\n</script>\n\n<!-- Spread provides method, action, onsubmit -->\n<form {...submitContact}>\n  <label>\n    Name\n    <input type=\"text\" name=\"name\" required />\n  </label>\n\n  <label>\n    Email\n    <input type=\"email\" name=\"email\" required />\n  </label>\n\n  <label>\n    Message\n    <textarea name=\"message\" required minlength=\"10\"></textarea>\n  </label>\n\n  <button>Send Message</button>\n\n  <!-- Show success message after submission -->\n  {#if submitContact.result?.success}\n    <p class=\"success\">{submitContact.result.message}</p>\n  {/if}\n\n  <!-- Show validation errors -->\n  {#if submitContact.error}\n    <p class=\"error\">{submitContact.error.message}</p>\n  {/if}\n</form>\n```\n\n### Enhanced Version with Loading State\n```svelte\n<script lang=\"ts\">\n  import { submitContact } from './contact.remote.ts';\n</script>\n\n<form {...submitContact}>\n  <input type=\"text\" name=\"name\" required disabled={submitContact.pending} />\n  <input type=\"email\" name=\"email\" required disabled={submitContact.pending} />\n  <textarea name=\"message\" required disabled={submitContact.pending}></textarea>\n\n  <button disabled={submitContact.pending}>\n    {#if submitContact.pending}\n      Sending...\n    {:else}\n      Send Message\n    {/if}\n  </button>\n\n  {#if submitContact.result?.success}\n    <div class=\"success\">\n      <p>{submitContact.result.message}</p>\n      <!-- Reset form after success -->\n      <button type=\"button\" onclick={() => submitContact.reset()}>\n        Send Another\n      </button>\n    </div>\n  {/if}\n</form>\n```\n\nThe `form()` function spreads the necessary attributes for both no-JS (standard form POST) and enhanced (fetch-based) submissions. Users always have a working form, with better UX when JavaScript is available.\n\n### Reference\n- [SvelteKit Remote Functions - form()](https://svelte.dev/docs/kit/remote-functions#form)\n- [Progressive Enhancement](https://developer.mozilla.org/en-US/docs/Glossary/Progressive_Enhancement)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/remote-optimistic-updates.md": "---\ntitle: Use override() for Optimistic Updates\nimpact: MEDIUM\nimpactDescription: \"Waiting for server responses before updating UI creates sluggish, unresponsive interactions\"\ntags: sveltekit, remote-functions, optimistic-updates, ux, performance\n---\n\n## Use override() for Optimistic Updates\n\n**Impact: MEDIUM** — Waiting for server responses before updating UI creates sluggish, unresponsive interactions\n\nOptimistic updates improve perceived performance by updating the UI immediately when users take action, then rolling back if the server request fails. SvelteKit queries provide an `.override()` method that temporarily replaces the cached value, automatically reverting on error. This pattern is essential for snappy, responsive interfaces.\n\n### Incorrect\n```svelte\n<!-- +page.svelte - WRONG: Waiting for server before updating UI -->\n<script lang=\"ts\">\n  import { getTodos, toggleTodo } from './todos.remote.ts';\n\n  const todos = getTodos();\n</script>\n\n{#await todos}\n  <p>Loading...</p>\n{:then items}\n  <ul>\n    {#each items as todo}\n      <li>\n        <!-- User clicks, waits 200-500ms for response, then sees update -->\n        <input\n          type=\"checkbox\"\n          checked={todo.completed}\n          onchange={async () => {\n            // Blocks UI until server responds\n            await toggleTodo({ id: todo.id });\n            // Query auto-refreshes, but user already waited\n          }}\n        />\n        {todo.title}\n      </li>\n    {/each}\n  </ul>\n{/await}\n```\n\nWaiting for the server creates noticeable lag. Users click a checkbox and wait hundreds of milliseconds before seeing any feedback.\n\n### Correct\n```typescript\n// todos.remote.ts\nimport { query, command } from '@sveltejs/kit';\nimport { z } from 'zod';\nimport { db } from '$lib/server/database';\n\nexport const getTodos = query(async () => {\n  return await db.todos.findMany({ orderBy: { createdAt: 'desc' } });\n});\n\nexport const toggleTodo = command(\n  z.object({ id: z.string().uuid() }),\n  async ({ id }) => {\n    const todo = await db.todos.findUnique({ where: { id } });\n    await db.todos.update({\n      where: { id },\n      data: { completed: !todo?.completed }\n    });\n  }\n);\n```\n\n```svelte\n<!-- +page.svelte - CORRECT: Optimistic update with rollback -->\n<script lang=\"ts\">\n  import { getTodos, toggleTodo } from './todos.remote.ts';\n\n  const todos = getTodos();\n\n  async function handleToggle(todoId: string) {\n    // Get current data\n    const currentTodos = todos.current;\n    if (!currentTodos) return;\n\n    // Optimistically update the UI immediately\n    todos.override(\n      currentTodos.map(todo =>\n        todo.id === todoId\n          ? { ...todo, completed: !todo.completed }\n          : todo\n      )\n    );\n\n    try {\n      // Send to server in background\n      await toggleTodo({ id: todoId });\n      // Query will auto-refresh with server data\n    } catch (error) {\n      // On error, override reverts automatically\n      // Optionally show error toast\n      console.error('Failed to update todo:', error);\n    }\n  }\n</script>\n\n{#await todos}\n  <p>Loading...</p>\n{:then items}\n  <ul>\n    {#each items as todo}\n      <li>\n        <!-- Instant feedback on click -->\n        <input\n          type=\"checkbox\"\n          checked={todo.completed}\n          onchange={() => handleToggle(todo.id)}\n        />\n        {todo.title}\n      </li>\n    {/each}\n  </ul>\n{/await}\n```\n\n### Complex Optimistic Update Example\n```svelte\n<script lang=\"ts\">\n  import { getMessages, sendMessage } from './chat.remote.ts';\n\n  const messages = getMessages();\n  let draft = $state('');\n\n  async function handleSend() {\n    const content = draft;\n    draft = ''; // Clear input immediately\n\n    const currentMessages = messages.current ?? [];\n    const tempId = crypto.randomUUID();\n\n    // Add optimistic message with pending state\n    messages.override([\n      ...currentMessages,\n      {\n        id: tempId,\n        content,\n        status: 'sending',\n        createdAt: new Date().toISOString()\n      }\n    ]);\n\n    try {\n      const result = await sendMessage({ content });\n\n      // Replace temp message with real one\n      messages.override([\n        ...currentMessages,\n        {\n          id: result.id,\n          content,\n          status: 'sent',\n          createdAt: result.createdAt\n        }\n      ]);\n    } catch (error) {\n      // Show failed state instead of removing\n      messages.override([\n        ...currentMessages,\n        {\n          id: tempId,\n          content,\n          status: 'failed',\n          createdAt: new Date().toISOString()\n        }\n      ]);\n    }\n  }\n</script>\n\n<div class=\"chat\">\n  {#await messages then items}\n    {#each items as message}\n      <div class=\"message\" class:sending={message.status === 'sending'} class:failed={message.status === 'failed'}>\n        {message.content}\n        {#if message.status === 'failed'}\n          <button onclick={() => retrySend(message)}>Retry</button>\n        {/if}\n      </div>\n    {/each}\n  {/await}\n\n  <form onsubmit|preventDefault={handleSend}>\n    <input bind:value={draft} placeholder=\"Type a message...\" />\n    <button disabled={!draft.trim()}>Send</button>\n  </form>\n</div>\n```\n\nThe `override()` method provides instant UI feedback while the server request happens in the background. If the request fails, the override is reverted and the UI shows the correct server state.\n\n### Reference\n- [SvelteKit Remote Functions - Optimistic Updates](https://svelte.dev/docs/kit/remote-functions#optimistic-updates)\n- [Optimistic UI Patterns](https://www.apollographql.com/docs/react/performance/optimistic-ui/)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/remote-query-vs-command.md": "---\ntitle: Use Query for Reads, Form/Command for Mutations\nimpact: HIGH\nimpactDescription: \"Incorrect function type leads to broken caching, missing progressive enhancement, or unnecessary complexity\"\ntags: sveltekit, remote-functions, query, command, form, mutations\n---\n\n## Use Query for Reads, Form/Command for Mutations\n\n**Impact: HIGH** — Incorrect function type leads to broken caching, missing progressive enhancement, or unnecessary complexity\n\nSvelteKit Remote Functions provide three distinct primitives: `query()` for reading data (automatically cached and refreshed after mutations), `form()` for mutations with progressive enhancement (works without JavaScript), and `command()` for JavaScript-only mutations with typed arguments. Using the wrong primitive undermines the benefits each provides.\n\n### Incorrect\n```typescript\n// todos.remote.ts - WRONG: Using command for data fetching\nimport { command } from '@sveltejs/kit';\nimport { db } from '$lib/server/database';\n\nexport const getTodos = command(async () => {\n  // Commands aren't cached or auto-refreshed\n  return await db.todos.findMany();\n});\n\nexport const getUser = command(async () => {\n  // No caching, no automatic invalidation\n  return await db.users.findFirst();\n});\n```\n\n```svelte\n<!-- +page.svelte - WRONG: Calling command in effect -->\n<script lang=\"ts\">\n  import { getTodos } from './todos.remote.ts';\n\n  let todos = $state([]);\n\n  $effect(() => {\n    // Manual fetching, no caching, runs on every mount\n    getTodos().then(result => todos = result);\n  });\n</script>\n```\n\nUsing `command()` for data fetching loses automatic caching, deduplication, and post-mutation refresh. You have to manually manage loading states and refetching.\n\n### Correct\n```typescript\n// todos.remote.ts - CORRECT: Appropriate function types\nimport { query, form, command } from '@sveltejs/kit';\nimport { z } from 'zod';\nimport { db } from '$lib/server/database';\n\n// query() for reads - cached, auto-refreshed after mutations\nexport const getTodos = query(async () => {\n  return await db.todos.findMany({ orderBy: { createdAt: 'desc' } });\n});\n\n// form() for mutations - works without JS, progressive enhancement\nexport const createTodo = form(\n  z.object({ title: z.string().min(1) }),\n  async ({ title }) => {\n    await db.todos.create({ data: { title, completed: false } });\n    return { success: true };\n  }\n);\n\n// command() for JS-only mutations with complex typed arguments\nexport const reorderTodos = command(\n  z.object({ ids: z.array(z.string()) }),\n  async ({ ids }) => {\n    await db.$transaction(\n      ids.map((id, index) =>\n        db.todos.update({ where: { id }, data: { order: index } })\n      )\n    );\n  }\n);\n```\n\n```svelte\n<!-- +page.svelte - CORRECT: Using each type appropriately -->\n<script lang=\"ts\">\n  import { getTodos, createTodo, reorderTodos } from './todos.remote.ts';\n\n  // query() returns a reactive resource - no effect needed\n  const todos = getTodos();\n</script>\n\n<!-- form() spreads onto form elements for progressive enhancement -->\n<form {...createTodo}>\n  <input type=\"text\" name=\"title\" required />\n  <button>Add Todo</button>\n</form>\n\n<!-- Display cached, auto-refreshed data -->\n{#await todos}\n  <p>Loading...</p>\n{:then items}\n  <ul>\n    {#each items as todo}\n      <li>{todo.title}</li>\n    {/each}\n  </ul>\n{/await}\n\n<!-- command() for JS-only interactions like drag-and-drop -->\n<button onclick={() => reorderTodos({ ids: ['1', '2', '3'] })}>\n  Reorder\n</button>\n```\n\nUsing the correct function type ensures proper caching for reads, progressive enhancement for form submissions, and type-safe arguments for complex mutations.\n\n### Reference\n- [SvelteKit Remote Functions](https://svelte.dev/docs/kit/remote-functions)\n- [Query vs Command vs Form](https://svelte.dev/docs/kit/remote-functions#query-command-form)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/remote-separate-files.md": "---\ntitle: Keep Remote Functions in Separate .remote.ts Files\nimpact: CRITICAL\nimpactDescription: \"Colocating server code with client code can accidentally expose secrets, API keys, and database credentials\"\ntags: sveltekit, remote-functions, security, server, secrets\n---\n\n## Keep Remote Functions in Separate .remote.ts Files\n\n**Impact: CRITICAL** — Colocating server code with client code can accidentally expose secrets, API keys, and database credentials\n\nRemote functions MUST be defined in `.remote.ts` files, never in `.svelte` components or regular `.ts` files that might be bundled for the client. The `.remote.ts` extension is a security boundary that ensures server-only code is never sent to the browser. Mixing server logic with client code risks exposing database connections, API keys, and other secrets.\n\n### Incorrect\n```svelte\n<!-- +page.svelte - WRONG: Server logic in component -->\n<script lang=\"ts\">\n  import { query } from '@sveltejs/kit';\n  import { db } from '$lib/server/database'; // DANGER: Server import in client!\n  import { STRIPE_SECRET_KEY } from '$env/static/private'; // EXPOSED!\n\n  // This will either fail to compile or expose secrets\n  const getPayments = query(async () => {\n    return await db.payments.findMany();\n  });\n</script>\n```\n\n```typescript\n// utils.ts - WRONG: Remote function in regular .ts file\nimport { query } from '@sveltejs/kit';\nimport { DATABASE_URL } from '$env/static/private';\n\n// May be bundled with client code depending on imports\nexport const getData = query(async () => {\n  // Server-only logic in potentially client-bundled file\n});\n```\n\nServer imports in `.svelte` files or regular `.ts` files can expose sensitive environment variables and database credentials to the client bundle.\n\n### Correct\n```typescript\n// payments.remote.ts - CORRECT: Isolated server code\nimport { query, form } from '@sveltejs/kit';\nimport { z } from 'zod';\nimport { db } from '$lib/server/database';\nimport { stripe } from '$lib/server/stripe';\nimport { STRIPE_SECRET_KEY } from '$env/static/private';\n\n// Safe: .remote.ts files are never bundled for the client\nexport const getPayments = query(async () => {\n  return await db.payments.findMany({\n    include: { customer: true },\n    orderBy: { createdAt: 'desc' }\n  });\n});\n\nexport const createPayment = form(\n  z.object({\n    amount: z.coerce.number().positive(),\n    customerId: z.string()\n  }),\n  async ({ amount, customerId }) => {\n    // Safe to use secrets here\n    const intent = await stripe.paymentIntents.create({\n      amount: amount * 100,\n      currency: 'usd',\n      customer: customerId\n    });\n\n    await db.payments.create({\n      data: { amount, customerId, stripeId: intent.id }\n    });\n\n    return { clientSecret: intent.client_secret };\n  }\n);\n```\n\n```svelte\n<!-- +page.svelte - CORRECT: Import only the remote functions -->\n<script lang=\"ts\">\n  import { getPayments, createPayment } from './payments.remote.ts';\n\n  // The import is transformed to an RPC call, not bundled code\n  const payments = getPayments();\n</script>\n\n<form {...createPayment}>\n  <input type=\"number\" name=\"amount\" />\n  <input type=\"hidden\" name=\"customerId\" value=\"cus_123\" />\n  <button>Pay</button>\n</form>\n\n{#await payments}\n  <p>Loading payments...</p>\n{:then items}\n  {#each items as payment}\n    <p>${payment.amount} - {payment.customer.name}</p>\n  {/each}\n{/await}\n```\n\nThe `.remote.ts` extension tells SvelteKit to keep this code server-only and transform imports into RPC calls. Secrets, database connections, and server logic remain safely on the server.\n\n### Reference\n- [SvelteKit Remote Functions](https://svelte.dev/docs/kit/remote-functions)\n- [Server-only Modules](https://svelte.dev/docs/kit/server-only-modules)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/remote-validate-inputs.md": "---\ntitle: Validate Remote Function Inputs with Zod\nimpact: CRITICAL\nimpactDescription: \"Unvalidated inputs allow SQL injection, privilege escalation, and data corruption attacks\"\ntags: sveltekit, remote-functions, validation, security, zod\n---\n\n## Validate Remote Function Inputs with Zod\n\n**Impact: CRITICAL** — Unvalidated inputs allow SQL injection, privilege escalation, and data corruption attacks\n\nAll remote function inputs come from the client and must be treated as untrusted. SvelteKit Remote Functions integrate with Standard Schema validators like Zod to provide type-safe validation. Without validation, attackers can send malformed data, inject malicious queries, or access unauthorized resources.\n\n### Incorrect\n```typescript\n// users.remote.ts - WRONG: Trusting client input\nimport { query, command } from '@sveltejs/kit';\nimport { db } from '$lib/server/database';\n\n// No validation - client can send anything\nexport const getUser = query(async (id: string) => {\n  // id could be undefined, an object, or SQL injection\n  return await db.users.findUnique({ where: { id } });\n});\n\n// No validation - trusting role from client\nexport const updateUserRole = command(async (data: { userId: string; role: string }) => {\n  // Attacker can set role to \"admin\"!\n  await db.users.update({\n    where: { id: data.userId },\n    data: { role: data.role }\n  });\n});\n\n// No validation on numeric input\nexport const getPage = query(async (page: number) => {\n  // page could be negative, NaN, or extremely large\n  return await db.posts.findMany({\n    skip: page * 10,\n    take: 10\n  });\n});\n```\n\nWithout schema validation, TypeScript types provide no runtime protection. Attackers can send arbitrary data that bypasses type checking entirely.\n\n### Correct\n```typescript\n// users.remote.ts - CORRECT: Schema validation on all inputs\nimport { query, command, form } from '@sveltejs/kit';\nimport { z } from 'zod';\nimport { db } from '$lib/server/database';\n\n// Validate ID format\nexport const getUser = query(\n  z.object({ id: z.string().uuid() }),\n  async ({ id }) => {\n    // id is guaranteed to be a valid UUID string\n    return await db.users.findUnique({ where: { id } });\n  }\n);\n\n// Validate and constrain allowed values\nconst RoleSchema = z.enum(['user', 'moderator']); // Never allow 'admin' from client\n\nexport const updateUserRole = command(\n  z.object({\n    userId: z.string().uuid(),\n    role: RoleSchema\n  }),\n  async ({ userId, role }) => {\n    // role can only be 'user' or 'moderator'\n    await db.users.update({\n      where: { id: userId },\n      data: { role }\n    });\n  }\n);\n\n// Validate numeric constraints\nexport const getPage = query(\n  z.object({\n    page: z.coerce.number().int().min(0).max(1000)\n  }),\n  async ({ page }) => {\n    // page is guaranteed to be 0-1000\n    return await db.posts.findMany({\n      skip: page * 10,\n      take: 10\n    });\n  }\n);\n\n// Complex validation for forms\nexport const createPost = form(\n  z.object({\n    title: z.string().min(1).max(200).trim(),\n    content: z.string().min(10).max(50000),\n    tags: z.string().transform(s => s.split(',').map(t => t.trim())).pipe(\n      z.array(z.string()).max(5)\n    ),\n    published: z.coerce.boolean().default(false)\n  }),\n  async ({ title, content, tags, published }) => {\n    // All inputs are validated and transformed\n    const post = await db.posts.create({\n      data: { title, content, tags, published }\n    });\n    return { id: post.id };\n  }\n);\n```\n\n```svelte\n<!-- +page.svelte - Validation errors are surfaced automatically -->\n<script lang=\"ts\">\n  import { createPost } from './posts.remote.ts';\n</script>\n\n<form {...createPost}>\n  <input name=\"title\" required maxlength=\"200\" />\n  <textarea name=\"content\" required minlength=\"10\"></textarea>\n  <input name=\"tags\" placeholder=\"tag1, tag2, tag3\" />\n  <label>\n    <input type=\"checkbox\" name=\"published\" />\n    Publish immediately\n  </label>\n  <button>Create Post</button>\n\n  <!-- Zod validation errors are available -->\n  {#if createPost.error}\n    <p class=\"error\">{createPost.error.message}</p>\n  {/if}\n</form>\n```\n\nSchema validation ensures all inputs conform to expected types and constraints before your code executes. Invalid requests are rejected with clear error messages.\n\n### Reference\n- [SvelteKit Remote Functions Validation](https://svelte.dev/docs/kit/remote-functions#validation)\n- [Zod Documentation](https://zod.dev/)\n- [Standard Schema](https://github.com/standard-schema/standard-schema)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/rendering-avoid-unnecessary-reactivity.md": "---\ntitle: Don't Make Everything Reactive\nimpact: MEDIUM\nimpactDescription: \"Unnecessary reactivity adds overhead and obscures code intent\"\ntags: reactivity, performance, state, svelte5\n---\n\n## Don't Make Everything Reactive\n\n**Impact: MEDIUM** — Unnecessary reactivity adds overhead and obscures code intent\n\nOnly use `$state` for values that actually need to trigger UI updates when they change. Constants, configuration values, and data that never changes should remain as regular JavaScript variables. Overusing `$state` adds unnecessary reactivity overhead and makes it harder to understand which values are truly dynamic in your component.\n\n### Incorrect\n\n```svelte\n<script>\n  let API_URL = $state('https://api.example.com');\n  let MAX_ITEMS = $state(100);\n  let COMPANY_NAME = $state('Acme Corp');\n  let THEME_COLORS = $state({\n    primary: '#3b82f6',\n    secondary: '#64748b'\n  });\n\n  let count = $state(0);\n</script>\n\n<h1>{COMPANY_NAME}</h1>\n<p>Showing up to {MAX_ITEMS} items</p>\n<p>Count: {count}</p>\n```\n\nAPI_URL, MAX_ITEMS, COMPANY_NAME, and THEME_COLORS never change but are tracked reactively.\n\n### Correct\n\n```svelte\n<script>\n  const API_URL = 'https://api.example.com';\n  const MAX_ITEMS = 100;\n  const COMPANY_NAME = 'Acme Corp';\n  const THEME_COLORS = {\n    primary: '#3b82f6',\n    secondary: '#64748b'\n  };\n\n  let count = $state(0);\n</script>\n\n<h1>{COMPANY_NAME}</h1>\n<p>Showing up to {MAX_ITEMS} items</p>\n<p>Count: {count}</p>\n```\n\nOnly `count` uses `$state` because it's the only value that changes and needs to update the UI.\n\n### Reference\n\n- [Svelte 5 Documentation: $state](https://svelte.dev/docs/svelte/$state)\n- [Svelte Tutorial: State](https://svelte.dev/tutorial/svelte/state)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/rendering-keyed-each.md": "---\ntitle: Use Keys in Each Blocks for Lists\nimpact: HIGH\nimpactDescription: \"Missing keys cause incorrect rendering and poor performance when lists change\"\ntags: rendering, lists, performance, each\n---\n\n## Use Keys in Each Blocks for Lists\n\n**Impact: HIGH** — Missing keys cause incorrect rendering and poor performance when lists change\n\nWithout keys, Svelte uses index-based diffing which can cause visual bugs when items are reordered, inserted, or removed. Keys allow Svelte to uniquely identify each item and efficiently update only the DOM elements that actually changed. Always use a stable, unique identifier like a database ID.\n\n### Incorrect\n\n```svelte\n<script>\n  let todos = $state([\n    { id: 1, text: 'Learn Svelte', done: false },\n    { id: 2, text: 'Build app', done: false },\n    { id: 3, text: 'Deploy', done: false }\n  ]);\n\n  function removeFirst() {\n    todos = todos.slice(1);\n  }\n</script>\n\n<ul>\n  {#each todos as todo}\n    <li>\n      <input type=\"checkbox\" bind:checked={todo.done} />\n      {todo.text}\n    </li>\n  {/each}\n</ul>\n\n<button onclick={removeFirst}>Remove first</button>\n```\n\nWithout keys, removing the first item may cause checkbox states to appear on wrong items.\n\n### Correct\n\n```svelte\n<script>\n  let todos = $state([\n    { id: 1, text: 'Learn Svelte', done: false },\n    { id: 2, text: 'Build app', done: false },\n    { id: 3, text: 'Deploy', done: false }\n  ]);\n\n  function removeFirst() {\n    todos = todos.slice(1);\n  }\n</script>\n\n<ul>\n  {#each todos as todo (todo.id)}\n    <li>\n      <input type=\"checkbox\" bind:checked={todo.done} />\n      {todo.text}\n    </li>\n  {/each}\n</ul>\n\n<button onclick={removeFirst}>Remove first</button>\n```\n\nWith the key `(todo.id)`, Svelte correctly tracks each item and maintains proper state associations.\n\n### Reference\n\n- [Svelte Tutorial: Keyed Each Blocks](https://svelte.dev/tutorial/svelte/keyed-each-blocks)\n- [Svelte Documentation: Each Blocks](https://svelte.dev/docs/svelte/each)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/ssr-hydratable-dedup.md": "---\ntitle: Use hydratable() to Prevent Re-fetching on Hydration\nimpact: MEDIUM\nimpactDescription: \"Prevents duplicate network requests and data inconsistency during hydration\"\ntags: ssr, hydration, data-fetching, performance, svelte5\n---\n\n## Use hydratable() to Prevent Re-fetching on Hydration\n\n**Impact: MEDIUM** — Prevents duplicate network requests and data inconsistency during hydration\n\nWhen server-rendered pages hydrate on the client, any data fetching logic in components will run again, causing redundant network requests. The `hydratable()` function from Svelte 5 caches data fetched during SSR and provides it to the client during hydration, preventing double-fetching and ensuring data consistency between server and client renders.\n\n### Incorrect\n\n```svelte\n<script>\n  import { onMount } from 'svelte';\n\n  let user = $state(null);\n\n  // This runs on both server (if using SSR) and client\n  async function loadUser() {\n    const response = await fetch('/api/user');\n    user = await response.json();\n  }\n\n  // Fetches again on hydration even if data was already loaded on server\n  onMount(() => {\n    loadUser();\n  });\n</script>\n\n{#if user}\n  <p>Welcome, {user.name}!</p>\n{:else}\n  <p>Loading...</p>\n{/if}\n```\n\nThe user data is fetched twice: once during SSR and again when the client hydrates, wasting bandwidth and potentially showing stale data briefly.\n\n### Correct\n\n```svelte\n<script>\n  import { hydratable } from 'svelte';\n\n  // hydratable() caches the result during SSR and reuses it during hydration\n  const user = hydratable('user-data', async () => {\n    const response = await fetch('/api/user');\n    if (!response.ok) throw new Error('Failed to fetch user');\n    return response.json();\n  });\n</script>\n\n<svelte:boundary>\n  {#snippet pending()}\n    <p>Loading...</p>\n  {/snippet}\n\n  {#snippet failed(error)}\n    <p>Error loading user: {error.message}</p>\n  {/snippet}\n\n  {#await user then data}\n    <p>Welcome, {data.name}!</p>\n  {/await}\n</svelte:boundary>\n```\n\nThe first argument to `hydratable()` is a unique key that identifies this data. During SSR, the data is fetched and serialized. During hydration, the cached data is used instead of re-fetching.\n\n### Reference\n\n- [Svelte 5 Documentation: hydratable](https://svelte.dev/docs/svelte/hydratable)\n- [SvelteKit: Loading Data](https://svelte.dev/docs/kit/load)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/ssr-hydration-mismatch.md": "---\ntitle: Avoid Hydration Mismatches\nimpact: HIGH\nimpactDescription: \"Hydration mismatches cause visual glitches and performance degradation\"\ntags: ssr, hydration, svelte5, state\n---\n\n## Avoid Hydration Mismatches\n\n**Impact: HIGH** — Hydration mismatches cause visual glitches and performance degradation\n\nServer-rendered HTML must match the initial client render exactly for hydration to work correctly. When dynamic values like `Date.now()`, `Math.random()`, or browser-only APIs are used during the initial render, the server and client produce different HTML, causing hydration mismatches that result in visual flickering and degraded performance.\n\n### Incorrect\n\n```svelte\n<script>\n  let timestamp = $state(Date.now());\n  let randomId = $state(Math.random().toString(36).slice(2));\n  let windowWidth = $state(window.innerWidth);\n</script>\n\n<p>Generated at: {timestamp}</p>\n<div id={randomId}>Random content</div>\n<p>Window width: {windowWidth}px</p>\n```\n\nThese values differ between server and client: `Date.now()` returns different times, `Math.random()` produces different values, and `window` doesn't exist on the server. This causes hydration mismatches.\n\n### Correct\n\n```svelte\n<script>\n  import { browser } from '$app/environment';\n\n  let timestamp = $state(null);\n  let windowWidth = $state(null);\n\n  // Use a stable ID from props or context, not random generation\n  let { stableId } = $props();\n\n  $effect(() => {\n    // Client-only values set after hydration\n    timestamp = Date.now();\n    windowWidth = window.innerWidth;\n  });\n</script>\n\n<p>Generated at: {timestamp ?? 'Loading...'}</p>\n<div id={stableId}>Content with stable ID</div>\n{#if browser}\n  <p>Window width: {windowWidth}px</p>\n{/if}\n```\n\nInitialize dynamic values as `null` and populate them in `$effect()`, which only runs on the client after hydration. Use `{#if browser}` for browser-only content, and pass stable IDs from the server rather than generating random ones. This ensures server and client HTML match during hydration.\n\n### Reference\n\n- [SvelteKit Documentation - Server and Client](https://svelte.dev/docs/kit/$app-environment)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/ssr-inline-script-no-flicker.md": "---\ntitle: Use Inline Scripts to Prevent Hydration Flicker\nimpact: HIGH\nimpactDescription: \"Prevents jarring flash of wrong theme or state when page loads\"\ntags: ssr, hydration, theming, localStorage, performance\n---\n\n## Use Inline Scripts to Prevent Hydration Flicker\n\n**Impact: HIGH** — Prevents jarring flash of wrong theme or state when page loads\n\nWhen reading user preferences like theme from localStorage, using onMount causes a visible flash because the page renders with default values before JavaScript hydrates and applies the stored preference. To prevent this, inject a synchronous inline script that runs before Svelte hydrates, setting the correct state immediately as the HTML is parsed.\n\n### Incorrect\n\n```svelte\n<!-- +layout.svelte -->\n<script>\n  import { onMount } from 'svelte';\n\n  let theme = $state('light');\n\n  onMount(() => {\n    const stored = localStorage.getItem('theme');\n    if (stored) {\n      theme = stored;\n      document.documentElement.dataset.theme = stored;\n    }\n  });\n</script>\n\n<div data-theme={theme}>\n  {@render children()}\n</div>\n```\n\nThe page renders with the default \"light\" theme, then flickers to \"dark\" after hydration if the user prefers dark mode.\n\n### Correct\n\n```html\n<!-- app.html -->\n<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <script>\n      (function() {\n        const theme = localStorage.getItem('theme') ||\n          (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');\n        document.documentElement.dataset.theme = theme;\n      })();\n    </script>\n    %sveltekit.head%\n  </head>\n  <body data-sveltekit-preload-data=\"hover\">\n    <div style=\"display: contents\">%sveltekit.body%</div>\n  </body>\n</html>\n```\n\n```svelte\n<!-- +layout.svelte -->\n<script>\n  import { browser } from '$app/environment';\n\n  // Read the already-set value; no flicker because it was set before hydration\n  let theme = $state(\n    browser ? document.documentElement.dataset.theme ?? 'light' : 'light'\n  );\n\n  function toggleTheme() {\n    theme = theme === 'light' ? 'dark' : 'light';\n    document.documentElement.dataset.theme = theme;\n    localStorage.setItem('theme', theme);\n  }\n</script>\n\n{@render children()}\n```\n\nThe inline script in app.html executes synchronously before any rendering, so the correct theme is applied from the first paint.\n\n### Reference\n\n- [SvelteKit Docs: app.html](https://svelte.dev/docs/kit/project-structure#Project-files-src)\n- [The Flash of Unstyled Content (FOUC)](https://webkit.org/blog/66/the-fouc-problem/)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/ssr-preserve-comments.md": "---\ntitle: Preserve HTML Comments for Hydration\nimpact: HIGH\nimpactDescription: \"Removing HTML comments breaks Svelte 5 hydration completely\"\ntags: ssr, hydration, svelte5, performance\n---\n\n## Preserve HTML Comments for Hydration\n\n**Impact: HIGH** — Removing HTML comments breaks Svelte 5 hydration completely\n\nSvelte 5 uses HTML comments as hydration markers to efficiently reconcile server-rendered HTML with client-side JavaScript. If these comments are stripped by HTML minifiers or post-processing tools, hydration will fail silently or cause the entire app to re-render, negating SSR performance benefits.\n\n### Incorrect\n\n```javascript\n// vite.config.js with html-minifier-terser\nimport { defineConfig } from 'vite';\nimport { minify } from 'html-minifier-terser';\n\nexport default defineConfig({\n  plugins: [\n    {\n      name: 'html-minify',\n      transformIndexHtml(html) {\n        return minify(html, {\n          removeComments: true, // This breaks Svelte 5 hydration!\n          collapseWhitespace: true\n        });\n      }\n    }\n  ]\n});\n```\n\nSetting `removeComments: true` in HTML minifiers will strip Svelte's hydration markers, causing hydration failures and full client-side re-renders.\n\n### Correct\n\n```javascript\n// vite.config.js with html-minifier-terser (safe configuration)\nimport { defineConfig } from 'vite';\nimport { minify } from 'html-minifier-terser';\n\nexport default defineConfig({\n  plugins: [\n    {\n      name: 'html-minify',\n      transformIndexHtml(html) {\n        return minify(html, {\n          removeComments: false, // Preserve comments for hydration\n          collapseWhitespace: true,\n          conservativeCollapse: true\n        });\n      }\n    }\n  ]\n});\n```\n\nAlways set `removeComments: false` when using HTML minifiers with Svelte 5 SSR applications. If you must remove some comments, use selective comment removal that preserves Svelte's markers. The same applies to CDN-level HTML optimization settings.\n\n### Reference\n\n- [Svelte 5 Documentation - Hydration](https://svelte.dev/docs/svelte/svelte#hydrate)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/state-context-for-subtrees.md": "---\ntitle: Use setContext/getContext for Component Tree Data Passing\nimpact: MEDIUM\nimpactDescription: \"Avoids prop drilling and provides clean dependency injection for component subtrees\"\ntags: state, context, architecture, components\n---\n\n## Use setContext/getContext for Component Tree Data Passing\n\n**Impact: MEDIUM** — Avoids prop drilling and provides clean dependency injection for component subtrees\n\nWhen data needs to flow through multiple levels of components, prop drilling becomes unwieldy and creates tight coupling. Svelte's context API (`setContext`/`getContext`) provides a clean way to make data available to all descendant components without explicitly passing props through each level. Context is particularly useful for themes, user sessions, or feature-specific shared state.\n\n### Incorrect\n```svelte\n<!-- Parent.svelte - WRONG: Prop drilling through multiple levels -->\n<script>\n  let user = $state({ name: 'Alice', role: 'admin' });\n</script>\n\n<Layout {user}>\n  <Sidebar {user}>\n    <UserMenu {user} />\n  </Sidebar>\n  <Main {user}>\n    <Dashboard {user}>\n      <UserGreeting {user} />\n    </Dashboard>\n  </Main>\n</Layout>\n```\nEvery intermediate component must accept and pass through the `user` prop, even if it doesn't use it. This creates coupling and makes refactoring difficult.\n\n### Correct\n```svelte\n<!-- Parent.svelte - CORRECT: Set context once at the top -->\n<script>\n  import { setContext } from 'svelte';\n\n  let user = $state({ name: 'Alice', role: 'admin' });\n  setContext('user', () => user); // Pass getter for reactivity\n</script>\n\n<Layout>\n  <Sidebar>\n    <UserMenu />\n  </Sidebar>\n</Layout>\n```\n```svelte\n<!-- UserMenu.svelte - Any descendant can access context -->\n<script>\n  import { getContext } from 'svelte';\n\n  const getUser = getContext('user');\n</script>\n\n<span>Welcome, {getUser().name}</span>\n```\nContext is set once and accessed directly by any descendant that needs it. Pass a getter function (not the value directly) to maintain reactivity with `$state`. Intermediate components remain decoupled from the data.\n\n### Reference\n- [Svelte 5 Docs: setContext and getContext](https://svelte.dev/docs/svelte/context)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/state-derived-by-complex.md": "---\ntitle: Use $derived.by() for Multi-Statement Derivations\nimpact: MEDIUM\nimpactDescription: \"Improves readability and maintainability of complex derived state logic\"\ntags: state, runes, derived, readability\n---\n\n## Use $derived.by() for Multi-Statement Derivations\n\n**Impact: MEDIUM** — Improves readability and maintainability of complex derived state logic\n\nThe `$derived()` rune accepts a single expression, which can become unreadable when logic is complex. For derivations requiring multiple statements, intermediate variables, or control flow, use `$derived.by()` which accepts a function body. This keeps complex logic clear and maintainable while preserving automatic dependency tracking.\n\n### Incorrect\n```svelte\n<script>\n  let items = $state([\n    { name: 'Apple', price: 1.5, quantity: 3 },\n    { name: 'Banana', price: 0.5, quantity: 6 }\n  ]);\n  let taxRate = $state(0.08);\n  let discount = $state(0.1);\n\n  // WRONG: Cramming complex logic into a single expression\n  let total = $derived(\n    items.reduce((sum, item) => sum + item.price * item.quantity, 0) * (1 - discount) * (1 + taxRate)\n  );\n\n  // WRONG: Even worse with nested ternaries or chained operations\n  let status = $derived(\n    items.length === 0 ? 'empty' : items.some(i => i.quantity === 0) ? 'incomplete' : items.every(i => i.quantity >= 5) ? 'bulk' : 'normal'\n  );\n</script>\n```\nComplex single-expression derivations are hard to read, debug, and modify. They obscure the logic and make it difficult to add logging or breakpoints.\n\n### Correct\n```svelte\n<script>\n  let items = $state([\n    { name: 'Apple', price: 1.5, quantity: 3 },\n    { name: 'Banana', price: 0.5, quantity: 6 }\n  ]);\n  let taxRate = $state(0.08);\n  let discount = $state(0.1);\n\n  // CORRECT: Use $derived.by() for multi-statement logic\n  let total = $derived.by(() => {\n    const subtotal = items.reduce((sum, item) => {\n      return sum + item.price * item.quantity;\n    }, 0);\n    const afterDiscount = subtotal * (1 - discount);\n    const withTax = afterDiscount * (1 + taxRate);\n    return withTax;\n  });\n\n  let status = $derived.by(() => {\n    if (items.length === 0) return 'empty';\n    if (items.some(i => i.quantity === 0)) return 'incomplete';\n    if (items.every(i => i.quantity >= 5)) return 'bulk';\n    return 'normal';\n  });\n</script>\n```\n`$derived.by()` allows multi-line function bodies with intermediate variables and clear control flow. The derivation remains reactive—Svelte tracks all `$state` values accessed within the function.\n\n### Reference\n- [Svelte 5 Docs: $derived.by](https://svelte.dev/docs/svelte/$derived#$derived.by)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/state-inspect-debugging.md": "---\ntitle: Use $inspect() for Debugging Reactive State\nimpact: LOW\nimpactDescription: \"Provides safe, production-free debugging for reactive state changes\"\ntags: state, runes, debugging, development\n---\n\n## Use $inspect() for Debugging Reactive State\n\n**Impact: LOW** — Provides safe, production-free debugging for reactive state changes\n\nThe `$inspect()` rune logs reactive values whenever they change, similar to `console.log` but reactive-aware. It automatically tracks dependencies and re-runs when any tracked value updates. Critically, `$inspect()` calls are stripped from production builds, so you can leave them in during development without affecting bundle size or runtime performance.\n\n### Incorrect\n```svelte\n<script>\n  let count = $state(0);\n  let doubled = $derived(count * 2);\n\n  // WRONG: Manual console.log doesn't track reactive changes\n  console.log('count:', count); // Only logs initial value\n\n  // WRONG: Using $effect just for logging\n  $effect(() => {\n    console.log('count changed:', count); // Works but stays in production!\n  });\n\n  function increment() {\n    count++;\n    console.log('after increment:', count); // Tedious, manual logging\n  }\n</script>\n```\nManual `console.log` only captures the initial value. Using `$effect` for logging works but remains in production builds, adding unnecessary overhead and potentially leaking debug info.\n\n### Correct\n```svelte\n<script>\n  let count = $state(0);\n  let doubled = $derived(count * 2);\n\n  // CORRECT: $inspect tracks reactive changes and is removed in production\n  $inspect(count); // Logs whenever count changes\n  $inspect('doubled value:', doubled); // Can include labels\n\n  // CORRECT: Use .with() for custom handling (e.g., breakpoints)\n  $inspect(count).with((type, value) => {\n    if (value > 10) {\n      debugger; // Break when count exceeds 10\n    }\n  });\n\n  // CORRECT: Inspect multiple values\n  $inspect({ count, doubled }); // Logs object with both values\n</script>\n```\n`$inspect()` automatically logs when any tracked value changes. Use `.with()` for custom behavior like conditional breakpoints. Since it's stripped in production, there's no need to clean up debug statements before deploying.\n\n### Reference\n- [Svelte 5 Docs: $inspect](https://svelte.dev/docs/svelte/$inspect)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/state-lazy-initialization.md": "---\ntitle: Use Functions for Expensive State Initialization\nimpact: MEDIUM\nimpactDescription: \"Prevents expensive computations from running on every component re-render\"\ntags: state, performance, initialization, svelte5\n---\n\n## Use Functions for Expensive State Initialization\n\n**Impact: MEDIUM** — Prevents expensive computations from running on every component re-render\n\nUnlike React's `useState(() => expensiveComputation())`, Svelte 5's `$state()` does not support lazy initialization. The initial value expression is evaluated every time the component module runs. For expensive computations, calculate the value once before assigning it to state, or use module-level caching to ensure the computation only happens once.\n\n### Incorrect\n\n```svelte\n<script>\n  import { generateComplexData } from './utils.js';\n\n  // This runs every time the component is instantiated\n  let data = $state(generateComplexData(10000));\n\n  // This also runs every time, parsing JSON on each mount\n  let config = $state(JSON.parse(localStorage.getItem('config') || '{}'));\n</script>\n\n<DataViewer {data} />\n```\n\nThe expensive `generateComplexData()` function and JSON parsing run every time a new instance of this component is created, even if the result would be the same.\n\n### Correct\n\n```svelte\n<script>\n  import { browser } from '$app/environment';\n  import { generateComplexData } from './utils.js';\n\n  // Compute expensive value once, then assign to state\n  const initialData = generateComplexData(10000);\n  let data = $state(initialData);\n\n  // For browser-only expensive operations, compute conditionally\n  const initialConfig = browser\n    ? JSON.parse(localStorage.getItem('config') || '{}')\n    : {};\n  let config = $state(initialConfig);\n</script>\n\n<DataViewer {data} />\n```\n\n```svelte\n<script context=\"module\">\n  import { generateComplexData } from './utils.js';\n\n  // For truly static expensive data, compute at module level (once per app)\n  const sharedExpensiveData = generateComplexData(10000);\n</script>\n\n<script>\n  // Reference the module-level constant; no re-computation\n  let data = $state(sharedExpensiveData);\n</script>\n\n<DataViewer {data} />\n```\n\nBy separating the computation from the state declaration, you ensure expensive operations run only when necessary. Module-level computation runs once when the module loads, shared across all component instances.\n\n### Reference\n\n- [Svelte 5 Documentation: $state](https://svelte.dev/docs/svelte/$state)\n- [Svelte Tutorial: Reactive State](https://svelte.dev/tutorial/svelte/state)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/state-raw-for-classes.md": "---\ntitle: Use $state.raw() for Class Instances and Non-Proxied Objects\nimpact: MEDIUM\nimpactDescription: \"Prevents proxy-related bugs and improves performance for complex objects\"\ntags: state, runes, performance, classes\n---\n\n## Use $state.raw() for Class Instances and Non-Proxied Objects\n\n**Impact: MEDIUM** — Prevents proxy-related bugs and improves performance for complex objects\n\nBy default, `$state` wraps objects in a deeply reactive proxy. This can cause issues with class instances (breaking `instanceof` checks, private fields, and methods), third-party library objects, or when you intentionally want shallow reactivity. Use `$state.raw()` for objects that should not be proxied—reactivity triggers only on reassignment.\n\n### Incorrect\n```svelte\n<script>\n  import { SomeLibraryClass } from 'some-library';\n\n  // WRONG: The proxy may break instanceof, private fields, or library internals\n  let instance = $state(new SomeLibraryClass());\n  let map = $state(new Map()); // Maps/Sets don't work well with proxies\n\n  // This may not work as expected\n  console.log(instance instanceof SomeLibraryClass); // Could be false!\n</script>\n```\nProxying class instances can break their prototype chain, interfere with private fields (`#field`), and cause unexpected behavior with built-in objects like `Map`, `Set`, `Date`, or `RegExp`.\n\n### Correct\n```svelte\n<script>\n  import { SomeLibraryClass } from 'some-library';\n\n  // CORRECT: No proxy, reactivity on reassignment only\n  let instance = $state.raw(new SomeLibraryClass());\n  let map = $state.raw(new Map());\n\n  function updateMap(key, value) {\n    map.set(key, value);\n    map = map; // Trigger reactivity by reassignment\n  }\n\n  console.log(instance instanceof SomeLibraryClass); // true\n</script>\n```\nUsing `$state.raw()` preserves the object's original behavior. Reactivity is triggered by reassigning the variable, giving you explicit control over when updates occur.\n\n### Reference\n- [Svelte 5 Docs: $state.raw](https://svelte.dev/docs/svelte/$state#$state.raw)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/state-shared-svelte-files.md": "---\ntitle: Use .svelte.js/.svelte.ts Files for Shared Reactive State\nimpact: HIGH\nimpactDescription: \"Enables reactive state sharing across components with full runes support\"\ntags: state, runes, architecture, shared-state\n---\n\n## Use .svelte.js/.svelte.ts Files for Shared Reactive State\n\n**Impact: HIGH** — Enables reactive state sharing across components with full runes support\n\nSvelte 5 runes like `$state`, `$derived`, and `$effect` only work in `.svelte` files and files with the `.svelte.js` or `.svelte.ts` extension. When you need to share reactive state across multiple components, use these special file extensions instead of regular `.js`/`.ts` files where runes will not compile.\n\n### Incorrect\n```ts\n// stores/counter.ts - WRONG: runes don't work in regular .ts files\nexport const count = $state(0); // Compiler error!\n\nexport function increment() {\n  count++; // Won't work\n}\n```\nRegular TypeScript/JavaScript files don't process Svelte runes. The `$state` call will either throw a compiler error or be treated as an undefined function.\n\n### Correct\n```ts\n// stores/counter.svelte.ts - CORRECT: runes work here!\nlet count = $state(0);\n\nexport function getCount() {\n  return count;\n}\n\nexport function increment() {\n  count++;\n}\n```\n```svelte\n<!-- Component.svelte -->\n<script>\n  import { getCount, increment } from './stores/counter.svelte.ts';\n</script>\n\n<button onclick={increment}>\n  Count: {getCount()}\n</button>\n```\nThe `.svelte.ts` extension tells the Svelte compiler to process runes in this file, enabling fully reactive shared state that updates across all components importing it.\n\n### Reference\n- [Svelte 5 Docs: .svelte.js and .svelte.ts files](https://svelte.dev/docs/svelte/svelte-js-files)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/state-stores-vs-runes.md": "---\ntitle: Stores vs Runes - When to Use Each\nimpact: MEDIUM\nimpactDescription: \"Choosing the right state primitive avoids unnecessary complexity and migration issues\"\ntags: state, runes, stores, migration, architecture\n---\n\n## Stores vs Runes - When to Use Each\n\n**Impact: MEDIUM** — Choosing the right state primitive avoids unnecessary complexity and migration issues\n\nSvelte 5 introduces runes (`$state`, `$derived`) as the primary state management approach, but stores (`writable`, `readable`) remain available and useful in specific scenarios. Understanding when to use each helps avoid over-engineering and ensures compatibility with existing code. For new Svelte 5 projects, prefer runes; use stores when you need their specific capabilities.\n\n### Incorrect\n```svelte\n<script>\n  import { writable } from 'svelte/store';\n\n  // WRONG: Using stores for simple component-local state in Svelte 5\n  const count = writable(0);\n\n  function increment() {\n    count.update(n => n + 1);\n  }\n</script>\n\n<!-- Unnecessarily verbose with $ prefix for auto-subscription -->\n<button onclick={increment}>Count: {$count}</button>\n```\nFor component-local state in Svelte 5, stores add unnecessary boilerplate. The `$` prefix syntax for auto-subscription, while convenient, is less intuitive than direct rune usage.\n\n### Correct\n```svelte\n<script>\n  // CORRECT: Use runes for component-local state\n  let count = $state(0);\n\n  function increment() {\n    count++;\n  }\n</script>\n\n<button onclick={increment}>Count: {count}</button>\n```\n```ts\n// Use stores when you need:\n// 1. Svelte 4 compatibility in shared libraries\n// 2. The store contract (subscribe method) for framework interop\n// 3. Custom store logic with start/stop notifications\n\nimport { writable } from 'svelte/store';\n\n// Example: Store with start/stop for resource cleanup\nexport const mousePosition = readable({ x: 0, y: 0 }, (set) => {\n  const handler = (e) => set({ x: e.clientX, y: e.clientY });\n  window.addEventListener('mousemove', handler);\n  return () => window.removeEventListener('mousemove', handler);\n});\n```\nUse runes for new Svelte 5 code and component-local state. Stores are still valuable for libraries needing Svelte 4 support, when you need the store contract for interoperability, or when using `readable`'s start/stop callbacks for resource management.\n\n### Reference\n- [Svelte 5 Docs: Stores](https://svelte.dev/docs/svelte/stores)\n- [Svelte 5 Docs: $state](https://svelte.dev/docs/svelte/$state)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-cache-headers.md": "---\ntitle: Set Cache Headers for Static and Dynamic Data\nimpact: MEDIUM\nimpactDescription: \"Proper cache headers reduce server load, improve CDN efficiency, and speed up repeat visits\"\ntags: sveltekit, load, caching, performance, headers\n---\n\n## Set Cache Headers for Static and Dynamic Data\n\n**Impact: MEDIUM** — Proper cache headers reduce server load, improve CDN efficiency, and speed up repeat visits\n\nSvelteKit's `setHeaders()` function in load functions lets you control HTTP caching behavior. Setting appropriate `Cache-Control` headers enables browsers and CDNs to cache responses, reducing redundant server requests. This is especially powerful for static or infrequently-changing data, where proper caching can eliminate most repeat fetches entirely.\n\nDifferent data types need different caching strategies. Static reference data can be cached aggressively, personalized data should not be cached by shared caches, and dynamic data needs short TTLs with revalidation.\n\n### Incorrect\n\n```typescript\n// +page.server.ts\nexport async function load({ fetch }) {\n  // No cache headers - every request hits the server\n  const products = await fetch('/api/products').then(r => r.json());\n  return { products };\n}\n```\n\nWithout cache headers, every page load triggers a fresh server request, even for data that rarely changes.\n\n### Correct (Static Data)\n\n```typescript\n// +page.server.ts\nexport async function load({ fetch, setHeaders }) {\n  const products = await fetch('/api/products').then(r => r.json());\n\n  // Cache for 1 hour, allow CDN to serve stale while revalidating\n  setHeaders({\n    'Cache-Control': 'public, max-age=3600, stale-while-revalidate=86400'\n  });\n\n  return { products };\n}\n```\n\n`public` allows CDN caching, `max-age=3600` caches for 1 hour, and `stale-while-revalidate` serves stale content while fetching fresh data in the background.\n\n### Correct (Dynamic Data with Short TTL)\n\n```typescript\n// +page.server.ts\nexport async function load({ fetch, setHeaders }) {\n  const stockPrices = await fetch('/api/stocks').then(r => r.json());\n\n  // Short cache for frequently-changing data\n  setHeaders({\n    'Cache-Control': 'public, max-age=60, must-revalidate'\n  });\n\n  return { stockPrices };\n}\n```\n\nUse short `max-age` values for data that changes frequently but can tolerate brief staleness.\n\n### Correct (Personalized Data)\n\n```typescript\n// +page.server.ts\nexport async function load({ fetch, setHeaders, locals }) {\n  const dashboard = await fetch('/api/dashboard', {\n    headers: { 'Authorization': `Bearer ${locals.token}` }\n  }).then(r => r.json());\n\n  // Private cache - only browser, not CDN\n  setHeaders({\n    'Cache-Control': 'private, max-age=300'\n  });\n\n  return { dashboard };\n}\n```\n\n`private` ensures personalized data is only cached in the user's browser, never in shared CDN caches.\n\n### Correct (Immutable Assets)\n\n```typescript\n// +page.server.ts\nexport async function load({ fetch, setHeaders, params }) {\n  // Content-addressed or versioned data that never changes\n  const artifact = await fetch(`/api/artifacts/${params.hash}`).then(r => r.json());\n\n  // Cache forever - the URL changes when content changes\n  setHeaders({\n    'Cache-Control': 'public, max-age=31536000, immutable'\n  });\n\n  return { artifact };\n}\n```\n\nUse `immutable` for content-addressed resources where the URL itself changes when the content changes.\n\n### Correct (No Cache)\n\n```typescript\n// +page.server.ts\nexport async function load({ fetch, setHeaders }) {\n  const sensitiveData = await fetch('/api/account/balance').then(r => r.json());\n\n  // Never cache sensitive or real-time data\n  setHeaders({\n    'Cache-Control': 'no-store, must-revalidate'\n  });\n\n  return { sensitiveData };\n}\n```\n\nUse `no-store` for sensitive data that should never be cached anywhere.\n\n### Reference\n\n- [SvelteKit setHeaders](https://svelte.dev/docs/kit/load#Cookies-and-headers)\n- [MDN Cache-Control](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control)\n- [Web.dev HTTP Caching](https://web.dev/articles/http-cache)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-env-variables.md": "---\ntitle: Secure Environment Variable Usage\nimpact: CRITICAL\nimpactDescription: \"Prevents accidental exposure of API keys, database credentials, and other secrets to client browsers\"\ntags: sveltekit, security, environment, secrets, configuration\n---\n\n## Secure Environment Variable Usage\n\n**Impact: CRITICAL** — Prevents accidental exposure of API keys, database credentials, and other secrets to client browsers\n\nSvelteKit provides distinct modules for environment variables: `$env/static/private` for server-only secrets and `$env/static/public` for client-safe values. Importing from the wrong module can expose your database passwords, API keys, and other secrets directly in the browser's JavaScript bundle.\n\n### Incorrect\n```svelte\n<!-- +page.svelte - WRONG: Importing secrets in client code -->\n<script lang=\"ts\">\n  // This WILL NOT work and will throw a build error\n  // But developers sometimes try workarounds...\n  import { DATABASE_URL, STRIPE_SECRET_KEY } from '$env/static/private';\n\n  // Or worse, hardcoding secrets\n  const API_KEY = 'sk_live_abc123...';\n</script>\n\n<!-- +page.ts - WRONG: Private vars in universal load -->\n<script lang=\"ts\" context=\"module\">\nimport { DATABASE_URL } from '$env/static/private'; // Build error!\nimport { OPENAI_API_KEY } from '$env/static/private'; // Build error!\n\nexport const load = async () => {\n  // Even if this worked, secrets would be in client bundle\n};\n</script>\n\n<!-- Also wrong: Using PUBLIC_ prefix for secrets -->\n<!-- .env file -->\nPUBLIC_DATABASE_URL=postgres://user:password@host/db  <!-- EXPOSED! -->\nPUBLIC_API_SECRET=sk_live_supersecret  <!-- EXPOSED! -->\n```\nSvelteKit will throw build errors if you try to import private env vars in client code, but the `PUBLIC_` prefix explicitly marks variables as client-safe. Using it for secrets exposes them to anyone viewing your site's JavaScript.\n\n### Correct\n```svelte\n<!-- .env file - Proper variable naming -->\n# Private (server-only) - no prefix\nDATABASE_URL=postgres://user:password@host/db\nSTRIPE_SECRET_KEY=sk_live_abc123\nOPENAI_API_KEY=sk-abc123\nJWT_SECRET=super-secret-jwt-key\n\n# Public (client-safe) - PUBLIC_ prefix\nPUBLIC_SUPABASE_URL=https://abc.supabase.co\nPUBLIC_SUPABASE_ANON_KEY=eyJ...  # Anon key is designed to be public\nPUBLIC_APP_NAME=My App\nPUBLIC_ANALYTICS_ID=G-ABC123\n```\n\n```svelte\n<!-- +page.server.ts - CORRECT: Server-only secrets -->\n<script lang=\"ts\" context=\"module\">\nimport { DATABASE_URL, STRIPE_SECRET_KEY } from '$env/static/private';\nimport {\n  PUBLIC_SUPABASE_URL,\n  PUBLIC_APP_NAME\n} from '$env/static/public';\n\nexport const load = async () => {\n  // Safe: This only runs on the server\n  const db = connectToDatabase(DATABASE_URL);\n\n  return {\n    appName: PUBLIC_APP_NAME, // Safe to pass to client\n    // Never return secrets!\n  };\n};\n</script>\n```\n\n```svelte\n<!-- +page.svelte - CORRECT: Only public vars -->\n<script lang=\"ts\">\n  import {\n    PUBLIC_SUPABASE_URL,\n    PUBLIC_SUPABASE_ANON_KEY\n  } from '$env/static/public';\n  import { createClient } from '@supabase/supabase-js';\n\n  // Safe: These are designed to be public\n  const supabase = createClient(\n    PUBLIC_SUPABASE_URL,\n    PUBLIC_SUPABASE_ANON_KEY\n  );\n</script>\n\n<p>Welcome to {PUBLIC_APP_NAME}</p>\n```\n\n### Static vs Dynamic Env Vars\n\n```svelte\n<!-- $env/static/* - Inlined at build time (tree-shakeable) -->\n<script lang=\"ts\" context=\"module\">\nimport { DATABASE_URL } from '$env/static/private';\n// Becomes: const DATABASE_URL = \"postgres://...\"\n</script>\n\n<!-- $env/dynamic/* - Read at runtime (for containers/serverless) -->\n<script lang=\"ts\" context=\"module\">\nimport { env } from '$env/dynamic/private';\n// env.DATABASE_URL read from process.env at runtime\n</script>\n```\n\n### Quick Reference\n\n| Module | Runs On | Use For |\n|--------|---------|---------|\n| `$env/static/private` | Server only | DB URLs, API secrets, JWT keys |\n| `$env/static/public` | Server + Client | Public API URLs, app config, analytics IDs |\n| `$env/dynamic/private` | Server only | Runtime secrets (containers) |\n| `$env/dynamic/public` | Server + Client | Runtime public config |\n\n### Reference\n- [SvelteKit Environment Variables](https://svelte.dev/docs/kit/modules#$env-static-private)\n- [SvelteKit $env/static/private](https://svelte.dev/docs/kit/$env-static-private)\n- [SvelteKit $env/static/public](https://svelte.dev/docs/kit/$env-static-public)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-error-handling.md": "---\ntitle: Proper Error Handling with error() and +error.svelte\nimpact: HIGH\nimpactDescription: \"Ensures consistent error UX and prevents sensitive error details from leaking to users\"\ntags: sveltekit, errors, security, ux\n---\n\n## Proper Error Handling with error() and +error.svelte\n\n**Impact: HIGH** — Ensures consistent error UX and prevents sensitive error details from leaking to users\n\nSvelteKit provides the `error()` helper function and `+error.svelte` pages for structured error handling. Using these ensures users see friendly error messages while keeping sensitive stack traces and implementation details hidden. Raw thrown errors can expose internal details and create inconsistent error experiences.\n\n### Incorrect\n```svelte\n<!-- +page.server.ts - WRONG: Throwing raw errors -->\n<script lang=\"ts\" context=\"module\">\nimport type { PageServerLoad } from './$types';\n\nexport const load: PageServerLoad = async ({ params }) => {\n  const post = await db.posts.find(params.id);\n\n  if (!post) {\n    // Raw error - exposes implementation details\n    throw new Error(`Post with ID ${params.id} not found in database`);\n  }\n\n  if (!post.published) {\n    // No status code - defaults to 500 (server error)\n    throw new Error('Post not published');\n  }\n\n  // Unhandled errors leak stack traces\n  const author = await fetch(`https://api.example.com/users/${post.authorId}`);\n  // If this fails, the raw fetch error is exposed\n\n  return { post };\n};\n</script>\n```\nRaw errors expose internal implementation details, database structures, and API endpoints. They also default to 500 status codes, misleading error tracking tools.\n\n### Correct\n```svelte\n<!-- +page.server.ts - CORRECT: Using error() helper -->\n<script lang=\"ts\" context=\"module\">\nimport type { PageServerLoad } from './$types';\nimport { error } from '@sveltejs/kit';\n\nexport const load: PageServerLoad = async ({ params }) => {\n  const post = await db.posts.find(params.id);\n\n  if (!post) {\n    // Proper 404 with user-friendly message\n    error(404, {\n      message: 'Post not found',\n      code: 'POST_NOT_FOUND'\n    });\n  }\n\n  if (!post.published) {\n    // Proper 403 for forbidden content\n    error(403, {\n      message: 'This post is not available',\n      code: 'POST_UNAVAILABLE'\n    });\n  }\n\n  try {\n    const authorResponse = await fetch(`https://api.example.com/users/${post.authorId}`);\n    if (!authorResponse.ok) {\n      // Log internally, show generic message to user\n      console.error('Author API failed:', authorResponse.status);\n      error(500, { message: 'Unable to load post details' });\n    }\n    post.author = await authorResponse.json();\n  } catch (e) {\n    console.error('Author fetch error:', e);\n    error(500, { message: 'Unable to load post details' });\n  }\n\n  return { post };\n};\n</script>\n```\n\n```svelte\n<!-- src/routes/+error.svelte - Custom error page -->\n<script lang=\"ts\">\n  import { page } from '$app/state';\n</script>\n\n<div class=\"error-page\">\n  <h1>{page.status}</h1>\n  <p>{page.error?.message ?? 'Something went wrong'}</p>\n\n  {#if page.status === 404}\n    <a href=\"/\">Go back home</a>\n  {:else}\n    <button onclick={() => location.reload()}>\n      Try again\n    </button>\n  {/if}\n</div>\n\n<style>\n  .error-page {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    min-height: 50vh;\n  }\n</style>\n```\n\n### Nested Error Boundaries\n```\nsrc/routes/\n  +error.svelte           # Catches all errors\n  +layout.svelte\n  dashboard/\n    +error.svelte         # Dashboard-specific error UI\n    +page.svelte\n    settings/\n      +page.svelte        # Errors here bubble to dashboard/+error.svelte\n```\n\n### Typed Error Objects\n```typescript\n// src/app.d.ts\ndeclare global {\n  namespace App {\n    interface Error {\n      message: string;\n      code?: string;\n      details?: Record<string, unknown>;\n    }\n  }\n}\n\nexport {};\n```\n\n```svelte\n<!-- Usage with typed errors -->\n<script lang=\"ts\" context=\"module\">\nimport { error } from '@sveltejs/kit';\n\n// TypeScript knows the shape of the error object\nerror(400, {\n  message: 'Validation failed',\n  code: 'VALIDATION_ERROR',\n  details: {\n    field: 'email',\n    reason: 'Invalid format'\n  }\n});\n</script>\n```\n\n### Reference\n- [SvelteKit Errors](https://svelte.dev/docs/kit/errors)\n- [SvelteKit error() Function](https://svelte.dev/docs/kit/@sveltejs-kit#error)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-form-actions.md": "---\ntitle: Use Form Actions for Mutations\nimpact: HIGH\nimpactDescription: \"Enables progressive enhancement with built-in form handling that works without JavaScript\"\ntags: sveltekit, forms, progressive-enhancement, mutations, server\n---\n\n## Use Form Actions for Mutations\n\n**Impact: HIGH** — Enables progressive enhancement with built-in form handling that works without JavaScript\n\nSvelteKit form actions provide a powerful pattern for handling mutations. They work as standard HTML forms without JavaScript, then enhance automatically when JS is available. This ensures your app remains functional for all users while providing a smooth experience when possible.\n\n### Incorrect\n```svelte\n<!-- +page.svelte - WRONG: Client-only mutation -->\n<script lang=\"ts\">\n  let email = $state('');\n  let loading = $state(false);\n  let error = $state('');\n\n  async function handleSubmit() {\n    loading = true;\n    try {\n      const response = await fetch('/api/subscribe', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ email })\n      });\n      if (!response.ok) throw new Error('Failed');\n    } catch (e) {\n      error = e.message;\n    } finally {\n      loading = false;\n    }\n  }\n</script>\n\n<form onsubmit={(e) => { e.preventDefault(); handleSubmit(); }}>\n  <input type=\"email\" bind:value={email} />\n  <button disabled={loading}>Subscribe</button>\n  {#if error}<p class=\"error\">{error}</p>{/if}\n</form>\n```\nThis approach breaks without JavaScript, requires manual loading/error state management, and doesn't integrate with SvelteKit's navigation system.\n\n### Correct\n```svelte\n<!-- +page.server.ts - Define the action -->\n<script lang=\"ts\" context=\"module\">\nimport type { Actions } from './$types';\nimport { fail, redirect } from '@sveltejs/kit';\nimport { db } from '$lib/server/database';\n\nexport const actions: Actions = {\n  subscribe: async ({ request }) => {\n    const formData = await request.formData();\n    const email = formData.get('email')?.toString();\n\n    if (!email || !email.includes('@')) {\n      return fail(400, {\n        email,\n        error: 'Please enter a valid email address'\n      });\n    }\n\n    try {\n      await db.subscribers.create({ email });\n    } catch (e) {\n      if (e.code === 'UNIQUE_VIOLATION') {\n        return fail(400, { email, error: 'Already subscribed' });\n      }\n      throw e;\n    }\n\n    return { success: true };\n  },\n\n  unsubscribe: async ({ request }) => {\n    const formData = await request.formData();\n    const email = formData.get('email')?.toString();\n    await db.subscribers.delete({ email });\n    redirect(303, '/goodbye');\n  }\n};\n</script>\n```\n\n```svelte\n<!-- +page.svelte - Use the action -->\n<script lang=\"ts\">\n  import { enhance } from '$app/forms';\n\n  let { form } = $props();\n</script>\n\n<!-- Works without JS, enhances with JS -->\n<form method=\"POST\" action=\"?/subscribe\" use:enhance>\n  <input\n    type=\"email\"\n    name=\"email\"\n    value={form?.email ?? ''}\n    required\n  />\n  <button>Subscribe</button>\n\n  {#if form?.error}\n    <p class=\"error\">{form.error}</p>\n  {/if}\n\n  {#if form?.success}\n    <p class=\"success\">Thanks for subscribing!</p>\n  {/if}\n</form>\n\n<!-- Multiple actions on one page -->\n<form method=\"POST\" action=\"?/unsubscribe\" use:enhance>\n  <input type=\"email\" name=\"email\" required />\n  <button>Unsubscribe</button>\n</form>\n```\n\n### Custom Enhancement\n```svelte\n<script lang=\"ts\">\n  import { enhance } from '$app/forms';\n\n  let submitting = $state(false);\n</script>\n\n<form\n  method=\"POST\"\n  use:enhance={() => {\n    submitting = true;\n\n    return async ({ result, update }) => {\n      submitting = false;\n\n      if (result.type === 'success') {\n        // Custom success handling\n        showToast('Saved successfully!');\n      }\n\n      // Apply default behavior (update form prop, etc.)\n      await update();\n    };\n  }}\n>\n  <button disabled={submitting}>\n    {submitting ? 'Saving...' : 'Save'}\n  </button>\n</form>\n```\n\n### Reference\n- [SvelteKit Form Actions](https://svelte.dev/docs/kit/form-actions)\n- [Progressive Enhancement](https://svelte.dev/docs/kit/form-actions#progressive-enhancement)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-load-server-vs-universal.md": "---\ntitle: Server vs Universal Load Functions\nimpact: HIGH\nimpactDescription: \"Prevents accidental exposure of sensitive data and ensures proper data fetching patterns\"\ntags: sveltekit, security, data-loading, server\n---\n\n## Server vs Universal Load Functions\n\n**Impact: HIGH** — Prevents accidental exposure of sensitive data and ensures proper data fetching patterns\n\nSvelteKit provides two types of load functions: server load (`+page.server.ts`) and universal load (`+page.ts`). Server load functions run exclusively on the server and can safely access databases, API keys, and other secrets. Universal load functions run on both server and client, making them suitable only for public data fetching.\n\n### Incorrect\n```svelte\n<!-- +page.ts - WRONG: This exposes secrets to the client -->\n<script lang=\"ts\" context=\"module\">\nimport type { PageLoad } from './$types';\nimport { DATABASE_URL, API_SECRET } from '$env/static/private'; // Error: can't import private env\n\nexport const load: PageLoad = async ({ fetch }) => {\n  // This code runs on the client too!\n  const response = await fetch('/api/users', {\n    headers: {\n      'Authorization': `Bearer ${API_SECRET}` // Secret exposed in client bundle\n    }\n  });\n\n  return {\n    users: await response.json()\n  };\n};\n</script>\n```\nUniversal load functions are bundled with client code. Any secrets imported or used will be visible in the browser's developer tools and network requests.\n\n### Correct\n```svelte\n<!-- +page.server.ts - CORRECT: Server-only execution -->\n<script lang=\"ts\" context=\"module\">\nimport type { PageServerLoad } from './$types';\nimport { DATABASE_URL, API_SECRET } from '$env/static/private';\nimport { db } from '$lib/server/database';\n\nexport const load: PageServerLoad = async ({ locals }) => {\n  // This ONLY runs on the server\n  const users = await db.query('SELECT id, name, email FROM users WHERE org_id = $1', [\n    locals.user.orgId\n  ]);\n\n  // Safe to use secrets here\n  const enrichedData = await fetch('https://api.example.com/enrich', {\n    headers: { 'Authorization': `Bearer ${API_SECRET}` }\n  });\n\n  return {\n    users, // Only serializable data is sent to client\n    enrichedData: await enrichedData.json()\n  };\n};\n</script>\n```\nServer load functions never expose their source code or dependencies to the client. Only the serialized return value is sent to the browser.\n\n### When to Use Each\n\n| Use Case | Load Function Type |\n|----------|-------------------|\n| Database queries | `+page.server.ts` |\n| API calls with secrets | `+page.server.ts` |\n| User session/auth checks | `+page.server.ts` |\n| Public API calls | `+page.ts` |\n| Data that needs to run on navigation | `+page.ts` |\n| Combining server and client data | Both (server passes to universal) |\n\n### Reference\n- [SvelteKit Loading Data](https://svelte.dev/docs/kit/load)\n- [SvelteKit Server-only Modules](https://svelte.dev/docs/kit/server-only-modules)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-parallel-load.md": "---\ntitle: Fetch Data in Parallel in Load Functions\nimpact: CRITICAL\nimpactDescription: \"Sequential fetches multiply latency; parallel fetches reduce total wait time to the slowest request\"\ntags: sveltekit, load, performance, async\n---\n\n## Fetch Data in Parallel in Load Functions\n\n**Impact: CRITICAL** — Sequential fetches multiply latency; parallel fetches reduce total wait time to the slowest request\n\nSvelteKit load functions execute before rendering, so every millisecond of delay directly impacts Time to First Byte (TTFB). When you await fetches sequentially, total load time equals the sum of all request durations. Using `Promise.all()` or concurrent patterns reduces this to the duration of the slowest request, often cutting load times by 50% or more.\n\nParent layouts block child page loads from starting, so you cannot parallelize across the layout/page boundary. This makes it even more critical to parallelize all independent fetches within each individual load function.\n\n### Incorrect\n\n```typescript\n// +page.server.ts\nexport async function load({ fetch }) {\n  // Each await blocks the next - total time: fetchUser + fetchPosts + fetchComments\n  const user = await fetch('/api/user').then(r => r.json());\n  const posts = await fetch('/api/posts').then(r => r.json());\n  const comments = await fetch('/api/comments').then(r => r.json());\n\n  return { user, posts, comments };\n}\n```\n\nThis causes a waterfall where each request waits for the previous one to complete. If each takes 200ms, total load time is 600ms.\n\n### Correct\n\n```typescript\n// +page.server.ts\nexport async function load({ fetch }) {\n  // All fetches start immediately - total time: max(fetchUser, fetchPosts, fetchComments)\n  const [user, posts, comments] = await Promise.all([\n    fetch('/api/user').then(r => r.json()),\n    fetch('/api/posts').then(r => r.json()),\n    fetch('/api/comments').then(r => r.json())\n  ]);\n\n  return { user, posts, comments };\n}\n```\n\nAll three requests fire simultaneously. If each takes 200ms, total load time is only 200ms.\n\n### Correct (Named Promises for Clarity)\n\n```typescript\n// +page.server.ts\nexport async function load({ fetch }) {\n  // Start all fetches immediately\n  const userPromise = fetch('/api/user').then(r => r.json());\n  const postsPromise = fetch('/api/posts').then(r => r.json());\n  const commentsPromise = fetch('/api/comments').then(r => r.json());\n\n  // Await all together\n  const [user, posts, comments] = await Promise.all([\n    userPromise,\n    postsPromise,\n    commentsPromise\n  ]);\n\n  return { user, posts, comments };\n}\n```\n\nThis pattern is clearer when fetches have complex logic or need to be conditionally included.\n\n### Correct (Dependent Data)\n\n```typescript\n// +page.server.ts\nexport async function load({ fetch }) {\n  // When data depends on other data, parallelize what you can\n  const user = await fetch('/api/user').then(r => r.json());\n\n  // These depend on user.id but are independent of each other\n  const [posts, followers] = await Promise.all([\n    fetch(`/api/users/${user.id}/posts`).then(r => r.json()),\n    fetch(`/api/users/${user.id}/followers`).then(r => r.json())\n  ]);\n\n  return { user, posts, followers };\n}\n```\n\nWhen some data depends on other data, parallelize the independent fetches within each dependency level.\n\n### Reference\n\n- [SvelteKit Loading Data](https://svelte.dev/docs/kit/load)\n- [MDN Promise.all()](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-preload-data.md": "---\ntitle: Preload Data on Link Hover\nimpact: MEDIUM\nimpactDescription: \"Dramatically improves perceived performance by prefetching data before navigation\"\ntags: sveltekit, performance, navigation, ux\n---\n\n## Preload Data on Link Hover\n\n**Impact: MEDIUM** — Dramatically improves perceived performance by prefetching data before navigation\n\nSvelteKit can prefetch data for pages before the user clicks a link. By adding `data-sveltekit-preload-data` to links or parent containers, data fetching begins on hover, making subsequent navigation feel instant. This takes advantage of the ~200ms delay between hover and click.\n\n### Incorrect\n```svelte\n<!-- No preloading - user waits for data after clicking -->\n<nav>\n  <a href=\"/dashboard\">Dashboard</a>\n  <a href=\"/settings\">Settings</a>\n  <a href=\"/profile\">Profile</a>\n</nav>\n\n<ul>\n  {#each posts as post}\n    <li>\n      <a href=\"/posts/{post.id}\">{post.title}</a>\n    </li>\n  {/each}\n</ul>\n```\nWithout preloading, users experience a loading delay after every click. The browser only starts fetching data once the navigation begins.\n\n### Correct\n```svelte\n<!-- Preload on hover - data ready by the time user clicks -->\n<nav data-sveltekit-preload-data=\"hover\">\n  <a href=\"/dashboard\">Dashboard</a>\n  <a href=\"/settings\">Settings</a>\n  <a href=\"/profile\">Profile</a>\n</nav>\n\n<ul data-sveltekit-preload-data=\"hover\">\n  {#each posts as post}\n    <li>\n      <a href=\"/posts/{post.id}\">{post.title}</a>\n    </li>\n  {/each}\n</ul>\n\n<!-- Or on individual links with different strategies -->\n<a href=\"/critical-page\" data-sveltekit-preload-data=\"tap\">\n  Important Action\n</a>\n```\nData fetching starts as soon as the user hovers over a link. By the time they click, the data is often already loaded, making navigation feel instant.\n\n### Preload Strategies\n\n| Strategy | Trigger | Use Case |\n|----------|---------|----------|\n| `hover` | Mouse enters link | Default, good for most cases |\n| `tap` | Touchstart/mousedown | Mobile-friendly, more conservative |\n| `off` | Disabled | Expensive data, rate-limited APIs |\n\n### Apply Globally in Layout\n```svelte\n<!-- +layout.svelte - Enable for entire app -->\n<div data-sveltekit-preload-data=\"hover\">\n  <header>\n    <nav>...</nav>\n  </header>\n\n  <main>\n    <slot />\n  </main>\n</div>\n```\n\n### Preload Code Too\n```svelte\n<!-- Also preload the JavaScript for the page -->\n<a\n  href=\"/dashboard\"\n  data-sveltekit-preload-data=\"hover\"\n  data-sveltekit-preload-code=\"hover\"\n>\n  Dashboard\n</a>\n```\n\n### Reference\n- [SvelteKit Link Options](https://svelte.dev/docs/kit/link-options)\n- [SvelteKit Preloading](https://svelte.dev/docs/kit/link-options#data-sveltekit-preload-data)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/sveltekit-streaming-defer.md": "---\ntitle: Stream Non-Critical Data with Deferred Promises\nimpact: HIGH\nimpactDescription: \"Streaming deferred data enables faster initial page load while secondary content loads progressively\"\ntags: sveltekit, load, streaming, performance\n---\n\n## Stream Non-Critical Data with Deferred Promises\n\n**Impact: HIGH** — Streaming deferred data enables faster initial page load while secondary content loads progressively\n\nSvelteKit can stream data to the browser by returning promises without awaiting them in load functions. The page renders immediately with critical data while deferred promises resolve in the background and stream their results to the client. This dramatically improves perceived performance by showing users meaningful content faster.\n\nUse this pattern when you have data that isn't needed for the initial render, such as comments, recommendations, or analytics. The critical path renders instantly while secondary data appears as it becomes available.\n\n### Incorrect\n\n```typescript\n// +page.server.ts\nexport async function load({ fetch }) {\n  // Awaiting everything blocks the entire page\n  const article = await fetch('/api/article/123').then(r => r.json());\n  const comments = await fetch('/api/article/123/comments').then(r => r.json());\n  const recommendations = await fetch('/api/recommendations').then(r => r.json());\n\n  return { article, comments, recommendations };\n}\n```\n\nThe page won't render until all three requests complete, even though users only need the article to start reading.\n\n### Correct\n\n```typescript\n// +page.server.ts\nexport async function load({ fetch }) {\n  // Await critical data, return promises for non-critical data\n  const article = await fetch('/api/article/123').then(r => r.json());\n\n  return {\n    article,\n    // These stream to the client as they resolve\n    comments: fetch('/api/article/123/comments').then(r => r.json()),\n    recommendations: fetch('/api/recommendations').then(r => r.json())\n  };\n}\n```\n\nThe page renders as soon as the article loads. Comments and recommendations stream in progressively.\n\n### Correct (Component Handling)\n\n```svelte\n<!-- +page.svelte -->\n<script lang=\"ts\">\n  let { data } = $props();\n</script>\n\n<article>\n  <h1>{data.article.title}</h1>\n  <div>{@html data.article.content}</div>\n</article>\n\n<!-- Show loading state while comments stream in -->\n{#await data.comments}\n  <section class=\"comments\">\n    <p>Loading comments...</p>\n  </section>\n{:then comments}\n  <section class=\"comments\">\n    <h2>Comments ({comments.length})</h2>\n    {#each comments as comment}\n      <div class=\"comment\">{comment.text}</div>\n    {/each}\n  </section>\n{:catch error}\n  <section class=\"comments\">\n    <p>Failed to load comments</p>\n  </section>\n{/await}\n```\n\nUse `{#await}` blocks to handle the streamed promise states with loading and error UI.\n\n### Correct (Parallel Critical + Deferred)\n\n```typescript\n// +page.server.ts\nexport async function load({ fetch, params }) {\n  // Start all fetches immediately\n  const articlePromise = fetch(`/api/article/${params.id}`).then(r => r.json());\n  const authorPromise = fetch(`/api/article/${params.id}/author`).then(r => r.json());\n  const commentsPromise = fetch(`/api/article/${params.id}/comments`).then(r => r.json());\n  const relatedPromise = fetch(`/api/article/${params.id}/related`).then(r => r.json());\n\n  // Await critical data in parallel\n  const [article, author] = await Promise.all([articlePromise, authorPromise]);\n\n  return {\n    article,\n    author,\n    // Stream non-critical data\n    comments: commentsPromise,\n    related: relatedPromise\n  };\n}\n```\n\nCombine parallel fetching for critical data with streaming for non-critical data to optimize both initial load and progressive enhancement.\n\n### Reference\n\n- [SvelteKit Streaming with Promises](https://svelte.dev/docs/kit/load#Streaming-with-promises)\n- [Svelte Await Blocks](https://svelte.dev/docs/svelte/await)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/template-const-simplify.md": "---\ntitle: Use {@const} to Simplify Complex Template Expressions\nimpact: LOW\nimpactDescription: \"Improves template readability and avoids repeating complex calculations\"\ntags: template, const, readability, each, destructuring\n---\n\n## Use {@const} to Simplify Complex Template Expressions\n\n**Impact: LOW** — Improves template readability and avoids repeating complex calculations\n\nThe `{@const}` directive lets you declare local constants within template blocks, particularly useful inside `{#each}` loops for destructuring objects, computing derived values, or avoiding repeated expressions. This keeps your templates clean and makes the logic easier to follow without moving everything into the script section.\n\n### Incorrect\n```svelte\n<script>\n  let { users } = $props();\n</script>\n\n{#each users as user}\n  <!-- Repeating complex expressions -->\n  <div class={user.role === 'admin' ? 'bg-red-100' : user.role === 'moderator' ? 'bg-yellow-100' : 'bg-gray-100'}>\n    <h3>{user.profile.firstName} {user.profile.lastName}</h3>\n    <p>Member since: {new Date(user.createdAt).toLocaleDateString()}</p>\n    <p>Posts: {user.stats.posts + user.stats.comments}</p>\n    <!-- Same calculation repeated -->\n    {#if user.stats.posts + user.stats.comments > 100}\n      <span>Power user!</span>\n    {/if}\n  </div>\n{/each}\n```\nRepeated complex expressions clutter the template, make it hard to understand what's being computed, and risk inconsistencies if you update one occurrence but forget another.\n\n### Correct\n```svelte\n<script>\n  let { users } = $props();\n</script>\n\n{#each users as user}\n  {@const { firstName, lastName } = user.profile}\n  {@const joinDate = new Date(user.createdAt).toLocaleDateString()}\n  {@const totalContributions = user.stats.posts + user.stats.comments}\n  {@const roleClass = user.role === 'admin'\n    ? 'bg-red-100'\n    : user.role === 'moderator'\n      ? 'bg-yellow-100'\n      : 'bg-gray-100'}\n\n  <div class={roleClass}>\n    <h3>{firstName} {lastName}</h3>\n    <p>Member since: {joinDate}</p>\n    <p>Posts: {totalContributions}</p>\n    {#if totalContributions > 100}\n      <span>Power user!</span>\n    {/if}\n  </div>\n{/each}\n```\nUsing `{@const}` makes the template self-documenting by giving meaningful names to computed values. Destructuring with `{@const}` keeps deeply nested property access clean and consistent.\n\n### Reference\n- [Svelte Docs: {@const}](https://svelte.dev/docs/svelte/const)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/template-html-xss.md": "---\ntitle: Never Use {@html} with Untrusted Content\nimpact: CRITICAL\nimpactDescription: \"Prevents XSS attacks that can steal user data, hijack sessions, or inject malicious scripts\"\ntags: security, xss, html, sanitization, template\n---\n\n## Never Use {@html} with Untrusted Content\n\n**Impact: CRITICAL** — Prevents XSS attacks that can steal user data, hijack sessions, or inject malicious scripts\n\nThe `{@html}` directive renders raw HTML without any escaping or sanitization, making it extremely dangerous when used with user-provided content. Attackers can inject malicious scripts that steal cookies, redirect users to phishing sites, or perform actions on behalf of authenticated users. Always sanitize content with a library like DOMPurify before rendering, or avoid `{@html}` entirely when possible.\n\n### Incorrect\n```svelte\n<script>\n  let { comment } = $props();\n</script>\n\n<!-- DANGEROUS: User input rendered as raw HTML -->\n{@html comment.body}\n\n<!-- DANGEROUS: Concatenating user input into HTML -->\n{@html `<div class=\"user-content\">${userInput}</div>`}\n\n<!-- DANGEROUS: Rendering HTML from API without sanitization -->\n{@html apiResponse.htmlContent}\n```\nUser-controlled content passed directly to `{@html}` allows attackers to inject `<script>` tags, event handlers like `onerror`, or other malicious HTML that executes in your users' browsers.\n\n### Correct\n```svelte\n<script>\n  import DOMPurify from 'dompurify';\n\n  let { comment } = $props();\n\n  // Sanitize before rendering\n  let sanitizedBody = $derived(DOMPurify.sanitize(comment.body, {\n    ALLOWED_TAGS: ['p', 'br', 'strong', 'em', 'a', 'ul', 'ol', 'li'],\n    ALLOWED_ATTR: ['href', 'target', 'rel']\n  }));\n</script>\n\n<!-- Safe: Sanitized HTML -->\n{@html sanitizedBody}\n\n<!-- Better: Avoid {@html} entirely when possible -->\n<p>{comment.plainTextBody}</p>\n\n<!-- Safe: Static HTML that you control -->\n{@html '<svg>...</svg>'}\n```\nUsing DOMPurify with a strict allowlist removes dangerous elements and attributes while preserving safe formatting. When possible, avoid `{@html}` entirely by using plain text or structured data.\n\n### Reference\n- [Svelte Docs: {@html}](https://svelte.dev/docs/svelte/html)\n- [DOMPurify](https://github.com/cure53/DOMPurify)\n- [OWASP XSS Prevention Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Cross_Site_Scripting_Prevention_Cheat_Sheet.html)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/template-if-vs-ternary.md": "---\ntitle: Prefer {#if} Blocks Over Ternaries for Complex Conditional Rendering\nimpact: LOW\nimpactDescription: \"Improves template readability and maintainability for complex conditional logic\"\ntags: template, if, conditional, readability, ternary\n---\n\n## Prefer {#if} Blocks Over Ternaries for Complex Conditional Rendering\n\n**Impact: LOW** — Improves template readability and maintainability for complex conditional logic\n\nWhile ternary expressions work for simple inline conditionals, `{#if}` blocks are significantly more readable when branches contain multiple elements, nested logic, or complex markup. Ternaries nested within JSX-like template expressions quickly become difficult to parse and maintain. Reserve ternaries for simple, single-value decisions.\n\n### Incorrect\n```svelte\n<script>\n  let { user, isLoading, error } = $props();\n</script>\n\n<!-- Hard to read: nested ternaries with complex branches -->\n{isLoading\n  ? <div class=\"spinner\"><Spinner size=\"lg\" /></div>\n  : error\n    ? <div class=\"error\">\n        <ErrorIcon />\n        <p>{error.message}</p>\n        <button onclick={retry}>Retry</button>\n      </div>\n    : user\n      ? <div class=\"profile\">\n          <Avatar src={user.avatar} />\n          <h2>{user.name}</h2>\n          <p>{user.bio}</p>\n        </div>\n      : <div class=\"empty\">No user selected</div>}\n\n<!-- Confusing: ternary for conditional attributes and content -->\n<div class={isActive ? 'card active' : 'card'}>\n  {isExpanded\n    ? <FullContent {data} onCollapse={() => isExpanded = false} />\n    : <Summary {data} onExpand={() => isExpanded = true} />}\n</div>\n```\nNested ternaries are notoriously difficult to read and debug. Finding matching branches, understanding the logic flow, and making changes becomes error-prone.\n\n### Correct\n```svelte\n<script>\n  let { user, isLoading, error } = $props();\n</script>\n\n<!-- Clear: each state has its own block -->\n{#if isLoading}\n  <div class=\"spinner\">\n    <Spinner size=\"lg\" />\n  </div>\n{:else if error}\n  <div class=\"error\">\n    <ErrorIcon />\n    <p>{error.message}</p>\n    <button onclick={retry}>Retry</button>\n  </div>\n{:else if user}\n  <div class=\"profile\">\n    <Avatar src={user.avatar} />\n    <h2>{user.name}</h2>\n    <p>{user.bio}</p>\n  </div>\n{:else}\n  <div class=\"empty\">No user selected</div>\n{/if}\n\n<!-- Ternaries are fine for simple, single-value decisions -->\n<div class={isActive ? 'card active' : 'card'}>\n  {#if isExpanded}\n    <FullContent {data} onCollapse={() => isExpanded = false} />\n  {:else}\n    <Summary {data} onExpand={() => isExpanded = true} />\n  {/if}\n</div>\n\n<!-- Simple ternary for text is readable -->\n<button>{isSubmitting ? 'Saving...' : 'Save'}</button>\n```\n`{#if}` blocks make branching logic visually clear with consistent indentation. Each branch is easy to locate, modify, and extend. Use ternaries only for simple inline values like class names or short text.\n\n### Reference\n- [Svelte Docs: {#if}](https://svelte.dev/docs/svelte/if)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/template-key-reset.md": "---\ntitle: Use {#key} to Force Component Re-creation on Value Changes\nimpact: MEDIUM\nimpactDescription: \"Ensures components reset their internal state when switching between distinct entities\"\ntags: template, key, state, reset, lifecycle\n---\n\n## Use {#key} to Force Component Re-creation on Value Changes\n\n**Impact: MEDIUM** — Ensures components reset their internal state when switching between distinct entities\n\nThe `{#key expression}` block destroys and recreates its contents whenever the expression value changes, which is essential when components maintain internal state that should reset when switching between items. Without `{#key}`, Svelte reuses component instances and only updates props, leaving stale internal state from the previous item.\n\n### Incorrect\n```svelte\n<script>\n  import UserProfile from './UserProfile.svelte';\n  import VideoPlayer from './VideoPlayer.svelte';\n\n  let { selectedUserId, currentVideoId } = $props();\n</script>\n\n<!-- Problem: Component keeps internal state when userId changes -->\n<UserProfile userId={selectedUserId} />\n\n<!-- Problem: Video continues playing from previous position -->\n<VideoPlayer videoId={currentVideoId} />\n\n<!-- Problem: Form keeps draft text when switching items -->\n<CommentEditor postId={selectedPostId} />\n```\nWhen `selectedUserId` changes, `UserProfile` receives the new prop but retains any internal state like expanded sections, scroll position, or pending edits from the previous user.\n\n### Correct\n```svelte\n<script>\n  import UserProfile from './UserProfile.svelte';\n  import VideoPlayer from './VideoPlayer.svelte';\n\n  let { selectedUserId, currentVideoId } = $props();\n</script>\n\n<!-- Component is destroyed and recreated when userId changes -->\n{#key selectedUserId}\n  <UserProfile userId={selectedUserId} />\n{/key}\n\n<!-- Video player resets completely for each video -->\n{#key currentVideoId}\n  <VideoPlayer videoId={currentVideoId} />\n{/key}\n\n<!-- Form resets draft state when switching posts -->\n{#key selectedPostId}\n  <CommentEditor postId={selectedPostId} />\n{/key}\n\n<!-- Can also key on multiple values -->\n{#key `${projectId}-${branchId}`}\n  <CodeEditor {projectId} {branchId} />\n{/key}\n```\nUsing `{#key}` ensures components start fresh with clean internal state. This is particularly important for forms, media players, editors, and any component that maintains state independent of its props.\n\n### Reference\n- [Svelte Docs: {#key}](https://svelte.dev/docs/svelte/key)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/transitions-prefer-css.md": "---\ntitle: Prefer CSS Transitions Over JavaScript\nimpact: MEDIUM\nimpactDescription: \"CSS transitions run on compositor thread for smoother 60fps animations\"\ntags: transitions, performance, css, animations\n---\n\n## Prefer CSS Transitions Over JavaScript\n\n**Impact: MEDIUM** — CSS transitions run on compositor thread for smoother 60fps animations\n\nSvelte's built-in transitions (`fade`, `slide`, `scale`, `fly`) use CSS under the hood, which allows the browser to optimize them on the GPU compositor thread. Custom JavaScript transitions run on the main thread and can cause jank during complex renders. Use CSS-based transitions unless you need JavaScript for complex sequencing or physics-based animations.\n\n### Incorrect\n```svelte\n<script>\n  import { cubicOut } from 'svelte/easing';\n\n  // Custom JS transition - runs on main thread\n  function customFade(node, { duration = 300 }) {\n    return {\n      duration,\n      tick: (t) => {\n        node.style.opacity = t;\n      }\n    };\n  }\n</script>\n\n{#if visible}\n  <div transition:customFade={{ duration: 300 }}>\n    Content\n  </div>\n{/if}\n```\nJavaScript transitions using `tick` run on every frame on the main thread, competing with other JavaScript execution and potentially causing dropped frames.\n\n### Correct\n```svelte\n<script>\n  import { fade } from 'svelte/transition';\n  import { cubicOut } from 'svelte/easing';\n</script>\n\n{#if visible}\n  <div transition:fade={{ duration: 300, easing: cubicOut }}>\n    Content\n  </div>\n{/if}\n\n<!-- Or use CSS directly for simple cases -->\n<style>\n  .content {\n    transition: opacity 300ms cubic-bezier(0.33, 1, 0.68, 1);\n  }\n\n  .content.hidden {\n    opacity: 0;\n  }\n</style>\n```\nBuilt-in Svelte transitions return CSS properties that the browser animates on the compositor thread, freeing the main thread for other work and ensuring smooth 60fps animations even during heavy JavaScript execution.\n\n### Reference\n- [Svelte Transitions Documentation](https://svelte.dev/docs/svelte/transition)\n- [MDN: CSS vs JavaScript Animations](https://developer.mozilla.org/en-US/docs/Web/Performance/CSS_JavaScript_animation_performance)\n- [Google: Rendering Performance](https://web.dev/articles/rendering-performance)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/transitions-reduced-motion.md": "---\ntitle: Respect Reduced Motion Preferences\nimpact: MEDIUM\nimpactDescription: \"Essential for users with vestibular disorders and motion sensitivity\"\ntags: transitions, accessibility, a11y, reduced-motion\n---\n\n## Respect Reduced Motion Preferences\n\n**Impact: MEDIUM** — Essential for users with vestibular disorders and motion sensitivity\n\nUsers can set `prefers-reduced-motion` in their system settings to indicate that animations cause discomfort, nausea, or seizures. Respecting this preference is both an accessibility requirement and often a legal obligation. Svelte makes it easy to conditionally disable or simplify animations based on this media query.\n\n### Incorrect\n```svelte\n<script>\n  import { fly } from 'svelte/transition';\n</script>\n\n{#if visible}\n  <div transition:fly={{ y: 200, duration: 500 }}>\n    Content that always animates\n  </div>\n{/if}\n```\nThis forces all users to experience motion animations, which can cause physical discomfort or health issues for people with vestibular disorders.\n\n### Correct\n```svelte\n<script>\n  import { fly, fade } from 'svelte/transition';\n\n  // Check reduced motion preference\n  const reducedMotion = $state(\n    typeof window !== 'undefined'\n      ? window.matchMedia('(prefers-reduced-motion: reduce)').matches\n      : false\n  );\n\n  // Use minimal or no motion when preferred\n  const transition = $derived(\n    reducedMotion\n      ? { fn: fade, options: { duration: 150 } }\n      : { fn: fly, options: { y: 200, duration: 500 } }\n  );\n</script>\n\n{#if visible}\n  <div transition:transition.fn={transition.options}>\n    Content with accessible animation\n  </div>\n{/if}\n\n<!-- Alternative: CSS-only approach -->\n<style>\n  @media (prefers-reduced-motion: reduce) {\n    :global(*) {\n      animation-duration: 0.01ms !important;\n      animation-iteration-count: 1 !important;\n      transition-duration: 0.01ms !important;\n    }\n  }\n</style>\n```\nBy checking the user's motion preference, you can provide a fade or instant transition instead of motion-heavy animations, ensuring your application is accessible to all users.\n\n### Reference\n- [Svelte Transitions Documentation](https://svelte.dev/docs/svelte/transition)\n- [MDN: prefers-reduced-motion](https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-motion)\n- [WCAG 2.1: Animation from Interactions](https://www.w3.org/WAI/WCAG21/Understanding/animation-from-interactions.html)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/transitions-use-local.md": "---\ntitle: Use Local Modifier on Transitions\nimpact: MEDIUM\nimpactDescription: \"Prevents unintended transitions when parent components change\"\ntags: transitions, local, performance, ux\n---\n\n## Use Local Modifier on Transitions\n\n**Impact: MEDIUM** — Prevents unintended transitions when parent components change\n\nThe `|local` modifier ensures transitions only run when the element's direct parent block is created or destroyed, not when ancestor blocks change. Without it, list items may unexpectedly animate when unrelated items are added or removed, causing visual chaos and degraded user experience.\n\n### Incorrect\n```svelte\n<script>\n  import { slide } from 'svelte/transition';\n\n  let items = $state(['Apple', 'Banana', 'Cherry']);\n\n  function removeItem(index) {\n    items = items.filter((_, i) => i !== index);\n  }\n</script>\n\n{#each items as item, i (item)}\n  <div transition:slide>\n    {item}\n    <button onclick={() => removeItem(i)}>Remove</button>\n  </div>\n{/each}\n```\nWhen any item is removed, ALL remaining items may run their transitions as the each block re-renders, creating a jarring visual effect.\n\n### Correct\n```svelte\n<script>\n  import { slide } from 'svelte/transition';\n\n  let items = $state(['Apple', 'Banana', 'Cherry']);\n\n  function removeItem(index) {\n    items = items.filter((_, i) => i !== index);\n  }\n</script>\n\n{#each items as item, i (item)}\n  <div transition:slide|local>\n    {item}\n    <button onclick={() => removeItem(i)}>Remove</button>\n  </div>\n{/each}\n```\nWith `|local`, only the removed item animates out. Other items remain stable, providing a smoother and more predictable user experience.\n\n### Reference\n- [Svelte Transitions Documentation](https://svelte.dev/docs/svelte/transition)\n- [Svelte Tutorial: Local Transitions](https://learn.svelte.dev/tutorial/local-transitions)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/typescript-generics-snippets.md": "---\ntitle: Use Generics with Snippets for Type-Safe Render Props\nimpact: LOW\nimpactDescription: \"Provides type safety for flexible component composition patterns\"\ntags: typescript, snippets, generics, svelte5, advanced\n---\n\n## Use Generics with Snippets for Type-Safe Render Props\n\n**Impact: LOW** — Provides type safety for flexible component composition patterns\n\nSvelte 5 snippets can be combined with TypeScript generics to create reusable components that render user-provided content with full type safety. This pattern is essential for list components, data tables, and other scenarios where the component manages data but delegates rendering to the consumer. Without generics, you either lose type safety or resort to `any` types.\n\n### Incorrect\n```svelte\n<!-- List.svelte -->\n<script lang=\"ts\">\n  import type { Snippet } from 'svelte';\n\n  interface Props {\n    items: any[]; // Lost type information\n    row: Snippet<[any]>; // No type safety for snippet parameter\n  }\n\n  let { items, row }: Props = $props();\n</script>\n\n{#each items as item}\n  {@render row(item)}\n{/each}\n```\n```svelte\n<!-- Usage -->\n<List items={users} row={userRow} />\n\n{#snippet userRow(user)}\n  <!-- 'user' is 'any' - no autocompletion or type checking -->\n  <div>{user.naem}</div> <!-- Typo not caught! -->\n{/snippet}\n```\nUsing `any` defeats the purpose of TypeScript and allows bugs like property typos to slip through.\n\n### Correct\n```svelte\n<!-- List.svelte -->\n<script lang=\"ts\" generics=\"T\">\n  import type { Snippet } from 'svelte';\n\n  interface Props {\n    items: T[];\n    row: Snippet<[T]>;\n    empty?: Snippet;\n  }\n\n  let { items, row, empty }: Props = $props();\n</script>\n\n{#each items as item}\n  {@render row(item)}\n{:else}\n  {#if empty}\n    {@render empty()}\n  {/if}\n{/each}\n```\n```svelte\n<!-- Usage -->\n<script lang=\"ts\">\n  interface User {\n    id: number;\n    name: string;\n    email: string;\n  }\n\n  let users: User[] = $state([]);\n</script>\n\n<List items={users} row={userRow} />\n\n{#snippet userRow(user: User)}\n  <!-- Full type safety: autocompletion works, typos are caught -->\n  <div>{user.name} ({user.email})</div>\n{/snippet}\n```\nThe generic `T` flows through from `items` to the snippet parameter, providing complete type safety throughout the component.\n\n### Reference\n- [Svelte Docs: Generics](https://svelte.dev/docs/svelte/typescript#generics)\n- [Svelte Docs: Snippets](https://svelte.dev/docs/svelte/snippet)\n",
        "sveltekit/skills/sveltekit-builder/references/svelte5/typescript-props-interface.md": "---\ntitle: Define Props Interface for Type-Safe $props() Destructuring\nimpact: MEDIUM\nimpactDescription: \"Enables IDE autocompletion and catches prop errors at compile time\"\ntags: typescript, props, types, svelte5\n---\n\n## Define Props Interface for Type-Safe $props() Destructuring\n\n**Impact: MEDIUM** — Enables IDE autocompletion and catches prop errors at compile time\n\nIn Svelte 5, define a `Props` interface to type your component's props when using `$props()`. This provides full TypeScript support including autocompletion, type checking at the call site, and clear documentation of what props your component accepts. Without explicit typing, props default to `unknown` and you lose all type safety benefits.\n\n### Incorrect\n```svelte\n<script lang=\"ts\">\n  // No type information - props are 'unknown'\n  let { name, count, onUpdate } = $props();\n\n  // TypeScript can't verify these operations are safe\n  const displayName = name.toUpperCase();\n  const doubled = count * 2;\n</script>\n\n<button onclick={() => onUpdate(count + 1)}>\n  {displayName}: {doubled}\n</button>\n```\nWithout a Props interface, TypeScript cannot validate prop usage, and consumers of your component get no autocompletion or type errors for incorrect props.\n\n### Correct\n```svelte\n<script lang=\"ts\">\n  interface Props {\n    name: string;\n    count: number;\n    onUpdate: (newCount: number) => void;\n    variant?: 'primary' | 'secondary'; // Optional with union type\n  }\n\n  let { name, count, onUpdate, variant = 'primary' }: Props = $props();\n\n  // TypeScript validates these operations\n  const displayName = name.toUpperCase();\n  const doubled = count * 2;\n</script>\n\n<button class={variant} onclick={() => onUpdate(count + 1)}>\n  {displayName}: {doubled}\n</button>\n```\nThe Props interface provides complete type safety, IDE support, and serves as inline documentation for component consumers.\n\n### Reference\n- [Svelte Docs: $props](https://svelte.dev/docs/svelte/$props)\n- [Svelte Docs: TypeScript](https://svelte.dev/docs/svelte/typescript)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/_README.md": "# Third-Party Stack\n\nOpinionated patterns for our recommended SvelteKit stack.\n\n## Our Choices\n\n### Database: [Kysely](https://kysely.dev/)\nType-safe SQL query builder with excellent TypeScript inference.\n\n**Why Kysely over Drizzle:**\n- Cleaner, more predictable API\n- Better TypeScript inference\n- No magic - just SQL with types\n- Stable, well-maintained\n\n### Auth: [Better Auth](https://www.better-auth.com/)\nModern authentication library for TypeScript.\n\n**Why Better Auth:**\n- Excellent developer experience\n- Active development & community\n- Built for modern frameworks\n- Comprehensive feature set (OAuth, MFA, sessions)\n\n### UI Components: [shadcn-svelte](https://www.shadcn-svelte.com/)\nBeautifully designed components built on Bits UI primitives.\n\n**Why shadcn-svelte:**\n- Copy-paste, not a dependency\n- Built on accessible Bits UI primitives\n- Tailwind CSS styling\n- Full control over components\n\n### Icons: [@lucide/svelte](https://lucide.dev/)\nBeautiful & consistent icon toolkit (Svelte 5 version).\n\n**Why Lucide:**\n- Consistent design language\n- Tree-shakeable (only bundle used icons)\n- Svelte 5 native with @lucide/svelte\n- Active development\n\n### AI: [AI SDK](https://ai-sdk.dev/)\nVercel's TypeScript toolkit for building AI applications.\n\n**Why AI SDK:**\n- Framework-agnostic core\n- Excellent SvelteKit support\n- Streaming, tools, structured output built-in\n- Provider-agnostic (OpenAI, Anthropic, etc.)\n\n---\n\n## Structure\n\n```\nthird-party/\n├── kysely/          # Database patterns\n├── better-auth/     # Authentication patterns\n├── shadcn-svelte/   # UI component patterns\n├── lucide-svelte/   # Icon patterns\n└── ai-sdk/          # AI/LLM patterns\n```\n\n## Note\n\nThese are our recommended choices, not the only options. The patterns focus on SvelteKit integration and best practices specific to each library.\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/ai-sdk/chat-class.md": "---\ntitle: Use Chat Class for UI State Management\nimpact: HIGH\nimpactDescription: \"Manual state management leads to bugs with streaming, loading, and error states\"\ntags: ai-sdk, svelte, chat, state-management, ui\n---\n\n## Use Chat Class for UI State Management\n\n**Impact: HIGH** — Manual state management leads to bugs with streaming, loading, and error states\n\nThe `Chat` class from `@ai-sdk/svelte` handles all the complexity of chat UI state: message history, streaming updates, loading indicators, error handling, and abort functionality. Don't try to manage these states manually with your own stores and fetch calls.\n\n### Incorrect\n```svelte\n<script lang=\"ts\">\n  let messages = $state<Array<{ role: string; content: string }>>([]);\n  let input = $state('');\n  let isLoading = $state(false);\n  let error = $state<string | null>(null);\n\n  async function sendMessage() {\n    isLoading = true;\n    error = null;\n    messages = [...messages, { role: 'user', content: input }];\n\n    try {\n      const response = await fetch('/api/chat', {\n        method: 'POST',\n        body: JSON.stringify({ messages })\n      });\n      // Manual streaming parsing, error handling, etc.\n    } catch (e) {\n      error = e.message;\n    } finally {\n      isLoading = false;\n    }\n  }\n</script>\n```\nManual implementation misses edge cases like concurrent requests, proper streaming parsing, and abort handling.\n\n### Correct\n```svelte\n<script lang=\"ts\">\n  import { Chat } from '@ai-sdk/svelte';\n\n  const chat = new Chat({\n    api: '/api/chat'\n  });\n</script>\n\n<div>\n  {#each chat.messages as message}\n    <div class={message.role === 'user' ? 'user' : 'assistant'}>\n      {message.content}\n    </div>\n  {/each}\n\n  {#if chat.isLoading}\n    <div>Thinking...</div>\n  {/if}\n\n  {#if chat.error}\n    <div class=\"error\">{chat.error.message}</div>\n  {/if}\n</div>\n\n<form onsubmit={(e) => { e.preventDefault(); chat.submitMessage(); }}>\n  <input bind:value={chat.input} placeholder=\"Type a message...\" />\n  <button type=\"submit\" disabled={chat.isLoading}>Send</button>\n  {#if chat.isLoading}\n    <button type=\"button\" onclick={() => chat.stop()}>Stop</button>\n  {/if}\n</form>\n```\nThe Chat class provides reactive `messages`, `input`, `isLoading`, `error` properties and methods like `submitMessage()`, `stop()`, and `reload()`.\n\n### Reference\n- [AI SDK Svelte Chat](https://sdk.vercel.ai/docs/ai-sdk-ui/chatbot#svelte)\n- [AI SDK useChat Reference](https://sdk.vercel.ai/docs/reference/ai-sdk-ui/use-chat)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/ai-sdk/env-private.md": "---\ntitle: Import API Keys from $env/static/private\nimpact: CRITICAL\nimpactDescription: \"API keys in process.env are undefined in SvelteKit and may leak to client\"\ntags: ai-sdk, sveltekit, environment-variables, security, secrets\n---\n\n## Import API Keys from $env/static/private\n\n**Impact: CRITICAL** — API keys in process.env are undefined in SvelteKit and may leak to client\n\nVite (which powers SvelteKit) does not automatically load `.env` variables into `process.env` on the server. Use SvelteKit's `$env/static/private` module for server-only secrets. This ensures variables are available at runtime and prevents accidental exposure to the client bundle.\n\n### Incorrect\n```typescript\n// src/routes/api/chat/+server.ts\nimport { streamText } from 'ai';\nimport { createOpenAI } from '@ai-sdk/openai';\n\n// process.env.OPENAI_API_KEY is undefined in SvelteKit!\nconst openai = createOpenAI({\n  apiKey: process.env.OPENAI_API_KEY\n});\n\nexport const POST = async ({ request }) => {\n  const { messages } = await request.json();\n  const result = streamText({\n    model: openai('gpt-4o'),\n    messages\n  });\n  return result.toDataStreamResponse();\n};\n```\n`process.env` is not populated by Vite. The API key will be undefined, causing authentication failures.\n\n### Correct\n```typescript\n// src/routes/api/chat/+server.ts\nimport { streamText } from 'ai';\nimport { createOpenAI } from '@ai-sdk/openai';\nimport { OPENAI_API_KEY } from '$env/static/private';\n\nconst openai = createOpenAI({\n  apiKey: OPENAI_API_KEY\n});\n\nexport const POST = async ({ request }) => {\n  const { messages } = await request.json();\n  const result = streamText({\n    model: openai('gpt-4o'),\n    messages\n  });\n  return result.toDataStreamResponse();\n};\n```\n`$env/static/private` loads environment variables correctly and ensures they're never included in client bundles.\n\n### Reference\n- [SvelteKit Environment Variables](https://svelte.dev/docs/kit/$env-static-private)\n- [Vite Env Variables](https://vite.dev/guide/env-and-mode)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/ai-sdk/streaming-endpoint.md": "---\ntitle: Use streamText for Chat Endpoints\nimpact: HIGH\nimpactDescription: \"Non-streaming responses block until completion, creating poor UX\"\ntags: ai-sdk, streaming, sveltekit, chat, api\n---\n\n## Use streamText for Chat Endpoints\n\n**Impact: HIGH** — Non-streaming responses block until completion, creating poor UX\n\nThe `streamText` function returns immediately and streams tokens to the client as they're generated. For SvelteKit endpoints, return the stream using `toDataStreamResponse()`. This provides instant feedback to users instead of waiting for the entire response.\n\n### Incorrect\n```typescript\n// src/routes/api/chat/+server.ts\nimport { generateText } from 'ai';\nimport { openai } from '@ai-sdk/openai';\nimport { json } from '@sveltejs/kit';\nimport type { RequestHandler } from './$types';\n\nexport const POST: RequestHandler = async ({ request }) => {\n  const { messages } = await request.json();\n\n  const { text } = await generateText({\n    model: openai('gpt-4o'),\n    messages\n  });\n\n  return json({ message: text });\n};\n```\nThe client waits for the entire response to generate before seeing anything, which can take many seconds for long responses.\n\n### Correct\n```typescript\n// src/routes/api/chat/+server.ts\nimport { streamText } from 'ai';\nimport { openai } from '@ai-sdk/openai';\nimport type { RequestHandler } from './$types';\n\nexport const POST: RequestHandler = async ({ request }) => {\n  const { messages } = await request.json();\n\n  const result = streamText({\n    model: openai('gpt-4o'),\n    messages\n  });\n\n  return result.toDataStreamResponse();\n};\n```\nTokens stream to the client immediately as they're generated, providing responsive real-time feedback.\n\n### Reference\n- [AI SDK Streaming](https://sdk.vercel.ai/docs/ai-sdk-core/generating-text#streamtext)\n- [AI SDK SvelteKit Integration](https://sdk.vercel.ai/docs/getting-started/svelte)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/ai-sdk/tool-validation.md": "---\ntitle: Validate Tool Inputs with Zod Schemas\nimpact: CRITICAL\nimpactDescription: \"LLM-generated tool inputs can be malformed or malicious without validation\"\ntags: ai-sdk, tools, validation, zod, security\n---\n\n## Validate Tool Inputs with Zod Schemas\n\n**Impact: CRITICAL** — LLM-generated tool inputs can be malformed or malicious without validation\n\nTool inputs come from the LLM, not your code. The model might generate invalid data types, missing fields, or unexpected values. Always define strict Zod schemas for tool parameters to ensure type safety and prevent runtime errors or security issues.\n\n### Incorrect\n```typescript\nimport { streamText } from 'ai';\nimport { openai } from '@ai-sdk/openai';\n\nconst result = streamText({\n  model: openai('gpt-4o'),\n  messages,\n  tools: {\n    getWeather: {\n      description: 'Get weather for a location',\n      parameters: {\n        type: 'object',\n        properties: {\n          location: { type: 'string' },\n          unit: { type: 'string' }\n        }\n      },\n      execute: async ({ location, unit }) => {\n        // No validation - location could be anything\n        return fetchWeather(location, unit);\n      }\n    }\n  }\n});\n```\nWithout Zod validation, the tool accepts any input the LLM generates, risking runtime errors or injection attacks.\n\n### Correct\n```typescript\nimport { streamText, tool } from 'ai';\nimport { openai } from '@ai-sdk/openai';\nimport { z } from 'zod';\n\nconst result = streamText({\n  model: openai('gpt-4o'),\n  messages,\n  tools: {\n    getWeather: tool({\n      description: 'Get current weather for a location',\n      parameters: z.object({\n        location: z.string().min(1).describe('City name or zip code'),\n        unit: z.enum(['celsius', 'fahrenheit']).default('celsius')\n      }),\n      execute: async ({ location, unit }) => {\n        // Inputs are validated and typed\n        return fetchWeather(location, unit);\n      }\n    })\n  }\n});\n```\nZod schemas validate inputs before execution, provide TypeScript types, and give the LLM better parameter descriptions.\n\n### Reference\n- [AI SDK Tools](https://sdk.vercel.ai/docs/ai-sdk-core/tools-and-tool-calling)\n- [Zod Documentation](https://zod.dev/)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/better-auth/csrf-protection.md": "---\ntitle: Enable CSRF Protection for Form Actions\nimpact: HIGH\nimpactDescription: \"Missing CSRF protection allows attackers to perform actions on behalf of authenticated users\"\ntags: better-auth, sveltekit, csrf, security, forms\n---\n\n## Enable CSRF Protection for Form Actions\n\n**Impact: HIGH** — Missing CSRF protection allows attackers to perform actions on behalf of authenticated users\n\nCross-Site Request Forgery (CSRF) attacks trick authenticated users into submitting malicious requests. While SvelteKit provides built-in CSRF protection for form actions, Better Auth endpoints and custom API routes need explicit protection. Better Auth provides CSRF token utilities that should be used for any state-changing operations.\n\n### Incorrect\n```typescript\n// src/routes/settings/+page.server.ts\nexport const actions = {\n  updateEmail: async ({ request, locals }) => {\n    // No CSRF validation - vulnerable to cross-site attacks!\n    const formData = await request.formData();\n    const newEmail = formData.get('email');\n\n    await updateUserEmail(locals.user.id, newEmail);\n    return { success: true };\n  }\n};\n\n// src/routes/api/delete-account/+server.ts\nexport async function POST({ locals }) {\n  // API endpoint without CSRF protection!\n  await deleteUser(locals.user.id);\n  return new Response('Deleted');\n}\n```\nWithout CSRF protection, an attacker can create a malicious page that submits forms or requests to your application, performing actions as the logged-in user without their knowledge.\n\n### Correct\n```typescript\n// SvelteKit form actions have built-in CSRF protection via origin checking\n// src/routes/settings/+page.server.ts\nimport { fail } from '@sveltejs/kit';\n\nexport const actions = {\n  updateEmail: async ({ request, locals }) => {\n    // SvelteKit automatically validates origin header for form submissions\n    const formData = await request.formData();\n    const newEmail = formData.get('email');\n\n    if (!locals.user) {\n      return fail(401, { error: 'Unauthorized' });\n    }\n\n    await updateUserEmail(locals.user.id, newEmail);\n    return { success: true };\n  }\n};\n\n// For API routes and Better Auth operations, use CSRF tokens\n// src/lib/auth-client.ts\nimport { createAuthClient } from 'better-auth/svelte';\n\nexport const authClient = createAuthClient({\n  baseURL: 'http://localhost:5173'\n});\n\n// src/routes/settings/+page.svelte\n<script lang=\"ts\">\n  import { authClient } from '$lib/auth-client';\n\n  async function deleteAccount() {\n    // Better Auth client automatically includes CSRF token\n    await authClient.user.delete();\n  }\n</script>\n\n// For custom API endpoints, validate the request origin\n// src/routes/api/sensitive-action/+server.ts\nimport { json } from '@sveltejs/kit';\n\nexport async function POST({ request, locals }) {\n  // Validate origin header for API requests\n  const origin = request.headers.get('origin');\n  const allowedOrigins = ['http://localhost:5173', 'https://yourapp.com'];\n\n  if (!origin || !allowedOrigins.includes(origin)) {\n    return json({ error: 'Invalid origin' }, { status: 403 });\n  }\n\n  if (!locals.user) {\n    return json({ error: 'Unauthorized' }, { status: 401 });\n  }\n\n  // Safe to proceed with state-changing operation\n  await performSensitiveAction(locals.user.id);\n  return json({ success: true });\n}\n\n// For enhanced protection, use custom CSRF tokens in forms\n// src/routes/settings/+page.server.ts\nimport { randomBytes } from 'crypto';\n\nexport async function load({ cookies }) {\n  const csrfToken = randomBytes(32).toString('hex');\n  cookies.set('csrf_token', csrfToken, {\n    httpOnly: true,\n    secure: true,\n    sameSite: 'strict',\n    path: '/'\n  });\n\n  return { csrfToken };\n}\n\nexport const actions = {\n  sensitiveAction: async ({ request, cookies }) => {\n    const formData = await request.formData();\n    const submittedToken = formData.get('csrf_token');\n    const cookieToken = cookies.get('csrf_token');\n\n    if (!submittedToken || submittedToken !== cookieToken) {\n      return fail(403, { error: 'Invalid CSRF token' });\n    }\n\n    // Proceed with action\n  }\n};\n```\nSvelteKit's form actions include built-in origin validation. For API routes, validate the origin header or implement double-submit cookie patterns. Better Auth's client library automatically handles CSRF tokens for its operations, ensuring state-changing requests are protected against cross-site attacks.\n\n### Reference\n- [SvelteKit Form Actions Security](https://kit.svelte.dev/docs/form-actions#security)\n- [Better Auth Security Features](https://www.better-auth.com/docs/concepts/security)\n- [OWASP CSRF Prevention Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Cross-Site_Request_Forgery_Prevention_Cheat_Sheet.html)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/better-auth/hooks-handle.md": "---\ntitle: Validate Sessions in hooks.server.ts\nimpact: CRITICAL\nimpactDescription: \"Missing session validation allows unauthenticated access to protected resources\"\ntags: better-auth, sveltekit, authentication, hooks, session\n---\n\n## Validate Sessions in hooks.server.ts\n\n**Impact: CRITICAL** — Missing session validation allows unauthenticated access to protected resources\n\nThe `handle()` hook in `hooks.server.ts` runs on every request before any load function executes. By validating the session here, you ensure authentication state is available throughout the request lifecycle and avoid duplicating validation logic across routes.\n\n### Incorrect\n```typescript\n// src/routes/dashboard/+page.server.ts\nimport { auth } from '$lib/server/auth';\n\nexport async function load({ request }) {\n  // Validating in each load function - repetitive and error-prone\n  const session = await auth.api.getSession({\n    headers: request.headers\n  });\n\n  if (!session) {\n    throw redirect(303, '/login');\n  }\n\n  return { user: session.user };\n}\n```\nValidating sessions in individual load functions leads to code duplication, inconsistent protection, and potential security gaps when a route forgets the check.\n\n### Correct\n```typescript\n// src/hooks.server.ts\nimport { auth } from '$lib/server/auth';\nimport type { Handle } from '@sveltejs/kit';\n\nexport const handle: Handle = async ({ event, resolve }) => {\n  const session = await auth.api.getSession({\n    headers: event.request.headers\n  });\n\n  // Store in locals for access throughout the request\n  event.locals.user = session?.user ?? null;\n  event.locals.session = session?.session ?? null;\n\n  return resolve(event);\n};\n```\nCentralizing session validation in the handle hook ensures every request has consistent authentication state available via `event.locals`, making it easy to access user data in any load function or form action.\n\n### Reference\n- [Better Auth SvelteKit Integration](https://www.better-auth.com/docs/integrations/sveltekit)\n- [SvelteKit Hooks Documentation](https://kit.svelte.dev/docs/hooks)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/better-auth/oauth-callbacks.md": "---\ntitle: Handle OAuth Callbacks Properly\nimpact: HIGH\nimpactDescription: \"Incorrect OAuth callback handling breaks authentication flow and leaks tokens\"\ntags: better-auth, sveltekit, oauth, authentication, callbacks\n---\n\n## Handle OAuth Callbacks Properly\n\n**Impact: HIGH** — Incorrect OAuth callback handling breaks authentication flow and leaks tokens\n\nOAuth providers redirect users back to your application with authorization codes or tokens. Better Auth provides built-in handlers that securely process these callbacks, exchange codes for tokens, and create sessions. You must set up the callback route correctly and let Better Auth handle the sensitive token exchange.\n\n### Incorrect\n```typescript\n// src/routes/auth/callback/google/+server.ts\nimport { redirect } from '@sveltejs/kit';\n\nexport async function GET({ url }) {\n  // Manually handling OAuth callback - dangerous!\n  const code = url.searchParams.get('code');\n\n  // Manual token exchange is error-prone and insecure\n  const tokenResponse = await fetch('https://oauth2.googleapis.com/token', {\n    method: 'POST',\n    body: new URLSearchParams({\n      code: code!,\n      client_id: process.env.GOOGLE_CLIENT_ID!,\n      client_secret: process.env.GOOGLE_CLIENT_SECRET!,\n      redirect_uri: 'http://localhost:5173/auth/callback/google',\n      grant_type: 'authorization_code'\n    })\n  });\n\n  // Missing: CSRF validation, state parameter check, secure cookie setting\n  const tokens = await tokenResponse.json();\n  // ...\n}\n```\nManual OAuth handling skips critical security steps like state parameter validation, PKCE verification, and secure session creation. It also exposes you to token leakage and replay attacks.\n\n### Correct\n```typescript\n// src/lib/server/auth.ts\nimport { betterAuth } from 'better-auth';\nimport { svelteKitHandler } from 'better-auth/svelte-kit';\n\nexport const auth = betterAuth({\n  socialProviders: {\n    google: {\n      clientId: process.env.GOOGLE_CLIENT_ID!,\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET!\n    },\n    github: {\n      clientId: process.env.GITHUB_CLIENT_ID!,\n      clientSecret: process.env.GITHUB_CLIENT_SECRET!\n    }\n  }\n});\n\nexport const { GET, POST } = svelteKitHandler(auth);\n\n// src/routes/api/auth/[...all]/+server.ts\nexport { GET, POST } from '$lib/server/auth';\n\n// Client-side: initiating OAuth flow\n// src/routes/login/+page.svelte\n<script lang=\"ts\">\n  import { authClient } from '$lib/auth-client';\n\n  async function signInWithGoogle() {\n    await authClient.signIn.social({\n      provider: 'google',\n      callbackURL: '/dashboard'\n    });\n  }\n</script>\n\n<button on:click={signInWithGoogle}>\n  Sign in with Google\n</button>\n```\nBetter Auth's built-in handlers manage the complete OAuth flow including state parameter generation and validation, PKCE (when supported), secure token exchange, session creation with proper cookies, and error handling. The catch-all route `[...all]` allows Better Auth to handle all auth-related endpoints automatically.\n\n### Reference\n- [Better Auth OAuth Providers](https://www.better-auth.com/docs/authentication/social-sign-in)\n- [Better Auth SvelteKit Handler](https://www.better-auth.com/docs/integrations/sveltekit)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/better-auth/protect-routes.md": "---\ntitle: Protect Routes in Handle, Not Load Functions\nimpact: CRITICAL\nimpactDescription: \"Checking auth in load functions allows unauthorized code execution before redirect\"\ntags: better-auth, sveltekit, authentication, routing, security\n---\n\n## Protect Routes in Handle, Not Load Functions\n\n**Impact: CRITICAL** — Checking auth in load functions allows unauthorized code execution before redirect\n\nRoute protection must happen at the earliest possible point in the request lifecycle. The `handle()` hook runs before load functions, making it the proper place to redirect unauthenticated users. Checking auth inside load functions means potentially sensitive data fetching or business logic may execute before the redirect occurs.\n\n### Incorrect\n```typescript\n// src/routes/admin/+page.server.ts\nimport { redirect } from '@sveltejs/kit';\n\nexport async function load({ locals }) {\n  // Too late! This load function already started executing\n  if (!locals.user) {\n    throw redirect(303, '/login');\n  }\n\n  // This code might run before the redirect in some scenarios\n  const sensitiveData = await fetchAdminData();\n\n  return { data: sensitiveData };\n}\n```\nChecking authentication in load functions creates a security gap where the load function body begins execution before the auth check completes, potentially leaking data or triggering side effects.\n\n### Correct\n```typescript\n// src/hooks.server.ts\nimport { redirect } from '@sveltejs/kit';\nimport type { Handle } from '@sveltejs/kit';\n\nconst protectedRoutes = ['/admin', '/dashboard', '/settings'];\n\nexport const handle: Handle = async ({ event, resolve }) => {\n  const session = await auth.api.getSession({\n    headers: event.request.headers\n  });\n\n  event.locals.user = session?.user ?? null;\n  event.locals.session = session?.session ?? null;\n\n  // Protect routes BEFORE load functions run\n  const isProtected = protectedRoutes.some(route =>\n    event.url.pathname.startsWith(route)\n  );\n\n  if (isProtected && !event.locals.user) {\n    throw redirect(303, `/login?redirectTo=${event.url.pathname}`);\n  }\n\n  return resolve(event);\n};\n\n// src/routes/admin/+page.server.ts\nexport async function load({ locals }) {\n  // User is guaranteed to be authenticated here\n  const adminData = await fetchAdminData(locals.user.id);\n  return { data: adminData };\n}\n```\nRedirecting in the handle hook ensures unauthenticated requests never reach protected load functions, preventing any possibility of unauthorized code execution or data access.\n\n### Reference\n- [SvelteKit Handle Hook](https://kit.svelte.dev/docs/hooks#server-hooks-handle)\n- [Better Auth Session Management](https://www.better-auth.com/docs/concepts/session-management)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/better-auth/secure-cookies.md": "---\ntitle: Configure Secure Cookie Settings\nimpact: MEDIUM\nimpactDescription: \"Insecure cookie settings expose sessions to theft via XSS or network interception\"\ntags: better-auth, sveltekit, cookies, security, session\n---\n\n## Configure Secure Cookie Settings\n\n**Impact: MEDIUM** — Insecure cookie settings expose sessions to theft via XSS or network interception\n\nSession cookies must be configured with security attributes to prevent common attacks. Better Auth provides secure defaults, but understanding these settings helps you make informed decisions for your deployment environment and avoid accidentally weakening security.\n\n### Incorrect\n```typescript\n// src/lib/server/auth.ts\nimport { betterAuth } from 'better-auth';\n\nexport const auth = betterAuth({\n  // Overriding defaults with insecure settings\n  advanced: {\n    cookies: {\n      sessionToken: {\n        name: 'session',\n        httpOnly: false,  // Allows JavaScript access - XSS vulnerability!\n        secure: false,    // Sent over HTTP - network interception risk!\n        sameSite: 'none'  // Sent with cross-site requests - CSRF risk!\n      }\n    }\n  }\n});\n```\nDisabling HttpOnly allows malicious scripts to steal session tokens. Disabling Secure sends tokens over unencrypted connections. Setting SameSite to 'none' allows cross-site request attacks.\n\n### Correct\n```typescript\n// src/lib/server/auth.ts\nimport { betterAuth } from 'better-auth';\n\nexport const auth = betterAuth({\n  // Better Auth uses secure defaults, but you can customize if needed\n  advanced: {\n    cookies: {\n      sessionToken: {\n        name: '__Host-session',  // __Host- prefix enforces Secure and no Domain\n        httpOnly: true,          // Prevents JavaScript access (XSS protection)\n        secure: true,            // Only sent over HTTPS\n        sameSite: 'lax',         // Sent with same-site and top-level navigation\n        path: '/',\n        maxAge: 60 * 60 * 24 * 7 // 7 days\n      }\n    }\n  },\n  // For development, Better Auth automatically adjusts secure settings\n  trustedOrigins: ['http://localhost:5173']\n});\n\n// Production environment detection\n// src/lib/server/auth.ts\nimport { dev } from '$app/environment';\n\nexport const auth = betterAuth({\n  advanced: {\n    cookies: {\n      sessionToken: {\n        httpOnly: true,\n        secure: !dev,         // Secure in production, flexible in dev\n        sameSite: 'lax'\n      }\n    }\n  }\n});\n```\nHttpOnly prevents XSS attacks from accessing cookies via `document.cookie`. Secure ensures cookies are only transmitted over HTTPS. SameSite 'lax' provides CSRF protection while allowing normal navigation flows. The `__Host-` prefix provides additional security guarantees enforced by the browser.\n\n### Reference\n- [Better Auth Cookie Configuration](https://www.better-auth.com/docs/concepts/cookies)\n- [MDN Set-Cookie Security](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Set-Cookie)\n- [OWASP Session Management Cheat Sheet](https://cheatsheetseries.owasp.org/cheatsheets/Session_Management_Cheat_Sheet.html)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/better-auth/session-locals.md": "---\ntitle: Access Session via event.locals\nimpact: HIGH\nimpactDescription: \"Untyped locals cause runtime errors and poor developer experience\"\ntags: better-auth, sveltekit, typescript, type-safety, session\n---\n\n## Access Session via event.locals\n\n**Impact: HIGH** — Untyped locals cause runtime errors and poor developer experience\n\nAfter validating the session in the handle hook, you should access user data through `event.locals` rather than re-fetching the session. Properly typing `event.locals` in `app.d.ts` provides type safety, autocomplete, and catches auth-related bugs at compile time rather than runtime.\n\n### Incorrect\n```typescript\n// src/routes/profile/+page.server.ts\nimport { auth } from '$lib/server/auth';\n\nexport async function load({ request }) {\n  // Re-fetching session that was already validated in handle\n  const session = await auth.api.getSession({\n    headers: request.headers\n  });\n\n  // No type safety - user could be anything\n  return { user: session?.user };\n}\n```\nRe-fetching the session wastes resources and bypasses the centralized validation in your handle hook. Without proper typing, TypeScript cannot help catch null access errors.\n\n### Correct\n```typescript\n// src/app.d.ts\nimport type { User, Session } from 'better-auth';\n\ndeclare global {\n  namespace App {\n    interface Locals {\n      user: User | null;\n      session: Session | null;\n    }\n  }\n}\n\nexport {};\n\n// src/routes/profile/+page.server.ts\nexport async function load({ locals }) {\n  // TypeScript knows the shape of locals.user\n  if (!locals.user) {\n    // Handle unauthenticated case (or rely on handle hook redirect)\n    return { user: null };\n  }\n\n  // Full autocomplete and type checking on user properties\n  return {\n    user: {\n      id: locals.user.id,\n      email: locals.user.email,\n      name: locals.user.name\n    }\n  };\n}\n\n// src/routes/api/user/+server.ts\nimport { json } from '@sveltejs/kit';\n\nexport async function GET({ locals }) {\n  if (!locals.user) {\n    return json({ error: 'Unauthorized' }, { status: 401 });\n  }\n\n  return json({ user: locals.user });\n}\n```\nTyping `event.locals` in `app.d.ts` ensures consistent access patterns across all server-side code, provides compile-time type checking, and makes the authentication state discoverable through IDE autocomplete.\n\n### Reference\n- [SvelteKit App.d.ts Typing](https://kit.svelte.dev/docs/types#app)\n- [Better Auth TypeScript Support](https://www.better-auth.com/docs/concepts/typescript)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/kysely/connection-pooling.md": "---\ntitle: Use Connection Pooling for Serverless\nimpact: CRITICAL\nimpactDescription: \"Without pooling, serverless functions exhaust database connections causing failures under load\"\ntags: kysely, serverless, database, performance, cloudflare-workers, vercel\n---\n\n## Use Connection Pooling for Serverless\n\n**Impact: CRITICAL** — Without pooling, serverless functions exhaust database connections causing failures under load\n\nServerless environments like Cloudflare Workers and Vercel Edge Functions create new instances for each request. Without connection pooling, each instance opens a new database connection, quickly exhausting your database's connection limit. Use serverless-compatible drivers or external connection poolers like PgBouncer, Neon's pooler, or PlanetScale's serverless driver.\n\n### Incorrect\n```typescript\n// src/lib/server/db.ts\nimport { Kysely, PostgresDialect } from 'kysely';\nimport pg from 'pg';\n\n// Direct connection - will exhaust connections in serverless\nconst db = new Kysely<Database>({\n  dialect: new PostgresDialect({\n    pool: new pg.Pool({\n      connectionString: process.env.DATABASE_URL,\n      max: 10 // This pool is per-instance, not shared!\n    })\n  })\n});\n```\nEach serverless instance creates its own pool, so 100 concurrent requests could open 1000 connections, crashing your database.\n\n### Correct\n```typescript\n// src/lib/server/db.ts\nimport { Kysely, PostgresDialect } from 'kysely';\nimport { Pool, neonConfig } from '@neondatabase/serverless';\nimport ws from 'ws';\n\n// For Cloudflare Workers / Edge\nneonConfig.webSocketConstructor = ws;\n\nconst db = new Kysely<Database>({\n  dialect: new PostgresDialect({\n    pool: new Pool({\n      // Use Neon's pooled connection string (ends with -pooler)\n      connectionString: process.env.DATABASE_URL\n    })\n  })\n});\n\nexport { db };\n```\nServerless-compatible drivers like `@neondatabase/serverless`, `@planetscale/database`, or `@libsql/client` handle connection pooling at the infrastructure level, safely sharing connections across all instances.\n\n### Reference\n- [Kysely Dialects Documentation](https://kysely.dev/docs/dialects)\n- [Neon Serverless Driver](https://neon.tech/docs/serverless/serverless-driver)\n- [PlanetScale Serverless Driver](https://planetscale.com/docs/tutorials/planetscale-serverless-driver)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/kysely/load-vs-action.md": "---\ntitle: Reads in Load Functions, Writes in Form Actions\nimpact: HIGH\nimpactDescription: \"Mixing reads and writes in wrong places breaks caching, causes race conditions, and violates SvelteKit patterns\"\ntags: kysely, sveltekit, form-actions, load-functions, architecture\n---\n\n## Reads in Load Functions, Writes in Form Actions\n\n**Impact: HIGH** — Mixing reads and writes in wrong places breaks caching, causes race conditions, and violates SvelteKit patterns\n\nSvelteKit's architecture separates data loading (`load` functions) from data mutations (form actions). Load functions run on GET requests and can be cached, while form actions handle POST/PUT/DELETE and automatically invalidate related load data. Putting writes in load functions or reads in form actions breaks this model, causing stale data, double submissions, and caching issues.\n\n### Incorrect\n```typescript\n// src/routes/posts/+page.server.ts\nimport { db } from '$lib/server/db';\n\nexport async function load({ url }) {\n  // WRONG: Write operation in load function\n  // This runs on every page view, including back/forward navigation!\n  if (url.searchParams.get('markRead') === 'true') {\n    await db\n      .updateTable('notifications')\n      .set({ read: true })\n      .execute();\n  }\n\n  const posts = await db.selectFrom('posts').selectAll().execute();\n  return { posts };\n}\n\n// WRONG: Putting everything in actions\nexport const actions = {\n  default: async ({ request }) => {\n    const formData = await request.formData();\n\n    // Reading data in action instead of load\n    const posts = await db.selectFrom('posts').selectAll().execute();\n\n    // Write is correct here, but returning posts from action is awkward\n    await db.insertInto('posts').values({ title: formData.get('title') }).execute();\n\n    return { posts }; // Must be accessed differently than load data\n  }\n};\n```\nThe read in load runs on every GET request, including prefetching and browser navigation. Actions don't benefit from SvelteKit's load data invalidation.\n\n### Correct\n```typescript\n// src/routes/posts/+page.server.ts\nimport { db } from '$lib/server/db';\nimport { fail } from '@sveltejs/kit';\n\n// Load function: READ operations only\nexport async function load({ locals }) {\n  const posts = await db\n    .selectFrom('posts')\n    .select(['id', 'title', 'excerpt', 'created_at'])\n    .where('author_id', '=', locals.user.id)\n    .orderBy('created_at', 'desc')\n    .execute();\n\n  return { posts };\n}\n\n// Form actions: WRITE operations only\nexport const actions = {\n  create: async ({ request, locals }) => {\n    const formData = await request.formData();\n    const title = formData.get('title') as string;\n    const content = formData.get('content') as string;\n\n    if (!title?.trim()) {\n      return fail(400, { error: 'Title is required', title, content });\n    }\n\n    await db\n      .insertInto('posts')\n      .values({\n        title: title.trim(),\n        content,\n        author_id: locals.user.id\n      })\n      .execute();\n\n    // SvelteKit automatically re-runs load() after successful action\n    // No need to return posts - the page will have fresh data\n    return { success: true };\n  },\n\n  delete: async ({ request, locals }) => {\n    const formData = await request.formData();\n    const id = formData.get('id') as string;\n\n    await db\n      .deleteFrom('posts')\n      .where('id', '=', id)\n      .where('author_id', '=', locals.user.id) // Ensure ownership\n      .execute();\n\n    return { success: true };\n  }\n};\n```\nAfter a successful form action, SvelteKit automatically invalidates and re-runs the load function, ensuring fresh data. This separation enables caching load data, provides built-in CSRF protection for actions, and creates predictable data flow.\n\n### Reference\n- [SvelteKit Load Functions](https://kit.svelte.dev/docs/load)\n- [SvelteKit Form Actions](https://kit.svelte.dev/docs/form-actions)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/kysely/parameterized-queries.md": "---\ntitle: Always Use Parameterized Queries\nimpact: CRITICAL\nimpactDescription: \"String interpolation in SQL enables injection attacks that can destroy or steal your entire database\"\ntags: kysely, security, sql-injection, database\n---\n\n## Always Use Parameterized Queries\n\n**Impact: CRITICAL** — String interpolation in SQL enables injection attacks that can destroy or steal your entire database\n\nSQL injection remains one of the most dangerous web vulnerabilities. While Kysely's query builder is safe by default, the `sql` template literal requires care. Never interpolate user input directly into SQL strings. Always use parameterized placeholders that keep data separate from SQL commands.\n\n### Incorrect\n```typescript\n// src/routes/api/search/+server.ts\nimport { db } from '$lib/server/db';\nimport { sql } from 'kysely';\n\nexport async function GET({ url }) {\n  const search = url.searchParams.get('q') || '';\n  const sortBy = url.searchParams.get('sort') || 'created_at';\n\n  // CRITICAL VULNERABILITY: Direct string interpolation\n  const results = await db\n    .selectFrom('posts')\n    .selectAll()\n    .where(sql`title LIKE '%${search}%'`) // SQL INJECTION!\n    .orderBy(sql`${sortBy}`) // SQL INJECTION!\n    .execute();\n\n  return Response.json(results);\n}\n\n// Attacker sends: ?q=' OR 1=1; DROP TABLE users; --\n// Attacker sends: ?sort=created_at; DELETE FROM posts; --\n```\nAn attacker can inject arbitrary SQL, accessing all data, deleting tables, or taking over your database.\n\n### Correct\n```typescript\n// src/routes/api/search/+server.ts\nimport { db } from '$lib/server/db';\nimport { sql } from 'kysely';\n\nconst ALLOWED_SORT_COLUMNS = ['created_at', 'title', 'views'] as const;\n\nexport async function GET({ url }) {\n  const search = url.searchParams.get('q') || '';\n  const sortBy = url.searchParams.get('sort') || 'created_at';\n\n  // Validate against allowlist for column names (can't be parameterized)\n  const safeSort = ALLOWED_SORT_COLUMNS.includes(sortBy as any)\n    ? sortBy\n    : 'created_at';\n\n  const results = await db\n    .selectFrom('posts')\n    .select(['id', 'title', 'excerpt', 'created_at'])\n    // Option 1: Use Kysely's built-in methods (always safe)\n    .where('title', 'like', `%${search}%`)\n    // Option 2: Use sql`` with proper parameterization\n    // .where(sql`title LIKE ${'%' + search + '%'}`)\n    // Column names must be validated, not parameterized\n    .orderBy(safeSort as any)\n    .execute();\n\n  return Response.json(results);\n}\n```\nKysely's query builder methods (`where`, `select`, etc.) automatically parameterize values. When using the `sql` template literal, values are parameterized by default. For dynamic column or table names, always validate against an allowlist.\n\n### Reference\n- [Kysely SQL Template Documentation](https://kysely.dev/docs/examples/sql)\n- [OWASP SQL Injection Prevention](https://cheatsheetseries.owasp.org/cheatsheets/SQL_Injection_Prevention_Cheat_Sheet.html)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/kysely/select-specific-columns.md": "---\ntitle: Select Only Required Columns\nimpact: MEDIUM\nimpactDescription: \"Selecting all columns wastes bandwidth, slows queries, and risks exposing sensitive data\"\ntags: kysely, performance, security, database\n---\n\n## Select Only Required Columns\n\n**Impact: MEDIUM** — Selecting all columns wastes bandwidth, slows queries, and risks exposing sensitive data\n\nUsing `selectAll()` fetches every column from the table, including large text fields, sensitive data, and columns you never use. This increases query time, network transfer, and memory usage. Worse, it can accidentally expose password hashes, tokens, or private data to the frontend. Always select only the columns your component actually needs.\n\n### Incorrect\n```typescript\n// src/routes/users/+page.server.ts\nimport { db } from '$lib/server/db';\n\nexport async function load() {\n  // Fetches EVERYTHING including password_hash, api_tokens, internal_notes\n  const users = await db\n    .selectFrom('users')\n    .selectAll()\n    .execute();\n\n  // Even if you only display name and avatar, all data is:\n  // 1. Fetched from database (slow)\n  // 2. Transferred over network (wasteful)\n  // 3. Serialized to the client (security risk!)\n  return { users };\n}\n```\nThe `password_hash` and `api_tokens` columns are now in your page data, potentially visible in browser devtools or leaked through SSR.\n\n### Correct\n```typescript\n// src/routes/users/+page.server.ts\nimport { db } from '$lib/server/db';\n\nexport async function load() {\n  // Select only what the UI needs\n  const users = await db\n    .selectFrom('users')\n    .select(['id', 'name', 'avatar_url', 'role', 'created_at'])\n    .execute();\n\n  return { users };\n}\n\n// For detail pages, select more but still not everything\n// src/routes/users/[id]/+page.server.ts\nexport async function load({ params }) {\n  const user = await db\n    .selectFrom('users')\n    .select(['id', 'name', 'avatar_url', 'bio', 'website', 'role', 'created_at'])\n    .where('id', '=', params.id)\n    .executeTakeFirst();\n\n  if (!user) throw error(404, 'User not found');\n  return { user };\n}\n```\nExplicit column selection documents your data requirements, enables database query optimization through covering indexes, and ensures sensitive columns never leave the server. Create helper functions or views for common column sets.\n\n### Reference\n- [Kysely Select Documentation](https://kysely.dev/docs/examples/select)\n- [Database Query Optimization Best Practices](https://use-the-index-luke.com/sql/select)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/kysely/transactions-actions.md": "---\ntitle: Use Transactions in Form Actions for Data Integrity\nimpact: HIGH\nimpactDescription: \"Multiple queries without transactions can leave data in inconsistent state on partial failures\"\ntags: kysely, transactions, form-actions, sveltekit, data-integrity\n---\n\n## Use Transactions in Form Actions for Data Integrity\n\n**Impact: HIGH** — Multiple queries without transactions can leave data in inconsistent state on partial failures\n\nWhen a form action performs multiple database writes, a failure partway through leaves your data inconsistent. For example, if you create an order but fail to create the order items, you have an orphaned order. Wrap related writes in `db.transaction()` to ensure atomicity: either all operations succeed, or none do.\n\n### Incorrect\n```typescript\n// src/routes/checkout/+page.server.ts\nimport { db } from '$lib/server/db';\nimport { fail } from '@sveltejs/kit';\n\nexport const actions = {\n  checkout: async ({ request, locals }) => {\n    const formData = await request.formData();\n    const items = JSON.parse(formData.get('items') as string);\n\n    // Create order\n    const order = await db\n      .insertInto('orders')\n      .values({ user_id: locals.user.id, status: 'pending' })\n      .returningAll()\n      .executeTakeFirstOrThrow();\n\n    // If this fails, we have an orphaned order!\n    for (const item of items) {\n      await db\n        .insertInto('order_items')\n        .values({ order_id: order.id, product_id: item.id, quantity: item.qty })\n        .execute();\n    }\n\n    // If this fails, order exists but inventory isn't updated!\n    await db\n      .updateTable('products')\n      .set((eb) => ({ stock: eb('stock', '-', items.reduce((s, i) => s + i.qty, 0)) }))\n      .where('id', 'in', items.map((i) => i.id))\n      .execute();\n\n    return { success: true };\n  }\n};\n```\nIf the inventory update fails, you have an order with items but incorrect stock levels.\n\n### Correct\n```typescript\n// src/routes/checkout/+page.server.ts\nimport { db } from '$lib/server/db';\nimport { fail } from '@sveltejs/kit';\n\nexport const actions = {\n  checkout: async ({ request, locals }) => {\n    const formData = await request.formData();\n    const items = JSON.parse(formData.get('items') as string);\n\n    try {\n      const order = await db.transaction().execute(async (trx) => {\n        // All operations use the transaction connection\n        const order = await trx\n          .insertInto('orders')\n          .values({ user_id: locals.user.id, status: 'pending' })\n          .returningAll()\n          .executeTakeFirstOrThrow();\n\n        await trx\n          .insertInto('order_items')\n          .values(\n            items.map((item) => ({\n              order_id: order.id,\n              product_id: item.id,\n              quantity: item.qty\n            }))\n          )\n          .execute();\n\n        // Update inventory atomically\n        for (const item of items) {\n          await trx\n            .updateTable('products')\n            .set((eb) => ({ stock: eb('stock', '-', item.qty) }))\n            .where('id', '=', item.id)\n            .execute();\n        }\n\n        return order;\n      });\n\n      return { success: true, orderId: order.id };\n    } catch (error) {\n      // Transaction automatically rolled back - no orphaned data\n      return fail(500, { message: 'Checkout failed. Please try again.' });\n    }\n  }\n};\n```\nIf any query fails, the entire transaction rolls back. The database remains consistent, and you can safely retry without cleanup.\n\n### Reference\n- [Kysely Transactions Documentation](https://kysely.dev/docs/examples/transactions)\n- [SvelteKit Form Actions](https://kit.svelte.dev/docs/form-actions)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/kysely/type-safe-queries.md": "---\ntitle: Generate Types from Database Schema\nimpact: HIGH\nimpactDescription: \"Manual type definitions drift from actual schema, causing runtime errors and false type safety\"\ntags: kysely, typescript, codegen, types, database\n---\n\n## Generate Types from Database Schema\n\n**Impact: HIGH** — Manual type definitions drift from actual schema, causing runtime errors and false type safety\n\nKysely's power comes from type-safe queries, but only if your TypeScript types match your actual database schema. Manually typing your database is error-prone and quickly becomes outdated after migrations. Use `kysely-codegen` to introspect your database and generate accurate types automatically.\n\n### Incorrect\n```typescript\n// src/lib/server/db.ts\n// Manually defined types - WILL drift from reality\ninterface Database {\n  users: {\n    id: number;\n    name: string;\n    email: string;\n    // Forgot to add created_at after migration!\n    // Wrong type: should be string | null\n    bio: string;\n  };\n  posts: {\n    id: number;\n    title: string;\n    // Typo: actual column is 'author_id'\n    user_id: number;\n  };\n}\n```\nTypeScript thinks `user_id` exists but the actual column is `author_id`. This compiles fine but crashes at runtime.\n\n### Correct\n```typescript\n// Generate types from your database schema\n// Run: npx kysely-codegen --out-file src/lib/server/db.generated.ts\n\n// src/lib/server/db.ts\nimport { Kysely, PostgresDialect } from 'kysely';\nimport type { DB } from './db.generated';\nimport { Pool } from '@neondatabase/serverless';\n\nexport const db = new Kysely<DB>({\n  dialect: new PostgresDialect({\n    pool: new Pool({ connectionString: process.env.DATABASE_URL })\n  })\n});\n\n// Usage - types are accurate and auto-complete works\nconst user = await db\n  .selectFrom('users')\n  .select(['id', 'name', 'email', 'created_at']) // All real columns\n  .where('id', '=', userId)\n  .executeTakeFirst();\n```\nAdd `kysely-codegen` to your CI/CD pipeline or post-migration hooks to keep types in sync. The generated types include nullability, exact column names, and proper TypeScript types for each database type.\n\n### Reference\n- [kysely-codegen on GitHub](https://github.com/RobinBlomberg/kysely-codegen)\n- [Kysely Type Safety Guide](https://kysely.dev/docs/getting-started#types)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/lucide-svelte/accessibility-labels.md": "---\ntitle: Add Accessible Labels to Meaningful Icons\nimpact: MEDIUM\nimpactDescription: \"Icons without proper labels are invisible to screen reader users\"\ntags: lucide-svelte, accessibility, a11y, screen-readers\n---\n\n## Add Accessible Labels to Meaningful Icons\n\n**Impact: MEDIUM** — Icons without proper labels are invisible to screen reader users\n\nIcons fall into two categories: decorative (purely visual) and meaningful (convey information or actions). Decorative icons should be hidden from assistive technology with `aria-hidden=\"true\"`. Meaningful icons need accessible labels via `aria-label` or visually hidden text.\n\n### Incorrect\n```svelte\n<script>\n  import { Trash } from '@lucide/svelte';\n  import { Check } from '@lucide/svelte';\n</script>\n\n<!-- Icon-only button with no accessible name -->\n<button>\n  <Trash />\n</button>\n\n<!-- Status icon with no context -->\n<Check class=\"text-green-500\" />\n```\nScreen reader users cannot understand what the button does or what the status icon means.\n\n### Correct\n```svelte\n<script>\n  import { Trash } from '@lucide/svelte';\n  import { Check } from '@lucide/svelte';\n  import { Search } from '@lucide/svelte';\n</script>\n\n<!-- Icon-only button with aria-label -->\n<button aria-label=\"Delete item\">\n  <Trash aria-hidden=\"true\" />\n</button>\n\n<!-- Status icon with visually hidden text -->\n<span class=\"inline-flex items-center gap-1\">\n  <Check class=\"text-green-500\" aria-hidden=\"true\" />\n  <span class=\"sr-only\">Completed</span>\n</span>\n\n<!-- Decorative icon alongside visible text -->\n<button>\n  <Search aria-hidden=\"true\" />\n  <span>Search</span>\n</button>\n```\nDecorative icons are hidden from screen readers while meaningful icons have clear, accessible labels.\n\n### Reference\n- [WAI-ARIA: Decorative Images](https://www.w3.org/WAI/tutorials/images/decorative/)\n- [Lucide Svelte Accessibility](https://lucide.dev/guide/packages/lucide-svelte#accessibility)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/lucide-svelte/consistent-sizing.md": "---\ntitle: Use Consistent Icon Sizing with Props\nimpact: MEDIUM\nimpactDescription: \"Arbitrary CSS sizing creates visual inconsistency across the UI\"\ntags: lucide-svelte, styling, design-system, consistency\n---\n\n## Use Consistent Icon Sizing with Props\n\n**Impact: MEDIUM** — Arbitrary CSS sizing creates visual inconsistency across the UI\n\nLucide icons default to 24px and accept a `size` prop for consistent sizing. Using arbitrary CSS values like `width: 18px` leads to inconsistent icon sizes across your application. Stick to standard sizes (16, 20, 24, 32, etc.) using the size prop.\n\n### Incorrect\n```svelte\n<script>\n  import { Menu } from '@lucide/svelte';\n</script>\n\n<Menu class=\"w-[18px] h-[18px]\" />\n<Menu style=\"width: 22px; height: 22px;\" />\n```\nArbitrary pixel values create visual inconsistency and make it harder to maintain a cohesive design system.\n\n### Correct\n```svelte\n<script>\n  import { Menu } from '@lucide/svelte';\n  import { Search } from '@lucide/svelte';\n  import { Settings } from '@lucide/svelte';\n</script>\n\n<!-- Small icons (inline text, compact UI) -->\n<Menu size={16} />\n\n<!-- Default size (most use cases) -->\n<Search size={24} />\n\n<!-- Large icons (headers, hero sections) -->\n<Settings size={32} />\n```\nUsing the size prop with standard values ensures visual consistency and makes sizing decisions intentional and predictable.\n\n### Reference\n- [Lucide Svelte Props](https://lucide.dev/guide/packages/lucide-svelte#props)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/lucide-svelte/tree-shake-imports.md": "---\ntitle: Import Icons Individually for Tree Shaking\nimpact: HIGH\nimpactDescription: \"Importing from barrel files bundles the entire icon library\"\ntags: lucide-svelte, performance, tree-shaking, bundle-size\n---\n\n## Import Icons Individually for Tree Shaking\n\n**Impact: HIGH** — Importing from barrel files bundles the entire icon library\n\nLucide contains thousands of icons. Importing from the barrel file or using wildcard imports prevents tree shaking, adding hundreds of kilobytes to your bundle. Always import each icon individually from its direct path.\n\n### Incorrect\n```svelte\n<script>\n  import * as icons from '@lucide/svelte';\n  import { Menu, X, Search } from '@lucide/svelte/icons';\n</script>\n\n<icons.Menu />\n<Menu />\n```\nWildcard imports and barrel file imports include the entire icon library in your bundle, even if you only use a few icons.\n\n### Correct\n```svelte\n<script>\n  import { Menu } from '@lucide/svelte';\n  import { X } from '@lucide/svelte';\n  import { Search } from '@lucide/svelte';\n</script>\n\n<Menu />\n<X />\n<Search />\n```\nIndividual imports allow bundlers to tree shake unused icons, keeping your bundle size minimal.\n\n### Reference\n- [Lucide Svelte Documentation](https://lucide.dev/guide/packages/lucide-svelte)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/shadcn-svelte/accessible-patterns.md": "---\ntitle: Maintain Accessibility When Customizing\nimpact: MEDIUM\nimpactDescription: \"Breaking accessibility excludes users and may violate legal requirements\"\ntags: shadcn-svelte, accessibility, a11y, bits-ui, aria\n---\n\n## Maintain Accessibility When Customizing\n\n**Impact: MEDIUM** — Breaking accessibility excludes users and may violate legal requirements\n\nshadcn-svelte components inherit their accessibility from Bits UI, which implements WAI-ARIA patterns correctly. This includes focus management, keyboard navigation, screen reader announcements, and proper ARIA attributes. When customizing components, it's easy to accidentally break these features. Always test with keyboard-only navigation and screen readers after modifications.\n\n### Incorrect\n```svelte\n<script lang=\"ts\">\n  import * as Dialog from \"$lib/components/ui/dialog\";\n\n  let isOpen = $state(false);\n</script>\n\n<!-- Breaking accessibility by replacing triggers with non-semantic elements -->\n<div onclick={() => isOpen = true} class=\"cursor-pointer\">\n  Open Dialog\n</div>\n\n<!-- Using custom close that bypasses built-in keyboard handling -->\n<Dialog.Root bind:open={isOpen}>\n  <Dialog.Content>\n    <span onclick={() => isOpen = false} class=\"close-btn\">X</span>\n    <!-- Content without proper heading structure -->\n    <div class=\"title\">Settings</div>\n    <p>Configure your preferences</p>\n  </Dialog.Content>\n</Dialog.Root>\n\n<!-- Breaking Select by intercepting events incorrectly -->\n<script lang=\"ts\">\n  import * as Select from \"$lib/components/ui/select\";\n</script>\n\n<div onkeydown={(e) => e.stopPropagation()}>\n  <Select.Root>\n    <!-- Keyboard navigation now broken -->\n    <Select.Trigger>Choose option</Select.Trigger>\n    <Select.Content>\n      <Select.Item value=\"1\">Option 1</Select.Item>\n    </Select.Content>\n  </Select.Root>\n</div>\n```\nUsing `<div>` instead of `<button>` removes keyboard focusability and screen reader semantics. Stopping event propagation breaks built-in keyboard handlers. Missing Dialog.Title means screen readers can't announce the dialog purpose.\n\n### Correct\n```svelte\n<script lang=\"ts\">\n  import * as Dialog from \"$lib/components/ui/dialog\";\n  import { Button } from \"$lib/components/ui/button\";\n  import X from \"lucide-svelte/icons/x\";\n\n  let isOpen = $state(false);\n</script>\n\n<!-- Use proper trigger component or button element -->\n<Dialog.Root bind:open={isOpen}>\n  <Dialog.Trigger asChild let:builder>\n    <Button builders={[builder]}>Open Dialog</Button>\n  </Dialog.Trigger>\n\n  <Dialog.Content>\n    <!-- Always include Title for screen readers (can be visually hidden) -->\n    <Dialog.Header>\n      <Dialog.Title>Settings</Dialog.Title>\n      <Dialog.Description>\n        Configure your account preferences below.\n      </Dialog.Description>\n    </Dialog.Header>\n\n    <!-- Use the built-in Close component for proper handling -->\n    <Dialog.Close class=\"absolute right-4 top-4 rounded-sm opacity-70 hover:opacity-100\">\n      <X class=\"h-4 w-4\" />\n      <span class=\"sr-only\">Close</span>\n    </Dialog.Close>\n\n    <!-- Form content -->\n  </Dialog.Content>\n</Dialog.Root>\n\n<!-- For custom interactive elements, ensure proper semantics -->\n<script lang=\"ts\">\n  import * as Select from \"$lib/components/ui/select\";\n</script>\n\n<Select.Root>\n  <Select.Trigger>\n    <Select.Value placeholder=\"Choose option\" />\n  </Select.Trigger>\n  <Select.Content>\n    <!-- Group related items with accessible labels -->\n    <Select.Group>\n      <Select.Label>Fruits</Select.Label>\n      <Select.Item value=\"apple\">Apple</Select.Item>\n      <Select.Item value=\"banana\">Banana</Select.Item>\n    </Select.Group>\n    <Select.Separator />\n    <Select.Group>\n      <Select.Label>Vegetables</Select.Label>\n      <Select.Item value=\"carrot\">Carrot</Select.Item>\n      <!-- Disabled items still announced to screen readers -->\n      <Select.Item value=\"spinach\" disabled>Spinach (out of stock)</Select.Item>\n    </Select.Group>\n  </Select.Content>\n</Select.Root>\n\n<!-- Screen reader only text for icon-only buttons -->\n<Button variant=\"outline\" size=\"icon\" aria-label=\"Toggle theme\">\n  <Sun class=\"h-4 w-4\" />\n  <span class=\"sr-only\">Toggle theme</span>\n</Button>\n```\nUse the built-in Dialog.Title, Dialog.Description, and Dialog.Close components - they handle ARIA attributes automatically. Never replace `<button>` elements with `<div>` or `<span>`. Use `sr-only` class for screen reader text on icon-only buttons. Test with Tab key navigation and screen readers (VoiceOver, NVDA) after any customization.\n\n### Reference\n- [Bits UI Accessibility](https://www.bits-ui.com/docs/introduction#accessibility)\n- [WAI-ARIA Authoring Practices](https://www.w3.org/WAI/ARIA/apg/)\n- [shadcn-svelte Components](https://www.shadcn-svelte.com/docs/components/dialog)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/shadcn-svelte/bits-ui-primitives.md": "---\ntitle: Understand Bits UI Primitives for Customization\nimpact: HIGH\nimpactDescription: \"Missing the Bits UI layer limits customization options and leads to workarounds\"\ntags: shadcn-svelte, bits-ui, primitives, customization\n---\n\n## Understand Bits UI Primitives for Customization\n\n**Impact: HIGH** — Missing the Bits UI layer limits customization options and leads to workarounds\n\nshadcn-svelte components are styled wrappers around Bits UI primitives. Bits UI provides the unstyled, accessible, headless components while shadcn adds the design system. When you need behavior that shadcn doesn't expose, drop down to Bits UI directly. Understanding this layered architecture unlocks deep customization without sacrificing accessibility.\n\n### Incorrect\n```svelte\n<script lang=\"ts\">\n  import { Dialog } from \"$lib/components/ui/dialog\";\n\n  let isOpen = $state(false);\n</script>\n\n<!-- Trying to hack shadcn Dialog for custom behavior -->\n<Dialog bind:open={isOpen}>\n  <!-- Struggling to add custom close behavior, animations, or portal targets -->\n  <!-- Wrapping in divs and adding event listeners that conflict with the component -->\n  <div on:click|stopPropagation={() => { /* hacky workarounds */ }}>\n    <!-- ... -->\n  </div>\n</Dialog>\n\n<!-- Or rebuilding from scratch, losing accessibility -->\n<div class=\"custom-dialog\" class:open={isOpen}>\n  <div class=\"backdrop\" onclick={() => isOpen = false}></div>\n  <div class=\"content\">\n    <!-- Missing focus trap, aria attributes, keyboard handling -->\n  </div>\n</div>\n```\nHacking shadcn components or rebuilding from scratch loses the accessibility features and creates brittle code. You either fight the abstraction or lose important functionality.\n\n### Correct\n```svelte\n<script lang=\"ts\">\n  import { Dialog as DialogPrimitive } from \"bits-ui\";\n  import { cn } from \"$lib/utils\";\n\n  let isOpen = $state(false);\n</script>\n\n<!-- Use Bits UI directly for full control while keeping accessibility -->\n<DialogPrimitive.Root bind:open={isOpen}>\n  <DialogPrimitive.Trigger asChild let:builder>\n    <button use:builder.action {...builder}>Open Custom Dialog</button>\n  </DialogPrimitive.Trigger>\n\n  <DialogPrimitive.Portal>\n    <DialogPrimitive.Overlay\n      class={cn(\n        \"fixed inset-0 z-50 bg-black/80\",\n        \"data-[state=open]:animate-in data-[state=closed]:animate-out\"\n      )}\n    />\n    <DialogPrimitive.Content\n      class={cn(\n        \"fixed left-1/2 top-1/2 z-50 -translate-x-1/2 -translate-y-1/2\",\n        \"w-full max-w-lg rounded-lg bg-background p-6 shadow-lg\"\n      )}\n      onOpenAutoFocus={(e) => {\n        // Custom focus behavior\n        e.preventDefault();\n        document.getElementById('custom-input')?.focus();\n      }}\n      onInteractOutside={(e) => {\n        // Custom outside click behavior\n        if (hasUnsavedChanges) e.preventDefault();\n      }}\n    >\n      <input id=\"custom-input\" placeholder=\"Custom focus target\" />\n      <DialogPrimitive.Close>Close</DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPrimitive.Portal>\n</DialogPrimitive.Root>\n\n<!-- For simpler cases, use shadcn and just import Bits types for props -->\n<script lang=\"ts\">\n  import * as Dialog from \"$lib/components/ui/dialog\";\n  import type { Dialog as DialogPrimitive } from \"bits-ui\";\n\n  // You can pass Bits UI props through shadcn components\n</script>\n```\nWhen shadcn's abstraction doesn't fit, use Bits UI primitives directly. You get full control over behavior while maintaining accessibility (focus management, keyboard navigation, ARIA attributes). Apply shadcn-style classes to match your design system.\n\n### Reference\n- [Bits UI Documentation](https://www.bits-ui.com/docs/introduction)\n- [shadcn-svelte Component Source](https://github.com/huntabyte/shadcn-svelte/tree/main/apps/www/src/lib/components/ui)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/shadcn-svelte/compose-dont-override.md": "---\ntitle: Compose Components, Don't Override Styles\nimpact: HIGH\nimpactDescription: \"Overriding shadcn styles leads to maintenance nightmares and breaks component updates\"\ntags: shadcn-svelte, styling, composition, tailwind\n---\n\n## Compose Components, Don't Override Styles\n\n**Impact: HIGH** — Overriding shadcn styles leads to maintenance nightmares and breaks component updates\n\nshadcn-svelte components are designed as building blocks meant to be composed together, not restyled from the outside. The components live in your codebase (`$lib/components/ui`) so you own them, but the pattern is to modify the source files directly when needed, or use the `cn()` utility for conditional class merging. Fighting the design system with `!important` or style overrides creates technical debt and breaks when components update.\n\n### Incorrect\n```svelte\n<script lang=\"ts\">\n  import { Button } from \"$lib/components/ui/button\";\n</script>\n\n<!-- Fighting the component with overrides -->\n<Button style=\"background-color: red !important; padding: 2rem !important;\">\n  Custom Button\n</Button>\n\n<!-- Or using global CSS to override -->\n<Button class=\"my-custom-button\">\n  Custom Button\n</Button>\n\n<style>\n  :global(.my-custom-button) {\n    background-color: red !important;\n    border-radius: 0 !important;\n  }\n</style>\n```\nUsing `!important` and style overrides fights against the component's design. This approach breaks easily with updates, creates specificity wars, and makes the codebase harder to maintain.\n\n### Correct\n```svelte\n<script lang=\"ts\">\n  import { Button } from \"$lib/components/ui/button\";\n  import { cn } from \"$lib/utils\";\n\n  let { variant = \"default\", size = \"default\", class: className } = $props();\n</script>\n\n<!-- Use built-in variants when possible -->\n<Button variant=\"destructive\" size=\"lg\">\n  Delete Item\n</Button>\n\n<!-- Use cn() for conditional/additional classes that work WITH the design -->\n<Button class={cn(\"rounded-none\", className)}>\n  Square Button\n</Button>\n\n<!-- For truly custom needs, create a new variant in the component source -->\n<!-- In $lib/components/ui/button/index.ts: -->\n<!-- Add: custom: \"bg-gradient-to-r from-purple-500 to-pink-500 text-white\" -->\n<Button variant=\"custom\">\n  Gradient Button\n</Button>\n```\nUse the component's built-in variants and the `cn()` utility for composing classes. For significant customizations, modify the source component directly since you own it. This keeps styles predictable and maintainable.\n\n### Reference\n- [shadcn-svelte Documentation](https://www.shadcn-svelte.com/docs)\n- [cn() Utility Pattern](https://www.shadcn-svelte.com/docs/installation#add-a-cn-helper)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/shadcn-svelte/dark-mode-setup.md": "---\ntitle: Set Up Dark Mode with Mode Watcher\nimpact: MEDIUM\nimpactDescription: \"Improper dark mode implementation causes flash of wrong theme on page load\"\ntags: shadcn-svelte, dark-mode, theming, ssr, mode-watcher\n---\n\n## Set Up Dark Mode with Mode Watcher\n\n**Impact: MEDIUM** — Improper dark mode implementation causes flash of wrong theme on page load\n\nshadcn-svelte uses CSS variables and Tailwind's dark mode class strategy for theming. The challenge is preventing a flash of the wrong theme during SSR hydration. mode-watcher solves this by injecting a blocking script that sets the theme before the page renders. Without it, users see a jarring flash as the theme switches after JavaScript loads.\n\n### Incorrect\n```svelte\n<!-- +layout.svelte -->\n<script lang=\"ts\">\n  import { onMount } from \"svelte\";\n  import { browser } from \"$app/environment\";\n\n  let theme = $state(\"light\");\n\n  onMount(() => {\n    // This runs after hydration - causes flash!\n    const stored = localStorage.getItem(\"theme\");\n    const prefersDark = window.matchMedia(\"(prefers-color-scheme: dark)\").matches;\n    theme = stored || (prefersDark ? \"dark\" : \"light\");\n    document.documentElement.classList.toggle(\"dark\", theme === \"dark\");\n  });\n\n  function toggleTheme() {\n    theme = theme === \"light\" ? \"dark\" : \"light\";\n    localStorage.setItem(\"theme\", theme);\n    document.documentElement.classList.toggle(\"dark\", theme === \"dark\");\n  }\n</script>\n\n<button onclick={toggleTheme}>\n  {theme === \"light\" ? \"Dark\" : \"Light\"} Mode\n</button>\n<slot />\n```\nSetting the theme in `onMount` means it runs after the page renders with the wrong theme. Users see a flash from light to dark (or vice versa) which is jarring and unprofessional.\n\n### Correct\n```svelte\n<!-- +layout.svelte -->\n<script lang=\"ts\">\n  import { ModeWatcher } from \"mode-watcher\";\n  import \"../app.css\";\n\n  let { children } = $props();\n</script>\n\n<!-- ModeWatcher injects a blocking script to prevent flash -->\n<ModeWatcher />\n{@render children()}\n```\n\n```svelte\n<!-- ThemeToggle.svelte -->\n<script lang=\"ts\">\n  import { toggleMode, mode } from \"mode-watcher\";\n  import { Button } from \"$lib/components/ui/button\";\n  import Sun from \"lucide-svelte/icons/sun\";\n  import Moon from \"lucide-svelte/icons/moon\";\n</script>\n\n<Button onclick={toggleMode} variant=\"outline\" size=\"icon\">\n  {#if $mode === \"light\"}\n    <Sun class=\"h-5 w-5\" />\n    <span class=\"sr-only\">Switch to dark mode</span>\n  {:else}\n    <Moon class=\"h-5 w-5\" />\n    <span class=\"sr-only\">Switch to light mode</span>\n  {/if}\n</Button>\n```\n\n```css\n/* app.css - shadcn theme variables */\n@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n  :root {\n    --background: 0 0% 100%;\n    --foreground: 222.2 84% 4.9%;\n    /* ... other light mode variables */\n  }\n\n  .dark {\n    --background: 222.2 84% 4.9%;\n    --foreground: 210 40% 98%;\n    /* ... other dark mode variables */\n  }\n}\n```\n\n```typescript\n// tailwind.config.ts\nexport default {\n  darkMode: [\"class\"],\n  // ... rest of config\n};\n```\nmode-watcher injects a tiny blocking script in the `<head>` that reads the user's preference and sets the `dark` class before any content renders. This eliminates the flash entirely and respects both localStorage preferences and system settings.\n\n### Reference\n- [mode-watcher Documentation](https://github.com/svecosystem/mode-watcher)\n- [shadcn-svelte Dark Mode](https://www.shadcn-svelte.com/docs/dark-mode)\n",
        "sveltekit/skills/sveltekit-builder/references/third-party/shadcn-svelte/form-integration.md": "---\ntitle: Integrate Forms with Superforms\nimpact: HIGH\nimpactDescription: \"Improper form integration loses type safety and creates inconsistent validation UX\"\ntags: shadcn-svelte, forms, superforms, formsnap, validation\n---\n\n## Integrate Forms with Superforms\n\n**Impact: HIGH** — Improper form integration loses type safety and creates inconsistent validation UX\n\nshadcn-svelte's form components are designed to work with Superforms and Formsnap for type-safe, accessible form handling. This combination provides Zod schema validation, server-side form actions, and automatic error handling. Using shadcn inputs without this integration means manually wiring up error states, losing type inference, and creating inconsistent validation experiences.\n\n### Incorrect\n```svelte\n<script lang=\"ts\">\n  import { Input } from \"$lib/components/ui/input\";\n  import { Button } from \"$lib/components/ui/button\";\n  import { Label } from \"$lib/components/ui/label\";\n\n  let email = $state(\"\");\n  let password = $state(\"\");\n  let errors = $state<Record<string, string>>({});\n\n  async function handleSubmit() {\n    errors = {};\n    // Manual validation - no type safety, easy to miss fields\n    if (!email.includes(\"@\")) errors.email = \"Invalid email\";\n    if (password.length < 8) errors.password = \"Too short\";\n\n    if (Object.keys(errors).length === 0) {\n      // Manual form submission\n      const res = await fetch(\"/api/login\", {\n        method: \"POST\",\n        body: JSON.stringify({ email, password })\n      });\n    }\n  }\n</script>\n\n<form onsubmit={handleSubmit}>\n  <Label for=\"email\">Email</Label>\n  <Input id=\"email\" type=\"email\" bind:value={email} />\n  {#if errors.email}<span class=\"text-red-500\">{errors.email}</span>{/if}\n\n  <Label for=\"password\">Password</Label>\n  <Input id=\"password\" type=\"password\" bind:value={password} />\n  {#if errors.password}<span class=\"text-red-500\">{errors.password}</span>{/if}\n\n  <Button type=\"submit\">Login</Button>\n</form>\n```\nManual form handling loses type safety, requires repetitive error display code, and doesn't integrate with SvelteKit's form actions. Error states aren't properly associated with inputs for accessibility.\n\n### Correct\n```svelte\n<script lang=\"ts\">\n  import * as Form from \"$lib/components/ui/form\";\n  import { Input } from \"$lib/components/ui/input\";\n  import { Button } from \"$lib/components/ui/button\";\n  import { superForm } from \"sveltekit-superforms\";\n  import { zodClient } from \"sveltekit-superforms/adapters\";\n  import { loginSchema } from \"./schema\"; // Zod schema\n\n  let { data } = $props(); // From +page.server.ts load function\n\n  const form = superForm(data.form, {\n    validators: zodClient(loginSchema),\n  });\n\n  const { form: formData, enhance } = form;\n</script>\n\n<form method=\"POST\" use:enhance>\n  <Form.Field {form} name=\"email\">\n    <Form.Control let:attrs>\n      <Form.Label>Email</Form.Label>\n      <Input {...attrs} type=\"email\" bind:value={$formData.email} />\n    </Form.Control>\n    <Form.Description>We'll never share your email.</Form.Description>\n    <Form.FieldErrors />\n  </Form.Field>\n\n  <Form.Field {form} name=\"password\">\n    <Form.Control let:attrs>\n      <Form.Label>Password</Form.Label>\n      <Input {...attrs} type=\"password\" bind:value={$formData.password} />\n    </Form.Control>\n    <Form.FieldErrors />\n  </Form.Field>\n\n  <Button type=\"submit\">Login</Button>\n</form>\n```\n\n```typescript\n// schema.ts\nimport { z } from \"zod\";\n\nexport const loginSchema = z.object({\n  email: z.string().email(\"Please enter a valid email\"),\n  password: z.string().min(8, \"Password must be at least 8 characters\"),\n});\n\n// +page.server.ts\nimport { superValidate, message } from \"sveltekit-superforms\";\nimport { zod } from \"sveltekit-superforms/adapters\";\nimport { loginSchema } from \"./schema\";\nimport { fail } from \"@sveltejs/kit\";\n\nexport const load = async () => {\n  return { form: await superValidate(zod(loginSchema)) };\n};\n\nexport const actions = {\n  default: async ({ request }) => {\n    const form = await superValidate(request, zod(loginSchema));\n    if (!form.valid) return fail(400, { form });\n\n    // Handle login...\n    return { form };\n  },\n};\n```\nSuperforms + Formsnap provides type-safe validation, automatic error handling, progressive enhancement, and proper accessibility. Form.Control automatically wires up aria-describedby for errors, and Form.FieldErrors displays validation messages consistently.\n\n### Reference\n- [Formsnap Documentation](https://www.formsnap.dev/)\n- [Superforms Documentation](https://superforms.rocks/)\n- [shadcn-svelte Form Components](https://www.shadcn-svelte.com/docs/components/form)\n",
        "ux/.claude-plugin/plugin.json": "{\n  \"name\": \"ux\",\n  \"description\": \"Framework-agnostic UX patterns for building satisfying user interfaces\",\n  \"version\": \"0.1.0\",\n  \"author\": {\n    \"name\": \"rosa\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\"ux\", \"user-experience\", \"feedback\", \"flow\", \"progressive-disclosure\", \"trust\", \"psychology\"]\n}\n",
        "ux/README.md": "# UX Plugin\n\nFramework-agnostic UX patterns for building satisfying user interfaces.\n\n## Skills\n\n| Skill | Use When |\n|-------|----------|\n| `feedback-design` | Building loading states, progress bars, error messages, success confirmations |\n| `flow-optimization` | Designing workflows, protecting user focus, reducing interruptions |\n| `progressive-disclosure` | Complex UIs, settings panels, balancing novice/expert needs |\n| `trust-and-recovery` | Error handling, confirmations, undo functionality |\n| `psychology-foundations` | Understanding *why* patterns work (reference material) |\n\n## Evidence Tiers\n\nAll claims in these skills are tagged with evidence levels:\n\n```\n[Research]   — Peer-reviewed studies, controlled experiments\n[Expert]     — Nielsen Norman Group, recognized UX authorities\n[Case Study] — Documented examples from major products (Google, GOV.UK)\n[Convention] — Industry practice, limited formal validation\n```\n\n**Multiple tags** indicate stronger backing:\n- `[Research][Expert]` — Validated in studies AND recommended by authorities\n- `[Research — Mixed]` — Studies exist but findings are inconsistent\n\n**Caveats** are noted inline:\n- \"Caution:\" flags limitations or mixed evidence\n- \"Nuance:\" indicates something partially true or context-dependent\n\n## Myths & Debunked Patterns\n\nEach skill includes a **Myths & Debunked Patterns** section documenting commonly-believed UX \"rules\" that research has disproven or complicated:\n\n- **Three-click rule** — Debunked (progressive-disclosure)\n- **Above the fold** — Nuanced, not absolute (progressive-disclosure)\n- **Hamburger menus** — Trade-offs documented (flow-optimization)\n- **Carousels** — Generally ineffective (feedback-design)\n\nThese are kept in the skills so AI assistants know what NOT to do, even if they've encountered these patterns in training data.\n\n## For AI Coding Assistants\n\nWhen building UIs, use these skills to:\n\n1. **Check evidence before implementing** — Is this pattern research-backed or just convention?\n2. **Avoid debunked patterns** — Don't implement three-click rules, auto-rotating carousels, etc.\n3. **Understand trade-offs** — Hamburger menus aren't \"bad,\" they have documented costs\n4. **Reference psychology** — When explaining decisions, cite the underlying research\n\n## Sources\n\nPrimary sources referenced across skills:\n\n- Nielsen Norman Group (nngroup.com)\n- Kahneman & Tversky — Prospect Theory, Peak-End Rule\n- Csikszentmihalyi — Flow State\n- Sweller — Cognitive Load Theory\n- Laws of UX (lawsofux.com)\n",
        "ux/skills/feedback-design/SKILL.md": "---\nname: feedback-design\ndescription: Use when building loading states, progress indicators, success confirmations, or error messages. Covers feedback loops and patterns that feel satisfying.\n---\n\n# Feedback Design\n\nFeedback is how software communicates with users. Good feedback creates anticipation, confirms actions, and guides recovery.\n\n## Evidence Tiers\n\n```\n[Research]   — Peer-reviewed studies, controlled experiments\n[Expert]     — Nielsen Norman Group, recognized UX authorities\n[Case Study] — Documented examples from major products\n[Convention] — Industry practice, limited formal validation\n\nMultiple tags = stronger evidence: [Research][Expert]\nMixed findings noted as: [Research — Mixed]\n```\n\n---\n\n## Response Time Thresholds\n\n**[Research][Expert]** Jakob Nielsen, based on Miller (1968), established response time limits in *Usability Engineering* (1993):\n\n| Threshold | User Perception |\n|-----------|-----------------|\n| **0.1 sec** | Feels instantaneous — direct manipulation illusion |\n| **1.0 sec** | Noticeable delay — user stays focused but notices wait |\n| **10 sec** | Attention limit — user needs progress indicator or will leave |\n\nThese thresholds are based on human perceptual abilities and remain foundational in interaction design.\n\n**Source:** [Nielsen Norman Group - Response Times](https://www.nngroup.com/articles/response-times-3-important-limits/)\n\n---\n\n## Progress Indicators\n\n**[Research]** Dopamine research (Schultz, Sapolsky) shows the brain releases dopamine during *anticipation* of reward, not after. Progress indicators work because they create anticipation.\n\n### Pattern: Progress Over Spinners\n\n**Weak feedback:**\n```\nLoading...\n```\n\n**Strong feedback:**\n```\nUploading photo 3 of 7...\n████████░░░░░░░░ 47%\n```\n\nProgress creates anticipation. Spinners create uncertainty.\n\n---\n\n## Skeleton Screens\n\n**[Research — Mixed Results]** Skeleton screen research shows inconsistent findings:\n\n- Mejtoft et al. (2018) found skeleton screens scored higher on perceived speed\n- Viget's study (136 participants) found skeleton screens **performed worse** than spinners — users took longer and evaluated wait time more negatively\n\n**When skeletons may help:**\n- Familiar interfaces where users know what to expect\n- Very short wait times\n- Slow, steady animation (not rapid motion)\n\n**When spinners may be better:**\n- Novel interfaces\n- Longer wait times\n- Users unfamiliar with the layout\n\n**Source:** [Viget - A Bone to Pick with Skeleton Screens](https://www.viget.com/articles/a-bone-to-pick-with-skeleton-screens/)\n\n---\n\n## Immediate Acknowledgment\n\n**[Expert]** Nielsen Norman and UX practitioners recommend immediate feedback for every user action:\n\n| Timing | Feedback Type |\n|--------|---------------|\n| 0-100ms | Visual state change (button press, hover) |\n| 100ms-1s | Loading indicator if not complete |\n| 1-10s | Progress indicator with status |\n| 10s+ | Explanation + option to cancel |\n\n---\n\n## Success Confirmation\n\n**[Convention]** Acknowledge completion without over-celebrating.\n\n**Patronizing:**\n```\n🎉 Great job! You did it! Your file was uploaded successfully!\n```\n\n**Respectful:**\n```\nFile uploaded. 2.4 MB\n```\n\nUsers need confirmation, not praise. Objective acknowledgment respects user intelligence.\n\n---\n\n## Error Messages\n\n**[Expert]** Nielsen's Heuristic #9: \"Help users recognize, diagnose, and recover from errors.\"\n\nError messages should answer three questions:\n1. **What happened?**\n2. **Why?**\n3. **What can I do now?**\n\n**Useless:**\n```\nError: Something went wrong\n```\n\n**Actionable:**\n```\nUpload failed: File exceeds 10MB limit\n[Compress image] [Choose different file]\n```\n\n**[Research]** Cognitive Load Theory (Sweller, 1988) supports this: vague error messages increase extraneous cognitive load, forcing users to diagnose problems instead of solving them.\n\n**Source:** [Nielsen Norman - Error Message Guidelines](https://www.nngroup.com/articles/error-message-guidelines/)\n\n---\n\n## Optimistic UI\n\n**[Convention]** Update UI immediately, reconcile with server afterward.\n\n```javascript\n// Optimistic: Update UI first\nupdateUI()         // Instant feedback\nsendToServer()     // Background\nhandleFailure()    // Rollback if needed\n\n// Pessimistic: Wait for server\nawait sendToServer()  // User waits\nupdateUI()\n```\n\n**Use when:**\n- Success rate is very high (>99%)\n- Action is reversible\n- Failure can be gracefully handled\n\n**Caution:** No formal research validates optimistic UI. It's practitioner convention based on perceived performance benefits.\n\n---\n\n## Sound and Haptic Feedback\n\n**[Research]** Studies on haptic feedback show tactile sensations can increase engagement (Apple's Taptic Engine research). However, overuse causes habituation.\n\n**[Convention]** Use sparingly:\n- Completion of significant actions\n- Destructive actions requiring attention\n- Errors that need immediate notice\n\n**Avoid for:**\n- Every button tap\n- Routine navigation\n- Background updates\n\n---\n\n## Anti-Patterns With Research\n\n### Carousels / Auto-Rotating Sliders\n\n**Status:** Generally ineffective\n**Evidence:** [Research] — Multiple studies with consistent findings\n\n**What research shows:**\n\n- **Notre Dame study:** 1% click-through rate; 84% of clicks on first slide only\n- **Search Engine Land:** 0.65% CTR across B2B sites\n- **Adobe test:** Removing slider entirely **increased sales 23%**\n- **Eye tracking (NNg):** Users often skip carousels, perceiving them as ads (\"banner blindness\")\n\n**Why they fail:**\n- Auto-rotation moves content before users can read it\n- Users don't trust rotating content (ad-like)\n- Most users see only slide 1\n- Creates \"choice paralysis\" — nothing feels primary\n\n**If you must use a carousel:**\n- Don't auto-rotate (or use 7+ second intervals)\n- Pause on hover/interaction\n- Replace dots with meaningful labels\n- Make first slide count (84% of engagement)\n- Consider if static content would work better\n\n**Better alternatives:**\n- Static hero with clear hierarchy\n- Tabbed content (user-controlled)\n- Scrolling content sections\n\n**Sources:**\n- [Orbit Media - Do Sliders Hurt Websites?](https://www.orbitmedia.com/blog/rotating-sliders-hurt-website/)\n- [Smashing Magazine - Better Carousel UX](https://www.smashingmagazine.com/2022/04/designing-better-carousel-ux/)\n- [Nielsen Norman - Effective Carousels](https://www.nngroup.com/articles/designing-effective-carousels/)\n\n---\n\n## Key Sources\n\n- Nielsen, J. (1993). *Usability Engineering*. Academic Press.\n- Miller, R.B. (1968). Response time in man-computer conversational transactions.\n- Sweller, J. (1988). Cognitive load during problem solving.\n- [Nielsen Norman Group - Response Times](https://www.nngroup.com/articles/response-times-3-important-limits/)\n- [Mejtoft et al. (2018) - Skeleton Screens Study](https://dl.acm.org/doi/10.1145/3232078.3232086)\n- [Viget - Skeleton Screens Research](https://www.viget.com/articles/a-bone-to-pick-with-skeleton-screens/)\n",
        "ux/skills/flow-optimization/SKILL.md": "---\nname: flow-optimization\ndescription: Use when designing interactions, workflows, or interfaces where user focus matters. Covers protecting flow state, reducing interruptions, and creating immersive experiences.\n---\n\n# Flow Optimization\n\nFlow is the state of complete immersion where users lose track of time and feel in control. Protecting it is a design responsibility.\n\n## Evidence Tiers\n\n```\n[Research]   — Peer-reviewed studies, controlled experiments\n[Expert]     — Nielsen Norman Group, recognized UX authorities\n[Case Study] — Documented examples from major products\n[Convention] — Industry practice, limited formal validation\n\nMultiple tags = stronger evidence: [Research][Expert]\nMixed findings noted as: [Research — Mixed]\n```\n\n---\n\n## Flow State Foundations\n\n**[Research]** Mihaly Csikszentmihalyi developed flow theory through decades of research starting in the 1970s. He studied artists, athletes, surgeons, and chess players to identify common characteristics of optimal experiences.\n\n### Conditions for Flow\n\n**[Research]** Well-replicated findings show flow requires:\n\n| Condition | Description |\n|-----------|-------------|\n| **Clear goals** | User knows what success looks like |\n| **Immediate feedback** | Results visible right away |\n| **Challenge-skill balance** | Not too easy, not too hard |\n| **Sense of control** | User directs, system responds |\n\nWhen these conditions are met, people report:\n- Intense concentration\n- Merging of action and awareness\n- Loss of self-consciousness\n- Distorted sense of time\n\n**Source:** Csikszentmihalyi, M. (1990). *Flow: The Psychology of Optimal Experience*. [PMC Research Review](https://pmc.ncbi.nlm.nih.gov/articles/PMC7033418/)\n\n---\n\n## Interruption Cost\n\n**[Research — Nuanced]** Gloria Mark's research at UC Irvine studied workplace interruptions.\n\n**What the research actually shows:**\n- Average time spent on any single event before switching: ~3 minutes\n- 82% of interrupted work is resumed the same day\n- Interrupted work correlates with higher stress\n\n**Caution:** The commonly cited \"23 minutes to recover\" comes from interviews, not published papers. Mark's actual published research (*The Cost of Interrupted Work*, CHI 2008) shows different, more complex findings. The cost of interruption varies significantly by context.\n\n**Takeaway:** Interruptions are costly, but the exact cost depends on task complexity, interruption type, and individual differences.\n\n**Source:** [Mark, Gonzalez, Harris (2008) - The Cost of Interrupted Work](https://ics.uci.edu/~gmark/chi08-mark.pdf)\n\n---\n\n## Critical Patterns\n\n### flow-1: No Unprompted Interruptions\n\n**[Expert]** Nielsen Norman's heuristics emphasize user control. Interrupting users with unrequested information violates this principle.\n\n**Flow-breaking:**\n```\n[User is typing]\n[Modal appears: \"You have 3 unread notifications!\"]\n```\n\n**Flow-preserving:**\n```\n[User is typing]\n[Subtle badge updates in corner]\n[User checks when ready]\n```\n\n**Exception:** Imminent data loss or security issues.\n\n### flow-2: Maintain Context Across Actions\n\n**[Convention]** Preserve user state when they navigate away and return.\n\n**Flow-breaking:**\n```\n[User fills half a form]\n[Clicks link to check something]\n[Returns — form is empty]\n```\n\n**Flow-preserving:**\n```\n[User fills half a form]\n[Clicks link to check something]\n[Returns — form state preserved]\n```\n\n**Preserve:** scroll position, form state, selection, expanded sections.\n\n### flow-3: Batch Related Decisions\n\n**[Research]** Cognitive Load Theory (Sweller) supports reducing the number of decision points. Each decision consumes working memory.\n\n**Flow-breaking:**\n```\n[Modal 1: Choose format]\n[Modal 2: Choose quality]\n[Modal 3: Choose destination]\n```\n\n**Flow-preserving:**\n```\n[Single screen with all export options]\n```\n\n### flow-4: Escape Hatches Everywhere\n\n**[Expert]** Nielsen's Heuristic #3: \"User control and freedom.\" Users should always be able to back out, cancel, or undo.\n\n**Flow-breaking:**\n```\n[User clicks wrong option]\n[No way back — must restart]\n```\n\n**Flow-preserving:**\n```\n[User clicks wrong option]\n[Back button / Undo / Cancel available]\n```\n\nControl creates confidence. Confidence enables flow.\n\n---\n\n## High-Impact Patterns\n\n### flow-5: Reduce Mode Switching\n\n**[Convention]** Keep users in one mental mode. Switching between editing, viewing, and configuring has cognitive cost.\n\n**High switching cost:**\n```\n[Edit in one screen]\n[Preview in another]\n[Settings in a third]\n```\n\n**Low switching cost:**\n```\n[Edit with live preview]\n[Settings in sidebar]\n```\n\n### flow-6: Keyboard Shortcuts for Power Users\n\n**[Convention]** Once users are in flow, hands shouldn't leave keyboard.\n\n- Provide shortcuts for frequent actions\n- Show hints (e.g., \"⌘K to search\")\n- Keep shortcuts discoverable but not intrusive\n\n### flow-7: Sensible Defaults\n\n**[Research]** Related to choice overload research (Iyengar & Lepper). Reducing decisions preserves cognitive resources.\n\nEvery decision that doesn't need user input is flow preserved:\n- Pre-select the most common option\n- Remember previous choices\n- Infer from context when possible\n\n---\n\n## Anti-Patterns\n\n| Pattern | Why It Breaks Flow | Evidence |\n|---------|-------------------|----------|\n| Modal dialogs for non-critical info | Forces attention shift | [Expert] NNg |\n| Auto-playing media | Hijacks audio/visual focus | [Convention] |\n| Pagination for continuous content | Breaks reading rhythm | [Convention] |\n| Required fields revealed one-by-one | Multiple error cycles | [Expert] NNg |\n| Session timeouts without warning | Loses work unexpectedly | [Convention] |\n\n---\n\n## Nuanced Patterns\n\n### Hamburger Menus: Trade-offs\n\n**Status:** Not a myth, but has real costs\n**Evidence:** [Research][Expert] — NNg study with 179 participants across 6 sites\n\n**What research shows:**\n\n- **Discoverability cut almost in half** when navigation is hidden\n- **Task time increases** and perceived difficulty rises\n- **However:** Most users now recognize the hamburger icon (improved since 2010s)\n- **Mobile penalty is smaller** than desktop penalty\n\n**The trade-off:**\n- Hidden nav saves screen space\n- But adds interaction cost (extra tap to see options)\n- Features hidden in hamburger menus are less likely to be discovered\n\n**Guidance:**\n\n| Situation | Recommendation |\n|-----------|----------------|\n| 4 or fewer nav items | Show visible links |\n| 5+ nav items on mobile | Hamburger acceptable, but show key items visibly |\n| Desktop | Avoid hamburger; space isn't as constrained |\n| Feature discovery matters | Don't hide in hamburger |\n\n**Improve hamburger if used:**\n- Add \"MENU\" label next to icon\n- Use contrasting color\n- Place in expected location (top-left or top-right)\n\n**Sources:**\n- [Nielsen Norman - Hamburger Menus Hurt UX](https://www.nngroup.com/articles/hamburger-menus/)\n- [Nielsen Norman - Is Hamburger Recognizable?](https://www.nngroup.com/articles/hamburger-menu-icon-recognizability/)\n\n---\n\n## Key Sources\n\n- Csikszentmihalyi, M. (1990). *Flow: The Psychology of Optimal Experience*.\n- Mark, G., Gonzalez, V., Harris, J. (2008). The Cost of Interrupted Work. CHI 2008.\n- Sweller, J. (1988). Cognitive load during problem solving.\n- [Frontiers - Flow Research Review](https://pmc.ncbi.nlm.nih.gov/articles/PMC7033418/)\n- [Gloria Mark's Interruption Research](https://ics.uci.edu/~gmark/chi08-mark.pdf)\n",
        "ux/skills/progressive-disclosure/SKILL.md": "---\nname: progressive-disclosure\ndescription: Use when designing interfaces with complex functionality, settings panels, or expert features. Covers layering information so beginners aren't overwhelmed and experts aren't held back.\n---\n\n# Progressive Disclosure\n\nShow users what they need when they need it. Hide complexity until it's relevant. Let depth feel like discovery, not burden.\n\n## Evidence Tiers\n\n```\n[Research]   — Peer-reviewed studies, controlled experiments\n[Expert]     — Nielsen Norman Group, recognized UX authorities\n[Case Study] — Documented examples from major products\n[Convention] — Industry practice, limited formal validation\n\nMultiple tags = stronger evidence: [Research][Expert]\nMixed findings noted as: [Research — Mixed]\n```\n\n---\n\n## Research Foundation\n\n**[Research — Limited]** Carroll and Rosson (1987) developed the \"training wheels\" approach, hiding advanced functionality to help novices succeed. However, they noted that **empirical evidence for progressive disclosure effectiveness is limited**.\n\nFrom Carroll & Rosson (1997): \"No empirical evidence exists regarding the effectiveness of progressive disclosure.\"\n\n**What we do know:**\n- **[Research]** Miller's Law (1956): Working memory holds ~7±2 items (some modern research suggests ~4 chunks)\n- **[Research]** Cognitive Load Theory (Sweller, 1988): Reducing extraneous load improves learning\n- **[Expert]** Nielsen Norman Group recommends progressive disclosure for improving learnability, efficiency, and reducing errors\n\n**Honest assessment:** Progressive disclosure is widely accepted as good practice, but rigorous controlled studies are sparse. Most evidence comes from case studies and practitioner experience.\n\n**Source:** [Nielsen Norman - Progressive Disclosure](https://www.nngroup.com/articles/progressive-disclosure/)\n\n---\n\n## The Depth Hierarchy\n\n**[Expert]** Structure complexity in layers:\n\n```\n┌─────────────────────────────────────┐\n│  Layer 1: Essential (always shown)  │  ← What 80% of users need\n├─────────────────────────────────────┤\n│  Layer 2: Common (one click away)   │  ← Frequently used options\n├─────────────────────────────────────┤\n│  Layer 3: Advanced (discoverable)   │  ← Power user features\n├─────────────────────────────────────┤\n│  Layer 4: Expert (documented)       │  ← Edge cases, configs\n└─────────────────────────────────────┘\n```\n\nUsers should be able to operate entirely at Layer 1.\n\n---\n\n## Core Patterns\n\n### disclosure-1: Default to Simplicity\n\n**[Research]** Supported by cognitive load theory. Fewer visible options = less extraneous load.\n\n**Overwhelming:**\n```\n┌─────────────────────────────────────┐\n│ Name: [________]                    │\n│ Email: [________]                   │\n│ Phone: [________]                   │\n│ Address: [________]                 │\n│ [14 more fields...]                 │\n└─────────────────────────────────────┘\n```\n\n**Progressive:**\n```\n┌─────────────────────────────────────┐\n│ Name: [________]                    │\n│ Email: [________]                   │\n│                                     │\n│ [+ Add more details]                │\n└─────────────────────────────────────┘\n```\n\nAsk: \"What's the minimum to accomplish the task?\"\n\n### disclosure-2: Experts Can Skip, Beginners Can't Be Lost\n\n**[Convention]** Design for two paths through the same interface:\n\n**Beginner path:**\n```\nStep 1 → Step 2 → Step 3 → Done\n[Clear linear flow with help text]\n```\n\n**Expert path:**\n```\n[Jump directly to any step]\n[Keyboard shortcuts]\n[Collapse help text]\n```\n\n### disclosure-3: Expand In-Place\n\n**[Convention]** When revealing more, don't teleport users to new screens.\n\n**Disorienting:**\n```\n[Click \"More options\"]\n[New page loads]\n[Click back to return]\n```\n\n**Smooth:**\n```\n[Click \"More options\"]\n[Section expands below]\n[Click again to collapse]\n```\n\nSpatial memory matters. Users remember *where* things are.\n\n---\n\n## High-Impact Patterns\n\n### disclosure-4: Smart Defaults Reduce Choices\n\n**[Research]** Related to choice overload research. Iyengar & Lepper's jam study showed too many choices can paralyze decision-making (though effect size is debated in meta-analyses).\n\n```\n// No default — user must choose\nDate format: [dropdown with 15 options]\n\n// Smart default — user can change if needed\nDate format: [MM/DD/YYYY ▼] (based on locale)\n```\n\n### disclosure-5: Contextual Revelation\n\n**[Convention]** Show options when they become relevant, not before.\n\n**Too early:**\n```\n[Shows \"Export options\" before user has created anything]\n```\n\n**Contextual:**\n```\n[User creates something]\n[Export options appear]\n```\n\n### disclosure-6: Search as Escape Hatch\n\n**[Convention]** For complex interfaces, search lets users skip the hierarchy.\n\n```\n[User knows what they want but not where]\n[Presses ⌘K]\n[Types \"export pdf\"]\n[Jumps directly to feature]\n```\n\nSearch is disclosure for experts.\n\n---\n\n## Case Study: GOV.UK Bank Holidays\n\n**[Case Study]** The UK government's GOV.UK redesigned their bank holiday page based on user research:\n\n**Before:** Busy page with all bank holidays, multiple regions, historical data\n**After:** Single upcoming bank holiday prominently displayed, details below\n\nUser research revealed most people wanted one thing: the next bank holiday date.\n\n**Source:** [GOV.UK Design System](https://design-system.service.gov.uk/)\n\n---\n\n## Patterns Reference\n\n| Pattern | Use When | Evidence |\n|---------|----------|----------|\n| **Accordion** | Related sections, one open at a time | [Convention] |\n| **Expandable rows** | Tables with detail views | [Convention] |\n| **Tabs** | Parallel categories, similar importance | [Convention] |\n| **Drawer/sidebar** | Secondary content needs space | [Convention] |\n| **Modal** | Focused subtask, temporary context | [Expert] NNg |\n| **Tooltip** | Brief explanation, no interaction | [Convention] |\n| **Popover** | Small interactions | [Convention] |\n\n---\n\n## Myths & Debunked Patterns\n\n### MYTH: The Three-Click Rule\n\n**Status:** Debunked\n**Origin:** Jeffrey Zeldman's *Taking Your Talent to the Web* (2001) — no data provided\n\n**The claim:** Users will abandon tasks if they can't complete them in 3 clicks.\n\n**What research shows:**\n\n- **Joshua Porter (UIE, 2003):** Analyzed 44 users, 620 tasks, 8,000+ clicks. Found **no dropoff after 3 clicks** and no decrease in satisfaction.\n- **Jakob Nielsen:** Found a site where moving products to 4 clicks from homepage **increased findability by 600%** over the 3-click version.\n\n**Why it persists:** It's simple, memorable, and sounds logical. But click counting ignores cognitive factors like information scent, clarity of options, and confidence in progress.\n\n**What actually matters:** Each click should make users feel closer to their goal. Strong information scent beats low click counts.\n\n**Sources:**\n- [Nielsen Norman - 3 Click Rule is False](https://www.nngroup.com/articles/3-click-rule/)\n- [UX Myths - All Pages in 3 Clicks](https://uxmyths.com/post/654026581/myth-all-pages-should-be-accessible-in-3-clicks)\n\n---\n\n### NUANCE: Above the Fold\n\n**Status:** Partially true, often overstated\n**Origin:** Newspaper terminology, adapted to web in 1990s\n\n**The claim:** Users won't scroll; everything important must be above the fold.\n\n**What research shows:**\n\n- **Eye tracking (NNg):** 57% of viewing time is above the fold (down from 80% in 2010)\n- **The fold effect is real:** 102% more attention to 100px above fold vs 100px below\n- **But people DO scroll:** Chartbeat found 66% of attention on media pages is below the fold. ClickTale found 76% of pages get scrolled.\n\n**The nuance:** The fold matters for *initial* engagement, but it's not a hard boundary. Users scroll when:\n- Content above signals value below\n- There's no \"false bottom\" (design that looks like the page ends)\n- Information scent is strong\n\n**Guidance:** Put your most important content and value proposition above the fold, but don't cram everything there. Design to invite scrolling.\n\n**Sources:**\n- [Nielsen Norman - Scrolling and Attention](https://www.nngroup.com/articles/scrolling-and-attention/)\n- [Nielsen Norman - The Fold Manifesto](https://www.nngroup.com/articles/page-fold-manifesto/)\n\n---\n\n## Key Sources\n\n- Miller, G.A. (1956). The magical number seven, plus or minus two.\n- Carroll, J.M. & Rosson, M.B. (1987). The paradox of the active user.\n- Sweller, J. (1988). Cognitive load during problem solving.\n- [Nielsen Norman - Progressive Disclosure](https://www.nngroup.com/articles/progressive-disclosure/)\n- [Interaction Design Foundation - Progressive Disclosure](https://www.interaction-design.org/literature/topics/progressive-disclosure)\n",
        "ux/skills/psychology-foundations/SKILL.md": "---\nname: psychology-foundations\ndescription: Use when you need to understand WHY certain UX patterns work. Covers cognitive psychology, behavioral science, and neuroscience foundations that underpin satisfying experiences.\n---\n\n# Psychology Foundations\n\nUnderstanding *why* patterns work lets you apply them to new situations. These are the research foundations beneath UX practice.\n\n## About This Skill\n\nThis skill contains **research-backed principles only**. Each concept includes:\n- The original researcher(s)\n- Year of key publication(s)\n- What the research actually showed\n- Limitations or caveats where relevant\n\n---\n\n## 1. Dopamine and Anticipation\n\n**Researchers:** Wolfram Schultz (1990s), Robert Sapolsky\n**Field:** Neuroscience\n\n### What Research Shows\n\nDopamine neurons fire in response to **prediction of reward**, not reward itself. When a reward is expected and received, dopamine levels don't spike at reward time—they spike at the cue predicting the reward.\n\nSchultz's experiments with monkeys showed:\n- Unexpected reward → dopamine spike at reward\n- Expected reward (after learning) → dopamine spike at predictor, not reward\n- Expected reward that doesn't come → dopamine dip (disappointment)\n\n### UX Implication\n\nProgress indicators work because they signal approaching reward. The anticipation phase is neurologically active.\n\n**Source:** Schultz, W. (1998). Predictive reward signal of dopamine neurons. *Journal of Neurophysiology*.\n\n---\n\n## 2. Peak-End Rule\n\n**Researchers:** Daniel Kahneman, Barbara Fredrickson\n**Field:** Behavioral economics, Psychology\n**Recognition:** Nobel Prize in Economics (2002)\n\n### What Research Shows\n\nIn studies of colonoscopies and other experiences, participants rated overall experience based on:\n1. The **peak** moment (most intense)\n2. The **end** moment\n\nDuration had little effect (\"duration neglect\"). A longer painful experience ending gently was rated better than a shorter one ending abruptly.\n\n### UX Implication\n\n- Create one memorable positive peak\n- End interactions well\n- A graceful error recovery can redeem a frustrating experience\n\n**Source:** Kahneman, D. et al. (1993). When more pain is preferred to less. *Psychological Science*.\n\n---\n\n## 3. Loss Aversion\n\n**Researchers:** Daniel Kahneman, Amos Tversky\n**Field:** Behavioral economics\n**Recognition:** Foundational to Prospect Theory (Nobel Prize 2002)\n\n### What Research Shows\n\nLosses loom larger than gains. In experiments, losing $10 felt roughly **2x as bad** as gaining $10 felt good. This asymmetry affects decision-making: people take irrational risks to avoid losses.\n\n### UX Implication\n\n- Data loss is disproportionately frustrating\n- Auto-save, undo, and preservation matter more than features\n- Frame choices in terms of what users might lose\n\n**Source:** Kahneman, D. & Tversky, A. (1979). Prospect Theory: An Analysis of Decision under Risk. *Econometrica*.\n\n---\n\n## 4. Flow State\n\n**Researcher:** Mihaly Csikszentmihalyi\n**Field:** Positive psychology\n**Timeline:** Research from 1970s, book *Flow* published 1990\n\n### What Research Shows\n\nCsikszentmihalyi interviewed hundreds of experts (artists, athletes, surgeons, chess players) about their optimal experiences. Common characteristics:\n\n| Condition | Description |\n|-----------|-------------|\n| Clear goals | Know what success looks like |\n| Immediate feedback | See results of actions |\n| Challenge-skill balance | Task matches ability |\n| Sense of control | Autonomy over actions |\n\nWhen conditions are met, people report:\n- Deep concentration\n- Loss of self-consciousness\n- Distorted time perception\n- Intrinsic reward from the activity itself\n\n### Limitations\n\n- Original research was qualitative (interviews, experience sampling)\n- \"Challenge-skill balance\" is hard to operationalize\n- Neurophysiological validation is still emerging\n\n**Source:** Csikszentmihalyi, M. (1990). *Flow: The Psychology of Optimal Experience*.\n\n---\n\n## 5. Cognitive Load Theory\n\n**Researcher:** John Sweller\n**Field:** Educational psychology\n**Timeline:** Theory developed 1988\n\n### What Research Shows\n\nWorking memory has limited capacity. Sweller identified three types of cognitive load:\n\n| Type | Description | Reducible? |\n|------|-------------|------------|\n| **Intrinsic** | Complexity inherent to the task | No (task-dependent) |\n| **Extraneous** | Load from poor presentation | **Yes** (design target) |\n| **Germane** | Load that aids learning | Desirable |\n\nInstructional design should minimize extraneous load to free capacity for intrinsic and germane processing.\n\n### UX Implication\n\n- Reduce visual clutter\n- Group related information\n- Use familiar patterns\n- Don't make users remember across screens\n\n**Source:** Sweller, J. (1988). Cognitive load during problem solving. *Cognitive Science*.\n\n---\n\n## 6. Miller's Law (Working Memory Limits)\n\n**Researcher:** George Miller\n**Field:** Cognitive psychology\n**Year:** 1956\n\n### What Research Shows\n\nMiller's famous paper \"The Magical Number Seven, Plus or Minus Two\" found people can hold approximately 7±2 \"chunks\" in working memory.\n\n### Limitations\n\n**Important:** Modern research suggests the number may be closer to **4±1 chunks** for novel information (Cowan, 2001). Miller's \"7\" applies to well-practiced, chunked material.\n\n### UX Implication\n\n- Limit simultaneous options\n- Group items into meaningful chunks\n- Don't rely on users remembering many items\n\n**Sources:**\n- Miller, G.A. (1956). The magical number seven. *Psychological Review*.\n- Cowan, N. (2001). The magical number 4 in short-term memory. *Behavioral and Brain Sciences*.\n\n---\n\n## 7. Serial Position Effect\n\n**Researcher:** Hermann Ebbinghaus\n**Field:** Memory research\n**Year:** 1885\n\n### What Research Shows\n\nWhen recalling lists, people remember:\n- **First items** (primacy effect) — transferred to long-term memory\n- **Last items** (recency effect) — still in working memory\n- Middle items are poorly recalled\n\n### UX Implication\n\n- Put important items first or last\n- Don't bury critical information in the middle\n- First impressions and final interactions matter most\n\n**Source:** Ebbinghaus, H. (1885). *Über das Gedächtnis* (On Memory).\n\n---\n\n## 8. Zeigarnik Effect\n\n**Researcher:** Bluma Zeigarnik\n**Field:** Gestalt psychology\n**Year:** 1927\n\n### What Research Shows\n\nInterrupted tasks are remembered better than completed ones. The mind keeps incomplete tasks \"open\" in memory.\n\n### Limitations\n\n**Caution:** Replication studies have been mixed. The effect appears real but smaller and more context-dependent than originally claimed.\n\n### UX Implication\n\n- Progress indicators leverage incompleteness\n- Unfinished onboarding motivates return\n- But: incomplete tasks also create cognitive burden\n\n**Source:** Zeigarnik, B. (1927). Über das Behalten von erledigten und unerledigten Handlungen. *Psychologische Forschung*.\n\n---\n\n## 9. Choice Overload (Paradox of Choice)\n\n**Researchers:** Sheena Iyengar, Mark Lepper\n**Field:** Decision-making psychology\n**Year:** 2000\n\n### What Research Shows\n\nThe famous \"jam study\": shoppers shown 24 jam varieties were less likely to purchase than those shown 6 varieties. More choice led to decision paralysis.\n\n### Limitations\n\n**Important:** Meta-analyses (Scheibehenne et al., 2010) found the effect is **smaller and more context-dependent** than popularized. Choice overload occurs under specific conditions:\n- Unfamiliar domain\n- Difficult to compare options\n- No clear preference\n- High decision stakes\n\n### UX Implication\n\n- Reduce options when users lack expertise\n- Provide smart defaults\n- But: experts may want more choices\n\n**Sources:**\n- Iyengar, S. & Lepper, M. (2000). When choice is demotivating. *Journal of Personality and Social Psychology*.\n- Scheibehenne, B. et al. (2010). Can there ever be too many options? *Journal of Consumer Research*.\n\n---\n\n## Laws of UX (Quick Reference)\n\nThese are practitioner heuristics with varying levels of research backing:\n\n| Law | Principle | Evidence Level |\n|-----|-----------|----------------|\n| **Hick's Law** | Decision time increases with options | [Research] |\n| **Fitts's Law** | Larger, closer targets are easier to hit | [Research] |\n| **Miller's Law** | ~7±2 items in working memory | [Research] (with caveats) |\n| **Jakob's Law** | Users expect familiar patterns | [Expert] NNg |\n| **Aesthetic-Usability** | Pretty things seem more usable | [Research] |\n| **Postel's Law** | Be liberal in input, strict in output | [Expert] |\n\n**Source:** [Laws of UX](https://lawsofux.com/)\n\n---\n\n## Key Sources\n\n- Schultz, W. (1998). Predictive reward signal of dopamine neurons.\n- Kahneman, D. & Tversky, A. (1979). Prospect Theory.\n- Kahneman, D. (1993). When more pain is preferred to less.\n- Csikszentmihalyi, M. (1990). *Flow: The Psychology of Optimal Experience*.\n- Sweller, J. (1988). Cognitive load during problem solving.\n- Miller, G.A. (1956). The magical number seven.\n- Cowan, N. (2001). The magical number 4 in short-term memory.\n- Ebbinghaus, H. (1885). *Über das Gedächtnis*.\n- Iyengar, S. & Lepper, M. (2000). When choice is demotivating.\n- Scheibehenne, B. et al. (2010). Can there ever be too many options?\n",
        "ux/skills/trust-and-recovery/SKILL.md": "---\nname: trust-and-recovery\ndescription: Use when designing error handling, confirmation dialogs, undo functionality, or any interaction where user trust matters. Covers building confidence through predictability and graceful failure.\n---\n\n# Trust and Recovery\n\nTrust is built through predictability and tested through failure. Users trust systems that behave consistently and recover gracefully when things go wrong.\n\n## Evidence Tiers\n\n```\n[Research]   — Peer-reviewed studies, controlled experiments\n[Expert]     — Nielsen Norman Group, recognized UX authorities\n[Case Study] — Documented examples from major products\n[Convention] — Industry practice, limited formal validation\n\nMultiple tags = stronger evidence: [Research][Expert]\nMixed findings noted as: [Research — Mixed]\n```\n\n---\n\n## Research Foundations\n\n### Peak-End Rule\n\n**[Research][Expert]** Daniel Kahneman's research (Nobel Prize in Economics, 2002) established that people judge experiences based on:\n\n1. The **peak** moment (most intense, positive or negative)\n2. The **end** (how it concluded)\n\nThey do not average the entire experience.\n\n**UX implication:** A single graceful recovery can redeem an otherwise frustrating experience. Don't let the last interaction be an error.\n\n**Source:** Kahneman, D. (1999). Objective happiness. In *Well-being: Foundations of hedonic psychology*.\n\n### Loss Aversion\n\n**[Research][Expert]** Kahneman & Tversky's Prospect Theory showed losses feel approximately 2x as painful as equivalent gains feel good.\n\n**UX implication:** Users are highly motivated to avoid losing their work. Auto-save, undo, and data preservation are disproportionately important.\n\n**Source:** Kahneman, D. & Tversky, A. (1979). Prospect Theory: An Analysis of Decision under Risk.\n\n---\n\n## Undo vs. Confirmation Dialogs\n\n**[Expert]** Nielsen Norman Group and multiple UX authorities recommend undo over confirmation dialogs in most cases.\n\n### Why Confirmation Often Fails\n\n**[Expert]** From NNg and practitioner observation:\n- Users habitually click \"OK\" without reading\n- Frequent confirmations train users to ignore them\n- Confirmations interrupt flow\n\n### When to Use Each\n\n| Approach | Use When | Evidence |\n|----------|----------|----------|\n| **Undo** | Action is reversible | [Expert] NNg |\n| **Confirmation** | Action is truly irreversible AND destructive | [Expert] NNg |\n| **Neither** | Routine, low-risk actions | [Convention] |\n\n**[Case Study]** Google Drive: No confirmation for moving files to trash (reversible). Confirmation required for emptying trash (irreversible).\n\n### Pattern: Undo Toast\n\n**[Convention]**\n\n```\n[User clicks delete]\n[Item disappears immediately]\n[Toast: \"Item deleted\" [Undo] — auto-dismisses in 10s]\n```\n\n**Caution:** No controlled studies directly comparing undo vs. confirmation outcomes found. This is strong expert consensus, not validated research.\n\n**Source:** [Nielsen Norman - Confirmation Dialogs](https://www.nngroup.com/articles/confirmation-dialog/)\n\n---\n\n## Error Message Design\n\n**[Expert]** Nielsen's Heuristic #9: \"Help users recognize, diagnose, and recover from errors.\"\n\n### The Three Questions\n\nEvery error message should answer:\n1. **What happened?** (Clear description)\n2. **Why?** (Cause, if helpful)\n3. **What now?** (Recovery path)\n\n**Useless:**\n```\nError 500: Internal Server Error\n```\n\n**Actionable:**\n```\nCouldn't save your changes — the server is temporarily\nunavailable. Your draft has been saved locally.\n\n[Try again] [Continue editing]\n```\n\n**[Research]** Cognitive Load Theory (Sweller) supports this: vague errors increase extraneous cognitive load.\n\n**Source:** [Nielsen Norman - Error Message Guidelines](https://www.nngroup.com/articles/error-message-guidelines/)\n\n---\n\n## Core Patterns\n\n### trust-1: Confirm Destructive, Not Routine\n\n**[Expert]** Only interrupt for truly irreversible actions.\n\n**Over-confirming (trains users to ignore):**\n```\n\"Are you sure you want to save?\"\n\"Are you sure you want to go back?\"\n```\n\n**Appropriate confirmation:**\n```\n\"Delete 47 files permanently? This cannot be undone.\"\n[Cancel] [Delete]\n```\n\n### trust-2: Preserve Data Aggressively\n\n**[Research]** Loss aversion (Kahneman & Tversky) explains why losing work is disproportionately frustrating.\n\n**Trust-breaking:**\n```\n[User writes long comment]\n[Accidentally navigates away]\n[Returns — comment gone]\n```\n\n**Trust-building:**\n```\n[User writes long comment]\n[Accidentally navigates away]\n[Returns — draft restored]\n```\n\nAuto-save drafts. Preserve form state. Cache locally.\n\n### trust-3: Degrade Gracefully\n\n**[Convention]** Isolate failures. Don't let one problem cascade.\n\n**Brittle:**\n```\n[One image fails to load]\n[Entire page shows error]\n```\n\n**Graceful:**\n```\n[One image fails to load]\n[Placeholder shown with retry option]\n[Rest of page works fine]\n```\n\n### trust-4: Show System Status\n\n**[Expert]** Nielsen's Heuristic #1: \"Visibility of system status.\"\n\n**Opaque:**\n```\n[User clicks Submit]\n[Nothing happens for 3 seconds]\n[Suddenly: \"Submitted!\"]\n```\n\n**Transparent:**\n```\n[User clicks Submit]\n[Button shows spinner: \"Submitting...\"]\n[Button changes: \"✓ Submitted\"]\n```\n\n---\n\n## Recovery Patterns\n\n### Pattern: Optimistic UI with Rollback\n\n**[Convention]**\n\n```\n1. User takes action\n2. UI updates immediately (optimistic)\n3. Server request in background\n4. If success: done\n5. If failure: rollback UI + show error + offer retry\n```\n\n### Pattern: Forgiving Input\n\n**[Expert]** Postel's Law: \"Be liberal in what you accept.\"\n\n```\n// Rigid\nPhone: [Must be exactly ###-###-####]\n\n// Forgiving\nPhone: [Accepts any format, normalizes internally]\n\"5551234567\" → displays as \"(555) 123-4567\"\n```\n\n### Pattern: Graceful Timeout\n\n**[Convention]**\n\n```\n[Operation takes too long]\n\"This is taking longer than expected.\n You can keep waiting or try again.\"\n[Keep waiting] [Cancel and retry]\n```\n\nDon't make users guess if something is frozen.\n\n---\n\n## Anti-Patterns\n\n| Pattern | Why It Breaks Trust | Evidence |\n|---------|---------------------|----------|\n| Silent failures | User doesn't know something went wrong | [Expert] NNg |\n| Generic errors | No path to recovery | [Expert] NNg |\n| Lost form data | Punishes user for system failure | [Research] Loss aversion |\n| Inconsistent behavior | Can't build mental model | [Expert] Jakob's Law |\n| Hidden data usage | Feels deceptive | [Convention] |\n\n---\n\n## Key Sources\n\n- Kahneman, D. & Tversky, A. (1979). Prospect Theory.\n- Kahneman, D. (1999). Objective happiness (Peak-End Rule).\n- Sweller, J. (1988). Cognitive load during problem solving.\n- [Nielsen Norman - Confirmation Dialogs](https://www.nngroup.com/articles/confirmation-dialog/)\n- [Nielsen Norman - Error Message Guidelines](https://www.nngroup.com/articles/error-message-guidelines/)\n- [A List Apart - Never Use a Warning When You Mean Undo](https://alistapart.com/article/neveruseawarning/)\n"
      },
      "plugins": [
        {
          "name": "core",
          "description": "Universal development practices: design patterns, agent behavior, versioning, and code quality standards",
          "version": "0.1.0",
          "source": "./core",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add bfmcneill/agi-marketplace",
            "/plugin install core@agi-marketplace"
          ]
        },
        {
          "name": "sveltekit",
          "description": "Expert guidance for SvelteKit with Svelte 5, runes, remote functions, and recommended stack (Kysely, Better Auth, shadcn-svelte)",
          "version": "1.0.0",
          "source": "./sveltekit",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add bfmcneill/agi-marketplace",
            "/plugin install sveltekit@agi-marketplace"
          ]
        },
        {
          "name": "python",
          "description": "Python development patterns: uv, testing, packaging, and best practices",
          "version": "0.1.0",
          "source": "./python",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add bfmcneill/agi-marketplace",
            "/plugin install python@agi-marketplace"
          ]
        },
        {
          "name": "ux",
          "description": "Framework-agnostic UX patterns for building satisfying user interfaces: feedback design, flow optimization, progressive disclosure, and trust",
          "version": "0.1.0",
          "source": "./ux",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add bfmcneill/agi-marketplace",
            "/plugin install ux@agi-marketplace"
          ]
        }
      ]
    }
  ]
}