{
  "author": {
    "id": "lollipopkit",
    "display_name": "lollipopkitğŸ³ï¸â€âš§ï¸",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/10864310?u=6c347714659065f32af927153759acaf68ff289a&v=4",
    "url": "https://github.com/lollipopkit",
    "bio": "Hope live the life I want...",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 4,
      "total_commands": 18,
      "total_skills": 7,
      "total_stars": 5,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "lk-ccp",
      "version": null,
      "description": "Marketplace for lk plugins (recursive-reasoning, devloop)",
      "owner_info": {
        "name": "lollipopkit"
      },
      "keywords": [],
      "repo_full_name": "lollipopkit/cc-plugins",
      "repo_url": "https://github.com/lollipopkit/cc-plugins",
      "repo_description": "Plugins for Claude Code, rlm & devloop.",
      "homepage": "",
      "signals": {
        "stars": 5,
        "forks": 0,
        "pushed_at": "2026-01-29T01:35:02Z",
        "created_at": "2026-01-13T04:11:46Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 1069
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/context-firewall",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/context-firewall/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/context-firewall/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 468
        },
        {
          "path": "plugins/context-firewall/README.md",
          "type": "blob",
          "size": 2006
        },
        {
          "path": "plugins/context-firewall/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/context-firewall/agents/cf-aggregator.md",
          "type": "blob",
          "size": 2102
        },
        {
          "path": "plugins/context-firewall/agents/cf-critic.md",
          "type": "blob",
          "size": 1518
        },
        {
          "path": "plugins/context-firewall/agents/cf-fileworker.md",
          "type": "blob",
          "size": 2334
        },
        {
          "path": "plugins/context-firewall/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/context-firewall/commands/cf-run.md",
          "type": "blob",
          "size": 4162
        },
        {
          "path": "plugins/context-firewall/commands/cf-spec.md",
          "type": "blob",
          "size": 1497
        },
        {
          "path": "plugins/context-firewall/commands/cf-verify.md",
          "type": "blob",
          "size": 6185
        },
        {
          "path": "plugins/context-firewall/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/context-firewall/hooks/hooks.json",
          "type": "blob",
          "size": 2926
        },
        {
          "path": "plugins/context-firewall/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/context-firewall/skills/context-firewall",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/context-firewall/skills/context-firewall/SKILL.md",
          "type": "blob",
          "size": 3948
        },
        {
          "path": "plugins/devloop",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/devloop/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/devloop/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 429
        },
        {
          "path": "plugins/devloop/README.md",
          "type": "blob",
          "size": 1817
        },
        {
          "path": "plugins/devloop/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/devloop/agents/devloop-implementer.md",
          "type": "blob",
          "size": 1236
        },
        {
          "path": "plugins/devloop/agents/devloop-runner.md",
          "type": "blob",
          "size": 15980
        },
        {
          "path": "plugins/devloop/agents/devloop-validator.md",
          "type": "blob",
          "size": 1067
        },
        {
          "path": "plugins/devloop/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/devloop/commands/devloop-enable.md",
          "type": "blob",
          "size": 1465
        },
        {
          "path": "plugins/devloop/commands/devloop.md",
          "type": "blob",
          "size": 1859
        },
        {
          "path": "plugins/devloop/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/devloop/hooks/hooks.json",
          "type": "blob",
          "size": 338
        },
        {
          "path": "plugins/devloop/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/devloop/skills/feishu-lark-interaction",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/devloop/skills/feishu-lark-interaction/SKILL.md",
          "type": "blob",
          "size": 3357
        },
        {
          "path": "plugins/devloop/skills/github-interaction",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/devloop/skills/github-interaction/SKILL.md",
          "type": "blob",
          "size": 2816
        },
        {
          "path": "plugins/gws-manager",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/gws-manager/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/gws-manager/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 248
        },
        {
          "path": "plugins/gws-manager/README.md",
          "type": "blob",
          "size": 1613
        },
        {
          "path": "plugins/gws-manager/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/gws-manager/agents/workspace-agent.md",
          "type": "blob",
          "size": 2384
        },
        {
          "path": "plugins/gws-manager/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/gws-manager/commands/gws-doctor.md",
          "type": "blob",
          "size": 357
        },
        {
          "path": "plugins/gws-manager/commands/gws-ensure-integration.md",
          "type": "blob",
          "size": 346
        },
        {
          "path": "plugins/gws-manager/commands/gws-integrate.md",
          "type": "blob",
          "size": 632
        },
        {
          "path": "plugins/gws-manager/commands/gws-list.md",
          "type": "blob",
          "size": 318
        },
        {
          "path": "plugins/gws-manager/commands/gws-lock.md",
          "type": "blob",
          "size": 429
        },
        {
          "path": "plugins/gws-manager/commands/gws-locks.md",
          "type": "blob",
          "size": 222
        },
        {
          "path": "plugins/gws-manager/commands/gws-new.md",
          "type": "blob",
          "size": 618
        },
        {
          "path": "plugins/gws-manager/commands/gws-prune.md",
          "type": "blob",
          "size": 249
        },
        {
          "path": "plugins/gws-manager/commands/gws-rm.md",
          "type": "blob",
          "size": 261
        },
        {
          "path": "plugins/gws-manager/commands/gws-unlock.md",
          "type": "blob",
          "size": 300
        },
        {
          "path": "plugins/gws-manager/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/gws-manager/hooks/hooks.json",
          "type": "blob",
          "size": 996
        },
        {
          "path": "plugins/gws-manager/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/gws-manager/skills/workspace-management",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/gws-manager/skills/workspace-management/SKILL.md",
          "type": "blob",
          "size": 3103
        },
        {
          "path": "plugins/gws-manager/skills/workspace-management/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/gws-manager/skills/workspace-management/examples/refactor-workflow.md",
          "type": "blob",
          "size": 2179
        },
        {
          "path": "plugins/gws-manager/skills/workspace-management/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/gws-manager/skills/workspace-management/references/cli-usage.md",
          "type": "blob",
          "size": 2039
        },
        {
          "path": "plugins/gws-manager/skills/workspace-management/references/json-schema.md",
          "type": "blob",
          "size": 1178
        },
        {
          "path": "plugins/recursive-reasoning",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/recursive-reasoning/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/recursive-reasoning/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 551
        },
        {
          "path": "plugins/recursive-reasoning/README.md",
          "type": "blob",
          "size": 2846
        },
        {
          "path": "plugins/recursive-reasoning/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/recursive-reasoning/agents/multi-model-config-doctor.md",
          "type": "blob",
          "size": 1729
        },
        {
          "path": "plugins/recursive-reasoning/agents/recursive-executor.md",
          "type": "blob",
          "size": 1001
        },
        {
          "path": "plugins/recursive-reasoning/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/recursive-reasoning/commands/multi-model.md",
          "type": "blob",
          "size": 657
        },
        {
          "path": "plugins/recursive-reasoning/commands/recursive-arena.md",
          "type": "blob",
          "size": 775
        },
        {
          "path": "plugins/recursive-reasoning/commands/recursive.md",
          "type": "blob",
          "size": 937
        },
        {
          "path": "plugins/recursive-reasoning/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/recursive-reasoning/hooks/hooks.json",
          "type": "blob",
          "size": 606
        },
        {
          "path": "plugins/recursive-reasoning/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/recursive-reasoning/skills/multi-model",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/recursive-reasoning/skills/multi-model/SKILL.md",
          "type": "blob",
          "size": 2257
        },
        {
          "path": "plugins/recursive-reasoning/skills/recursive-arena",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/recursive-reasoning/skills/recursive-arena/SKILL.md",
          "type": "blob",
          "size": 1833
        },
        {
          "path": "plugins/recursive-reasoning/skills/recursive",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/recursive-reasoning/skills/recursive/SKILL.md",
          "type": "blob",
          "size": 4199
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"lk-ccp\",\n  \"owner\": {\n    \"name\": \"lollipopkit\"\n  },\n  \"metadata\": {\n    \"description\": \"Marketplace for lk plugins (recursive-reasoning, devloop)\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"recursive-reasoning\",\n      \"source\": \"./plugins/recursive-reasoning\",\n      \"description\": \"Recursive Language Model - multi-pass reasoning with Self-Refine, Reflexion, Tree of Thoughts\"\n    },\n    {\n      \"name\": \"devloop\",\n      \"source\": \"./plugins/devloop\",\n      \"description\": \"Iterate on an issue until it is ready to merge: create branch, fix, commit, open PR, wait for AI review, apply feedback, repeat.\"\n    },\n    {\n      \"name\": \"context-firewall\",\n      \"source\": \"./plugins/context-firewall\",\n      \"description\": \"preprocess large inputs using sub-agents, return compressed and auditable results with evidence locators, and verify claims at low cost.\"\n    },\n    {\n      \"name\": \"gws-manager\",\n      \"source\": \"./plugins/gws-manager\",\n      \"description\": \"Manage parallel development workspaces and advisory locks using the gws CLI tool\"\n    }\n  ]\n}\n",
        "plugins/context-firewall/.claude-plugin/plugin.json": "{\n  \"name\": \"context-firewall\",\n  \"version\": \"0.1.0\",\n  \"description\": \"Context Firewall: use sub-agents to preprocess large inputs with evidence contracts and low-cost verification.\",\n  \"author\": {\n    \"name\": \"lollipopkit\"\n  },\n  \"keywords\": [\n    \"context\",\n    \"sub-agent\",\n    \"summarization\",\n    \"evidence\",\n    \"verification\",\n    \"map-reduce\"\n  ],\n  \"repository\": \"https://github.com/lollipopkit/cc-plugins\",\n  \"license\": \"MIT\",\n  \"commands\": \"./commands/\"\n}\n",
        "plugins/context-firewall/README.md": "# context-firewall\n\nContext Firewall plugin for Claude Code: preprocess large inputs using sub-agents, return compressed and auditable results with evidence locators, and verify claims at low cost.\n\n## Components\n\n### Commands\n\n- `/cf-spec`: Generate a schema-valid `TaskSpec.v1` template (strict JSON only).\n- `/cf-run`: Run Map-Reduce preprocessing (FileWorker â†’ Aggregator) and output `SubResult.v1` (strict JSON only).\n- `/cf-verify`: Sample-verify `SubResult.v1` evidence and output `VerifyReport.v1` (strict JSON only).\n\n### Agents\n\n- `cf-fileworker`: Scan a single shard input and produce evidence-backed claims (strict JSON only).\n- `cf-aggregator`: Merge multiple FileWorker outputs into a single `SubResult.v1` (strict JSON only).\n- `cf-critic`: Independent re-run for high-risk or conflict checking (strict JSON only).\n\n### Hooks (advisory only)\n\nConfigured in `hooks/hooks.json`:\n\n- `PreToolUse`: advise before potentially large reads / large tool outputs\n- `PostToolUse`: advise after long WebFetch/WebSearch results\n- `UserPromptSubmit`: advise when user pastes a large blob into the prompt\n\n## Settings\n\nCreate a local config file:\n\n- `<project>/.claude/context-firewall.local.md`\n\nUse the template:\n\n- `plugins/context-firewall/scripts/settings-frontmatter.md`\n\nCommon knobs:\n\n- `enabled`: enable/disable workflow\n- `read_warn_bytes`: advisory threshold for large reads\n- `tool_output_warn_chars`: advisory threshold for tool output size\n- `sample_rate`: verification sampling rate by risk level\n- `persist.dir`: persistence directory (default `.claude/context-firewall`)\n\n## Schemas\n\n- `schemas/task-spec.v1.schema.json`\n- `schemas/sub-result.v1.schema.json`\n- `schemas/verify-report.v1.schema.json`\n- `schemas/settings.v1.schema.json`\n\n## Examples\n\n- `examples/logs-timeout-task.json` - multi-log analysis with time window + keyword must_cover\n- `examples/repo-entrypoints-task.json` - repo entrypoint/call-chain discovery + git diff context\n\n## Quick test\n\nSee `scripts/test-plan.md`.\n",
        "plugins/context-firewall/agents/cf-aggregator.md": "---\nname: cf-aggregator\ndescription: Use this agent when multiple FileWorker results need to be merged into a single SubResult.v1, with de-duplication, clustering, and conflict detection.\nmodel: inherit\ncolor: yellow\ntools: [\"Read\", \"Write\", \"Edit\"]\n---\n\n<!-- markdownlint-disable MD033 -->\n\n## Examples\n\n<example>\nContext: Several FileWorkers processed multiple log files; results must be combined.\nuser: \"æŠŠå¤šä¸ªæ—¥å¿—çš„ç»“è®ºåˆå¹¶æˆæ€»è§ˆï¼Œå»é‡å¹¶æ ‡æ³¨å†²çªã€‚\"\nassistant: \"I'll use the Aggregator agent to merge FileWorker outputs into a single SubResult with consolidated claims and coverage.\"\n<commentary>\nAggregation is a distinct task: merge, dedupe, conflict-detect, and keep evidence handles.\n</commentary>\n</example>\n\nYou are a Context Firewall Aggregator.\n\nInput:\n\n- A list of FileWorker JSON outputs.\n- The original TaskSpec.v1.\n\nResponsibilities:\n\n- Merge answers by matching questions.\n- De-duplicate claims using a deterministic key:\n  - Prefer `claim_id` when present.\n  - Otherwise use a `claim_fingerprint`: lowercased `claim` + an `evidence_signature`.\n\n- Build an `evidence_signature` for each claim:\n  - For `line_range`: `${path}:${start}-${end}`\n  - For `symbol_range`: `${path}#${symbol}`\n  - For `tool_call`: `${tool}:${args_hash}`\n  - Otherwise: `${locator.type}`\n\n- Cluster repetitive patterns:\n  - Group claims whose fingerprints match exactly.\n  - Keep one representative claim and merge evidence arrays (de-duplicate evidence by locator signature).\n\n- Detect conflicts conservatively:\n  - If two claims under the same question share a high-overlap subject (same evidence_signature prefix) but have contradictory polarity words (e.g., \"enabled\" vs \"disabled\", \"present\" vs \"absent\"), annotate both claims with `notes` marking a conflict and suggest a Critic run.\n  - Do not fabricate resolutions; keep both claims with evidence.\n\n- Produce a final SubResult.v1 JSON.\n\nOutput (MANDATORY):\n\n- Output **strict JSON only**.\n- Do not use markdown fences.\n- Do not include any explanation text before or after the JSON.\n\nReturn strict JSON conforming to SubResult.v1.\n",
        "plugins/context-firewall/agents/cf-critic.md": "---\nname: cf-critic\ndescription: Use this agent when a high-risk TaskSpec/SubResult needs an independent second pass to reduce hallucinations, validate coverage, or resolve cross-file causal claims.\nmodel: inherit\ncolor: red\ntools: [\"Read\", \"Grep\", \"Glob\", \"WebFetch\", \"WebSearch\", \"AskUserQuestion\"]\n---\n\n<!-- markdownlint-disable MD033 -->\n\n## Examples\n\n<example>\nContext: The master is about to make an important decision based on SubResult claims.\nuser: \"è¿™ä¸ªç»“è®ºé£é™©å¾ˆé«˜ï¼Œå¸®æˆ‘ç‹¬ç«‹å¤æ ¸ä¸€æ¬¡ã€‚\"\nassistant: \"I'll run an independent Critic sub-agent pass to re-check the same questions and compare results.\"\n<commentary>\nHigh-risk decisions benefit from an independent read and discrepancy report.\n</commentary>\n</example>\n\nYou are a Context Firewall Critic.\n\nGoal:\n\n- Independently answer the TaskSpec questions with evidence, without seeing the other SubResult claims if possible.\n- If given an existing SubResult, focus on finding contradictions, missing must_cover coverage, or weak evidence.\n\nOutput (MANDATORY):\n\n- Output **strict JSON only**.\n- Do not use markdown fences.\n- Do not include any explanation text before or after the JSON.\n\nReturn strict JSON:\n\n- Allowed `status`: `ok`, `partial`, `tool_error`\n- Allowed `discrepancies[].type`: `missing_coverage`, `weak_evidence`, `conflict`\n\n{\n  \"task_id\": \"...\",\n  \"status\": \"ok\",\n  \"discrepancies\": [\n    {\n      \"type\": \"missing_coverage\",\n      \"detail\": \"...\",\n      \"suggested_fix\": \"...\"\n    }\n  ],\n  \"recommended_next_action\": \"...\"\n}\n",
        "plugins/context-firewall/agents/cf-fileworker.md": "---\nname: cf-fileworker\ndescription: Use this agent when a task requires reading or scanning large inputs (files/logs/PDFs/images/tool outputs) and returning a compressed, auditable SubResult fragment with evidence locators.\nmodel: inherit\ncolor: cyan\ntools: [\"Read\", \"Grep\", \"Glob\", \"WebFetch\", \"WebSearch\", \"AskUserQuestion\"]\n---\n\n<!-- markdownlint-disable MD033 -->\n\n## Examples\n\n<example>\nContext: The user has a large log file and wants top errors and causes without flooding the master context.\nuser: \"åˆ†æ logs/app.log é‡Œ timeout çš„ä¸»è¦ç±»å‹ï¼Œç»™å‡ºè¯æ®è¡Œå·ã€‚\"\nassistant: \"I'll delegate the heavy reading to a FileWorker sub-agent and only bring back structured claims with evidence locators.\"\n<commentary>\nLarge input processing should be done by a sub-agent with strict output budget and evidence contract.\n</commentary>\n</example>\n\n<example>\nContext: The user wants to understand how a feature works across multiple files.\nuser: \"è¿™ä¸ªåŠŸèƒ½å…¥å£åœ¨å“ªï¼Ÿè°ƒç”¨é“¾æ˜¯ä»€ä¹ˆï¼Ÿ\"\nassistant: \"I'll use a FileWorker to scan the relevant files and return symbol/line evidence.\"\n<commentary>\nThe FileWorker can search and extract only relevant snippets with precise locators.\n</commentary>\n</example>\n\nYou are a Context Firewall FileWorker.\n\nGoal:\n\n- Consume one input (or a small shard) from a TaskSpec.v1.\n- Produce a partial SubResult.v1-like fragment: claims + evidence + coverage.\n- Do not dump raw text. Keep within the output budget.\n\nProcess:\n\n1) Discovery: Determine what to scan and how (keywords, time window, paths).\n2) Targeted retrieval: Use Grep/Glob/Read to locate relevant regions.\n3) Extraction: For each claim, attach at least one evidence locator.\n4) Self-check: Ensure must_cover items addressed or declared as gaps.\n\nEvidence rules:\n\n- Prefer line_range for text files.\n- Use symbol_range when referring to functions/classes (include signature_hint if needed).\n- Use tool_call for tool-derived facts; include args_hash and a typed rerun_hint when safe (web_fetch/web_search).\n- Keep quotes short (respect quote_max_chars).\n\nOutput (MANDATORY):\n\n- Output **strict JSON only**.\n- Do not use markdown fences.\n- Do not include any explanation text before or after the JSON.\n\nReturn JSON object:\n{\n  \"input_id\": \"...\",\n  \"answers\": [...],\n  \"coverage\": {...},\n  \"status\": \"ok|partial|tool_error\"\n}\n",
        "plugins/context-firewall/commands/cf-run.md": "---\nname: cf-run\ndescription: Run the context-firewall workflow: split inputs, invoke FileWorkers, aggregate into SubResult.v1.\nallowed-tools: [\"Read\", \"Write\", \"Edit\", \"Bash\", \"Task\", \"AskUserQuestion\"]\nargument-hint: \"--spec <file|json> [--out <path>]\"\n---\n\nRun the context-firewall workflow.\n\n## Arguments\n\n$ARGUMENTS\n\nExpected:\n\n- `--spec <file|json>` (required)\n- `--out <path>` (optional)\n\n## Steps\n\n### 1) Resolve project root\n\n- Run `pwd` via Bash and treat it as the project root directory.\n\n### 2) Load TaskSpec JSON (`--spec`)\n\n- Extract the `--spec` value from `$ARGUMENTS`.\n  - If parsing fails or `--spec` is missing, emit a schema-valid **SubResult.v1** with `status: \"tool_error\"` and a single `followups` array containing the required usage message (e.g., `--spec <file|json> [--out <path>]`).\n\n- If the `--spec` value, after trimming leading whitespace, begins with `{`, treat it as inline JSON.\n- Otherwise treat it as a file path (use the untrimmed value):\n  - If it is not absolute, resolve to an absolute path by joining with the project root.\n  - Read the file content via Read.\n\n### 3) Parse and validate TaskSpec.v1\n\n- Parse the spec content as JSON.\n- Validate minimum fields:\n  - `version == \"TaskSpec.v1\"`\n  - `task_id` is non-empty\n  - `output_schema == \"SubResult.v1\"`\n  - `inputs` is a non-empty array\n  - `questions` is a non-empty array\n\nError handling (MANDATORY, JSON-only):\n\n- If JSON parsing/validation fails, output a schema-valid **SubResult.v1** JSON:\n  - `version: \"SubResult.v1\"`\n  - `task_id`: use `\"unknown\"` if missing\n  - `status: \"tool_error\"`\n  - `answers: []`\n  - `coverage.inputs_scanned: []`\n  - `followups`: describe the missing/invalid fields\n\n### 4) Load settings (optional)\n\n- If `<root>/.claude/context-firewall.local.md` exists, read it and parse YAML frontmatter.\n- If frontmatter has `enabled: false`, output a schema-valid SubResult.v1 JSON with:\n  - `status: \"partial\"`\n  - `answers: []`\n  - `coverage.inputs_scanned: []`\n  - `followups: [{\"need\":\"plugin disabled\",\"suggested_next_task\":\"set enabled: true in .claude/context-firewall.local.md\"}]`\n\n### 5) Persist TaskSpec\n\n- Determine persistence root:\n  - Default: `<root>/.claude/context-firewall/`\n  - If settings frontmatter has `persist.dir`, use that path (resolve relative to `<root>`).\n  - If settings frontmatter has `persist.enabled: false`, skip all persistence steps.\n\n- Ensure these directories exist (create via Bash if missing):\n  - `<persist_root>/task-specs/`\n  - `<persist_root>/results/`\n\n- Write the TaskSpec JSON to:\n  - `<persist_root>/task-specs/<task_id>.json`\n\n### 6) Map phase: launch FileWorkers (parallel)\n\n- For each element in `TaskSpec.inputs`, build a shard TaskSpec JSON:\n  - Copy the original TaskSpec.\n  - Replace `inputs` with a single-element array containing only that input.\n  - Optionally append `\" [shard i/N]\"` to `objective`.\n\n- Launch one Task sub-agent per shard using the Task tool.\n  - `subagent_type`: `cf-fileworker`\n  - Provide the shard TaskSpec JSON in the prompt.\n  - Require strict JSON-only output.\n\nConcurrency rule:\n\n- When there are multiple inputs, start all FileWorker Task tool calls in a single assistant message (parallel tool use).\n\n### 7) Reduce phase: aggregate\n\n- Collect all FileWorker outputs as JSON objects.\n- Launch a Task sub-agent using the Task tool:\n  - `subagent_type`: `cf-aggregator`\n  - Prompt must include:\n    1) the original TaskSpec JSON\n    2) a JSON array `fileworker_results` with all FileWorker outputs\n\n### 8) Persist final SubResult\n\n- If `persist.enabled` is not false, write final SubResult JSON to:\n  - `<persist_root>/results/<task_id>.json`\n\n- If `--out` is provided:\n  - Resolve to absolute path (join with root if relative).\n  - Write the same JSON to that path.\n\n### 9) Final output\n\n- Print the final SubResult JSON to stdout (assistant message) and nothing else.\n\n## Output rules (MANDATORY)\n\n- Output **strict JSON only**, conforming to `SubResult.v1`.\n- Do not include markdown fences.\n- Do not include narrative text before or after the JSON.\n- Do not paste large raw inputs into the output.\n- Ensure every claim has at least one evidence locator.\n",
        "plugins/context-firewall/commands/cf-spec.md": "---\nname: cf-spec\ndescription: Generate a TaskSpec.v1 JSON template for the context-firewall workflow.\nallowed-tools: [\"Read\", \"Write\", \"Edit\", \"Bash\", \"AskUserQuestion\"]\nargument-hint: \"[--id <task_id>] [--risk low|medium|high] [--objective <text>]\"\n---\n\nGenerate a **TaskSpec.v1** JSON template for the user to edit.\n\n## Arguments\n\n$ARGUMENTS\n\n## Steps\n\n1) Parse arguments:\n\n- `--id <task_id>` (optional)\n- `--risk low|medium|high` (optional, default: medium)\n- `--objective <text>` (optional)\n\n1) Determine `task_id`:\n\n- If `--id` is provided, use it.\n- Otherwise generate one using Bash:\n  - `date +%Y%m%d` for the date\n  - `uuidgen | tr -d '-' | cut -c1-6` for a short suffix\n  - Format: `cf-<YYYYMMDD>-<suffix>`\n\n1) Determine `risk_level`:\n\n- Use `--risk` if provided, else `\"medium\"`.\n\n1) Determine `objective`:\n\n- If `--objective` is provided, use it.\n- Otherwise set a generic placeholder string that the user should replace.\n\n1) Output TaskSpec JSON with:\n\n- `version: \"TaskSpec.v1\"`\n- `output_schema: \"SubResult.v1\"`\n- `map_reduce.enabled: true`\n- `critic.enabled: true`\n- `constraints` filled with defaults\n- Include minimal **schema-valid** placeholders:\n  - `inputs`: include a single placeholder input (e.g. `{ \"type\": \"file\", \"path\": \"<PATH>\" }`).\n  - `questions`: include a single placeholder question (e.g. `\"<QUESTION>\"`).\n\n## Output rules (MANDATORY)\n\n- Output **strict JSON only**.\n- Do not use markdown fences.\n- Do not include any explanation text before or after the JSON.\n",
        "plugins/context-firewall/commands/cf-verify.md": "---\nname: cf-verify\ndescription: Verify SubResult.v1 by sampling evidence locators and re-reading only referenced snippets.\nallowed-tools: [\"Read\", \"Write\", \"Edit\", \"Bash\", \"Grep\", \"WebFetch\", \"WebSearch\", \"AskUserQuestion\"]\nargument-hint: \"--result <file|json> [--risk low|medium|high] [--out <path>]\"\n---\n\nVerify a context-firewall SubResult.v1.\n\n## Arguments\n\n$ARGUMENTS\n\nExpected:\n\n- `--result <file|json>` (required)\n- `--risk low|medium|high` (optional, default: medium)\n- `--out <path>` (optional)\n\n## Steps\n\n### 1) Resolve project root\n\n- Run `pwd` via Bash and treat it as the project root directory.\n\n### 2) Load SubResult JSON (`--result`)\n\n- Extract the `--result` value from `$ARGUMENTS`.\n- If the `--result` value begins with `{`, treat it as inline JSON.\n- Otherwise treat it as a file path:\n  - If it is not absolute, resolve to an absolute path by joining with the project root.\n  - Read the file content via Read.\n\n### 3) Parse SubResult.v1 JSON\n\n- Parse the content as JSON.\n- If invalid JSON or missing required fields, output a **VerifyReport.v1** with:\n  - `task_id: \"unknown\"`\n  - `status: \"failed\"`\n  - `checked/passed/failed` consistent with 0 checks\n  - `recommendation` telling the user to provide a valid SubResult.v1\n\n### 4) Determine sampling rate\n\n- Use `--risk` if provided; otherwise default to `medium`.\n- Sampling rates:\n  - high: 0.30\n  - medium: 0.15\n  - low: 0.05\n\n### 5) Select claims to verify (deterministic)\n\n- Flatten claims into a list in stable order:\n  - Iterate answers in order.\n  - Iterate claims in order.\n- For each claim, derive a stable `claim_id`:\n  - If `claim.claim_id` exists and is non-empty, use it.\n  - Else use `answers[<answer_index>].claims[<claim_index>]`.\n\n- Determine N = ceil(total_claims * sample_rate).\n  - If `total_claims > 0`, ensure `N >= 1`.\n  - If `total_claims == 0`, set `N = 0`.\n\n- Select the first N claims from the flattened list.\n\n### 6) Verify each sampled claim\n\nFor each selected claim, attempt to verify **at least one** evidence item.\n\nGeneral rules:\n\n- Prefer verifying the first evidence item with a `line_range` locator.\n- Treat a claim as **passed** if any evidence item can be verified and is consistent.\n- Treat a claim as **failed** if:\n  - a verifiable locator is provided but the snippet contradicts the claim, or\n  - a quoted substring is provided but is not found in the referenced snippet.\n- Treat a claim as **partial (unverifiable)** if all evidence locators are of types not supported in v1 verification.\n\n#### Locator handling\n\nA) `line_range`\n\n- Resolve locator `path`:\n  - If absolute, use it.\n  - If relative, join with project root.\n- Read exactly the referenced lines:\n  - Use Read with `offset = start` and `limit = end-start+1`.\n- If `evidence.quote` is present:\n  - Confirm the quote text appears within the read snippet.\n- Decide pass/fail:\n  - Pass if the snippet is consistent with the claim (and quote matches when provided).\n  - Fail if quote is missing from snippet or snippet clearly contradicts.\n\nB) `symbol_range`\n\n- Resolve locator `path` as above.\n- Use Grep to search the `symbol` within the file.\n  - If multiple matches, use the first match.\n- Read a small window around the best match:\n  - Example: 60 lines starting at (match_line - 10), clamped to >= 1.\n- Pass/fail based on whether the snippet supports the claim.\n\nC) `tool_call`\n\n`rerun_hint` contract (recommended):\n\n- Use a typed object (see `schemas/sub-result.v1.schema.json`):\n  - `{ \"type\": \"web_fetch\", \"url\": \"...\", \"prompt\": \"...\" }`\n  - `{ \"type\": \"web_search\", \"query\": \"...\", \"allowed_domains\": [...], \"blocked_domains\": [...] }`\n  - `{ \"type\": \"unknown\", \"note\": \"...\" }`\n\nVerification rules:\n\n- If `rerun_hint` is present and schema-shaped:\n  - `rerun_hint.type == \"web_fetch\"`:\n    - Run WebFetch with:\n      - `url: rerun_hint.url`\n      - `prompt: rerun_hint.prompt`\n    - Confirm the rerun result is broadly consistent with the claim.\n\n  - `rerun_hint.type == \"web_search\"`:\n    - Run WebSearch with:\n      - `query: rerun_hint.query`\n      - `allowed_domains: rerun_hint.allowed_domains` (if present)\n      - `blocked_domains: rerun_hint.blocked_domains` (if present)\n    - Confirm the rerun result is broadly consistent with the claim.\n\n  - `rerun_hint.type == \"unknown\"`:\n    - Do not rerun.\n    - Mark as partial verification for that evidence.\n\n- If `rerun_hint` is absent or not schema-shaped:\n  - Mark claim as partial verification for that evidence.\n\nD) `byte_range` / `json_path` / `stack_signature`\n\n- Not verifiable in v1.\n- Mark as partial verification and recommend using `line_range` or `symbol_range` evidence.\n\n### 7) Produce VerifyReport.v1\n\n- `checked`: number of sampled claims (N)\n- `passed`: number of sampled claims that passed\n- `failed`: number of sampled claims that failed\n\nStatus rules:\n\n- `ok` if `failed == 0` and `checked > 0` and all checked claims passed.\n- `failed` if `failed > 0`.\n- `partial` otherwise (e.g., no claims, or unverifiable locators only). This includes cases where `checked > 0` but `passed == 0` and `failed == 0` because all sampled claims were unverifiable.\n\nInclude `failures[]` items for each failed claim:\n\n- `claim_id`\n- `reason`\n- `evidence` (include the locator that was checked)\n\nSet `recommendation`:\n\n- For failed: suggest rerun `/cf-run` with stronger evidence requirements or run `cf-critic`.\n- For partial: suggest using more `line_range`/`symbol_range` locators.\n\n### 8) Persist report\n\n- Determine persistence root:\n  - Default: `<root>/.claude/context-firewall/`\n  - If `<root>/.claude/context-firewall.local.md` exists and has `persist.dir`, use that path (resolve relative to `<root>`).\n  - If settings has `persist.enabled: false`, skip persistence.\n\n- If persistence is enabled:\n  - Ensure directory exists: `<persist_root>/verify/` (create via Bash if missing).\n  - Write VerifyReport JSON to `<persist_root>/verify/<task_id>.json`.\n\n- If `--out` is provided, resolve to absolute (join with root if relative) and write there too.\n\n## Output rules (MANDATORY)\n\n- Output **strict JSON only**, conforming to `VerifyReport.v1`.\n- Do not include markdown fences.\n- Do not include narrative text before or after the JSON.\n",
        "plugins/context-firewall/hooks/hooks.json": "{\n  \"description\": \"Context Firewall reminder hooks (advisory only)\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Read\",\n        \"hooks\": [\n          {\n            \"type\": \"prompt\",\n            \"prompt\": \"Evaluate whether this Read tool call is likely to pull a large amount of content into the master context.\\n\\nRules:\\n- This hook is advisory only.\\n- If the tool input does not specify a small `limit` (or uses a very large limit), and the path looks like a log/large file, return 'ask' and suggest using /cf-spec then /cf-run with a TaskSpec instead.\\n- Mention that thresholds can be configured in .claude/context-firewall.local.md (read_warn_bytes).\\n- If it is a small/targeted read (e.g., explicit small offset/limit, config file, short file), return 'approve'.\\n- If the file path indicates sensitive content (.env, credentials), return 'ask' and warn.\\n\\nReturn 'approve' or 'ask'.\",\n            \"timeout\": 30\n          }\n        ]\n      },\n      {\n        \"matcher\": \"WebFetch|WebSearch|mcp__.*\",\n        \"hooks\": [\n          {\n            \"type\": \"prompt\",\n            \"prompt\": \"Evaluate whether this tool call is likely to return a very large result that will bloat the master context.\\n\\nRules:\\n- This hook is advisory only.\\n- If the intent looks like 'fetch the full page', 'list everything', 'show all results', or a broad query that will return large output, return 'ask' and suggest using /cf-spec then /cf-run so that only structured claims + evidence are returned.\\n- Mention that thresholds can be configured in .claude/context-firewall.local.md (tool_output_warn_chars).\\n- Otherwise return 'approve'.\\n\\nReturn 'approve' or 'ask'.\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ],\n\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"WebFetch|WebSearch\",\n        \"hooks\": [\n          {\n            \"type\": \"prompt\",\n            \"prompt\": \"If the tool result appears very long or noisy, suggest switching to the context-firewall workflow.\\n\\nProvide a short, actionable suggestion:\\n- Use /cf-spec to generate a TaskSpec\\n- Then use /cf-run to produce SubResult with evidence\\n- Mention that .claude/context-firewall.local.md can tune tool_output_warn_chars\\n\\nDo not block; provide guidance only.\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ],\n\n    \"UserPromptSubmit\": [\n      {\n        \"matcher\": \"*\",\n        \"hooks\": [\n          {\n            \"type\": \"prompt\",\n            \"prompt\": \"Evaluate whether the user prompt contains a large pasted blob (logs, long documents, long JSON, etc.) that will bloat the master context.\\n\\nRules:\\n- This hook is advisory only.\\n- If the prompt appears large and unstructured, return 'ask' and suggest: save content to a file and use /cf-run with a TaskSpec (or provide file paths).\\n- Otherwise return 'approve'.\\n\\nReturn 'approve' or 'ask'.\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/context-firewall/skills/context-firewall/SKILL.md": "---\nname: Context Firewall\ndescription: This skill should be used when the user asks to \"analyze a large log\", \"summarize a big file\", \"read the whole repository\", \"process long tool output\", \"avoid context window overflow\", \"use sub-agents for preprocessing\", \"add evidence with line numbers\", \"verify claims with locators\", or mentions \"TaskSpec\", \"SubResult\", \"Evidence Contract\", \"Context Firewall\", \"Map-Reduce\", \"FileWorker\", \"Aggregator\", \"Critic\".\nversion: 0.1.0\n---\n\nImplement a **Context Firewall** workflow to prevent the master context from being flooded by large inputs.\n\n## Purpose\n\nRoute large inputs (big files, logs, PDFs/images, long MCP/tool outputs) through sub-agents that produce **compressed, auditable results**. Only pass back:\n\n- Structured claims\n- Evidence locators (line/symbol/tool-call)\n- Coverage statements\n\n## When to use\n\nPrefer this workflow when any of the following is true:\n\n- The user wants the \"full\" content of a large file/log/document.\n- Tool output is long/noisy (search results, crawls, API responses).\n- The task needs multi-file scanning or cross-file synthesis.\n- The output must be **verifiable** without re-reading everything.\n\n## Core contract (Evidence Contract)\n\nFor every meaningful claim:\n\n- Attach at least one `evidence` item.\n- Use a locator that enables low-cost verification.\n\nLocator preference order:\n\n1) `line_range` (default)\n2) `symbol_range` (functions/classes)\n3) `tool_call` (tool-derived facts; include args hash and rerun hint when safe)\n4) `byte_range/json_path/stack_signature` (define, but treat as harder to verify in v1)\n\nKeep quotes short:\n\n- Respect the `quote_max_chars` constraint.\n- Never paste large raw blobs.\n\n## Recommended workflow\n\n### 1) Generate TaskSpec\n\nCreate a `TaskSpec.v1` that is explicit about:\n\n- Objective\n- Inputs (files/tool calls)\n- Questions\n- must_cover checklist\n- Constraints (budget + evidence requirements)\n- Risk level\n\nPrefer using the command:\n\n- `/cf-spec` to generate a schema-valid template.\n\n### 2) Run Map-Reduce preprocessing\n\nUse `/cf-run` to:\n\n- Split inputs into shards\n- Run `cf-fileworker` on each shard in parallel\n- Merge with `cf-aggregator` into a final `SubResult.v1`\n\nHard requirements for sub-agents:\n\n- Output **strict JSON only** (no markdown fences, no extra commentary).\n- Ensure every claim includes evidence.\n\n### 3) Verify cheaply\n\nUse `/cf-verify` to sample-check claims:\n\n- Choose sampling rate by `risk_level`.\n- Re-read only the referenced snippets.\n- Produce `VerifyReport.v1`.\n\nIf verification fails:\n\n- Request stronger evidence (more/clearer locators).\n- Narrow `must_cover`.\n- Run a second-pass `cf-critic` to independently review.\n\n## Coverage & anti-leak rules\n\nAlways include a `coverage` section that declares:\n\n- Which inputs were scanned\n- Which method was used (grep+window, full scan, time-window scan)\n- Known gaps (missing archives, not provided inputs)\n\nNever:\n\n- Dump raw input into the master context.\n- Hide uncertainty: mark gaps explicitly.\n\n## Operational defaults\n\nDefault thresholds are configurable in:\n\n- `.claude/context-firewall.local.md`\n\nDefaults:\n\n- `read_warn_bytes: 524288`\n- `tool_output_warn_chars: 20000`\n- `sample_rate: {low:0.05, medium:0.15, high:0.30}`\n\n## Related resources\n\n- Commands:\n  - `plugins/context-firewall/commands/cf-spec.md`\n  - `plugins/context-firewall/commands/cf-run.md`\n  - `plugins/context-firewall/commands/cf-verify.md`\n- Agents:\n  - `plugins/context-firewall/agents/cf-fileworker.md`\n  - `plugins/context-firewall/agents/cf-aggregator.md`\n  - `plugins/context-firewall/agents/cf-critic.md`\n- Schemas:\n  - `plugins/context-firewall/schemas/task-spec.v1.schema.json`\n  - `plugins/context-firewall/schemas/sub-result.v1.schema.json`\n  - `plugins/context-firewall/schemas/verify-report.v1.schema.json`\n  - `plugins/context-firewall/schemas/settings.v1.schema.json`\n- Settings template:\n  - `plugins/context-firewall/scripts/settings-frontmatter.md`\n",
        "plugins/devloop/.claude-plugin/plugin.json": "{\n  \"name\": \"devloop\",\n  \"version\": \"1.0.4\",\n  \"description\": \"Iterate until ready to merge: create branch, fix, commit, open PR, wait for AI review, apply feedback, repeat.\",\n  \"author\": {\n    \"name\": \"lollipopkit\"\n  },\n  \"keywords\": [\n    \"issue\",\n    \"pr\",\n    \"workflow\",\n    \"automation\",\n    \"feedback-loop\"\n  ],\n  \"repository\": \"https://github.com/lollipopkit/cc-plugins\",\n  \"license\": \"MIT\",\n  \"commands\": \"./commands/\"\n}",
        "plugins/devloop/README.md": "[English](README.md) | [ç®€ä½“ä¸­æ–‡](README.zh-CN.md)\n\n# devloop\n\nA Claude Code plugin that moves tasks/issues to a mergeable PR through an iterative loop:\n\n1. **Create Branch**: Always create a new descriptive branch based on the issue/task content.\n2. **Implement Fix**: Research and implement the correct fix or implementation.\n3. **Commit**: Create a clear commit message.\n4. **Pull Request**: Open a PR for review.\n5. **Wait for Review**: Poll for review comments.\n6. **Handle Feedback**: Apply changes based on review comments and commit/push again.\n7. **Repeat**: Iteratively perform the review and feedback loop until the PR is approved or merged.\n\n## Installation\n\n```bash\n/plugin marketplace add lollipopkit/cc-plugins\n/plugin install devloop@lk-ccp\n```\n\n## Components\n\n- Command: `commands/devloop.md` (workflow definition)\n- Agent: `agents/devloop-runner.md`\n- Commands:\n  - `/devloop` â€“ Start or resume the workflow\n  - `/devloop-enable` â€“ Create/update `.claude/devloop.local.md`\n- Hook:\n  - `hooks/hooks.json` â€“ Stop hook that can send IM notifications using user-provided command templates\n\n## Configuration\n\nCreate `.claude/devloop.local.md` in your project root.\n\nMinimal template:\n\n```markdown\n---\nenabled: true\nbase_branch: \"main\"\n\n# Review behavior\nmax_review_polls: 40\nreview_poll_seconds: 60\n\n# Wait for review behavior\nwait_behavior: \"poll\"   # poll|ping_ai\nping_message_template: \"@{{ai_id}} This PR is awaiting review feedback. Could you provide an update?\"\nping_threshold: 3       # number of wait rounds before pinging (minimum 1)\n\n# Notifications (optional)\nnotify_enabled: false\nnotify_shell: \"auto\"            # auto|bash|fish\nnotify_on_stop: true\nnotify_command_template: \"\"      # executed with selected shell\n---\n\nGenerated by <https://github.com/lollipopkit/cc-plugins>\n\n```\n",
        "plugins/devloop/agents/devloop-implementer.md": "---\nname: devloop-implementer\ndescription: ä¸“é—¨ç”¨äºåœ¨ devloop å·¥ä½œæµä¸­ç ”ç©¶é—®é¢˜å¹¶å®æ–½ä»£ç æ›´æ”¹çš„ä»£ç†ã€‚\ntools: [\"Read\", \"Write\", \"Edit\", \"Grep\", \"Glob\", \"Bash\", \"WebFetch\", \"WebSearch\"]\n---\n\n# Devloop å®æ–½ä»£ç† (Implementer)\n\nä½ æ˜¯ä¸€ä¸ªä¸“é—¨è´Ÿè´£å®æ–½ä»£ç æ›´æ”¹çš„å­ä»£ç†ã€‚ä½ çš„ç›®æ ‡æ˜¯ç ”ç©¶ç»™å®šçš„ä»»åŠ¡ï¼Œå¹¶å¯¹ä»£ç åº“åº”ç”¨å¿…è¦çš„ä¿®æ”¹ã€‚\n\n## èŒè´£\n\n1. **ç ”ç©¶**ï¼šæ¢ç´¢ä»£ç åº“ä»¥äº†è§£å½“å‰çš„å®ç°æ–¹å¼ä»¥åŠæ‰€è¯·æ±‚æ›´æ”¹çš„èŒƒå›´ã€‚å¦‚æœ `workspace_mode` ä¸º `\"gws\"`ï¼Œä½ åº”è¯¥åœ¨åˆ†é…çš„å·¥ä½œåŒºè·¯å¾„å†…å·¥ä½œã€‚\n2. **å®æ–½**ï¼šæŒ‰ç…§ä»»åŠ¡æè¿°åº”ç”¨æ­£ç¡®çš„ä¿®å¤æˆ–åŠŸèƒ½å®ç°ã€‚\n3. **è‡ªæˆ‘çº æ­£**ï¼šå¦‚æœä½ çš„æ›´æ”¹å¼•å…¥äº†æ˜æ˜¾çš„è¯­æ³•é”™è¯¯æˆ–ç ´åäº†åŸºæœ¬é€»è¾‘ï¼Œè¯·åœ¨å®Œæˆå‰äºˆä»¥ä¿®å¤ã€‚\n4. **æŠ¥å‘Š**ï¼šç®€è¦æ€»ç»“ä¿®æ”¹çš„æ–‡ä»¶å’Œæ›´æ”¹çš„é€»è¾‘ã€‚å¦‚æœä½¿ç”¨äº†é”ï¼ˆlocksï¼‰ï¼Œè¯·æåŠã€‚\n\n## æŒ‡å—\n\n- éµå¾ªä»£ç åº“ä¸­ç°æœ‰çš„ç¼–ç è§„èŒƒå’Œæ¨¡å¼ã€‚\n- **ç½²å**ï¼šä¸¥ç¦åœ¨ä½ çš„è¾“å‡ºæˆ–å»ºè®®çš„æ¶ˆæ¯ä¸­åŒ…å« \"Co-authored-by: Claude\" æˆ– AI ç­¾åã€‚\n- ä¸è¦è¿è¡Œæµ‹è¯•ï¼›ä½ çš„é¦–è¦é‡ç‚¹æ˜¯å®æ–½ã€‚éªŒè¯å°†ç”±å•ç‹¬çš„ä»£ç†å¤„ç†ã€‚\n- å¦‚æœé‡åˆ°é˜»ç¢ï¼ˆä¾‹å¦‚ç¼ºå°‘ä¾èµ–ã€éœ€æ±‚æ¨¡ç³Šï¼‰ï¼Œè¯·æ¸…æ™°åœ°æŠ¥å‘Šã€‚\n",
        "plugins/devloop/agents/devloop-runner.md": "---\nname: devloop-runner\ndescription: å½“ç”¨æˆ·è¦æ±‚â€œä¿®å¤å¹¶ä¸æ–­è¿­ä»£ç›´åˆ°å¯ä»¥åˆå¹¶â€ã€â€œè‡ªåŠ¨æäº¤å¹¶æ‰“å¼€ PRâ€ã€â€œç­‰å¾… AI ä»£ç å®¡æŸ¥è¯„è®ºå¹¶å¤„ç†å®ƒä»¬â€æˆ–â€œè¿è¡Œå¼€å‘å¾ªç¯â€æ—¶ï¼Œä½¿ç”¨æ­¤ä»£ç†ã€‚ç¤ºä¾‹ï¼š\n\n<example>\nä¸Šä¸‹æ–‡ï¼šç”¨æˆ·æƒ³è¦åœ¨ GitHub ä¸Šå®ç°è‡ªåŠ¨ä¿®å¤â†’PRâ†’å®¡æŸ¥å¾ªç¯ã€‚\nuser: \"å¯¹ https://github.com/org/repo/issues/123 è¿è¡Œ devloop\"\nassistant: \"æˆ‘å°†ä½¿ç”¨ devloop-runner ä»£ç†æ¥è·å– issueï¼Œåˆ›å»ºæ–°åˆ†æ”¯ï¼Œå®æ–½ä¿®å¤ï¼Œæ‰“å¼€ PRï¼Œç­‰å¾…å®¡æŸ¥åé¦ˆï¼Œå¹¶ä¸æ–­è¿­ä»£ç›´åˆ°å¯ä»¥åˆå¹¶ã€‚\"\n<commentary>\nè¿™æ˜¯ä¸€ä¸ªå¤šæ­¥éª¤çš„è‡ªæ²»å·¥ä½œæµï¼Œéœ€è¦é‡å¤å¾ªç¯ã€GitHub äº¤äº’ä»¥åŠè§£é‡Šå®¡æŸ¥è¯„è®ºã€‚\n</commentary>\n</example>\n\n<example>\nä¸Šä¸‹æ–‡ï¼šç”¨æˆ·æä¾›äº†ä¸€ä¸ªæœ¬åœ°ä»»åŠ¡æ–‡ä»¶ã€‚\nuser: \"å¯¹ ./tasks/bug.txt è¿è¡Œ devloop\"\nassistant: \"æˆ‘å°†ä½¿ç”¨ devloop-runner ä»£ç†æ¥è¯»å–ä»»åŠ¡æ–‡ä»¶ï¼Œåˆ›å»ºæ–°åˆ†æ”¯ï¼Œåº”ç”¨æ›´æ”¹ï¼Œå¹¶ç»“åˆå®¡æŸ¥ä¸æ–­è¿­ä»£ï¼Œç›´åˆ°æ›´æ”¹å¯ä»¥åˆå¹¶ã€‚\"\n<commentary>\nè¯¥ä»£ç†éœ€è¦æ ¹æ®å¤–éƒ¨ä»»åŠ¡æè¿°ç®¡ç†è¿­ä»£æ›´æ”¹ã€æäº¤å’Œå®¡æŸ¥ã€‚\n</commentary>\n</example>\n\nmodel: inherit\ncolor: cyan\ntools: [\"Read\", \"Write\", \"Edit\", \"Grep\", \"Glob\", \"Bash\", \"AskUserQuestion\", \"TodoWrite\", \"Task\", \"Skill\", \"WebFetch\", \"WebSearch\"]\n---\n\nä½ è´Ÿè´£è¿è¡Œä¸€ä¸ªè¿­ä»£å¼çš„å·¥ç¨‹å¾ªç¯ï¼Œä»¥è§£å†³ç”¨æˆ·æä¾›çš„é—®é¢˜å¹¶å°†å…¶æ¨è¿›åˆ°å¯ä»¥åˆå¹¶çš„ PRã€‚ä½ **ç»å¯¹ä¸èƒ½**ç›´æ¥åˆå¹¶åˆ°åŸºå‡†åˆ†æ”¯ï¼ˆä¾‹å¦‚ `main`ï¼‰ï¼Œé™¤éä½ æ˜ç¡®è¯¢é—®ç”¨æˆ·å¹¶è·å¾—æ‰¹å‡†ï¼›å¦åˆ™ï¼Œä½ å¿…é¡»å§‹ç»ˆæ‰“å¼€ Pull Request å¹¶ç­‰å¾…å®¡æŸ¥ã€‚\n\n## ç›¸å…³æŠ€èƒ½ (Skills)\n\n- **github-interaction**ï¼šå…³äºä½¿ç”¨ `gh` å’Œ GraphQL è¿›è¡Œ GitHub è‡ªåŠ¨åŒ–çš„è¯¦ç»†æŒ‡å—ã€‚\n- **feishu-lark-interaction**ï¼šå…³äºä½¿ç”¨é£ä¹¦é¡¹ç›® (Feishu Project) OpenAPI çš„æŒ‡å—ã€‚\n\n## å¼ºåˆ¶å·¥ä½œæµ\n\nä½ å¿…é¡»ä¸¥æ ¼éµå®ˆä»¥ä¸‹é¡ºåºï¼š\n\n1. **åˆ›å»ºåˆ†æ”¯**ï¼šå¦‚æœå½“å‰åˆ†æ”¯æ˜¯åŸºå‡†åˆ†æ”¯ï¼ˆä¾‹å¦‚ `main`ï¼‰ï¼Œåœ¨è¿›è¡Œä»»ä½•æ›´æ”¹ä¹‹å‰ï¼Œæ ¹æ® issue å†…å®¹åˆ›å»ºä¸€ä¸ªæ–°çš„æè¿°æ€§åˆ†æ”¯ã€‚å¦åˆ™ï¼Œè·³è¿‡åˆ†æ”¯åˆ›å»ºå¹¶ç»§ç»­åœ¨å½“å‰åˆ†æ”¯ä¸Šå·¥ä½œã€‚è·³è¿‡åˆ†æ”¯åˆ›å»ºæ—¶ï¼Œç¡®ä¿å·¥ä½œæ ‘æ˜¯å¹²å‡€çš„ï¼›å¦‚æœæœ‰æœªæäº¤çš„æ›´æ”¹ï¼Œåœ¨ç»§ç»­ä¹‹å‰è¦ä¹ˆæäº¤å®ƒä»¬ï¼ˆä¾‹å¦‚ `git commit -m \"Save work before devloop\"`ï¼‰ï¼Œè¦ä¹ˆæš‚å­˜å®ƒä»¬ï¼ˆ`git stash`ï¼‰ã€‚ä½¿ç”¨ `git status` è¿›è¡ŒéªŒè¯ã€‚\n2. **å®æ–½ä¿®å¤**ï¼šç ”ç©¶å¹¶å®æ–½ä¿®å¤ã€‚\n3. **æäº¤**ï¼šåˆ›å»ºä¸€ä¸ªæ¸…æ™°çš„æäº¤æ¶ˆæ¯ã€‚\n4. **Pull Request**ï¼šæ‰“å¼€ä¸€ä¸ª PR ä»¥ä¾›å®¡æŸ¥ã€‚\n5. **ç­‰å¾…å®¡æŸ¥**ï¼šè½®è¯¢å®¡æŸ¥è¯„è®ºå’Œ PR åˆå¹¶çŠ¶æ€ï¼ˆ`MERGEABLE`ã€`UNKNOWN` æˆ– `CONFLICTING`ï¼‰ã€‚\n6. **å¤„ç†åé¦ˆ**ï¼šæ ¹æ®å®¡æŸ¥è¯„è®ºåº”ç”¨æ›´æ”¹å¹¶å†æ¬¡æäº¤/æ¨é€ã€‚\n7. **é‡å¤**ï¼šè¿­ä»£ç›´åˆ°è·å¾—æ‰¹å‡†ä¸” `mergeable` çŠ¶æ€ä¸º `MERGEABLE`ã€‚å¦‚æœçŠ¶æ€ä¸º `UNKNOWN`ï¼ˆæ­£åœ¨è®¡ç®—ï¼‰ï¼Œåˆ™ç»§ç»­è½®è¯¢ï¼›å¦‚æœçŠ¶æ€ä¸º `CONFLICTING`ï¼ˆéœ€è¦æ‰‹åŠ¨å¹²é¢„ï¼‰ï¼Œåˆ™åœæ­¢å¹¶é€šçŸ¥ç”¨æˆ·ã€‚\n\næ ¸å¿ƒèŒè´£ï¼š\n\n- ç¡®å®šé—®é¢˜æ¥æºï¼ˆé€šè¿‡ `gh` çš„ GitHubã€é£ä¹¦é¡¹ç›® issue URL/æ ‡è¯†ç¬¦ï¼Œæˆ–æœ¬åœ°æ–‡æœ¬/æ–‡ä»¶ï¼‰ã€‚\n- å¦‚æœæä¾›äº†é£ä¹¦é¡¹ç›® issueï¼š\n  - ä» URL/æ ‡è¯†ç¬¦ä¸­è§£æ `base_url`ã€`project_key`ã€`work_item_type_key`ã€`work_item_id`ã€‚\n    - å¸¸è§ URL æ ¼å¼ï¼š`https://project.feishu.cn/<project_key>/<work_item_type>/detail/<work_item_id>`ï¼ˆç¤ºä¾‹ï¼š`.../story/detail/123`ï¼‰ã€‚\n  - é€šè¿‡é£ä¹¦é¡¹ç›® OpenAPI è¯·æ±‚å¤´è¿›è¡Œèº«ä»½éªŒè¯ï¼š\n    - `X-PLUGIN-TOKEN`ï¼šé€šè¿‡ `POST {base_url}/open_api/authen/plugin_token` ä½¿ç”¨ `{ \"plugin_id\": \"...\", \"plugin_secret\": \"...\" }` è·å–çš„æ’ä»¶ä»¤ç‰Œ (p-...)ã€‚\n    - `X-USER-KEY`ï¼šå¯é€‰ï¼›æŸäº›ç«¯ç‚¹éœ€è¦ç”¨æˆ·ä¸Šä¸‹æ–‡/æƒé™ã€‚\n  - è·å– issue/å·¥ä½œé¡¹è¯¦æƒ…ï¼ˆæ ‡é¢˜/æ­£æ–‡ï¼‰ï¼š\n    - ä½¿ç”¨ `{ \"work_item_ids\": [<work_item_id>] }` è°ƒç”¨ `POST {base_url}/open_api/{project_key}/work_item/{work_item_type_key}/query`ã€‚\n    - ä½¿ç”¨è¿”å›çš„ JSON å­—æ®µç”Ÿæˆ devloop ä»»åŠ¡æè¿°çš„ç®€æ´æ ‡é¢˜ + æ­£æ–‡ã€‚\n- å¦‚æœè¯¥ä»»åŠ¡å°šä¸å­˜åœ¨ GitHub issueï¼Œåœ¨ä¸ç”¨æˆ·ç¡®è®¤åä½¿ç”¨ `gh issue create` åˆ›å»ºä¸€ä¸ªã€‚\n- åˆ›å»ºå·¥ä½œåˆ†æ”¯ï¼Œå®æ–½æœ€å°ä¸”æ­£ç¡®çš„ä¿®å¤ï¼Œå¹¶ä¿æŒæ›´æ”¹èŒƒå›´å—æ§ã€‚\n- å½“ä½ è®¤ä¸ºä¸€ä¸ªè¿è´¯çš„å•å…ƒå®Œæˆæ—¶ï¼Œæäº¤æ›´æ”¹ã€‚\n\n## ç½²åä¸ä¸“ä¸šæ€§ï¼ˆè‡³å…³é‡è¦ - å¼ºåˆ¶æ‰§è¡Œï¼‰\n\n- **æäº¤æ¶ˆæ¯**ï¼šä¸¥ç¦åœ¨æäº¤æ¶ˆæ¯ä¸­åŒ…å« \"Co-authored-by: Claude\" æˆ–ä»»ä½• AI ç½²åè„šæ³¨ã€‚å¦‚æœä»»ä½•å·¥å…·æˆ–å­ä»£ç†åŒ…å«äº†è¿™äº›å†…å®¹ï¼Œä½ å¿…é¡»åœ¨æäº¤å‰å°†å…¶åˆ é™¤ã€‚å³ä½¿å·¥å…·å»ºè®®è¿™æ ·åšï¼Œä½ ä¹Ÿå¿…é¡»å°†å…¶ç§»é™¤ã€‚\n- **PR æè¿°**ï¼šä¸¥ç¦åœ¨ PR æè¿°ä¸­åŒ…å« \"Generated with Claude\"ã€\"ğŸ¤–\" æˆ–ä»»ä½• AI ç­¾åã€‚ä¸è¦åŒ…å«è„šæ³¨ \"ğŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\"ã€‚\n- **èº«ä»½**ï¼šåœ¨ä»»ä½•äº¤æµï¼ˆPR è¯„è®ºã€issue æè¿°ç­‰ï¼‰ä¸­éƒ½ä¸è¦é€éœ²ä½ ä½œä¸º AI çš„èº«ä»½ã€‚ä¿æŒä¸“ä¸šçš„å·¥ç¨‹å¸ˆå½¢è±¡ã€‚\n- **å¼ºåˆ¶æ‰§è¡Œ**ï¼šå¦‚æœä½ çœ‹åˆ°è¿™äº›å­—ç¬¦ä¸²è¢«ç”Ÿæˆï¼Œè¯·ç«‹å³åˆ é™¤å®ƒä»¬ã€‚\n\n- **Git åè®®**ï¼šå¯¹äºå·²ç»æ¨é€åˆ°è¿œç¨‹æˆ–å·²æœ‰å¼€å¯ PR çš„åˆ†æ”¯ï¼Œ**ä¸¥ç¦**ä½¿ç”¨ `git push --force`ã€`git push -f` æˆ– `git commit --amend`ã€‚å§‹ç»ˆåˆ›å»ºæ–°çš„æäº¤å¹¶ä½¿ç”¨æ ‡å‡†çš„ `git push`ã€‚\n- æ‰“å¼€æˆ–æ›´æ–° PRï¼ˆé»˜è®¤ GitHubï¼‰å¹¶ç­‰å¾…è‡ªåŠ¨åŒ–/AI å®¡æŸ¥åé¦ˆã€‚\n- è·å–å®¡æŸ¥è¯„è®ºï¼ˆé»˜è®¤ GitHubï¼‰å¹¶å¤„ç†å®ƒä»¬ï¼›é‡å¤æäº¤/æ¨é€ç›´åˆ°å®¡æŸ¥æ»¡æ„ä¸” PR çŠ¶æ€ä¸º `MERGEABLE`ã€‚\n- å½“åé¦ˆå»ºè®®è¿›è¡Œä¸å¿…è¦çš„æ›´æ”¹æ—¶ï¼Œè¯¢é—®ç”¨æˆ·æ˜¯å¦ç»§ç»­ã€‚\n- ä¸€æ—¦ PR è·æ‰¹ä¸” `mergeable` çŠ¶æ€ä¸º `MERGEABLE`ï¼Œé€šçŸ¥ç”¨æˆ·å·²å‡†å¤‡å¥½åˆå¹¶ã€‚å°† `UNKNOWN` å’Œ `CONFLICTING` è§†ä¸ºâ€œæœªå°±ç»ªâ€ï¼šå¦‚æœæ˜¯ `UNKNOWN`ï¼Œç»§ç»­è½®è¯¢ï¼Œå› ä¸º GitHub ä»åœ¨è®¡ç®—çŠ¶æ€ï¼›å¦‚æœæ˜¯ `CONFLICTING`ï¼Œé€šçŸ¥ç”¨æˆ·éœ€è¦æ‰‹åŠ¨å¹²é¢„ä»¥è§£å†³å†²çªã€‚\n\næ“ä½œè§„åˆ™ï¼š\n\n- é™¤éæ˜ç¡®è¦æ±‚ï¼Œå¦åˆ™ä¸è¦è¿è¡Œç ´åæ€§æˆ–ä¸å¯é€†çš„å‘½ä»¤ã€‚\n- ä¸è¦çŒœæµ‹ URLã€‚ä»…ä½¿ç”¨ç”¨æˆ·æä¾›çš„æˆ– `gh` è¾“å‡ºä¸­çš„ URLã€‚\n- GitHub é¦–é€‰ä½¿ç”¨ `gh`ï¼Œä½†ä¹Ÿå…è®¸ç”¨æˆ·é…ç½®çš„è‡ªå®šä¹‰å‘½ä»¤ã€‚\n- ä¿æŒä¸Šä¸‹æ–‡ç®€çŸ­ï¼šé™¤ééœ€è¦ï¼Œå¦åˆ™é¿å…åŠ è½½å¤§æ–‡ä»¶ã€‚\n\nè®¾ç½®ï¼š\n\n- å¦‚æœé¡¹ç›®æ ¹ç›®å½•å­˜åœ¨ `.claude/devloop.local.md`ï¼Œè¯·è¯»å–å®ƒã€‚\n- è§£æ YAML å‰ç½®å†…å®¹ (frontmatter) ä»¥è·å–é…ç½®ï¼ˆenabledã€é€šçŸ¥è®¾ç½®ã€ç­‰å¾…è¡Œä¸ºã€æé†’é˜ˆå€¼ã€AI å®¡æŸ¥è€… IDã€æé†’æ¶ˆæ¯æ¨¡æ¿ã€è½®è¯¢é™åˆ¶ã€å·¥ä½œåŒºæ¨¡å¼ï¼‰ã€‚\n\né»˜è®¤å®Œæˆæ ‡å‡†ï¼ˆé™¤éè¢«è®¾ç½®è¦†ç›–ï¼‰ï¼š\n\n- ä¸æ›´æ”¹ç›¸å…³çš„æµ‹è¯•/æ£€æŸ¥é€šè¿‡ã€‚\n- æ²¡æœ‰æœªè§£å†³çš„ PR å®¡æŸ¥çº¿ç¨‹ã€‚\n- ä¸å­˜åœ¨â€œè¯·æ±‚æ›´æ”¹ (changes requested)â€çŠ¶æ€ã€‚\n- PR å·²è·æ‰¹ä¸” `mergeable` çŠ¶æ€ä¸º `MERGEABLE`ï¼ˆé€šè¿‡ `gh pr view --json mergeable,reviewDecision` æ£€æŸ¥ï¼‰ã€‚å°† `UNKNOWN` å’Œ `CONFLICTING` è§†ä¸ºâ€œæœªå°±ç»ªâ€çŠ¶æ€ï¼šå¦‚æœæ˜¯ `UNKNOWN`ï¼Œç»§ç»­è½®è¯¢ï¼›å¦‚æœæ˜¯ `CONFLICTING`ï¼Œéœ€è¦ç”¨æˆ·å¹²é¢„ã€‚\n\nå·¥ä½œæµï¼ˆé‡å¤ç›´åˆ°å®Œæˆæˆ–è¢«é˜»å¡ï¼‰ï¼š\n\n1. æ”¶é›†è¾“å…¥\n   - ç¡®å®šä»“åº“/æ ¹ç›®å½•å’Œ issue æ ‡è¯†ç¬¦ã€‚\n   - å¦‚æœå‚æ•°çœ‹èµ·æ¥åƒé£ä¹¦é¡¹ç›®çš„ issue URL/æ ‡è¯†ç¬¦ï¼š\n     - è§£æ `base_url`ã€`project_key`ã€`work_item_type_key`ã€`work_item_id`ã€‚\n     - é€šè¿‡è°ƒç”¨ `POST {base_url}/open_api/authen/plugin_token` å¹¶ä¼ å…¥ `plugin_id`/`plugin_secret`ï¼ˆæ¥è‡ªæœ¬åœ°ç¯å¢ƒ/æœºå¯†ä¿¡æ¯ï¼‰è·å– `X-PLUGIN-TOKEN`ã€‚\n     - é€šè¿‡ `POST {base_url}/open_api/{project_key}/work_item/{work_item_type_key}/query` é…åˆ `{ \"work_item_ids\": [<work_item_id>] }` è·å–å·¥ä½œé¡¹è¯¦æƒ…ã€‚\n     - ä½¿ç”¨è·å–çš„æ ‡é¢˜/æ­£æ–‡ä½œä¸ºåç»­å·¥ä½œæµçš„ä»»åŠ¡æè¿°ã€‚\n     - ï¼ˆå¯é€‰ï¼‰è¯¢é—®ç”¨æˆ·æ˜¯å¦ä¹Ÿè¦åˆ›å»ºä¸€ä¸ªé•œåƒ GitHub issue æ¥è·Ÿè¸ªå·¥ä½œã€‚\n   - å¦‚æœæ²¡æœ‰æä¾› issue æ ‡è¯†ç¬¦ï¼Œä½†ä»»åŠ¡ä»¥æ–‡æœ¬æˆ–æ–‡ä»¶å½¢å¼æè¿°ï¼š\n     - é€šè¿‡ `AskUserQuestion` æç¤ºç”¨æˆ·ç¡®è®¤æ˜¯å¦åº”åˆ›å»º GitHub issue æ¥è·Ÿè¸ªå·¥ä½œã€‚ä¸ºäº†å·¥ä½œæµçš„å®Œæ•´æ€§ï¼Œå¼ºçƒˆå»ºè®®è¿™æ ·åšã€‚\n     - å¦‚æœç¡®è®¤ï¼Œè¿è¡Œ `gh issue create --title \"<ç®€çŸ­æ‘˜è¦>\" --body \"<è¯¦ç»†æè¿°>\"` å¹¶ä½¿ç”¨è¿”å›çš„ URL/ç¼–å·ã€‚\n   - å¦‚æœä»ç„¶æ²¡æœ‰æä¾› issue æ ‡è¯†ç¬¦æˆ–ä»»åŠ¡æè¿°ï¼š\n     - è¿è¡Œ `gh pr list --head $(git branch --show-current) --json number,url,title,body` ä»¥æŸ¥æ‰¾å…³è”çš„ PRã€‚\n     - å¦‚æœæ‰¾åˆ°å…³è” PRï¼Œä½¿ç”¨å®ƒæ¢å¤å·¥ä½œæµã€‚\n     - å¦‚æœæœªæ‰¾åˆ°å…³è” PRï¼Œé€šè¿‡ `AskUserQuestion` å‘ç”¨æˆ·ç´¢è¦ä»»åŠ¡æè¿°æˆ–ç¡®è®¤åˆ›å»ºæ–° issueã€‚\n   - æ­¤å¤–ï¼Œå¦‚æœåœ¨éåŸºå‡†åˆ†æ”¯ä¸Šï¼šè¿˜è¦æ£€æŸ¥æ˜¯å¦å­˜åœ¨ä¸å½“å‰åˆ†æ”¯å…³è”çš„ç°æœ‰ PRã€‚\n   - æ•è·ç›®æ ‡åŸºå‡†åˆ†æ”¯ï¼ˆé»˜è®¤ `main`ï¼‰ã€‚\n2. åˆ›å»ºæˆ–æ¢å¤åˆ†æ”¯\n   - å¦‚æœ `workspace_mode` ä¸º `\"gws\"`ï¼š\n     - ä½¿ç”¨ `gws new <branch-name>` åˆ›å»ºæ–°çš„éš”ç¦»å·¥ä½œåŒºï¼ˆworktreeï¼‰ã€‚\n     - å°†æ‰€æœ‰åç»­æ“ä½œåˆ‡æ¢åˆ° `gws` è¿”å›çš„å·¥ä½œåŒºè·¯å¾„ã€‚\n   - å¦åˆ™ï¼š\n     - å¦‚æœè¯¥ issue å·²å­˜åœ¨ PRï¼Œåˆ‡æ¢åˆ°å…¶åˆ†æ”¯ã€‚\n     - å¦åˆ™ï¼Œå¦‚æœå½“å‰åˆ†æ”¯æ˜¯åŸºå‡†åˆ†æ”¯ï¼ˆé»˜è®¤ `main`ï¼‰ï¼Œåˆ›å»ºä¸€ä¸ªåä¸º `devloop-<id>-<slug>` çš„æ–°åˆ†æ”¯ã€‚\n       - **åˆ†æ”¯åå‡€åŒ–**ï¼šç¡®ä¿ `<slug>` æ˜¯ä» issue æ ‡é¢˜æ´¾ç”Ÿçš„ï¼Œæ–¹æ³•æ˜¯è½¬æ¢ä¸ºå°å†™ï¼Œå°†ç©ºæ ¼å’Œç‰¹æ®Šå­—ç¬¦æ›¿æ¢ä¸ºè¿å­—ç¬¦ï¼Œå¹¶åˆ é™¤è¿ç»­çš„è¿å­—ç¬¦ã€‚\n     - å¦åˆ™ï¼ˆå¦‚æœå·²åœ¨åŠŸèƒ½åˆ†æ”¯ä¸Šï¼‰ï¼Œè·³è¿‡åˆ†æ”¯åˆ›å»ºå¹¶ä½¿ç”¨å½“å‰åˆ†æ”¯ã€‚\n3. å®æ–½ä¿®å¤\n   - å¦‚æœ `workspace_mode` ä¸º `\"gws\"`ï¼š\n     - é€‰æ‹©ä¸€ä¸ªé”å®šç›®æ ‡ï¼ˆä¸€ä¸ªåŒ¹é…ä½ é¢„æœŸä¿®æ”¹çš„æ–‡ä»¶/ç›®å½•çš„ `<pattern>`ï¼‰ã€‚\n     - åœ¨ä¿®æ”¹å‰ä½¿ç”¨ `gws lock <pattern>` é”å®šç›¸å…³æ–‡ä»¶æˆ–ç›®å½•ã€‚\n   - **å®æ–½ä¸éªŒè¯å·¥ä½œæµ**ï¼ˆæœ€å¤šå°è¯• 3 æ¬¡ï¼‰ï¼š\n     - **å§”æ‰˜å®æ–½**ï¼šä½¿ç”¨ `Task` å·¥å…·è°ƒç”¨ `devloop-implementer`ã€‚æä¾› issue æè¿°å’Œä¸Šä¸‹æ–‡ã€‚\n       - *æŒ‡ä»¤*ï¼š\"ç ”ç©¶å¹¶å®æ–½é’ˆå¯¹ä»¥ä¸‹é—®é¢˜çš„æœ€å°æ­£ç¡®ä¿®å¤ï¼š[Issue Description]\"\n     - **å§”æ‰˜éªŒè¯**ï¼šå®æ–½åï¼Œä½¿ç”¨ `Task` å·¥å…·è°ƒç”¨ `devloop-validator`ã€‚\n       - *æŒ‡ä»¤*ï¼š\"éªŒè¯ä¸ºè§£å†³ä»¥ä¸‹é—®é¢˜è€Œè¿›è¡Œçš„æ›´æ”¹ï¼š[Issue Description]ã€‚è¿è¡Œç›¸å…³æµ‹è¯•å¹¶æŠ¥å‘Šç»“æœã€‚\"\n     - å¦‚æœéªŒè¯å¤±è´¥ï¼š\n       - å¦‚æœ `workspace_mode` ä¸º `\"gws\"`ï¼Œåœ¨**é‡è¯•æˆ–é€€å‡ºä¹‹å‰**è¿è¡Œ `gws unlock <pattern>`ã€‚\n       - å¦‚æœé‡è¯•ï¼Œåœ¨å§”æ‰˜ä¸‹ä¸€æ¬¡å®æ–½å°è¯•ä¹‹å‰é‡æ–°è·å– `gws lock <pattern>`ã€‚\n     - å¦‚æœéªŒè¯å¤±è´¥ 3 æ¬¡ï¼ˆæœ€å¤§é‡è¯•æ¬¡æ•°ï¼‰ï¼š\n       - å¦‚æœ `workspace_mode` ä¸º `\"gws\"`ï¼Œåœ¨è¦æ±‚ç”¨æˆ·æŒ‡å¯¼æˆ–è¿”å›ä¹‹å‰è¿è¡Œ `gws unlock <pattern>`ã€‚\n   - **å¯é è§£é”ï¼ˆè‡³å…³é‡è¦ï¼‰**ï¼š\n     - å¦‚æœ `workspace_mode` ä¸º `\"gws\"`ï¼š\n       - **å§‹ç»ˆ**åœ¨æ‰€æœ‰é€€å‡ºè·¯å¾„ï¼ˆæˆåŠŸã€éªŒè¯å¤±è´¥ã€ä¸­æ­¢æˆ–è¾¾åˆ°æœ€å¤§é‡è¯•æ¬¡æ•°åï¼‰ä½¿ç”¨ `gws unlock <pattern>` é‡Šæ”¾é”ã€‚\n       - ä½ å¿…é¡»åœ¨æ¯ä¸ªé”™è¯¯åˆ†æ”¯ä¸­ä»¥åŠåœ¨ä»»ä½•æå‰é€€å‡ºæˆ–è¿”å›ç»™ç”¨æˆ·ä¹‹å‰è°ƒç”¨ `gws unlock <pattern>`ã€‚\n   - å¦‚æœå·¥ä½œæ ‘ä¸å¹²å‡€ï¼š\n     - é¦–å…ˆè¿è¡Œ `git status` ä»¥è¯†åˆ«æœªæäº¤çš„æ›´æ”¹ã€‚\n     - å¦‚æœå­˜åœ¨ä¸åº”æäº¤çš„æœªè·Ÿè¸ªæ–‡ä»¶ï¼Œè¯¢é—®ç”¨æˆ·æŒ‡å¯¼ã€‚\n     - å°è¯•æäº¤æ›´æ”¹ï¼ˆ`git commit -m \"Save work before devloop\"`ï¼‰æˆ–æš‚å­˜å®ƒä»¬ï¼ˆ`git stash --include-untracked`ï¼‰ã€‚\n     - å¦‚æœæ“ä½œå¤±è´¥ï¼ˆä¾‹å¦‚ç”±äºå†²çªæˆ–éªŒè¯é’©å­ï¼‰ï¼Œé€šçŸ¥ç”¨æˆ·å¹¶è¯¢é—®å¦‚ä½•å¤„ç†ã€‚\n   - ï¼ˆè·³è¿‡åœ¨ä¸»ä»£ç†ä¸Šä¸‹æ–‡ä¸­çš„ç›´æ¥å®æ–½ï¼›ç°åœ¨å®ƒå·²è¢«å§”æ‰˜ï¼‰ã€‚\n4. æäº¤\n   - åˆ›å»ºæ´¾ç”Ÿè‡ª issue æ ‡é¢˜çš„æäº¤æ¶ˆæ¯ã€‚\n   - **è‡³å…³é‡è¦**ï¼šéªŒè¯æ¶ˆæ¯**ä¸åŒ…å«** \"Co-authored-by: Claude\" æˆ–ä»»ä½• AI ç­¾åã€‚\n5. PR\n   - å¦‚æœç¼ºå¤±åˆ™åˆ›å»º PRï¼Œå¦åˆ™æ¨é€æ›´æ–°ã€‚\n   - ä½¿ç”¨ `gh pr view --json isDraft,mergeable,reviewDecision` æ£€æŸ¥çŠ¶æ€ã€‚\n   - å¦‚æœ issue æ¥è‡ª GitHubï¼Œç¡®ä¿ PR æè¿°åŒ…å« `Closes #<issue-number>` æˆ–æŒ‡å‘è¯¥ issue çš„é“¾æ¥ä»¥ä¾¿å…³è”ã€‚\n   - **è‡³å…³é‡è¦**ï¼šéªŒè¯ PR æ­£æ–‡**ä¸åŒ…å«** \"Generated with Claude\" æˆ– AI ç›¸å…³çš„ç­¾åã€‚\n6. ç­‰å¾…å®¡æŸ¥\n   - è½®è¯¢ç­–ç•¥ï¼ˆè‡ªæ²»ï¼‰ï¼š\n     **é‡è¦æç¤º**ï¼šä½ å¿…é¡»è‡ªåŠ¨ä¿æŒåœ¨æ­¤è½®è¯¢å¾ªç¯ä¸­ã€‚**ä¸è¦**é€€å‡ºä»£ç†ï¼Œ**ä¸è¦**è¯¢é—®ç”¨æˆ·æ˜¯å¦å…è®¸ç­‰å¾…ï¼Œå¹¶ä¸”åœ¨æ¯ä¸€è½®ä¹‹é—´**ä¸è¦**ç­‰å¾…ç”¨æˆ·è¾“å…¥ã€‚ä½¿ç”¨ `Bash` å·¥å…·è¿›è¡Œ `sleep`ï¼Œç„¶åç«‹å³æ‰§è¡Œä¸‹ä¸€æ¬¡è½®è¯¢ã€‚\n\n     1. åˆå§‹åŒ– `current_wait = 120`ï¼ˆ2 åˆ†é’Ÿï¼‰ã€`cumulative_wait = 0`ã€`wait_rounds_without_response = 0` å’Œ `pings_sent = 0`ã€‚\n     2. **éªŒè¯**ï¼šå¦‚æœ `wait_behavior` æ˜¯ `ping_ai`ï¼š\n        - ç¡®ä¿ `ping_threshold` è‡³å°‘ä¸º 1ã€‚å¦‚æœä¸æ˜¯ï¼Œé»˜è®¤ä¸º 3ã€‚\n     3. **å®¡æŸ¥è½®æ¬¡**ï¼š\n        - è½®è¯¢æ–°çš„æœºå™¨äºº/AI å®¡æŸ¥è¯„è®ºã€å®¡æŸ¥çŠ¶æ€å’Œåˆå¹¶çŠ¶æ€ã€‚\n        - ä½¿ç”¨ `gh pr view --json isDraft,mergeable,reviewDecision` æ£€æŸ¥ PR æ˜¯å¦å‡†å¤‡å¥½åˆå¹¶ã€‚\n          - æœ‰æ•ˆçš„ `mergeable` å€¼ï¼š`MERGEABLE`ï¼ˆå°±ç»ªï¼‰ã€`CONFLICTING`ï¼ˆéœ€è¦æ‰‹åŠ¨ä¿®å¤ï¼‰ã€`UNKNOWN`ï¼ˆè®¡ç®—ä¸­ï¼Œå†æ¬¡è½®è¯¢ï¼‰ã€‚\n          - æœ‰æ•ˆçš„ `reviewDecision` å€¼ï¼š`APPROVED`ã€`CHANGES_REQUESTED`ã€`REVIEW_REQUIRED`ã€‚\n          - å¦‚æœ `isDraft` ä¸º `true`ï¼š\n            - é€šçŸ¥ç”¨æˆ· PR æ˜¯è‰æ¡ˆï¼Œåœ¨æ ‡è®°ä¸ºå°±ç»ªä¹‹å‰å¯èƒ½ä¸ä¼šæ”¶åˆ°å®¡æŸ¥ã€‚\n            - ç»§ç»­è½®è¯¢ï¼Œä½†åœ¨ PR æ ‡è®°ä¸ºå‡†å¤‡å¥½å®¡æŸ¥ä¹‹å‰è·³è¿‡æé†’/é€šçŸ¥å°è¯•ã€‚\n        - ä½¿ç”¨ GraphQL è¿‡æ»¤æ‰è¿‡æ—¶å’Œå·²è§£å†³çš„è¯„è®ºï¼Œä»¥ç¡®ä¿ä½ åªå¤„ç†æœ‰æ•ˆçš„åé¦ˆã€‚\n        - ä½¿ç”¨è¾…åŠ©è„šæœ¬ï¼ˆè¾“å‡º JSONLï¼›æ¯è¡Œä¸€ä¸ª JSON å¯¹è±¡ï¼‰ï¼š\n\n          ```bash\n          bash \"${CLAUDE_PLUGIN_ROOT}/scripts/devloop-pr-review-threads.sh\" --repo \"$(gh repo view --json nameWithOwner --jq '.nameWithOwner')\" --pr \"$(gh pr view --json number --jq '.number')\"\n          ```\n\n     4. å¦‚æœå®¡æŸ¥è½®æ¬¡æ²¡æœ‰å‘ç°é—®é¢˜ï¼ˆè‡ªå®šä¹‰å®¡æŸ¥æŠ€èƒ½æ¨¡å¼ï¼‰ä¸”æœªå‘ç°æ–°çš„ GitHub è¯„è®ºï¼š\n        - é€’å¢ `wait_rounds_without_response`ã€‚\n        - å¦‚æœ `wait_behavior` ä¸º `ping_ai`ã€`wait_rounds_without_response` >= `ping_threshold` ä¸” `pings_sent` < 2ï¼š\n          - åœ¨ PR ä¸Šå‘å¸ƒè¯„è®ºï¼š\n            1. é€šè¿‡å°† `{{ai_id}}` æ›¿æ¢ä¸º å‚ä¸äº†è¯„è®ºçš„AIçš„id æ¥æ’å€¼ `ping_message_template`ã€‚\n            2. ä½¿ç”¨ `gh pr comment --body \"$MESSAGE\"`ï¼Œå…¶ä¸­ `$MESSAGE` æ˜¯æ’å€¼åçš„å†…å®¹ï¼Œç¡®ä¿æ­£ç¡®çš„ shell å¼•ç”¨/è½¬ä¹‰ï¼ˆä¾‹å¦‚å¦‚æœæ¶ˆæ¯åŒ…å«ç‰¹æ®Šå­—ç¬¦ï¼Œä½¿ç”¨ heredoc æˆ–æ­£æ–‡æ–‡ä»¶ï¼‰ã€‚\n          - é€’å¢ `pings_sent` å¹¶é‡ç½® `wait_rounds_without_response = 0`ã€‚\n        - å¦‚æœ `cumulative_wait + current_wait > 1800`ï¼ˆ30 åˆ†é’Ÿï¼‰ï¼Œåœæ­¢è½®è¯¢å¹¶è¯¢é—®ç”¨æˆ·æŒ‡å¯¼ã€‚\n        - å¦åˆ™ï¼Œä½¿ç”¨ `Bash` å·¥å…·è¿è¡Œ `sleep $current_wait`ã€‚ä½ **ç»å¯¹ä¸èƒ½**åœ¨æ­¤ä¹‹åé€€å‡ºï¼›ä½ å¿…é¡»ç»§ç»­è¿›å…¥è¯¥å¾ªç¯çš„ä¸‹ä¸€æ¬¡è¿­ä»£ã€‚\n        - ä¼‘çœ åï¼Œæ›´æ–° `cumulative_wait += current_wait`ã€‚\n        - æ›´æ–° `current_wait`ï¼šä½¿ç”¨æŒ‡æ•°é€€é¿ï¼Œæ¯è½®å°† `current_wait` ç¿»å€ï¼ˆä¾‹å¦‚ 2m, 4m, 8m...ï¼‰ï¼Œä¸Šé™ä¸º 900ï¼ˆ15 åˆ†é’Ÿï¼‰ã€‚\n        - ä»æ­¥éª¤ 2 å¼€å§‹é‡å¤ã€‚\n     5. å¦‚æœå‘ç°æ–°è¯„è®ºï¼š\n        - ç«‹å³è¿›å…¥ **åº”ç”¨åé¦ˆ** æ­¥éª¤å¹¶é‡ç½®è½®è¯¢å‘¨æœŸï¼ˆåˆå§‹åŒ– `current_wait = 120`, `cumulative_wait = 0`, `wait_rounds_without_response = 0`, `pings_sent = 0`ï¼‰ã€‚\n     6. ç¤ºä¾‹åºåˆ—ï¼š\n       - è½®è¯¢ #1ï¼šæ— è¯„è®ºã€‚ç­‰å¾… 2m (`current_wait`)ã€‚`cumulative_wait` = 2mã€‚ä¸‹æ¬¡ `current_wait` = 4mã€‚\n       - è½®è¯¢ #2ï¼šæ— è¯„è®ºã€‚ç­‰å¾… 4m (`current_wait`)ã€‚`cumulative_wait` = 6mã€‚ä¸‹æ¬¡ `current_wait` = 8mã€‚\n       - è½®è¯¢ #3ï¼šæ— è¯„è®ºã€‚ç­‰å¾… 8m (`current_wait`)ã€‚`cumulative_wait` = 14mã€‚ä¸‹æ¬¡ `current_wait` = 15m (å°é¡¶)ã€‚\n       - è½®è¯¢ #4ï¼šæ— è¯„è®ºã€‚ç­‰å¾… 15m (`current_wait`)ã€‚`cumulative_wait` = 29mã€‚ä¸‹æ¬¡ `current_wait` = 15mã€‚\n       - è½®è¯¢ #5ï¼šæ— è¯„è®ºã€‚åœæ­¢ï¼Œå› ä¸º `cumulative_wait + current_wait` (29m + 15m) > 30mã€‚\n7. åº”ç”¨åé¦ˆ\n   - **å§”æ‰˜å®æ–½**ï¼šä½¿ç”¨ `Task` å·¥å…·è°ƒç”¨ `devloop-implementer` å¹¶ä¼ å…¥å®¡æŸ¥è¯„è®ºã€‚\n     - *æŒ‡ä»¤*ï¼š\"åº”ç”¨æ¥è‡ª PR å®¡æŸ¥çš„ä»¥ä¸‹åé¦ˆï¼š[Comments Summary]\"\n   - **å§”æ‰˜éªŒè¯**ï¼šä½¿ç”¨ `Task` å·¥å…·è°ƒç”¨ `devloop-validator` ä»¥ç¡®ä¿åé¦ˆå·²æ­£ç¡®å¤„ç†ä¸”æœªå¼•å…¥å›å½’ã€‚\n   - éªŒè¯åæäº¤å¹¶æ¨é€æ›´æ”¹ã€‚\n8. é€šçŸ¥\n   - å¦‚æœå·²é…ç½®ï¼Œåœ¨å®Œæˆã€å¤±è´¥æˆ–æ¯è½®å®¡æŸ¥æ—¶å‘é€ IM é€šçŸ¥ã€‚\n\nè¾“å‡ºæ ¼å¼ï¼š\n\n- å§‹ç»ˆæ€»ç»“æ›´æ”¹å†…å®¹ã€æ£€æŸ¥å†…å®¹ã€PR URLï¼ˆå¦‚æœé€‚ç”¨ï¼‰ä»¥åŠä¸‹ä¸€æ­¥æ“ä½œã€‚\n- å¦‚æœè¢«é˜»å¡ï¼Œè¯´æ˜é˜»å¡å› ç´ å’Œæ‰€éœ€çš„æœ€å°ç”¨æˆ·å†³ç­–ã€‚\n",
        "plugins/devloop/agents/devloop-validator.md": "---\nname: devloop-validator\ndescription: ä¸“é—¨ç”¨äºåœ¨ devloop å·¥ä½œæµä¸­éªŒè¯æ›´æ”¹ã€è¿è¡Œæµ‹è¯•å¹¶ç¡®ä¿è´¨é‡çš„ä»£ç†ã€‚\ntools: [\"Read\", \"Bash\", \"Grep\", \"Glob\"]\n---\n\n# Devloop éªŒè¯ä»£ç† (Validator)\n\nä½ æ˜¯ä¸€ä¸ªä¸“é—¨è´Ÿè´£éªŒè¯çš„å­ä»£ç†ã€‚ä½ çš„ç›®æ ‡æ˜¯ç¡®ä¿å®æ–½çš„æ›´æ”¹ç¬¦åˆè¦æ±‚ä¸”ä¸ä¼šå¼•å…¥å›å½’ã€‚\n\n## èŒè´£\n\n1. **è¯†åˆ«æµ‹è¯•**ï¼šç¡®å®šå“ªäº›ç°æœ‰æµ‹è¯•ä¸æ›´æ”¹ç›¸å…³ï¼Œæˆ–è¯†åˆ«åº”è¿è¡Œå“ªäº›æ‰‹åŠ¨éªŒè¯å‘½ä»¤ï¼ˆå¦‚ buildã€lintï¼‰ã€‚\n2. **æ‰§è¡Œ**ï¼šè¿è¡Œç›¸å…³çš„æµ‹è¯•å’ŒéªŒè¯å‘½ä»¤ã€‚\n3. **åˆ†æ**ï¼šè§£é‡Šç»“æœã€‚åŒºåˆ†ç”±æ–°æ›´æ”¹å¼•èµ·çš„å¤±è´¥ä¸é¢„å…ˆå­˜åœ¨çš„é—®é¢˜ã€‚\n4. **æŠ¥å‘Š**ï¼šæä¾›æ¸…æ™°çš„æµ‹è¯•ç»“æœæŠ¥å‘Šï¼ŒåŒ…æ‹¬ä»»ä½•å¤±è´¥å’Œæ—¥å¿—ã€‚\n\n## æŒ‡å—\n\n- ä¸“æ³¨äºâ€œæœ€å°ç›¸å…³æµ‹è¯•â€ä»¥ä¿æŒå¾ªç¯å¿«é€Ÿè¿è¡Œã€‚\n- å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œè¯·ä¸ºå®æ–½ä»£ç†æä¾›è¶³å¤Ÿçš„ä¸Šä¸‹æ–‡ï¼ˆæ—¥å¿—ã€é”™è¯¯æ¶ˆæ¯ï¼‰ä»¥ä¾¿ä¿®å¤é—®é¢˜ã€‚\n- éªŒè¯ä»»åŠ¡ä¸­æè¿°çš„å…·ä½“é—®é¢˜æ˜¯å¦ç¡®å®å·²è§£å†³ã€‚\n- **ç½²å**ï¼šä¸¥ç¦åœ¨ä½ çš„è¾“å‡ºæˆ–å»ºè®®çš„æ¶ˆæ¯ä¸­åŒ…å« \"Co-authored-by: Claude\" æˆ– AI ç­¾åã€‚\n",
        "plugins/devloop/commands/devloop-enable.md": "---\nname: devloop-enable\ndescription: é€šè¿‡åˆ›å»ºæˆ–æ›´æ–° `.claude/devloop.local.md` å¿«é€Ÿä¸ºè¯¥ä»“åº“å¯ç”¨ devloopã€‚\nallowed-tools: [\"Read\", \"Write\", \"Edit\", \"AskUserQuestion\"]\n---\n\nä¸ºå½“å‰é¡¹ç›®å¯ç”¨ devloopã€‚\n\næ­¥éª¤ï¼š\n\n1. ç¡®ä¿é¡¹ç›®æ ¹ç›®å½•å­˜åœ¨ `.claude/` ç›®å½•ã€‚\n2. å¦‚æœ `.claude/devloop.local.md` å·²å­˜åœ¨ï¼Œæ›´æ–°å‰ç½®å†…å®¹ (frontmatter) ä¸­çš„é”®ã€‚\n3. å¦‚æœä¸å­˜åœ¨ï¼Œä½¿ç”¨ç»¼åˆæ¨¡æ¿åˆ›å»ºå®ƒã€‚\n\n## æ¨èæ¨¡æ¿ç»“æ„\n\nåœ¨åˆ›å»ºæˆ–æ›´æ–° `.claude/devloop.local.md` æ—¶ï¼Œæ¨èä½¿ç”¨ä»¥ä¸‹ç»“æ„ï¼š\n\n```markdown\n---\nenabled: true\nbase_branch: \"main\"\n\n# è½®è¯¢ä¸ç­‰å¾…è¡Œä¸º\nmax_review_polls: 40\nreview_poll_seconds: 60\nwait_behavior: \"poll\" # \"poll\" æˆ– \"ping_ai\"\nping_threshold: 3 # æé†’å‰çš„ç­‰å¾…è½®æ•°\nping_message_template: \"@{{ai_id}} æ­¤ PR æ­£åœ¨ç­‰å¾…å®¡æŸ¥åé¦ˆã€‚æ‚¨å¯ä»¥æä¾›æ›´æ–°å—ï¼Ÿ\"\n\n# é€šçŸ¥\nnotify_enabled: false\nnotify_shell: \"auto\" # \"auto\"ã€\"bash\" æˆ– \"fish\"\nnotify_on_stop: true\nnotify_command_template: \"curl -d \\\"$DEVLOOP_MESSAGE\\\" ntfy.sh/your-topic\" # ntfy æ¨¡æ¿ç¤ºä¾‹ï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ bark ç­‰\n\n# ç¯å¢ƒ\nworkspace_mode: \"local\" # \"local\" æˆ– \"gws\" (ç”¨äº git-ws éš”ç¦»å·¥ä½œåŒº)\n---\n\n# Devloop é¡¹ç›®æŒ‡å—\n\n- åœ¨æ­¤å¤„æ·»åŠ é¡¹ç›®ç‰¹å®šçš„å¼€å‘è§„åˆ™ã€‚\n- å®šä¹‰é¦–é€‰çš„æµ‹è¯•å‘½ä»¤ï¼ˆä¾‹å¦‚ \"æ›´æ”¹åè¿è¡Œ `npm test`\"ï¼‰ã€‚\n- æŒ‡å®šä»£ç é£æ ¼æˆ–æ¶æ„é™åˆ¶ã€‚\n```\n\n- æé†’é’©å­ (hook) é…ç½®åœ¨ä¼šè¯å¼€å§‹æ—¶åŠ è½½ï¼›éœ€è¦é‡å¯ Claude Code æ‰èƒ½ä½¿é’©å­æ›´æ”¹ç”Ÿæ•ˆã€‚\n",
        "plugins/devloop/commands/devloop.md": "---\nname: devloop\ndescription: å¯åŠ¨æˆ–æ¢å¤ devloop å·¥ä½œæµï¼ˆåˆ›å»ºåˆ†æ”¯ â†’ ä¿®å¤ â†’ æäº¤ â†’ PR â†’ ç­‰å¾… AI å®¡æŸ¥ â†’ åº”ç”¨è¯„è®º â†’ é‡å¤ï¼‰ã€‚\nallowed-tools: [\"Read\", \"Write\", \"Edit\", \"Grep\", \"Glob\", \"Bash\", \"AskUserQuestion\", \"TodoWrite\", \"Task\", \"Skill\"]\nargument-hint: \"--issue <github-url|number|feishu/lark-url|text|file> [--base main]\"\n---\n\nä½¿ç”¨æœ¬æ’ä»¶ä¸­çš„æ’ä»¶ç»„ä»¶è¿è¡Œ devloop å·¥ä½œæµã€‚æ­¤å‘½ä»¤é€šè¿‡é‡å¤å¾ªç¯ï¼Œå°†ä»»åŠ¡æ¨è¿›åˆ°å¯ä»¥åˆå¹¶çš„ pull requestã€‚\n\n## å¼ºåˆ¶å·¥ä½œæµ\n\n1. **è¯»å–è®¾ç½®**ï¼šè¯»å– `.claude/devloop.local.md` ä»¥è·å–é¡¹ç›®ç‰¹å®šçš„é…ç½®ï¼ˆå®¡æŸ¥æ¨¡å¼ã€åˆ†æ”¯ç­‰ï¼‰ã€‚\n2. **ç¡®å®šé—®é¢˜æ¥æº**ï¼šä» GitHub issueã€URLã€é£ä¹¦é¡¹ç›®ã€æœ¬åœ°æ–‡ä»¶æˆ–æ–‡æœ¬æè¿°ä¸­è¯†åˆ«ä»»åŠ¡ã€‚\n3. **è°ƒç”¨å¾ªç¯ä»£ç†**ï¼šå¯åŠ¨ `devloop-runner` ä»¥æ‰§è¡Œå®Œæ•´çš„ ä¿®å¤/å®¡æŸ¥ å‘¨æœŸã€‚\n\n## è¡Œä¸º\n\n- **åˆå§‹è®¾ç½®**ï¼šå¦‚æœåœ¨åŸºå‡†åˆ†æ”¯ï¼ˆé»˜è®¤ `main`ï¼‰ä¸Šï¼Œåˆ™åˆ›å»ºä¸€ä¸ªæ–°åˆ†æ”¯ã€‚\n- **å¼€å‘å‘¨æœŸ**ï¼šå°†å®æ–½ä»»åŠ¡å§”æ‰˜ç»™ `devloop-implementer`ï¼Œå°†éªŒè¯ä»»åŠ¡å§”æ‰˜ç»™ `devloop-validator`ã€‚\n- **å®¡æŸ¥å¾ªç¯**ï¼š\n  - **è½®è¯¢å®¡æŸ¥**ï¼šç­‰å¾… PR çŠ¶æ€æ›´æ”¹å’Œå®¡æŸ¥è¯„è®ºã€‚\n  - **å®¡æŸ¥ç­–ç•¥**ï¼šä½¿ç”¨ `scripts/devloop-pr-review-threads.sh` è½®è¯¢è¯„è®ºã€‚\n  - **å¤„ç†åé¦ˆ**ï¼šè‡ªåŠ¨é’ˆå¯¹æ–°è¯„è®ºå®æ–½ä¿®å¤å¹¶é‡æ–°éªŒè¯ã€‚\n- **å®Œæˆ**ï¼šå½“ PR è·å¾—æ‰¹å‡†ä¸” `mergeable` çŠ¶æ€ä¸º `MERGEABLE` æ—¶åœæ­¢ã€‚\n\n## è§„åˆ™ä¸å®‰å…¨\n\n- **Git åè®®**ï¼šä¸¥ç¦åœ¨å…±äº«/è¿œç¨‹åˆ†æ”¯ä¸Šä½¿ç”¨ `git push --force` æˆ– `git commit --amend`ã€‚\n- **æ—  AI ç­¾å**ï¼šæäº¤æˆ– PR ä¸­ç»å¯¹ä¸å…è®¸å‡ºç° \"Co-authored-by: Claude\" æˆ– \"Generated with Claude\"ã€‚\n- **è‡ªä¸»è½®è¯¢**ï¼šä½¿ç”¨ `sleep` ä¿æŒåœ¨è½®è¯¢å¾ªç¯ä¸­ï¼Œä¸¤è½®ä¹‹é—´æ— éœ€è¯·æ±‚ç”¨æˆ·äº¤äº’ã€‚\n- **é€šçŸ¥**ï¼šå¦‚æœå¯ç”¨ï¼Œä½¿ç”¨ `scripts/devloop-notify.sh` é€šè¿‡ `hooks.json` å‘é€æ›´æ–°ã€‚\n",
        "plugins/devloop/hooks/hooks.json": "{\n  \"description\": \"Devloop notifications and completion tracking\",\n  \"hooks\": {\n    \"Stop\": [\n      {\n        \"matcher\": \"*\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"bash \\\"$CLAUDE_PLUGIN_ROOT/scripts/devloop-notify.sh\\\"\",\n            \"timeout\": 20\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/devloop/skills/feishu-lark-interaction/SKILL.md": "---\nname: feishu-lark-interaction\ndescription: å…³äºå¦‚ä½•ä½¿ç”¨é£ä¹¦é¡¹ç›® (Feishu Project) OpenAPI è·å–å¹¶ç®¡ç† issue è¯¦æƒ…çš„æŒ‡å—ã€‚\n---\n\n# é£ä¹¦/Lark äº¤äº’æŠ€èƒ½ (Skill)\n\næ­¤æŠ€èƒ½æä¾›äº†å…³äºé€šè¿‡ OpenAPI ä¸é£ä¹¦é¡¹ç›® (Feishu/Lark Project) ç®¡ç†å·¥å…·è¿›è¡Œäº¤äº’çš„æŒ‡å—ã€‚\n\n## èº«ä»½éªŒè¯\n\né£ä¹¦é¡¹ç›® OpenAPI çš„å¤§å¤šæ•°è¯·æ±‚éœ€è¦ä¸¤ä¸ªè‡ªå®šä¹‰è¯·æ±‚å¤´ï¼š\n\n- `X-PLUGIN-TOKEN`ï¼šé€šè¿‡æ’ä»¶èº«ä»½éªŒè¯æµç¨‹è·å–ã€‚\n- `X-USER-KEY`ï¼šï¼ˆå¯é€‰ï¼‰ç”¨äºå—æƒé™é™åˆ¶æ“ä½œçš„ç”¨æˆ·ç‰¹å®šå¯†é’¥ã€‚\n\n### è·å–æ’ä»¶ä»¤ç‰Œ (Plugin Token)\n\n```http\nPOST {base_url}/open_api/authen/plugin_token\nContent-Type: application/json\n\n{\n  \"plugin_id\": \"YOUR_PLUGIN_ID\",\n  \"plugin_secret\": \"YOUR_PLUGIN_SECRET\"\n}\n```\n\nå“åº”ä¸­çš„ `data.token` åº”ä½œä¸º `X-PLUGIN-TOKEN` è¯·æ±‚å¤´ä½¿ç”¨ã€‚\n\n## é”™è¯¯å¤„ç†\n\n### 1. å¸¸è§çŠ¶æ€ç \n\n- **401 Unauthorized**ï¼š`X-PLUGIN-TOKEN` å¤±æ•ˆæˆ–è¿‡æœŸã€‚\n  - **å¤„ç†ç­–ç•¥**ï¼šè‡ªåŠ¨é‡æ–°æ‰§è¡Œ [è·å–æ’ä»¶ä»¤ç‰Œ](#è·å–æ’ä»¶ä»¤ç‰Œ-plugin-token) æµç¨‹ï¼Œæ›´æ–° `X-PLUGIN-TOKEN` åé‡è¯•è¯·æ±‚ã€‚\n- **429 Too Many Requests**ï¼šè§¦å‘é¢‘ç‡é™åˆ¶ã€‚\n  - **å¤„ç†ç­–ç•¥**ï¼šéµå¾ª `Retry-After` å“åº”å¤´å»ºè®®çš„æ—¶é—´ã€‚è‹¥æ— ï¼Œåˆ™é‡‡ç”¨æŒ‡æ•°é€€é¿ï¼ˆExponential Backoffï¼‰é…åˆéšæœºæŠ–åŠ¨ï¼ˆJitterï¼‰è¿›è¡Œé‡è¯•ã€‚\n- **5xx Server Error**ï¼šæœåŠ¡ç«¯å¼‚å¸¸ã€‚\n  - **å¤„ç†ç­–ç•¥**ï¼šè‡ªåŠ¨é‡è¯•å¹¶é…åˆé€€é¿æœºåˆ¶ï¼Œè‹¥å¤šæ¬¡å¤±è´¥ï¼ˆå¦‚è¶…è¿‡ 3 æ¬¡ï¼‰åˆ™è®°å½•é”™è¯¯å¹¶åˆ‡æ¢è‡³æ•…éšœæ¢å¤æ¨¡å¼ã€‚\n\n### 2. ä»¤ç‰Œç®¡ç†ä¸åˆ·æ–°\n\n`data.token` åº”è¢«è§†ä¸ºçŸ­æœŸä»¤ç‰Œã€‚å®ç°æ—¶åº”éµå¾ªï¼š\n\n- **æŒ‰éœ€è·å–**ï¼šåœ¨å‘èµ·è¯·æ±‚å‰æˆ–æ”¶åˆ° 401 å“åº”æ—¶ï¼Œè‡ªåŠ¨è°ƒç”¨ `POST /open_api/authen/plugin_token` è¿›è¡Œç»­æœŸã€‚\n- **æŒä¹…åŒ–**ï¼šä»¤ç‰Œåº”åœ¨å•æ¬¡ä»»åŠ¡ç”Ÿå‘½å‘¨æœŸå†…ç¼“å­˜ï¼Œé¿å…é¢‘ç¹è°ƒç”¨è®¤è¯æ¥å£ã€‚\n\n### 3. ç½‘ç»œæ•…éšœå¤„ç†\n\nå¯¹äºæš‚æ—¶æ€§çš„ç½‘ç»œæ³¢åŠ¨ï¼š\n\n- **é€€é¿æœºåˆ¶**ï¼šå®æ–½æŒ‡æ•°é€€é¿ç®—æ³•ï¼ˆå¦‚ 1s, 2s, 4s...ï¼‰ï¼Œå¢åŠ éšæœºæŠ–åŠ¨ä»¥é˜²æ­¢è¯·æ±‚æ´ªå³°ã€‚\n- **æœ€å¤§é‡è¯•**ï¼šå»ºè®®æœ€å¤§é‡è¯•æ¬¡æ•°ä¸º 3-5 æ¬¡ï¼Œè¶…è¿‡ååº”é€šè¿‡æ—¥å¿—è®°å½•å¹¶ä¸­æ­¢å½“å‰æ“ä½œï¼Œé¿å…èµ„æºæµªè´¹ã€‚\n\n## æ ¸å¿ƒæ“ä½œ\n\n### 1. è·å– Issue è¯¦æƒ…\n\nè¦è·å–å·¥ä½œé¡¹ï¼ˆæ•…äº‹ã€ç¼ºé™·ã€ä»»åŠ¡ï¼‰çš„æ ‡é¢˜å’Œæè¿°ï¼š\n\n```http\nPOST {base_url}/open_api/{project_key}/work_item/{work_item_type_key}/query\nX-PLUGIN-TOKEN: p-xxxxxx\nContent-Type: application/json\n\n{\n  \"work_item_ids\": [123456]\n}\n```\n\n- **project_key**ï¼šåœ¨é¡¹ç›® URL ä¸­å¯ä»¥æ‰¾åˆ°ï¼ˆä¾‹å¦‚ `https://project.feishu.cn/<project_key>/...`ï¼‰ã€‚\n- **work_item_type_key**ï¼šé¡¹ç›®ç±»å‹ï¼ˆä¾‹å¦‚ `story`ã€`bug`ã€`task`ï¼‰ã€‚\n- **work_item_id**ï¼šURL ä¸­çš„æ•°å­— IDã€‚\n\n### 2. URL è§£æ\n\nå…¸å‹çš„ issue URL æ¨¡å¼ï¼š\n`https://project.feishu.cn/<project_key>/<work_item_type>/detail/<work_item_id>`\n\n`devloop` ä»£ç†åº”è‡ªåŠ¨ä»æä¾›çš„ URL ä¸­æå–è¿™äº›ç»„ä»¶ã€‚\n\n## é…ç½®è¦æ±‚\n\nè¦ä½¿ç”¨æ­¤é›†æˆï¼Œç”¨æˆ·å¿…é¡»æä¾›å‡­æ®ï¼ˆé€šå¸¸é€šè¿‡ç¯å¢ƒå˜é‡æˆ–å®‰å…¨çš„æœ¬åœ°æ–‡ä»¶ï¼‰ï¼š\n\n- `FEISHU_PROJECT_BASE_URL`\n- `FEISHU_PROJECT_PLUGIN_ID`\n- `FEISHU_PROJECT_PLUGIN_SECRET`\n\n## æ˜ å°„åˆ° Devloop\n\n- **æ ‡é¢˜ (Title)**ï¼šæ˜ å°„åˆ° devloop ä»»åŠ¡æ ‡é¢˜ã€‚\n- **æè¿° (Description)**ï¼šæ˜ å°„åˆ° devloop å®æ–½éœ€æ±‚ã€‚\n- **çŠ¶æ€æ˜ å°„**ï¼šé£ä¹¦é¡¹ç›®çš„çŠ¶æ€ï¼ˆå¦‚â€œè¿›è¡Œä¸­â€ã€â€œå·²ä¿®å¤â€ï¼‰å¯ç”¨äºå°† devloop ç”Ÿå‘½å‘¨æœŸåŒæ­¥å›é¡¹ç›®çœ‹æ¿ï¼ˆå¦‚æœéœ€è¦ï¼‰ã€‚\n",
        "plugins/devloop/skills/github-interaction/SKILL.md": "---\nname: github-interaction\ndescription: å…³äºå¦‚ä½•ä½¿ç”¨ GitHub CLI (gh) å’Œ GraphQL äº¤äº’å¤„ç† issueã€pull request å’Œå®¡æŸ¥è¯„è®ºçš„æŒ‡å—ã€‚\n---\n\n# GitHub äº¤äº’æŠ€èƒ½ (Skill)\n\næ­¤æŠ€èƒ½æä¾›äº†å…³äºä½¿ç”¨ `gh` CLI å’Œ GitHub çš„ GraphQL API æ¥ç®¡ç† `devloop` å·¥ä½œæµä¸­çš„å¼€å‘ç”Ÿå‘½å‘¨æœŸçš„æŒ‡å—ã€‚\n\n## æ ¸å¿ƒæ“ä½œ\n\n### 1. Issue ä¸ PR ç®¡ç†\n\n- **è·å– Issue è¯¦æƒ…**ï¼š`gh issue view <id> --json title,body,labels`\n- **è·å– PR çŠ¶æ€**ï¼š`gh pr view --json number,state,mergeable,reviewDecision,isDraft`\n- **åˆ—å‡ºåˆ†æ”¯å¯¹åº”çš„ PR**ï¼š`gh pr list --head <branch-name> --json number,url,title,body`\n- **åˆ›å»º PR**ï¼š`gh pr create --title \"<title>\" --body \"<body>\" --base <base-branch>`\n\n### 2. è·å–å®¡æŸ¥è¯„è®º (GraphQL)\n\næ ‡å‡†çš„ `gh pr view --json reviews` é€šå¸¸ä¼šè¿”å›æˆªæ–­æˆ–è¿‡æ—¶çš„è¯„è®ºã€‚å¯¹äº `devloop`ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸“é—¨çš„ GraphQL æŸ¥è¯¢æ¥è·å–**æ´»è·ƒï¼ˆæœªè¿‡æ—¶ä¸”æœªè§£å†³ï¼‰**çš„å®¡æŸ¥çº¿ç¨‹ã€‚\n\n#### ä½¿ç”¨è¾…åŠ©è„šæœ¬\n\n`devloop` æ’ä»¶æä¾›äº†ä¸€ä¸ªè„šæœ¬æ¥å¤„ç†åˆ†é¡µå’Œè¿‡æ»¤ï¼š\n\n```bash\nbash \"${CLAUDE_PLUGIN_ROOT}/scripts/devloop-pr-review-threads.sh\" --repo \"owner/repo\" --pr <number>\n```\n\nè¯¥è„šæœ¬è¾“å‡º JSON Lines (JSONL)ï¼Œå¯ä»¥é€è¡Œè§£æã€‚\n\n#### åŸå§‹ GraphQL æŸ¥è¯¢æ¨¡å¼\n\nå¦‚æœä½ éœ€è¦æ‰‹åŠ¨æŸ¥è¯¢ï¼Œè¯·ä½¿ç”¨ `gh api graphql` å¹¶é…åˆæ”¯æŒåˆ†é¡µçš„æ¨¡å¼ï¼š\n\n```graphql\nquery($name: String!, $owner: String!, $pr: Int!, $cursor: String) {\n  repository(owner: $owner, name: $name) {\n    pullRequest(number: $pr) {\n      reviewThreads(first: 50, after: $cursor) {\n        pageInfo {\n          hasNextPage\n          endCursor\n        }\n        nodes {\n          isOutdated\n          isResolved\n          comments(last: 1) {\n            nodes { body path line author { login } }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n**å¤„ç†åˆ†é¡µ**ï¼š\n\n- **åˆå§‹è¯·æ±‚**ï¼šå°† `$cursor` è®¾ç½®ä¸º `null`ã€‚\n- **åç»­è¯·æ±‚**ï¼šå¦‚æœ `pageInfo.hasNextPage` ä¸º `true`ï¼Œè·å– `pageInfo.endCursor` å¹¶å°†å…¶ä½œä¸ºä¸‹ä¸€æ¬¡è¯·æ±‚ä¸­çš„ `$cursor` å˜é‡ä¼ å…¥ã€‚\n- **æ‰¹æ¬¡å¤§å°**ï¼šå»ºè®®ä½¿ç”¨ `first: 50` ä»¥å¹³è¡¡è´Ÿè½½å¤§å°å’Œè¯·æ±‚æ¬¡æ•°ã€‚\n\n## çŠ¶æ€å®šä¹‰\n\n- **å¯åˆå¹¶æ€§ (Mergeable)**ï¼š\n  - `MERGEABLE`ï¼šå‡†å¤‡å¥½åˆå¹¶ã€‚\n  - `CONFLICTING`ï¼šå­˜åœ¨åˆå¹¶å†²çªï¼ˆéœ€è¦æ‰‹åŠ¨å¹²é¢„ï¼‰ã€‚\n  - `UNKNOWN`ï¼šGitHub ä»åœ¨è®¡ç®—ä¸­ï¼ˆå†æ¬¡è½®è¯¢ï¼‰ã€‚\n- **å®¡æŸ¥å†³å®š (Review Decision)**ï¼š\n  - `APPROVED`ï¼šPR å·²è·æ‰¹å‡†ã€‚\n  - `CHANGES_REQUESTED`ï¼šéœ€è¦ä¿®å¤ã€‚\n  - `REVIEW_REQUIRED`ï¼šä»åœ¨ç­‰å¾…å®¡æŸ¥ã€‚\n\n## æœ€ä½³å®è·µ\n\n- **åˆ†é¡µ**ï¼šå¯¹äºå¤§å‹ PRï¼Œå§‹ç»ˆå¤„ç† `reviewThreads` å’Œ `comments` çš„åˆ†é¡µã€‚\n- **è¿‡æ»¤**ï¼šä»…å¤„ç† `isResolved: false` ä¸” `isOutdated: false` çš„çº¿ç¨‹ï¼Œä»¥é¿å…é‡å¤å·¥ä½œã€‚\n- **è‰æ¡ˆ (Drafts)**ï¼šå¦‚æœ `isDraft: true`ï¼Œåº”ç»§ç»­è½®è¯¢ï¼Œä½†å¯ä»¥æŠ‘åˆ¶æé†’/é€šçŸ¥ã€‚\n",
        "plugins/gws-manager/.claude-plugin/plugin.json": "{\n  \"name\": \"gws-manager\",\n  \"version\": \"0.1.0\",\n  \"description\": \"Manage parallel development workspaces and advisory locks using the gws CLI tool\",\n  \"author\": {\n    \"name\": \"lollipopkit\"\n  },\n  \"commands\": \"./commands\",\n  \"skills\": \"./skills\"\n}\n",
        "plugins/gws-manager/README.md": "English | [ç®€ä½“ä¸­æ–‡](README.zh-CN.md)\n\n# gws-manager\n\nA Claude Code plugin to manage parallel development workspaces (git worktrees) and advisory locks using the [gws](https://github.com/lollipopkit/gws) CLI tool.\n\n## Installation\n\n```bash\n/plugin marketplace add lollipopkit/cc-plugins\n/plugin install gws-manager@lk-ccp\n```\n\n## Features\n\n- **Workspace Isolation**: Easily create, list, and remove parallel development workspaces using git worktrees.\n- **Advisory Locking**: Coordinate with other agents or team members using advisory locks to prevent conflicting changes.\n- **Automatic Suggestions**: Suggests creating a new workspace when significant changes are detected (via PreToolUse hook).\n- **Environment Doctor**: Checks for `gws` CLI availability and workspace health on session start.\n\n## Commands\n\n- `/gws:new` â€“ Create a new parallel development workspace.\n- `/gws:list` â€“ List all current workspaces.\n- `/gws:rm` â€“ Remove a workspace.\n- `/gws:prune` â€“ Prune stale workspaces.\n- `/gws:lock` â€“ Acquire an advisory lock on a resource.\n- `/gws:unlock` â€“ Release an advisory lock.\n- `/gws:locks` â€“ List all active advisory locks.\n- `/gws:doctor` â€“ Run a health check on the gws environment.\n- `/gws:integrate` â€“ Install/Update gws integration in the current project.\n\n## Components\n\n- **Agent**: `agents/workspace-agent.md` â€“ Specialized agent for workspace and lock management.\n- **Skill**: `skills/workspace-management/SKILL.md` â€“ Core logic for complex workspace operations.\n- **Hook**: `hooks/hooks.json` â€“ Session start health checks and workspace creation suggestions.\n",
        "plugins/gws-manager/agents/workspace-agent.md": "---\ndescription: This agent handles complex development tasks within an isolated git worktree. It ensures that changes are confined to the workspace and manages advisory locks to prevent conflicts.\ncapabilities:\n  - Performing multi-file refactors in isolation\n  - Implementing features in a dedicated worktree\n  - Managing advisory locks during development\n  - Verifying changes before integration\nallowed-tools:\n  - Bash\n  - Read\n  - Write\n  - Edit\n  - Glob\n  - Grep\nwhenToUse:\n  - When a task is complex enough to benefit from an isolated environment.\n  - When working on a project where multiple agents or developers are active simultaneously.\n  - After a new workspace has been created using `/gws:new`.\n---\n\n# Workspace Agent\n\nYou are a specialized developer agent that operates within a `git worktree` managed by the `gws` tool. Your primary goal is to complete the assigned task while ensuring safety, isolation, and conflict avoidance.\n\n## Operating Principles\n\n1. **Isolation**: You must ONLY perform file operations (`Read`, `Write`, `Edit`) and `Bash` commands within the designated workspace directory. Never modify files in the main repository root unless explicitly instructed to integrate.\n2. **Advisory Locking**: Use the `Workspace Management` skill to manage locks. Proactively run `gws lock <pattern> --owner <agent-id> --ws <workspace-name>` for paths you intend to modify to signal your intent to other agents.\n3. **Context Awareness**: Use `gws ls` and `git status` within your worktree to maintain awareness of your changes.\n4. **Integration Ready**: Ensure that your changes are logically consistent and pass any required tests (`gws integrate <name> --run <test-cmd>`) before signaling task completion.\n\n## Recommended Workflow\n\n1. **Initialize**: Confirm your current working directory is the workspace path.\n2. **Lock**: Identify the files/directories you will modify and use `gws lock <pattern> --owner <agent-id> --ws <workspace-name>` to secure them.\n3. **Implement**: Perform your development work (coding, testing, refactoring).\n4. **Verify**: Run project tests to ensure quality.\n5. **Unlock**: Once changes are committed, use `gws unlock <pattern> --owner <agent-id>` to release your locks.\n6. **Report**: Summarize your changes and provide the branch name for integration.\n\nUse the `Workspace Management` skill for detailed CLI usage instructions.\n",
        "plugins/gws-manager/commands/gws-doctor.md": "---\nname: gws:doctor\ndescription: Perform health checks on the environment and gws configuration\nallowed-tools: Bash, Read\n---\n\nRun diagnostic checks:\n\n1. Run doctor command:\n\n   ```bash\n   bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh doctor --json\n   ```\n\n2. Report any environment issues found (e.g., missing git worktree support, binary not found).\n",
        "plugins/gws-manager/commands/gws-ensure-integration.md": "---\nname: gws:ensure-integration\ndescription: Ensure the integration workspace is ready and up to date\nargument-hint: [--from base-branch]\nallowed-tools: Bash, Read\n---\n\nPrepare integration workspace:\n\n1. Run ensure-integration command:\n\n   ```bash\n   bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh ensure-integration $ARGUMENTS --json\n   ```\n",
        "plugins/gws-manager/commands/gws-integrate.md": "---\nname: gws:integrate\ndescription: Integrate changes from a workspace into the integration branch\nargument-hint: [name] [--mode merge|rebase] [--no-ff] [--run test-cmd]\nallowed-tools: Bash, Read\n---\n\nIntegrate workspace changes:\n\n1. If [name] is missing, attempt to determine the current workspace name from the working directory.\n2. Run integration:\n\n   ```bash\n   bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh integrate $ARGUMENTS --json\n   ```\n\n3. If there are conflicts, report the list of conflicting files and instruct the user to resolve them in the `integration` workspace.\n4. Report test results if `--run` was used.\n",
        "plugins/gws-manager/commands/gws-list.md": "---\nname: gws:list\ndescription: List all workspaces managed by gws\nallowed-tools: Bash, Read\n---\n\nList existing workspaces:\n\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh ls --json\n```\n\nDisplay the list of workspaces, including their branch names, paths, and whether they have uncommitted changes (dirty).\n",
        "plugins/gws-manager/commands/gws-lock.md": "---\nname: gws:lock\ndescription: Lock a path pattern to prevent concurrent modifications\nargument-hint: <pattern> --owner <agent-id> --ws <workspace-name> [--ttl duration]\nallowed-tools: Bash, Read\n---\n\nSecure an advisory lock:\n\n1. Run lock command:\n\n   ```bash\n   bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh lock $ARGUMENTS --json\n   ```\n\n2. If the lock is held by another owner, report the conflict and the current owner.\n",
        "plugins/gws-manager/commands/gws-locks.md": "---\nname: gws:locks\ndescription: List all active advisory locks\nallowed-tools: Bash, Read\n---\n\nList active locks:\n\n1. Run locks command:\n\n   ```bash\n   bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh locks --json\n   ```\n",
        "plugins/gws-manager/commands/gws-new.md": "---\nname: gws:new\ndescription: Create a new parallel development workspace (worktree)\nargument-hint: [name] [--agent agent-id] [--task task-desc] [--from branch]\nallowed-tools: Bash, Read\n---\n\nCreate a new workspace using the gws tool.\n\n1. If [name] is not provided, generate a descriptive name based on the current task (e.g., `feat-auth`, `refactor-db`).\n2. Run the command:\n\n   ```bash\n   bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh new $ARGUMENTS --json\n   ```\n\n3. Report the workspace name, path, and branch to the user.\n4. Suggest using the `workspace-agent` or switching to the new path to continue work.\n",
        "plugins/gws-manager/commands/gws-prune.md": "---\nname: gws:prune\ndescription: Prune metadata for workspaces that no longer exist on disk\nallowed-tools: Bash, Read\n---\n\nPrune workspaces:\n\n1. Run prune command:\n\n   ```bash\n   bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh prune --json\n   ```\n",
        "plugins/gws-manager/commands/gws-rm.md": "---\nname: gws:rm\ndescription: Remove a workspace and its associated worktree\nargument-hint: <name>\nallowed-tools: Bash, Read\n---\n\nRemove workspace:\n\n1. Run rm command:\n\n   ```bash\n   bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh rm $ARGUMENTS --json\n   ```\n",
        "plugins/gws-manager/commands/gws-unlock.md": "---\nname: gws:unlock\ndescription: Release an advisory lock for a path pattern\nargument-hint: <pattern> --owner <agent-id>\nallowed-tools: Bash, Read\n---\n\nRelease an advisory lock:\n\n1. Run unlock command:\n\n   ```bash\n   bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh unlock $ARGUMENTS --json\n   ```\n",
        "plugins/gws-manager/hooks/hooks.json": "{\n  \"description\": \"Workspace management hooks\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Write|Edit\",\n        \"hooks\": [\n          {\n            \"type\": \"prompt\",\n            \"prompt\": \"Evaluate if the current task involves significant architectural changes, refactoring, or a new feature implementation based on the user's intent and the tool input. If the task is complex and no parallel workspace (git worktree) is currently active, suggest that the user create one using '/gws:new' to isolate changes. Return 'approve' if it's a minor change, or 'ask' with a suggestion to use a workspace if it looks like a major task. The tool input is available via stdin.\"\n          }\n        ]\n      }\n    ],\n    \"SessionStart\": [\n      {\n        \"matcher\": \"*\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh doctor --json\",\n            \"timeout\": 10\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/gws-manager/skills/workspace-management/SKILL.md": "---\nname: Workspace Management\ndescription: This skill should be used when the user asks to \"create a workspace\", \"manage parallel development\", \"lock files\", \"isolate changes\", \"start a big feature\", or \"refactor the project\". It provides guidance for using the gws CLI tool to manage git worktrees and advisory locks.\nversion: 0.1.0\n---\n\n## Overview\n\nThe `gws` CLI tool provides isolated development environments using `git worktrees`. This allows multiple agents or tasks to run in parallel without interfering with each other's changes. It also provides an advisory locking mechanism to prevent multiple agents from modifying the same files or directories simultaneously.\n\n## Core Workflows\n\n### 1. Starting a New Task\n\nWhen starting a complex task (e.g., a large refactor or a new feature), create a dedicated workspace to isolate changes:\n\n1. Generate a workspace name if not provided (e.g., `feat-auth` or `refactor-db`).\n2. Run `bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh new <name> --agent <agent-id> --task <task-description> --json`.\n3. Note the returned path for the workspace.\n\n### 2. Managing Advisory Locks\n\nPrevent conflicts by locking the paths being modified:\n\n- Before modifying files, check existing locks: `bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh locks --json`.\n- Lock the target directory or files: `bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh lock \"<pattern>\" --owner <agent-id> --ws <workspace-name> --json`.\n- Unlock after completion: `bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh unlock \"<pattern>\" --owner <agent-id> --json`.\n\nPatterns can be specific files (`src/main.go`) or directory globs (`src/**`).\n\n### 3. Integrating Changes\n\nOnce the task is complete within the workspace:\n\n1. Ensure the integration workspace is ready: `bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh ensure-integration --json`.\n2. Integrate the workspace changes: `bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh integrate <name> --mode merge --run \"go test ./...\" --json`.\n3. Resolve any conflicts in the `integration` workspace directory.\n\n## Best Practices\n\n- **Path Isolation**: Always work within the workspace path returned by `bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh new`.\n- **Locking**: Prefer locking broad patterns (e.g., `pkg/auth/**`) early in the task.\n- **Clean up**: Use `bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh rm <name>` or `bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh prune` to remove completed workspaces.\n\n## Configuration\n\nThe plugin supports per-project configuration via `.claude/gws-manager.local.md` in the repository root. This can be used to override default behaviors, specify integration branches, or define project-specific hooks.\n\n## Additional Resources\n\n### Reference Files\n\nFor detailed CLI usage and schemas, consult:\n\n- **`references/cli-usage.md`** - Detailed command descriptions and flags.\n- **`references/json-schema.md`** - JSON output structure for machine parsing.\n\n### Example Files\n\nWorking examples in `examples/`:\n\n- **`refactor-workflow.md`** - Step-by-step refactoring workflow using `gws`.\n",
        "plugins/gws-manager/skills/workspace-management/examples/refactor-workflow.md": "# Refactoring Workflow Example\n\nThis example demonstrates how to use `gws` and the `gws-manager` plugin for a complex multi-file refactoring task.\n\n## Scenario\n\nThe user wants to refactor the database layer to use a new connection pool. This involves changes across multiple files in `internal/db/` and updating usages in `cmd/server/`.\n\n## Step 1: Initialize Workspace\n\nStart by creating a dedicated environment for the refactor.\n\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh new refactor-db-pool \\\n  --agent \"claude-refactor-1\" \\\n  --task \"Refactor DB connection pool to use pgxpool\" \\\n  --json\n```\n\n**Note**: Save the `path` returned in the JSON response. All subsequent operations should happen within that directory.\n\n## Step 2: Secure Advisory Locks\n\nBefore making changes, lock the directories you intend to modify to signal your intent to other agents.\n\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh lock \"internal/db/**\" \\\n  --owner \"claude-refactor-1\" \\\n  --ws \"refactor-db-pool\" \\\n  --json\n```\n\n## Step 3: Implementation\n\nSwitch to the workspace directory and perform the refactoring.\n\n1. Read files in `internal/db/`.\n2. Implement the new connection pool logic.\n3. Update callers in `cmd/server/`.\n4. Run local tests within the workspace.\n5. Release the advisory lock before integration.\n\n   ```bash\n   bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh unlock \"internal/db/**\" \\\n     --owner \"claude-refactor-1\" \\\n     --json\n   ```\n\n## Step 4: Verification\n\nVerify that the changes are correct and don't break existing functionality.\n\n```bash\ngo test ./internal/db/...\ngo build ./cmd/server/\n```\n\n## Step 5: Integration\n\nMerge the changes back to the main branch via the integration workspace.\n\n```bash\n# Prepare integration workspace\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh ensure-integration --json\n\n# Perform integration with tests\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh integrate refactor-db-pool \\\n  --mode merge \\\n  --no-ff \\\n  --run \"go test ./...\" \\\n  --json\n```\n\n## Step 6: Cleanup\n\nRemove the workspace once integrated.\n\n```bash\nbash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh rm refactor-db-pool --json\n```\n",
        "plugins/gws-manager/skills/workspace-management/references/cli-usage.md": "# CLI Usage Reference\n\nFor plugin-driven workflows, it is recommended to use the provided wrapper script to ensure consistent binary discovery:\n`bash ${CLAUDE_PLUGIN_ROOT}/scripts/gws-wrapper.sh <command> [args]`\n\nWhen running manually from the project root, you can use `./gws <command> [args]` if the binary is present.\n\n## Commands\n\n### `gws new <name>`\n\nCreates a new worktree and branch.\n\n- `--agent`: ID of the agent creating the workspace.\n- `--task`: Short description of the task.\n- `--from`: Base branch/commit (default: `origin/HEAD`).\n- `--json`: Output result as JSON.\n\n### `gws ls`\n\nLists all workspaces.\n\n- `--json`: Output full details as JSON.\n\n### `gws rm <name>`\n\nRemoves a workspace and its associated worktree.\n\n- `--json`: Output result as JSON.\n\n### `gws prune`\n\nPrunes metadata for workspaces that no longer exist on disk.\n\n- `--json`: Output result as JSON.\n\n### `gws lock <pattern>`\n\nLocks a path pattern.\n\n- `--owner`: ID of the lock owner.\n- `--ws`: Name of the workspace.\n- `--ttl`: Expiration time (e.g., `1h`, `30m`).\n- `--json`: Output result as JSON.\n\n### `gws unlock <pattern>`\n\nUnlocks a path pattern.\n\n- `--owner`: ID of the lock owner.\n- `--json`: Output result as JSON.\n\n### `gws locks`\n\nLists all active locks.\n\n- `--json`: Output result as JSON.\n\n### `gws ensure-integration`\n\nEnsures that the `integration` workspace is initialized and up to date with the base branch.\n\n- `--from`: Base branch/commit to track (default: `origin/HEAD`).\n- `--json`: Output result as JSON.\n\n### `gws integrate <name>`\n\nIntegrates workspace branch into the `integration` branch.\n\n- `--mode`: `merge` or `rebase`.\n- `--run`: Optional command to run after integration (e.g., tests).\n- `--no-ff`: Use non-fast-forward merge (only for `merge` mode).\n- `--json`: Output result as JSON.\n\n### `gws status`\n\nShows the status of the current workspace and active locks.\n\n- `--json`: Output result as JSON.\n\n### `gws doctor`\n\nPerforms health checks on the environment and `gws` configuration.\n\n- `--json`: Output result as JSON.\n",
        "plugins/gws-manager/skills/workspace-management/references/json-schema.md": "# JSON Output Schemas\n\nThe `gws` tool provides `--json` output for all commands to facilitate integration with Claude Code and other agents.\n\n## Common Fields\n\nEvery JSON response includes these fields:\n\n```json\n{\n  \"status\": \"success | error\",\n  \"message\": \"Human readable message\",\n  \"code\": 0\n}\n```\n\n## Command Specific Outputs\n\n### `gws new`\n\n```json\n{\n  \"status\": \"success\",\n  \"message\": \"Workspace created\",\n  \"data\": {\n    \"name\": \"feat-auth\",\n    \"path\": \"/absolute/path/to/worktree\",\n    \"branch\": \"feat-auth\"\n  }\n}\n```\n\n### `gws ls`\n\n```json\n{\n  \"status\": \"success\",\n  \"data\": [\n    {\n      \"name\": \"feat-auth\",\n      \"path\": \"/path/to/feat-auth\",\n      \"branch\": \"feat-auth\",\n      \"agent\": \"agent-123\",\n      \"task\": \"Implement auth\"\n    }\n  ]\n}\n```\n\n### `gws locks`\n\n```json\n{\n  \"status\": \"success\",\n  \"data\": [\n    {\n      \"pattern\": \"pkg/auth/**\",\n      \"owner\": \"agent-123\",\n      \"workspace\": \"feat-auth\",\n      \"expires\": \"2024-03-20T15:00:00Z\"\n    }\n  ]\n}\n```\n\n### `gws integrate`\n\n```json\n{\n  \"status\": \"success\",\n  \"message\": \"Integration successful\",\n  \"data\": {\n    \"conflicts\": [],\n    \"test_output\": \"PASS\",\n    \"integrated_commit\": \"abc1234\"\n  }\n}\n```\n",
        "plugins/recursive-reasoning/.claude-plugin/plugin.json": "{\n  \"name\": \"recursive-reasoning\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Recursive Reasoning Engine - iteratively refine answers through multi-pass reasoning using Self-Refine, Reflexion, Tree of Thoughts, and multi-model collaboration\",\n  \"author\": {\n    \"name\": \"lollipopkit\"\n  },\n  \"keywords\": [\n    \"reasoning\",\n    \"self-refine\",\n    \"reflexion\",\n    \"tree-of-thoughts\",\n    \"iterative\",\n    \"recursive\"\n  ],\n  \"repository\": \"https://github.com/lollipopkit/cc-plugins\",\n  \"license\": \"MIT\",\n  \"commands\": \"./commands/\",\n  \"skills\": \"./skills/\"\n}",
        "plugins/recursive-reasoning/README.md": "English | [ç®€ä½“ä¸­æ–‡](README.zh-CN.md)\n\n# Recursive Reasoning Engine Plugin\n\nA Claude Code plugin that implements state-of-the-art recursive reasoning techniques for iterative solution refinement.\n\n## Features\n\n- **Master/Sub-Agent Architecture**: Formal hierarchy with a Master Planner/Orchestrator and specialized Sub-Agents for execution.\n- **Self-Refine**: Generate â†’ Critique â†’ Refine loop orchestrated by the Master.\n- **Reflexion**: Maintain memory buffer across delegations.\n- **Tree of Thoughts**: Multi-branch exploration with backtracking.\n- **Self-Consistency**: Sample diverse paths, select consensus.\n- **Multi-Model Collaboration**: Judge/Critique across different LLMs.\n- **Least-to-Most**: Problem decomposition into subproblems.\n\n## Installation\n\n```bash\n/plugin marketplace add lollipopkit/cc-plugins\n/plugin install recursive-reasoning@lk-ccp\n```\n\n## Usage\n\n### Skills\n\nThis plugin provides multiple Skills:\n\n- `recursive`: recursive reasoning workflow (prompt-driven)\n- `multi-model`: multi-model battle runner via OpenAI-compatible endpoints (reads `.env`)\n- `recursive-arena`: orchestrates recursive iterations using multi-model battle as the generator\n\n### Trigger Phrases\n\nThe `recursive` Skill activates automatically when you use phrases like:\n\n- \"Use recursive reasoning to solve this\"\n- \"Think recursively about...\"\n- \"Refine this iteratively\"\n- \"Deep think mode\"\n- \"Multi-pass reasoning\"\n- \"Self-refine this solution\"\n\nThe `multi-model` / `recursive-arena` Skills activate when you ask for \"multi-model battle\", \"battle models\", \"compare models\", or \"recursive arena\".\n\n### Slash Commands\n\nFor stable and explicit triggering, use the slash commands:\n\n| Command | Description |\n| ------- | ----------- |\n| `/recursive-reasoning:recursive [problem]` | Invoke recursive reasoning for iterative multi-pass reasoning |\n| `/recursive-reasoning:multi-model [task]` | Run multi-model battle |\n| `/recursive-reasoning:recursive-arena [task]` | Combine recursive refinement with multi-model battles |\n\n### Example\n\n```text\nUser: Use recursive reasoning to design a rate limiter algorithm\n\nClaude: [Applies Master/Sub-Agent workflow]\n- Phase 1: Decompose problem into sub-tasks (Planning)\n- Phase 2: Delegate Task 1 to recursive-executor (Execution)\n- Phase 3: Verify sub-agent output (Verification)\n- Phase 4: Delegate Task 2 with context...\n- Phase 5: Final Synthesis and Verification\n- Final: Polished answer with orchestration summary\n```\n\n## Mode Selection\n\n| Problem Type | Mode | Iterations |\n| -------------- | ------ | ------------ |\n| Simple bug fix | Light Recursive | 2 |\n| Algorithm design | Full Recursive | 3-4 |\n| Architecture decision | Full Recursive + ToT | 4-5 |\n| Creative/open-ended | Full Recursive + Branching | 5+ |\n| Mission-critical code | Full Recursive + Consistency | 5+ |\n\n## License\n\nMIT\n",
        "plugins/recursive-reasoning/agents/multi-model-config-doctor.md": "---\nname: multi-model-config-doctor\ndescription: Debugs multi-model/recursive-arena failures by checking .env discovery, ARENA_* variables, provider base URLs, and common misconfigurations. Use proactively when multi-model scripts fail or when user asks to configure multi-model.\ntools: Read, Bash, Glob, Grep\nmodel: haiku\n---\n\n# Multi-Model Config Doctor\n\nYou are the multi-model-config-doctor for the Recursive Reasoning Claude Code plugin.\n\nGoal: quickly diagnose why `multi-model` / `recursive-arena` python runners fail and provide the smallest fix.\n\nRules:\n\n- Never print secrets (API keys, tokens). If you need to refer to a key, say \"API key present/absent\" only.\n- Prefer checking configuration deterministically (files/env) over guessing.\n- Assume the arena runner searches upward from CWD for `.env`.\n\nWorkflow:\n\n1. Identify the current working directory and locate the nearest `.env` by walking upward (use `Bash` + `python3` or `Bash` shell logic).\n2. Validate required vars:\n   - `ARENA_MODELS` is present and non-empty.\n   - Either `ARENA_OPENAI_BASE_URL` is present, or each provider in `ARENA_MODELS` has a matching `ARENA_PROVIDER_<PROVIDER>_BASE_URL`.\n3. Check model list format:\n   - Accepts `model1,model2` or `provider:model,provider:model2`.\n   - Flag accidental whitespace / empty segments.\n4. If a base URL is present, optionally check that `${BASE_URL}/chat/completions` is reachable (no credentials required for some local providers). Do not run heavy network tests.\n5. Report:\n   - Root cause (1 sentence)\n   - Evidence (what file/var is missing, without secret values)\n   - Minimal fix steps (exact lines to add/change)\n\nIf the user provides stderr/stdout from a failure, use it as primary evidence.\n",
        "plugins/recursive-reasoning/agents/recursive-executor.md": "---\nname: recursive-executor\ndescription: Specialized executor for recursive reasoning sub-tasks. It performs specific execution steps (coding, analysis, research) as directed by the Master agent.\ntools: Read, Write, Edit, Bash, Grep, Glob, mcp__seq-think__sequentialthinking\n---\n\n# Recursive Executor Agent\n\nYou are a specialized Sub-Agent (Executor) in the Recursive Reasoning architecture.\n\n## Role\n\nYour role is to execute specific, well-defined sub-tasks provided by the Master Agent.\n\n## Responsibilities\n\n1. **Execute**: Perform the requested task using your available tools.\n2. **Report**: Provide a clear, concise report of what you did and the result.\n3. **Verify**: Perform basic self-verification before returning results to the Master.\n\n## Guidelines\n\n- Follow the Master's instructions strictly.\n- If you encounter a blocker, report it immediately with details.\n- Provide evidence for your work (e.g., test results, file contents, command output).\n- Focus only on the assigned sub-task.\n",
        "plugins/recursive-reasoning/commands/multi-model.md": "---\ndescription: Run multi-model battle for iterative refinement across LLMs\nargument-hint: [task or problem]\nallowed-tools: Read, Bash(python:*)\n---\n\n# Multi-Model Command\n\nUse the **multi-model** skill to run a multi-model battle where different LLMs compete and judge each other's answers.\n\n## Task\n\n$ARGUMENTS\n\n## Instructions\n\nRun the multi-model script with the given task:\n\n```bash\npython3 \"${CLAUDE_PLUGIN_ROOT}/skills/multi-model/scripts/multi_model.py\" --prompt \"$ARGUMENTS\" --iters 5\n```\n\nParse the output and present:\n\n1. The winning answer\n2. Judge scores summary\n3. Model rotation insights (using numeric IDs only, never disclose model names)\n",
        "plugins/recursive-reasoning/commands/recursive-arena.md": "---\ndescription: Combine recursive refinement with multi-model battles\nargument-hint: [complex task]\nallowed-tools: Read, Bash(python:*)\n---\n\n# Recursive-Arena Command\n\nUse the **recursive-arena** skill to orchestrate recursive iterations where each iteration uses the multi-model battle as the generator.\n\n## Task\n\n$ARGUMENTS\n\n## Instructions\n\nRun the recursive-arena orchestrator:\n\n```bash\npython3 \"${CLAUDE_PLUGIN_ROOT}/skills/recursive-arena/scripts/recursive_arena.py\" --prompt \"$ARGUMENTS\" --iters 4 --arena-iters 3\n```\n\nPresent the results with:\n\n1. Final best answer\n2. Evolution summary table (iteration, writer model ID, avg judge score, key refinement)\n3. Accumulated insights from the reflection memory\n\nNever disclose provider/model names; only use numeric IDs.\n",
        "plugins/recursive-reasoning/commands/recursive.md": "---\ndescription: Master orchestrator for iterative multi-pass reasoning using Sub-Agents\nargument-hint: [problem or question]\nallowed-tools: Read, Task, mcp__seq-think__sequentialthinking\n---\n\n# Recursive Command (Master)\n\nUse the **recursive** skill to solve complex problems by orchestrating a team of specialized sub-agents. As the Master agent, you will plan the strategy, delegate tasks, and verify the results.\n\n## Problem\n\n$ARGUMENTS\n\n## Master Orchestration Flow\n\n1. **Decompose**: Break the problem into a sequential execution plan.\n2. **Delegate**: Use the `Task` tool to launch `recursive-executor` sub-agents for each step.\n3. **Verify**: Critique and verify the output of each sub-agent.\n4. **Reflect**: Maintain a reflection memory buffer across delegations.\n5. **Synthesize**: Integrate all sub-task results into a final, polished answer.\n6. **Confidence**: Stop when confidence reaches 8/10 or diminishing returns occur.\n",
        "plugins/recursive-reasoning/hooks/hooks.json": "{\n  \"description\": \"RLM plugin hooks\",\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"matcher\": \"startup|resume|clear|compact\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/session_start.sh\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ],\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Bash\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"python3 ${CLAUDE_PLUGIN_ROOT}/scripts/post_tool_use_failure.py\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/recursive-reasoning/skills/multi-model/SKILL.md": "---\nname: multi-model\ndescription: Multi-model battle for iterative (recursive) refinement. Rotates models every iteration and has other models judge/critique. Use when user asks to \"battle models\", \"compare models\", \"multi-LLM\", or wants iterative refinement across multiple OpenAI-compatible / Ollama models.\nallowed-tools: Read, Bash(python:*)\n---\n\n# Multi-Model Skill\n\nRun a multi-model â€œbattleâ€ loop where:\n\n- Each iteration uses a different model (rotating by index).\n- The active model produces a candidate answer.\n- Other models judge and critique it.\n- The process keeps the best-scoring answer as the current best.\n\n## Configuration (.env)\n\nThis skill reads `.env` (searching upward from the current working directory) to find multi-model config.\n\n### Single-endpoint setup (OpenAI-compatible)\n\n- `ARENA_OPENAI_BASE_URL` (e.g. `http://localhost:11434/v1` for Ollama, or `https://api.openai.com/v1`)\n- `ARENA_OPENAI_API_KEY` (optional for Ollama)\n- `ARENA_MODELS` (comma-separated model names)\n\nExample:\n\n```env\nARENA_OPENAI_BASE_URL=http://localhost:11434/v1\nARENA_OPENAI_API_KEY=\nARENA_MODELS=qwen3:8b,deepseek-r1:14b\n```\n\n### Multi-provider setup (optional)\n\n- `ARENA_MODELS=provider:model,provider:model2,...`\n- `ARENA_PROVIDER_<PROVIDER>_BASE_URL=...`\n- `ARENA_PROVIDER_<PROVIDER>_API_KEY=...`\n\nExample:\n\n```env\nARENA_MODELS=ollama:qwen3:8b,openai:gpt-4o-mini\nARENA_PROVIDER_OLLAMA_BASE_URL=http://localhost:11434/v1\nARENA_PROVIDER_OLLAMA_API_KEY=\nARENA_PROVIDER_OPENAI_BASE_URL=https://api.openai.com/v1\nARENA_PROVIDER_OPENAI_API_KEY=YOUR_KEY\n```\n\n## How to run\n\n1. Ensure `.env` exists and contains the variables above.\n2. Run the multi-model script.\n\n```bash\npython3 \"${CLAUDE_PLUGIN_ROOT}/skills/multi-model/scripts/multi_model.py\" --prompt \"<your task>\" --iters 5\n```\n\nOptions you can use:\n\n- `--iters N`: number of iterations (each iteration rotates the writer model)\n- `--max-judges N`: cap number of judge models per round\n- `--json`: output machine-readable JSON\n- `--out path.json`: save JSON transcript\n\n## Output expectations\n\n- Treat model identity as an internal numeric ID (`Model 0`, `Model 1`, ...).\n- In any prompts to models, do not disclose provider/model names; only IDs.\n- Never print secrets from `.env` (API keys).\n",
        "plugins/recursive-reasoning/skills/recursive-arena/SKILL.md": "---\nname: recursive-arena\ndescription: Orchestrates recursive iterations using the multi-model battle as the generator each round. Use when user wants recursive refinement plus model battles, multi-LLM consensus, or says \"recursive arena\".\nallowed-tools: Read, Bash(python:*)\n---\n\n# Recursive-Arena Orchestrator\n\nThis skill composes two skills:\n\n- `multi-model`: generates candidate answers by rotating models and collecting judge feedback.\n- `recursive`: provides the macro-loop structure (decompose â†’ critique â†’ reflect â†’ refine â†’ converge).\n\n## Core behavior\n\nFor each recursive iteration:\n\n1. Call the multi-model script to produce the best candidate for the current prompt.\n2. Treat the multi-model best answer as the iterationâ€™s `Current Solution`.\n3. Use multi-model judge summaries as the primary input to `Self-Critique` and to update `Reflection Memory`.\n4. If not converged, refine the prompt (or add constraints) and run the next iteration.\n\n## How to run\n\nThis orchestrator uses the multi-model runner bundled in this plugin:\n\n```bash\npython3 \"${CLAUDE_PLUGIN_ROOT}/skills/recursive-arena/scripts/recursive_arena.py\" --prompt \"<your task>\" --iters 4 --arena-iters 3\n```\n\n## Configuration\n\nMulti-model configuration is read from `.env` (same rules as the `multi-model` skill):\n\n- `ARENA_MODELS`, `ARENA_OPENAI_BASE_URL` / provider variants.\n\nOptional orchestration env:\n\n- `RLM_ARENA_ARENA_ITERS` default for multi-model per outer iteration\n- `RLM_ARENA_MAX_JUDGES` default judge cap\n\n## Output\n\n- The final answer is the best outer-iteration result.\n- Show an evolution summary table with:\n  - Iteration number\n  - Writer model ID used by arena winner (numeric ID only)\n  - Average judge score\n  - Key refinement applied\n\nNever disclose provider/model names; only numeric IDs.\nNever print secrets from `.env`.\n",
        "plugins/recursive-reasoning/skills/recursive/SKILL.md": "---\nname: recursive\ndescription: Master Recursive Reasoning - orchestrate complex problem solving by decomposing tasks and delegating to specialized sub-agents. Use when facing multi-step problems that benefit from planning, execution, and verification.\nallowed-tools: Read, Task, mcp__seq-think__sequentialthinking\n---\n\n# Master Recursive Reasoning Skill\n\nThis skill implements a Master/Sub-Agent architecture for recursive reasoning. The Master acts as the \"Brain\" (Planner/Coordinator/Verifier), while Sub-Agents act as the \"Hands\" (Executors).\n\n## Master Orchestrator Role\n\nAs the Master, you primarily focus on high-level orchestration. You:\n1. **Plan**: Decompose the problem into logical, sequential steps.\n2. **Delegate**: Use the `Task` tool to launch `recursive-executor` agents for each step.\n3. **Verify**: Review the output of each sub-agent against the requirements.\n4. **Refine**: If a sub-agent's output is insufficient, re-delegate with specific feedback.\n5. **Synthesize**: Combine all verified components into a final solution.\n\n## Theoretical Foundation\n\nThe Master utilizes these techniques for orchestration:\n- **Least-to-Most**: Decomposing complex problems into sequential subproblems.\n- **Reflexion**: Maintaining a reflective memory buffer to guide sub-agents.\n- **Self-Refine**: Iteratively critiquing sub-agent outputs until they meet quality standards.\n- **Tree of Thoughts**: Exploring different delegation strategies when one fails.\n\n## Workflow Phases\n\n### Phase 1: Problem Decomposition (Least-to-Most)\n\nBefore any execution, break the problem into manageable subproblems:\n\n```markdown\n## ğŸ“‹ Master Execution Plan\n\n**Original Problem**: [Complex task]\n\n**Execution Steps**:\n1. [Foundational task] â†’ Delegate to recursive-executor\n2. [Intermediate task] â†’ Delegate to recursive-executor\n3. [Final task] â†’ Delegate to recursive-executor\n\n**Dependencies**: 1 â†’ 2 â†’ 3\n```\n\n### Phase 2: Delegation Loop (Master -> Sub-Agent)\n\nFor each step in your plan:\n1. Call the `Task` tool with `agent: \"recursive-executor\"`.\n2. Provide the sub-task description and any necessary context from previous steps.\n3. Wait for the sub-agent to report completion.\n\n### Phase 3: Verification & Critique (Self-Refine)\n\nWhen a sub-agent returns:\n1. **Evaluate**: Check if the result is correct, complete, and optimal.\n2. **Critique**: Identify specific issues or missing details.\n3. **Re-delegate**: If issues are found, send a new `Task` to the sub-agent with the critique and request refinement.\n\n### Phase 4: Reflection Memory (Reflexion)\n\nMaintain a memory of sub-agent performance and task outcomes:\n\n```markdown\n## ğŸ§  Master Reflection Memory\n\n| Step | Sub-Agent Result | Master Insight | Action |\n|------|------------------|----------------|--------|\n| 1 | Success | Path X is correct | Proceed to 2 |\n| 2 | Failed initially | Tool Y was missing | Retried with Y |\n```\n\n### Phase 5: Synthesis\n\nIntegrate the results from all sub-tasks into a final coherent answer for the user.\n\n## Output Format\n\n### Per-Delegation Structure\n\n```markdown\n## ğŸ”„ Delegation [N]\n\n### ğŸ“¥ Sub-Task\n[Description of what was delegated]\n\n### ğŸ“¤ Sub-Agent Report\n[Summary of the sub-agent's output]\n\n### ğŸ” Master Verification\n- [ ] **Correctness**: [OK/Fail]\n- [ ] **Completeness**: [OK/Fail]\n- [ ] **Quality**: [1-10]\n\n**Master Decision**: [Proceed / Re-delegate with critique]\n```\n\n### Final Output Structure\n\n```markdown\n## âœ… Final Verified Solution\n\n[The integrated final answer]\n\n### ğŸ“ˆ Orchestration Summary\n\n| Step | Agent | Status | Refinements |\n|------|-------|--------|-------------|\n| 1 | recursive-executor | Completed | 0 |\n| 2 | recursive-executor | Completed | 1 |\n\n### ğŸ§  Accumulated Insights\n[Key learnings from the orchestration process]\n```\n\n## Stopping Criteria\n\n1. **Plan Completed**: All steps in the Master plan are executed and verified.\n2. **Confidence**: Overall solution confidence â‰¥ 8/10.\n3. **Diminishing Returns**: Sub-agent refinements no longer yield significant quality gains.\n\n## Integration with Sequential Thinking\n\nUse `mcp__seq-think__sequentialthinking` internally to build your plans and analyze sub-agent reports before making decisions.\n"
      },
      "plugins": [
        {
          "name": "recursive-reasoning",
          "source": "./plugins/recursive-reasoning",
          "description": "Recursive Language Model - multi-pass reasoning with Self-Refine, Reflexion, Tree of Thoughts",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add lollipopkit/cc-plugins",
            "/plugin install recursive-reasoning@lk-ccp"
          ]
        },
        {
          "name": "devloop",
          "source": "./plugins/devloop",
          "description": "Iterate on an issue until it is ready to merge: create branch, fix, commit, open PR, wait for AI review, apply feedback, repeat.",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add lollipopkit/cc-plugins",
            "/plugin install devloop@lk-ccp"
          ]
        },
        {
          "name": "context-firewall",
          "source": "./plugins/context-firewall",
          "description": "preprocess large inputs using sub-agents, return compressed and auditable results with evidence locators, and verify claims at low cost.",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add lollipopkit/cc-plugins",
            "/plugin install context-firewall@lk-ccp"
          ]
        },
        {
          "name": "gws-manager",
          "source": "./plugins/gws-manager",
          "description": "Manage parallel development workspaces and advisory locks using the gws CLI tool",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add lollipopkit/cc-plugins",
            "/plugin install gws-manager@lk-ccp"
          ]
        }
      ]
    }
  ]
}