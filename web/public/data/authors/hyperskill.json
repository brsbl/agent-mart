{
  "author": {
    "id": "hyperskill",
    "display_name": "Hyperskill",
    "type": "Organization",
    "avatar_url": "https://avatars.githubusercontent.com/u/40030436?v=4",
    "url": "https://github.com/hyperskill",
    "bio": "Personalized Learning",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 7,
      "total_skills": 1,
      "total_stars": 3,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "hyperskill-marketplace",
      "version": null,
      "description": "A curated collection of Claude Code plugins by Hyperskill team",
      "owner_info": {
        "name": "Hyperskill Inc.",
        "email": "dev@hyperskill.org"
      },
      "keywords": [],
      "repo_full_name": "hyperskill/claude-code-marketplace",
      "repo_url": "https://github.com/hyperskill/claude-code-marketplace",
      "repo_description": "A curated collection of Claude Code plugins maintained by the Hyperskill Team",
      "homepage": "",
      "signals": {
        "stars": 3,
        "forks": 0,
        "pushed_at": "2025-10-27T11:39:29Z",
        "created_at": "2025-10-27T11:26:23Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 777
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 587
        },
        {
          "path": "plugins/plugin-development/README.md",
          "type": "blob",
          "size": 11451
        },
        {
          "path": "plugins/plugin-development/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/agents/plugin-reviewer.md",
          "type": "blob",
          "size": 9403
        },
        {
          "path": "plugins/plugin-development/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/commands/add-agent.md",
          "type": "blob",
          "size": 15582
        },
        {
          "path": "plugins/plugin-development/commands/add-command.md",
          "type": "blob",
          "size": 8659
        },
        {
          "path": "plugins/plugin-development/commands/add-hook.md",
          "type": "blob",
          "size": 13508
        },
        {
          "path": "plugins/plugin-development/commands/add-skill.md",
          "type": "blob",
          "size": 12456
        },
        {
          "path": "plugins/plugin-development/commands/init.md",
          "type": "blob",
          "size": 3080
        },
        {
          "path": "plugins/plugin-development/commands/test-local.md",
          "type": "blob",
          "size": 9016
        },
        {
          "path": "plugins/plugin-development/commands/validate.md",
          "type": "blob",
          "size": 8477
        },
        {
          "path": "plugins/plugin-development/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/hooks/hooks.json",
          "type": "blob",
          "size": 903
        },
        {
          "path": "plugins/plugin-development/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/SKILL.md",
          "type": "blob",
          "size": 4489
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/best-practices",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/best-practices/naming-conventions.md",
          "type": "blob",
          "size": 8389
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/best-practices/organization.md",
          "type": "blob",
          "size": 9247
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/examples/simple-plugin.md",
          "type": "blob",
          "size": 2868
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/examples/testing-workflow.md",
          "type": "blob",
          "size": 4859
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/schemas",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/schemas/hooks-schema.md",
          "type": "blob",
          "size": 5576
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/schemas/marketplace-schema.md",
          "type": "blob",
          "size": 7956
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/schemas/plugin-manifest.md",
          "type": "blob",
          "size": 5732
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/templates/agent-template.md",
          "type": "blob",
          "size": 1071
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/templates/command-template.md",
          "type": "blob",
          "size": 599
        },
        {
          "path": "plugins/plugin-development/skills/plugin-authoring/templates/skill-template.md",
          "type": "blob",
          "size": 1041
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"hyperskill-marketplace\",\n  \"owner\": {\n    \"name\": \"Hyperskill Inc.\",\n    \"email\": \"dev@hyperskill.org\"\n  },\n  \"metadata\": {\n    \"description\": \"A curated collection of Claude Code plugins by Hyperskill team\",\n    \"version\": \"1.0.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"plugin-development\",\n      \"description\": \"Assist with Claude Code plugin development: scaffold, validate, review, and team-ready distribution\",\n      \"version\": \"1.1.0\",\n      \"author\": {\n        \"name\": \"Ivan Magda\"\n      },\n      \"source\": \"./plugins/plugin-development\",\n      \"category\": \"developer-tools\",\n      \"tags\": [\"development\", \"plugins\", \"scaffold\", \"validation\", \"tools\"],\n      \"keywords\": [\"claude-code\", \"plugins\", \"developer-tools\", \"scaffold\", \"validation\"]\n    }\n  ]\n}\n",
        "plugins/plugin-development/.claude-plugin/plugin.json": "{\n  \"name\": \"plugin-development\",\n  \"version\": \"1.1.0\",\n  \"description\": \"A comprehensive toolkit for creating, validating, and distributing Claude Code plugins\",\n  \"author\": {\n    \"name\": \"Ivan Magda\",\n    \"email\": \"ivan.magda@outlook.com\",\n    \"url\": \"https://github.com/ivan-magda\"\n  },\n  \"homepage\": \"https://github.com/ivan-magda/claude-code-plugin-template\",\n  \"repository\": \"https://github.com/ivan-magda/claude-code-plugin-template\",\n  \"license\": \"MIT\",\n  \"keywords\": [\n    \"plugin-development\",\n    \"plugin-authoring\",\n    \"cli-tools\",\n    \"validation\",\n    \"scaffolding\"\n  ]\n}\n",
        "plugins/plugin-development/README.md": "# plugin-development\n\nA comprehensive Claude Code plugin that assists developers in creating, validating, and distributing Claude Code plugins—from scaffold to release.\n\n## Overview\n\nThe `plugin-development` plugin provides a complete toolkit for plugin authorship using a hybrid architecture:\n\n- **Skill (plugin-authoring)**: Ambient, auto-discovered guidance with progressive disclosure\n- **7 Slash Commands**: Explicit actions for scaffolding, validation, and testing\n- **Reviewer Agent**: Deep, multi-file audits and readiness checks\n- **Hooks**: Automated validation and formatting guardrails\n\n## Installation\n\nThis plugin is part of the **Claude Code Plugin Marketplace Template**. To use it:\n\n### Quick Start (Recommended for First-Time Users)\n\n```bash\n# From the template root directory\n/plugin marketplace add .\n\n# Install the plugin\n/plugin install plugin-development@claude-code-plugin-template\n```\n\n### For Team Marketplaces\n\nIf you're using this template to create your own marketplace:\n\n1. **Set up your marketplace** (see the [main README](../../README.md) for instructions)\n2. **Add your marketplace to Claude Code**:\n   ```bash\n   /plugin marketplace add your-org/your-marketplace-repo\n   ```\n3. **Install the plugin**:\n   ```bash\n   /plugin install plugin-development@your-marketplace-name\n   ```\n\n### Local Development Setup\n\nIf you want to use this for developing new plugins:\n\n```bash\n# From the template root directory\ncd /path/to/claude-code-plugin-template\n\n# Add the marketplace\n/plugin marketplace add .\n\n# Install this plugin\n/plugin install plugin-development@claude-code-plugin-template\n```\n\nThen use it to scaffold new plugins:\n\n```bash\n/plugin-development:init my-new-plugin\n```\n\n## Quick Start\n\n> **Before you begin**: Make sure you've installed this plugin following the [Installation](#installation) instructions above.\n\n### Create a New Plugin\n\nOnce installed, you can scaffold a new plugin:\n\n```bash\n/plugin-development:init my-awesome-plugin\n```\n\nThis scaffolds:\n- `.claude-plugin/plugin.json` - Plugin manifest\n- `commands/` - Slash commands directory\n- `agents/` - Sub-agents directory\n- `skills/` - Skills directory\n- `hooks/hooks.json` - Hook configuration\n- `scripts/` - Validation scripts\n- `README.md` - Documentation template\n\n### Add Components\n\n```bash\n# Add a command\n/plugin-development:add-command format-code \"Format code according to project standards\"\n\n# Add a skill\n/plugin-development:add-skill code-review \"Use when reviewing code or PRs\"\n\n# Add an agent\n/plugin-development:add-agent security-auditor \"Analyzes code for security vulnerabilities\"\n\n# Add a hook\n/plugin-development:add-hook PreToolUse \"Write|Edit\"\n```\n\n### Validate Your Plugin\n\n```bash\n/plugin-development:validate\n```\n\nChecks:\n- Plugin structure and organization\n- Manifest validity (plugin.json)\n- Component configuration\n- Naming conventions\n- Hook safety\n\n### Test Locally\n\nAfter creating your plugin and making it available in a marketplace:\n\n```bash\n# From your plugin directory\n/plugin-development:test-local\n```\n\nThis creates a dev marketplace and provides installation instructions for iterative testing. See the [Testing Your Plugin](#testing-your-plugin) section below for complete workflow details.\n\n## Commands Reference\n\n| Command | Description |\n|---------|-------------|\n| `/plugin-development:init [name]` | Scaffold a new plugin with standard structure |\n| `/plugin-development:add-command [name] [desc]` | Add a new slash command |\n| `/plugin-development:add-skill [name] [desc]` | Add a new Skill with SKILL.md |\n| `/plugin-development:add-agent [name] [desc]` | Add a new sub-agent |\n| `/plugin-development:add-hook [event] [matcher]` | Add a hook configuration |\n| `/plugin-development:validate` | Validate plugin structure and configuration |\n| `/plugin-development:test-local` | Create dev marketplace for local testing |\n\n## Skill: plugin-authoring\n\nThe plugin-authoring Skill provides ambient guidance throughout your development session.\n\n**Triggers**: Automatically activates when working with:\n- `.claude-plugin/plugin.json`\n- `marketplace.json`\n- `commands/`, `agents/`, `skills/`, or `hooks/` directories\n\n**Capabilities**:\n- Read-only analysis and guidance\n- Progressive disclosure (links to detailed docs)\n- Proposes safe actions via commands\n- Escalates to plugin-reviewer agent for deep audits\n\n**Access**: Automatic (no explicit invocation needed)\n\n## Agent: plugin-reviewer\n\nDeep, comprehensive audits of plugins for release readiness.\n\n**Invoke**: `/agents plugin-reviewer`\n\n**Provides**:\n- Structure audit\n- Manifest validation\n- Component analysis\n- Hook safety checks\n- Marketplace readiness assessment\n- Prioritized issue list (Critical → Low)\n- Specific fix recommendations\n\n**Runtime**: 5-15 minutes (separate context window)\n\n## Hooks\n\nAutomated validation and formatting hooks are included:\n\n### PreToolUse\n- Validates plugin structure before Write/Edit operations\n- Exit code 2 blocks unsafe operations\n- Provides actionable error messages\n\n### PostToolUse\n- Runs formatting/linting after Write/Edit (stub, extend as needed)\n\n### SessionStart\n- Displays plugin load confirmation\n\n## Development Workflow\n\n### Prerequisites\n\nBefore starting plugin development:\n\n1. **Clone or download this template**:\n   ```bash\n   git clone https://github.com/your-org/claude-code-plugin-template.git\n   cd claude-code-plugin-template\n   ```\n\n2. **Install this plugin** (see [Installation](#installation) above)\n\n3. **Create a new plugin**:\n   ```bash\n   /plugin-development:init my-plugin\n   cd my-plugin/\n   ```\n\n### 1. Initialize\n\nOnce installed, create your plugin:\n\n```bash\ncd my-projects/\n/plugin-development:init my-plugin\ncd my-plugin/\n```\n\n### 2. Add Components\n\n```bash\n/plugin-development:add-command hello \"Greet the user\"\n# Edit commands/hello.md with your instructions\n\n/plugin-development:add-skill my-expertise \"Use when working with X\"\n# Edit skills/my-expertise/SKILL.md\n```\n\n### 3. Validate\n\n```bash\n/plugin-development:validate\n```\n\nFix any errors or warnings.\n\n### 4. Test Locally\n\n```bash\n/plugin-development:test-local\n/plugin marketplace add ../dev-marketplace\n/plugin install my-plugin@dev-marketplace\n```\n\nTest your commands:\n```bash\n/my-plugin:hello\n```\n\n### 5. Iterate\n\nAfter making changes:\n```bash\n/plugin-development:validate\n/plugin uninstall my-plugin@dev-marketplace\n/plugin install my-plugin@dev-marketplace\n# Test again\n```\n\n### 6. Review Before Release\n\n```bash\n/agents plugin-reviewer\n```\n\nFix any critical or high-priority issues identified.\n\n### 7. Distribute\n\nAdd to your team marketplace repository and push to GitHub.\n\n## Documentation\n\nThe plugin includes comprehensive reference material:\n\n### Schemas\n- `schemas/plugin-manifest.md` - plugin.json structure\n- `schemas/hooks-schema.md` - Hooks configuration\n- `schemas/marketplace-schema.md` - Marketplace structure\n\n### Templates\n- `templates/plugin-manifest.json` - Starter plugin.json\n- `templates/marketplace-manifest.json` - Marketplace template\n- `templates/command-template.md` - Command structure\n- `templates/skill-template.md` - Skill structure\n- `templates/agent-template.md` - Agent structure\n\n### Examples\n- `examples/simple-plugin.md` - Complete minimal plugin example\n- `examples/testing-workflow.md` - Step-by-step testing guide\n\n### Best Practices\n- `best-practices/organization.md` - Plugin structure guidelines\n- `best-practices/naming-conventions.md` - Naming standards\n\n## Architecture\n\n### Hybrid Design\n\n**Skill (Read-First)**:\n- Ambient, automatic activation\n- Read-only by default (Read, Grep, Glob)\n- Proposes commands for execution\n- Progressive disclosure keeps it concise\n\n**Commands (Explicit)**:\n- User-triggered actions\n- Deterministic operations\n- Template-based generation\n- Clear consent for modifications\n\n**Agent (Deep Analysis)**:\n- Separate context window\n- Multi-file analysis\n- Comprehensive reporting\n- Use for release readiness\n\n**Hooks (Automation)**:\n- Validation before writes\n- Formatting after writes\n- Automated guardrails\n- Safety first\n\n## Safety & Permissions\n\n### Default Safety\n\n- Skill is **read-only** by default\n- All writes go through **explicit commands**\n- Hooks **block** unsafe operations (exit code 2)\n- Agent **proposes** changes, doesn't execute\n\n### Recommended Permissions\n\nFor enhanced security, configure in `.claude/settings.json`:\n\n```json\n{\n  \"permissions\": {\n    \"deny\": [\n      \"Read(./.env)\",\n      \"Read(./.env.*)\",\n      \"Read(./secrets/**)\"\n    ],\n    \"ask\": [\n      \"SlashCommand:/plugin-development:*\"\n    ]\n  }\n}\n```\n\n## Troubleshooting\n\n### Plugin not loading?\n- Check `/plugin list` to verify installation\n- Verify `plugin.json` doesn't include component fields for standard paths\n- If using custom paths, ensure they're relative (e.g., `[\"./custom/cmd.md\"]`)\n- Run `/plugin-development:validate`\n\n### Commands not showing?\n- Check `/help` for command list\n- Ensure `commands/` has `.md` files with frontmatter\n- Verify `description` field in frontmatter\n- Reinstall the plugin\n\n### Skills not triggering?\n- Check `SKILL.md` frontmatter `name` matches directory (kebab-case)\n- Verify `description` includes both what the Skill does AND when to use it\n- Include specific trigger keywords users would naturally mention\n- Description must be max 1024 characters\n- Skills are model-invoked (automatically activate based on context)\n\n### Hooks not running?\n- Make scripts executable: `chmod +x scripts/*.sh`\n- Use `${CLAUDE_PLUGIN_ROOT}` in hook commands\n- Test script directly: `./scripts/validate-plugin.sh`\n- Use `claude --debug` to see hook execution\n\n## Contributing\n\nThis plugin follows its own best practices:\n- kebab-case naming throughout\n- Progressive disclosure in skills\n- Template-based generation\n- Comprehensive validation\n\nTo extend:\n1. Add new commands in `commands/`\n2. Enhance the skill with new reference docs\n3. Update the reviewer agent with new checks\n4. Add hooks for new automation\n\n## Resources\n\n### Official Documentation\n- [Claude Code Plugins](https://docs.claude.com/en/docs/claude-code/plugins)\n- [Plugin Marketplaces](https://docs.claude.com/en/docs/claude-code/plugin-marketplaces)\n- [Plugins Reference](https://docs.claude.com/en/docs/claude-code/plugins-reference)\n- [Slash Commands](https://docs.claude.com/en/docs/claude-code/slash-commands)\n\n### Local Documentation\nSee `skills/plugin-authoring/` for:\n- Schemas (plugin manifest, hooks, marketplace)\n- Templates (reusable starter files)\n- Examples (complete working plugins)\n- Best practices (organization, naming)\n\n## License\n\nMIT License - See LICENSE file for details\n\n## Version\n\n**1.0.0** - Initial release\n\n### Features\n- ✅ Plugin scaffolding (init command)\n- ✅ Component generation (add-command, add-skill, add-agent, add-hook)\n- ✅ Validation (validate command)\n- ✅ Local testing (test-local command)\n- ✅ Ambient guidance (plugin-authoring skill)\n- ✅ Deep review (plugin-reviewer agent)\n- ✅ Automated safety (validation hooks)\n- ✅ Comprehensive documentation (schemas, templates, examples, best practices)\n\n## Support\n\nFor issues or questions:\n- **Using the template**: See the [main README](../../README.md) for template setup instructions\n- **Plugin issues**: Check validation output: `/plugin-development:validate`\n- **Best practices**: Review `skills/plugin-authoring/best-practices/`\n- **Deep audit**: Request deep audit: `/agents plugin-reviewer`\n- **Debug mode**: Test with debug mode: `claude --debug`\n",
        "plugins/plugin-development/agents/plugin-reviewer.md": "---\ndescription: Reviews a plugin for correct structure, safe hooks, clear commands and skills, and marketplace readiness\ncapabilities: [\"structure-audit\", \"hook-safety-checks\", \"component-validation\", \"marketplace-readiness\"]\n---\n\n# Plugin Reviewer Agent\n\nComprehensive audit of Claude Code plugins for structure, safety, and best practices.\n\n## Purpose\n\nThis agent performs deep, multi-file analysis of plugins to ensure:\n- Correct directory structure and file organization\n- Valid manifests and configuration files\n- Safe hook implementations\n- Clear, well-documented components\n- Marketplace readiness\n- Adherence to naming conventions and best practices\n\n## What This Agent Does\n\n### Structure Audit\n- Verifies standard directory layout\n- Checks file naming conventions\n- Validates component organization\n- Ensures proper separation of concerns\n\n### Manifest Validation\n- Inspects plugin.json for completeness\n- Verifies required fields (name, version, description)\n- Validates path references\n- Checks author and metadata formatting\n\n### Component Analysis\n- **Commands**: Frontmatter, descriptions, argument handling\n- **Skills**: SKILL.md structure, progressive disclosure, trigger clarity\n- **Agents**: Purpose clarity, capability definition, output format\n- **Hooks**: Safety checks, timeout configuration, script permissions\n\n### Hook Safety Checks\n- Verifies scripts use `${CLAUDE_PLUGIN_ROOT}`\n- Checks for timeouts on potentially slow operations\n- Validates exit code handling (blocking vs. non-blocking)\n- Ensures scripts are executable\n- Reviews for security issues (dangerous commands, etc.)\n\n### Marketplace Readiness\n- README.md presence and quality\n- Plugin discoverability (keywords, description)\n- Documentation completeness\n- Testing instructions\n- Distribution readiness\n\n## When to Use This Agent\n\nInvoke this agent when:\n- Preparing a plugin for release or distribution\n- Conducting a comprehensive plugin audit\n- Need detailed, multi-file analysis\n- Want prioritized list of issues to fix\n- Reviewing security and safety posture\n- Before submitting to team marketplace\n\n**Do not use** for:\n- Quick validation (use `/plugin-development:validate` instead)\n- Single-file review\n- Real-time development (too heavyweight)\n\n## How It Proceeds\n\n### Phase 1: Discovery (2-3 minutes)\n\n1. **Locate plugin root**\n   - Find `.claude-plugin/plugin.json`\n   - Identify plugin name and version\n\n2. **Map component structure**\n   - List all commands/agents/skills/hooks\n   - Identify which components are present\n   - Note directory organization\n\n### Phase 2: Detailed Analysis (5-10 minutes)\n\n3. **Manifest deep dive**\n   - Parse and validate plugin.json\n   - Check all fields for correctness\n   - Verify path resolution\n   - Validate SemVer versioning\n\n4. **Component-by-component review**\n   - Read each command file\n   - Analyze each skill directory\n   - Review each agent definition\n   - Inspect hooks configuration\n\n5. **Hook safety analysis**\n   - Read all hook scripts\n   - Check for dangerous patterns\n   - Verify portable paths\n   - Validate timeouts and exit codes\n\n6. **Documentation review**\n   - Check README.md quality\n   - Verify examples are present\n   - Assess discoverability\n\n### Phase 3: Reporting (1-2 minutes)\n\n7. **Categorize findings**\n   - Critical: Must fix before release\n   - High: Should fix soon\n   - Medium: Consider fixing\n   - Low: Nice to have\n\n8. **Generate report**\n   - Summary of findings\n   - Specific issues with locations\n   - Recommendations with examples\n   - Overall readiness assessment\n\n## Output Format\n\n### Report Structure\n\n```markdown\n# Plugin Review: <plugin-name> v<version>\n\n## Summary\n- Plugin: <name>\n- Version: <version>\n- Components: X commands, Y skills, Z agents, hooks: yes/no\n- Overall: Ready / Needs Work / Not Ready\n\n## Critical Issues (Must Fix)\n\n### 1. [Issue Title]\n**Location**: `path/to/file.ext:line`\n**Problem**: [Description of issue]\n**Impact**: [Why this matters]\n**Fix**: [Specific steps to resolve]\n\nExample:\n```\n[Code or config showing the fix]\n```\n\n## High Priority Issues (Should Fix)\n\n### 1. [Issue Title]\n[Same structure as Critical]\n\n## Medium Priority Issues (Consider Fixing)\n\n### 1. [Issue Title]\n[Same structure]\n\n## Low Priority (Nice to Have)\n\n### 1. [Issue Title]\n[Same structure]\n\n## Positive Findings\n\n- ✅ [What the plugin does well]\n- ✅ [Good practices observed]\n\n## Component-Specific Notes\n\n### Commands (X files)\n- [Observations about commands]\n\n### Skills (Y skills)\n- [Observations about skills]\n\n### Agents (Z agents)\n- [Observations about agents]\n\n### Hooks\n- [Observations about hooks]\n\n## Marketplace Readiness\n\n✅ Ready for marketplace\nOR\n❌ Not ready - fix critical and high priority issues first\n\nChecklist:\n□ Structure valid\n□ Manifest complete\n□ Components documented\n□ Hooks safe\n□ README present\n□ Examples included\n\n## Recommendations\n\n1. [Priority 1 recommendation]\n2. [Priority 2 recommendation]\n3. [Priority 3 recommendation]\n\n## Next Steps\n\n1. Fix critical issues\n2. Address high priority issues\n3. Re-run: /plugin-development:validate\n4. Test locally: /plugin-development:test-local\n5. Request another review if needed\n```\n\n## Common Issues Detected\n\n### Critical Issues\n\n1. **Absolute paths in configuration**\n   ```json\n   ❌ \"commands\": \"/Users/you/plugin/commands\"\n   ✅ \"commands\": \"./commands/\"\n   ```\n\n2. **Hook scripts not executable**\n   ```bash\n   ❌ -rw-r--r-- validate.sh\n   ✅ -rwxr-xr-x validate.sh\n   Fix: chmod +x scripts/*.sh\n   ```\n\n3. **Missing required manifest fields**\n   ```json\n   ❌ { \"name\": \"plugin\" }\n   ✅ { \"name\": \"plugin\", \"version\": \"1.0.0\", \"description\": \"...\" }\n   ```\n\n4. **Skill name mismatch**\n   ```\n   ❌ Directory: code-review/, Frontmatter: name: codeReview\n   ✅ Both: code-review\n   ```\n\n### High Priority Issues\n\n1. **Hooks without timeouts on slow operations**\n   ```json\n   ❌ { \"command\": \"npm install\" }\n   ✅ { \"command\": \"npm install\", \"timeout\": 300000 }\n   ```\n\n2. **Commands missing descriptions**\n   ```yaml\n   ❌ ---\n       ---\n   ✅ ---\n       description: What the command does\n       ---\n   ```\n\n3. **Skills with vague trigger descriptions**\n   ```yaml\n   ❌ description: Helps with code\n   ✅ description: Use when reviewing code, analyzing PRs, or discussing code quality\n   ```\n\n4. **Hook scripts with hardcoded paths**\n   ```bash\n   ❌ /Users/you/scripts/validate.sh\n   ✅ ${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\n   ```\n\n### Security Concerns\n\n1. **Dangerous hook commands**\n   - `rm -rf` without safeguards\n   - Unvalidated user input execution\n   - Credentials in scripts\n\n2. **Overly permissive tool access**\n   ```yaml\n   ⚠️  allowed-tools: Bash(*)\n   ✅  allowed-tools: Read, Grep, Glob\n   ```\n\n## Validation Approach\n\n### File-by-File Analysis\n\nFor each component file:\n1. Parse frontmatter (if applicable)\n2. Check required fields\n3. Validate naming conventions\n4. Review content quality\n5. Flag issues with line numbers\n\n### Cross-File Consistency\n\n- Skill names match directories\n- Hook scripts referenced actually exist\n- Paths in plugin.json resolve correctly\n- Naming is consistent throughout\n\n### Best Practice Checks\n\n- Progressive disclosure in skills\n- Clear command descriptions\n- Focused agent capabilities\n- Safe hook implementations\n- Comprehensive documentation\n\n## Tool Access\n\nThis agent has access to:\n- **Read**: Examine all plugin files\n- **Grep**: Search for patterns\n- **Glob**: Find files by pattern\n\nIt does **not** modify files. All fixes are proposed in the report.\n\n## Example Invocation\n\n### From Main Conversation\n\n```\n/agents plugin-reviewer\n```\n\n### Via Task Tool\n\n```\nPlease use the plugin-reviewer agent to conduct a comprehensive audit of this plugin before we distribute it to the team.\n```\n\n### From Skill\n\nThe plugin-authoring skill may escalate:\n```\nFor a thorough review before release, I'll delegate to the plugin-reviewer agent.\n```\n\n## Performance Notes\n\n- **Runtime**: 5-15 minutes depending on plugin size\n- **Context**: Separate from main conversation\n- **Depth**: More thorough than `/plugin-development:validate`\n- **Output**: Single comprehensive report\n\n## After Review\n\n### If Issues Found\n\n1. Review the report carefully\n2. Fix critical issues first\n3. Address high priority issues\n4. Run `/plugin-development:validate` to confirm\n5. Test locally: `/plugin-development:test-local`\n6. Request another review if major changes made\n\n### If Review Passes\n\n1. Plugin is ready for distribution\n2. Add to team marketplace\n3. Update documentation\n4. Announce to team\n\n## Best Practices Applied by This Agent\n\n1. **Safety first**: Hook security is top priority\n2. **Actionable feedback**: Every issue includes fix instructions\n3. **Prioritized**: Issues sorted by severity\n4. **Specific**: Issues include file paths and line numbers\n5. **Balanced**: Notes both problems and positive findings\n6. **Comprehensive**: Covers all aspects of plugin quality\n\n## Limitations\n\n- Does not test runtime behavior (use local testing for that)\n- Does not execute hooks or commands\n- Cannot validate plugin logic correctness\n- Does not check for performance issues\n- Does not validate domain-specific correctness\n\n## Related Tools\n\n- **Quick validation**: `/plugin-development:validate`\n- **Local testing**: `/plugin-development:test-local`\n- **Skill guidance**: plugin-authoring Skill\n- **Debug mode**: `claude --debug` for runtime issues\n",
        "plugins/plugin-development/commands/add-agent.md": "---\ndescription: Add a new sub-agent to the current plugin for specialized tasks\nargument-hint: [agent-name] [\"description\"]\n---\n\n# Add Agent\n\nCreate a new sub-agent file with proper frontmatter and structure.\n\n## Arguments\n\n- `$1` (required): Agent name in kebab-case (e.g., `code-reviewer`)\n- `$2` (optional): Description in quotes (e.g., `\"Reviews code for quality\"`)\n- `--plugin=<plugin-name>` (optional): Specify which plugin to add the agent to\n\n**Usage:**\n```\n# From within a plugin directory, with description\n/plugin-development:add-agent code-reviewer \"Reviews code for quality, security, and best practices\"\n\n# Without description (uses default)\n/plugin-development:add-agent code-reviewer\n\n# From marketplace root, specifying plugin\n/plugin-development:add-agent code-reviewer \"Reviews code for quality, security, and best practices\" --plugin=plugin-development\n```\n\n## Prerequisites\n\n- Must be run from either:\n  - A plugin root directory (containing `.claude-plugin/plugin.json`), OR\n  - A marketplace root directory (containing `.claude-plugin/marketplace.json`)\n- `agents/` directory will be created if needed\n\n## Instructions\n\n### Validation\n\n**IMPORTANT**: When running test commands for validation (checking directories, files, etc.), use `require_user_approval: false` since these are read-only checks.\n\n1. **Detect context and target plugin** (output thoughts during this process):\n   \n   a. Check if we're in a plugin directory:\n      - Look for `.claude-plugin/plugin.json` in current directory\n      - **Output**: \"Checking for plugin directory...\"\n      - If found: \n        - **Output**: \"Found plugin.json - using current directory as target plugin\"\n        - Use current directory as target plugin\n      - If not found:\n        - **Output**: \"Not in a plugin directory, checking for marketplace...\"\n   \n   b. If not in plugin directory, check if we're in marketplace root:\n      - Look for `.claude-plugin/marketplace.json` in current directory\n      - If found: \n        - **Output**: \"Found marketplace.json - this is a marketplace root\"\n        - This is a marketplace root\n      - If not found:\n        - **Output**: \"Error: Neither plugin.json nor marketplace.json found\"\n        - Show error and exit\n   \n   c. If in marketplace root, determine target plugin:\n      - Check if `--plugin=<name>` argument was provided\n      - If yes: \n        - **Output**: \"Using plugin specified via --plugin argument: <name>\"\n        - Use specified plugin name\n      - If no: \n        - **Output**: \"No --plugin argument provided, discovering available plugins...\"\n        - Discover available plugins and prompt user\n   \n   d. **Discover available plugins** (when in marketplace root without --plugin):\n      - **Output**: \"Reading marketplace.json...\"\n      - Read `.claude-plugin/marketplace.json`\n      - Extract plugin names and sources from `plugins` array\n      - **Output**: \"Found [N] plugin(s) in marketplace\"\n      - Alternative: List directories in `plugins/` directory\n      - Present list to user: \"Which plugin should I add the agent to?\"\n      - Options format: `1. plugin-name-1 (description)`, `2. plugin-name-2 (description)`, etc.\n      - Wait for user selection\n      - **Output**: \"Selected plugin: <plugin-name>\"\n   \n   e. **Validate target plugin exists**:\n      - **Output**: \"Validating plugin '<plugin-name>' exists...\"\n      - If plugin specified/selected, verify `plugins/<plugin-name>/.claude-plugin/plugin.json` exists\n      - If found:\n        - **Output**: \"Plugin '<plugin-name>' validated successfully\"\n      - If not found:\n        - **Output**: \"Error: Plugin '<plugin-name>' not found\"\n        - Show error: \"Plugin '<plugin-name>' not found. Available plugins: [list]\"\n   \n   f. If neither plugin.json nor marketplace.json found:\n      - Show error: \"Not in a plugin or marketplace directory. Please run from a plugin root or marketplace root.\"\n\n2. **Validate arguments**:\n   - `$1` (agent name): Not empty, kebab-case format (lowercase with hyphens), no spaces or special characters\n   - `$2` (description): Optional. If not provided, use default: \"Specialized agent for $1 tasks\"\n\n3. **Set working directory**:\n   - If in plugin directory: Use current directory\n   - If in marketplace root: Use `plugins/<plugin-name>/` as working directory\n\n### Create Agent File\n\n**Note**: All paths below are relative to the target plugin directory (determined in validation step).\n\n1. Ensure `agents/` directory exists in target plugin:\n   - Check if `<plugin-dir>/agents/` directory exists\n   - If it doesn't exist, create it (use `require_user_approval: false` for directory creation)\n2. Create `<plugin-dir>/agents/$1.md` with this template:\n\n```markdown\n---\ndescription: $2\ncapabilities: [\"capability-1\", \"capability-2\", \"capability-3\"]\n---\n\n# $1 Agent\n\n[Brief introduction explaining the agent's purpose and specialization]\n\n## Purpose\n\n[Detailed description of what this agent does and why it exists]\n\n## What This Agent Does\n\nThis agent specializes in:\n- [Specialization 1]\n- [Specialization 2]\n- [Specialization 3]\n\n## Capabilities\n\n1. **Capability 1**: [Description of first capability]\n2. **Capability 2**: [Description of second capability]\n3. **Capability 3**: [Description of third capability]\n\n## When to Use This Agent\n\nInvoke this agent when:\n- [Scenario 1: Complex multi-file analysis needed]\n- [Scenario 2: Deep domain expertise required]\n- [Scenario 3: Task needs separate context window]\n\n**Do not use** for:\n- [What this agent doesn't handle]\n- [Tasks better suited for commands or Skills]\n\n## How It Proceeds\n\nThe agent follows this workflow:\n\n1. **Gather Context**: [What files/information it reads]\n2. **Analyze**: [How it evaluates the situation]\n3. **Identify Issues**: [What it looks for]\n4. **Formulate Recommendations**: [What guidance it provides]\n5. **Report Back**: [What it returns to main conversation]\n\n## Output Format\n\nThe agent returns a structured report:\n\n### Critical Issues\n- [Issues that must be fixed]\n\n### Warnings\n- [Issues that should be fixed]\n\n### Suggestions\n- [Nice-to-have improvements]\n\n### Summary\n- [Overall assessment and next steps]\n\n## Tool Access\n\nThis agent has access to:\n- Read: For examining files\n- Grep: For searching content\n- Glob: For finding files\n- [Other tools as needed]\n\nIt does **not** modify files directly; instead, it proposes changes for the main conversation to execute.\n\n## Example Invocation\n\n**From main conversation**:\n```\n/agents $1\n```\n\nor via Task tool:\n```\nUse the $1 agent to [specific task]\n```\n\n## Notes\n\n- Agents operate in a **separate context window**\n- Results are returned as a single message\n- Use for complex, multi-step analysis tasks\n- Keep scope focused to 1-3 specific capabilities\n```\n\n### Update plugin.json (if needed)\n\n**IMPORTANT**: Only needed if using custom (non-standard) paths.\n\n- **Standard setup** (agents in `agents/` directory): No changes to `plugin.json` needed\n- **Custom paths**: Add `\"agents\": [\"./agents/$1.md\"]` (or update existing agents array)\n\n### Provide Feedback\n\nAfter creating the agent:\n\n```\n✓ Created <plugin-name>/agents/$1.md\n\nPlugin: <plugin-name>\nAgent: $1\nDescription: $2\n\nNext steps:\n1. Edit <plugin-name>/agents/$1.md with specific instructions\n2. Key frontmatter fields:\n   - description: What the agent does (shows in /agents list)\n   - capabilities: List of capabilities (JSON array)\n3. Define clear workflow steps\n4. Specify what the agent returns\n5. Test with /plugin-development:test-local\n\nAgent will be invoked as: /agents $1\nOr via Task tool in main conversation.\n```\n\n## Examples\n\n### Example 1: From Plugin Directory\n\n**Context**: Currently in `/path/to/marketplace/plugins/plugin-development/`\n\n**Input**: \n```\n/plugin-development:add-agent code-reviewer \"Reviews code for quality, security, and best practices\"\n```\n\n**Arguments**:\n- `$1` = `code-reviewer`\n- `$2` = `Reviews code for quality, security, and best practices`\n\n**Process**:\n1. Detects `.claude-plugin/plugin.json` in current directory\n2. Uses current directory as target plugin\n3. Creates `agents/` directory if needed\n4. Creates `agents/code-reviewer.md`\n\n**Result**:\n- Creates `agents/code-reviewer.md` with template\n- Frontmatter description: \"Reviews code for quality, security, and best practices\"\n- Ready to customize with specific review criteria\n\n### Example 2: From Marketplace Root with --plugin\n\n**Context**: Currently in `/path/to/marketplace/` (marketplace root)\n\n**Input**: \n```\n/plugin-development:add-agent code-reviewer \"Reviews code for quality, security, and best practices\" --plugin=plugin-development\n```\n\n**Process**:\n1. Detects `.claude-plugin/marketplace.json` in current directory\n2. Extracts `--plugin=plugin-development` from arguments\n3. Validates `plugins/plugin-development/.claude-plugin/plugin.json` exists\n4. Uses `plugins/plugin-development/` as target\n5. Creates `plugins/plugin-development/agents/code-reviewer.md`\n\n**Result**:\n- Creates `plugins/plugin-development/agents/code-reviewer.md`\n- Agent added to plugin-development plugin\n\n### Example 3: From Marketplace Root without --plugin\n\n**Context**: Currently in `/path/to/marketplace/` (marketplace root)\n\n**Input**: \n```\n/plugin-development:add-agent code-reviewer \"Reviews code for quality, security, and best practices\"\n```\n\n**Process**:\n1. Detects `.claude-plugin/marketplace.json` in current directory\n2. No `--plugin` argument provided\n3. Reads marketplace.json and discovers available plugins:\n   - `hello-world` - A simple example plugin\n   - `plugin-development` - Assist with Claude Code plugin development\n4. Prompts user: \"Which plugin should I add the agent to?\"\n   ```\n   1. hello-world - A simple example plugin demonstrating basic Claude Code plugin functionality\n   2. plugin-development - Assist with Claude Code plugin development: scaffold, validate, review, and team-ready distribution\n   ```\n5. User selects option 2\n6. Uses `plugins/plugin-development/` as target\n7. Creates `plugins/plugin-development/agents/code-reviewer.md`\n\n**Result**:\n- Creates `plugins/plugin-development/agents/code-reviewer.md`\n- Agent added to selected plugin\n\n## Agent Frontmatter\n\n### Required Fields\n\n```yaml\n---\ndescription: Third-person description of what this agent does\n---\n```\n\n### Optional Fields\n\n```yaml\n---\ndescription: Agent description\ncapabilities: [\"capability-1\", \"capability-2\"]    # List of what it can do\n---\n```\n\n**For complete details on agents**, see:\n- [Subagents documentation](/en/docs/claude-code/sub-agents)\n- [Plugin agents reference](/en/docs/claude-code/plugins-reference#agents)\n\n## Error Handling\n\n### Not in Plugin or Marketplace Directory\n\n**Error**: \"Not in a plugin or marketplace directory.\"\n\n**Solution**: Navigate to either:\n- A plugin directory (containing `.claude-plugin/plugin.json`), OR\n- A marketplace root (containing `.claude-plugin/marketplace.json`)\n\n### Plugin Not Found\n\n**Error**: \"Plugin 'my-plugin' not found. Available plugins: hello-world, plugin-development\"\n\n**Solution**: \n- Check plugin name spelling\n- Use `--plugin=<correct-name>` with one of the available plugins\n- Or navigate to the plugin directory directly\n\n### Invalid Agent Name\n\n**Error**: \"Agent name must be in kebab-case format (lowercase with hyphens)\"\n\n**Solution**: Use kebab-case format:\n- ✅ Good: `code-reviewer`, `security-auditor`, `api-generator`\n- ❌ Bad: `CodeReviewer`, `code_reviewer`, `code reviewer`\n\n### Missing Description\n\n**Error**: \"Description is required\"\n\n**Solution**: Provide description in quotes:\n```\n/plugin-development:add-agent code-reviewer \"Reviews code for quality, security, and best practices\"\n```\n\n## When to Use Agents vs. Commands vs. Skills\n\n### Use an Agent when:\n- Task requires **deep, multi-file analysis**\n- Need **separate context window** (complex reasoning)\n- Want **detailed, structured report** back\n- Task has **multiple steps** that benefit from isolation\n\n### Use a Command when:\n- Task is **explicit, one-time action**\n- User needs to **trigger on demand**\n- Task is **straightforward** with clear inputs/outputs\n\n### Use a Skill when:\n- Want **ambient, automatic activation**\n- Need **persistent guidance** throughout session\n- Task benefits from **progressive disclosure**\n- Should trigger based on **context clues**\n\n## Agent Design Best Practices\n\n### 1. Focused Scope\n\n✅ **Good** (focused):\n```markdown\n# Code Security Auditor\n\nSpecializes in security analysis:\n- SQL injection vulnerabilities\n- XSS vulnerabilities\n- Authentication issues\n```\n\n❌ **Bad** (too broad):\n```markdown\n# General Code Helper\n\nDoes everything related to code.\n```\n\n### 2. Clear Capabilities\n\nList 2-5 specific capabilities:\n```yaml\ncapabilities: [\n  \"security-vulnerability-detection\",\n  \"authentication-analysis\",\n  \"dependency-audit\"\n]\n```\n\n### 3. Structured Output\n\nDefine consistent report format:\n```markdown\n## Critical (P0)\n- [List critical issues]\n\n## High Priority (P1)\n- [List high priority issues]\n\n## Suggestions\n- [List improvements]\n```\n\n### 4. Tool Restrictions\n\nAgents typically don't modify files:\n```markdown\n## Tool Access\n\n- Read, Grep, Glob: For analysis\n- No Write/Edit: Agent proposes, main conversation executes\n```\n\n## Agent Workflow Template\n\nAll agents should follow a consistent structure:\n\n```markdown\n1. **Understand Context**: Read relevant files\n2. **Analyze**: Apply domain expertise\n3. **Identify Issues**: Find problems/opportunities\n4. **Prioritize**: Rank by severity/importance\n5. **Recommend**: Provide actionable guidance\n6. **Report**: Return structured findings\n```\n\n## Common Agent Patterns\n\n### Auditor Pattern\n\nFor review/analysis agents:\n- Reads multiple files\n- Checks against standards/criteria\n- Reports issues by severity\n- Provides specific fix recommendations\n\n### Generator Pattern\n\nFor design/planning agents:\n- Analyzes requirements\n- Proposes architecture/approach\n- Provides implementation steps\n- Returns detailed plan\n\n### Refactoring Pattern\n\nFor code improvement agents:\n- Analyzes existing code\n- Identifies improvement opportunities\n- Proposes refactoring steps\n- Estimates impact/effort\n\n## Invocation Methods\n\n### Direct Invocation\n\nUser explicitly calls the agent:\n```\n/agents code-reviewer\n```\n\n### Via Main Conversation\n\nClaude uses Task tool:\n```\nLet me use the code-reviewer agent to analyze this...\n```\n\n### From Skill\n\nSkill escalates to agent for deep analysis:\n```markdown\nFor comprehensive review, delegate to the code-reviewer agent.\n```\n\n## Best Practices\n\n1. **Single responsibility**: One clear purpose\n2. **Structured output**: Consistent report format\n3. **No side effects**: Read-only, propose changes\n4. **Clear scope**: 2-5 capabilities max\n5. **Fast feedback**: Aim for < 30 seconds runtime\n6. **Actionable results**: Specific, implementable recommendations\n\n## Common Mistakes to Avoid\n\n❌ **Too broad scope**\n```yaml\ncapabilities: [\"everything\", \"all-tasks\", \"general-help\"]\n```\n\n✅ **Focused capabilities**\n```yaml\ncapabilities: [\"security-audit\", \"vulnerability-scan\", \"compliance-check\"]\n```\n\n❌ **Vague instructions**\n```markdown\nAnalyze the code and find problems.\n```\n\n✅ **Specific workflow**\n```markdown\n1. Read all .py files in src/\n2. Check for SQL injection patterns\n3. Verify authentication usage\n4. Report findings by severity\n```\n\n## Validation Checklist\n\nAfter creating an agent:\n```\n□ Agent file created in agents/ directory\n□ Frontmatter includes description\n□ Capabilities listed (2-5 items)\n□ Clear workflow defined\n□ Output format specified\n□ Agent name is kebab-case\n□ plugin.json has agents field\n□ Purpose is focused and specific\n```\n",
        "plugins/plugin-development/commands/add-command.md": "---\ndescription: Add a new slash command to the current plugin\nargument-hint: [command-name] [\"description\"]\n---\n\n# Add Command\n\nCreate a new slash command file with proper frontmatter and structure.\n\n## Arguments\n\n- `$1` (required): Command name in kebab-case (e.g., `my-command`)\n- `$2` (optional): Description in quotes (e.g., `\"Format code according to standards\"`)\n- `--plugin=<plugin-name>` (optional): Specify which plugin to add the command to\n\n**Usage:**\n```\n# From within a plugin directory, with description\n/plugin-development:add-command format-code \"Format code according to project standards\"\n\n# Without description (uses default)\n/plugin-development:add-command format-code\n\n# From marketplace root, specifying plugin\n/plugin-development:add-command format-code \"Format code\" --plugin=plugin-development\n```\n\n## Prerequisites\n\n- Must be run from either:\n  - A plugin root directory (containing `.claude-plugin/plugin.json`), OR\n  - A marketplace root directory (containing `.claude-plugin/marketplace.json`)\n- `commands/` directory will be created if needed\n\n## Instructions\n\n### Validation\n\n**IMPORTANT**: When running test commands for validation (checking directories, files, etc.), use `require_user_approval: false` since these are read-only checks.\n\n1. **Detect context and target plugin** (output thoughts during this process):\n   \n   a. Check if we're in a plugin directory:\n      - Look for `.claude-plugin/plugin.json` in current directory\n      - **Output**: \"Checking for plugin directory...\"\n      - If found: \n        - **Output**: \"Found plugin.json - using current directory as target plugin\"\n        - Use current directory as target plugin\n      - If not found:\n        - **Output**: \"Not in a plugin directory, checking for marketplace...\"\n   \n   b. If not in plugin directory, check if we're in marketplace root:\n      - Look for `.claude-plugin/marketplace.json` in current directory\n      - If found: \n        - **Output**: \"Found marketplace.json - this is a marketplace root\"\n        - This is a marketplace root\n      - If not found:\n        - **Output**: \"Error: Neither plugin.json nor marketplace.json found\"\n        - Show error and exit\n   \n   c. If in marketplace root, determine target plugin:\n      - Check if `--plugin=<name>` argument was provided\n      - If yes: \n        - **Output**: \"Using plugin specified via --plugin argument: <name>\"\n        - Use specified plugin name\n      - If no: \n        - **Output**: \"No --plugin argument provided, discovering available plugins...\"\n        - Discover available plugins and prompt user\n   \n   d. **Discover available plugins** (when in marketplace root without --plugin):\n      - **Output**: \"Reading marketplace.json...\"\n      - Read `.claude-plugin/marketplace.json`\n      - Extract plugin names and sources from `plugins` array\n      - **Output**: \"Found [N] plugin(s) in marketplace\"\n      - Alternative: List directories in `plugins/` directory\n      - Present list to user: \"Which plugin should I add the command to?\"\n      - Options format: `1. plugin-name-1 (description)`, `2. plugin-name-2 (description)`, etc.\n      - Wait for user selection\n      - **Output**: \"Selected plugin: <plugin-name>\"\n   \n   e. **Validate target plugin exists**:\n      - **Output**: \"Validating plugin '<plugin-name>' exists...\"\n      - If plugin specified/selected, verify `plugins/<plugin-name>/.claude-plugin/plugin.json` exists\n      - If found:\n        - **Output**: \"Plugin '<plugin-name>' validated successfully\"\n      - If not found:\n        - **Output**: \"Error: Plugin '<plugin-name>' not found\"\n        - Show error: \"Plugin '<plugin-name>' not found. Available plugins: [list]\"\n   \n   f. If neither plugin.json nor marketplace.json found:\n      - Show error: \"Not in a plugin or marketplace directory. Please run from a plugin root or marketplace root.\"\n\n2. **Validate arguments**:\n   - `$1` (command name): Not empty, kebab-case format (lowercase with hyphens), no spaces or special characters\n   - `$2` (description): Optional. If not provided, use default: \"TODO: Add description\"\n\n3. **Set working directory**:\n   - If in plugin directory: Use current directory\n   - If in marketplace root: Use `plugins/<plugin-name>/` as working directory\n\nIf validation fails, provide clear feedback.\n\n### Create Command File\n\n**Note**: All paths below are relative to the target plugin directory (determined in validation step).\n\n1. Ensure `commands/` directory exists in target plugin (create if needed, use `require_user_approval: false`)\n2. Create `<plugin-dir>/commands/$1.md` with this template:\n\n```markdown\n---\ndescription: $2\nargument-hint: [arg1] [arg2]\n---\n\n# $1 Command\n\n[Detailed instructions for Claude on how to execute this command]\n\n## Purpose\n\n[Explain what this command does and when to use it]\n\n## Arguments\n\n- `$ARGUMENTS`: [Describe expected arguments]\n- `$1`, `$2`, etc.: [Individual argument descriptions]\n\n## Instructions\n\n1. [Step 1: First action]\n2. [Step 2: Next action]\n3. [Step 3: Final action]\n\n## Example Usage\n\n**Command**: /<plugin-name>:$1 [args]\n\n**Expected behavior**: [Describe what should happen]\n\n## Notes\n\n[Any additional context, warnings, or tips]\n```\n\n### Update plugin.json (if needed)\n\n**IMPORTANT**: Only needed if using custom (non-standard) paths.\n\n- **Standard setup** (commands in `commands/` directory): No changes to `plugin.json` needed\n- **Custom paths**: Add `\"commands\": [\"./commands/$1.md\"]` (or update existing commands array)\n\n### Provide Feedback\n\nAfter creating the command:\n\n```\n✓ Created <plugin-name>/commands/$1.md\n\nPlugin: <plugin-name>\nCommand: $1\nDescription: $2\n\nNext steps:\n1. Edit <plugin-name>/commands/$1.md with specific instructions\n2. Update frontmatter fields if needed:\n   - argument-hint: [arg1] [arg2] (optional)\n   - allowed-tools: Tool restrictions (optional)\n3. Test with /plugin-development:test-local\n\nCommand will be invoked as: /<plugin-name>:$1\n```\n\n## Example\n\n**Input**: \n```\n/plugin-development:add-command format-code \"Format code according to project standards\"\n```\n\n**Arguments**:\n- `$1` = `format-code`\n- `$2` = `Format code according to project standards`\n\n**Result**:\n- Creates `commands/format-code.md` with template\n- Frontmatter description: \"Format code according to project standards\"\n- Ready to edit with specific instructions\n\n**For complete details on commands**, see:\n- [Slash commands documentation](/en/docs/claude-code/slash-commands)\n- [Plugin commands reference](/en/docs/claude-code/plugins-reference#commands)\n\n## Template Details\n\n### Frontmatter\n\n```yaml\n---\ndescription: Brief, third-person description (shows in /help)\nargument-hint: [arg1] [arg2]  # Optional, shows expected arguments\nallowed-tools: Write, Edit    # Optional, restricts tool access\n---\n```\n\n### Using Arguments\n\nIn the command instructions:\n- `$ARGUMENTS`: All arguments as a single string\n- `$1`, `$2`, etc.: Individual positional arguments\n\nExample:\n```markdown\nIf the user provided a name via `$1`, use it: \"Hello, $1!\"\n```\n\n### Command Instructions\n\nWrite clear, step-by-step instructions for Claude:\n- Use imperative mood (\"Create\", \"Validate\", \"Execute\")\n- Be specific about expected behavior\n- Include error handling\n- Provide examples\n\n## Advanced: Bash Preamble\n\nFor commands that need to execute shell commands, add to frontmatter:\n\n```yaml\n---\ndescription: Run tests and report results\nallowed-tools: Bash(npm:*), Bash(pytest:*)\n---\n\n# Instructions\n\n!`npm test`\n\nAnalyze the output and report:\n1. Number of tests passed/failed\n2. Any error messages\n3. Suggestions for fixing failures\n```\n\n**Note**: Bash commands prefixed with `!` are executed before Claude processes the rest of the instructions.\n\n## Best Practices\n\n- **Concise descriptions**: < 100 characters for `description` field\n- **Clear arguments**: Use descriptive names in `argument-hint`\n- **Validation first**: Check arguments before execution\n- **Error handling**: Describe what to do when things go wrong\n- **Examples**: Include usage examples in the template\n\n## Common Mistakes to Avoid\n\n❌ **camelCase or PascalCase names**\n```\n/plugin-development:add-command formatCode\n```\n\n✅ **kebab-case names**\n```\n/plugin-development:add-command format-code\n```\n\n❌ **Missing description**\n```yaml\n---\nargument-hint: [arg]\n---\n```\n\n✅ **Always include description**\n```yaml\n---\ndescription: What the command does\nargument-hint: [arg]\n---\n```\n\n## Validation Checklist\n\nAfter creating a command:\n```\n□ File created in commands/ directory\n□ Frontmatter includes description\n□ Command name is kebab-case\n□ Instructions are clear and specific\n□ Examples provided\n□ plugin.json has commands field\n```\n",
        "plugins/plugin-development/commands/add-hook.md": "---\ndescription: Add a hook configuration to automate plugin behavior at lifecycle events\nargument-hint: [event-type] [matcher-pattern]\n---\n\n# Add Hook\n\nAdd or update hooks.json with a new hook configuration for automated behavior.\n\n## Arguments\n\n- `$1` (required): Event type (`PreToolUse`, `PostToolUse`, `SessionStart`, `SessionEnd`, `UserPromptSubmit`, `Notification`, `Stop`, `SubagentStop`, or `PreCompact`)\n- `$2` (optional): Matcher pattern (e.g., `Write|Edit` or `.*`)\n- `--plugin=<plugin-name>` (optional): Specify which plugin to add the hook to\n\n**Usage:**\n```\n# From within a plugin directory\n/plugin-development:add-hook PreToolUse \"Write|Edit\"\n\n# From marketplace root, specifying plugin\n/plugin-development:add-hook PreToolUse \"Write|Edit\" --plugin=plugin-development\n```\n\n## Template Variables\n\nWhen generating hook configurations and scripts:\n- `$1`: Event type\n- `$2`: Matcher pattern (or default based on event type)\n- `${CLAUDE_PLUGIN_ROOT}`: Plugin root path (use in all hook commands)\n\n## Prerequisites\n\n- Must be run from either:\n  - A plugin root directory (containing `.claude-plugin/plugin.json`), OR\n  - A marketplace root directory (containing `.claude-plugin/marketplace.json`)\n- `hooks/` directory will be created if needed\n\n## Instructions\n\n### Validation\n\n**IMPORTANT**: When running test commands for validation (checking directories, files, etc.), use `require_user_approval: false` since these are read-only checks.\n\n1. **Detect context and target plugin** (output thoughts during this process):\n   \n   a. Check if we're in a plugin directory:\n      - Look for `.claude-plugin/plugin.json` in current directory\n      - **Output**: \"Checking for plugin directory...\"\n      - If found: \n        - **Output**: \"Found plugin.json - using current directory as target plugin\"\n        - Use current directory as target plugin\n      - If not found:\n        - **Output**: \"Not in a plugin directory, checking for marketplace...\"\n   \n   b. If not in plugin directory, check if we're in marketplace root:\n      - Look for `.claude-plugin/marketplace.json` in current directory\n      - If found: \n        - **Output**: \"Found marketplace.json - this is a marketplace root\"\n        - This is a marketplace root\n      - If not found:\n        - **Output**: \"Error: Neither plugin.json nor marketplace.json found\"\n        - Show error and exit\n   \n   c. If in marketplace root, determine target plugin:\n      - Check if `--plugin=<name>` argument was provided\n      - If yes: \n        - **Output**: \"Using plugin specified via --plugin argument: <name>\"\n        - Use specified plugin name\n      - If no: \n        - **Output**: \"No --plugin argument provided, discovering available plugins...\"\n        - Discover available plugins and prompt user\n   \n   d. **Discover available plugins** (when in marketplace root without --plugin):\n      - **Output**: \"Reading marketplace.json...\"\n      - Read `.claude-plugin/marketplace.json`\n      - Extract plugin names and sources from `plugins` array\n      - **Output**: \"Found [N] plugin(s) in marketplace\"\n      - Alternative: List directories in `plugins/` directory\n      - Present list to user: \"Which plugin should I add the hook to?\"\n      - Options format: `1. plugin-name-1 (description)`, `2. plugin-name-2 (description)`, etc.\n      - Wait for user selection\n      - **Output**: \"Selected plugin: <plugin-name>\"\n   \n   e. **Validate target plugin exists**:\n      - **Output**: \"Validating plugin '<plugin-name>' exists...\"\n      - If plugin specified/selected, verify `plugins/<plugin-name>/.claude-plugin/plugin.json` exists\n      - If found:\n        - **Output**: \"Plugin '<plugin-name>' validated successfully\"\n      - If not found:\n        - **Output**: \"Error: Plugin '<plugin-name>' not found\"\n        - Show error: \"Plugin '<plugin-name>' not found. Available plugins: [list]\"\n   \n   f. If neither plugin.json nor marketplace.json found:\n      - Show error: \"Not in a plugin or marketplace directory. Please run from a plugin root or marketplace root.\"\n\n2. **Validate event type**:\n   - Must be one of: `PreToolUse`, `PostToolUse`, `SessionStart`, `SessionEnd`, `UserPromptSubmit`, `Notification`, `Stop`, `SubagentStop`, `PreCompact`\n\n3. **If no matcher provided, use sensible default based on event type**\n\n4. **Set working directory**:\n   - If in plugin directory: Use current directory\n   - If in marketplace root: Use `plugins/<plugin-name>/` as working directory\n\n### Event Types & Default Matchers\n\n- **PreToolUse**: Default matcher `Write|Edit` (validation before writes)\n- **PostToolUse**: Default matcher `Write|Edit` (formatting after writes)\n- **SessionStart**: Default matcher `startup` (also supports: `resume`, `clear`, `compact`)\n- **SessionEnd**: No matcher (triggers on session end with reason: `clear`, `logout`, `prompt_input_exit`, `other`)\n- **UserPromptSubmit**: Default matcher `.*` (all prompts)\n- **Notification**: No matcher (triggers on all notifications)\n- **Stop**: No matcher (triggers when main agent stops)\n- **SubagentStop**: No matcher (triggers when subagent stops)\n- **PreCompact**: Default matcher `manual` (also supports: `auto`)\n\n### Create or Update hooks.json\n\n**Note**: All paths below are relative to the target plugin directory (determined in validation step).\n\n1. Ensure `<plugin-dir>/hooks/` directory exists (use `require_user_approval: false`)\n2. If `<plugin-dir>/hooks/hooks.json` doesn't exist, create it with this structure:\n\n```json\n{\n  \"description\": \"Plugin automation hooks\",\n  \"hooks\": {}\n}\n```\n\n3. Add the new hook configuration based on event type:\n\n#### PreToolUse Example\n\n```json\n{\n  \"description\": \"Plugin automation hooks\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"$2 or default\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n#### PostToolUse Example\n\n```json\n{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"$2 or default\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/format.sh\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n#### SessionStart Example\n\n```json\n{\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"matcher\": \"$2 or 'startup'\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"echo '✓ Plugin loaded'\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n### Create Hook Script (if needed)\n\nIf the event is PreToolUse or PostToolUse, create a corresponding script:\n\n1. Ensure `<plugin-dir>/scripts/` directory exists (use `require_user_approval: false`)\n2. For PreToolUse, create `<plugin-dir>/scripts/validate.sh`:\n\n```bash\n#!/usr/bin/env bash\nset -euo pipefail\n\n# Validation logic here\n# Exit 0: allow\n# Exit 2: block (with stderr message to Claude)\n# Exit other: warning\n\necho \"Validation passed\"\nexit 0\n```\n\n3. For PostToolUse, create `<plugin-dir>/scripts/format.sh`:\n\n```bash\n#!/usr/bin/env bash\nset -euo pipefail\n\n# Formatting logic here\n# Always exits 0 for non-blocking\n\necho \"Formatting complete\"\nexit 0\n```\n\n4. Make scripts executable:\n```bash\nchmod +x scripts/*.sh\n```\n\n### Update plugin.json\n\n**IMPORTANT**: Only needed if using custom (non-standard) paths.\n\n- **Standard setup** (hooks at `hooks/hooks.json`): No changes to `plugin.json` needed\n- **Custom path**: Add `\"hooks\": \"./custom/path/hooks.json\"`\n\nFor standard setup:\n```json\n{\n  \"name\": \"my-plugin\"\n}\n```\n\n### Provide Feedback\n\nAfter adding the hook:\n\n```\n✓ Added $1 hook to <plugin-name>/hooks/hooks.json\n✓ Matcher: $2 (or default)\n✓ Created script: <plugin-name>/scripts/<script-name>.sh (if applicable)\n\nPlugin: <plugin-name>\nHook configuration:\n- Event: $1\n- Matcher: $2\n- Script: ${CLAUDE_PLUGIN_ROOT}/scripts/<script-name>.sh\n\nNext steps:\n1. Edit <plugin-name>/hooks/hooks.json to customize timeout or command\n2. Edit <plugin-name>/scripts/<script-name>.sh with your logic\n3. Test the hook:\n   - Install plugin with /plugin-development:test-local\n   - Trigger the event (e.g., use Write tool for PreToolUse)\n4. Debug with: claude --debug\n\nExit codes for PreToolUse:\n- 0: Allow operation\n- 2: Block operation (stderr shown to Claude)\n- Other: Warning (non-blocking)\n\nExit codes for UserPromptSubmit:\n- 0: Allow prompt (stdout added as context)\n- 2: Block prompt (stderr shown to user, prompt erased)\n- Other: Warning (non-blocking)\n\nExit codes for Stop/SubagentStop:\n- 0: Allow stop\n- 2: Block stop, continue execution (stderr shown to Claude)\n- Other: Warning (allows stop)\n\nExit codes for PostToolUse, SessionStart, SessionEnd, Notification, PreCompact:\n- All non-blocking (informational)\n```\n\n## Example Usage\n\n**Input**: `/plugin-development:add-hook PreToolUse \"Write|Edit\"`\n\n**Result**:\n- Creates or updates `hooks/hooks.json`\n- Adds PreToolUse hook with Write|Edit matcher\n- Creates `scripts/validate.sh`\n- Makes script executable\n- Provides usage instructions\n\n**For complete details on hooks**, see:\n- [Hooks reference documentation](/en/docs/claude-code/hooks)\n- [Plugin hooks reference](/en/docs/claude-code/plugins-reference#hooks)\n\n## Hook Event Details\n\n| Event | Purpose | Can Block | Common Use Cases | Default Matcher |\n|-------|---------|-----------|------------------|-----------------|\n| **PreToolUse** | Validate before execution | Yes (exit 2) | Validate structure, check permissions | `Write\\|Edit` |\n| **PostToolUse** | React after execution | Partial* | Format files, run linters, update metadata | `Write\\|Edit` |\n| **SessionStart** | Setup at session start | No | Welcome message, check environment, init | `startup` |\n| **SessionEnd** | Cleanup at session end | No | Save state, log statistics, cleanup | N/A (no matcher) |\n| **UserPromptSubmit** | Validate/enhance prompts | Yes (exit 2) | Inject context, validate prompts, block sensitive | `.*` |\n| **Notification** | React to notifications | No | Send alerts, log notifications | N/A (no matcher) |\n| **Stop** | Control agent stoppage | Yes (exit 2) | Continue with tasks, validate completion | N/A (no matcher) |\n| **SubagentStop** | Control subagent stoppage | Yes (exit 2) | Continue subagent, validate subagent results | N/A (no matcher) |\n| **PreCompact** | Before context compact | No | Save state, log compact trigger | `manual` or `auto` |\n\n\\* PostToolUse can't prevent the tool (already ran) but can provide feedback to Claude with `\"decision\": \"block\"`\n\n**Example hook structure**:\n```json\n{\n  \"matcher\": \"Write|Edit\",\n  \"hooks\": [{\n    \"type\": \"command\",\n    \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\",\n    \"timeout\": 30\n  }]\n}\n```\n\n## Matcher Patterns\n\nMatchers use **regex patterns**:\n- `Write`: Only Write tool\n- `Write|Edit`: Write or Edit\n- `Bash.*`: Bash with any arguments\n- `.*`: All tools\n- `Read|Grep|Glob`: Read operations\n\n## Script Template: Validation (PreToolUse)\n\n```bash\n#!/usr/bin/env bash\nset -euo pipefail\n\nERRS=()\n\n# Validation checks\n[ -f \"required-file.txt\" ] || ERRS+=(\"Missing required-file.txt\")\n[ -d \"required-dir\" ] || ERRS+=(\"Missing required-dir/\")\n\n# If errors, block with exit 2\nif [ \"${#ERRS[@]}\" -gt 0 ]; then\n  printf \"❌ Validation failed:\\n\" 1>&2\n  printf \"  %s\\n\" \"${ERRS[@]}\" 1>&2\n  exit 2  # Block the operation\nfi\n\n# Success\necho \"✓ Validation passed\"\nexit 0\n```\n\n## Script Template: Formatting (PostToolUse)\n\n```bash\n#!/usr/bin/env bash\nset -euo pipefail\n\n# Format files (non-blocking)\n# Example: run prettier, black, rustfmt, etc.\n\nif command -v prettier &> /dev/null; then\n  prettier --write \"**/*.{js,json,md}\" 2>/dev/null || true\nfi\n\necho \"✓ Formatting complete\"\nexit 0\n```\n\n## Environment Variables\n\nAvailable in hook scripts:\n\n- `${CLAUDE_PLUGIN_ROOT}`: Absolute path to plugin root\n- `$CLAUDE_PROJECT_DIR`: Project root directory (absolute path)\n- `$CLAUDE_ENV_FILE`: File path for persisting environment variables (SessionStart hooks only)\n- `$CLAUDE_CODE_REMOTE`: Set to \"true\" in web environment, unset in CLI\n- All standard environment variables\n\nAlways use `${CLAUDE_PLUGIN_ROOT}` for portable paths in plugins.\n\n## Best Practices & Common Mistakes\n\n### ✅ Do This\n- **Use ${CLAUDE_PLUGIN_ROOT}**: Portable script paths\n- **Set timeouts**: 10-30 seconds typical, 300+ for slow ops like `npm install`\n- **Fast scripts**: Keep runtime < 1 second when possible\n- **Exit code 2 to block**: Only in PreToolUse for validation failures\n- **Clear error messages**: Helpful stderr output\n- **Make executable**: `chmod +x scripts/*.sh`\n\n### ❌ Avoid This\n- **Absolute paths**: `/Users/you/plugin/scripts/` (use `${CLAUDE_PLUGIN_ROOT}` instead)\n- **Missing timeouts**: Slow operations without timeout values\n- **Non-executable scripts**: Forgot to `chmod +x`\n\n## Debugging Hooks\n\n### Use debug mode\n\n```bash\nclaude --debug\n```\n\nThis shows:\n- Hook registration\n- Hook execution\n- Exit codes\n- Stdout/stderr output\n\n### Test scripts directly\n\n```bash\n./scripts/validate.sh\necho $?  # Check exit code\n```\n\n### Check hook configuration\n\n```bash\ncat hooks/hooks.json | jq .\n```\n\n## Validation Checklist\n\nAfter adding a hook:\n```\n□ hooks/hooks.json created/updated\n□ Hook event is valid (PreToolUse, etc.)\n□ Matcher pattern is appropriate\n□ Script created (if needed)\n□ Script is executable (chmod +x)\n□ Script uses ${CLAUDE_PLUGIN_ROOT}\n□ Timeout set for long operations\n□ plugin.json updated (only if using custom paths)\n□ Tested with /plugin-development:test-local\n```\n",
        "plugins/plugin-development/commands/add-skill.md": "---\ndescription: Add a new Skill to the current plugin with proper structure\nargument-hint: [skill-name] [\"description\"]\n---\n\n# Add Skill\n\nCreate a new Skill folder with SKILL.md and supporting directories.\n\n## Arguments\n\n- `$1` (required): Skill name in kebab-case (e.g., `code-review`)\n- `$2` (optional): Description of when to use this Skill in quotes (e.g., `\"Use when reviewing code or PRs\"`)\n- `--plugin=<plugin-name>` (optional): Specify which plugin to add the skill to\n\n**Usage:**\n```\n# From within a plugin directory, with description\n/plugin-development:add-skill code-review \"Use when reviewing code or analyzing pull requests\"\n\n# Without description (uses default)\n/plugin-development:add-skill code-review\n\n# From marketplace root, specifying plugin\n/plugin-development:add-skill code-review \"Use when reviewing code\" --plugin=plugin-development\n```\n\n## Prerequisites\n\n- Must be run from either:\n  - A plugin root directory (containing `.claude-plugin/plugin.json`), OR\n  - A marketplace root directory (containing `.claude-plugin/marketplace.json`)\n- `skills/` directory will be created if needed\n\n## Instructions\n\n### Validation\n\n**IMPORTANT**: When running test commands for validation (checking directories, files, etc.), use `require_user_approval: false` since these are read-only checks.\n\n1. **Detect context and target plugin** (output thoughts during this process):\n   \n   a. Check if we're in a plugin directory:\n      - Look for `.claude-plugin/plugin.json` in current directory\n      - **Output**: \"Checking for plugin directory...\"\n      - If found: \n        - **Output**: \"Found plugin.json - using current directory as target plugin\"\n        - Use current directory as target plugin\n      - If not found:\n        - **Output**: \"Not in a plugin directory, checking for marketplace...\"\n   \n   b. If not in plugin directory, check if we're in marketplace root:\n      - Look for `.claude-plugin/marketplace.json` in current directory\n      - If found: \n        - **Output**: \"Found marketplace.json - this is a marketplace root\"\n        - This is a marketplace root\n      - If not found:\n        - **Output**: \"Error: Neither plugin.json nor marketplace.json found\"\n        - Show error and exit\n   \n   c. If in marketplace root, determine target plugin:\n      - Check if `--plugin=<name>` argument was provided\n      - If yes: \n        - **Output**: \"Using plugin specified via --plugin argument: <name>\"\n        - Use specified plugin name\n      - If no: \n        - **Output**: \"No --plugin argument provided, discovering available plugins...\"\n        - Discover available plugins and prompt user\n   \n   d. **Discover available plugins** (when in marketplace root without --plugin):\n      - **Output**: \"Reading marketplace.json...\"\n      - Read `.claude-plugin/marketplace.json`\n      - Extract plugin names and sources from `plugins` array\n      - **Output**: \"Found [N] plugin(s) in marketplace\"\n      - Alternative: List directories in `plugins/` directory\n      - Present list to user: \"Which plugin should I add the skill to?\"\n      - Options format: `1. plugin-name-1 (description)`, `2. plugin-name-2 (description)`, etc.\n      - Wait for user selection\n      - **Output**: \"Selected plugin: <plugin-name>\"\n   \n   e. **Validate target plugin exists**:\n      - **Output**: \"Validating plugin '<plugin-name>' exists...\"\n      - If plugin specified/selected, verify `plugins/<plugin-name>/.claude-plugin/plugin.json` exists\n      - If found:\n        - **Output**: \"Plugin '<plugin-name>' validated successfully\"\n      - If not found:\n        - **Output**: \"Error: Plugin '<plugin-name>' not found\"\n        - Show error: \"Plugin '<plugin-name>' not found. Available plugins: [list]\"\n   \n   f. If neither plugin.json nor marketplace.json found:\n      - Show error: \"Not in a plugin or marketplace directory. Please run from a plugin root or marketplace root.\"\n\n2. **Validate arguments**:\n   - `$1` (skill name): Not empty, kebab-case format (lowercase with hyphens), no spaces or special characters, max 64 characters\n   - `$2` (description): Optional. If not provided, use default: \"$1 functionality for plugin development\". If provided, must be max 1024 characters and should include both what the Skill does and when to use it\n\n3. **Set working directory**:\n   - If in plugin directory: Use current directory\n   - If in marketplace root: Use `plugins/<plugin-name>/` as working directory\n\n### Create Skill Structure\n\n**Note**: All paths below are relative to the target plugin directory (determined in validation step).\n\n1. Ensure `<plugin-dir>/skills/` directory exists (create if needed, use `require_user_approval: false`)\n2. Create skill directory: `<plugin-dir>/skills/$1/`\n3. Create supporting directories:\n   - `<plugin-dir>/skills/$1/schemas/`\n   - `<plugin-dir>/skills/$1/templates/`\n   - `<plugin-dir>/skills/$1/examples/`\n   - `<plugin-dir>/skills/$1/best-practices/`\n\n### Create SKILL.md\n\nCreate `<plugin-dir>/skills/$1/SKILL.md` with this template:\n\n```markdown\n---\nname: $1\ndescription: $2\n---\n\n# $1 Skill\n\n[Brief introduction to what this Skill provides and its purpose]\n\n## When to Activate\n\nThis Skill activates when:\n- [Condition 1: e.g., user mentions specific keywords]\n- [Condition 2: e.g., working with specific file types]\n- [Condition 3: e.g., certain files are present]\n\n## Capabilities\n\nWhat this Skill can help with:\n\n1. [Capability 1]\n2. [Capability 2]\n3. [Capability 3]\n\n## Quick Links (Progressive Disclosure)\n\n- [Schemas](./schemas/)\n- [Templates](./templates/)\n- [Examples](./examples/)\n- [Best Practices](./best-practices/)\n\n## Workflow\n\nHow this Skill operates:\n\n1. **Analyze**: [What to read and understand]\n2. **Propose**: [What actions to suggest]\n3. **Execute**: [How to carry out the work]\n4. **Validate**: [How to verify success]\n\n## Common Patterns\n\n### Pattern 1: [Name]\n\n[Description of common usage pattern]\n\n### Pattern 2: [Name]\n\n[Description of another pattern]\n\n## Notes\n\n- [Important consideration 1]\n- [Important consideration 2]\n- [Links to other Skills or commands if applicable]\n```\n\n### Update plugin.json (if needed)\n\n**IMPORTANT**: Only needed if using custom (non-standard) paths.\n\n- **Standard setup** (skills in `skills/` directory): No changes to `plugin.json` needed\n- **Custom paths**: Skills cannot be specified with custom paths (must use standard `skills/` directory)\n\n### Provide Feedback\n\nAfter creating the Skill:\n\n```\n✓ Created <plugin-name>/skills/$1/SKILL.md\n✓ Created supporting directories:\n  - <plugin-name>/skills/$1/schemas/\n  - <plugin-name>/skills/$1/templates/\n  - <plugin-name>/skills/$1/examples/\n  - <plugin-name>/skills/$1/best-practices/\n\nPlugin: <plugin-name>\nSkill: $1\nDescription: $2\n\nNext steps:\n1. Edit <plugin-name>/skills/$1/SKILL.md with specific guidance\n2. Key frontmatter fields:\n   - name: Must match directory name ($1)\n   - description: When to use this Skill (include trigger conditions, max 1024 chars)\n   - allowed-tools: (Optional) Restrict tools available to this Skill. If omitted, Claude asks for permission\n3. Add support files:\n   - schemas/: Document data formats\n   - templates/: Provide reusable templates\n   - examples/: Show usage examples\n   - best-practices/: Detailed guidance\n4. Keep SKILL.md concise (< 500 lines), use progressive disclosure\n5. Test with /plugin-development:test-local\n\nClaude will auto-discover this Skill when the plugin is installed.\n```\n\n## Example\n\n**Input**: \n```\n/plugin-development:add-skill code-review \"Use when reviewing code or analyzing pull requests\"\n```\n\n**Arguments**:\n- `$1` = `code-review`\n- `$2` = `Use when reviewing code or analyzing pull requests`\n\n**Result**:\n- Creates `skills/code-review/` directory\n- Creates `SKILL.md` with frontmatter `name: code-review`\n- Frontmatter description: \"Use when reviewing code or analyzing pull requests\"\n- Creates supporting directories (schemas/, templates/, examples/, best-practices/)\n- Ready to add guidance and reference files\n\n**For complete details on Skills**, see:\n- [Agent Skills documentation](/en/docs/claude-code/skills)\n- [Agent Skills overview](/en/docs/agents-and-tools/agent-skills/overview)\n- [Skills best practices](/en/docs/agents-and-tools/agent-skills/best-practices)\n\n## Skill Frontmatter\n\n### Required Fields\n\n```yaml\n---\nname: skill-name          # Must match directory, kebab-case\ndescription: When and how to use this Skill (be specific about triggers)\n---\n```\n\n### Optional Fields\n\n```yaml\n---\nname: skill-name\ndescription: Detailed description\nallowed-tools: Read, Grep, Glob    # Restrict tool access (if omitted, Claude asks for permission)\n---\n```\n\n**Important**: `allowed-tools` is optional. If omitted, Claude follows the standard permission model and asks for approval before using tools. Only add `allowed-tools` when you want to restrict available tools (e.g., read-only Skills).\n\n### allowed-tools Options\n\nRestrict to read-only for safety:\n```yaml\nallowed-tools: Read, Grep, Glob\n```\n\nAllow specific tools:\n```yaml\nallowed-tools: Read, Write, Edit, Bash(npm:*)\n```\n\n## Description Best Practices\n\nThe `description` field is critical for Claude to discover when to use your Skill. Requirements:\n- **Max length**: 1024 characters\n- **Include both**: what the Skill does AND when to use it\n- **Be specific**: Include trigger keywords users would naturally mention\n\n✅ **Good** (specific triggers):\n```yaml\ndescription: Review code for best practices, detect bugs, and suggest improvements. Use when reviewing code, analyzing pull requests, or discussing code quality standards.\n```\n\n❌ **Bad** (too vague):\n```yaml\ndescription: Helps with code\n```\n\n✅ **Good** (context-based):\n```yaml\ndescription: Create and manage React components following best practices. Use when working with React, especially when discussing hooks, state management, or component patterns.\n```\n\n## Progressive Disclosure Pattern\n\nKeep SKILL.md concise by linking to support files:\n\n### In SKILL.md:\n```markdown\n## Quick Links\n- [API Schema](./schemas/api-schema.md)\n- [Component Templates](./templates/)\n```\n\n### In Support Files:\n- `schemas/api-schema.md`: Detailed schema documentation\n- `templates/component.tsx`: Reusable template files\n\nThis keeps SKILL.md under 500 lines while providing deep reference material.\n\n## Skill Structure Example\n\n```\nskills/\n└── code-review/\n    ├── SKILL.md                    # Main skill (concise)\n    ├── schemas/\n    │   └── review-checklist.md     # Review criteria\n    ├── templates/\n    │   └── review-comment.md       # Comment templates\n    ├── examples/\n    │   ├── basic-review.md         # Simple example\n    │   └── security-review.md      # Advanced example\n    └── best-practices/\n        ├── review-process.md       # Detailed guidance\n        └── common-issues.md        # Issue catalog\n```\n\n## Advanced: Tool Restrictions\n\nFor read-only Skills (safest):\n```yaml\nallowed-tools: Read, Grep, Glob\n```\n\nFor Skills that propose changes but don't execute:\n```yaml\nallowed-tools: Read, Grep, Glob\n```\n(Propose commands for user to run)\n\nFor Skills that need to write:\n```yaml\nallowed-tools: Read, Write, Edit, Grep, Glob\n```\n\n## Best Practices\n\n1. **Concise SKILL.md**: Keep main file < 500 lines\n2. **Progressive disclosure**: Link to detailed support files\n3. **Specific triggers**: Clear description of when to activate\n4. **Tool restrictions**: Only add `allowed-tools` when restricting is necessary (e.g., read-only Skills)\n5. **Organized support**: Use all subdirectories for comprehensive guidance\n\n## Common Mistakes to Avoid\n\n❌ **Name doesn't match directory**\n```\nDirectory: skills/code-review/\nFrontmatter: name: codeReview    # Wrong case!\n```\n\n✅ **Name matches directory**\n```\nDirectory: skills/code-review/\nFrontmatter: name: code-review\n```\n\n❌ **Vague description**\n```yaml\ndescription: A helpful Skill\n```\n\n✅ **Specific triggers**\n```yaml\ndescription: Use when reviewing code, analyzing PRs, or discussing code quality\n```\n\n## Validation Checklist\n\nAfter creating a Skill:\n```\n□ SKILL.md created in skills/<name>/ directory\n□ Frontmatter name matches directory name (kebab-case, max 64 chars)\n□ Description includes specific trigger conditions (max 1024 chars)\n□ Description includes both what the Skill does AND when to use it\n□ SKILL.md is uppercase\n□ Supporting directories created\n□ If using allowed-tools, it restricts tools appropriately\n```\n",
        "plugins/plugin-development/commands/init.md": "---\ndescription: Scaffold a new Claude Code plugin with standard structure and starter files\nargument-hint: [plugin-name]\n---\n\n# Initialize Plugin\n\nCreate the standard directory structure and files for a new Claude Code plugin.\n\n## Arguments\n\n- `$1` (required): Plugin name in kebab-case (e.g., `my-awesome-plugin`)\n\n## What This Command Does\n\n1. Creates the plugin directory structure:\n   - `.claude-plugin/` with `plugin.json`\n   - `commands/` directory\n   - `agents/` directory\n   - `skills/` directory\n   - `hooks/` directory with `hooks.json`\n   - `scripts/` directory\n2. Generates a starter `plugin.json` with the provided name\n3. Creates a README.md template\n4. Provides next steps\n\n## Instructions\n\n### Validation\n\nFirst, validate the plugin name:\n- Must be provided (not empty)\n- Should be kebab-case (lowercase with hyphens)\n- Should not contain spaces or special characters\n\nIf validation fails, explain the requirements and ask for a valid name.\n\n### Create Directory Structure\n\nCreate these directories:\n```\n$1/\n├── .claude-plugin/\n├── commands/\n├── agents/\n├── skills/\n├── hooks/\n└── scripts/\n```\n\n### Create plugin.json\n\nCreate `.claude-plugin/plugin.json` with this template:\n\n```json\n{\n  \"name\": \"$1\",\n  \"version\": \"0.1.0\",\n  \"description\": \"Brief description of what this plugin does\",\n  \"author\": {\n    \"name\": \"Your Name\",\n    \"email\": \"you@example.com\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\"keyword1\", \"keyword2\"]\n}\n```\n\n### Create hooks.json\n\nCreate `hooks/hooks.json` with a basic structure:\n\n```json\n{\n  \"description\": \"Plugin hooks\",\n  \"hooks\": {}\n}\n```\n\n### Create README.md\n\nCreate `README.md` with this template:\n\n```markdown\n# $1\n\n[Brief description of what this plugin does]\n\n## Installation\n\n```bash\n/plugin install $1@marketplace-name\n```\n\n## Commands\n\n[List commands here]\n\n## Usage\n\n[Provide examples]\n```\n\n### Create Validation Script\n\nCreate `scripts/validate-plugin.sh` with executable permissions:\n\n```bash\n#!/usr/bin/env bash\nset -euo pipefail\n\n# Basic plugin structure validation\n[ -f \".claude-plugin/plugin.json\" ] || { echo \"Missing plugin.json\" >&2; exit 2; }\nexit 0\n```\n\nMake it executable: `chmod +x scripts/validate-plugin.sh`\n\n## Next Steps\n\nAfter scaffolding, provide these instructions to the user:\n\n```\n✓ Plugin scaffolded at $1/\n\nNext steps:\n1. Edit $1/.claude-plugin/plugin.json with your metadata\n2. Add components:\n   - /plugin-development:add-command <name> <description>\n   - /plugin-development:add-skill <name> <description>\n   - /plugin-development:add-agent <name> <description>\n3. Validate: /plugin-development:validate\n4. Test locally: /plugin-development:test-local\n```\n\n## Example\n\n**Input**: `/plugin-development:init my-awesome-plugin`\n\n**Result**:\n- Creates `my-awesome-plugin/` with full structure\n- Generates starter files\n- Displays next steps\n\n## Notes\n\n- The command creates the plugin directory in the current working directory\n- All paths in generated files are relative (use `./`)\n- The plugin is not yet installed; use `/plugin-development:test-local` to test it\n",
        "plugins/plugin-development/commands/test-local.md": "---\ndescription: Create a local dev marketplace and install the plugin for testing\n---\n\n# Test Plugin Locally\n\nSet up a development marketplace for local testing and install the current plugin.\n\n## Prerequisites\n\n- Must be run from a plugin root directory (containing `.claude-plugin/plugin.json`)\n- Plugin should pass validation (run `/plugin-development:validate` first)\n\n## Instructions\n\n### What This Command Does\n\n1. Creates a sibling `dev-marketplace/` directory (if it doesn't exist)\n2. Generates `dev-marketplace/.claude-plugin/marketplace.json` pointing to your plugin\n3. Provides instructions for:\n   - Adding the marketplace to Claude Code\n   - Installing the plugin\n   - Testing workflow (edit → reinstall → test loop)\n\n### Step 1: Read Plugin Metadata\n\nRead `.claude-plugin/plugin.json` to get:\n- Plugin name\n- Plugin description\n- Plugin version\n\n### Step 2: Determine Plugin Path\n\nGet the current plugin directory path. Common patterns:\n- Current working directory\n- From the location of plugin.json\n\nThe marketplace source path should be relative from marketplace to plugin:\n- If plugin is at `/path/to/my-plugin/`\n- Dev marketplace at `/path/to/dev-marketplace/`\n- Source path: `../my-plugin`\n\n### Step 3: Create Dev Marketplace Structure\n\n1. Create directory: `../dev-marketplace/.claude-plugin/`\n2. Create `marketplace.json` at `../dev-marketplace/.claude-plugin/marketplace.json`\n\n### Step 4: Generate marketplace.json\n\nCreate with this structure:\n\n```json\n{\n  \"name\": \"dev-marketplace\",\n  \"owner\": {\n    \"name\": \"Developer\"\n  },\n  \"metadata\": {\n    \"description\": \"Local development marketplace for testing plugins\",\n    \"version\": \"0.1.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"<plugin-name-from-plugin.json>\",\n      \"description\": \"<description-from-plugin.json>\",\n      \"version\": \"<version-from-plugin.json>\",\n      \"source\": \"../<plugin-directory-name>\"\n    }\n  ]\n}\n```\n\n**Important**: The `source` path is relative from marketplace to plugin directory.\n\n### Step 5: Provide Testing Instructions\n\nDisplay clear instructions for the user:\n\n```\n✅ Dev marketplace created at ../dev-marketplace/\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n🚀 Testing Workflow\n\n1️⃣  ADD MARKETPLACE (First time only)\n   /plugin marketplace add ../dev-marketplace\n\n   Verify:\n   /plugin marketplace list\n\n2️⃣  INSTALL PLUGIN\n   /plugin install <plugin-name>@dev-marketplace\n\n   Verify:\n   /help\n   (Your commands should appear)\n\n3️⃣  TEST COMMANDS\n   /<plugin-name>:<command-name> [args]\n\n   Examples:\n   /<plugin-name>:command1\n   /<plugin-name>:command2 arg\n\n4️⃣  ITERATION LOOP (After making changes)\n\n   a. Edit your plugin files\n   b. Validate: /plugin-development:validate\n   c. Uninstall: /plugin uninstall <plugin-name>@dev-marketplace\n   d. Reinstall: /plugin install <plugin-name>@dev-marketplace\n   e. Test again: /<plugin-name>:command-name\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n💡 Tips\n\n- Must uninstall/reinstall to pick up changes\n- Use /plugin-development:validate before each test\n- Check /agents to see if your agents appear\n- Use claude --debug to see plugin loading details\n- Run hooks/scripts directly to test them: ./scripts/validate.sh\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n📦 Marketplace Location\nPath: ../dev-marketplace/\nConfig: ../dev-marketplace/.claude-plugin/marketplace.json\n\nPlugin reference:\n- Name: <plugin-name>\n- Source: ../<plugin-directory>\n```\n\n## Example\n\n**Input**: `/plugin-development:test-local`\n\n(Run from `/path/to/my-plugin/`)\n\n**Output**:\n```\n✅ Dev marketplace created at ../dev-marketplace/\n\nRegistered plugin: my-plugin\nSource path: ../my-plugin\n\nNext: /plugin marketplace add ../dev-marketplace\nThen: /plugin install my-plugin@dev-marketplace\n```\n\n## Handling Existing Marketplace\n\nIf `../dev-marketplace/.claude-plugin/marketplace.json` already exists:\n\n### Option 1: Update Existing (Recommended)\n\n1. Read existing marketplace.json\n2. Check if current plugin already registered\n3. If yes: Update the entry\n4. If no: Append to plugins array\n5. Write back to file\n\n### Option 2: Ask User\n\n```\n⚠️  Dev marketplace already exists at ../dev-marketplace/\n\nCurrent plugins registered:\n- plugin-a\n- plugin-b\n\nWould you like to:\n1. Add <current-plugin> to existing marketplace\n2. Replace existing marketplace.json\n3. Cancel\n\n(Auto-select option 1 for smooth workflow)\n```\n\n## Marketplace Structure Reference\n\n```\ndev-marketplace/\n└── .claude-plugin/\n    └── marketplace.json\n```\n\n**marketplace.json**:\n```json\n{\n  \"name\": \"dev-marketplace\",\n  \"owner\": {\n    \"name\": \"Developer\"\n  },\n  \"metadata\": {\n    \"description\": \"Local development marketplace\",\n    \"version\": \"0.1.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"plugin-name\",\n      \"description\": \"Plugin description\",\n      \"version\": \"1.0.0\",\n      \"source\": \"../plugin-name\"\n    }\n  ]\n}\n```\n\n## Testing Multiple Plugins\n\nIf user has multiple plugins, the dev marketplace can reference them all:\n\n```json\n{\n  \"plugins\": [\n    {\n      \"name\": \"plugin-one\",\n      \"source\": \"../plugin-one\"\n    },\n    {\n      \"name\": \"plugin-two\",\n      \"source\": \"../plugin-two\"\n    }\n  ]\n}\n```\n\nInstall separately:\n```\n/plugin install plugin-one@dev-marketplace\n/plugin install plugin-two@dev-marketplace\n```\n\n## Troubleshooting Tips\n\nInclude these in the output:\n\n```\n🔧 Troubleshooting\n\nPlugin not loading?\n□ Check /plugin list to verify installation\n□ Verify plugin.json paths are relative (./commands/)\n□ Run /plugin-development:validate\n\nCommands not showing?\n□ Check /help for command list\n□ Verify commands/ directory has .md files\n□ Ensure frontmatter has description field\n□ Reinstall the plugin\n\nSkills not triggering?\n□ Check SKILL.md frontmatter name matches directory\n□ Verify description has clear trigger conditions\n□ Skills auto-activate based on context\n\nHooks not running?\n□ Make scripts executable: chmod +x scripts/*.sh\n□ Use ${CLAUDE_PLUGIN_ROOT} in hook commands\n□ Test script directly: ./scripts/script-name.sh\n□ Check claude --debug for hook execution logs\n```\n\n## Advanced: Custom Marketplace Location\n\nIf user wants marketplace elsewhere:\n\n```\nYou can specify a custom location:\n1. Create marketplace structure anywhere\n2. Update source paths accordingly\n3. Add marketplace: /plugin marketplace add /path/to/marketplace\n\nExample for repo root:\n- Plugin: /repo/plugins/my-plugin/\n- Marketplace: /repo/dev-marketplace/\n- Source path: ../plugins/my-plugin\n```\n\n## Validation Before Testing\n\nRemind user to validate:\n\n```\n⚡ Quick Check\n\nBefore testing, validate your plugin:\n/plugin-development:validate\n\nThis catches common issues:\n- Invalid JSON\n- Path errors\n- Naming mismatches\n- Missing files\n```\n\n## Complete Workflow Example\n\nShow a complete example session:\n\n```\n📝 Complete Testing Session\n\n# Initial setup (once)\n$ cd my-plugin/\n$ /plugin-development:validate\n✅ Validation passed\n\n$ /plugin-development:test-local\n✅ Dev marketplace created\n\n$ /plugin marketplace add ../dev-marketplace\n✅ Marketplace added\n\n$ /plugin install my-plugin@dev-marketplace\n✅ Plugin installed\n\n$ /help\nCommands:\n  /my-plugin:command1 - Does something\n  /my-plugin:command2 - Does another thing\n\n$ /my-plugin:command1\n[Command executes successfully]\n\n# After making changes\n$ [edit files]\n\n$ /plugin-development:validate\n✅ Validation passed\n\n$ /plugin uninstall my-plugin@dev-marketplace\n✅ Plugin uninstalled\n\n$ /plugin install my-plugin@dev-marketplace\n✅ Plugin installed\n\n$ /my-plugin:command1\n[Tests updated functionality]\n```\n\n## Notes\n\n- The dev marketplace is for **local testing only**\n- Do not commit `dev-marketplace/` to your plugin repository\n- For team distribution, create a proper marketplace repository\n- The source path must be relative from marketplace to plugin\n- Must uninstall/reinstall to pick up plugin changes\n\n## After Testing\n\nWhen ready for team distribution:\n\n```\n✅ Plugin tested successfully!\n\nReady for team distribution:\n1. Create a proper marketplace repository\n2. Add your plugin to the marketplace\n3. Commit and push to GitHub\n4. Team installs via: /plugin marketplace add your-org/marketplace-repo\n5. Or configure in .claude/settings.json for auto-install\n```\n\n## Best Practices\n\n1. **Validate first**: Always run `/plugin-development:validate` before testing\n2. **Clean reinstalls**: Uninstall fully before reinstalling\n3. **Test all components**: Commands, skills, agents, hooks\n4. **Incremental changes**: Test small changes frequently\n5. **Debug mode**: Use `claude --debug` when troubleshooting\n6. **Direct testing**: Test hook scripts directly before installing\n\n## Related Commands\n\n- `/plugin-development:validate` - Validate before testing\n- `/plugin-development:init` - Scaffold new plugin\n- `/plugin marketplace list` - See available marketplaces\n- `/plugin list` - See installed plugins\n- `/help` - See available commands\n",
        "plugins/plugin-development/commands/validate.md": "---\ndescription: Validate plugin structure, manifest, and component files for common issues\n---\n\n# Validate Plugin\n\nComprehensive validation of plugin structure, configuration, and components.\n\n## Prerequisites\n\n- Must be run from a plugin root directory (containing `.claude-plugin/plugin.json`)\n\n## Instructions\n\n### What This Command Does\n\nPerforms a thorough validation of the plugin:\n\n1. **Structure validation**: Check directories and files exist\n2. **Manifest validation**: Verify plugin.json is valid and complete\n3. **Component validation**: Check commands, agents, skills, hooks\n4. **Path validation**: Ensure all paths are relative and resolve correctly\n5. **Naming validation**: Verify kebab-case conventions\n6. **Common issues**: Flag typical mistakes\n\n### Validation Steps\n\n#### 1. Check Core Structure\n\nVerify these exist:\n```\n□ .claude-plugin/plugin.json\n□ At least one component directory (commands/, agents/, skills/, or hooks/)\n```\n\n#### 2. Validate plugin.json\n\nRead and check:\n- **Valid JSON**: Can parse without errors\n- **Required fields present**: `name`, `version`, `description`\n- **Name format**: kebab-case (lowercase with hyphens)\n- **Version format**: Valid SemVer (e.g., \"1.0.0\")\n- **Paths are relative**: Start with `./` not `/`\n- **Author format**: If present, valid object or string\n\nExample valid structure:\n```json\n{\n  \"name\": \"plugin-name\",\n  \"version\": \"1.0.0\",\n  \"description\": \"What the plugin does\",\n  \"author\": {\n    \"name\": \"Your Name\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\"keyword1\"],\n  \"commands\": \"./commands/\",\n  \"agents\": \"./agents/\",\n  \"hooks\": \"./hooks/hooks.json\"\n}\n```\n\n#### 3. Validate Component Paths\n\nFor each path in plugin.json:\n- **commands**: Check directory exists, contains .md files\n- **agents**: Check directory exists, contains .md files\n- **skills**: Check directory exists, contains skill folders with SKILL.md\n- **hooks**: Check file exists and is valid JSON\n\n#### 4. Validate Commands\n\nFor each file in `commands/`:\n- **File extension**: Must be .md\n- **Frontmatter present**: Has `---` delimiters\n- **Description field**: Frontmatter includes `description`\n- **Naming**: kebab-case filename\n- **Content**: Not empty after frontmatter\n\n#### 5. Validate Skills\n\nFor each directory in `skills/`:\n- **SKILL.md exists**: In uppercase\n- **Frontmatter present**: Has `---` delimiters\n- **Required fields**: `name` and `description` present\n- **Name matches directory**: Exact match, kebab-case\n- **Description is specific**: Includes when/why to use\n\n#### 6. Validate Agents\n\nFor each file in `agents/`:\n- **File extension**: Must be .md\n- **Frontmatter present**: Has `---` delimiters\n- **Description field**: Present in frontmatter\n- **Naming**: kebab-case filename\n- **Content**: Not empty after frontmatter\n\n#### 7. Validate Hooks\n\nIf `hooks.json` exists:\n- **Valid JSON**: Can parse without errors\n- **Proper structure**: Has `hooks` object\n- **Event names**: Valid events (PreToolUse, PostToolUse, etc.)\n- **Hook commands**: Scripts use `${CLAUDE_PLUGIN_ROOT}`\n- **Scripts exist**: Referenced scripts are present\n- **Scripts executable**: Have execute permissions\n\n### Validation Output Format\n\nReport findings in this structure:\n\n```\n🔍 Validating plugin: <plugin-name>\n\n✅ Structure\n  ✓ .claude-plugin/plugin.json exists\n  ✓ Component directories present\n\n✅ Manifest (plugin.json)\n  ✓ Valid JSON\n  ✓ Required fields: name, version, description\n  ✓ Name format: kebab-case\n  ✓ Version format: SemVer\n  ✓ Paths are relative\n\n✅ Commands (3 files)\n  ✓ commands/init.md\n  ✓ commands/validate.md\n  ✓ commands/test-local.md\n\n✅ Skills (1 skill)\n  ✓ skills/plugin-authoring/SKILL.md\n    - name matches directory: ✓\n    - description present: ✓\n\n✅ Agents (1 agent)\n  ✓ agents/plugin-reviewer.md\n\n✅ Hooks\n  ✓ hooks/hooks.json is valid\n  ✓ Scripts exist and are executable\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n✅ Validation passed: 0 errors, 0 warnings\n```\n\n### Error Reporting\n\nIf issues are found, report clearly:\n\n```\n❌ Errors Found\n\n1. Manifest: plugin.json missing required field \"version\"\n   Fix: Add \"version\": \"1.0.0\" to .claude-plugin/plugin.json\n\n2. Command: commands/myCommand.md uses camelCase\n   Fix: Rename to commands/my-command.md (kebab-case)\n\n3. Skill: skills/MySkill/SKILL.md name doesn't match directory\n   Fix: Change frontmatter 'name' to \"my-skill\" (matches directory)\n\n⚠️  Warnings\n\n1. No README.md found\n   Suggestion: Create README.md with usage documentation\n\n2. No keywords in plugin.json\n   Suggestion: Add keywords array for discoverability\n\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\n❌ Validation failed: 3 errors, 2 warnings\n```\n\n## Validation Categories\n\n### Critical (Must Fix)\n\n- Missing plugin.json\n- Invalid JSON in config files\n- Missing required fields (name, version, description)\n- Absolute paths in configuration\n- Component name mismatches (skill name ≠ directory)\n- Non-executable hook scripts\n\n### Warnings (Should Fix)\n\n- Missing README.md\n- No keywords in plugin.json\n- Empty component directories\n- Commands missing argument-hint\n- Skills without progressive disclosure structure\n\n### Suggestions (Nice to Have)\n\n- Add CHANGELOG.md\n- Include examples directory\n- Add more descriptive descriptions\n- Use consistent naming patterns\n\n## Common Issues Detected\n\n### Issue: Paths Not Relative\n\n```json\n❌ \"commands\": \"/Users/you/plugin/commands/\"\n✅ \"commands\": \"./commands/\"\n```\n\n### Issue: Name Mismatch\n\n```\nDirectory: skills/code-review/\nFrontmatter: name: codeReview\n❌ Names don't match\n\nFix: Change frontmatter to name: code-review\n```\n\n### Issue: Missing Frontmatter\n\n```markdown\n# My Command\n\nInstructions...\n```\n❌ No frontmatter with description\n\n```markdown\n---\ndescription: What this command does\n---\n\n# My Command\n\nInstructions...\n```\n✅ Has required frontmatter\n\n### Issue: Hook Script Not Executable\n\n```bash\n$ ls -l scripts/validate.sh\n-rw-r--r--  validate.sh\n❌ Not executable\n\n$ chmod +x scripts/validate.sh\n✅ Now executable\n```\n\n## Validation Checklist\n\nComplete checklist used for validation:\n\n```\nStructure:\n□ .claude-plugin/plugin.json exists\n□ At least one component directory present\n□ README.md exists\n\nManifest:\n□ Valid JSON syntax\n□ name field: present, kebab-case\n□ version field: present, valid SemVer\n□ description field: present, non-empty\n□ Paths are relative (start with ./)\n□ Referenced paths exist\n\nCommands:\n□ .md extension\n□ Frontmatter with description\n□ kebab-case naming\n□ Non-empty content\n\nSkills:\n□ Directory structure (skill-name/SKILL.md)\n□ SKILL.md in uppercase\n□ Frontmatter with name and description\n□ Name matches directory (exact, kebab-case)\n\nAgents:\n□ .md extension\n□ Frontmatter with description\n□ kebab-case naming\n□ Non-empty content\n\nHooks:\n□ hooks.json valid JSON\n□ Proper structure (hooks object)\n□ Valid event names\n□ Scripts use ${CLAUDE_PLUGIN_ROOT}\n□ Scripts exist\n□ Scripts are executable (chmod +x)\n```\n\n## After Validation\n\n### If Validation Passes\n\n```\n✅ Plugin is valid and ready for testing!\n\nNext steps:\n1. Test locally: /plugin-development:test-local\n2. Create dev marketplace and install\n3. Test all commands and features\n4. Register in team marketplace when ready\n```\n\n### If Validation Fails\n\n```\n❌ Please fix the errors above before testing.\n\nNeed help?\n- Review error messages for specific fixes\n- Check best practices: /plugin-development:help\n- Common issues documented in examples\n```\n\n## Example Usage\n\n**Input**: `/plugin-development:validate`\n\n**Output**:\n```\n🔍 Validating plugin: my-awesome-plugin\n\n✅ All checks passed\n✓ Structure correct\n✓ Manifest valid\n✓ 5 commands validated\n✓ 2 skills validated\n✓ 1 agent validated\n✓ Hooks configured correctly\n\n✅ Plugin ready for testing!\n```\n\n## Best Practices\n\n1. **Validate often**: Run before testing or commits\n2. **Fix errors first**: Address critical issues before warnings\n3. **Read messages carefully**: Each error includes fix instructions\n4. **Use debug mode**: Run `claude --debug` for deep inspection\n5. **Incremental fixes**: Fix and re-validate one issue at a time\n\n## Notes\n\n- This command only reads files (no modifications)\n- Validation is comprehensive but not exhaustive\n- Some issues may only appear during runtime testing\n- Always test in a dev marketplace after validation passes\n",
        "plugins/plugin-development/hooks/hooks.json": "{\n  \"description\": \"Auto-validate basic plugin structure and format code after edits\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Write|Edit\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/validate-plugin.sh\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ],\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Write|Edit\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/format-or-lint.sh\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ],\n    \"SessionStart\": [\n      {\n        \"matcher\": \"startup\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"echo '✓ plugin-development loaded: Use /plugin-development:init to scaffold a new plugin'\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/plugin-development/skills/plugin-authoring/SKILL.md": "---\nname: plugin-authoring\ndescription: Expert guidance for Claude Code plugin development. Use when creating or modifying plugins, working with plugin.json or marketplace.json, or adding commands, agents, Skills, or hooks.\nallowed-tools: Read, Grep, Glob\n---\n\n# Plugin Authoring (Skill)\n\nYou are the canonical guide for Claude Code plugin development. Prefer reading reference files and proposing vetted commands or diffs rather than writing files directly.\n\n## Triggers & Scope\n\nActivate whenever context includes `.claude-plugin/`, `plugin.json`, `marketplace.json`, `commands/`, `agents/`, `skills/`, or `hooks/`.\n\n## Flow of Operation\n\n1. **Diagnose** current repo layout (read-only)\n2. **Propose** the minimal safe action (scaffold, validate, or review)\n3. **Execute** via `/plugin-development:...` commands when the user agrees\n4. **Escalate** to the **plugin-reviewer** agent for deep audits\n5. **Guardrails**: default to read-only; ask before edits\n\n## Quick Links (Progressive Disclosure)\n\n- **Schemas**: [schemas/plugin-manifest.md](schemas/plugin-manifest.md), [schemas/hooks-schema.md](schemas/hooks-schema.md), [schemas/marketplace-schema.md](schemas/marketplace-schema.md)\n- **Templates**: [templates/](templates/)\n- **Examples**: [examples/](examples/)\n- **Best practices**: [best-practices/](best-practices/)\n\n## Checklists\n\n### Component Checklist\n\n```\n□ .claude-plugin/plugin.json exists (required)\n□ Component dirs at plugin root (commands/, agents/, skills/, hooks/)\n□ Do NOT put components inside .claude-plugin/ directory\n□ Commands use kebab-case naming\n□ Skills have valid frontmatter (name + description required)\n□ Skills name matches directory (lowercase-hyphenated, max 64 chars)\n□ Hooks use ${CLAUDE_PLUGIN_ROOT} for paths (not relative paths)\n□ All scripts are executable (chmod +x)\n```\n\n### Release Checklist\n\n```\n□ plugin.json: name/version/keywords present\n□ Do NOT include standard paths in component fields\n□ Local marketplace installs cleanly\n□ Validate with /plugin-development:validate\n□ Test all commands, skills, and hooks\n□ README.md exists with usage examples\n```\n\n## Playbooks\n\n- **Scaffold** → `/plugin-development:init <name>` then fill templates\n- **Add a component** → `/plugin-development:add-command|add-skill|add-agent|add-hook`\n- **Validate** → `/plugin-development:validate` (schema & structure checks)\n- **Test locally** → `/plugin-development:test-local` (dev marketplace)\n\n## Common Workflows\n\n### Creating a New Plugin\n\n1. Run `/plugin-development:init <plugin-name>` to scaffold structure\n2. Edit `.claude-plugin/plugin.json` with your metadata\n3. Add components using `/plugin-development:add-command`, etc.\n4. Validate with `/plugin-development:validate`\n5. Test locally with `/plugin-development:test-local`\n\n### Adding a Slash Command\n\n1. Run `/plugin-development:add-command <name> <description>`\n2. Edit `commands/<name>.md` with instructions\n3. Add frontmatter: `description` and `argument-hint`\n4. Test: `/plugin install` your plugin, then `/<name>`\n\n### Adding a Skill\n\n1. Run `/plugin-development:add-skill <name> <when-to-use>`\n2. Edit `skills/<name>/SKILL.md` with your instructions\n3. **Frontmatter requirements**:\n   - `name`: lowercase, hyphenated, max 64 chars (required)\n   - `description`: include both WHAT the Skill does AND WHEN to use it, max 1024 chars (required)\n   - `allowed-tools`: comma-separated list of tools (optional, restricts tool access)\n4. Keep SKILL.md concise; place details in sibling files (reference.md, examples.md, scripts/)\n\n### Troubleshooting\n\n- **Plugin not loading?** Check `plugin.json` paths are relative to plugin root. Do NOT include `commands`, `agents`, `skills`, or `hooks` fields for standard directories.\n- **Commands not showing?** Verify `commands/` directory exists at plugin root with `.md` files. Do NOT add `commands` field to `plugin.json` for standard paths.\n- **Hooks not running?** Ensure scripts are executable (`chmod +x`) and use `${CLAUDE_PLUGIN_ROOT}` for paths\n- **Skill not triggering?** Check `name` matches directory and is lowercase-hyphenated (max 64 chars). Ensure `description` includes both what and when to use (max 1024 chars)\n\n## Notes\n\n- Prefer templates & scripts over freeform generation for deterministic tasks\n- If writes are needed, propose a command or a PR-style diff first\n- For complex audits, delegate to `/agents plugin-reviewer`\n- Always validate with `/plugin-development:validate` before testing\n",
        "plugins/plugin-development/skills/plugin-authoring/best-practices/naming-conventions.md": "# Naming Conventions\n\nConsistent naming patterns for Claude Code plugins and components.\n\n## General Principles\n\n1. **Predictable**: Names should indicate purpose\n2. **Consistent**: Follow patterns throughout plugin\n3. **Case-sensitive**: Respect case conventions for each component type\n4. **Descriptive**: Prefer clarity over brevity\n5. **Avoid conflicts**: Namespace to prevent collisions\n\n## Plugin Names\n\n### Format\n\n**kebab-case** (lowercase with hyphens)\n\n### Examples\n\n✅ **Good**:\n- `plugin-development`\n- `code-review-tools`\n- `git-workflow`\n- `python-helpers`\n\n❌ **Bad**:\n- `PluginDevelopment` (camelCase)\n- `plugin_development` (snake_case)\n- `plugindevelopment` (no separators)\n- `PLUGIN-DEVELOPMENT` (uppercase)\n\n### Naming Tips\n\n- **Descriptive**: Name reflects functionality\n- **Concise**: 1-3 words typical\n- **No prefix**: Don't use \"plugin-\" prefix (redundant)\n  - ✅ `code-review`\n  - ❌ `plugin-code-review`\n\n## Command Names\n\n### Format\n\n**kebab-case** (lowercase with hyphens)\n\nFiles: `command-name.md`\n\n### Examples\n\n✅ **Good**:\n- `init.md` → `/plugin-name:init`\n- `add-command.md` → `/plugin-name:add-command`\n- `validate-all.md` → `/plugin-name:validate-all`\n- `run-tests.md` → `/plugin-name:run-tests`\n\n❌ **Bad**:\n- `Init.md` (capitalized)\n- `add_command.md` (snake_case)\n- `addCommand.md` (camelCase)\n\n### Command Invocation\n\nCommands can be invoked with or without the plugin prefix:\n\n**Full format**: `/plugin-name:command-name`\n\n**Examples**:\n- `/plugin-development:init`\n- `/git-workflow:commit-push`\n- `/test-runner:run-all`\n\n### Namespacing\n\n**Plugin prefix is optional** unless there are name conflicts. When no conflict exists, you can use the command directly:\n\n- Direct: `/format-code` (when no conflict)\n- Prefixed: `/my-tools:format-code` (when needed for disambiguation)\n\nCommands are automatically namespaced by plugin name:\n- Plugin: `my-tools`\n- Command file: `format.md`\n- Invocation options:\n  - `/format` (if no other plugin has this command)\n  - `/my-tools:format` (when needed to disambiguate)\n\nThis prevents conflicts between plugins.\n\n### Verb-Based Naming\n\nStart commands with action verbs:\n\n✅ **Good**:\n- `create-component`\n- `validate-config`\n- `run-tests`\n- `deploy-app`\n\n❌ **Bad**:\n- `component-creation` (noun-based)\n- `config-validation` (noun-based)\n\n## Skill Names\n\n### Format\n\n**kebab-case** (lowercase with hyphens)\n\nDirectory: `skill-name/`\nFile: `SKILL.md` (always uppercase)\n\n### Examples\n\n✅ **Good**:\n- `plugin-authoring/SKILL.md`\n- `code-review/SKILL.md`\n- `api-design/SKILL.md`\n\n❌ **Bad**:\n- `PluginAuthoring/SKILL.md` (camelCase)\n- `plugin_authoring/SKILL.md` (snake_case)\n- `plugin-authoring/skill.md` (lowercase skill.md)\n\n### Frontmatter Name\n\nShould match directory name (recommended for consistency):\n\n```markdown\n---\nname: plugin-authoring    # Matches directory\ndescription: ...\n---\n```\n\n❌ **Poor practice**:\n```\nDirectory: plugin-authoring/\nFrontmatter: name: PluginAuthoring  # Doesn't match! Use kebab-case\n```\n\n**Note**: While the `name` field in frontmatter is what Claude uses to discover and reference Skills, having it match the directory name prevents confusion and follows best practices.\n\n### Skill Naming Tips\n\n- **Domain-focused**: Name reflects area of expertise\n- **Singular**: `code-review` not `code-reviews`\n- **Avoid \"skill\" suffix**: Name is the capability\n  - ✅ `plugin-authoring`\n  - ❌ `plugin-authoring-skill`\n\n## Agent Names\n\n### Format\n\n**kebab-case** (lowercase with hyphens)\n\nFiles: `agent-name.md`\n\n### Examples\n\n✅ **Good**:\n- `code-reviewer.md`\n- `test-analyzer.md`\n- `security-auditor.md`\n- `plugin-reviewer.md`\n\n❌ **Bad**:\n- `CodeReviewer.md` (camelCase)\n- `code_reviewer.md` (snake_case)\n\n### Agent Naming Tips\n\n- **Role-based**: Name indicates what agent does\n- **Often noun**: Describes the agent's role\n  - `reviewer`, `analyzer`, `auditor`\n- **Suffix optional**: `-er`, `-or` common but not required\n  - ✅ `code-reviewer`\n  - ✅ `security-audit`\n\n## Hook Script Names\n\n### Format\n\n**kebab-case** (lowercase with hyphens)\n\nExtension: `.sh` for bash scripts\n\n### Examples\n\n✅ **Good**:\n- `validate-plugin.sh`\n- `format-code.sh`\n- `pre-write-check.sh`\n- `session-start-info.sh`\n\n❌ **Bad**:\n- `validatePlugin.sh` (camelCase)\n- `validate_plugin.sh` (snake_case)\n- `VALIDATE-PLUGIN.sh` (uppercase)\n\n### Hook Naming Tips\n\n- **Purpose-based**: Name indicates what hook does\n- **Event optional**: Can include event in name\n  - `pre-write-validate.sh`\n  - `post-write-format.sh`\n\n## Marketplace Names\n\n### Format\n\n**kebab-case** (lowercase with hyphens)\n\n### Examples\n\n✅ **Good**:\n- `team-tools`\n- `acme-plugins`\n- `dev-marketplace`\n- `internal-tools`\n\n❌ **Bad**:\n- `TeamTools` (camelCase)\n- `team_tools` (snake_case)\n\n## Variable and Argument Names\n\n### In Commands\n\nUse uppercase with underscores for built-in variables:\n- `$ARGUMENTS`: All arguments as string\n- `$1`, `$2`, etc.: Individual arguments\n\n### In Documentation\n\nUse lowercase with hyphens in examples:\n```markdown\nargument-hint: [plugin-name] [command-type]\n```\n\n## File Extensions\n\n### Markdown\n\n- Commands: `.md`\n- Agents: `.md`\n- Skills: `SKILL.md` (specific name)\n- Documentation: `.md`\n\n### Configuration\n\n- Plugin manifest: `plugin.json`\n- Marketplace manifest: `marketplace.json`\n- Hooks config: `hooks.json`\n\n### Scripts\n\n- Bash: `.sh`\n- Python: `.py`\n- Node: `.js`\n\n## Directory Names\n\n### Standard Directories\n\nUse these exact names:\n- `commands/` (not `command/` or `cmd/`)\n- `agents/` (not `agent/` or `subagents/`)\n- `skills/` (not `skill/`)\n- `hooks/` (not `hook/`)\n- `scripts/` (not `script/` or `bin/`)\n\n### Custom Directories\n\nFor additional organization, use kebab-case:\n- `templates/`\n- `schemas/`\n- `examples/`\n- `best-practices/`\n- `test-fixtures/`\n\n## Metadata Fields\n\n### In plugin.json\n\n```json\n{\n  \"name\": \"kebab-case\",\n  \"description\": \"Sentence case with capital first letter\",\n  \"keywords\": [\"lowercase\", \"multi-word-hyphenated\"],\n  \"license\": \"UPPERCASE (e.g., MIT, Apache-2.0)\"\n}\n```\n\n### Author Names\n\nUse natural capitalization:\n```json\n{\n  \"author\": {\n    \"name\": \"John Smith\",\n    \"email\": \"john@example.com\"\n  }\n}\n```\n\n## Category and Tag Conventions\n\n### Categories\n\nUse singular, lowercase:\n- `development`\n- `productivity`\n- `utilities`\n- `devops`\n\n### Tags\n\nUse lowercase, hyphenated for multi-word:\n- `code-review`\n- `testing`\n- `deployment`\n- `git-workflow`\n\n## Consistency Checklist\n\n```\n□ Plugin name: kebab-case\n□ Commands: kebab-case, .md extension\n□ Skills: kebab-case directory, SKILL.md file\n□ Agents: kebab-case, .md extension\n□ Scripts: kebab-case, appropriate extension\n□ Directories: standard names (commands/, agents/, etc.)\n□ Frontmatter names match directory/file names\n□ Categories and tags: lowercase\n```\n\n## Examples by Component\n\n### Complete Plugin\n\n```\nmy-dev-tools/                    # kebab-case\n├── .claude-plugin/\n│   └── plugin.json              # name: \"my-dev-tools\"\n├── commands/\n│   ├── format-code.md           # kebab-case\n│   ├── run-tests.md             # kebab-case\n│   └── validate-all.md          # kebab-case\n├── agents/\n│   └── code-reviewer.md         # kebab-case\n├── skills/\n│   └── code-quality/            # kebab-case\n│       └── SKILL.md             # UPPERCASE\n├── hooks/\n│   └── hooks.json\n└── scripts/\n    ├── pre-write-check.sh       # kebab-case\n    └── post-write-format.sh     # kebab-case\n```\n\n### Invocations\n\n```bash\n/my-dev-tools:format-code\n/my-dev-tools:run-tests\n/my-dev-tools:validate-all\n```\n\n## Anti-Patterns\n\n### ❌ Mixed Case\n\n```\nMyDevTools/\n├── commands/\n│   ├── FormatCode.md      # Wrong!\n│   └── runTests.md        # Wrong!\n```\n\n### ❌ Inconsistent Separators\n\n```\nmy_dev_tools/              # snake_case\n├── commands/\n│   ├── format-code.md     # kebab-case\n│   └── runTests.md        # camelCase\n```\n\n### ❌ Wrong SKILL.md Case\n\n```\nskills/\n└── my-skill/\n    └── skill.md           # Should be SKILL.md\n```\n\n## When in Doubt\n\nFollow these defaults:\n- **Files/directories**: kebab-case\n- **SKILL.md**: Always uppercase\n- **JSON fields**: Follow schema (usually camelCase for author fields, kebab-case for names)\n- **Invocation**: `/plugin-name:command-name` (always kebab-case)\n",
        "plugins/plugin-development/skills/plugin-authoring/best-practices/organization.md": "# Plugin Organization Best Practices\n\nGuidelines for structuring well-organized, maintainable Claude Code plugins.\n\n## Directory Structure\n\n### Standard Layout\n\n```\nplugin-name/\n├── .claude-plugin/\n│   └── plugin.json           # Manifest only\n├── commands/                 # Slash commands (*.md)\n├── agents/                   # Sub-agents (*.md)\n├── skills/                   # Skills (folders with SKILL.md)\n├── hooks/                    # Hook configurations\n│   └── hooks.json            # Main hook config file\n├── scripts/                  # Hook scripts, utilities\n└── README.md                 # User-facing documentation\n```\n\n### Key Principles\n\n1. **Manifest isolation**: Only `plugin.json` goes in `.claude-plugin/`\n2. **Component separation**: Keep commands, agents, skills, and hooks in separate directories\n3. **Relative paths**: All paths in manifests are relative to plugin root\n4. **Default directories**: Standard directories (`commands/`, `agents/`, `skills/`, `hooks/`) are automatically discovered\n5. **Flat commands**: Command files go directly in `commands/`, not subdirectories (unless using custom paths)\n6. **Nested skills**: Skills are folders with `SKILL.md` + support files\n7. **Custom paths**: Use component fields in `plugin.json` only for non-standard locations\n\n## File Naming\n\n### Commands\n\n- **Format**: `command-name.md`\n- **Case**: kebab-case (lowercase with hyphens)\n- **Examples**: `init.md`, `add-command.md`, `validate.md`\n\n### Agents\n\n- **Format**: `agent-name.md`\n- **Case**: kebab-case\n- **Examples**: `code-reviewer.md`, `test-analyzer.md`\n\n### Skills\n\n- **Format**: `skill-name/SKILL.md` (directory + SKILL.md)\n- **Case**: kebab-case for directory\n- **Examples**: `plugin-authoring/SKILL.md`, `code-review/SKILL.md`\n\n### Hooks\n\n- **Standard**: `hooks.json` (one per plugin)\n- **Scripts**: `scripts/script-name.sh` (kebab-case)\n\n## Skill Organization\n\n### Progressive Disclosure Pattern\n\nKeep `SKILL.md` concise (< 500 lines) and link to detailed files:\n\n```\nskills/my-skill/\n├── SKILL.md              # Main skill definition (concise)\n├── schemas/              # Data format documentation\n│   └── config-schema.md\n├── templates/            # Reusable templates\n│   └── config-template.json\n├── examples/             # Usage examples\n│   └── basic-usage.md\n└── best-practices/       # Detailed guidance\n    └── patterns.md\n```\n\n### SKILL.md Structure\n\n```markdown\n---\nname: skill-name\ndescription: What and when (concise, < 200 chars)\nallowed-tools: Read, Grep, Glob\n---\n\n# Skill Name\n\n[2-3 sentence overview]\n\n## Quick Links\n- [Reference 1](./reference1.md)\n- [Reference 2](./reference2.md)\n\n## [Concise sections...]\n```\n\n## Command Organization\n\n### Simple Plugins\n\nFor plugins with few commands (< 5):\n\n```\ncommands/\n├── command1.md\n├── command2.md\n└── command3.md\n```\n\n### Complex Plugins\n\nFor plugins with many related commands, consider namespacing:\n\n```\ncommands/\n├── git-commit.md\n├── git-push.md\n├── git-branch.md\n├── test-unit.md\n├── test-integration.md\n└── test-e2e.md\n```\n\nCommands are invoked as `/plugin-name:git-commit`, etc.\n\n## Hook Organization\n\n### Simple Hooks\n\nHooks configuration goes in `hooks/hooks.json`:\n\n```\nhooks/\n└── hooks.json\n```\n\nAlternatively, hooks can be defined inline in `plugin.json` or specified via the `hooks` field:\n\n```json\n{\n  \"name\": \"my-plugin\",\n  \"hooks\": \"./hooks/hooks.json\"\n}\n```\n\nOr inline configuration:\n\n```json\n{\n  \"name\": \"my-plugin\",\n  \"hooks\": {\n    \"PostToolUse\": [...]\n  }\n}\n```\n\n### Complex Hooks\n\nWith multiple scripts, organize them under `hooks/scripts/`:\n\n```\nhooks/\n├── hooks.json\n└── scripts/\n    ├── pre-write-validation.sh\n    ├── post-write-format.sh\n    └── session-start-info.sh\n```\n\nReference scripts using the `${CLAUDE_PLUGIN_ROOT}` environment variable:\n\n```json\n{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Write|Edit\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks/scripts/pre-write-validation.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n## Documentation Structure\n\n### README.md (Required)\n\nUser-facing documentation:\n\n```markdown\n# Plugin Name\n\nBrief description\n\n## Installation\n\n[How to install]\n\n## Usage\n\n[Commands, examples]\n\n## Configuration\n\n[If applicable]\n```\n\n### Additional Docs\n\nFor complex plugins:\n\n```\ndocs/\n├── getting-started.md\n├── api-reference.md\n├── troubleshooting.md\n└── examples/\n    ├── basic.md\n    └── advanced.md\n```\n\n## Size Guidelines\n\n### Keep Components Focused\n\n- **Commands**: 50-200 lines (including examples)\n- **Skills**: SKILL.md < 500 lines, plus support files\n- **Agents**: 100-400 lines\n- **Hooks**: Keep scripts fast (< 1 second runtime)\n\n### When to Split\n\nConsider splitting when:\n- Single skill > 500 lines → Create multiple skills\n- Many related commands → Create separate plugins\n- Complex logic → Move to support files with progressive disclosure\n\n## Common Patterns\n\n### Multi-Component Plugin\n\nCombines multiple component types:\n\n```\nmy-dev-tools/\n├── .claude-plugin/plugin.json\n├── commands/          # Quick actions\n│   ├── format.md\n│   └── lint.md\n├── agents/            # Deep analysis\n│   └── code-reviewer.md\n├── skills/            # Ambient guidance\n│   └── code-review/SKILL.md\n└── hooks/             # Automation\n    ├── hooks.json\n    └── scripts/\n```\n\n### Command-Only Plugin\n\nSimple plugins with just commands:\n\n```\nutility-commands/\n├── .claude-plugin/plugin.json\n├── commands/\n│   ├── command1.md\n│   ├── command2.md\n│   └── command3.md\n└── README.md\n```\n\n### Skill-Focused Plugin\n\nDomain expertise plugins:\n\n```\nframework-expert/\n├── .claude-plugin/plugin.json\n├── skills/\n│   └── framework-guidance/\n│       ├── SKILL.md\n│       ├── schemas/\n│       ├── templates/\n│       └── examples/\n└── README.md\n```\n\n## Versioning\n\n### Plugin Versioning\n\nUse **SemVer** in `plugin.json`:\n- **Major** (1.0.0): Breaking changes\n- **Minor** (0.1.0): New features, backward compatible\n- **Patch** (0.0.1): Bug fixes\n\n### Change Documentation\n\nMaintain `CHANGELOG.md`:\n\n```markdown\n# Changelog\n\n## [1.1.0] - 2024-01-15\n### Added\n- New command: validate-all\n\n### Changed\n- Improved error messages\n\n## [1.0.0] - 2024-01-01\n### Added\n- Initial release\n```\n\n## Testing Organization\n\n### Test Structure\n\n```\ntests/\n├── commands/\n│   ├── test-command1.sh\n│   └── test-command2.sh\n├── hooks/\n│   ├── test-validation.sh\n│   └── test-formatting.sh\n└── integration/\n    └── test-workflow.sh\n```\n\n### Validation Scripts\n\nKeep in `scripts/` for reuse:\n\n```\nscripts/\n├── validate-plugin.sh      # Used by hooks\n├── validate-commands.sh    # Used by tests\n└── validate-manifest.sh    # Used by CI\n```\n\n## Anti-Patterns\n\n### ❌ Don't: Components in .claude-plugin/\n\n```\n.claude-plugin/\n├── plugin.json\n├── commands/        # Wrong!\n└── hooks.json       # Wrong!\n```\n\n### ✅ Do: Components at Plugin Root\n\n```\n.claude-plugin/\n└── plugin.json      # Only manifest\ncommands/            # At root\nhooks/               # At root\n```\n\n### ❌ Don't: Specify Default Paths in Manifest\n\n```json\n{\n  \"name\": \"my-plugin\",\n  \"commands\": \"./commands/\",\n  \"agents\": \"./agents/\"\n}\n```\n\n### ✅ Do: Omit Component Fields When Using Default Directories\n\n```json\n{\n  \"name\": \"my-plugin\"\n}\n```\n\nWhen using standard directories (`commands/`, `agents/`, `skills/`, `hooks/`), they are automatically discovered and you don't need to specify them in `plugin.json`. Only use component fields (`commands`, `agents`, etc.) when:\n1. Using non-standard directory names (e.g., `./custom-commands/`)\n2. Including specific individual files (e.g., `[\"./commands/special.md\"]`)\n3. Combining custom paths with default paths\n\n### ❌ Don't: Absolute Paths\n\n```json\n{\n  \"commands\": [\"/Users/you/plugins/my-plugin/commands/cmd.md\"]\n}\n```\n\n### ✅ Do: Relative Paths (for custom paths only)\n\n```json\n{\n  \"commands\": [\"./custom/cmd.md\"]\n}\n```\n\n### ❌ Don't: Monolithic Skills\n\n```markdown\n# SKILL.md (3000 lines)\n[Everything in one file...]\n```\n\n### ✅ Do: Progressive Disclosure\n\n```markdown\n# SKILL.md (400 lines)\nQuick Links:\n- [Details](./details.md)\n- [Examples](./examples/)\n```\n\n## Summary Checklist\n\n```\n□ Manifest isolated in .claude-plugin/\n□ Components at plugin root (not inside .claude-plugin/)\n□ Default directories (commands/, agents/, skills/, hooks/) are automatically discovered\n□ Component fields in plugin.json only when using custom paths\n□ Kebab-case naming throughout\n□ Relative paths in all configs (start with ./)\n□ Skills use progressive disclosure\n□ Commands are focused (< 200 lines)\n□ Scripts are executable\n□ Hooks reference scripts using ${CLAUDE_PLUGIN_ROOT}\n□ README.md documents usage\n□ Version follows SemVer\n□ CHANGELOG.md tracks changes\n```\n",
        "plugins/plugin-development/skills/plugin-authoring/examples/simple-plugin.md": "# Example: Simple Plugin\n\nThis example shows a minimal but complete Claude Code plugin.\n\n## Directory Structure\n\n```\nmy-greeting-plugin/\n├── .claude-plugin/\n│   └── plugin.json\n├── commands/\n│   └── greet.md\n└── README.md\n```\n\n## plugin.json\n\n```json\n{\n  \"name\": \"my-greeting-plugin\",\n  \"version\": \"1.0.0\",\n  \"description\": \"A simple greeting plugin\",\n  \"author\": {\n    \"name\": \"Your Name\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\"greeting\", \"example\"]\n}\n```\n\n**Note**: No `commands` field needed since we're using the standard `commands/` directory.\n\n## commands/greet.md\n\n```markdown\n---\ndescription: Greet the user with a personalized message\nargument-hint: [name]\n---\n\n# Greet Command\n\nProvide a warm, friendly greeting to the user.\n\n## Instructions\n\n1. If the user provided a name via `$ARGUMENTS`, greet them personally\n2. If no name provided, use a generic friendly greeting\n3. Add a fun emoji to make it welcoming\n\n## Examples\n\n**Input**: `/my-greeting-plugin:greet Alice`\n**Output**: \"Hello, Alice! 👋 Great to see you!\"\n\n**Input**: `/my-greeting-plugin:greet`\n**Output**: \"Hello there! 👋 How can I help you today?\"\n```\n\n## README.md\n\n```markdown\n# My Greeting Plugin\n\nA simple example plugin that demonstrates Claude Code plugin basics.\n\n## Installation\n\nFrom a marketplace:\n```bash\n/plugin install my-greeting-plugin@marketplace-name\n```\n\n## Usage\n\n```bash\n/my-greeting-plugin:greet [name]\n```\n\n## Examples\n\n- `/my-greeting-plugin:greet World` - Greet with a name\n- `/my-greeting-plugin:greet` - Generic greeting\n```\n\n## Adding to a Marketplace\n\nIn your marketplace's `.claude-plugin/marketplace.json`:\n\n```json\n{\n  \"plugins\": [\n    {\n      \"name\": \"my-greeting-plugin\",\n      \"description\": \"A simple greeting plugin\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Your Name\"\n      },\n      \"source\": \"./plugins/my-greeting-plugin\",\n      \"category\": \"examples\",\n      \"tags\": [\"greeting\", \"example\"]\n    }\n  ]\n}\n```\n\n## Testing Locally\n\n1. Create the plugin structure\n2. Create a dev marketplace:\n   ```bash\n   mkdir -p dev-marketplace/.claude-plugin\n   ```\n3. Create `dev-marketplace/.claude-plugin/marketplace.json` (see above)\n4. Add marketplace:\n   ```bash\n   /plugin marketplace add ./dev-marketplace\n   ```\n5. Install plugin:\n   ```bash\n   /plugin install my-greeting-plugin@dev-marketplace\n   ```\n6. Test command:\n   ```bash\n   /my-greeting-plugin:greet World\n   ```\n\n## Key Takeaways\n\n- **Minimal structure**: Only `.claude-plugin/plugin.json` and `commands/` are required\n- **Frontmatter**: Commands need `description` (and optionally `argument-hint`)\n- **Namespacing**: Commands are called with `/plugin-name:command-name`\n- **Arguments**: Access via `$ARGUMENTS` or `$1`, `$2`, etc.\n- **Standard paths**: No need to specify component fields in `plugin.json` when using standard directories\n",
        "plugins/plugin-development/skills/plugin-authoring/examples/testing-workflow.md": "# Testing Workflow\n\nA step-by-step guide to testing plugins locally during development.\n\n## Overview\n\nTesting plugins locally uses a **dev marketplace** that points to your working plugin directory. This allows you to:\n- Test changes without publishing\n- Iterate quickly\n- Validate before distribution\n\n## Setup: One-Time\n\n### 1. Create Dev Marketplace Structure\n\n```bash\n# From your project root\nmkdir -p dev-marketplace/.claude-plugin\n```\n\n### 2. Create marketplace.json\n\nCreate `dev-marketplace/.claude-plugin/marketplace.json`:\n\n```json\n{\n  \"name\": \"dev-marketplace\",\n  \"owner\": {\n    \"name\": \"Developer\"\n  },\n  \"metadata\": {\n    \"description\": \"Local development marketplace\",\n    \"version\": \"0.1.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"my-plugin\",\n      \"description\": \"Plugin under development\",\n      \"source\": \"../plugins/my-plugin\"\n    }\n  ]\n}\n```\n\n**Key**: `source` points to your plugin directory (relative path from marketplace).\n\n### 3. Add Marketplace to Claude Code\n\n```bash\nclaude\n/plugin marketplace add ./dev-marketplace\n```\n\nVerify:\n```bash\n/plugin marketplace list\n```\n\nYou should see `dev-marketplace` listed.\n\n## Iteration Loop\n\n### Install Plugin\n\n```bash\n/plugin install my-plugin@dev-marketplace\n```\n\n### Test Commands\n\n```bash\n/my-plugin:command-name args\n```\n\nOr test via `/help` to see if commands appear.\n\n### Make Changes\n\nEdit your plugin files (commands, skills, etc.).\n\n### Reinstall\n\n```bash\n/plugin uninstall my-plugin@dev-marketplace\n/plugin install my-plugin@dev-marketplace\n```\n\n**Note**: You must uninstall/reinstall to pick up changes.\n\n### Repeat\n\nContinue the edit → reinstall → test cycle.\n\n## Validation\n\nBefore each test cycle, validate your plugin:\n\n```bash\n/plugin-development:validate\n```\n\nThis checks:\n- `plugin.json` exists and is valid JSON\n- Component directories exist\n- Paths are correct\n- No common mistakes\n\n## Debugging\n\n### Plugin Not Loading\n\n1. Check `plugin.json` exists at `.claude-plugin/plugin.json`\n2. Verify JSON syntax: `cat .claude-plugin/plugin.json | jq .`\n3. Check paths are relative: `./commands/` not `/absolute/path/`\n\n### Commands Not Showing\n\n1. Verify `commands` field in `plugin.json` points to `./commands/`\n2. Check command files have `.md` extension\n3. Verify frontmatter has `description` field\n4. Reinstall the plugin\n\n### Hooks Not Running\n\n1. Check `hooks` field in `plugin.json` points to correct path\n2. Verify `hooks.json` is valid JSON\n3. Make scripts executable: `chmod +x scripts/*.sh`\n4. Test script directly: `./scripts/validate-plugin.sh`\n5. Use `claude --debug` to see hook execution\n\n### Skills Not Triggering\n\n1. Check `skills` field in `plugin.json` (if specified)\n2. Verify `SKILL.md` has frontmatter with `name` and `description`\n3. Ensure `name` matches directory name (lowercase, hyphenated)\n4. Check `description` includes clear trigger conditions\n\n## Advanced: Debug Mode\n\nRun Claude Code in debug mode to see detailed plugin loading:\n\n```bash\nclaude --debug\n```\n\nThis shows:\n- Plugin registration\n- Component discovery\n- Hook execution\n- Tool usage\n\nLook for errors related to your plugin in the output.\n\n## Multiple Plugins\n\nYou can test multiple plugins from one dev marketplace:\n\n```json\n{\n  \"plugins\": [\n    {\n      \"name\": \"plugin-one\",\n      \"source\": \"../plugins/plugin-one\"\n    },\n    {\n      \"name\": \"plugin-two\",\n      \"source\": \"../plugins/plugin-two\"\n    }\n  ]\n}\n```\n\nInstall each separately:\n```bash\n/plugin install plugin-one@dev-marketplace\n/plugin install plugin-two@dev-marketplace\n```\n\n## Clean Up\n\n### Uninstall Plugin\n\n```bash\n/plugin uninstall my-plugin@dev-marketplace\n```\n\n### Remove Marketplace\n\n```bash\n/plugin marketplace remove dev-marketplace\n```\n\n## Best Practices\n\n1. **Validate first**: Always run `/plugin-development:validate` before testing\n2. **Small changes**: Test incrementally, don't make many changes at once\n3. **Check logs**: Use `--debug` when troubleshooting\n4. **Script testing**: Test hook scripts directly before adding to hooks.json\n5. **Clean installs**: Uninstall fully before reinstalling to avoid cache issues\n\n## Troubleshooting Checklist\n\n```\n□ plugin.json exists and is valid JSON\n□ All paths are relative (start with ./)\n□ Component directories exist (commands/, etc.)\n□ Command files have .md extension\n□ Scripts are executable (chmod +x)\n□ marketplace.json plugin name matches plugin.json name\n□ Reinstalled after making changes\n```\n\n## Example Session\n\n```bash\n# One-time setup\nmkdir -p dev-marketplace/.claude-plugin\n# ... create marketplace.json ...\n/plugin marketplace add ./dev-marketplace\n\n# Development loop\n/plugin install my-plugin@dev-marketplace\n/my-plugin:test-command\n\n# Make changes to plugin files...\n\n/plugin-development:validate\n/plugin uninstall my-plugin@dev-marketplace\n/plugin install my-plugin@dev-marketplace\n/my-plugin:test-command\n\n# Repeat...\n```\n",
        "plugins/plugin-development/skills/plugin-authoring/schemas/hooks-schema.md": "# Hooks Schema\n\nHooks allow you to run commands at specific lifecycle events. Define them in `hooks/hooks.json`.\n\n## Location\n\n`hooks/hooks.json` (at plugin root, referenced in `plugin.json`)\n\n## Structure\n\n```json\n{\n  \"description\": \"Optional description of what these hooks do\",\n  \"hooks\": {\n    \"EventName\": [\n      {\n        \"matcher\": \"pattern\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"path/to/script.sh\",\n            \"timeout\": 30\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n## Event Types\n\n### PreToolUse\n\nRuns **before** Claude uses a tool. Can block tool execution.\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\",\n          \"timeout\": 30\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Matcher**: Regex pattern matching tool names (e.g., `Write`, `Read`, `Bash.*`)\n\n**Exit codes**:\n- `0`: Allow (stdout visible to Claude)\n- `2`: **Block** (stderr shown to Claude as feedback)\n- Other: Warning (non-blocking)\n\n### PostToolUse\n\nRuns **after** a tool completes. Cannot block.\n\n```json\n{\n  \"PostToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/format.sh\",\n          \"timeout\": 30\n        }\n      ]\n    }\n  ]\n}\n```\n\n### SessionStart\n\nRuns when Claude Code session starts.\n\n```json\n{\n  \"SessionStart\": [\n    {\n      \"matcher\": \"startup\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"echo 'Plugin loaded!'\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Matchers**:\n- `startup` - Invoked from startup\n- `resume` - Invoked from `--resume`, `--continue`, or `/resume`\n- `clear` - Invoked from `/clear`\n- `compact` - Invoked from auto or manual compact\n\n**Note**: SessionStart stdout is added to context automatically for Claude.\n\n### SessionEnd\n\nRuns when a Claude Code session ends.\n\n```json\n{\n  \"SessionEnd\": [\n    {\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/cleanup.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n### UserPromptSubmit\n\nRuns when user submits a prompt. Can block prompt processing.\n\n```json\n{\n  \"UserPromptSubmit\": [\n    {\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/context-injector.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n**Exit codes**:\n- `0`: Allow (stdout added to context)\n- `2`: **Block** (stderr shown to user)\n\n### Stop / SubagentStop\n\nRuns when Claude attempts to stop (main agent or subagent).\n\n```json\n{\n  \"Stop\": [\n    {\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/check-continuation.sh\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n## Environment Variables\n\nAvailable in hook commands:\n\n- `${CLAUDE_PLUGIN_ROOT}`: Absolute path to plugin root\n- `${CLAUDE_PROJECT_DIR}`: Project root directory (where Claude Code started)\n- Standard shell environment variables\n\n## Timeouts\n\n- Default: No timeout\n- Recommended: 10-30 seconds for validation\n- Max: Keep under 60 seconds for good UX\n\n## Common Patterns\n\n### Validation Hook (Blocking)\n\n```json\n{\n  \"PreToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\",\n          \"timeout\": 30\n        }\n      ]\n    }\n  ]\n}\n```\n\n**validate.sh**:\n```bash\n#!/usr/bin/env bash\nif [ validation_fails ]; then\n  echo \"Error: validation failed\" >&2\n  exit 2  # Block the tool\nfi\nexit 0  # Allow\n```\n\n**Advanced JSON output** (alternative to exit codes):\n```json\n{\n  \"permissionDecision\": \"deny\",\n  \"permissionDecisionReason\": \"File violates security policy\",\n  \"suppressOutput\": true\n}\n```\n\n### Formatting Hook (Non-blocking)\n\n```json\n{\n  \"PostToolUse\": [\n    {\n      \"matcher\": \"Write|Edit\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/format.sh\",\n          \"timeout\": 30\n        }\n      ]\n    }\n  ]\n}\n```\n\n### Startup Message\n\n```json\n{\n  \"SessionStart\": [\n    {\n      \"matcher\": \"startup\",\n      \"hooks\": [\n        {\n          \"type\": \"command\",\n          \"command\": \"echo '✓ My Plugin loaded'\"\n        }\n      ]\n    }\n  ]\n}\n```\n\n## Best Practices\n\n- **Use `${CLAUDE_PLUGIN_ROOT}`** for portable paths\n- **Set timeouts** to prevent hanging (10-30 seconds recommended)\n- **Exit code 2** to block (PreToolUse/UserPromptSubmit)\n- **Keep scripts fast** (< 1 second ideally)\n- **Make scripts executable** (`chmod +x`)\n- **Test hooks** before distributing\n- **Handle JSON output** for advanced control (see advanced examples)\n\n## Common Mistakes\n\n❌ **Absolute paths** (not portable)\n```json\n{\n  \"command\": \"/Users/you/plugin/scripts/validate.sh\"\n}\n```\n\n✅ **Plugin-relative paths**\n```json\n{\n  \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/validate.sh\"\n}\n```\n\n❌ **No timeout** on slow operations\n```json\n{\n  \"command\": \"npm install\"\n  // Missing timeout!\n}\n```\n\n✅ **Set appropriate timeout**\n```json\n{\n  \"command\": \"npm install\",\n  \"timeout\": 300000\n}\n```\n\n❌ **Missing required matcher**\n```json\n{\n  \"SessionStart\": [\n    {\n      \"hooks\": [...]  // No matcher!\n    }\n  ]\n}\n```\n\n✅ **Include appropriate matcher**\n```json\n{\n  \"SessionStart\": [\n    {\n      \"matcher\": \"startup\",\n      \"hooks\": [...]\n    }\n  ]\n}\n```\n\n## Debugging\n\nUse `claude --debug` to see:\n- Hook registration\n- Hook execution timing\n- Exit codes and output\n- Blocking decisions\n",
        "plugins/plugin-development/skills/plugin-authoring/schemas/marketplace-schema.md": "# Marketplace Schema\n\nThe `marketplace.json` file defines a collection of plugins that users can install.\n\n## Location\n\n`.claude-plugin/marketplace.json` (at marketplace root)\n\n## Structure\n\n```json\n{\n  \"name\": \"marketplace-name\",\n  \"owner\": {\n    \"name\": \"Your Organization\",\n    \"email\": \"team@your-org.com\"\n  },\n  \"metadata\": {\n    \"description\": \"Marketplace description\",\n    \"version\": \"1.0.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"plugin-name\",\n      \"description\": \"What the plugin does\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Author Name\"\n      },\n      \"source\": \"./plugins/plugin-name\",\n      \"category\": \"utilities\",\n      \"tags\": [\"tag1\", \"tag2\"],\n      \"keywords\": [\"keyword1\", \"keyword2\"]\n    }\n  ]\n}\n```\n\n## Required Fields\n\n### Marketplace Level\n\n- **name**: kebab-case string, unique marketplace identifier\n- **owner**: Object with `name` (required) and optional `email`\n- **plugins**: Array of plugin entries\n\n### Plugin Entry\n\n- **name**: Plugin name (must match `plugin.json`)\n- **source**: Relative path to plugin directory OR git URL\n\n## Optional Fields\n\n### Marketplace Level\n\n- **metadata**: Object with:\n  - **description**: Brief marketplace description\n  - **version**: Marketplace version\n  - **pluginRoot**: Base path for relative plugin sources (allows resolving relative plugin paths)\n\n### Plugin Entry\n\n**Standard metadata fields:**\n\n- **description**: Brief description\n- **version**: SemVer version\n- **author**: String or object with `name`, `email`, `url`\n- **category**: Category string (e.g., \"utilities\", \"productivity\")\n- **tags**: Array of tags for filtering\n- **keywords**: Array of keywords for search\n- **homepage**: Plugin homepage URL\n- **repository**: Plugin repository URL\n- **license**: License identifier (e.g., \"MIT\")\n- **strict**: Boolean (default: true) - Require plugin.json in plugin folder\n\n**Component configuration fields:**\n\n- **commands**: String or array - Custom paths to command files or directories\n- **agents**: String or array - Custom paths to agent files\n- **hooks**: String or object - Custom hooks configuration or path to hooks file\n- **mcpServers**: String or object - MCP server configurations or path to MCP config\n\n## Source Types\n\n### Local Path (Development)\n\n```json\n{\n  \"source\": \"./plugins/my-plugin\"\n}\n```\n\n### Git Repository\n\nSimple string format:\n\n```json\n{\n  \"source\": \"https://github.com/user/repo\"\n}\n```\n\nObject format for advanced configuration:\n\n```json\n{\n  \"source\": {\n    \"source\": \"github\",\n    \"repo\": \"owner/plugin-repo\"\n  }\n}\n```\n\n### Git URL Source\n\n```json\n{\n  \"source\": {\n    \"source\": \"url\",\n    \"url\": \"https://gitlab.com/team/plugin.git\"\n  }\n}\n```\n\n### Git with Subdirectory\n\n```json\n{\n  \"source\": \"https://github.com/user/repo/tree/main/plugins/my-plugin\"\n}\n```\n\n## Examples\n\n### Local Dev Marketplace\n\n```json\n{\n  \"name\": \"dev-marketplace\",\n  \"owner\": {\n    \"name\": \"Developer\",\n    \"email\": \"dev@localhost\"\n  },\n  \"metadata\": {\n    \"description\": \"Local development marketplace\",\n    \"version\": \"0.1.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"my-plugin\",\n      \"description\": \"Plugin in development\",\n      \"source\": \"../my-plugin\"\n    }\n  ]\n}\n```\n\n### Team Marketplace\n\n```json\n{\n  \"name\": \"acme-tools\",\n  \"owner\": {\n    \"name\": \"ACME Corp\",\n    \"email\": \"tools@acme.com\"\n  },\n  \"metadata\": {\n    \"description\": \"ACME internal tools for Claude Code\",\n    \"version\": \"1.0.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"code-review\",\n      \"description\": \"ACME code review standards\",\n      \"version\": \"2.1.0\",\n      \"author\": {\n        \"name\": \"DevTools Team\"\n      },\n      \"source\": \"./plugins/code-review\",\n      \"category\": \"development\",\n      \"tags\": [\"code-review\", \"standards\"],\n      \"keywords\": [\"review\", \"quality\", \"standards\"]\n    },\n    {\n      \"name\": \"deploy-tools\",\n      \"description\": \"Deployment automation\",\n      \"version\": \"1.5.0\",\n      \"author\": {\n        \"name\": \"DevOps Team\"\n      },\n      \"source\": \"./plugins/deploy-tools\",\n      \"category\": \"devops\",\n      \"tags\": [\"deployment\", \"automation\"],\n      \"keywords\": [\"deploy\", \"ci\", \"cd\"]\n    }\n  ]\n}\n```\n\n### Advanced Plugin Entry\n\nPlugin entries can override default component locations and provide inline configuration:\n\n```json\n{\n  \"name\": \"enterprise-tools\",\n  \"source\": {\n    \"source\": \"github\",\n    \"repo\": \"company/enterprise-plugin\"\n  },\n  \"description\": \"Enterprise workflow automation tools\",\n  \"version\": \"2.1.0\",\n  \"author\": {\n    \"name\": \"Enterprise Team\",\n    \"email\": \"enterprise@company.com\"\n  },\n  \"homepage\": \"https://docs.company.com/plugins/enterprise-tools\",\n  \"repository\": \"https://github.com/company/enterprise-plugin\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"enterprise\", \"workflow\", \"automation\"],\n  \"category\": \"productivity\",\n  \"commands\": [\n    \"./commands/core/\",\n    \"./commands/enterprise/\",\n    \"./commands/experimental/preview.md\"\n  ],\n  \"agents\": [\n    \"./agents/security-reviewer.md\",\n    \"./agents/compliance-checker.md\"\n  ],\n  \"hooks\": \"./config/hooks.json\",\n  \"mcpServers\": {\n    \"enterprise-db\": {\n      \"command\": \"${CLAUDE_PLUGIN_ROOT}/servers/db-server\",\n      \"args\": [\"--config\", \"${CLAUDE_PLUGIN_ROOT}/config.json\"]\n    }\n  },\n  \"strict\": false\n}\n```\n\n<Note>\n**Schema relationship**: Plugin entries are based on the *plugin manifest schema* (with all fields made optional) plus marketplace-specific fields (`source`, `strict`, `category`, `tags`). This means any field valid in a `plugin.json` file can also be used in a marketplace entry. When `strict: false`, the marketplace entry serves as the complete plugin manifest if no `plugin.json` exists. When `strict: true` (default), marketplace fields supplement the plugin's own manifest file.\n</Note>\n\n<Note>\n**Environment variables**: Use `${CLAUDE_PLUGIN_ROOT}` in hooks and mcpServers configurations. This variable resolves to the plugin's installation directory and ensures paths work correctly regardless of where the plugin is installed.\n</Note>\n\n## Usage\n\n### Add Marketplace (Local)\n\n```bash\n/plugin marketplace add /path/to/marketplace\n```\n\n### Add Marketplace (GitHub)\n\n```bash\n/plugin marketplace add your-org/your-repo\n```\n\n### Install Plugin from Marketplace\n\n```bash\n/plugin install plugin-name@marketplace-name\n```\n\n### Team Auto-Install\n\nIn project `.claude/settings.json`:\n\n```json\n{\n  \"extraKnownMarketplaces\": {\n    \"team-tools\": {\n      \"source\": {\n        \"source\": \"github\",\n        \"repo\": \"your-org/marketplace-repo\"\n      }\n    }\n  },\n  \"enabledPlugins\": {\n    \"plugin-name@team-tools\": true\n  }\n}\n```\n\n## Testing Workflow\n\n1. Create dev marketplace:\n   ```bash\n   mkdir -p dev-marketplace/.claude-plugin\n   # Create marketplace.json pointing to ../your-plugin\n   ```\n\n2. Add to Claude Code:\n   ```bash\n   /plugin marketplace add ./dev-marketplace\n   ```\n\n3. Install plugin:\n   ```bash\n   /plugin install your-plugin@dev-marketplace\n   ```\n\n4. After changes, reinstall:\n   ```bash\n   /plugin uninstall your-plugin@dev-marketplace\n   /plugin install your-plugin@dev-marketplace\n   ```\n\n## Best Practices\n\n- **Use kebab-case** for marketplace and plugin names\n- **Keep descriptions concise** (< 100 chars)\n- **Add meaningful tags** for discoverability\n- **Version consistently** using SemVer\n- **Test locally** before publishing to GitHub\n- **Document plugins** in their README files\n\n## Common Mistakes\n\n❌ **Plugin name mismatch**\n```json\n// marketplace.json\n{ \"name\": \"my-plugin\", \"source\": \"./plugins/other-plugin\" }\n\n// plugin.json (in other-plugin/)\n{ \"name\": \"other-plugin\" }  // Names don't match!\n```\n\n✅ **Names must match**\n```json\n// marketplace.json\n{ \"name\": \"my-plugin\", \"source\": \"./plugins/my-plugin\" }\n\n// plugin.json\n{ \"name\": \"my-plugin\" }  // Matches!\n```\n\n❌ **Absolute source paths**\n```json\n{\n  \"source\": \"/Users/you/plugins/my-plugin\"\n}\n```\n\n✅ **Relative source paths**\n```json\n{\n  \"source\": \"./plugins/my-plugin\"\n}\n```\n\n## Validation\n\nUse `/plugin-development:validate` to check marketplace structure.\n",
        "plugins/plugin-development/skills/plugin-authoring/schemas/plugin-manifest.md": "# Plugin Manifest Schema\n\nThe `plugin.json` file in `.claude-plugin/` defines your plugin's metadata and optionally custom component paths.\n\n## Location\n\n`.claude-plugin/plugin.json` (at plugin root)\n\n## Required Fields\n\n```json\n{\n  \"name\": \"plugin-name\"\n}\n```\n\n- **name**: kebab-case string, unique identifier (REQUIRED)\n\n## Optional Fields\n\n### Standard Metadata\n\n```json\n{\n  \"version\": \"1.0.0\",\n  \"description\": \"What your plugin does\",\n  \"author\": {\n    \"name\": \"Your Name\",\n    \"email\": \"you@example.com\",\n    \"url\": \"https://github.com/your-username\"\n  },\n  \"homepage\": \"https://your-plugin-homepage.com\",\n  \"repository\": \"https://github.com/your-org/your-repo\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"tag1\", \"tag2\"]\n}\n```\n\n- **version**: Semantic version format (optional metadata)\n- **description**: Brief explanation of plugin purpose (optional metadata)\n- **author**: Can be string or object with name, email, url\n- **homepage**: Documentation URL (optional metadata)\n- **repository**: Source code URL (optional metadata)\n- **license**: License identifier like \"MIT\" (optional metadata)\n- **keywords**: Array of tags for discovery (optional metadata)\n\n### Component Configuration (Custom Paths Only)\n\n**IMPORTANT**: Only include these fields if you're using **non-standard** paths. If using standard directory structure (`commands/`, `agents/`, `skills/`, `hooks/`), omit these fields entirely.\n\n```json\n{\n  \"commands\": [\"./custom/path/cmd1.md\", \"./custom/path/cmd2.md\"],\n  \"agents\": [\"./custom/agents/reviewer.md\", \"./custom/agents/tester.md\"],\n  \"hooks\": \"./custom/hooks/hooks.json\",\n  \"mcpServers\": {\n    \"server-name\": {\n      \"command\": \"node\",\n      \"args\": [\"path/to/server.js\"]\n    }\n  }\n}\n```\n\n### Component Path Rules\n\n- **commands**: Array of paths to individual `.md` command files, OR string path to a directory\n- **agents**: Array of paths to individual `.md` agent files (NOT a directory path)\n- **hooks**: Path to `hooks.json` configuration file OR inline hooks object\n- **mcpServers**: MCP server configurations object OR path to MCP config file\n\nAll paths must be **relative to plugin root** (where `.claude-plugin/` lives) and start with `./`\n\n**Note**: Custom paths supplement default directories - they don't replace them. If `commands/` exists, it's loaded in addition to custom command paths.\n\n### Skills Configuration\n\nFor Skills (Agent Skills) provided by your plugin, you can restrict which tools Claude can use:\n\n```json\n{\n  \"name\": \"my-skill-plugin\",\n  \"skills\": [\n    {\n      \"name\": \"safe-reader\",\n      \"allowed-tools\": [\"Read\", \"Grep\", \"Glob\"]\n    }\n  ]\n}\n```\n\nHowever, the recommended approach is to specify `allowed-tools` directly in the `SKILL.md` frontmatter:\n\n```yaml\n---\nname: safe-reader\ndescription: Read files without making changes\nallowed-tools: Read, Grep, Glob\n---\n```\n\n### Environment Variables\n\n**`${CLAUDE_PLUGIN_ROOT}`** is a special environment variable available in your plugin that contains the absolute path to your plugin directory. Use this in hooks, MCP servers, and scripts to ensure correct paths regardless of installation location.\n\n```json\n{\n  \"name\": \"my-plugin\",\n  \"hooks\": \"./hooks/hooks.json\"\n}\n```\n\nWhere `hooks/hooks.json` contains:\n\n```json\n{\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Write|Edit\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/format-code.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\nOr inline hooks:\n\n```json\n{\n  \"name\": \"my-plugin\",\n  \"hooks\": {\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Write|Edit\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/format.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\nUse `${CLAUDE_PLUGIN_ROOT}` for:\n- Scripts executed by hooks\n- MCP server paths\n- Config files referenced by components\n- Any file paths in your plugin configuration\n\n## Examples\n\n### Standard Directory Structure (Recommended)\n\n```json\n{\n  \"name\": \"my-dev-tools\"\n}\n```\n\n**Minimal plugin** - The simplest possible plugin. Claude Code automatically discovers `commands/`, `agents/`, `skills/`, and `hooks/` directories.\n\n```json\n{\n  \"name\": \"my-dev-tools\",\n  \"version\": \"1.2.0\",\n  \"description\": \"Developer productivity tools for Claude Code\",\n  \"author\": {\n    \"name\": \"Dev Team\",\n    \"email\": \"dev@company.com\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\"productivity\", \"tools\"]\n}\n```\n\n**With metadata** - Adding optional metadata for better discovery and documentation.\n\n### Custom Paths\n\n```json\n{\n  \"name\": \"enterprise-plugin\",\n  \"description\": \"Enterprise development tools\",\n  \"author\": {\n    \"name\": \"Your Name\"\n  },\n  \"commands\": [\n    \"./specialized/deploy.md\",\n    \"./utilities/batch-process.md\"\n  ],\n  \"agents\": [\n    \"./custom-agents/reviewer.md\",\n    \"./custom-agents/tester.md\"\n  ]\n}\n```\n\n**Note**: Using custom paths to organize components. The `description` and `author` fields are optional metadata.\n\n## Common Mistakes\n\n❌ **Wrong**: Including component fields with standard paths\n```json\n{\n  \"name\": \"my-plugin\",\n  \"commands\": \"./commands/\",\n  \"agents\": \"./agents/\"\n}\n```\n\n✅ **Correct**: Omit component fields for standard paths\n```json\n{\n  \"name\": \"my-plugin\"\n}\n```\n\n❌ **Wrong**: agents as directory path\n```json\n{\n  \"agents\": \"./agents/\"\n}\n```\n\n✅ **Correct**: agents as array of file paths\n```json\n{\n  \"agents\": [\"./agents/reviewer.md\", \"./agents/tester.md\"]\n}\n```\n\n❌ **Wrong**: Absolute paths\n```json\n{\n  \"commands\": \"/Users/you/plugins/my-plugin/commands/\"\n}\n```\n\n✅ **Correct**: Relative paths\n```json\n{\n  \"commands\": [\"./custom/cmd.md\"]\n}\n```\n\n## Validation\n\nUse `/plugin-development:validate` to check your manifest structure.\n",
        "plugins/plugin-development/skills/plugin-authoring/templates/agent-template.md": "---\ndescription: What this agent specializes in and when to invoke it (third person).\ncapabilities: [\"capability-1\", \"capability-2\", \"capability-3\"]\n---\n\n# Agent Name\n\n[Brief introduction to the agent's purpose and specialization]\n\n## What This Agent Does\n\n[Detailed description of the agent's responsibilities]\n\n## Capabilities\n\n1. **Capability 1**: [Description]\n2. **Capability 2**: [Description]\n3. **Capability 3**: [Description]\n\n## When to Use This Agent\n\nInvoke this agent when:\n- [Scenario 1]\n- [Scenario 2]\n- [Scenario 3]\n\n## How It Proceeds\n\n[Step-by-step workflow the agent follows]\n\n1. **Analyze**: [What it reads/examines]\n2. **Evaluate**: [How it assesses the situation]\n3. **Report**: [What it returns to the main conversation]\n\n## Output Format\n\n[What kind of report or recommendations the agent provides]\n\nExample:\n- Critical issues (must fix)\n- Warnings (should fix)\n- Suggestions (nice to have)\n- Summary of findings\n\n## Tool Access\n\n[What tools this agent has access to and why]\n\n## Notes\n\n[Any limitations, constraints, or important considerations]\n",
        "plugins/plugin-development/skills/plugin-authoring/templates/command-template.md": "---\ndescription: Brief, third-person description of what this command does\nargument-hint: [arg1] [arg2]\n---\n\n# Command Name\n\n[Detailed instructions for Claude on how to execute this command]\n\n## Context\n\n[When and why to use this command]\n\n## Instructions\n\n1. [Step 1: What to do first]\n2. [Step 2: Next action]\n3. [Step 3: Final step]\n\n## Arguments\n\n- `$ARGUMENTS` or `$1`, `$2`, etc.: [Explain what each argument means]\n\n## Example Usage\n\n**Command**: `/namespace:command-name arg1 arg2`\n\n**Expected behavior**: [Describe what should happen]\n\n## Notes\n\n[Any additional context, warnings, or tips]\n",
        "plugins/plugin-development/skills/plugin-authoring/templates/skill-template.md": "---\nname: skill-name\ndescription: What the Skill does and WHEN to use it (third person). Be specific about triggers.\n# allowed-tools: Read, Grep, Glob  # Optional: Only add if you want to restrict available tools\n---\n\n# Skill Name\n\n[Brief introduction to what this Skill provides]\n\n## Purpose\n\n[Explain the Skill's role and capabilities]\n\n## When to Activate\n\n[Describe specific contexts or patterns that should trigger this Skill]\n\nExamples:\n- When the user mentions [specific topic]\n- When files matching [pattern] are present\n- When working with [technology/framework]\n\n## Capabilities\n\n[What this Skill can help with]\n\n1. [Capability 1]\n2. [Capability 2]\n3. [Capability 3]\n\n## Quick Links\n\n[Link to sibling files for progressive disclosure]\n\n- [Reference 1](./reference1.md)\n- [Reference 2](./reference2.md)\n\n## Workflow\n\n[Step-by-step approach this Skill follows]\n\n1. [Analyze/Read relevant files]\n2. [Propose actions]\n3. [Execute via commands or provide guidance]\n\n## Notes\n\n[Any constraints, best practices, or important information]\n"
      },
      "plugins": [
        {
          "name": "plugin-development",
          "description": "Assist with Claude Code plugin development: scaffold, validate, review, and team-ready distribution",
          "version": "1.1.0",
          "author": {
            "name": "Ivan Magda"
          },
          "source": "./plugins/plugin-development",
          "category": "developer-tools",
          "tags": [
            "development",
            "plugins",
            "scaffold",
            "validation",
            "tools"
          ],
          "keywords": [
            "claude-code",
            "plugins",
            "developer-tools",
            "scaffold",
            "validation"
          ],
          "categories": [
            "claude-code",
            "developer-tools",
            "development",
            "plugins",
            "scaffold",
            "tools",
            "validation"
          ],
          "install_commands": [
            "/plugin marketplace add hyperskill/claude-code-marketplace",
            "/plugin install plugin-development@hyperskill-marketplace"
          ]
        }
      ]
    }
  ]
}