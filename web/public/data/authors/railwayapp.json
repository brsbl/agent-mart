{
  "author": {
    "id": "railwayapp",
    "display_name": "Railway",
    "type": "Organization",
    "avatar_url": "https://avatars.githubusercontent.com/u/66716858?v=4",
    "url": "https://github.com/railwayapp",
    "bio": "The all-in-one intelligent cloud provider",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 0,
      "total_skills": 13,
      "total_stars": 84,
      "total_forks": 2
    }
  },
  "marketplaces": [
    {
      "name": "railway-skills",
      "version": null,
      "description": "Railway agent skills for Claude Code",
      "owner_info": {
        "name": "Railway",
        "email": "contact@railway.com"
      },
      "keywords": [],
      "repo_full_name": "railwayapp/railway-skills",
      "repo_url": "https://github.com/railwayapp/railway-skills",
      "repo_description": "Agent skills for interacting with Railway",
      "homepage": "https://railway.com/skills.sh",
      "signals": {
        "stars": 84,
        "forks": 2,
        "pushed_at": "2026-01-28T03:05:58Z",
        "created_at": "2026-01-04T08:47:28Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 513
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 257
        },
        {
          "path": "plugins/railway/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/hooks/auto-approve-api.sh",
          "type": "blob",
          "size": 834
        },
        {
          "path": "plugins/railway/hooks/hooks.json",
          "type": "blob",
          "size": 298
        },
        {
          "path": "plugins/railway/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/_shared",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/_shared/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/_shared/references/environment-config.md",
          "type": "blob",
          "size": 5305
        },
        {
          "path": "plugins/railway/skills/_shared/references/monorepo.md",
          "type": "blob",
          "size": 5692
        },
        {
          "path": "plugins/railway/skills/_shared/references/railpack.md",
          "type": "blob",
          "size": 6069
        },
        {
          "path": "plugins/railway/skills/_shared/references/variables.md",
          "type": "blob",
          "size": 4467
        },
        {
          "path": "plugins/railway/skills/central-station",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/central-station/SKILL.md",
          "type": "blob",
          "size": 7471
        },
        {
          "path": "plugins/railway/skills/database",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/database/SKILL.md",
          "type": "blob",
          "size": 7491
        },
        {
          "path": "plugins/railway/skills/database/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/database/references/environment-config.md",
          "type": "blob",
          "size": 5305
        },
        {
          "path": "plugins/railway/skills/database/references/monorepo.md",
          "type": "blob",
          "size": 5692
        },
        {
          "path": "plugins/railway/skills/database/references/railpack.md",
          "type": "blob",
          "size": 6069
        },
        {
          "path": "plugins/railway/skills/database/references/variables.md",
          "type": "blob",
          "size": 4467
        },
        {
          "path": "plugins/railway/skills/deploy",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/deploy/SKILL.md",
          "type": "blob",
          "size": 3292
        },
        {
          "path": "plugins/railway/skills/deploy/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/deploy/references/environment-config.md",
          "type": "blob",
          "size": 5305
        },
        {
          "path": "plugins/railway/skills/deploy/references/monorepo.md",
          "type": "blob",
          "size": 5692
        },
        {
          "path": "plugins/railway/skills/deploy/references/railpack.md",
          "type": "blob",
          "size": 6069
        },
        {
          "path": "plugins/railway/skills/deploy/references/variables.md",
          "type": "blob",
          "size": 4467
        },
        {
          "path": "plugins/railway/skills/deployment",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/deployment/SKILL.md",
          "type": "blob",
          "size": 5979
        },
        {
          "path": "plugins/railway/skills/deployment/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/deployment/references/environment-config.md",
          "type": "blob",
          "size": 5305
        },
        {
          "path": "plugins/railway/skills/deployment/references/monorepo.md",
          "type": "blob",
          "size": 5692
        },
        {
          "path": "plugins/railway/skills/deployment/references/railpack.md",
          "type": "blob",
          "size": 6069
        },
        {
          "path": "plugins/railway/skills/deployment/references/variables.md",
          "type": "blob",
          "size": 4467
        },
        {
          "path": "plugins/railway/skills/domain",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/domain/SKILL.md",
          "type": "blob",
          "size": 2756
        },
        {
          "path": "plugins/railway/skills/domain/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/domain/references/environment-config.md",
          "type": "blob",
          "size": 5305
        },
        {
          "path": "plugins/railway/skills/domain/references/monorepo.md",
          "type": "blob",
          "size": 5692
        },
        {
          "path": "plugins/railway/skills/domain/references/railpack.md",
          "type": "blob",
          "size": 6069
        },
        {
          "path": "plugins/railway/skills/domain/references/variables.md",
          "type": "blob",
          "size": 4467
        },
        {
          "path": "plugins/railway/skills/environment",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/environment/SKILL.md",
          "type": "blob",
          "size": 11485
        },
        {
          "path": "plugins/railway/skills/environment/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/environment/references/environment-config.md",
          "type": "blob",
          "size": 5305
        },
        {
          "path": "plugins/railway/skills/environment/references/monorepo.md",
          "type": "blob",
          "size": 5692
        },
        {
          "path": "plugins/railway/skills/environment/references/railpack.md",
          "type": "blob",
          "size": 6069
        },
        {
          "path": "plugins/railway/skills/environment/references/variables.md",
          "type": "blob",
          "size": 4467
        },
        {
          "path": "plugins/railway/skills/metrics",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/metrics/SKILL.md",
          "type": "blob",
          "size": 5761
        },
        {
          "path": "plugins/railway/skills/metrics/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/metrics/references/environment-config.md",
          "type": "blob",
          "size": 5305
        },
        {
          "path": "plugins/railway/skills/metrics/references/monorepo.md",
          "type": "blob",
          "size": 5692
        },
        {
          "path": "plugins/railway/skills/metrics/references/railpack.md",
          "type": "blob",
          "size": 6069
        },
        {
          "path": "plugins/railway/skills/metrics/references/variables.md",
          "type": "blob",
          "size": 4467
        },
        {
          "path": "plugins/railway/skills/new",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/new/SKILL.md",
          "type": "blob",
          "size": 12909
        },
        {
          "path": "plugins/railway/skills/new/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/new/references/environment-config.md",
          "type": "blob",
          "size": 5305
        },
        {
          "path": "plugins/railway/skills/new/references/monorepo.md",
          "type": "blob",
          "size": 5692
        },
        {
          "path": "plugins/railway/skills/new/references/railpack.md",
          "type": "blob",
          "size": 6069
        },
        {
          "path": "plugins/railway/skills/new/references/variables.md",
          "type": "blob",
          "size": 4467
        },
        {
          "path": "plugins/railway/skills/projects",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/projects/SKILL.md",
          "type": "blob",
          "size": 3247
        },
        {
          "path": "plugins/railway/skills/projects/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/projects/references/environment-config.md",
          "type": "blob",
          "size": 5305
        },
        {
          "path": "plugins/railway/skills/projects/references/monorepo.md",
          "type": "blob",
          "size": 5692
        },
        {
          "path": "plugins/railway/skills/projects/references/railpack.md",
          "type": "blob",
          "size": 6069
        },
        {
          "path": "plugins/railway/skills/projects/references/variables.md",
          "type": "blob",
          "size": 4467
        },
        {
          "path": "plugins/railway/skills/railway-docs",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/railway-docs/SKILL.md",
          "type": "blob",
          "size": 1857
        },
        {
          "path": "plugins/railway/skills/railway-docs/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/railway-docs/references/environment-config.md",
          "type": "blob",
          "size": 5305
        },
        {
          "path": "plugins/railway/skills/railway-docs/references/monorepo.md",
          "type": "blob",
          "size": 5692
        },
        {
          "path": "plugins/railway/skills/railway-docs/references/railpack.md",
          "type": "blob",
          "size": 6069
        },
        {
          "path": "plugins/railway/skills/railway-docs/references/variables.md",
          "type": "blob",
          "size": 4467
        },
        {
          "path": "plugins/railway/skills/service",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/service/SKILL.md",
          "type": "blob",
          "size": 6556
        },
        {
          "path": "plugins/railway/skills/service/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/service/references/environment-config.md",
          "type": "blob",
          "size": 5305
        },
        {
          "path": "plugins/railway/skills/service/references/monorepo.md",
          "type": "blob",
          "size": 5692
        },
        {
          "path": "plugins/railway/skills/service/references/railpack.md",
          "type": "blob",
          "size": 6069
        },
        {
          "path": "plugins/railway/skills/service/references/variables.md",
          "type": "blob",
          "size": 4467
        },
        {
          "path": "plugins/railway/skills/status",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/status/SKILL.md",
          "type": "blob",
          "size": 2373
        },
        {
          "path": "plugins/railway/skills/status/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/status/references/environment-config.md",
          "type": "blob",
          "size": 5305
        },
        {
          "path": "plugins/railway/skills/status/references/monorepo.md",
          "type": "blob",
          "size": 5692
        },
        {
          "path": "plugins/railway/skills/status/references/railpack.md",
          "type": "blob",
          "size": 6069
        },
        {
          "path": "plugins/railway/skills/status/references/variables.md",
          "type": "blob",
          "size": 4467
        },
        {
          "path": "plugins/railway/skills/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/templates/SKILL.md",
          "type": "blob",
          "size": 6472
        },
        {
          "path": "plugins/railway/skills/templates/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/railway/skills/templates/references/environment-config.md",
          "type": "blob",
          "size": 5305
        },
        {
          "path": "plugins/railway/skills/templates/references/monorepo.md",
          "type": "blob",
          "size": 5692
        },
        {
          "path": "plugins/railway/skills/templates/references/railpack.md",
          "type": "blob",
          "size": 6069
        },
        {
          "path": "plugins/railway/skills/templates/references/variables.md",
          "type": "blob",
          "size": 4467
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"$schema\": \"https://anthropic.com/claude-code/marketplace.schema.json\",\n  \"name\": \"railway-skills\",\n  \"description\": \"Railway agent skills for Claude Code\",\n  \"owner\": {\n    \"name\": \"Railway\",\n    \"email\": \"contact@railway.com\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"railway\",\n      \"description\": \"Railway tools for Claude Code - manage projects, services, deployments\",\n      \"author\": {\n        \"name\": \"Railway\"\n      },\n      \"source\": \"./plugins/railway\",\n      \"category\": \"productivity\"\n    }\n  ]\n}\n",
        "plugins/railway/.claude-plugin/plugin.json": "{\n  \"name\": \"railway\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Railway tools for Claude Code\",\n  \"author\": {\n    \"name\": \"Railway\",\n    \"email\": \"contact@railway.com\"\n  },\n  \"repository\": \"https://github.com/railwayapp/railway-skills\",\n  \"license\": \"MIT\"\n}\n",
        "plugins/railway/hooks/auto-approve-api.sh": "#!/bin/bash\n# Auto-approve railway-api.sh and railway CLI commands\n\ninput=$(cat)\n\ntool_name=$(echo \"$input\" | jq -r '.tool_name // empty')\ncommand=$(echo \"$input\" | jq -r '.tool_input.command // empty')\n\nif [[ \"$tool_name\" != \"Bash\" ]]; then\n  exit 0\nfi\n\n# Auto-approve railway-api.sh calls\nif [[ \"$command\" == *\"railway-api.sh\"* ]]; then\n  cat <<'EOF'\n{\n  \"hookSpecificOutput\": {\n    \"hookEventName\": \"PreToolUse\",\n    \"permissionDecision\": \"allow\",\n    \"permissionDecisionReason\": \"Railway API call auto-approved\"\n  }\n}\nEOF\n  exit 0\nfi\n\n# Auto-approve railway CLI commands\nif [[ \"$command\" =~ ^railway[[:space:]] ]]; then\n  cat <<'EOF'\n{\n  \"hookSpecificOutput\": {\n    \"hookEventName\": \"PreToolUse\",\n    \"permissionDecision\": \"allow\",\n    \"permissionDecisionReason\": \"Railway CLI command auto-approved\"\n  }\n}\nEOF\n  exit 0\nfi\n\nexit 0\n",
        "plugins/railway/hooks/hooks.json": "{\n  \"description\": \"Auto-approve Railway API calls\",\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Bash\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/hooks/auto-approve-api.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/railway/skills/_shared/references/environment-config.md": "# Environment Config Reference\n\nThe `EnvironmentConfig` object is used to configure services, volumes, and shared variables in Railway.\n\n## Structure\n\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"source\": { ... },\n      \"build\": { ... },\n      \"deploy\": { ... },\n      \"variables\": { ... },\n      \"networking\": { ... }\n    }\n  },\n  \"sharedVariables\": { ... },\n  \"volumes\": { ... },\n  \"buckets\": { ... }\n}\n```\n\nOnly include fields being changed. The patch is merged with existing config.\n\n## Service Config\n\n### Source\n| Field | Type | Description |\n|-------|------|-------------|\n| `image` | string | Docker image (e.g., `nginx:latest`) |\n| `repo` | string | Git repository URL |\n| `branch` | string | Git branch to deploy |\n| `commitSha` | string | Specific commit SHA |\n| `rootDirectory` | string | Root directory (monorepos) |\n| `checkSuites` | boolean | Wait for GitHub check suites |\n| `autoUpdates.type` | disabled \\| patch \\| minor | Auto-update policy for Docker images |\n\n### Build\n| Field | Type | Description |\n|-------|------|-------------|\n| `builder` | NIXPACKS \\| DOCKERFILE \\| RAILPACK | Build system |\n| `buildCommand` | string | Command for Nixpacks builds |\n| `dockerfilePath` | string | Path to Dockerfile |\n| `watchPatterns` | string[] | Patterns to trigger deploys |\n| `nixpacksConfigPath` | string | Path to nixpacks config |\n\n### Deploy\n| Field | Type | Description |\n|-------|------|-------------|\n| `startCommand` | string | Container start command |\n| `multiRegionConfig` | object | Region → replica config. See [Multi-Region Config](#multi-region-config). |\n| `healthcheckPath` | string | Health check endpoint |\n| `healthcheckTimeout` | number | Seconds to wait for health |\n| `restartPolicyType` | ON_FAILURE \\| ALWAYS \\| NEVER | Restart behavior |\n| `restartPolicyMaxRetries` | number | Max restart attempts |\n| `cronSchedule` | string | Cron schedule for cron jobs |\n| `sleepApplication` | boolean | Sleep when inactive |\n\n### Variables\n| Field | Type | Description |\n|-------|------|-------------|\n| `value` | string | Variable value |\n| `isOptional` | boolean | Allow empty value |\n\nSet to `null` to delete a variable.\n\nFor variable references, see [variables.md](variables.md).\n\n### Lifecycle\n| Field | Type | Description |\n|-------|------|-------------|\n| `isDeleted` | boolean | Mark for deletion (requires ADMIN) |\n| `isCreated` | boolean | Mark as newly created |\n\n## Multi-Region Config\n\nControls replica count per region. Structure: region name → `{ numReplicas }` or `null` to remove.\n\n```json\n{\n  \"multiRegionConfig\": {\n    \"us-west2\": { \"numReplicas\": 3 },\n    \"europe-west4-drams3a\": { \"numReplicas\": 2 }\n  }\n}\n```\n\n### Available Regions\n\n| Name | Location | Aliases |\n|------|----------|---------|\n| `us-west2` | US West (California) | \"us west\", \"california\" |\n| `us-east4-eqdc4a` | US East (Virginia) | \"us east\", \"virginia\" |\n| `europe-west4-drams3a` | EU West (Amsterdam) | \"europe\", \"eu\", \"amsterdam\" |\n| `asia-southeast1-eqsg3a` | Southeast Asia (Singapore) | \"asia\", \"singapore\" |\n\n### Interpreting User Requests\n\n- \"add 3 replicas to europe\" → `{ \"europe-west4-drams3a\": { \"numReplicas\": 3 } }`\n- \"add a replica to all regions\" → set `numReplicas: 1` for all 4 regions\n- \"remove from asia\" → `{ \"asia-southeast1-eqsg3a\": null }`\n- \"increase replicas to 5\" (no region specified) → query current config first, update existing region(s)\n\n**Important:** When user doesn't specify a region, query the current `multiRegionConfig` and modify the existing region(s). Don't assume a default region.\n\n## Common Operations\n\n### Set Build Command\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"buildCommand\": \"npm run build\" } } } }\n```\n\n### Set Start Command\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"startCommand\": \"node server.js\" } } } }\n```\n\n### Set Replicas\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"multiRegionConfig\": { \"us-west2\": { \"numReplicas\": 3 } } } } } }\n```\n\n### Add Variables\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"API_KEY\": { \"value\": \"xxx\" } } } } }\n```\n\n### Delete Variable\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"OLD_VAR\": null } } } }\n```\n\n### Add Shared Variable\n```json\n{ \"sharedVariables\": { \"DATABASE_URL\": { \"value\": \"postgres://...\" } } }\n```\n\n### Change Docker Image\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"image\": \"nginx:latest\" } } } }\n```\n\n### Connect GitHub Repo\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"repo\": \"owner/repo\", \"branch\": \"main\" } } } }\n```\n\n### Change Git Branch\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"branch\": \"develop\" } } } }\n```\n\n### Set Health Check\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"healthcheckPath\": \"/health\", \"healthcheckTimeout\": 30 } } } }\n```\n\n### Change Builder\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"builder\": \"DOCKERFILE\", \"dockerfilePath\": \"./Dockerfile\" } } } }\n```\n\n### Delete Service\n```json\n{ \"services\": { \"<serviceId>\": { \"isDeleted\": true } } }\n```\n\n### Delete Volume\n```json\n{ \"volumes\": { \"<volumeId>\": { \"isDeleted\": true } } }\n```\n\n### New Service Instance\n```json\n{ \"services\": { \"<serviceId>\": { \"isCreated\": true, \"source\": { \"image\": \"nginx\" } } } }\n```\n\n**Note:** `isCreated: true` is required for new service instances.\n",
        "plugins/railway/skills/_shared/references/monorepo.md": "# Monorepo Reference\n\nRailway supports two types of monorepo deployments with different configuration approaches.\n\n## Key Decision: Root Directory vs Custom Commands\n\n| Approach | When to Use | What Happens |\n|----------|-------------|--------------|\n| **Root Directory** | Isolated apps (no shared code) | Only that directory's code is available |\n| **Custom Commands** | Shared monorepos (TypeScript, workspaces) | Full repo available, filter at build/start |\n\n**Critical:** Setting root directory means code outside that directory is NOT available during build. For monorepos with shared packages, use custom commands instead.\n\n## Isolated Monorepo\n\nApps are completely independent - no shared code between directories.\n\n```\n├── frontend/        # React app (standalone)\n│   ├── package.json\n│   └── src/\n└── backend/         # Python API (standalone)\n    ├── requirements.txt\n    └── main.py\n```\n\n### Configuration\n\nSet **Root Directory** for each service:\n- Frontend service: `/frontend`\n- Backend service: `/backend`\n\nEach service only sees its own directory's code.\n\n### When to Use\n\n- Frontend and backend in different languages\n- No shared packages or dependencies\n- Each app has its own package.json/requirements.txt\n- Apps don't import from sibling directories\n\n## Shared Monorepo\n\nApps share code from common packages or the root.\n\n```\n├── package.json           # Root workspace config\n├── packages/\n│   ├── frontend/\n│   │   ├── package.json\n│   │   └── src/\n│   ├── backend/\n│   │   ├── package.json\n│   │   └── src/\n│   └── shared/            # Shared utilities\n│       ├── package.json\n│       └── src/\n└── tsconfig.json          # Shared TS config\n```\n\n### Configuration\n\nDo NOT set root directory. Instead, use custom build and start commands:\n\n**pnpm:**\n```\nBuild: pnpm --filter backend build\nStart: pnpm --filter backend start\n```\n\n**npm workspaces:**\n```\nBuild: npm run build --workspace=packages/backend\nStart: npm run start --workspace=packages/backend\n```\n\n**yarn workspaces:**\n```\nBuild: yarn workspace backend build\nStart: yarn workspace backend start\n```\n\n**bun:**\n```\nBuild: bun run --filter backend build\nStart: bun run --filter backend start\n```\n\n**Turborepo:**\n```\nBuild: turbo run build --filter=backend\nStart: turbo run start --filter=backend\n```\n\n### When to Use\n\n- TypeScript/JavaScript monorepo with workspaces\n- Packages import from sibling packages (`@myapp/shared`)\n- Shared tsconfig.json, eslint config at root\n- Using pnpm, yarn workspaces, npm workspaces, or bun\n- Using Turborepo, Nx, or similar build tools\n\n## Watch Paths\n\nPrevent changes in one package from triggering rebuilds of other services.\n\nSet watch paths for each service to only rebuild when relevant files change:\n\n| Service | Watch Paths |\n|---------|-------------|\n| frontend | `/packages/frontend/**`, `/packages/shared/**` |\n| backend | `/packages/backend/**`, `/packages/shared/**` |\n\nInclude shared packages in watch paths if the service depends on them.\n\n### Pattern Format\n\nUses gitignore-style patterns:\n```\n/packages/backend/**     # All files in backend\n/packages/shared/**      # All files in shared (if depends on it)\n!**/*.md                 # Ignore markdown changes\n```\n\n## Configuration Examples\n\n### Isolated: React + Python API\n\nTwo separate apps, no shared code.\n\n**Frontend service:**\n- Root Directory: `/frontend`\n- No custom commands needed (Railpack auto-detects)\n\n**Backend service:**\n- Root Directory: `/backend`\n- No custom commands needed\n\n### Shared: TypeScript Monorepo with pnpm\n\nFrontend and backend share a `@myapp/shared` package.\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter frontend build`\n- Start Command: `pnpm --filter frontend start`\n- Watch Paths: `/packages/frontend/**`, `/packages/shared/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter backend build`\n- Start Command: `pnpm --filter backend start`\n- Watch Paths: `/packages/backend/**`, `/packages/shared/**`\n\n### Shared: Turborepo\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=frontend`\n- Start Command: `turbo run start --filter=frontend`\n- Watch Paths: `/apps/frontend/**`, `/packages/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=backend`\n- Start Command: `turbo run start --filter=backend`\n- Watch Paths: `/apps/backend/**`, `/packages/**`\n\n## Common Mistakes\n\n### Using Root Directory for Shared Monorepos\n\n**Wrong:**\n```\nRoot Directory: /packages/backend\n```\nThis breaks builds because `@myapp/shared` isn't available.\n\n**Right:**\n```\nRoot Directory: (empty)\nBuild Command: pnpm --filter backend build\nStart Command: pnpm --filter backend start\n```\n\n### Forgetting Watch Paths\n\nWithout watch paths, changing `frontend/` triggers a rebuild of `backend/`.\n\nAlways set watch paths for monorepos to avoid unnecessary builds.\n\n### Missing Shared Packages in Watch Paths\n\nIf `backend` imports from `shared`, include both in watch paths:\n```\n/packages/backend/**\n/packages/shared/**\n```\n\nOtherwise changes to `shared` won't trigger backend rebuilds.\n\n## Detecting Monorepo Type\n\nCheck for these indicators:\n\n**Isolated monorepo:**\n- Separate package.json in each directory\n- No workspace config in root package.json\n- No imports between directories\n\n**Shared monorepo:**\n- Root package.json with `workspaces` field\n- `pnpm-workspace.yaml` exists\n- Packages import from each other (`@myapp/shared`)\n- Shared tsconfig.json at root\n- turbo.json or nx.json at root\n",
        "plugins/railway/skills/_shared/references/railpack.md": "# Railpack Reference\n\nRailpack is Railway's default builder. Zero-config for most projects.\n\nFull docs: https://railpack.com/llms.txt\n\n## Detection\n\nRailpack analyzes source code to detect language, framework, and build requirements automatically.\n\nSupported: Node, Python, Go, PHP, Java, Ruby, Rust, Elixir, Gleam, Deno, C/C++, static files.\n\n## Static Sites\n\n### Detection Patterns\n\nRailpack serves static files via Caddy when it detects:\n1. `Staticfile` in root (can specify `root: dist`)\n2. `index.html` in root\n3. `public/` directory\n4. `RAILPACK_STATIC_FILE_ROOT` env var set\n\n### Root Directory Priority\n\n1. `RAILPACK_STATIC_FILE_ROOT` env var\n2. `root` in `Staticfile`\n3. `public/` directory\n4. Current directory (if index.html exists)\n\n### Common Patterns\n\nRailpack auto-detects common static build outputs. Only set `RAILPACK_STATIC_FILE_ROOT` for non-standard output directories.\n\n| Framework | Build Output | Config Needed |\n|-----------|--------------|---------------|\n| Plain HTML | root | None (auto-detected) |\n| Vite | dist | None (auto-detected) |\n| Astro (static) | dist | None (auto-detected) |\n| Create React App | build | None (auto-detected) |\n| Angular | dist/<project> | `RAILPACK_STATIC_FILE_ROOT=dist/<project>` (non-standard path) |\n| Custom output | varies | Set if output dir is non-standard |\n\n### Custom Caddyfile\n\nPut a `Caddyfile` in project root to override default serving behavior.\n\n## Node.js\n\n### Detection\n- `package.json` in root\n\n### Version Priority\n1. `RAILPACK_NODE_VERSION` env var\n2. `engines.node` in package.json\n3. `.nvmrc` or `.node-version`\n4. Default: Node 22\n\n### Package Manager Detection\n1. `packageManager` field in package.json (enables Corepack)\n2. Lock file: `pnpm-lock.yaml`, `bun.lockb`, `yarn.lock`\n3. Default: npm\n\n### Build Command\nAuto-detected from package.json `scripts.build`. Override via `buildCommand` in service settings.\n\n### Start Command\nAuto-detected:\n1. `scripts.start` in package.json\n2. `main` field in package.json\n3. `index.js` or `index.ts` in root\n\nOverride via `startCommand` in service settings.\n\n### Framework Detection\n\n| Framework | Detection | Notes |\n|-----------|-----------|-------|\n| Next.js | `next` in dependencies | Caches `.next/cache` |\n| Vite | `vite` in devDependencies | Static or SSR mode |\n| Astro | `astro` in dependencies | Caches `.astro` |\n| Nuxt | `nuxt` in dependencies | Auto start command |\n| Remix | `@remix-run/*` in deps | - |\n\n### Static Site Mode (SPA)\n\nFor frameworks like Vite, CRA, Astro (static), Angular:\n- Railpack builds then serves via Caddy\n- Set `RAILPACK_SPA_OUTPUT_DIR` if output isn't `dist`\n\n## Python\n\n### Detection\n- `requirements.txt`, `pyproject.toml`, `Pipfile`, or `uv.lock`\n\n### Version Priority\n1. `RAILPACK_PYTHON_VERSION` env var\n2. `.python-version` file\n3. `requires-python` in pyproject.toml\n4. Default: Python 3.12\n\n### WSGI/ASGI Auto-Config\n\n| Framework | Start Command |\n|-----------|---------------|\n| Django | `gunicorn <project>.wsgi` |\n| FastAPI | `uvicorn main:app --host 0.0.0.0` |\n| Flask | `gunicorn app:app` |\n\nOverride via `startCommand` in service settings.\n\n## Go\n\n### Detection\n- `go.mod` in root\n\n### Build\nCompiles to binary automatically. For `cmd/` structure, set binary name or use `RAILPACK_GO_BIN`.\n\n## Rust\n\n### Detection\n- `Cargo.toml` in root\n\n### Build\nRelease build by default. Binary auto-detected from Cargo.toml.\n\n## Configuration\n\n### Preferred: Service Settings\n\nUse `environment` skill to set:\n- `buildCommand` - Custom build command\n- `startCommand` - Custom start command\n\nThese are stored in Railway and don't pollute your codebase.\n\n### Environment Variables\n\n| Variable | Purpose |\n|----------|---------|\n| `RAILPACK_STATIC_FILE_ROOT` | Static file serving directory |\n| `RAILPACK_SPA_OUTPUT_DIR` | SPA build output (defaults to `dist`) |\n| `RAILPACK_NODE_VERSION` | Node.js version |\n| `RAILPACK_PYTHON_VERSION` | Python version |\n| `RAILPACK_GO_BIN` | Go binary name |\n| `RAILPACK_PACKAGES` | Additional Mise packages (`pkg@version`) |\n| `RAILPACK_BUILD_APT_PACKAGES` | System packages for build |\n| `RAILPACK_DEPLOY_APT_PACKAGES` | System packages for runtime |\n\n### railpack.json\n\nAdvanced config for custom build steps:\n\n```json\n{\n  \"$schema\": \"https://schema.railpack.com\",\n  \"packages\": {\n    \"ffmpeg\": \"latest\"\n  },\n  \"deploy\": {\n    \"aptPackages\": [\"libmagic1\"]\n  }\n}\n```\n\n### railway.toml\n\nAlternative config format:\n\n```toml\n[build]\nbuilder = \"RAILPACK\"\nbuildCommand = \"npm run build\"\n\n[deploy]\nstartCommand = \"npm start\"\n```\n\n## Minimal Project Scaffolding\n\nWhen no code exists, suggest these patterns:\n\n### Static HTML\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>My Site</title>\n</head>\n<body>\n  <h1>Hello Railway</h1>\n</body>\n</html>\n```\n\n### Vite React\n```bash\nnpm create vite@latest . -- --template react\n```\n\n### Astro\n```bash\nnpm create astro@latest\n```\n\n### Python FastAPI\n```python\n# main.py\nfrom fastapi import FastAPI\napp = FastAPI()\n\n@app.get(\"/\")\ndef root():\n    return {\"message\": \"Hello Railway\"}\n```\n\n```txt\n# requirements.txt\nfastapi\nuvicorn\n```\n\n### Go HTTP Server\n```go\n// main.go\npackage main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"8080\"\n    }\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        fmt.Fprintf(w, \"Hello Railway\")\n    })\n    http.ListenAndServe(\":\"+port, nil)\n}\n```\n\n## Troubleshooting\n\n| Issue | Solution |\n|-------|----------|\n| Static site 404s | Check output dir - set `RAILPACK_STATIC_FILE_ROOT` if non-standard |\n| Wrong build command | Use `environment` skill to set `buildCommand` |\n| Wrong start command | Use `environment` skill to set `startCommand` |\n| Missing system package | Add to `RAILPACK_BUILD_APT_PACKAGES` or `RAILPACK_DEPLOY_APT_PACKAGES` |\n| Wrong Node version | Set `RAILPACK_NODE_VERSION` or add `.nvmrc` |\n| Wrong Python version | Set `RAILPACK_PYTHON_VERSION` or add `.python-version` |\n",
        "plugins/railway/skills/_shared/references/variables.md": "# Variables Reference\n\nVariables in Railway support references to other services, shared variables, and Railway-provided values.\n\n## Template Syntax\n\n```\n${{NAMESPACE.VAR}}\n```\n\n| Namespace | Description |\n|-----------|-------------|\n| `shared` | Shared variables (project-wide) |\n| `<serviceName>` | Variables from another service (case-sensitive) |\n\n## Examples\n\n**Reference shared variable:**\n```json\n{ \"value\": \"${{shared.DOMAIN}}\" }\n```\n\n**Reference another service's variable:**\n```json\n{ \"value\": \"${{api.API_KEY}}\" }\n```\n\n**Combine with text:**\n```json\n{ \"value\": \"https://${{shared.DOMAIN}}/api\" }\n```\n\n## Railway-Provided Variables\n\nRailway injects these into every service automatically.\n\n### Networking\n| Variable | Description | Example | Availability |\n|----------|-------------|---------|--------------|\n| `RAILWAY_PUBLIC_DOMAIN` | Public domain | `myapp.up.railway.app` | Only if service has a domain |\n| `RAILWAY_PRIVATE_DOMAIN` | Private DNS (internal only) | `myapp.railway.internal` | Always |\n| `RAILWAY_TCP_PROXY_DOMAIN` | TCP proxy domain | `roundhouse.proxy.rlwy.net` | Only if TCP proxy enabled |\n| `RAILWAY_TCP_PROXY_PORT` | TCP proxy port | `11105` | Only if TCP proxy enabled |\n\n**Note:** `RAILWAY_PUBLIC_DOMAIN` is only available if the service has a domain configured.\nCheck the service's environment config to verify a domain exists before referencing it.\n\n### Context\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_PROJECT_ID` | Project ID |\n| `RAILWAY_PROJECT_NAME` | Project name |\n| `RAILWAY_ENVIRONMENT_ID` | Environment ID |\n| `RAILWAY_ENVIRONMENT_NAME` | Environment name |\n| `RAILWAY_SERVICE_ID` | Service ID |\n| `RAILWAY_SERVICE_NAME` | Service name |\n| `RAILWAY_DEPLOYMENT_ID` | Deployment ID |\n| `RAILWAY_REPLICA_ID` | Replica ID |\n| `RAILWAY_REPLICA_REGION` | Region (e.g., `us-west2`) |\n\n### Volume (if attached)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_VOLUME_NAME` | Volume name |\n| `RAILWAY_VOLUME_MOUNT_PATH` | Mount path |\n\n### Git (if deployed from GitHub)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_GIT_COMMIT_SHA` | Commit SHA |\n| `RAILWAY_GIT_BRANCH` | Branch name |\n| `RAILWAY_GIT_REPO_NAME` | Repository name |\n| `RAILWAY_GIT_REPO_OWNER` | Repository owner |\n| `RAILWAY_GIT_AUTHOR` | Commit author |\n| `RAILWAY_GIT_COMMIT_MESSAGE` | Commit message |\n\n## Wiring Services Together\n\n### Frontend → Backend (public network)\nUse when: Browser makes requests to API (browser can't access private network)\n\n```json\n{\n  \"services\": {\n    \"<frontendId>\": {\n      \"variables\": {\n        \"API_URL\": { \"value\": \"https://${{backend.RAILWAY_PUBLIC_DOMAIN}}\" }\n      }\n    }\n  }\n}\n```\n\n### Service → Database (private network)\nUse when: Backend connects to database (faster, no egress cost, more secure)\n\nRailway databases auto-generate connection URL variables. Use the private versions:\n\n| Database | Variable Reference |\n|----------|-------------------|\n| Postgres | `${{Postgres.DATABASE_URL}}` |\n| MySQL | `${{MySQL.DATABASE_URL}}` |\n| Redis | `${{Redis.REDIS_URL}}` |\n| Mongo | `${{Mongo.MONGO_URL}}` |\n\n**Postgres/MySQL example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"DATABASE_URL\": { \"value\": \"${{Postgres.DATABASE_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Redis example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"REDIS_URL\": { \"value\": \"${{Redis.REDIS_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Mongo example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"MONGO_URL\": { \"value\": \"${{Mongo.MONGO_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Note:** Service names are case-sensitive. Match the exact name from your project (e.g., \"Postgres\", \"Redis\").\n\n### Service → Service (private network)\nUse when: Microservices communicate internally\n\n```json\n{\n  \"services\": {\n    \"<workerServiceId>\": {\n      \"variables\": {\n        \"API_INTERNAL_URL\": { \"value\": \"http://${{api.RAILWAY_PRIVATE_DOMAIN}}:${{api.PORT}}\" }\n      }\n    }\n  }\n}\n```\n\n## When to Use Public vs Private\n\n| Use Case | Domain | Reason |\n|----------|--------|--------|\n| Browser → API | Public | Browser can't access private network |\n| Service → Service | Private | Faster, no egress, more secure |\n| Service → Database | Private | Databases should never be public |\n| External webhook → Service | Public | External services need public access |\n| Cron job → API | Private | Internal communication |\n",
        "plugins/railway/skills/central-station/SKILL.md": "---\nname: central-station\ndescription: This skill should be used when the user asks about Central Station threads, community discussions, support questions, feature requests, or wants to search Railway's community knowledge base. Use for queries like \"search central station\", \"find threads about\", \"what are people asking about\", \"recent support threads\", or \"central station topics\".\nallowed-tools: Bash(curl:*), Bash(jq:*)\n---\n\n# Central Station\n\nSearch and browse Railway's Central Station - the community support platform for threads, discussions, and documentation.\n\n## API Endpoints\n\n| Endpoint | URL |\n|----------|-----|\n| GraphQL | `https://station-server.railway.com/gql` |\n| Thread Markdown | `https://station-server.railway.com/api/threads/:slug` |\n| LLM Data Export | `https://station-server.railway.com/api/llms-station` |\n| Frontend | `https://station.railway.com` |\n\n## When to Use\n\n- User wants to search Central Station threads or docs\n- User asks about community discussions or support questions\n- User wants to find threads about a specific topic (deployments, databases, etc.)\n- User asks \"what are people asking about X\"\n- User wants to see recent threads or questions\n- User mentions Central Station, community threads, or support discussions\n- User wants to find existing solutions before creating a new thread\n\n## When NOT to Use\n\n- User wants Railway product documentation - use `railway-docs` skill\n- User wants to check their project status - use `status` skill\n- User wants to manage their Railway project - use appropriate skill (deploy, environment, etc.)\n\n## Docs Search\n\nFor official Railway documentation, use the `railway-docs` skill which fetches from `https://docs.railway.com/api/llms-docs.md`.\n\nCentral Station's `unifiedSearch` can identify document types but has limited field access:\n\n```bash\ncurl -s 'https://station-server.railway.com/gql' \\\n  -H 'content-type: application/json' \\\n  --data-raw '{\"query\":\"{ unifiedSearch(input: { query: \\\"volumes\\\", limit: 10 }) { results { document { __typename } } } }\"}'\n```\n\nDocument types returned: `EsThreadItem` (threads) and `DocSearchResult` (docs).\n\n**Note**: For searching thread content, use the LLM Data Export endpoint instead (see below) which provides full thread data.\n\n## Quick Actions\n\n### Get Recent Threads\n\nFetch recent threads, optionally filtered by topic:\n\n```bash\ncurl -s 'https://station-server.railway.com/gql' \\\n  -H 'content-type: application/json' \\\n  -d '{\"query\": \"{ threads(first: 10, sort: recent_activity) { edges { node { slug subject status topic { slug displayName } upvoteCount createdAt } } } }\"}'\n```\n\nWith topic filter:\n\n```bash\ncurl -s 'https://station-server.railway.com/gql' \\\n  -H 'content-type: application/json' \\\n  -d '{\"query\": \"{ threads(first: 10, sort: recent_activity, topic: \\\"questions\\\") { edges { node { slug subject status topic { displayName } upvoteCount } } } }\"}'\n```\n\n### Get Thread by Slug\n\nFetch a specific thread with its content:\n\n```bash\ncurl -s 'https://station-server.railway.com/gql' \\\n  -H 'content-type: application/json' \\\n  -d '{\"query\": \"{ thread(slug: \\\"THREAD_SLUG\\\") { slug subject status content { data } topic { displayName } upvoteCount } }\"}'\n```\n\n### Get Thread as Markdown\n\nFor a cleaner read, fetch the thread as markdown:\n\n```bash\n# Append .md to the frontend URL (requires topic slug)\ncurl -s 'https://station.railway.com/TOPIC_SLUG/THREAD_SLUG.md'\n\n# Or use API with format query parameter\ncurl -s 'https://station-server.railway.com/api/threads/THREAD_SLUG?format=md'\n\n# Or use API with Accept header\ncurl -s 'https://station-server.railway.com/api/threads/THREAD_SLUG' \\\n  -H 'Accept: text/markdown'\n```\n\n### List Topics\n\nGet all available topics:\n\n```bash\ncurl -s 'https://station-server.railway.com/gql' \\\n  -H 'content-type: application/json' \\\n  -d '{\"query\": \"{ topics { slug displayName displayNamePlural } }\"}'\n```\n\nReturns: questions, feedback, community, billing, bug-bounty, privacy, abuse, templates\n\n### Get Trending Threads\n\nFetch currently trending threads:\n\n```bash\ncurl -s 'https://station-server.railway.com/gql' \\\n  -H 'content-type: application/json' \\\n  -d '{\"query\": \"{ trendingThreads { slug subject status topic { displayName } upvoteCount } }\"}'\n```\n\n### Get Pinned Threads\n\nFetch pinned/important threads:\n\n```bash\ncurl -s 'https://station-server.railway.com/gql' \\\n  -H 'content-type: application/json' \\\n  -d '{\"query\": \"{ pinnedThreads { slug subject topic { displayName } } }\"}'\n```\n\n### Search via LLM Data Export\n\nFor searching thread content, fetch all threads and filter locally:\n\n```bash\ncurl -s 'https://station-server.railway.com/api/llms-station' | jq '.items[] | select(.title | test(\"postgres\"; \"i\")) | {title, topic: .topic.name, status: .metadata.status}'\n```\n\nThis endpoint returns all public threads with full content, useful for searching by keywords.\n\n## Thread Statuses\n\n| Status | Description |\n|--------|-------------|\n| `OPEN` | Unresolved, accepting responses |\n| `SOLVED` | Marked as resolved |\n| `AWAITING_RAILWAY_RESPONSE` | Waiting for Railway team |\n| `AWAITING_USER_RESPONSE` | Waiting for original poster |\n| `CLOSED` | No longer accepting responses |\n| `ARCHIVED` | Old thread, preserved for reference |\n\n## Sort Options\n\nFor the `threads` query, use the `sort` parameter:\n\n| Sort Value | Description |\n|------------|-------------|\n| `recent_activity` | Most recently active (default) |\n| `newest` | Newest first |\n| `highest_votes` | Most upvoted |\n\n## Presenting Results\n\nWhen showing threads:\n\n1. **Thread title** - The subject\n2. **Topic** - Category (questions, feedback, etc.)\n3. **Status** - Open, solved, awaiting response\n4. **Summary** - Brief preview from content\n5. **Link** - `https://station.railway.com/{topic_slug}/{thread_slug}`\n\nFormat example:\n```\nFound 3 threads about \"postgres\":\n\n1. \"Connection timeout when connecting to Postgres\"\n   Topic: questions | Status: SOLVED | Upvotes: 5\n   https://station.railway.com/questions/connection-timeout-postgres\n\n2. \"How to connect to Postgres from local development\"\n   Topic: community | Status: OPEN | Upvotes: 12\n   https://station.railway.com/community/connect-postgres-local\n\n3. \"Postgres SSL certificate verification failed\"\n   Topic: questions | Status: AWAITING_RAILWAY_RESPONSE\n   https://station.railway.com/questions/postgres-ssl-verification\n```\n\n## Common Search Patterns\n\n| User Query | Filter/Search |\n|------------|---------------|\n| \"Why is my deploy failing?\" | topic: questions, search: \"deploy\" |\n| \"Can't connect to database\" | topic: questions, search: \"database\" or \"postgres\" |\n| \"Domain not working\" | topic: questions, search: \"domain\" |\n| \"Feature requests\" | topic: feedback |\n| \"What are people building?\" | topic: community |\n\n## Composability\n\n- **After finding a thread**: Summarize the solution or link to it\n- **No results found**: Suggest using `railway-docs` skill or creating a new thread\n- **Technical issue found**: Use relevant skill (deploy, environment, etc.) to help fix it\n\n## Error Handling\n\n### No Results Found\n\n```\nNo threads found. Try:\n- Different topic filter\n- Checking Railway docs instead\n- Creating a new thread at https://station.railway.com\n```\n\n### Invalid Topic\n\nList available topics first:\n```bash\ncurl -s 'https://station-server.railway.com/gql' -H 'content-type: application/json' -d '{\"query\": \"{ topics { slug } }\"}'\n```\n\n### Thread Not Found\n\n```\nThread not found. It may have been deleted or marked private.\n```\n",
        "plugins/railway/skills/database/SKILL.md": "---\nname: database\ndescription: This skill should be used when the user wants to add a database (Postgres, Redis, MySQL, MongoDB), says \"add postgres\", \"add redis\", \"add database\", \"connect to database\", or \"wire up the database\". For other templates (Ghost, Strapi, n8n, etc.), use the templates skill.\nallowed-tools: Bash(railway:*)\n---\n\n# Database\n\nAdd official Railway database services. These are maintained templates with pre-configured volumes, networking, and connection variables.\n\nFor non-database templates, see the `templates` skill.\n\n## When to Use\n\n- User asks to \"add a database\", \"add Postgres\", \"add Redis\", etc.\n- User needs a database for their application\n- User asks about connecting to a database\n- User says \"add postgres and connect to my server\"\n- User says \"wire up the database\"\n\n## Decision Flow\n\n**ALWAYS check for existing databases FIRST before creating.**\n\n```\nUser mentions database\n        │\n  Check existing DBs first\n  (query env config for source.image)\n        │\n   ┌────┴────┐\n Exists    Doesn't exist\n    │           │\n    │      Create database\n    │      (CLI or API)\n    │           │\n    │      Wait for deployment\n    │           │\n    └─────┬─────┘\n          │\n    User wants to\n    connect service?\n          │\n    ┌─────┴─────┐\n   Yes         No\n    │           │\nWire vars    Done +\nvia env     suggest wiring\nskill\n```\n\n## Check for Existing Databases\n\nBefore creating a database, check if one already exists.\n\nFor full environment config structure, see [environment-config.md](references/environment-config.md).\n\n```bash\nrailway status --json\n```\n\nThen query environment config and check `source.image` for each service:\n\n```graphql\nquery environmentConfig($environmentId: String!) {\n  environment(id: $environmentId) {\n    config(decryptVariables: false)\n  }\n}\n```\n\nThe `config.services` object contains each service's configuration. Check `source.image` for:\n\n- `ghcr.io/railway/postgres*` or `postgres:*` → Postgres\n- `ghcr.io/railway/redis*` or `redis:*` → Redis\n- `ghcr.io/railway/mysql*` or `mysql:*` → MySQL\n- `ghcr.io/railway/mongo*` or `mongo:*` → MongoDB\n\n## Available Databases\n\n| Database | Template Code |\n|----------|---------------|\n| PostgreSQL | `postgres` |\n| Redis | `redis` |\n| MySQL | `mysql` |\n| MongoDB | `mongodb` |\n\n## Prerequisites\n\nGet project context:\n```bash\nrailway status --json\n```\n\nExtract:\n- `id` - project ID\n- `environments.edges[0].node.id` - environment ID\n\nGet workspace ID (not in status output):\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'query getWorkspace($projectId: String!) {\n    project(id: $projectId) { workspaceId }\n  }' \\\n  '{\"projectId\": \"PROJECT_ID\"}'\nSCRIPT\n```\n\n## Adding a Database\n\n### Step 1: Fetch Template\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'query template($code: String!) {\n    template(code: $code) {\n      id\n      name\n      serializedConfig\n    }\n  }' \\\n  '{\"code\": \"postgres\"}'\nSCRIPT\n```\n\nThis returns the template's `id` and `serializedConfig` needed for deployment.\n\n### Step 2: Deploy Template\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'mutation deployTemplate($input: TemplateDeployV2Input!) {\n    templateDeployV2(input: $input) {\n      projectId\n      workflowId\n    }\n  }' \\\n  '{\n    \"input\": {\n      \"templateId\": \"TEMPLATE_ID\",\n      \"serializedConfig\": SERIALIZED_CONFIG,\n      \"projectId\": \"PROJECT_ID\",\n      \"environmentId\": \"ENVIRONMENT_ID\",\n      \"workspaceId\": \"WORKSPACE_ID\"\n    }\n  }'\nSCRIPT\n```\n\n**Important:** `serializedConfig` is the exact object from the template query, not a string.\n\n## Connecting to the Database\n\nAfter deployment, other services connect using reference variables.\n\nFor complete variable reference syntax and wiring patterns, see [variables.md](references/variables.md).\n\n### Backend Services (Server-side)\n\nUse the private/internal URL for server-to-server communication:\n\n| Database | Variable Reference |\n|----------|-------------------|\n| PostgreSQL | `${{Postgres.DATABASE_URL}}` |\n| Redis | `${{Redis.REDIS_URL}}` |\n| MySQL | `${{MySQL.MYSQL_URL}}` |\n| MongoDB | `${{MongoDB.MONGO_URL}}` |\n\n### Frontend Applications\n\n**Important:** Frontends run in the user's browser and cannot access Railway's private network. They must use public URLs or go through a backend API.\n\nFor direct database access from frontend (not recommended):\n- Use the public URL variables (e.g., `${{MongoDB.MONGO_PUBLIC_URL}}`)\n- Requires TCP proxy to be enabled\n\nBetter pattern: Frontend → Backend API → Database\n\n## Example: Add PostgreSQL\n\n```bash\nbash <<'SCRIPT'\n# 1. Get context\nrailway status --json\n# Extract project.id and environment.id\n\n# 2. Get workspace ID\nscripts/railway-api.sh \\\n  'query { project(id: \"proj-id\") { workspaceId } }' '{}'\n\n# 3. Fetch Postgres template\nscripts/railway-api.sh \\\n  'query { template(code: \"postgres\") { id serializedConfig } }' '{}'\n\n# 4. Deploy template\nscripts/railway-api.sh \\\n  'mutation deploy($input: TemplateDeployV2Input!) {\n    templateDeployV2(input: $input) { projectId workflowId }\n  }' \\\n  '{\"input\": {\"templateId\": \"...\", \"serializedConfig\": {...}, \"projectId\": \"...\", \"environmentId\": \"...\", \"workspaceId\": \"...\"}}'\nSCRIPT\n```\n\n### Then Connect From Another Service\n\nUse `environment` skill to add the variable reference:\n\n```json\n{\n  \"services\": {\n    \"<backend-service-id>\": {\n      \"variables\": {\n        \"DATABASE_URL\": { \"value\": \"${{Postgres.DATABASE_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n## Response\n\nSuccessful deployment returns:\n```json\n{\n  \"data\": {\n    \"templateDeployV2\": {\n      \"projectId\": \"e63baedb-e308-49e9-8c06-c25336f861c7\",\n      \"workflowId\": \"deployTemplate/project/e63baedb-e308-49e9-8c06-c25336f861c7/xxx\"\n    }\n  }\n}\n```\n\n## What Gets Created\n\nEach database template creates:\n- A service with the database image\n- A volume for data persistence\n- Environment variables for connection strings\n- TCP proxy for external access (where applicable)\n\n## Error Handling\n\n| Error | Cause | Solution |\n|-------|-------|----------|\n| Template not found | Invalid template code | Use: `postgres`, `redis`, `mysql`, `mongodb` |\n| Permission denied | User lacks access | Need DEVELOPER role or higher |\n| Project not found | Invalid project ID | Run `railway status --json` for correct ID |\n\n## Example Workflows\n\n### \"add postgres and connect to the server\"\n\n1. Check existing DBs via env config query\n2. If postgres exists: Skip to step 5\n3. If not exists: Deploy postgres template (fetch template → deploy)\n4. Wait for deployment to complete\n5. Identify target service (ask if multiple, or use linked service)\n6. Use `environment` skill to stage: `DATABASE_URL: { \"value\": \"${{Postgres.DATABASE_URL}}\" }`\n7. Apply changes\n\n### \"add postgres\"\n\n1. Check existing DBs via env config query\n2. If exists: \"Postgres already exists in this project\"\n3. If not exists: Deploy postgres template\n4. Inform user: \"Postgres created. Connect a service with: `DATABASE_URL=${{Postgres.DATABASE_URL}}`\"\n\n### \"connect the server to redis\"\n\n1. Check existing DBs via env config query\n2. If redis exists: Wire up REDIS_URL via environment skill → apply\n3. If no redis: Ask \"No Redis found. Create one?\"\n   - Deploy redis template\n   - Wire REDIS_URL → apply\n\n## Composability\n\n- **Connect services**: Use `environment` skill to add variable references\n- **View database service**: Use `service` skill\n- **Check logs**: Use `deployment` skill\n",
        "plugins/railway/skills/database/references/environment-config.md": "# Environment Config Reference\n\nThe `EnvironmentConfig` object is used to configure services, volumes, and shared variables in Railway.\n\n## Structure\n\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"source\": { ... },\n      \"build\": { ... },\n      \"deploy\": { ... },\n      \"variables\": { ... },\n      \"networking\": { ... }\n    }\n  },\n  \"sharedVariables\": { ... },\n  \"volumes\": { ... },\n  \"buckets\": { ... }\n}\n```\n\nOnly include fields being changed. The patch is merged with existing config.\n\n## Service Config\n\n### Source\n| Field | Type | Description |\n|-------|------|-------------|\n| `image` | string | Docker image (e.g., `nginx:latest`) |\n| `repo` | string | Git repository URL |\n| `branch` | string | Git branch to deploy |\n| `commitSha` | string | Specific commit SHA |\n| `rootDirectory` | string | Root directory (monorepos) |\n| `checkSuites` | boolean | Wait for GitHub check suites |\n| `autoUpdates.type` | disabled \\| patch \\| minor | Auto-update policy for Docker images |\n\n### Build\n| Field | Type | Description |\n|-------|------|-------------|\n| `builder` | NIXPACKS \\| DOCKERFILE \\| RAILPACK | Build system |\n| `buildCommand` | string | Command for Nixpacks builds |\n| `dockerfilePath` | string | Path to Dockerfile |\n| `watchPatterns` | string[] | Patterns to trigger deploys |\n| `nixpacksConfigPath` | string | Path to nixpacks config |\n\n### Deploy\n| Field | Type | Description |\n|-------|------|-------------|\n| `startCommand` | string | Container start command |\n| `multiRegionConfig` | object | Region → replica config. See [Multi-Region Config](#multi-region-config). |\n| `healthcheckPath` | string | Health check endpoint |\n| `healthcheckTimeout` | number | Seconds to wait for health |\n| `restartPolicyType` | ON_FAILURE \\| ALWAYS \\| NEVER | Restart behavior |\n| `restartPolicyMaxRetries` | number | Max restart attempts |\n| `cronSchedule` | string | Cron schedule for cron jobs |\n| `sleepApplication` | boolean | Sleep when inactive |\n\n### Variables\n| Field | Type | Description |\n|-------|------|-------------|\n| `value` | string | Variable value |\n| `isOptional` | boolean | Allow empty value |\n\nSet to `null` to delete a variable.\n\nFor variable references, see [variables.md](variables.md).\n\n### Lifecycle\n| Field | Type | Description |\n|-------|------|-------------|\n| `isDeleted` | boolean | Mark for deletion (requires ADMIN) |\n| `isCreated` | boolean | Mark as newly created |\n\n## Multi-Region Config\n\nControls replica count per region. Structure: region name → `{ numReplicas }` or `null` to remove.\n\n```json\n{\n  \"multiRegionConfig\": {\n    \"us-west2\": { \"numReplicas\": 3 },\n    \"europe-west4-drams3a\": { \"numReplicas\": 2 }\n  }\n}\n```\n\n### Available Regions\n\n| Name | Location | Aliases |\n|------|----------|---------|\n| `us-west2` | US West (California) | \"us west\", \"california\" |\n| `us-east4-eqdc4a` | US East (Virginia) | \"us east\", \"virginia\" |\n| `europe-west4-drams3a` | EU West (Amsterdam) | \"europe\", \"eu\", \"amsterdam\" |\n| `asia-southeast1-eqsg3a` | Southeast Asia (Singapore) | \"asia\", \"singapore\" |\n\n### Interpreting User Requests\n\n- \"add 3 replicas to europe\" → `{ \"europe-west4-drams3a\": { \"numReplicas\": 3 } }`\n- \"add a replica to all regions\" → set `numReplicas: 1` for all 4 regions\n- \"remove from asia\" → `{ \"asia-southeast1-eqsg3a\": null }`\n- \"increase replicas to 5\" (no region specified) → query current config first, update existing region(s)\n\n**Important:** When user doesn't specify a region, query the current `multiRegionConfig` and modify the existing region(s). Don't assume a default region.\n\n## Common Operations\n\n### Set Build Command\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"buildCommand\": \"npm run build\" } } } }\n```\n\n### Set Start Command\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"startCommand\": \"node server.js\" } } } }\n```\n\n### Set Replicas\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"multiRegionConfig\": { \"us-west2\": { \"numReplicas\": 3 } } } } } }\n```\n\n### Add Variables\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"API_KEY\": { \"value\": \"xxx\" } } } } }\n```\n\n### Delete Variable\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"OLD_VAR\": null } } } }\n```\n\n### Add Shared Variable\n```json\n{ \"sharedVariables\": { \"DATABASE_URL\": { \"value\": \"postgres://...\" } } }\n```\n\n### Change Docker Image\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"image\": \"nginx:latest\" } } } }\n```\n\n### Connect GitHub Repo\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"repo\": \"owner/repo\", \"branch\": \"main\" } } } }\n```\n\n### Change Git Branch\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"branch\": \"develop\" } } } }\n```\n\n### Set Health Check\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"healthcheckPath\": \"/health\", \"healthcheckTimeout\": 30 } } } }\n```\n\n### Change Builder\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"builder\": \"DOCKERFILE\", \"dockerfilePath\": \"./Dockerfile\" } } } }\n```\n\n### Delete Service\n```json\n{ \"services\": { \"<serviceId>\": { \"isDeleted\": true } } }\n```\n\n### Delete Volume\n```json\n{ \"volumes\": { \"<volumeId>\": { \"isDeleted\": true } } }\n```\n\n### New Service Instance\n```json\n{ \"services\": { \"<serviceId>\": { \"isCreated\": true, \"source\": { \"image\": \"nginx\" } } } }\n```\n\n**Note:** `isCreated: true` is required for new service instances.\n",
        "plugins/railway/skills/database/references/monorepo.md": "# Monorepo Reference\n\nRailway supports two types of monorepo deployments with different configuration approaches.\n\n## Key Decision: Root Directory vs Custom Commands\n\n| Approach | When to Use | What Happens |\n|----------|-------------|--------------|\n| **Root Directory** | Isolated apps (no shared code) | Only that directory's code is available |\n| **Custom Commands** | Shared monorepos (TypeScript, workspaces) | Full repo available, filter at build/start |\n\n**Critical:** Setting root directory means code outside that directory is NOT available during build. For monorepos with shared packages, use custom commands instead.\n\n## Isolated Monorepo\n\nApps are completely independent - no shared code between directories.\n\n```\n├── frontend/        # React app (standalone)\n│   ├── package.json\n│   └── src/\n└── backend/         # Python API (standalone)\n    ├── requirements.txt\n    └── main.py\n```\n\n### Configuration\n\nSet **Root Directory** for each service:\n- Frontend service: `/frontend`\n- Backend service: `/backend`\n\nEach service only sees its own directory's code.\n\n### When to Use\n\n- Frontend and backend in different languages\n- No shared packages or dependencies\n- Each app has its own package.json/requirements.txt\n- Apps don't import from sibling directories\n\n## Shared Monorepo\n\nApps share code from common packages or the root.\n\n```\n├── package.json           # Root workspace config\n├── packages/\n│   ├── frontend/\n│   │   ├── package.json\n│   │   └── src/\n│   ├── backend/\n│   │   ├── package.json\n│   │   └── src/\n│   └── shared/            # Shared utilities\n│       ├── package.json\n│       └── src/\n└── tsconfig.json          # Shared TS config\n```\n\n### Configuration\n\nDo NOT set root directory. Instead, use custom build and start commands:\n\n**pnpm:**\n```\nBuild: pnpm --filter backend build\nStart: pnpm --filter backend start\n```\n\n**npm workspaces:**\n```\nBuild: npm run build --workspace=packages/backend\nStart: npm run start --workspace=packages/backend\n```\n\n**yarn workspaces:**\n```\nBuild: yarn workspace backend build\nStart: yarn workspace backend start\n```\n\n**bun:**\n```\nBuild: bun run --filter backend build\nStart: bun run --filter backend start\n```\n\n**Turborepo:**\n```\nBuild: turbo run build --filter=backend\nStart: turbo run start --filter=backend\n```\n\n### When to Use\n\n- TypeScript/JavaScript monorepo with workspaces\n- Packages import from sibling packages (`@myapp/shared`)\n- Shared tsconfig.json, eslint config at root\n- Using pnpm, yarn workspaces, npm workspaces, or bun\n- Using Turborepo, Nx, or similar build tools\n\n## Watch Paths\n\nPrevent changes in one package from triggering rebuilds of other services.\n\nSet watch paths for each service to only rebuild when relevant files change:\n\n| Service | Watch Paths |\n|---------|-------------|\n| frontend | `/packages/frontend/**`, `/packages/shared/**` |\n| backend | `/packages/backend/**`, `/packages/shared/**` |\n\nInclude shared packages in watch paths if the service depends on them.\n\n### Pattern Format\n\nUses gitignore-style patterns:\n```\n/packages/backend/**     # All files in backend\n/packages/shared/**      # All files in shared (if depends on it)\n!**/*.md                 # Ignore markdown changes\n```\n\n## Configuration Examples\n\n### Isolated: React + Python API\n\nTwo separate apps, no shared code.\n\n**Frontend service:**\n- Root Directory: `/frontend`\n- No custom commands needed (Railpack auto-detects)\n\n**Backend service:**\n- Root Directory: `/backend`\n- No custom commands needed\n\n### Shared: TypeScript Monorepo with pnpm\n\nFrontend and backend share a `@myapp/shared` package.\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter frontend build`\n- Start Command: `pnpm --filter frontend start`\n- Watch Paths: `/packages/frontend/**`, `/packages/shared/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter backend build`\n- Start Command: `pnpm --filter backend start`\n- Watch Paths: `/packages/backend/**`, `/packages/shared/**`\n\n### Shared: Turborepo\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=frontend`\n- Start Command: `turbo run start --filter=frontend`\n- Watch Paths: `/apps/frontend/**`, `/packages/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=backend`\n- Start Command: `turbo run start --filter=backend`\n- Watch Paths: `/apps/backend/**`, `/packages/**`\n\n## Common Mistakes\n\n### Using Root Directory for Shared Monorepos\n\n**Wrong:**\n```\nRoot Directory: /packages/backend\n```\nThis breaks builds because `@myapp/shared` isn't available.\n\n**Right:**\n```\nRoot Directory: (empty)\nBuild Command: pnpm --filter backend build\nStart Command: pnpm --filter backend start\n```\n\n### Forgetting Watch Paths\n\nWithout watch paths, changing `frontend/` triggers a rebuild of `backend/`.\n\nAlways set watch paths for monorepos to avoid unnecessary builds.\n\n### Missing Shared Packages in Watch Paths\n\nIf `backend` imports from `shared`, include both in watch paths:\n```\n/packages/backend/**\n/packages/shared/**\n```\n\nOtherwise changes to `shared` won't trigger backend rebuilds.\n\n## Detecting Monorepo Type\n\nCheck for these indicators:\n\n**Isolated monorepo:**\n- Separate package.json in each directory\n- No workspace config in root package.json\n- No imports between directories\n\n**Shared monorepo:**\n- Root package.json with `workspaces` field\n- `pnpm-workspace.yaml` exists\n- Packages import from each other (`@myapp/shared`)\n- Shared tsconfig.json at root\n- turbo.json or nx.json at root\n",
        "plugins/railway/skills/database/references/railpack.md": "# Railpack Reference\n\nRailpack is Railway's default builder. Zero-config for most projects.\n\nFull docs: https://railpack.com/llms.txt\n\n## Detection\n\nRailpack analyzes source code to detect language, framework, and build requirements automatically.\n\nSupported: Node, Python, Go, PHP, Java, Ruby, Rust, Elixir, Gleam, Deno, C/C++, static files.\n\n## Static Sites\n\n### Detection Patterns\n\nRailpack serves static files via Caddy when it detects:\n1. `Staticfile` in root (can specify `root: dist`)\n2. `index.html` in root\n3. `public/` directory\n4. `RAILPACK_STATIC_FILE_ROOT` env var set\n\n### Root Directory Priority\n\n1. `RAILPACK_STATIC_FILE_ROOT` env var\n2. `root` in `Staticfile`\n3. `public/` directory\n4. Current directory (if index.html exists)\n\n### Common Patterns\n\nRailpack auto-detects common static build outputs. Only set `RAILPACK_STATIC_FILE_ROOT` for non-standard output directories.\n\n| Framework | Build Output | Config Needed |\n|-----------|--------------|---------------|\n| Plain HTML | root | None (auto-detected) |\n| Vite | dist | None (auto-detected) |\n| Astro (static) | dist | None (auto-detected) |\n| Create React App | build | None (auto-detected) |\n| Angular | dist/<project> | `RAILPACK_STATIC_FILE_ROOT=dist/<project>` (non-standard path) |\n| Custom output | varies | Set if output dir is non-standard |\n\n### Custom Caddyfile\n\nPut a `Caddyfile` in project root to override default serving behavior.\n\n## Node.js\n\n### Detection\n- `package.json` in root\n\n### Version Priority\n1. `RAILPACK_NODE_VERSION` env var\n2. `engines.node` in package.json\n3. `.nvmrc` or `.node-version`\n4. Default: Node 22\n\n### Package Manager Detection\n1. `packageManager` field in package.json (enables Corepack)\n2. Lock file: `pnpm-lock.yaml`, `bun.lockb`, `yarn.lock`\n3. Default: npm\n\n### Build Command\nAuto-detected from package.json `scripts.build`. Override via `buildCommand` in service settings.\n\n### Start Command\nAuto-detected:\n1. `scripts.start` in package.json\n2. `main` field in package.json\n3. `index.js` or `index.ts` in root\n\nOverride via `startCommand` in service settings.\n\n### Framework Detection\n\n| Framework | Detection | Notes |\n|-----------|-----------|-------|\n| Next.js | `next` in dependencies | Caches `.next/cache` |\n| Vite | `vite` in devDependencies | Static or SSR mode |\n| Astro | `astro` in dependencies | Caches `.astro` |\n| Nuxt | `nuxt` in dependencies | Auto start command |\n| Remix | `@remix-run/*` in deps | - |\n\n### Static Site Mode (SPA)\n\nFor frameworks like Vite, CRA, Astro (static), Angular:\n- Railpack builds then serves via Caddy\n- Set `RAILPACK_SPA_OUTPUT_DIR` if output isn't `dist`\n\n## Python\n\n### Detection\n- `requirements.txt`, `pyproject.toml`, `Pipfile`, or `uv.lock`\n\n### Version Priority\n1. `RAILPACK_PYTHON_VERSION` env var\n2. `.python-version` file\n3. `requires-python` in pyproject.toml\n4. Default: Python 3.12\n\n### WSGI/ASGI Auto-Config\n\n| Framework | Start Command |\n|-----------|---------------|\n| Django | `gunicorn <project>.wsgi` |\n| FastAPI | `uvicorn main:app --host 0.0.0.0` |\n| Flask | `gunicorn app:app` |\n\nOverride via `startCommand` in service settings.\n\n## Go\n\n### Detection\n- `go.mod` in root\n\n### Build\nCompiles to binary automatically. For `cmd/` structure, set binary name or use `RAILPACK_GO_BIN`.\n\n## Rust\n\n### Detection\n- `Cargo.toml` in root\n\n### Build\nRelease build by default. Binary auto-detected from Cargo.toml.\n\n## Configuration\n\n### Preferred: Service Settings\n\nUse `environment` skill to set:\n- `buildCommand` - Custom build command\n- `startCommand` - Custom start command\n\nThese are stored in Railway and don't pollute your codebase.\n\n### Environment Variables\n\n| Variable | Purpose |\n|----------|---------|\n| `RAILPACK_STATIC_FILE_ROOT` | Static file serving directory |\n| `RAILPACK_SPA_OUTPUT_DIR` | SPA build output (defaults to `dist`) |\n| `RAILPACK_NODE_VERSION` | Node.js version |\n| `RAILPACK_PYTHON_VERSION` | Python version |\n| `RAILPACK_GO_BIN` | Go binary name |\n| `RAILPACK_PACKAGES` | Additional Mise packages (`pkg@version`) |\n| `RAILPACK_BUILD_APT_PACKAGES` | System packages for build |\n| `RAILPACK_DEPLOY_APT_PACKAGES` | System packages for runtime |\n\n### railpack.json\n\nAdvanced config for custom build steps:\n\n```json\n{\n  \"$schema\": \"https://schema.railpack.com\",\n  \"packages\": {\n    \"ffmpeg\": \"latest\"\n  },\n  \"deploy\": {\n    \"aptPackages\": [\"libmagic1\"]\n  }\n}\n```\n\n### railway.toml\n\nAlternative config format:\n\n```toml\n[build]\nbuilder = \"RAILPACK\"\nbuildCommand = \"npm run build\"\n\n[deploy]\nstartCommand = \"npm start\"\n```\n\n## Minimal Project Scaffolding\n\nWhen no code exists, suggest these patterns:\n\n### Static HTML\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>My Site</title>\n</head>\n<body>\n  <h1>Hello Railway</h1>\n</body>\n</html>\n```\n\n### Vite React\n```bash\nnpm create vite@latest . -- --template react\n```\n\n### Astro\n```bash\nnpm create astro@latest\n```\n\n### Python FastAPI\n```python\n# main.py\nfrom fastapi import FastAPI\napp = FastAPI()\n\n@app.get(\"/\")\ndef root():\n    return {\"message\": \"Hello Railway\"}\n```\n\n```txt\n# requirements.txt\nfastapi\nuvicorn\n```\n\n### Go HTTP Server\n```go\n// main.go\npackage main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"8080\"\n    }\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        fmt.Fprintf(w, \"Hello Railway\")\n    })\n    http.ListenAndServe(\":\"+port, nil)\n}\n```\n\n## Troubleshooting\n\n| Issue | Solution |\n|-------|----------|\n| Static site 404s | Check output dir - set `RAILPACK_STATIC_FILE_ROOT` if non-standard |\n| Wrong build command | Use `environment` skill to set `buildCommand` |\n| Wrong start command | Use `environment` skill to set `startCommand` |\n| Missing system package | Add to `RAILPACK_BUILD_APT_PACKAGES` or `RAILPACK_DEPLOY_APT_PACKAGES` |\n| Wrong Node version | Set `RAILPACK_NODE_VERSION` or add `.nvmrc` |\n| Wrong Python version | Set `RAILPACK_PYTHON_VERSION` or add `.python-version` |\n",
        "plugins/railway/skills/database/references/variables.md": "# Variables Reference\n\nVariables in Railway support references to other services, shared variables, and Railway-provided values.\n\n## Template Syntax\n\n```\n${{NAMESPACE.VAR}}\n```\n\n| Namespace | Description |\n|-----------|-------------|\n| `shared` | Shared variables (project-wide) |\n| `<serviceName>` | Variables from another service (case-sensitive) |\n\n## Examples\n\n**Reference shared variable:**\n```json\n{ \"value\": \"${{shared.DOMAIN}}\" }\n```\n\n**Reference another service's variable:**\n```json\n{ \"value\": \"${{api.API_KEY}}\" }\n```\n\n**Combine with text:**\n```json\n{ \"value\": \"https://${{shared.DOMAIN}}/api\" }\n```\n\n## Railway-Provided Variables\n\nRailway injects these into every service automatically.\n\n### Networking\n| Variable | Description | Example | Availability |\n|----------|-------------|---------|--------------|\n| `RAILWAY_PUBLIC_DOMAIN` | Public domain | `myapp.up.railway.app` | Only if service has a domain |\n| `RAILWAY_PRIVATE_DOMAIN` | Private DNS (internal only) | `myapp.railway.internal` | Always |\n| `RAILWAY_TCP_PROXY_DOMAIN` | TCP proxy domain | `roundhouse.proxy.rlwy.net` | Only if TCP proxy enabled |\n| `RAILWAY_TCP_PROXY_PORT` | TCP proxy port | `11105` | Only if TCP proxy enabled |\n\n**Note:** `RAILWAY_PUBLIC_DOMAIN` is only available if the service has a domain configured.\nCheck the service's environment config to verify a domain exists before referencing it.\n\n### Context\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_PROJECT_ID` | Project ID |\n| `RAILWAY_PROJECT_NAME` | Project name |\n| `RAILWAY_ENVIRONMENT_ID` | Environment ID |\n| `RAILWAY_ENVIRONMENT_NAME` | Environment name |\n| `RAILWAY_SERVICE_ID` | Service ID |\n| `RAILWAY_SERVICE_NAME` | Service name |\n| `RAILWAY_DEPLOYMENT_ID` | Deployment ID |\n| `RAILWAY_REPLICA_ID` | Replica ID |\n| `RAILWAY_REPLICA_REGION` | Region (e.g., `us-west2`) |\n\n### Volume (if attached)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_VOLUME_NAME` | Volume name |\n| `RAILWAY_VOLUME_MOUNT_PATH` | Mount path |\n\n### Git (if deployed from GitHub)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_GIT_COMMIT_SHA` | Commit SHA |\n| `RAILWAY_GIT_BRANCH` | Branch name |\n| `RAILWAY_GIT_REPO_NAME` | Repository name |\n| `RAILWAY_GIT_REPO_OWNER` | Repository owner |\n| `RAILWAY_GIT_AUTHOR` | Commit author |\n| `RAILWAY_GIT_COMMIT_MESSAGE` | Commit message |\n\n## Wiring Services Together\n\n### Frontend → Backend (public network)\nUse when: Browser makes requests to API (browser can't access private network)\n\n```json\n{\n  \"services\": {\n    \"<frontendId>\": {\n      \"variables\": {\n        \"API_URL\": { \"value\": \"https://${{backend.RAILWAY_PUBLIC_DOMAIN}}\" }\n      }\n    }\n  }\n}\n```\n\n### Service → Database (private network)\nUse when: Backend connects to database (faster, no egress cost, more secure)\n\nRailway databases auto-generate connection URL variables. Use the private versions:\n\n| Database | Variable Reference |\n|----------|-------------------|\n| Postgres | `${{Postgres.DATABASE_URL}}` |\n| MySQL | `${{MySQL.DATABASE_URL}}` |\n| Redis | `${{Redis.REDIS_URL}}` |\n| Mongo | `${{Mongo.MONGO_URL}}` |\n\n**Postgres/MySQL example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"DATABASE_URL\": { \"value\": \"${{Postgres.DATABASE_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Redis example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"REDIS_URL\": { \"value\": \"${{Redis.REDIS_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Mongo example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"MONGO_URL\": { \"value\": \"${{Mongo.MONGO_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Note:** Service names are case-sensitive. Match the exact name from your project (e.g., \"Postgres\", \"Redis\").\n\n### Service → Service (private network)\nUse when: Microservices communicate internally\n\n```json\n{\n  \"services\": {\n    \"<workerServiceId>\": {\n      \"variables\": {\n        \"API_INTERNAL_URL\": { \"value\": \"http://${{api.RAILWAY_PRIVATE_DOMAIN}}:${{api.PORT}}\" }\n      }\n    }\n  }\n}\n```\n\n## When to Use Public vs Private\n\n| Use Case | Domain | Reason |\n|----------|--------|--------|\n| Browser → API | Public | Browser can't access private network |\n| Service → Service | Private | Faster, no egress, more secure |\n| Service → Database | Private | Databases should never be public |\n| External webhook → Service | Public | External services need public access |\n| Cron job → API | Private | Internal communication |\n",
        "plugins/railway/skills/deploy/SKILL.md": "---\nname: deploy\ndescription: This skill should be used when the user wants to push code to Railway, says \"railway up\", \"deploy\", \"deploy to railway\", \"ship\", or \"push\". For initial setup or creating services, use new skill. For Docker images, use environment skill.\nallowed-tools: Bash(railway:*)\n---\n\n# Deploy\n\nDeploy code from the current directory to Railway using `railway up`.\n\n## When to Use\n\n- User asks to \"deploy\", \"ship\", \"push code\"\n- User says \"railway up\" or \"deploy to Railway\"\n- User wants to deploy local code changes\n- User says \"deploy and fix any issues\" (use --ci mode)\n\n## Modes\n\n### Detach Mode (default)\nStarts deploy and returns immediately. Use for most deploys.\n\n```bash\nrailway up --detach\n```\n\n### CI Mode\nStreams build logs until complete. Use when user wants to watch the build or needs to debug issues.\n\n```bash\nrailway up --ci\n```\n\n**When to use CI mode:**\n- User says \"deploy and watch\", \"deploy and fix issues\"\n- User is debugging build failures\n- User wants to see build output\n\n## Deploy Specific Service\n\nDefault is linked service. To deploy to a different service:\n\n```bash\nrailway up --detach --service backend\n```\n\n## Deploy to Unlinked Project\n\nDeploy to a project without linking first:\n\n```bash\nrailway up --project <project-id> --environment production --detach\n```\n\nRequires both `--project` and `--environment` flags.\n\n## CLI Options\n\n| Flag | Description |\n|------|-------------|\n| `-d, --detach` | Don't attach to logs (default) |\n| `-c, --ci` | Stream build logs, exit when done |\n| `-s, --service <NAME>` | Target service (defaults to linked) |\n| `-e, --environment <NAME>` | Target environment (defaults to linked) |\n| `-p, --project <ID>` | Target project (requires --environment) |\n| `[PATH]` | Path to deploy (defaults to current directory) |\n\n## Directory Linking\n\nRailway CLI walks UP the directory tree to find a linked project. If you're in a subdirectory of a linked project, you don't need to relink.\n\nFor subdirectory deployments, prefer setting `rootDirectory` via the environment skill, then deploy normally with `railway up`.\n\n## After Deploy\n\n### Detach mode\n```\nDeploying to <service>...\n```\nUse `deployment` skill to check build status (with `--lines` flag).\n\n### CI mode\nBuild logs stream inline. If build fails, the error will be in the output.\n\n**Do NOT run `railway logs --build` after CI mode** - the logs already streamed. If you need\nmore context, use `deployment` skill with `--lines` flag (never stream).\n\n## Composability\n\n- **Check status after deploy**: Use `service` skill\n- **View logs**: Use `deployment` skill\n- **Fix config issues**: Use `environment` skill\n- **Redeploy after config fix**: Use `environment` skill\n\n## Error Handling\n\n### No Project Linked\n```\nNo Railway project linked. Run `railway link` first.\n```\n\n### No Service Linked\n```\nNo service linked. Use --service flag or run `railway service` to select one.\n```\n\n### Build Failure (CI mode)\nThe build logs already streamed - analyze them directly from the `railway up --ci` output.\nDo NOT run `railway logs` after CI mode (it streams forever without `--lines`).\n\nCommon issues:\n- Missing dependencies → check package.json/requirements.txt\n- Build command wrong → use environment skill to fix\n- Dockerfile issues → check dockerfile path\n",
        "plugins/railway/skills/deploy/references/environment-config.md": "# Environment Config Reference\n\nThe `EnvironmentConfig` object is used to configure services, volumes, and shared variables in Railway.\n\n## Structure\n\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"source\": { ... },\n      \"build\": { ... },\n      \"deploy\": { ... },\n      \"variables\": { ... },\n      \"networking\": { ... }\n    }\n  },\n  \"sharedVariables\": { ... },\n  \"volumes\": { ... },\n  \"buckets\": { ... }\n}\n```\n\nOnly include fields being changed. The patch is merged with existing config.\n\n## Service Config\n\n### Source\n| Field | Type | Description |\n|-------|------|-------------|\n| `image` | string | Docker image (e.g., `nginx:latest`) |\n| `repo` | string | Git repository URL |\n| `branch` | string | Git branch to deploy |\n| `commitSha` | string | Specific commit SHA |\n| `rootDirectory` | string | Root directory (monorepos) |\n| `checkSuites` | boolean | Wait for GitHub check suites |\n| `autoUpdates.type` | disabled \\| patch \\| minor | Auto-update policy for Docker images |\n\n### Build\n| Field | Type | Description |\n|-------|------|-------------|\n| `builder` | NIXPACKS \\| DOCKERFILE \\| RAILPACK | Build system |\n| `buildCommand` | string | Command for Nixpacks builds |\n| `dockerfilePath` | string | Path to Dockerfile |\n| `watchPatterns` | string[] | Patterns to trigger deploys |\n| `nixpacksConfigPath` | string | Path to nixpacks config |\n\n### Deploy\n| Field | Type | Description |\n|-------|------|-------------|\n| `startCommand` | string | Container start command |\n| `multiRegionConfig` | object | Region → replica config. See [Multi-Region Config](#multi-region-config). |\n| `healthcheckPath` | string | Health check endpoint |\n| `healthcheckTimeout` | number | Seconds to wait for health |\n| `restartPolicyType` | ON_FAILURE \\| ALWAYS \\| NEVER | Restart behavior |\n| `restartPolicyMaxRetries` | number | Max restart attempts |\n| `cronSchedule` | string | Cron schedule for cron jobs |\n| `sleepApplication` | boolean | Sleep when inactive |\n\n### Variables\n| Field | Type | Description |\n|-------|------|-------------|\n| `value` | string | Variable value |\n| `isOptional` | boolean | Allow empty value |\n\nSet to `null` to delete a variable.\n\nFor variable references, see [variables.md](variables.md).\n\n### Lifecycle\n| Field | Type | Description |\n|-------|------|-------------|\n| `isDeleted` | boolean | Mark for deletion (requires ADMIN) |\n| `isCreated` | boolean | Mark as newly created |\n\n## Multi-Region Config\n\nControls replica count per region. Structure: region name → `{ numReplicas }` or `null` to remove.\n\n```json\n{\n  \"multiRegionConfig\": {\n    \"us-west2\": { \"numReplicas\": 3 },\n    \"europe-west4-drams3a\": { \"numReplicas\": 2 }\n  }\n}\n```\n\n### Available Regions\n\n| Name | Location | Aliases |\n|------|----------|---------|\n| `us-west2` | US West (California) | \"us west\", \"california\" |\n| `us-east4-eqdc4a` | US East (Virginia) | \"us east\", \"virginia\" |\n| `europe-west4-drams3a` | EU West (Amsterdam) | \"europe\", \"eu\", \"amsterdam\" |\n| `asia-southeast1-eqsg3a` | Southeast Asia (Singapore) | \"asia\", \"singapore\" |\n\n### Interpreting User Requests\n\n- \"add 3 replicas to europe\" → `{ \"europe-west4-drams3a\": { \"numReplicas\": 3 } }`\n- \"add a replica to all regions\" → set `numReplicas: 1` for all 4 regions\n- \"remove from asia\" → `{ \"asia-southeast1-eqsg3a\": null }`\n- \"increase replicas to 5\" (no region specified) → query current config first, update existing region(s)\n\n**Important:** When user doesn't specify a region, query the current `multiRegionConfig` and modify the existing region(s). Don't assume a default region.\n\n## Common Operations\n\n### Set Build Command\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"buildCommand\": \"npm run build\" } } } }\n```\n\n### Set Start Command\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"startCommand\": \"node server.js\" } } } }\n```\n\n### Set Replicas\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"multiRegionConfig\": { \"us-west2\": { \"numReplicas\": 3 } } } } } }\n```\n\n### Add Variables\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"API_KEY\": { \"value\": \"xxx\" } } } } }\n```\n\n### Delete Variable\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"OLD_VAR\": null } } } }\n```\n\n### Add Shared Variable\n```json\n{ \"sharedVariables\": { \"DATABASE_URL\": { \"value\": \"postgres://...\" } } }\n```\n\n### Change Docker Image\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"image\": \"nginx:latest\" } } } }\n```\n\n### Connect GitHub Repo\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"repo\": \"owner/repo\", \"branch\": \"main\" } } } }\n```\n\n### Change Git Branch\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"branch\": \"develop\" } } } }\n```\n\n### Set Health Check\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"healthcheckPath\": \"/health\", \"healthcheckTimeout\": 30 } } } }\n```\n\n### Change Builder\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"builder\": \"DOCKERFILE\", \"dockerfilePath\": \"./Dockerfile\" } } } }\n```\n\n### Delete Service\n```json\n{ \"services\": { \"<serviceId>\": { \"isDeleted\": true } } }\n```\n\n### Delete Volume\n```json\n{ \"volumes\": { \"<volumeId>\": { \"isDeleted\": true } } }\n```\n\n### New Service Instance\n```json\n{ \"services\": { \"<serviceId>\": { \"isCreated\": true, \"source\": { \"image\": \"nginx\" } } } }\n```\n\n**Note:** `isCreated: true` is required for new service instances.\n",
        "plugins/railway/skills/deploy/references/monorepo.md": "# Monorepo Reference\n\nRailway supports two types of monorepo deployments with different configuration approaches.\n\n## Key Decision: Root Directory vs Custom Commands\n\n| Approach | When to Use | What Happens |\n|----------|-------------|--------------|\n| **Root Directory** | Isolated apps (no shared code) | Only that directory's code is available |\n| **Custom Commands** | Shared monorepos (TypeScript, workspaces) | Full repo available, filter at build/start |\n\n**Critical:** Setting root directory means code outside that directory is NOT available during build. For monorepos with shared packages, use custom commands instead.\n\n## Isolated Monorepo\n\nApps are completely independent - no shared code between directories.\n\n```\n├── frontend/        # React app (standalone)\n│   ├── package.json\n│   └── src/\n└── backend/         # Python API (standalone)\n    ├── requirements.txt\n    └── main.py\n```\n\n### Configuration\n\nSet **Root Directory** for each service:\n- Frontend service: `/frontend`\n- Backend service: `/backend`\n\nEach service only sees its own directory's code.\n\n### When to Use\n\n- Frontend and backend in different languages\n- No shared packages or dependencies\n- Each app has its own package.json/requirements.txt\n- Apps don't import from sibling directories\n\n## Shared Monorepo\n\nApps share code from common packages or the root.\n\n```\n├── package.json           # Root workspace config\n├── packages/\n│   ├── frontend/\n│   │   ├── package.json\n│   │   └── src/\n│   ├── backend/\n│   │   ├── package.json\n│   │   └── src/\n│   └── shared/            # Shared utilities\n│       ├── package.json\n│       └── src/\n└── tsconfig.json          # Shared TS config\n```\n\n### Configuration\n\nDo NOT set root directory. Instead, use custom build and start commands:\n\n**pnpm:**\n```\nBuild: pnpm --filter backend build\nStart: pnpm --filter backend start\n```\n\n**npm workspaces:**\n```\nBuild: npm run build --workspace=packages/backend\nStart: npm run start --workspace=packages/backend\n```\n\n**yarn workspaces:**\n```\nBuild: yarn workspace backend build\nStart: yarn workspace backend start\n```\n\n**bun:**\n```\nBuild: bun run --filter backend build\nStart: bun run --filter backend start\n```\n\n**Turborepo:**\n```\nBuild: turbo run build --filter=backend\nStart: turbo run start --filter=backend\n```\n\n### When to Use\n\n- TypeScript/JavaScript monorepo with workspaces\n- Packages import from sibling packages (`@myapp/shared`)\n- Shared tsconfig.json, eslint config at root\n- Using pnpm, yarn workspaces, npm workspaces, or bun\n- Using Turborepo, Nx, or similar build tools\n\n## Watch Paths\n\nPrevent changes in one package from triggering rebuilds of other services.\n\nSet watch paths for each service to only rebuild when relevant files change:\n\n| Service | Watch Paths |\n|---------|-------------|\n| frontend | `/packages/frontend/**`, `/packages/shared/**` |\n| backend | `/packages/backend/**`, `/packages/shared/**` |\n\nInclude shared packages in watch paths if the service depends on them.\n\n### Pattern Format\n\nUses gitignore-style patterns:\n```\n/packages/backend/**     # All files in backend\n/packages/shared/**      # All files in shared (if depends on it)\n!**/*.md                 # Ignore markdown changes\n```\n\n## Configuration Examples\n\n### Isolated: React + Python API\n\nTwo separate apps, no shared code.\n\n**Frontend service:**\n- Root Directory: `/frontend`\n- No custom commands needed (Railpack auto-detects)\n\n**Backend service:**\n- Root Directory: `/backend`\n- No custom commands needed\n\n### Shared: TypeScript Monorepo with pnpm\n\nFrontend and backend share a `@myapp/shared` package.\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter frontend build`\n- Start Command: `pnpm --filter frontend start`\n- Watch Paths: `/packages/frontend/**`, `/packages/shared/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter backend build`\n- Start Command: `pnpm --filter backend start`\n- Watch Paths: `/packages/backend/**`, `/packages/shared/**`\n\n### Shared: Turborepo\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=frontend`\n- Start Command: `turbo run start --filter=frontend`\n- Watch Paths: `/apps/frontend/**`, `/packages/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=backend`\n- Start Command: `turbo run start --filter=backend`\n- Watch Paths: `/apps/backend/**`, `/packages/**`\n\n## Common Mistakes\n\n### Using Root Directory for Shared Monorepos\n\n**Wrong:**\n```\nRoot Directory: /packages/backend\n```\nThis breaks builds because `@myapp/shared` isn't available.\n\n**Right:**\n```\nRoot Directory: (empty)\nBuild Command: pnpm --filter backend build\nStart Command: pnpm --filter backend start\n```\n\n### Forgetting Watch Paths\n\nWithout watch paths, changing `frontend/` triggers a rebuild of `backend/`.\n\nAlways set watch paths for monorepos to avoid unnecessary builds.\n\n### Missing Shared Packages in Watch Paths\n\nIf `backend` imports from `shared`, include both in watch paths:\n```\n/packages/backend/**\n/packages/shared/**\n```\n\nOtherwise changes to `shared` won't trigger backend rebuilds.\n\n## Detecting Monorepo Type\n\nCheck for these indicators:\n\n**Isolated monorepo:**\n- Separate package.json in each directory\n- No workspace config in root package.json\n- No imports between directories\n\n**Shared monorepo:**\n- Root package.json with `workspaces` field\n- `pnpm-workspace.yaml` exists\n- Packages import from each other (`@myapp/shared`)\n- Shared tsconfig.json at root\n- turbo.json or nx.json at root\n",
        "plugins/railway/skills/deploy/references/railpack.md": "# Railpack Reference\n\nRailpack is Railway's default builder. Zero-config for most projects.\n\nFull docs: https://railpack.com/llms.txt\n\n## Detection\n\nRailpack analyzes source code to detect language, framework, and build requirements automatically.\n\nSupported: Node, Python, Go, PHP, Java, Ruby, Rust, Elixir, Gleam, Deno, C/C++, static files.\n\n## Static Sites\n\n### Detection Patterns\n\nRailpack serves static files via Caddy when it detects:\n1. `Staticfile` in root (can specify `root: dist`)\n2. `index.html` in root\n3. `public/` directory\n4. `RAILPACK_STATIC_FILE_ROOT` env var set\n\n### Root Directory Priority\n\n1. `RAILPACK_STATIC_FILE_ROOT` env var\n2. `root` in `Staticfile`\n3. `public/` directory\n4. Current directory (if index.html exists)\n\n### Common Patterns\n\nRailpack auto-detects common static build outputs. Only set `RAILPACK_STATIC_FILE_ROOT` for non-standard output directories.\n\n| Framework | Build Output | Config Needed |\n|-----------|--------------|---------------|\n| Plain HTML | root | None (auto-detected) |\n| Vite | dist | None (auto-detected) |\n| Astro (static) | dist | None (auto-detected) |\n| Create React App | build | None (auto-detected) |\n| Angular | dist/<project> | `RAILPACK_STATIC_FILE_ROOT=dist/<project>` (non-standard path) |\n| Custom output | varies | Set if output dir is non-standard |\n\n### Custom Caddyfile\n\nPut a `Caddyfile` in project root to override default serving behavior.\n\n## Node.js\n\n### Detection\n- `package.json` in root\n\n### Version Priority\n1. `RAILPACK_NODE_VERSION` env var\n2. `engines.node` in package.json\n3. `.nvmrc` or `.node-version`\n4. Default: Node 22\n\n### Package Manager Detection\n1. `packageManager` field in package.json (enables Corepack)\n2. Lock file: `pnpm-lock.yaml`, `bun.lockb`, `yarn.lock`\n3. Default: npm\n\n### Build Command\nAuto-detected from package.json `scripts.build`. Override via `buildCommand` in service settings.\n\n### Start Command\nAuto-detected:\n1. `scripts.start` in package.json\n2. `main` field in package.json\n3. `index.js` or `index.ts` in root\n\nOverride via `startCommand` in service settings.\n\n### Framework Detection\n\n| Framework | Detection | Notes |\n|-----------|-----------|-------|\n| Next.js | `next` in dependencies | Caches `.next/cache` |\n| Vite | `vite` in devDependencies | Static or SSR mode |\n| Astro | `astro` in dependencies | Caches `.astro` |\n| Nuxt | `nuxt` in dependencies | Auto start command |\n| Remix | `@remix-run/*` in deps | - |\n\n### Static Site Mode (SPA)\n\nFor frameworks like Vite, CRA, Astro (static), Angular:\n- Railpack builds then serves via Caddy\n- Set `RAILPACK_SPA_OUTPUT_DIR` if output isn't `dist`\n\n## Python\n\n### Detection\n- `requirements.txt`, `pyproject.toml`, `Pipfile`, or `uv.lock`\n\n### Version Priority\n1. `RAILPACK_PYTHON_VERSION` env var\n2. `.python-version` file\n3. `requires-python` in pyproject.toml\n4. Default: Python 3.12\n\n### WSGI/ASGI Auto-Config\n\n| Framework | Start Command |\n|-----------|---------------|\n| Django | `gunicorn <project>.wsgi` |\n| FastAPI | `uvicorn main:app --host 0.0.0.0` |\n| Flask | `gunicorn app:app` |\n\nOverride via `startCommand` in service settings.\n\n## Go\n\n### Detection\n- `go.mod` in root\n\n### Build\nCompiles to binary automatically. For `cmd/` structure, set binary name or use `RAILPACK_GO_BIN`.\n\n## Rust\n\n### Detection\n- `Cargo.toml` in root\n\n### Build\nRelease build by default. Binary auto-detected from Cargo.toml.\n\n## Configuration\n\n### Preferred: Service Settings\n\nUse `environment` skill to set:\n- `buildCommand` - Custom build command\n- `startCommand` - Custom start command\n\nThese are stored in Railway and don't pollute your codebase.\n\n### Environment Variables\n\n| Variable | Purpose |\n|----------|---------|\n| `RAILPACK_STATIC_FILE_ROOT` | Static file serving directory |\n| `RAILPACK_SPA_OUTPUT_DIR` | SPA build output (defaults to `dist`) |\n| `RAILPACK_NODE_VERSION` | Node.js version |\n| `RAILPACK_PYTHON_VERSION` | Python version |\n| `RAILPACK_GO_BIN` | Go binary name |\n| `RAILPACK_PACKAGES` | Additional Mise packages (`pkg@version`) |\n| `RAILPACK_BUILD_APT_PACKAGES` | System packages for build |\n| `RAILPACK_DEPLOY_APT_PACKAGES` | System packages for runtime |\n\n### railpack.json\n\nAdvanced config for custom build steps:\n\n```json\n{\n  \"$schema\": \"https://schema.railpack.com\",\n  \"packages\": {\n    \"ffmpeg\": \"latest\"\n  },\n  \"deploy\": {\n    \"aptPackages\": [\"libmagic1\"]\n  }\n}\n```\n\n### railway.toml\n\nAlternative config format:\n\n```toml\n[build]\nbuilder = \"RAILPACK\"\nbuildCommand = \"npm run build\"\n\n[deploy]\nstartCommand = \"npm start\"\n```\n\n## Minimal Project Scaffolding\n\nWhen no code exists, suggest these patterns:\n\n### Static HTML\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>My Site</title>\n</head>\n<body>\n  <h1>Hello Railway</h1>\n</body>\n</html>\n```\n\n### Vite React\n```bash\nnpm create vite@latest . -- --template react\n```\n\n### Astro\n```bash\nnpm create astro@latest\n```\n\n### Python FastAPI\n```python\n# main.py\nfrom fastapi import FastAPI\napp = FastAPI()\n\n@app.get(\"/\")\ndef root():\n    return {\"message\": \"Hello Railway\"}\n```\n\n```txt\n# requirements.txt\nfastapi\nuvicorn\n```\n\n### Go HTTP Server\n```go\n// main.go\npackage main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"8080\"\n    }\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        fmt.Fprintf(w, \"Hello Railway\")\n    })\n    http.ListenAndServe(\":\"+port, nil)\n}\n```\n\n## Troubleshooting\n\n| Issue | Solution |\n|-------|----------|\n| Static site 404s | Check output dir - set `RAILPACK_STATIC_FILE_ROOT` if non-standard |\n| Wrong build command | Use `environment` skill to set `buildCommand` |\n| Wrong start command | Use `environment` skill to set `startCommand` |\n| Missing system package | Add to `RAILPACK_BUILD_APT_PACKAGES` or `RAILPACK_DEPLOY_APT_PACKAGES` |\n| Wrong Node version | Set `RAILPACK_NODE_VERSION` or add `.nvmrc` |\n| Wrong Python version | Set `RAILPACK_PYTHON_VERSION` or add `.python-version` |\n",
        "plugins/railway/skills/deploy/references/variables.md": "# Variables Reference\n\nVariables in Railway support references to other services, shared variables, and Railway-provided values.\n\n## Template Syntax\n\n```\n${{NAMESPACE.VAR}}\n```\n\n| Namespace | Description |\n|-----------|-------------|\n| `shared` | Shared variables (project-wide) |\n| `<serviceName>` | Variables from another service (case-sensitive) |\n\n## Examples\n\n**Reference shared variable:**\n```json\n{ \"value\": \"${{shared.DOMAIN}}\" }\n```\n\n**Reference another service's variable:**\n```json\n{ \"value\": \"${{api.API_KEY}}\" }\n```\n\n**Combine with text:**\n```json\n{ \"value\": \"https://${{shared.DOMAIN}}/api\" }\n```\n\n## Railway-Provided Variables\n\nRailway injects these into every service automatically.\n\n### Networking\n| Variable | Description | Example | Availability |\n|----------|-------------|---------|--------------|\n| `RAILWAY_PUBLIC_DOMAIN` | Public domain | `myapp.up.railway.app` | Only if service has a domain |\n| `RAILWAY_PRIVATE_DOMAIN` | Private DNS (internal only) | `myapp.railway.internal` | Always |\n| `RAILWAY_TCP_PROXY_DOMAIN` | TCP proxy domain | `roundhouse.proxy.rlwy.net` | Only if TCP proxy enabled |\n| `RAILWAY_TCP_PROXY_PORT` | TCP proxy port | `11105` | Only if TCP proxy enabled |\n\n**Note:** `RAILWAY_PUBLIC_DOMAIN` is only available if the service has a domain configured.\nCheck the service's environment config to verify a domain exists before referencing it.\n\n### Context\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_PROJECT_ID` | Project ID |\n| `RAILWAY_PROJECT_NAME` | Project name |\n| `RAILWAY_ENVIRONMENT_ID` | Environment ID |\n| `RAILWAY_ENVIRONMENT_NAME` | Environment name |\n| `RAILWAY_SERVICE_ID` | Service ID |\n| `RAILWAY_SERVICE_NAME` | Service name |\n| `RAILWAY_DEPLOYMENT_ID` | Deployment ID |\n| `RAILWAY_REPLICA_ID` | Replica ID |\n| `RAILWAY_REPLICA_REGION` | Region (e.g., `us-west2`) |\n\n### Volume (if attached)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_VOLUME_NAME` | Volume name |\n| `RAILWAY_VOLUME_MOUNT_PATH` | Mount path |\n\n### Git (if deployed from GitHub)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_GIT_COMMIT_SHA` | Commit SHA |\n| `RAILWAY_GIT_BRANCH` | Branch name |\n| `RAILWAY_GIT_REPO_NAME` | Repository name |\n| `RAILWAY_GIT_REPO_OWNER` | Repository owner |\n| `RAILWAY_GIT_AUTHOR` | Commit author |\n| `RAILWAY_GIT_COMMIT_MESSAGE` | Commit message |\n\n## Wiring Services Together\n\n### Frontend → Backend (public network)\nUse when: Browser makes requests to API (browser can't access private network)\n\n```json\n{\n  \"services\": {\n    \"<frontendId>\": {\n      \"variables\": {\n        \"API_URL\": { \"value\": \"https://${{backend.RAILWAY_PUBLIC_DOMAIN}}\" }\n      }\n    }\n  }\n}\n```\n\n### Service → Database (private network)\nUse when: Backend connects to database (faster, no egress cost, more secure)\n\nRailway databases auto-generate connection URL variables. Use the private versions:\n\n| Database | Variable Reference |\n|----------|-------------------|\n| Postgres | `${{Postgres.DATABASE_URL}}` |\n| MySQL | `${{MySQL.DATABASE_URL}}` |\n| Redis | `${{Redis.REDIS_URL}}` |\n| Mongo | `${{Mongo.MONGO_URL}}` |\n\n**Postgres/MySQL example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"DATABASE_URL\": { \"value\": \"${{Postgres.DATABASE_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Redis example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"REDIS_URL\": { \"value\": \"${{Redis.REDIS_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Mongo example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"MONGO_URL\": { \"value\": \"${{Mongo.MONGO_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Note:** Service names are case-sensitive. Match the exact name from your project (e.g., \"Postgres\", \"Redis\").\n\n### Service → Service (private network)\nUse when: Microservices communicate internally\n\n```json\n{\n  \"services\": {\n    \"<workerServiceId>\": {\n      \"variables\": {\n        \"API_INTERNAL_URL\": { \"value\": \"http://${{api.RAILWAY_PRIVATE_DOMAIN}}:${{api.PORT}}\" }\n      }\n    }\n  }\n}\n```\n\n## When to Use Public vs Private\n\n| Use Case | Domain | Reason |\n|----------|--------|--------|\n| Browser → API | Public | Browser can't access private network |\n| Service → Service | Private | Faster, no egress, more secure |\n| Service → Database | Private | Databases should never be public |\n| External webhook → Service | Public | External services need public access |\n| Cron job → API | Private | Internal communication |\n",
        "plugins/railway/skills/deployment/SKILL.md": "---\nname: deployment\ndescription: This skill should be used when the user wants to manage Railway deployments, view logs, or debug issues. Covers deployment lifecycle (remove, stop, redeploy, restart), deployment visibility (list, status, history), and troubleshooting (logs, errors, failures, crashes, why deploy failed). NOT for deleting services - use environment skill with isDeleted for that.\nallowed-tools: Bash(railway:*)\n---\n\n# Deployment Management\n\nManage existing Railway deployments: list, view logs, redeploy, or remove.\n\n**Important:** \"Remove deployment\" (`railway down`) stops the current deployment but keeps the service. To delete a service entirely, use the `environment` skill with `isDeleted: true`.\n\n## When to Use\n\n- User says \"remove deploy\", \"take down service\", \"stop deployment\", \"railway down\"\n- User wants to \"redeploy\", \"restart the service\", \"restart deployment\"\n- User asks to \"list deployments\", \"show deployment history\", \"deployment status\"\n- User asks to \"see logs\", \"show logs\", \"check errors\", \"debug issues\"\n\n## List Deployments\n\n```bash\nrailway deployment list --limit 10 --json\n```\n\nShows deployment IDs, statuses, and metadata. Use to find specific deployment IDs for logs or debugging.\n\n### Specify Service\n\n```bash\nrailway deployment list --service backend --limit 10 --json\n```\n\n## View Logs\n\n### Deploy Logs\n\n```bash\nrailway logs --lines 100 --json\n```\n\nIn non-interactive mode, streaming is auto-disabled and CLI fetches logs then exits.\n\n### Build Logs\n\n```bash\nrailway logs --build --lines 100 --json\n```\n\nFor debugging build failures or viewing build output.\n\n### Logs for Failed/In-Progress Deployments\n\nBy default `railway logs` shows the last successful deployment. Use `--latest` for current:\n\n```bash\nrailway logs --latest --lines 100 --json\n```\n\n### Filter Logs\n\n```bash\n# Errors only\nrailway logs --lines 50 --filter \"@level:error\" --json\n\n# Text search\nrailway logs --lines 50 --filter \"connection refused\" --json\n\n# Combined\nrailway logs --lines 50 --filter \"@level:error AND timeout\" --json\n```\n\n### Time-Based Filtering\n\n```bash\n# Logs from last hour\nrailway logs --since 1h --lines 100 --json\n\n# Logs between 30 and 10 minutes ago\nrailway logs --since 30m --until 10m --lines 100 --json\n\n# Logs from specific timestamp\nrailway logs --since 2024-01-15T10:00:00Z --lines 100 --json\n```\n\nFormats: relative (`30s`, `5m`, `2h`, `1d`, `1w`) or ISO 8601 timestamps.\n\n### Logs from Specific Deployment\n\nDeploy logs:\n```bash\nrailway logs <deployment-id> --lines 100 --json\n```\n\nBuild logs:\n```bash\nrailway logs --build <deployment-id> --lines 100 --json\n```\n\nGet deployment ID from `railway deployment list`.\n\n**Note:** The deployment ID is a positional argument, NOT `--deployment <id>`. The `--deployment` flag is a boolean that selects deploy logs (vs `--build` for build logs).\n\n## Redeploy\n\nRedeploy the most recent deployment:\n\n```bash\nrailway redeploy --service <name> -y\n```\n\nThe `-y` flag skips confirmation. Useful when:\n- Config changed via environment skill\n- Need to restart without new code\n- Previous deploy succeeded but service misbehaving\n\n### Restart Container Only\n\nRestart without rebuilding (picks up external resource changes):\n\n```bash\nrailway restart --service <name> -y\n```\n\nUse when external resources (S3 files, config maps) changed but code didn't.\n\n## Remove Deployment\n\nTakes down the current deployment. The service remains but has no running deployment.\n\n```bash\n# Remove deployment for linked service\nrailway down -y\n\n# Remove deployment for specific service\nrailway down --service web -y\nrailway down --service api -y\n```\n\nThis is what users mean when they say \"remove deploy\", \"take down\", or \"stop the deployment\".\n\n**Note:** This does NOT delete the service. To delete a service entirely, use the `environment` skill with `isDeleted: true`.\n\n## CLI Options\n\n### deployment list\n\n| Flag | Description |\n|------|-------------|\n| `-s, --service <NAME>` | Service name or ID |\n| `-e, --environment <NAME>` | Environment name or ID |\n| `--limit <N>` | Max deployments (default 20, max 1000) |\n| `--json` | JSON output |\n\n### logs\n\n| Flag | Description |\n|------|-------------|\n| `-s, --service <NAME>` | Service name or ID |\n| `-e, --environment <NAME>` | Environment name or ID |\n| `-d, --deployment` | Show deploy logs (default, boolean flag) |\n| `-b, --build` | Show build logs (boolean flag) |\n| `-n, --lines <N>` | Number of lines (required) |\n| `-f, --filter <QUERY>` | Filter using query syntax |\n| `--since <TIME>` | Start time (relative or ISO 8601) |\n| `--until <TIME>` | End time (relative or ISO 8601) |\n| `--latest` | Most recent deployment (even if failed) |\n| `--json` | JSON output |\n| `[DEPLOYMENT_ID]` | Specific deployment (optional) |\n\n### redeploy\n\n| Flag | Description |\n|------|-------------|\n| `-s, --service <NAME>` | Service name or ID |\n| `-y, --yes` | Skip confirmation |\n\n### restart\n\n| Flag | Description |\n|------|-------------|\n| `-s, --service <NAME>` | Service name or ID |\n| `-y, --yes` | Skip confirmation |\n\n### down\n\n| Flag | Description |\n|------|-------------|\n| `-s, --service <NAME>` | Service name or ID |\n| `-e, --environment <NAME>` | Environment name or ID |\n| `-y, --yes` | Skip confirmation |\n\n## Presenting Logs\n\nWhen showing logs:\n- Include timestamps\n- Highlight errors and warnings\n- For build failures: show error and suggest fixes\n- For runtime crashes: show stack trace context\n- Summarize patterns (e.g., \"15 timeout errors in last 100 logs\")\n\n## Composability\n\n- **Push new code**: Use `deploy` skill\n- **Check service status**: Use `status` skill\n- **Fix config issues**: Use `environment` skill\n- **Create new service**: Use `new` skill\n\n## Error Handling\n\n### No Service Linked\n```\nNo service linked. Run `railway service` to select one.\n```\n\n### No Deployments Found\n```\nNo deployments found. Deploy first with `railway up`.\n```\n\n### No Logs Found\nDeployment may be too old (log retention limits) or service hasn't produced output.\n",
        "plugins/railway/skills/deployment/references/environment-config.md": "# Environment Config Reference\n\nThe `EnvironmentConfig` object is used to configure services, volumes, and shared variables in Railway.\n\n## Structure\n\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"source\": { ... },\n      \"build\": { ... },\n      \"deploy\": { ... },\n      \"variables\": { ... },\n      \"networking\": { ... }\n    }\n  },\n  \"sharedVariables\": { ... },\n  \"volumes\": { ... },\n  \"buckets\": { ... }\n}\n```\n\nOnly include fields being changed. The patch is merged with existing config.\n\n## Service Config\n\n### Source\n| Field | Type | Description |\n|-------|------|-------------|\n| `image` | string | Docker image (e.g., `nginx:latest`) |\n| `repo` | string | Git repository URL |\n| `branch` | string | Git branch to deploy |\n| `commitSha` | string | Specific commit SHA |\n| `rootDirectory` | string | Root directory (monorepos) |\n| `checkSuites` | boolean | Wait for GitHub check suites |\n| `autoUpdates.type` | disabled \\| patch \\| minor | Auto-update policy for Docker images |\n\n### Build\n| Field | Type | Description |\n|-------|------|-------------|\n| `builder` | NIXPACKS \\| DOCKERFILE \\| RAILPACK | Build system |\n| `buildCommand` | string | Command for Nixpacks builds |\n| `dockerfilePath` | string | Path to Dockerfile |\n| `watchPatterns` | string[] | Patterns to trigger deploys |\n| `nixpacksConfigPath` | string | Path to nixpacks config |\n\n### Deploy\n| Field | Type | Description |\n|-------|------|-------------|\n| `startCommand` | string | Container start command |\n| `multiRegionConfig` | object | Region → replica config. See [Multi-Region Config](#multi-region-config). |\n| `healthcheckPath` | string | Health check endpoint |\n| `healthcheckTimeout` | number | Seconds to wait for health |\n| `restartPolicyType` | ON_FAILURE \\| ALWAYS \\| NEVER | Restart behavior |\n| `restartPolicyMaxRetries` | number | Max restart attempts |\n| `cronSchedule` | string | Cron schedule for cron jobs |\n| `sleepApplication` | boolean | Sleep when inactive |\n\n### Variables\n| Field | Type | Description |\n|-------|------|-------------|\n| `value` | string | Variable value |\n| `isOptional` | boolean | Allow empty value |\n\nSet to `null` to delete a variable.\n\nFor variable references, see [variables.md](variables.md).\n\n### Lifecycle\n| Field | Type | Description |\n|-------|------|-------------|\n| `isDeleted` | boolean | Mark for deletion (requires ADMIN) |\n| `isCreated` | boolean | Mark as newly created |\n\n## Multi-Region Config\n\nControls replica count per region. Structure: region name → `{ numReplicas }` or `null` to remove.\n\n```json\n{\n  \"multiRegionConfig\": {\n    \"us-west2\": { \"numReplicas\": 3 },\n    \"europe-west4-drams3a\": { \"numReplicas\": 2 }\n  }\n}\n```\n\n### Available Regions\n\n| Name | Location | Aliases |\n|------|----------|---------|\n| `us-west2` | US West (California) | \"us west\", \"california\" |\n| `us-east4-eqdc4a` | US East (Virginia) | \"us east\", \"virginia\" |\n| `europe-west4-drams3a` | EU West (Amsterdam) | \"europe\", \"eu\", \"amsterdam\" |\n| `asia-southeast1-eqsg3a` | Southeast Asia (Singapore) | \"asia\", \"singapore\" |\n\n### Interpreting User Requests\n\n- \"add 3 replicas to europe\" → `{ \"europe-west4-drams3a\": { \"numReplicas\": 3 } }`\n- \"add a replica to all regions\" → set `numReplicas: 1` for all 4 regions\n- \"remove from asia\" → `{ \"asia-southeast1-eqsg3a\": null }`\n- \"increase replicas to 5\" (no region specified) → query current config first, update existing region(s)\n\n**Important:** When user doesn't specify a region, query the current `multiRegionConfig` and modify the existing region(s). Don't assume a default region.\n\n## Common Operations\n\n### Set Build Command\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"buildCommand\": \"npm run build\" } } } }\n```\n\n### Set Start Command\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"startCommand\": \"node server.js\" } } } }\n```\n\n### Set Replicas\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"multiRegionConfig\": { \"us-west2\": { \"numReplicas\": 3 } } } } } }\n```\n\n### Add Variables\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"API_KEY\": { \"value\": \"xxx\" } } } } }\n```\n\n### Delete Variable\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"OLD_VAR\": null } } } }\n```\n\n### Add Shared Variable\n```json\n{ \"sharedVariables\": { \"DATABASE_URL\": { \"value\": \"postgres://...\" } } }\n```\n\n### Change Docker Image\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"image\": \"nginx:latest\" } } } }\n```\n\n### Connect GitHub Repo\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"repo\": \"owner/repo\", \"branch\": \"main\" } } } }\n```\n\n### Change Git Branch\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"branch\": \"develop\" } } } }\n```\n\n### Set Health Check\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"healthcheckPath\": \"/health\", \"healthcheckTimeout\": 30 } } } }\n```\n\n### Change Builder\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"builder\": \"DOCKERFILE\", \"dockerfilePath\": \"./Dockerfile\" } } } }\n```\n\n### Delete Service\n```json\n{ \"services\": { \"<serviceId>\": { \"isDeleted\": true } } }\n```\n\n### Delete Volume\n```json\n{ \"volumes\": { \"<volumeId>\": { \"isDeleted\": true } } }\n```\n\n### New Service Instance\n```json\n{ \"services\": { \"<serviceId>\": { \"isCreated\": true, \"source\": { \"image\": \"nginx\" } } } }\n```\n\n**Note:** `isCreated: true` is required for new service instances.\n",
        "plugins/railway/skills/deployment/references/monorepo.md": "# Monorepo Reference\n\nRailway supports two types of monorepo deployments with different configuration approaches.\n\n## Key Decision: Root Directory vs Custom Commands\n\n| Approach | When to Use | What Happens |\n|----------|-------------|--------------|\n| **Root Directory** | Isolated apps (no shared code) | Only that directory's code is available |\n| **Custom Commands** | Shared monorepos (TypeScript, workspaces) | Full repo available, filter at build/start |\n\n**Critical:** Setting root directory means code outside that directory is NOT available during build. For monorepos with shared packages, use custom commands instead.\n\n## Isolated Monorepo\n\nApps are completely independent - no shared code between directories.\n\n```\n├── frontend/        # React app (standalone)\n│   ├── package.json\n│   └── src/\n└── backend/         # Python API (standalone)\n    ├── requirements.txt\n    └── main.py\n```\n\n### Configuration\n\nSet **Root Directory** for each service:\n- Frontend service: `/frontend`\n- Backend service: `/backend`\n\nEach service only sees its own directory's code.\n\n### When to Use\n\n- Frontend and backend in different languages\n- No shared packages or dependencies\n- Each app has its own package.json/requirements.txt\n- Apps don't import from sibling directories\n\n## Shared Monorepo\n\nApps share code from common packages or the root.\n\n```\n├── package.json           # Root workspace config\n├── packages/\n│   ├── frontend/\n│   │   ├── package.json\n│   │   └── src/\n│   ├── backend/\n│   │   ├── package.json\n│   │   └── src/\n│   └── shared/            # Shared utilities\n│       ├── package.json\n│       └── src/\n└── tsconfig.json          # Shared TS config\n```\n\n### Configuration\n\nDo NOT set root directory. Instead, use custom build and start commands:\n\n**pnpm:**\n```\nBuild: pnpm --filter backend build\nStart: pnpm --filter backend start\n```\n\n**npm workspaces:**\n```\nBuild: npm run build --workspace=packages/backend\nStart: npm run start --workspace=packages/backend\n```\n\n**yarn workspaces:**\n```\nBuild: yarn workspace backend build\nStart: yarn workspace backend start\n```\n\n**bun:**\n```\nBuild: bun run --filter backend build\nStart: bun run --filter backend start\n```\n\n**Turborepo:**\n```\nBuild: turbo run build --filter=backend\nStart: turbo run start --filter=backend\n```\n\n### When to Use\n\n- TypeScript/JavaScript monorepo with workspaces\n- Packages import from sibling packages (`@myapp/shared`)\n- Shared tsconfig.json, eslint config at root\n- Using pnpm, yarn workspaces, npm workspaces, or bun\n- Using Turborepo, Nx, or similar build tools\n\n## Watch Paths\n\nPrevent changes in one package from triggering rebuilds of other services.\n\nSet watch paths for each service to only rebuild when relevant files change:\n\n| Service | Watch Paths |\n|---------|-------------|\n| frontend | `/packages/frontend/**`, `/packages/shared/**` |\n| backend | `/packages/backend/**`, `/packages/shared/**` |\n\nInclude shared packages in watch paths if the service depends on them.\n\n### Pattern Format\n\nUses gitignore-style patterns:\n```\n/packages/backend/**     # All files in backend\n/packages/shared/**      # All files in shared (if depends on it)\n!**/*.md                 # Ignore markdown changes\n```\n\n## Configuration Examples\n\n### Isolated: React + Python API\n\nTwo separate apps, no shared code.\n\n**Frontend service:**\n- Root Directory: `/frontend`\n- No custom commands needed (Railpack auto-detects)\n\n**Backend service:**\n- Root Directory: `/backend`\n- No custom commands needed\n\n### Shared: TypeScript Monorepo with pnpm\n\nFrontend and backend share a `@myapp/shared` package.\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter frontend build`\n- Start Command: `pnpm --filter frontend start`\n- Watch Paths: `/packages/frontend/**`, `/packages/shared/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter backend build`\n- Start Command: `pnpm --filter backend start`\n- Watch Paths: `/packages/backend/**`, `/packages/shared/**`\n\n### Shared: Turborepo\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=frontend`\n- Start Command: `turbo run start --filter=frontend`\n- Watch Paths: `/apps/frontend/**`, `/packages/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=backend`\n- Start Command: `turbo run start --filter=backend`\n- Watch Paths: `/apps/backend/**`, `/packages/**`\n\n## Common Mistakes\n\n### Using Root Directory for Shared Monorepos\n\n**Wrong:**\n```\nRoot Directory: /packages/backend\n```\nThis breaks builds because `@myapp/shared` isn't available.\n\n**Right:**\n```\nRoot Directory: (empty)\nBuild Command: pnpm --filter backend build\nStart Command: pnpm --filter backend start\n```\n\n### Forgetting Watch Paths\n\nWithout watch paths, changing `frontend/` triggers a rebuild of `backend/`.\n\nAlways set watch paths for monorepos to avoid unnecessary builds.\n\n### Missing Shared Packages in Watch Paths\n\nIf `backend` imports from `shared`, include both in watch paths:\n```\n/packages/backend/**\n/packages/shared/**\n```\n\nOtherwise changes to `shared` won't trigger backend rebuilds.\n\n## Detecting Monorepo Type\n\nCheck for these indicators:\n\n**Isolated monorepo:**\n- Separate package.json in each directory\n- No workspace config in root package.json\n- No imports between directories\n\n**Shared monorepo:**\n- Root package.json with `workspaces` field\n- `pnpm-workspace.yaml` exists\n- Packages import from each other (`@myapp/shared`)\n- Shared tsconfig.json at root\n- turbo.json or nx.json at root\n",
        "plugins/railway/skills/deployment/references/railpack.md": "# Railpack Reference\n\nRailpack is Railway's default builder. Zero-config for most projects.\n\nFull docs: https://railpack.com/llms.txt\n\n## Detection\n\nRailpack analyzes source code to detect language, framework, and build requirements automatically.\n\nSupported: Node, Python, Go, PHP, Java, Ruby, Rust, Elixir, Gleam, Deno, C/C++, static files.\n\n## Static Sites\n\n### Detection Patterns\n\nRailpack serves static files via Caddy when it detects:\n1. `Staticfile` in root (can specify `root: dist`)\n2. `index.html` in root\n3. `public/` directory\n4. `RAILPACK_STATIC_FILE_ROOT` env var set\n\n### Root Directory Priority\n\n1. `RAILPACK_STATIC_FILE_ROOT` env var\n2. `root` in `Staticfile`\n3. `public/` directory\n4. Current directory (if index.html exists)\n\n### Common Patterns\n\nRailpack auto-detects common static build outputs. Only set `RAILPACK_STATIC_FILE_ROOT` for non-standard output directories.\n\n| Framework | Build Output | Config Needed |\n|-----------|--------------|---------------|\n| Plain HTML | root | None (auto-detected) |\n| Vite | dist | None (auto-detected) |\n| Astro (static) | dist | None (auto-detected) |\n| Create React App | build | None (auto-detected) |\n| Angular | dist/<project> | `RAILPACK_STATIC_FILE_ROOT=dist/<project>` (non-standard path) |\n| Custom output | varies | Set if output dir is non-standard |\n\n### Custom Caddyfile\n\nPut a `Caddyfile` in project root to override default serving behavior.\n\n## Node.js\n\n### Detection\n- `package.json` in root\n\n### Version Priority\n1. `RAILPACK_NODE_VERSION` env var\n2. `engines.node` in package.json\n3. `.nvmrc` or `.node-version`\n4. Default: Node 22\n\n### Package Manager Detection\n1. `packageManager` field in package.json (enables Corepack)\n2. Lock file: `pnpm-lock.yaml`, `bun.lockb`, `yarn.lock`\n3. Default: npm\n\n### Build Command\nAuto-detected from package.json `scripts.build`. Override via `buildCommand` in service settings.\n\n### Start Command\nAuto-detected:\n1. `scripts.start` in package.json\n2. `main` field in package.json\n3. `index.js` or `index.ts` in root\n\nOverride via `startCommand` in service settings.\n\n### Framework Detection\n\n| Framework | Detection | Notes |\n|-----------|-----------|-------|\n| Next.js | `next` in dependencies | Caches `.next/cache` |\n| Vite | `vite` in devDependencies | Static or SSR mode |\n| Astro | `astro` in dependencies | Caches `.astro` |\n| Nuxt | `nuxt` in dependencies | Auto start command |\n| Remix | `@remix-run/*` in deps | - |\n\n### Static Site Mode (SPA)\n\nFor frameworks like Vite, CRA, Astro (static), Angular:\n- Railpack builds then serves via Caddy\n- Set `RAILPACK_SPA_OUTPUT_DIR` if output isn't `dist`\n\n## Python\n\n### Detection\n- `requirements.txt`, `pyproject.toml`, `Pipfile`, or `uv.lock`\n\n### Version Priority\n1. `RAILPACK_PYTHON_VERSION` env var\n2. `.python-version` file\n3. `requires-python` in pyproject.toml\n4. Default: Python 3.12\n\n### WSGI/ASGI Auto-Config\n\n| Framework | Start Command |\n|-----------|---------------|\n| Django | `gunicorn <project>.wsgi` |\n| FastAPI | `uvicorn main:app --host 0.0.0.0` |\n| Flask | `gunicorn app:app` |\n\nOverride via `startCommand` in service settings.\n\n## Go\n\n### Detection\n- `go.mod` in root\n\n### Build\nCompiles to binary automatically. For `cmd/` structure, set binary name or use `RAILPACK_GO_BIN`.\n\n## Rust\n\n### Detection\n- `Cargo.toml` in root\n\n### Build\nRelease build by default. Binary auto-detected from Cargo.toml.\n\n## Configuration\n\n### Preferred: Service Settings\n\nUse `environment` skill to set:\n- `buildCommand` - Custom build command\n- `startCommand` - Custom start command\n\nThese are stored in Railway and don't pollute your codebase.\n\n### Environment Variables\n\n| Variable | Purpose |\n|----------|---------|\n| `RAILPACK_STATIC_FILE_ROOT` | Static file serving directory |\n| `RAILPACK_SPA_OUTPUT_DIR` | SPA build output (defaults to `dist`) |\n| `RAILPACK_NODE_VERSION` | Node.js version |\n| `RAILPACK_PYTHON_VERSION` | Python version |\n| `RAILPACK_GO_BIN` | Go binary name |\n| `RAILPACK_PACKAGES` | Additional Mise packages (`pkg@version`) |\n| `RAILPACK_BUILD_APT_PACKAGES` | System packages for build |\n| `RAILPACK_DEPLOY_APT_PACKAGES` | System packages for runtime |\n\n### railpack.json\n\nAdvanced config for custom build steps:\n\n```json\n{\n  \"$schema\": \"https://schema.railpack.com\",\n  \"packages\": {\n    \"ffmpeg\": \"latest\"\n  },\n  \"deploy\": {\n    \"aptPackages\": [\"libmagic1\"]\n  }\n}\n```\n\n### railway.toml\n\nAlternative config format:\n\n```toml\n[build]\nbuilder = \"RAILPACK\"\nbuildCommand = \"npm run build\"\n\n[deploy]\nstartCommand = \"npm start\"\n```\n\n## Minimal Project Scaffolding\n\nWhen no code exists, suggest these patterns:\n\n### Static HTML\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>My Site</title>\n</head>\n<body>\n  <h1>Hello Railway</h1>\n</body>\n</html>\n```\n\n### Vite React\n```bash\nnpm create vite@latest . -- --template react\n```\n\n### Astro\n```bash\nnpm create astro@latest\n```\n\n### Python FastAPI\n```python\n# main.py\nfrom fastapi import FastAPI\napp = FastAPI()\n\n@app.get(\"/\")\ndef root():\n    return {\"message\": \"Hello Railway\"}\n```\n\n```txt\n# requirements.txt\nfastapi\nuvicorn\n```\n\n### Go HTTP Server\n```go\n// main.go\npackage main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"8080\"\n    }\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        fmt.Fprintf(w, \"Hello Railway\")\n    })\n    http.ListenAndServe(\":\"+port, nil)\n}\n```\n\n## Troubleshooting\n\n| Issue | Solution |\n|-------|----------|\n| Static site 404s | Check output dir - set `RAILPACK_STATIC_FILE_ROOT` if non-standard |\n| Wrong build command | Use `environment` skill to set `buildCommand` |\n| Wrong start command | Use `environment` skill to set `startCommand` |\n| Missing system package | Add to `RAILPACK_BUILD_APT_PACKAGES` or `RAILPACK_DEPLOY_APT_PACKAGES` |\n| Wrong Node version | Set `RAILPACK_NODE_VERSION` or add `.nvmrc` |\n| Wrong Python version | Set `RAILPACK_PYTHON_VERSION` or add `.python-version` |\n",
        "plugins/railway/skills/deployment/references/variables.md": "# Variables Reference\n\nVariables in Railway support references to other services, shared variables, and Railway-provided values.\n\n## Template Syntax\n\n```\n${{NAMESPACE.VAR}}\n```\n\n| Namespace | Description |\n|-----------|-------------|\n| `shared` | Shared variables (project-wide) |\n| `<serviceName>` | Variables from another service (case-sensitive) |\n\n## Examples\n\n**Reference shared variable:**\n```json\n{ \"value\": \"${{shared.DOMAIN}}\" }\n```\n\n**Reference another service's variable:**\n```json\n{ \"value\": \"${{api.API_KEY}}\" }\n```\n\n**Combine with text:**\n```json\n{ \"value\": \"https://${{shared.DOMAIN}}/api\" }\n```\n\n## Railway-Provided Variables\n\nRailway injects these into every service automatically.\n\n### Networking\n| Variable | Description | Example | Availability |\n|----------|-------------|---------|--------------|\n| `RAILWAY_PUBLIC_DOMAIN` | Public domain | `myapp.up.railway.app` | Only if service has a domain |\n| `RAILWAY_PRIVATE_DOMAIN` | Private DNS (internal only) | `myapp.railway.internal` | Always |\n| `RAILWAY_TCP_PROXY_DOMAIN` | TCP proxy domain | `roundhouse.proxy.rlwy.net` | Only if TCP proxy enabled |\n| `RAILWAY_TCP_PROXY_PORT` | TCP proxy port | `11105` | Only if TCP proxy enabled |\n\n**Note:** `RAILWAY_PUBLIC_DOMAIN` is only available if the service has a domain configured.\nCheck the service's environment config to verify a domain exists before referencing it.\n\n### Context\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_PROJECT_ID` | Project ID |\n| `RAILWAY_PROJECT_NAME` | Project name |\n| `RAILWAY_ENVIRONMENT_ID` | Environment ID |\n| `RAILWAY_ENVIRONMENT_NAME` | Environment name |\n| `RAILWAY_SERVICE_ID` | Service ID |\n| `RAILWAY_SERVICE_NAME` | Service name |\n| `RAILWAY_DEPLOYMENT_ID` | Deployment ID |\n| `RAILWAY_REPLICA_ID` | Replica ID |\n| `RAILWAY_REPLICA_REGION` | Region (e.g., `us-west2`) |\n\n### Volume (if attached)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_VOLUME_NAME` | Volume name |\n| `RAILWAY_VOLUME_MOUNT_PATH` | Mount path |\n\n### Git (if deployed from GitHub)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_GIT_COMMIT_SHA` | Commit SHA |\n| `RAILWAY_GIT_BRANCH` | Branch name |\n| `RAILWAY_GIT_REPO_NAME` | Repository name |\n| `RAILWAY_GIT_REPO_OWNER` | Repository owner |\n| `RAILWAY_GIT_AUTHOR` | Commit author |\n| `RAILWAY_GIT_COMMIT_MESSAGE` | Commit message |\n\n## Wiring Services Together\n\n### Frontend → Backend (public network)\nUse when: Browser makes requests to API (browser can't access private network)\n\n```json\n{\n  \"services\": {\n    \"<frontendId>\": {\n      \"variables\": {\n        \"API_URL\": { \"value\": \"https://${{backend.RAILWAY_PUBLIC_DOMAIN}}\" }\n      }\n    }\n  }\n}\n```\n\n### Service → Database (private network)\nUse when: Backend connects to database (faster, no egress cost, more secure)\n\nRailway databases auto-generate connection URL variables. Use the private versions:\n\n| Database | Variable Reference |\n|----------|-------------------|\n| Postgres | `${{Postgres.DATABASE_URL}}` |\n| MySQL | `${{MySQL.DATABASE_URL}}` |\n| Redis | `${{Redis.REDIS_URL}}` |\n| Mongo | `${{Mongo.MONGO_URL}}` |\n\n**Postgres/MySQL example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"DATABASE_URL\": { \"value\": \"${{Postgres.DATABASE_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Redis example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"REDIS_URL\": { \"value\": \"${{Redis.REDIS_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Mongo example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"MONGO_URL\": { \"value\": \"${{Mongo.MONGO_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Note:** Service names are case-sensitive. Match the exact name from your project (e.g., \"Postgres\", \"Redis\").\n\n### Service → Service (private network)\nUse when: Microservices communicate internally\n\n```json\n{\n  \"services\": {\n    \"<workerServiceId>\": {\n      \"variables\": {\n        \"API_INTERNAL_URL\": { \"value\": \"http://${{api.RAILWAY_PRIVATE_DOMAIN}}:${{api.PORT}}\" }\n      }\n    }\n  }\n}\n```\n\n## When to Use Public vs Private\n\n| Use Case | Domain | Reason |\n|----------|--------|--------|\n| Browser → API | Public | Browser can't access private network |\n| Service → Service | Private | Faster, no egress, more secure |\n| Service → Database | Private | Databases should never be public |\n| External webhook → Service | Public | External services need public access |\n| Cron job → API | Private | Internal communication |\n",
        "plugins/railway/skills/domain/SKILL.md": "---\nname: domain\ndescription: This skill should be used when the user wants to add a domain, generate a railway domain, check current domains, get the URL for a service, or remove a domain.\nallowed-tools: Bash(railway:*)\n---\n\n# Domain Management\n\nAdd, view, or remove domains for Railway services.\n\n## When to Use\n\n- User asks to \"add a domain\", \"generate a domain\", \"get a URL\"\n- User wants to add a custom domain\n- User asks \"what's the URL for my service\"\n- User wants to remove a domain\n\n## Add Railway Domain\n\nGenerate a railway-provided domain (max 1 per service):\n\n```bash\nrailway domain --json\n```\n\nFor a specific service:\n```bash\nrailway domain --json --service backend\n```\n\n### Response\nReturns the generated domain URL. Service must have a deployment.\n\n## Add Custom Domain\n\n```bash\nrailway domain example.com --json\n```\n\n### Response\nReturns required DNS records:\n```json\n{\n  \"domain\": \"example.com\",\n  \"dnsRecords\": [\n    { \"type\": \"CNAME\", \"host\": \"@\", \"value\": \"...\" }\n  ]\n}\n```\n\nTell user to add these records to their DNS provider.\n\n## Read Current Domains\n\nUse `environment` skill to see configured domains, or query directly:\n\n```graphql\nquery domains($envId: String!) {\n  environment(id: $envId) {\n    config(decryptVariables: false)\n  }\n}\n```\n\nDomains are in `config.services.<serviceId>.networking`:\n- `serviceDomains` - Railway-provided domains\n- `customDomains` - User-provided domains\n\n## Remove Domain\n\nUse `environment` skill to remove domains:\n\n### Remove custom domain\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"networking\": {\n        \"customDomains\": { \"<domainId>\": null }\n      }\n    }\n  }\n}\n```\n\n### Remove railway domain\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"networking\": {\n        \"serviceDomains\": { \"<domainId>\": null }\n      }\n    }\n  }\n}\n```\n\nThen use `environment` skill to apply and commit the change.\n\n## CLI Options\n\n| Flag | Description |\n|------|-------------|\n| `[DOMAIN]` | Custom domain to add (omit for railway domain) |\n| `-p, --port <PORT>` | Port to connect |\n| `-s, --service <NAME>` | Target service (defaults to linked) |\n| `--json` | JSON output |\n\n## Composability\n\n- **Read domains**: Use `environment` skill\n- **Remove domains**: Use `environment` skill\n- **Apply removal**: Use `environment` skill\n- **Check service**: Use `service` skill\n\n## Error Handling\n\n### No Service Linked\n```\nNo service linked. Use --service flag or run `railway service` to select one.\n```\n\n### Domain Already Exists\n```\nService already has a railway-provided domain. Maximum 1 per service.\n```\n\n### No Deployment\n```\nService has no deployment. Deploy first with `railway up`.\n```\n\n### Invalid Domain\n```\nInvalid domain format. Use a valid domain like \"example.com\" or \"api.example.com\".\n```\n",
        "plugins/railway/skills/domain/references/environment-config.md": "# Environment Config Reference\n\nThe `EnvironmentConfig` object is used to configure services, volumes, and shared variables in Railway.\n\n## Structure\n\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"source\": { ... },\n      \"build\": { ... },\n      \"deploy\": { ... },\n      \"variables\": { ... },\n      \"networking\": { ... }\n    }\n  },\n  \"sharedVariables\": { ... },\n  \"volumes\": { ... },\n  \"buckets\": { ... }\n}\n```\n\nOnly include fields being changed. The patch is merged with existing config.\n\n## Service Config\n\n### Source\n| Field | Type | Description |\n|-------|------|-------------|\n| `image` | string | Docker image (e.g., `nginx:latest`) |\n| `repo` | string | Git repository URL |\n| `branch` | string | Git branch to deploy |\n| `commitSha` | string | Specific commit SHA |\n| `rootDirectory` | string | Root directory (monorepos) |\n| `checkSuites` | boolean | Wait for GitHub check suites |\n| `autoUpdates.type` | disabled \\| patch \\| minor | Auto-update policy for Docker images |\n\n### Build\n| Field | Type | Description |\n|-------|------|-------------|\n| `builder` | NIXPACKS \\| DOCKERFILE \\| RAILPACK | Build system |\n| `buildCommand` | string | Command for Nixpacks builds |\n| `dockerfilePath` | string | Path to Dockerfile |\n| `watchPatterns` | string[] | Patterns to trigger deploys |\n| `nixpacksConfigPath` | string | Path to nixpacks config |\n\n### Deploy\n| Field | Type | Description |\n|-------|------|-------------|\n| `startCommand` | string | Container start command |\n| `multiRegionConfig` | object | Region → replica config. See [Multi-Region Config](#multi-region-config). |\n| `healthcheckPath` | string | Health check endpoint |\n| `healthcheckTimeout` | number | Seconds to wait for health |\n| `restartPolicyType` | ON_FAILURE \\| ALWAYS \\| NEVER | Restart behavior |\n| `restartPolicyMaxRetries` | number | Max restart attempts |\n| `cronSchedule` | string | Cron schedule for cron jobs |\n| `sleepApplication` | boolean | Sleep when inactive |\n\n### Variables\n| Field | Type | Description |\n|-------|------|-------------|\n| `value` | string | Variable value |\n| `isOptional` | boolean | Allow empty value |\n\nSet to `null` to delete a variable.\n\nFor variable references, see [variables.md](variables.md).\n\n### Lifecycle\n| Field | Type | Description |\n|-------|------|-------------|\n| `isDeleted` | boolean | Mark for deletion (requires ADMIN) |\n| `isCreated` | boolean | Mark as newly created |\n\n## Multi-Region Config\n\nControls replica count per region. Structure: region name → `{ numReplicas }` or `null` to remove.\n\n```json\n{\n  \"multiRegionConfig\": {\n    \"us-west2\": { \"numReplicas\": 3 },\n    \"europe-west4-drams3a\": { \"numReplicas\": 2 }\n  }\n}\n```\n\n### Available Regions\n\n| Name | Location | Aliases |\n|------|----------|---------|\n| `us-west2` | US West (California) | \"us west\", \"california\" |\n| `us-east4-eqdc4a` | US East (Virginia) | \"us east\", \"virginia\" |\n| `europe-west4-drams3a` | EU West (Amsterdam) | \"europe\", \"eu\", \"amsterdam\" |\n| `asia-southeast1-eqsg3a` | Southeast Asia (Singapore) | \"asia\", \"singapore\" |\n\n### Interpreting User Requests\n\n- \"add 3 replicas to europe\" → `{ \"europe-west4-drams3a\": { \"numReplicas\": 3 } }`\n- \"add a replica to all regions\" → set `numReplicas: 1` for all 4 regions\n- \"remove from asia\" → `{ \"asia-southeast1-eqsg3a\": null }`\n- \"increase replicas to 5\" (no region specified) → query current config first, update existing region(s)\n\n**Important:** When user doesn't specify a region, query the current `multiRegionConfig` and modify the existing region(s). Don't assume a default region.\n\n## Common Operations\n\n### Set Build Command\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"buildCommand\": \"npm run build\" } } } }\n```\n\n### Set Start Command\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"startCommand\": \"node server.js\" } } } }\n```\n\n### Set Replicas\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"multiRegionConfig\": { \"us-west2\": { \"numReplicas\": 3 } } } } } }\n```\n\n### Add Variables\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"API_KEY\": { \"value\": \"xxx\" } } } } }\n```\n\n### Delete Variable\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"OLD_VAR\": null } } } }\n```\n\n### Add Shared Variable\n```json\n{ \"sharedVariables\": { \"DATABASE_URL\": { \"value\": \"postgres://...\" } } }\n```\n\n### Change Docker Image\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"image\": \"nginx:latest\" } } } }\n```\n\n### Connect GitHub Repo\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"repo\": \"owner/repo\", \"branch\": \"main\" } } } }\n```\n\n### Change Git Branch\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"branch\": \"develop\" } } } }\n```\n\n### Set Health Check\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"healthcheckPath\": \"/health\", \"healthcheckTimeout\": 30 } } } }\n```\n\n### Change Builder\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"builder\": \"DOCKERFILE\", \"dockerfilePath\": \"./Dockerfile\" } } } }\n```\n\n### Delete Service\n```json\n{ \"services\": { \"<serviceId>\": { \"isDeleted\": true } } }\n```\n\n### Delete Volume\n```json\n{ \"volumes\": { \"<volumeId>\": { \"isDeleted\": true } } }\n```\n\n### New Service Instance\n```json\n{ \"services\": { \"<serviceId>\": { \"isCreated\": true, \"source\": { \"image\": \"nginx\" } } } }\n```\n\n**Note:** `isCreated: true` is required for new service instances.\n",
        "plugins/railway/skills/domain/references/monorepo.md": "# Monorepo Reference\n\nRailway supports two types of monorepo deployments with different configuration approaches.\n\n## Key Decision: Root Directory vs Custom Commands\n\n| Approach | When to Use | What Happens |\n|----------|-------------|--------------|\n| **Root Directory** | Isolated apps (no shared code) | Only that directory's code is available |\n| **Custom Commands** | Shared monorepos (TypeScript, workspaces) | Full repo available, filter at build/start |\n\n**Critical:** Setting root directory means code outside that directory is NOT available during build. For monorepos with shared packages, use custom commands instead.\n\n## Isolated Monorepo\n\nApps are completely independent - no shared code between directories.\n\n```\n├── frontend/        # React app (standalone)\n│   ├── package.json\n│   └── src/\n└── backend/         # Python API (standalone)\n    ├── requirements.txt\n    └── main.py\n```\n\n### Configuration\n\nSet **Root Directory** for each service:\n- Frontend service: `/frontend`\n- Backend service: `/backend`\n\nEach service only sees its own directory's code.\n\n### When to Use\n\n- Frontend and backend in different languages\n- No shared packages or dependencies\n- Each app has its own package.json/requirements.txt\n- Apps don't import from sibling directories\n\n## Shared Monorepo\n\nApps share code from common packages or the root.\n\n```\n├── package.json           # Root workspace config\n├── packages/\n│   ├── frontend/\n│   │   ├── package.json\n│   │   └── src/\n│   ├── backend/\n│   │   ├── package.json\n│   │   └── src/\n│   └── shared/            # Shared utilities\n│       ├── package.json\n│       └── src/\n└── tsconfig.json          # Shared TS config\n```\n\n### Configuration\n\nDo NOT set root directory. Instead, use custom build and start commands:\n\n**pnpm:**\n```\nBuild: pnpm --filter backend build\nStart: pnpm --filter backend start\n```\n\n**npm workspaces:**\n```\nBuild: npm run build --workspace=packages/backend\nStart: npm run start --workspace=packages/backend\n```\n\n**yarn workspaces:**\n```\nBuild: yarn workspace backend build\nStart: yarn workspace backend start\n```\n\n**bun:**\n```\nBuild: bun run --filter backend build\nStart: bun run --filter backend start\n```\n\n**Turborepo:**\n```\nBuild: turbo run build --filter=backend\nStart: turbo run start --filter=backend\n```\n\n### When to Use\n\n- TypeScript/JavaScript monorepo with workspaces\n- Packages import from sibling packages (`@myapp/shared`)\n- Shared tsconfig.json, eslint config at root\n- Using pnpm, yarn workspaces, npm workspaces, or bun\n- Using Turborepo, Nx, or similar build tools\n\n## Watch Paths\n\nPrevent changes in one package from triggering rebuilds of other services.\n\nSet watch paths for each service to only rebuild when relevant files change:\n\n| Service | Watch Paths |\n|---------|-------------|\n| frontend | `/packages/frontend/**`, `/packages/shared/**` |\n| backend | `/packages/backend/**`, `/packages/shared/**` |\n\nInclude shared packages in watch paths if the service depends on them.\n\n### Pattern Format\n\nUses gitignore-style patterns:\n```\n/packages/backend/**     # All files in backend\n/packages/shared/**      # All files in shared (if depends on it)\n!**/*.md                 # Ignore markdown changes\n```\n\n## Configuration Examples\n\n### Isolated: React + Python API\n\nTwo separate apps, no shared code.\n\n**Frontend service:**\n- Root Directory: `/frontend`\n- No custom commands needed (Railpack auto-detects)\n\n**Backend service:**\n- Root Directory: `/backend`\n- No custom commands needed\n\n### Shared: TypeScript Monorepo with pnpm\n\nFrontend and backend share a `@myapp/shared` package.\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter frontend build`\n- Start Command: `pnpm --filter frontend start`\n- Watch Paths: `/packages/frontend/**`, `/packages/shared/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter backend build`\n- Start Command: `pnpm --filter backend start`\n- Watch Paths: `/packages/backend/**`, `/packages/shared/**`\n\n### Shared: Turborepo\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=frontend`\n- Start Command: `turbo run start --filter=frontend`\n- Watch Paths: `/apps/frontend/**`, `/packages/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=backend`\n- Start Command: `turbo run start --filter=backend`\n- Watch Paths: `/apps/backend/**`, `/packages/**`\n\n## Common Mistakes\n\n### Using Root Directory for Shared Monorepos\n\n**Wrong:**\n```\nRoot Directory: /packages/backend\n```\nThis breaks builds because `@myapp/shared` isn't available.\n\n**Right:**\n```\nRoot Directory: (empty)\nBuild Command: pnpm --filter backend build\nStart Command: pnpm --filter backend start\n```\n\n### Forgetting Watch Paths\n\nWithout watch paths, changing `frontend/` triggers a rebuild of `backend/`.\n\nAlways set watch paths for monorepos to avoid unnecessary builds.\n\n### Missing Shared Packages in Watch Paths\n\nIf `backend` imports from `shared`, include both in watch paths:\n```\n/packages/backend/**\n/packages/shared/**\n```\n\nOtherwise changes to `shared` won't trigger backend rebuilds.\n\n## Detecting Monorepo Type\n\nCheck for these indicators:\n\n**Isolated monorepo:**\n- Separate package.json in each directory\n- No workspace config in root package.json\n- No imports between directories\n\n**Shared monorepo:**\n- Root package.json with `workspaces` field\n- `pnpm-workspace.yaml` exists\n- Packages import from each other (`@myapp/shared`)\n- Shared tsconfig.json at root\n- turbo.json or nx.json at root\n",
        "plugins/railway/skills/domain/references/railpack.md": "# Railpack Reference\n\nRailpack is Railway's default builder. Zero-config for most projects.\n\nFull docs: https://railpack.com/llms.txt\n\n## Detection\n\nRailpack analyzes source code to detect language, framework, and build requirements automatically.\n\nSupported: Node, Python, Go, PHP, Java, Ruby, Rust, Elixir, Gleam, Deno, C/C++, static files.\n\n## Static Sites\n\n### Detection Patterns\n\nRailpack serves static files via Caddy when it detects:\n1. `Staticfile` in root (can specify `root: dist`)\n2. `index.html` in root\n3. `public/` directory\n4. `RAILPACK_STATIC_FILE_ROOT` env var set\n\n### Root Directory Priority\n\n1. `RAILPACK_STATIC_FILE_ROOT` env var\n2. `root` in `Staticfile`\n3. `public/` directory\n4. Current directory (if index.html exists)\n\n### Common Patterns\n\nRailpack auto-detects common static build outputs. Only set `RAILPACK_STATIC_FILE_ROOT` for non-standard output directories.\n\n| Framework | Build Output | Config Needed |\n|-----------|--------------|---------------|\n| Plain HTML | root | None (auto-detected) |\n| Vite | dist | None (auto-detected) |\n| Astro (static) | dist | None (auto-detected) |\n| Create React App | build | None (auto-detected) |\n| Angular | dist/<project> | `RAILPACK_STATIC_FILE_ROOT=dist/<project>` (non-standard path) |\n| Custom output | varies | Set if output dir is non-standard |\n\n### Custom Caddyfile\n\nPut a `Caddyfile` in project root to override default serving behavior.\n\n## Node.js\n\n### Detection\n- `package.json` in root\n\n### Version Priority\n1. `RAILPACK_NODE_VERSION` env var\n2. `engines.node` in package.json\n3. `.nvmrc` or `.node-version`\n4. Default: Node 22\n\n### Package Manager Detection\n1. `packageManager` field in package.json (enables Corepack)\n2. Lock file: `pnpm-lock.yaml`, `bun.lockb`, `yarn.lock`\n3. Default: npm\n\n### Build Command\nAuto-detected from package.json `scripts.build`. Override via `buildCommand` in service settings.\n\n### Start Command\nAuto-detected:\n1. `scripts.start` in package.json\n2. `main` field in package.json\n3. `index.js` or `index.ts` in root\n\nOverride via `startCommand` in service settings.\n\n### Framework Detection\n\n| Framework | Detection | Notes |\n|-----------|-----------|-------|\n| Next.js | `next` in dependencies | Caches `.next/cache` |\n| Vite | `vite` in devDependencies | Static or SSR mode |\n| Astro | `astro` in dependencies | Caches `.astro` |\n| Nuxt | `nuxt` in dependencies | Auto start command |\n| Remix | `@remix-run/*` in deps | - |\n\n### Static Site Mode (SPA)\n\nFor frameworks like Vite, CRA, Astro (static), Angular:\n- Railpack builds then serves via Caddy\n- Set `RAILPACK_SPA_OUTPUT_DIR` if output isn't `dist`\n\n## Python\n\n### Detection\n- `requirements.txt`, `pyproject.toml`, `Pipfile`, or `uv.lock`\n\n### Version Priority\n1. `RAILPACK_PYTHON_VERSION` env var\n2. `.python-version` file\n3. `requires-python` in pyproject.toml\n4. Default: Python 3.12\n\n### WSGI/ASGI Auto-Config\n\n| Framework | Start Command |\n|-----------|---------------|\n| Django | `gunicorn <project>.wsgi` |\n| FastAPI | `uvicorn main:app --host 0.0.0.0` |\n| Flask | `gunicorn app:app` |\n\nOverride via `startCommand` in service settings.\n\n## Go\n\n### Detection\n- `go.mod` in root\n\n### Build\nCompiles to binary automatically. For `cmd/` structure, set binary name or use `RAILPACK_GO_BIN`.\n\n## Rust\n\n### Detection\n- `Cargo.toml` in root\n\n### Build\nRelease build by default. Binary auto-detected from Cargo.toml.\n\n## Configuration\n\n### Preferred: Service Settings\n\nUse `environment` skill to set:\n- `buildCommand` - Custom build command\n- `startCommand` - Custom start command\n\nThese are stored in Railway and don't pollute your codebase.\n\n### Environment Variables\n\n| Variable | Purpose |\n|----------|---------|\n| `RAILPACK_STATIC_FILE_ROOT` | Static file serving directory |\n| `RAILPACK_SPA_OUTPUT_DIR` | SPA build output (defaults to `dist`) |\n| `RAILPACK_NODE_VERSION` | Node.js version |\n| `RAILPACK_PYTHON_VERSION` | Python version |\n| `RAILPACK_GO_BIN` | Go binary name |\n| `RAILPACK_PACKAGES` | Additional Mise packages (`pkg@version`) |\n| `RAILPACK_BUILD_APT_PACKAGES` | System packages for build |\n| `RAILPACK_DEPLOY_APT_PACKAGES` | System packages for runtime |\n\n### railpack.json\n\nAdvanced config for custom build steps:\n\n```json\n{\n  \"$schema\": \"https://schema.railpack.com\",\n  \"packages\": {\n    \"ffmpeg\": \"latest\"\n  },\n  \"deploy\": {\n    \"aptPackages\": [\"libmagic1\"]\n  }\n}\n```\n\n### railway.toml\n\nAlternative config format:\n\n```toml\n[build]\nbuilder = \"RAILPACK\"\nbuildCommand = \"npm run build\"\n\n[deploy]\nstartCommand = \"npm start\"\n```\n\n## Minimal Project Scaffolding\n\nWhen no code exists, suggest these patterns:\n\n### Static HTML\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>My Site</title>\n</head>\n<body>\n  <h1>Hello Railway</h1>\n</body>\n</html>\n```\n\n### Vite React\n```bash\nnpm create vite@latest . -- --template react\n```\n\n### Astro\n```bash\nnpm create astro@latest\n```\n\n### Python FastAPI\n```python\n# main.py\nfrom fastapi import FastAPI\napp = FastAPI()\n\n@app.get(\"/\")\ndef root():\n    return {\"message\": \"Hello Railway\"}\n```\n\n```txt\n# requirements.txt\nfastapi\nuvicorn\n```\n\n### Go HTTP Server\n```go\n// main.go\npackage main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"8080\"\n    }\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        fmt.Fprintf(w, \"Hello Railway\")\n    })\n    http.ListenAndServe(\":\"+port, nil)\n}\n```\n\n## Troubleshooting\n\n| Issue | Solution |\n|-------|----------|\n| Static site 404s | Check output dir - set `RAILPACK_STATIC_FILE_ROOT` if non-standard |\n| Wrong build command | Use `environment` skill to set `buildCommand` |\n| Wrong start command | Use `environment` skill to set `startCommand` |\n| Missing system package | Add to `RAILPACK_BUILD_APT_PACKAGES` or `RAILPACK_DEPLOY_APT_PACKAGES` |\n| Wrong Node version | Set `RAILPACK_NODE_VERSION` or add `.nvmrc` |\n| Wrong Python version | Set `RAILPACK_PYTHON_VERSION` or add `.python-version` |\n",
        "plugins/railway/skills/domain/references/variables.md": "# Variables Reference\n\nVariables in Railway support references to other services, shared variables, and Railway-provided values.\n\n## Template Syntax\n\n```\n${{NAMESPACE.VAR}}\n```\n\n| Namespace | Description |\n|-----------|-------------|\n| `shared` | Shared variables (project-wide) |\n| `<serviceName>` | Variables from another service (case-sensitive) |\n\n## Examples\n\n**Reference shared variable:**\n```json\n{ \"value\": \"${{shared.DOMAIN}}\" }\n```\n\n**Reference another service's variable:**\n```json\n{ \"value\": \"${{api.API_KEY}}\" }\n```\n\n**Combine with text:**\n```json\n{ \"value\": \"https://${{shared.DOMAIN}}/api\" }\n```\n\n## Railway-Provided Variables\n\nRailway injects these into every service automatically.\n\n### Networking\n| Variable | Description | Example | Availability |\n|----------|-------------|---------|--------------|\n| `RAILWAY_PUBLIC_DOMAIN` | Public domain | `myapp.up.railway.app` | Only if service has a domain |\n| `RAILWAY_PRIVATE_DOMAIN` | Private DNS (internal only) | `myapp.railway.internal` | Always |\n| `RAILWAY_TCP_PROXY_DOMAIN` | TCP proxy domain | `roundhouse.proxy.rlwy.net` | Only if TCP proxy enabled |\n| `RAILWAY_TCP_PROXY_PORT` | TCP proxy port | `11105` | Only if TCP proxy enabled |\n\n**Note:** `RAILWAY_PUBLIC_DOMAIN` is only available if the service has a domain configured.\nCheck the service's environment config to verify a domain exists before referencing it.\n\n### Context\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_PROJECT_ID` | Project ID |\n| `RAILWAY_PROJECT_NAME` | Project name |\n| `RAILWAY_ENVIRONMENT_ID` | Environment ID |\n| `RAILWAY_ENVIRONMENT_NAME` | Environment name |\n| `RAILWAY_SERVICE_ID` | Service ID |\n| `RAILWAY_SERVICE_NAME` | Service name |\n| `RAILWAY_DEPLOYMENT_ID` | Deployment ID |\n| `RAILWAY_REPLICA_ID` | Replica ID |\n| `RAILWAY_REPLICA_REGION` | Region (e.g., `us-west2`) |\n\n### Volume (if attached)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_VOLUME_NAME` | Volume name |\n| `RAILWAY_VOLUME_MOUNT_PATH` | Mount path |\n\n### Git (if deployed from GitHub)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_GIT_COMMIT_SHA` | Commit SHA |\n| `RAILWAY_GIT_BRANCH` | Branch name |\n| `RAILWAY_GIT_REPO_NAME` | Repository name |\n| `RAILWAY_GIT_REPO_OWNER` | Repository owner |\n| `RAILWAY_GIT_AUTHOR` | Commit author |\n| `RAILWAY_GIT_COMMIT_MESSAGE` | Commit message |\n\n## Wiring Services Together\n\n### Frontend → Backend (public network)\nUse when: Browser makes requests to API (browser can't access private network)\n\n```json\n{\n  \"services\": {\n    \"<frontendId>\": {\n      \"variables\": {\n        \"API_URL\": { \"value\": \"https://${{backend.RAILWAY_PUBLIC_DOMAIN}}\" }\n      }\n    }\n  }\n}\n```\n\n### Service → Database (private network)\nUse when: Backend connects to database (faster, no egress cost, more secure)\n\nRailway databases auto-generate connection URL variables. Use the private versions:\n\n| Database | Variable Reference |\n|----------|-------------------|\n| Postgres | `${{Postgres.DATABASE_URL}}` |\n| MySQL | `${{MySQL.DATABASE_URL}}` |\n| Redis | `${{Redis.REDIS_URL}}` |\n| Mongo | `${{Mongo.MONGO_URL}}` |\n\n**Postgres/MySQL example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"DATABASE_URL\": { \"value\": \"${{Postgres.DATABASE_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Redis example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"REDIS_URL\": { \"value\": \"${{Redis.REDIS_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Mongo example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"MONGO_URL\": { \"value\": \"${{Mongo.MONGO_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Note:** Service names are case-sensitive. Match the exact name from your project (e.g., \"Postgres\", \"Redis\").\n\n### Service → Service (private network)\nUse when: Microservices communicate internally\n\n```json\n{\n  \"services\": {\n    \"<workerServiceId>\": {\n      \"variables\": {\n        \"API_INTERNAL_URL\": { \"value\": \"http://${{api.RAILWAY_PRIVATE_DOMAIN}}:${{api.PORT}}\" }\n      }\n    }\n  }\n}\n```\n\n## When to Use Public vs Private\n\n| Use Case | Domain | Reason |\n|----------|--------|--------|\n| Browser → API | Public | Browser can't access private network |\n| Service → Service | Private | Faster, no egress, more secure |\n| Service → Database | Private | Databases should never be public |\n| External webhook → Service | Public | External services need public access |\n| Cron job → API | Private | Internal communication |\n",
        "plugins/railway/skills/environment/SKILL.md": "---\nname: environment\ndescription: This skill should be used when the user asks \"what's the config\", \"show me the configuration\", \"what variables are set\", \"environment config\", \"service config\", \"railway config\", or wants to add/set/delete variables, change build/deploy settings, scale replicas, connect repos, or delete services.\nallowed-tools: Bash(railway:*)\n---\n\n# Environment Configuration\n\nQuery, stage, and apply configuration changes for Railway environments.\n\n## Quick Actions\n\n**When user asks \"what's the config\" or \"show configuration\":**\n\nRun `railway status --json` to get the environment ID, then **always** query the full config:\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'query envConfig($envId: String!) {\n    environment(id: $envId) { id config }\n  }' \\\n  '{\"envId\": \"ENV_ID_FROM_STATUS\"}'\nSCRIPT\n```\nPresent: source (repo/image), build settings, deploy settings, variables per service.\n\n**When user asks \"what variables\" or \"show env vars\":**\nUse the same environment config query above - it includes variables per service and shared variables.\n\nFor **rendered** (resolved) variable values: `railway variables --json`\n\nFor mutations (add/change/delete), see sections below.\n\n## Shell Escaping\n\n**CRITICAL:** When running GraphQL queries via bash, you MUST wrap in heredoc to prevent shell escaping issues:\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh 'query ...' '{\"var\": \"value\"}'\nSCRIPT\n```\n\nWithout the heredoc wrapper, multi-line commands break and exclamation marks in GraphQL non-null types get escaped, causing query failures.\n\n## When to Use\n\n- User wants to create a new environment\n- User wants to duplicate an environment (e.g., \"copy production to staging\")\n- User wants to switch to a different environment\n- User asks about current build/deploy settings, variables, replicas, health checks, domains\n- User asks to change service source (Docker image, branch, commit, root directory)\n- User wants to connect a service to a GitHub repo\n- User wants to deploy from a GitHub repo (create empty service first via `new` skill, then use this)\n- User asks to change build or start command\n- User wants to add/update/delete environment variables\n- User wants to change replica count or configure health checks\n- User asks to delete a service, volume, or bucket\n- User says \"apply changes\", \"commit changes\", \"deploy changes\"\n- Auto-fixing build errors detected in logs\n\n## Create Environment\n\nCreate a new environment in the linked project:\n\n```bash\nrailway environment new <name>\n```\n\nDuplicate an existing environment:\n\n```bash\nrailway environment new staging --duplicate production\n```\n\nWith service-specific variables:\n\n```bash\nrailway environment new staging --duplicate production --service-variable api PORT=3001\n```\n\n## Switch Environment\n\nLink a different environment to the current directory:\n\n```bash\nrailway environment <name>\n```\n\nOr by ID:\n\n```bash\nrailway environment <environment-id>\n```\n\n## Get Context\n\n**JSON output** - project/environment IDs:\n```bash\nrailway status --json\n```\n\nExtract:\n- `project.id` - for service lookup\n- `environment.id` - for mutations\n\n**Plain output** - linked service name:\n```bash\nrailway status\n```\n\nShows `Service: <name>` line with the currently linked service. Use the `projectServices` query below to resolve the name to an ID.\n\n### Resolve Service ID\n\nIf user specifies a service by name, query project services:\n\n```graphql\nquery projectServices($projectId: String!) {\n  project(id: $projectId) {\n    services {\n      edges {\n        node {\n          id\n          name\n        }\n      }\n    }\n  }\n}\n```\n\nMatch the service name (case-insensitive) to get the service ID.\n\n## Query Configuration\n\nFetch current environment configuration and staged changes.\n\n```graphql\nquery environmentConfig($environmentId: String!) {\n  environment(id: $environmentId) {\n    id\n    config(decryptVariables: false)\n    serviceInstances {\n      edges {\n        node {\n          id\n          serviceId\n        }\n      }\n    }\n  }\n  environmentStagedChanges(environmentId: $environmentId) {\n    id\n    patch(decryptVariables: false)\n  }\n}\n```\n\nExample:\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'query envConfig($envId: String!) {\n    environment(id: $envId) { id config(decryptVariables: false) }\n    environmentStagedChanges(environmentId: $envId) { id patch(decryptVariables: false) }\n  }' \\\n  '{\"envId\": \"ENV_ID\"}'\nSCRIPT\n```\n\n### Response Structure\n\nThe `config` field contains current configuration:\n\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"source\": { \"repo\": \"...\", \"branch\": \"main\" },\n      \"build\": { \"buildCommand\": \"npm run build\", \"builder\": \"NIXPACKS\" },\n      \"deploy\": {\n        \"startCommand\": \"npm start\",\n        \"multiRegionConfig\": { \"us-west2\": { \"numReplicas\": 1 } }\n      },\n      \"variables\": { \"NODE_ENV\": { \"value\": \"production\" } },\n      \"networking\": { \"serviceDomains\": {}, \"customDomains\": {} }\n    }\n  },\n  \"sharedVariables\": { \"DATABASE_URL\": { \"value\": \"...\" } }\n}\n```\n\nThe `patch` field in `environmentStagedChanges` contains pending changes. The effective configuration is the base `config` merged with the staged `patch`.\n\nFor complete field reference, see [reference/environment-config.md](references/environment-config.md).\n\nFor variable syntax and service wiring patterns, see [reference/variables.md](references/variables.md).\n\n## Get Rendered Variables\n\nThe GraphQL queries above return **unrendered** variables - template syntax like `${{shared.DOMAIN}}` is preserved. This is correct for management/editing.\n\nTo see **rendered** (resolved) values as they appear at runtime:\n\n```bash\n# Current linked service\nrailway variables --json\n\n# Specific service\nrailway variables --service <service-name> --json\n```\n\n**When to use:**\n- Debugging connection issues (see actual URLs/ports)\n- Verifying variable resolution is correct\n- Viewing Railway-injected values (RAILWAY_*)\n\n## Stage Changes\n\nStage configuration changes via the `environmentStageChanges` mutation. Use `merge: true` to automatically merge with existing staged changes.\n\n```graphql\nmutation stageEnvironmentChanges(\n  $environmentId: String!\n  $input: EnvironmentConfig!\n  $merge: Boolean\n) {\n  environmentStageChanges(\n    environmentId: $environmentId\n    input: $input\n    merge: $merge\n  ) {\n    id\n  }\n}\n```\n\n**Important:** Always use variables (not inline input) because service IDs are UUIDs which can't be used as unquoted GraphQL object keys.\n\nExample:\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'mutation stageChanges($environmentId: String!, $input: EnvironmentConfig!, $merge: Boolean) {\n    environmentStageChanges(environmentId: $environmentId, input: $input, merge: $merge) { id }\n  }' \\\n  '{\"environmentId\": \"ENV_ID\", \"input\": {\"services\": {\"SERVICE_ID\": {\"build\": {\"buildCommand\": \"npm run build\"}}}}, \"merge\": true}'\nSCRIPT\n```\n\n### Delete Service\n\nUse `isDeleted: true`:\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'mutation stageChanges($environmentId: String!, $input: EnvironmentConfig!, $merge: Boolean) {\n    environmentStageChanges(environmentId: $environmentId, input: $input, merge: $merge) { id }\n  }' \\\n  '{\"environmentId\": \"ENV_ID\", \"input\": {\"services\": {\"SERVICE_ID\": {\"isDeleted\": true}}}, \"merge\": true}'\nSCRIPT\n```\n\n## Stage and Apply Immediately\n\nFor single changes that should deploy right away, use `environmentPatchCommit` to stage and apply in one call.\n\n```graphql\nmutation environmentPatchCommit(\n  $environmentId: String!\n  $patch: EnvironmentConfig\n  $commitMessage: String\n) {\n  environmentPatchCommit(\n    environmentId: $environmentId\n    patch: $patch\n    commitMessage: $commitMessage\n  )\n}\n```\n\nExample:\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'mutation patchCommit($environmentId: String!, $patch: EnvironmentConfig, $commitMessage: String) {\n    environmentPatchCommit(environmentId: $environmentId, patch: $patch, commitMessage: $commitMessage)\n  }' \\\n  '{\"environmentId\": \"ENV_ID\", \"patch\": {\"services\": {\"SERVICE_ID\": {\"variables\": {\"API_KEY\": {\"value\": \"secret\"}}}}}, \"commitMessage\": \"add API_KEY\"}'\nSCRIPT\n```\n\n**When to use:** Single change, no need to batch, user wants immediate deployment.\n\n**When NOT to use:** Multiple related changes to batch, or user says \"stage only\" / \"don't deploy yet\".\n\n## Apply Staged Changes\n\nCommit staged changes and trigger deployments.\n\n**Note:** There is no `railway apply` CLI command. Use the mutation below or direct users to the web UI.\n\n### Apply Mutation\n\n**Mutation name: `environmentPatchCommitStaged`**\n\n```graphql\nmutation environmentPatchCommitStaged(\n  $environmentId: String!\n  $message: String\n  $skipDeploys: Boolean\n) {\n  environmentPatchCommitStaged(\n    environmentId: $environmentId\n    commitMessage: $message\n    skipDeploys: $skipDeploys\n  )\n}\n```\n\nExample:\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'mutation commitStaged($environmentId: String!, $message: String) {\n    environmentPatchCommitStaged(environmentId: $environmentId, commitMessage: $message)\n  }' \\\n  '{\"environmentId\": \"ENV_ID\", \"message\": \"add API_KEY variable\"}'\nSCRIPT\n```\n\n### Parameters\n\n| Field           | Type    | Default | Description                                 |\n| --------------- | ------- | ------- | ------------------------------------------- |\n| `environmentId` | String! | -       | Environment ID from status                  |\n| `message`       | String  | null    | Short description of changes                |\n| `skipDeploys`   | Boolean | false   | Skip deploys (only if user explicitly asks) |\n\n### Commit Message\n\nKeep very short - one sentence max. Examples:\n\n- \"set build command to fix npm error\"\n- \"add API_KEY variable\"\n- \"increase replicas to 3\"\n\nLeave empty if no meaningful description.\n\n### Default Behavior\n\n**Always deploy** unless user explicitly asks to skip. Only set `skipDeploys: true` if user says \"apply without deploying\", \"commit but don't deploy\", or \"skip deploys\".\n\nReturns a workflow ID (string) on success.\n\n## Auto-Apply Behavior\n\nBy default, **apply changes immediately**.\n\n### Flow\n\n**Single change:** Use `environmentPatchCommit` to stage and apply in one call.\n\n**Multiple changes or batching:** Use `environmentStageChanges` with `merge: true` for each change, then `environmentPatchCommitStaged` to apply.\n\n### When NOT to Auto-Apply\n\n- User explicitly says \"stage only\", \"don't deploy yet\", or similar\n- User is making multiple related changes that should deploy together\n\n**When you don't auto-apply, tell the user:**\n\n> Changes staged. Apply them at: https://railway.com/project/{projectId}\n> Or ask me to apply them.\n\nGet `projectId` from `railway status --json` → `project.id`\n\n## Error Handling\n\n### Service Not Found\n\n```\nService \"foo\" not found in project. Available services: api, web, worker\n```\n\n### No Staged Changes\n\n```\nNo patch to apply\n```\n\nThere are no staged changes to commit. Stage changes first.\n\n### Invalid Configuration\n\nCommon issues:\n\n- `buildCommand` and `startCommand` cannot be identical\n- `buildCommand` only valid with NIXPACKS builder\n- `dockerfilePath` only valid with DOCKERFILE builder\n\n### No Permission\n\n```\nYou don't have permission to modify this environment. Check your Railway role.\n```\n\n### No Linked Project\n\n```\nNo project linked. Run `railway link` to link a project.\n```\n\n## Composability\n\n- **Create service**: Use `service` skill\n- **View logs**: Use `deployment` skill\n- **Add domains**: Use `domain` skill\n- **Deploy local code**: Use `deploy` skill\n",
        "plugins/railway/skills/environment/references/environment-config.md": "# Environment Config Reference\n\nThe `EnvironmentConfig` object is used to configure services, volumes, and shared variables in Railway.\n\n## Structure\n\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"source\": { ... },\n      \"build\": { ... },\n      \"deploy\": { ... },\n      \"variables\": { ... },\n      \"networking\": { ... }\n    }\n  },\n  \"sharedVariables\": { ... },\n  \"volumes\": { ... },\n  \"buckets\": { ... }\n}\n```\n\nOnly include fields being changed. The patch is merged with existing config.\n\n## Service Config\n\n### Source\n| Field | Type | Description |\n|-------|------|-------------|\n| `image` | string | Docker image (e.g., `nginx:latest`) |\n| `repo` | string | Git repository URL |\n| `branch` | string | Git branch to deploy |\n| `commitSha` | string | Specific commit SHA |\n| `rootDirectory` | string | Root directory (monorepos) |\n| `checkSuites` | boolean | Wait for GitHub check suites |\n| `autoUpdates.type` | disabled \\| patch \\| minor | Auto-update policy for Docker images |\n\n### Build\n| Field | Type | Description |\n|-------|------|-------------|\n| `builder` | NIXPACKS \\| DOCKERFILE \\| RAILPACK | Build system |\n| `buildCommand` | string | Command for Nixpacks builds |\n| `dockerfilePath` | string | Path to Dockerfile |\n| `watchPatterns` | string[] | Patterns to trigger deploys |\n| `nixpacksConfigPath` | string | Path to nixpacks config |\n\n### Deploy\n| Field | Type | Description |\n|-------|------|-------------|\n| `startCommand` | string | Container start command |\n| `multiRegionConfig` | object | Region → replica config. See [Multi-Region Config](#multi-region-config). |\n| `healthcheckPath` | string | Health check endpoint |\n| `healthcheckTimeout` | number | Seconds to wait for health |\n| `restartPolicyType` | ON_FAILURE \\| ALWAYS \\| NEVER | Restart behavior |\n| `restartPolicyMaxRetries` | number | Max restart attempts |\n| `cronSchedule` | string | Cron schedule for cron jobs |\n| `sleepApplication` | boolean | Sleep when inactive |\n\n### Variables\n| Field | Type | Description |\n|-------|------|-------------|\n| `value` | string | Variable value |\n| `isOptional` | boolean | Allow empty value |\n\nSet to `null` to delete a variable.\n\nFor variable references, see [variables.md](variables.md).\n\n### Lifecycle\n| Field | Type | Description |\n|-------|------|-------------|\n| `isDeleted` | boolean | Mark for deletion (requires ADMIN) |\n| `isCreated` | boolean | Mark as newly created |\n\n## Multi-Region Config\n\nControls replica count per region. Structure: region name → `{ numReplicas }` or `null` to remove.\n\n```json\n{\n  \"multiRegionConfig\": {\n    \"us-west2\": { \"numReplicas\": 3 },\n    \"europe-west4-drams3a\": { \"numReplicas\": 2 }\n  }\n}\n```\n\n### Available Regions\n\n| Name | Location | Aliases |\n|------|----------|---------|\n| `us-west2` | US West (California) | \"us west\", \"california\" |\n| `us-east4-eqdc4a` | US East (Virginia) | \"us east\", \"virginia\" |\n| `europe-west4-drams3a` | EU West (Amsterdam) | \"europe\", \"eu\", \"amsterdam\" |\n| `asia-southeast1-eqsg3a` | Southeast Asia (Singapore) | \"asia\", \"singapore\" |\n\n### Interpreting User Requests\n\n- \"add 3 replicas to europe\" → `{ \"europe-west4-drams3a\": { \"numReplicas\": 3 } }`\n- \"add a replica to all regions\" → set `numReplicas: 1` for all 4 regions\n- \"remove from asia\" → `{ \"asia-southeast1-eqsg3a\": null }`\n- \"increase replicas to 5\" (no region specified) → query current config first, update existing region(s)\n\n**Important:** When user doesn't specify a region, query the current `multiRegionConfig` and modify the existing region(s). Don't assume a default region.\n\n## Common Operations\n\n### Set Build Command\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"buildCommand\": \"npm run build\" } } } }\n```\n\n### Set Start Command\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"startCommand\": \"node server.js\" } } } }\n```\n\n### Set Replicas\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"multiRegionConfig\": { \"us-west2\": { \"numReplicas\": 3 } } } } } }\n```\n\n### Add Variables\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"API_KEY\": { \"value\": \"xxx\" } } } } }\n```\n\n### Delete Variable\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"OLD_VAR\": null } } } }\n```\n\n### Add Shared Variable\n```json\n{ \"sharedVariables\": { \"DATABASE_URL\": { \"value\": \"postgres://...\" } } }\n```\n\n### Change Docker Image\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"image\": \"nginx:latest\" } } } }\n```\n\n### Connect GitHub Repo\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"repo\": \"owner/repo\", \"branch\": \"main\" } } } }\n```\n\n### Change Git Branch\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"branch\": \"develop\" } } } }\n```\n\n### Set Health Check\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"healthcheckPath\": \"/health\", \"healthcheckTimeout\": 30 } } } }\n```\n\n### Change Builder\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"builder\": \"DOCKERFILE\", \"dockerfilePath\": \"./Dockerfile\" } } } }\n```\n\n### Delete Service\n```json\n{ \"services\": { \"<serviceId>\": { \"isDeleted\": true } } }\n```\n\n### Delete Volume\n```json\n{ \"volumes\": { \"<volumeId>\": { \"isDeleted\": true } } }\n```\n\n### New Service Instance\n```json\n{ \"services\": { \"<serviceId>\": { \"isCreated\": true, \"source\": { \"image\": \"nginx\" } } } }\n```\n\n**Note:** `isCreated: true` is required for new service instances.\n",
        "plugins/railway/skills/environment/references/monorepo.md": "# Monorepo Reference\n\nRailway supports two types of monorepo deployments with different configuration approaches.\n\n## Key Decision: Root Directory vs Custom Commands\n\n| Approach | When to Use | What Happens |\n|----------|-------------|--------------|\n| **Root Directory** | Isolated apps (no shared code) | Only that directory's code is available |\n| **Custom Commands** | Shared monorepos (TypeScript, workspaces) | Full repo available, filter at build/start |\n\n**Critical:** Setting root directory means code outside that directory is NOT available during build. For monorepos with shared packages, use custom commands instead.\n\n## Isolated Monorepo\n\nApps are completely independent - no shared code between directories.\n\n```\n├── frontend/        # React app (standalone)\n│   ├── package.json\n│   └── src/\n└── backend/         # Python API (standalone)\n    ├── requirements.txt\n    └── main.py\n```\n\n### Configuration\n\nSet **Root Directory** for each service:\n- Frontend service: `/frontend`\n- Backend service: `/backend`\n\nEach service only sees its own directory's code.\n\n### When to Use\n\n- Frontend and backend in different languages\n- No shared packages or dependencies\n- Each app has its own package.json/requirements.txt\n- Apps don't import from sibling directories\n\n## Shared Monorepo\n\nApps share code from common packages or the root.\n\n```\n├── package.json           # Root workspace config\n├── packages/\n│   ├── frontend/\n│   │   ├── package.json\n│   │   └── src/\n│   ├── backend/\n│   │   ├── package.json\n│   │   └── src/\n│   └── shared/            # Shared utilities\n│       ├── package.json\n│       └── src/\n└── tsconfig.json          # Shared TS config\n```\n\n### Configuration\n\nDo NOT set root directory. Instead, use custom build and start commands:\n\n**pnpm:**\n```\nBuild: pnpm --filter backend build\nStart: pnpm --filter backend start\n```\n\n**npm workspaces:**\n```\nBuild: npm run build --workspace=packages/backend\nStart: npm run start --workspace=packages/backend\n```\n\n**yarn workspaces:**\n```\nBuild: yarn workspace backend build\nStart: yarn workspace backend start\n```\n\n**bun:**\n```\nBuild: bun run --filter backend build\nStart: bun run --filter backend start\n```\n\n**Turborepo:**\n```\nBuild: turbo run build --filter=backend\nStart: turbo run start --filter=backend\n```\n\n### When to Use\n\n- TypeScript/JavaScript monorepo with workspaces\n- Packages import from sibling packages (`@myapp/shared`)\n- Shared tsconfig.json, eslint config at root\n- Using pnpm, yarn workspaces, npm workspaces, or bun\n- Using Turborepo, Nx, or similar build tools\n\n## Watch Paths\n\nPrevent changes in one package from triggering rebuilds of other services.\n\nSet watch paths for each service to only rebuild when relevant files change:\n\n| Service | Watch Paths |\n|---------|-------------|\n| frontend | `/packages/frontend/**`, `/packages/shared/**` |\n| backend | `/packages/backend/**`, `/packages/shared/**` |\n\nInclude shared packages in watch paths if the service depends on them.\n\n### Pattern Format\n\nUses gitignore-style patterns:\n```\n/packages/backend/**     # All files in backend\n/packages/shared/**      # All files in shared (if depends on it)\n!**/*.md                 # Ignore markdown changes\n```\n\n## Configuration Examples\n\n### Isolated: React + Python API\n\nTwo separate apps, no shared code.\n\n**Frontend service:**\n- Root Directory: `/frontend`\n- No custom commands needed (Railpack auto-detects)\n\n**Backend service:**\n- Root Directory: `/backend`\n- No custom commands needed\n\n### Shared: TypeScript Monorepo with pnpm\n\nFrontend and backend share a `@myapp/shared` package.\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter frontend build`\n- Start Command: `pnpm --filter frontend start`\n- Watch Paths: `/packages/frontend/**`, `/packages/shared/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter backend build`\n- Start Command: `pnpm --filter backend start`\n- Watch Paths: `/packages/backend/**`, `/packages/shared/**`\n\n### Shared: Turborepo\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=frontend`\n- Start Command: `turbo run start --filter=frontend`\n- Watch Paths: `/apps/frontend/**`, `/packages/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=backend`\n- Start Command: `turbo run start --filter=backend`\n- Watch Paths: `/apps/backend/**`, `/packages/**`\n\n## Common Mistakes\n\n### Using Root Directory for Shared Monorepos\n\n**Wrong:**\n```\nRoot Directory: /packages/backend\n```\nThis breaks builds because `@myapp/shared` isn't available.\n\n**Right:**\n```\nRoot Directory: (empty)\nBuild Command: pnpm --filter backend build\nStart Command: pnpm --filter backend start\n```\n\n### Forgetting Watch Paths\n\nWithout watch paths, changing `frontend/` triggers a rebuild of `backend/`.\n\nAlways set watch paths for monorepos to avoid unnecessary builds.\n\n### Missing Shared Packages in Watch Paths\n\nIf `backend` imports from `shared`, include both in watch paths:\n```\n/packages/backend/**\n/packages/shared/**\n```\n\nOtherwise changes to `shared` won't trigger backend rebuilds.\n\n## Detecting Monorepo Type\n\nCheck for these indicators:\n\n**Isolated monorepo:**\n- Separate package.json in each directory\n- No workspace config in root package.json\n- No imports between directories\n\n**Shared monorepo:**\n- Root package.json with `workspaces` field\n- `pnpm-workspace.yaml` exists\n- Packages import from each other (`@myapp/shared`)\n- Shared tsconfig.json at root\n- turbo.json or nx.json at root\n",
        "plugins/railway/skills/environment/references/railpack.md": "# Railpack Reference\n\nRailpack is Railway's default builder. Zero-config for most projects.\n\nFull docs: https://railpack.com/llms.txt\n\n## Detection\n\nRailpack analyzes source code to detect language, framework, and build requirements automatically.\n\nSupported: Node, Python, Go, PHP, Java, Ruby, Rust, Elixir, Gleam, Deno, C/C++, static files.\n\n## Static Sites\n\n### Detection Patterns\n\nRailpack serves static files via Caddy when it detects:\n1. `Staticfile` in root (can specify `root: dist`)\n2. `index.html` in root\n3. `public/` directory\n4. `RAILPACK_STATIC_FILE_ROOT` env var set\n\n### Root Directory Priority\n\n1. `RAILPACK_STATIC_FILE_ROOT` env var\n2. `root` in `Staticfile`\n3. `public/` directory\n4. Current directory (if index.html exists)\n\n### Common Patterns\n\nRailpack auto-detects common static build outputs. Only set `RAILPACK_STATIC_FILE_ROOT` for non-standard output directories.\n\n| Framework | Build Output | Config Needed |\n|-----------|--------------|---------------|\n| Plain HTML | root | None (auto-detected) |\n| Vite | dist | None (auto-detected) |\n| Astro (static) | dist | None (auto-detected) |\n| Create React App | build | None (auto-detected) |\n| Angular | dist/<project> | `RAILPACK_STATIC_FILE_ROOT=dist/<project>` (non-standard path) |\n| Custom output | varies | Set if output dir is non-standard |\n\n### Custom Caddyfile\n\nPut a `Caddyfile` in project root to override default serving behavior.\n\n## Node.js\n\n### Detection\n- `package.json` in root\n\n### Version Priority\n1. `RAILPACK_NODE_VERSION` env var\n2. `engines.node` in package.json\n3. `.nvmrc` or `.node-version`\n4. Default: Node 22\n\n### Package Manager Detection\n1. `packageManager` field in package.json (enables Corepack)\n2. Lock file: `pnpm-lock.yaml`, `bun.lockb`, `yarn.lock`\n3. Default: npm\n\n### Build Command\nAuto-detected from package.json `scripts.build`. Override via `buildCommand` in service settings.\n\n### Start Command\nAuto-detected:\n1. `scripts.start` in package.json\n2. `main` field in package.json\n3. `index.js` or `index.ts` in root\n\nOverride via `startCommand` in service settings.\n\n### Framework Detection\n\n| Framework | Detection | Notes |\n|-----------|-----------|-------|\n| Next.js | `next` in dependencies | Caches `.next/cache` |\n| Vite | `vite` in devDependencies | Static or SSR mode |\n| Astro | `astro` in dependencies | Caches `.astro` |\n| Nuxt | `nuxt` in dependencies | Auto start command |\n| Remix | `@remix-run/*` in deps | - |\n\n### Static Site Mode (SPA)\n\nFor frameworks like Vite, CRA, Astro (static), Angular:\n- Railpack builds then serves via Caddy\n- Set `RAILPACK_SPA_OUTPUT_DIR` if output isn't `dist`\n\n## Python\n\n### Detection\n- `requirements.txt`, `pyproject.toml`, `Pipfile`, or `uv.lock`\n\n### Version Priority\n1. `RAILPACK_PYTHON_VERSION` env var\n2. `.python-version` file\n3. `requires-python` in pyproject.toml\n4. Default: Python 3.12\n\n### WSGI/ASGI Auto-Config\n\n| Framework | Start Command |\n|-----------|---------------|\n| Django | `gunicorn <project>.wsgi` |\n| FastAPI | `uvicorn main:app --host 0.0.0.0` |\n| Flask | `gunicorn app:app` |\n\nOverride via `startCommand` in service settings.\n\n## Go\n\n### Detection\n- `go.mod` in root\n\n### Build\nCompiles to binary automatically. For `cmd/` structure, set binary name or use `RAILPACK_GO_BIN`.\n\n## Rust\n\n### Detection\n- `Cargo.toml` in root\n\n### Build\nRelease build by default. Binary auto-detected from Cargo.toml.\n\n## Configuration\n\n### Preferred: Service Settings\n\nUse `environment` skill to set:\n- `buildCommand` - Custom build command\n- `startCommand` - Custom start command\n\nThese are stored in Railway and don't pollute your codebase.\n\n### Environment Variables\n\n| Variable | Purpose |\n|----------|---------|\n| `RAILPACK_STATIC_FILE_ROOT` | Static file serving directory |\n| `RAILPACK_SPA_OUTPUT_DIR` | SPA build output (defaults to `dist`) |\n| `RAILPACK_NODE_VERSION` | Node.js version |\n| `RAILPACK_PYTHON_VERSION` | Python version |\n| `RAILPACK_GO_BIN` | Go binary name |\n| `RAILPACK_PACKAGES` | Additional Mise packages (`pkg@version`) |\n| `RAILPACK_BUILD_APT_PACKAGES` | System packages for build |\n| `RAILPACK_DEPLOY_APT_PACKAGES` | System packages for runtime |\n\n### railpack.json\n\nAdvanced config for custom build steps:\n\n```json\n{\n  \"$schema\": \"https://schema.railpack.com\",\n  \"packages\": {\n    \"ffmpeg\": \"latest\"\n  },\n  \"deploy\": {\n    \"aptPackages\": [\"libmagic1\"]\n  }\n}\n```\n\n### railway.toml\n\nAlternative config format:\n\n```toml\n[build]\nbuilder = \"RAILPACK\"\nbuildCommand = \"npm run build\"\n\n[deploy]\nstartCommand = \"npm start\"\n```\n\n## Minimal Project Scaffolding\n\nWhen no code exists, suggest these patterns:\n\n### Static HTML\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>My Site</title>\n</head>\n<body>\n  <h1>Hello Railway</h1>\n</body>\n</html>\n```\n\n### Vite React\n```bash\nnpm create vite@latest . -- --template react\n```\n\n### Astro\n```bash\nnpm create astro@latest\n```\n\n### Python FastAPI\n```python\n# main.py\nfrom fastapi import FastAPI\napp = FastAPI()\n\n@app.get(\"/\")\ndef root():\n    return {\"message\": \"Hello Railway\"}\n```\n\n```txt\n# requirements.txt\nfastapi\nuvicorn\n```\n\n### Go HTTP Server\n```go\n// main.go\npackage main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"8080\"\n    }\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        fmt.Fprintf(w, \"Hello Railway\")\n    })\n    http.ListenAndServe(\":\"+port, nil)\n}\n```\n\n## Troubleshooting\n\n| Issue | Solution |\n|-------|----------|\n| Static site 404s | Check output dir - set `RAILPACK_STATIC_FILE_ROOT` if non-standard |\n| Wrong build command | Use `environment` skill to set `buildCommand` |\n| Wrong start command | Use `environment` skill to set `startCommand` |\n| Missing system package | Add to `RAILPACK_BUILD_APT_PACKAGES` or `RAILPACK_DEPLOY_APT_PACKAGES` |\n| Wrong Node version | Set `RAILPACK_NODE_VERSION` or add `.nvmrc` |\n| Wrong Python version | Set `RAILPACK_PYTHON_VERSION` or add `.python-version` |\n",
        "plugins/railway/skills/environment/references/variables.md": "# Variables Reference\n\nVariables in Railway support references to other services, shared variables, and Railway-provided values.\n\n## Template Syntax\n\n```\n${{NAMESPACE.VAR}}\n```\n\n| Namespace | Description |\n|-----------|-------------|\n| `shared` | Shared variables (project-wide) |\n| `<serviceName>` | Variables from another service (case-sensitive) |\n\n## Examples\n\n**Reference shared variable:**\n```json\n{ \"value\": \"${{shared.DOMAIN}}\" }\n```\n\n**Reference another service's variable:**\n```json\n{ \"value\": \"${{api.API_KEY}}\" }\n```\n\n**Combine with text:**\n```json\n{ \"value\": \"https://${{shared.DOMAIN}}/api\" }\n```\n\n## Railway-Provided Variables\n\nRailway injects these into every service automatically.\n\n### Networking\n| Variable | Description | Example | Availability |\n|----------|-------------|---------|--------------|\n| `RAILWAY_PUBLIC_DOMAIN` | Public domain | `myapp.up.railway.app` | Only if service has a domain |\n| `RAILWAY_PRIVATE_DOMAIN` | Private DNS (internal only) | `myapp.railway.internal` | Always |\n| `RAILWAY_TCP_PROXY_DOMAIN` | TCP proxy domain | `roundhouse.proxy.rlwy.net` | Only if TCP proxy enabled |\n| `RAILWAY_TCP_PROXY_PORT` | TCP proxy port | `11105` | Only if TCP proxy enabled |\n\n**Note:** `RAILWAY_PUBLIC_DOMAIN` is only available if the service has a domain configured.\nCheck the service's environment config to verify a domain exists before referencing it.\n\n### Context\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_PROJECT_ID` | Project ID |\n| `RAILWAY_PROJECT_NAME` | Project name |\n| `RAILWAY_ENVIRONMENT_ID` | Environment ID |\n| `RAILWAY_ENVIRONMENT_NAME` | Environment name |\n| `RAILWAY_SERVICE_ID` | Service ID |\n| `RAILWAY_SERVICE_NAME` | Service name |\n| `RAILWAY_DEPLOYMENT_ID` | Deployment ID |\n| `RAILWAY_REPLICA_ID` | Replica ID |\n| `RAILWAY_REPLICA_REGION` | Region (e.g., `us-west2`) |\n\n### Volume (if attached)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_VOLUME_NAME` | Volume name |\n| `RAILWAY_VOLUME_MOUNT_PATH` | Mount path |\n\n### Git (if deployed from GitHub)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_GIT_COMMIT_SHA` | Commit SHA |\n| `RAILWAY_GIT_BRANCH` | Branch name |\n| `RAILWAY_GIT_REPO_NAME` | Repository name |\n| `RAILWAY_GIT_REPO_OWNER` | Repository owner |\n| `RAILWAY_GIT_AUTHOR` | Commit author |\n| `RAILWAY_GIT_COMMIT_MESSAGE` | Commit message |\n\n## Wiring Services Together\n\n### Frontend → Backend (public network)\nUse when: Browser makes requests to API (browser can't access private network)\n\n```json\n{\n  \"services\": {\n    \"<frontendId>\": {\n      \"variables\": {\n        \"API_URL\": { \"value\": \"https://${{backend.RAILWAY_PUBLIC_DOMAIN}}\" }\n      }\n    }\n  }\n}\n```\n\n### Service → Database (private network)\nUse when: Backend connects to database (faster, no egress cost, more secure)\n\nRailway databases auto-generate connection URL variables. Use the private versions:\n\n| Database | Variable Reference |\n|----------|-------------------|\n| Postgres | `${{Postgres.DATABASE_URL}}` |\n| MySQL | `${{MySQL.DATABASE_URL}}` |\n| Redis | `${{Redis.REDIS_URL}}` |\n| Mongo | `${{Mongo.MONGO_URL}}` |\n\n**Postgres/MySQL example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"DATABASE_URL\": { \"value\": \"${{Postgres.DATABASE_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Redis example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"REDIS_URL\": { \"value\": \"${{Redis.REDIS_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Mongo example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"MONGO_URL\": { \"value\": \"${{Mongo.MONGO_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Note:** Service names are case-sensitive. Match the exact name from your project (e.g., \"Postgres\", \"Redis\").\n\n### Service → Service (private network)\nUse when: Microservices communicate internally\n\n```json\n{\n  \"services\": {\n    \"<workerServiceId>\": {\n      \"variables\": {\n        \"API_INTERNAL_URL\": { \"value\": \"http://${{api.RAILWAY_PRIVATE_DOMAIN}}:${{api.PORT}}\" }\n      }\n    }\n  }\n}\n```\n\n## When to Use Public vs Private\n\n| Use Case | Domain | Reason |\n|----------|--------|--------|\n| Browser → API | Public | Browser can't access private network |\n| Service → Service | Private | Faster, no egress, more secure |\n| Service → Database | Private | Databases should never be public |\n| External webhook → Service | Public | External services need public access |\n| Cron job → API | Private | Internal communication |\n",
        "plugins/railway/skills/metrics/SKILL.md": "---\nname: metrics\ndescription: This skill should be used when the user asks about resource usage, CPU, memory, network, disk, or service performance. Covers questions like \"how much memory is my service using\" or \"is my service slow\".\nallowed-tools: Bash(railway:*)\n---\n\n# Service Metrics\n\nQuery resource usage metrics for Railway services.\n\n## When to Use\n\n- User asks \"how much memory is my service using?\"\n- User asks about CPU usage, network traffic, disk usage\n- User wants to debug performance issues\n- User asks \"is my service healthy?\" (combine with `service` skill)\n\n## Prerequisites\n\nGet environmentId and serviceId from linked project:\n\n```bash\nrailway status --json\n```\n\nExtract:\n- `environment.id` → environmentId\n- `service.id` → serviceId (optional - omit to get all services)\n\n## MetricMeasurement Values\n\n| Measurement | Description |\n|-------------|-------------|\n| CPU_USAGE | CPU usage (cores) |\n| CPU_LIMIT | CPU limit (cores) |\n| MEMORY_USAGE_GB | Memory usage in GB |\n| MEMORY_LIMIT_GB | Memory limit in GB |\n| NETWORK_RX_GB | Network received in GB |\n| NETWORK_TX_GB | Network transmitted in GB |\n| DISK_USAGE_GB | Disk usage in GB |\n| EPHEMERAL_DISK_USAGE_GB | Ephemeral disk usage in GB |\n| BACKUP_USAGE_GB | Backup usage in GB |\n\n## MetricTag Values (for groupBy)\n\n| Tag | Description |\n|-----|-------------|\n| DEPLOYMENT_ID | Group by deployment |\n| DEPLOYMENT_INSTANCE_ID | Group by instance |\n| REGION | Group by region |\n| SERVICE_ID | Group by service |\n\n## Query\n\n```graphql\nquery metrics(\n  $environmentId: String!\n  $serviceId: String\n  $startDate: DateTime!\n  $endDate: DateTime\n  $sampleRateSeconds: Int\n  $averagingWindowSeconds: Int\n  $groupBy: [MetricTag!]\n  $measurements: [MetricMeasurement!]!\n) {\n  metrics(\n    environmentId: $environmentId\n    serviceId: $serviceId\n    startDate: $startDate\n    endDate: $endDate\n    sampleRateSeconds: $sampleRateSeconds\n    averagingWindowSeconds: $averagingWindowSeconds\n    groupBy: $groupBy\n    measurements: $measurements\n  ) {\n    measurement\n    tags {\n      deploymentInstanceId\n      deploymentId\n      serviceId\n      region\n    }\n    values {\n      ts\n      value\n    }\n  }\n}\n```\n\n## Example: Last Hour CPU and Memory\n\nUse heredoc to avoid shell escaping issues:\n\n```bash\nbash <<'SCRIPT'\nSTART_DATE=$(date -u -v-1H +\"%Y-%m-%dT%H:%M:%SZ\" 2>/dev/null || date -u -d \"1 hour ago\" +\"%Y-%m-%dT%H:%M:%SZ\")\nENV_ID=\"your-environment-id\"\nSERVICE_ID=\"your-service-id\"\n\nVARS=$(jq -n \\\n  --arg env \"$ENV_ID\" \\\n  --arg svc \"$SERVICE_ID\" \\\n  --arg start \"$START_DATE\" \\\n  '{environmentId: $env, serviceId: $svc, startDate: $start, measurements: [\"CPU_USAGE\", \"MEMORY_USAGE_GB\"]}')\n\nscripts/railway-api.sh \\\n  'query metrics($environmentId: String!, $serviceId: String, $startDate: DateTime!, $measurements: [MetricMeasurement!]!) {\n    metrics(environmentId: $environmentId, serviceId: $serviceId, startDate: $startDate, measurements: $measurements) {\n      measurement\n      tags { deploymentId region serviceId }\n      values { ts value }\n    }\n  }' \\\n  \"$VARS\"\nSCRIPT\n```\n\n## Example: All Services in Environment\n\nOmit serviceId and use groupBy to get metrics for all services:\n\n```bash\nbash <<'SCRIPT'\nSTART_DATE=$(date -u -v-1H +\"%Y-%m-%dT%H:%M:%SZ\" 2>/dev/null || date -u -d \"1 hour ago\" +\"%Y-%m-%dT%H:%M:%SZ\")\nENV_ID=\"your-environment-id\"\n\nVARS=$(jq -n \\\n  --arg env \"$ENV_ID\" \\\n  --arg start \"$START_DATE\" \\\n  '{environmentId: $env, startDate: $start, measurements: [\"CPU_USAGE\", \"MEMORY_USAGE_GB\"], groupBy: [\"SERVICE_ID\"]}')\n\nscripts/railway-api.sh \\\n  'query metrics($environmentId: String!, $startDate: DateTime!, $measurements: [MetricMeasurement!]!, $groupBy: [MetricTag!]) {\n    metrics(environmentId: $environmentId, startDate: $startDate, measurements: $measurements, groupBy: $groupBy) {\n      measurement\n      tags { serviceId region }\n      values { ts value }\n    }\n  }' \\\n  \"$VARS\"\nSCRIPT\n```\n\n## Time Parameters\n\n| Parameter | Description |\n|-----------|-------------|\n| startDate | Required. ISO 8601 format (e.g., `2024-01-01T00:00:00Z`) |\n| endDate | Optional. Defaults to now |\n| sampleRateSeconds | Sample interval (e.g., 60 for 1-minute samples) |\n| averagingWindowSeconds | Averaging window for smoothing |\n\n**Tip:** For last hour, calculate startDate as `now - 1 hour` in ISO format.\n\n## Output Interpretation\n\n```json\n{\n  \"data\": {\n    \"metrics\": [\n      {\n        \"measurement\": \"CPU_USAGE\",\n        \"tags\": { \"deploymentId\": \"...\", \"serviceId\": \"...\", \"region\": \"us-west1\" },\n        \"values\": [\n          { \"ts\": \"2024-01-01T00:00:00Z\", \"value\": 0.25 },\n          { \"ts\": \"2024-01-01T00:01:00Z\", \"value\": 0.30 }\n        ]\n      }\n    ]\n  }\n}\n```\n\n- `ts` - timestamp in ISO format\n- `value` - metric value (cores for CPU, GB for memory/disk/network)\n\n## Composability\n\n- **Get IDs**: Use `status` skill or `railway status --json`\n- **Check service health**: Use `service` skill for deployment status\n- **View logs**: Use `deployment` skill if metrics show issues\n- **Scale service**: Use `environment` skill to adjust resources\n\n## Error Handling\n\n### Empty/Null Metrics\n\nServices without active deployments return empty metrics arrays. When processing with jq, handle nulls:\n\n```bash\n# Safe iteration - skip nulls\njq -r '.data.metrics[]? | select(.values != null and (.values | length) > 0) | ...'\n\n# Check if metrics exist before processing\njq -e '.data.metrics | length > 0' response.json && echo \"has metrics\"\n```\n\n### No Metrics Data\n\nService may be new or have no traffic. Check:\n- Service has active deployment (stopped services have no metrics)\n- Time range includes deployment period\n\n### Invalid Service/Environment ID\n\nVerify IDs with `railway status --json`.\n\n### Permission Denied\n\nUser needs access to the project to query metrics.\n",
        "plugins/railway/skills/metrics/references/environment-config.md": "# Environment Config Reference\n\nThe `EnvironmentConfig` object is used to configure services, volumes, and shared variables in Railway.\n\n## Structure\n\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"source\": { ... },\n      \"build\": { ... },\n      \"deploy\": { ... },\n      \"variables\": { ... },\n      \"networking\": { ... }\n    }\n  },\n  \"sharedVariables\": { ... },\n  \"volumes\": { ... },\n  \"buckets\": { ... }\n}\n```\n\nOnly include fields being changed. The patch is merged with existing config.\n\n## Service Config\n\n### Source\n| Field | Type | Description |\n|-------|------|-------------|\n| `image` | string | Docker image (e.g., `nginx:latest`) |\n| `repo` | string | Git repository URL |\n| `branch` | string | Git branch to deploy |\n| `commitSha` | string | Specific commit SHA |\n| `rootDirectory` | string | Root directory (monorepos) |\n| `checkSuites` | boolean | Wait for GitHub check suites |\n| `autoUpdates.type` | disabled \\| patch \\| minor | Auto-update policy for Docker images |\n\n### Build\n| Field | Type | Description |\n|-------|------|-------------|\n| `builder` | NIXPACKS \\| DOCKERFILE \\| RAILPACK | Build system |\n| `buildCommand` | string | Command for Nixpacks builds |\n| `dockerfilePath` | string | Path to Dockerfile |\n| `watchPatterns` | string[] | Patterns to trigger deploys |\n| `nixpacksConfigPath` | string | Path to nixpacks config |\n\n### Deploy\n| Field | Type | Description |\n|-------|------|-------------|\n| `startCommand` | string | Container start command |\n| `multiRegionConfig` | object | Region → replica config. See [Multi-Region Config](#multi-region-config). |\n| `healthcheckPath` | string | Health check endpoint |\n| `healthcheckTimeout` | number | Seconds to wait for health |\n| `restartPolicyType` | ON_FAILURE \\| ALWAYS \\| NEVER | Restart behavior |\n| `restartPolicyMaxRetries` | number | Max restart attempts |\n| `cronSchedule` | string | Cron schedule for cron jobs |\n| `sleepApplication` | boolean | Sleep when inactive |\n\n### Variables\n| Field | Type | Description |\n|-------|------|-------------|\n| `value` | string | Variable value |\n| `isOptional` | boolean | Allow empty value |\n\nSet to `null` to delete a variable.\n\nFor variable references, see [variables.md](variables.md).\n\n### Lifecycle\n| Field | Type | Description |\n|-------|------|-------------|\n| `isDeleted` | boolean | Mark for deletion (requires ADMIN) |\n| `isCreated` | boolean | Mark as newly created |\n\n## Multi-Region Config\n\nControls replica count per region. Structure: region name → `{ numReplicas }` or `null` to remove.\n\n```json\n{\n  \"multiRegionConfig\": {\n    \"us-west2\": { \"numReplicas\": 3 },\n    \"europe-west4-drams3a\": { \"numReplicas\": 2 }\n  }\n}\n```\n\n### Available Regions\n\n| Name | Location | Aliases |\n|------|----------|---------|\n| `us-west2` | US West (California) | \"us west\", \"california\" |\n| `us-east4-eqdc4a` | US East (Virginia) | \"us east\", \"virginia\" |\n| `europe-west4-drams3a` | EU West (Amsterdam) | \"europe\", \"eu\", \"amsterdam\" |\n| `asia-southeast1-eqsg3a` | Southeast Asia (Singapore) | \"asia\", \"singapore\" |\n\n### Interpreting User Requests\n\n- \"add 3 replicas to europe\" → `{ \"europe-west4-drams3a\": { \"numReplicas\": 3 } }`\n- \"add a replica to all regions\" → set `numReplicas: 1` for all 4 regions\n- \"remove from asia\" → `{ \"asia-southeast1-eqsg3a\": null }`\n- \"increase replicas to 5\" (no region specified) → query current config first, update existing region(s)\n\n**Important:** When user doesn't specify a region, query the current `multiRegionConfig` and modify the existing region(s). Don't assume a default region.\n\n## Common Operations\n\n### Set Build Command\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"buildCommand\": \"npm run build\" } } } }\n```\n\n### Set Start Command\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"startCommand\": \"node server.js\" } } } }\n```\n\n### Set Replicas\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"multiRegionConfig\": { \"us-west2\": { \"numReplicas\": 3 } } } } } }\n```\n\n### Add Variables\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"API_KEY\": { \"value\": \"xxx\" } } } } }\n```\n\n### Delete Variable\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"OLD_VAR\": null } } } }\n```\n\n### Add Shared Variable\n```json\n{ \"sharedVariables\": { \"DATABASE_URL\": { \"value\": \"postgres://...\" } } }\n```\n\n### Change Docker Image\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"image\": \"nginx:latest\" } } } }\n```\n\n### Connect GitHub Repo\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"repo\": \"owner/repo\", \"branch\": \"main\" } } } }\n```\n\n### Change Git Branch\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"branch\": \"develop\" } } } }\n```\n\n### Set Health Check\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"healthcheckPath\": \"/health\", \"healthcheckTimeout\": 30 } } } }\n```\n\n### Change Builder\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"builder\": \"DOCKERFILE\", \"dockerfilePath\": \"./Dockerfile\" } } } }\n```\n\n### Delete Service\n```json\n{ \"services\": { \"<serviceId>\": { \"isDeleted\": true } } }\n```\n\n### Delete Volume\n```json\n{ \"volumes\": { \"<volumeId>\": { \"isDeleted\": true } } }\n```\n\n### New Service Instance\n```json\n{ \"services\": { \"<serviceId>\": { \"isCreated\": true, \"source\": { \"image\": \"nginx\" } } } }\n```\n\n**Note:** `isCreated: true` is required for new service instances.\n",
        "plugins/railway/skills/metrics/references/monorepo.md": "# Monorepo Reference\n\nRailway supports two types of monorepo deployments with different configuration approaches.\n\n## Key Decision: Root Directory vs Custom Commands\n\n| Approach | When to Use | What Happens |\n|----------|-------------|--------------|\n| **Root Directory** | Isolated apps (no shared code) | Only that directory's code is available |\n| **Custom Commands** | Shared monorepos (TypeScript, workspaces) | Full repo available, filter at build/start |\n\n**Critical:** Setting root directory means code outside that directory is NOT available during build. For monorepos with shared packages, use custom commands instead.\n\n## Isolated Monorepo\n\nApps are completely independent - no shared code between directories.\n\n```\n├── frontend/        # React app (standalone)\n│   ├── package.json\n│   └── src/\n└── backend/         # Python API (standalone)\n    ├── requirements.txt\n    └── main.py\n```\n\n### Configuration\n\nSet **Root Directory** for each service:\n- Frontend service: `/frontend`\n- Backend service: `/backend`\n\nEach service only sees its own directory's code.\n\n### When to Use\n\n- Frontend and backend in different languages\n- No shared packages or dependencies\n- Each app has its own package.json/requirements.txt\n- Apps don't import from sibling directories\n\n## Shared Monorepo\n\nApps share code from common packages or the root.\n\n```\n├── package.json           # Root workspace config\n├── packages/\n│   ├── frontend/\n│   │   ├── package.json\n│   │   └── src/\n│   ├── backend/\n│   │   ├── package.json\n│   │   └── src/\n│   └── shared/            # Shared utilities\n│       ├── package.json\n│       └── src/\n└── tsconfig.json          # Shared TS config\n```\n\n### Configuration\n\nDo NOT set root directory. Instead, use custom build and start commands:\n\n**pnpm:**\n```\nBuild: pnpm --filter backend build\nStart: pnpm --filter backend start\n```\n\n**npm workspaces:**\n```\nBuild: npm run build --workspace=packages/backend\nStart: npm run start --workspace=packages/backend\n```\n\n**yarn workspaces:**\n```\nBuild: yarn workspace backend build\nStart: yarn workspace backend start\n```\n\n**bun:**\n```\nBuild: bun run --filter backend build\nStart: bun run --filter backend start\n```\n\n**Turborepo:**\n```\nBuild: turbo run build --filter=backend\nStart: turbo run start --filter=backend\n```\n\n### When to Use\n\n- TypeScript/JavaScript monorepo with workspaces\n- Packages import from sibling packages (`@myapp/shared`)\n- Shared tsconfig.json, eslint config at root\n- Using pnpm, yarn workspaces, npm workspaces, or bun\n- Using Turborepo, Nx, or similar build tools\n\n## Watch Paths\n\nPrevent changes in one package from triggering rebuilds of other services.\n\nSet watch paths for each service to only rebuild when relevant files change:\n\n| Service | Watch Paths |\n|---------|-------------|\n| frontend | `/packages/frontend/**`, `/packages/shared/**` |\n| backend | `/packages/backend/**`, `/packages/shared/**` |\n\nInclude shared packages in watch paths if the service depends on them.\n\n### Pattern Format\n\nUses gitignore-style patterns:\n```\n/packages/backend/**     # All files in backend\n/packages/shared/**      # All files in shared (if depends on it)\n!**/*.md                 # Ignore markdown changes\n```\n\n## Configuration Examples\n\n### Isolated: React + Python API\n\nTwo separate apps, no shared code.\n\n**Frontend service:**\n- Root Directory: `/frontend`\n- No custom commands needed (Railpack auto-detects)\n\n**Backend service:**\n- Root Directory: `/backend`\n- No custom commands needed\n\n### Shared: TypeScript Monorepo with pnpm\n\nFrontend and backend share a `@myapp/shared` package.\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter frontend build`\n- Start Command: `pnpm --filter frontend start`\n- Watch Paths: `/packages/frontend/**`, `/packages/shared/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter backend build`\n- Start Command: `pnpm --filter backend start`\n- Watch Paths: `/packages/backend/**`, `/packages/shared/**`\n\n### Shared: Turborepo\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=frontend`\n- Start Command: `turbo run start --filter=frontend`\n- Watch Paths: `/apps/frontend/**`, `/packages/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=backend`\n- Start Command: `turbo run start --filter=backend`\n- Watch Paths: `/apps/backend/**`, `/packages/**`\n\n## Common Mistakes\n\n### Using Root Directory for Shared Monorepos\n\n**Wrong:**\n```\nRoot Directory: /packages/backend\n```\nThis breaks builds because `@myapp/shared` isn't available.\n\n**Right:**\n```\nRoot Directory: (empty)\nBuild Command: pnpm --filter backend build\nStart Command: pnpm --filter backend start\n```\n\n### Forgetting Watch Paths\n\nWithout watch paths, changing `frontend/` triggers a rebuild of `backend/`.\n\nAlways set watch paths for monorepos to avoid unnecessary builds.\n\n### Missing Shared Packages in Watch Paths\n\nIf `backend` imports from `shared`, include both in watch paths:\n```\n/packages/backend/**\n/packages/shared/**\n```\n\nOtherwise changes to `shared` won't trigger backend rebuilds.\n\n## Detecting Monorepo Type\n\nCheck for these indicators:\n\n**Isolated monorepo:**\n- Separate package.json in each directory\n- No workspace config in root package.json\n- No imports between directories\n\n**Shared monorepo:**\n- Root package.json with `workspaces` field\n- `pnpm-workspace.yaml` exists\n- Packages import from each other (`@myapp/shared`)\n- Shared tsconfig.json at root\n- turbo.json or nx.json at root\n",
        "plugins/railway/skills/metrics/references/railpack.md": "# Railpack Reference\n\nRailpack is Railway's default builder. Zero-config for most projects.\n\nFull docs: https://railpack.com/llms.txt\n\n## Detection\n\nRailpack analyzes source code to detect language, framework, and build requirements automatically.\n\nSupported: Node, Python, Go, PHP, Java, Ruby, Rust, Elixir, Gleam, Deno, C/C++, static files.\n\n## Static Sites\n\n### Detection Patterns\n\nRailpack serves static files via Caddy when it detects:\n1. `Staticfile` in root (can specify `root: dist`)\n2. `index.html` in root\n3. `public/` directory\n4. `RAILPACK_STATIC_FILE_ROOT` env var set\n\n### Root Directory Priority\n\n1. `RAILPACK_STATIC_FILE_ROOT` env var\n2. `root` in `Staticfile`\n3. `public/` directory\n4. Current directory (if index.html exists)\n\n### Common Patterns\n\nRailpack auto-detects common static build outputs. Only set `RAILPACK_STATIC_FILE_ROOT` for non-standard output directories.\n\n| Framework | Build Output | Config Needed |\n|-----------|--------------|---------------|\n| Plain HTML | root | None (auto-detected) |\n| Vite | dist | None (auto-detected) |\n| Astro (static) | dist | None (auto-detected) |\n| Create React App | build | None (auto-detected) |\n| Angular | dist/<project> | `RAILPACK_STATIC_FILE_ROOT=dist/<project>` (non-standard path) |\n| Custom output | varies | Set if output dir is non-standard |\n\n### Custom Caddyfile\n\nPut a `Caddyfile` in project root to override default serving behavior.\n\n## Node.js\n\n### Detection\n- `package.json` in root\n\n### Version Priority\n1. `RAILPACK_NODE_VERSION` env var\n2. `engines.node` in package.json\n3. `.nvmrc` or `.node-version`\n4. Default: Node 22\n\n### Package Manager Detection\n1. `packageManager` field in package.json (enables Corepack)\n2. Lock file: `pnpm-lock.yaml`, `bun.lockb`, `yarn.lock`\n3. Default: npm\n\n### Build Command\nAuto-detected from package.json `scripts.build`. Override via `buildCommand` in service settings.\n\n### Start Command\nAuto-detected:\n1. `scripts.start` in package.json\n2. `main` field in package.json\n3. `index.js` or `index.ts` in root\n\nOverride via `startCommand` in service settings.\n\n### Framework Detection\n\n| Framework | Detection | Notes |\n|-----------|-----------|-------|\n| Next.js | `next` in dependencies | Caches `.next/cache` |\n| Vite | `vite` in devDependencies | Static or SSR mode |\n| Astro | `astro` in dependencies | Caches `.astro` |\n| Nuxt | `nuxt` in dependencies | Auto start command |\n| Remix | `@remix-run/*` in deps | - |\n\n### Static Site Mode (SPA)\n\nFor frameworks like Vite, CRA, Astro (static), Angular:\n- Railpack builds then serves via Caddy\n- Set `RAILPACK_SPA_OUTPUT_DIR` if output isn't `dist`\n\n## Python\n\n### Detection\n- `requirements.txt`, `pyproject.toml`, `Pipfile`, or `uv.lock`\n\n### Version Priority\n1. `RAILPACK_PYTHON_VERSION` env var\n2. `.python-version` file\n3. `requires-python` in pyproject.toml\n4. Default: Python 3.12\n\n### WSGI/ASGI Auto-Config\n\n| Framework | Start Command |\n|-----------|---------------|\n| Django | `gunicorn <project>.wsgi` |\n| FastAPI | `uvicorn main:app --host 0.0.0.0` |\n| Flask | `gunicorn app:app` |\n\nOverride via `startCommand` in service settings.\n\n## Go\n\n### Detection\n- `go.mod` in root\n\n### Build\nCompiles to binary automatically. For `cmd/` structure, set binary name or use `RAILPACK_GO_BIN`.\n\n## Rust\n\n### Detection\n- `Cargo.toml` in root\n\n### Build\nRelease build by default. Binary auto-detected from Cargo.toml.\n\n## Configuration\n\n### Preferred: Service Settings\n\nUse `environment` skill to set:\n- `buildCommand` - Custom build command\n- `startCommand` - Custom start command\n\nThese are stored in Railway and don't pollute your codebase.\n\n### Environment Variables\n\n| Variable | Purpose |\n|----------|---------|\n| `RAILPACK_STATIC_FILE_ROOT` | Static file serving directory |\n| `RAILPACK_SPA_OUTPUT_DIR` | SPA build output (defaults to `dist`) |\n| `RAILPACK_NODE_VERSION` | Node.js version |\n| `RAILPACK_PYTHON_VERSION` | Python version |\n| `RAILPACK_GO_BIN` | Go binary name |\n| `RAILPACK_PACKAGES` | Additional Mise packages (`pkg@version`) |\n| `RAILPACK_BUILD_APT_PACKAGES` | System packages for build |\n| `RAILPACK_DEPLOY_APT_PACKAGES` | System packages for runtime |\n\n### railpack.json\n\nAdvanced config for custom build steps:\n\n```json\n{\n  \"$schema\": \"https://schema.railpack.com\",\n  \"packages\": {\n    \"ffmpeg\": \"latest\"\n  },\n  \"deploy\": {\n    \"aptPackages\": [\"libmagic1\"]\n  }\n}\n```\n\n### railway.toml\n\nAlternative config format:\n\n```toml\n[build]\nbuilder = \"RAILPACK\"\nbuildCommand = \"npm run build\"\n\n[deploy]\nstartCommand = \"npm start\"\n```\n\n## Minimal Project Scaffolding\n\nWhen no code exists, suggest these patterns:\n\n### Static HTML\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>My Site</title>\n</head>\n<body>\n  <h1>Hello Railway</h1>\n</body>\n</html>\n```\n\n### Vite React\n```bash\nnpm create vite@latest . -- --template react\n```\n\n### Astro\n```bash\nnpm create astro@latest\n```\n\n### Python FastAPI\n```python\n# main.py\nfrom fastapi import FastAPI\napp = FastAPI()\n\n@app.get(\"/\")\ndef root():\n    return {\"message\": \"Hello Railway\"}\n```\n\n```txt\n# requirements.txt\nfastapi\nuvicorn\n```\n\n### Go HTTP Server\n```go\n// main.go\npackage main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"8080\"\n    }\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        fmt.Fprintf(w, \"Hello Railway\")\n    })\n    http.ListenAndServe(\":\"+port, nil)\n}\n```\n\n## Troubleshooting\n\n| Issue | Solution |\n|-------|----------|\n| Static site 404s | Check output dir - set `RAILPACK_STATIC_FILE_ROOT` if non-standard |\n| Wrong build command | Use `environment` skill to set `buildCommand` |\n| Wrong start command | Use `environment` skill to set `startCommand` |\n| Missing system package | Add to `RAILPACK_BUILD_APT_PACKAGES` or `RAILPACK_DEPLOY_APT_PACKAGES` |\n| Wrong Node version | Set `RAILPACK_NODE_VERSION` or add `.nvmrc` |\n| Wrong Python version | Set `RAILPACK_PYTHON_VERSION` or add `.python-version` |\n",
        "plugins/railway/skills/metrics/references/variables.md": "# Variables Reference\n\nVariables in Railway support references to other services, shared variables, and Railway-provided values.\n\n## Template Syntax\n\n```\n${{NAMESPACE.VAR}}\n```\n\n| Namespace | Description |\n|-----------|-------------|\n| `shared` | Shared variables (project-wide) |\n| `<serviceName>` | Variables from another service (case-sensitive) |\n\n## Examples\n\n**Reference shared variable:**\n```json\n{ \"value\": \"${{shared.DOMAIN}}\" }\n```\n\n**Reference another service's variable:**\n```json\n{ \"value\": \"${{api.API_KEY}}\" }\n```\n\n**Combine with text:**\n```json\n{ \"value\": \"https://${{shared.DOMAIN}}/api\" }\n```\n\n## Railway-Provided Variables\n\nRailway injects these into every service automatically.\n\n### Networking\n| Variable | Description | Example | Availability |\n|----------|-------------|---------|--------------|\n| `RAILWAY_PUBLIC_DOMAIN` | Public domain | `myapp.up.railway.app` | Only if service has a domain |\n| `RAILWAY_PRIVATE_DOMAIN` | Private DNS (internal only) | `myapp.railway.internal` | Always |\n| `RAILWAY_TCP_PROXY_DOMAIN` | TCP proxy domain | `roundhouse.proxy.rlwy.net` | Only if TCP proxy enabled |\n| `RAILWAY_TCP_PROXY_PORT` | TCP proxy port | `11105` | Only if TCP proxy enabled |\n\n**Note:** `RAILWAY_PUBLIC_DOMAIN` is only available if the service has a domain configured.\nCheck the service's environment config to verify a domain exists before referencing it.\n\n### Context\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_PROJECT_ID` | Project ID |\n| `RAILWAY_PROJECT_NAME` | Project name |\n| `RAILWAY_ENVIRONMENT_ID` | Environment ID |\n| `RAILWAY_ENVIRONMENT_NAME` | Environment name |\n| `RAILWAY_SERVICE_ID` | Service ID |\n| `RAILWAY_SERVICE_NAME` | Service name |\n| `RAILWAY_DEPLOYMENT_ID` | Deployment ID |\n| `RAILWAY_REPLICA_ID` | Replica ID |\n| `RAILWAY_REPLICA_REGION` | Region (e.g., `us-west2`) |\n\n### Volume (if attached)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_VOLUME_NAME` | Volume name |\n| `RAILWAY_VOLUME_MOUNT_PATH` | Mount path |\n\n### Git (if deployed from GitHub)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_GIT_COMMIT_SHA` | Commit SHA |\n| `RAILWAY_GIT_BRANCH` | Branch name |\n| `RAILWAY_GIT_REPO_NAME` | Repository name |\n| `RAILWAY_GIT_REPO_OWNER` | Repository owner |\n| `RAILWAY_GIT_AUTHOR` | Commit author |\n| `RAILWAY_GIT_COMMIT_MESSAGE` | Commit message |\n\n## Wiring Services Together\n\n### Frontend → Backend (public network)\nUse when: Browser makes requests to API (browser can't access private network)\n\n```json\n{\n  \"services\": {\n    \"<frontendId>\": {\n      \"variables\": {\n        \"API_URL\": { \"value\": \"https://${{backend.RAILWAY_PUBLIC_DOMAIN}}\" }\n      }\n    }\n  }\n}\n```\n\n### Service → Database (private network)\nUse when: Backend connects to database (faster, no egress cost, more secure)\n\nRailway databases auto-generate connection URL variables. Use the private versions:\n\n| Database | Variable Reference |\n|----------|-------------------|\n| Postgres | `${{Postgres.DATABASE_URL}}` |\n| MySQL | `${{MySQL.DATABASE_URL}}` |\n| Redis | `${{Redis.REDIS_URL}}` |\n| Mongo | `${{Mongo.MONGO_URL}}` |\n\n**Postgres/MySQL example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"DATABASE_URL\": { \"value\": \"${{Postgres.DATABASE_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Redis example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"REDIS_URL\": { \"value\": \"${{Redis.REDIS_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Mongo example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"MONGO_URL\": { \"value\": \"${{Mongo.MONGO_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Note:** Service names are case-sensitive. Match the exact name from your project (e.g., \"Postgres\", \"Redis\").\n\n### Service → Service (private network)\nUse when: Microservices communicate internally\n\n```json\n{\n  \"services\": {\n    \"<workerServiceId>\": {\n      \"variables\": {\n        \"API_INTERNAL_URL\": { \"value\": \"http://${{api.RAILWAY_PRIVATE_DOMAIN}}:${{api.PORT}}\" }\n      }\n    }\n  }\n}\n```\n\n## When to Use Public vs Private\n\n| Use Case | Domain | Reason |\n|----------|--------|--------|\n| Browser → API | Public | Browser can't access private network |\n| Service → Service | Private | Faster, no egress, more secure |\n| Service → Database | Private | Databases should never be public |\n| External webhook → Service | Public | External services need public access |\n| Cron job → API | Private | Internal communication |\n",
        "plugins/railway/skills/new/SKILL.md": "---\nname: new\ndescription: This skill should be used when the user says \"setup\", \"deploy to railway\", \"initialize\", \"create project\", \"create service\", or wants to deploy from GitHub. Handles initial setup AND adding services to existing projects. For databases, use the database skill instead.\nallowed-tools: Bash(railway:*), Bash(which:*), Bash(command:*), Bash(npm:*), Bash(npx:*)\n---\n\n# New Project / Service / Database\n\nCreate Railway projects, services, and databases with proper configuration.\n\n## When to Use\n\n- User says \"deploy to railway\" (add service if linked, init if not)\n- User says \"create a railway project\", \"init\", \"new project\" (explicit new project)\n- User says \"link to railway\", \"connect to railway\"\n- User says \"create a service\", \"add a backend\", \"new api service\"\n- User says \"create a vite app\", \"create a react website\", \"make a python api\"\n- User says \"deploy from github.com/user/repo\", \"create service from this repo\"\n- User says \"add postgres\", \"add a database\", \"add redis\", \"add mysql\", \"add mongo\"\n- User says \"connect to postgres\", \"wire up the database\", \"connect my api to redis\"\n- User says \"add postgres and connect to the server\"\n- Setting up code + Railway service together\n\n## Prerequisites\n\nCheck CLI installed:\n\n```bash\ncommand -v railway\n```\n\nIf not installed:\n\n> Install Railway CLI:\n>\n> ```\n> npm install -g @railway/cli\n> ```\n>\n> or\n>\n> ```\n> brew install railway\n> ```\n\nCheck authenticated:\n\n```bash\nrailway whoami --json\n```\n\nIf not authenticated:\n\n> Run `railway login` to authenticate.\n\n## Decision Flow\n\n```\nrailway status --json (in current dir)\n     │\n┌────┴────┐\nLinked    Not Linked\n  │            │\n  │       Check parent: cd .. && railway status --json\n  │            │\n  │       ┌────┴────┐\n  │    Parent      Not linked\n  │    Linked      anywhere\n  │       │            │\n  │   Add service   railway list\n  │   Set rootDir      │\n  │   Deploy       ┌───┴───┐\n  │       │      Match?  No match\n  │       │        │        │\n  │       │      Link    Init new\n  └───────┴────────┴────────┘\n           │\n    User wants service?\n           │\n     ┌─────┴─────┐\n    Yes         No\n     │           │\nScaffold code   Done\n     │\nrailway add --service\n     │\nConfigure if needed\n     │\nReady to deploy\n```\n\n## Check Current State\n\n```bash\nrailway status --json\n```\n\n- **If linked**: Add a service to the existing project (see below)\n- **If not linked**: Check if a PARENT directory is linked (see below)\n\n### When Already Linked\n\n**Default behavior**: \"deploy to railway\" = add a service to the linked project.\n\nDo NOT create a new project unless user EXPLICITLY says:\n\n- \"new project\", \"create a project\", \"init a project\"\n- \"separate project\", \"different project\"\n\nApp names like \"flappy-bird\" or \"my-api\" are SERVICE names, not project names.\n\n```\nUser: \"create a vite app called foo and deploy to railway\"\nProject: Already linked to \"my-project\"\n\nWRONG: railway init -n foo\nRIGHT: railway add --service foo\n```\n\n### Parent Directory Linking\n\nRailway CLI walks up the directory tree to find a linked project. If you're in a subdirectory:\n\n```bash\ncd .. && railway status --json\n```\n\n**If parent is linked**, you don't need to init/link the subdirectory. Instead:\n\n1. Create service: `railway add --service <name>`\n2. Set `rootDirectory` to subdirectory path via environment skill\n3. Deploy from root: `railway up`\n\n**If no parent is linked**, proceed with init or link flow.\n\n## Init vs Link Decision\n\n**Skip this section if already linked** - just add a service instead.\n\nOnly use this section when NO project is linked (directly or via parent).\n\n### Check User's Projects\n\nThe output can be large. Run in a subagent and extract only:\n- Project `id` and `name`\n- Workspace `id` and `name`\n\n```bash\nrailway list --json\n```\n\n### Decision Logic\n\n1. **User explicitly says \"new project\"** → Use `railway init`\n2. **User names an existing project** → Use `railway link`\n3. **Directory name matches existing project** → Ask: link existing or create new?\n4. **No matching projects** → Use `railway init`\n5. **Ambiguous** → Ask user\n\n## Create New Project\n\n```bash\nrailway init -n <name>\n```\n\nOptions:\n\n- `-n, --name` - Project name (auto-generated if omitted in non-interactive mode)\n- `-w, --workspace` - Workspace name or ID (required if multiple workspaces exist)\n\n### Multiple Workspaces\n\nIf the user has multiple workspaces, `railway init` requires the `--workspace` flag.\n\nGet workspace IDs from:\n\n```bash\nrailway whoami --json\n```\n\nThe `workspaces` array contains `{ id, name }` for each workspace.\n\n**Inferring workspace from user input:**\nIf user says \"deploy into xxx workspace\" or \"create project in my-team\", match the\nname against the workspaces array and use the corresponding ID:\n\n```bash\n# User says: \"create a project in my personal workspace\"\nrailway whoami --json | jq '.workspaces[] | select(.name | test(\"personal\"; \"i\"))'\n# Use the matched ID: railway init -n myapp --workspace <matched-id>\n```\n\n## Link Existing Project\n\n```bash\nrailway link -p <project>\n```\n\nOptions:\n\n- `-p, --project` - Project name or ID\n- `-e, --environment` - Environment (default: production)\n- `-s, --service` - Service to link\n- `-t, --team` - Team/workspace\n\n## Create Service\n\nAfter project is linked, create a service:\n\n```bash\nrailway add --service <name>\n```\n\n**For GitHub repo sources**: Create an empty service, then invoke the `environment` skill to configure the source via staged changes API. Do NOT use `railway add --repo` - it requires GitHub app integration which often fails.\n\nFlow:\n\n1. `railway add --service my-api`\n2. Invoke `environment` skill to set `source.repo` and `source.branch`\n3. Apply changes to trigger deployment\n\n### Configure Based on Project Type\n\nReference [railpack.md](references/railpack.md) for build configuration.\nReference [monorepo.md](references/monorepo.md) for monorepo patterns.\n\n**Static site (Vite, CRA, Astro static):**\n\n- Railpack auto-detects common output dirs (dist, build)\n- If non-standard output dir: invoke `environment` skill to set `RAILPACK_STATIC_FILE_ROOT`\n- Do NOT use `railway variables` CLI - always use the environment skill\n\n**Node.js SSR (Next.js, Nuxt, Express):**\n\n- Verify `start` script exists in package.json\n- If custom start needed: invoke `environment` skill to set `startCommand`\n\n**Python (FastAPI, Django, Flask):**\n\n- Verify `requirements.txt` or `pyproject.toml` exists\n- Auto-detected by Railpack, usually no config needed\n\n**Go:**\n\n- Verify `go.mod` exists\n- Auto-detected, no config needed\n\n### Monorepo Configuration\n\n**Critical decision:** Root directory vs custom commands.\n\n**Isolated monorepo** (apps don't share code):\n\n- Set Root Directory to the app's subdirectory (e.g., `/frontend`)\n- Only that directory's code is available during build\n\n**Shared monorepo** (TypeScript workspaces, shared packages):\n\n- Do NOT set root directory\n- Set custom build/start commands to filter the package:\n  - pnpm: `pnpm --filter <package> build`\n  - npm: `npm run build --workspace=packages/<package>`\n  - yarn: `yarn workspace <package> build`\n  - Turborepo: `turbo run build --filter=<package>`\n- Set watch paths to prevent unnecessary rebuilds\n\nSee [monorepo.md](references/monorepo.md) for detailed patterns.\n\n## Project Setup Guidance\n\nAnalyze the codebase to ensure Railway compatibility.\n\n### Analyze Codebase\n\nCheck for existing project files:\n\n- `package.json` → Node.js project\n- `requirements.txt`, `pyproject.toml` → Python project\n- `go.mod` → Go project\n- `Cargo.toml` → Rust project\n- `index.html` → Static site\n- None → Guide scaffolding\n\n**Monorepo detection:**\n\n- `pnpm-workspace.yaml` → pnpm workspace (shared monorepo)\n- `package.json` with `workspaces` field → npm/yarn workspace (shared monorepo)\n- `turbo.json` → Turborepo (shared monorepo)\n- Multiple subdirs with separate `package.json` but no workspace config → isolated monorepo\n\n### Scaffolding Hints\n\nIf no code exists, suggest minimal patterns from [railpack.md](references/railpack.md):\n\n**Static site:**\n\n> Create an `index.html` file in the root directory.\n\n**Vite React:**\n\n```bash\nnpm create vite@latest . -- --template react\n```\n\n**Astro:**\n\n```bash\nnpm create astro@latest\n```\n\n**Python FastAPI:**\n\n> Create `main.py` with FastAPI app and `requirements.txt` with dependencies.\n\n**Go:**\n\n> Create `main.go` with HTTP server listening on `PORT` env var.\n\n## Databases\n\nFor adding databases (Postgres, Redis, MySQL, MongoDB), use the `database` skill.\n\nThe `database` skill handles:\n- Creating database services\n- Connection variable references\n- Wiring services to databases\n\n## Composability\n\n- **After service created**: Use `deploy` skill to push code\n- **For advanced config**: Use `environment` skill (buildCommand, startCommand)\n- **For domains**: Use `domain` skill\n- **For status checks**: Use `status` skill\n- **For service operations** (rename, delete, status): Use `service` skill\n\n## Error Handling\n\n### CLI Not Installed\n\n```\nRailway CLI not installed. Install with:\n  npm install -g @railway/cli\nor\n  brew install railway\n```\n\n### Not Authenticated\n\n```\nNot logged in to Railway. Run: railway login\n```\n\n### No Workspaces\n\n```\nNo workspaces found. Create one at railway.com or verify authentication.\n```\n\n### Project Name Taken\n\n```\nProject name already exists. Either:\n- Link to existing: railway link -p <name>\n- Use different name: railway init -n <other-name>\n```\n\n### Service Name Taken\n\n```\nService name already exists in this project. Use a different name:\n  railway add --service <other-name>\n```\n\n## Examples\n\n### Create HTML Static Site\n\n```\nUser: \"create a simple html site and deploy to railway\"\n\n1. Check status → not linked\n2. railway init -n my-site\n3. Guide: create index.html\n4. railway add --service my-site\n5. No config needed (index.html in root auto-detected)\n6. Use deploy skill: railway up\n7. Use domain skill for public URL\n```\n\n### Create Vite React Service\n\n```\nUser: \"create a vite react service\"\n\n1. Check status → linked (or init/link first)\n2. Scaffold: npm create vite@latest frontend -- --template react\n3. railway add --service frontend\n4. No config needed (Vite dist output auto-detected)\n5. Use deploy skill: railway up\n```\n\n### Add Python API to Project\n\n```\nUser: \"add a python api to my project\"\n\n1. Check status → linked\n2. Guide: create main.py with FastAPI, requirements.txt\n3. railway add --service api\n4. No config needed (FastAPI auto-detected)\n5. Use deploy skill\n```\n\n### Link and Add Service\n\n```\nUser: \"connect to my backend project and add a worker service\"\n\n1. railway list --json → find \"backend\"\n2. railway link -p backend\n3. railway add --service worker\n4. Guide setup based on worker type\n```\n\n### Deploy to Railway (Ambiguous)\n\n```\nUser: \"deploy to railway\"\n\n1. railway status → not linked\n2. railway list → has projects\n3. Directory is \"my-app\", found project \"my-app\"\n4. Ask: \"Found existing project 'my-app'. Link to it or create new?\"\n5. User: \"link\"\n6. railway link -p my-app\n7. Ask: \"Create a service for this code?\"\n```\n\n### Add Service to Isolated Monorepo\n\n```\nUser: \"create a static site in the frontend directory\"\n\n1. Check: /frontend has its own package.json, no workspace config\n2. This is isolated monorepo → use root directory\n3. railway add --service frontend\n4. Invoke environment skill to set rootDirectory: /frontend\n5. Set watch paths: /frontend/**\n```\n\n### Add Service to TypeScript Monorepo\n\n```\nUser: \"add a new api package to this turborepo\"\n\n1. Check: turbo.json exists, pnpm-workspace.yaml exists\n2. This is shared monorepo → use custom commands, NOT root directory\n3. Guide: create packages/api with package.json\n4. railway add --service api\n5. Invoke environment skill to set buildCommand and startCommand (do NOT set rootDirectory)\n6. Set watch paths: /packages/api/**, /packages/shared/**\n```\n\n### Deploy Existing pnpm Workspace Package\n\n```\nUser: \"deploy the backend package to railway\"\n\n1. Check: pnpm-workspace.yaml exists → shared monorepo\n2. railway add --service backend\n3. Invoke environment skill to set buildCommand and startCommand\n4. Set watch paths for backend + any shared deps\n```\n\n### Deploy Subdirectory of Linked Project\n\n```\nUser: \"create a vite app in my-app directory and deploy to railway\"\nCWD: ~/projects/my-project/my-app (parent already linked to \"my-project\")\n\n1. Check status in my-app → not linked\n2. Check parent: cd .. && railway status → IS linked to \"my-project\"\n3. DON'T init/link the subdirectory\n4. Scaffold: bun create vite my-app --template react-ts\n5. cd my-app && bun install\n6. railway add --service my-app\n7. Invoke environment skill to set rootDirectory: /my-app\n8. Deploy from root: railway up\n```\n",
        "plugins/railway/skills/new/references/environment-config.md": "# Environment Config Reference\n\nThe `EnvironmentConfig` object is used to configure services, volumes, and shared variables in Railway.\n\n## Structure\n\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"source\": { ... },\n      \"build\": { ... },\n      \"deploy\": { ... },\n      \"variables\": { ... },\n      \"networking\": { ... }\n    }\n  },\n  \"sharedVariables\": { ... },\n  \"volumes\": { ... },\n  \"buckets\": { ... }\n}\n```\n\nOnly include fields being changed. The patch is merged with existing config.\n\n## Service Config\n\n### Source\n| Field | Type | Description |\n|-------|------|-------------|\n| `image` | string | Docker image (e.g., `nginx:latest`) |\n| `repo` | string | Git repository URL |\n| `branch` | string | Git branch to deploy |\n| `commitSha` | string | Specific commit SHA |\n| `rootDirectory` | string | Root directory (monorepos) |\n| `checkSuites` | boolean | Wait for GitHub check suites |\n| `autoUpdates.type` | disabled \\| patch \\| minor | Auto-update policy for Docker images |\n\n### Build\n| Field | Type | Description |\n|-------|------|-------------|\n| `builder` | NIXPACKS \\| DOCKERFILE \\| RAILPACK | Build system |\n| `buildCommand` | string | Command for Nixpacks builds |\n| `dockerfilePath` | string | Path to Dockerfile |\n| `watchPatterns` | string[] | Patterns to trigger deploys |\n| `nixpacksConfigPath` | string | Path to nixpacks config |\n\n### Deploy\n| Field | Type | Description |\n|-------|------|-------------|\n| `startCommand` | string | Container start command |\n| `multiRegionConfig` | object | Region → replica config. See [Multi-Region Config](#multi-region-config). |\n| `healthcheckPath` | string | Health check endpoint |\n| `healthcheckTimeout` | number | Seconds to wait for health |\n| `restartPolicyType` | ON_FAILURE \\| ALWAYS \\| NEVER | Restart behavior |\n| `restartPolicyMaxRetries` | number | Max restart attempts |\n| `cronSchedule` | string | Cron schedule for cron jobs |\n| `sleepApplication` | boolean | Sleep when inactive |\n\n### Variables\n| Field | Type | Description |\n|-------|------|-------------|\n| `value` | string | Variable value |\n| `isOptional` | boolean | Allow empty value |\n\nSet to `null` to delete a variable.\n\nFor variable references, see [variables.md](variables.md).\n\n### Lifecycle\n| Field | Type | Description |\n|-------|------|-------------|\n| `isDeleted` | boolean | Mark for deletion (requires ADMIN) |\n| `isCreated` | boolean | Mark as newly created |\n\n## Multi-Region Config\n\nControls replica count per region. Structure: region name → `{ numReplicas }` or `null` to remove.\n\n```json\n{\n  \"multiRegionConfig\": {\n    \"us-west2\": { \"numReplicas\": 3 },\n    \"europe-west4-drams3a\": { \"numReplicas\": 2 }\n  }\n}\n```\n\n### Available Regions\n\n| Name | Location | Aliases |\n|------|----------|---------|\n| `us-west2` | US West (California) | \"us west\", \"california\" |\n| `us-east4-eqdc4a` | US East (Virginia) | \"us east\", \"virginia\" |\n| `europe-west4-drams3a` | EU West (Amsterdam) | \"europe\", \"eu\", \"amsterdam\" |\n| `asia-southeast1-eqsg3a` | Southeast Asia (Singapore) | \"asia\", \"singapore\" |\n\n### Interpreting User Requests\n\n- \"add 3 replicas to europe\" → `{ \"europe-west4-drams3a\": { \"numReplicas\": 3 } }`\n- \"add a replica to all regions\" → set `numReplicas: 1` for all 4 regions\n- \"remove from asia\" → `{ \"asia-southeast1-eqsg3a\": null }`\n- \"increase replicas to 5\" (no region specified) → query current config first, update existing region(s)\n\n**Important:** When user doesn't specify a region, query the current `multiRegionConfig` and modify the existing region(s). Don't assume a default region.\n\n## Common Operations\n\n### Set Build Command\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"buildCommand\": \"npm run build\" } } } }\n```\n\n### Set Start Command\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"startCommand\": \"node server.js\" } } } }\n```\n\n### Set Replicas\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"multiRegionConfig\": { \"us-west2\": { \"numReplicas\": 3 } } } } } }\n```\n\n### Add Variables\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"API_KEY\": { \"value\": \"xxx\" } } } } }\n```\n\n### Delete Variable\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"OLD_VAR\": null } } } }\n```\n\n### Add Shared Variable\n```json\n{ \"sharedVariables\": { \"DATABASE_URL\": { \"value\": \"postgres://...\" } } }\n```\n\n### Change Docker Image\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"image\": \"nginx:latest\" } } } }\n```\n\n### Connect GitHub Repo\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"repo\": \"owner/repo\", \"branch\": \"main\" } } } }\n```\n\n### Change Git Branch\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"branch\": \"develop\" } } } }\n```\n\n### Set Health Check\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"healthcheckPath\": \"/health\", \"healthcheckTimeout\": 30 } } } }\n```\n\n### Change Builder\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"builder\": \"DOCKERFILE\", \"dockerfilePath\": \"./Dockerfile\" } } } }\n```\n\n### Delete Service\n```json\n{ \"services\": { \"<serviceId>\": { \"isDeleted\": true } } }\n```\n\n### Delete Volume\n```json\n{ \"volumes\": { \"<volumeId>\": { \"isDeleted\": true } } }\n```\n\n### New Service Instance\n```json\n{ \"services\": { \"<serviceId>\": { \"isCreated\": true, \"source\": { \"image\": \"nginx\" } } } }\n```\n\n**Note:** `isCreated: true` is required for new service instances.\n",
        "plugins/railway/skills/new/references/monorepo.md": "# Monorepo Reference\n\nRailway supports two types of monorepo deployments with different configuration approaches.\n\n## Key Decision: Root Directory vs Custom Commands\n\n| Approach | When to Use | What Happens |\n|----------|-------------|--------------|\n| **Root Directory** | Isolated apps (no shared code) | Only that directory's code is available |\n| **Custom Commands** | Shared monorepos (TypeScript, workspaces) | Full repo available, filter at build/start |\n\n**Critical:** Setting root directory means code outside that directory is NOT available during build. For monorepos with shared packages, use custom commands instead.\n\n## Isolated Monorepo\n\nApps are completely independent - no shared code between directories.\n\n```\n├── frontend/        # React app (standalone)\n│   ├── package.json\n│   └── src/\n└── backend/         # Python API (standalone)\n    ├── requirements.txt\n    └── main.py\n```\n\n### Configuration\n\nSet **Root Directory** for each service:\n- Frontend service: `/frontend`\n- Backend service: `/backend`\n\nEach service only sees its own directory's code.\n\n### When to Use\n\n- Frontend and backend in different languages\n- No shared packages or dependencies\n- Each app has its own package.json/requirements.txt\n- Apps don't import from sibling directories\n\n## Shared Monorepo\n\nApps share code from common packages or the root.\n\n```\n├── package.json           # Root workspace config\n├── packages/\n│   ├── frontend/\n│   │   ├── package.json\n│   │   └── src/\n│   ├── backend/\n│   │   ├── package.json\n│   │   └── src/\n│   └── shared/            # Shared utilities\n│       ├── package.json\n│       └── src/\n└── tsconfig.json          # Shared TS config\n```\n\n### Configuration\n\nDo NOT set root directory. Instead, use custom build and start commands:\n\n**pnpm:**\n```\nBuild: pnpm --filter backend build\nStart: pnpm --filter backend start\n```\n\n**npm workspaces:**\n```\nBuild: npm run build --workspace=packages/backend\nStart: npm run start --workspace=packages/backend\n```\n\n**yarn workspaces:**\n```\nBuild: yarn workspace backend build\nStart: yarn workspace backend start\n```\n\n**bun:**\n```\nBuild: bun run --filter backend build\nStart: bun run --filter backend start\n```\n\n**Turborepo:**\n```\nBuild: turbo run build --filter=backend\nStart: turbo run start --filter=backend\n```\n\n### When to Use\n\n- TypeScript/JavaScript monorepo with workspaces\n- Packages import from sibling packages (`@myapp/shared`)\n- Shared tsconfig.json, eslint config at root\n- Using pnpm, yarn workspaces, npm workspaces, or bun\n- Using Turborepo, Nx, or similar build tools\n\n## Watch Paths\n\nPrevent changes in one package from triggering rebuilds of other services.\n\nSet watch paths for each service to only rebuild when relevant files change:\n\n| Service | Watch Paths |\n|---------|-------------|\n| frontend | `/packages/frontend/**`, `/packages/shared/**` |\n| backend | `/packages/backend/**`, `/packages/shared/**` |\n\nInclude shared packages in watch paths if the service depends on them.\n\n### Pattern Format\n\nUses gitignore-style patterns:\n```\n/packages/backend/**     # All files in backend\n/packages/shared/**      # All files in shared (if depends on it)\n!**/*.md                 # Ignore markdown changes\n```\n\n## Configuration Examples\n\n### Isolated: React + Python API\n\nTwo separate apps, no shared code.\n\n**Frontend service:**\n- Root Directory: `/frontend`\n- No custom commands needed (Railpack auto-detects)\n\n**Backend service:**\n- Root Directory: `/backend`\n- No custom commands needed\n\n### Shared: TypeScript Monorepo with pnpm\n\nFrontend and backend share a `@myapp/shared` package.\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter frontend build`\n- Start Command: `pnpm --filter frontend start`\n- Watch Paths: `/packages/frontend/**`, `/packages/shared/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter backend build`\n- Start Command: `pnpm --filter backend start`\n- Watch Paths: `/packages/backend/**`, `/packages/shared/**`\n\n### Shared: Turborepo\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=frontend`\n- Start Command: `turbo run start --filter=frontend`\n- Watch Paths: `/apps/frontend/**`, `/packages/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=backend`\n- Start Command: `turbo run start --filter=backend`\n- Watch Paths: `/apps/backend/**`, `/packages/**`\n\n## Common Mistakes\n\n### Using Root Directory for Shared Monorepos\n\n**Wrong:**\n```\nRoot Directory: /packages/backend\n```\nThis breaks builds because `@myapp/shared` isn't available.\n\n**Right:**\n```\nRoot Directory: (empty)\nBuild Command: pnpm --filter backend build\nStart Command: pnpm --filter backend start\n```\n\n### Forgetting Watch Paths\n\nWithout watch paths, changing `frontend/` triggers a rebuild of `backend/`.\n\nAlways set watch paths for monorepos to avoid unnecessary builds.\n\n### Missing Shared Packages in Watch Paths\n\nIf `backend` imports from `shared`, include both in watch paths:\n```\n/packages/backend/**\n/packages/shared/**\n```\n\nOtherwise changes to `shared` won't trigger backend rebuilds.\n\n## Detecting Monorepo Type\n\nCheck for these indicators:\n\n**Isolated monorepo:**\n- Separate package.json in each directory\n- No workspace config in root package.json\n- No imports between directories\n\n**Shared monorepo:**\n- Root package.json with `workspaces` field\n- `pnpm-workspace.yaml` exists\n- Packages import from each other (`@myapp/shared`)\n- Shared tsconfig.json at root\n- turbo.json or nx.json at root\n",
        "plugins/railway/skills/new/references/railpack.md": "# Railpack Reference\n\nRailpack is Railway's default builder. Zero-config for most projects.\n\nFull docs: https://railpack.com/llms.txt\n\n## Detection\n\nRailpack analyzes source code to detect language, framework, and build requirements automatically.\n\nSupported: Node, Python, Go, PHP, Java, Ruby, Rust, Elixir, Gleam, Deno, C/C++, static files.\n\n## Static Sites\n\n### Detection Patterns\n\nRailpack serves static files via Caddy when it detects:\n1. `Staticfile` in root (can specify `root: dist`)\n2. `index.html` in root\n3. `public/` directory\n4. `RAILPACK_STATIC_FILE_ROOT` env var set\n\n### Root Directory Priority\n\n1. `RAILPACK_STATIC_FILE_ROOT` env var\n2. `root` in `Staticfile`\n3. `public/` directory\n4. Current directory (if index.html exists)\n\n### Common Patterns\n\nRailpack auto-detects common static build outputs. Only set `RAILPACK_STATIC_FILE_ROOT` for non-standard output directories.\n\n| Framework | Build Output | Config Needed |\n|-----------|--------------|---------------|\n| Plain HTML | root | None (auto-detected) |\n| Vite | dist | None (auto-detected) |\n| Astro (static) | dist | None (auto-detected) |\n| Create React App | build | None (auto-detected) |\n| Angular | dist/<project> | `RAILPACK_STATIC_FILE_ROOT=dist/<project>` (non-standard path) |\n| Custom output | varies | Set if output dir is non-standard |\n\n### Custom Caddyfile\n\nPut a `Caddyfile` in project root to override default serving behavior.\n\n## Node.js\n\n### Detection\n- `package.json` in root\n\n### Version Priority\n1. `RAILPACK_NODE_VERSION` env var\n2. `engines.node` in package.json\n3. `.nvmrc` or `.node-version`\n4. Default: Node 22\n\n### Package Manager Detection\n1. `packageManager` field in package.json (enables Corepack)\n2. Lock file: `pnpm-lock.yaml`, `bun.lockb`, `yarn.lock`\n3. Default: npm\n\n### Build Command\nAuto-detected from package.json `scripts.build`. Override via `buildCommand` in service settings.\n\n### Start Command\nAuto-detected:\n1. `scripts.start` in package.json\n2. `main` field in package.json\n3. `index.js` or `index.ts` in root\n\nOverride via `startCommand` in service settings.\n\n### Framework Detection\n\n| Framework | Detection | Notes |\n|-----------|-----------|-------|\n| Next.js | `next` in dependencies | Caches `.next/cache` |\n| Vite | `vite` in devDependencies | Static or SSR mode |\n| Astro | `astro` in dependencies | Caches `.astro` |\n| Nuxt | `nuxt` in dependencies | Auto start command |\n| Remix | `@remix-run/*` in deps | - |\n\n### Static Site Mode (SPA)\n\nFor frameworks like Vite, CRA, Astro (static), Angular:\n- Railpack builds then serves via Caddy\n- Set `RAILPACK_SPA_OUTPUT_DIR` if output isn't `dist`\n\n## Python\n\n### Detection\n- `requirements.txt`, `pyproject.toml`, `Pipfile`, or `uv.lock`\n\n### Version Priority\n1. `RAILPACK_PYTHON_VERSION` env var\n2. `.python-version` file\n3. `requires-python` in pyproject.toml\n4. Default: Python 3.12\n\n### WSGI/ASGI Auto-Config\n\n| Framework | Start Command |\n|-----------|---------------|\n| Django | `gunicorn <project>.wsgi` |\n| FastAPI | `uvicorn main:app --host 0.0.0.0` |\n| Flask | `gunicorn app:app` |\n\nOverride via `startCommand` in service settings.\n\n## Go\n\n### Detection\n- `go.mod` in root\n\n### Build\nCompiles to binary automatically. For `cmd/` structure, set binary name or use `RAILPACK_GO_BIN`.\n\n## Rust\n\n### Detection\n- `Cargo.toml` in root\n\n### Build\nRelease build by default. Binary auto-detected from Cargo.toml.\n\n## Configuration\n\n### Preferred: Service Settings\n\nUse `environment` skill to set:\n- `buildCommand` - Custom build command\n- `startCommand` - Custom start command\n\nThese are stored in Railway and don't pollute your codebase.\n\n### Environment Variables\n\n| Variable | Purpose |\n|----------|---------|\n| `RAILPACK_STATIC_FILE_ROOT` | Static file serving directory |\n| `RAILPACK_SPA_OUTPUT_DIR` | SPA build output (defaults to `dist`) |\n| `RAILPACK_NODE_VERSION` | Node.js version |\n| `RAILPACK_PYTHON_VERSION` | Python version |\n| `RAILPACK_GO_BIN` | Go binary name |\n| `RAILPACK_PACKAGES` | Additional Mise packages (`pkg@version`) |\n| `RAILPACK_BUILD_APT_PACKAGES` | System packages for build |\n| `RAILPACK_DEPLOY_APT_PACKAGES` | System packages for runtime |\n\n### railpack.json\n\nAdvanced config for custom build steps:\n\n```json\n{\n  \"$schema\": \"https://schema.railpack.com\",\n  \"packages\": {\n    \"ffmpeg\": \"latest\"\n  },\n  \"deploy\": {\n    \"aptPackages\": [\"libmagic1\"]\n  }\n}\n```\n\n### railway.toml\n\nAlternative config format:\n\n```toml\n[build]\nbuilder = \"RAILPACK\"\nbuildCommand = \"npm run build\"\n\n[deploy]\nstartCommand = \"npm start\"\n```\n\n## Minimal Project Scaffolding\n\nWhen no code exists, suggest these patterns:\n\n### Static HTML\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>My Site</title>\n</head>\n<body>\n  <h1>Hello Railway</h1>\n</body>\n</html>\n```\n\n### Vite React\n```bash\nnpm create vite@latest . -- --template react\n```\n\n### Astro\n```bash\nnpm create astro@latest\n```\n\n### Python FastAPI\n```python\n# main.py\nfrom fastapi import FastAPI\napp = FastAPI()\n\n@app.get(\"/\")\ndef root():\n    return {\"message\": \"Hello Railway\"}\n```\n\n```txt\n# requirements.txt\nfastapi\nuvicorn\n```\n\n### Go HTTP Server\n```go\n// main.go\npackage main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"8080\"\n    }\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        fmt.Fprintf(w, \"Hello Railway\")\n    })\n    http.ListenAndServe(\":\"+port, nil)\n}\n```\n\n## Troubleshooting\n\n| Issue | Solution |\n|-------|----------|\n| Static site 404s | Check output dir - set `RAILPACK_STATIC_FILE_ROOT` if non-standard |\n| Wrong build command | Use `environment` skill to set `buildCommand` |\n| Wrong start command | Use `environment` skill to set `startCommand` |\n| Missing system package | Add to `RAILPACK_BUILD_APT_PACKAGES` or `RAILPACK_DEPLOY_APT_PACKAGES` |\n| Wrong Node version | Set `RAILPACK_NODE_VERSION` or add `.nvmrc` |\n| Wrong Python version | Set `RAILPACK_PYTHON_VERSION` or add `.python-version` |\n",
        "plugins/railway/skills/new/references/variables.md": "# Variables Reference\n\nVariables in Railway support references to other services, shared variables, and Railway-provided values.\n\n## Template Syntax\n\n```\n${{NAMESPACE.VAR}}\n```\n\n| Namespace | Description |\n|-----------|-------------|\n| `shared` | Shared variables (project-wide) |\n| `<serviceName>` | Variables from another service (case-sensitive) |\n\n## Examples\n\n**Reference shared variable:**\n```json\n{ \"value\": \"${{shared.DOMAIN}}\" }\n```\n\n**Reference another service's variable:**\n```json\n{ \"value\": \"${{api.API_KEY}}\" }\n```\n\n**Combine with text:**\n```json\n{ \"value\": \"https://${{shared.DOMAIN}}/api\" }\n```\n\n## Railway-Provided Variables\n\nRailway injects these into every service automatically.\n\n### Networking\n| Variable | Description | Example | Availability |\n|----------|-------------|---------|--------------|\n| `RAILWAY_PUBLIC_DOMAIN` | Public domain | `myapp.up.railway.app` | Only if service has a domain |\n| `RAILWAY_PRIVATE_DOMAIN` | Private DNS (internal only) | `myapp.railway.internal` | Always |\n| `RAILWAY_TCP_PROXY_DOMAIN` | TCP proxy domain | `roundhouse.proxy.rlwy.net` | Only if TCP proxy enabled |\n| `RAILWAY_TCP_PROXY_PORT` | TCP proxy port | `11105` | Only if TCP proxy enabled |\n\n**Note:** `RAILWAY_PUBLIC_DOMAIN` is only available if the service has a domain configured.\nCheck the service's environment config to verify a domain exists before referencing it.\n\n### Context\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_PROJECT_ID` | Project ID |\n| `RAILWAY_PROJECT_NAME` | Project name |\n| `RAILWAY_ENVIRONMENT_ID` | Environment ID |\n| `RAILWAY_ENVIRONMENT_NAME` | Environment name |\n| `RAILWAY_SERVICE_ID` | Service ID |\n| `RAILWAY_SERVICE_NAME` | Service name |\n| `RAILWAY_DEPLOYMENT_ID` | Deployment ID |\n| `RAILWAY_REPLICA_ID` | Replica ID |\n| `RAILWAY_REPLICA_REGION` | Region (e.g., `us-west2`) |\n\n### Volume (if attached)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_VOLUME_NAME` | Volume name |\n| `RAILWAY_VOLUME_MOUNT_PATH` | Mount path |\n\n### Git (if deployed from GitHub)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_GIT_COMMIT_SHA` | Commit SHA |\n| `RAILWAY_GIT_BRANCH` | Branch name |\n| `RAILWAY_GIT_REPO_NAME` | Repository name |\n| `RAILWAY_GIT_REPO_OWNER` | Repository owner |\n| `RAILWAY_GIT_AUTHOR` | Commit author |\n| `RAILWAY_GIT_COMMIT_MESSAGE` | Commit message |\n\n## Wiring Services Together\n\n### Frontend → Backend (public network)\nUse when: Browser makes requests to API (browser can't access private network)\n\n```json\n{\n  \"services\": {\n    \"<frontendId>\": {\n      \"variables\": {\n        \"API_URL\": { \"value\": \"https://${{backend.RAILWAY_PUBLIC_DOMAIN}}\" }\n      }\n    }\n  }\n}\n```\n\n### Service → Database (private network)\nUse when: Backend connects to database (faster, no egress cost, more secure)\n\nRailway databases auto-generate connection URL variables. Use the private versions:\n\n| Database | Variable Reference |\n|----------|-------------------|\n| Postgres | `${{Postgres.DATABASE_URL}}` |\n| MySQL | `${{MySQL.DATABASE_URL}}` |\n| Redis | `${{Redis.REDIS_URL}}` |\n| Mongo | `${{Mongo.MONGO_URL}}` |\n\n**Postgres/MySQL example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"DATABASE_URL\": { \"value\": \"${{Postgres.DATABASE_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Redis example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"REDIS_URL\": { \"value\": \"${{Redis.REDIS_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Mongo example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"MONGO_URL\": { \"value\": \"${{Mongo.MONGO_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Note:** Service names are case-sensitive. Match the exact name from your project (e.g., \"Postgres\", \"Redis\").\n\n### Service → Service (private network)\nUse when: Microservices communicate internally\n\n```json\n{\n  \"services\": {\n    \"<workerServiceId>\": {\n      \"variables\": {\n        \"API_INTERNAL_URL\": { \"value\": \"http://${{api.RAILWAY_PRIVATE_DOMAIN}}:${{api.PORT}}\" }\n      }\n    }\n  }\n}\n```\n\n## When to Use Public vs Private\n\n| Use Case | Domain | Reason |\n|----------|--------|--------|\n| Browser → API | Public | Browser can't access private network |\n| Service → Service | Private | Faster, no egress, more secure |\n| Service → Database | Private | Databases should never be public |\n| External webhook → Service | Public | External services need public access |\n| Cron job → API | Private | Internal communication |\n",
        "plugins/railway/skills/projects/SKILL.md": "---\nname: projects\ndescription: This skill should be used when the user wants to list all projects, switch projects, rename a project, enable/disable PR deploys, make a project public/private, or modify project settings.\nallowed-tools: Bash(railway:*)\n---\n\n# Project Management\n\nList, switch, and configure Railway projects.\n\n## When to Use\n\n- User asks \"show me all my projects\" or \"what projects do I have\"\n- User asks about projects across workspaces\n- User asks \"what workspaces do I have\"\n- User wants to switch to a different project\n- User asks to rename a project\n- User wants to enable/disable PR deploys\n- User wants to make a project public or private\n- User asks about project settings\n\n## List Projects\n\nThe `railway list --json` output can be very large. Run in a subagent and return only essential fields:\n\n- Project: `id`, `name`\n- Workspace: `id`, `name`\n- Services: `name` (optional, if user needs service context)\n\n```bash\nrailway list --json\n```\n\nExtract and return a simplified summary, not the full JSON.\n\n## List Workspaces\n\n```bash\nrailway whoami --json\n```\n\nReturns user info including all workspaces the user belongs to.\n\n## Switch Project\n\nLink a different project to the current directory:\n\n```bash\nrailway link -p <project-id-or-name>\n```\n\nOr interactively:\n\n```bash\nrailway link\n```\n\nAfter switching, use `status` skill to see project details.\n\n## Update Project\n\nModify project settings via GraphQL API.\n\n### Get Project ID\n\n```bash\nrailway status --json\n```\n\nExtract `project.id` from the response.\n\n### Update Mutation\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'mutation updateProject($id: String!, $input: ProjectUpdateInput!) {\n    projectUpdate(id: $id, input: $input) { name prDeploys isPublic botPrEnvironments }\n  }' \\\n  '{\"id\": \"PROJECT_ID\", \"input\": {\"name\": \"new-name\"}}'\nSCRIPT\n```\n\n### ProjectUpdateInput Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `name` | String | Project name |\n| `description` | String | Project description |\n| `isPublic` | Boolean | Make project public/private |\n| `prDeploys` | Boolean | Enable/disable PR deploys |\n| `botPrEnvironments` | Boolean | Enable Dependabot/Renovate PR environments |\n\n### Examples\n\n**Rename project:**\n```bash\nscripts/railway-api.sh '<mutation>' '{\"id\": \"uuid\", \"input\": {\"name\": \"new-name\"}}'\n```\n\n**Enable PR deploys:**\n```bash\nscripts/railway-api.sh '<mutation>' '{\"id\": \"uuid\", \"input\": {\"prDeploys\": true}}'\n```\n\n**Make project public:**\n```bash\nscripts/railway-api.sh '<mutation>' '{\"id\": \"uuid\", \"input\": {\"isPublic\": true}}'\n```\n\n**Multiple fields:**\n```bash\nscripts/railway-api.sh '<mutation>' '{\"id\": \"uuid\", \"input\": {\"name\": \"new-name\", \"prDeploys\": true}}'\n```\n\n## Composability\n\n- **View project details**: Use `status` skill\n- **Create new project**: Use `new` skill\n- **Manage environments**: Use `environment` skill\n\n## Error Handling\n\n### Not Authenticated\n```\nNot authenticated. Run `railway login` first.\n```\n\n### No Projects\n```\nNo projects found. Create one with `railway init`.\n```\n\n### Permission Denied\n```\nYou don't have permission to modify this project. Check your Railway role.\n```\n\n### Project Not Found\n```\nProject \"foo\" not found. Run `railway list` to see available projects.\n```\n",
        "plugins/railway/skills/projects/references/environment-config.md": "# Environment Config Reference\n\nThe `EnvironmentConfig` object is used to configure services, volumes, and shared variables in Railway.\n\n## Structure\n\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"source\": { ... },\n      \"build\": { ... },\n      \"deploy\": { ... },\n      \"variables\": { ... },\n      \"networking\": { ... }\n    }\n  },\n  \"sharedVariables\": { ... },\n  \"volumes\": { ... },\n  \"buckets\": { ... }\n}\n```\n\nOnly include fields being changed. The patch is merged with existing config.\n\n## Service Config\n\n### Source\n| Field | Type | Description |\n|-------|------|-------------|\n| `image` | string | Docker image (e.g., `nginx:latest`) |\n| `repo` | string | Git repository URL |\n| `branch` | string | Git branch to deploy |\n| `commitSha` | string | Specific commit SHA |\n| `rootDirectory` | string | Root directory (monorepos) |\n| `checkSuites` | boolean | Wait for GitHub check suites |\n| `autoUpdates.type` | disabled \\| patch \\| minor | Auto-update policy for Docker images |\n\n### Build\n| Field | Type | Description |\n|-------|------|-------------|\n| `builder` | NIXPACKS \\| DOCKERFILE \\| RAILPACK | Build system |\n| `buildCommand` | string | Command for Nixpacks builds |\n| `dockerfilePath` | string | Path to Dockerfile |\n| `watchPatterns` | string[] | Patterns to trigger deploys |\n| `nixpacksConfigPath` | string | Path to nixpacks config |\n\n### Deploy\n| Field | Type | Description |\n|-------|------|-------------|\n| `startCommand` | string | Container start command |\n| `multiRegionConfig` | object | Region → replica config. See [Multi-Region Config](#multi-region-config). |\n| `healthcheckPath` | string | Health check endpoint |\n| `healthcheckTimeout` | number | Seconds to wait for health |\n| `restartPolicyType` | ON_FAILURE \\| ALWAYS \\| NEVER | Restart behavior |\n| `restartPolicyMaxRetries` | number | Max restart attempts |\n| `cronSchedule` | string | Cron schedule for cron jobs |\n| `sleepApplication` | boolean | Sleep when inactive |\n\n### Variables\n| Field | Type | Description |\n|-------|------|-------------|\n| `value` | string | Variable value |\n| `isOptional` | boolean | Allow empty value |\n\nSet to `null` to delete a variable.\n\nFor variable references, see [variables.md](variables.md).\n\n### Lifecycle\n| Field | Type | Description |\n|-------|------|-------------|\n| `isDeleted` | boolean | Mark for deletion (requires ADMIN) |\n| `isCreated` | boolean | Mark as newly created |\n\n## Multi-Region Config\n\nControls replica count per region. Structure: region name → `{ numReplicas }` or `null` to remove.\n\n```json\n{\n  \"multiRegionConfig\": {\n    \"us-west2\": { \"numReplicas\": 3 },\n    \"europe-west4-drams3a\": { \"numReplicas\": 2 }\n  }\n}\n```\n\n### Available Regions\n\n| Name | Location | Aliases |\n|------|----------|---------|\n| `us-west2` | US West (California) | \"us west\", \"california\" |\n| `us-east4-eqdc4a` | US East (Virginia) | \"us east\", \"virginia\" |\n| `europe-west4-drams3a` | EU West (Amsterdam) | \"europe\", \"eu\", \"amsterdam\" |\n| `asia-southeast1-eqsg3a` | Southeast Asia (Singapore) | \"asia\", \"singapore\" |\n\n### Interpreting User Requests\n\n- \"add 3 replicas to europe\" → `{ \"europe-west4-drams3a\": { \"numReplicas\": 3 } }`\n- \"add a replica to all regions\" → set `numReplicas: 1` for all 4 regions\n- \"remove from asia\" → `{ \"asia-southeast1-eqsg3a\": null }`\n- \"increase replicas to 5\" (no region specified) → query current config first, update existing region(s)\n\n**Important:** When user doesn't specify a region, query the current `multiRegionConfig` and modify the existing region(s). Don't assume a default region.\n\n## Common Operations\n\n### Set Build Command\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"buildCommand\": \"npm run build\" } } } }\n```\n\n### Set Start Command\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"startCommand\": \"node server.js\" } } } }\n```\n\n### Set Replicas\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"multiRegionConfig\": { \"us-west2\": { \"numReplicas\": 3 } } } } } }\n```\n\n### Add Variables\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"API_KEY\": { \"value\": \"xxx\" } } } } }\n```\n\n### Delete Variable\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"OLD_VAR\": null } } } }\n```\n\n### Add Shared Variable\n```json\n{ \"sharedVariables\": { \"DATABASE_URL\": { \"value\": \"postgres://...\" } } }\n```\n\n### Change Docker Image\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"image\": \"nginx:latest\" } } } }\n```\n\n### Connect GitHub Repo\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"repo\": \"owner/repo\", \"branch\": \"main\" } } } }\n```\n\n### Change Git Branch\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"branch\": \"develop\" } } } }\n```\n\n### Set Health Check\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"healthcheckPath\": \"/health\", \"healthcheckTimeout\": 30 } } } }\n```\n\n### Change Builder\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"builder\": \"DOCKERFILE\", \"dockerfilePath\": \"./Dockerfile\" } } } }\n```\n\n### Delete Service\n```json\n{ \"services\": { \"<serviceId>\": { \"isDeleted\": true } } }\n```\n\n### Delete Volume\n```json\n{ \"volumes\": { \"<volumeId>\": { \"isDeleted\": true } } }\n```\n\n### New Service Instance\n```json\n{ \"services\": { \"<serviceId>\": { \"isCreated\": true, \"source\": { \"image\": \"nginx\" } } } }\n```\n\n**Note:** `isCreated: true` is required for new service instances.\n",
        "plugins/railway/skills/projects/references/monorepo.md": "# Monorepo Reference\n\nRailway supports two types of monorepo deployments with different configuration approaches.\n\n## Key Decision: Root Directory vs Custom Commands\n\n| Approach | When to Use | What Happens |\n|----------|-------------|--------------|\n| **Root Directory** | Isolated apps (no shared code) | Only that directory's code is available |\n| **Custom Commands** | Shared monorepos (TypeScript, workspaces) | Full repo available, filter at build/start |\n\n**Critical:** Setting root directory means code outside that directory is NOT available during build. For monorepos with shared packages, use custom commands instead.\n\n## Isolated Monorepo\n\nApps are completely independent - no shared code between directories.\n\n```\n├── frontend/        # React app (standalone)\n│   ├── package.json\n│   └── src/\n└── backend/         # Python API (standalone)\n    ├── requirements.txt\n    └── main.py\n```\n\n### Configuration\n\nSet **Root Directory** for each service:\n- Frontend service: `/frontend`\n- Backend service: `/backend`\n\nEach service only sees its own directory's code.\n\n### When to Use\n\n- Frontend and backend in different languages\n- No shared packages or dependencies\n- Each app has its own package.json/requirements.txt\n- Apps don't import from sibling directories\n\n## Shared Monorepo\n\nApps share code from common packages or the root.\n\n```\n├── package.json           # Root workspace config\n├── packages/\n│   ├── frontend/\n│   │   ├── package.json\n│   │   └── src/\n│   ├── backend/\n│   │   ├── package.json\n│   │   └── src/\n│   └── shared/            # Shared utilities\n│       ├── package.json\n│       └── src/\n└── tsconfig.json          # Shared TS config\n```\n\n### Configuration\n\nDo NOT set root directory. Instead, use custom build and start commands:\n\n**pnpm:**\n```\nBuild: pnpm --filter backend build\nStart: pnpm --filter backend start\n```\n\n**npm workspaces:**\n```\nBuild: npm run build --workspace=packages/backend\nStart: npm run start --workspace=packages/backend\n```\n\n**yarn workspaces:**\n```\nBuild: yarn workspace backend build\nStart: yarn workspace backend start\n```\n\n**bun:**\n```\nBuild: bun run --filter backend build\nStart: bun run --filter backend start\n```\n\n**Turborepo:**\n```\nBuild: turbo run build --filter=backend\nStart: turbo run start --filter=backend\n```\n\n### When to Use\n\n- TypeScript/JavaScript monorepo with workspaces\n- Packages import from sibling packages (`@myapp/shared`)\n- Shared tsconfig.json, eslint config at root\n- Using pnpm, yarn workspaces, npm workspaces, or bun\n- Using Turborepo, Nx, or similar build tools\n\n## Watch Paths\n\nPrevent changes in one package from triggering rebuilds of other services.\n\nSet watch paths for each service to only rebuild when relevant files change:\n\n| Service | Watch Paths |\n|---------|-------------|\n| frontend | `/packages/frontend/**`, `/packages/shared/**` |\n| backend | `/packages/backend/**`, `/packages/shared/**` |\n\nInclude shared packages in watch paths if the service depends on them.\n\n### Pattern Format\n\nUses gitignore-style patterns:\n```\n/packages/backend/**     # All files in backend\n/packages/shared/**      # All files in shared (if depends on it)\n!**/*.md                 # Ignore markdown changes\n```\n\n## Configuration Examples\n\n### Isolated: React + Python API\n\nTwo separate apps, no shared code.\n\n**Frontend service:**\n- Root Directory: `/frontend`\n- No custom commands needed (Railpack auto-detects)\n\n**Backend service:**\n- Root Directory: `/backend`\n- No custom commands needed\n\n### Shared: TypeScript Monorepo with pnpm\n\nFrontend and backend share a `@myapp/shared` package.\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter frontend build`\n- Start Command: `pnpm --filter frontend start`\n- Watch Paths: `/packages/frontend/**`, `/packages/shared/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter backend build`\n- Start Command: `pnpm --filter backend start`\n- Watch Paths: `/packages/backend/**`, `/packages/shared/**`\n\n### Shared: Turborepo\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=frontend`\n- Start Command: `turbo run start --filter=frontend`\n- Watch Paths: `/apps/frontend/**`, `/packages/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=backend`\n- Start Command: `turbo run start --filter=backend`\n- Watch Paths: `/apps/backend/**`, `/packages/**`\n\n## Common Mistakes\n\n### Using Root Directory for Shared Monorepos\n\n**Wrong:**\n```\nRoot Directory: /packages/backend\n```\nThis breaks builds because `@myapp/shared` isn't available.\n\n**Right:**\n```\nRoot Directory: (empty)\nBuild Command: pnpm --filter backend build\nStart Command: pnpm --filter backend start\n```\n\n### Forgetting Watch Paths\n\nWithout watch paths, changing `frontend/` triggers a rebuild of `backend/`.\n\nAlways set watch paths for monorepos to avoid unnecessary builds.\n\n### Missing Shared Packages in Watch Paths\n\nIf `backend` imports from `shared`, include both in watch paths:\n```\n/packages/backend/**\n/packages/shared/**\n```\n\nOtherwise changes to `shared` won't trigger backend rebuilds.\n\n## Detecting Monorepo Type\n\nCheck for these indicators:\n\n**Isolated monorepo:**\n- Separate package.json in each directory\n- No workspace config in root package.json\n- No imports between directories\n\n**Shared monorepo:**\n- Root package.json with `workspaces` field\n- `pnpm-workspace.yaml` exists\n- Packages import from each other (`@myapp/shared`)\n- Shared tsconfig.json at root\n- turbo.json or nx.json at root\n",
        "plugins/railway/skills/projects/references/railpack.md": "# Railpack Reference\n\nRailpack is Railway's default builder. Zero-config for most projects.\n\nFull docs: https://railpack.com/llms.txt\n\n## Detection\n\nRailpack analyzes source code to detect language, framework, and build requirements automatically.\n\nSupported: Node, Python, Go, PHP, Java, Ruby, Rust, Elixir, Gleam, Deno, C/C++, static files.\n\n## Static Sites\n\n### Detection Patterns\n\nRailpack serves static files via Caddy when it detects:\n1. `Staticfile` in root (can specify `root: dist`)\n2. `index.html` in root\n3. `public/` directory\n4. `RAILPACK_STATIC_FILE_ROOT` env var set\n\n### Root Directory Priority\n\n1. `RAILPACK_STATIC_FILE_ROOT` env var\n2. `root` in `Staticfile`\n3. `public/` directory\n4. Current directory (if index.html exists)\n\n### Common Patterns\n\nRailpack auto-detects common static build outputs. Only set `RAILPACK_STATIC_FILE_ROOT` for non-standard output directories.\n\n| Framework | Build Output | Config Needed |\n|-----------|--------------|---------------|\n| Plain HTML | root | None (auto-detected) |\n| Vite | dist | None (auto-detected) |\n| Astro (static) | dist | None (auto-detected) |\n| Create React App | build | None (auto-detected) |\n| Angular | dist/<project> | `RAILPACK_STATIC_FILE_ROOT=dist/<project>` (non-standard path) |\n| Custom output | varies | Set if output dir is non-standard |\n\n### Custom Caddyfile\n\nPut a `Caddyfile` in project root to override default serving behavior.\n\n## Node.js\n\n### Detection\n- `package.json` in root\n\n### Version Priority\n1. `RAILPACK_NODE_VERSION` env var\n2. `engines.node` in package.json\n3. `.nvmrc` or `.node-version`\n4. Default: Node 22\n\n### Package Manager Detection\n1. `packageManager` field in package.json (enables Corepack)\n2. Lock file: `pnpm-lock.yaml`, `bun.lockb`, `yarn.lock`\n3. Default: npm\n\n### Build Command\nAuto-detected from package.json `scripts.build`. Override via `buildCommand` in service settings.\n\n### Start Command\nAuto-detected:\n1. `scripts.start` in package.json\n2. `main` field in package.json\n3. `index.js` or `index.ts` in root\n\nOverride via `startCommand` in service settings.\n\n### Framework Detection\n\n| Framework | Detection | Notes |\n|-----------|-----------|-------|\n| Next.js | `next` in dependencies | Caches `.next/cache` |\n| Vite | `vite` in devDependencies | Static or SSR mode |\n| Astro | `astro` in dependencies | Caches `.astro` |\n| Nuxt | `nuxt` in dependencies | Auto start command |\n| Remix | `@remix-run/*` in deps | - |\n\n### Static Site Mode (SPA)\n\nFor frameworks like Vite, CRA, Astro (static), Angular:\n- Railpack builds then serves via Caddy\n- Set `RAILPACK_SPA_OUTPUT_DIR` if output isn't `dist`\n\n## Python\n\n### Detection\n- `requirements.txt`, `pyproject.toml`, `Pipfile`, or `uv.lock`\n\n### Version Priority\n1. `RAILPACK_PYTHON_VERSION` env var\n2. `.python-version` file\n3. `requires-python` in pyproject.toml\n4. Default: Python 3.12\n\n### WSGI/ASGI Auto-Config\n\n| Framework | Start Command |\n|-----------|---------------|\n| Django | `gunicorn <project>.wsgi` |\n| FastAPI | `uvicorn main:app --host 0.0.0.0` |\n| Flask | `gunicorn app:app` |\n\nOverride via `startCommand` in service settings.\n\n## Go\n\n### Detection\n- `go.mod` in root\n\n### Build\nCompiles to binary automatically. For `cmd/` structure, set binary name or use `RAILPACK_GO_BIN`.\n\n## Rust\n\n### Detection\n- `Cargo.toml` in root\n\n### Build\nRelease build by default. Binary auto-detected from Cargo.toml.\n\n## Configuration\n\n### Preferred: Service Settings\n\nUse `environment` skill to set:\n- `buildCommand` - Custom build command\n- `startCommand` - Custom start command\n\nThese are stored in Railway and don't pollute your codebase.\n\n### Environment Variables\n\n| Variable | Purpose |\n|----------|---------|\n| `RAILPACK_STATIC_FILE_ROOT` | Static file serving directory |\n| `RAILPACK_SPA_OUTPUT_DIR` | SPA build output (defaults to `dist`) |\n| `RAILPACK_NODE_VERSION` | Node.js version |\n| `RAILPACK_PYTHON_VERSION` | Python version |\n| `RAILPACK_GO_BIN` | Go binary name |\n| `RAILPACK_PACKAGES` | Additional Mise packages (`pkg@version`) |\n| `RAILPACK_BUILD_APT_PACKAGES` | System packages for build |\n| `RAILPACK_DEPLOY_APT_PACKAGES` | System packages for runtime |\n\n### railpack.json\n\nAdvanced config for custom build steps:\n\n```json\n{\n  \"$schema\": \"https://schema.railpack.com\",\n  \"packages\": {\n    \"ffmpeg\": \"latest\"\n  },\n  \"deploy\": {\n    \"aptPackages\": [\"libmagic1\"]\n  }\n}\n```\n\n### railway.toml\n\nAlternative config format:\n\n```toml\n[build]\nbuilder = \"RAILPACK\"\nbuildCommand = \"npm run build\"\n\n[deploy]\nstartCommand = \"npm start\"\n```\n\n## Minimal Project Scaffolding\n\nWhen no code exists, suggest these patterns:\n\n### Static HTML\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>My Site</title>\n</head>\n<body>\n  <h1>Hello Railway</h1>\n</body>\n</html>\n```\n\n### Vite React\n```bash\nnpm create vite@latest . -- --template react\n```\n\n### Astro\n```bash\nnpm create astro@latest\n```\n\n### Python FastAPI\n```python\n# main.py\nfrom fastapi import FastAPI\napp = FastAPI()\n\n@app.get(\"/\")\ndef root():\n    return {\"message\": \"Hello Railway\"}\n```\n\n```txt\n# requirements.txt\nfastapi\nuvicorn\n```\n\n### Go HTTP Server\n```go\n// main.go\npackage main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"8080\"\n    }\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        fmt.Fprintf(w, \"Hello Railway\")\n    })\n    http.ListenAndServe(\":\"+port, nil)\n}\n```\n\n## Troubleshooting\n\n| Issue | Solution |\n|-------|----------|\n| Static site 404s | Check output dir - set `RAILPACK_STATIC_FILE_ROOT` if non-standard |\n| Wrong build command | Use `environment` skill to set `buildCommand` |\n| Wrong start command | Use `environment` skill to set `startCommand` |\n| Missing system package | Add to `RAILPACK_BUILD_APT_PACKAGES` or `RAILPACK_DEPLOY_APT_PACKAGES` |\n| Wrong Node version | Set `RAILPACK_NODE_VERSION` or add `.nvmrc` |\n| Wrong Python version | Set `RAILPACK_PYTHON_VERSION` or add `.python-version` |\n",
        "plugins/railway/skills/projects/references/variables.md": "# Variables Reference\n\nVariables in Railway support references to other services, shared variables, and Railway-provided values.\n\n## Template Syntax\n\n```\n${{NAMESPACE.VAR}}\n```\n\n| Namespace | Description |\n|-----------|-------------|\n| `shared` | Shared variables (project-wide) |\n| `<serviceName>` | Variables from another service (case-sensitive) |\n\n## Examples\n\n**Reference shared variable:**\n```json\n{ \"value\": \"${{shared.DOMAIN}}\" }\n```\n\n**Reference another service's variable:**\n```json\n{ \"value\": \"${{api.API_KEY}}\" }\n```\n\n**Combine with text:**\n```json\n{ \"value\": \"https://${{shared.DOMAIN}}/api\" }\n```\n\n## Railway-Provided Variables\n\nRailway injects these into every service automatically.\n\n### Networking\n| Variable | Description | Example | Availability |\n|----------|-------------|---------|--------------|\n| `RAILWAY_PUBLIC_DOMAIN` | Public domain | `myapp.up.railway.app` | Only if service has a domain |\n| `RAILWAY_PRIVATE_DOMAIN` | Private DNS (internal only) | `myapp.railway.internal` | Always |\n| `RAILWAY_TCP_PROXY_DOMAIN` | TCP proxy domain | `roundhouse.proxy.rlwy.net` | Only if TCP proxy enabled |\n| `RAILWAY_TCP_PROXY_PORT` | TCP proxy port | `11105` | Only if TCP proxy enabled |\n\n**Note:** `RAILWAY_PUBLIC_DOMAIN` is only available if the service has a domain configured.\nCheck the service's environment config to verify a domain exists before referencing it.\n\n### Context\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_PROJECT_ID` | Project ID |\n| `RAILWAY_PROJECT_NAME` | Project name |\n| `RAILWAY_ENVIRONMENT_ID` | Environment ID |\n| `RAILWAY_ENVIRONMENT_NAME` | Environment name |\n| `RAILWAY_SERVICE_ID` | Service ID |\n| `RAILWAY_SERVICE_NAME` | Service name |\n| `RAILWAY_DEPLOYMENT_ID` | Deployment ID |\n| `RAILWAY_REPLICA_ID` | Replica ID |\n| `RAILWAY_REPLICA_REGION` | Region (e.g., `us-west2`) |\n\n### Volume (if attached)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_VOLUME_NAME` | Volume name |\n| `RAILWAY_VOLUME_MOUNT_PATH` | Mount path |\n\n### Git (if deployed from GitHub)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_GIT_COMMIT_SHA` | Commit SHA |\n| `RAILWAY_GIT_BRANCH` | Branch name |\n| `RAILWAY_GIT_REPO_NAME` | Repository name |\n| `RAILWAY_GIT_REPO_OWNER` | Repository owner |\n| `RAILWAY_GIT_AUTHOR` | Commit author |\n| `RAILWAY_GIT_COMMIT_MESSAGE` | Commit message |\n\n## Wiring Services Together\n\n### Frontend → Backend (public network)\nUse when: Browser makes requests to API (browser can't access private network)\n\n```json\n{\n  \"services\": {\n    \"<frontendId>\": {\n      \"variables\": {\n        \"API_URL\": { \"value\": \"https://${{backend.RAILWAY_PUBLIC_DOMAIN}}\" }\n      }\n    }\n  }\n}\n```\n\n### Service → Database (private network)\nUse when: Backend connects to database (faster, no egress cost, more secure)\n\nRailway databases auto-generate connection URL variables. Use the private versions:\n\n| Database | Variable Reference |\n|----------|-------------------|\n| Postgres | `${{Postgres.DATABASE_URL}}` |\n| MySQL | `${{MySQL.DATABASE_URL}}` |\n| Redis | `${{Redis.REDIS_URL}}` |\n| Mongo | `${{Mongo.MONGO_URL}}` |\n\n**Postgres/MySQL example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"DATABASE_URL\": { \"value\": \"${{Postgres.DATABASE_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Redis example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"REDIS_URL\": { \"value\": \"${{Redis.REDIS_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Mongo example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"MONGO_URL\": { \"value\": \"${{Mongo.MONGO_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Note:** Service names are case-sensitive. Match the exact name from your project (e.g., \"Postgres\", \"Redis\").\n\n### Service → Service (private network)\nUse when: Microservices communicate internally\n\n```json\n{\n  \"services\": {\n    \"<workerServiceId>\": {\n      \"variables\": {\n        \"API_INTERNAL_URL\": { \"value\": \"http://${{api.RAILWAY_PRIVATE_DOMAIN}}:${{api.PORT}}\" }\n      }\n    }\n  }\n}\n```\n\n## When to Use Public vs Private\n\n| Use Case | Domain | Reason |\n|----------|--------|--------|\n| Browser → API | Public | Browser can't access private network |\n| Service → Service | Private | Faster, no egress, more secure |\n| Service → Database | Private | Databases should never be public |\n| External webhook → Service | Public | External services need public access |\n| Cron job → API | Private | Internal communication |\n",
        "plugins/railway/skills/railway-docs/SKILL.md": "---\nname: railway-docs\ndescription: This skill should be used when the user asks about Railway features, how Railway works, or shares a docs.railway.com URL. Fetches up-to-date Railway docs to answer accurately.\n---\n\n# Railway Docs\n\nFetch up-to-date Railway documentation to answer questions accurately.\n\n## When to Use\n\n- User asks how something works on Railway (projects, deployments, volumes, etc.)\n- User shares a docs.railway.com URL\n- User needs current info about Railway features or pricing\n- Before answering Railway questions from memory - check the docs first\n\n## LLM-Optimized Sources\n\nStart here for comprehensive, up-to-date info:\n\n| Source             | URL                                         |\n| ------------------ | ------------------------------------------- |\n| **Full docs**      | `https://docs.railway.com/api/llms-docs.md` |\n| **llms.txt index** | `https://railway.com/llms.txt`              |\n| **Templates**      | `https://railway.com/llms-templates.md`     |\n| **Changelog**      | `https://railway.com/llms-changelog.md`     |\n| **Blog**           | `https://blog.railway.com/llms-blog.md`     |\n\n## Fetching Specific Pages\n\nAppend `.md` to any docs.railway.com URL:\n\n```\nhttps://docs.railway.com/guides/projects\n→ https://docs.railway.com/guides/projects.md\n```\n\n## Common Doc Paths\n\n| Topic       | URL                                              |\n| ----------- | ------------------------------------------------ |\n| Projects    | `https://docs.railway.com/guides/projects.md`    |\n| Deployments | `https://docs.railway.com/guides/deployments.md` |\n| Volumes     | `https://docs.railway.com/guides/volumes.md`     |\n| Variables   | `https://docs.railway.com/guides/variables.md`   |\n| CLI         | `https://docs.railway.com/reference/cli-api.md`  |\n| Pricing     | `https://docs.railway.com/reference/pricing.md`  |\n",
        "plugins/railway/skills/railway-docs/references/environment-config.md": "# Environment Config Reference\n\nThe `EnvironmentConfig` object is used to configure services, volumes, and shared variables in Railway.\n\n## Structure\n\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"source\": { ... },\n      \"build\": { ... },\n      \"deploy\": { ... },\n      \"variables\": { ... },\n      \"networking\": { ... }\n    }\n  },\n  \"sharedVariables\": { ... },\n  \"volumes\": { ... },\n  \"buckets\": { ... }\n}\n```\n\nOnly include fields being changed. The patch is merged with existing config.\n\n## Service Config\n\n### Source\n| Field | Type | Description |\n|-------|------|-------------|\n| `image` | string | Docker image (e.g., `nginx:latest`) |\n| `repo` | string | Git repository URL |\n| `branch` | string | Git branch to deploy |\n| `commitSha` | string | Specific commit SHA |\n| `rootDirectory` | string | Root directory (monorepos) |\n| `checkSuites` | boolean | Wait for GitHub check suites |\n| `autoUpdates.type` | disabled \\| patch \\| minor | Auto-update policy for Docker images |\n\n### Build\n| Field | Type | Description |\n|-------|------|-------------|\n| `builder` | NIXPACKS \\| DOCKERFILE \\| RAILPACK | Build system |\n| `buildCommand` | string | Command for Nixpacks builds |\n| `dockerfilePath` | string | Path to Dockerfile |\n| `watchPatterns` | string[] | Patterns to trigger deploys |\n| `nixpacksConfigPath` | string | Path to nixpacks config |\n\n### Deploy\n| Field | Type | Description |\n|-------|------|-------------|\n| `startCommand` | string | Container start command |\n| `multiRegionConfig` | object | Region → replica config. See [Multi-Region Config](#multi-region-config). |\n| `healthcheckPath` | string | Health check endpoint |\n| `healthcheckTimeout` | number | Seconds to wait for health |\n| `restartPolicyType` | ON_FAILURE \\| ALWAYS \\| NEVER | Restart behavior |\n| `restartPolicyMaxRetries` | number | Max restart attempts |\n| `cronSchedule` | string | Cron schedule for cron jobs |\n| `sleepApplication` | boolean | Sleep when inactive |\n\n### Variables\n| Field | Type | Description |\n|-------|------|-------------|\n| `value` | string | Variable value |\n| `isOptional` | boolean | Allow empty value |\n\nSet to `null` to delete a variable.\n\nFor variable references, see [variables.md](variables.md).\n\n### Lifecycle\n| Field | Type | Description |\n|-------|------|-------------|\n| `isDeleted` | boolean | Mark for deletion (requires ADMIN) |\n| `isCreated` | boolean | Mark as newly created |\n\n## Multi-Region Config\n\nControls replica count per region. Structure: region name → `{ numReplicas }` or `null` to remove.\n\n```json\n{\n  \"multiRegionConfig\": {\n    \"us-west2\": { \"numReplicas\": 3 },\n    \"europe-west4-drams3a\": { \"numReplicas\": 2 }\n  }\n}\n```\n\n### Available Regions\n\n| Name | Location | Aliases |\n|------|----------|---------|\n| `us-west2` | US West (California) | \"us west\", \"california\" |\n| `us-east4-eqdc4a` | US East (Virginia) | \"us east\", \"virginia\" |\n| `europe-west4-drams3a` | EU West (Amsterdam) | \"europe\", \"eu\", \"amsterdam\" |\n| `asia-southeast1-eqsg3a` | Southeast Asia (Singapore) | \"asia\", \"singapore\" |\n\n### Interpreting User Requests\n\n- \"add 3 replicas to europe\" → `{ \"europe-west4-drams3a\": { \"numReplicas\": 3 } }`\n- \"add a replica to all regions\" → set `numReplicas: 1` for all 4 regions\n- \"remove from asia\" → `{ \"asia-southeast1-eqsg3a\": null }`\n- \"increase replicas to 5\" (no region specified) → query current config first, update existing region(s)\n\n**Important:** When user doesn't specify a region, query the current `multiRegionConfig` and modify the existing region(s). Don't assume a default region.\n\n## Common Operations\n\n### Set Build Command\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"buildCommand\": \"npm run build\" } } } }\n```\n\n### Set Start Command\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"startCommand\": \"node server.js\" } } } }\n```\n\n### Set Replicas\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"multiRegionConfig\": { \"us-west2\": { \"numReplicas\": 3 } } } } } }\n```\n\n### Add Variables\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"API_KEY\": { \"value\": \"xxx\" } } } } }\n```\n\n### Delete Variable\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"OLD_VAR\": null } } } }\n```\n\n### Add Shared Variable\n```json\n{ \"sharedVariables\": { \"DATABASE_URL\": { \"value\": \"postgres://...\" } } }\n```\n\n### Change Docker Image\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"image\": \"nginx:latest\" } } } }\n```\n\n### Connect GitHub Repo\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"repo\": \"owner/repo\", \"branch\": \"main\" } } } }\n```\n\n### Change Git Branch\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"branch\": \"develop\" } } } }\n```\n\n### Set Health Check\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"healthcheckPath\": \"/health\", \"healthcheckTimeout\": 30 } } } }\n```\n\n### Change Builder\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"builder\": \"DOCKERFILE\", \"dockerfilePath\": \"./Dockerfile\" } } } }\n```\n\n### Delete Service\n```json\n{ \"services\": { \"<serviceId>\": { \"isDeleted\": true } } }\n```\n\n### Delete Volume\n```json\n{ \"volumes\": { \"<volumeId>\": { \"isDeleted\": true } } }\n```\n\n### New Service Instance\n```json\n{ \"services\": { \"<serviceId>\": { \"isCreated\": true, \"source\": { \"image\": \"nginx\" } } } }\n```\n\n**Note:** `isCreated: true` is required for new service instances.\n",
        "plugins/railway/skills/railway-docs/references/monorepo.md": "# Monorepo Reference\n\nRailway supports two types of monorepo deployments with different configuration approaches.\n\n## Key Decision: Root Directory vs Custom Commands\n\n| Approach | When to Use | What Happens |\n|----------|-------------|--------------|\n| **Root Directory** | Isolated apps (no shared code) | Only that directory's code is available |\n| **Custom Commands** | Shared monorepos (TypeScript, workspaces) | Full repo available, filter at build/start |\n\n**Critical:** Setting root directory means code outside that directory is NOT available during build. For monorepos with shared packages, use custom commands instead.\n\n## Isolated Monorepo\n\nApps are completely independent - no shared code between directories.\n\n```\n├── frontend/        # React app (standalone)\n│   ├── package.json\n│   └── src/\n└── backend/         # Python API (standalone)\n    ├── requirements.txt\n    └── main.py\n```\n\n### Configuration\n\nSet **Root Directory** for each service:\n- Frontend service: `/frontend`\n- Backend service: `/backend`\n\nEach service only sees its own directory's code.\n\n### When to Use\n\n- Frontend and backend in different languages\n- No shared packages or dependencies\n- Each app has its own package.json/requirements.txt\n- Apps don't import from sibling directories\n\n## Shared Monorepo\n\nApps share code from common packages or the root.\n\n```\n├── package.json           # Root workspace config\n├── packages/\n│   ├── frontend/\n│   │   ├── package.json\n│   │   └── src/\n│   ├── backend/\n│   │   ├── package.json\n│   │   └── src/\n│   └── shared/            # Shared utilities\n│       ├── package.json\n│       └── src/\n└── tsconfig.json          # Shared TS config\n```\n\n### Configuration\n\nDo NOT set root directory. Instead, use custom build and start commands:\n\n**pnpm:**\n```\nBuild: pnpm --filter backend build\nStart: pnpm --filter backend start\n```\n\n**npm workspaces:**\n```\nBuild: npm run build --workspace=packages/backend\nStart: npm run start --workspace=packages/backend\n```\n\n**yarn workspaces:**\n```\nBuild: yarn workspace backend build\nStart: yarn workspace backend start\n```\n\n**bun:**\n```\nBuild: bun run --filter backend build\nStart: bun run --filter backend start\n```\n\n**Turborepo:**\n```\nBuild: turbo run build --filter=backend\nStart: turbo run start --filter=backend\n```\n\n### When to Use\n\n- TypeScript/JavaScript monorepo with workspaces\n- Packages import from sibling packages (`@myapp/shared`)\n- Shared tsconfig.json, eslint config at root\n- Using pnpm, yarn workspaces, npm workspaces, or bun\n- Using Turborepo, Nx, or similar build tools\n\n## Watch Paths\n\nPrevent changes in one package from triggering rebuilds of other services.\n\nSet watch paths for each service to only rebuild when relevant files change:\n\n| Service | Watch Paths |\n|---------|-------------|\n| frontend | `/packages/frontend/**`, `/packages/shared/**` |\n| backend | `/packages/backend/**`, `/packages/shared/**` |\n\nInclude shared packages in watch paths if the service depends on them.\n\n### Pattern Format\n\nUses gitignore-style patterns:\n```\n/packages/backend/**     # All files in backend\n/packages/shared/**      # All files in shared (if depends on it)\n!**/*.md                 # Ignore markdown changes\n```\n\n## Configuration Examples\n\n### Isolated: React + Python API\n\nTwo separate apps, no shared code.\n\n**Frontend service:**\n- Root Directory: `/frontend`\n- No custom commands needed (Railpack auto-detects)\n\n**Backend service:**\n- Root Directory: `/backend`\n- No custom commands needed\n\n### Shared: TypeScript Monorepo with pnpm\n\nFrontend and backend share a `@myapp/shared` package.\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter frontend build`\n- Start Command: `pnpm --filter frontend start`\n- Watch Paths: `/packages/frontend/**`, `/packages/shared/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter backend build`\n- Start Command: `pnpm --filter backend start`\n- Watch Paths: `/packages/backend/**`, `/packages/shared/**`\n\n### Shared: Turborepo\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=frontend`\n- Start Command: `turbo run start --filter=frontend`\n- Watch Paths: `/apps/frontend/**`, `/packages/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=backend`\n- Start Command: `turbo run start --filter=backend`\n- Watch Paths: `/apps/backend/**`, `/packages/**`\n\n## Common Mistakes\n\n### Using Root Directory for Shared Monorepos\n\n**Wrong:**\n```\nRoot Directory: /packages/backend\n```\nThis breaks builds because `@myapp/shared` isn't available.\n\n**Right:**\n```\nRoot Directory: (empty)\nBuild Command: pnpm --filter backend build\nStart Command: pnpm --filter backend start\n```\n\n### Forgetting Watch Paths\n\nWithout watch paths, changing `frontend/` triggers a rebuild of `backend/`.\n\nAlways set watch paths for monorepos to avoid unnecessary builds.\n\n### Missing Shared Packages in Watch Paths\n\nIf `backend` imports from `shared`, include both in watch paths:\n```\n/packages/backend/**\n/packages/shared/**\n```\n\nOtherwise changes to `shared` won't trigger backend rebuilds.\n\n## Detecting Monorepo Type\n\nCheck for these indicators:\n\n**Isolated monorepo:**\n- Separate package.json in each directory\n- No workspace config in root package.json\n- No imports between directories\n\n**Shared monorepo:**\n- Root package.json with `workspaces` field\n- `pnpm-workspace.yaml` exists\n- Packages import from each other (`@myapp/shared`)\n- Shared tsconfig.json at root\n- turbo.json or nx.json at root\n",
        "plugins/railway/skills/railway-docs/references/railpack.md": "# Railpack Reference\n\nRailpack is Railway's default builder. Zero-config for most projects.\n\nFull docs: https://railpack.com/llms.txt\n\n## Detection\n\nRailpack analyzes source code to detect language, framework, and build requirements automatically.\n\nSupported: Node, Python, Go, PHP, Java, Ruby, Rust, Elixir, Gleam, Deno, C/C++, static files.\n\n## Static Sites\n\n### Detection Patterns\n\nRailpack serves static files via Caddy when it detects:\n1. `Staticfile` in root (can specify `root: dist`)\n2. `index.html` in root\n3. `public/` directory\n4. `RAILPACK_STATIC_FILE_ROOT` env var set\n\n### Root Directory Priority\n\n1. `RAILPACK_STATIC_FILE_ROOT` env var\n2. `root` in `Staticfile`\n3. `public/` directory\n4. Current directory (if index.html exists)\n\n### Common Patterns\n\nRailpack auto-detects common static build outputs. Only set `RAILPACK_STATIC_FILE_ROOT` for non-standard output directories.\n\n| Framework | Build Output | Config Needed |\n|-----------|--------------|---------------|\n| Plain HTML | root | None (auto-detected) |\n| Vite | dist | None (auto-detected) |\n| Astro (static) | dist | None (auto-detected) |\n| Create React App | build | None (auto-detected) |\n| Angular | dist/<project> | `RAILPACK_STATIC_FILE_ROOT=dist/<project>` (non-standard path) |\n| Custom output | varies | Set if output dir is non-standard |\n\n### Custom Caddyfile\n\nPut a `Caddyfile` in project root to override default serving behavior.\n\n## Node.js\n\n### Detection\n- `package.json` in root\n\n### Version Priority\n1. `RAILPACK_NODE_VERSION` env var\n2. `engines.node` in package.json\n3. `.nvmrc` or `.node-version`\n4. Default: Node 22\n\n### Package Manager Detection\n1. `packageManager` field in package.json (enables Corepack)\n2. Lock file: `pnpm-lock.yaml`, `bun.lockb`, `yarn.lock`\n3. Default: npm\n\n### Build Command\nAuto-detected from package.json `scripts.build`. Override via `buildCommand` in service settings.\n\n### Start Command\nAuto-detected:\n1. `scripts.start` in package.json\n2. `main` field in package.json\n3. `index.js` or `index.ts` in root\n\nOverride via `startCommand` in service settings.\n\n### Framework Detection\n\n| Framework | Detection | Notes |\n|-----------|-----------|-------|\n| Next.js | `next` in dependencies | Caches `.next/cache` |\n| Vite | `vite` in devDependencies | Static or SSR mode |\n| Astro | `astro` in dependencies | Caches `.astro` |\n| Nuxt | `nuxt` in dependencies | Auto start command |\n| Remix | `@remix-run/*` in deps | - |\n\n### Static Site Mode (SPA)\n\nFor frameworks like Vite, CRA, Astro (static), Angular:\n- Railpack builds then serves via Caddy\n- Set `RAILPACK_SPA_OUTPUT_DIR` if output isn't `dist`\n\n## Python\n\n### Detection\n- `requirements.txt`, `pyproject.toml`, `Pipfile`, or `uv.lock`\n\n### Version Priority\n1. `RAILPACK_PYTHON_VERSION` env var\n2. `.python-version` file\n3. `requires-python` in pyproject.toml\n4. Default: Python 3.12\n\n### WSGI/ASGI Auto-Config\n\n| Framework | Start Command |\n|-----------|---------------|\n| Django | `gunicorn <project>.wsgi` |\n| FastAPI | `uvicorn main:app --host 0.0.0.0` |\n| Flask | `gunicorn app:app` |\n\nOverride via `startCommand` in service settings.\n\n## Go\n\n### Detection\n- `go.mod` in root\n\n### Build\nCompiles to binary automatically. For `cmd/` structure, set binary name or use `RAILPACK_GO_BIN`.\n\n## Rust\n\n### Detection\n- `Cargo.toml` in root\n\n### Build\nRelease build by default. Binary auto-detected from Cargo.toml.\n\n## Configuration\n\n### Preferred: Service Settings\n\nUse `environment` skill to set:\n- `buildCommand` - Custom build command\n- `startCommand` - Custom start command\n\nThese are stored in Railway and don't pollute your codebase.\n\n### Environment Variables\n\n| Variable | Purpose |\n|----------|---------|\n| `RAILPACK_STATIC_FILE_ROOT` | Static file serving directory |\n| `RAILPACK_SPA_OUTPUT_DIR` | SPA build output (defaults to `dist`) |\n| `RAILPACK_NODE_VERSION` | Node.js version |\n| `RAILPACK_PYTHON_VERSION` | Python version |\n| `RAILPACK_GO_BIN` | Go binary name |\n| `RAILPACK_PACKAGES` | Additional Mise packages (`pkg@version`) |\n| `RAILPACK_BUILD_APT_PACKAGES` | System packages for build |\n| `RAILPACK_DEPLOY_APT_PACKAGES` | System packages for runtime |\n\n### railpack.json\n\nAdvanced config for custom build steps:\n\n```json\n{\n  \"$schema\": \"https://schema.railpack.com\",\n  \"packages\": {\n    \"ffmpeg\": \"latest\"\n  },\n  \"deploy\": {\n    \"aptPackages\": [\"libmagic1\"]\n  }\n}\n```\n\n### railway.toml\n\nAlternative config format:\n\n```toml\n[build]\nbuilder = \"RAILPACK\"\nbuildCommand = \"npm run build\"\n\n[deploy]\nstartCommand = \"npm start\"\n```\n\n## Minimal Project Scaffolding\n\nWhen no code exists, suggest these patterns:\n\n### Static HTML\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>My Site</title>\n</head>\n<body>\n  <h1>Hello Railway</h1>\n</body>\n</html>\n```\n\n### Vite React\n```bash\nnpm create vite@latest . -- --template react\n```\n\n### Astro\n```bash\nnpm create astro@latest\n```\n\n### Python FastAPI\n```python\n# main.py\nfrom fastapi import FastAPI\napp = FastAPI()\n\n@app.get(\"/\")\ndef root():\n    return {\"message\": \"Hello Railway\"}\n```\n\n```txt\n# requirements.txt\nfastapi\nuvicorn\n```\n\n### Go HTTP Server\n```go\n// main.go\npackage main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"8080\"\n    }\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        fmt.Fprintf(w, \"Hello Railway\")\n    })\n    http.ListenAndServe(\":\"+port, nil)\n}\n```\n\n## Troubleshooting\n\n| Issue | Solution |\n|-------|----------|\n| Static site 404s | Check output dir - set `RAILPACK_STATIC_FILE_ROOT` if non-standard |\n| Wrong build command | Use `environment` skill to set `buildCommand` |\n| Wrong start command | Use `environment` skill to set `startCommand` |\n| Missing system package | Add to `RAILPACK_BUILD_APT_PACKAGES` or `RAILPACK_DEPLOY_APT_PACKAGES` |\n| Wrong Node version | Set `RAILPACK_NODE_VERSION` or add `.nvmrc` |\n| Wrong Python version | Set `RAILPACK_PYTHON_VERSION` or add `.python-version` |\n",
        "plugins/railway/skills/railway-docs/references/variables.md": "# Variables Reference\n\nVariables in Railway support references to other services, shared variables, and Railway-provided values.\n\n## Template Syntax\n\n```\n${{NAMESPACE.VAR}}\n```\n\n| Namespace | Description |\n|-----------|-------------|\n| `shared` | Shared variables (project-wide) |\n| `<serviceName>` | Variables from another service (case-sensitive) |\n\n## Examples\n\n**Reference shared variable:**\n```json\n{ \"value\": \"${{shared.DOMAIN}}\" }\n```\n\n**Reference another service's variable:**\n```json\n{ \"value\": \"${{api.API_KEY}}\" }\n```\n\n**Combine with text:**\n```json\n{ \"value\": \"https://${{shared.DOMAIN}}/api\" }\n```\n\n## Railway-Provided Variables\n\nRailway injects these into every service automatically.\n\n### Networking\n| Variable | Description | Example | Availability |\n|----------|-------------|---------|--------------|\n| `RAILWAY_PUBLIC_DOMAIN` | Public domain | `myapp.up.railway.app` | Only if service has a domain |\n| `RAILWAY_PRIVATE_DOMAIN` | Private DNS (internal only) | `myapp.railway.internal` | Always |\n| `RAILWAY_TCP_PROXY_DOMAIN` | TCP proxy domain | `roundhouse.proxy.rlwy.net` | Only if TCP proxy enabled |\n| `RAILWAY_TCP_PROXY_PORT` | TCP proxy port | `11105` | Only if TCP proxy enabled |\n\n**Note:** `RAILWAY_PUBLIC_DOMAIN` is only available if the service has a domain configured.\nCheck the service's environment config to verify a domain exists before referencing it.\n\n### Context\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_PROJECT_ID` | Project ID |\n| `RAILWAY_PROJECT_NAME` | Project name |\n| `RAILWAY_ENVIRONMENT_ID` | Environment ID |\n| `RAILWAY_ENVIRONMENT_NAME` | Environment name |\n| `RAILWAY_SERVICE_ID` | Service ID |\n| `RAILWAY_SERVICE_NAME` | Service name |\n| `RAILWAY_DEPLOYMENT_ID` | Deployment ID |\n| `RAILWAY_REPLICA_ID` | Replica ID |\n| `RAILWAY_REPLICA_REGION` | Region (e.g., `us-west2`) |\n\n### Volume (if attached)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_VOLUME_NAME` | Volume name |\n| `RAILWAY_VOLUME_MOUNT_PATH` | Mount path |\n\n### Git (if deployed from GitHub)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_GIT_COMMIT_SHA` | Commit SHA |\n| `RAILWAY_GIT_BRANCH` | Branch name |\n| `RAILWAY_GIT_REPO_NAME` | Repository name |\n| `RAILWAY_GIT_REPO_OWNER` | Repository owner |\n| `RAILWAY_GIT_AUTHOR` | Commit author |\n| `RAILWAY_GIT_COMMIT_MESSAGE` | Commit message |\n\n## Wiring Services Together\n\n### Frontend → Backend (public network)\nUse when: Browser makes requests to API (browser can't access private network)\n\n```json\n{\n  \"services\": {\n    \"<frontendId>\": {\n      \"variables\": {\n        \"API_URL\": { \"value\": \"https://${{backend.RAILWAY_PUBLIC_DOMAIN}}\" }\n      }\n    }\n  }\n}\n```\n\n### Service → Database (private network)\nUse when: Backend connects to database (faster, no egress cost, more secure)\n\nRailway databases auto-generate connection URL variables. Use the private versions:\n\n| Database | Variable Reference |\n|----------|-------------------|\n| Postgres | `${{Postgres.DATABASE_URL}}` |\n| MySQL | `${{MySQL.DATABASE_URL}}` |\n| Redis | `${{Redis.REDIS_URL}}` |\n| Mongo | `${{Mongo.MONGO_URL}}` |\n\n**Postgres/MySQL example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"DATABASE_URL\": { \"value\": \"${{Postgres.DATABASE_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Redis example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"REDIS_URL\": { \"value\": \"${{Redis.REDIS_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Mongo example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"MONGO_URL\": { \"value\": \"${{Mongo.MONGO_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Note:** Service names are case-sensitive. Match the exact name from your project (e.g., \"Postgres\", \"Redis\").\n\n### Service → Service (private network)\nUse when: Microservices communicate internally\n\n```json\n{\n  \"services\": {\n    \"<workerServiceId>\": {\n      \"variables\": {\n        \"API_INTERNAL_URL\": { \"value\": \"http://${{api.RAILWAY_PRIVATE_DOMAIN}}:${{api.PORT}}\" }\n      }\n    }\n  }\n}\n```\n\n## When to Use Public vs Private\n\n| Use Case | Domain | Reason |\n|----------|--------|--------|\n| Browser → API | Public | Browser can't access private network |\n| Service → Service | Private | Faster, no egress, more secure |\n| Service → Database | Private | Databases should never be public |\n| External webhook → Service | Public | External services need public access |\n| Cron job → API | Private | Internal communication |\n",
        "plugins/railway/skills/service/SKILL.md": "---\nname: service\ndescription: This skill should be used when the user asks about service status, wants to rename a service, change service icons, link services, or create services with Docker images. For creating services with local code, prefer the `new` skill. For GitHub repo sources, use `new` skill to create empty service then `environment` skill to configure source.\nallowed-tools: Bash(railway:*)\n---\n\n# Service Management\n\nCheck status, update properties, and advanced service creation.\n\n## When to Use\n\n- User asks about service status, health, or deployments\n- User asks \"is my service deployed?\"\n- User wants to rename a service or change service icon\n- User wants to link a different service\n- User wants to deploy a Docker image as a new service (advanced)\n\n**Note:** For creating services with local code (the common case), prefer the `new` skill which handles project setup, scaffolding, and service creation together.\n\n**For GitHub repo sources:** Use `new` skill to create empty service, then `environment` skill to configure source.repo via staged changes API.\n\n## Create Service\n\nCreate a new service via GraphQL API. There is no CLI command for this.\n\n### Get Context\n\n```bash\nrailway status --json\n```\n\nExtract:\n- `project.id` - for creating the service\n- `environment.id` - for staging the instance config\n\n### Create Service Mutation\n\n```graphql\nmutation serviceCreate($input: ServiceCreateInput!) {\n  serviceCreate(input: $input) {\n    id\n    name\n  }\n}\n```\n\n### ServiceCreateInput Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `projectId` | String! | Project ID (required) |\n| `name` | String | Service name (auto-generated if omitted) |\n| `source.image` | String | Docker image (e.g., `nginx:latest`) |\n| `source.repo` | String | GitHub repo (e.g., `user/repo`) |\n| `branch` | String | Git branch for repo source |\n| `environmentId` | String | If set and is a fork, only creates in that env |\n\n### Example: Create empty service\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'mutation createService($input: ServiceCreateInput!) {\n    serviceCreate(input: $input) { id name }\n  }' \\\n  '{\"input\": {\"projectId\": \"PROJECT_ID\"}}'\nSCRIPT\n```\n\n### Example: Create service with image\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'mutation createService($input: ServiceCreateInput!) {\n    serviceCreate(input: $input) { id name }\n  }' \\\n  '{\"input\": {\"projectId\": \"PROJECT_ID\", \"name\": \"my-service\", \"source\": {\"image\": \"nginx:latest\"}}}'\nSCRIPT\n```\n\n### Connecting a GitHub Repo\n\n**Do NOT use serviceCreate with source.repo** - use staged changes API instead.\n\nFlow:\n1. Create empty service: `serviceCreate(input: {projectId: \"...\", name: \"my-service\"})`\n2. Use `environment` skill to configure source via staged changes API\n3. Apply to trigger deployment\n\n### After Creating: Configure Instance\n\nUse `environment` skill to configure the service instance:\n\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"isCreated\": true,\n      \"source\": { \"image\": \"nginx:latest\" },\n      \"variables\": {\n        \"PORT\": { \"value\": \"8080\" }\n      }\n    }\n  }\n}\n```\n\n**Critical:** Always include `isCreated: true` for new service instances.\n\nThen use `environment` skill to apply and deploy.\n\nFor variable references, see [reference/variables.md](references/variables.md).\n\n## Check Service Status\n\n```bash\nrailway service status --json\n```\n\nReturns current deployment status for the linked service.\n\n### Deployment History\n\n```bash\nrailway deployment list --json --limit 5\n```\n\n### Present Status\n\nShow:\n- **Service**: name and current status\n- **Latest Deployment**: status (SUCCESS, FAILED, DEPLOYING, CRASHED, etc.)\n- **Deployed At**: when the current deployment went live\n- **Recent Deployments**: last 3-5 with status and timestamps\n\n### Deployment Statuses\n\n| Status | Meaning |\n|--------|---------|\n| SUCCESS | Deployed and running |\n| FAILED | Build or deploy failed |\n| DEPLOYING | Currently deploying |\n| BUILDING | Build in progress |\n| CRASHED | Runtime crash |\n| REMOVED | Deployment removed |\n\n## Update Service\n\nUpdate service name or icon via GraphQL API.\n\n### Get Service ID\n\n```bash\nrailway status --json\n```\n\nExtract `service.id` from the response.\n\n### Update Name\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'mutation updateService($id: String!, $input: ServiceUpdateInput!) {\n    serviceUpdate(id: $id, input: $input) { id name }\n  }' \\\n  '{\"id\": \"SERVICE_ID\", \"input\": {\"name\": \"new-name\"}}'\nSCRIPT\n```\n\n### Update Icon\n\nIcons can be image URLs or animated GIFs.\n\n| Type | Example |\n|------|---------|\n| Image URL | `\"icon\": \"https://example.com/logo.png\"` |\n| Animated GIF | `\"icon\": \"https://example.com/animated.gif\"` |\n| Devicons | `\"icon\": \"https://devicons.railway.app/github\"` |\n\n**Railway Devicons:** Query `https://devicons.railway.app/{query}` for common developer icons (e.g., `github`, `postgres`, `redis`, `nodejs`). Browse all at https://devicons.railway.app\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'mutation updateService($id: String!, $input: ServiceUpdateInput!) {\n    serviceUpdate(id: $id, input: $input) { id icon }\n  }' \\\n  '{\"id\": \"SERVICE_ID\", \"input\": {\"icon\": \"https://devicons.railway.app/github\"}}'\nSCRIPT\n```\n\n### ServiceUpdateInput Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| `name` | String | Service name |\n| `icon` | String | Emoji or image URL (including animated GIFs) |\n\n## Link Service\n\nSwitch the linked service for the current directory:\n\n```bash\nrailway service link\n```\n\nOr specify directly:\n\n```bash\nrailway service link <service-name>\n```\n\n## Composability\n\n- **Create service with local code**: Use `new` skill (handles scaffolding + creation)\n- **Configure service**: Use `environment` skill (variables, commands, image, etc.)\n- **Delete service**: Use `environment` skill with `isDeleted: true`\n- **Apply changes**: Use `environment` skill\n- **View logs**: Use `deployment` skill\n- **Deploy local code**: Use `deploy` skill\n\n## Error Handling\n\n### No Service Linked\n```\nNo service linked. Run `railway service link` to link a service.\n```\n\n### No Deployments\n```\nService exists but has no deployments yet. Deploy with `railway up`.\n```\n\n### Service Not Found\n```\nService \"foo\" not found. Check available services with `railway status`.\n```\n\n### Project Not Found\nUser may not be in a linked project. Check `railway status`.\n\n### Permission Denied\nUser needs at least DEVELOPER role to create services.\n\n### Invalid Image\nDocker image must be accessible (public or with registry credentials).\n",
        "plugins/railway/skills/service/references/environment-config.md": "# Environment Config Reference\n\nThe `EnvironmentConfig` object is used to configure services, volumes, and shared variables in Railway.\n\n## Structure\n\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"source\": { ... },\n      \"build\": { ... },\n      \"deploy\": { ... },\n      \"variables\": { ... },\n      \"networking\": { ... }\n    }\n  },\n  \"sharedVariables\": { ... },\n  \"volumes\": { ... },\n  \"buckets\": { ... }\n}\n```\n\nOnly include fields being changed. The patch is merged with existing config.\n\n## Service Config\n\n### Source\n| Field | Type | Description |\n|-------|------|-------------|\n| `image` | string | Docker image (e.g., `nginx:latest`) |\n| `repo` | string | Git repository URL |\n| `branch` | string | Git branch to deploy |\n| `commitSha` | string | Specific commit SHA |\n| `rootDirectory` | string | Root directory (monorepos) |\n| `checkSuites` | boolean | Wait for GitHub check suites |\n| `autoUpdates.type` | disabled \\| patch \\| minor | Auto-update policy for Docker images |\n\n### Build\n| Field | Type | Description |\n|-------|------|-------------|\n| `builder` | NIXPACKS \\| DOCKERFILE \\| RAILPACK | Build system |\n| `buildCommand` | string | Command for Nixpacks builds |\n| `dockerfilePath` | string | Path to Dockerfile |\n| `watchPatterns` | string[] | Patterns to trigger deploys |\n| `nixpacksConfigPath` | string | Path to nixpacks config |\n\n### Deploy\n| Field | Type | Description |\n|-------|------|-------------|\n| `startCommand` | string | Container start command |\n| `multiRegionConfig` | object | Region → replica config. See [Multi-Region Config](#multi-region-config). |\n| `healthcheckPath` | string | Health check endpoint |\n| `healthcheckTimeout` | number | Seconds to wait for health |\n| `restartPolicyType` | ON_FAILURE \\| ALWAYS \\| NEVER | Restart behavior |\n| `restartPolicyMaxRetries` | number | Max restart attempts |\n| `cronSchedule` | string | Cron schedule for cron jobs |\n| `sleepApplication` | boolean | Sleep when inactive |\n\n### Variables\n| Field | Type | Description |\n|-------|------|-------------|\n| `value` | string | Variable value |\n| `isOptional` | boolean | Allow empty value |\n\nSet to `null` to delete a variable.\n\nFor variable references, see [variables.md](variables.md).\n\n### Lifecycle\n| Field | Type | Description |\n|-------|------|-------------|\n| `isDeleted` | boolean | Mark for deletion (requires ADMIN) |\n| `isCreated` | boolean | Mark as newly created |\n\n## Multi-Region Config\n\nControls replica count per region. Structure: region name → `{ numReplicas }` or `null` to remove.\n\n```json\n{\n  \"multiRegionConfig\": {\n    \"us-west2\": { \"numReplicas\": 3 },\n    \"europe-west4-drams3a\": { \"numReplicas\": 2 }\n  }\n}\n```\n\n### Available Regions\n\n| Name | Location | Aliases |\n|------|----------|---------|\n| `us-west2` | US West (California) | \"us west\", \"california\" |\n| `us-east4-eqdc4a` | US East (Virginia) | \"us east\", \"virginia\" |\n| `europe-west4-drams3a` | EU West (Amsterdam) | \"europe\", \"eu\", \"amsterdam\" |\n| `asia-southeast1-eqsg3a` | Southeast Asia (Singapore) | \"asia\", \"singapore\" |\n\n### Interpreting User Requests\n\n- \"add 3 replicas to europe\" → `{ \"europe-west4-drams3a\": { \"numReplicas\": 3 } }`\n- \"add a replica to all regions\" → set `numReplicas: 1` for all 4 regions\n- \"remove from asia\" → `{ \"asia-southeast1-eqsg3a\": null }`\n- \"increase replicas to 5\" (no region specified) → query current config first, update existing region(s)\n\n**Important:** When user doesn't specify a region, query the current `multiRegionConfig` and modify the existing region(s). Don't assume a default region.\n\n## Common Operations\n\n### Set Build Command\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"buildCommand\": \"npm run build\" } } } }\n```\n\n### Set Start Command\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"startCommand\": \"node server.js\" } } } }\n```\n\n### Set Replicas\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"multiRegionConfig\": { \"us-west2\": { \"numReplicas\": 3 } } } } } }\n```\n\n### Add Variables\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"API_KEY\": { \"value\": \"xxx\" } } } } }\n```\n\n### Delete Variable\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"OLD_VAR\": null } } } }\n```\n\n### Add Shared Variable\n```json\n{ \"sharedVariables\": { \"DATABASE_URL\": { \"value\": \"postgres://...\" } } }\n```\n\n### Change Docker Image\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"image\": \"nginx:latest\" } } } }\n```\n\n### Connect GitHub Repo\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"repo\": \"owner/repo\", \"branch\": \"main\" } } } }\n```\n\n### Change Git Branch\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"branch\": \"develop\" } } } }\n```\n\n### Set Health Check\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"healthcheckPath\": \"/health\", \"healthcheckTimeout\": 30 } } } }\n```\n\n### Change Builder\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"builder\": \"DOCKERFILE\", \"dockerfilePath\": \"./Dockerfile\" } } } }\n```\n\n### Delete Service\n```json\n{ \"services\": { \"<serviceId>\": { \"isDeleted\": true } } }\n```\n\n### Delete Volume\n```json\n{ \"volumes\": { \"<volumeId>\": { \"isDeleted\": true } } }\n```\n\n### New Service Instance\n```json\n{ \"services\": { \"<serviceId>\": { \"isCreated\": true, \"source\": { \"image\": \"nginx\" } } } }\n```\n\n**Note:** `isCreated: true` is required for new service instances.\n",
        "plugins/railway/skills/service/references/monorepo.md": "# Monorepo Reference\n\nRailway supports two types of monorepo deployments with different configuration approaches.\n\n## Key Decision: Root Directory vs Custom Commands\n\n| Approach | When to Use | What Happens |\n|----------|-------------|--------------|\n| **Root Directory** | Isolated apps (no shared code) | Only that directory's code is available |\n| **Custom Commands** | Shared monorepos (TypeScript, workspaces) | Full repo available, filter at build/start |\n\n**Critical:** Setting root directory means code outside that directory is NOT available during build. For monorepos with shared packages, use custom commands instead.\n\n## Isolated Monorepo\n\nApps are completely independent - no shared code between directories.\n\n```\n├── frontend/        # React app (standalone)\n│   ├── package.json\n│   └── src/\n└── backend/         # Python API (standalone)\n    ├── requirements.txt\n    └── main.py\n```\n\n### Configuration\n\nSet **Root Directory** for each service:\n- Frontend service: `/frontend`\n- Backend service: `/backend`\n\nEach service only sees its own directory's code.\n\n### When to Use\n\n- Frontend and backend in different languages\n- No shared packages or dependencies\n- Each app has its own package.json/requirements.txt\n- Apps don't import from sibling directories\n\n## Shared Monorepo\n\nApps share code from common packages or the root.\n\n```\n├── package.json           # Root workspace config\n├── packages/\n│   ├── frontend/\n│   │   ├── package.json\n│   │   └── src/\n│   ├── backend/\n│   │   ├── package.json\n│   │   └── src/\n│   └── shared/            # Shared utilities\n│       ├── package.json\n│       └── src/\n└── tsconfig.json          # Shared TS config\n```\n\n### Configuration\n\nDo NOT set root directory. Instead, use custom build and start commands:\n\n**pnpm:**\n```\nBuild: pnpm --filter backend build\nStart: pnpm --filter backend start\n```\n\n**npm workspaces:**\n```\nBuild: npm run build --workspace=packages/backend\nStart: npm run start --workspace=packages/backend\n```\n\n**yarn workspaces:**\n```\nBuild: yarn workspace backend build\nStart: yarn workspace backend start\n```\n\n**bun:**\n```\nBuild: bun run --filter backend build\nStart: bun run --filter backend start\n```\n\n**Turborepo:**\n```\nBuild: turbo run build --filter=backend\nStart: turbo run start --filter=backend\n```\n\n### When to Use\n\n- TypeScript/JavaScript monorepo with workspaces\n- Packages import from sibling packages (`@myapp/shared`)\n- Shared tsconfig.json, eslint config at root\n- Using pnpm, yarn workspaces, npm workspaces, or bun\n- Using Turborepo, Nx, or similar build tools\n\n## Watch Paths\n\nPrevent changes in one package from triggering rebuilds of other services.\n\nSet watch paths for each service to only rebuild when relevant files change:\n\n| Service | Watch Paths |\n|---------|-------------|\n| frontend | `/packages/frontend/**`, `/packages/shared/**` |\n| backend | `/packages/backend/**`, `/packages/shared/**` |\n\nInclude shared packages in watch paths if the service depends on them.\n\n### Pattern Format\n\nUses gitignore-style patterns:\n```\n/packages/backend/**     # All files in backend\n/packages/shared/**      # All files in shared (if depends on it)\n!**/*.md                 # Ignore markdown changes\n```\n\n## Configuration Examples\n\n### Isolated: React + Python API\n\nTwo separate apps, no shared code.\n\n**Frontend service:**\n- Root Directory: `/frontend`\n- No custom commands needed (Railpack auto-detects)\n\n**Backend service:**\n- Root Directory: `/backend`\n- No custom commands needed\n\n### Shared: TypeScript Monorepo with pnpm\n\nFrontend and backend share a `@myapp/shared` package.\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter frontend build`\n- Start Command: `pnpm --filter frontend start`\n- Watch Paths: `/packages/frontend/**`, `/packages/shared/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter backend build`\n- Start Command: `pnpm --filter backend start`\n- Watch Paths: `/packages/backend/**`, `/packages/shared/**`\n\n### Shared: Turborepo\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=frontend`\n- Start Command: `turbo run start --filter=frontend`\n- Watch Paths: `/apps/frontend/**`, `/packages/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=backend`\n- Start Command: `turbo run start --filter=backend`\n- Watch Paths: `/apps/backend/**`, `/packages/**`\n\n## Common Mistakes\n\n### Using Root Directory for Shared Monorepos\n\n**Wrong:**\n```\nRoot Directory: /packages/backend\n```\nThis breaks builds because `@myapp/shared` isn't available.\n\n**Right:**\n```\nRoot Directory: (empty)\nBuild Command: pnpm --filter backend build\nStart Command: pnpm --filter backend start\n```\n\n### Forgetting Watch Paths\n\nWithout watch paths, changing `frontend/` triggers a rebuild of `backend/`.\n\nAlways set watch paths for monorepos to avoid unnecessary builds.\n\n### Missing Shared Packages in Watch Paths\n\nIf `backend` imports from `shared`, include both in watch paths:\n```\n/packages/backend/**\n/packages/shared/**\n```\n\nOtherwise changes to `shared` won't trigger backend rebuilds.\n\n## Detecting Monorepo Type\n\nCheck for these indicators:\n\n**Isolated monorepo:**\n- Separate package.json in each directory\n- No workspace config in root package.json\n- No imports between directories\n\n**Shared monorepo:**\n- Root package.json with `workspaces` field\n- `pnpm-workspace.yaml` exists\n- Packages import from each other (`@myapp/shared`)\n- Shared tsconfig.json at root\n- turbo.json or nx.json at root\n",
        "plugins/railway/skills/service/references/railpack.md": "# Railpack Reference\n\nRailpack is Railway's default builder. Zero-config for most projects.\n\nFull docs: https://railpack.com/llms.txt\n\n## Detection\n\nRailpack analyzes source code to detect language, framework, and build requirements automatically.\n\nSupported: Node, Python, Go, PHP, Java, Ruby, Rust, Elixir, Gleam, Deno, C/C++, static files.\n\n## Static Sites\n\n### Detection Patterns\n\nRailpack serves static files via Caddy when it detects:\n1. `Staticfile` in root (can specify `root: dist`)\n2. `index.html` in root\n3. `public/` directory\n4. `RAILPACK_STATIC_FILE_ROOT` env var set\n\n### Root Directory Priority\n\n1. `RAILPACK_STATIC_FILE_ROOT` env var\n2. `root` in `Staticfile`\n3. `public/` directory\n4. Current directory (if index.html exists)\n\n### Common Patterns\n\nRailpack auto-detects common static build outputs. Only set `RAILPACK_STATIC_FILE_ROOT` for non-standard output directories.\n\n| Framework | Build Output | Config Needed |\n|-----------|--------------|---------------|\n| Plain HTML | root | None (auto-detected) |\n| Vite | dist | None (auto-detected) |\n| Astro (static) | dist | None (auto-detected) |\n| Create React App | build | None (auto-detected) |\n| Angular | dist/<project> | `RAILPACK_STATIC_FILE_ROOT=dist/<project>` (non-standard path) |\n| Custom output | varies | Set if output dir is non-standard |\n\n### Custom Caddyfile\n\nPut a `Caddyfile` in project root to override default serving behavior.\n\n## Node.js\n\n### Detection\n- `package.json` in root\n\n### Version Priority\n1. `RAILPACK_NODE_VERSION` env var\n2. `engines.node` in package.json\n3. `.nvmrc` or `.node-version`\n4. Default: Node 22\n\n### Package Manager Detection\n1. `packageManager` field in package.json (enables Corepack)\n2. Lock file: `pnpm-lock.yaml`, `bun.lockb`, `yarn.lock`\n3. Default: npm\n\n### Build Command\nAuto-detected from package.json `scripts.build`. Override via `buildCommand` in service settings.\n\n### Start Command\nAuto-detected:\n1. `scripts.start` in package.json\n2. `main` field in package.json\n3. `index.js` or `index.ts` in root\n\nOverride via `startCommand` in service settings.\n\n### Framework Detection\n\n| Framework | Detection | Notes |\n|-----------|-----------|-------|\n| Next.js | `next` in dependencies | Caches `.next/cache` |\n| Vite | `vite` in devDependencies | Static or SSR mode |\n| Astro | `astro` in dependencies | Caches `.astro` |\n| Nuxt | `nuxt` in dependencies | Auto start command |\n| Remix | `@remix-run/*` in deps | - |\n\n### Static Site Mode (SPA)\n\nFor frameworks like Vite, CRA, Astro (static), Angular:\n- Railpack builds then serves via Caddy\n- Set `RAILPACK_SPA_OUTPUT_DIR` if output isn't `dist`\n\n## Python\n\n### Detection\n- `requirements.txt`, `pyproject.toml`, `Pipfile`, or `uv.lock`\n\n### Version Priority\n1. `RAILPACK_PYTHON_VERSION` env var\n2. `.python-version` file\n3. `requires-python` in pyproject.toml\n4. Default: Python 3.12\n\n### WSGI/ASGI Auto-Config\n\n| Framework | Start Command |\n|-----------|---------------|\n| Django | `gunicorn <project>.wsgi` |\n| FastAPI | `uvicorn main:app --host 0.0.0.0` |\n| Flask | `gunicorn app:app` |\n\nOverride via `startCommand` in service settings.\n\n## Go\n\n### Detection\n- `go.mod` in root\n\n### Build\nCompiles to binary automatically. For `cmd/` structure, set binary name or use `RAILPACK_GO_BIN`.\n\n## Rust\n\n### Detection\n- `Cargo.toml` in root\n\n### Build\nRelease build by default. Binary auto-detected from Cargo.toml.\n\n## Configuration\n\n### Preferred: Service Settings\n\nUse `environment` skill to set:\n- `buildCommand` - Custom build command\n- `startCommand` - Custom start command\n\nThese are stored in Railway and don't pollute your codebase.\n\n### Environment Variables\n\n| Variable | Purpose |\n|----------|---------|\n| `RAILPACK_STATIC_FILE_ROOT` | Static file serving directory |\n| `RAILPACK_SPA_OUTPUT_DIR` | SPA build output (defaults to `dist`) |\n| `RAILPACK_NODE_VERSION` | Node.js version |\n| `RAILPACK_PYTHON_VERSION` | Python version |\n| `RAILPACK_GO_BIN` | Go binary name |\n| `RAILPACK_PACKAGES` | Additional Mise packages (`pkg@version`) |\n| `RAILPACK_BUILD_APT_PACKAGES` | System packages for build |\n| `RAILPACK_DEPLOY_APT_PACKAGES` | System packages for runtime |\n\n### railpack.json\n\nAdvanced config for custom build steps:\n\n```json\n{\n  \"$schema\": \"https://schema.railpack.com\",\n  \"packages\": {\n    \"ffmpeg\": \"latest\"\n  },\n  \"deploy\": {\n    \"aptPackages\": [\"libmagic1\"]\n  }\n}\n```\n\n### railway.toml\n\nAlternative config format:\n\n```toml\n[build]\nbuilder = \"RAILPACK\"\nbuildCommand = \"npm run build\"\n\n[deploy]\nstartCommand = \"npm start\"\n```\n\n## Minimal Project Scaffolding\n\nWhen no code exists, suggest these patterns:\n\n### Static HTML\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>My Site</title>\n</head>\n<body>\n  <h1>Hello Railway</h1>\n</body>\n</html>\n```\n\n### Vite React\n```bash\nnpm create vite@latest . -- --template react\n```\n\n### Astro\n```bash\nnpm create astro@latest\n```\n\n### Python FastAPI\n```python\n# main.py\nfrom fastapi import FastAPI\napp = FastAPI()\n\n@app.get(\"/\")\ndef root():\n    return {\"message\": \"Hello Railway\"}\n```\n\n```txt\n# requirements.txt\nfastapi\nuvicorn\n```\n\n### Go HTTP Server\n```go\n// main.go\npackage main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"8080\"\n    }\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        fmt.Fprintf(w, \"Hello Railway\")\n    })\n    http.ListenAndServe(\":\"+port, nil)\n}\n```\n\n## Troubleshooting\n\n| Issue | Solution |\n|-------|----------|\n| Static site 404s | Check output dir - set `RAILPACK_STATIC_FILE_ROOT` if non-standard |\n| Wrong build command | Use `environment` skill to set `buildCommand` |\n| Wrong start command | Use `environment` skill to set `startCommand` |\n| Missing system package | Add to `RAILPACK_BUILD_APT_PACKAGES` or `RAILPACK_DEPLOY_APT_PACKAGES` |\n| Wrong Node version | Set `RAILPACK_NODE_VERSION` or add `.nvmrc` |\n| Wrong Python version | Set `RAILPACK_PYTHON_VERSION` or add `.python-version` |\n",
        "plugins/railway/skills/service/references/variables.md": "# Variables Reference\n\nVariables in Railway support references to other services, shared variables, and Railway-provided values.\n\n## Template Syntax\n\n```\n${{NAMESPACE.VAR}}\n```\n\n| Namespace | Description |\n|-----------|-------------|\n| `shared` | Shared variables (project-wide) |\n| `<serviceName>` | Variables from another service (case-sensitive) |\n\n## Examples\n\n**Reference shared variable:**\n```json\n{ \"value\": \"${{shared.DOMAIN}}\" }\n```\n\n**Reference another service's variable:**\n```json\n{ \"value\": \"${{api.API_KEY}}\" }\n```\n\n**Combine with text:**\n```json\n{ \"value\": \"https://${{shared.DOMAIN}}/api\" }\n```\n\n## Railway-Provided Variables\n\nRailway injects these into every service automatically.\n\n### Networking\n| Variable | Description | Example | Availability |\n|----------|-------------|---------|--------------|\n| `RAILWAY_PUBLIC_DOMAIN` | Public domain | `myapp.up.railway.app` | Only if service has a domain |\n| `RAILWAY_PRIVATE_DOMAIN` | Private DNS (internal only) | `myapp.railway.internal` | Always |\n| `RAILWAY_TCP_PROXY_DOMAIN` | TCP proxy domain | `roundhouse.proxy.rlwy.net` | Only if TCP proxy enabled |\n| `RAILWAY_TCP_PROXY_PORT` | TCP proxy port | `11105` | Only if TCP proxy enabled |\n\n**Note:** `RAILWAY_PUBLIC_DOMAIN` is only available if the service has a domain configured.\nCheck the service's environment config to verify a domain exists before referencing it.\n\n### Context\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_PROJECT_ID` | Project ID |\n| `RAILWAY_PROJECT_NAME` | Project name |\n| `RAILWAY_ENVIRONMENT_ID` | Environment ID |\n| `RAILWAY_ENVIRONMENT_NAME` | Environment name |\n| `RAILWAY_SERVICE_ID` | Service ID |\n| `RAILWAY_SERVICE_NAME` | Service name |\n| `RAILWAY_DEPLOYMENT_ID` | Deployment ID |\n| `RAILWAY_REPLICA_ID` | Replica ID |\n| `RAILWAY_REPLICA_REGION` | Region (e.g., `us-west2`) |\n\n### Volume (if attached)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_VOLUME_NAME` | Volume name |\n| `RAILWAY_VOLUME_MOUNT_PATH` | Mount path |\n\n### Git (if deployed from GitHub)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_GIT_COMMIT_SHA` | Commit SHA |\n| `RAILWAY_GIT_BRANCH` | Branch name |\n| `RAILWAY_GIT_REPO_NAME` | Repository name |\n| `RAILWAY_GIT_REPO_OWNER` | Repository owner |\n| `RAILWAY_GIT_AUTHOR` | Commit author |\n| `RAILWAY_GIT_COMMIT_MESSAGE` | Commit message |\n\n## Wiring Services Together\n\n### Frontend → Backend (public network)\nUse when: Browser makes requests to API (browser can't access private network)\n\n```json\n{\n  \"services\": {\n    \"<frontendId>\": {\n      \"variables\": {\n        \"API_URL\": { \"value\": \"https://${{backend.RAILWAY_PUBLIC_DOMAIN}}\" }\n      }\n    }\n  }\n}\n```\n\n### Service → Database (private network)\nUse when: Backend connects to database (faster, no egress cost, more secure)\n\nRailway databases auto-generate connection URL variables. Use the private versions:\n\n| Database | Variable Reference |\n|----------|-------------------|\n| Postgres | `${{Postgres.DATABASE_URL}}` |\n| MySQL | `${{MySQL.DATABASE_URL}}` |\n| Redis | `${{Redis.REDIS_URL}}` |\n| Mongo | `${{Mongo.MONGO_URL}}` |\n\n**Postgres/MySQL example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"DATABASE_URL\": { \"value\": \"${{Postgres.DATABASE_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Redis example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"REDIS_URL\": { \"value\": \"${{Redis.REDIS_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Mongo example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"MONGO_URL\": { \"value\": \"${{Mongo.MONGO_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Note:** Service names are case-sensitive. Match the exact name from your project (e.g., \"Postgres\", \"Redis\").\n\n### Service → Service (private network)\nUse when: Microservices communicate internally\n\n```json\n{\n  \"services\": {\n    \"<workerServiceId>\": {\n      \"variables\": {\n        \"API_INTERNAL_URL\": { \"value\": \"http://${{api.RAILWAY_PRIVATE_DOMAIN}}:${{api.PORT}}\" }\n      }\n    }\n  }\n}\n```\n\n## When to Use Public vs Private\n\n| Use Case | Domain | Reason |\n|----------|--------|--------|\n| Browser → API | Public | Browser can't access private network |\n| Service → Service | Private | Faster, no egress, more secure |\n| Service → Database | Private | Databases should never be public |\n| External webhook → Service | Public | External services need public access |\n| Cron job → API | Private | Internal communication |\n",
        "plugins/railway/skills/status/SKILL.md": "---\nname: status\ndescription: This skill should be used when the user asks \"railway status\", \"is it running\", \"what's deployed\", \"deployment status\", or about uptime. NOT for variables (\"what variables\", \"env vars\", \"add variable\") or configuration queries - use environment skill for those.\nallowed-tools: Bash(railway:*), Bash(which:*), Bash(command:*)\n---\n\n# Railway Status\n\nCheck the current Railway project status for this directory.\n\n## When to Use\n\n- User asks about Railway status, project, services, or deployments\n- User mentions deploying or pushing to Railway\n- Before any Railway operation (deploy, update service, add variables)\n- User asks about environments or domains\n\n## When NOT to Use\n\nUse the `environment` skill instead when user wants:\n- Detailed service configuration (builder type, dockerfile path, build command, root directory)\n- Deploy config (start command, restart policy, healthchecks, predeploy command)\n- Service source (repo, branch, image)\n- Compare service configs\n- Query or change environment variables\n\n## Check Status\n\nRun:\n```bash\nrailway status --json\n```\n\nFirst verify CLI is installed:\n```bash\ncommand -v railway\n```\n\n## Handling Errors\n\n### CLI Not Installed\nIf `command -v railway` fails:\n\n> Railway CLI is not installed. Install with:\n> ```\n> npm install -g @railway/cli\n> ```\n> or\n> ```\n> brew install railway\n> ```\n> Then authenticate: `railway login`\n\n### Not Authenticated\nIf `railway whoami` fails:\n\n> Not logged in to Railway. Run:\n> ```\n> railway login\n> ```\n\n### No Project Linked\nIf status returns \"No linked project\":\n\n> No Railway project linked to this directory.\n>\n> To link an existing project: `railway link`\n> To create a new project: `railway init`\n\n## Presenting Status\n\nParse the JSON and present:\n- **Project**: name and workspace\n- **Environment**: current environment (production, staging, etc.)\n- **Services**: list with deployment status\n- **Active Deployments**: any in-progress deployments (from `activeDeployments` field)\n- **Domains**: any configured domains\n\nExample output format:\n```\nProject: my-app (workspace: my-team)\nEnvironment: production\n\nServices:\n- web: deployed (https://my-app.up.railway.app)\n- api: deploying (build in progress)\n- postgres: running\n```\n\nThe `activeDeployments` array on each service shows currently running deployments\nwith their status (building, deploying, etc.).\n",
        "plugins/railway/skills/status/references/environment-config.md": "# Environment Config Reference\n\nThe `EnvironmentConfig` object is used to configure services, volumes, and shared variables in Railway.\n\n## Structure\n\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"source\": { ... },\n      \"build\": { ... },\n      \"deploy\": { ... },\n      \"variables\": { ... },\n      \"networking\": { ... }\n    }\n  },\n  \"sharedVariables\": { ... },\n  \"volumes\": { ... },\n  \"buckets\": { ... }\n}\n```\n\nOnly include fields being changed. The patch is merged with existing config.\n\n## Service Config\n\n### Source\n| Field | Type | Description |\n|-------|------|-------------|\n| `image` | string | Docker image (e.g., `nginx:latest`) |\n| `repo` | string | Git repository URL |\n| `branch` | string | Git branch to deploy |\n| `commitSha` | string | Specific commit SHA |\n| `rootDirectory` | string | Root directory (monorepos) |\n| `checkSuites` | boolean | Wait for GitHub check suites |\n| `autoUpdates.type` | disabled \\| patch \\| minor | Auto-update policy for Docker images |\n\n### Build\n| Field | Type | Description |\n|-------|------|-------------|\n| `builder` | NIXPACKS \\| DOCKERFILE \\| RAILPACK | Build system |\n| `buildCommand` | string | Command for Nixpacks builds |\n| `dockerfilePath` | string | Path to Dockerfile |\n| `watchPatterns` | string[] | Patterns to trigger deploys |\n| `nixpacksConfigPath` | string | Path to nixpacks config |\n\n### Deploy\n| Field | Type | Description |\n|-------|------|-------------|\n| `startCommand` | string | Container start command |\n| `multiRegionConfig` | object | Region → replica config. See [Multi-Region Config](#multi-region-config). |\n| `healthcheckPath` | string | Health check endpoint |\n| `healthcheckTimeout` | number | Seconds to wait for health |\n| `restartPolicyType` | ON_FAILURE \\| ALWAYS \\| NEVER | Restart behavior |\n| `restartPolicyMaxRetries` | number | Max restart attempts |\n| `cronSchedule` | string | Cron schedule for cron jobs |\n| `sleepApplication` | boolean | Sleep when inactive |\n\n### Variables\n| Field | Type | Description |\n|-------|------|-------------|\n| `value` | string | Variable value |\n| `isOptional` | boolean | Allow empty value |\n\nSet to `null` to delete a variable.\n\nFor variable references, see [variables.md](variables.md).\n\n### Lifecycle\n| Field | Type | Description |\n|-------|------|-------------|\n| `isDeleted` | boolean | Mark for deletion (requires ADMIN) |\n| `isCreated` | boolean | Mark as newly created |\n\n## Multi-Region Config\n\nControls replica count per region. Structure: region name → `{ numReplicas }` or `null` to remove.\n\n```json\n{\n  \"multiRegionConfig\": {\n    \"us-west2\": { \"numReplicas\": 3 },\n    \"europe-west4-drams3a\": { \"numReplicas\": 2 }\n  }\n}\n```\n\n### Available Regions\n\n| Name | Location | Aliases |\n|------|----------|---------|\n| `us-west2` | US West (California) | \"us west\", \"california\" |\n| `us-east4-eqdc4a` | US East (Virginia) | \"us east\", \"virginia\" |\n| `europe-west4-drams3a` | EU West (Amsterdam) | \"europe\", \"eu\", \"amsterdam\" |\n| `asia-southeast1-eqsg3a` | Southeast Asia (Singapore) | \"asia\", \"singapore\" |\n\n### Interpreting User Requests\n\n- \"add 3 replicas to europe\" → `{ \"europe-west4-drams3a\": { \"numReplicas\": 3 } }`\n- \"add a replica to all regions\" → set `numReplicas: 1` for all 4 regions\n- \"remove from asia\" → `{ \"asia-southeast1-eqsg3a\": null }`\n- \"increase replicas to 5\" (no region specified) → query current config first, update existing region(s)\n\n**Important:** When user doesn't specify a region, query the current `multiRegionConfig` and modify the existing region(s). Don't assume a default region.\n\n## Common Operations\n\n### Set Build Command\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"buildCommand\": \"npm run build\" } } } }\n```\n\n### Set Start Command\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"startCommand\": \"node server.js\" } } } }\n```\n\n### Set Replicas\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"multiRegionConfig\": { \"us-west2\": { \"numReplicas\": 3 } } } } } }\n```\n\n### Add Variables\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"API_KEY\": { \"value\": \"xxx\" } } } } }\n```\n\n### Delete Variable\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"OLD_VAR\": null } } } }\n```\n\n### Add Shared Variable\n```json\n{ \"sharedVariables\": { \"DATABASE_URL\": { \"value\": \"postgres://...\" } } }\n```\n\n### Change Docker Image\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"image\": \"nginx:latest\" } } } }\n```\n\n### Connect GitHub Repo\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"repo\": \"owner/repo\", \"branch\": \"main\" } } } }\n```\n\n### Change Git Branch\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"branch\": \"develop\" } } } }\n```\n\n### Set Health Check\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"healthcheckPath\": \"/health\", \"healthcheckTimeout\": 30 } } } }\n```\n\n### Change Builder\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"builder\": \"DOCKERFILE\", \"dockerfilePath\": \"./Dockerfile\" } } } }\n```\n\n### Delete Service\n```json\n{ \"services\": { \"<serviceId>\": { \"isDeleted\": true } } }\n```\n\n### Delete Volume\n```json\n{ \"volumes\": { \"<volumeId>\": { \"isDeleted\": true } } }\n```\n\n### New Service Instance\n```json\n{ \"services\": { \"<serviceId>\": { \"isCreated\": true, \"source\": { \"image\": \"nginx\" } } } }\n```\n\n**Note:** `isCreated: true` is required for new service instances.\n",
        "plugins/railway/skills/status/references/monorepo.md": "# Monorepo Reference\n\nRailway supports two types of monorepo deployments with different configuration approaches.\n\n## Key Decision: Root Directory vs Custom Commands\n\n| Approach | When to Use | What Happens |\n|----------|-------------|--------------|\n| **Root Directory** | Isolated apps (no shared code) | Only that directory's code is available |\n| **Custom Commands** | Shared monorepos (TypeScript, workspaces) | Full repo available, filter at build/start |\n\n**Critical:** Setting root directory means code outside that directory is NOT available during build. For monorepos with shared packages, use custom commands instead.\n\n## Isolated Monorepo\n\nApps are completely independent - no shared code between directories.\n\n```\n├── frontend/        # React app (standalone)\n│   ├── package.json\n│   └── src/\n└── backend/         # Python API (standalone)\n    ├── requirements.txt\n    └── main.py\n```\n\n### Configuration\n\nSet **Root Directory** for each service:\n- Frontend service: `/frontend`\n- Backend service: `/backend`\n\nEach service only sees its own directory's code.\n\n### When to Use\n\n- Frontend and backend in different languages\n- No shared packages or dependencies\n- Each app has its own package.json/requirements.txt\n- Apps don't import from sibling directories\n\n## Shared Monorepo\n\nApps share code from common packages or the root.\n\n```\n├── package.json           # Root workspace config\n├── packages/\n│   ├── frontend/\n│   │   ├── package.json\n│   │   └── src/\n│   ├── backend/\n│   │   ├── package.json\n│   │   └── src/\n│   └── shared/            # Shared utilities\n│       ├── package.json\n│       └── src/\n└── tsconfig.json          # Shared TS config\n```\n\n### Configuration\n\nDo NOT set root directory. Instead, use custom build and start commands:\n\n**pnpm:**\n```\nBuild: pnpm --filter backend build\nStart: pnpm --filter backend start\n```\n\n**npm workspaces:**\n```\nBuild: npm run build --workspace=packages/backend\nStart: npm run start --workspace=packages/backend\n```\n\n**yarn workspaces:**\n```\nBuild: yarn workspace backend build\nStart: yarn workspace backend start\n```\n\n**bun:**\n```\nBuild: bun run --filter backend build\nStart: bun run --filter backend start\n```\n\n**Turborepo:**\n```\nBuild: turbo run build --filter=backend\nStart: turbo run start --filter=backend\n```\n\n### When to Use\n\n- TypeScript/JavaScript monorepo with workspaces\n- Packages import from sibling packages (`@myapp/shared`)\n- Shared tsconfig.json, eslint config at root\n- Using pnpm, yarn workspaces, npm workspaces, or bun\n- Using Turborepo, Nx, or similar build tools\n\n## Watch Paths\n\nPrevent changes in one package from triggering rebuilds of other services.\n\nSet watch paths for each service to only rebuild when relevant files change:\n\n| Service | Watch Paths |\n|---------|-------------|\n| frontend | `/packages/frontend/**`, `/packages/shared/**` |\n| backend | `/packages/backend/**`, `/packages/shared/**` |\n\nInclude shared packages in watch paths if the service depends on them.\n\n### Pattern Format\n\nUses gitignore-style patterns:\n```\n/packages/backend/**     # All files in backend\n/packages/shared/**      # All files in shared (if depends on it)\n!**/*.md                 # Ignore markdown changes\n```\n\n## Configuration Examples\n\n### Isolated: React + Python API\n\nTwo separate apps, no shared code.\n\n**Frontend service:**\n- Root Directory: `/frontend`\n- No custom commands needed (Railpack auto-detects)\n\n**Backend service:**\n- Root Directory: `/backend`\n- No custom commands needed\n\n### Shared: TypeScript Monorepo with pnpm\n\nFrontend and backend share a `@myapp/shared` package.\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter frontend build`\n- Start Command: `pnpm --filter frontend start`\n- Watch Paths: `/packages/frontend/**`, `/packages/shared/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter backend build`\n- Start Command: `pnpm --filter backend start`\n- Watch Paths: `/packages/backend/**`, `/packages/shared/**`\n\n### Shared: Turborepo\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=frontend`\n- Start Command: `turbo run start --filter=frontend`\n- Watch Paths: `/apps/frontend/**`, `/packages/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=backend`\n- Start Command: `turbo run start --filter=backend`\n- Watch Paths: `/apps/backend/**`, `/packages/**`\n\n## Common Mistakes\n\n### Using Root Directory for Shared Monorepos\n\n**Wrong:**\n```\nRoot Directory: /packages/backend\n```\nThis breaks builds because `@myapp/shared` isn't available.\n\n**Right:**\n```\nRoot Directory: (empty)\nBuild Command: pnpm --filter backend build\nStart Command: pnpm --filter backend start\n```\n\n### Forgetting Watch Paths\n\nWithout watch paths, changing `frontend/` triggers a rebuild of `backend/`.\n\nAlways set watch paths for monorepos to avoid unnecessary builds.\n\n### Missing Shared Packages in Watch Paths\n\nIf `backend` imports from `shared`, include both in watch paths:\n```\n/packages/backend/**\n/packages/shared/**\n```\n\nOtherwise changes to `shared` won't trigger backend rebuilds.\n\n## Detecting Monorepo Type\n\nCheck for these indicators:\n\n**Isolated monorepo:**\n- Separate package.json in each directory\n- No workspace config in root package.json\n- No imports between directories\n\n**Shared monorepo:**\n- Root package.json with `workspaces` field\n- `pnpm-workspace.yaml` exists\n- Packages import from each other (`@myapp/shared`)\n- Shared tsconfig.json at root\n- turbo.json or nx.json at root\n",
        "plugins/railway/skills/status/references/railpack.md": "# Railpack Reference\n\nRailpack is Railway's default builder. Zero-config for most projects.\n\nFull docs: https://railpack.com/llms.txt\n\n## Detection\n\nRailpack analyzes source code to detect language, framework, and build requirements automatically.\n\nSupported: Node, Python, Go, PHP, Java, Ruby, Rust, Elixir, Gleam, Deno, C/C++, static files.\n\n## Static Sites\n\n### Detection Patterns\n\nRailpack serves static files via Caddy when it detects:\n1. `Staticfile` in root (can specify `root: dist`)\n2. `index.html` in root\n3. `public/` directory\n4. `RAILPACK_STATIC_FILE_ROOT` env var set\n\n### Root Directory Priority\n\n1. `RAILPACK_STATIC_FILE_ROOT` env var\n2. `root` in `Staticfile`\n3. `public/` directory\n4. Current directory (if index.html exists)\n\n### Common Patterns\n\nRailpack auto-detects common static build outputs. Only set `RAILPACK_STATIC_FILE_ROOT` for non-standard output directories.\n\n| Framework | Build Output | Config Needed |\n|-----------|--------------|---------------|\n| Plain HTML | root | None (auto-detected) |\n| Vite | dist | None (auto-detected) |\n| Astro (static) | dist | None (auto-detected) |\n| Create React App | build | None (auto-detected) |\n| Angular | dist/<project> | `RAILPACK_STATIC_FILE_ROOT=dist/<project>` (non-standard path) |\n| Custom output | varies | Set if output dir is non-standard |\n\n### Custom Caddyfile\n\nPut a `Caddyfile` in project root to override default serving behavior.\n\n## Node.js\n\n### Detection\n- `package.json` in root\n\n### Version Priority\n1. `RAILPACK_NODE_VERSION` env var\n2. `engines.node` in package.json\n3. `.nvmrc` or `.node-version`\n4. Default: Node 22\n\n### Package Manager Detection\n1. `packageManager` field in package.json (enables Corepack)\n2. Lock file: `pnpm-lock.yaml`, `bun.lockb`, `yarn.lock`\n3. Default: npm\n\n### Build Command\nAuto-detected from package.json `scripts.build`. Override via `buildCommand` in service settings.\n\n### Start Command\nAuto-detected:\n1. `scripts.start` in package.json\n2. `main` field in package.json\n3. `index.js` or `index.ts` in root\n\nOverride via `startCommand` in service settings.\n\n### Framework Detection\n\n| Framework | Detection | Notes |\n|-----------|-----------|-------|\n| Next.js | `next` in dependencies | Caches `.next/cache` |\n| Vite | `vite` in devDependencies | Static or SSR mode |\n| Astro | `astro` in dependencies | Caches `.astro` |\n| Nuxt | `nuxt` in dependencies | Auto start command |\n| Remix | `@remix-run/*` in deps | - |\n\n### Static Site Mode (SPA)\n\nFor frameworks like Vite, CRA, Astro (static), Angular:\n- Railpack builds then serves via Caddy\n- Set `RAILPACK_SPA_OUTPUT_DIR` if output isn't `dist`\n\n## Python\n\n### Detection\n- `requirements.txt`, `pyproject.toml`, `Pipfile`, or `uv.lock`\n\n### Version Priority\n1. `RAILPACK_PYTHON_VERSION` env var\n2. `.python-version` file\n3. `requires-python` in pyproject.toml\n4. Default: Python 3.12\n\n### WSGI/ASGI Auto-Config\n\n| Framework | Start Command |\n|-----------|---------------|\n| Django | `gunicorn <project>.wsgi` |\n| FastAPI | `uvicorn main:app --host 0.0.0.0` |\n| Flask | `gunicorn app:app` |\n\nOverride via `startCommand` in service settings.\n\n## Go\n\n### Detection\n- `go.mod` in root\n\n### Build\nCompiles to binary automatically. For `cmd/` structure, set binary name or use `RAILPACK_GO_BIN`.\n\n## Rust\n\n### Detection\n- `Cargo.toml` in root\n\n### Build\nRelease build by default. Binary auto-detected from Cargo.toml.\n\n## Configuration\n\n### Preferred: Service Settings\n\nUse `environment` skill to set:\n- `buildCommand` - Custom build command\n- `startCommand` - Custom start command\n\nThese are stored in Railway and don't pollute your codebase.\n\n### Environment Variables\n\n| Variable | Purpose |\n|----------|---------|\n| `RAILPACK_STATIC_FILE_ROOT` | Static file serving directory |\n| `RAILPACK_SPA_OUTPUT_DIR` | SPA build output (defaults to `dist`) |\n| `RAILPACK_NODE_VERSION` | Node.js version |\n| `RAILPACK_PYTHON_VERSION` | Python version |\n| `RAILPACK_GO_BIN` | Go binary name |\n| `RAILPACK_PACKAGES` | Additional Mise packages (`pkg@version`) |\n| `RAILPACK_BUILD_APT_PACKAGES` | System packages for build |\n| `RAILPACK_DEPLOY_APT_PACKAGES` | System packages for runtime |\n\n### railpack.json\n\nAdvanced config for custom build steps:\n\n```json\n{\n  \"$schema\": \"https://schema.railpack.com\",\n  \"packages\": {\n    \"ffmpeg\": \"latest\"\n  },\n  \"deploy\": {\n    \"aptPackages\": [\"libmagic1\"]\n  }\n}\n```\n\n### railway.toml\n\nAlternative config format:\n\n```toml\n[build]\nbuilder = \"RAILPACK\"\nbuildCommand = \"npm run build\"\n\n[deploy]\nstartCommand = \"npm start\"\n```\n\n## Minimal Project Scaffolding\n\nWhen no code exists, suggest these patterns:\n\n### Static HTML\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>My Site</title>\n</head>\n<body>\n  <h1>Hello Railway</h1>\n</body>\n</html>\n```\n\n### Vite React\n```bash\nnpm create vite@latest . -- --template react\n```\n\n### Astro\n```bash\nnpm create astro@latest\n```\n\n### Python FastAPI\n```python\n# main.py\nfrom fastapi import FastAPI\napp = FastAPI()\n\n@app.get(\"/\")\ndef root():\n    return {\"message\": \"Hello Railway\"}\n```\n\n```txt\n# requirements.txt\nfastapi\nuvicorn\n```\n\n### Go HTTP Server\n```go\n// main.go\npackage main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"8080\"\n    }\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        fmt.Fprintf(w, \"Hello Railway\")\n    })\n    http.ListenAndServe(\":\"+port, nil)\n}\n```\n\n## Troubleshooting\n\n| Issue | Solution |\n|-------|----------|\n| Static site 404s | Check output dir - set `RAILPACK_STATIC_FILE_ROOT` if non-standard |\n| Wrong build command | Use `environment` skill to set `buildCommand` |\n| Wrong start command | Use `environment` skill to set `startCommand` |\n| Missing system package | Add to `RAILPACK_BUILD_APT_PACKAGES` or `RAILPACK_DEPLOY_APT_PACKAGES` |\n| Wrong Node version | Set `RAILPACK_NODE_VERSION` or add `.nvmrc` |\n| Wrong Python version | Set `RAILPACK_PYTHON_VERSION` or add `.python-version` |\n",
        "plugins/railway/skills/status/references/variables.md": "# Variables Reference\n\nVariables in Railway support references to other services, shared variables, and Railway-provided values.\n\n## Template Syntax\n\n```\n${{NAMESPACE.VAR}}\n```\n\n| Namespace | Description |\n|-----------|-------------|\n| `shared` | Shared variables (project-wide) |\n| `<serviceName>` | Variables from another service (case-sensitive) |\n\n## Examples\n\n**Reference shared variable:**\n```json\n{ \"value\": \"${{shared.DOMAIN}}\" }\n```\n\n**Reference another service's variable:**\n```json\n{ \"value\": \"${{api.API_KEY}}\" }\n```\n\n**Combine with text:**\n```json\n{ \"value\": \"https://${{shared.DOMAIN}}/api\" }\n```\n\n## Railway-Provided Variables\n\nRailway injects these into every service automatically.\n\n### Networking\n| Variable | Description | Example | Availability |\n|----------|-------------|---------|--------------|\n| `RAILWAY_PUBLIC_DOMAIN` | Public domain | `myapp.up.railway.app` | Only if service has a domain |\n| `RAILWAY_PRIVATE_DOMAIN` | Private DNS (internal only) | `myapp.railway.internal` | Always |\n| `RAILWAY_TCP_PROXY_DOMAIN` | TCP proxy domain | `roundhouse.proxy.rlwy.net` | Only if TCP proxy enabled |\n| `RAILWAY_TCP_PROXY_PORT` | TCP proxy port | `11105` | Only if TCP proxy enabled |\n\n**Note:** `RAILWAY_PUBLIC_DOMAIN` is only available if the service has a domain configured.\nCheck the service's environment config to verify a domain exists before referencing it.\n\n### Context\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_PROJECT_ID` | Project ID |\n| `RAILWAY_PROJECT_NAME` | Project name |\n| `RAILWAY_ENVIRONMENT_ID` | Environment ID |\n| `RAILWAY_ENVIRONMENT_NAME` | Environment name |\n| `RAILWAY_SERVICE_ID` | Service ID |\n| `RAILWAY_SERVICE_NAME` | Service name |\n| `RAILWAY_DEPLOYMENT_ID` | Deployment ID |\n| `RAILWAY_REPLICA_ID` | Replica ID |\n| `RAILWAY_REPLICA_REGION` | Region (e.g., `us-west2`) |\n\n### Volume (if attached)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_VOLUME_NAME` | Volume name |\n| `RAILWAY_VOLUME_MOUNT_PATH` | Mount path |\n\n### Git (if deployed from GitHub)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_GIT_COMMIT_SHA` | Commit SHA |\n| `RAILWAY_GIT_BRANCH` | Branch name |\n| `RAILWAY_GIT_REPO_NAME` | Repository name |\n| `RAILWAY_GIT_REPO_OWNER` | Repository owner |\n| `RAILWAY_GIT_AUTHOR` | Commit author |\n| `RAILWAY_GIT_COMMIT_MESSAGE` | Commit message |\n\n## Wiring Services Together\n\n### Frontend → Backend (public network)\nUse when: Browser makes requests to API (browser can't access private network)\n\n```json\n{\n  \"services\": {\n    \"<frontendId>\": {\n      \"variables\": {\n        \"API_URL\": { \"value\": \"https://${{backend.RAILWAY_PUBLIC_DOMAIN}}\" }\n      }\n    }\n  }\n}\n```\n\n### Service → Database (private network)\nUse when: Backend connects to database (faster, no egress cost, more secure)\n\nRailway databases auto-generate connection URL variables. Use the private versions:\n\n| Database | Variable Reference |\n|----------|-------------------|\n| Postgres | `${{Postgres.DATABASE_URL}}` |\n| MySQL | `${{MySQL.DATABASE_URL}}` |\n| Redis | `${{Redis.REDIS_URL}}` |\n| Mongo | `${{Mongo.MONGO_URL}}` |\n\n**Postgres/MySQL example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"DATABASE_URL\": { \"value\": \"${{Postgres.DATABASE_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Redis example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"REDIS_URL\": { \"value\": \"${{Redis.REDIS_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Mongo example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"MONGO_URL\": { \"value\": \"${{Mongo.MONGO_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Note:** Service names are case-sensitive. Match the exact name from your project (e.g., \"Postgres\", \"Redis\").\n\n### Service → Service (private network)\nUse when: Microservices communicate internally\n\n```json\n{\n  \"services\": {\n    \"<workerServiceId>\": {\n      \"variables\": {\n        \"API_INTERNAL_URL\": { \"value\": \"http://${{api.RAILWAY_PRIVATE_DOMAIN}}:${{api.PORT}}\" }\n      }\n    }\n  }\n}\n```\n\n## When to Use Public vs Private\n\n| Use Case | Domain | Reason |\n|----------|--------|--------|\n| Browser → API | Public | Browser can't access private network |\n| Service → Service | Private | Faster, no egress, more secure |\n| Service → Database | Private | Databases should never be public |\n| External webhook → Service | Public | External services need public access |\n| Cron job → API | Private | Internal communication |\n",
        "plugins/railway/skills/templates/SKILL.md": "---\nname: templates\ndescription: This skill should be used when the user wants to add a service from a template, find templates for a specific use case, or deploy tools like Ghost, Strapi, n8n, Minio, Uptime Kuma, etc. For databases (Postgres, Redis, MySQL, MongoDB), prefer the database skill.\nallowed-tools: Bash(railway:*)\n---\n\n# Templates\n\nSearch and deploy services from Railway's template marketplace.\n\n## When to Use\n\n- User asks to \"add Postgres\", \"add Redis\", \"add a database\"\n- User asks to \"add Ghost\", \"add Strapi\", \"add n8n\", or any other service\n- User wants to find templates for a use case (e.g., \"CMS\", \"storage\", \"monitoring\")\n- User asks \"what templates are available?\"\n- User wants to deploy a pre-configured service\n\n## Common Template Codes\n\n| Category | Template | Code |\n|----------|----------|------|\n| **Databases** | PostgreSQL | `postgres` |\n| | Redis | `redis` |\n| | MySQL | `mysql` |\n| | MongoDB | `mongodb` |\n| **CMS** | Ghost | `ghost` |\n| | Strapi | `strapi` |\n| **Storage** | Minio | `minio` |\n| **Automation** | n8n | `n8n` |\n| **Monitoring** | Uptime Kuma | `uptime-kuma` |\n\nFor other templates, use the search query below.\n\n## Prerequisites\n\nGet project context:\n```bash\nrailway status --json\n```\n\nExtract:\n- `id` - project ID\n- `environments.edges[0].node.id` - environment ID\n\nGet workspace ID:\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'query getWorkspace($projectId: String!) {\n    project(id: $projectId) { workspaceId }\n  }' \\\n  '{\"projectId\": \"PROJECT_ID\"}'\nSCRIPT\n```\n\n## Search Templates\n\nList available templates with optional filters:\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'query templates($first: Int, $verified: Boolean) {\n    templates(first: $first, verified: $verified) {\n      edges {\n        node {\n          name\n          code\n          description\n          category\n        }\n      }\n    }\n  }' \\\n  '{\"first\": 20, \"verified\": true}'\nSCRIPT\n```\n\n### Arguments\n\n| Argument | Type | Description |\n|----------|------|-------------|\n| `first` | Int | Number of results (max ~100) |\n| `verified` | Boolean | Only verified templates |\n| `recommended` | Boolean | Only recommended templates |\n\n### Rate Limit\n\n10 requests per minute. Don't spam searches.\n\n## Get Template Details\n\nFetch a specific template by code:\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'query template($code: String!) {\n    template(code: $code) {\n      id\n      name\n      description\n      serializedConfig\n    }\n  }' \\\n  '{\"code\": \"postgres\"}'\nSCRIPT\n```\n\nReturns:\n- `id` - template ID (needed for deployment)\n- `serializedConfig` - service configuration (needed for deployment)\n\n## Deploy Template\n\n### Step 1: Fetch Template\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'query template($code: String!) {\n    template(code: $code) {\n      id\n      serializedConfig\n    }\n  }' \\\n  '{\"code\": \"postgres\"}'\nSCRIPT\n```\n\n### Step 2: Deploy to Project\n\n```bash\nbash <<'SCRIPT'\nscripts/railway-api.sh \\\n  'mutation deployTemplate($input: TemplateDeployV2Input!) {\n    templateDeployV2(input: $input) {\n      projectId\n      workflowId\n    }\n  }' \\\n  '{\n    \"input\": {\n      \"templateId\": \"TEMPLATE_ID_FROM_STEP_1\",\n      \"serializedConfig\": SERIALIZED_CONFIG_FROM_STEP_1,\n      \"projectId\": \"PROJECT_ID\",\n      \"environmentId\": \"ENVIRONMENT_ID\",\n      \"workspaceId\": \"WORKSPACE_ID\"\n    }\n  }'\nSCRIPT\n```\n\n**Important:** `serializedConfig` is the exact JSON object from the template query, not a string.\n\n## Connecting Services\n\nAfter deploying a template, connect other services using reference variables.\n\nFor complete variable syntax and wiring patterns, see [variables.md](references/variables.md).\n\n### Pattern\n\n```\n${{ServiceName.VARIABLE_NAME}}\n```\n\n### Common Database Variables\n\n| Service | Connection Variable |\n|---------|---------------------|\n| PostgreSQL (Postgres) | `${{Postgres.DATABASE_URL}}` |\n| Redis | `${{Redis.REDIS_URL}}` |\n| MySQL | `${{MySQL.MYSQL_URL}}` |\n| MongoDB | `${{MongoDB.MONGO_URL}}` |\n\n### Backend vs Frontend\n\n**Backend services** can use private URLs (internal network):\n```\n${{Postgres.DATABASE_URL}}\n```\n\n**Frontend applications** run in the browser and cannot access Railway's private network. Options:\n1. Use public URL variables (e.g., `${{MongoDB.MONGO_PUBLIC_URL}}`)\n2. Better: Route through a backend API\n\n## Example: Add PostgreSQL\n\n```bash\nbash <<'SCRIPT'\n# 1. Get context\nrailway status --json\n# → project.id = \"proj-123\", environment.id = \"env-456\"\n\n# 2. Get workspace ID\nscripts/railway-api.sh \\\n  'query { project(id: \"proj-123\") { workspaceId } }' '{}'\n# → workspaceId = \"ws-789\"\n\n# 3. Fetch Postgres template\nscripts/railway-api.sh \\\n  'query { template(code: \"postgres\") { id serializedConfig } }' '{}'\n# → id = \"template-abc\", serializedConfig = {...}\n\n# 4. Deploy\nscripts/railway-api.sh \\\n  'mutation deploy($input: TemplateDeployV2Input!) {\n    templateDeployV2(input: $input) { projectId workflowId }\n  }' \\\n  '{\"input\": {\n    \"templateId\": \"template-abc\",\n    \"serializedConfig\": {...},\n    \"projectId\": \"proj-123\",\n    \"environmentId\": \"env-456\",\n    \"workspaceId\": \"ws-789\"\n  }}'\nSCRIPT\n```\n\n## Example: Search for CMS Templates\n\n```bash\nbash <<'SCRIPT'\n# Search verified templates\nscripts/railway-api.sh \\\n  'query {\n    templates(first: 50, verified: true) {\n      edges {\n        node { name code description category }\n      }\n    }\n  }' '{}'\n# Filter results for \"CMS\" category or search descriptions\nSCRIPT\n```\n\n## What Gets Created\n\nTemplates typically create:\n- Service with pre-configured image/source\n- Environment variables (connection strings, secrets)\n- Volume for persistent data (databases)\n- TCP proxy for external access (where needed)\n\n## Response\n\nSuccessful deployment returns:\n```json\n{\n  \"data\": {\n    \"templateDeployV2\": {\n      \"projectId\": \"proj-123\",\n      \"workflowId\": \"deployTemplate/project/proj-123/xxx\"\n    }\n  }\n}\n```\n\n## Error Handling\n\n| Error | Cause | Solution |\n|-------|-------|----------|\n| Template not found | Invalid code | Search templates or check spelling |\n| Rate limit exceeded | Too many searches | Wait 1 minute, then retry |\n| Permission denied | User lacks access | Need DEVELOPER role or higher |\n| Project not found | Invalid project ID | Run `railway status --json` |\n\n## Composability\n\n- **Connect services**: Use `environment` skill to add variable references\n- **View deployed service**: Use `service` skill\n- **Check logs**: Use `deployment` skill\n- **Add domains**: Use `domain` skill\n",
        "plugins/railway/skills/templates/references/environment-config.md": "# Environment Config Reference\n\nThe `EnvironmentConfig` object is used to configure services, volumes, and shared variables in Railway.\n\n## Structure\n\n```json\n{\n  \"services\": {\n    \"<serviceId>\": {\n      \"source\": { ... },\n      \"build\": { ... },\n      \"deploy\": { ... },\n      \"variables\": { ... },\n      \"networking\": { ... }\n    }\n  },\n  \"sharedVariables\": { ... },\n  \"volumes\": { ... },\n  \"buckets\": { ... }\n}\n```\n\nOnly include fields being changed. The patch is merged with existing config.\n\n## Service Config\n\n### Source\n| Field | Type | Description |\n|-------|------|-------------|\n| `image` | string | Docker image (e.g., `nginx:latest`) |\n| `repo` | string | Git repository URL |\n| `branch` | string | Git branch to deploy |\n| `commitSha` | string | Specific commit SHA |\n| `rootDirectory` | string | Root directory (monorepos) |\n| `checkSuites` | boolean | Wait for GitHub check suites |\n| `autoUpdates.type` | disabled \\| patch \\| minor | Auto-update policy for Docker images |\n\n### Build\n| Field | Type | Description |\n|-------|------|-------------|\n| `builder` | NIXPACKS \\| DOCKERFILE \\| RAILPACK | Build system |\n| `buildCommand` | string | Command for Nixpacks builds |\n| `dockerfilePath` | string | Path to Dockerfile |\n| `watchPatterns` | string[] | Patterns to trigger deploys |\n| `nixpacksConfigPath` | string | Path to nixpacks config |\n\n### Deploy\n| Field | Type | Description |\n|-------|------|-------------|\n| `startCommand` | string | Container start command |\n| `multiRegionConfig` | object | Region → replica config. See [Multi-Region Config](#multi-region-config). |\n| `healthcheckPath` | string | Health check endpoint |\n| `healthcheckTimeout` | number | Seconds to wait for health |\n| `restartPolicyType` | ON_FAILURE \\| ALWAYS \\| NEVER | Restart behavior |\n| `restartPolicyMaxRetries` | number | Max restart attempts |\n| `cronSchedule` | string | Cron schedule for cron jobs |\n| `sleepApplication` | boolean | Sleep when inactive |\n\n### Variables\n| Field | Type | Description |\n|-------|------|-------------|\n| `value` | string | Variable value |\n| `isOptional` | boolean | Allow empty value |\n\nSet to `null` to delete a variable.\n\nFor variable references, see [variables.md](variables.md).\n\n### Lifecycle\n| Field | Type | Description |\n|-------|------|-------------|\n| `isDeleted` | boolean | Mark for deletion (requires ADMIN) |\n| `isCreated` | boolean | Mark as newly created |\n\n## Multi-Region Config\n\nControls replica count per region. Structure: region name → `{ numReplicas }` or `null` to remove.\n\n```json\n{\n  \"multiRegionConfig\": {\n    \"us-west2\": { \"numReplicas\": 3 },\n    \"europe-west4-drams3a\": { \"numReplicas\": 2 }\n  }\n}\n```\n\n### Available Regions\n\n| Name | Location | Aliases |\n|------|----------|---------|\n| `us-west2` | US West (California) | \"us west\", \"california\" |\n| `us-east4-eqdc4a` | US East (Virginia) | \"us east\", \"virginia\" |\n| `europe-west4-drams3a` | EU West (Amsterdam) | \"europe\", \"eu\", \"amsterdam\" |\n| `asia-southeast1-eqsg3a` | Southeast Asia (Singapore) | \"asia\", \"singapore\" |\n\n### Interpreting User Requests\n\n- \"add 3 replicas to europe\" → `{ \"europe-west4-drams3a\": { \"numReplicas\": 3 } }`\n- \"add a replica to all regions\" → set `numReplicas: 1` for all 4 regions\n- \"remove from asia\" → `{ \"asia-southeast1-eqsg3a\": null }`\n- \"increase replicas to 5\" (no region specified) → query current config first, update existing region(s)\n\n**Important:** When user doesn't specify a region, query the current `multiRegionConfig` and modify the existing region(s). Don't assume a default region.\n\n## Common Operations\n\n### Set Build Command\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"buildCommand\": \"npm run build\" } } } }\n```\n\n### Set Start Command\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"startCommand\": \"node server.js\" } } } }\n```\n\n### Set Replicas\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"multiRegionConfig\": { \"us-west2\": { \"numReplicas\": 3 } } } } } }\n```\n\n### Add Variables\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"API_KEY\": { \"value\": \"xxx\" } } } } }\n```\n\n### Delete Variable\n```json\n{ \"services\": { \"<serviceId>\": { \"variables\": { \"OLD_VAR\": null } } } }\n```\n\n### Add Shared Variable\n```json\n{ \"sharedVariables\": { \"DATABASE_URL\": { \"value\": \"postgres://...\" } } }\n```\n\n### Change Docker Image\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"image\": \"nginx:latest\" } } } }\n```\n\n### Connect GitHub Repo\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"repo\": \"owner/repo\", \"branch\": \"main\" } } } }\n```\n\n### Change Git Branch\n```json\n{ \"services\": { \"<serviceId>\": { \"source\": { \"branch\": \"develop\" } } } }\n```\n\n### Set Health Check\n```json\n{ \"services\": { \"<serviceId>\": { \"deploy\": { \"healthcheckPath\": \"/health\", \"healthcheckTimeout\": 30 } } } }\n```\n\n### Change Builder\n```json\n{ \"services\": { \"<serviceId>\": { \"build\": { \"builder\": \"DOCKERFILE\", \"dockerfilePath\": \"./Dockerfile\" } } } }\n```\n\n### Delete Service\n```json\n{ \"services\": { \"<serviceId>\": { \"isDeleted\": true } } }\n```\n\n### Delete Volume\n```json\n{ \"volumes\": { \"<volumeId>\": { \"isDeleted\": true } } }\n```\n\n### New Service Instance\n```json\n{ \"services\": { \"<serviceId>\": { \"isCreated\": true, \"source\": { \"image\": \"nginx\" } } } }\n```\n\n**Note:** `isCreated: true` is required for new service instances.\n",
        "plugins/railway/skills/templates/references/monorepo.md": "# Monorepo Reference\n\nRailway supports two types of monorepo deployments with different configuration approaches.\n\n## Key Decision: Root Directory vs Custom Commands\n\n| Approach | When to Use | What Happens |\n|----------|-------------|--------------|\n| **Root Directory** | Isolated apps (no shared code) | Only that directory's code is available |\n| **Custom Commands** | Shared monorepos (TypeScript, workspaces) | Full repo available, filter at build/start |\n\n**Critical:** Setting root directory means code outside that directory is NOT available during build. For monorepos with shared packages, use custom commands instead.\n\n## Isolated Monorepo\n\nApps are completely independent - no shared code between directories.\n\n```\n├── frontend/        # React app (standalone)\n│   ├── package.json\n│   └── src/\n└── backend/         # Python API (standalone)\n    ├── requirements.txt\n    └── main.py\n```\n\n### Configuration\n\nSet **Root Directory** for each service:\n- Frontend service: `/frontend`\n- Backend service: `/backend`\n\nEach service only sees its own directory's code.\n\n### When to Use\n\n- Frontend and backend in different languages\n- No shared packages or dependencies\n- Each app has its own package.json/requirements.txt\n- Apps don't import from sibling directories\n\n## Shared Monorepo\n\nApps share code from common packages or the root.\n\n```\n├── package.json           # Root workspace config\n├── packages/\n│   ├── frontend/\n│   │   ├── package.json\n│   │   └── src/\n│   ├── backend/\n│   │   ├── package.json\n│   │   └── src/\n│   └── shared/            # Shared utilities\n│       ├── package.json\n│       └── src/\n└── tsconfig.json          # Shared TS config\n```\n\n### Configuration\n\nDo NOT set root directory. Instead, use custom build and start commands:\n\n**pnpm:**\n```\nBuild: pnpm --filter backend build\nStart: pnpm --filter backend start\n```\n\n**npm workspaces:**\n```\nBuild: npm run build --workspace=packages/backend\nStart: npm run start --workspace=packages/backend\n```\n\n**yarn workspaces:**\n```\nBuild: yarn workspace backend build\nStart: yarn workspace backend start\n```\n\n**bun:**\n```\nBuild: bun run --filter backend build\nStart: bun run --filter backend start\n```\n\n**Turborepo:**\n```\nBuild: turbo run build --filter=backend\nStart: turbo run start --filter=backend\n```\n\n### When to Use\n\n- TypeScript/JavaScript monorepo with workspaces\n- Packages import from sibling packages (`@myapp/shared`)\n- Shared tsconfig.json, eslint config at root\n- Using pnpm, yarn workspaces, npm workspaces, or bun\n- Using Turborepo, Nx, or similar build tools\n\n## Watch Paths\n\nPrevent changes in one package from triggering rebuilds of other services.\n\nSet watch paths for each service to only rebuild when relevant files change:\n\n| Service | Watch Paths |\n|---------|-------------|\n| frontend | `/packages/frontend/**`, `/packages/shared/**` |\n| backend | `/packages/backend/**`, `/packages/shared/**` |\n\nInclude shared packages in watch paths if the service depends on them.\n\n### Pattern Format\n\nUses gitignore-style patterns:\n```\n/packages/backend/**     # All files in backend\n/packages/shared/**      # All files in shared (if depends on it)\n!**/*.md                 # Ignore markdown changes\n```\n\n## Configuration Examples\n\n### Isolated: React + Python API\n\nTwo separate apps, no shared code.\n\n**Frontend service:**\n- Root Directory: `/frontend`\n- No custom commands needed (Railpack auto-detects)\n\n**Backend service:**\n- Root Directory: `/backend`\n- No custom commands needed\n\n### Shared: TypeScript Monorepo with pnpm\n\nFrontend and backend share a `@myapp/shared` package.\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter frontend build`\n- Start Command: `pnpm --filter frontend start`\n- Watch Paths: `/packages/frontend/**`, `/packages/shared/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `pnpm --filter backend build`\n- Start Command: `pnpm --filter backend start`\n- Watch Paths: `/packages/backend/**`, `/packages/shared/**`\n\n### Shared: Turborepo\n\n**Frontend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=frontend`\n- Start Command: `turbo run start --filter=frontend`\n- Watch Paths: `/apps/frontend/**`, `/packages/**`\n\n**Backend service:**\n- Root Directory: (leave empty)\n- Build Command: `turbo run build --filter=backend`\n- Start Command: `turbo run start --filter=backend`\n- Watch Paths: `/apps/backend/**`, `/packages/**`\n\n## Common Mistakes\n\n### Using Root Directory for Shared Monorepos\n\n**Wrong:**\n```\nRoot Directory: /packages/backend\n```\nThis breaks builds because `@myapp/shared` isn't available.\n\n**Right:**\n```\nRoot Directory: (empty)\nBuild Command: pnpm --filter backend build\nStart Command: pnpm --filter backend start\n```\n\n### Forgetting Watch Paths\n\nWithout watch paths, changing `frontend/` triggers a rebuild of `backend/`.\n\nAlways set watch paths for monorepos to avoid unnecessary builds.\n\n### Missing Shared Packages in Watch Paths\n\nIf `backend` imports from `shared`, include both in watch paths:\n```\n/packages/backend/**\n/packages/shared/**\n```\n\nOtherwise changes to `shared` won't trigger backend rebuilds.\n\n## Detecting Monorepo Type\n\nCheck for these indicators:\n\n**Isolated monorepo:**\n- Separate package.json in each directory\n- No workspace config in root package.json\n- No imports between directories\n\n**Shared monorepo:**\n- Root package.json with `workspaces` field\n- `pnpm-workspace.yaml` exists\n- Packages import from each other (`@myapp/shared`)\n- Shared tsconfig.json at root\n- turbo.json or nx.json at root\n",
        "plugins/railway/skills/templates/references/railpack.md": "# Railpack Reference\n\nRailpack is Railway's default builder. Zero-config for most projects.\n\nFull docs: https://railpack.com/llms.txt\n\n## Detection\n\nRailpack analyzes source code to detect language, framework, and build requirements automatically.\n\nSupported: Node, Python, Go, PHP, Java, Ruby, Rust, Elixir, Gleam, Deno, C/C++, static files.\n\n## Static Sites\n\n### Detection Patterns\n\nRailpack serves static files via Caddy when it detects:\n1. `Staticfile` in root (can specify `root: dist`)\n2. `index.html` in root\n3. `public/` directory\n4. `RAILPACK_STATIC_FILE_ROOT` env var set\n\n### Root Directory Priority\n\n1. `RAILPACK_STATIC_FILE_ROOT` env var\n2. `root` in `Staticfile`\n3. `public/` directory\n4. Current directory (if index.html exists)\n\n### Common Patterns\n\nRailpack auto-detects common static build outputs. Only set `RAILPACK_STATIC_FILE_ROOT` for non-standard output directories.\n\n| Framework | Build Output | Config Needed |\n|-----------|--------------|---------------|\n| Plain HTML | root | None (auto-detected) |\n| Vite | dist | None (auto-detected) |\n| Astro (static) | dist | None (auto-detected) |\n| Create React App | build | None (auto-detected) |\n| Angular | dist/<project> | `RAILPACK_STATIC_FILE_ROOT=dist/<project>` (non-standard path) |\n| Custom output | varies | Set if output dir is non-standard |\n\n### Custom Caddyfile\n\nPut a `Caddyfile` in project root to override default serving behavior.\n\n## Node.js\n\n### Detection\n- `package.json` in root\n\n### Version Priority\n1. `RAILPACK_NODE_VERSION` env var\n2. `engines.node` in package.json\n3. `.nvmrc` or `.node-version`\n4. Default: Node 22\n\n### Package Manager Detection\n1. `packageManager` field in package.json (enables Corepack)\n2. Lock file: `pnpm-lock.yaml`, `bun.lockb`, `yarn.lock`\n3. Default: npm\n\n### Build Command\nAuto-detected from package.json `scripts.build`. Override via `buildCommand` in service settings.\n\n### Start Command\nAuto-detected:\n1. `scripts.start` in package.json\n2. `main` field in package.json\n3. `index.js` or `index.ts` in root\n\nOverride via `startCommand` in service settings.\n\n### Framework Detection\n\n| Framework | Detection | Notes |\n|-----------|-----------|-------|\n| Next.js | `next` in dependencies | Caches `.next/cache` |\n| Vite | `vite` in devDependencies | Static or SSR mode |\n| Astro | `astro` in dependencies | Caches `.astro` |\n| Nuxt | `nuxt` in dependencies | Auto start command |\n| Remix | `@remix-run/*` in deps | - |\n\n### Static Site Mode (SPA)\n\nFor frameworks like Vite, CRA, Astro (static), Angular:\n- Railpack builds then serves via Caddy\n- Set `RAILPACK_SPA_OUTPUT_DIR` if output isn't `dist`\n\n## Python\n\n### Detection\n- `requirements.txt`, `pyproject.toml`, `Pipfile`, or `uv.lock`\n\n### Version Priority\n1. `RAILPACK_PYTHON_VERSION` env var\n2. `.python-version` file\n3. `requires-python` in pyproject.toml\n4. Default: Python 3.12\n\n### WSGI/ASGI Auto-Config\n\n| Framework | Start Command |\n|-----------|---------------|\n| Django | `gunicorn <project>.wsgi` |\n| FastAPI | `uvicorn main:app --host 0.0.0.0` |\n| Flask | `gunicorn app:app` |\n\nOverride via `startCommand` in service settings.\n\n## Go\n\n### Detection\n- `go.mod` in root\n\n### Build\nCompiles to binary automatically. For `cmd/` structure, set binary name or use `RAILPACK_GO_BIN`.\n\n## Rust\n\n### Detection\n- `Cargo.toml` in root\n\n### Build\nRelease build by default. Binary auto-detected from Cargo.toml.\n\n## Configuration\n\n### Preferred: Service Settings\n\nUse `environment` skill to set:\n- `buildCommand` - Custom build command\n- `startCommand` - Custom start command\n\nThese are stored in Railway and don't pollute your codebase.\n\n### Environment Variables\n\n| Variable | Purpose |\n|----------|---------|\n| `RAILPACK_STATIC_FILE_ROOT` | Static file serving directory |\n| `RAILPACK_SPA_OUTPUT_DIR` | SPA build output (defaults to `dist`) |\n| `RAILPACK_NODE_VERSION` | Node.js version |\n| `RAILPACK_PYTHON_VERSION` | Python version |\n| `RAILPACK_GO_BIN` | Go binary name |\n| `RAILPACK_PACKAGES` | Additional Mise packages (`pkg@version`) |\n| `RAILPACK_BUILD_APT_PACKAGES` | System packages for build |\n| `RAILPACK_DEPLOY_APT_PACKAGES` | System packages for runtime |\n\n### railpack.json\n\nAdvanced config for custom build steps:\n\n```json\n{\n  \"$schema\": \"https://schema.railpack.com\",\n  \"packages\": {\n    \"ffmpeg\": \"latest\"\n  },\n  \"deploy\": {\n    \"aptPackages\": [\"libmagic1\"]\n  }\n}\n```\n\n### railway.toml\n\nAlternative config format:\n\n```toml\n[build]\nbuilder = \"RAILPACK\"\nbuildCommand = \"npm run build\"\n\n[deploy]\nstartCommand = \"npm start\"\n```\n\n## Minimal Project Scaffolding\n\nWhen no code exists, suggest these patterns:\n\n### Static HTML\n```html\n<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n  <title>My Site</title>\n</head>\n<body>\n  <h1>Hello Railway</h1>\n</body>\n</html>\n```\n\n### Vite React\n```bash\nnpm create vite@latest . -- --template react\n```\n\n### Astro\n```bash\nnpm create astro@latest\n```\n\n### Python FastAPI\n```python\n# main.py\nfrom fastapi import FastAPI\napp = FastAPI()\n\n@app.get(\"/\")\ndef root():\n    return {\"message\": \"Hello Railway\"}\n```\n\n```txt\n# requirements.txt\nfastapi\nuvicorn\n```\n\n### Go HTTP Server\n```go\n// main.go\npackage main\n\nimport (\n    \"fmt\"\n    \"net/http\"\n    \"os\"\n)\n\nfunc main() {\n    port := os.Getenv(\"PORT\")\n    if port == \"\" {\n        port = \"8080\"\n    }\n    http.HandleFunc(\"/\", func(w http.ResponseWriter, r *http.Request) {\n        fmt.Fprintf(w, \"Hello Railway\")\n    })\n    http.ListenAndServe(\":\"+port, nil)\n}\n```\n\n## Troubleshooting\n\n| Issue | Solution |\n|-------|----------|\n| Static site 404s | Check output dir - set `RAILPACK_STATIC_FILE_ROOT` if non-standard |\n| Wrong build command | Use `environment` skill to set `buildCommand` |\n| Wrong start command | Use `environment` skill to set `startCommand` |\n| Missing system package | Add to `RAILPACK_BUILD_APT_PACKAGES` or `RAILPACK_DEPLOY_APT_PACKAGES` |\n| Wrong Node version | Set `RAILPACK_NODE_VERSION` or add `.nvmrc` |\n| Wrong Python version | Set `RAILPACK_PYTHON_VERSION` or add `.python-version` |\n",
        "plugins/railway/skills/templates/references/variables.md": "# Variables Reference\n\nVariables in Railway support references to other services, shared variables, and Railway-provided values.\n\n## Template Syntax\n\n```\n${{NAMESPACE.VAR}}\n```\n\n| Namespace | Description |\n|-----------|-------------|\n| `shared` | Shared variables (project-wide) |\n| `<serviceName>` | Variables from another service (case-sensitive) |\n\n## Examples\n\n**Reference shared variable:**\n```json\n{ \"value\": \"${{shared.DOMAIN}}\" }\n```\n\n**Reference another service's variable:**\n```json\n{ \"value\": \"${{api.API_KEY}}\" }\n```\n\n**Combine with text:**\n```json\n{ \"value\": \"https://${{shared.DOMAIN}}/api\" }\n```\n\n## Railway-Provided Variables\n\nRailway injects these into every service automatically.\n\n### Networking\n| Variable | Description | Example | Availability |\n|----------|-------------|---------|--------------|\n| `RAILWAY_PUBLIC_DOMAIN` | Public domain | `myapp.up.railway.app` | Only if service has a domain |\n| `RAILWAY_PRIVATE_DOMAIN` | Private DNS (internal only) | `myapp.railway.internal` | Always |\n| `RAILWAY_TCP_PROXY_DOMAIN` | TCP proxy domain | `roundhouse.proxy.rlwy.net` | Only if TCP proxy enabled |\n| `RAILWAY_TCP_PROXY_PORT` | TCP proxy port | `11105` | Only if TCP proxy enabled |\n\n**Note:** `RAILWAY_PUBLIC_DOMAIN` is only available if the service has a domain configured.\nCheck the service's environment config to verify a domain exists before referencing it.\n\n### Context\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_PROJECT_ID` | Project ID |\n| `RAILWAY_PROJECT_NAME` | Project name |\n| `RAILWAY_ENVIRONMENT_ID` | Environment ID |\n| `RAILWAY_ENVIRONMENT_NAME` | Environment name |\n| `RAILWAY_SERVICE_ID` | Service ID |\n| `RAILWAY_SERVICE_NAME` | Service name |\n| `RAILWAY_DEPLOYMENT_ID` | Deployment ID |\n| `RAILWAY_REPLICA_ID` | Replica ID |\n| `RAILWAY_REPLICA_REGION` | Region (e.g., `us-west2`) |\n\n### Volume (if attached)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_VOLUME_NAME` | Volume name |\n| `RAILWAY_VOLUME_MOUNT_PATH` | Mount path |\n\n### Git (if deployed from GitHub)\n| Variable | Description |\n|----------|-------------|\n| `RAILWAY_GIT_COMMIT_SHA` | Commit SHA |\n| `RAILWAY_GIT_BRANCH` | Branch name |\n| `RAILWAY_GIT_REPO_NAME` | Repository name |\n| `RAILWAY_GIT_REPO_OWNER` | Repository owner |\n| `RAILWAY_GIT_AUTHOR` | Commit author |\n| `RAILWAY_GIT_COMMIT_MESSAGE` | Commit message |\n\n## Wiring Services Together\n\n### Frontend → Backend (public network)\nUse when: Browser makes requests to API (browser can't access private network)\n\n```json\n{\n  \"services\": {\n    \"<frontendId>\": {\n      \"variables\": {\n        \"API_URL\": { \"value\": \"https://${{backend.RAILWAY_PUBLIC_DOMAIN}}\" }\n      }\n    }\n  }\n}\n```\n\n### Service → Database (private network)\nUse when: Backend connects to database (faster, no egress cost, more secure)\n\nRailway databases auto-generate connection URL variables. Use the private versions:\n\n| Database | Variable Reference |\n|----------|-------------------|\n| Postgres | `${{Postgres.DATABASE_URL}}` |\n| MySQL | `${{MySQL.DATABASE_URL}}` |\n| Redis | `${{Redis.REDIS_URL}}` |\n| Mongo | `${{Mongo.MONGO_URL}}` |\n\n**Postgres/MySQL example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"DATABASE_URL\": { \"value\": \"${{Postgres.DATABASE_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Redis example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"REDIS_URL\": { \"value\": \"${{Redis.REDIS_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Mongo example:**\n```json\n{\n  \"services\": {\n    \"<apiId>\": {\n      \"variables\": {\n        \"MONGO_URL\": { \"value\": \"${{Mongo.MONGO_URL}}\" }\n      }\n    }\n  }\n}\n```\n\n**Note:** Service names are case-sensitive. Match the exact name from your project (e.g., \"Postgres\", \"Redis\").\n\n### Service → Service (private network)\nUse when: Microservices communicate internally\n\n```json\n{\n  \"services\": {\n    \"<workerServiceId>\": {\n      \"variables\": {\n        \"API_INTERNAL_URL\": { \"value\": \"http://${{api.RAILWAY_PRIVATE_DOMAIN}}:${{api.PORT}}\" }\n      }\n    }\n  }\n}\n```\n\n## When to Use Public vs Private\n\n| Use Case | Domain | Reason |\n|----------|--------|--------|\n| Browser → API | Public | Browser can't access private network |\n| Service → Service | Private | Faster, no egress, more secure |\n| Service → Database | Private | Databases should never be public |\n| External webhook → Service | Public | External services need public access |\n| Cron job → API | Private | Internal communication |\n"
      },
      "plugins": [
        {
          "name": "railway",
          "description": "Railway tools for Claude Code - manage projects, services, deployments",
          "author": {
            "name": "Railway"
          },
          "source": "./plugins/railway",
          "category": "productivity",
          "categories": [
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add railwayapp/railway-skills",
            "/plugin install railway@railway-skills"
          ]
        }
      ]
    }
  ]
}