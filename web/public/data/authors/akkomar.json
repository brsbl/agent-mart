{
  "author": {
    "id": "akkomar",
    "display_name": "akkomar",
    "avatar_url": "https://avatars.githubusercontent.com/u/1476307?v=4"
  },
  "marketplaces": [
    {
      "name": "akomar-mozdata-marketplace",
      "version": null,
      "description": null,
      "repo_full_name": "akkomar/mozdata-claude-plugin",
      "repo_url": "https://github.com/akkomar/mozdata-claude-plugin",
      "repo_description": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-02T10:55:01Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"akomar-mozdata-marketplace\",\n  \"owner\": {\n    \"name\": \"akomar\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"mozdata\",\n      \"source\": \"./\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n    \"name\": \"mozdata\",\n    \"description\": \"Mozilla telemetry discovery and BigQuery query assistance for Glean telemetry data\",\n    \"version\": \"0.0.5\",\n    \"author\": {\n        \"name\": \"akomar\"\n    },\n    \"homepage\": \"https://github.com/akkomar/mozdata-claude-plugin\",\n    \"repository\": \"https://github.com/akkomar/mozdata-claude-plugin\",\n    \"license\": \"MPL-2.0\",\n    \"keywords\": [\"mozilla\", \"telemetry\", \"bigquery\", \"glean\", \"data-analysis\"],\n    \"commands\": [\"./commands/\"]\n}",
        "README.md": "# Mozdata Plugin for Claude Code\n\nA Claude Code plugin for discovering Mozilla telemetry probes and writing BigQuery queries for Glean telemetry data.\n\n__This plugin is in development. Feel free to use and report issues.__\n\n## What It Does\n\nThis plugin helps you:\n- **Discover telemetry probes** - Find Glean metrics across Mozilla products (Firefox Desktop, Android, etc.)\n- **Write BigQuery queries** - Generate efficient queries for Mozilla telemetry data\n- **Navigate data resources** - Access Glean Dictionary, ProbeInfo API, and BigQuery schemas\n\n## Features\n\n### `/mozdata:ask` Slash Command\nActivates Mozilla telemetry expertise in your current conversation. Use it to:\n- Find probes for specific products or features\n- Get guidance on which BigQuery tables to query\n- Generate SQL queries following Mozilla best practices\n- Understand metric metadata and collection details\n\nExample usage:\n```\n/mozdata:ask How do I query Firefox Desktop DAU?\n/mozdata:ask Find probes related to accessibility in Firefox\n/mozdata:ask Write a query for the a11y_hcm_foreground metric\n```\n\n### Skills (Auto-Activated)\n\nThe plugin includes two Skills that Claude can automatically invoke when relevant:\n\n**mozilla-probe-discovery** - Activated when you ask about:\n- Finding metrics or probes in Mozilla products\n- Glean telemetry data\n- Accessibility probes, search metrics, etc.\n\n**mozilla-query-writing** - Activated when you ask about:\n- Firefox DAU/MAU queries\n- BigQuery Mozilla telemetry\n- baseline_clients_*, events_stream tables\n- User counts or data analysis\n\nSkills activate automatically based on your questions - no need to use the slash command.\n\n## Architecture\n\n```\nmozdata-claude-plugin/\n├── knowledge/                 # Shared knowledge modules\n│   ├── architecture.md        # Data platform architecture\n│   ├── metrics.md             # Metric/probe discovery\n│   ├── data-catalog.md        # Table discovery\n│   └── query-writing.md       # Query best practices\n├── commands/\n│   └── ask.md                 # Slash command (refs @knowledge/*)\n├── skills/\n│   ├── probe-discovery/\n│   │   └── SKILL.md           # Auto-activated for probe questions\n│   └── query-writing/\n│       └── SKILL.md           # Auto-activated for query questions\n├── .claude-plugin/\n│   └── plugin.json\n└── README.md\n```\n\n### Knowledge Modules\n\nThe plugin's intelligence is organized into four shared knowledge modules:\n\n| Module | Purpose |\n|--------|---------|\n| `architecture.md` | Data platform structure, Glean schema, gotchas |\n| `metrics.md` | ProbeInfo API, Glean Dictionary, metric types |\n| `data-catalog.md` | Table selection, aggregation hierarchy |\n| `query-writing.md` | Required filters, templates, anti-patterns |\n\nBoth the slash command and Skills reference these modules for consistent knowledge.\n\n## Key Knowledge\n\nThe plugin understands:\n- **Glean Dictionary** structure and navigation\n- **ProbeInfo API** endpoints and data formats\n- **BigQuery conventions** (mozdata dataset, submission_date filtering, sample_id usage)\n- **Query best practices** (aggregate tables, required filters, performance optimization)\n- **Mozilla data platform** architecture and resources\n\n## Resources Used\n\n- [Glean Dictionary](https://dictionary.telemetry.mozilla.org/) - Probe exploration UI\n- [ProbeInfo API](https://probeinfo.telemetry.mozilla.org/) - Programmatic probe metadata\n- [Mozilla Data Docs](https://docs.telemetry.mozilla.org/) - Data platform documentation\n- [bigquery-etl](https://github.com/mozilla/bigquery-etl) - Query definitions and aggregates\n- DataHub MCP - BigQuery schema metadata (requires separate setup)\n\n## Setup\n\n### Prerequisites\n\n**DataHub MCP Server** (for BigQuery schema access)\n\nThe plugin uses DataHub to query BigQuery table schemas. You need to configure this once at the user level.\n\n#### Step 1: Get Your DataHub API Token\n\n1. Visit https://mozilla.acryl.io/settings/tokens\n2. Generate a Personal Access Token\n3. Copy the token value\n\n#### Step 2: Configure DataHub MCP Server\n\nRun this command, replacing `YOUR_TOKEN` with your actual token:\n\n```bash\nclaude mcp add --transport http dataHub \"https://mozilla.acryl.io/integrations/ai/mcp/?token=YOUR_TOKEN\"\n```\n\nAbove command configures DataHub MCP server in current project/directory. To configure it globally for all projects, add `--scope user` flag.\n\n**Verify it worked:**\n```bash\nclaude mcp list\n# Should show: dataHub (...) (HTTP) - ✓ Connected\n```\n\n**Note:** A `.mcp.json.example` file is included in the plugin for reference. We currently can't configure remote MCP servers directly in the plugin due to a [bug in Claude Code](https://github.com/anthropics/claude-code/issues/9427).\n\n### Installation\n\nFirst start Claude Code, then add the GitHub repository as a marketplace and install the plugin:\n\n```bash\n/plugin marketplace add akkomar/mozdata-claude-plugin\n/plugin install mozdata@akkomar/mozdata-claude-plugin\n```\n\nAlternatively, use the interactive menu:\n```bash\n/plugin\n# Then select \"Add marketplace\" and enter: akkomar/mozdata-claude-plugin\n# Then select \"Install plugin\" and choose mozdata\n# Then select \"Enable plugin\"\n```\n\nRestart Claude Code for the plugin to load.\n\n### Keeping the Plugin Updated\n\n#### Enable Auto-Updates (Recommended)\n\nThird-party marketplaces have auto-update disabled by default. To enable automatic updates:\n\n1. Run `/plugin` to open the plugin manager\n2. Select the **Marketplaces** tab\n3. Choose `akkomar/mozdata-claude-plugin`\n4. Select **Enable auto-update**\n\nWith auto-update enabled, Claude Code will automatically check for and install plugin updates at startup.\n\n#### Manual Updates\n\nTo manually check for and install updates:\n\n```bash\n/plugin update mozdata@akkomar/mozdata-claude-plugin\n```\n\nRestart Claude Code after updating for changes to take effect.\n\n## Usage\n\n### Using the Slash Command\n\nStart a conversation with `/mozdata:ask` followed by your question:\n\n```\n/mozdata:ask What tables contain Firefox Desktop telemetry?\n```\n\nContinue the conversation naturally - no need to prefix subsequent messages.\n\n### Using Skills (Automatic)\n\nJust ask questions naturally - Claude will automatically use the appropriate Skill:\n\n```\nHow do I find probes for accessibility in Firefox Desktop?\nWrite a query for Firefox Android DAU by country\n```\n\n### Example chat\n\n```\n> /mozdata:ask how to find most common device that Fenix runs on in Japan?\n\n⏺ I'll help you find the most common device that Fenix (Firefox Android) runs on in Japan. Let me start by exploring what device-related metrics are available\n  and identifying the best approach.\n\n⏺ dataHub - search (MCP)(query: \"fenix baseline\", filters: \"{\\\"and\\\": [{\\\"entity_type\\\": [\\\"dataset\\\"]}, {\\\"platform\\\": [\\\"bigquery\\\"]}]}\", num_results: 5)\n  ⎿  {\n       \"count\": 5,\n       \"total\": 195,\n     … +374 lines (ctrl+o to expand)\n\n⏺ dataHub - get_entity (MCP)(urn: \"urn:li:dataset:(urn:li:dataPlatform:bigquery,mozdata.fenix.baseline_clients_daily,PROD)\")\n  ⎿  {\n       \"urn\": \"urn:li:dataset:(urn:li:dataPlatform:bigquery,mozdata.fenix.baseline_clients_daily,PROD)\",\n       \"url\": \"https://mozilla.acryl.io/dataset/urn%3Ali%3Adataset%3A%28urn%3Ali%3AdataPlatform%3Abigquery%2Cmozdata.fenix.baseline_clients_daily%2CPROD%29/\",\n     … +437 lines (ctrl+o to expand)\n\n⏺ Perfect! I found the optimal table and device-related fields. Here's how to find the most common devices that Fenix runs on in Japan:\n\n  Answer\n\n  Best table to use: mozdata.fenix.baseline_clients_daily\n\n  This table contains device information at the client-day level and includes:\n  - device_manufacturer - The device manufacturer (e.g., Samsung, Google, Xiaomi)\n  - device_model - The specific device model (e.g., SM-G991B, Pixel 6)\n  - country - Country code for geo-filtering (use 'JP' for Japan)\n\n  Optimized BigQuery Query\n\n  Here's a query to find the most common devices in Japan:\n\n  -- Find most common device models for Fenix in Japan\n  -- Uses baseline_clients_daily (client-day level aggregation)\n  -- COST: ~$0.10, SPEED: ~2-3 seconds\n  SELECT\n    device_manufacturer,\n    device_model,\n    COUNT(DISTINCT client_id) AS unique_clients,\n    COUNT(*) AS client_days,\n    ROUND(COUNT(DISTINCT client_id) * 100.0 / SUM(COUNT(DISTINCT client_id)) OVER (), 2) AS pct_of_clients\n  FROM\n    mozdata.fenix.baseline_clients_daily\n  WHERE\n    submission_date >= DATE_SUB(CURRENT_DATE(), INTERVAL 7 DAY)\n    AND country = 'JP'  -- Japan\n    AND device_model IS NOT NULL\n  GROUP BY\n    device_manufacturer, device_model\n  ORDER BY\n    unique_clients DESC\n  LIMIT 20\n```\n\n## License\n\nMPL-2.0\n"
      },
      "plugins": [
        {
          "name": "mozdata",
          "source": "./",
          "description": null,
          "categories": [],
          "install_commands": [
            "/plugin marketplace add akkomar/mozdata-claude-plugin",
            "/plugin install mozdata@akomar-mozdata-marketplace"
          ]
        }
      ]
    }
  ]
}