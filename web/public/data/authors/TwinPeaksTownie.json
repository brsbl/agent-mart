{
  "author": {
    "id": "TwinPeaksTownie",
    "display_name": "Carson Maestas",
    "avatar_url": "https://avatars.githubusercontent.com/u/208200007?u=7c231875d6060d3b9ea6c25ddafc769662d95df1&v=4"
  },
  "marketplaces": [
    {
      "name": "claude-to-speech-marketplace",
      "version": null,
      "description": "Voice-first TTS interaction for Claude Code",
      "repo_full_name": "TwinPeaksTownie/Claude-to-Speech",
      "repo_url": "https://github.com/TwinPeaksTownie/Claude-to-Speech",
      "repo_description": "A Claude Code plugin to utilize Elevenlabs TTS for responses when needed",
      "signals": {
        "stars": 8,
        "forks": 3,
        "pushed_at": "2025-11-13T01:24:26Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"claude-to-speech-marketplace\",\n  \"owner\": {\n    \"name\": \"LAURA-agent\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"claude-to-speech\",\n      \"source\": \"./\",\n      \"description\": \"Voice-first TTS interaction for Claude Code\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"claude-to-speech\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Voice-first interaction with automatic TTS markers for Claude Code\",\n  \"author\": {\n    \"name\": \"LAURA-agent\"\n  },\n  \"repository\": \"https://github.com/LAURA-agent/Claude-to-Speech\",\n  \"license\": \"MIT\",\n  \"hooks\": \"./hooks/hooks.json\"\n}\n",
        "README.md": "# Claude-to-Speech\n\nVoice-first interaction mode for Claude Code with automatic text-to-speech via ElevenLabs.\n\n## Overview\n\nClaude-to-Speech is a plugin that enables automatic voice output for Claude Code responses. Instead of manually triggering TTS, Claude includes invisible markers in responses that are automatically extracted and spoken by a Stop hook.\n\n## Features\n\n- **Automatic TTS**: Claude's responses are spoken automatically via TTS markers\n- **Smart Defaults**: Silent for code dumps, vocal for questions and confirmations\n- **Multiple Voice Options**: Choose from ElevenLabs voices or use custom voice IDs\n- **Dual Mode Support**:\n  - Direct ElevenLabs API (no server required)\n  - Local TTS server integration\n- **Deduplication**: Prevents repeated messages within 2-second window\n- **Cross-Platform**: Works on macOS, Linux (including Raspberry Pi), and Windows\n\n## Installation\n\n### Prerequisites\n\n- Claude Code 2.0+\n- ElevenLabs API key ([get one here](https://elevenlabs.io))\n- Python 3.7+\n- `requests` library: `pip install requests`\n- (Optional) `python-dotenv`: `pip install python-dotenv`\n\n### Via Claude Code Plugin System\n\n1. Clone or download this repository\n2. Add to your Claude Code plugins directory:\n   ```bash\n   mkdir -p ~/.claude/plugins/repos\n   cd ~/.claude/plugins/repos\n   git clone https://github.com/yourusername/claude-to-speech.git\n   ```\n3. Install the plugin:\n   ```bash\n   claude plugin install ./claude-to-speech\n   ```\n4. Configure your `.env` file (see Configuration below)\n5. Restart Claude Code\n\n### Manual Installation\n\n1. Copy the plugin directory to your Claude Code plugins location\n2. Create a `.env` file based on `.env.example`\n3. Add your ElevenLabs API key\n4. Run `/plugin` in Claude Code to refresh\n5. Restart Claude Code\n\n## Configuration\n\nCreate a `.env` file in the plugin root directory:\n\n```bash\n# REQUIRED: ElevenLabs API Key\nELEVENLABS_API_KEY=your_api_key_here\n\n# Voice ID (optional - defaults to Claude voice)\n# Available names: laura, claude, rachel, domi, bella, antoni, arnold, adam, josh\n# Or use a raw ElevenLabs voice ID\nCLAUDE_VOICE_ID=claude\n\n# ElevenLabs Model (optional - defaults to eleven_flash_v2_5)\n# Options: eleven_flash_v2_5 (fastest), eleven_turbo_v2, eleven_multilingual_v2\nELEVENLABS_MODEL=eleven_flash_v2_5\n\n# TTS Server URL (optional - leave empty for direct API mode)\n# If you have a local TTS server, specify it here\nTTS_SERVER_URL=\n\n# Debug mode (optional - set to 1 to enable debug logging)\nDEBUG=0\n```\n\n### Voice Options\n\nThe plugin includes these pre-configured voices:\n\n- `claude` / `assistant` - British male voice (default)\n- `laura` - American female voice\n- `rachel` - Calm female\n- `domi` - Confident female\n- `bella` - Soft female\n- `antoni` - Well-rounded male\n- `arnold` - Strong male\n- `adam` - Deep male\n- `josh` - Young male\n\nYou can also use any ElevenLabs voice ID directly.\n\n### TTS Server Mode vs Direct API Mode\n\nThe plugin supports two operational modes:\n\n#### Direct API Mode (Default)\n**When to use:** Simple setup, single-user, occasional TTS use\n\n- Calls ElevenLabs API directly from the plugin\n- No additional server setup required\n- Each TTS request goes through the internet to ElevenLabs\n- Best for: Getting started, testing, low-volume usage\n\n**Configuration:**\n```bash\nTTS_SERVER_URL=  # Leave empty\n```\n\n#### Local TTS Server Mode (Recommended for Power Users)\n**When to use:** Multi-device setup, high-volume usage, local network integration\n\n- Runs a persistent TTS server on your local network\n- Multiple devices can share the same server (desktop, mobile, Raspberry Pi)\n- Audio caching reduces API calls and speeds up repeated phrases\n- Centralized voice configuration across all clients\n- Lower latency for local playback\n- Enables offline caching for frequently used phrases\n- Best for: LAURA-style multi-device AI systems, development, production use\n\n**Configuration:**\n```bash\nTTS_SERVER_URL=http://localhost:5001/tts  # Or your server IP\n```\n\n**Setting up a TTS server:**\n\nThe plugin includes `scripts/tts_server.py` - a Flask-based TTS server:\n\n```bash\n# Install dependencies\npip install flask requests\n\n# Run the server\ncd scripts\npython3 tts_server.py\n```\n\nThe server listens on `http://0.0.0.0:5001` by default. Point multiple Claude Code instances, mobile apps, or other devices to this server for centralized TTS.\n\n**Benefits for LAURA-style systems:**\n- **Consistency:** Same voice across desktop, mobile, and embedded devices\n- **Efficiency:** Cached audio for common responses (\"I don't understand\", \"Working on it\", etc.)\n- **Scalability:** One API key serves multiple devices\n- **Control:** Centralized voice/model switching without reconfiguring clients\n\n## Usage\n\n### Enable Voice Mode\n\nRun the `/claude-to-speech:speak` command (or `/speak` for short):\n\n```\n/speak\n```\n\nThis activates voice-first mode where Claude will include TTS markers in responses.\n\n### How It Works\n\n1. **You enable voice mode** with `/speak`\n2. **Claude includes markers** in responses:\n   ```html\n   <!-- TTS: \"This will be spoken aloud\" -->\n   ```\n3. **Stop hook automatically extracts** the marker from Claude's response\n4. **TTS is triggered** via ElevenLabs API or your local server\n5. **Audio plays** through your system's default audio output\n\n### TTS Marker Protocol\n\nClaude uses three marker patterns:\n\n#### Active Speech (for important updates)\n```html\n<!-- TTS: \"Task completed successfully\" -->\n```\nUsed for: Questions, confirmations, warnings, status updates\n\n#### Explicit Silence (for code-heavy content)\n```html\n<!-- TTS: SILENT -->\n```\nUsed for: Code dumps, long explanations, documentation\n\n#### No Marker (defaults to silent)\nWhen Claude omits the marker, no TTS is triggered.\n\n### Example Interaction\n\n```\nYou: Fix the authentication bug\n\nClaude: I found the null pointer exception in `auth_handler.py` line 47.\nThe user object wasn't being checked before accessing properties.\nHere's the fix:\n\n[code block]\n\n<!-- TTS: \"Found the bug in the auth handler. It's a missing null check on line 47.\" -->\n```\n\nYou hear: *\"Found the bug in the auth handler. It's a missing null check on line 47.\"*\n\n## Architecture\n\n### Components\n\n- **`/commands/speak.md`** - Slash command that enables voice-first mode\n- **`/hooks/stop.sh`** - Stop hook that extracts TTS markers from responses\n- **`/scripts/claude_speak.py`** - TTS interface script for ElevenLabs\n- **`.env`** - Configuration file (user-created, not tracked in git)\n\n### How the Stop Hook Works\n\n1. Hook receives JSON input with `transcript_path`\n2. Reads the last message from the Claude Code transcript file\n3. Extracts the `message.content[0].text` field (Claude's response)\n4. Uses regex to find `<!-- TTS: \"...\" -->` markers (handles escaped HTML)\n5. Calls `claude_speak.py` with the extracted text\n6. Audio is played via system audio player\n\n### Audio Playback\n\nThe plugin uses platform-specific audio players:\n- **macOS**: `afplay`\n- **Linux**: `mpg123`, `mpg321`, `play`, or `aplay` (auto-detects)\n- **Windows**: `winsound`\n\n## Troubleshooting\n\n### No audio is playing\n\n1. Check if the Stop hook is enabled:\n   ```bash\n   cat /tmp/claude_stop_hook.log\n   ```\n   If the file doesn't exist, the hook isn't firing.\n\n2. Enable debug mode in `.env`:\n   ```bash\n   DEBUG=1\n   ```\n   Restart Claude Code and check the log file.\n\n3. Test the TTS script directly:\n   ```bash\n   python3 scripts/claude_speak.py --conversation \"Test message\"\n   ```\n\n### TTS is too slow\n\nUse the faster model in `.env`:\n```bash\nELEVENLABS_MODEL=eleven_flash_v2_5\n```\n\n### Audio cuts off mid-sentence\n\nIncrease timeout in `claude_speak.py` (default is 10 seconds):\n```python\nDEFAULT_TIMEOUT = 15.0\n```\n\n### Duplicate messages\n\nThe plugin has built-in deduplication (2-second window). If you need to bypass:\n```bash\npython3 scripts/claude_speak.py --bypass-dedup \"Your message\"\n```\n\n### Hook isn't extracting markers\n\nThe hook handles both escaped (`<\\!--`) and unescaped (`<!--`) HTML comments. If markers still aren't extracted, check the debug log:\n\n```bash\ntail -50 /tmp/claude_stop_hook.log\n```\n\n## Development\n\n### File Structure\n\n```\nclaude-to-speech/\n├── .claude-plugin/\n│   └── plugin.json          # Plugin metadata\n├── commands/\n│   └── speak.md             # /speak slash command\n├── hooks/\n│   ├── hooks.json           # Hook registration\n│   └── stop.sh              # Stop hook script\n├── scripts/\n│   └── claude_speak.py      # TTS interface\n├── .env.example             # Example configuration\n├── .gitignore               # Excludes .env from git\n└── README.md                # This file\n```\n\n### Testing Changes\n\nAfter modifying files:\n1. Run `/plugin` in Claude Code to update\n2. Restart Claude Code completely\n3. Test with a simple interaction\n\n### Adding New Voices\n\nEdit `claude_speak.py` and add to `VOICE_MAPPINGS`:\n\n```python\nVOICE_MAPPINGS = {\n    \"your_voice_name\": \"elevenlabs_voice_id_here\",\n    # ...\n}\n```\n\n## License\n\nMIT\n\n## Credits\n\nBuilt for the LAURA AI project. Inspired by the vision of voice-first AI interaction and accessibility.\n\n## Contributing\n\nContributions welcome! Please:\n1. Fork the repository\n2. Create a feature branch\n3. Submit a pull request\n\nFor bugs or feature requests, open an issue on GitHub.\n"
      },
      "plugins": [
        {
          "name": "claude-to-speech",
          "source": "./",
          "description": "Voice-first TTS interaction for Claude Code",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add TwinPeaksTownie/Claude-to-Speech",
            "/plugin install claude-to-speech@claude-to-speech-marketplace"
          ]
        }
      ]
    }
  ]
}