{
  "author": {
    "id": "vanhemsj",
    "display_name": "vanhemsj",
    "avatar_url": "https://avatars.githubusercontent.com/u/15094542?v=4"
  },
  "marketplaces": [
    {
      "name": "lutecepowers-dev",
      "version": null,
      "description": "Development marketplace for Lutecepowers skills library",
      "repo_full_name": "vanhemsj/lutecepowers",
      "repo_url": "https://github.com/vanhemsj/lutecepowers",
      "repo_description": null,
      "signals": {
        "stars": 1,
        "forks": 0,
        "pushed_at": "2026-01-30T16:26:37Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"lutecepowers-dev\",\n  \"description\": \"Development marketplace for Lutecepowers skills library\",\n  \"owner\": {\n    \"name\": \"vanhemsj\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"lutecepowers\",\n      \"description\": \"Skills library for Lutece framework development: rules, workflow, migration v7→v8, scaffold, site generation\",\n      \"version\": \"1.2.4\",\n      \"source\": \"./\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"lutecepowers\",\n  \"description\": \"Skills library for Lutece framework development: rules, workflow, migration v7→v8, scaffold, site generation\",\n  \"version\": \"1.2.4\",\n  \"author\": {\n    \"name\": \"vanhemsj\"\n  },\n  \"homepage\": \"https://github.com/vanhemsj/lutecepowers\",\n  \"repository\": \"https://github.com/vanhemsj/lutecepowers\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"lutece\", \"migration\", \"cdi\", \"jakarta\", \"java\", \"framework\", \"workflow\"]\n}\n",
        "README.md": "# Lutecepowers\n\nClaude Code plugin for **Lutece 8** framework development.\n\n## Installation\n\n```bash\n/plugin marketplace add vanhemsj/lutecepowers\n/plugin install lutecepowers\n```\n\n## Skills\n\n| Skill | Description |\n|-------|-------------|\n| `lutece-rules` | Lutece 8 rules and best practices |\n| `lutece-scaffold` | Interactive plugin scaffold generator — full Lutece 8 plugin from Q&A |\n| `lutece-site` | Interactive site generator — deployable site with plugin deps and v8 compat check |\n| `lutece-workflow` | Workflow module development patterns |\n| `lutece-cache` | Cache implementation patterns |\n| `lutece-rbac` | RBAC integration patterns |\n| `lutece-lucene-indexer` | Lucene search index patterns |\n| `lutece-migration-v8` | Migration v7 → v8 (Spring → CDI/Jakarta) |\n\n## Reference Sources\n\nAt session startup, the plugin automatically clones and maintains a set of Lutece 8 reference repositories in `~/.lutece-references/`. Claude is instructed to search these repos to find real implementation patterns **before writing any Lutece code**, rather than relying on generic knowledge.\n\n## Auto-injected Rules\n\nWhen a session starts in a Lutece project (detected via `pom.xml` containing `lutece-plugin`, `lutece-site`, or `lutece-global-pom`), the plugin copies 4 rule files to `.claude/rules/` in the project. Claude loads rules automatically at session start, and path-scoped rules only activate when touching matching files.\n\n| Rule | `paths:` scope | Content |\n|------|---------------|---------|\n| `java-conventions.md` | `**/*.java` | CDI annotations (`@SessionScoped`, `@Named`, `@ApplicationScoped`), Jakarta imports, JspBean/Service/XPage patterns, variable naming prefixes (`_str`, `_n`, `_b`...), common errors (blank page, NPE) |\n| `freemarker.md` | `**/*.html` | Layout structure (`@pageContainer`/`@pageColumn`/`@pageHeader`), list/form page patterns, hardcoded JSP paths, full macro reference table, pointers to `.ftl` sources in lutece-core |\n| `dao-patterns.md` | `**/business/**/*.java` | DAO class structure, SQL constant naming, `DAOUtil` lifecycle (try-with-resources), parameter types, `IEntityDAO` interface, `Home` static facade with `CDI.current()` |\n| `messages-properties.md` | *(global)* | i18n golden rule: prefix never in `.properties`, always in Java/templates. Key naming conventions, prefix patterns by project type (plugin/module/core) |\n\nThese rules are version-controlled with the project once copied — the whole team benefits, even without the plugin.\n\n## Plugin Scaffold (`/lutece-scaffold`)\n\nGenerates a complete Lutece 8 plugin through interactive Q&A in 5 phases.\n\n### What it generates\n\nA full `plugin-{name}/` directory with every layer wired together:\n\n| Layer | Files | Details |\n|-------|-------|---------|\n| **Business** | `Entity.java`, `IEntityDAO.java`, `EntityDAO.java`, `EntityHome.java` | DAO with `@ApplicationScoped`, Home with `CDI.current()`, `DAOUtil` pattern |\n| **Service** | `EntityService.java` | `@ApplicationScoped`, `@Transactional` cascade deletes through entity hierarchy |\n| **Web** | `EntityJspBean.java`, `Manage{Entity}s.jsp` | `@SessionScoped`, `@Named`, full CRUD actions, pagination, BeanUtil.populate |\n| **Templates** | `manage_*.html`, `create_*.html`, `modify_*.html` | Lutece Freemarker macros (`@tForm`, `@aButton`, `@table`, `@row`, `@columns`) |\n| **SQL** | `create_db_{plugin}.sql`, `init_db_{plugin}.sql` | Liquibase format, sample data, FK indexes for child entities |\n| **Config** | `{plugin}.xml`, `{plugin}.properties`, `beans.xml` | Admin feature, XPage app, RBAC resource type, CDI bean discovery |\n| **i18n** | `{plugin}_messages.properties`, `_en.properties`, `_fr.properties` | Labels, titles, messages, field attributes |\n\n### Parent-child entities\n\nEntities can declare a `parentEntity`. The scaffold then generates:\n- FK field `idParent` + index in SQL\n- `selectByParentId()` / `deleteByParentId()` in DAO\n- `findByParentId()` / `removeByParentId()` in Home\n- Recursive cascade delete in Service (Project → Task → Comment)\n- Breadcrumb navigation and parent context in templates/JSPBean\n\n### Optional features\n\n| Feature | What it adds |\n|---------|-------------|\n| **XPage** | `XPage.java` (front-office MVCApplication), skin template with pagination |\n| **Cache** | `CacheService.java` extending `AbstractCacheableService`, cache-aware Home |\n| **RBAC** | `ResourceIdService.java`, `Plugin.java`, `RESOURCE_TYPE` constant, plugin.xml declaration |\n| **Site** | Calls `/lutece-site` to generate a test site with the plugin as dependency |\n| **Workflow** | Generates a separate `module-workflow-{plugin}/` with Task, Producer, Component, templates, SQL |\n\n### Supported field types\n\n| Type | Java | SQL | Special |\n|------|------|-----|---------|\n| `string` | String | VARCHAR(255) | |\n| `longtext` | String | LONG VARCHAR | |\n| `int` | int | INT | |\n| `long` | long | BIGINT | |\n| `boolean` | boolean | SMALLINT | `isXxx()` getter |\n| `double` | double | DOUBLE | |\n| `float` | float | FLOAT | |\n| `date` | Date | DATE | |\n| `timestamp` | Timestamp | TIMESTAMP | |\n| `time` | Time | TIME | |\n| `decimal` | BigDecimal | DECIMAL(10,2) | |\n| `file` | File | INT DEFAULT 0 | Adds `plugin-asynchronousupload` + `plugin-genericattributes` deps, base64 getter |\n\n### Output structure\n\n```\n<output_dir>/\n├── plugin-{name}/              # The plugin\n├── module-workflow-{name}/     # If workflow enabled\n└── site-{name}/                # If site enabled\n```\n\nThe script also clones `lutece-core` (branch `develop_core8`) to `<parent_dir>/lutecepowers-sources/` for reference, and generates a `CLAUDE.md` inside the plugin with Lutece conventions and pointers to lutece-core sources.\n\n---\n\n## Site Generator (`/lutece-site`)\n\nGenerates a deployable Lutece 8 site through interactive Q&A in 4 phases.\n\n### What it generates\n\nA Maven project with `lutece-site` packaging:\n\n```\n{site-name}/\n├── pom.xml                                    # Parent: lutece-global-pom 8.0.0-SNAPSHOT\n│                                              # GroupId: fr.paris.lutece.portal\n│                                              # Includes lutece-core + mysql-connector-j 8.4.0\n│                                              # + all selected plugin dependencies\n└── src/conf/default/WEB-INF/conf/\n    └── db.properties                          # MySQL connection (pool: 2 init, 50 max)\n```\n\n### Plugin dependency management\n\nPlugins can be added by keyword, artifactId, or full Maven coordinates:\n\n| Input | Behavior |\n|-------|----------|\n| `forms` | Searches GitHub (`lutece-platform` + `lutece-secteur-public` orgs), presents results |\n| `plugin-forms` | Direct artifactId, applies smart defaults (`fr.paris.lutece.plugins`, `lutece-plugin`) |\n| `plugin-forms:4.0.0-SNAPSHOT` | ArtifactId with explicit version |\n\nRepo name to artifactId: `lutece-form-plugin-forms` → `plugin-forms` (strip `lutece-{category}-`).\n\n### Lutece 8 compatibility check\n\nBefore generation, each plugin is verified for v8 compatibility by reading its `pom.xml` on GitHub:\n\n1. **Find repo** — searches both `lutece-platform` and `lutece-secteur-public` orgs\n2. **Find branch** — checks `develop_core8` first, then `develop`, then `master`/`main`\n3. **Read parent POM** — if `<parent><version>` is `8.0.0-SNAPSHOT` → v8 confirmed\n4. **Resolve version** — uses the actual version from the v8 pom.xml (e.g., `[4.0.0-SNAPSHOT,)` for forms)\n\nResults displayed as a compatibility table:\n\n```\n| Plugin        | Branch        | Parent POM     | Version          | Status |\n|---------------|---------------|----------------|------------------|--------|\n| plugin-forms  | develop_core8 | 8.0.0-SNAPSHOT | 4.0.0-SNAPSHOT   | OK     |\n| plugin-old    | develop       | 7.0.2          | 3.1.4-SNAPSHOT   | NOT v8 |\n```\n\nIncompatible plugins trigger a warning with options: remove, keep anyway, or skip.\n\n### Database credentials\n\nDatabase config is **always confirmed** before generation. Defaults are displayed in a table and the user must explicitly validate or override (host, port, database name, user, password).\n\n---\n\n## Migration v7 → v8\n\nThe `lutece-migration-v8` skill uses Claude Code's native **Task system** to enforce a rigorous phase-by-phase migration from Spring/javax to CDI/Jakarta.\n\n### How it works\n\n- **15 phases** created upfront as tasks with `blockedBy` dependencies — a phase cannot start until its dependencies complete\n- **Mandatory verification** per phase: grep checks for phases 1-9 (code won't compile mid-migration), first build at phase 10, build after each subsequent phase\n- **Fix loop** — if verification fails, errors are fixed and verification re-run before marking the task complete\n\n### Dependency graph\n\n```\nPhase 0: Analysis\n  └→ Phase 1: POM\n      └→ Phase 2: javax→jakarta\n          └→ Phase 3: Spring→CDI\n              ├→ Phase 4: Events        ─┐\n              ├→ Phase 5: Cache          │\n              ├→ Phase 6: Config         ├→ Phase 10: Final verify\n              ├→ Phase 7: REST           │    ├→ Phase 11: JSP\n              ├→ Phase 8: web.xml        │    ├→ Phase 12: JspBean → Phase 13: Tests\n              └→ Phase 9: Templates     ─┘    └→ Phase 14: Logging\n```\n\nPhases 4-9 are independent and unblock as soon as phase 3 completes."
      },
      "plugins": [
        {
          "name": "lutecepowers",
          "description": "Skills library for Lutece framework development: rules, workflow, migration v7→v8, scaffold, site generation",
          "version": "1.2.4",
          "source": "./",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add vanhemsj/lutecepowers",
            "/plugin install lutecepowers@lutecepowers-dev"
          ]
        }
      ]
    }
  ]
}