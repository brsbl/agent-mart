{
  "author": {
    "id": "xinbenlv",
    "display_name": "xinbenlv",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/640325?u=399fe5ec649714c26fbd92fea303be8faec4ae2c&v=4",
    "url": "https://github.com/xinbenlv",
    "bio": "A coder, thinker and community builder.\r\n\r\nENS: xinbenlv.eth\r\nCurrent Timezone GMT-4 (US Eastern)",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 0,
      "total_skills": 16,
      "total_stars": 2,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "codereview-skills",
      "version": null,
      "description": "Claude Skills for Code Review",
      "owner_info": {
        "name": "Zainan Victor Zhou",
        "url": "https://github.com/xinbenlv"
      },
      "keywords": [],
      "repo_full_name": "xinbenlv/codereview-skills",
      "repo_url": "https://github.com/xinbenlv/codereview-skills",
      "repo_description": null,
      "homepage": null,
      "signals": {
        "stars": 2,
        "forks": 0,
        "pushed_at": "2026-01-14T14:47:03Z",
        "created_at": "2026-01-14T03:49:04Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 288
        },
        {
          "path": ".claude-plugin/plugin.json",
          "type": "blob",
          "size": 724
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 9938
        },
        {
          "path": "skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/codereview-api",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/codereview-api/SKILL.md",
          "type": "blob",
          "size": 6988
        },
        {
          "path": "skills/codereview-architect",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/codereview-architect/SKILL.md",
          "type": "blob",
          "size": 7336
        },
        {
          "path": "skills/codereview-concurrency",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/codereview-concurrency/SKILL.md",
          "type": "blob",
          "size": 8375
        },
        {
          "path": "skills/codereview-config",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/codereview-config/SKILL.md",
          "type": "blob",
          "size": 8221
        },
        {
          "path": "skills/codereview-correctness",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/codereview-correctness/SKILL.md",
          "type": "blob",
          "size": 7167
        },
        {
          "path": "skills/codereview-data",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/codereview-data/SKILL.md",
          "type": "blob",
          "size": 7205
        },
        {
          "path": "skills/codereview-observability",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/codereview-observability/SKILL.md",
          "type": "blob",
          "size": 7060
        },
        {
          "path": "skills/codereview-orchestrator",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/codereview-orchestrator/SKILL.md",
          "type": "blob",
          "size": 12105
        },
        {
          "path": "skills/codereview-performance",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/codereview-performance/SKILL.md",
          "type": "blob",
          "size": 8216
        },
        {
          "path": "skills/codereview-security",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/codereview-security/SKILL.md",
          "type": "blob",
          "size": 8191
        },
        {
          "path": "skills/codereview-style",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/codereview-style/SKILL.md",
          "type": "blob",
          "size": 8054
        },
        {
          "path": "skills/codereview-testing",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/codereview-testing/SKILL.md",
          "type": "blob",
          "size": 8156
        },
        {
          "path": "skills/general-codereview",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/general-codereview/SKILL.md",
          "type": "blob",
          "size": 4310
        },
        {
          "path": "skills/retrieve-diff-from-commit",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/retrieve-diff-from-commit/SKILL.md",
          "type": "blob",
          "size": 4797
        },
        {
          "path": "skills/retrieve-diff-from-github-pr",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/retrieve-diff-from-github-pr/SKILL.md",
          "type": "blob",
          "size": 5556
        },
        {
          "path": "skills/submit-github-review",
          "type": "tree",
          "size": null
        },
        {
          "path": "skills/submit-github-review/SKILL.md",
          "type": "blob",
          "size": 6040
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"codereview-skills\",\n  \"owner\": {\n    \"name\": \"Zainan Victor Zhou\",\n    \"url\": \"https://github.com/xinbenlv\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"codereview\",\n      \"source\": \"./\",\n      \"description\": \"Claude Skills for Code Review\",\n      \"version\": \"1.0.0\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"codereview\",\n  \"version\": \"2.0.0\",\n  \"description\": \"Comprehensive code review skills with an orchestrator for triage/routing and 11 specialist sub-skills for security, correctness, API, data, concurrency, performance, observability, testing, style, and configuration analysis.\",\n  \"author\": {\n    \"name\": \"Zainan Victor Zhou\",\n    \"url\": \"https://github.com/xinbenlv\"\n  },\n  \"repository\": \"https://github.com/xinbenlv/codereview-skills\",\n  \"license\": \"MIT\",\n  \"keywords\": [\n    \"code-review\",\n    \"pull-request\",\n    \"pr-review\",\n    \"security\",\n    \"architecture\",\n    \"performance\",\n    \"testing\",\n    \"observability\",\n    \"coderabbit\",\n    \"bugbot\",\n    \"greptile\",\n    \"google\",\n    \"best-practices\"\n  ]\n}\n",
        "README.md": "Agent Skills for Code Review.\n\nThese skills follow the [Agent Skills specification](https://agentskills.io/specification) so they can be used by any skills-compatible agent, including Claude Code and Codex CLI.\n\n## Quick Start\n\nReview a GitHub PR with a single command:\n\n```\nReview PR 123\nReview PR owner/repo#123  \nReview PR https://github.com/owner/repo/pull/123\n```\n\nThis will automatically:\n1. Fetch the PR diff from GitHub\n2. Triage and assess risk\n3. Run appropriate specialist reviews\n4. Post the review to GitHub\n\n## Overview\n\nThis plugin provides a comprehensive code review system modeled after industry-leading tools like CodeRabbit, Cursor BugBot, and Greptile. It uses an **Input ‚Üí Orchestrator ‚Üí Specialists ‚Üí Output** pipeline architecture:\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ                       INPUT SKILLS                           ‚îÇ\n‚îÇ   retrieve-diff-from-github-pr  ‚îÇ  retrieve-diff-from-commit ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                                 ‚îÇ\n                                 ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ                  codereview-orchestrator                     ‚îÇ\n‚îÇ                (Triage & Route - nothing else)               ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                           ‚îÇ\n     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n     ‚ñº       ‚ñº       ‚ñº           ‚ñº       ‚ñº       ‚ñº       ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇsecurity ‚îÇ ‚îÇ api ‚îÇ ‚îÇdata ‚îÇ ‚îÇconcurr. ‚îÇ ‚îÇperf ‚îÇ ‚îÇtest ‚îÇ ‚îÇstyle‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                           ‚îÇ\n                           ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ                       OUTPUT SKILLS                          ‚îÇ\n‚îÇ                    submit-github-review                      ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n## Installation\n\n### Marketplace\n\n```\n/plugin marketplace add xinbenlv/codereview-skills\n/plugin install codereview@codereview-skills\n```\n\n### Manually\n\n#### Claude Code\n\nAdd the contents of this repo to a `/.claude` folder in your project root (or whichever folder you're using with Claude Code). See more in the [official Claude Skills documentation](https://platform.claude.com/docs/en/agents-and-tools/agent-skills/overview).\n\n#### Codex CLI\n\nCopy the `skills/` directory into your Codex skills path (typically `~/.codex/skills`). See the [Agent Skills specification](https://agentskills.io/specification) for the standard skill format.\n\n## Skills\n\n### üì• Input Skills\n\n| Skill | Description | Use When |\n|-------|-------------|----------|\n| **retrieve-diff-from-github-pr** | Fetch PR diff and metadata via GitHub API | Reviewing GitHub PRs |\n| **retrieve-diff-from-commit** | Get diff from local git commits | Reviewing local changes |\n\n### üéØ Orchestrator\n\n| Skill | Description | Use When |\n|-------|-------------|----------|\n| **codereview-orchestrator** | Triage, assess risk, route to specialists. Coordinates full pipeline. | Entry point for all reviews |\n\n### üîç Specialists\n\n| Skill | Modeled After | Focus Area | Trigger |\n|-------|---------------|------------|---------|\n| **codereview-security** | Cursor BugBot | Vulnerabilities, auth, injection, secrets | Auth, input, API calls |\n| **codereview-correctness** | - | Logic bugs, error handling, edge cases | Core business logic |\n| **codereview-api** | - | Contracts, breaking changes, versioning | Routes, endpoints, schemas |\n| **codereview-data** | - | Migrations, queries, transactions | Database, models |\n| **codereview-concurrency** | - | Retries, idempotency, distributed systems | Async, workers, queues |\n| **codereview-performance** | - | O(n¬≤), N+1, memory leaks, caching | Loops, queries, I/O |\n| **codereview-observability** | - | Logging, metrics, tracing, alerting | Monitoring code |\n| **codereview-testing** | - | Coverage, quality, determinism | Test files |\n| **codereview-style** | - | Readability, maintainability, docs | All files (final pass) |\n| **codereview-config** | - | Secrets, feature flags, environment | Config, env files |\n| **codereview-architect** | Greptile | Blast radius, dependencies, patterns | Core utilities, shared libs |\n\n### üì§ Output Skills\n\n| Skill | Description | Use When |\n|-------|-------------|----------|\n| **submit-github-review** | Post review findings to GitHub PR via API | Submitting review to GitHub |\n\n### üìã Methodology\n\n| Skill | Description |\n|-------|-------------|\n| **general-codereview** | Google's classic 5-step methodology: Pre-screen ‚Üí Understand ‚Üí Verify ‚Üí Optimize ‚Üí Check |\n\n## Recommended Workflow\n\n### One-Command Pipeline (GitHub PRs)\n```\nReview PR 123\n```\nThis single command runs the full pipeline: fetch ‚Üí triage ‚Üí review ‚Üí submit.\n\n### Quick Review (Local)\n```\n1. retrieve-diff-from-commit  ‚Üí Get local diff\n2. codereview-orchestrator    ‚Üí Triage & route\n3. Run recommended specialists in order\n```\n\n### Comprehensive Review\n```\n1. retrieve-diff-from-github-pr  ‚Üí Fetch PR diff\n2. codereview-orchestrator       ‚Üí Triage and generate plan\n3. codereview-security           ‚Üí Security issues\n4. codereview-correctness        ‚Üí Logic bugs\n5. codereview-api                ‚Üí Contract changes\n6. codereview-data               ‚Üí Database safety\n7. codereview-concurrency        ‚Üí Distributed concerns\n8. codereview-performance        ‚Üí Optimization\n9. codereview-testing            ‚Üí Test coverage\n10. codereview-style             ‚Üí Final cleanup\n11. submit-github-review         ‚Üí Post review to GitHub\n```\n\n## Finding Schema\n\nAll specialist skills output findings in a consistent format:\n\n```json\n{\n  \"severity\": \"blocker|major|minor|nit\",\n  \"category\": \"security|correctness|performance|...\",\n  \"evidence\": {\n    \"file\": \"path/to/file.ts\",\n    \"line\": 42,\n    \"snippet\": \"problematic code\"\n  },\n  \"impact\": \"What breaks or what's the risk\",\n  \"fix\": \"Suggested change\",\n  \"test\": \"What test would catch this\"\n}\n```\n\n## Feature Matrix\n\n### Pipeline Skills\n\n| Feature | GitHub PR Input | Commit Input | GitHub Submit |\n|---------|:---------------:|:------------:|:-------------:|\n| Fetch PR via API | ‚úÖ | | |\n| Get Local Diff | | ‚úÖ | |\n| Post Review | | | ‚úÖ |\n| Inline Comments | | | ‚úÖ |\n| Approve/Request Changes | | | ‚úÖ |\n\n### Review Skills\n\n| Feature | Orchestrator | Security | Correct | API | Data | Concur | Perf | Observe | Test | Style | Config |\n|---------|:------------:|:--------:|:-------:|:---:|:----:|:------:|:----:|:-------:|:----:|:-----:|:------:|\n| PR Summary | ‚úÖ | | | | | | | | | | |\n| Risk Assessment | ‚úÖ | | | | | | | | | | |\n| Specialist Routing | ‚úÖ | | | | | | | | | | |\n| SQL Injection | | ‚úÖ | | | | | | | | | |\n| XSS/SSRF | | ‚úÖ | | | | | | | | | |\n| Auth Bypass | | ‚úÖ | | | | | | | | | |\n| Secret Detection | | ‚úÖ | | | | | | | | | |\n| Logic Bugs | | | ‚úÖ | | | | | | | | |\n| Error Handling | | | ‚úÖ | | | | | | | | |\n| Edge Cases | | | ‚úÖ | | | | | | | | |\n| Breaking Changes | | | | ‚úÖ | | | | | | | |\n| API Versioning | | | | ‚úÖ | | | | | | | |\n| Migration Safety | | | | | ‚úÖ | | | | | | |\n| Query Performance | | | | | ‚úÖ | | | | | | |\n| Transaction Safety | | | | | ‚úÖ | | | | | | |\n| Retry Logic | | | | | | ‚úÖ | | | | | |\n| Idempotency | | | | | | ‚úÖ | | | | | |\n| Race Conditions | | | | | | ‚úÖ | | | | | |\n| N+1 Detection | | | | | | | ‚úÖ | | | | |\n| Memory Leaks | | | | | | | ‚úÖ | | | | |\n| Caching | | | | | | | ‚úÖ | | | | |\n| Logging Quality | | | | | | | | ‚úÖ | | | |\n| Metrics Coverage | | | | | | | | ‚úÖ | | | |\n| Tracing | | | | | | | | ‚úÖ | | | |\n| Test Coverage | | | | | | | | | ‚úÖ | | |\n| Flaky Tests | | | | | | | | | ‚úÖ | | |\n| Code Readability | | | | | | | | | | ‚úÖ | |\n| Documentation | | | | | | | | | | ‚úÖ | |\n| Secret Management | | | | | | | | | | | ‚úÖ |\n| Feature Flags | | | | | | | | | | | ‚úÖ |\n\n## Comparison with Industry Tools\n\n| Feature | This Plugin | CodeRabbit | BugBot | Greptile |\n|---------|:-----------:|:----------:|:------:|:--------:|\n| PR Summary | ‚úÖ | ‚úÖ | | |\n| Interactive Chat | ‚ùå | ‚úÖ | | |\n| Security Analysis | ‚úÖ | ‚úÖ | ‚úÖ | |\n| Deep Context | ‚úÖ | | | ‚úÖ |\n| Auto-fix Patches | ‚ö†Ô∏è Manual | ‚úÖ | | |\n| Low False Positives | ‚úÖ | | ‚úÖ | |\n| Self-hosted | ‚úÖ | | | |\n| Customizable | ‚úÖ | | | |\n| GitHub API Integration | ‚úÖ | ‚úÖ | ‚úÖ | ‚úÖ |\n| One-command Pipeline | ‚úÖ | ‚úÖ | | |\n| Local Commit Review | ‚úÖ | | | |\n\n## License\n\nMIT\n\n## Author\n\nZainan Victor Zhou\n\n---\n\n*Based on \"5 steps to perform code reviews at Google\" (2013) and modern code review tools like CodeRabbit, Cursor BugBot, and Greptile.*\n",
        "skills/codereview-api/SKILL.md": "---\nname: codereview-api\ndescription: Review API contracts, breaking changes, and interface consistency. Analyzes REST/RPC endpoints, event schemas, versioning, and backward compatibility. Use when reviewing public interfaces, API routes, or service contracts.\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"1.0\"\n  persona: API Contract Guardian\n---\n\n# Code Review API Skill\n\nA specialist focused on API contracts, breaking changes, and interface consistency. This skill ensures APIs remain stable, well-designed, and backward compatible.\n\n## Role\n\n- **Contract Enforcement**: Ensure APIs maintain their promises\n- **Breaking Change Detection**: Identify changes that break consumers\n- **Design Review**: Validate API design patterns\n\n## Persona\n\nYou are an API platform engineer responsible for maintaining contracts with hundreds of consumers. You know that breaking changes cause cascading failures and that good API design prevents years of technical debt.\n\n## Checklist\n\n### Breaking Changes\n\n- [ ] **Removed Endpoints**: Any endpoint deleted or moved?\n  ```diff\n  - DELETE /api/v1/users/:id/legacy\n  ```\n\n- [ ] **Changed Response Structure**: Fields removed, renamed, or type changed?\n  ```diff\n  {\n  -  \"user_id\": \"123\",\n  +  \"userId\": \"123\",      // renamed\n  -  \"count\": \"42\",\n  +  \"count\": 42,          // type changed\n  -  \"metadata\": {...}     // removed\n  }\n  ```\n\n- [ ] **Changed Request Parameters**: Required params added, optional made required?\n  ```diff\n  - POST /users { name }\n  + POST /users { name, email }  // email now required = breaking\n  ```\n\n- [ ] **Changed HTTP Methods**: GET ‚Üí POST, etc.?\n\n- [ ] **Changed Status Codes**: 200 ‚Üí 201, 400 ‚Üí 422?\n\n### Backward Compatibility\n\n- [ ] **Additive Changes Only**: New fields should be optional\n  ```javascript\n  // ‚úÖ Safe: new optional field\n  { name, email, phone? }\n  \n  // üö® Breaking: new required field\n  { name, email, phone }  // old clients don't send phone\n  ```\n\n- [ ] **Deprecation Path**: Is old behavior still supported?\n  ```javascript\n  // ‚úÖ Deprecation with timeline\n  /**\n   * @deprecated Use /v2/users instead. Removal: 2025-01-01\n   */\n  ```\n\n- [ ] **Version Strategy**: Is versioning consistent?\n  - URL versioning: `/v1/`, `/v2/`\n  - Header versioning: `Accept: application/vnd.api+json;version=2`\n  - Query param: `?version=2`\n\n### Input Validation\n\n- [ ] **All Inputs Validated**: Type, range, format, length\n  ```javascript\n  // üö® No validation\n  const user = await createUser(req.body)\n  \n  // ‚úÖ Validated\n  const data = validateSchema(req.body, CreateUserSchema)\n  const user = await createUser(data)\n  ```\n\n- [ ] **Validation Errors Clear**: Error messages help the caller\n  ```javascript\n  // üö® Unhelpful\n  { error: \"Validation failed\" }\n  \n  // ‚úÖ Actionable\n  { \n    error: \"Validation failed\",\n    details: [\n      { field: \"email\", message: \"Invalid email format\" },\n      { field: \"age\", message: \"Must be between 0 and 150\" }\n    ]\n  }\n  ```\n\n- [ ] **Reject Unknown Fields**: Or explicitly allow them\n  ```javascript\n  // ‚úÖ Explicit about extra fields\n  validateSchema(data, schema, { stripUnknown: true })\n  ```\n\n### Output Guarantees\n\n- [ ] **Consistent Response Shape**: Same shape for success/error\n  ```javascript\n  // ‚úÖ Consistent envelope\n  { success: true, data: {...} }\n  { success: false, error: {...} }\n  ```\n\n- [ ] **Null vs Absent**: Consistent handling\n  ```javascript\n  // üö® Inconsistent\n  { name: \"Alice\", bio: null }  // vs { name: \"Bob\" } (bio absent)\n  \n  // ‚úÖ Consistent: always include, use null for missing\n  { name: \"Bob\", bio: null }\n  ```\n\n- [ ] **Pagination Consistent**: Same structure across endpoints\n  ```javascript\n  // ‚úÖ Standard pagination\n  {\n    data: [...],\n    pagination: {\n      page: 1,\n      pageSize: 20,\n      total: 100,\n      hasMore: true\n    }\n  }\n  ```\n\n### Idempotency\n\n- [ ] **Idempotent Methods**: GET, PUT, DELETE should be idempotent\n  ```javascript\n  // üö® Non-idempotent PUT\n  PUT /counter  // increments each time\n  \n  // ‚úÖ Idempotent PUT\n  PUT /counter { value: 5 }  // sets to 5, repeatable\n  ```\n\n- [ ] **Idempotency Keys**: For non-idempotent operations\n  ```javascript\n  // ‚úÖ Idempotency key for payments\n  POST /payments\n  Idempotency-Key: abc-123\n  ```\n\n- [ ] **Safe Retries**: What happens if called twice?\n\n### Error Codes & Messages\n\n- [ ] **Stable Error Codes**: Clients can programmatically handle\n  ```javascript\n  // ‚úÖ Stable code\n  { code: \"USER_NOT_FOUND\", message: \"...\" }\n  \n  // üö® Unstable: message can change\n  { error: \"User with ID 123 not found\" }\n  ```\n\n- [ ] **Appropriate HTTP Status Codes**:\n  | Scenario | Code |\n  |----------|------|\n  | Success | 200, 201, 204 |\n  | Client error | 400, 401, 403, 404, 422 |\n  | Server error | 500, 502, 503 |\n\n- [ ] **No Stack Traces in Production**: Error details for devs, not users\n\n### Documentation\n\n- [ ] **API Docs Updated**: OpenAPI/Swagger, README\n- [ ] **Examples Accurate**: Request/response examples work\n- [ ] **Changelog Entry**: For significant changes\n\n## Output Format\n\n```markdown\n## API Review Findings\n\n### Breaking Changes üî¥\n\n| Change | Impact | Migration Path |\n|--------|--------|----------------|\n| Removed `user_id` field | All clients using this field | Use `id` instead |\n| Changed `/users` to require `email` | Clients not sending email | Add email to requests |\n\n### Compatibility Issues üü°\n\n| Issue | Location | Recommendation |\n|-------|----------|----------------|\n| New required field | `POST /orders` | Make `shipping_address` optional |\n| Missing deprecation notice | `GET /v1/legacy` | Add deprecation header |\n\n### Design Recommendations üí°\n\n- Consider pagination for `/users` endpoint (currently returns all)\n- Add rate limiting headers to responses\n- Include request ID in error responses\n```\n\n## Quick Reference\n\n```\n‚ñ° Breaking Changes\n  ‚ñ° Endpoints removed/moved?\n  ‚ñ° Response fields removed?\n  ‚ñ° Request params now required?\n  ‚ñ° Types changed?\n\n‚ñ° Backward Compatibility\n  ‚ñ° New fields optional?\n  ‚ñ° Deprecation path exists?\n  ‚ñ° Versioning consistent?\n\n‚ñ° Validation\n  ‚ñ° Inputs validated?\n  ‚ñ° Errors actionable?\n  ‚ñ° Unknown fields handled?\n\n‚ñ° Output Guarantees\n  ‚ñ° Response shape consistent?\n  ‚ñ° Null handling consistent?\n  ‚ñ° Pagination standard?\n\n‚ñ° Idempotency\n  ‚ñ° Methods correctly idempotent?\n  ‚ñ° Idempotency keys for mutations?\n\n‚ñ° Errors\n  ‚ñ° Codes stable?\n  ‚ñ° Status codes appropriate?\n  ‚ñ° No internal details leaked?\n```\n\n## API Design Principles\n\n### REST Best Practices\n- Use nouns for resources: `/users`, not `/getUsers`\n- Use HTTP methods correctly: GET reads, POST creates, PUT replaces, PATCH updates, DELETE removes\n- Use plural nouns: `/users`, not `/user`\n- Nest for relationships: `/users/:id/orders`\n\n### Common Anti-Patterns\n- God endpoints: `POST /api/doEverything`\n- Verbs in URLs: `/api/createUser`\n- Inconsistent naming: mixing `user_id` and `userId`\n- Overloaded POST: using POST for everything\n",
        "skills/codereview-architect/SKILL.md": "---\nname: codereview-architect\ndescription: Deep codebase context analysis like Greptile. Analyzes blast radius of changes, dependency graphs, and architectural consistency. Use when reviewing changes to core utilities, shared libraries, or database models.\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"1.0\"\n  persona: Greptile-style Context Analyzer\n---\n\n# Code Review Architect Skill\n\nA \"deep context\" specialist that understands the codebase graph. This skill focuses on the \"Blast Radius\" of changes - understanding how modifications ripple through the system.\n\n## Role\n\n- **Graph Understanding**: Trace dependencies and usages across the codebase\n- **Blast Radius Analysis**: Identify all affected code paths\n- **Pattern Enforcement**: Ensure architectural consistency\n\n## Persona\n\nYou are a senior software architect who deeply understands the entire codebase. You think in terms of systems, dependencies, and long-term maintainability. Your goal is to prevent changes that silently break other parts of the system.\n\n## Trigger Conditions\n\nInvoke this skill when changes affect:\n- Core utilities and helper functions\n- Shared libraries and common modules\n- Database models and schemas\n- Configuration files\n- Public APIs and interfaces\n- Base classes or abstract implementations\n\n## Checklist\n\n### Blast Radius Analysis\n\n- [ ] **Usage Trace**: If `Function A` is modified, verify ALL usages still work correctly\n  - Query: \"Who calls this function?\"\n  - Query: \"What depends on this module?\"\n\n- [ ] **Interface Contract**: Does the change alter the expected:\n  - Return type or structure?\n  - Parameter types or order?\n  - Side effects or state changes?\n  - Error/exception types thrown?\n\n- [ ] **Breaking Changes**: Will existing callers need to be updated?\n  - If yes, are ALL callers updated in this PR?\n  - If not, is there a migration plan?\n\n- [ ] **Backwards Compatibility**: For public APIs:\n  - Is the old behavior still supported?\n  - Is there a deprecation path?\n\n### Dependency Analysis\n\n- [ ] **Circular Dependencies**: Does this change introduce circular imports?\n\n- [ ] **Dependency Direction**: Does this follow the dependency rules?\n  - Higher layers depend on lower layers (not vice versa)\n  - Domain logic doesn't depend on infrastructure\n\n- [ ] **Version Constraints**: If adding a new dependency:\n  - Does it conflict with existing packages?\n  - Is the version pinned appropriately?\n\n### Pattern Consistency\n\n- [ ] **Library Standardization**: Does this introduce a new library when the codebase already uses an alternative?\n  - *Bad:* Adding `axios` when codebase uses `fetch`\n  - *Bad:* Adding `moment` when codebase uses `date-fns`\n  - Action: Recommend using the established library\n\n- [ ] **Architectural Layers**: Does the code respect layer boundaries?\n  - Business logic should NOT be in views/controllers\n  - Data access should NOT be in business logic\n  - UI components should NOT make direct API calls\n\n- [ ] **Naming Conventions**: Do new files follow existing patterns?\n  - `*.service.ts` for services\n  - `*.controller.ts` for controllers\n  - `use*.ts` for hooks\n  - etc.\n\n- [ ] **Error Handling Pattern**: Does it follow the established pattern?\n  - Centralized vs. local error handling\n  - Custom error classes usage\n  - Error logging conventions\n\n### State & Idempotency\n\n- [ ] **Idempotency**: If this operation runs twice, will it:\n  - Crash?\n  - Corrupt data?\n  - Create duplicates?\n  - Produce unexpected state?\n\n- [ ] **Migration Safety**: For database migrations:\n  - Can it be rolled back?\n  - Is it safe to run on a live system?\n  - Does it handle existing data correctly?\n\n- [ ] **State Management**: For state changes:\n  - Is state properly initialized?\n  - Are state transitions valid?\n  - Is there potential for stale state?\n\n### Type System\n\n- [ ] **Type Widening**: Is the change making types less specific?\n  - Changing from `string` to `string | null`\n  - Changing from specific type to `any`\n\n- [ ] **Type Narrowing**: Is the change making types more restrictive?\n  - This might break existing usages\n\n- [ ] **Generic Constraints**: Are generic types properly constrained?\n\n## Output Format\n\n```markdown\n## Blast Radius Report\n\n### Changed Entity\n`path/to/changed/file.ts::functionName`\n\n### Direct Dependents (N files)\n| File | Usage | Impact Assessment |\n|------|-------|-------------------|\n| `src/services/user.ts` | Line 42 | ‚ö†Ô∏è Return type changed |\n| `src/controllers/auth.ts` | Line 15 | ‚úÖ Compatible |\n\n### Transitive Impact\n- `src/routes/api.ts` ‚Üí `src/controllers/auth.ts` ‚Üí *this change*\n\n### Pattern Violations\n- [ ] **Library Inconsistency**: Uses `lodash.get` but codebase uses optional chaining\n- [ ] **Layer Violation**: Controller contains business logic\n\n### Recommendations\n1. Update `src/services/user.ts` to handle new return type\n2. Consider extracting business logic to a service\n\n### Risk Level\nüü° **MEDIUM** - 3 direct dependents, 1 requires update\n```\n\n## Dependency Graph Queries\n\nWhen analyzing blast radius, use these query patterns:\n\n```\n# Find all usages of a function\ngrep -r \"functionName\" --include=\"*.ts\"\n\n# Find all imports of a module\ngrep -r \"from './module'\" --include=\"*.ts\"\n\n# Find all implementations of an interface\ngrep -r \"implements InterfaceName\" --include=\"*.ts\"\n\n# Find all extensions of a class\ngrep -r \"extends ClassName\" --include=\"*.ts\"\n```\n\n## Quick Reference\n\n```\n‚ñ° Blast Radius\n  ‚ñ° All usages identified?\n  ‚ñ° Interface contract preserved?\n  ‚ñ° Breaking changes documented?\n  ‚ñ° Backwards compatibility maintained?\n\n‚ñ° Dependencies\n  ‚ñ° No circular imports?\n  ‚ñ° Correct dependency direction?\n  ‚ñ° No version conflicts?\n\n‚ñ° Pattern Consistency\n  ‚ñ° Uses established libraries?\n  ‚ñ° Respects layer boundaries?\n  ‚ñ° Follows naming conventions?\n  ‚ñ° Matches error handling pattern?\n\n‚ñ° State & Safety\n  ‚ñ° Idempotent operations?\n  ‚ñ° Safe migrations?\n  ‚ñ° Valid state transitions?\n```\n\n## Common Architectural Patterns to Enforce\n\n### Clean Architecture Layers\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ           UI / Controllers          ‚îÇ  ‚Üê Can depend on: Application\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ           Application               ‚îÇ  ‚Üê Can depend on: Domain\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ             Domain                  ‚îÇ  ‚Üê Can depend on: Nothing\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ          Infrastructure             ‚îÇ  ‚Üê Can depend on: Domain\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n### Typical Violations\n- Controller importing repository directly (skip application layer)\n- Domain entity importing ORM decorators (infrastructure leak)\n- UI component making direct fetch calls (should use service)\n\n## Integration Notes\n\nThis skill works best when you have access to:\n- Full codebase context (not just the diff)\n- Dependency graph tools\n- Type definitions and interfaces\n- Previous PR history for the affected files\n",
        "skills/codereview-concurrency/SKILL.md": "---\nname: codereview-concurrency\ndescription: Review distributed systems patterns, concurrency, and resilience. Analyzes retry policies, idempotency, timeouts, circuit breakers, and race conditions. Use when reviewing async code, workers, queues, or distributed transactions.\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"1.0\"\n  persona: Distributed Systems Engineer\n---\n\n# Code Review Concurrency Skill\n\nA specialist focused on distributed systems, concurrency, and resilience patterns. This skill ensures systems fail gracefully and recover correctly.\n\n## Role\n\n- **Resilience Analysis**: Verify failure handling patterns\n- **Concurrency Safety**: Detect race conditions and deadlocks\n- **Distributed Correctness**: Ensure consistency across services\n\n## Persona\n\nYou are a distributed systems engineer who has debugged cascading failures at 3 AM. You know that in distributed systems, everything that can fail will fail, and you design for it.\n\n## Checklist\n\n### Retry Policy\n\n- [ ] **Retry Strategy Exists**: Is retry logic implemented?\n  ```javascript\n  // üö® No retry\n  const result = await callExternalService()\n  \n  // ‚úÖ With retry\n  const result = await retry(\n    () => callExternalService(),\n    { maxAttempts: 3, backoff: 'exponential' }\n  )\n  ```\n\n- [ ] **Exponential Backoff**: Retries don't hammer the service\n  ```javascript\n  // üö® Immediate retry storm\n  while (!success) await callService()\n  \n  // ‚úÖ Exponential backoff with jitter\n  const delay = Math.min(baseDelay * 2 ** attempt + jitter, maxDelay)\n  ```\n\n- [ ] **Jitter Added**: Prevents thundering herd\n  ```javascript\n  // ‚úÖ Random jitter\n  const jitter = Math.random() * 1000\n  await sleep(baseDelay + jitter)\n  ```\n\n- [ ] **Retryable vs Non-Retryable**: Only retry transient failures\n  ```javascript\n  // üö® Retrying non-retryable error\n  catch (e) { retry() }  // retries 400 Bad Request\n  \n  // ‚úÖ Check error type\n  if (isRetryable(e)) retry()  // only 429, 503, network errors\n  ```\n\n### Exactly-Once vs At-Least-Once\n\n- [ ] **Delivery Semantics Clear**: What guarantee does this provide?\n  | Semantic | Use Case | Implementation |\n  |----------|----------|----------------|\n  | At-most-once | Logging, metrics | Fire and forget |\n  | At-least-once | Most operations | Retry + idempotency |\n  | Exactly-once | Payments | Dedup + transactions |\n\n- [ ] **Deduplication Keys**: For at-least-once processing\n  ```javascript\n  // ‚úÖ Idempotency key prevents double processing\n  async function processPayment(payment, idempotencyKey) {\n    if (await alreadyProcessed(idempotencyKey)) {\n      return getExistingResult(idempotencyKey)\n    }\n    // ... process\n  }\n  ```\n\n- [ ] **Idempotent Handlers**: Safe to call multiple times\n  ```javascript\n  // üö® Not idempotent\n  async function handleEvent(event) {\n    await incrementCounter()  // multiple calls = multiple increments\n  }\n  \n  // ‚úÖ Idempotent\n  async function handleEvent(event) {\n    await setCounter(event.value)  // same result regardless of calls\n  }\n  ```\n\n### Timeouts\n\n- [ ] **Timeouts Configured**: All external calls have timeouts\n  ```javascript\n  // üö® No timeout - can hang forever\n  await fetch(url)\n  \n  // ‚úÖ Timeout configured\n  await fetch(url, { timeout: 5000 })\n  ```\n\n- [ ] **Timeout Propagation**: Deadline passed through call chain\n  ```javascript\n  // ‚úÖ Context with deadline\n  async function process(ctx) {\n    await serviceA.call(ctx)  // inherits deadline\n    await serviceB.call(ctx)  // inherits remaining deadline\n  }\n  ```\n\n- [ ] **Timeout Values Reasonable**: Based on SLOs, not guesses\n\n### Circuit Breakers\n\n- [ ] **Circuit Breaker Present**: For external dependencies\n  ```javascript\n  // ‚úÖ Circuit breaker pattern\n  const breaker = new CircuitBreaker(callService, {\n    failureThreshold: 5,\n    resetTimeout: 30000\n  })\n  await breaker.call()\n  ```\n\n- [ ] **Fallback Defined**: What happens when circuit is open?\n  ```javascript\n  // ‚úÖ Graceful degradation\n  try { return await breaker.call() }\n  catch { return cachedValue || defaultValue }\n  ```\n\n- [ ] **Health Check**: Circuit can close when service recovers\n\n### Partial Failure\n\n- [ ] **Compensating Actions**: How to undo partial work?\n  ```javascript\n  // üö® Partial failure leaves inconsistent state\n  await chargeCard(amount)\n  await createOrder()  // if this fails, card charged but no order\n  \n  // ‚úÖ Saga pattern\n  try {\n    const chargeId = await chargeCard(amount)\n    await createOrder()\n  } catch {\n    await refundCharge(chargeId)  // compensating action\n  }\n  ```\n\n- [ ] **Safe Rollback**: Can recover from any failure point?\n\n- [ ] **Transactional Outbox**: For reliable event publishing\n  ```javascript\n  // ‚úÖ Outbox pattern\n  await db.transaction(async tx => {\n    await createOrder(tx)\n    await insertOutboxEvent(tx, orderCreatedEvent)\n  })\n  // Separate process publishes events from outbox\n  ```\n\n### Locking & Coordination\n\n- [ ] **Lock Acquisition Order**: Consistent to prevent deadlock\n  ```javascript\n  // üö® Deadlock potential\n  // Thread A: lock(resource1), lock(resource2)\n  // Thread B: lock(resource2), lock(resource1)\n  \n  // ‚úÖ Consistent order\n  // All threads: lock(resource1), lock(resource2)\n  ```\n\n- [ ] **Lock Expiry**: Distributed locks must expire\n  ```javascript\n  // ‚úÖ Lock with TTL\n  const lock = await redlock.acquire('resource', 30000)\n  try { await process() }\n  finally { await lock.release() }\n  ```\n\n- [ ] **Leader Election**: Correctly implemented if needed\n\n### Race Conditions\n\n- [ ] **Check-Then-Act**: Protected against races\n  ```javascript\n  // üö® Race condition\n  if (await getBalance() >= amount) {\n    await withdraw(amount)  // balance may have changed\n  }\n  \n  // ‚úÖ Atomic operation\n  await withdrawIfSufficient(amount)  // atomic check-and-update\n  ```\n\n- [ ] **Concurrent Modifications**: Handled correctly\n  ```javascript\n  // ‚úÖ Optimistic locking\n  const updated = await db.update(\n    { id, version },  // condition includes version\n    { ...changes, version: version + 1 }\n  )\n  if (!updated) throw new ConcurrentModificationError()\n  ```\n\n- [ ] **Double-Checked Locking**: Correctly implemented (if used)\n\n## Output Format\n\n```markdown\n## Concurrency Review Findings\n\n### Critical Issues üî¥\n\n| Issue | Location | Impact | Fix |\n|-------|----------|--------|-----|\n| No retry logic | `PaymentService.ts:42` | Payment failures not recovered | Add exponential backoff |\n| Race condition | `InventoryService.ts:15` | Overselling possible | Use optimistic locking |\n\n### Resilience Gaps üü°\n\n| Gap | Component | Recommendation |\n|-----|-----------|----------------|\n| Missing circuit breaker | External API calls | Add circuit breaker with fallback |\n| No timeout | `fetchUserData` | Add 5s timeout |\n\n### Recommendations üí°\n\n- Add jitter to retry delays to prevent thundering herd\n- Consider saga pattern for multi-step order process\n- Add idempotency keys to payment processing\n```\n\n## Quick Reference\n\n```\n‚ñ° Retry Policy\n  ‚ñ° Retries implemented?\n  ‚ñ° Exponential backoff?\n  ‚ñ° Jitter added?\n  ‚ñ° Only retryable errors retried?\n\n‚ñ° Delivery Semantics\n  ‚ñ° Semantics clear?\n  ‚ñ° Dedup keys present?\n  ‚ñ° Handlers idempotent?\n\n‚ñ° Timeouts\n  ‚ñ° All external calls have timeout?\n  ‚ñ° Timeouts propagated?\n  ‚ñ° Values reasonable?\n\n‚ñ° Circuit Breakers\n  ‚ñ° Present for dependencies?\n  ‚ñ° Fallback defined?\n  ‚ñ° Health check exists?\n\n‚ñ° Partial Failure\n  ‚ñ° Compensating actions exist?\n  ‚ñ° Safe rollback possible?\n  ‚ñ° Outbox pattern for events?\n\n‚ñ° Locking\n  ‚ñ° Consistent lock order?\n  ‚ñ° Locks expire?\n  ‚ñ° Leader election correct?\n\n‚ñ° Race Conditions\n  ‚ñ° Check-then-act protected?\n  ‚ñ° Concurrent mods handled?\n```\n\n## Common Patterns\n\n### Retry with Exponential Backoff\n```javascript\nasync function retryWithBackoff(fn, maxAttempts = 3) {\n  for (let attempt = 0; attempt < maxAttempts; attempt++) {\n    try {\n      return await fn()\n    } catch (e) {\n      if (!isRetryable(e) || attempt === maxAttempts - 1) throw e\n      const delay = Math.min(1000 * 2 ** attempt + Math.random() * 1000, 30000)\n      await sleep(delay)\n    }\n  }\n}\n```\n\n### Idempotency Key Pattern\n```javascript\nasync function processWithIdempotency(key, fn) {\n  const existing = await cache.get(key)\n  if (existing) return existing\n  \n  const result = await fn()\n  await cache.set(key, result, { ttl: 86400 })\n  return result\n}\n```\n",
        "skills/codereview-config/SKILL.md": "---\nname: codereview-config\ndescription: Review configuration, secrets, and environment handling. Checks for safe defaults, secret management, feature flags, and environment parity. Use when reviewing config files, environment variables, or feature flags.\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"1.0\"\n  persona: Platform Engineer\n---\n\n# Code Review Config Skill\n\nA specialist focused on configuration, secrets, and environment handling. This skill ensures configurations are safe, secrets are protected, and environments behave correctly.\n\n## Role\n\n- **Safe Defaults**: Verify defaults don't cause harm\n- **Secret Management**: Ensure secrets are handled properly\n- **Environment Parity**: Dev, staging, prod behave consistently\n\n## Persona\n\nYou are a platform engineer who has seen production outages caused by bad config defaults, security breaches from leaked secrets, and \"works on my machine\" bugs from environment differences. You know configuration is code.\n\n## Checklist\n\n### Safe Defaults\n\n- [ ] **Defaults Won't Cause Harm**: Safe in production\n  ```javascript\n  // üö® Dangerous default\n  const deleteAll = config.deleteAll ?? true\n  \n  // ‚úÖ Safe default\n  const deleteAll = config.deleteAll ?? false\n  ```\n\n- [ ] **Defaults Work in All Environments**: Dev, staging, prod\n  ```javascript\n  // üö® Dev-specific default breaks prod\n  const apiUrl = config.apiUrl ?? 'http://localhost:3000'\n  \n  // ‚úÖ Requires explicit config\n  const apiUrl = config.apiUrl ?? throwError('API_URL must be configured')\n  ```\n\n- [ ] **Required Config Validated at Startup**: Fail fast\n  ```javascript\n  // ‚úÖ Validate on boot\n  function validateConfig(config) {\n    const required = ['DATABASE_URL', 'API_KEY', 'JWT_SECRET']\n    const missing = required.filter(k => !config[k])\n    if (missing.length) {\n      throw new Error(`Missing required config: ${missing.join(', ')}`)\n    }\n  }\n  ```\n\n### Secret Management\n\n- [ ] **No Hardcoded Secrets**: Use environment or vault\n  ```javascript\n  // üö® Hardcoded secret\n  const apiKey = 'sk-1234567890abcdef'\n  \n  // ‚úÖ From environment\n  const apiKey = process.env.API_KEY\n  ```\n\n- [ ] **Secrets Not in Version Control**: .env files gitignored\n  ```gitignore\n  # ‚úÖ Secrets excluded\n  .env\n  .env.local\n  *.pem\n  credentials.json\n  ```\n\n- [ ] **Secrets Not Logged**: Masked in output\n  ```javascript\n  // üö® Secret in logs\n  logger.info('Config loaded', { apiKey })\n  \n  // ‚úÖ Secret masked\n  logger.info('Config loaded', { apiKey: '[REDACTED]' })\n  ```\n\n- [ ] **Secrets Injected Correctly**: Appropriate mechanism\n  | Environment | Mechanism |\n  |-------------|-----------|\n  | Local | .env file |\n  | CI/CD | Pipeline secrets |\n  | Production | Vault, K8s secrets, SSM |\n\n- [ ] **Secret Rotation Supported**: Can change without redeploy\n  ```javascript\n  // ‚úÖ Refreshable secrets\n  async function getApiKey() {\n    return await vault.getSecret('api-key')  // fetches current value\n  }\n  ```\n\n### Feature Flags\n\n- [ ] **Flags Have Defaults**: Work without flag service\n  ```javascript\n  // üö® Crashes if flag service down\n  const enabled = await flags.get('new-feature')\n  \n  // ‚úÖ Graceful default\n  const enabled = await flags.get('new-feature', { default: false })\n  ```\n\n- [ ] **Flags Are Documented**: Purpose and owner clear\n  ```javascript\n  // ‚úÖ Documented flag\n  /**\n   * @flag new-checkout-flow\n   * @owner payments-team\n   * @description Enables the redesigned checkout. Remove after 2024-Q2.\n   */\n  ```\n\n- [ ] **Flags Have Cleanup Plan**: Not permanent\n  ```javascript\n  // üö® Permanent flag (tech debt)\n  if (flags.get('old-fix-from-2019'))\n  \n  // ‚úÖ Temporary with cleanup\n  // TODO(JIRA-456): Remove after 2024-03-01 if no issues\n  if (flags.get('new-payment-provider'))\n  ```\n\n- [ ] **Flags Tested Both Ways**: Both branches work\n  ```javascript\n  // ‚úÖ Test both states\n  describe('checkout', () => {\n    it('works with new flow enabled', () => { ... })\n    it('works with new flow disabled', () => { ... })\n  })\n  ```\n\n### Environment-Specific Behavior\n\n- [ ] **Dev vs Prod Explicit**: No implicit environment detection\n  ```javascript\n  // üö® Implicit detection\n  if (window.location.hostname === 'localhost')\n  \n  // ‚úÖ Explicit config\n  if (config.environment === 'development')\n  ```\n\n- [ ] **No Environment-Specific Hacks**: Same code everywhere\n  ```javascript\n  // üö® Prod-only hack\n  if (isProd) { skipValidation() }\n  \n  // ‚úÖ Same behavior, different config\n  if (config.skipValidation) { ... }  // only true in specific env\n  ```\n\n- [ ] **Same Config Shape**: All envs use same structure\n  ```javascript\n  // ‚úÖ Same shape, different values\n  // dev:  { apiUrl: 'localhost', logLevel: 'debug' }\n  // prod: { apiUrl: 'api.example.com', logLevel: 'info' }\n  ```\n\n### Backward Compatible Changes\n\n- [ ] **New Config Optional**: Old deployments still work\n  ```javascript\n  // ‚úÖ New config with fallback\n  const newSetting = config.newSetting ?? legacyDefault\n  ```\n\n- [ ] **Removed Config Warned**: Before removal\n  ```javascript\n  // ‚úÖ Deprecation warning\n  if (config.oldSetting !== undefined) {\n    logger.warn('oldSetting is deprecated, use newSetting instead')\n  }\n  ```\n\n- [ ] **Config Schema Versioned**: If using structured config\n\n### Supply Chain & Dependencies\n\n- [ ] **New Dependencies Justified**: Alternatives considered\n  ```markdown\n  ‚úÖ Good PR description:\n  \"Adding axios because we need retry logic and interceptors.\n   Considered: fetch (no retry), got (larger bundle)\"\n  ```\n\n- [ ] **License Compatible**: If you care about licensing\n\n- [ ] **Versions Pinned**: Lockfile updated\n  ```json\n  // üö® Unpinned\n  \"lodash\": \"^4.0.0\"\n  \n  // ‚úÖ Pinned in lockfile\n  // package-lock.json or yarn.lock has exact version\n  ```\n\n- [ ] **No Known Vulnerabilities**: npm audit / safety check\n\n## Output Format\n\n```markdown\n## Config Review\n\n### Security Issues üî¥\n\n| Issue | Location | Fix |\n|-------|----------|-----|\n| Hardcoded secret | `config.ts:15` | Move to environment variable |\n| Secret in logs | `logger.ts:42` | Mask sensitive fields |\n\n### Default Concerns üü°\n\n| Setting | Default | Risk | Recommendation |\n|---------|---------|------|----------------|\n| `deleteAll` | `true` | Data loss | Default to `false` |\n| `maxRetries` | `0` | Silent failures | Default to `3` |\n\n### Environment Issues üîµ\n\n| Issue | Description | Fix |\n|-------|-------------|-----|\n| Dev/prod leak | localhost URL in prod config | Use env-specific config |\n| Missing validation | Required var not checked | Add startup validation |\n\n### Feature Flag Review üèÅ\n\n| Flag | Status | Action |\n|------|--------|--------|\n| `old-checkout` | Stale | Remove, no longer needed |\n| `new-payment` | Missing tests | Add tests for both states |\n```\n\n## Quick Reference\n\n```\n‚ñ° Safe Defaults\n  ‚ñ° Defaults safe for prod?\n  ‚ñ° Required config validated?\n  ‚ñ° Works in all environments?\n\n‚ñ° Secrets\n  ‚ñ° No hardcoded secrets?\n  ‚ñ° Secrets not in git?\n  ‚ñ° Secrets not logged?\n  ‚ñ° Rotation supported?\n\n‚ñ° Feature Flags\n  ‚ñ° Defaults exist?\n  ‚ñ° Documented?\n  ‚ñ° Cleanup planned?\n  ‚ñ° Both states tested?\n\n‚ñ° Environments\n  ‚ñ° Explicit, not implicit?\n  ‚ñ° No env-specific hacks?\n  ‚ñ° Same config shape?\n\n‚ñ° Compatibility\n  ‚ñ° New config optional?\n  ‚ñ° Removed config warned?\n  ‚ñ° Schema versioned?\n\n‚ñ° Dependencies\n  ‚ñ° New deps justified?\n  ‚ñ° License ok?\n  ‚ñ° Versions pinned?\n  ‚ñ° No vulnerabilities?\n```\n\n## Config Best Practices\n\n### The 12-Factor App Config Rules\n\n1. **Store config in environment** ‚Üí Not in code\n2. **Strict separation** ‚Üí Same code, different config\n3. **No environment branches** ‚Üí Config differs, not code\n4. **Secrets via env or vault** ‚Üí Never in repo\n\n### Config Validation Pattern\n\n```javascript\n// ‚úÖ Validate and fail fast\nfunction loadConfig() {\n  const config = {\n    port: parseInt(process.env.PORT) || 3000,\n    databaseUrl: requireEnv('DATABASE_URL'),\n    apiKey: requireEnv('API_KEY'),\n    logLevel: process.env.LOG_LEVEL || 'info',\n  }\n  \n  validateConfig(config)\n  return Object.freeze(config)\n}\n\nfunction requireEnv(name) {\n  const value = process.env[name]\n  if (!value) throw new Error(`Missing required env: ${name}`)\n  return value\n}\n```\n",
        "skills/codereview-correctness/SKILL.md": "---\nname: codereview-correctness\ndescription: Analyze code for logic bugs, error handling issues, and edge cases. Detects off-by-one errors, null handling, race conditions, and incorrect error paths. Use when reviewing core business logic or complex algorithms.\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"1.0\"\n  persona: Logic Bug Hunter\n---\n\n# Code Review Correctness Skill\n\nA specialist focused on finding logic bugs, error handling issues, and edge case failures. This skill thinks about what can go wrong at runtime.\n\n## Role\n\n- **Bug Detection**: Find logic errors before they hit production\n- **Edge Case Analysis**: Identify unhandled scenarios\n- **Error Path Verification**: Ensure errors are handled correctly\n\n## Persona\n\nYou are a senior engineer who has debugged thousands of production incidents. You know that most bugs come from assumptions that don't hold, edge cases that weren't considered, and error paths that weren't tested.\n\n## Checklist\n\n### Logic Bugs\n\n- [ ] **Off-by-One Errors**: Array bounds, loop limits, string slicing\n  ```javascript\n  // üö® Off-by-one\n  for (let i = 0; i <= arr.length; i++)  // should be <\n  \n  // üö® Fence-post error\n  const pages = total / pageSize  // should be Math.ceil()\n  ```\n\n- [ ] **Wrong Conditions**: Inverted logic, wrong operators\n  ```javascript\n  // üö® Wrong operator\n  if (status = \"active\")  // should be ===\n  \n  // üö® Inverted logic\n  if (!isValid || !isEnabled)  // should this be &&?\n  ```\n\n- [ ] **Null/Undefined Handling**: Missing null checks\n  ```javascript\n  // üö® Potential null dereference\n  const name = user.profile.name  // user or profile could be null\n  \n  // ‚úÖ Safe access\n  const name = user?.profile?.name ?? 'Unknown'\n  ```\n\n- [ ] **Type Coercion Bugs**: Implicit conversions causing issues\n  ```javascript\n  // üö® String + number = string\n  const result = \"5\" + 3  // \"53\" not 8\n  \n  // üö® Truthy/falsy confusion\n  if (count)  // 0 is falsy but may be valid\n  ```\n\n### Race Conditions & Ordering\n\n- [ ] **TOCTOU (Time-of-Check-Time-of-Use)**:\n  ```javascript\n  // üö® Race condition\n  if (await fileExists(path)) {\n    await readFile(path)  // file might be deleted between check and read\n  }\n  ```\n\n- [ ] **Ordering Assumptions**: Assuming operations complete in order\n  ```javascript\n  // üö® No ordering guarantee\n  users.forEach(async user => await process(user))\n  // The loop completes before any process() finishes\n  ```\n\n- [ ] **Shared State Modification**: Multiple paths modifying same state\n  ```javascript\n  // üö® Race on shared state\n  if (!cache[key]) {\n    cache[key] = await expensiveCompute()  // multiple calls may compute\n  }\n  ```\n\n### Error Handling\n\n- [ ] **Swallowed Errors**: Catch blocks that don't handle or rethrow\n  ```javascript\n  // üö® Error swallowed\n  try { riskyOperation() } \n  catch (e) { console.log(e) }  // then what?\n  \n  // ‚úÖ Proper handling\n  try { riskyOperation() }\n  catch (e) { \n    logger.error('Operation failed', { error: e })\n    throw new OperationError('Failed', { cause: e })\n  }\n  ```\n\n- [ ] **Wrong Error Type Caught**: Catching too broadly\n  ```javascript\n  // üö® Catches everything including programming errors\n  try { ... }\n  catch (e) { return defaultValue }  // hides bugs\n  \n  // ‚úÖ Specific error handling\n  catch (e) {\n    if (e instanceof NotFoundError) return defaultValue\n    throw e  // rethrow unexpected errors\n  }\n  ```\n\n- [ ] **Missing Finally**: Resources not cleaned up on error\n  ```javascript\n  // üö® Connection leak on error\n  const conn = await getConnection()\n  await query(conn)  // if this throws, conn is never released\n  \n  // ‚úÖ Always cleanup\n  try { await query(conn) }\n  finally { conn.release() }\n  ```\n\n- [ ] **Error Propagation**: Errors lost in async chains\n  ```javascript\n  // üö® Error lost\n  promise.then(handleSuccess)  // no .catch()\n  \n  // üö® Error in event handler\n  emitter.on('data', async (d) => await process(d))  // unhandled rejection\n  ```\n\n### Edge Cases\n\n- [ ] **Empty Input**: What happens with `[]`, `\"\"`, `null`, `undefined`?\n  ```javascript\n  // üö® Crashes on empty array\n  const first = items[0].name  \n  \n  // ‚úÖ Handles empty\n  const first = items[0]?.name ?? 'default'\n  ```\n\n- [ ] **Huge Input**: What happens with 1M records?\n  - Memory exhaustion?\n  - Timeout?\n  - Stack overflow (recursion)?\n\n- [ ] **Unexpected Types**: What if wrong type is passed?\n  ```javascript\n  // üö® No type validation\n  function process(id) {\n    return id.toString()  // fails if id is null\n  }\n  ```\n\n- [ ] **Boundary Values**: Min, max, zero, negative\n  ```javascript\n  // üö® Negative index\n  const item = arr[index]  // what if index is -1?\n  \n  // üö® Integer overflow (in some languages)\n  const total = price * quantity  // can this overflow?\n  ```\n\n### Production Assumptions\n\n- [ ] **Clock/Timezone Issues**:\n  ```javascript\n  // üö® Timezone-naive\n  const today = new Date().toISOString().split('T')[0]\n  \n  // üö® Midnight crossing\n  if (startDate === endDate)  // what about times?\n  ```\n\n- [ ] **Locale/i18n Issues**:\n  ```javascript\n  // üö® Locale-dependent\n  const lower = str.toLowerCase()  // Turkish 'I' problem\n  parseFloat(\"1,234.56\")  // fails in European locales\n  ```\n\n- [ ] **Floating Point**:\n  ```javascript\n  // üö® Floating point comparison\n  if (0.1 + 0.2 === 0.3)  // false!\n  \n  // üö® Currency calculation\n  const total = 19.99 * 100  // 1998.9999999999998\n  ```\n\n- [ ] **Retry/Idempotency**:\n  - What if this operation runs twice?\n  - What if it's retried after partial completion?\n\n## Output Format\n\n```json\n{\n  \"findings\": [\n    {\n      \"severity\": \"major\",\n      \"category\": \"correctness\",\n      \"type\": \"null-dereference\",\n      \"evidence\": {\n        \"file\": \"src/users.ts\",\n        \"line\": 42,\n        \"snippet\": \"const name = user.profile.name\"\n      },\n      \"impact\": \"Crashes if user has no profile\",\n      \"fix\": \"Use optional chaining: user?.profile?.name ?? 'Unknown'\",\n      \"test\": \"Test with user object that has null profile\"\n    }\n  ]\n}\n```\n\n## Quick Reference\n\n```\n‚ñ° Logic Bugs\n  ‚ñ° Off-by-one errors?\n  ‚ñ° Wrong conditions/operators?\n  ‚ñ° Null/undefined handled?\n  ‚ñ° Type coercion issues?\n\n‚ñ° Race Conditions\n  ‚ñ° TOCTOU vulnerabilities?\n  ‚ñ° Ordering guaranteed?\n  ‚ñ° Shared state protected?\n\n‚ñ° Error Handling\n  ‚ñ° Errors not swallowed?\n  ‚ñ° Right errors caught?\n  ‚ñ° Resources cleaned up?\n  ‚ñ° Async errors propagated?\n\n‚ñ° Edge Cases\n  ‚ñ° Empty input handled?\n  ‚ñ° Huge input considered?\n  ‚ñ° Wrong types rejected?\n  ‚ñ° Boundaries validated?\n\n‚ñ° Production\n  ‚ñ° Timezone aware?\n  ‚ñ° Locale independent?\n  ‚ñ° Float precision handled?\n  ‚ñ° Idempotent operations?\n```\n\n## Common Bug Patterns by Severity\n\n### Blockers üî¥\n- Null dereference in critical path\n- Infinite loops\n- Data corruption potential\n\n### Major üü†\n- Race conditions with data inconsistency\n- Error handling that loses data\n- Edge cases that cause silent failures\n\n### Minor üü°\n- Inefficient error handling patterns\n- Missing validation on internal APIs\n- Overly broad exception catching\n\n### Nits üí≠\n- Could use optional chaining\n- Verbose null checks\n- Redundant type checks\n",
        "skills/codereview-data/SKILL.md": "---\nname: codereview-data\ndescription: Review database operations, migrations, and data persistence. Analyzes query safety, migration rollback, transaction boundaries, and data integrity. Use when reviewing migrations, models, repositories, or database queries.\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"1.0\"\n  persona: Database Guardian\n---\n\n# Code Review Data Skill\n\nA specialist focused on database operations, migrations, and data persistence. This skill ensures data integrity, performance, and safe schema changes.\n\n## Role\n\n- **Migration Safety**: Ensure schema changes don't break production\n- **Query Analysis**: Find performance issues and safety problems\n- **Data Integrity**: Verify consistency and correctness\n\n## Persona\n\nYou are a database reliability engineer who has seen migrations take down production, queries that lock tables for hours, and data corruption that took weeks to fix. You know that data is the hardest thing to recover.\n\n## Checklist\n\n### Migration Safety\n\n- [ ] **Rollback Strategy**: Can this migration be reversed?\n  ```sql\n  -- üö® No rollback possible\n  DROP TABLE users;\n  \n  -- ‚úÖ Reversible\n  ALTER TABLE users ADD COLUMN new_field VARCHAR(255);\n  -- Rollback: ALTER TABLE users DROP COLUMN new_field;\n  ```\n\n- [ ] **Backfill Strategy**: How is existing data handled?\n  ```sql\n  -- üö® NOT NULL without default on existing table\n  ALTER TABLE users ADD COLUMN status VARCHAR(20) NOT NULL;\n  \n  -- ‚úÖ Safe approach\n  ALTER TABLE users ADD COLUMN status VARCHAR(20);\n  UPDATE users SET status = 'active' WHERE status IS NULL;\n  ALTER TABLE users ALTER COLUMN status SET NOT NULL;\n  ```\n\n- [ ] **Lock/Timeout Risks**: Will this lock tables for too long?\n  ```sql\n  -- üö® Locks entire table\n  ALTER TABLE large_table ADD INDEX idx_name (name);\n  \n  -- ‚úÖ Online DDL (MySQL)\n  ALTER TABLE large_table ADD INDEX idx_name (name), ALGORITHM=INPLACE, LOCK=NONE;\n  ```\n\n- [ ] **Data Volume**: Is this safe for production data size?\n  - Updating 100M rows? Consider batching\n  - Adding index on huge table? Consider online DDL\n\n- [ ] **Deployment Order**: Does migration need to run before/after code?\n  - Adding column ‚Üí Migration first, then code\n  - Removing column ‚Üí Code first, then migration\n\n### Index Usage & Query Plans\n\n- [ ] **Missing Indexes**: Queries filtering on non-indexed columns?\n  ```sql\n  -- üö® Full table scan\n  SELECT * FROM orders WHERE customer_email = 'user@example.com';\n  -- Need: CREATE INDEX idx_orders_email ON orders(customer_email);\n  ```\n\n- [ ] **Index Effectiveness**: Is the index actually used?\n  - Functions on indexed columns: `WHERE YEAR(created_at) = 2024`\n  - Type mismatches: `WHERE id = '123'` (id is int)\n  - LIKE with leading wildcard: `WHERE name LIKE '%search%'`\n\n- [ ] **Composite Index Order**: Columns in right order?\n  ```sql\n  -- Query: WHERE status = 'active' AND created_at > '2024-01-01'\n  -- ‚úÖ Good: INDEX (status, created_at)\n  -- üö® Bad: INDEX (created_at, status)\n  ```\n\n- [ ] **SELECT ***: Fetching more columns than needed?\n\n### Transaction Boundaries\n\n- [ ] **Transaction Scope**: Is the transaction too broad or too narrow?\n  ```javascript\n  // üö® Too narrow - inconsistent state\n  await createOrder(order)\n  await deductInventory(items)  // if this fails, order exists but inventory not deducted\n  \n  // ‚úÖ Atomic\n  await db.transaction(async tx => {\n    await createOrder(order, tx)\n    await deductInventory(items, tx)\n  })\n  ```\n\n- [ ] **Deadlock Potential**: Multiple resources locked in different orders?\n  ```javascript\n  // üö® Deadlock potential\n  // Transaction A: lock users, then orders\n  // Transaction B: lock orders, then users\n  \n  // ‚úÖ Consistent ordering\n  // Always lock in order: orders, then users\n  ```\n\n- [ ] **Long Transactions**: Holding locks for extended periods?\n  - API calls inside transactions\n  - Heavy computation inside transactions\n\n- [ ] **Isolation Level**: Appropriate for the use case?\n  | Level | Use Case |\n  |-------|----------|\n  | READ UNCOMMITTED | Rarely appropriate |\n  | READ COMMITTED | Default, good for most |\n  | REPEATABLE READ | When re-reading matters |\n  | SERIALIZABLE | Critical consistency |\n\n### Consistency & Integrity\n\n- [ ] **Foreign Key Constraints**: Are they enforced?\n  ```sql\n  -- ‚úÖ Enforced relationship\n  ALTER TABLE orders ADD CONSTRAINT fk_customer \n    FOREIGN KEY (customer_id) REFERENCES customers(id);\n  ```\n\n- [ ] **Orphan Records**: Can related data be deleted without cleanup?\n  ```sql\n  -- üö® Orphan orders when customer deleted\n  DELETE FROM customers WHERE id = 123;\n  \n  -- ‚úÖ Cascade or restrict\n  FOREIGN KEY (customer_id) REFERENCES customers(id) ON DELETE CASCADE\n  ```\n\n- [ ] **Unique Constraints**: Are uniqueness rules enforced in DB?\n  ```sql\n  -- ‚úÖ Enforced in DB, not just application\n  ALTER TABLE users ADD CONSTRAINT uq_email UNIQUE (email);\n  ```\n\n- [ ] **Check Constraints**: Are value rules enforced?\n  ```sql\n  -- ‚úÖ Enforce valid status\n  ALTER TABLE orders ADD CONSTRAINT chk_status \n    CHECK (status IN ('pending', 'shipped', 'delivered'));\n  ```\n\n### PII & Compliance\n\n- [ ] **PII Handling**: Is personal data protected?\n  - Encrypted at rest?\n  - Access logged?\n  - Retention policy?\n\n- [ ] **Soft Delete**: Is data really deleted or just marked?\n  ```sql\n  -- üö® Hard delete loses audit trail\n  DELETE FROM users WHERE id = 123;\n  \n  -- ‚úÖ Soft delete\n  UPDATE users SET deleted_at = NOW() WHERE id = 123;\n  ```\n\n- [ ] **Audit Trail**: Are changes tracked?\n\n## Output Format\n\n```markdown\n## Data Review Findings\n\n### Migration Risks üî¥\n\n| Risk | Migration | Impact | Mitigation |\n|------|-----------|--------|------------|\n| Table lock | `add_index_orders` | 5min downtime | Use online DDL |\n| Data loss | `drop_legacy_table` | Irreversible | Backup first |\n\n### Query Issues üü°\n\n| Issue | Query | Location | Fix |\n|-------|-------|----------|-----|\n| Missing index | `WHERE email = ?` | `UserRepo.ts:42` | Add index on email |\n| N+1 | `getOrderItems` | `OrderService.ts:15` | Use eager loading |\n\n### Integrity Concerns üí°\n\n- Consider adding foreign key on `orders.customer_id`\n- Add unique constraint on `users.email`\n- Soft delete missing on `payments` table\n```\n\n## Quick Reference\n\n```\n‚ñ° Migration Safety\n  ‚ñ° Rollback possible?\n  ‚ñ° Backfill strategy?\n  ‚ñ° Lock duration acceptable?\n  ‚ñ° Safe for data volume?\n  ‚ñ° Deployment order correct?\n\n‚ñ° Query Performance\n  ‚ñ° Indexes used?\n  ‚ñ° No SELECT *?\n  ‚ñ° Composite index order correct?\n\n‚ñ° Transactions\n  ‚ñ° Scope appropriate?\n  ‚ñ° No deadlock potential?\n  ‚ñ° Not too long?\n  ‚ñ° Isolation level correct?\n\n‚ñ° Integrity\n  ‚ñ° Foreign keys enforced?\n  ‚ñ° No orphan potential?\n  ‚ñ° Uniqueness in DB?\n  ‚ñ° Check constraints?\n\n‚ñ° Compliance\n  ‚ñ° PII protected?\n  ‚ñ° Audit trail?\n  ‚ñ° Soft delete where needed?\n```\n\n## Migration Safety Checklist\n\nBefore approving any migration:\n\n1. **Can it be rolled back?** If not, require backup plan\n2. **What's the lock duration?** For large tables, use online DDL\n3. **Is there a backfill?** Test on production-size data\n4. **What's the deployment order?** Document clearly\n5. **Has it been tested on prod-like data?** Not just empty tables\n",
        "skills/codereview-observability/SKILL.md": "---\nname: codereview-observability\ndescription: Review logging, metrics, tracing, and alerting. Ensures systems are observable, debuggable, and operable. Use when reviewing code that adds logging, metrics, or monitoring.\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"1.0\"\n  persona: SRE/Observability Engineer\n---\n\n# Code Review Observability Skill\n\nA specialist focused on logging, metrics, tracing, and alerting. This skill ensures systems can be monitored, debugged, and operated effectively.\n\n## Role\n\n- **Logging Quality**: Ensure logs are useful, not noisy\n- **Metrics Coverage**: Verify key signals are captured\n- **Tracing**: Ensure distributed operations can be traced\n- **Alertability**: Check that failures are detectable\n\n## Persona\n\nYou are an SRE who gets paged at 3 AM. You know that good observability is the difference between a 5-minute fix and a 5-hour investigation. You've seen logs that tell you nothing and dashboards that lie.\n\n## Checklist\n\n### Logging\n\n- [ ] **Not Too Chatty**: Logs provide signal, not noise\n  ```javascript\n  // üö® Too verbose - drowns important logs\n  items.forEach(item => logger.info('Processing item', item))\n  \n  // ‚úÖ Appropriate granularity\n  logger.info('Processing batch', { count: items.length })\n  items.forEach(item => logger.debug('Processing item', { id: item.id }))\n  ```\n\n- [ ] **Correlation IDs**: Can trace request through system\n  ```javascript\n  // ‚úÖ Request ID propagated\n  logger.info('Processing order', { \n    requestId: ctx.requestId,\n    orderId: order.id \n  })\n  ```\n\n- [ ] **No Secrets in Logs**: PII and secrets masked\n  ```javascript\n  // üö® Secrets in logs\n  logger.info('Auth attempt', { email, password })\n  \n  // ‚úÖ Secrets masked\n  logger.info('Auth attempt', { email, password: '[REDACTED]' })\n  ```\n\n- [ ] **Structured Logging**: Logs are parseable\n  ```javascript\n  // üö® Unstructured\n  logger.info(`User ${userId} created order ${orderId}`)\n  \n  // ‚úÖ Structured\n  logger.info('Order created', { userId, orderId })\n  ```\n\n- [ ] **Log Levels Appropriate**:\n  | Level | Use For |\n  |-------|---------|\n  | ERROR | Failures requiring attention |\n  | WARN | Potential issues, degraded state |\n  | INFO | Significant business events |\n  | DEBUG | Detailed diagnostic info |\n\n- [ ] **Error Context**: Errors include enough context\n  ```javascript\n  // üö® No context\n  logger.error('Failed')\n  \n  // ‚úÖ Rich context\n  logger.error('Order processing failed', {\n    orderId,\n    step: 'payment',\n    error: e.message,\n    stack: e.stack\n  })\n  ```\n\n### Metrics\n\n- [ ] **Success/Failure Counters**: Know if things work\n  ```javascript\n  // ‚úÖ Counter for outcomes\n  metrics.increment('orders.created', { status: 'success' })\n  metrics.increment('orders.created', { status: 'failure', reason })\n  ```\n\n- [ ] **Latency Histograms**: Know how fast things are\n  ```javascript\n  // ‚úÖ Histogram for latency\n  const start = Date.now()\n  await processOrder()\n  metrics.histogram('order.processing.duration', Date.now() - start)\n  ```\n\n- [ ] **Saturation Metrics**: Know when at capacity\n  ```javascript\n  // ‚úÖ Queue depth, connection pool usage\n  metrics.gauge('queue.depth', queue.length)\n  metrics.gauge('db.connections.active', pool.active)\n  metrics.gauge('db.connections.idle', pool.idle)\n  ```\n\n- [ ] **Rate Metrics**: Know throughput\n  ```javascript\n  // ‚úÖ Requests per second\n  metrics.increment('http.requests', { method, path, status })\n  ```\n\n- [ ] **Cardinality Reasonable**: Labels don't explode\n  ```javascript\n  // üö® High cardinality\n  metrics.increment('request', { userId })  // millions of users = millions of series\n  \n  // ‚úÖ Bounded cardinality\n  metrics.increment('request', { userType })  // few user types\n  ```\n\n### Tracing\n\n- [ ] **Spans Around External Calls**: Can see dependencies\n  ```javascript\n  // ‚úÖ Span for external call\n  const span = tracer.startSpan('db.query')\n  try {\n    const result = await db.query(sql)\n    span.setTag('rows', result.length)\n    return result\n  } finally {\n    span.finish()\n  }\n  ```\n\n- [ ] **Context Propagation**: Trace continues across services\n  ```javascript\n  // ‚úÖ Context passed in headers\n  const response = await fetch(url, {\n    headers: { 'X-Trace-ID': ctx.traceId }\n  })\n  ```\n\n- [ ] **Useful Span Names**: Identify what happened\n  ```javascript\n  // üö® Generic name\n  tracer.startSpan('operation')\n  \n  // ‚úÖ Descriptive name\n  tracer.startSpan('db.users.findById')\n  ```\n\n### Alertability\n\n- [ ] **New Failure Modes**: Do new errors have signals?\n  ```javascript\n  // üö® Silent failure\n  if (error) return null\n  \n  // ‚úÖ Observable failure\n  if (error) {\n    logger.error('Processing failed', { error })\n    metrics.increment('processing.errors', { type: error.type })\n    return null\n  }\n  ```\n\n- [ ] **SLI Coverage**: Key user journeys measured\n  - Request success rate\n  - Request latency (p50, p95, p99)\n  - Error rate by type\n\n- [ ] **Runbook Hints**: What should on-call look for?\n  ```javascript\n  // ‚úÖ Helpful error message\n  throw new Error(\n    'Payment gateway timeout. ' +\n    'Check: 1) Gateway status page, 2) Network connectivity, ' +\n    '3) Recent deployments affecting payment flow'\n  )\n  ```\n\n### Dashboard & Alert Hygiene\n\n- [ ] **Dashboard Updated**: New features reflected\n- [ ] **Alerts Actionable**: Every alert has a response\n- [ ] **No Alert Fatigue**: Alerts are meaningful, not noisy\n\n## Output Format\n\n```markdown\n## Observability Review\n\n### Missing Signals üî¥\n\n| Gap | Location | Recommendation |\n|-----|----------|----------------|\n| No error metrics | `OrderService.ts` | Add error counter with type label |\n| No latency tracking | `PaymentGateway.ts` | Add histogram for API calls |\n\n### Logging Issues üü°\n\n| Issue | Location | Fix |\n|-------|----------|-----|\n| Secret in log | `AuthService.ts:42` | Mask password field |\n| Missing correlation ID | `WorkerJob.ts` | Add requestId to log context |\n| Too verbose | `DataProcessor.ts` | Change item logs to DEBUG level |\n\n### Recommendations üí°\n\n- Add span around external payment API call\n- Consider adding queue depth gauge\n- Add dashboard panel for new order flow\n```\n\n## Quick Reference\n\n```\n‚ñ° Logging\n  ‚ñ° Not too chatty?\n  ‚ñ° Correlation IDs present?\n  ‚ñ° No secrets?\n  ‚ñ° Structured format?\n  ‚ñ° Levels appropriate?\n  ‚ñ° Error context sufficient?\n\n‚ñ° Metrics\n  ‚ñ° Success/failure counters?\n  ‚ñ° Latency histograms?\n  ‚ñ° Saturation gauges?\n  ‚ñ° Rate counters?\n  ‚ñ° Cardinality bounded?\n\n‚ñ° Tracing\n  ‚ñ° External calls have spans?\n  ‚ñ° Context propagated?\n  ‚ñ° Span names descriptive?\n\n‚ñ° Alertability\n  ‚ñ° New failures observable?\n  ‚ñ° SLIs covered?\n  ‚ñ° Runbook hints included?\n```\n\n## Observability Checklist for New Features\n\nBefore shipping new code:\n\n1. **Can I tell if it's working?** ‚Üí Success/failure metrics\n2. **Can I tell how fast it is?** ‚Üí Latency histograms\n3. **Can I find a specific request?** ‚Üí Correlation IDs, traces\n4. **Can I debug a failure?** ‚Üí Error logs with context\n5. **Will I know if it breaks?** ‚Üí Alerts on key metrics\n",
        "skills/codereview-orchestrator/SKILL.md": "---\nname: codereview-orchestrator\ndescription: Triage and orchestrate code reviews. Analyzes PR intent, identifies touched surfaces, assesses risk, and routes to specialist skills. Does NOT perform detailed review - delegates to specialists. Supports full pipeline with \"Review PR <number>\" command.\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"3.0\"\n  persona: Review Coordinator\n---\n\n# Code Review Orchestrator Skill\n\nThe coordinator for code reviews. This skill **only** triages and routes - it does NOT perform detailed code review. All actual review work is delegated to specialist skills.\n\n## Quick Start: Full Pipeline\n\nTrigger a complete review by saying:\n\n```\nReview PR 123\nReview PR owner/repo#123\nReview PR https://github.com/owner/repo/pull/123\n```\n\nThis will:\n1. **Retrieve** the PR diff via GitHub API\n2. **Triage** and assess risk\n3. **Route** to appropriate specialist skills\n4. **Review** the code\n5. **Submit** the review to GitHub\n\n## Role\n\n- **Triage**: Classify the PR and assess risk level\n- **Route**: Select appropriate specialist skills\n- **Summarize**: Generate high-level PR summary\n- **Delegate**: Hand off to specialists for actual review\n- **Orchestrate**: Manage the full review pipeline (input ‚Üí review ‚Üí output)\n\n## What This Skill Does NOT Do\n\n‚ùå Find bugs  \n‚ùå Check security  \n‚ùå Review performance  \n‚ùå Validate tests  \n‚ùå Check style  \n\nAll of the above are delegated to specialist skills.\n\n## Full Pipeline Architecture\n\n```\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ                         INPUT SKILLS                             ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ  retrieve-diff-from-github-pr  ‚îÇ  retrieve-diff-from-commit     ‚îÇ\n‚îÇ  (GitHub PRs via API)          ‚îÇ  (Local git commits)           ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                                 ‚îÇ\n                                 ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ                    codereview-orchestrator                       ‚îÇ\n‚îÇ                   (Triage & Route - this skill)                  ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                                 ‚îÇ\n     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n     ‚ñº       ‚ñº       ‚ñº                       ‚ñº       ‚ñº       ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê             ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇsecurity ‚îÇ ‚îÇ api ‚îÇ ‚îÇdata ‚îÇ    ...      ‚îÇ  perf   ‚îÇ ‚îÇtest ‚îÇ ‚îÇstyle‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n     ‚îÇ       ‚îÇ       ‚îÇ                       ‚îÇ       ‚îÇ       ‚îÇ\n     ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n                                 ‚îÇ\n                                 ‚ñº\n‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê\n‚îÇ                        OUTPUT SKILLS                             ‚îÇ\n‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§\n‚îÇ                    submit-github-review                          ‚îÇ\n‚îÇ                 (Post review to GitHub API)                      ‚îÇ\n‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò\n```\n\n## Inputs\n\n| Input | Description |\n|-------|-------------|\n| `pr_reference` | PR number, short ref (owner/repo#123), or full URL |\n| `diff/PR` | The code changes to review (or retrieved automatically) |\n| `repo_context` | Language, framework, architecture patterns |\n| `focus_areas` | Optional: security, performance, correctness, etc. |\n| `auto_submit` | Whether to automatically submit review to GitHub (default: false) |\n\n## Outputs\n\n| Output | Description |\n|--------|-------------|\n| `summary` | Plain-English description of changes |\n| `touched_surfaces` | What parts of the system are affected |\n| `risk_assessment` | Overall risk level with justification |\n| `review_plan` | Which specialists to invoke and why |\n| `questions` | Clarifying questions for the author (if any) |\n\n## Step 1: Understand Intent\n\nAsk these questions (do NOT review the code):\n\n- What behavior change is intended?\n- Does the PR description explain the purpose?\n- Is this a feature, bugfix, refactor, or infrastructure change?\n\n## Step 2: Identify Touched Surfaces\n\nCategorize modified files into surfaces:\n\n| Surface | File Patterns | Risk Indicator |\n|---------|---------------|----------------|\n| **Auth** | `**/auth/**`, `**/login/**`, `**/session/**` | üî¥ High |\n| **API** | `**/api/**`, `**/routes/**`, `**/handlers/**` | üü° Medium |\n| **Database** | `**/migrations/**`, `**/models/**`, `**/schema/**` | üî¥ High |\n| **Business Logic** | `**/services/**`, `**/domain/**` | üü° Medium |\n| **Infrastructure** | `Dockerfile`, `*.yaml`, `terraform/**` | üü° Medium |\n| **Configuration** | `**/config/**`, `.env*`, `*.json` | üü° Medium |\n| **Tests** | `**/test/**`, `**/spec/**`, `**/*.test.*` | üü¢ Low |\n| **Documentation** | `*.md`, `**/docs/**` | üü¢ Low |\n| **Dependencies** | `package.json`, `requirements.txt`, `go.mod` | üü° Medium |\n\n## Step 3: Assess Risk\n\nRate overall risk based on:\n\n| Factor | High Risk | Low Risk |\n|--------|-----------|----------|\n| **Surfaces** | Auth, DB, payments | Docs, tests |\n| **Scope** | Many files, cross-cutting | Single file, isolated |\n| **Complexity** | New algorithms, state machines | Simple CRUD |\n| **Reversibility** | DB migrations, API changes | Internal refactors |\n\n## Step 4: Generate Review Plan\n\nSelect specialists based on touched surfaces:\n\n```yaml\nreview_plan:\n  # Always run\n  always:\n    - codereview-correctness   # Logic bugs\n    - codereview-style         # Readability\n  \n  # Conditional based on surfaces\n  conditional:\n    - skill: codereview-security\n      trigger: auth, input handling, secrets, external APIs\n      \n    - skill: codereview-api\n      trigger: routes, endpoints, schemas, contracts\n      \n    - skill: codereview-data\n      trigger: migrations, models, queries\n      \n    - skill: codereview-concurrency\n      trigger: async, workers, queues, locks\n      \n    - skill: codereview-performance\n      trigger: loops, queries, caching, I/O\n      \n    - skill: codereview-observability\n      trigger: logging, metrics, tracing\n      \n    - skill: codereview-testing\n      trigger: test files modified or missing\n      \n    - skill: codereview-config\n      trigger: config files, env vars, feature flags\n      \n    - skill: codereview-architect\n      trigger: core utilities, shared libraries, breaking changes\n```\n\n## Output Format\n\n```markdown\n## PR Summary\n\n[2-3 sentence description of what this PR does]\n\n## Touched Surfaces\n\n| Surface | Files | Risk |\n|---------|-------|------|\n| Auth | `auth/login.ts`, `auth/session.ts` | üî¥ High |\n| API | `routes/users.ts` | üü° Medium |\n| Tests | `tests/user.test.ts` | üü¢ Low |\n\n## Risk Assessment\n\n**Overall Risk: üü° MEDIUM**\n\n- üî¥ Touches authentication flow\n- üü° Modifies public API\n- üü¢ Has test coverage\n\n## Review Plan\n\n| Priority | Skill | Files | Reason |\n|----------|-------|-------|--------|\n| 1 | `codereview-security` | `auth/*` | Auth changes require security review |\n| 2 | `codereview-api` | `routes/*` | API contract changes |\n| 3 | `codereview-correctness` | All | Standard logic check |\n| 4 | `codereview-testing` | `tests/*` | Verify coverage |\n| 5 | `codereview-style` | All | Final readability pass |\n\n## Questions for Author\n\n1. [Only if something is genuinely unclear about intent]\n```\n\n## Specialist Skills Reference\n\n| Skill | Invoke When |\n|-------|-------------|\n| `codereview-security` | Auth, input parsing, secrets, external APIs |\n| `codereview-correctness` | All PRs - logic bugs, error handling |\n| `codereview-api` | API routes, schemas, contracts |\n| `codereview-data` | Database migrations, models, queries |\n| `codereview-concurrency` | Async code, workers, distributed systems |\n| `codereview-performance` | Loops, queries, caching, memory |\n| `codereview-observability` | Logging, metrics, tracing |\n| `codereview-testing` | Test files or code needing tests |\n| `codereview-config` | Config, env vars, feature flags |\n| `codereview-architect` | Core libs, shared code, breaking changes |\n| `codereview-style` | All PRs - final readability pass |\n\n## Quick Reference\n\n```\n‚ñ° Understand Intent\n  ‚ñ° What does this PR do?\n  ‚ñ° Feature / bugfix / refactor / infra?\n\n‚ñ° Identify Surfaces\n  ‚ñ° Which areas are touched?\n  ‚ñ° What's the risk level of each?\n\n‚ñ° Assess Risk\n  ‚ñ° Overall risk rating?\n  ‚ñ° Key risk factors?\n\n‚ñ° Generate Plan\n  ‚ñ° Which specialists needed?\n  ‚ñ° In what priority order?\n  ‚ñ° Why each specialist?\n```\n\n## Important\n\nThis skill is **only** for triage and routing. Once the review plan is generated, invoke the specialist skills to perform the actual review.\n\n---\n\n## Full Pipeline Execution\n\nWhen triggered with \"Review PR <number>\", execute the full pipeline:\n\n### Phase 1: Input (Retrieve Diff)\n\n```yaml\n# For GitHub PRs\nskill: retrieve-diff-from-github-pr\ninputs:\n  owner: <from PR reference>\n  repo: <from PR reference>\n  pull_number: <from PR reference>\noutputs:\n  - pr_info\n  - files\n  - diff\n  - commit_id  # Needed for submit phase\n```\n\n### Phase 2: Triage (This Skill)\n\nExecute Steps 1-4 above to generate the review plan.\n\n### Phase 3: Review (Specialist Skills)\n\nExecute each specialist skill in the review plan:\n\n```yaml\nfor each skill in review_plan:\n  invoke: <skill>\n  inputs:\n    diff: <from phase 1>\n    files: <relevant files for this skill>\n  collect: findings[]\n```\n\n### Phase 4: Output (Submit Review)\n\n```yaml\nskill: submit-github-review\ninputs:\n  owner: <from phase 1>\n  repo: <from phase 1>\n  pull_number: <from phase 1>\n  commit_id: <from phase 1>\n  findings: <aggregated from phase 3>\n  review_event: <determined by findings severity>\noutputs:\n  - review_url\n```\n\n### Pipeline Output\n\n```markdown\n## Review Complete\n\n**PR**: owner/repo#123\n**Review URL**: https://github.com/owner/repo/pull/123#pullrequestreview-12345\n\n### Summary\n\n| Severity | Count |\n|----------|-------|\n| üî¥ Blocker | 1 |\n| üü° Major | 2 |\n| üîµ Minor | 3 |\n| ‚ö™ Nit | 2 |\n\n**Action**: REQUEST_CHANGES\n\nView the full review on GitHub: [PR #123](https://github.com/owner/repo/pull/123)\n```\n\n## Input/Output Skills Reference\n\n| Skill | Type | Purpose |\n|-------|------|---------|\n| `retrieve-diff-from-commit` | Input | Get diff from local git commits |\n| `retrieve-diff-from-github-pr` | Input | Get diff from GitHub PR via API |\n| `submit-github-review` | Output | Post review to GitHub PR |\n",
        "skills/codereview-performance/SKILL.md": "---\nname: codereview-performance\ndescription: Performance and scalability analysis specialist. Identifies algorithmic inefficiencies, N+1 queries, memory leaks, and concurrency issues. Use when reviewing loops, database queries, file I/O, or high-concurrency code.\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"1.0\"\n  persona: Performance Engineer\n---\n\n# Code Review Performance Skill\n\nA performance specialist focused on optimization and resource management. This skill identifies code that will cause problems at scale.\n\n## Role\n\n- **Complexity Analysis**: Identify algorithmic inefficiencies\n- **Resource Management**: Find leaks and improper cleanup\n- **Concurrency Safety**: Detect race conditions and deadlocks\n\n## Persona\n\nYou are a senior performance engineer who thinks about what happens when the code runs 1 million times, with 1 million users, on 1 million records. You optimize for the realistic worst case, not the happy path.\n\n## Trigger Conditions\n\nInvoke this skill when code contains:\n- Loops (especially nested loops)\n- Database queries (especially in loops)\n- File I/O operations\n- Network requests\n- Large data transformations\n- Caching logic\n- Concurrent/parallel operations\n- Event listeners or subscriptions\n\n## Checklist\n\n### Algorithmic Complexity\n\n- [ ] **Nested Loops**: Identify O(n¬≤) or worse on potentially large datasets\n  ```javascript\n  // üö® O(n¬≤) - problematic if users/orders are large\n  users.forEach(user => {\n    orders.forEach(order => { ... })\n  })\n  ```\n\n- [ ] **Unnecessary Iterations**: Is the same collection iterated multiple times?\n  ```javascript\n  // üö® Three iterations when one would suffice\n  const filtered = items.filter(...)\n  const mapped = filtered.map(...)\n  const sorted = mapped.sort(...)\n  \n  // ‚úÖ Combined or use reduce\n  ```\n\n- [ ] **Early Exit**: Can loops exit early when result is found?\n  ```javascript\n  // üö® Continues after finding result\n  let result;\n  items.forEach(item => { if (match) result = item; })\n  \n  // ‚úÖ Exits early\n  const result = items.find(item => match)\n  ```\n\n- [ ] **Algorithm Choice**: Is there a better algorithm?\n  - Linear search ‚Üí Binary search (if sorted)\n  - Repeated lookups ‚Üí Hash map\n  - String concatenation in loop ‚Üí Array join\n\n### Database Performance\n\n- [ ] **N+1 Query Problem**: Is the database queried inside a loop?\n  ```javascript\n  // üö® N+1: 1 query for users, N queries for orders\n  const users = await getUsers()\n  for (const user of users) {\n    user.orders = await getOrdersForUser(user.id)\n  }\n  \n  // ‚úÖ Single query with JOIN or batch fetch\n  const users = await getUsersWithOrders()\n  ```\n\n- [ ] **Missing Indexes**: Does the query filter/sort on non-indexed columns?\n\n- [ ] **SELECT ***: Is the query fetching more columns than needed?\n\n- [ ] **Unbounded Queries**: Is there a LIMIT clause for potentially large result sets?\n\n- [ ] **Pagination**: For large datasets, is pagination implemented?\n\n### Memory Management\n\n- [ ] **Memory Leaks**: Are there objects accumulating without cleanup?\n  ```javascript\n  // üö® Listeners accumulate on each call\n  function setup() {\n    element.addEventListener('click', handler)\n  }\n  \n  // ‚úÖ Remove on cleanup\n  function cleanup() {\n    element.removeEventListener('click', handler)\n  }\n  ```\n\n- [ ] **Large Objects in Scope**: Are large objects held in closures or global scope?\n\n- [ ] **Stream vs Buffer**: For large files, is streaming used instead of loading into memory?\n  ```javascript\n  // üö® Loads entire file into memory\n  const content = fs.readFileSync(largeFile)\n  \n  // ‚úÖ Streams data\n  const stream = fs.createReadStream(largeFile)\n  ```\n\n- [ ] **Object Pooling**: For frequently created/destroyed objects, is pooling considered?\n\n### Resource Cleanup\n\n- [ ] **Database Connections**: Are connections returned to pool / closed?\n  ```javascript\n  // üö® Connection leak\n  const conn = await pool.getConnection()\n  const result = await conn.query(...)\n  // connection never released\n  \n  // ‚úÖ Always release\n  try {\n    const conn = await pool.getConnection()\n    return await conn.query(...)\n  } finally {\n    conn.release()\n  }\n  ```\n\n- [ ] **File Handles**: Are files closed after reading/writing?\n\n- [ ] **Event Subscriptions**: Are listeners removed when no longer needed?\n\n- [ ] **Timers**: Are setInterval/setTimeout cleared when component unmounts?\n\n### Caching\n\n- [ ] **Cache Invalidation**: When cached data is modified, is the cache updated?\n\n- [ ] **Cache Size**: Is there a maximum cache size or TTL?\n\n- [ ] **Cache Stampede**: Under high load, will all requests hit the database simultaneously?\n\n- [ ] **Stale Data**: Is it acceptable if cached data is slightly out of date?\n\n### Concurrency & Parallelism\n\n- [ ] **Race Conditions**: Can concurrent execution cause inconsistent state?\n  ```javascript\n  // üö® Race condition: read-modify-write\n  const count = await getCount()\n  await setCount(count + 1)\n  \n  // ‚úÖ Atomic operation\n  await incrementCount()\n  ```\n\n- [ ] **Deadlocks**: Can two operations wait for each other indefinitely?\n\n- [ ] **Promise.all Overload**: Is Promise.all used with unbounded arrays?\n  ```javascript\n  // üö® May open 10,000 connections at once\n  await Promise.all(items.map(item => fetchData(item)))\n  \n  // ‚úÖ Batch or limit concurrency\n  await pMap(items, fetchData, { concurrency: 10 })\n  ```\n\n- [ ] **Async in Loop**: Is async/await properly used in loops?\n  ```javascript\n  // üö® Sequential execution (slow)\n  for (const item of items) {\n    await processItem(item)\n  }\n  \n  // ‚úÖ Parallel execution (if order doesn't matter)\n  await Promise.all(items.map(processItem))\n  ```\n\n### Network & I/O\n\n- [ ] **Request Batching**: Can multiple requests be combined?\n\n- [ ] **Compression**: For large payloads, is compression enabled?\n\n- [ ] **Lazy Loading**: Are resources loaded only when needed?\n\n- [ ] **Debouncing/Throttling**: Are frequent events (scroll, resize, input) throttled?\n\n## Output Format\n\n```markdown\n## Performance Analysis\n\n### Critical Issues üî¥\n\n| Issue | Location | Impact | Recommendation |\n|-------|----------|--------|----------------|\n| N+1 Query | `users.ts:42` | O(n) DB calls | Use eager loading |\n| Unbounded loop | `process.ts:15` | O(n¬≤) complexity | Add pagination |\n\n### Warnings üü°\n\n| Issue | Location | Concern |\n|-------|----------|---------|\n| Large array in memory | `cache.ts:30` | May cause OOM at scale |\n| No connection pooling | `db.ts:10` | Connection exhaustion |\n\n### Optimization Opportunities üü¢\n\n- `utils.ts:50`: Could use Map instead of repeated Array.find()\n- `api.ts:25`: Responses could be gzip compressed\n\n### Estimated Impact\n\n| Metric | Current | After Fix |\n|--------|---------|-----------|\n| DB Queries per request | O(n) | O(1) |\n| Memory usage | O(n) | O(1) |\n| Response time | ~500ms | ~50ms |\n```\n\n## Quick Reference\n\n```\n‚ñ° Algorithmic Complexity\n  ‚ñ° No unnecessary O(n¬≤)?\n  ‚ñ° No redundant iterations?\n  ‚ñ° Early exit when possible?\n  ‚ñ° Optimal algorithm choice?\n\n‚ñ° Database\n  ‚ñ° No N+1 queries?\n  ‚ñ° Proper indexing?\n  ‚ñ° Bounded result sets?\n  ‚ñ° Pagination for large data?\n\n‚ñ° Memory\n  ‚ñ° No memory leaks?\n  ‚ñ° Streaming for large files?\n  ‚ñ° Closures don't hold large objects?\n\n‚ñ° Resource Cleanup\n  ‚ñ° Connections released?\n  ‚ñ° Files closed?\n  ‚ñ° Listeners removed?\n  ‚ñ° Timers cleared?\n\n‚ñ° Concurrency\n  ‚ñ° No race conditions?\n  ‚ñ° No deadlocks?\n  ‚ñ° Bounded parallelism?\n```\n\n## Common Patterns\n\n### Efficient Batch Processing\n```javascript\n// Process in batches to avoid memory issues\nasync function processBatch(items, batchSize = 100) {\n  for (let i = 0; i < items.length; i += batchSize) {\n    const batch = items.slice(i, i + batchSize)\n    await Promise.all(batch.map(process))\n  }\n}\n```\n\n### Connection Pool Pattern\n```javascript\n// Always release connections\nasync function withConnection(fn) {\n  const conn = await pool.getConnection()\n  try {\n    return await fn(conn)\n  } finally {\n    conn.release()\n  }\n}\n```\n\n### Debounce Pattern\n```javascript\n// Prevent excessive calls\nfunction debounce(fn, delay) {\n  let timeoutId\n  return (...args) => {\n    clearTimeout(timeoutId)\n    timeoutId = setTimeout(() => fn(...args), delay)\n  }\n}\n```\n",
        "skills/codereview-security/SKILL.md": "---\nname: codereview-security\ndescription: Zero-trust security analysis like Cursor BugBot. Focuses exclusively on finding exploitable vulnerabilities with high confidence (>95%). Use when reviewing files that handle input parsing, database queries, authentication, or external API calls.\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"1.0\"\n  persona: BugBot-style Security Sentinel\n---\n\n# Code Review Security Skill\n\nA \"paranoid\" security specialist that performs zero-trust analysis. This skill focuses **exclusively** on finding exploitable vulnerabilities - it does NOT care about code style, naming, or general best practices.\n\n## Role\n\n- **Silent Sentinel**: Only report issues with confidence > 95%\n- **Zero-Trust**: Assume all inputs are malicious\n- **Vulnerability Focus**: Find exploitable security issues\n\n## Persona\n\nYou are a senior application security engineer. Your ONLY goal is to find exploitable vulnerabilities. Be paranoid. Assume attackers will find any weakness.\n\n## Trigger Conditions\n\nInvoke this skill when files touch:\n- Input parsing (forms, query params, request bodies)\n- Database queries (SQL, NoSQL, ORM)\n- Authentication/Authorization logic\n- External API calls\n- File system operations\n- Command execution\n\n## Checklist\n\n### Input Validation\n\n- [ ] **SQL Injection**: Is all user input parameterized/bound before SQL queries?\n  - *Bad:* `query(\"SELECT * FROM users WHERE name = \" + input)`\n  - *Good:* `query(\"SELECT * FROM users WHERE name = ?\", [input])`\n\n- [ ] **XSS (Cross-Site Scripting)**: Is output HTML-encoded before rendering?\n  - *Bad:* `innerHTML = userInput`\n  - *Good:* `textContent = userInput` or use sanitization library\n\n- [ ] **Command Injection**: Are shell commands constructed with user input?\n  - *Bad:* `exec(\"ls \" + userPath)`\n  - *Good:* `execFile(\"ls\", [userPath])`\n\n- [ ] **Path Traversal**: Can user input escape intended directories?\n  - *Bad:* `readFile(baseDir + userInput)`\n  - *Good:* Validate path stays within allowed directory\n\n- [ ] **Boundary Checks**: Are inputs validated for length, type, and range?\n  - Buffer overflows, integer overflows, type confusion\n\n### Data Exposure\n\n- [ ] **Hardcoded Secrets**: Are API tokens, passwords, or keys in the code?\n  - Look for: AWS keys (`AKIA...`), private keys (`-----BEGIN`), API tokens\n\n- [ ] **Logging Leaks**: Does logging output expose PII or secrets?\n  - *Bad:* `console.log(\"User login:\", { email, password })`\n  - *Good:* `console.log(\"User login:\", { email, password: \"[REDACTED]\" })`\n\n- [ ] **Error Exposure**: Do error messages reveal internal system details?\n  - Stack traces, database schemas, internal paths\n\n- [ ] **Sensitive Data in URLs**: Are secrets passed via query parameters?\n  - Query params appear in logs, browser history, referrer headers\n\n### Access Control\n\n- [ ] **Auth Middleware**: Does every public endpoint enforce authentication?\n  - Look for missing `@RequireAuth`, `authenticate()`, or equivalent\n\n- [ ] **Authorization Check**: Is permission verified, not just authentication?\n  - User is logged in ‚â† User can access this resource\n\n- [ ] **IDOR (Insecure Direct Object Reference)**: Can users access resources they don't own?\n  - *Bad:* `getUser(req.params.userId)` without ownership check\n  - *Good:* `getUser(req.params.userId, { ownerId: req.user.id })`\n\n- [ ] **Privilege Escalation**: Can regular users access admin functions?\n\n### Cryptography\n\n- [ ] **Weak Algorithms**: Are deprecated crypto algorithms used?\n  - *Bad:* MD5, SHA1 for passwords; DES, RC4 for encryption\n  - *Good:* bcrypt/argon2 for passwords; AES-256-GCM for encryption\n\n- [ ] **Hardcoded IVs/Salts**: Are initialization vectors or salts static?\n\n- [ ] **Insecure Random**: Is `Math.random()` used for security purposes?\n  - Use crypto-secure random generators instead\n\n### Session & Cookies\n\n- [ ] **Session Fixation**: Is session regenerated after login?\n\n- [ ] **Cookie Flags**: Are security cookies missing `HttpOnly`, `Secure`, `SameSite`?\n\n- [ ] **JWT Issues**: Is JWT signature verified? Are sensitive claims in payload?\n\n### Server-Side Vulnerabilities\n\n- [ ] **SSRF (Server-Side Request Forgery)**: Can user control URLs the server fetches?\n  ```javascript\n  // üö® SSRF - user controls URL\n  const response = await fetch(req.body.url)\n  \n  // ‚úÖ Allowlist check\n  if (!isAllowedHost(req.body.url)) throw new Error('Invalid URL')\n  const response = await fetch(req.body.url)\n  ```\n\n- [ ] **Open Redirects**: Can user control redirect destination?\n  ```javascript\n  // üö® Open redirect\n  res.redirect(req.query.next)\n  \n  // ‚úÖ Validate redirect\n  const next = validateRedirectUrl(req.query.next) || '/home'\n  res.redirect(next)\n  ```\n\n- [ ] **Insecure Deserialization**: Is untrusted data deserialized unsafely?\n  ```javascript\n  // üö® Dangerous deserialization\n  const obj = eval(userInput)\n  const data = pickle.loads(untrustedData)\n  \n  // ‚úÖ Safe parsing\n  const obj = JSON.parse(userInput)  // JSON is safe\n  ```\n\n- [ ] **Template Injection**: Can user input reach template engines?\n  ```javascript\n  // üö® SSTI\n  const template = `Hello ${req.body.name}`\n  render(template)  // if template engine, dangerous\n  \n  // ‚úÖ Use data binding\n  render('Hello {{name}}', { name: req.body.name })\n  ```\n\n- [ ] **XXE (XML External Entities)**: Is XML parsing configured safely?\n  ```javascript\n  // üö® XXE vulnerable\n  parser.parse(xmlInput)\n  \n  // ‚úÖ Disable external entities\n  parser.parse(xmlInput, { noent: false, dtd: false })\n  ```\n\n### Dependency Security\n\n- [ ] **Known Vulnerabilities**: Are dependencies scanned?\n  ```bash\n  npm audit\n  pip-audit\n  snyk test\n  ```\n\n- [ ] **Typosquatting**: Are package names correct?\n  - `lodash` vs `loadash`\n  - `colors` vs `colour`\n\n## Output Format\n\nReturn findings in structured format. **Only report if confidence > 95%.**\n\n```json\n{\n  \"findings\": [\n    {\n      \"file\": \"path/to/file.ts\",\n      \"line\": 42,\n      \"severity\": \"CRITICAL\",\n      \"type\": \"SQL Injection\",\n      \"confidence\": \"98%\",\n      \"description\": \"User input is concatenated directly into SQL string.\",\n      \"vulnerable_code\": \"query(`SELECT * FROM users WHERE id = ${userId}`)\",\n      \"fix_suggestion\": \"Use parameterized query: query('SELECT * FROM users WHERE id = ?', [userId])\"\n    }\n  ]\n}\n```\n\n### Severity Levels\n\n| Severity | Criteria |\n|----------|----------|\n| **CRITICAL** | Remote code execution, SQL injection, auth bypass |\n| **HIGH** | XSS, IDOR, sensitive data exposure |\n| **MEDIUM** | Missing security headers, weak crypto |\n| **LOW** | Information disclosure, missing best practices |\n\n## Quick Reference\n\n```\n‚ñ° Input Validation\n  ‚ñ° SQL Injection - parameterized queries?\n  ‚ñ° XSS - output encoding?\n  ‚ñ° Command Injection - shell escaping?\n  ‚ñ° Path Traversal - directory containment?\n  ‚ñ° Boundary Checks - length/type/range?\n\n‚ñ° Data Exposure\n  ‚ñ° Hardcoded secrets?\n  ‚ñ° Logging leaks?\n  ‚ñ° Error message exposure?\n\n‚ñ° Access Control\n  ‚ñ° Auth on all endpoints?\n  ‚ñ° Authorization verified?\n  ‚ñ° IDOR possible?\n  ‚ñ° Privilege escalation?\n\n‚ñ° Crypto & Sessions\n  ‚ñ° Strong algorithms?\n  ‚ñ° Secure random?\n  ‚ñ° Cookie flags set?\n\n‚ñ° Server-Side\n  ‚ñ° SSRF - URL allowlist?\n  ‚ñ° Open redirects - validated?\n  ‚ñ° Deserialization - safe?\n  ‚ñ° Template injection - escaped?\n  ‚ñ° XXE - disabled?\n\n‚ñ° Dependencies\n  ‚ñ° No known vulnerabilities?\n  ‚ñ° Package names correct?\n```\n\n## Important Notes\n\n1. **High Confidence Only**: Do NOT report speculative issues. Only flag vulnerabilities you are >95% confident are exploitable.\n\n2. **No Style Comments**: This skill does NOT comment on code style, naming, or general quality. Security only.\n\n3. **Assume Malice**: Every input is potentially malicious. Every user is potentially an attacker.\n\n4. **Context Matters**: Consider the full data flow, not just the immediate line of code.\n\n## Regex Patterns for Secret Detection\n\n```regex\n# AWS Access Key\nAKIA[0-9A-Z]{16}\n\n# AWS Secret Key\n[0-9a-zA-Z/+]{40}\n\n# Private Key\n-----BEGIN (RSA |DSA |EC |OPENSSH )?PRIVATE KEY-----\n\n# Generic API Key\n[aA][pP][iI][-_]?[kK][eE][yY].*['\\\"][0-9a-zA-Z]{16,}['\\\"]\n\n# Generic Secret\n[sS][eE][cC][rR][eE][tT].*['\\\"][0-9a-zA-Z]{16,}['\\\"]\n```\n",
        "skills/codereview-style/SKILL.md": "---\nname: codereview-style\ndescription: Review code style, maintainability, and documentation. Checks readability, naming, modularity, abstractions, and documentation accuracy. Use as a final pass on all files.\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"1.0\"\n  persona: Code Quality Advocate\n---\n\n# Code Review Style Skill\n\nA specialist focused on code style, maintainability, and documentation. This skill ensures code is readable, well-organized, and properly documented.\n\n## Role\n\n- **Readability**: Ensure code is easy to understand\n- **Maintainability**: Verify code is easy to change\n- **Documentation**: Check docs are accurate and helpful\n\n## Persona\n\nYou are a senior engineer who maintains large codebases. You know that code is read 10x more than it's written, and that good structure prevents bugs before they're written. You value clarity over cleverness.\n\n## Checklist\n\n### Readability\n\n- [ ] **Meaningful Names**: Variables, functions, classes are descriptive\n  ```javascript\n  // üö® Cryptic names\n  const d = new Date()\n  const x = users.filter(u => u.a)\n  function proc(d) { ... }\n  \n  // ‚úÖ Descriptive names\n  const currentDate = new Date()\n  const activeUsers = users.filter(user => user.isActive)\n  function processPayment(paymentData) { ... }\n  ```\n\n- [ ] **Consistent Naming Style**: Follows codebase conventions\n  - camelCase, PascalCase, snake_case used consistently\n  - Acronyms handled consistently (userId vs userID)\n  - Prefixes/suffixes used consistently (is_, has_, _count)\n\n- [ ] **Function Size**: Functions do one thing well\n  ```javascript\n  // üö® Too long - does too many things\n  function processOrder(order) { /* 200 lines */ }\n  \n  // ‚úÖ Focused functions\n  function validateOrder(order) { ... }\n  function calculateTotal(order) { ... }\n  function processPayment(order) { ... }\n  ```\n\n- [ ] **Nesting Depth**: Not too deeply nested\n  ```javascript\n  // üö® Deep nesting - hard to follow\n  if (a) {\n    if (b) {\n      if (c) {\n        if (d) { ... }\n      }\n    }\n  }\n  \n  // ‚úÖ Early returns\n  if (!a) return\n  if (!b) return\n  if (!c) return\n  if (!d) return\n  // main logic here\n  ```\n\n- [ ] **Magic Numbers/Strings**: Use named constants\n  ```javascript\n  // üö® Magic values\n  if (status === 3) { ... }\n  setTimeout(fn, 86400000)\n  \n  // ‚úÖ Named constants\n  const STATUS_COMPLETED = 3\n  const ONE_DAY_MS = 24 * 60 * 60 * 1000\n  if (status === STATUS_COMPLETED) { ... }\n  setTimeout(fn, ONE_DAY_MS)\n  ```\n\n### Structure & Modularity\n\n- [ ] **Single Responsibility**: Each module/class does one thing\n  ```javascript\n  // üö® God class\n  class UserManager {\n    createUser() { ... }\n    sendEmail() { ... }\n    processPayment() { ... }\n    generateReport() { ... }\n  }\n  \n  // ‚úÖ Focused classes\n  class UserService { ... }\n  class EmailService { ... }\n  class PaymentService { ... }\n  ```\n\n- [ ] **Appropriate Boundaries**: Related code grouped together\n  - Files in appropriate directories\n  - Functions in appropriate modules\n  - Clear public vs private interfaces\n\n- [ ] **No Circular Dependencies**: Clean dependency graph\n\n- [ ] **DRY (Don't Repeat Yourself)**: No duplicated code\n  ```javascript\n  // üö® Duplicated logic\n  function createUser(data) { /* validation code */ }\n  function updateUser(data) { /* same validation code */ }\n  \n  // ‚úÖ Extracted common code\n  function validateUserData(data) { ... }\n  function createUser(data) { validateUserData(data); ... }\n  function updateUser(data) { validateUserData(data); ... }\n  ```\n\n### Abstractions\n\n- [ ] **Not Premature**: Abstractions solve real problems\n  ```javascript\n  // üö® Premature abstraction\n  class AbstractFactoryBuilderManager { ... }  // used once\n  \n  // ‚úÖ When needed\n  // Extract after seeing pattern 3+ times\n  ```\n\n- [ ] **Not Leaky**: Abstractions hide implementation details\n  ```javascript\n  // üö® Leaky abstraction\n  class Database {\n    getSQLConnection() { ... }  // exposes SQL\n  }\n  \n  // ‚úÖ Clean interface\n  class Database {\n    query(params) { ... }  // hides implementation\n  }\n  ```\n\n- [ ] **Appropriate Level**: Right level of abstraction\n  - Not too low-level (rewrite everywhere)\n  - Not too high-level (inflexible)\n\n### Dead Code & Cleanup\n\n- [ ] **No Dead Code**: Unused functions, variables removed\n  ```javascript\n  // üö® Dead code\n  function oldImplementation() { ... }  // never called\n  const UNUSED_CONSTANT = 42  // never referenced\n  ```\n\n- [ ] **No Commented-Out Code**: Remove or restore, don't leave\n  ```javascript\n  // üö® Commented-out code\n  // function oldVersion() {\n  //   return legacyBehavior()\n  // }\n  ```\n\n- [ ] **No Debug Artifacts**: console.log, debugger removed\n  ```javascript\n  // üö® Debug artifacts\n  console.log('DEBUG:', data)\n  debugger\n  ```\n\n- [ ] **No TODO Without Issue**: TODOs reference tickets\n  ```javascript\n  // üö® Orphan TODO\n  // TODO: fix this later\n  \n  // ‚úÖ Tracked TODO\n  // TODO(JIRA-123): Refactor when v2 API is ready\n  ```\n\n### Comments\n\n- [ ] **Comments Explain \"Why\"**: Not \"what\"\n  ```javascript\n  // üö® Explains what (code already says this)\n  // increment counter by 1\n  counter++\n  \n  // ‚úÖ Explains why\n  // Rate limit: max 100 requests per minute per user\n  counter++\n  ```\n\n- [ ] **Comments Are Accurate**: Match the code\n  ```javascript\n  // üö® Outdated comment\n  // Returns user's full name\n  function getDisplayName(user) {\n    return user.email  // actually returns email!\n  }\n  ```\n\n- [ ] **Self-Documenting When Possible**: Clear code > comments\n  ```javascript\n  // üö® Comment needed due to unclear code\n  // Check if user can edit\n  if (u.r === 1 || u.r === 2)\n  \n  // ‚úÖ Self-documenting\n  if (user.role === ADMIN || user.role === EDITOR)\n  ```\n\n### Documentation\n\n- [ ] **README Updated**: For significant changes\n- [ ] **API Docs Updated**: For public interface changes\n- [ ] **Migration Notes**: For breaking changes\n- [ ] **Examples Updated**: Still work with new code\n- [ ] **Changelog Entry**: If project uses changelogs\n\n## Output Format\n\n```markdown\n## Style Review\n\n### Readability Issues üü°\n\n| Issue | Location | Suggestion |\n|-------|----------|------------|\n| Cryptic variable name | `utils.ts:42` | Rename `d` to `currentDate` |\n| Deep nesting | `handler.ts:15` | Use early returns |\n| Magic number | `config.ts:30` | Extract `86400000` to `ONE_DAY_MS` |\n\n### Structure Issues üîµ\n\n| Issue | Location | Suggestion |\n|-------|----------|------------|\n| Large function | `processOrder()` | Split into validate, calculate, process |\n| Duplicated code | `validators.ts` | Extract common validation logic |\n\n### Documentation üìù\n\n| Gap | Location | Action |\n|-----|----------|--------|\n| Missing JSDoc | `public API function` | Add parameter/return docs |\n| Outdated README | `README.md` | Update for new config options |\n\n### Cleanup üßπ\n\n| Item | Location | Action |\n|------|----------|--------|\n| Dead code | `legacy.ts:100-150` | Remove unused function |\n| Debug log | `service.ts:42` | Remove console.log |\n```\n\n## Quick Reference\n\n```\n‚ñ° Readability\n  ‚ñ° Names meaningful?\n  ‚ñ° Style consistent?\n  ‚ñ° Functions focused?\n  ‚ñ° Nesting shallow?\n  ‚ñ° No magic values?\n\n‚ñ° Structure\n  ‚ñ° Single responsibility?\n  ‚ñ° Appropriate boundaries?\n  ‚ñ° No circular deps?\n  ‚ñ° DRY?\n\n‚ñ° Abstractions\n  ‚ñ° Not premature?\n  ‚ñ° Not leaky?\n  ‚ñ° Right level?\n\n‚ñ° Cleanup\n  ‚ñ° No dead code?\n  ‚ñ° No commented code?\n  ‚ñ° No debug artifacts?\n  ‚ñ° TODOs tracked?\n\n‚ñ° Comments\n  ‚ñ° Explain why?\n  ‚ñ° Are accurate?\n  ‚ñ° Self-documenting preferred?\n\n‚ñ° Documentation\n  ‚ñ° README updated?\n  ‚ñ° API docs updated?\n  ‚ñ° Examples work?\n```\n\n## Style is About Maintainability\n\nGood style isn't about personal preference. It's about:\n\n1. **Reducing cognitive load** ‚Üí Easier to understand\n2. **Enabling change** ‚Üí Easier to modify\n3. **Preventing bugs** ‚Üí Harder to make mistakes\n4. **Onboarding** ‚Üí Faster for new team members\n\n### The Test\n\nAsk: \"Will someone understand this code in 6 months?\"\n\nIf the answer is \"only if they read the whole file,\" the code needs work.\n",
        "skills/codereview-testing/SKILL.md": "---\nname: codereview-testing\ndescription: Review test coverage and quality. Analyzes unit tests, integration tests, determinism, and test design. Use when reviewing test files or code that should have tests.\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"1.0\"\n  persona: Test Engineer\n---\n\n# Code Review Testing Skill\n\nA specialist focused on test coverage and quality. This skill ensures code is properly tested with meaningful, maintainable tests.\n\n## Role\n\n- **Coverage Analysis**: Verify important paths are tested\n- **Quality Assessment**: Ensure tests are meaningful\n- **Flakiness Prevention**: Catch non-determinism\n\n## Persona\n\nYou are a test engineer who has seen test suites that give false confidence, flaky tests that waste hours, and missing tests that let bugs through. You know that bad tests are worse than no tests.\n\n## Checklist\n\n### Unit Test Coverage\n\n- [ ] **Core Logic Tested**: Business rules have tests\n  ```javascript\n  // ‚úÖ Core logic has unit test\n  describe('calculateDiscount', () => {\n    it('applies 10% for orders over $100', () => {\n      expect(calculateDiscount(150)).toBe(15)\n    })\n  })\n  ```\n\n- [ ] **Edge Cases Covered**: Boundaries and special values\n  ```javascript\n  // ‚úÖ Edge cases tested\n  describe('divide', () => {\n    it('handles zero divisor', () => {\n      expect(() => divide(10, 0)).toThrow('Division by zero')\n    })\n    it('handles negative numbers', () => {\n      expect(divide(-10, 2)).toBe(-5)\n    })\n  })\n  ```\n\n- [ ] **Error Paths Tested**: Failure scenarios verified\n  ```javascript\n  // ‚úÖ Error cases tested\n  it('throws NotFoundError for missing user', async () => {\n    await expect(getUser('missing')).rejects.toThrow(NotFoundError)\n  })\n  ```\n\n- [ ] **New Code Has Tests**: Additions are tested\n  ```javascript\n  // üö® New function without test\n  export function newFeature() { ... }\n  // Where's the test?\n  ```\n\n### Integration Test Coverage\n\n- [ ] **Boundaries Tested**: DB, network, queues\n  ```javascript\n  // ‚úÖ Integration test for DB\n  describe('UserRepository', () => {\n    it('persists and retrieves user', async () => {\n      await repo.save(user)\n      const found = await repo.findById(user.id)\n      expect(found).toEqual(user)\n    })\n  })\n  ```\n\n- [ ] **External Services Mocked**: When appropriate\n  ```javascript\n  // ‚úÖ External service mocked\n  beforeEach(() => {\n    nock('https://api.payment.com')\n      .post('/charge')\n      .reply(200, { id: 'charge_123' })\n  })\n  ```\n\n- [ ] **Contract Tests**: For service boundaries\n\n### Regression Tests\n\n- [ ] **Bug Class Tested**: Prevent recurrence\n  ```javascript\n  // ‚úÖ Regression test for fixed bug\n  it('handles special characters in username (fixes #1234)', () => {\n    expect(validateUsername(\"user's name\")).toBe(true)\n  })\n  ```\n\n- [ ] **Previously Broken Scenarios**: Have explicit tests\n\n### Test Determinism\n\n- [ ] **No Time Dependencies**: Tests don't depend on clock\n  ```javascript\n  // üö® Flaky - depends on current time\n  it('expires after 1 hour', () => {\n    const token = createToken()\n    expect(isExpired(token)).toBe(false)\n  })\n  \n  // ‚úÖ Deterministic - controls time\n  it('expires after 1 hour', () => {\n    jest.useFakeTimers()\n    const token = createToken()\n    jest.advanceTimersByTime(3600001)\n    expect(isExpired(token)).toBe(true)\n  })\n  ```\n\n- [ ] **No Random Dependencies**: Or random is seeded\n  ```javascript\n  // üö® Flaky - random behavior\n  it('generates valid token', () => {\n    expect(generateToken()).toMatch(/[a-z]+/)\n  })\n  \n  // ‚úÖ Deterministic - seeded random\n  it('generates valid token', () => {\n    jest.spyOn(Math, 'random').mockReturnValue(0.5)\n    expect(generateToken()).toBe('expected_value')\n  })\n  ```\n\n- [ ] **No Order Dependencies**: Tests run independently\n  ```javascript\n  // üö® Depends on previous test's state\n  it('creates user', () => { createdUserId = ... })\n  it('deletes user', () => { delete(createdUserId) })\n  \n  // ‚úÖ Independent tests\n  it('deletes user', () => {\n    const user = await createUser()  // own setup\n    await deleteUser(user.id)\n  })\n  ```\n\n- [ ] **No External Dependencies**: Network, files isolated\n  ```javascript\n  // üö® Depends on external service\n  it('fetches weather', async () => {\n    const weather = await fetchWeather('NYC')  // real API call\n  })\n  \n  // ‚úÖ Mocked external\n  it('fetches weather', async () => {\n    mockWeatherApi.onGet('/NYC').reply(200, { temp: 72 })\n    const weather = await fetchWeather('NYC')\n  })\n  ```\n\n### Test Quality\n\n- [ ] **Tests Behavior, Not Implementation**: Resilient to refactoring\n  ```javascript\n  // üö® Tests implementation\n  it('calls internal method', () => {\n    const spy = jest.spyOn(service, '_internalMethod')\n    service.process()\n    expect(spy).toHaveBeenCalled()\n  })\n  \n  // ‚úÖ Tests behavior\n  it('processes input correctly', () => {\n    const result = service.process(input)\n    expect(result).toEqual(expectedOutput)\n  })\n  ```\n\n- [ ] **Clear Test Names**: Describe what's tested\n  ```javascript\n  // üö® Unclear name\n  it('works', () => { ... })\n  it('test1', () => { ... })\n  \n  // ‚úÖ Clear description\n  it('returns empty array when no matches found', () => { ... })\n  it('throws ValidationError for invalid email format', () => { ... })\n  ```\n\n- [ ] **Arrange-Act-Assert Pattern**: Clear structure\n  ```javascript\n  it('calculates total with discount', () => {\n    // Arrange\n    const cart = new Cart([item1, item2])\n    const discount = new PercentDiscount(10)\n    \n    // Act\n    const total = cart.calculateTotal(discount)\n    \n    // Assert\n    expect(total).toBe(90)\n  })\n  ```\n\n- [ ] **Single Assertion Per Test**: Or logically related group\n  ```javascript\n  // üö® Too many assertions\n  it('does everything', () => {\n    expect(create()).toBeDefined()\n    expect(update()).toBe(true)\n    expect(delete()).toBe(true)\n    expect(list()).toEqual([])\n  })\n  \n  // ‚úÖ Focused tests\n  it('creates resource', () => { expect(create()).toBeDefined() })\n  it('updates resource', () => { expect(update()).toBe(true) })\n  ```\n\n### Test Maintainability\n\n- [ ] **No Magic Values**: Use constants or factories\n  ```javascript\n  // üö® Magic values\n  expect(result).toBe(42)\n  \n  // ‚úÖ Named constant\n  const EXPECTED_DISCOUNT_AMOUNT = 42\n  expect(result).toBe(EXPECTED_DISCOUNT_AMOUNT)\n  ```\n\n- [ ] **Test Fixtures/Factories**: Reusable test data\n  ```javascript\n  // ‚úÖ Test factory\n  const testUser = createTestUser({ role: 'admin' })\n  ```\n\n- [ ] **Proper Setup/Teardown**: Clean state between tests\n\n## Output Format\n\n```markdown\n## Testing Review\n\n### Missing Coverage üî¥\n\n| Code | Location | Test Needed |\n|------|----------|-------------|\n| Error handling | `UserService.ts:42` | Test for DB connection failure |\n| Edge case | `Calculator.ts:15` | Test for zero input |\n\n### Flaky Test Risks üü°\n\n| Risk | Test | Fix |\n|------|------|-----|\n| Time dependency | `token.test.ts:20` | Use fake timers |\n| Order dependency | `user.test.ts` | Add independent setup |\n\n### Quality Issues üí°\n\n| Issue | Test | Recommendation |\n|-------|------|----------------|\n| Tests implementation | `service.test.ts:45` | Test output not method calls |\n| Unclear name | `utils.test.ts:10` | Rename to describe behavior |\n```\n\n## Quick Reference\n\n```\n‚ñ° Coverage\n  ‚ñ° Core logic tested?\n  ‚ñ° Edge cases covered?\n  ‚ñ° Error paths tested?\n  ‚ñ° New code has tests?\n\n‚ñ° Integration\n  ‚ñ° Boundaries tested?\n  ‚ñ° External services mocked?\n  ‚ñ° Contracts verified?\n\n‚ñ° Determinism\n  ‚ñ° No time dependencies?\n  ‚ñ° No random dependencies?\n  ‚ñ° No order dependencies?\n  ‚ñ° No external dependencies?\n\n‚ñ° Quality\n  ‚ñ° Tests behavior not implementation?\n  ‚ñ° Clear test names?\n  ‚ñ° AAA pattern followed?\n  ‚ñ° Focused assertions?\n\n‚ñ° Maintainability\n  ‚ñ° No magic values?\n  ‚ñ° Factories for test data?\n  ‚ñ° Proper setup/teardown?\n```\n\n## Test Types Pyramid\n\n```\n         /\\\n        /  \\  E2E (few)\n       /----\\\n      /      \\  Integration (some)\n     /--------\\\n    /          \\  Unit (many)\n   /------------\\\n```\n\n- **Unit**: Fast, isolated, many\n- **Integration**: Test boundaries, moderate count\n- **E2E**: Slow, few critical paths\n",
        "skills/general-codereview/SKILL.md": "---\nname: general-codereview\ndescription: Perform thorough code reviews following Google's 5-step methodology. Use when reviewing pull requests, change lists, or any code changes to ensure quality, correctness, and maintainability.\nlicense: MIT\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"1.0\"\n  origin: \"Based on 5 steps to perform code reviews at Google (2013)\"\n---\n\n# General Code Review Skill\n\nA comprehensive code review methodology based on Google's engineering practices. Follow these 5 steps to perform effective and thorough code reviews.\n\n## Step 1: Pre-screen\n\nBefore diving into the code, perform a quick pre-screening:\n\n### Check Size\n\n- **Reasonable size**: A change list of ~300 lines of code is typically reasonable\n- **Too large**: Larger CLs should be strongly discouraged unless necessary\n  - Leave a comment asking if the CL can be broken down into smaller, logically complete parts\n  - Ask for the reason if breaking down is not possible\n- **Small is OK**: Even single-line changes are fine as long as they are logically complete\n\n### Verify You're the Right Reviewer\n\nAsk yourself:\n- Am I familiar enough with this code area?\n- Do I understand the language, environment, and context?\n- Is there someone better suited to review this?\n\nIf you're not the ideal reviewer but no one else is available, prepare to quickly learn about the unfamiliar aspects.\n\n## Step 2: Understand\n\nAfter pre-screening, focus on understanding the change from the author's perspective.\n\n### Purpose\n\nAsk: **\"Do I know the overall purpose of this CL?\"**\n\n- The purpose should be clearly stated in the CL description\n- If unclear, request clarification\n- Even self-explanatory code needs a clear description for future maintainers\n- Remember: even the author may need to refer back to the description later\n\n### Workflow Context\n\nAsk: **\"Was I expecting this CL? Does it match my expectations?\"**\n\nConsider:\n- Is this CL part of a larger project or design doc?\n- Does it align with the task distribution and design documentation?\n- Are there dependencies mentioned?\n  - Other changes that need to happen before this CL can function\n  - Other CLs that are blocked by this change\n\n### Design Decisions\n\nVerify that important design decisions are:\n- Documented in the code description\n- Explained with rationale when non-obvious\n\n## Step 3: Verify\n\nNow verify the implementation matches the stated intent.\n\n### Code-Description Alignment\n\n- **Verify the code does what the description says**\n- Flag any discrepancies between stated purpose and actual implementation\n\n### Test Coverage\n\nVerify relevant tests exist for:\n\n| Category | What to Check |\n|----------|---------------|\n| Design decisions | Tests that validate key architectural choices |\n| Important defaults | Tests for default values and their behavior |\n| Complex logic | Tests for intricate algorithms or business logic |\n| Edge cases | Zero, null, empty, boundary conditions, if-statement edges |\n\n## Step 4: Optimize\n\nLook for opportunities to improve the code's efficiency and maintainability.\n\n### Logic Optimization\n\n- Can the algorithm be simplified?\n- Are there unnecessary computations?\n- Is the control flow optimal?\n\n### Library Usage\n\n- Is the best library being used for this task?\n- Are there more appropriate or efficient alternatives?\n- Is the library being used correctly and efficiently?\n\n## Step 5: Check Style\n\nFinal pass for code style and conventions.\n\n### Style Checklist\n\n- [ ] Follows project/team coding standards\n- [ ] Consistent naming conventions\n- [ ] Proper formatting and indentation\n- [ ] Clear and helpful comments\n- [ ] No dead code or debugging artifacts\n\n---\n\n## Quick Reference Checklist\n\n```\n‚ñ° Pre-screen\n  ‚ñ° Size reasonable (~300 lines)?\n  ‚ñ° Am I the right reviewer?\n\n‚ñ° Understand\n  ‚ñ° Purpose clear in description?\n  ‚ñ° Expected in current workflow?\n  ‚ñ° Design decisions documented?\n\n‚ñ° Verify\n  ‚ñ° Code matches description?\n  ‚ñ° Tests cover design decisions?\n  ‚ñ° Tests cover defaults and edge cases?\n\n‚ñ° Optimize\n  ‚ñ° Logic optimizable?\n  ‚ñ° Library choices optimal?\n\n‚ñ° Check\n  ‚ñ° Style guidelines followed?\n```\n\n---\n\n*Acknowledgment: This methodology is based on reflections from working at Google, with thanks to mentors and teammates who helped improve these code review skills.*\n",
        "skills/retrieve-diff-from-commit/SKILL.md": "---\nname: retrieve-diff-from-commit\ndescription: Retrieve code diff from a local git commit. Use this as the first step in a code review pipeline when reviewing local commits.\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"1.0\"\n  type: input\n  requires: git\n---\n\n# Retrieve Diff from Commit Skill\n\nAn **input skill** that retrieves code diff from local git commits. This is the entry point for reviewing local changes before they are pushed.\n\n## Role\n\n- **Extract**: Get the diff content from a specific commit or range of commits\n- **Format**: Prepare the diff in a format suitable for code review\n- **Context**: Gather commit metadata (author, message, timestamp)\n\n## Inputs\n\n| Input | Required | Description |\n|-------|----------|-------------|\n| `commit_sha` | Optional | Specific commit SHA to review (defaults to HEAD) |\n| `commit_range` | Optional | Range of commits (e.g., `main..HEAD`, `HEAD~3..HEAD`) |\n| `base_branch` | Optional | Compare current branch against base (e.g., `main`, `develop`) |\n\n## Outputs\n\n| Output | Description |\n|--------|-------------|\n| `diff` | The unified diff content |\n| `files_changed` | List of files modified with change type (added/modified/deleted) |\n| `commit_info` | Commit metadata (SHA, author, message, timestamp) |\n| `stats` | Summary statistics (lines added, deleted, files changed) |\n\n## Usage\n\n### Review Single Commit\n\n```bash\n# Get diff for specific commit\ngit show <commit_sha> --format=\"%H%n%an%n%ae%n%s%n%b\" --stat\n\n# Get unified diff\ngit diff <commit_sha>^..<commit_sha>\n```\n\n### Review Commit Range\n\n```bash\n# Get diff for range\ngit diff <base_commit>..<head_commit>\n\n# Get list of commits in range\ngit log --oneline <base_commit>..<head_commit>\n```\n\n### Review Branch Against Base\n\n```bash\n# Compare feature branch to main\ngit diff main...HEAD\n\n# Get merge-base\ngit merge-base main HEAD\n```\n\n## Step 1: Identify the Scope\n\nDetermine what to review:\n\n| Scenario | Command | Use Case |\n|----------|---------|----------|\n| **Last commit** | `git diff HEAD~1..HEAD` | Quick review of latest change |\n| **All uncommitted** | `git diff` | Review before committing |\n| **Staged changes** | `git diff --cached` | Review what will be committed |\n| **Branch diff** | `git diff main...HEAD` | Full feature review |\n| **Specific commit** | `git show <sha>` | Review single commit |\n\n## Step 2: Extract Diff\n\nExecute the appropriate git command:\n\n```bash\n# For comprehensive diff with context\ngit diff --unified=5 <base>..<head>\n\n# Include file stats\ngit diff --stat <base>..<head>\n\n# Get list of changed files\ngit diff --name-status <base>..<head>\n```\n\n## Step 3: Gather Metadata\n\nCollect commit information:\n\n```bash\n# Get commit details\ngit log --format=\"%H|%an|%ae|%at|%s\" <base>..<head>\n\n# Get file change summary\ngit diff --shortstat <base>..<head>\n```\n\n## Step 4: Format Output\n\nStructure the output for the review pipeline:\n\n```markdown\n## Diff Retrieved\n\n**Commit Range**: `<base>..<head>`\n**Files Changed**: X\n**Lines Added**: +Y\n**Lines Deleted**: -Z\n\n### Files\n\n| Status | File |\n|--------|------|\n| M | src/auth/login.ts |\n| A | src/utils/helper.ts |\n| D | src/deprecated.ts |\n\n### Diff Content\n\n\\`\\`\\`diff\n<unified diff content>\n\\`\\`\\`\n\n### Commit Info\n\n| Field | Value |\n|-------|-------|\n| SHA | abc123... |\n| Author | John Doe <john@example.com> |\n| Date | 2024-01-15 10:30:00 |\n| Message | feat: add login functionality |\n```\n\n## Output Format\n\n```json\n{\n  \"source\": \"local-git\",\n  \"commit_range\": {\n    \"base\": \"<base_sha>\",\n    \"head\": \"<head_sha>\"\n  },\n  \"stats\": {\n    \"files_changed\": 5,\n    \"insertions\": 120,\n    \"deletions\": 45\n  },\n  \"files\": [\n    {\n      \"path\": \"src/auth/login.ts\",\n      \"status\": \"modified\",\n      \"additions\": 50,\n      \"deletions\": 10\n    }\n  ],\n  \"commits\": [\n    {\n      \"sha\": \"abc123\",\n      \"author\": \"John Doe\",\n      \"email\": \"john@example.com\",\n      \"timestamp\": \"2024-01-15T10:30:00Z\",\n      \"message\": \"feat: add login functionality\"\n    }\n  ],\n  \"diff\": \"<unified diff content>\"\n}\n```\n\n## Integration with Review Pipeline\n\nAfter retrieving the diff, pass the output to:\n\n1. **codereview-orchestrator** - For triage and routing\n2. Then to appropriate specialist skills based on the triage\n\n## Quick Reference\n\n```\n‚ñ° Identify Scope\n  ‚ñ° Single commit, range, or branch?\n  ‚ñ° Committed or uncommitted?\n\n‚ñ° Extract Diff\n  ‚ñ° Run appropriate git diff command\n  ‚ñ° Include sufficient context (--unified=5)\n\n‚ñ° Gather Metadata\n  ‚ñ° Commit info (SHA, author, message)\n  ‚ñ° File statistics\n\n‚ñ° Format Output\n  ‚ñ° Structure for review pipeline\n  ‚ñ° Include all necessary context\n```\n\n## Example Usage in Pipeline\n\n```\n1. retrieve-diff-from-commit (this skill)\n   ‚Üì\n2. codereview-orchestrator (triage)\n   ‚Üì\n3. Specialist skills (review)\n   ‚Üì\n4. Output formatted findings\n```\n",
        "skills/retrieve-diff-from-github-pr/SKILL.md": "---\nname: retrieve-diff-from-github-pr\ndescription: Retrieve code diff from a GitHub Pull Request via GitHub API. Use this as the first step in a code review pipeline when reviewing GitHub PRs.\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"1.0\"\n  type: input\n  requires: github-api\n---\n\n# Retrieve Diff from GitHub PR Skill\n\nAn **input skill** that retrieves code diff and PR metadata from GitHub via the API. This is the entry point for reviewing GitHub Pull Requests.\n\n## Role\n\n- **Fetch**: Get PR details and diff via GitHub API\n- **Extract**: Parse changed files and their diffs\n- **Context**: Gather PR metadata (title, description, author, reviews)\n\n## Inputs\n\n| Input | Required | Description |\n|-------|----------|-------------|\n| `owner` | Yes | Repository owner (username or organization) |\n| `repo` | Yes | Repository name |\n| `pull_number` | Yes | Pull Request number |\n\n## Outputs\n\n| Output | Description |\n|--------|-------------|\n| `pr_info` | PR metadata (title, description, author, state, labels) |\n| `files` | List of changed files with patches |\n| `commits` | List of commits in the PR |\n| `base_ref` | Base branch reference |\n| `head_ref` | Head branch reference |\n| `diff` | Full unified diff content |\n\n## Required MCP Tools\n\nThis skill uses the GitHub MCP server with the following tools:\n\n| Tool | Purpose |\n|------|---------|\n| `get_pull_request` | Get PR details (title, body, state, author) |\n| `get_pull_request_files` | Get list of changed files with patches |\n\n## Step 1: Parse PR Reference\n\nAccept PR reference in various formats:\n\n| Format | Example | Parsing |\n|--------|---------|---------|\n| **Full URL** | `https://github.com/owner/repo/pull/123` | Extract owner, repo, pull_number |\n| **Short reference** | `owner/repo#123` | Split on `/` and `#` |\n| **Number only** | `123` | Requires owner/repo from context |\n\n```\nRegex for URL: github\\.com/([^/]+)/([^/]+)/pull/(\\d+)\nRegex for short: ([^/]+)/([^#]+)#(\\d+)\n```\n\n## Step 2: Fetch PR Details\n\nUse the GitHub MCP tool to get PR information:\n\n```json\n{\n  \"tool\": \"get_pull_request\",\n  \"server\": \"user-github\",\n  \"arguments\": {\n    \"owner\": \"<owner>\",\n    \"repo\": \"<repo>\",\n    \"pull_number\": <number>\n  }\n}\n```\n\nThis returns:\n- PR title and description\n- Author information\n- Base and head branches\n- State (open/closed/merged)\n- Labels and reviewers\n- Head commit SHA (needed for submitting review)\n\n## Step 3: Fetch Changed Files\n\nUse the GitHub MCP tool to get file changes:\n\n```json\n{\n  \"tool\": \"get_pull_request_files\",\n  \"server\": \"user-github\",\n  \"arguments\": {\n    \"owner\": \"<owner>\",\n    \"repo\": \"<repo>\",\n    \"pull_number\": <number>\n  }\n}\n```\n\nThis returns for each file:\n- `filename`: Path to the file\n- `status`: added, removed, modified, renamed\n- `additions`: Lines added\n- `deletions`: Lines deleted\n- `patch`: Unified diff patch for the file\n\n## Step 4: Format Output\n\nStructure the output for the review pipeline:\n\n```markdown\n## PR Retrieved\n\n**Repository**: owner/repo\n**PR #**: 123\n**Title**: feat: add user authentication\n\n### PR Info\n\n| Field | Value |\n|-------|-------|\n| Author | @username |\n| State | open |\n| Base | main |\n| Head | feature/auth |\n| Commits | 3 |\n| Changed Files | 5 |\n\n### Description\n\n<PR description content>\n\n### Files Changed\n\n| Status | File | +/- |\n|--------|------|-----|\n| modified | src/auth/login.ts | +50/-10 |\n| added | src/utils/helper.ts | +30/-0 |\n| deleted | src/deprecated.ts | +0/-25 |\n\n### Diff Content\n\n<unified diff for each file>\n```\n\n## Output Format\n\n```json\n{\n  \"source\": \"github-pr\",\n  \"repository\": {\n    \"owner\": \"owner\",\n    \"repo\": \"repo\"\n  },\n  \"pull_request\": {\n    \"number\": 123,\n    \"title\": \"feat: add user authentication\",\n    \"body\": \"PR description...\",\n    \"author\": \"username\",\n    \"state\": \"open\",\n    \"base\": {\n      \"ref\": \"main\",\n      \"sha\": \"abc123\"\n    },\n    \"head\": {\n      \"ref\": \"feature/auth\",\n      \"sha\": \"def456\"\n    },\n    \"labels\": [\"enhancement\"],\n    \"created_at\": \"2024-01-15T10:30:00Z\",\n    \"updated_at\": \"2024-01-15T12:00:00Z\"\n  },\n  \"stats\": {\n    \"files_changed\": 5,\n    \"additions\": 120,\n    \"deletions\": 45,\n    \"commits\": 3\n  },\n  \"files\": [\n    {\n      \"path\": \"src/auth/login.ts\",\n      \"status\": \"modified\",\n      \"additions\": 50,\n      \"deletions\": 10,\n      \"patch\": \"@@ -1,10 +1,50 @@\\n...\"\n    }\n  ],\n  \"diff\": \"<combined unified diff>\"\n}\n```\n\n## Integration with Review Pipeline\n\nAfter retrieving the PR diff, pass the output to:\n\n1. **codereview-orchestrator** - For triage and routing\n2. Then to appropriate specialist skills based on the triage\n3. Finally to **submit-github-review** to post the review\n\n## Quick Reference\n\n```\n‚ñ° Parse PR Reference\n  ‚ñ° Extract owner, repo, pull_number\n  ‚ñ° Handle URL or short format\n\n‚ñ° Fetch PR Details\n  ‚ñ° Call get_pull_request MCP tool\n  ‚ñ° Extract metadata and head SHA\n\n‚ñ° Fetch Changed Files\n  ‚ñ° Call get_pull_request_files MCP tool\n  ‚ñ° Get patches for all files\n\n‚ñ° Format Output\n  ‚ñ° Structure for review pipeline\n  ‚ñ° Include commit SHA for review submission\n```\n\n## Example Usage in Pipeline\n\n```\n1. retrieve-diff-from-github-pr (this skill)\n   ‚Üì\n2. codereview-orchestrator (triage)\n   ‚Üì\n3. Specialist skills (review)\n   ‚Üì\n4. submit-github-review (post review)\n```\n\n## Error Handling\n\n| Error | Cause | Resolution |\n|-------|-------|------------|\n| 404 Not Found | PR doesn't exist or no access | Verify PR number and permissions |\n| 403 Forbidden | Rate limited or no auth | Check GitHub token |\n| Invalid format | Can't parse PR reference | Use format: owner/repo#number |\n",
        "skills/submit-github-review/SKILL.md": "---\nname: submit-github-review\ndescription: Submit a code review to GitHub via the GitHub API. Use this as the final step in a code review pipeline to post review findings to a PR.\nmetadata:\n  author: Zainan Victor Zhou\n  version: \"1.0\"\n  type: output\n  requires: github-api\n---\n\n# Submit GitHub Review Skill\n\nAn **output skill** that submits code review findings to GitHub via the API. This is the final step in the review pipeline, posting the review to the PR.\n\n## Role\n\n- **Format**: Transform review findings into GitHub review format\n- **Submit**: Post the review via GitHub API\n- **Annotate**: Add inline comments to specific lines\n\n## Inputs\n\n| Input | Required | Description |\n|-------|----------|-------------|\n| `owner` | Yes | Repository owner (username or organization) |\n| `repo` | Yes | Repository name |\n| `pull_number` | Yes | Pull Request number |\n| `commit_id` | Yes | SHA of the commit to review (from retrieve-diff-from-github-pr) |\n| `findings` | Yes | Array of review findings from specialist skills |\n| `review_event` | Optional | APPROVE, REQUEST_CHANGES, or COMMENT (default: COMMENT) |\n\n## Outputs\n\n| Output | Description |\n|--------|-------------|\n| `review_id` | ID of the created review |\n| `review_url` | URL to view the review |\n| `comments_posted` | Number of inline comments posted |\n\n## Required MCP Tools\n\nThis skill uses the GitHub MCP server with:\n\n| Tool | Purpose |\n|------|---------|\n| `create_pull_request_review` | Submit the review with body and inline comments |\n\n## Step 1: Aggregate Findings\n\nCollect all findings from specialist skills:\n\n```json\n{\n  \"findings\": [\n    {\n      \"severity\": \"blocker\",\n      \"category\": \"security\",\n      \"evidence\": {\n        \"file\": \"src/auth/login.ts\",\n        \"line\": 42,\n        \"snippet\": \"password = req.body.password\"\n      },\n      \"impact\": \"Password logged in plaintext\",\n      \"fix\": \"Remove logging or hash before logging\",\n      \"test\": \"Check logs for sensitive data\"\n    }\n  ]\n}\n```\n\n## Step 2: Determine Review Event\n\nBased on findings severity, determine the review action:\n\n| Findings | Event | Rationale |\n|----------|-------|-----------|\n| Any **blocker** | `REQUEST_CHANGES` | PR should not be merged |\n| Any **major** | `REQUEST_CHANGES` | Significant issues need fixing |\n| Only **minor/nit** | `COMMENT` | Suggestions, not blocking |\n| No issues | `APPROVE` | PR looks good |\n\n## Step 3: Format Review Body\n\nCreate the review summary:\n\n```markdown\n## Code Review Summary\n\n### üî¥ Blockers (X)\n| File | Line | Issue |\n|------|------|-------|\n| src/auth/login.ts | 42 | SQL injection vulnerability |\n\n### üü° Major (X)\n| File | Line | Issue |\n|------|------|-------|\n| src/api/users.ts | 15 | Missing error handling |\n\n### üîµ Minor (X)\n- Consider adding JSDoc to public functions\n- Unused import on line 3\n\n### üìã Nits (X)\n- Formatting: extra blank line at EOF\n\n---\n\n*Reviewed by codereview-skills*\n```\n\n## Step 4: Format Inline Comments\n\nConvert findings to GitHub inline comments:\n\n```json\n{\n  \"comments\": [\n    {\n      \"path\": \"src/auth/login.ts\",\n      \"line\": 42,\n      \"body\": \"üî¥ **Security**: SQL injection vulnerability\\n\\n```suggestion\\nconst user = await db.query('SELECT * FROM users WHERE id = ?', [userId]);\\n```\\n\\n**Impact**: Attacker can execute arbitrary SQL\\n**Fix**: Use parameterized queries\"\n    }\n  ]\n}\n```\n\n### Comment Format\n\n```markdown\n<severity_emoji> **<category>**: <title>\n\n<description>\n\n```suggestion\n<suggested fix if applicable>\n```\n\n**Impact**: <what breaks or the risk>\n**Fix**: <how to fix it>\n```\n\nSeverity emojis:\n- üî¥ Blocker\n- üü° Major\n- üîµ Minor\n- ‚ö™ Nit\n\n## Step 5: Submit Review\n\nUse the GitHub MCP tool:\n\n```json\n{\n  \"tool\": \"create_pull_request_review\",\n  \"server\": \"user-github\",\n  \"arguments\": {\n    \"owner\": \"<owner>\",\n    \"repo\": \"<repo>\",\n    \"pull_number\": <number>,\n    \"commit_id\": \"<sha>\",\n    \"body\": \"<review summary>\",\n    \"event\": \"REQUEST_CHANGES\",\n    \"comments\": [\n      {\n        \"path\": \"src/auth/login.ts\",\n        \"line\": 42,\n        \"body\": \"üî¥ **Security**: SQL injection...\"\n      }\n    ]\n  }\n}\n```\n\n## Output Format\n\n```json\n{\n  \"status\": \"success\",\n  \"review\": {\n    \"id\": 12345,\n    \"url\": \"https://github.com/owner/repo/pull/123#pullrequestreview-12345\",\n    \"event\": \"REQUEST_CHANGES\",\n    \"body\": \"## Code Review Summary...\",\n    \"comments_count\": 5\n  },\n  \"summary\": {\n    \"blockers\": 1,\n    \"major\": 2,\n    \"minor\": 3,\n    \"nits\": 2,\n    \"total\": 8\n  }\n}\n```\n\n## Full Pipeline Integration\n\nThis skill is the final step in the review pipeline:\n\n```\n1. retrieve-diff-from-github-pr\n   ‚Üì (PR info + diff + commit_id)\n2. codereview-orchestrator\n   ‚Üì (triage + routing plan)\n3. Specialist skills (parallel or sequential)\n   ‚Üì (findings array)\n4. submit-github-review (this skill)\n   ‚Üì (posted review)\n5. Return URL to user\n```\n\n## Quick Reference\n\n```\n‚ñ° Aggregate Findings\n  ‚ñ° Collect from all specialist skills\n  ‚ñ° Deduplicate if needed\n\n‚ñ° Determine Event\n  ‚ñ° Any blockers/major ‚Üí REQUEST_CHANGES\n  ‚ñ° Only minor/nit ‚Üí COMMENT\n  ‚ñ° No issues ‚Üí APPROVE\n\n‚ñ° Format Body\n  ‚ñ° Summary with severity breakdown\n  ‚ñ° Table of issues by severity\n\n‚ñ° Format Comments\n  ‚ñ° Convert findings to inline comments\n  ‚ñ° Use line numbers from evidence\n\n‚ñ° Submit Review\n  ‚ñ° Call create_pull_request_review\n  ‚ñ° Return review URL\n```\n\n## Error Handling\n\n| Error | Cause | Resolution |\n|-------|-------|------------|\n| 422 Invalid | Line doesn't exist in diff | Use position instead of line |\n| 404 Not Found | PR or commit doesn't exist | Verify PR number and commit SHA |\n| 403 Forbidden | No permission to review | Check GitHub token permissions |\n\n## Tips\n\n1. **Commit ID**: Always use the head commit SHA from `retrieve-diff-from-github-pr`\n2. **Line vs Position**: `line` refers to the line in the new file, `position` refers to the position in the diff hunk\n3. **Batch Comments**: Submit all comments in one review to avoid notification spam\n4. **Suggestion Blocks**: Use GitHub's suggestion syntax for easy one-click fixes\n"
      },
      "plugins": [
        {
          "name": "codereview",
          "source": "./",
          "description": "Claude Skills for Code Review",
          "version": "1.0.0",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add xinbenlv/codereview-skills",
            "/plugin install codereview@codereview-skills"
          ]
        }
      ]
    }
  ]
}