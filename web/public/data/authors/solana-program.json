{
  "author": {
    "id": "solana-program",
    "display_name": "Solana Program",
    "avatar_url": "https://avatars.githubusercontent.com/u/161719468?v=4"
  },
  "marketplaces": [
    {
      "name": "escrow-plugins",
      "version": null,
      "description": "Escrow program plugins for Claude Code",
      "repo_full_name": "solana-program/escrow",
      "repo_url": "https://github.com/solana-program/escrow",
      "repo_description": "Escrow Program",
      "signals": {
        "stars": 2,
        "forks": 0,
        "pushed_at": "2026-02-04T18:23:06Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n    \"name\": \"escrow-plugins\",\n    \"description\": \"Escrow program plugins for Claude Code\",\n    \"owner\": {\n        \"name\": \"Solana Foundation\"\n    },\n    \"plugins\": [\n        {\n            \"name\": \"escrow-extension-generator\",\n            \"description\": \"Generate new escrow program extensions with state, instructions, events, tests, and validation\",\n            \"source\": \"./.claude-plugin/escrow-extension-generator\"\n        }\n    ]\n}\n",
        "README.md": "# Escrow Program\n\n[![License: MIT](https://img.shields.io/badge/License-MIT-blue.svg)](LICENSE)\n[![Built with Pinocchio](https://img.shields.io/badge/Built%20with-Pinocchio-purple)](https://github.com/solana-program/pinocchio)\n[![Solana](https://img.shields.io/badge/Solana-Devnet-green)](https://solana.com)\n\n> **SECURITY NOTICE**: This program has not been audited. Use at your own risk. Not recommended for production use with real funds without a thorough security review.\n\n## Program ID\n\n```\nEscrowae7RaUfNn4oEZHywMXE5zWzYCXenwrCDaEoifg\n```\n\n## Deployments\n\n| Network                                                                                                   | Program ID                                     |\n| --------------------------------------------------------------------------------------------------------- | ---------------------------------------------- |\n| [Devnet](https://explorer.solana.com/address/Escrowae7RaUfNn4oEZHywMXE5zWzYCXenwrCDaEoifg?cluster=devnet) | `Escrowae7RaUfNn4oEZHywMXE5zWzYCXenwrCDaEoifg` |\n\n## Overview\n\nA configurable escrow program for Solana that enables receipt-based token deposits and withdrawals. Admins create escrows and allowlist specific mints, while depositors receive receipts that can be redeemed after optional lock mechanisms (e.g., timelocks, hooks, etc.) are satisfied.\n\n## Key Features\n\n- **Receipt-based deposits** - Each deposit creates a unique receipt PDA for tracking\n- **Per-escrow mint allowlisting** - Admins control which tokens can be deposited\n- **Token-2022 extension blocking** - Optionally block mints with specific extensions (PermanentDelegate, NonTransferable, Pausable, etc.)\n- **Configurable timelocks** - Set lock durations that must pass before withdrawals\n- **Custom hook programs** - Invoke external programs pre/post deposit and withdrawal\n\n## Account Types\n\n| Account          | PDA Seeds                                            | Description                                                 |\n| ---------------- | ---------------------------------------------------- | ----------------------------------------------------------- |\n| Escrow           | `[\"escrow\", escrow_seed]`                            | Main escrow config (admin, bump)                            |\n| Receipt          | `[\"receipt\", escrow, depositor, mint, receipt_seed]` | Deposit record with amount and timestamp                    |\n| AllowedMint      | `[\"allowed_mint\", escrow, mint]`                     | Marker that a mint is allowed                               |\n| EscrowExtensions | `[\"extensions\", escrow]`                             | TLV-encoded extensions (timelock, hook, blocked extensions) |\n\n## Workflow\n\n```mermaid\nsequenceDiagram\n    participant Admin\n    participant Program\n    participant Accounts\n\n    Admin->>Program: CreatesEscrow\n    Program->>Accounts: create Escrow PDA\n\n    Admin->>Program: AllowMint\n    Program->>Accounts: create AllowedMint PDA + Vault\n\n    Admin-->>Program: AddTimelock (optional)\n    Program-->>Accounts: create Extensions PDA\n\n    Admin-->>Program: SetHook (optional)\n    Program-->>Accounts: create Extensions PDA\n```\n\n```mermaid\nsequenceDiagram\n    participant Depositor\n    participant Program\n    participant Accounts\n\n    Depositor->>Program: Deposit\n    Program->>Accounts: transfer to Vault\n    Program->>Accounts: create Receipt PDA\n\n    Note over Depositor,Accounts: timelock passes\n\n    Depositor->>Program: Withdraw\n    Program->>Accounts: verify Receipt\n    Program->>Accounts: verify Hooks\n    Program->>Depositor: transfer tokens\n    Program->>Accounts: close Receipt\n```\n\n## Documentation\n\n- [Program Overview](docs/PROGRAM_OVERVIEW.md) - Instructions, accounts, and technical reference\n- [CU Benchmarks](docs/CU_BENCHMARKS.md) - Compute unit usage per instruction\n- [Improvements](docs/IMPROVEMENTS.md) - Possible future enhancements\n\n## Local Development\n\n### Prerequisites\n\n- Rust\n- Node.js (see `.nvmrc`)\n- pnpm (see `package.json` `packageManager`)\n- Solana CLI\n\nAll can be conveniently installed via the [Solana CLI Quick Install](https://solana.com/docs/intro/installation).\n\n### Client Examples\n\nCheck out the [TypeScript demo](examples/typescript/escrow-demo/README.md) for a complete example of the escrow program in action.\n\n### Build & Test\n\n```bash\n# Install dependencies\njust install\n\n# Full build (IDL + clients + program)\njust build\n\n# Run integration tests\njust integration-test\n\n# Format and lint\njust fmt\n```\n\n## Tech Stack\n\n- **[Pinocchio](https://github.com/anza-xyz/pinocchio)** - Lightweight `no_std` Solana framework\n- **[Codama](https://github.com/codama-idl)** - IDL-driven client generation\n- **[LiteSVM](https://github.com/LiteSVM/litesvm)** - Fast local testing\n\n---\n\nBuilt and maintained by the [Solana Foundation](https://solana.org/).\n\nLicensed under MIT. See [LICENSE](LICENSE) for details.\n\n## Support\n\n- [**Solana StackExchange**](https://solana.stackexchange.com/) - tag `escrow-program`\n- [**Open an Issue**](https://github.com/solana-program/escrow/issues/new)\n",
        ".claude-plugin/escrow-extension-generator/README.md": "# Escrow Extension Generator Plugin\n\nA Claude Code plugin that helps you add new extensions to the Solana escrow program.\n\n## Usage\n\n### Command\n\n```\n/add-extension\n```\n\n### Agent\n\nThe `extension-generator` agent automatically activates when you mention adding a new extension to the escrow program.\n\n## What It Generates\n\nWhen you add a new extension, the plugin generates:\n\n### Program Files\n\n- **State**: Extension data struct in `program/src/state/extensions/`\n- **Instructions**: Complete instruction structure (accounts, data, instruction)\n- **Processor**: Instruction handler logic\n- **Events**: Event struct for extension addition\n- **Errors**: Custom error types (if needed)\n- **TLV Helpers**: TLV writer/reader methods\n\n### Test Files\n\n- **Fixtures**: Test fixture builder\n- **Integration Tests**: Comprehensive test suite\n\n### Integration Updates\n\n- Instruction discriminator enum\n- Event discriminator enum\n- ExtensionType enum\n- Entrypoint routing\n- Extension validation dispatch\n- Module exports\n\n## Extension Pattern\n\nExtensions follow a consistent pattern:\n\n1. **Extension Data**: Struct stored in TLV format with fixed size\n2. **Instruction**: `Add{ExtensionName}` with standard accounts + extension-specific data\n3. **Processor**: Validates admin, creates/updates extensions PDA, appends TLV entry\n4. **Event**: Emits `{ExtensionName}Added` event\n5. **Validation**: Optional `validate()` method for runtime checks\n\n## Example\n\nTo add a rate limit extension:\n\n1. Run `/add-extension` or mention \"I want to add a rate limit extension\"\n2. Answer questions about:\n    - Extension name: `rate_limit`\n    - Data fields: `max_withdrawals_per_day: u8, window_start: u64`\n    - Validation: Check withdrawal count in time window\n    - Errors: `RateLimitExceeded`\n3. Review generated code\n4. Validate with clarifying questions\n5. Run `just test` - the agent will loop until all tests pass\n6. All tests must pass - no skipped or commented tests allowed\n\n## Requirements\n\n- Extension name (snake_case)\n- Data structure (fields and types)\n- Validation logic (when/how to validate)\n- Custom errors (if any)\n- Event payload\n\nThe agent will guide you through gathering all necessary information.\n\n## Testing Requirements\n\nAfter generating the extension code, the agent will:\n\n1. Run `just test` to build and test everything\n2. Fix any compilation errors or test failures\n3. Loop with `just test` until **all tests pass**\n4. **Never skip or comment out tests** - always fix the root cause\n\nCommon issues the agent will fix:\n\n- Missing imports (especially `alloc::vec::Vec`)\n- Incorrect data byte offsets (discriminator bytes)\n- Struct padding issues\n- Wrong error types in test assertions\n- Missing test helpers\n"
      },
      "plugins": [
        {
          "name": "escrow-extension-generator",
          "description": "Generate new escrow program extensions with state, instructions, events, tests, and validation",
          "source": "./.claude-plugin/escrow-extension-generator",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add solana-program/escrow",
            "/plugin install escrow-extension-generator@escrow-plugins"
          ]
        }
      ]
    }
  ]
}