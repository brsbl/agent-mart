{
  "author": {
    "id": "ANcpLua",
    "display_name": "Alexander Nachtmann",
    "avatar_url": "https://avatars.githubusercontent.com/u/124206820?u=19c00a358df5a4f4c87268ac55b47ea9e96d5598&v=4"
  },
  "marketplaces": [
    {
      "name": "ancplua-claude-plugins",
      "version": null,
      "description": "Claude Code plugin marketplace: 7 plugins, 22 commands, 5 skills, 9 agents. Multi-agent orchestration, cognitive amplification, OpenTelemetry docs, and .NET build enforcement.",
      "repo_full_name": "ANcpLua/ancplua-claude-plugins",
      "repo_url": "https://github.com/ANcpLua/ancplua-claude-plugins",
      "repo_description": "Marketplace of opinionated Claude Code Plugins",
      "signals": {
        "stars": 2,
        "forks": 0,
        "pushed_at": "2026-02-13T19:40:27Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"ancplua-claude-plugins\",\n  \"owner\": {\n    \"name\": \"AncpLua\",\n    \"url\": \"https://github.com/ANcpLua\"\n  },\n  \"metadata\": {\n    \"description\": \"Claude Code plugin marketplace: 7 plugins, 22 commands, 5 skills, 9 agents. Multi-agent orchestration, cognitive amplification, OpenTelemetry docs, and .NET build enforcement.\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"metacognitive-guard\",\n      \"description\": \"Cognitive amplification stack: epistemic hooks, competitive review, commit integrity checks, CI verification scripts, and deep-thinking agents.\",\n      \"version\": \"0.4.0\",\n      \"source\": \"./plugins/metacognitive-guard\"\n    },\n    {\n      \"name\": \"otelwiki\",\n      \"description\": \"OpenTelemetry documentation with auto-sync. Semantic conventions, collector config, .NET instrumentation.\",\n      \"version\": \"1.0.6\",\n      \"source\": \"./plugins/otelwiki\"\n    },\n    {\n      \"name\": \"dotnet-architecture-lint\",\n      \"description\": \"Enforces .NET build patterns: Version.props symlinks, CPM, and single-owner imports. Prevents AI agents from breaking centralized version management.\",\n      \"version\": \"1.1.0\",\n      \"source\": \"./plugins/dotnet-architecture-lint\"\n    },\n    {\n      \"name\": \"hookify\",\n      \"description\": \"User-configurable hooks from .local.md files. Define blocking and warning rules for Bash commands, file edits, and session events.\",\n      \"version\": \"0.2.0\",\n      \"source\": \"./plugins/hookify\"\n    },\n    {\n      \"name\": \"feature-dev\",\n      \"description\": \"Guided feature development with specialized agents for codebase exploration, architecture design, code review, and quality assurance.\",\n      \"version\": \"1.1.0\",\n      \"source\": \"./plugins/feature-dev\"\n    },\n    {\n      \"name\": \"ancplua-project-routing\",\n      \"description\": \"Auto-routes to specialist agents, commands, and skills based on current project. Injects cross-repo dependency graph for the ancplua .NET ecosystem.\",\n      \"version\": \"2.0.0\",\n      \"source\": \"./plugins/ancplua-project-routing\"\n    },\n    {\n      \"name\": \"exodia\",\n      \"description\": \"Multi-agent workflow orchestration (9 commands + 2 skills: eight-gates, hades): fix, turbo-fix, fix-pipeline, tournament, mega-swarm, deep-think, batch-implement, red-blue-review, baryon-mode.\",\n      \"version\": \"2.0.0\",\n      \"source\": \"./plugins/exodia\"\n    }\n  ]\n}\n",
        "README.md": "# ancplua-claude-plugins\n\n> **CCC** â€” Claude, Copilot, CodeRabbit. The holy trinity. And two of them are Claude in a trenchcoat.\n\nClaude Code plugin marketplace. 7 plugins, 22 commands, 5 skills, 9 agents, 20 scripts, 6 hook configs.\n\n## Plugins\n\n| Plugin | Version | Description |\n|--------|---------|-------------|\n| **exodia** | 2.0.0 | Multi-agent orchestration (9 commands + 2 skills: eight-gates, hades): fix, turbo-fix, fix-pipeline, tournament, mega-swarm, deep-think, batch-implement, red-blue-review, baryon-mode |\n| **metacognitive-guard** | 0.4.0 | Cognitive amplification: epistemic hooks, commit integrity, CI verification, competitive review, deep analysis, deep-thinking agents |\n| **otelwiki** | 1.0.6 | OpenTelemetry docs with auto-sync and semantic convention validation |\n| **hookify** | 0.2.0 | User-configurable hooks from .local.md files |\n| **feature-dev** | 1.1.0 | Guided feature development with codebase understanding and integrated code review |\n| **dotnet-architecture-lint** | 1.1.0 | .NET build pattern enforcement (CPM, Version.props, symlinks) |\n| **ancplua-project-routing** | 2.0.0 | Cross-repo aware project routing with specialist agents and dependency graph |\n\n## Install\n\n```bash\nclaude plugin install exodia@ancplua-claude-plugins\nclaude plugin install metacognitive-guard@ancplua-claude-plugins\n```\n\n## Architecture\n\nPlugins, skills, hooks. No MCP servers.\n\nTri-AI review system: Claude, Copilot, CodeRabbit all review PRs independently.\n\n```text\nplugins/\nâ”œâ”€â”€ exodia/                  # multi-agent orchestration (9 commands + 2 skills: eight-gates, hades)\nâ”œâ”€â”€ metacognitive-guard/     # struggle detection + deep-think + commit integrity + CI verification\nâ”œâ”€â”€ otelwiki/                # OTel docs + sync\nâ”œâ”€â”€ hookify/                 # user-configurable hooks\nâ”œâ”€â”€ feature-dev/             # guided feature development + code review\nâ”œâ”€â”€ dotnet-architecture-lint/# .NET build pattern enforcement\nâ””â”€â”€ ancplua-project-routing/ # project-aware agent routing\n```\n\n## Links\n\n- [CHANGELOG](CHANGELOG.md)\n- [Architecture](docs/ARCHITECTURE.md)\n- [Claude Code Plugins docs](https://code.claude.com/docs/en/plugins)\n\n## License\n\n[MIT](LICENSE)\n",
        "plugins/metacognitive-guard/README.md": "# metacognitive-guard\n\nA cognitive amplification stack for Claude Code that prevents hallucinations,\nimproves reasoning quality, blocks shortcut commits, verifies CI, and escalates\ncomplex problems to specialized deep-thinking agents.\n\nAbsorbs the former `completion-integrity` and `autonomous-ci` plugins.\n\n## The Problem\n\nClaude has inherent limitations that cause systematic errors:\n\n1. **Stale training data** - Version info, release dates, and API status are often wrong\n2. **Poor self-assessment** - Claude does not reliably know when it is struggling\n3. **False confidence** - Claims \"it works\" without verification\n4. **Surface-level analysis** - Complex problems get incomplete treatment\n\n## The Solution\n\nA layered defense system that operates at multiple cognitive levels:\n\n```text\nLayer 0: HOOKS - Block wrong OUTPUT\n         |\n         +-- truth-beacon.sh (SessionStart) - Inject facts before generation\n         +-- epistemic-guard.sh (PreToolUse Write/Edit) - Block incorrect writes\n         +-- commit-integrity-hook.sh (PreToolUse Bash) - Block shortcut commits\n         +-- struggle-detector.sh (Stop) - Detect uncertainty patterns\n         |\nLayers 1-5: SKILLS - Prevent wrong REASONING\n         |\n         +-- epistemic-checkpoint - Verify before believing\n         +-- competitive-review - Dual-agent analysis\n         +-- metacognitive-guard - Self-assessment\n         +-- verification-before-completion - Prove before claiming\n```\n\n## Installation\n\n```text\n/plugin marketplace add ANcpLua/ancplua-claude-plugins\n/plugin install metacognitive-guard@ancplua-claude-plugins\n```\n\n## Components\n\n### Agents\n\n| Agent | Focus | Purpose |\n|-------|-------|---------|\n| `arch-reviewer` | Architecture | Finds SOLID violations, dependency issues, SSOT violations, layer boundaries |\n| `impl-reviewer` | Implementation | Finds banned APIs, version errors, null checks; fact-checks with WebSearch |\n| `deep-think-partner` | Deep reasoning | Systematic analysis for complex problems with structured output |\n\n### Skills\n\n| Skill | Trigger | Purpose |\n|-------|---------|---------|\n| `competitive-review` | Before creating/modifying code | Dispatches arch-reviewer and impl-reviewer in parallel competition |\n| `epistemic-checkpoint` | Questions involving versions/dates/status | Forces WebSearch verification before forming beliefs |\n| `metacognitive-guard` | Complex problems with competing constraints | Self-assessment and proactive escalation guidance |\n| `verification-before-completion` | Before claiming \"done\" or \"works\" | Requires actual build/test output before success claims |\n\n### Hooks\n\n| Hook | Event | Purpose |\n|------|-------|---------|\n| `truth-beacon.sh` | SessionStart | Injects authoritative facts (runtime versions, banned APIs) before generation |\n| `epistemic-guard.sh` | PreToolUse (Write/Edit) | Blocks writing incorrect version claims or banned APIs |\n| `commit-integrity-hook.sh` | PreToolUse (Bash) | Blocks `git commit` with warning suppressions, commented tests, deleted assertions |\n| `struggle-detector.sh` | Stop | Detects hedging/uncertainty patterns; suggests deep-think-partner |\n\n### Utility Scripts\n\n| Script | Purpose |\n|--------|---------|\n| `integrity-check.sh` | Validates staged git changes for 6 shortcut patterns |\n| `verify-local.sh` | Auto-detects project type (dotnet/node/python/go) and runs build+test |\n| `wait-for-ci.sh` | Monitors GitHub Actions workflows until all pass or any fails |\n\n## How It Works\n\n### Struggle Detection\n\nThe `struggle-detector.sh` hook analyzes responses for uncertainty signals:\n\n| Signal | Pattern | Score |\n|--------|---------|-------|\n| Hedging | \"I think\", \"probably\", \"might be\" | +2 per instance |\n| Deflecting | Many questions, short response | +2 per question |\n| Verbose | >400 words, <2 code blocks | +5 base + scaling |\n| Contradiction | \"but actually\", \"wait,\", \"I was wrong\" | +15 |\n| Apologetic | \"sorry\", \"my mistake\", \"let me try again\" | +8 per apology |\n| Weaseling | \"generally\", \"it depends\", \"typically\" | +3 per instance |\n| Restarting | \"let me start over\", \"different approach\" | +20 |\n| No recommendation | Long response without clear advice | +8 |\n| Tool use | \"let me read/search/check...\" | -5 (negative) |\n\n**Trigger conditions:**\n\n- Single response score > 25\n- OR 2+ consecutive responses with score > 10\n\n### Epistemic Guard\n\nThe `epistemic-guard.sh` hook blocks writes containing:\n\n- Incorrect version claims (e.g., claiming LTS releases are still in beta)\n- Banned APIs (legacy date/time APIs, legacy locking patterns, legacy JSON libraries)\n\nSee `blackboard/assertions.yaml` for the complete list of blocked patterns and their modern replacements.\n\n### Competitive Review\n\nThe `competitive-review` skill creates a competition between two specialized agents:\n\n```text\nUser question\n     |\n     +-- arch-reviewer (parallel) --> Architecture issues\n     +-- impl-reviewer (parallel) --> Implementation issues + fact-checking\n     |\n     v\nMerged results (deduplicated, scored)\n     |\n     v\ndeep-think-partner (receives verified context)\n```\n\nCompetition framing (\"whoever finds more issues gets promoted\") increases thoroughness.\n\n### Deep-Think Partner\n\nWhen spawned, the `deep-think-partner` agent:\n\n1. **Crystallizes** the problem to essential structure\n2. **Maps** the solution space (dimensions, boundaries, attractors)\n3. **Explores** 3+ distinct approaches in parallel\n4. **Tests** each path adversarially (steel-man, red-team, edge-probe)\n5. **Synthesizes** into actionable output with confidence levels\n\nReturns structured output compatible with TodoWrite for immediate execution.\n\n## Usage Examples\n\n### Automatic Struggle Detection\n\n```text\nUser: \"Should I use event sourcing or CQRS for the span ingestion pipeline?\"\n\nClaude: [Hedging response with uncertainty...]\n\n[struggle-detector.sh triggers]\n\nClaude: \"I'm finding this complex. Want me to spawn a deep-thinker\nfor a more thorough analysis?\"\n```\n\n### Competitive Review (Manual)\n\n```text\nUser: \"Review this implementation before I merge\"\n\nClaude: \"I'm dispatching two competing reviewers to analyze this.\"\n\n[arch-reviewer and impl-reviewer run in parallel]\n\nClaude: \"Review Competition Results:\n\n| Reviewer | Issues Found | HIGH | MED | LOW |\n|----------|--------------|------|-----|-----|\n| arch-reviewer | 3 | 0 | 2 | 1 |\n| impl-reviewer | 4 | 1 | 2 | 1 |\n\nWinner: impl-reviewer (1 HIGH vs 0 HIGH)\n\nCombined Issues:\n1. HIGH [impl]: Wrong version assumption detected\n2. MED [arch]: Extension methods in wrong project\n...\"\n```\n\n### Epistemic Checkpoint\n\n```text\nUser: \"What version of .NET should I target?\"\n\n[epistemic-checkpoint skill activates]\n\nClaude: \"Epistemic Checkpoint\n\nClaim to verify: Current .NET LTS version\nSource checked: WebSearch + assertions.yaml\nVerified fact: .NET 10 is LTS since November 2025\n\nProceeding with verified baseline...\"\n```\n\n## Configuration\n\n### Ground Truth Assertions\n\nThe plugin includes default assertions in `blackboard/assertions.yaml`. This file defines:\n\n- **Runtime versions** - Current .NET and C# versions with release dates\n- **Banned APIs** - Legacy patterns that should be replaced with modern alternatives\n- **Authority levels** - Whether facts are authoritative, verified, or tentative\n\nOverride with user-level assertions at `~/.claude/assertions.yaml`.\n\n### Tunable Parameters\n\nAdjust in `hooks/scripts/struggle-detector.sh`:\n\n| Parameter | Default | Purpose |\n|-----------|---------|---------|\n| Score threshold | 25 | Single-response trigger |\n| Consecutive threshold | 2 | Multi-response trigger |\n| Hedging weight | 2x count | Uncertainty penalty |\n| Verbose threshold | 400 words | Rambling detection |\n\n## Architecture\n\n```text\nmetacognitive-guard/\n|-- .claude-plugin/\n|   `-- plugin.json              # Plugin manifest\n|-- agents/\n|   |-- arch-reviewer.md         # Architecture analysis agent\n|   |-- deep-think-partner.md    # Deep reasoning agent (Opus)\n|   `-- impl-reviewer.md         # Implementation analysis agent\n|-- blackboard/\n|   `-- assertions.yaml          # Ground truth facts\n|-- commands/\n|   |-- competitive-review.md    # Dual-agent competition\n|   |-- epistemic-checkpoint.md  # Version/date verification\n|   |-- metacognitive-guard.md   # Self-escalation guidance\n|   `-- verification-before-completion.md  # Pre-completion verification\n|-- hooks/\n|   |-- hooks.json               # Hook configuration (4 hooks)\n|   `-- scripts/\n|       |-- commit-integrity-hook.sh  # PreToolUse Bash wrapper\n|       |-- epistemic-guard.sh        # PreToolUse Write/Edit blocker\n|       |-- integrity-check.sh        # Commit integrity engine (6 rules)\n|       |-- struggle-detector.sh      # Stop response analyzer\n|       |-- truth-beacon.sh           # SessionStart fact injection\n|       |-- verify-local.sh           # Local build+test runner\n|       `-- wait-for-ci.sh            # GitHub Actions monitor\n`-- README.md\n```\n\n## Results\n\n**Before (typical complex question):**\n\n- 80-120k tokens\n- Multiple back-and-forth exchanges\n- Gradually improving but unfocused answers\n- Wrong version assumptions go undetected\n\n**After (with metacognitive-guard):**\n\n- 30-40k tokens\n- Single deep analysis with verified facts\n- Structured, actionable recommendations\n- Wrong assumptions blocked or corrected\n\n**3-4x token efficiency** on complex architectural and design questions.\n\n## Why This Works\n\n1. **External detection beats self-assessment** - Claude's metacognition is imperfect.\n   External pattern matching catches struggle Claude does not notice.\n\n2. **Proactive injection beats reactive correction** - The truth beacon establishes facts BEFORE wrong beliefs form.\n\n3. **Competition increases thoroughness** - Agents try harder when told they are competing against each other.\n\n4. **Verification prevents false confidence** - Requiring actual test output eliminates \"should work\" claims.\n\n5. **Layered defense provides redundancy** - If one layer fails, others catch the error.\n\n## Limitations\n\n- **False positives** - Some hedging is appropriate epistemic humility\n- **Threshold tuning** - The 25-point threshold may need calibration for different question types\n- **Scope** - Default assertions are .NET focused; customize for other stacks\n\n## Contributing\n\nAreas of interest:\n\n- Additional signal detection patterns\n- Threshold calibration data\n- Stack-specific assertion files\n- Alternative escalation agents\n\n## License\n\nMIT\n",
        "plugins/otelwiki/README.md": "# OTelWiki Plugin\n\nUnified OpenTelemetry documentation with auto-sync for Claude Code.\n\n## Overview\n\nThis plugin provides Claude with comprehensive OpenTelemetry knowledge:\n\n- **Auto-triggers** on telemetry, observability, tracing, metrics, and logging work\n- **Bundled documentation** from official OTel repositories\n- **.NET 10 focused** - modern patterns, no legacy APIs\n- **OTLP-only** - no vendor-specific configurations\n\n## Components\n\n| Component | Type | Purpose |\n|-----------|------|---------|\n| `otel-expert` | Skill | Auto-invoked to answer OTel questions (read-only) |\n| `otel-librarian` | Agent | Syncs docs from upstream repos (stateful) |\n| `/otelwiki:sync` | Command | User entry point to trigger sync |\n| SessionStart hook | Hook | Warns if docs are stale (>7 days) |\n\n## Architecture\n\n```text\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ User working on telemetry code                          â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n              â”‚\n              â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ otel-expert skill (auto-triggered)                      â”‚\nâ”‚ â€¢ Reads bundled docs                                    â”‚\nâ”‚ â€¢ Answers questions                                     â”‚\nâ”‚ â€¢ Cites sources                                         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n              â”‚\n              â”‚ (if docs stale)\n              â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ /otelwiki:sync command                                  â”‚\nâ”‚ â€¢ User explicitly invokes                               â”‚\nâ”‚ â€¢ Spawns otel-librarian agent                           â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n              â”‚\n              â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ otel-librarian agent                                    â”‚\nâ”‚ â€¢ Pulls from upstream repos                             â”‚\nâ”‚ â€¢ Validates and filters content                         â”‚\nâ”‚ â€¢ Updates docs bundle                                   â”‚\nâ”‚ â€¢ Writes SYNC-REPORT.md                                 â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## Documentation Sources\n\n| Source | Content |\n|--------|---------|\n| `semantic-conventions` | Attribute definitions, naming conventions |\n| `opentelemetry-collector` | Collector architecture, configuration |\n| `opentelemetry.io` | .NET instrumentation guides |\n\n## Usage\n\nThe skill auto-triggers when you:\n\n- Work with `ActivitySource`, `Meter`, or OTel APIs\n- Ask about semantic conventions or attributes\n- Configure the OTel Collector\n- Implement tracing, metrics, or logging\n\nTo manually sync documentation:\n\n```text\n/otelwiki:sync\n```\n\n## Constraints\n\n- Latest stable semantic conventions only\n- .NET 10 patterns (no legacy APIs)\n- OTLP export only (no vendor-specific)\n- No deprecated attributes\n\n## License\n\nMIT\n",
        "plugins/dotnet-architecture-lint/README.md": "# dotnet-architecture-lint\n\nEnforces .NET build patterns for centralized version management.\n\n## Problem\n\nAI agents lose context and break centralized version management:\n\n- Hardcode versions instead of using `$(VariableName)`\n- Import Version.props from wrong locations\n- Replace symlinks with regular files\n- Bypass CPM with inline PackageReference versions\n\n## Solution\n\nHybrid approach:\n\n- **Deterministic script** detects violations (no false positives)\n- **PreToolUse hook** blocks violations BEFORE writes happen\n- **Python validator** checks proposed content against rules A, B, G\n- **Note:** Rule C (symlink integrity) checked by lint-dotnet.sh only (post-hoc)\n\n## Rules\n\n| Rule | Catches | Severity |\n|------|---------|----------|\n| **A** | Hardcoded `Version=\"1.2.3\"` in Directory.Packages.props | ERROR |\n| **B** | Version.props imported outside allowed files | ERROR |\n| **C** | Version.props not a symlink (in consumer repos) | ERROR |\n| **G** | `<PackageReference Version=\"...\">` in .csproj | ERROR |\n\n## Usage\n\n### On-Demand\n\n```text\n/lint-dotnet\n```\n\n### Automatic\n\nThe PreToolUse hook blocks violations when you edit:\n\n- `*.props`\n- `*.targets`\n- `*.csproj`\n- `global.json`\n- `nuget.config`\n\n## Multi-Repo Pattern\n\n```text\nANcpLua.NET.Sdk/src/common/Version.props  <- Source of truth\n    ^ symlink\nANcpLua.Analyzers/Version.props\n    ^ symlink\nANcpLua.Roslyn.Utilities/Version.props\n```\n\nThe linter distinguishes source repos (has `src/common/Version.props`) from consumer repos (should have symlink).\n\n## Allowed Version.props Import Owners\n\n| File | Purpose |\n|------|---------|\n| `Directory.Packages.props` | CPM-enabled projects |\n| `eng/Directory.Build.props` | CPM-disabled projects |\n| `src/Sdk/*/Sdk.props` | SDK entry points (MSBuild auto-imports these) |\n| `src/common/*.props` | Shared SDK infrastructure |\n",
        "plugins/hookify/README.md": "# Hookify Plugin\n\nEasily create custom hooks to prevent unwanted behaviors by analyzing conversation patterns or from explicit instructions.\n\n> **Fork Note:** This is a fork of the original Anthropic hookify plugin with **global rules support**.\n\n## Overview\n\nThe hookify plugin makes it simple to create hooks without editing complex\n`hooks.json` files. Instead, you create lightweight markdown configuration\nfiles that define patterns to watch for and messages to show when those\npatterns match.\n\n**Key features:**\n\n- ğŸ¯ Analyze conversations to find unwanted behaviors automatically\n- ğŸ“ Simple markdown configuration files with YAML frontmatter\n- ğŸ” Regex pattern matching for powerful rules\n- ğŸš€ No coding required - just describe the behavior\n- ğŸ”„ Easy enable/disable without restarting\n- ğŸŒ **Global rules** - rules that apply to ALL repos (new in this fork)\n\n## Quick Start\n\n### 1. Create Your First Rule\n\n```bash\n/hookify Warn me when I use rm -rf commands\n```\n\nThis analyzes your request and creates `.claude/hookify.warn-rm.local.md`.\n\n### 2. Test It Immediately\n\n**No restart needed!** Rules take effect on the very next tool use.\n\nAsk Claude to run a command that should trigger the rule:\n\n```text\nRun rm -rf /tmp/test\n```\n\nYou should see the warning message immediately!\n\n## Global Rules (Fork Feature)\n\nThis fork adds support for **global rules** that apply to all repositories without copying files.\n\n### Setup\n\n1. Create the global rules directory:\n\n```bash\nmkdir -p ~/.claude/global-rules\n```\n\n1. Add rules to `~/.claude/global-rules/hookify.*.local.md`\n\n### How It Works\n\nRules are loaded from two locations (in order):\n\n1. `.claude/hookify.*.local.md` - **Project rules** (higher priority)\n2. `~/.claude/global-rules/hookify.*.local.md` - **Global rules**\n\nProject rules with the same name override global rules.\n\n### Example: MTP Smart Test Filtering\n\n`~/.claude/global-rules/hookify.mtp-smart-test.local.md`:\n\n```markdown\n---\nname: mtp-smart-test-filtering\nenabled: true\nevent: bash\naction: block\nconditions:\n  - field: command\n    operator: regex_match\n    pattern: dotnet\\s+test\n  - field: command\n    operator: not_contains\n    pattern: --filter-\n---\n\nâš ï¸ **Full test suite detected - consider filtering**\n\nUse MTP filter syntax:\n- `dotnet test --filter-method \"*TestName\"`\n- `dotnet test --filter-class \"*ClassName\"`\n```\n\nThis rule applies to ALL .NET repos automatically!\n\n## Usage\n\n### Main Command: /hookify\n\n**With arguments:**\n\n```text\n/hookify Don't use console.log in TypeScript files\n```\n\nCreates a rule from your explicit instructions.\n\n**Without arguments:**\n\n```text\n/hookify\n```\n\nAnalyzes recent conversation to find behaviors you've corrected or been frustrated by.\n\n### Helper Commands\n\n**List all rules:**\n\n```text\n/hookify:list\n```\n\n**Configure rules interactively:**\n\n```text\n/hookify:configure\n```\n\nEnable/disable existing rules through an interactive interface.\n\n**Get help:**\n\n```text\n/hookify:help\n```\n\n## Rule Configuration Format\n\n### Simple Rule (Single Pattern)\n\n`.claude/hookify.dangerous-rm.local.md`:\n\n```markdown\n---\nname: block-dangerous-rm\nenabled: true\nevent: bash\npattern: rm\\s+-rf\naction: block\n---\n\nâš ï¸ **Dangerous rm command detected!**\n\nThis command could delete important files. Please:\n- Verify the path is correct\n- Consider using a safer approach\n- Make sure you have backups\n```\n\n**Action field:**\n\n- `warn`: Shows warning but allows operation (default)\n- `block`: Prevents operation from executing (PreToolUse) or stops session (Stop events)\n\n### Advanced Rule (Multiple Conditions)\n\n`.claude/hookify.sensitive-files.local.md`:\n\n```markdown\n---\nname: warn-sensitive-files\nenabled: true\nevent: file\naction: warn\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.env$|credentials|secrets\n  - field: new_text\n    operator: contains\n    pattern: KEY\n---\n\nğŸ” **Sensitive file edit detected!**\n\nEnsure credentials are not hardcoded and file is in .gitignore.\n```\n\n**All conditions must match** for the rule to trigger.\n\n## Event Types\n\n- **`bash`**: Triggers on Bash tool commands\n- **`file`**: Triggers on Edit, Write, MultiEdit tools\n- **`stop`**: Triggers when Claude wants to stop (for completion checks)\n- **`prompt`**: Triggers on user prompt submission\n- **`all`**: Triggers on all events\n\n## Pattern Syntax\n\nUse Python regex syntax:\n\n| Pattern | Matches | Example |\n|---------|---------|---------|\n| `rm\\s+-rf` | rm -rf | rm -rf /tmp |\n| `console\\.log\\(` | console.log( | console.log(\"test\") |\n| `(eval\\|exec)\\(` | eval( or exec( | eval(\"code\") |\n| `\\.env$` | files ending in .env | .env, .env.local |\n| `chmod\\s+777` | chmod 777 | chmod 777 file.txt |\n\n**Tips:**\n\n- Use `\\s` for whitespace\n- Escape special chars: `\\.` for literal dot\n- Use `|` for OR: `(foo|bar)`\n- Use `.*` to match anything\n- Set `action: block` for dangerous operations\n- Set `action: warn` (or omit) for informational warnings\n\n## Examples\n\n### Example 1: Block Dangerous Commands\n\n```markdown\n---\nname: block-destructive-ops\nenabled: true\nevent: bash\npattern: rm\\s+-rf|dd\\s+if=|mkfs|format\naction: block\n---\n\nğŸ›‘ **Destructive operation detected!**\n\nThis command can cause data loss. Operation blocked for safety.\nPlease verify the exact path and use a safer approach.\n```\n\n**This rule blocks the operation** - Claude will not be allowed to execute these commands.\n\n### Example 2: Warn About Debug Code\n\n```markdown\n---\nname: warn-debug-code\nenabled: true\nevent: file\npattern: console\\.log\\(|debugger;|print\\(\naction: warn\n---\n\nğŸ› **Debug code detected**\n\nRemember to remove debugging statements before committing.\n```\n\n**This rule warns but allows** - Claude sees the message but can still proceed.\n\n### Example 3: Require Tests Before Stopping\n\n```markdown\n---\nname: require-tests-run\nenabled: false\nevent: stop\naction: block\nconditions:\n  - field: transcript\n    operator: not_contains\n    pattern: npm test|pytest|cargo test\n---\n\n**Tests not detected in transcript!**\n\nBefore stopping, please run tests to verify your changes work correctly.\n```\n\n**This blocks Claude from stopping** if no test commands appear in the\nsession transcript. Enable only when you want strict enforcement.\n\n## Advanced Usage\n\n### Multiple Conditions\n\nCheck multiple fields simultaneously:\n\n```markdown\n---\nname: api-key-in-typescript\nenabled: true\nevent: file\nconditions:\n  - field: file_path\n    operator: regex_match\n    pattern: \\.tsx?$\n  - field: new_text\n    operator: regex_match\n    pattern: (API_KEY|SECRET|TOKEN)\\s*=\\s*[\"']\n---\n\nğŸ” **Hardcoded credential in TypeScript!**\n\nUse environment variables instead of hardcoded values.\n```\n\n### Operators Reference\n\n- `regex_match`: Pattern must match (most common)\n- `contains`: String must contain pattern\n- `equals`: Exact string match\n- `not_contains`: String must NOT contain pattern\n- `starts_with`: String starts with pattern\n- `ends_with`: String ends with pattern\n\n### Field Reference\n\n**For bash events:**\n\n- `command`: The bash command string\n\n**For file events:**\n\n- `file_path`: Path to file being edited\n- `new_text`: New content being added (Edit, Write)\n- `old_text`: Old content being replaced (Edit only)\n- `content`: File content (Write only)\n\n**For prompt events:**\n\n- `user_prompt`: The user's submitted prompt text\n\n**For stop events:**\n\n- Use general matching on session state\n\n## Management\n\n### Enable/Disable Rules\n\n**Temporarily disable:**\nEdit the `.local.md` file and set `enabled: false`\n\n**Re-enable:**\nSet `enabled: true`\n\n**Or use interactive tool:**\n\n```text\n/hookify:configure\n```\n\n### Delete Rules\n\nSimply delete the `.local.md` file:\n\n```bash\nrm .claude/hookify.my-rule.local.md\n```\n\n### View All Rules\n\n```text\n/hookify:list\n```\n\n## Installation\n\nThis plugin is part of the Claude Code Marketplace. It should be auto-discovered when the marketplace is installed.\n\n**Manual testing:**\n\n```bash\ncc --plugin-dir /path/to/hookify\n```\n\n## Requirements\n\n- Python 3.7+\n- No external dependencies (uses stdlib only)\n\n## Troubleshooting\n\n**Rule not triggering:**\n\n1. Check rule file exists in `.claude/` directory (in project root, not plugin directory)\n2. Verify `enabled: true` in frontmatter\n3. Test regex pattern separately\n4. Rules should work immediately - no restart needed\n5. Try `/hookify:list` to see if rule is loaded\n\n**Import errors:**\n\n- Ensure Python 3 is available: `python3 --version`\n- Check hookify plugin is installed\n\n**Pattern not matching:**\n\n- Test regex: `python3 -c \"import re; print(re.search(r'pattern', 'text'))\"`\n- Use unquoted patterns in YAML to avoid escaping issues\n- Start simple, then add complexity\n\n**Hook seems slow:**\n\n- Keep patterns simple (avoid complex regex)\n- Use specific event types (bash, file) instead of \"all\"\n- Limit number of active rules\n\n## Contributing\n\nFound a useful rule pattern? Consider sharing example files via PR!\n\n## Future Enhancements\n\n- Severity levels (error/warning/info distinctions)\n- Rule templates library\n- Interactive pattern builder\n- Hook testing utilities\n- JSON format support (in addition to markdown)\n\n## License\n\nMIT License\n",
        "plugins/feature-dev/README.md": "# feature-dev\n\nGuided feature development with codebase understanding, clean architecture focus, and integrated code review.\n\n## Overview\n\n7-phase workflow with 3 specialized agents for deep codebase analysis, architecture design,\nand quality review. Includes standalone `/review` command for code review outside the full workflow.\n\n## Phases\n\n1. **Discovery** - Understand requirements\n2. **Exploration** - 2-3 agents analyze codebase in parallel\n3. **Clarifying Questions** - Fill in missing details\n4. **Architecture Design** - code-architect produces blueprint\n5. **Implementation** - Requires explicit user approval\n6. **Quality Review** - 3 agents review in parallel\n7. **Summary** - Final report\n\n## Agents\n\n| Agent | Role |\n|-------|------|\n| `code-architect` | Analyzes patterns, designs feature architecture, provides implementation blueprint |\n| `code-explorer` | Traces execution paths, maps layers, documents dependencies |\n| `code-reviewer` | Reviews for bugs, security, quality (confidence >=80% threshold) |\n\n## Commands\n\n| Command | Usage |\n|---------|-------|\n| `/feature-dev [description]` | Start the guided 7-phase workflow |\n| `/review [target]` | Standalone code review (uncommitted changes, file, directory, staged, branch) |\n\n## Code Review\n\nThe `/review` command provides comprehensive code review covering:\n\n- Security audit (injection, auth, secrets, dependencies)\n- Style check (naming, formatting, documentation)\n- Performance review (N+1, memory, blocking)\n- Best practices (error handling, DRY, SRP)\n\nSeverity levels: CRITICAL > HIGH > MEDIUM > LOW > INFO\n\n## Usage\n\n```bash\nclaude plugin install feature-dev@ancplua-claude-plugins\n```\n\n## License\n\nMIT\n",
        "plugins/ancplua-project-routing/README.md": "# ancplua-project-routing\n\nAuto-routes Claude to specialist agents based on current project directory.\n\n## What It Does\n\nWhen you start a Claude Code session, this plugin checks your working directory and injects\ncontext about which specialist agents to use for that project.\n\n## Supported Projects\n\n| Directory Contains | Routes To | Purpose |\n|-------------------|-----------|---------|\n| `ErrorOrX` | erroror-generator-specialist | Source generator work |\n| `ANcpLua.Analyzers` | ancplua-analyzers-specialist | Roslyn diagnostics |\n| `ANcpLua.NET.Sdk` | ancplua-sdk-specialist, msbuild-expert | MSBuild SDK |\n| `ANcpLua.Roslyn.Utilities` | (careful!) | Shared Roslyn helpers |\n| `qyl` | qyl-observability-specialist, servicedefaults-specialist | AI observability + OTel instrumentation |\n| `Template` | template-clean-arch-specialist | Clean Architecture |\n| `ancplua-claude-plugins` | (Plugin rules) | Plugin development |\n\n## Install\n\n```bash\nclaude plugin install ancplua-project-routing@ancplua-claude-plugins\n```\n\n## How It Works\n\nA SessionStart hook runs `project-routing.sh` which:\n\n1. Checks `$PWD` for known project patterns\n2. Injects routing context into the session\n3. Shows which Task agents and Skills to use\n",
        "plugins/exodia/README.md": "# exodia v2.0.0\n\nMulti-agent workflow orchestration. 9 commands + 2 skills (eight-gates, hades).\n\n## Commands\n\n| Command | Agents | Pattern | Best For |\n|---------|--------|---------|----------|\n| `/exodia:turbo-fix` | 13 | Phased pipeline | P0 critical bugs |\n| `/exodia:fix` | 8-16 | Configurable pipeline | Any bug fix |\n| `/exodia:fix-pipeline` | 7 | Systematic pipeline | Audit findings |\n| `/exodia:tournament` | N+2 | Competition | Quality optimization |\n| `/exodia:mega-swarm` | 6-12 | All parallel | Codebase audit |\n| `/exodia:deep-think` | 5 | Multi-perspective | Analysis before action |\n| `/exodia:batch-implement` | N+2 | Template + parallel | Similar items |\n| `/exodia:red-blue-review` | 3+N | Adversarial | Security review |\n| `/exodia:baryon-mode` | 1+8 | One-shot T0 burst | .NET warning extermination |\n\n## Skills (uses hooks/argument-hint)\n\n| Skill | Agents | Pattern | Best For |\n|-------|--------|---------|----------|\n| `exodia:eight-gates` | 1-30+ | Progressive discipline | Maximum orchestration with checkpointing + Hakai |\n| `exodia:hades` | 12 (3x4) | Smart cleanup | Audited elimination |\n\n## Typical Workflow\n\n```text\n1. Go all-in on objective     â†’ /exodia:eight-gates \"ship v2.0\" . 8\n2. Audit the codebase         â†’ /exodia:mega-swarm mode=quick\n3. Exterminate warnings       â†’ /exodia:baryon-mode path/to/Solution.sln\n4. Fix critical issues        â†’ /exodia:turbo-fix (P0) or /exodia:fix (P1/P2)\n5. Security review            â†’ /exodia:red-blue-review scope=security\n6. Architectural decisions    â†’ /exodia:deep-think mode=architecture\n7. Batch implement features   â†’ /exodia:batch-implement type=endpoints\n8. Re-audit                   â†’ /exodia:mega-swarm mode=full\n```\n\n## Installation\n\n```bash\nclaude plugin marketplace add ANcpLua/ancplua-claude-plugins\nclaude plugin install exodia@ancplua-claude-plugins\n```\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "metacognitive-guard",
          "description": "Cognitive amplification stack: epistemic hooks, competitive review, commit integrity checks, CI verification scripts, and deep-thinking agents.",
          "version": "0.4.0",
          "source": "./plugins/metacognitive-guard",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add ANcpLua/ancplua-claude-plugins",
            "/plugin install metacognitive-guard@ancplua-claude-plugins"
          ]
        },
        {
          "name": "otelwiki",
          "description": "OpenTelemetry documentation with auto-sync. Semantic conventions, collector config, .NET instrumentation.",
          "version": "1.0.6",
          "source": "./plugins/otelwiki",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add ANcpLua/ancplua-claude-plugins",
            "/plugin install otelwiki@ancplua-claude-plugins"
          ]
        },
        {
          "name": "dotnet-architecture-lint",
          "description": "Enforces .NET build patterns: Version.props symlinks, CPM, and single-owner imports. Prevents AI agents from breaking centralized version management.",
          "version": "1.1.0",
          "source": "./plugins/dotnet-architecture-lint",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add ANcpLua/ancplua-claude-plugins",
            "/plugin install dotnet-architecture-lint@ancplua-claude-plugins"
          ]
        },
        {
          "name": "hookify",
          "description": "User-configurable hooks from .local.md files. Define blocking and warning rules for Bash commands, file edits, and session events.",
          "version": "0.2.0",
          "source": "./plugins/hookify",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add ANcpLua/ancplua-claude-plugins",
            "/plugin install hookify@ancplua-claude-plugins"
          ]
        },
        {
          "name": "feature-dev",
          "description": "Guided feature development with specialized agents for codebase exploration, architecture design, code review, and quality assurance.",
          "version": "1.1.0",
          "source": "./plugins/feature-dev",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add ANcpLua/ancplua-claude-plugins",
            "/plugin install feature-dev@ancplua-claude-plugins"
          ]
        },
        {
          "name": "ancplua-project-routing",
          "description": "Auto-routes to specialist agents, commands, and skills based on current project. Injects cross-repo dependency graph for the ancplua .NET ecosystem.",
          "version": "2.0.0",
          "source": "./plugins/ancplua-project-routing",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add ANcpLua/ancplua-claude-plugins",
            "/plugin install ancplua-project-routing@ancplua-claude-plugins"
          ]
        },
        {
          "name": "exodia",
          "description": "Multi-agent workflow orchestration (9 commands + 2 skills: eight-gates, hades): fix, turbo-fix, fix-pipeline, tournament, mega-swarm, deep-think, batch-implement, red-blue-review, baryon-mode.",
          "version": "2.0.0",
          "source": "./plugins/exodia",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add ANcpLua/ancplua-claude-plugins",
            "/plugin install exodia@ancplua-claude-plugins"
          ]
        }
      ]
    },
    {
      "name": "qyl-marketplace",
      "version": null,
      "description": "Official qyl plugins for Claude Code",
      "repo_full_name": "ANcpLua/qyl",
      "repo_url": "https://github.com/ANcpLua/qyl",
      "repo_description": " question your logs | AI Observability Platform for GenAI/LLM workloads. OTLP ingestion, DuckDB storage, semantic conventions for AI telemetry.",
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-02-13T16:23:16Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"qyl-marketplace\",\n  \"owner\": {\n    \"name\": \"ANcpLua\"\n  },\n  \"metadata\": {\n    \"description\": \"Official qyl plugins for Claude Code\",\n    \"version\": \"1.0.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"qyl\",\n      \"source\": \"./\",\n      \"description\": \"Deploy and monitor qyl AI observability platform - collector, dashboard, OTLP ingestion, and DuckDB storage\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"ANcpLua\"\n      },\n      \"repository\": \"https://github.com/ancplua/qyl\",\n      \"license\": \"MIT\",\n      \"keywords\": [\"qyl\", \"observability\", \"opentelemetry\", \"deployment\", \"duckdb\", \"genai\"]\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"qyl\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Question Your Logs - AI observability platform with built-in context engine. Deploy, monitor, and analyze with always-on passive intelligence.\",\n  \"author\": {\n    \"name\": \"ANcpLua\"\n  },\n  \"repository\": \"https://github.com/ancplua/qyl\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"qyl\", \"observability\", \"opentelemetry\", \"deployment\", \"duckdb\", \"genai\"],\n  \"skills\": \"./skills/\",\n  \"commands\": \"./commands/\"\n}\n",
        "README.md": "# qyl\n\n**Question Your Logs** â€” observe everything, judge nothing, document perfectly.\n\nLanding page: https://ancplua.github.io/qyl/\n\n## What qyl Does\n\n|                 |                                                          |\n|-----------------|----------------------------------------------------------|\n| **Collects**    | OTLP receiver with idempotent ingestion (retry-safe)     |\n| **Instruments** | Roslyn source generators for zero-config GenAI telemetry |\n| **Visualizes**  | Real-time dashboard with SSE streaming                   |\n| **Integrates**  | MCP server and GitHub Copilot for AI agent observability |\n\n## Tech Stack\n\n| Layer    | Technology                                    |\n|----------|-----------------------------------------------|\n| Runtime  | .NET 10.0 LTS, C# 14                          |\n| Frontend | React 19, Vite 7, Tailwind CSS 4              |\n| Storage  | DuckDB (columnar, upsert-based)               |\n| Protocol | OpenTelemetry 1.39 GenAI Semantic Conventions |\n| Schema   | TypeSpec â†’ OpenAPI â†’ C#/DuckDB/TypeScript     |\n\n## Components\n\n| Package                            | Purpose                                                     |\n|------------------------------------|-------------------------------------------------------------|\n| `qyl.collector`                    | OTLP receiver, DuckDB storage, REST API, embedded dashboard |\n| `qyl.copilot`                      | GitHub Copilot integration with AG-UI tool rendering        |\n| `qyl.hosting`                      | App orchestration framework (QylRunner)                     |\n| `qyl.servicedefaults`              | .NET instrumentation library with OTel setup                |\n| `qyl.servicedefaults.generator`    | Roslyn source generator for GenAI/DB interceptors           |\n| `qyl.instrumentation.generators`   | DuckDB insert + interceptor source generators               |\n| `qyl.Analyzers`                    | Roslyn analyzers for OTel/GenAI best practices (15 rules)   |\n| `qyl.mcp`                          | MCP server for AI agent integration                         |\n| `qyl.protocol`                     | Shared types (BCL-only, no dependencies)                    |\n\n## Quick Start\n\n**Hosted**\n\nhttps://qyl-api-production.up.railway.app\n\n**Docker**\n\n```bash\ndocker build -f src/qyl.collector/Dockerfile -t qyl .\ndocker run -d -p 5100:5100 -p 4317:4317 -v ~/.qyl:/data qyl\n```\n\n**From Source**\n\n```bash\ngit clone https://github.com/ANcpLua/qyl.git\ncd qyl\ndotnet run --project src/qyl.collector\n```\n\n## Instrument Your .NET App\n\nAdd the service defaults package to automatically instrument GenAI calls:\n\n```csharp\n// Program.cs\nbuilder.AddQylServiceDefaults();\n```\n\nThis auto-instruments:\n\n- `IChatClient` calls (Microsoft.Extensions.AI)\n- Token usage, latency, model info\n- Full OTel 1.39 GenAI semantic conventions\n\nSet the exporter endpoint:\n\n```bash\nexport OTEL_EXPORTER_OTLP_ENDPOINT=\"http://localhost:5100\"\n```\n\n## Use with Any OTel App\n\nqyl accepts standard OTLP from any language/framework:\n\n```bash\n# Point any OpenTelemetry SDK at qyl\nexport OTEL_EXPORTER_OTLP_ENDPOINT=\"http://localhost:5100\"\nexport OTEL_EXPORTER_OTLP_PROTOCOL=\"http/protobuf\"\n```\n\nSupported protocols:\n\n- OTLP/HTTP (port 5100)\n- OTLP/gRPC (port 4317)\n\n## Architecture\n\n```\n+------------------+                     +------------------+\n|  Your .NET App   |                     |  Any OTel App    |\n| (servicedefaults)|                     |  (Python, Go..)  |\n+--------+---------+                     +--------+---------+\n         |                                        |\n         |               OTLP                     |\n         +----------------+-----------------------+\n                          v\n            +----------------------------+\n            |       qyl.hosting          |\n            |      (QylRunner)           |\n            +-------------+--------------+\n                          | orchestrates\n                          v\n            +----------------------------+\n            |       qyl.collector        |\n            |        (ASP.NET)           |\n            +---+------+------+-----+---+\n                |      |      |     |\n      +---------+  +---+---+  |  +--+--------+\n      v            v       v  |  v            v\n+----------+ +----------+ |  | +----------+ +----------------+\n|  DuckDB  | | Dashboard| |  | |   MCP    | |  qyl.copilot   |\n| (storage)| | (React)  | |  | | (agents) | | (GitHub Copilot)|\n+----------+ +----------+ |  | +----------+ +-------+--------+\n                           |  |                      |\n                     +-----+--+-----+          SSE / AG-UI\n                     | Insights     |                |\n                     | Materializer |                v\n                     +--------------+        GitHub Copilot\n```\n\n## AG-UI Tool Rendering\n\nqyl.copilot exposes observability tools to GitHub Copilot via SSE streaming with AG-UI event conventions.\n\n**Tools** (via `ObservabilityTools`):\n\n| Tool                 | Description                                         |\n|----------------------|-----------------------------------------------------|\n| `search_spans`       | Search spans by service name, status, time range    |\n| `get_trace`          | Get all spans for a trace ID                        |\n| `get_genai_stats`    | GenAI usage statistics (requests, tokens, costs)    |\n| `search_logs`        | Search logs by severity, body text, time range      |\n| `get_storage_stats`  | Storage statistics (span/log/session counts, size)  |\n| `list_sessions`      | List spans belonging to a session                   |\n| `get_system_context` | Pre-computed system context (zero query cost)       |\n\nEach tool is wrapped by `DelegatingAIFunction` which applies `CopilotMetrics` (counters, histograms) and `CopilotInstrumentation` (OTel spans).\n\n**Endpoints**:\n\n| Method | Path                                    | Purpose                |\n|--------|-----------------------------------------|------------------------|\n| POST   | `/api/v1/copilot/chat`                  | Chat (SSE streaming)   |\n| GET    | `/api/v1/copilot/workflows`             | List workflows         |\n| POST   | `/api/v1/copilot/workflows/{name}/run`  | Execute workflow (SSE) |\n| GET    | `/api/v1/copilot/status`                | Auth status            |\n| GET    | `/api/v1/copilot/executions`            | Execution history      |\n| GET    | `/api/v1/copilot/executions/{id}`       | Execution details      |\n\nSSE events use AG-UI convention: `tool_call` and `tool_result` event names.\n\n## Insights Materializer\n\nBackground service that pre-computes system context every 5 minutes (10-second warmup delay).\n\n| Materializer            | Computes                                              |\n|-------------------------|-------------------------------------------------------|\n| `TopologyMaterializer`  | Service discovery, AI model usage                     |\n| `ProfileMaterializer`   | Latency percentiles (P50/P95/P99), token costs, trends |\n| `AlertsMaterializer`    | Error spikes, cost drift, slow operations             |\n\nResults are stored in the `materialized_insights` table and served via `get_system_context` with zero query cost at read time.\n\n## Ports\n\n| Port | Protocol | Purpose                        |\n|------|----------|--------------------------------|\n| 5100 | HTTP     | REST API, Dashboard, OTLP/HTTP |\n| 4317 | gRPC     | OTLP/gRPC ingestion            |\n\n## Environment Variables\n\n| Variable                         | Default     | Purpose                   |\n|----------------------------------|-------------|---------------------------|\n| `QYL_PORT`                       | 5100        | HTTP API port             |\n| `QYL_GRPC_PORT`                  | 4317        | gRPC OTLP port (0=disable)|\n| `QYL_DATA_PATH`                  | ./qyl.duckdb| DuckDB file location      |\n| `QYL_TOKEN`                      | (none)      | Auth token                |\n| `QYL_MAX_RETENTION_DAYS`         | 30          | Telemetry retention       |\n| `QYL_MAX_SPAN_COUNT`             | 1000000     | Max spans before cleanup  |\n| `QYL_MAX_LOG_COUNT`              | 500000      | Max logs before cleanup   |\n| `QYL_CLEANUP_INTERVAL_SECONDS`   | 300         | Cleanup interval          |\n| `QYL_OTLP_CORS_ALLOWED_ORIGINS`  | *           | CORS origins (CSV)        |\n\n## GenAI Telemetry\n\nqyl captures OpenTelemetry 1.39 GenAI semantic conventions:\n\n| Attribute                        | Description                       |\n|----------------------------------|-----------------------------------|\n| `gen_ai.provider.name`           | Provider (openai, anthropic, etc) |\n| `gen_ai.request.model`           | Model name                        |\n| `gen_ai.usage.input_tokens`      | Prompt tokens                     |\n| `gen_ai.usage.output_tokens`     | Completion tokens                 |\n| `gen_ai.response.finish_reasons` | Stop reason                       |\n\n## TypeSpec-First Design\n\nAll types are defined in TypeSpec and generated downstream:\n\n```\ncore/specs/*.tsp\n       â†“ (tsp compile)\ncore/openapi/openapi.yaml\n       â†“ (nuke Generate)\n   â”Œâ”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”\n   â†“       â†“       â†“        â†“\n  C#    DuckDB    TS    JSON Schema\n```\n\nNever edit `*.g.cs` or `api.ts` â€” edit TypeSpec and regenerate.\n\n## Idempotent Ingestion\n\nSpans use `ON CONFLICT (span_id) DO UPDATE` â€” SDKs can safely retry on network errors without creating duplicates.\nMutable fields (tokens, status, cost) are updated; immutable fields (trace_id, name, start_time) are preserved.\n\n## Development\n\n```bash\n# Full build (TypeSpec â†’ Docker)\nnuke Full\n\n# Regenerate types from TypeSpec\nnuke Generate --force-generate\n\n# Run tests\ndotnet test\n\n# Dashboard dev server (hot reload)\ncd src/qyl.dashboard && npm run dev\n\n# Collector only\ndotnet run --project src/qyl.collector\n```\n\n## Project Structure\n\n```\ncore/                                   # TypeSpec schemas (source of truth)\n  qyl.watchdog/                         # Process anomaly detection daemon\neng/                                    # NUKE build system\nexamples/\n  AgentsGateway/                        # Agent-based gateway example\n  MicroserviceExample/                  # Multi-service example\n  qyl.demo/                            # Minimal example with Copilot\nsrc/\n  qyl.collector/                        # Backend API service\n  qyl.copilot/                          # GitHub Copilot integration (AG-UI)\n  qyl.dashboard/                        # React frontend\n  qyl.hosting/                          # App orchestration (QylRunner)\n  qyl.mcp/                             # MCP server\n  qyl.protocol/                         # Shared types (BCL-only)\n  qyl.servicedefaults/                  # OTel instrumentation library\n  qyl.servicedefaults.generator/        # Roslyn source generator\n  qyl.instrumentation.generators/       # DuckDB insert + interceptor generators\n  qyl.Analyzers/                        # Roslyn analyzers (QYL001-QYL015)\n  qyl.Analyzers.CodeFixes/             # Code fix providers\ntests/                                  # Test projects\n```\n\n## Analyzers\n\nqyl includes 15 Roslyn analyzers for OpenTelemetry and GenAI best practices:\n\n| ID         | Rule                          | Category      |\n|------------|-------------------------------|---------------|\n| QYL001-003 | OTel semantic conventions     | OpenTelemetry |\n| QYL004-006 | GenAI span requirements       | GenAI         |\n| QYL007-008 | Metric registration/naming    | Metrics       |\n| QYL009-010 | ServiceDefaults config        | Configuration |\n| QYL011-012 | Source generator requirements | Metrics       |\n| QYL013     | Traced attribute validation   | OpenTelemetry |\n| QYL014-015 | GenAI semconv/cardinality     | GenAI/Metrics |\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "qyl",
          "source": "./",
          "description": "Deploy and monitor qyl AI observability platform - collector, dashboard, OTLP ingestion, and DuckDB storage",
          "version": "1.0.0",
          "author": {
            "name": "ANcpLua"
          },
          "repository": "https://github.com/ancplua/qyl",
          "license": "MIT",
          "keywords": [
            "qyl",
            "observability",
            "opentelemetry",
            "deployment",
            "duckdb",
            "genai"
          ],
          "categories": [
            "deployment",
            "duckdb",
            "genai",
            "observability",
            "opentelemetry",
            "qyl"
          ],
          "install_commands": [
            "/plugin marketplace add ANcpLua/qyl",
            "/plugin install qyl@qyl-marketplace"
          ]
        }
      ]
    }
  ]
}