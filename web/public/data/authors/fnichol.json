{
  "author": {
    "id": "fnichol",
    "display_name": "Fletcher Nichol",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/261548?u=2f3fb74b1aa5c20a256fc14b2b83f21d81736a18&v=4",
    "url": "https://github.com/fnichol",
    "bio": null,
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 2,
      "total_commands": 0,
      "total_skills": 2,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "fnichol-plugins",
      "version": null,
      "description": "Personal collection of Claude Code plugins",
      "owner_info": {
        "name": "Fletcher Nichol",
        "email": "fnichol@nichol.ca"
      },
      "keywords": [],
      "repo_full_name": "fnichol/claude-code-plugins",
      "repo_url": "https://github.com/fnichol/claude-code-plugins",
      "repo_description": "Personal collection of Claude Code plugins.",
      "homepage": "",
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2025-11-26T03:29:42Z",
        "created_at": "2025-11-08T21:43:02Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 690
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 358
        },
        {
          "path": "plugins/obsidian/README.md",
          "type": "blob",
          "size": 4952
        },
        {
          "path": "plugins/obsidian/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian/skills/project-linking",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian/skills/project-linking/SKILL.md",
          "type": "blob",
          "size": 16994
        },
        {
          "path": "plugins/obsidian/skills/vault",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian/skills/vault/SKILL.md",
          "type": "blob",
          "size": 9267
        },
        {
          "path": "plugins/obsidian/test",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian/test/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian/test/skills/integration",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian/test/skills/integration/vault-project-linking",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/obsidian/test/skills/integration/vault-project-linking/SKILL-baseline-README.md",
          "type": "blob",
          "size": 4113
        },
        {
          "path": "plugins/obsidian/test/skills/integration/vault-project-linking/SKILL-baseline.md",
          "type": "blob",
          "size": 25518
        },
        {
          "path": "plugins/obsidian/test/skills/integration/vault-project-linking/test-scenarios.md",
          "type": "blob",
          "size": 22286
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"fnichol-plugins\",\n  \"owner\": {\n    \"name\": \"Fletcher Nichol\",\n    \"email\": \"fnichol@nichol.ca\"\n  },\n  \"description\": \"Personal collection of Claude Code plugins\",\n  \"plugins\": [\n    {\n      \"name\": \"obsidian\",\n      \"source\": \"./plugins/obsidian\",\n      \"description\": \"Obsidian vault integration for Claude Code\",\n      \"version\": \"1.0.0\"\n    },\n    {\n      \"name\": \"superpowers\",\n      \"source\": {\n        \"source\": \"url\",\n        \"url\": \"https://github.com/fnichol/superpowers.git\"\n      },\n      \"description\": \"Core skills library: TDD, debugging, collaboration patterns, and proven techniques (fnichol's fork)\",\n      \"version\": \"3.5.1\",\n      \"strict\": true\n    }\n  ]\n}\n",
        "plugins/obsidian/.claude-plugin/plugin.json": "{\n  \"name\": \"obsidian\",\n  \"description\": \"Manage brainstorming and planning documents in Obsidian vault with structured conventions\",\n  \"version\": \"2.0.0\",\n  \"author\": {\n    \"name\": \"Fletcher Nichol\",\n    \"email\": \"fnichol@nichol.ca\"\n  },\n  \"license\": \"MIT\",\n  \"keywords\": [\"obsidian\", \"documentation\", \"brainstorming\", \"planning\", \"knowledge-management\"]\n}\n",
        "plugins/obsidian/README.md": "# Obsidian Plugin for Claude Code\n\nPersonal plugin for managing brainstorming and planning documents in an Obsidian vault.\n\n## Overview\n\nThis plugin provides two skills for Claude Code to create and manage structured documentation in your Obsidian vault using direct file system access. No MCP servers or Obsidian plugins required.\n\n**Skills:**\n- **vault** - Core vault operations (creating projects, managing documents, frontmatter)\n- **project-linking** - Automatic session awareness linking working directories to vault projects\n\n**Architecture:**\n- **CLAUDE.md** - Minimal configuration (vault path, directory structure) loaded in every session\n- **Skills** - Detailed operations and conventions loaded on-demand when managing vault\n\n## Features\n\n- **Project Linking**: Automatic session awareness via `CLAUDE.local.md` configuration\n- **Smart Routing**: Implementation docs to local, exploratory docs to vault\n- **Style Adaptation**: Local docs match existing project conventions automatically\n- **GitHub Linking**: Portable cross-location links via GitHub URLs\n- **Project Organization**: Structured project folders with consistent naming (`YYYY-MM-DD-name.md`)\n- **Metadata-Driven**: Frontmatter (project, status, type, created) for filtering and discovery\n- **Inbox Workflow**: Quick capture with promotion to full projects\n- **Automatic Linking**: Wikilinks between related documents\n- **Version Control Ready**: Git-friendly structure\n\n## Installation & Configuration\n\n1. Install this plugin via Claude Code plugin marketplace\n\n2. Add to your `~/.claude/CLAUDE.md`:\n   ```markdown\n   # Obsidian Vault Integration\n   @~/.claude/plugins/marketplaces/fnichol-plugins/plugins/obsidian/CLAUDE.md\n\n   # Obsidian Vault Path Override (customize this)\n   Primary vault: `~/Sync/Obsidian/fnichol`\n   ```\n\n   **Default vault path:** `~/Obsidian/vault` (if you don't add the override)\n\n**What gets loaded:**\n- **CLAUDE.md**: Vault location and basic structure (loads in every conversation - kept minimal for token efficiency)\n- **vault skill**: Core vault operations, conventions, and validation rules (loads when creating/managing vault documents)\n- **project-linking skill**: Project awareness and dual-location routing (loads automatically when CLAUDE.local.md is present)\n\n**Why this approach:**\n- Plugin files stay generic and shareable\n- Your personal vault path lives only in your `~/.claude/CLAUDE.md`\n- Easy to customize without editing plugin files\n- Works across plugin updates\n\n## Usage\n\nThe vault skills activate automatically when you use trigger phrases OR when you start a session in a directory with `CLAUDE.local.md` containing an Obsidian project reference.\n\n### Project Linking (Automatic)\n\n**Enable by creating `CLAUDE.local.md` in your project directory:**\n\n```markdown\n# Obsidian Project\nVault project: `my-project-name`\n```\n\n**Benefits:**\n- Silent index loading at session start\n- Claude knows all vault docs immediately\n- Smart routing for document operations\n\n**Optional: Add local docs support:**\n\n```markdown\n# Obsidian Project\nVault project: `my-project-name`\nLocal docs: `./docs`\n```\n\n**Smart routing:**\n- Implementation docs (design, plan) → local `docs/`\n- Exploratory docs (brainstorm, notes) → vault\n- Adapts to existing local doc style automatically\n\n**Note:** Add `CLAUDE.local.md` to `.gitignore` - it's personal configuration.\n\n### Manual Operations\n\nCreating & organizing:\n- \"Save this as a new project\"\n- \"Save to inbox\" / \"quick idea\"\n- \"Create a [design/plan/brainstorm] doc for [project-name]\"\n- \"Update [doc] in [project]\"\n\nManaging projects:\n- \"Promote that inbox note to a project\"\n- \"List projects\" / \"show me all projects\"\n- \"What's in [project]\"\n- \"Mark [project] as active\"\n\nValidation:\n- \"Check [project] frontmatter\"\n- \"Validate frontmatter\"\n\n## Directory Structure\n\n```\n<your-vault-path>/projects/\n  _inbox/                    # Quick captures\n  project-name/              # One folder per project\n    YYYY-MM-DD-desc.md       # Timestamped documents\n```\n\n**File naming:** `YYYY-MM-DD-descriptive-name.md` (lowercase, hyphens)\n\n**Note:** Replace `<your-vault-path>` with the path configured in your `~/.claude/CLAUDE.md`\n\n## Document Metadata\n\nEach document includes frontmatter:\n\n```yaml\n---\nproject: project-name        # Matches folder name or \"inbox\"\nstatus: planning             # planning|active|paused|completed|archived\ntype: brainstorm            # brainstorm|design|plan|notes|retrospective\ncreated: YYYY-MM-DD         # Creation date\nupdated: YYYY-MM-DD         # Optional: when revised\n---\n```\n\n**Document types:**\n- `brainstorm` - Initial idea exploration\n- `design` - Architecture and approach\n- `plan` - Implementation tasks\n- `notes` - Working notes\n- `retrospective` - Post-completion reflections\n\n**Status values:**\n- `planning` - Initial exploration\n- `active` - Currently working\n- `paused` - On hold\n- `completed` - Finished\n- `archived` - No longer relevant\n\n## License\n\nMIT\n",
        "plugins/obsidian/skills/project-linking/SKILL.md": "---\nname: project-linking\ndescription: Use when session starts with CLAUDE.local.md containing Vault project field - automatically loads vault index, enables dual-location routing (vault + local docs), style adaptation, and cross-location linking with GitHub URLs for Obsidian project documentation\n---\n\n# Obsidian Project Linking\n\n## Overview\n\nCLAUDE.local.md integration for Obsidian vaults. Automatically detects project configuration at session start, loads vault documentation index silently, and enables intelligent routing between vault (exploratory docs) and local repository (implementation docs).\n\n**Requires:** The `vault` skill for basic Obsidian vault operations (CRUD, inbox, promotion, validation).\n\n## Project Linking Configuration\n\n**CLAUDE.local.md detection:** Check for `CLAUDE.local.md` in working directory at session start.\n\n**Parse configuration fields:**\n- `Vault project: \\`project-name\\`` - Links working directory to vault project\n- `Local docs: ./path` - Optional local documentation directory\n- `Documentation style: standard` - Optional style override\n\n**Configuration precedence:**\n- CLAUDE.local.md overrides for project-specific settings\n- ~/.claude/CLAUDE.md for vault path (Primary vault:)\n- Defaults: vault path `~/Obsidian/vault`, no local docs\n\n**Example CLAUDE.local.md:**\n```markdown\n# Obsidian Project\nVault project: `my-project-name`\nLocal docs: `./docs`\nDocumentation style: standard\n```\n\n**Session context:**\nStore parsed values in memory for the session:\n- `project_name` - from Vault project field\n- `local_docs_path` - from Local docs field (optional)\n- `doc_style` - from Documentation style field (optional, default: adapt)\n\n## Startup Behavior\n\n**When CLAUDE.local.md contains `Vault project:` reference:**\n\n### 1. Silent Index Loading\n\n**Trigger:** Session starts in directory with CLAUDE.local.md containing Vault project field\n\n**Process:**\n1. Parse CLAUDE.local.md for `Vault project: \\`name\\``\n2. Determine vault path from \"Primary vault:\" in context\n3. Expand `~` to home directory in vault path\n4. Construct project path: `<vault-path>/projects/<project-name>/`\n5. Read all `.md` files in project folder\n6. Extract from each file's frontmatter:\n   - filename (for reference)\n   - `type:` field (brainstorm, design, plan, notes, retrospective)\n   - `status:` field (planning, active, paused, completed, archived)\n7. Store index in memory as session context\n\n**Silent Success:**\n- No output to user\n- Index available for search/list operations\n\n**Visible Warnings:**\n- Vault path doesn't exist: \"Warning: Vault path `<path>` not found. Check Primary vault in ~/.claude/CLAUDE.md\"\n- Project doesn't exist: \"Note: Vault project `<name>` not found - will create on first save\"\n- Permission error: \"Error: Cannot read vault project `<name>` at `<path>` - permission denied\"\n\n### 2. Local Docs Verification\n\n**If `Local docs:` configured:**\n1. Verify directory exists relative to working directory\n2. If not found: \"Warning: Local docs directory `<path>` not found. Create it or update CLAUDE.local.md\"\n3. Do not auto-create (respect project structure)\n\n**Session Ready:**\nAfter startup, Claude knows:\n- All vault documents (from index)\n- Local docs location (if configured)\n- Ready for document operations\n\n## Location Resolution\n\n**Determine target location for document operations:**\n\n### Resolution Algorithm\n\n```\nWhen creating document:\n  If user explicitly specifies location:\n    Use specified location\n  Else if Local docs configured:\n    If document type in [design, plan]:\n      → Local docs directory\n    Else:\n      → Vault project\n  Else:\n    → Vault project (default)\n```\n\n### Document Type Categories\n\n**Implementation docs** (go to local when Local docs configured):\n- `design` - Architecture and technical design\n- `plan` - Implementation tasks and roadmaps\n\n**Exploratory docs** (always go to vault):\n- `brainstorm` - Initial idea exploration\n- `notes` - Working notes and observations\n- `retrospective` - Post-completion reflections\n\n### Location Override Examples\n\n**Explicit overrides (user specifies location):**\n- \"save this design to the vault\" → vault even if local docs enabled\n- \"create a plan in docs/\" → local even without local docs config\n- \"save to inbox\" → always vault _inbox\n\n**Natural routing (no location specified):**\n- \"create a design doc\" + Local docs configured → local docs/\n- \"create a design doc\" + no Local docs → vault\n- \"save this brainstorm\" + Local docs configured → vault (exploratory)\n- \"save this brainstorm\" + no Local docs → vault\n\n### Location-Specific Conventions\n\n**Vault documents:**\n- Filename: `YYYY-MM-DD-descriptive-name.md` (lowercase, hyphens)\n- Frontmatter: Required (project, status, type, created)\n- Linking: Wikilinks `[[filename]]`\n- Updates: Add `updated: YYYY-MM-DD` to frontmatter\n\n**Local documents:**\n- Filename: Flexible (adapt to existing or use simple names like `architecture.md`)\n- Frontmatter: Optional (not required)\n- Linking: Relative markdown links `[text](./file.md)`\n- Updates: Rely on git history (no frontmatter dates)\n\n## Local Document Operations\n\n**When `Local docs:` configured, enable operations in local directory:**\n\n### Style Adaptation\n\n**Detect existing project style (default behavior):**\n1. Read 1-3 existing documents from local docs directory\n2. Analyze:\n   - Filename patterns (kebab-case, snake_case, PascalCase, date-prefixed, etc.)\n   - Heading structure (ATX vs Setext, title format)\n   - Frontmatter presence and format\n   - Overall tone and structure\n3. Match detected style in new documents\n\n**Override with standard template:**\n- If `Documentation style: standard` in CLAUDE.local.md\n- Use consistent template regardless of existing docs\n\n**Fallback to standard:**\n- If local docs empty or unreadable\n- Warn: \"Couldn't detect local style, using standard template\"\n\n### GitHub Remote Detection\n\n**Purpose:** Create portable links from vault docs to local docs\n\n**Detection process:**\n1. Parse `.git/config` in working directory\n2. Look for `[remote \"...\"]` sections with `url` containing `github.com`\n3. Extract: `org/repo` from URL patterns:\n   - `https://github.com/org/repo.git`\n   - `git@github.com:org/repo.git`\n4. Determine default branch:\n   - Check `.git/refs/remotes/origin/HEAD`\n   - Common: `main` or `master`\n\n**Link construction:**\n`https://github.com/<org>/<repo>/blob/<branch>/docs/<filename>.md`\n\n**When to skip linking:**\n- Non-GitHub remote (GitLab, Bitbucket, self-hosted)\n- No remote configured\n- Cannot parse remote URL\n\n**Multiple remotes:**\n- Prefer `origin` if present\n- Otherwise use first GitHub remote found\n\n### Creating Local Documents\n\n**Process for local doc creation:**\n\n**Step 1:** Determine filename\n- Adapt to existing style if detected\n- Examples: `architecture.md`, `api-design.md`, `database-schema.md`\n\n**Step 2:** Detect related vault docs\n- Search vault index for related documents\n- Match by project name, keywords, document type\n\n**Step 3:** Create document\n- Apply adapted style or standard template\n- Add optional frontmatter if existing docs use it\n- Include content based on user's request\n\n**Step 4:** Add Related Documents section\n- Link to related local docs: `[Architecture](./architecture.md)`\n- Link to related vault docs via GitHub URL (if detected):\n  ```markdown\n  ## Related Documents\n\n  - [API Design](./api-design.md) - REST API specification\n  - [Initial Brainstorm](https://github.com/org/repo/blob/main/docs/brainstorm.md) - Early ideas\n  ```\n\n**Step 5:** Confirm creation\n- \"Created `docs/design.md` matching project style\"\n- List any links added\n\n### Updating Local Documents\n\n**Process:**\n1. Locate document in local docs directory\n2. Read current contents\n3. Apply requested changes\n4. Do not modify filename (preserve name)\n5. Do not add frontmatter dates (rely on git)\n6. Confirm changes: \"Updated `docs/architecture.md`\"\n\n### Searching Local Documents\n\n**Combine with vault search:**\n- \"show me design docs\" → search vault index + scan local docs\n- Report both locations: \"Found in vault: ..., Found in docs/: ...\"\n- Let user disambiguate if multiple matches\n\n**List all docs:**\n- Combine vault index with local directory scan\n- Show location for each: `[vault]` or `[local]`\n\n## Enhanced Operations\n\n**These operations extend the `vault` skill with dual-location awareness:**\n\n### Create New Project (Enhanced)\n\n**Check for project linking:**\n- If CLAUDE.local.md exists with `Vault project:` → use that project name as suggestion\n- Otherwise → ask for project name\n\n**Apply location resolution:**\n- If Local docs configured AND type in [design, plan] → create in local docs\n- Otherwise → create in vault projects/<name>/\n\n**Generate filename:**\n- Vault: `YYYY-MM-DD-<type>.md`\n- Local: adapt to style or use `<type>.md`\n\n### Add Document to Project (Enhanced)\n\n1. Check for CLAUDE.local.md with matching project name\n2. Apply location resolution:\n   - If Local docs configured AND type in [design, plan] → create in local docs\n   - Otherwise → create in vault project folder\n3. Search both vault and local for related docs\n4. Add inline wikilinks (vault) or markdown links (local)\n5. Add `## Related Documents` section with links:\n   - Vault docs: `[[YYYY-MM-DD-filename]]`\n   - Local docs: `[Title](./filename.md)`\n   - Cross-location: GitHub URL if detected\n\n### List Projects (Enhanced)\n\n- If CLAUDE.local.md configured, include linked project prominently\n- Show vault doc count\n- If Local docs configured, show local doc count too\n\n**Output:**\n```\nActive Projects:\n- obsidian-integration (3 vault docs, 2 local docs) [*linked]\n\nPlanning:\n- another-project (1 vault doc)\n```\n\n[*linked] = configured in CLAUDE.local.md\n\n### Show Project Contents (Enhanced)\n\n1. Find project folder in vault\n2. If CLAUDE.local.md links this project, also scan local docs\n3. List vault documents with types/statuses from frontmatter\n4. List local documents\n5. Present by location, chronologically within each\n\n**Output:**\n```\nobsidian-integration (status: active):\n\nVault documents:\n- 2025-11-07-initial-brainstorm.md (brainstorm)\n- 2025-11-10-retrospective.md (retrospective)\n\nLocal documents:\n- architecture.md (design)\n- implementation-plan.md (plan)\n```\n\n## Error Handling\n\n### Configuration Errors\n\n**CLAUDE.local.md missing vault project:**\n- If CLAUDE.local.md exists but no `Vault project:` field\n- Behavior: Treat as no project linking configured\n- No warning needed\n\n**Invalid project name format:**\n- Project name contains spaces or uppercase\n- Suggest: \"Project name should be lowercase with hyphens: `my-project-name`\"\n\n**Both CLAUDE.md and CLAUDE.local.md specify project:**\n- CLAUDE.local.md takes precedence (project-specific override)\n- No warning needed\n\n### Startup Errors\n\n**Vault path doesn't exist:**\n- Show: \"Warning: Vault path `<path>` not found. Check 'Primary vault:' in ~/.claude/CLAUDE.md\"\n- Continue session (non-blocking)\n\n**Vault project doesn't exist:**\n- Show: \"Note: Vault project `<name>` not found - will create on first save\"\n- Continue session (non-blocking)\n- Create on first document save\n\n**Permission denied reading vault:**\n- Show: \"Error: Cannot read vault project `<name>` at `<path>` - permission denied\"\n- Continue session but document operations will fail\n- Suggest: Check file permissions\n\n**Local docs directory missing:**\n- If `Local docs: ./docs` configured but doesn't exist\n- Show: \"Warning: Local docs directory `./docs` not found. Create it or update CLAUDE.local.md\"\n- Continue session (vault still works)\n\n### Operation Errors\n\n**Ambiguous document reference:**\n- \"show me the design doc\" matches both vault and local\n- Show both with locations: \"Found 2 matches: [vault] 2025-11-15-design.md, [local] architecture.md\"\n- Ask: \"Which document? Specify 'vault design' or 'local design'\"\n\n**Cannot write to location:**\n- Vault write fails: \"Error: Cannot write to vault at `<path>` - permission denied. Try local docs instead?\"\n- Local write fails: \"Error: Cannot write to `<path>` - permission denied. Try vault instead?\"\n\n**GitHub remote detection fails:**\n- Non-GitHub remote: No cross-linking, no warning\n- No remote: No cross-linking, no warning\n- Multiple GitHub remotes: Use `origin` or first found\n\n**Style adaptation fails:**\n- Local docs empty: \"Note: No existing docs found in `./docs`, using standard template\"\n- Cannot read local docs: \"Warning: Cannot read local docs for style detection, using standard template\"\n\n## Common Mistakes\n\n| Problem | Solution |\n|---------|----------|\n| CLAUDE.local.md not detected | Verify file exists in working directory (not subdirectory) |\n| Local docs path incorrect | Check path is relative to working directory (e.g., `./docs` not `~/docs`) |\n| Vault project name mismatch | Verify CLAUDE.local.md project name matches vault folder name |\n| Both locations have same doc | Ask user to disambiguate: \"vault design\" or \"local design\" |\n| GitHub URLs not working | Check remote is github.com (not GitLab, Bitbucket) |\n| Style detection wrong | Override with `Documentation style: standard` in CLAUDE.local.md |\n| Existing pattern conflicts | CLAUDE.local.md config > existing patterns. Design docs in vault when Local docs configured = misplaced. |\n\n## Workflow Examples\n\n### Example 1: Vault-Only Configuration\n\n**Setup CLAUDE.local.md:**\n```markdown\n# Obsidian Project\nVault project: `obsidian-integration`\n```\n\n**Session Start:**\n- Claude silently loads index from vault project\n- No output unless warnings\n\n**User:** \"Create a design doc\"\n**Claude:** Creates `~/Obsidian/vault/projects/obsidian-integration/2025-11-15-design.md` with frontmatter\n\n**User:** \"Save this brainstorm\"\n**Claude:** Creates `~/Obsidian/vault/projects/obsidian-integration/2025-11-15-brainstorm.md`\n\n**Result:** All docs in vault, full frontmatter tracking\n\n---\n\n### Example 2: Dual Location Configuration\n\n**Setup CLAUDE.local.md:**\n```markdown\n# Obsidian Project\nVault project: `api-refactoring`\nLocal docs: `./docs`\n```\n\n**Session Start:**\n- Claude silently loads vault index\n- Verifies `./docs` exists\n- No output unless warnings\n\n**User:** \"Create a design doc\"\n**Claude:**\n1. Detects type: design (implementation doc)\n2. Resolves to: local docs\n3. Reads existing docs in `./docs` to detect style\n4. Creates `./docs/architecture.md` matching detected style\n\n**User:** \"Save this brainstorm\"\n**Claude:**\n1. Detects type: brainstorm (exploratory doc)\n2. Resolves to: vault\n3. Creates `~/Obsidian/vault/projects/api-refactoring/2025-11-15-brainstorm.md`\n\n**User:** \"List all project docs\"\n**Claude:**\n```\napi-refactoring (status: active):\n\nVault documents:\n- 2025-11-07-initial-brainstorm.md (brainstorm)\n- 2025-11-10-retrospective.md (retrospective)\n\nLocal documents:\n- architecture.md (design)\n- api-design.md (design)\n```\n\n**Result:** Implementation docs version-controlled with code, exploratory docs in vault\n\n---\n\n### Example 3: Cross-Location Linking\n\n**Setup:**\n- CLAUDE.local.md: `Vault project: my-app`, `Local docs: ./docs`\n- Git remote: `github.com/org/my-app`\n\n**User:** \"Create a design doc that references the initial brainstorm\"\n**Claude:**\n1. Creates `./docs/architecture.md` (local, implementation doc)\n2. Searches vault for related docs\n3. Finds `2025-11-07-initial-brainstorm.md` in vault\n4. Detects GitHub remote\n5. Adds to design doc:\n```markdown\n## Related Documents\n\n- [Initial Brainstorm](https://github.com/org/my-app/blob/main/docs/2025-11-07-initial-brainstorm.md) - Early exploration\n```\n\n**Result:** Portable bidirectional links that work across machines\n\n---\n\n### Example 4: Style Adaptation\n\n**Setup:**\n- CLAUDE.local.md: `Vault project: legacy-app`, `Local docs: ./documentation`\n- Existing docs use PascalCase: `ApiDesign.md`, `DatabaseSchema.md`\n\n**User:** \"Create a design doc for the authentication system\"\n**Claude:**\n1. Reads existing docs to detect style\n2. Detects: PascalCase filenames, specific heading structure\n3. Creates `./documentation/AuthenticationDesign.md` matching detected pattern\n\n**User:** Later decides to standardize: adds `Documentation style: standard` to CLAUDE.local.md\n\n**User:** \"Create a deployment plan\"\n**Claude:**\n1. Checks Documentation style setting\n2. Ignores existing PascalCase pattern\n3. Creates `./documentation/deployment-plan.md` using standard kebab-case\n\n**Result:** Can adapt to existing conventions or enforce standards\n\n## Quick Reference\n\n| Operation | Result |\n|-----------|--------|\n| Link project | Silent index load + dual location awareness |\n| Add design (local) | `docs/design.md` (adapted style) |\n| Add brainstorm (vault) | `projects/<name>/YYYY-MM-DD-brainstorm.md` |\n| Show all docs | Combined vault + local listing |\n| Cross-location link | GitHub URL: `https://github.com/org/repo/blob/main/...` |\n\n**Benefits:**\n- Automatic awareness of vault documentation at session start\n- Smart routing between vault and local docs based on document type\n- Unified view of all project documentation regardless of location\n- Portable GitHub links between vault and local docs\n",
        "plugins/obsidian/skills/vault/SKILL.md": "---\nname: vault\ndescription: Use when user says \"save this\", \"create project\", \"promote from inbox\" - manages Obsidian vault documentation with frontmatter (project/status/type/created), file naming (YYYY-MM-DD-name.md), wikilinks, and project structure in projects/ folders\n---\n\n# Obsidian Vault Operations\n\n## Overview\n\nDirect file system management for Obsidian project documentation. Enforces YYYY-MM-DD-name.md naming, generates frontmatter, maintains wikilinks, organizes into projects/<name>/ and _inbox/.\n\n**For project linking features** (CLAUDE.local.md integration, dual locations, automatic startup), see the `project-linking` skill.\n\n## Configuration\n\n**Vault path:** Look for \"Primary vault:\" in conversation context (from CLAUDE.md).\n- Use the most recent occurrence if multiple are present (user override takes precedence)\n- Default: `~/Obsidian/vault` if not specified\n- Expand `~` to user's home directory before using\n\n## When to Use\n\n**User triggers:**\n- \"Save this\" / \"create project\" / \"save to inbox\"\n- \"Create a [design/plan/brainstorm] doc for [project]\"\n- \"Promote that note to a project\"\n- \"Update [doc] in [project]\"\n- \"List projects\" / \"show me what's in [project]\"\n\n**Use this skill for:** Project documentation, design docs, brainstorms, plans, retrospectives\n**Don't use for:** Code documentation (use project CLAUDE.md), one-off notes outside vault\n\n**Note:** If session has CLAUDE.local.md with project linking, use `project-linking` skill instead for advanced features.\n\n## Quick Reference\n\n| Operation | Command Pattern | Result |\n|-----------|----------------|--------|\n| New project | \"save as new project\" | `projects/<name>/YYYY-MM-DD-<type>.md` |\n| Save inbox | \"save to inbox\" | `projects/_inbox/YYYY-MM-DD-<desc>.md` |\n| Add to project | \"create [type] doc for [project]\" | New doc + wikilinks to related |\n| Update doc | \"update [doc] in [project]\" | Edit + `updated: YYYY-MM-DD` frontmatter |\n| Promote inbox | \"promote to project\" | Move + update frontmatter + rename |\n| List projects | \"list projects\" | Show all with status (skip _inbox) |\n| Show contents | \"what's in [project]\" | List docs chronologically |\n| Update status | \"mark [project] as active\" | Update all doc frontmatter |\n| Validate | \"check frontmatter\" | Report missing/invalid fields |\n\n**Conventions:**\n- Filename: `YYYY-MM-DD-descriptive-name.md` (lowercase, hyphens)\n- Links: Wikilinks `[[filename]]` (no .md, no path if same folder)\n- Always add `## Related Documents` section to project docs\n\n## Frontmatter\n\n**Required fields:**\n```yaml\n---\nproject: project-name     # Matches folder name or \"inbox\"\nstatus: planning          # planning|active|paused|completed|archived\ntype: brainstorm         # brainstorm|design|plan|notes|retrospective\ncreated: YYYY-MM-DD      # File creation date\n---\n```\n\n**Optional fields:**\n- `updated: YYYY-MM-DD` - Added when document revised (filename stays same)\n- `promoted: YYYY-MM-DD` - Added when moved from inbox to project\n\n**Valid values:**\n- **status:** planning, active, paused, completed, archived\n- **type:** brainstorm, design, plan, notes, retrospective\n\n## Core Operations\n\n### Create New Project\n\n**Trigger:** \"save this as a new project\"\n\n1. Determine vault path from conversation context\n2. Ask for project name → validate (lowercase, hyphens, no spaces)\n3. Create `<vault-path>/projects/<project-name>/`\n4. Infer doc type from conversation (brainstorming → brainstorm, planning → plan)\n5. Generate filename: `YYYY-MM-DD-<type>.md`\n6. Write frontmatter with `status: planning`\n7. Add `## Related Documents` section\n8. Confirm: \"Created projects/<name>/YYYY-MM-DD-<type>.md\"\n\n### Save to Inbox\n\n**Trigger:** \"save to inbox\" / \"quick idea\"\n\n1. Determine vault path from conversation context\n2. Create in `<vault-path>/projects/_inbox/`\n3. Use descriptive filename from content\n4. Frontmatter: `project: inbox`, `status: planning`, `type: notes`\n5. Confirm creation\n\n### Add Document to Existing Project\n\n**Trigger:** \"create a [design/plan] doc for [project-name]\"\n\n1. Search `projects/` for matching folder\n2. If not found → ask to clarify or create new project\n3. If multiple matches → present options\n4. Create new doc in project folder\n5. Search vault for related docs\n6. Add inline wikilinks where relevant\n7. Add `## Related Documents` section with links: `[[YYYY-MM-DD-filename]]`\n8. Confirm creation + report links added\n\n### Update Existing Document\n\n**Trigger:** \"update the [doc] in [project]\"\n\n1. Find document in project folder\n2. Read current contents\n3. Make requested updates\n4. Add/update `updated: YYYY-MM-DD` in frontmatter\n5. **Preserve filename** (creation date unchanged)\n6. Confirm what changed\n\n### Promote from Inbox\n\n**Trigger:** \"promote that note to a project\" / \"make this a proper project\"\n\n1. Identify inbox note from conversation context\n2. Search `_inbox/` for related notes (similar topics, keywords)\n3. Present related notes → ask which to include\n4. Ask for project name\n5. Create `projects/<project-name>/`\n6. Move selected files → rename if needed (e.g., -idea.md → -initial-brainstorm.md)\n7. Update frontmatter:\n   - `project: inbox` → `project: <project-name>`\n   - Add `promoted: YYYY-MM-DD`\n   - Update `type` if needed (ask user or infer)\n8. Confirm with list of moved files\n\n### List Projects\n\n**Trigger:** \"list projects\" / \"show me all projects\"\n\n1. Determine vault path from conversation context\n2. Read `<vault-path>/projects/` (skip `_inbox/`)\n3. For each project, read one doc to get status\n4. Sort by status: active → planning → paused → completed → archived\n5. Show count of documents per project\n\n**Output:**\n```\nActive Projects:\n- project-name (3 docs)\n\nPlanning:\n- another-project (1 doc)\n```\n\n### Show Project Contents\n\n**Trigger:** \"what's in [project]\" / \"show me [project]\"\n\n1. Find project folder\n2. List all documents with types and statuses from frontmatter\n3. Present chronologically\n\n**Output:**\n```\nproject-name (status: active):\n- 2025-11-07-initial-brainstorm.md (brainstorm)\n- 2025-11-10-design-doc.md (design)\n```\n\n### Update Project Status\n\n**Trigger:** \"mark [project] as active\" / \"set status to completed\"\n\n1. Find project folder\n2. Read all documents\n3. Update `status` field in all frontmatter\n4. Confirm count of documents updated\n\n### Validate Frontmatter\n\n**Trigger:** \"check [project] frontmatter\" / \"validate frontmatter\"\n\n1. Find project folder → read all documents\n2. Check each has: project, status, type, created\n3. Verify `project` matches folder name\n4. Verify `status` in valid values\n5. Verify `type` in valid values\n6. Verify dates are YYYY-MM-DD format\n7. Report issues found\n\n**Auto-validate before creating any file.**\n\n## Structure & Naming\n\n**Directory:**\n```\n<vault-path>/projects/\n  _inbox/                    # Quick captures\n  project-name/              # One folder per project\n    YYYY-MM-DD-desc.md\n```\n\n**Naming rules:**\n- **Files:** `YYYY-MM-DD-descriptive-name.md` (lowercase, hyphens, concise)\n- **Projects:** `project-name` (lowercase, hyphens, matches folder)\n- **No spaces or underscores**\n\n**Examples:**\n- `obsidian-integration/2025-11-07-initial-brainstorm.md`\n- `api-refactoring/2025-11-08-design-doc.md`\n\n## Linking\n\n**Internal:** `[[YYYY-MM-DD-filename]]` (no .md, no path if same folder)\n**External:** `[text](url)`\n\n**Always add to project docs:**\n```markdown\n## Related Documents\n\n- [[YYYY-MM-DD-brainstorm]] - Brief description\n- [[YYYY-MM-DD-design]] - Brief description\n```\n\n**Auto-linking:**\n- Add inline wikilinks where contextually relevant\n- Search vault when creating new docs\n- Link to related project docs in Related Documents section\n\n## Pre-flight Checks\n\n**Before ANY file operation:**\n- [ ] Path exists or can be created\n- [ ] Filename matches `YYYY-MM-DD-name.md`\n- [ ] Frontmatter has: project, status, type, created\n- [ ] Dates are `YYYY-MM-DD` format\n- [ ] Status/type are valid values\n\n**Before updates:**\n- [ ] File exists → read current contents\n- [ ] Preserve creation date in filename (only update frontmatter)\n\n## Common Mistakes\n\n| Problem | Solution |\n|---------|----------|\n| Project not found | Search partial matches → offer to create → list available |\n| Invalid frontmatter | Report issue → fix before proceeding |\n| File exists | Ask to update in-place or use different filename |\n| Permission denied | Report error → suggest checking vault path in ~/.claude/CLAUDE.md |\n| Vault path not found | Check for \"Primary vault:\" in context → use default ~/Obsidian/vault |\n| Wrong date in filename | Preserve creation date (filename) when updating → only change `updated` |\n\n## Example\n\n**User:** \"Save this brainstorm as a new project called obsidian-integration\"\n**You:** Create `projects/obsidian-integration/2025-11-07-initial-brainstorm.md` with frontmatter\n\n**User:** \"Create a design doc for obsidian-integration\"\n**You:** Create `2025-11-08-architecture-design.md`, link to `[[2025-11-07-initial-brainstorm]]`\n\n**User:** \"Promote that git-worktrees note from inbox to a project\"\n**You:**\n1. Found `_inbox/2025-11-07-git-worktrees-idea.md`\n2. Create `projects/git-worktrees/`\n3. Move and rename → `2025-11-07-initial-brainstorm.md`\n4. Update frontmatter: `project: git-worktrees`, add `promoted: 2025-11-08`\n",
        "plugins/obsidian/test/skills/integration/vault-project-linking/SKILL-baseline-README.md": "# Baseline SKILL.md for TDD Testing\n\n## Purpose\n\n`SKILL-baseline.md` is the vault skill (formerly vault-management) **before project linking features were added**.\n\nThis baseline version is used for **RED phase testing** in the TDD cycle to observe how agents behave WITHOUT the project linking documentation.\n\n## What's Included (Baseline)\n\n**Original sections (274 lines):**\n- Overview\n- Configuration\n- When to Use\n- Quick Reference\n- Frontmatter\n- Core Operations\n- Structure & Naming\n- Linking\n- Related Documents\n- Pre-flight Checks\n- Common Mistakes\n- Example\n\n**Features covered:**\n- Basic vault management (projects folder, _inbox)\n- Frontmatter generation (project, status, type, created)\n- YYYY-MM-DD-name.md file naming\n- Wikilinks for internal linking\n- Create/update/promote operations\n- Project listing and status management\n\n## What's Missing (Project Linking Features)\n\n**Sections NOT in baseline (added in 9 commits, +454 lines):**\n- Project Linking Configuration\n- Startup Behavior\n- Location Resolution\n- Local Document Operations\n- Error Handling for Project Linking\n- Project Linking Workflow Examples\n\n**Features NOT in baseline:**\n- CLAUDE.local.md detection and parsing\n- Silent startup index loading\n- Dual-location routing (vault vs local docs)\n- Document type categories (implementation vs exploratory)\n- Style adaptation for local docs\n- GitHub remote detection for cross-location linking\n- Local docs directory support\n- Enhanced error handling for project linking scenarios\n\n**Modified sections (baseline has simpler versions):**\n- Core Operations (no dual-location awareness)\n- When to Use (no automatic activation)\n- Quick Reference (no project linking operations)\n- Common Mistakes (fewer entries)\n\n## How to Use for Testing\n\n### RED Phase (Baseline Testing)\n\nUse `SKILL-baseline.md` to observe agent behavior WITHOUT project linking:\n\n```markdown\nTest Context:\n- Use baseline vault skill from SKILL-baseline.md (NOT the current vault skill)\n- Agents will NOT know about CLAUDE.local.md integration\n- Agents will NOT route documents by type\n- Agents will NOT adapt to local doc styles\n- Agents will NOT use GitHub URLs for cross-location linking\n\nThis reveals natural failure modes and rationalizations.\n```\n\n### GREEN Phase (Full Feature Testing)\n\nSwitch to both skills (vault + project-linking) to verify features work:\n\n```markdown\nTest Context:\n- Use vault skill from vault/SKILL.md (core operations)\n- Use project-linking skill from project-linking/SKILL.md (project linking features)\n- Agents SHOULD handle all project linking features correctly\n- Verify against success criteria in test-scenarios.md\n\nThis confirms the feature documentation is effective.\n```\n\n## File Comparison\n\n| File | Lines | Version | Use Case |\n|------|-------|---------|----------|\n| `SKILL-baseline.md` | 274 | Pre-project-linking (commit 606e14f) | RED phase testing |\n| `vault/SKILL.md` + `project-linking/SKILL.md` | Split | Current with two focused skills | GREEN phase testing |\n| Difference | Split into two skills | Vault operations + project linking | What we're testing |\n\n## Version Information\n\n**Baseline extracted from:**\n- Commit: `606e14f`\n- Date: Before 2025-11-15\n- Description: \"feat(obsidian): parameterize vault path for shareability\"\n\n**Current version includes:**\n- Commits: `e113276` through `c3d76aa` (9 commits)\n- Date: 2025-11-15\n- Description: Project Linking v2.0 feature set\n\n## Testing Workflow\n\n1. **Setup:** Run `./setup-test-environment.sh`\n2. **RED Phase:** Test with `SKILL-baseline.md` → document failures\n3. **GREEN Phase:** Test with `SKILL.md` → verify success criteria\n4. **REFACTOR:** Add counters for rationalizations → re-test\n5. **Deploy:** Only push if all tests pass\n\nSee `test-scenarios.md` for complete testing instructions.\n\n## Notes\n\n- The baseline represents a fully functional skill (no bugs, just missing features)\n- Baseline should NOT be modified during testing\n- If baseline needs changes, regenerate from git (this was the original vault-management skill before the split)\n- The baseline is a snapshot in time for comparison purposes\n",
        "plugins/obsidian/test/skills/integration/vault-project-linking/SKILL-baseline.md": "---\nname: vault\ndescription: Use when user says \"save this\", \"create project\", \"promote from inbox\", or organizing Obsidian documentation - manages frontmatter (project/status/type/created), file naming (YYYY-MM-DD-name.md), wikilinks, and project structure in user's Obsidian vault\n---\n\n# Obsidian Vault Management\n\n**Note:** This baseline represents the vault skill (formerly vault-management) before project linking features were split into a separate skill.\n\n## Overview\n\nDirect file system management for Obsidian project documentation. Enforces YYYY-MM-DD-name.md naming, generates frontmatter, maintains wikilinks, organizes into projects/<name>/ and _inbox/.\n\n## Configuration\n\n**Vault path:** Look for \"Primary vault:\" in conversation context (from CLAUDE.md).\n- Use the most recent occurrence if multiple are present (user override takes precedence)\n- Default: `~/Obsidian/vault` if not specified\n- Expand `~` to user's home directory before using\n\n## Project Linking Configuration\n\n**CLAUDE.local.md detection:** Check for `CLAUDE.local.md` in working directory at session start.\n\n**Parse configuration fields:**\n- `Vault project: \\`project-name\\`` - Links working directory to vault project\n- `Local docs: ./path` - Optional local documentation directory\n- `Documentation style: standard` - Optional style override\n\n**Configuration precedence:**\n- CLAUDE.local.md overrides for project-specific settings\n- ~/.claude/CLAUDE.md for vault path (Primary vault:)\n- Defaults: vault path `~/Obsidian/vault`, no local docs\n\n**Example CLAUDE.local.md:**\n```markdown\n# Obsidian Project\nVault project: `my-project-name`\nLocal docs: `./docs`\nDocumentation style: standard\n```\n\n**Session context:**\nStore parsed values in memory for the session:\n- `project_name` - from Vault project field\n- `local_docs_path` - from Local docs field (optional)\n- `doc_style` - from Documentation style field (optional, default: adapt)\n\n## Startup Behavior\n\n**When CLAUDE.local.md contains `Vault project:` reference:**\n\n### 1. Silent Index Loading\n\n**Trigger:** Session starts in directory with CLAUDE.local.md containing Vault project field\n\n**Process:**\n1. Parse CLAUDE.local.md for `Vault project: \\`name\\``\n2. Determine vault path from \"Primary vault:\" in context (see Configuration)\n3. Expand `~` to home directory in vault path\n4. Construct project path: `<vault-path>/projects/<project-name>/`\n5. Read all `.md` files in project folder\n6. Extract from each file's frontmatter:\n   - filename (for reference)\n   - `type:` field (brainstorm, design, plan, notes, retrospective)\n   - `status:` field (planning, active, paused, completed, archived)\n7. Store index in memory as session context\n\n**Silent Success:**\n- No output to user\n- Index available for search/list operations\n\n**Visible Warnings:**\n- Vault path doesn't exist: \"Warning: Vault path `<path>` not found. Check Primary vault in ~/.claude/CLAUDE.md\"\n- Project doesn't exist: \"Note: Vault project `<name>` not found - will create on first save\"\n- Permission error: \"Error: Cannot read vault project `<name>` at `<path>` - permission denied\"\n\n### 2. Local Docs Verification\n\n**If `Local docs:` configured:**\n1. Verify directory exists relative to working directory\n2. If not found: \"Warning: Local docs directory `<path>` not found. Create it or update CLAUDE.local.md\"\n3. Do not auto-create (respect project structure)\n\n**Session Ready:**\nAfter startup, Claude knows:\n- All vault documents (from index)\n- Local docs location (if configured)\n- Ready for document operations\n\n## Location Resolution\n\n**Determine target location for document operations:**\n\n### Resolution Algorithm\n\n```\nWhen creating document:\n  If user explicitly specifies location:\n    Use specified location\n  Else if Local docs configured:\n    If document type in [design, plan]:\n      → Local docs directory\n    Else:\n      → Vault project\n  Else:\n    → Vault project (default)\n```\n\n### Document Type Categories\n\n**Implementation docs** (go to local when Local docs configured):\n- `design` - Architecture and technical design\n- `plan` - Implementation tasks and roadmaps\n\n**Exploratory docs** (always go to vault):\n- `brainstorm` - Initial idea exploration\n- `notes` - Working notes and observations\n- `retrospective` - Post-completion reflections\n\n### Location Override Examples\n\n**Explicit overrides (user specifies location):**\n- \"save this design to the vault\" → vault even if local docs enabled\n- \"create a plan in docs/\" → local even without local docs config\n- \"save to inbox\" → always vault _inbox\n\n**Natural routing (no location specified):**\n- \"create a design doc\" + Local docs configured → local docs/\n- \"create a design doc\" + no Local docs → vault\n- \"save this brainstorm\" + Local docs configured → vault (exploratory)\n- \"save this brainstorm\" + no Local docs → vault\n\n### Location-Specific Conventions\n\n**Vault documents:**\n- Filename: `YYYY-MM-DD-descriptive-name.md` (lowercase, hyphens)\n- Frontmatter: Required (project, status, type, created)\n- Linking: Wikilinks `[[filename]]`\n- Updates: Add `updated: YYYY-MM-DD` to frontmatter\n\n**Local documents:**\n- Filename: Flexible (adapt to existing or use simple names like `architecture.md`)\n- Frontmatter: Optional (not required)\n- Linking: Relative markdown links `[text](./file.md)`\n- Updates: Rely on git history (no frontmatter dates)\n\n## Local Document Operations\n\n**When `Local docs:` configured, enable operations in local directory:**\n\n### Style Adaptation\n\n**Detect existing project style (default behavior):**\n1. Read 1-3 existing documents from local docs directory\n2. Analyze:\n   - Filename patterns (kebab-case, snake_case, PascalCase, date-prefixed, etc.)\n   - Heading structure (ATX vs Setext, title format)\n   - Frontmatter presence and format\n   - Overall tone and structure\n3. Match detected style in new documents\n\n**Override with standard template:**\n- If `Documentation style: standard` in CLAUDE.local.md\n- Use consistent template regardless of existing docs\n\n**Fallback to standard:**\n- If local docs empty or unreadable\n- Warn: \"Couldn't detect local style, using standard template\"\n\n### GitHub Remote Detection\n\n**Purpose:** Create portable links from vault docs to local docs\n\n**Detection process:**\n1. Parse `.git/config` in working directory\n2. Look for `[remote \"...\"]` sections with `url` containing `github.com`\n3. Extract: `org/repo` from URL patterns:\n   - `https://github.com/org/repo.git`\n   - `git@github.com:org/repo.git`\n4. Determine default branch:\n   - Check `.git/refs/remotes/origin/HEAD`\n   - Common: `main` or `master`\n\n**Link construction:**\n`https://github.com/<org>/<repo>/blob/<branch>/docs/<filename>.md`\n\n**When to skip linking:**\n- Non-GitHub remote (GitLab, Bitbucket, self-hosted)\n- No remote configured\n- Cannot parse remote URL\n\n**Multiple remotes:**\n- Prefer `origin` if present\n- Otherwise use first GitHub remote found\n\n### Creating Local Documents\n\n**Process for local doc creation:**\n\n**Step 1:** Determine filename\n- Adapt to existing style if detected\n- Examples: `architecture.md`, `api-design.md`, `database-schema.md`\n\n**Step 2:** Detect related vault docs\n- Search vault index for related documents\n- Match by project name, keywords, document type\n\n**Step 3:** Create document\n- Apply adapted style or standard template\n- Add optional frontmatter if existing docs use it\n- Include content based on user's request\n\n**Step 4:** Add Related Documents section\n- Link to related local docs: `[Architecture](./architecture.md)`\n- Link to related vault docs via GitHub URL (if detected):\n  ```markdown\n  ## Related Documents\n\n  - [API Design](./api-design.md) - REST API specification\n  - [Initial Brainstorm](https://github.com/org/repo/blob/main/docs/brainstorm.md) - Early ideas\n  ```\n\n**Step 5:** Confirm creation\n- \"Created `docs/design.md` matching project style\"\n- List any links added\n\n### Updating Local Documents\n\n**Process:**\n1. Locate document in local docs directory\n2. Read current contents\n3. Apply requested changes\n4. Do not modify filename (preserve name)\n5. Do not add frontmatter dates (rely on git)\n6. Confirm changes: \"Updated `docs/architecture.md`\"\n\n### Searching Local Documents\n\n**Combine with vault search:**\n- \"show me design docs\" → search vault index + scan local docs\n- Report both locations: \"Found in vault: ..., Found in docs/: ...\"\n- Let user disambiguate if multiple matches\n\n**List all docs:**\n- Combine vault index with local directory scan\n- Show location for each: `[vault]` or `[local]`\n\n## When to Use\n\n**Automatic activation:**\n- Session starts in directory with CLAUDE.local.md containing `Vault project:` field\n- Skill loads silently, index loaded, dual location awareness enabled\n\n**User triggers:**\n- \"Save this\" / \"create project\" / \"save to inbox\"\n- \"Create a [design/plan/brainstorm] doc for [project]\"\n- \"Promote that note to a project\"\n- \"Update [doc] in [project]\"\n- \"List projects\" / \"show me what's in [project]\"\n- \"Show me all project docs\" (combines vault + local)\n\n**Use this skill for:** Project documentation, design docs, brainstorms, plans, retrospectives\n**Don't use for:** Code documentation (use project CLAUDE.md), one-off notes outside vault\n\n**Project linking benefits:**\n- Automatic awareness of vault documentation at session start\n- Smart routing between vault and local docs based on document type\n- Unified view of all project documentation regardless of location\n- Portable GitHub links between vault and local docs\n\n## Quick Reference\n\n| Operation | Command Pattern | Result |\n|-----------|----------------|--------|\n| Link project | Add to CLAUDE.local.md | Silent index load + dual location awareness |\n| New project | \"save as new project\" | `projects/<name>/YYYY-MM-DD-<type>.md` or `docs/<type>.md` |\n| Save inbox | \"save to inbox\" | `projects/_inbox/YYYY-MM-DD-<desc>.md` |\n| Add to project | \"create [type] doc for [project]\" | New doc + location resolution + links |\n| Add design (local) | \"create design doc\" + Local docs | `docs/design.md` (adapted style) |\n| Add brainstorm (vault) | \"save brainstorm\" + Local docs | `projects/<name>/YYYY-MM-DD-brainstorm.md` (vault) |\n| Update doc | \"update [doc] in [project]\" | Edit + `updated: YYYY-MM-DD` (vault) or git history (local) |\n| Promote inbox | \"promote to project\" | Move + update frontmatter + rename |\n| List projects | \"list projects\" | Show all with status + doc counts (vault + local) |\n| Show contents | \"what's in [project]\" | List docs by location chronologically |\n| Show all docs | \"show me all project docs\" | Combined vault + local listing |\n| Update status | \"mark [project] as active\" | Update all doc frontmatter (vault only) |\n| Validate | \"check frontmatter\" | Report missing/invalid fields |\n\n**Conventions:**\n- Filename: `YYYY-MM-DD-descriptive-name.md` (lowercase, hyphens)\n- Links: Wikilinks `[[filename]]` (no .md, no path if same folder)\n- Always add `## Related Documents` section to project docs\n\n## Frontmatter\n\n**Required fields:**\n```yaml\n---\nproject: project-name     # Matches folder name or \"inbox\"\nstatus: planning          # planning|active|paused|completed|archived\ntype: brainstorm         # brainstorm|design|plan|notes|retrospective\ncreated: YYYY-MM-DD      # File creation date\n---\n```\n\n**Optional fields:**\n- `updated: YYYY-MM-DD` - Added when document revised (filename stays same)\n- `promoted: YYYY-MM-DD` - Added when moved from inbox to project\n\n**Valid values:**\n- **status:** planning, active, paused, completed, archived\n- **type:** brainstorm, design, plan, notes, retrospective\n\n## Core Operations\n\n### Create New Project\n\n**Trigger:** \"save this as a new project\"\n\n**Check for project linking:**\n- If CLAUDE.local.md exists with `Vault project:` → use that project name as suggestion\n- Otherwise → ask for project name\n\n1. Determine vault path from conversation context (see Configuration)\n2. Ask for project name → validate (lowercase, hyphens, no spaces)\n3. Create `<vault-path>/projects/<project-name>/`\n4. Infer doc type from conversation (brainstorming → brainstorm, planning → plan)\n5. Apply location resolution:\n   - If Local docs configured AND type in [design, plan] → create in local docs\n   - Otherwise → create in vault projects/<name>/\n6. Generate filename:\n   - Vault: `YYYY-MM-DD-<type>.md`\n   - Local: adapt to style or use `<type>.md`\n7. Write frontmatter (vault only) with `status: planning`\n8. Add `## Related Documents` section\n9. Confirm: \"Created projects/<name>/YYYY-MM-DD-<type>.md\" or \"Created docs/<type>.md\"\n\n### Save to Inbox\n\n**Trigger:** \"save to inbox\" / \"quick idea\"\n\n1. Determine vault path from conversation context (see Configuration)\n2. Create in `<vault-path>/projects/_inbox/`\n3. Use descriptive filename from content\n4. Frontmatter: `project: inbox`, `status: planning`, `type: notes`\n5. Confirm creation\n\n### Add Document to Existing Project\n\n**Trigger:** \"create a [design/plan] doc for [project-name]\"\n\n1. Check for CLAUDE.local.md with matching project name\n2. If not found in config, search `projects/` for matching folder\n3. If not found → ask to clarify or create new project\n4. If multiple matches → present options\n5. Apply location resolution (see Location Resolution section):\n   - If Local docs configured AND type in [design, plan] → create in local docs\n   - Otherwise → create in vault project folder\n6. Create new doc in resolved location\n7. Search both vault and local for related docs\n8. Add inline wikilinks where relevant (vault) or markdown links (local)\n9. Add `## Related Documents` section with links:\n   - Vault docs: `[[YYYY-MM-DD-filename]]`\n   - Local docs: `[Title](./filename.md)`\n   - Cross-location: GitHub URL if detected\n10. Confirm creation + report links added\n\n### Update Existing Document\n\n**Trigger:** \"update the [doc] in [project]\"\n\n1. Find document in project folder\n2. Read current contents\n3. Make requested updates\n4. Add/update `updated: YYYY-MM-DD` in frontmatter\n5. **Preserve filename** (creation date unchanged)\n6. Confirm what changed\n\n### Promote from Inbox\n\n**Trigger:** \"promote that note to a project\" / \"make this a proper project\"\n\n1. Identify inbox note from conversation context\n2. Search `_inbox/` for related notes (similar topics, keywords)\n3. Present related notes → ask which to include\n4. Ask for project name\n5. Create `projects/<project-name>/`\n6. Move selected files → rename if needed (e.g., -idea.md → -initial-brainstorm.md)\n7. Update frontmatter:\n   - `project: inbox` → `project: <project-name>`\n   - Add `promoted: YYYY-MM-DD`\n   - Update `type` if needed (ask user or infer)\n8. Confirm with list of moved files\n\n### List Projects\n\n**Trigger:** \"list projects\" / \"show me all projects\"\n\n1. Determine vault path from conversation context (see Configuration)\n2. Read `<vault-path>/projects/` (skip `_inbox/`)\n3. If CLAUDE.local.md configured, include linked project prominently\n4. For each project, read one doc to get status\n5. Sort by status: active → planning → paused → completed → archived\n6. Show count of documents per project\n7. If Local docs configured, show local doc count too\n\n**Output:**\n```\nActive Projects:\n- obsidian-integration (3 vault docs, 2 local docs) [*linked]\n\nPlanning:\n- another-project (1 vault doc)\n```\n\n[*linked] = configured in CLAUDE.local.md\n\n### Show Project Contents\n\n**Trigger:** \"what's in [project]\" / \"show me [project]\"\n\n1. Find project folder in vault\n2. If CLAUDE.local.md links this project, also scan local docs\n3. List all documents with types and statuses from frontmatter (vault)\n4. List all documents from local docs (if configured)\n5. Present by location, chronologically within each\n\n**Output:**\n```\nobsidian-integration (status: active):\n\nVault documents:\n- 2025-11-07-initial-brainstorm.md (brainstorm)\n- 2025-11-10-retrospective.md (retrospective)\n\nLocal documents:\n- architecture.md (design)\n- implementation-plan.md (plan)\n```\n\n### Update Project Status\n\n**Trigger:** \"mark [project] as active\" / \"set status to completed\"\n\n1. Find project folder\n2. Read all documents\n3. Update `status` field in all frontmatter\n4. Confirm count of documents updated\n\n### Validate Frontmatter\n\n**Trigger:** \"check [project] frontmatter\" / \"validate frontmatter\"\n\n1. Find project folder → read all documents\n2. Check each has: project, status, type, created\n3. Verify `project` matches folder name\n4. Verify `status` in valid values\n5. Verify `type` in valid values\n6. Verify dates are YYYY-MM-DD format\n7. Report issues found\n\n**Auto-validate before creating any file.**\n\n## Structure & Naming\n\n**Directory:**\n```\n<vault-path>/projects/\n  _inbox/                    # Quick captures\n  project-name/              # One folder per project\n    YYYY-MM-DD-desc.md\n```\n\n**Note:** `<vault-path>` is determined from \"Primary vault:\" in conversation context (see Configuration section).\n\n**Naming rules:**\n- **Files:** `YYYY-MM-DD-descriptive-name.md` (lowercase, hyphens, concise)\n- **Projects:** `project-name` (lowercase, hyphens, matches folder)\n- **No spaces or underscores**\n\n**Examples:**\n- `obsidian-integration/2025-11-07-initial-brainstorm.md`\n- `api-refactoring/2025-11-08-design-doc.md`\n\n## Linking\n\n**Internal:** `[[YYYY-MM-DD-filename]]` (no .md, no path if same folder)\n**External:** `[text](url)`\n\n**Always add to project docs:**\n```markdown\n## Related Documents\n\n- [[YYYY-MM-DD-brainstorm]] - Brief description\n- [[YYYY-MM-DD-design]] - Brief description\n```\n\n**Auto-linking:**\n- Add inline wikilinks where contextually relevant\n- Search vault when creating new docs\n- Link to related project docs in Related Documents section\n\n## Pre-flight Checks\n\n**Before ANY file operation:**\n- [ ] Path exists or can be created\n- [ ] Filename matches `YYYY-MM-DD-name.md`\n- [ ] Frontmatter has: project, status, type, created\n- [ ] Dates are `YYYY-MM-DD` format\n- [ ] Status/type are valid values (see Frontmatter section)\n\n**Before updates:**\n- [ ] File exists → read current contents\n- [ ] Preserve creation date in filename (only update frontmatter)\n\n## Error Handling for Project Linking\n\n### Configuration Errors\n\n**CLAUDE.local.md missing vault project:**\n- If CLAUDE.local.md exists but no `Vault project:` field\n- Behavior: Treat as no project linking configured\n- No warning needed\n\n**Invalid project name format:**\n- Project name contains spaces or uppercase\n- Suggest: \"Project name should be lowercase with hyphens: `my-project-name`\"\n\n**Both CLAUDE.md and CLAUDE.local.md specify project:**\n- CLAUDE.local.md takes precedence (project-specific override)\n- No warning needed\n\n### Startup Errors\n\n**Vault path doesn't exist:**\n- Show: \"Warning: Vault path `<path>` not found. Check 'Primary vault:' in ~/.claude/CLAUDE.md\"\n- Continue session (non-blocking)\n\n**Vault project doesn't exist:**\n- Show: \"Note: Vault project `<name>` not found - will create on first save\"\n- Continue session (non-blocking)\n- Create on first document save\n\n**Permission denied reading vault:**\n- Show: \"Error: Cannot read vault project `<name>` at `<path>` - permission denied\"\n- Continue session but document operations will fail\n- Suggest: Check file permissions\n\n**Local docs directory missing:**\n- If `Local docs: ./docs` configured but doesn't exist\n- Show: \"Warning: Local docs directory `./docs` not found. Create it or update CLAUDE.local.md\"\n- Continue session (vault still works)\n\n### Operation Errors\n\n**Ambiguous document reference:**\n- \"show me the design doc\" matches both vault and local\n- Show both with locations: \"Found 2 matches: [vault] 2025-11-15-design.md, [local] architecture.md\"\n- Ask: \"Which document? Specify 'vault design' or 'local design'\"\n\n**Cannot write to location:**\n- Vault write fails: \"Error: Cannot write to vault at `<path>` - permission denied. Try local docs instead?\"\n- Local write fails: \"Error: Cannot write to `<path>` - permission denied. Try vault instead?\"\n\n**GitHub remote detection fails:**\n- Non-GitHub remote: No cross-linking, no warning\n- No remote: No cross-linking, no warning\n- Multiple GitHub remotes: Use `origin` or first found\n\n**Style adaptation fails:**\n- Local docs empty: \"Note: No existing docs found in `./docs`, using standard template\"\n- Cannot read local docs: \"Warning: Cannot read local docs for style detection, using standard template\"\n\n## Common Mistakes\n\n| Problem | Solution |\n|---------|----------|\n| Project not found | Search partial matches → offer to create → list available |\n| CLAUDE.local.md not detected | Verify file exists in working directory (not subdirectory) |\n| Local docs path incorrect | Check path is relative to working directory (e.g., `./docs` not `~/docs`) |\n| Vault project name mismatch | Verify CLAUDE.local.md project name matches vault folder name |\n| Both locations have same doc | Ask user to disambiguate: \"vault design\" or \"local design\" |\n| GitHub URLs not working | Check remote is github.com (not GitLab, Bitbucket) |\n| Style detection wrong | Override with `Documentation style: standard` in CLAUDE.local.md |\n| Invalid frontmatter | Report issue → fix before proceeding |\n| File exists | Ask to update in-place or use different filename |\n| Permission denied | Report error → suggest checking vault path in user's ~/.claude/CLAUDE.md |\n| Vault path not found | Check for \"Primary vault:\" in conversation context → use default ~/Obsidian/vault if not found |\n| Wrong date in filename | Preserve creation date (filename) when updating → only change frontmatter `updated` |\n\n## Example\n\n**User:** \"Save this brainstorm as a new project called obsidian-integration\"\n**You:** Create `projects/obsidian-integration/2025-11-07-initial-brainstorm.md` with frontmatter\n\n**User:** \"Create a design doc for obsidian-integration\"\n**You:** Create `2025-11-08-architecture-design.md`, link to `[[2025-11-07-initial-brainstorm]]`\n\n**User:** \"Promote that git-worktrees note from inbox to a project\"\n**You:**\n1. Found `_inbox/2025-11-07-git-worktrees-idea.md`\n2. Create `projects/git-worktrees/`\n3. Move and rename → `2025-11-07-initial-brainstorm.md`\n4. Update frontmatter: `project: git-worktrees`, add `promoted: 2025-11-08`\n\n## Project Linking Workflow Examples\n\n### Example 1: Vault-Only Configuration\n\n**Setup CLAUDE.local.md:**\n```markdown\n# Obsidian Project\nVault project: `obsidian-integration`\n```\n\n**Session Start:**\n- Claude silently loads index from vault project\n- No output unless warnings\n\n**User:** \"Create a design doc\"\n**Claude:** Creates `~/Obsidian/vault/projects/obsidian-integration/2025-11-15-design.md` with frontmatter\n\n**User:** \"Save this brainstorm\"\n**Claude:** Creates `~/Obsidian/vault/projects/obsidian-integration/2025-11-15-brainstorm.md`\n\n**Result:** All docs in vault, full frontmatter tracking\n\n---\n\n### Example 2: Dual Location Configuration\n\n**Setup CLAUDE.local.md:**\n```markdown\n# Obsidian Project\nVault project: `api-refactoring`\nLocal docs: `./docs`\n```\n\n**Session Start:**\n- Claude silently loads vault index\n- Verifies `./docs` exists\n- No output unless warnings\n\n**User:** \"Create a design doc\"\n**Claude:**\n1. Detects type: design (implementation doc)\n2. Resolves to: local docs\n3. Reads existing docs in `./docs` to detect style\n4. Creates `./docs/architecture.md` matching detected style\n\n**User:** \"Save this brainstorm\"\n**Claude:**\n1. Detects type: brainstorm (exploratory doc)\n2. Resolves to: vault\n3. Creates `~/Obsidian/vault/projects/api-refactoring/2025-11-15-brainstorm.md`\n\n**User:** \"List all project docs\"\n**Claude:**\n```\napi-refactoring (status: active):\n\nVault documents:\n- 2025-11-07-initial-brainstorm.md (brainstorm)\n- 2025-11-10-retrospective.md (retrospective)\n\nLocal documents:\n- architecture.md (design)\n- api-design.md (design)\n```\n\n**Result:** Implementation docs version-controlled with code, exploratory docs in vault\n\n---\n\n### Example 3: Cross-Location Linking\n\n**Setup:**\n- CLAUDE.local.md: `Vault project: my-app`, `Local docs: ./docs`\n- Git remote: `github.com/org/my-app`\n\n**User:** \"Create a design doc that references the initial brainstorm\"\n**Claude:**\n1. Creates `./docs/architecture.md` (local, implementation doc)\n2. Searches vault for related docs\n3. Finds `2025-11-07-initial-brainstorm.md` in vault\n4. Detects GitHub remote\n5. Adds to design doc:\n```markdown\n## Related Documents\n\n- [Initial Brainstorm](https://github.com/org/my-app/blob/main/docs/2025-11-07-initial-brainstorm.md) - Early exploration\n```\n\n**User:** In vault, \"update the brainstorm to link to the design doc\"\n**Claude:**\n1. Reads vault brainstorm\n2. Detects GitHub remote\n3. Adds to brainstorm:\n```markdown\n## Related Documents\n\n- [Architecture Design](https://github.com/org/my-app/blob/main/docs/architecture.md) - Technical design\n```\n\n**Result:** Portable bidirectional links that work across machines\n\n---\n\n### Example 4: Style Adaptation\n\n**Setup:**\n- CLAUDE.local.md: `Vault project: legacy-app`, `Local docs: ./documentation`\n- Existing docs use PascalCase: `ApiDesign.md`, `DatabaseSchema.md`\n\n**User:** \"Create a design doc for the authentication system\"\n**Claude:**\n1. Reads existing docs to detect style\n2. Detects: PascalCase filenames, specific heading structure\n3. Creates `./documentation/AuthenticationDesign.md` matching detected pattern\n\n**User:** Later decides to standardize: adds `Documentation style: standard` to CLAUDE.local.md\n\n**User:** \"Create a deployment plan\"\n**Claude:**\n1. Checks Documentation style setting\n2. Ignores existing PascalCase pattern\n3. Creates `./documentation/deployment-plan.md` using standard kebab-case\n\n**Result:** Can adapt to existing conventions or enforce standards\n",
        "plugins/obsidian/test/skills/integration/vault-project-linking/test-scenarios.md": "# TDD Test Scenarios: Vault and Project Linking Skills\n\n## Overview\n\n**Purpose:** Validate that agents correctly implement project linking features (CLAUDE.local.md integration, dual-location routing, style adaptation, cross-location linking) using the vault and project-linking skills under realistic pressure.\n\n**Testing Method:** RED-GREEN-REFACTOR cycle with subagents\n\n**Features Under Test:**\n1. Silent startup index loading from CLAUDE.local.md\n2. Location resolution algorithm (vault vs local routing)\n3. Style adaptation for local documents\n4. Cross-location linking with GitHub URLs\n5. Error handling and graceful degradation\n\n## Test Isolation Requirements\n\n**CRITICAL: All tests MUST use isolated temporary directories**\n\n**✅ Correct approach:**\n- Create temporary vault in `/tmp/test-vault-$RANDOM/`\n- Create temporary working directory in `/tmp/test-project-$RANDOM/`\n- Mock all paths, git configs, and dependencies\n- Clean up after tests complete\n\n**❌ NEVER:**\n- Touch real Obsidian vault at `~/Sync/Obsidian/fnichol/`\n- Modify actual project documentation\n- Use hardcoded paths specific to one system\n- Leave test artifacts behind\n\n## Test Environment Setup Script\n\n**Before running any tests, execute this setup:**\n\n```bash\n#!/bin/bash\n# setup-test-environment.sh\n\n# Generate unique test session ID\nTEST_SESSION=\"test-$(date +%s)-$$\"\n\n# Create isolated vault\nTEST_VAULT=\"/tmp/vault-${TEST_SESSION}\"\nmkdir -p \"${TEST_VAULT}/projects/test-project\"\nmkdir -p \"${TEST_VAULT}/projects/_inbox\"\n\n# Create sample vault documents\ncat > \"${TEST_VAULT}/projects/test-project/2025-11-10-initial-brainstorm.md\" <<'EOF'\n---\nproject: test-project\nstatus: active\ntype: brainstorm\ncreated: 2025-11-10\n---\n\n# Initial Brainstorm\n\nEarly thoughts about building a test authentication system.\n\n## Ideas\n\n- JWT tokens\n- OAuth integration\n- Password reset flow\nEOF\n\ncat > \"${TEST_VAULT}/projects/test-project/2025-11-12-architecture-notes.md\" <<'EOF'\n---\nproject: test-project\nstatus: active\ntype: notes\ncreated: 2025-11-12\n---\n\n# Architecture Notes\n\nWorking notes on system architecture decisions.\nEOF\n\n# Create isolated working directory\nTEST_WORKDIR=\"/tmp/workdir-${TEST_SESSION}\"\nmkdir -p \"${TEST_WORKDIR}/docs\"\n\n# Create existing local doc for style detection (PascalCase example)\ncat > \"${TEST_WORKDIR}/docs/ApiDesign.md\" <<'EOF'\n# API Design\n\n## Overview\n\nExisting API design document using PascalCase naming.\nEOF\n\n# Create CLAUDE.local.md\ncat > \"${TEST_WORKDIR}/CLAUDE.local.md\" <<EOF\n# Test Project\nVault project: \\`test-project\\`\nLocal docs: \\`./docs\\`\nEOF\n\n# Create fake git repository with GitHub remote\ncd \"${TEST_WORKDIR}\"\ngit init\ngit config user.email \"test@example.com\"\ngit config user.name \"Test User\"\n\n# Add fake GitHub remote\ngit remote add origin https://github.com/test-org/test-project.git\n\n# Create initial commit\necho \"# Test Project\" > README.md\ngit add README.md\ngit commit -m \"Initial commit\"\n\n# Set up fake HEAD pointer\nmkdir -p .git/refs/remotes/origin\necho \"ref: refs/remotes/origin/main\" > .git/refs/remotes/origin/HEAD\n\n# Export paths for test session\necho \"Test environment ready:\"\necho \"  TEST_VAULT=${TEST_VAULT}\"\necho \"  TEST_WORKDIR=${TEST_WORKDIR}\"\necho \"\"\necho \"To use in tests, override vault path:\"\necho \"  Primary vault: ${TEST_VAULT}\"\n```\n\n## Cleanup Script\n\n```bash\n#!/bin/bash\n# cleanup-test-environment.sh\n\n# Takes TEST_SESSION as argument\nTEST_SESSION=$1\n\nif [ -z \"$TEST_SESSION\" ]; then\n    echo \"Usage: $0 <test-session-id>\"\n    exit 1\nfi\n\n# Remove test directories\nrm -rf \"/tmp/vault-${TEST_SESSION}\"\nrm -rf \"/tmp/workdir-${TEST_SESSION}\"\n\necho \"Cleaned up test session: ${TEST_SESSION}\"\n```\n\n## RED Phase: Baseline Testing (Without Feature)\n\n**Goal:** Document what agents do WITHOUT the project linking feature documented.\n\n### Test Environment Configuration\n\n**For all RED phase tests:**\n1. Run setup script to create isolated environment\n2. Note the `TEST_VAULT` and `TEST_WORKDIR` paths\n3. Override vault path in test context: `Primary vault: ${TEST_VAULT}`\n4. Use baseline vault skill (without project linking features)\n5. Subagent context includes the temporary vault path override\n\n---\n\n### Test 1: Silent Startup Behavior\n\n**Setup Script:**\n```bash\n# Run standard setup\n./setup-test-environment.sh\n# Outputs TEST_VAULT and TEST_WORKDIR paths\n\n# Use baseline vault skill (before project linking was split off)\n# This is the SKILL-baseline.md in the test directory\n```\n\n**Subagent Instructions:**\n```markdown\nTest Context:\n- Working directory: ${TEST_WORKDIR}\n- Vault path override: Primary vault: ${TEST_VAULT}\n- CLAUDE.local.md exists with: Vault project: `test-project`, Local docs: `./docs`\n- Vault project exists at ${TEST_VAULT}/projects/test-project/ with 2 documents\n- You have access to vault skill WITHOUT project-linking skill\n  (baseline version only)\n\nScenario:\n[Session starts - simulate first message after initialization]\n\nUser: \"Hello\"\n\nYour task:\n- Respond naturally to the greeting\n- Observe: Did you do anything at startup regarding CLAUDE.local.md?\n- Report: What did you do (if anything) with the vault project configuration?\n\nI'm observing your natural startup behavior without project linking guidance.\n```\n\n**Expected Baseline Failures:**\n- Agent likely does nothing with CLAUDE.local.md\n- Probably doesn't load vault index proactively\n- May mention CLAUDE.local.md if explicitly looking at directory\n- Waits for user to request something\n\n**Document:** Exact agent behavior and any rationalizations\n\n---\n\n### Test 2: Location Resolution Without Guidance\n\n**Setup:**\n```bash\n# Use same test environment\n# Same baseline SKILL.md without location resolution algorithm\n```\n\n**Subagent Instructions:**\n```markdown\nTest Context:\n- Working directory: ${TEST_WORKDIR}\n- Vault path override: Primary vault: ${TEST_VAULT}\n- CLAUDE.local.md: Vault project: `test-project`, Local docs: `./docs`\n- Local docs directory exists at ${TEST_WORKDIR}/docs/\n- Vault project exists at ${TEST_VAULT}/projects/test-project/\n- You have access to vault skill WITHOUT project-linking skill\n\nUser: \"I've been thinking about the authentication system. Create a design doc for this.\"\n\nYour task:\n- Create the design document\n- Choose where to put it (vault or local docs)\n- Report back:\n  - Where you created it (full path)\n  - WHY you chose that location\n  - What factors influenced your decision\n\nI'm observing your location choice without the resolution algorithm.\n```\n\n**Expected Baseline Failures:**\n- May put in vault (familiar location, default behavior)\n- May not consider CLAUDE.local.md's Local docs config\n- May rationalize: \"Using vault for consistency with other project docs\"\n- Probably doesn't distinguish design (implementation) from other types\n\n**Document:** Location chosen, filename used, exact rationalization\n\n---\n\n### Test 3: Brainstorm vs Design Routing\n\n**Subagent Instructions:**\n```markdown\nTest Context:\n- Working directory: ${TEST_WORKDIR}\n- Vault path override: Primary vault: ${TEST_VAULT}\n- CLAUDE.local.md: Vault project: `test-project`, Local docs: `./docs`\n- You have access to vault skill WITHOUT project-linking skill\n\nUser: \"Save this brainstorm about the API structure.\"\n[Wait for completion]\nUser: \"Now create a plan for implementing it.\"\n\nYour task:\n- Create both documents\n- Choose locations for each\n- Report back:\n  - Where you put the brainstorm (path + reasoning)\n  - Where you put the plan (path + reasoning)\n  - Did you route them differently? Why or why not?\n\nI'm observing whether you naturally route by document type.\n```\n\n**Expected Baseline Failures:**\n- Likely puts both in same location (no type-based routing)\n- May put both in vault OR both in local\n- Doesn't understand implementation vs exploratory distinction\n- Rationalizes: \"Keeping related documents together\"\n\n**Document:** Both locations, reasoning, whether they differ\n\n---\n\n### Test 4: Style Adaptation Without Instructions\n\n**Subagent Instructions:**\n```markdown\nTest Context:\n- Working directory: ${TEST_WORKDIR}\n- Vault path override: Primary vault: ${TEST_VAULT}\n- Local docs has existing doc: ${TEST_WORKDIR}/docs/ApiDesign.md (PascalCase)\n- You have access to vault skill WITHOUT project-linking skill\n\nUser: \"Create a design doc for the database schema in the local docs directory.\"\n\nYour task:\n- Create the document in local docs (user specified location explicitly)\n- Choose a filename\n- Report back:\n  - Filename you chose\n  - WHY you chose that naming convention\n  - Did you look at existing docs in local directory?\n  - What influenced your naming decision?\n\nI'm observing your naming convention choice without style adaptation guidance.\n```\n\n**Expected Baseline Failures:**\n- Uses vault conventions (2025-11-15-database-schema.md)\n- Doesn't read existing docs to detect style\n- May use generic name (database-design.md, schema.md)\n- Rationalizes: \"Using standard convention\" (applies vault rules everywhere)\n\n**Document:** Filename chosen, whether existing docs were read, reasoning\n\n---\n\n### Test 5: Cross-Location Linking\n\n**Subagent Instructions:**\n```markdown\nTest Context:\n- Working directory: ${TEST_WORKDIR}\n- Vault path override: Primary vault: ${TEST_VAULT}\n- Vault has ${TEST_VAULT}/projects/test-project/2025-11-10-initial-brainstorm.md\n- Git remote exists: origin -> https://github.com/test-org/test-project.git\n- You have access to vault skill WITHOUT project-linking skill\n\nUser: \"Create a design doc in ./docs/ that references the initial brainstorm from the vault project.\"\n\nYour task:\n- Create design doc in local docs\n- Add a link/reference to the vault brainstorm document\n- Report back:\n  - What link format did you use?\n  - How did you reference the vault document?\n  - Did you consider GitHub URLs or other formats?\n  - Why did you choose that approach?\n\nI'm observing how you link across vault/local without cross-location linking guidance.\n```\n\n**Expected Baseline Failures:**\n- Uses wikilink `[[2025-11-10-initial-brainstorm]]` (won't work from local)\n- Uses absolute file path (not portable)\n- Uses relative path like `../../vault/...` (breaks if vault moves)\n- Skips linking: \"I'll mention it textually but not link\"\n- Doesn't think to check git remote for GitHub URL\n\n**Document:** Link format used, exact syntax, reasoning\n\n---\n\n### Test 6: Pressure Test - Time Constraint\n\n**Subagent Instructions:**\n```markdown\nTest Context:\n- Working directory: ${TEST_WORKDIR}\n- Vault path override: Primary vault: ${TEST_VAULT}\n- CLAUDE.local.md: Vault project: `test-project`, Local docs: `./docs`\n- You have access to vault skill WITHOUT project-linking skill\n- TIME PRESSURE applied\n\nUser: \"Quick - I need a design doc for the auth system ASAP! We're in standup in 5 minutes and I need to share it.\"\n\nYour task:\n- Create the design document under time pressure\n- Report back:\n  - Where you put it (path)\n  - What shortcuts you took (if any)\n  - Why you chose that approach given time constraint\n  - What you prioritized vs skipped\n\nI'm observing your behavior under time pressure without location resolution.\n```\n\n**Expected Baseline Failures:**\n- Takes fastest path (likely vault, familiar territory)\n- Skips checking CLAUDE.local.md config\n- Uses simplest conventions\n- Rationalizes: \"Under time pressure, using quickest standard approach\"\n\n**Document:** Location, shortcuts taken, exact rationalization\n\n---\n\n### Test 7: Pressure Test - Conflicting Guidance\n\n**Setup:**\n```bash\n# Add extra design doc to vault to create conflict\ncat > \"${TEST_VAULT}/projects/test-project/2025-11-13-api-design.md\" <<'EOF'\n---\nproject: test-project\nstatus: active\ntype: design\ncreated: 2025-11-13\n---\n\n# API Design\n\nExisting design doc in vault.\nEOF\n```\n\n**Subagent Instructions:**\n```markdown\nTest Context:\n- Working directory: ${TEST_WORKDIR}\n- Vault path override: Primary vault: ${TEST_VAULT}\n- CLAUDE.local.md: Vault project: `test-project`, Local docs: `./docs`\n- Vault already has design doc: 2025-11-13-api-design.md\n- You have access to vault skill WITHOUT project-linking skill\n- AUTHORITY PRESSURE: Existing pattern conflicts with config\n\nUser: \"I see we already have a design doc in the vault. Create another design doc for the database schema.\"\n\nYour task:\n- Create the new design document\n- Report back:\n  - Where you put it (vault with existing, or local per CLAUDE.local.md?)\n  - Why you chose that location\n  - How you resolved the conflict between existing pattern and config\n  - What took precedence in your decision?\n\nI'm observing how you handle config vs observed patterns without precedence rules.\n```\n\n**Expected Baseline Failures:**\n- Follows existing pattern (vault) over CLAUDE.local.md config\n- Rationalizes: \"Keeping all design docs together with existing ones\"\n- Authority pressure (existing pattern) overrides configuration\n- May not even notice CLAUDE.local.md specifies local docs\n\n**Document:** Location chosen, reasoning, what took precedence\n\n---\n\n### Test 8: Error Handling Without Guidance\n\n**Setup:**\n```bash\n# Introduce typo in CLAUDE.local.md\ncat > \"${TEST_WORKDIR}/CLAUDE.local.md\" <<'EOF'\n# Test Project\nVault project: `test-project`\nLocal docs: `./documentation`\nEOF\n\n# Note: ./documentation doesn't exist (typo, should be ./docs)\n```\n\n**Subagent Instructions:**\n```markdown\nTest Context:\n- Working directory: ${TEST_WORKDIR}\n- Vault path override: Primary vault: ${TEST_VAULT}\n- CLAUDE.local.md: Vault project: `test-project`, Local docs: `./documentation`\n- ERROR: ./documentation directory does NOT exist\n- You have access to vault skill WITHOUT project-linking skill\n\nUser: \"Create a design doc for the authentication system.\"\n\nYour task:\n- Attempt to create the design document\n- Observe what happens with missing local docs directory\n- Report back:\n  - What error/issue did you encounter?\n  - How did you handle it?\n  - What did you do (create dir, use vault, fail, ask user)?\n  - Why did you choose that approach?\n\nI'm observing error handling behavior without error handling guidance.\n```\n\n**Expected Baseline Failures:**\n- Tries to write to ./documentation, gets error, reports cryptic message\n- Auto-creates directory (wrong - should warn user about typo)\n- Falls back to vault silently (confusing)\n- Rationalizes: \"Directory missing, I'll create it to unblock progress\"\n\n**Document:** Error encountered, how handled, reasoning\n\n---\n\n## Baseline Testing Execution\n\n**For each test (1-8):**\n\n1. **Setup:** Run setup script, prepare isolated environment\n2. **Configure:** Set vault path override to TEST_VAULT\n3. **Use baseline:** Use vault skill baseline (SKILL-baseline.md) without project-linking\n4. **Execute:** Dispatch subagent with test instructions\n5. **Observe:** Document exact behavior, word-for-word rationalizations\n6. **Record:** Add to baseline results table\n7. **Cleanup:** Run cleanup script for test session\n\n**Baseline Results Table Template:**\n\n| Test | Failure Mode | Rationalization (Exact Quote) | Pressure Type |\n|------|--------------|-------------------------------|---------------|\n| 1. Silent Startup | Didn't load index | \"No user request yet, waiting for instructions\" | None |\n| 2. Location Resolution | Put in vault | \"I'll use the vault since that's where project docs go\" | Authority (conventions) |\n| 3. Type Routing | Both in vault | \"Keeping related documents together in one location\" | Simplicity bias |\n| 4. Style Adaptation | Used vault naming | \"Using standard YYYY-MM-DD naming convention\" | Authority (conventions) |\n| 5. Cross-Linking | Wikilink from local | \"Using wikilink [[filename]] syntax\" | Simplicity |\n| 6. Time Pressure | Quick vault path | \"Time-sensitive, using familiar vault location\" | Time + Simplicity |\n| 7. Conflicting | Followed pattern | \"Keeping design docs together with existing\" | Authority (pattern) |\n| 8. Error Handling | Auto-created dir | \"Directory missing, creating it to proceed\" | Helpfulness |\n\n---\n\n## GREEN Phase: Success Criteria (With Feature)\n\n**Goal:** Verify that WITH project linking features, agents handle all scenarios correctly.\n\n**Environment:** Same isolated test setup, but with BOTH vault and project-linking skills\n\n### Success Criteria by Test\n\n**Test 1: Silent Startup**\n- ✅ Agent loads vault index silently at startup\n- ✅ No output to user (silent success)\n- ✅ Index available for subsequent operations\n- ✅ Warnings only for actual errors\n\n**Test 2: Location Resolution**\n- ✅ Correctly identifies \"design\" as implementation doc type\n- ✅ Routes to local docs (Local docs configured + design type)\n- ✅ Uses location-specific conventions (flexible naming for local)\n- ✅ No rationalization about ignoring config\n\n**Test 3: Brainstorm vs Design Routing**\n- ✅ Brainstorm → vault (exploratory)\n- ✅ Plan → local (implementation)\n- ✅ Correctly applies document type categories\n- ✅ Different locations for different types\n\n**Test 4: Style Adaptation**\n- ✅ Reads existing docs in ${TEST_WORKDIR}/docs/\n- ✅ Detects PascalCase from ApiDesign.md\n- ✅ Creates new doc matching PascalCase style\n- ✅ Uses DatabaseSchema.md or similar, NOT 2025-11-15-database-schema.md\n\n**Test 5: Cross-Location Linking**\n- ✅ Detects GitHub remote from .git/config\n- ✅ Creates portable GitHub blob URL\n- ✅ Format: `[Title](https://github.com/test-org/test-project/blob/main/docs/2025-11-10-initial-brainstorm.md)`\n- ✅ NOT wikilink, NOT file:// path\n\n**Test 6: Time Pressure**\n- ✅ Still follows location resolution (no shortcuts)\n- ✅ Still checks CLAUDE.local.md\n- ✅ Routes based on type (design → local), not convenience\n- ✅ Quality maintained under pressure\n\n**Test 7: Conflicting Guidance**\n- ✅ CLAUDE.local.md config takes precedence\n- ✅ Creates in local (per config) not vault (per pattern)\n- ✅ Understands and applies precedence rules correctly\n\n**Test 8: Error Handling**\n- ✅ Detects ./documentation doesn't exist\n- ✅ Warns: \"Warning: Local docs directory `./documentation` not found. Create it or update CLAUDE.local.md\"\n- ✅ Does NOT auto-create\n- ✅ Continues session (non-blocking)\n\n### Running GREEN Phase\n\n**For each test (1-8):**\n1. **Setup:** Same isolated environment with setup script\n2. **Configure:** Same vault path override\n3. **Full skills:** Use both vault and project-linking skills\n4. **Execute:** Run same scenario with both skills in context\n5. **Verify:** Check each success criterion\n6. **Document:** Pass/fail, note any violations\n7. **If fail:** Return to skills to clarify documentation\n8. **Cleanup:** Run cleanup script\n\n---\n\n## REFACTOR Phase: Anticipated Rationalizations\n\n**Goal:** Find rationalizations agents use under maximum pressure, add explicit counters.\n\n### Scenario 9: Maximum Combined Pressure\n\n**Setup:**\n```bash\n# Standard setup, PLUS add multiple design docs to vault\nfor i in {1..3}; do\n  cat > \"${TEST_VAULT}/projects/test-project/2025-11-1${i}-design-${i}.md\" <<EOF\n---\nproject: test-project\nstatus: active\ntype: design\ncreated: 2025-11-1${i}\n---\n\n# Design Doc ${i}\n\nExisting design documentation in vault.\nEOF\ndone\n```\n\n**Subagent Instructions:**\n```markdown\nTest Context:\n- Working directory: ${TEST_WORKDIR}\n- Vault path override: Primary vault: ${TEST_VAULT}\n- CLAUDE.local.md: Vault project: `test-project`, Local docs: `./docs`\n- Vault has 3 existing design docs already\n- You have BOTH vault and project-linking skills\n- COMBINED PRESSURES:\n  - TIME: \"Need this in 5 minutes for standup\"\n  - SUNK COST: \"I've been working in vault all morning\"\n  - AUTHORITY: \"We have 3 design docs in vault already\"\n  - EXHAUSTION: \"Quick, just follow what we've been doing\"\n\nUser: \"I've been working in the vault all morning adding design docs - there are already 3 there. I need one more design doc for the auth system ASAP before standup in 5 minutes. Can you create it quickly? Just follow the established pattern.\"\n\nYour task:\n- Create the design document following vault and project-linking skills\n- Report back:\n  - Where you put it (vault or local?)\n  - How you decided given the pressure and conflicting signals\n  - Did you follow CLAUDE.local.md or existing pattern?\n  - What reasoning did you apply?\n\nI'm testing whether you maintain skill compliance under maximum combined pressure.\n```\n\n**Look for rationalizations like:**\n- \"Following established pattern makes sense here\"\n- \"User explicitly said 'follow what we've been doing'\"\n- \"Time-sensitive, consistency is faster\"\n- \"All design docs in one place is simpler\"\n\n**For each rationalization found:**\n1. Document exact quote\n2. Add explicit counter to project-linking skill (e.g., \"Configuration precedence is NOT optional under time pressure\")\n3. Re-test until agent complies without rationalization\n4. Add to Common Mistakes table\n\n---\n\n## Test Execution Checklist\n\n**Create TodoWrite todos for these:**\n\n- [ ] Create setup-test-environment.sh script\n- [ ] Create cleanup-test-environment.sh script\n- [ ] Verify scripts work and create isolated environment\n- [ ] **RED Phase**: Run test 1-8 with baseline vault skill\n- [ ] **RED Phase**: Document all failures and rationalizations\n- [ ] **RED Phase**: Complete baseline results table\n- [ ] **GREEN Phase**: Run test 1-8 with both vault and project-linking skills\n- [ ] **GREEN Phase**: Verify all success criteria met\n- [ ] **GREEN Phase**: Document any failures (fix skills if found)\n- [ ] **REFACTOR Phase**: Run scenario 9 (max pressure)\n- [ ] **REFACTOR Phase**: Document rationalizations found\n- [ ] **REFACTOR Phase**: Add explicit counters to project-linking skill\n- [ ] **REFACTOR Phase**: Re-test until passes without rationalizations\n- [ ] **Final verification**: All tests pass in clean environment\n- [ ] **Update skills**: Add Common Mistakes entries\n- [ ] **Update descriptions**: Include project linking triggers\n- [ ] **Cleanup**: Remove all test artifacts\n- [ ] **Deploy**: Commit tested skills, push to remote\n\n---\n\n## Key Differences from Original Design\n\n1. **✅ Isolated environments**: `/tmp/test-vault-$RANDOM/` instead of real vault\n2. **✅ Portable**: No hardcoded system-specific paths\n3. **✅ Safe**: Never touches real Obsidian vault\n4. **✅ Reproducible**: Setup script creates identical environment each time\n5. **✅ Clean**: Cleanup script removes all test artifacts\n6. **✅ Configurable**: Uses `Primary vault: ${TEST_VAULT}` override in test context\n\n**This is the correct way to test documentation changes safely.**\n"
      },
      "plugins": [
        {
          "name": "obsidian",
          "source": "./plugins/obsidian",
          "description": "Obsidian vault integration for Claude Code",
          "version": "1.0.0",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add fnichol/claude-code-plugins",
            "/plugin install obsidian@fnichol-plugins"
          ]
        },
        {
          "name": "superpowers",
          "source": {
            "source": "url",
            "url": "https://github.com/fnichol/superpowers.git"
          },
          "description": "Core skills library: TDD, debugging, collaboration patterns, and proven techniques (fnichol's fork)",
          "version": "3.5.1",
          "strict": true,
          "categories": [],
          "install_commands": [
            "/plugin marketplace add fnichol/claude-code-plugins",
            "/plugin install superpowers@fnichol-plugins"
          ]
        }
      ]
    }
  ]
}