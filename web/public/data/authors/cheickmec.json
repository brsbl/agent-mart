{
  "author": {
    "id": "cheickmec",
    "display_name": "Cheick Berthe",
    "avatar_url": "https://avatars.githubusercontent.com/u/12375818?u=319ac35137dfddb521fdc1e34e2da28fa229a312&v=4"
  },
  "marketplaces": [
    {
      "name": "smellcheck",
      "version": null,
      "description": "Python code smell detector with 83 patterns mapped to a refactoring catalog. AST-based, zero dependencies, stdlib only.",
      "repo_full_name": "cheickmec/smellcheck",
      "repo_url": "https://github.com/cheickmec/smellcheck",
      "repo_description": "Python code smell detector & refactoring guide — 82 patterns, 55 AST checks, zero dependencies. Works as Agent Skills plugin, PyPI package, GitHub Action, or pre-commit hook.",
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-02-21T02:20:58Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"smellcheck\",\n  \"owner\": {\n    \"name\": \"Cheick Berthe\",\n    \"email\": \"cheick@example.com\"\n  },\n  \"metadata\": {\n    \"description\": \"Python code smell detector with 83 patterns mapped to a refactoring catalog. AST-based, zero dependencies, stdlib only.\",\n    \"version\": \"0.3.7\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"python-refactoring\",\n      \"source\": \"./plugins/python-refactoring\",\n      \"description\": \"Python refactoring catalog with 83 patterns covering immutability, class design, control flow, architecture, OO metrics, and Python idioms. Analyze code for smells and apply numbered refactoring patterns.\",\n      \"version\": \"0.3.7\",\n      \"author\": {\n        \"name\": \"Cheick Berthe\"\n      },\n      \"license\": \"MIT\",\n      \"keywords\": [\n        \"python\",\n        \"refactoring\",\n        \"code-smells\",\n        \"ast\",\n        \"static-analysis\",\n        \"code-quality\"\n      ],\n      \"category\": \"development\"\n    }\n  ]\n}\n",
        "README.md": "<p align=\"center\">\n  <img src=\"https://raw.githubusercontent.com/cheickmec/smellcheck/main/assets/logo.png\" alt=\"smellcheck logo\" width=\"200\">\n</p>\n\n<h1 align=\"center\">smellcheck</h1>\n\n<p align=\"center\">\n  <strong>Python Code Smell Detector & Refactoring Guide</strong><br>\n  83 refactoring patterns &middot; 56 automated AST checks &middot; zero dependencies\n</p>\n\n<p align=\"center\">\n  <a href=\"https://pypi.org/project/smellcheck/\"><img src=\"https://img.shields.io/pypi/v/smellcheck\" alt=\"PyPI\"></a>\n  <a href=\"https://pypi.org/project/smellcheck/\"><img src=\"https://img.shields.io/pypi/pyversions/smellcheck\" alt=\"Python\"></a>\n  <a href=\"https://github.com/cheickmec/smellcheck/actions/workflows/ci.yml\"><img src=\"https://github.com/cheickmec/smellcheck/actions/workflows/ci.yml/badge.svg\" alt=\"CI\"></a>\n  <a href=\"https://pypistats.org/packages/smellcheck\"><img src=\"https://img.shields.io/pypi/dm/smellcheck\" alt=\"Downloads\"></a>\n  <a href=\"https://github.com/cheickmec/smellcheck/blob/main/docs/installation.md#pre-commit\"><img src=\"https://img.shields.io/badge/pre--commit-enabled-brightgreen?logo=pre-commit\" alt=\"pre-commit\"></a>\n  <a href=\"https://github.com/cheickmec/smellcheck/blob/main/LICENSE\"><img src=\"https://img.shields.io/github/license/cheickmec/smellcheck\" alt=\"License\"></a>\n</p>\n\n**smellcheck** is a Python code smell detector and refactoring catalog. It works as a pip-installable CLI, GitHub Action, pre-commit hook, or [Agent Skills](https://agentskills.io) plugin for AI coding assistants.\n\n**No dependencies.** Pure Python stdlib (`ast`, `pathlib`, `json`). Runs anywhere Python 3.10+ runs.\n\n> **What are code smells?** Code smells are surface-level patterns in source code that hint at deeper design problems — not bugs, but structural weaknesses that make code harder to maintain, extend, or understand. [Learn more →](https://github.com/cheickmec/smellcheck/blob/main/docs/code-smells-guide.md)\n\n## Installation\n\n### pip\n\n```bash\npip install smellcheck\n\nsmellcheck src/\nsmellcheck myfile.py --format json\nsmellcheck src/ --min-severity warning --fail-on warning\n```\n\nAlso available as a **GitHub Action**, **pre-commit hook**, **SARIF/Code Scanning** integration, **[Agent Skills](https://agentskills.io) plugin**, and **Cursor native plugin** for Claude Code, Cursor, Copilot, Gemini CLI, and more.\n\n**[Full installation guide →](https://github.com/cheickmec/smellcheck/blob/main/docs/installation.md)**\n\n## Usage\n\n```bash\n# Scan a directory\nsmellcheck src/\n\n# Scan multiple files\nsmellcheck file1.py file2.py\n\n# JSON output\nsmellcheck src/ --format json\n\n# GitHub Actions annotations\nsmellcheck src/ --format github\n\n# SARIF output (for GitHub Code Scanning)\nsmellcheck src/ --format sarif > results.sarif\n\n# JUnit XML output (for Jenkins, GitLab, CircleCI, Azure DevOps)\nsmellcheck src/ --format junit > smellcheck-results.xml\n\n# GitLab CodeClimate output (for MR code quality widget)\nsmellcheck src/ --format gitlab > gl-code-quality-report.json\n\n# Filter by severity\nsmellcheck src/ --min-severity warning\n\n# Control exit code\nsmellcheck src/ --fail-on warning   # exit 1 on warning or error\nsmellcheck src/ --fail-on info      # exit 1 on any finding\n\n# Run only specific checks\nsmellcheck src/ --select SC101,SC701,SC210\n\n# Skip specific checks\nsmellcheck src/ --ignore SC601,SC202\n\n# Module execution\npython3 -m smellcheck src/\n\n# Generate a baseline of current findings\nsmellcheck src/ --generate-baseline > .smellcheck-baseline.json\n\n# Only report findings not in the baseline\nsmellcheck src/ --baseline .smellcheck-baseline.json\n\n# Disable caching for a fresh scan\nsmellcheck src/ --no-cache\n\n# Use a custom cache directory\nsmellcheck src/ --cache-dir .my-cache\n\n# Clear cached results\nsmellcheck --clear-cache\n\n# Show documentation for a rule (description + before/after example)\nsmellcheck --explain SC701\n\n# List all rules in a family\nsmellcheck --explain SC4\n\n# List all rules grouped by family\nsmellcheck --explain all\n```\n\n## Configuration\n\nsmellcheck reads `[tool.smellcheck]` from the nearest `pyproject.toml`:\n\n```toml\n[tool.smellcheck]\nextends = \"base.toml\"               # inherit from a shared config file\nselect = [\"SC101\", \"SC201\", \"SC701\"]  # only run these checks (default: all)\nignore = [\"SC601\", \"SC202\"]          # skip these checks\nper-file-ignores = {\"tests/*\" = [\"SC201\", \"SC206\"]}  # per-path overrides\nfail-on = \"warning\"                  # override default fail-on\nformat = \"text\"                      # override default format\nbaseline = \".smellcheck-baseline.json\"  # suppress known findings\ncache = true                           # enable file-level caching (default: true)\ncache-dir = \".smellcheck-cache\"        # cache directory (default: .smellcheck-cache)\n```\n\nCLI flags override config values.\n\n### Config inheritance (`extends`)\n\nUse `extends` to inherit settings from a shared base config:\n\n```toml\n# base.toml — shared across repos\n[tool.smellcheck]\nignore = [\"SC601\"]\nfail-on = \"warning\"\n```\n\n```toml\n# pyproject.toml — project overrides\n[tool.smellcheck]\nextends = \"base.toml\"\nignore = [\"SC202\"]  # adds to base; final ignore = [\"SC601\", \"SC202\"]\n```\n\nMultiple bases are supported — later entries override earlier ones for scalar values, while `ignore` lists are unioned and `per-file-ignores` are deep-merged:\n\n```toml\nextends = [\"base.toml\", \"strict.toml\"]\n```\n\nPaths are relative to the file containing the `extends` key. Chains are resolved recursively (up to 5 levels deep).\n\n## Suppression\n\n### Per-line\n\nAdd `# noqa: SC701` to a line to suppress that check on that line:\n\n```python\ndef foo(x=[]):  # noqa: SC701\n    return x\n```\n\nUse `# noqa` (no codes) to suppress all findings on that line. Multiple codes: `# noqa: SC601,SC202`\n\n### Block-level\n\nDisable specific checks for a range of lines with `# smellcheck: disable` / `# smellcheck: enable`:\n\n```python\n# smellcheck: disable SC301, SC305\nclass LegacyGodObject:\n    \"\"\"This class is intentionally large for backward compatibility.\"\"\"\n\n    def method_one(self):\n        self._temp = compute()  # SC305 suppressed by block directive\n\n    def method_two(self):\n        use(self._temp)\n# smellcheck: enable SC301, SC305\n```\n\nDisable all checks for a range:\n\n```python\n# smellcheck: disable-all\n# ... everything in this range is suppressed ...\n# smellcheck: enable-all\n```\n\n### File-level\n\nSuppress checks for an entire file (place at top of file):\n\n```python\n# smellcheck: disable-file SC301, SC305\n```\n\nUse `# smellcheck: disable-file` (no codes) to suppress all checks for the entire file.\n\n### Scope rules\n\n- `disable` / `enable` apply from that line to the matching `enable` (or end of file if no match)\n- `disable-all` / `enable-all` work the same way but for all checks at once\n- `disable-file` applies to the entire file\n- Per-line `# noqa` still works alongside block directives\n- Block directives do not affect cross-file findings (use `per-file-ignores` in config instead)\n\n## Baseline\n\nFor large codebases, you can adopt smellcheck incrementally using a baseline file. The baseline records fingerprints of existing findings so only **new** issues are reported.\n\n```bash\n# 1. Generate a baseline from the current state\nsmellcheck src/ --generate-baseline > .smellcheck-baseline.json\n\n# 2. Run with the baseline — only new findings are reported\nsmellcheck src/ --baseline .smellcheck-baseline.json\n\n# 3. Or set it in pyproject.toml so every run uses it automatically\n```\n\nFingerprints are resilient to line-number changes — renaming or moving code around won't break the baseline. When you fix a baselined smell, its entry is silently ignored.\n\n`--generate-baseline` and `--baseline` are mutually exclusive.\n\n## Diff-Aware Scanning\n\nFocus on files you actually changed — skip the rest of the codebase:\n\n```bash\n# Only scan files changed vs. main branch\nsmellcheck src/ --diff main\n\n# Only scan files changed in the last commit\nsmellcheck src/ --diff HEAD~1\n\n# Only scan uncommitted changes (shorthand for --diff HEAD)\nsmellcheck src/ --changed-only\n```\n\nIn CI, this keeps PR feedback fast and relevant:\n\n```yaml\n- uses: cheickmec/smellcheck@v0\n  with:\n    diff: origin/main\n    fail-on: warning\n```\n\nCross-file checks (cyclic imports, shotgun surgery, etc.) run on the changed file set only. This is best-effort — for full cross-file accuracy, run without `--diff`.\n\n`--diff` and `--generate-baseline` are mutually exclusive. `--diff` composes with all other flags (`--baseline`, `--format`, `--fail-on`, `--select`, `--ignore`).\n\n## Caching\n\nsmellcheck caches per-file analysis results in `.smellcheck-cache/` to skip unchanged files on repeated scans. This is especially useful for pre-commit hooks and editor integrations.\n\nCache entries are keyed by file content hash, config hash, and smellcheck version — any change invalidates the relevant entry. Cross-file analysis (cyclic imports, duplicate code, etc.) always re-runs since it depends on the full file set.\n\n```bash\n# Caching is enabled by default — just run normally\nsmellcheck src/\n\n# Disable caching for a guaranteed fresh scan\nsmellcheck src/ --no-cache\n\n# Use a custom cache directory\nsmellcheck src/ --cache-dir /tmp/sc-cache\n\n# Clear all cached results\nsmellcheck --clear-cache\n```\n\nOld cache entries are not automatically evicted. Run `smellcheck --clear-cache` periodically or after upgrading to reclaim disk space.\n\nAdd `.smellcheck-cache/` to your `.gitignore`. You can also configure caching in `pyproject.toml`:\n\n```toml\n[tool.smellcheck]\ncache = false                    # disable caching\ncache-dir = \".smellcheck-cache\"  # custom cache directory\n```\n\n## Features\n\n- **56 automated smell checks** -- per-file AST analysis, cross-file dependency analysis, and OO metrics\n- **83 refactoring patterns** -- numbered catalog with before/after examples, trade-offs, and severity levels\n- **Zero dependencies** -- stdlib-only, runs on any Python 3.10+ installation\n- **Multiple output formats** -- text (terminal), JSON (machine-readable), GitHub annotations (CI), SARIF 2.1.0 (Code Scanning), JUnit XML (Jenkins/GitLab/CircleCI), GitLab CodeClimate (MR quality widget)\n- **Configurable** -- pyproject.toml config, inline suppression, CLI overrides\n- **Baseline support** -- adopt incrementally by suppressing existing findings and only failing on new ones\n- **File-level caching** -- content-hash based caching skips unchanged files for fast repeated scans\n- **Multiple distribution channels** -- pip, GitHub Action, pre-commit, Agent Skills ([full list](https://github.com/cheickmec/smellcheck/blob/main/docs/installation.md))\n\n## Detected Patterns\n\nEvery rule is identified by an **SC code** (e.g. `SC701`). Use SC codes in `--select`, `--ignore`, and `# noqa` comments.\n\n### Per-File (41 checks)\n\n| SC Code | Pattern | Severity |\n|---------|---------|----------|\n| SC101 | Setters (half-built objects) | warning |\n| SC102 | UPPER_CASE without Final | info |\n| SC103 | Unprotected public attributes | info |\n| SC104 | Half-built objects (init assigns None) | warning |\n| SC105 | Boolean flag parameters | info |\n| SC106 | Global mutable state | info |\n| SC107 | Sequential IDs | info |\n| SC201 | Long functions (>20 lines) | warning |\n| SC202 | Generic names (data, result, tmp) | info |\n| SC203 | input() in business logic | warning |\n| SC204 | Functions returning None or list | info |\n| SC205 | Excessive decorators (>3) | info |\n| SC206 | Too many parameters (>5) | warning |\n| SC207 | CQS violation (query + modify) | info |\n| SC208 | Unused function parameters | warning |\n| SC209 | Long lambda (>60 chars) | info |\n| SC210 | Cyclomatic complexity (>10) | warning |\n| SC301 | Extract class (too many methods) | info |\n| SC302 | isinstance chains | warning |\n| SC303 | Singleton pattern | warning |\n| SC304 | Dataclass candidate | info |\n| SC305 | Sequential tuple indexing | info |\n| SC306 | Lazy class (<2 methods) | info |\n| SC307 | Temporary fields | info |\n| SC401 | Dead code after return | warning |\n| SC402 | Deep nesting (>4 levels) | warning |\n| SC403 | Loop + append pattern | info |\n| SC404 | Complex boolean expressions | warning |\n| SC405 | Boolean control flag in loop | info |\n| SC406 | Complex comprehension (>2 generators) | info |\n| SC407 | Missing default else branch | info |\n| SC501 | Error codes instead of exceptions | warning |\n| SC502 | Law of Demeter violation | info |\n| SC601 | Magic numbers | info |\n| SC602 | Bare except / unused exception variable | error |\n| SC603 | String concatenation for multiline | info |\n| SC604 | contextlib candidate | info |\n| SC605 | Empty catch block | warning |\n| SC701 | Mutable default arguments | error |\n| SC702 | open() without context manager | warning |\n| SC703 | Blocking calls in async functions | warning |\n\n### Cross-File (10 checks)\n\n| SC Code | Pattern | Description |\n|---------|---------|-------------|\n| SC211 | Feature envy | Function accesses external attributes more than own |\n| SC308 | Deep inheritance | Inheritance depth >4 |\n| SC309 | Wide hierarchy | >5 direct subclasses |\n| SC503 | Cyclic imports | DFS cycle detection |\n| SC504 | God modules | >500 lines or >30 top-level definitions |\n| SC505 | Shotgun surgery | Function called from >5 different files |\n| SC506 | Inappropriate intimacy | >3 bidirectional class references between files |\n| SC507 | Speculative generality | Abstract class with no concrete subclasses |\n| SC508 | Unstable dependency | Stable module depends on unstable module |\n| SC606 | Duplicate functions | AST-normalized hashing across files |\n\n### OO Metrics (5 checks)\n\n| SC Code | Metric | Threshold |\n|---------|--------|-----------|\n| SC801 | Lack of Cohesion of Methods | >0.8 |\n| SC802 | Coupling Between Objects | >8 |\n| SC803 | Excessive Fan-Out | >15 |\n| SC804 | Response for a Class | >20 |\n| SC805 | Middle Man (delegation ratio) | >50% |\n\n## Refactoring Reference Files\n\nEach pattern includes a description, before/after code examples, and trade-offs:\n\n| File | Patterns |\n|------|----------|\n| [`state.md`](https://github.com/cheickmec/smellcheck/blob/main/plugins/python-refactoring/skills/python-refactoring/references/state.md) | Immutability, setters, attributes (SC101–SC107) |\n| [`functions.md`](https://github.com/cheickmec/smellcheck/blob/main/plugins/python-refactoring/skills/python-refactoring/references/functions.md) | Extraction, naming, parameters, CQS (SC201–SC210) |\n| [`types.md`](https://github.com/cheickmec/smellcheck/blob/main/plugins/python-refactoring/skills/python-refactoring/references/types.md) | Classes, reification, polymorphism, nulls (SC301–SC309) |\n| [`control.md`](https://github.com/cheickmec/smellcheck/blob/main/plugins/python-refactoring/skills/python-refactoring/references/control.md) | Guards, pipelines, conditionals, phases (SC401–SC407) |\n| [`architecture.md`](https://github.com/cheickmec/smellcheck/blob/main/plugins/python-refactoring/skills/python-refactoring/references/architecture.md) | DI, singletons, exceptions, delegates (SC501–SC508) |\n| [`hygiene.md`](https://github.com/cheickmec/smellcheck/blob/main/plugins/python-refactoring/skills/python-refactoring/references/hygiene.md) | Constants, dead code, comments, style (SC601–SC606) |\n| [`idioms.md`](https://github.com/cheickmec/smellcheck/blob/main/plugins/python-refactoring/skills/python-refactoring/references/idioms.md) | Context managers, generators, unpacking, async (SC701–SC703) |\n| [`metrics.md`](https://github.com/cheickmec/smellcheck/blob/main/plugins/python-refactoring/skills/python-refactoring/references/metrics.md) | OO metrics: cohesion, coupling, fan-out, response, delegation (SC801–SC805) |\n\n## How It Compares\n\n| Feature | smellcheck | [PyExamine](https://github.com/KarthikShivasankar/python_smells_detector) | [SMART-Dal](https://github.com/SMART-Dal/smell-detector-python) | [Pyscent](https://github.com/whyjay17/Pyscent) |\n|---------|------------|-----------|-----------|---------|\n| Automated detections | 56 | 49 | 31 | 11 |\n| Refactoring guidance | 83 patterns | None | None | None |\n| Dependencies | 0 (stdlib) | pylint, radon | DesigniteJava | pylint, radon, cohesion |\n| Python-specific idioms | Yes | No | No | No |\n| Cross-file analysis | Yes | Limited | Yes | No |\n| OO metrics | 5 | 19 | 0 | 1 |\n| Distribution channels | 4 (pip, GHA, pre-commit, Agent Skills) | 1 | 1 | 1 |\n\n## Contributing\n\nContributions welcome — see [CONTRIBUTING.md](https://github.com/cheickmec/smellcheck/blob/main/CONTRIBUTING.md) for the full guide. The core detector is `src/smellcheck/detector.py`; add new checks by extending the `SmellDetector` AST visitor class and adding a cross-file analysis function if needed.\n\n```bash\n# Development setup\ngit clone https://github.com/cheickmec/smellcheck.git\ncd smellcheck\npip install -e .\npip install pytest\n\n# Run tests\npytest tests/ -v\n\n# Self-check\nsmellcheck src/smellcheck/\n```\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "python-refactoring",
          "source": "./plugins/python-refactoring",
          "description": "Python refactoring catalog with 83 patterns covering immutability, class design, control flow, architecture, OO metrics, and Python idioms. Analyze code for smells and apply numbered refactoring patterns.",
          "version": "0.3.7",
          "author": {
            "name": "Cheick Berthe"
          },
          "license": "MIT",
          "keywords": [
            "python",
            "refactoring",
            "code-smells",
            "ast",
            "static-analysis",
            "code-quality"
          ],
          "category": "development",
          "categories": [
            "ast",
            "code-quality",
            "code-smells",
            "development",
            "python",
            "refactoring",
            "static-analysis"
          ],
          "install_commands": [
            "/plugin marketplace add cheickmec/smellcheck",
            "/plugin install python-refactoring@smellcheck"
          ]
        }
      ]
    }
  ]
}