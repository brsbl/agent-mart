{
  "author": {
    "id": "Olino3",
    "display_name": "kuat-systems-engineering",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/119822419?v=4",
    "url": "https://github.com/Olino3",
    "bio": null,
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 0,
      "total_skills": 2,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "forge-marketplace",
      "version": null,
      "description": "Sing, clear-voiced Muses, of Hephaestus famed for inventions.  With bright-eyed Athene he taught men glorious gifts throughout the world, -- men who before used to dwell in caves in the mountains like wild beasts.  But now that they have learned craft through Hephaestus the famed worker, easily they live a peaceful life in their own houses the whole year round.",
      "owner_info": {
        "name": "Olin Osborne III"
      },
      "keywords": [],
      "repo_full_name": "Olino3/forge",
      "repo_url": "https://github.com/Olino3/forge",
      "repo_description": "Forge is a marketplace for a Claude Code Plugins",
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-08T09:05:02Z",
        "created_at": "2025-11-13T23:29:17Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 565
        },
        {
          "path": "forge-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "forge-plugin/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "forge-plugin/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 324
        },
        {
          "path": "forge-plugin/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "forge-plugin/skills/get-git-diff",
          "type": "tree",
          "size": null
        },
        {
          "path": "forge-plugin/skills/get-git-diff/SKILL.md",
          "type": "blob",
          "size": 8842
        },
        {
          "path": "forge-plugin/skills/get-git-diff/examples.md",
          "type": "blob",
          "size": 11994
        },
        {
          "path": "forge-plugin/skills/get-git-diff/scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "forge-plugin/skills/get-git-diff/scripts/README.md",
          "type": "blob",
          "size": 6430
        },
        {
          "path": "forge-plugin/skills/get-git-diff/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "forge-plugin/skills/get-git-diff/templates/output_template.md",
          "type": "blob",
          "size": 6412
        },
        {
          "path": "forge-plugin/skills/python-code-review",
          "type": "tree",
          "size": null
        },
        {
          "path": "forge-plugin/skills/python-code-review/SKILL.md",
          "type": "blob",
          "size": 9387
        },
        {
          "path": "forge-plugin/skills/python-code-review/examples.md",
          "type": "blob",
          "size": 12129
        },
        {
          "path": "forge-plugin/skills/python-code-review/templates",
          "type": "tree",
          "size": null
        },
        {
          "path": "forge-plugin/skills/python-code-review/templates/inline_comment_template.md",
          "type": "blob",
          "size": 7834
        },
        {
          "path": "forge-plugin/skills/python-code-review/templates/report_template.md",
          "type": "blob",
          "size": 5264
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"forge-marketplace\",\n  \"owner\": {\n    \"name\": \"Olin Osborne III\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"forge-plugin\",\n      \"source\": \"./forge-plugin\",\n      \"description\": \"Sing, clear-voiced Muses, of Hephaestus famed for inventions.  With bright-eyed Athene he taught men glorious gifts throughout the world, -- men who before used to dwell in caves in the mountains like wild beasts.  But now that they have learned craft through Hephaestus the famed worker, easily they live a peaceful life in their own houses the whole year round.\"\n    }\n  ]\n}",
        "forge-plugin/.claude-plugin/plugin.json": "{\n    \"name\": \"forge-plugin\",\n    \"description\": \"Forge is plugin that brings the inventive spirit of Hephaestus and the wisdom of Athene to life, empowering users to craft innovative solutions and live peacefully with advanced technology.\",\n    \"version\": \"1.0.0\",\n    \"author\": {\n        \"name\": \"Olin Osborne III\"\n    }\n}",
        "forge-plugin/skills/get-git-diff/SKILL.md": "---\nname: get-git-diff\ndescription: Examines git diffs between commits or branches with intelligent analysis. Provides unified diff format with comprehensive summaries including file statistics, rename detection, and merge commit handling. Outputs formatted diffs to /claudedocs for documentation and review purposes.\n---\n\n# Git Diff Analyzer\n\n## �\u000f MANDATORY COMPLIANCE �\u000f\n\n**CRITICAL**: The 4-step workflow outlined in this document MUST be followed in exact order for EVERY diff analysis. Skipping steps or deviating from the procedure will result in incomplete analysis. This is non-negotiable.\n\n## File Structure\n\n- **SKILL.md** (this file): Main instructions and MANDATORY workflow\n- **examples.md**: Usage scenarios with different diff types\n- **../../context/git/**: Shared git context files\n  - `git_diff_reference.md`: Unified diff format reference and best practices\n  - `diff_patterns.md`: Common patterns to identify in code changes\n- **../../memory/skills/get-git-diff/**: Project-specific diff analysis memory\n  - `{project-name}/`: Per-project diff patterns and insights\n- **scripts/**:\n  - `README.md`: Complete documentation for all helper scripts\n  - `validate.sh`: Git repository and commit validation functions\n  - `commit_info.sh`: Commit metadata retrieval (hash, author, date, message)\n  - `diff_stats.sh`: Diff statistics and line count analysis\n  - `file_operations.sh`: File operation detection (add, modify, delete, rename)\n  - `utils.sh`: General utilities (branch detection, formatting, repo info)\n- **templates/**:\n  - `output_template.md`: Standard output format template\n\n## Analysis Focus Areas\n\nGit diff analysis evaluates 7 critical dimensions:\n\n1. **Change Scope**: Files affected, lines modified, overall impact radius\n2. **Change Type**: Feature addition, bug fix, refactoring, configuration change\n3. **Structural Changes**: File renames, moves, deletions, additions\n4. **Risk Assessment**: Breaking changes, API modifications, database migrations\n5. **Code Quality Impact**: Complexity changes, test coverage changes\n6. **Merge Conflicts**: Merge commit analysis, conflict resolution patterns\n7. **Performance Impact**: Algorithm changes, database query modifications, resource usage\n\n**Note**: Analysis depth is summary-level, focusing on what changed and high-level impact.\n\n---\n\n## MANDATORY WORKFLOW (MUST FOLLOW EXACTLY)\n\n### �\u000f STEP 1: Commit Identification (REQUIRED)\n\n**YOU MUST:**\n1. Check if commit hashes/branch names were provided in the triggering prompt\n2. If NOT provided, ask the user with these options:\n   - **Option A**: Compare specific commit hashes (ask for two commit SHAs)\n   - **Option B**: Compare HEAD of current branch to main/master\n   - **Option C**: Compare two branch names\n   - **Option D**: Compare current changes to a specific commit\n3. Validate that provided commits/branches exist in the repository\n4. Use `git rev-parse` to verify and get full commit hashes\n5. Get commit metadata (author, date, message) for both commits\n\n**DO NOT PROCEED WITHOUT VALID COMMITS**\n\n### �\u000f STEP 2: Execute Git Diff with Special Handling (REQUIRED)\n\n**YOU MUST:**\n1. Execute `git diff [commit1]...[commit2]` to get the unified diff\n2. Check for and handle special cases:\n   - **Large diffs** (>1000 lines): Warn user, offer to summarize only or proceed\n   - **Renamed files**: Use `git diff -M` to detect renames\n   - **Merge commits**: Use `git diff [commit]^...[commit]` for merge commit analysis\n   - **Binary files**: Note binary file changes separately\n3. Get diff statistics with `git diff --stat`\n4. Get file list with `git diff --name-status` to identify A/M/D/R operations\n\n**DO NOT SKIP SPECIAL CASE DETECTION**\n\n### �\u000f STEP 3: Analyze and Summarize (REQUIRED)\n\n**YOU MUST analyze and document**:\n1. **Commit Metadata**:\n   - Commit hashes (full and short)\n   - Author and date for both commits\n   - Commit messages\n   - Number of commits between the two refs (if applicable)\n\n2. **Change Statistics**:\n   - Total files changed\n   - Total insertions (+)\n   - Total deletions (-)\n   - Net change\n\n3. **File Operations**:\n   - Added files (A)\n   - Modified files (M)\n   - Deleted files (D)\n   - Renamed files (R) - show old vs new\n   - Copied files (C)\n\n4. **Change Categorization**:\n   - Group files by type (source code, tests, docs, config)\n   - Identify potential areas of impact\n   - Flag potentially risky changes\n\n5. **Special Notes**:\n   - Merge commit indicator (if applicable)\n   - Large diff warning (if >1000 lines)\n   - Binary file changes\n   - Submodule changes\n\n**DO NOT SKIP ANALYSIS**\n\n### � STEP 4: Generate Output & Update Project Memory (REQUIRED)\n\n**YOU MUST:**\n1. Use the template from `templates/output_template.md`\n2. Create filename: `diff_{short_hash1}_{short_hash2}.md`\n3. Include all components:\n   - Header with commit information\n   - Summary section with all statistics and analysis\n   - Full unified diff wrapped in markdown code blocks\n4. Save to `/claudedocs/` directory\n5. Confirm file was written successfully\n\n**Output Format Requirements**:\n- Unified diff must be in triple-backtick code blocks with `diff` language tag\n- Summary must be in clear markdown sections\n- File paths must use code formatting\n- Statistics must be in tables or lists\n- All sections must be clearly labeled\n\n**DO NOT OMIT ANY REQUIRED SECTIONS**\n\n**OPTIONAL: Update Project Memory**\n\nIf patterns emerge during analysis, consider storing insights in `../../memory/skills/get-git-diff/{project-name}/`:\n- Common file change patterns\n- Frequently modified areas\n- Notable commit patterns or conventions\n\n---\n\n## Special Case Handling\n\n### Large Diffs (>1000 lines)\n\nWhen encountering large diffs:\n1. Calculate total line count\n2. Warn user: \"This diff contains [N] lines across [M] files\"\n3. Ask user: \"Would you like to proceed with full diff or summary only?\"\n4. If summary only:\n   - Include all metadata and statistics\n   - List all changed files with their line counts\n   - Omit the detailed unified diff\n   - Note: \"Full diff omitted due to size. Use `git diff [hash1]...[hash2]` to view.\"\n\n### Renamed/Moved Files\n\nFor file renames:\n1. Use `git diff -M` flag to detect renames (default similarity index: 50%)\n2. In summary, clearly show: `old/path/file.py � new/path/file.py`\n3. Indicate if content was also modified: `R+M` (renamed and modified)\n4. In unified diff, show rename header: `rename from/to`\n\n### Merge Commits\n\nFor merge commits:\n1. Detect with `git rev-list --merges`\n2. Note in summary: \"This is a merge commit\"\n3. Show both parent commits\n4. Use `git diff [commit]^...[commit]` to show changes introduced by merge\n5. Optionally offer to show diff against each parent separately\n\n---\n\n## Compliance Checklist\n\nBefore completing ANY diff analysis, verify:\n- [ ] Step 1: Commits identified and validated\n- [ ] Step 2: Git diff executed with special case detection\n- [ ] Step 3: Complete analysis with all statistics and categorization\n- [ ] Step 4: Output generated in correct format and saved to /claudedocs\n\n**FAILURE TO COMPLETE ALL STEPS INVALIDATES THE ANALYSIS**\n\n---\n\n## Output File Naming Convention\n\n**Format**: `diff_{short1}_{short2}.md`\n\nWhere:\n- `{short1}` = First 7 characters of first commit hash\n- `{short2}` = First 7 characters of second commit hash\n\n**Examples**:\n- `diff_a1b2c3d_e4f5g6h.md` (commit to commit)\n- `diff_main_feature-branch.md` (branch comparison, if hashes not available)\n\n**Alternative for branches**: If comparing branch tips, you may use branch names if they're short and filesystem-safe.\n\n---\n\n## Git Commands Reference\n\n### Core Commands Used:\n```bash\n# Get commit info\ngit rev-parse [commit]\ngit log -1 --format=\"%H|%h|%an|%ae|%ad|%s\" [commit]\n\n# Generate diff\ngit diff [commit1]...[commit2]\ngit diff --stat [commit1]...[commit2]\ngit diff --name-status [commit1]...[commit2]\ngit diff -M [commit1]...[commit2]  # Detect renames\n\n# Special cases\ngit rev-list --merges [commit]  # Check if merge commit\ngit diff [commit]^1..[commit]   # Merge commit against first parent\n```\n\n---\n\n## Further Reading\n\nRefer to official documentation:\n- **Git Documentation**:\n  - Git Diff: https://git-scm.com/docs/git-diff\n  - Diff Format: https://git-scm.com/docs/diff-format\n- **Best Practices**:\n  - Pro Git Book: https://git-scm.com/book/en/v2\n  - Understanding Git Diff: https://git-scm.com/docs/git-diff#_generating_patches_with_p\n\n---\n\n## Version History\n\n- v1.1.0 (2025-01-XX): Centralized context and project memory\n  - Context files moved to ../../context/git/\n  - Project-specific memory system in ../../memory/skills/get-git-diff/\n  - Optional memory updates for common patterns\n- v1.0.0 (2025-11-13): Initial release\n  - Mandatory 4-step workflow\n  - Summary-level analysis with statistics\n  - Special handling for large diffs, renames, and merge commits\n  - Unified diff output to /claudedocs\n",
        "forge-plugin/skills/get-git-diff/examples.md": "# Git Diff Analyzer Examples\n\nThis file contains example scenarios demonstrating how to use the get-git-diff skill for various diff analysis tasks.\n\n---\n\n## Example 1: Comparing Two Specific Commits\n\n### Scenario\nDeveloper wants to see what changed between two feature commits.\n\n### User Prompt\n```\nI need to see the diff between commits a1b2c3d and e4f5g6h\n```\n\n### Skill Execution\n\n**Step 1 - Commit Identification**:\n- Commits provided: `a1b2c3d` and `e4f5g6h`\n- Validate: `git rev-parse a1b2c3d e4f5g6h`\n- Get metadata: `git log -1 --format=\"%H|%h|%an|%ae|%ad|%s\" [commit]`\n\n**Step 2 - Execute Diff**:\n```bash\ngit diff a1b2c3d...e4f5g6h\ngit diff --stat a1b2c3d...e4f5g6h\ngit diff --name-status a1b2c3d...e4f5g6h\n```\n\n**Step 3 - Analysis**:\n```\nCommit Metadata:\n- From: a1b2c3d (John Doe, 2025-11-01, \"Add user authentication\")\n- To: e4f5g6h (Jane Smith, 2025-11-13, \"Refactor auth module\")\n- Commits between: 15\n\nStatistics:\n- Files changed: 8\n- Insertions: 234\n- Deletions: 156\n- Net change: +78\n\nFile Operations:\n- Modified: src/auth/login.py, src/auth/session.py, tests/test_auth.py\n- Added: src/auth/jwt_handler.py, src/auth/validators.py\n- Deleted: src/auth/legacy_auth.py\n```\n\n**Step 4 - Output**:\nFile: `/claudedocs/diff_a1b2c3d_e4f5g6h.md`\n\n---\n\n## Example 2: Comparing Current Branch to Main\n\n### Scenario\nDeveloper wants to review all changes in feature branch before creating a PR.\n\n### User Prompt\n```\nShow me the diff for my feature branch compared to main\n```\n\n### Skill Response\nSince no specific commits provided, ask user:\n- Option A: Compare specific commit hashes\n- Option B: Compare HEAD of current branch to main ← **User selects this**\n- Option C: Compare two branch names\n- Option D: Compare current changes to a specific commit\n\n**Step 1 - Commit Identification**:\n```bash\n# Get current branch\ngit rev-parse --abbrev-ref HEAD  # Returns: feature/new-api\n\n# Get commit hashes\ngit rev-parse main              # Returns: d7e8f9a...\ngit rev-parse HEAD              # Returns: m3n4o5p...\n```\n\n**Step 2 - Execute Diff**:\n```bash\ngit diff main...HEAD\ngit diff --stat main...HEAD\ngit diff --name-status main...HEAD\n```\n\n**Step 3 - Analysis**:\n```\nComparing: main (d7e8f9a) → feature/new-api (m3n4o5p)\n\nStatistics:\n- Files changed: 12\n- Insertions: 567\n- Deletions: 89\n- Net change: +478\n\nFile Operations:\n- Added: src/api/v2/endpoints.py, src/api/v2/schemas.py, tests/api/test_v2.py\n- Modified: src/api/router.py, src/main.py, README.md\n- Deleted: (none)\n\nChange Categorization:\n- Source code: 8 files (src/api/*, src/main.py)\n- Tests: 3 files (tests/api/*)\n- Documentation: 1 file (README.md)\n\nImpact Areas:\n- API routing layer\n- Request/response schemas\n- Test coverage\n```\n\n**Step 4 - Output**:\nFile: `/claudedocs/diff_d7e8f9a_m3n4o5p.md`\n\n---\n\n## Example 3: Large Diff Handling\n\n### Scenario\nComparing two commits with extensive changes (e.g., major refactoring or dependency update).\n\n### User Prompt\n```\nCompare commit abc1234 to def5678\n```\n\n**Step 2 - Execute Diff**:\n```bash\ngit diff --stat abc1234...def5678\n# Output shows: 87 files changed, 15234 insertions(+), 12456 deletions(-)\n```\n\n**Large Diff Detected**: Total lines = 27,690\n\n**Skill Response**:\n⚠️ **Large Diff Warning**\n\nThis diff contains 27,690 lines across 87 files. This is a substantial change set.\n\nWould you like to:\n- **Option A**: Proceed with full diff (will be very long)\n- **Option B**: Summary only (statistics and file list, no line-by-line diff)\n\n**User selects**: Option B - Summary only\n\n**Step 3 - Analysis**:\n```\nCommit Metadata:\n- From: abc1234 (Team Lead, 2025-10-15, \"Update dependencies to Python 3.12\")\n- To: def5678 (Team Lead, 2025-11-13, \"Complete Python 3.12 migration\")\n\nStatistics:\n- Files changed: 87\n- Insertions: 15,234\n- Deletions: 12,456\n- Net change: +2,778\n\nTop Changed Files:\n1. requirements.txt (+45, -32)\n2. src/core/utils.py (+234, -189)\n3. tests/test_compatibility.py (+456, -123)\n... (84 more files)\n\nChange Categorization:\n- Dependency files: 3 files\n- Source code: 62 files\n- Tests: 18 files\n- Documentation: 4 files\n\nImpact Assessment:\n⚠️ Major refactoring detected\n⚠️ Breaking changes likely\n⚠️ Extensive test updates\n```\n\n**Step 4 - Output**:\nFile: `/claudedocs/diff_abc1234_def5678.md`\n\n**Note in output**: \"Full unified diff omitted due to size (27,690 lines). Use `git diff abc1234...def5678` to view complete diff.\"\n\n---\n\n## Example 4: Renamed Files Detection\n\n### Scenario\nDeveloper refactored project structure, moving files to new directories.\n\n### User Prompt\n```\nShow me what changed in the refactoring commit x9y8z7w\n```\n\n**Step 1 - Commit Identification**:\n- Comparing: x9y8z7w^ (parent) → x9y8z7w (the refactoring commit)\n\n**Step 2 - Execute Diff with Rename Detection**:\n```bash\ngit diff -M x9y8z7w^...x9y8z7w\ngit diff --name-status -M x9y8z7w^...x9y8z7w\n```\n\nOutput:\n```\nR100    src/utils.py → src/core/utils.py\nR100    src/helpers.py → src/core/helpers.py\nR085    src/auth.py → src/auth/main.py\nM       src/main.py\nA       src/core/__init__.py\n```\n\n**Step 3 - Analysis**:\n```\nCommit Metadata:\n- Commit: x9y8z7w (Developer, 2025-11-12, \"Refactor: reorganize project structure\")\n\nStatistics:\n- Files changed: 6\n- Insertions: 45\n- Deletions: 12\n- Net change: +33\n\nFile Operations:\n- Renamed (no changes):\n  • src/utils.py → src/core/utils.py\n  • src/helpers.py → src/core/helpers.py\n\n- Renamed + Modified (85% similarity):\n  • src/auth.py → src/auth/main.py\n\n- Modified:\n  • src/main.py (updated imports)\n\n- Added:\n  • src/core/__init__.py (new package init)\n\nChange Type: Refactoring\nRisk Assessment: Medium (import paths changed, may break external references)\n```\n\n**Step 4 - Output**:\nFile: `/claudedocs/diff_w6v5u4t_x9y8z7w.md`\n\n---\n\n## Example 5: Merge Commit Analysis\n\n### Scenario\nDeveloper wants to understand what a merge commit introduced.\n\n### User Prompt\n```\nAnalyze the merge commit m1e2r3g4\n```\n\n**Step 1 - Commit Identification**:\n```bash\ngit rev-list --merges m1e2r3g4^..m1e2r3g4\n# Confirms: m1e2r3g4 is a merge commit\n\ngit log -1 --format=\"%P\" m1e2r3g4\n# Returns: a1b2c3d e4f5g6h (two parents)\n```\n\n**Skill Response**:\n⚠️ **Merge Commit Detected**\n\nThis is a merge commit with two parents:\n- Parent 1: a1b2c3d (main branch)\n- Parent 2: e4f5g6h (feature branch)\n\n**Step 2 - Execute Diff**:\n```bash\n# Show changes introduced by the merge (against first parent)\ngit diff m1e2r3g4^1...m1e2r3g4\ngit diff --stat m1e2r3g4^1...m1e2r3g4\n```\n\n**Step 3 - Analysis**:\n```\nMerge Commit Metadata:\n- Commit: m1e2r3g4\n- Author: John Doe\n- Date: 2025-11-13\n- Message: \"Merge feature/user-profiles into main\"\n- Parent 1 (base): a1b2c3d (main)\n- Parent 2 (merged): e4f5g6h (feature/user-profiles)\n\nStatistics:\n- Files changed: 15\n- Insertions: 892\n- Deletions: 134\n- Net change: +758\n\nMerged Branch Summary:\n- Branch: feature/user-profiles\n- Commits merged: 23\n- Primary changes:\n  • New user profile management system\n  • Profile API endpoints\n  • Profile database models\n  • Associated tests\n\nChange Categorization:\n- Source code: 9 files (src/profiles/*, src/api/profiles.py)\n- Database: 2 files (migrations/*, models/profile.py)\n- Tests: 3 files (tests/profiles/*)\n- Documentation: 1 file (docs/api.md)\n\nMerge Notes:\n✓ No merge conflicts (clean merge)\n✓ All tests passing (based on commit message)\n```\n\n**Step 4 - Output**:\nFile: `/claudedocs/diff_a1b2c3d_m1e2r3g4.md`\n\nSpecial note in file: \"This is a merge commit analysis showing changes introduced by merging feature/user-profiles into main.\"\n\n---\n\n## Example 6: Comparing Branches by Name\n\n### Scenario\nDeveloper wants to see differences between two branches without knowing commit hashes.\n\n### User Prompt\n```\nCompare the staging branch to the production branch\n```\n\n**Skill Response**:\nNo specific commits provided. Asking user for comparison target...\n\nUser selects: **Option C - Compare two branch names**\n\nPlease provide:\n- First branch: **production**\n- Second branch: **staging**\n\n**Step 1 - Commit Identification**:\n```bash\ngit rev-parse production  # Returns: p1r2o3d...\ngit rev-parse staging     # Returns: s4t5a6g...\n\ngit log --oneline production..staging\n# Shows: 8 commits ahead\n```\n\n**Step 3 - Analysis**:\n```\nComparing Branches:\n- production (p1r2o3d): \"Release v2.1.0\" (2025-11-01)\n- staging (s4t5a6g): \"Add feature X\" (2025-11-13)\n- Commits ahead: 8\n- Commits behind: 0\n\nStatistics:\n- Files changed: 24\n- Insertions: 1,234\n- Deletions: 456\n- Net change: +778\n\nFile Operations:\n- Added: 8 files (new features)\n- Modified: 14 files (enhancements)\n- Deleted: 2 files (deprecated code)\n\nImpact Assessment:\n✓ Ready for production deployment\n✓ All features tested in staging\n⚠️ Database migration required (see migrations/0023_add_feature_x.py)\n```\n\n**Step 4 - Output**:\nFile: `/claudedocs/diff_p1r2o3d_s4t5a6g.md`\n\n---\n\n## Example 7: Current Working Directory Changes\n\n### Scenario\nDeveloper has uncommitted changes and wants to see diff against last commit.\n\n### User Prompt\n```\nShow me my current uncommitted changes\n```\n\n**Skill Response**:\nNo specific commits provided. Asking user...\n\nUser selects: **Option D - Compare current changes to a specific commit**\n\nPlease provide the commit to compare against (or press Enter for HEAD): **[User presses Enter]**\n\n**Step 1 - Commit Identification**:\n```bash\n# Comparing working directory against HEAD\ngit rev-parse HEAD  # Returns: h3e4a5d...\n```\n\n**Step 2 - Execute Diff**:\n```bash\ngit diff HEAD\ngit diff --stat HEAD\ngit diff --name-status HEAD\n```\n\n**Step 3 - Analysis**:\n```\nWorking Directory Changes:\n- Base commit: h3e4a5d (HEAD, \"Latest commit\")\n- Status: Uncommitted changes\n\nStatistics:\n- Files changed: 3\n- Insertions: 67\n- Deletions: 23\n- Net change: +44\n\nFile Operations:\n- Modified:\n  • src/api/endpoints.py (+45, -12)\n  • tests/test_api.py (+18, -8)\n  • README.md (+4, -3)\n\nChange Type: Feature development (in progress)\nStatus: ⚠️ Uncommitted - not yet in version control\n```\n\n**Step 4 - Output**:\nFile: `/claudedocs/diff_h3e4a5d_working.md`\n\n---\n\n## Example 8: Binary Files in Diff\n\n### Scenario\nDiff includes binary file changes (images, PDFs, compiled files).\n\n### User Prompt\n```\nCompare commit old123 to new456\n```\n\n**Step 2 - Execute Diff**:\n```bash\ngit diff --stat old123...new456\ngit diff --name-status old123...new456\n```\n\nOutput includes:\n```\nM   docs/architecture.pdf\nM   static/images/logo.png\nA   static/images/hero.jpg\n```\n\n**Step 3 - Analysis**:\n```\nStatistics:\n- Files changed: 15\n- Text files: 12 (analyzed in diff)\n- Binary files: 3 (listed separately)\n\nText File Changes:\n- Insertions: 234\n- Deletions: 156\n- Net change: +78\n\nBinary File Changes:\n- Modified:\n  • docs/architecture.pdf (binary file changed)\n  • static/images/logo.png (binary file changed)\n- Added:\n  • static/images/hero.jpg (new binary file)\n\nNote: Binary file content changes not shown in diff.\nUse `git show old123:path` and `git show new456:path` to extract binary files.\n```\n\n**Step 4 - Output**:\nFile includes note: \"⚠️ This diff contains 3 binary files. Binary content not displayed. See summary for list of affected binary files.\"\n\n---\n\n## Summary of Use Cases\n\n1. **Two specific commits** - Direct comparison with full metadata\n2. **Branch to main** - Pre-PR review workflow\n3. **Large diffs** - Summary-only option for massive changes\n4. **Renamed files** - Detect and document file restructuring\n5. **Merge commits** - Special handling with parent information\n6. **Branch comparison** - Compare branch tips by name\n7. **Working directory** - Review uncommitted changes\n8. **Binary files** - Special notation for non-text files\n\n## Best Practices\n\n- Always validate commits exist before running diff\n- For large diffs, offer summary option first\n- Clearly indicate merge commits with special notation\n- Show both old and new paths for renamed files\n- Categorize changes by file type and impact area\n- Provide actionable insights in the summary\n- Save output with descriptive filenames\n- Include enough metadata for audit trail\n",
        "forge-plugin/skills/get-git-diff/scripts/README.md": "# Git Diff Helper Scripts\n\nThis directory contains bash utility scripts for git diff operations used by the get-git-diff skill.\n\n## Scripts Overview\n\n### validate.sh\nValidation and verification functions.\n\n**Functions:**\n- `is_git_repo()` - Check if in a git repository\n- `validate_commit <ref>` - Validate a commit reference\n- `validate_commit_pair <ref1> <ref2>` - Validate two commits\n\n**Usage:**\n```bash\nsource validate.sh\nif is_git_repo; then\n    validate_commit \"HEAD\"\nfi\n```\n\n### commit_info.sh\nCommit information and metadata retrieval.\n\n**Functions:**\n- `get_commit_info <ref>` - Get full commit information\n- `get_short_hash <ref>` - Get 7-character hash\n- `is_merge_commit <ref>` - Check if merge commit\n- `get_commits_between <ref1> <ref2>` - Count commits between refs\n- `get_commit_message <ref>` - Get commit message\n- `get_commit_author <ref>` - Get commit author\n- `get_commit_date <ref>` - Get commit date\n\n**Usage:**\n```bash\nsource commit_info.sh\ninfo=$(get_commit_info \"HEAD\")\nIFS='|' read -r full short author email date message <<< \"$info\"\necho \"Commit: $short - $message\"\n```\n\n### diff_stats.sh\nDiff statistics and analysis.\n\n**Functions:**\n- `get_diff_stats <ref1> <ref2>` - Get diff statistics\n- `get_file_stats <ref1> <ref2>` - Get per-file statistics\n- `is_large_diff <ref1> <ref2> [threshold]` - Check if diff is large\n- `get_total_lines <ref1> <ref2>` - Get total lines changed\n- `get_files_changed <ref1> <ref2>` - Get file count\n\n**Usage:**\n```bash\nsource diff_stats.sh\nstats=$(get_diff_stats \"HEAD^\" \"HEAD\")\nIFS=$'\\t' read -r files ins del net <<< \"$stats\"\necho \"Changed: $files files, +$ins -$del\"\n```\n\n### file_operations.sh\nFile operation analysis (add, modify, delete, rename).\n\n**Functions:**\n- `get_file_operations <ref1> <ref2>` - Get file operations\n- `count_file_operations <ref1> <ref2>` - Count operations by type\n- `get_files_by_operation <ref1> <ref2> <type>` - Filter by operation (A/M/D/R)\n- `get_renamed_files <ref1> <ref2>` - Get renames with similarity\n- `get_binary_files <ref1> <ref2>` - Get binary files\n- `count_binary_files <ref1> <ref2>` - Count binary files\n- `categorize_files` - Categorize files by type (reads from stdin)\n- `get_categorized_counts <ref1> <ref2>` - Get category counts\n\n**Usage:**\n```bash\nsource file_operations.sh\ncounts=$(count_file_operations \"main\" \"feature-branch\")\nIFS=$'\\t' read -r added modified deleted renamed copied <<< \"$counts\"\necho \"Added: $added, Modified: $modified\"\n```\n\n### utils.sh\nGeneral utility functions.\n\n**Functions:**\n- `get_current_branch()` - Get current branch name\n- `get_default_branch()` - Get default branch (main/master)\n- `format_diff_filename <hash1> <hash2>` - Format output filename\n- `get_repo_root()` - Get repository root path\n- `get_repo_name()` - Get repository name\n- `get_remote_url [remote]` - Get remote URL\n- `is_ancestor <ref1> <ref2>` - Check if ref1 is ancestor of ref2\n- `get_common_ancestor <ref1> <ref2>` - Get merge base\n- `format_timestamp [format]` - Format current timestamp\n- `ensure_directory <path>` - Create directory if needed\n- `get_git_config <key>` - Get git config value\n- `is_working_tree_clean()` - Check for uncommitted changes\n- `get_branches [type]` - List branches (local/remote/all)\n- `ref_exists <ref>` - Check if ref exists\n\n**Usage:**\n```bash\nsource utils.sh\nbranch=$(get_current_branch)\nfilename=$(format_diff_filename \"abc123\" \"def456\")\n```\n\n## Running Scripts Directly\n\nAll scripts can be sourced for their functions or run directly for examples:\n\n```bash\n# Run directly for examples\n./commit_info.sh HEAD\n./diff_stats.sh HEAD^ HEAD\n./file_operations.sh main feature-branch\n./utils.sh\n\n# Source for functions\nsource diff_stats.sh\nif is_large_diff \"HEAD^\" \"HEAD\" 500; then\n    echo \"Large diff detected!\"\nfi\n```\n\n## Complete Example\n\n```bash\n#!/usr/bin/env bash\n\n# Source all helper scripts\nSCRIPT_DIR=\"$(dirname \"${BASH_SOURCE[0]}\")\"\nsource \"${SCRIPT_DIR}/validate.sh\"\nsource \"${SCRIPT_DIR}/commit_info.sh\"\nsource \"${SCRIPT_DIR}/diff_stats.sh\"\nsource \"${SCRIPT_DIR}/file_operations.sh\"\nsource \"${SCRIPT_DIR}/utils.sh\"\n\n# Validate we're in a git repo\nif ! is_git_repo; then\n    echo \"Error: Not in a git repository\"\n    exit 1\nfi\n\n# Get commits to compare\ncommit1=\"HEAD^\"\ncommit2=\"HEAD\"\n\n# Validate commits\nif ! validate_commit_pair \"$commit1\" \"$commit2\" >/dev/null; then\n    echo \"Error: Invalid commits\"\n    exit 1\nfi\n\n# Get commit info\ninfo1=$(get_commit_info \"$commit1\")\ninfo2=$(get_commit_info \"$commit2\")\nIFS='|' read -r _ short1 _ _ _ msg1 <<< \"$info1\"\nIFS='|' read -r _ short2 _ _ _ msg2 <<< \"$info2\"\n\necho \"Comparing: $short1 → $short2\"\n\n# Get statistics\nstats=$(get_diff_stats \"$commit1\" \"$commit2\")\nIFS=$'\\t' read -r files ins del net <<< \"$stats\"\n\necho \"Files: $files\"\necho \"Changes: +$ins -$del (net: $net)\"\n\n# Check if large\nif is_large_diff \"$commit1\" \"$commit2\"; then\n    total=$(is_large_diff \"$commit1\" \"$commit2\")\n    echo \"⚠ Large diff: $total lines\"\nfi\n\n# File operations\nops=$(count_file_operations \"$commit1\" \"$commit2\")\nIFS=$'\\t' read -r added modified deleted renamed _ <<< \"$ops\"\n\necho \"Added: $added, Modified: $modified\"\nif [[ $renamed -gt 0 ]]; then\n    echo \"Renamed files:\"\n    get_renamed_files \"$commit1\" \"$commit2\" | while IFS=$'\\t' read -r sim old new; do\n        echo \"  $old → $new ($sim%)\"\n    done\nfi\n\n# Generate filename\nfilename=$(format_diff_filename \"$short1\" \"$short2\")\necho \"Output: $filename\"\n```\n\n## Error Handling\n\nAll scripts use `set -euo pipefail` for strict error handling:\n- `-e`: Exit on error\n- `-u`: Exit on undefined variable\n- `-o pipefail`: Fail on pipe errors\n\nWhen sourcing, you may want to disable this:\n```bash\nset +euo pipefail\nsource diff_stats.sh\nset -euo pipefail\n```\n\n## Dependencies\n\n- bash 4.0+\n- git 2.0+\n- Standard Unix utilities (awk, sed, cut, wc)\n\n## Testing\n\nEach script includes a main section that runs when executed directly:\n\n```bash\n# Test all scripts\n./validate.sh HEAD\n./commit_info.sh HEAD HEAD^\n./diff_stats.sh HEAD^ HEAD\n./file_operations.sh HEAD^ HEAD\n./utils.sh\n```\n\n## Integration with Skill\n\nThese scripts are designed to be used by Claude Code when executing the get-git-diff skill. They provide reliable, composable functions for git diff analysis.\n\nExample integration:\n```bash\n# In skill execution\nsource scripts/validate.sh\nsource scripts/diff_stats.sh\n\nif validate_commit \"$user_commit\"; then\n    stats=$(get_diff_stats \"$user_commit\" \"HEAD\")\n    # Process stats...\nfi\n```\n",
        "forge-plugin/skills/get-git-diff/templates/output_template.md": "# Git Diff: [SHORT_HASH_1] → [SHORT_HASH_2]\n\n**Generated**: [YYYY-MM-DD HH:MM:SS]\n**Skill**: get-git-diff v1.0.0\n\n---\n\n## Commit Information\n\n### From Commit\n- **Hash**: `[FULL_HASH_1]` ([SHORT_HASH_1])\n- **Author**: [AUTHOR_NAME] <[AUTHOR_EMAIL]>\n- **Date**: [COMMIT_DATE_1]\n- **Message**: [COMMIT_MESSAGE_1]\n\n### To Commit\n- **Hash**: `[FULL_HASH_2]` ([SHORT_HASH_2])\n- **Author**: [AUTHOR_NAME] <[AUTHOR_EMAIL]>\n- **Date**: [COMMIT_DATE_2]\n- **Message**: [COMMIT_MESSAGE_2]\n\n### Comparison Details\n- **Commits Between**: [N] commits\n- **Branch Context**: [BRANCH_INFO] (if applicable)\n- **Merge Commit**: [Yes/No] (if applicable)\n\n---\n\n## Summary\n\n### Change Statistics\n\n| Metric | Count |\n|--------|-------|\n| Files Changed | [N] |\n| Insertions | [N] (+) |\n| Deletions | [N] (-) |\n| Net Change | [±N] |\n\n### File Operations\n\n#### Added Files ([N])\n[If any files were added, list them here]\n- `path/to/new_file.py`\n- `path/to/another_file.js`\n\n#### Modified Files ([N])\n[If any files were modified, list them here]\n- `src/module.py` (+[N], -[N])\n- `tests/test_module.py` (+[N], -[N])\n\n#### Deleted Files ([N])\n[If any files were deleted, list them here]\n- `old/deprecated_file.py`\n\n#### Renamed Files ([N])\n[If any files were renamed, list them here]\n- `old/path/file.py` → `new/path/file.py` ([SIMILARITY]%)\n\n#### Binary Files ([N])\n[If any binary files changed, list them here]\n- `static/images/logo.png` (binary)\n- `docs/manual.pdf` (binary)\n\n---\n\n## Change Categorization\n\n### By File Type\n\n| Category | Files | Insertions | Deletions |\n|----------|-------|------------|-----------|\n| Source Code | [N] | [N] | [N] |\n| Tests | [N] | [N] | [N] |\n| Documentation | [N] | [N] | [N] |\n| Configuration | [N] | [N] | [N] |\n| Database | [N] | [N] | [N] |\n| Other | [N] | [N] | [N] |\n\n### Change Type Assessment\n[Based on patterns identified]\n- **Primary Type**: [Feature Addition / Bug Fix / Refactoring / etc.]\n- **Impact Areas**:\n  - [Area 1 - e.g., Authentication system]\n  - [Area 2 - e.g., User API endpoints]\n  - [Area 3 - e.g., Test coverage]\n\n### Risk Assessment\n[Based on change patterns and areas affected]\n- **Risk Level**: [Low / Medium / High / Critical]\n- **Risk Factors**:\n  - [Factor 1 - e.g., Database schema changes]\n  - [Factor 2 - e.g., Breaking API changes]\n  - [Factor 3 - e.g., Security-sensitive code modified]\n\n---\n\n## Special Notes\n\n[Include any special considerations or warnings]\n\n### Large Diff Warning\n[If applicable]\n⚠️ **This diff contains [N] lines across [M] files.** This is a substantial change set.\n[If summary only: \"Full unified diff omitted due to size. Use `git diff [hash1]...[hash2]` to view complete diff.\"]\n\n### Merge Commit\n[If applicable]\n⚠️ **This is a merge commit** merging [BRANCH_NAME] into [BASE_BRANCH].\n- Parent 1: [HASH] ([BRANCH])\n- Parent 2: [HASH] ([BRANCH])\n\n### Binary Changes\n[If applicable]\n⚠️ **This diff includes [N] binary files.** Binary content is not displayed in the diff below.\n\n### Renamed Files\n[If applicable]\nℹ️ **[N] files were renamed or moved.** Old and new paths are shown above with similarity percentages.\n\n---\n\n## Detailed Diff\n\n[If full diff is included, otherwise note that it was omitted]\n\n```diff\n[FULL_UNIFIED_DIFF_OUTPUT]\n\nExample format:\ndiff --git a/src/module.py b/src/module.py\nindex abc123..def456 100644\n--- a/src/module.py\n+++ b/src/module.py\n@@ -10,7 +10,8 @@ def my_function():\n     # Unchanged line\n-    old_line = \"removed\"\n+    new_line = \"added\"\n+    another_line = \"also added\"\n     # More context\n\ndiff --git a/tests/test_module.py b/tests/test_module.py\nindex 111222..333444 100644\n--- a/tests/test_module.py\n+++ b/tests/test_module.py\n@@ -5,3 +5,6 @@ def test_my_function():\n     assert my_function() is not None\n+\n+def test_new_behavior():\n+    assert new_line == \"added\"\n```\n\n---\n\n## Recommendations\n\n[Optional section with actionable recommendations based on diff analysis]\n\n### Testing\n- [ ] Verify all tests pass with these changes\n- [ ] Add tests for any new functionality\n- [ ] Check test coverage for modified areas\n\n### Code Review Focus\n- [ ] Review [specific area] for correctness\n- [ ] Validate [specific concern] is addressed\n- [ ] Ensure backward compatibility for [specific component]\n\n### Deployment Considerations\n- [ ] Update environment variables if config changed\n- [ ] Run database migrations if schema changed\n- [ ] Update documentation if API changed\n- [ ] Coordinate with [team] if [specific area] changed\n\n---\n\n## Related Commands\n\n```bash\n# View this diff locally\ngit diff [SHORT_HASH_1]...[SHORT_HASH_2]\n\n# View with file names only\ngit diff --name-status [SHORT_HASH_1]...[SHORT_HASH_2]\n\n# View with statistics\ngit diff --stat [SHORT_HASH_1]...[SHORT_HASH_2]\n\n# View specific file from this diff\ngit diff [SHORT_HASH_1]...[SHORT_HASH_2] -- path/to/file\n\n# View commit messages in range\ngit log --oneline [SHORT_HASH_1]..[SHORT_HASH_2]\n```\n\n---\n\n## Metadata\n\n- **Analyzed by**: Claude Code get-git-diff skill v1.0.0\n- **Analysis date**: [YYYY-MM-DD HH:MM:SS]\n- **Repository**: [REPO_PATH or REPO_URL if available]\n- **Output format**: Standard Unified Diff with Summary\n\n---\n\n<!--\nTemplate Usage Instructions:\n\nReplace all placeholders in [BRACKETS] with actual values:\n- [SHORT_HASH_1/2] - 7-character commit hash\n- [FULL_HASH_1/2] - Full 40-character commit hash\n- [AUTHOR_NAME] - Commit author name\n- [AUTHOR_EMAIL] - Commit author email\n- [COMMIT_DATE_1/2] - Commit date\n- [COMMIT_MESSAGE_1/2] - Commit message (first line)\n- [N] - Numeric values (file counts, line counts, etc.)\n- [BRANCH_INFO] - Branch context information\n- [SIMILARITY] - Similarity percentage for renames\n- [FULL_UNIFIED_DIFF_OUTPUT] - Complete git diff output\n\nConditional Sections:\n- Include \"Large Diff Warning\" only if diff > 1000 lines\n- Include \"Merge Commit\" only if commit is a merge\n- Include \"Binary Changes\" only if binary files present\n- Include \"Renamed Files\" only if renames detected\n- Omit empty categories (e.g., if no files deleted, omit that section)\n\nFormatting:\n- Use proper markdown syntax\n- Wrap code/paths in backticks: `path/to/file`\n- Use tables for structured data\n- Use bullet lists for items\n- Use checkboxes [ ] for action items\n- Use emoji/symbols sparingly: ⚠️ for warnings, ℹ️ for info\n\nOutput Location:\n- Save to: /claudedocs/diff_{short_hash1}_{short_hash2}.md\n- Ensure /claudedocs directory exists\n- Use filesystem-safe characters only\n-->\n",
        "forge-plugin/skills/python-code-review/SKILL.md": "---\nname: python-code-review\ndescription: Deep Python code review of changed files using git diff analysis. Focuses on production quality, security vulnerabilities, performance bottlenecks, architectural issues, and subtle bugs in code changes. Analyzes correctness, efficiency, scalability, and production readiness of modifications. Use for pull request reviews, commit reviews, security audits of changes, and pre-deployment validation. Supports Django, Flask, FastAPI, pandas, and ML frameworks.\n---\n\n# Python Code Review Expert\n\n## ⚠️ MANDATORY COMPLIANCE ⚠️\n\n**CRITICAL**: The 5-step workflow outlined in this document MUST be followed in exact order for EVERY code review. Skipping steps or deviating from the procedure will result in incomplete and unreliable reviews. This is non-negotiable.\n\n## File Structure\n\n- **SKILL.md** (this file): Main instructions and MANDATORY workflow\n- **examples.md**: Review scenarios with before/after examples\n- **../../context/python/**: Framework patterns and detection logic\n  - `context_detection.md`, `common_issues.md`, `{framework}_patterns.md`\n- **../../context/security/**: Security guidelines and OWASP references\n  - `security_guidelines.md`, `owasp_python.md`\n- **../../memory/skills/python-code-review/**: Project-specific memory storage\n  - `{project-name}/`: Per-project learned patterns and context\n- **templates/**: `report_template.md`, `inline_comment_template.md`\n\n## Review Focus Areas\n\nDeep reviews evaluate 8 critical dimensions **in the changed code**:\n\n1. **Production Quality**: Correctness, edge cases, error recovery, resilience\n2. **Deep Bugs**: Race conditions, memory leaks, resource exhaustion, subtle logic errors\n3. **Security**: Injection flaws, auth bypasses, insecure deserialization, data exposure\n4. **Performance**: Algorithmic complexity, N+1 queries, memory inefficiency, I/O blocking\n5. **Architecture**: Tight coupling, missing abstractions, SOLID violations, circular deps\n6. **Reliability**: Transaction safety, error handling, resource leaks, idempotency\n7. **Scalability**: Concurrency issues, connection pooling, pagination, unbounded consumption\n8. **Testing**: Missing critical tests, inadequate edge case coverage\n\n**Note**: Focus on substantive issues requiring human judgment, not style/formatting details. Reviews are performed on changed code only, using the `get-git-diff` skill to identify modifications.\n\n---\n\n## MANDATORY WORKFLOW (MUST FOLLOW EXACTLY)\n\n### ⚠️ STEP 1: Identify Changed Files via Git Diff (REQUIRED)\n\n**YOU MUST:**\n1. **Invoke the `get-git-diff` skill** to identify changed Python files\n2. Ask clarifying questions to determine comparison scope:\n   - Which commits/branches to compare? (e.g., `HEAD^ vs HEAD`, `main vs feature-branch`)\n   - If not specified, default to comparing current changes against the default branch\n   - Use the diff output to extract the list of modified Python files (`.py` extension)\n3. If no Python files were changed, inform the user and exit gracefully\n4. Focus subsequent review ONLY on the files identified in the diff\n\n**DO NOT PROCEED WITHOUT GIT DIFF ANALYSIS**\n\n### ⚠️ STEP 2: Load Project Memory & Context Detection (REQUIRED)\n\n**YOU MUST:**\n1. **CHECK PROJECT MEMORY FIRST**: \n   - Identify the project name from the repository root or ask the user\n   - Check `../../memory/skills/python-code-review/{project-name}/` for existing project memory\n   - If memory exists, read all files to understand previously learned patterns, frameworks, and project-specific context\n   - If no memory exists, you will create it later in this process\n2. Analyze changed files' structure and imports\n3. **READ** `../../context/python/context_detection.md` to identify framework\n4. Determine which framework-specific patterns file(s) to load\n5. Ask clarifying questions in Socratic format:\n   - What is the purpose of these changes?\n   - Specific concerns to focus on?\n   - Deployment environment?\n   - Any project-specific conventions or patterns to be aware of?\n\n**DO NOT PROCEED WITHOUT COMPLETING THIS STEP**\n\n### ⚠️ STEP 3: Read Pattern Files (REQUIRED)\n\n**YOU MUST read these files based on context**:\n\n1. **ALWAYS**: `../../context/python/common_issues.md` (universal anti-patterns and deep bugs)\n2. **If Django detected**: `../../context/python/django_patterns.md`\n3. **If Flask detected**: `../../context/python/flask_patterns.md`\n4. **If FastAPI detected**: `../../context/python/fastapi_patterns.md`\n5. **If data science detected**: `../../context/python/datascience_patterns.md`\n6. **If ML detected**: `../../context/python/ml_patterns.md`\n7. **For security reviews**: `../../context/security/security_guidelines.md` AND `../../context/security/owasp_python.md`\n\n**Progressive loading**: Only read framework files when detected. Don't load all upfront.\n\n**DO NOT SKIP PATTERN FILE READING**\n\n### ⚠️ STEP 4: Deep Manual Review of Changed Code (REQUIRED)\n\n**YOU MUST examine ONLY the changed code for ALL categories below**:\n\n**Important**: While reviewing changed lines, consider the surrounding context to understand:\n- How changes interact with existing code\n- Whether changes introduce regressions\n- Impact on callers and dependent code\n- Whether the change addresses the root cause or masks symptoms\n\n**Review Categories**:\n\n**Production Readiness**: Edge cases, input validation, error recovery, resource cleanup, timeouts\n**Deep Bugs**: Race conditions, memory leaks, off-by-one errors, unhandled exceptions, state corruption, infinite loops, integer overflow, timezone issues\n**Architecture**: Tight coupling, missing abstractions, SOLID violations, global state, circular dependencies\n**Security**: SQL/NoSQL/Command injection, auth bypasses, insecure deserialization, SSRF, XXE, crypto weaknesses, data exposure, missing rate limiting\n**Performance**: O(n²) complexity, N+1 queries, memory leaks, blocking I/O in async, missing indexes, inefficient data structures, cache stampede\n**Scalability**: Connection pool exhaustion, lock contention, deadlocks, missing pagination, unbounded consumption\n**Reliability**: Transaction boundaries, data races, resource leaks, missing idempotency\n\n**DO NOT SKIP ANY CATEGORY**\n\n### ⚠️ STEP 5: Generate Output & Update Project Memory (REQUIRED)\n\n**YOU MUST ask user for preferred output format**:\n\n- **Option A**: Structured report (`templates/report_template.md`) → executive summary, categorized findings, action items → output to `claudedocs/`\n- **Option B**: Inline comments (`templates/inline_comment_template.md`) → file:line feedback, PR-style\n- **Option C (Default)**: Both formats\n\n**DO NOT CHOOSE FORMAT WITHOUT USER INPUT**\n\n**For EVERY issue in the output, YOU MUST provide**:\n1. **Severity**: Critical / Important / Minor\n2. **Category**: Security / Performance / Code Quality / Architecture / Reliability\n3. **Description**: What is wrong and why it matters\n4. **Fix**: Concrete code example with improvement\n5. **Reference**: Link to PEP, OWASP, or framework docs\n6. **File:line**: Exact location (e.g., `auth.py:142`)\n\n**Format guidelines**:\n- Explain WHY (not just what)\n- Show HOW to fix with examples\n- Be specific with file:line references\n- Be balanced (acknowledge good patterns)\n- Educate, don't criticize\n\n**DO NOT PROVIDE INCOMPLETE RECOMMENDATIONS**\n\n**After completing the review, UPDATE PROJECT MEMORY**:\n\nCreate or update files in `../../memory/skills/python-code-review/{project-name}/`:\n\n1. **project_overview.md**: Framework, architecture patterns, deployment info\n2. **common_patterns.md**: Project-specific coding patterns and conventions discovered\n3. **known_issues.md**: Recurring issues or anti-patterns found in this project\n4. **review_history.md**: Summary of reviews performed with dates and key findings\n\nThis memory will be consulted in future reviews to provide context-aware analysis.\n\n---\n\n## Compliance Checklist\n\nBefore completing ANY review, verify:\n- [ ] Step 1: Git diff analyzed using `get-git-diff` skill and changed Python files identified\n- [ ] Step 2: Project memory checked in `../../memory/skills/python-code-review/{project-name}/` and context detected\n- [ ] Step 3: All relevant pattern files read from `../../context/python/` and `../../context/security/`\n- [ ] Step 4: Manual review completed for ALL categories on changed code only\n- [ ] Step 5: Output generated with all required fields AND project memory updated\n\n**FAILURE TO COMPLETE ALL STEPS INVALIDATES THE REVIEW**\n\n## Further Reading\n\nRefer to the official documentation:\n- **Python Standards**:\n  - Python PEPs: https://peps.python.org/\n  - OWASP Python Security: https://owasp.org/www-project-python-security/\n- **Frameworks**:\n  - Django, Flask, FastAPI official documentation\n- **Best Practices**:\n  - Real Python: https://realpython.com/\n\n## Version History\n\n- v2.1.0 (2025-11-14): Refactored to use centralized context and project-specific memory system\n  - Context files moved to `forge-plugin/context/python/` and `forge-plugin/context/security/`\n  - Project memory stored in `forge-plugin/memory/skills/python-code-review/{project-name}/`\n  - Added project memory loading and persistence in workflow\n- v2.0.0 (2025-11-13): Changed to diff-based review using `get-git-diff` skill - reviews only changed code\n- v1.1.0 (2025-11-13): Removed automated analysis and linting/formatting tools\n- v1.0.0 (2025-11-13): Initial release\n",
        "forge-plugin/skills/python-code-review/examples.md": "# Python Code Review Examples\n\nThis file contains example code review scenarios demonstrating common issues and recommended fixes.\n\n## Example 1: Security Vulnerability - SQL Injection\n\n### Before (Vulnerable Code)\n\n```python\n# user_service.py:15\ndef get_user_by_email(email):\n    query = f\"SELECT * FROM users WHERE email = '{email}'\"\n    cursor.execute(query)\n    return cursor.fetchone()\n```\n\n### Review Comment\n\n**Severity**: Critical\n**Category**: Security\n**File**: user_service.py:16\n\nSQL injection vulnerability detected. User input is directly interpolated into SQL query, allowing attackers to execute arbitrary SQL commands.\n\n**Attack example**:\n```python\nemail = \"'; DROP TABLE users; --\"\n# Results in: SELECT * FROM users WHERE email = ''; DROP TABLE users; --'\n```\n\n### After (Fixed Code)\n\n```python\n# user_service.py:15\ndef get_user_by_email(email):\n    query = \"SELECT * FROM users WHERE email = %s\"\n    cursor.execute(query, (email,))\n    return cursor.fetchone()\n```\n\n**Reference**: OWASP A03:2021 - Injection\n\n---\n\n## Example 2: Performance Issue - N+1 Query Problem (Django)\n\n### Before (Inefficient Code)\n\n```python\n# views.py:45\ndef get_posts_with_authors(request):\n    posts = Post.objects.all()  # 1 query\n    result = []\n    for post in posts:\n        result.append({\n            'title': post.title,\n            'author': post.author.name  # N additional queries!\n        })\n    return JsonResponse(result, safe=False)\n```\n\n### Review Comment\n\n**Severity**: Important\n**Category**: Performance\n**File**: views.py:48\n\nN+1 query problem detected. For 100 posts, this executes 101 database queries (1 for posts + 100 for authors). This causes severe performance degradation under load.\n\n### After (Optimized Code)\n\n```python\n# views.py:45\ndef get_posts_with_authors(request):\n    posts = Post.objects.select_related('author').all()  # 1 query with JOIN\n    result = []\n    for post in posts:\n        result.append({\n            'title': post.title,\n            'author': post.author.name\n        })\n    return JsonResponse(result, safe=False)\n```\n\n**Performance gain**: 101 queries → 1 query (100x improvement for 100 posts)\n\n**Reference**: Django QuerySet optimization\n\n---\n\n## Example 3: Code Quality - Mutable Default Argument\n\n### Before (Buggy Code)\n\n```python\n# utils.py:22\ndef add_item(item, items=[]):\n    items.append(item)\n    return items\n\n# Usage that reveals the bug:\nlist1 = add_item('a')  # ['a']\nlist2 = add_item('b')  # ['a', 'b'] - UNEXPECTED!\n```\n\n### Review Comment\n\n**Severity**: Important\n**Category**: Code Quality\n**File**: utils.py:22\n\nMutable default argument antipattern. The default list `[]` is created once when the function is defined, not each time it's called. All invocations share the same list object, causing unexpected state persistence.\n\n### After (Fixed Code)\n\n```python\n# utils.py:22\ndef add_item(item, items=None):\n    if items is None:\n        items = []\n    items.append(item)\n    return items\n\n# Now works correctly:\nlist1 = add_item('a')  # ['a']\nlist2 = add_item('b')  # ['b'] - CORRECT!\n```\n\n**Reference**: Common Python Gotchas\n\n---\n\n## Example 4: PEP 8 Compliance - Naming Conventions\n\n### Before (Non-compliant Code)\n\n```python\n# data_processor.py:10\ndef CalculateUserAge(BirthDate):\n    CurrentYear = 2025\n    user_birth_year = BirthDate.year\n    AGE = CurrentYear - user_birth_year\n    return AGE\n```\n\n### Review Comment\n\n**Severity**: Minor\n**Category**: Style\n**File**: data_processor.py:10-15\n\nMultiple PEP 8 naming violations:\n- Function name should be `snake_case`, not `PascalCase`\n- Parameter name should be `snake_case`, not `PascalCase`\n- Local variables should be lowercase, not mixed case or UPPERCASE\n- UPPERCASE is reserved for constants\n\n### After (Compliant Code)\n\n```python\n# data_processor.py:10\ndef calculate_user_age(birth_date):\n    current_year = 2025\n    user_birth_year = birth_date.year\n    age = current_year - user_birth_year\n    return age\n```\n\n**Reference**: PEP 8 - Naming Conventions\n\n---\n\n## Example 5: Best Practice - Context Manager for Resource Handling\n\n### Before (Resource Leak Risk)\n\n```python\n# file_processor.py:30\ndef process_log_file(filepath):\n    file = open(filepath, 'r')\n    data = file.read()\n    results = analyze(data)\n    file.close()  # May not execute if analyze() raises exception\n    return results\n```\n\n### Review Comment\n\n**Severity**: Important\n**Category**: Best Practices\n**File**: file_processor.py:31\n\nMissing context manager for file handling. If `analyze()` raises an exception, `file.close()` never executes, leaving the file handle open (resource leak).\n\n### After (Safe Code)\n\n```python\n# file_processor.py:30\ndef process_log_file(filepath):\n    with open(filepath, 'r') as file:\n        data = file.read()\n        results = analyze(data)\n    # File automatically closed even if exception occurs\n    return results\n```\n\n**Bonus improvement**:\n```python\n# Even better with pathlib\nfrom pathlib import Path\n\ndef process_log_file(filepath):\n    data = Path(filepath).read_text()\n    return analyze(data)\n```\n\n**Reference**: PEP 343 - The \"with\" Statement\n\n---\n\n## Example 6: Security - Hardcoded Credentials\n\n### Before (Security Risk)\n\n```python\n# config.py:5\nDATABASE_CONFIG = {\n    'host': 'prod-db.example.com',\n    'user': 'admin',\n    'password': 'SuperSecret123!',  # NEVER do this\n    'database': 'production'\n}\n```\n\n### Review Comment\n\n**Severity**: Critical\n**Category**: Security\n**File**: config.py:8\n\nHardcoded credentials detected. Passwords in source code:\n1. Are visible to anyone with repository access\n2. Get committed to version control history\n3. Can't be rotated without code changes\n4. May be exposed in logs or error messages\n\n### After (Secure Code)\n\n```python\n# config.py:5\nimport os\n\nDATABASE_CONFIG = {\n    'host': os.getenv('DB_HOST', 'localhost'),\n    'user': os.getenv('DB_USER'),\n    'password': os.getenv('DB_PASSWORD'),\n    'database': os.getenv('DB_NAME', 'production')\n}\n\n# Validate required environment variables\nrequired_vars = ['DB_USER', 'DB_PASSWORD']\nmissing = [var for var in required_vars if not os.getenv(var)]\nif missing:\n    raise RuntimeError(f\"Missing required environment variables: {missing}\")\n```\n\n**Additional security**:\n```bash\n# Use environment files (not committed to git)\necho \"DB_PASSWORD=...\" > .env\necho \".env\" >> .gitignore\n```\n\n**Reference**: OWASP A07:2021 - Identification and Authentication Failures\n\n---\n\n## Example 7: Performance - Pandas Optimization\n\n### Before (Inefficient Code)\n\n```python\n# data_analysis.py:50\nimport pandas as pd\n\ndef calculate_discounts(df):\n    # Anti-pattern: Iterating over DataFrame rows\n    discounts = []\n    for index, row in df.iterrows():\n        if row['total'] > 100:\n            discount = row['total'] * 0.1\n        else:\n            discount = 0\n        discounts.append(discount)\n    df['discount'] = discounts\n    return df\n```\n\n### Review Comment\n\n**Severity**: Important\n**Category**: Performance\n**File**: data_analysis.py:53\n\nUsing `iterrows()` on DataFrame - this is one of the slowest operations in pandas. For 10,000 rows, this can be 100x slower than vectorized operations.\n\n### After (Vectorized Code)\n\n```python\n# data_analysis.py:50\nimport pandas as pd\n\ndef calculate_discounts(df):\n    # Vectorized operation - operates on entire column at once\n    df['discount'] = (df['total'] * 0.1).where(df['total'] > 100, 0)\n    return df\n\n# Alternative using numpy where:\nimport numpy as np\n\ndef calculate_discounts(df):\n    df['discount'] = np.where(df['total'] > 100, df['total'] * 0.1, 0)\n    return df\n```\n\n**Performance**: Vectorized operations use optimized C code, achieving 50-100x speedup on large datasets.\n\n**Reference**: Pandas Performance Optimization\n\n---\n\n## Example 8: Testing - Missing Edge Cases\n\n### Before (Incomplete Tests)\n\n```python\n# test_validators.py:15\ndef test_email_validation():\n    assert is_valid_email('user@example.com') == True\n    assert is_valid_email('invalid-email') == False\n```\n\n### Review Comment\n\n**Severity**: Important\n**Category**: Testing\n**File**: test_validators.py:15\n\nEmail validation tests are insufficient. Missing edge cases:\n- Empty string\n- None value\n- Email with special characters\n- Multiple @ symbols\n- Missing domain\n- Whitespace handling\n- Maximum length validation\n\n### After (Comprehensive Tests)\n\n```python\n# test_validators.py:15\nimport pytest\n\n@pytest.mark.parametrize('email,expected', [\n    # Valid emails\n    ('user@example.com', True),\n    ('first.last@example.co.uk', True),\n    ('user+tag@example.com', True),\n\n    # Invalid emails\n    ('invalid-email', False),\n    ('', False),\n    ('user@', False),\n    ('user@@example.com', False),\n    ('@example.com', False),\n    ('user @example.com', False),\n    ('a' * 256 + '@example.com', False),  # Too long\n])\ndef test_email_validation(email, expected):\n    assert is_valid_email(email) == expected\n\ndef test_email_validation_with_none():\n    with pytest.raises(TypeError):\n        is_valid_email(None)\n```\n\n**Reference**: Testing Best Practices\n\n---\n\n## Example 9: Architecture - Separation of Concerns (FastAPI)\n\n### Before (Tightly Coupled Code)\n\n```python\n# main.py:25\nfrom fastapi import FastAPI\nimport psycopg2\n\napp = FastAPI()\n\n@app.get('/users/{user_id}')\ndef get_user(user_id: int):\n    # Business logic mixed with data access and presentation\n    conn = psycopg2.connect(\"dbname=mydb user=admin password=secret\")\n    cursor = conn.cursor()\n    cursor.execute(f\"SELECT * FROM users WHERE id = {user_id}\")\n    user = cursor.fetchone()\n    conn.close()\n\n    if user:\n        return {'id': user[0], 'name': user[1], 'email': user[2]}\n    return {'error': 'User not found'}\n```\n\n### Review Comment\n\n**Severity**: Important\n**Category**: Architecture\n**File**: main.py:25-38\n\nMultiple violations of separation of concerns:\n1. Database connection logic in route handler\n2. SQL injection vulnerability\n3. Hardcoded credentials\n4. No error handling\n5. Manual dict construction\n6. No dependency injection\n\n### After (Layered Architecture)\n\n```python\n# models.py\nfrom pydantic import BaseModel\n\nclass User(BaseModel):\n    id: int\n    name: str\n    email: str\n\n# database.py\nfrom sqlalchemy import create_engine\nfrom sqlalchemy.orm import sessionmaker\nimport os\n\nSQLALCHEMY_DATABASE_URL = os.getenv('DATABASE_URL')\nengine = create_engine(SQLALCHEMY_DATABASE_URL)\nSessionLocal = sessionmaker(bind=engine)\n\ndef get_db():\n    db = SessionLocal()\n    try:\n        yield db\n    finally:\n        db.close()\n\n# repositories.py\nfrom sqlalchemy.orm import Session\nfrom . import models\n\nclass UserRepository:\n    def get_by_id(self, db: Session, user_id: int):\n        return db.query(models.User).filter(models.User.id == user_id).first()\n\n# main.py\nfrom fastapi import FastAPI, Depends, HTTPException\nfrom sqlalchemy.orm import Session\nfrom . import models, database, repositories\n\napp = FastAPI()\nuser_repo = UserRepository()\n\n@app.get('/users/{user_id}', response_model=models.User)\ndef get_user(user_id: int, db: Session = Depends(database.get_db)):\n    user = user_repo.get_by_id(db, user_id)\n    if not user:\n        raise HTTPException(status_code=404, detail='User not found')\n    return user\n```\n\n**Benefits**:\n- Clear separation of concerns\n- Dependency injection\n- Type safety with Pydantic\n- SQL injection protection via ORM\n- Reusable repository pattern\n- Proper error handling\n\n**Reference**: FastAPI Best Practices, Repository Pattern\n\n---\n\n## Summary of Common Issues\n\n1. **Security**: SQL injection, XSS, hardcoded credentials, insecure cryptography\n2. **Performance**: N+1 queries, inefficient loops, missing indexes, no caching\n3. **Code Quality**: Mutable defaults, global state, poor naming, missing docstrings\n4. **Style**: PEP 8 violations, inconsistent formatting, magic numbers\n5. **Best Practices**: Missing context managers, no type hints, poor error handling\n6. **Testing**: Insufficient coverage, missing edge cases, no integration tests\n7. **Architecture**: Tight coupling, mixed concerns, no dependency injection\n\nUse these examples as reference when conducting reviews. Adapt the feedback style and technical depth to the codebase context.\n",
        "forge-plugin/skills/python-code-review/templates/inline_comment_template.md": "# Inline Code Review Comments Template\n\nThis template provides examples of inline PR-style comments for different types of issues.\n\n---\n\n## Critical Issues\n\n### Security Vulnerability\n\n**File**: `auth.py:45`\n\n```python\n# Current code\nuser = db.execute(f\"SELECT * FROM users WHERE username = '{username}'\")\n```\n\n**Issue**: SQL Injection Vulnerability\n\n**Severity**: 🔴 Critical\n\n**Description**:\nUser input is directly interpolated into the SQL query, allowing attackers to execute arbitrary SQL commands.\n\n**Attack Vector**:\n```python\nusername = \"admin' OR '1'='1\"\n# Results in: SELECT * FROM users WHERE username = 'admin' OR '1'='1'\n```\n\n**Fix**:\n```python\n# Use parameterized queries\nuser = db.execute(\"SELECT * FROM users WHERE username = %s\", (username,))\n\n# Or use ORM\nuser = User.query.filter_by(username=username).first()\n```\n\n**Reference**: OWASP A03:2021 - Injection\n\n---\n\n### Data Corruption Risk\n\n**File**: `payment.py:123`\n\n```python\n# Current code\norder.amount -= discount\norder.save()\npayment.process(order.amount)\n```\n\n**Issue**: Race Condition in Payment Processing\n\n**Severity**: 🔴 Critical\n\n**Description**:\nIf two requests process the same order simultaneously, the discount could be applied twice, leading to incorrect payment amounts.\n\n**Fix**:\n```python\nfrom django.db import transaction\n\n@transaction.atomic\ndef process_payment(order_id, discount):\n    order = Order.objects.select_for_update().get(id=order_id)\n    order.amount -= discount\n    order.save()\n    payment.process(order.amount)\n```\n\n---\n\n## Important Issues\n\n### Performance Bottleneck\n\n**File**: `views.py:67`\n\n```python\n# Current code\nposts = Post.objects.all()\nfor post in posts:\n    print(post.author.name)  # N+1 query problem\n```\n\n**Issue**: N+1 Query Problem\n\n**Severity**: 🟡 Important\n\n**Impact**: For 100 posts, this executes 101 database queries instead of 1.\n\n**Performance**: ~1000ms → ~10ms (100x improvement)\n\n**Fix**:\n```python\nposts = Post.objects.select_related('author').all()\nfor post in posts:\n    print(post.author.name)  # No additional queries\n```\n\n---\n\n### Type Safety Issue\n\n**File**: `utils.py:234`\n\n```python\ndef calculate_total(prices):\n    return sum(prices) * 1.1\n```\n\n**Issue**: Missing Type Hints\n\n**Severity**: 🟡 Important\n\n**Description**:\nFunction lacks type hints, making it unclear what types are expected and returned. Could lead to runtime errors.\n\n**Fix**:\n```python\ndef calculate_total(prices: list[float]) -> float:\n    \"\"\"Calculate total with 10% tax.\n\n    Args:\n        prices: List of item prices\n\n    Returns:\n        Total amount including tax\n    \"\"\"\n    return sum(prices) * 1.1\n```\n\n---\n\n### Architectural Concern\n\n**File**: `api.py:89`\n\n```python\n@app.route('/process')\ndef process_data():\n    # 150 lines of business logic mixed with HTTP handling\n    data = request.get_json()\n    # ... lots of processing ...\n    return jsonify(result)\n```\n\n**Issue**: Fat Controller / Missing Service Layer\n\n**Severity**: 🟡 Important\n\n**Impact**:\n- Hard to test business logic\n- Violates Single Responsibility Principle\n- Difficult to reuse logic elsewhere\n\n**Recommendation**:\n```python\n# services/data_processor.py\nclass DataProcessor:\n    def process(self, data: dict) -> dict:\n        # Business logic here\n        return result\n\n# api.py\n@app.route('/process')\ndef process_data():\n    data = request.get_json()\n    processor = DataProcessor()\n    result = processor.process(data)\n    return jsonify(result)\n```\n\n---\n\n## Minor Issues\n\n### Code Smell\n\n**File**: `helpers.py:45`\n\n```python\ndef append_to_list(item, items=[]):  # Mutable default argument!\n    items.append(item)\n    return items\n```\n\n**Issue**: Mutable Default Argument\n\n**Severity**: 🔵 Minor\n\n**Bug**: Default list is shared between all function calls, causing unexpected behavior.\n\n**Example**:\n```python\nlist1 = append_to_list('a')  # ['a']\nlist2 = append_to_list('b')  # ['a', 'b'] - UNEXPECTED!\n```\n\n**Fix**:\n```python\ndef append_to_list(item, items=None):\n    if items is None:\n        items = []\n    items.append(item)\n    return items\n```\n\n---\n\n### Dead Code\n\n**File**: `old_utils.py:123`\n\n```python\ndef legacy_function():\n    # This function is never called\n    pass\n```\n\n**Issue**: Unused Code\n\n**Severity**: 🔵 Minor\n\n**Recommendation**: Remove to improve code maintainability and reduce cognitive load.\n\n---\n\n### Complexity\n\n**File**: `calculator.py:56`\n\n```python\ndef complex_calculation(x, y, z, mode, options):\n    # 50 lines with nested if/else\n    # Cyclomatic complexity: 23 (Rank D)\n    ...\n```\n\n**Issue**: High Cyclomatic Complexity\n\n**Severity**: 🔵 Minor\n\n**Impact**: Hard to understand, test, and maintain.\n\n**Recommendation**: Refactor into smaller, focused functions:\n```python\ndef complex_calculation(x, y, z, mode, options):\n    if mode == 'simple':\n        return _simple_calc(x, y, z)\n    elif mode == 'advanced':\n        return _advanced_calc(x, y, z, options)\n    else:\n        return _default_calc(x, y)\n\ndef _simple_calc(x, y, z):\n    ...\n\ndef _advanced_calc(x, y, z, options):\n    ...\n```\n\n---\n\n## Testing Issues\n\n### Missing Test Coverage\n\n**File**: `payment.py:200`\n\n```python\ndef process_refund(order_id, amount):\n    # Critical business logic with no tests!\n    order = Order.objects.get(id=order_id)\n    order.refund(amount)\n    send_notification(order.user, f\"Refunded ${amount}\")\n```\n\n**Issue**: Missing Tests for Critical Path\n\n**Severity**: 🟡 Important\n\n**Recommendation**: Add comprehensive tests:\n```python\n# tests/test_payment.py\ndef test_process_refund_success():\n    order = create_test_order(amount=100)\n    process_refund(order.id, 50)\n    assert order.amount == 50\n    assert_notification_sent(order.user)\n\ndef test_process_refund_exceeds_amount():\n    order = create_test_order(amount=100)\n    with pytest.raises(ValueError):\n        process_refund(order.id, 150)\n\ndef test_process_refund_invalid_order():\n    with pytest.raises(Order.DoesNotExist):\n        process_refund(99999, 50)\n```\n\n---\n\n## Information / Suggestions\n\n### Opportunity for Optimization\n\n**File**: `data_processor.py:78`\n\n```python\nresults = []\nfor item in large_dataset:\n    results.append(transform(item))\n```\n\n**Suggestion**: Use list comprehension or generator for better performance\n\n```python\n# List comprehension (if all results needed in memory)\nresults = [transform(item) for item in large_dataset]\n\n# Generator (if processing one at a time)\nresults = (transform(item) for item in large_dataset)\n```\n\n---\n\n### Modern Python Pattern\n\n**File**: `file_handler.py:34`\n\n```python\nf = open('data.txt', 'r')\ndata = f.read()\nf.close()  # May not execute if read() raises exception\n```\n\n**Suggestion**: Use context manager\n\n```python\nwith open('data.txt', 'r') as f:\n    data = f.read()\n# File automatically closed, even if exception occurs\n\n# Or use pathlib\nfrom pathlib import Path\ndata = Path('data.txt').read_text()\n```\n\n---\n\n## Comment Format Guidelines\n\n### Structure\n\n```\n**File**: path/to/file.py:line_number\n\n[Code snippet if helpful]\n\n**Issue**: Brief title\n\n**Severity**: 🔴 Critical | 🟡 Important | 🔵 Minor | ⚪ Info\n\n**Description**: Detailed explanation\n\n**Impact/Why it matters**: Consequences\n\n**Fix/Recommendation**: Concrete solution with code example\n\n**Reference**: Links to docs, CVEs, etc. (if applicable)\n```\n\n### Severity Levels\n\n- 🔴 **Critical**: Security vulnerabilities, data corruption, production failures\n- 🟡 **Important**: Performance issues, type safety, architectural problems, missing tests\n- 🔵 **Minor**: Code smells, complexity, dead code, minor bugs\n- ⚪ **Info**: Suggestions, optimizations, style (only if blocking automation)\n\n### Tone\n\n- Be specific and actionable\n- Explain the \"why\" not just the \"what\"\n- Provide code examples\n- Reference authoritative sources\n- Acknowledge good code when present\n- Be constructive, not critical\n",
        "forge-plugin/skills/python-code-review/templates/report_template.md": "# Code Review Report: [Project Name]\n\n**Date**: [YYYY-MM-DD]\n**Reviewer**: Claude Code\n**Scope**: [Brief description of what was reviewed]\n\n---\n\n## Executive Summary\n\n**Overall Assessment**: [Excellent | Good | Fair | Needs Improvement | Critical Issues Found]\n\n**Key Findings**:\n- Critical Issues: [N]\n- Important Issues: [N]\n- Performance Concerns: [N]\n- Security Vulnerabilities: [N]\n\n**Recommendation**: [Summary recommendation - e.g., \"Address critical security issues before deployment\" or \"Code is production-ready with minor improvements recommended\"]\n\n---\n\n## Critical Issues\n\n### 1. [Issue Title]\n\n**Severity**: Critical\n**Category**: [Security | Data Corruption | Production Failure]\n**Location**: `file.py:123`\n\n**Description**:\n[Detailed description of the issue]\n\n**Impact**:\n[What could go wrong if not fixed]\n\n**Recommendation**:\n```python\n# Before (vulnerable)\n[problematic code]\n\n# After (fixed)\n[corrected code]\n```\n\n**References**:\n- [CWE-XXX](link) or [OWASP](link) if applicable\n\n---\n\n### 2. [Next Critical Issue]\n...\n\n---\n\n## Important Issues\n\n### Performance Bottleneck: [Description]\n\n**Location**: `file.py:456`\n**Impact**: [e.g., \"O(n²) complexity causes slowdown with large datasets\"]\n\n**Analysis**:\n[Explanation of the performance issue]\n\n**Recommendation**:\n```python\n# Current implementation (slow)\n[current code]\n\n# Optimized implementation\n[improved code]\n```\n\n**Expected Improvement**: [e.g., \"100x faster for 10,000 items\"]\n\n---\n\n### Security Concern: [Description]\n\n**Location**: `file.py:789`\n**Severity**: Important\n\n**Details**:\n[Description of security concern]\n\n**Fix**:\n```python\n[corrected code]\n```\n\n---\n\n## Architecture and Design\n\n### Concerns\n\n1. **Tight Coupling**: [Description]\n   - Location: [files]\n   - Recommendation: [architectural improvement]\n\n2. **Missing Abstractions**: [Description]\n   - Impact: [code duplication, hard to test, etc.]\n   - Recommendation: [refactoring suggestion]\n\n### Positive Patterns\n\n- [Well-implemented pattern 1]\n- [Good design choice 2]\n\n---\n\n## Performance Analysis\n\n### CPU Profiling Results\n\n**Top Hotspots**:\n1. `function_name()` in `file.py`: [X]ms cumulative ([Y]% of total)\n2. [Next hotspot]\n\n### Memory Usage\n\n**Peak Memory**: [X] MB\n**Concerns**:\n- [Memory leak in function X]\n- [Inefficient data structure in Y]\n\n### Recommendations\n\n1. [Specific performance improvement 1]\n2. [Specific performance improvement 2]\n\n---\n\n## Code Quality\n\n### Complexity Analysis\n\n**High Complexity Functions**:\n- `function_name()` (file.py:123): Complexity 25 (Rank C)\n  - Recommendation: Refactor into smaller functions\n\n### Dead Code\n\n**Unused Code Found**:\n- `unused_function()` in utils.py\n- Variable `UNUSED_CONSTANT` in config.py\n\n**Recommendation**: Remove to improve maintainability\n\n---\n\n## Testing\n\n### Coverage Analysis\n\n**Current Coverage**: [X]%\n\n**Missing Critical Tests**:\n1. Edge case: [description]\n2. Error path: [description]\n3. Integration test: [description]\n\n### Test Quality Issues\n\n- [Issue with existing tests]\n- [Recommendation for improvement]\n\n---\n\n## Dependencies\n\n### Vulnerable Dependencies\n\n| Package | Current | Vulnerability | Fix |\n|---------|---------|---------------|-----|\n| package-name | 1.0.0 | CVE-XXXX-XXXX | Upgrade to 1.1.0 |\n\n### Outdated Dependencies\n\n- [List of significantly outdated packages]\n\n---\n\n## Minor Issues and Suggestions\n\n### Style and Conventions\n\n**Note**: These should be handled by automated tools (ruff, isort, basedpyright) in CI/CD.\n\n- [Only list if blocking automated tool adoption]\n\n### Documentation\n\n- Missing docstrings: [list key functions]\n- Unclear variable names: [examples]\n\n---\n\n## Positive Highlights\n\n**Well-Implemented Features**:\n1. [Good pattern or implementation 1]\n2. [Good practice observed 2]\n3. [Security measure properly implemented]\n\n---\n\n## Recommendations Priority Matrix\n\n### Immediate (Before Deployment)\n\n1. [ ] Fix SQL injection vulnerability (file.py:123)\n2. [ ] Address race condition in payment processing (payment.py:456)\n3. [ ] Fix memory leak in upload handler (upload.py:789)\n\n### High Priority (This Sprint)\n\n1. [ ] Optimize N+1 query in user list (views.py:234)\n2. [ ] Add missing authentication check (api.py:567)\n3. [ ] Implement error handling in critical path (processor.py:890)\n\n### Medium Priority (Next Sprint)\n\n1. [ ] Refactor high complexity functions\n2. [ ] Add integration tests for payment flow\n3. [ ] Update vulnerable dependencies\n\n### Low Priority (Backlog)\n\n1. [ ] Remove dead code\n2. [ ] Improve documentation\n3. [ ] Consider architectural refactoring for module X\n\n---\n\n## Automated Tool Results Summary\n\n- **Ruff**: [N] issues found\n- **Basedpyright**: [N] type errors\n- **Bandit**: [N] security issues\n- **Safety**: [N] vulnerable dependencies\n- **Performance Profiler**: [Summary of findings]\n\n**Detailed reports**: See `review_results/` directory\n\n---\n\n## Conclusion\n\n[Overall assessment paragraph summarizing the review, key takeaways, and next steps]\n\n**Approval Status**: [Approved | Approved with Conditions | Requires Changes | Blocked]\n\n**Next Steps**:\n1. [Action item 1]\n2. [Action item 2]\n3. [Action item 3]\n\n---\n\n**Review Conducted By**: Claude Code Python Review Skill\n**Tools Used**: ruff, basedpyright, isort, bandit, safety, performance_profiler\n"
      },
      "plugins": [
        {
          "name": "forge-plugin",
          "source": "./forge-plugin",
          "description": "Sing, clear-voiced Muses, of Hephaestus famed for inventions.  With bright-eyed Athene he taught men glorious gifts throughout the world, -- men who before used to dwell in caves in the mountains like wild beasts.  But now that they have learned craft through Hephaestus the famed worker, easily they live a peaceful life in their own houses the whole year round.",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Olino3/forge",
            "/plugin install forge-plugin@forge-marketplace"
          ]
        }
      ]
    }
  ]
}