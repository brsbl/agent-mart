{
  "author": {
    "id": "colliery-io",
    "display_name": "Colliery",
    "avatar_url": "https://avatars.githubusercontent.com/u/167646339?v=4"
  },
  "marketplaces": [
    {
      "name": "colliery-io-metis",
      "version": null,
      "description": "Flight Levels methodology for project and work management. Teaches when and why to use Metis tools for project planning, work decomposition, and phase management.",
      "repo_full_name": "colliery-io/metis",
      "repo_url": "https://github.com/colliery-io/metis",
      "repo_description": "  Flight Levels work management with MCP server integration for AI agents. CLI, TUI, and GUI interfaces.",
      "signals": {
        "stars": 4,
        "forks": 0,
        "pushed_at": "2026-02-20T14:15:13Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"colliery-io-metis\",\n  \"owner\": {\n    \"name\": \"Colliery\",\n    \"email\": \"contact@colliery.io\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"metis\",\n      \"source\": \"./plugins/metis\",\n      \"description\": \"Flight Levels methodology for project and work management. Teaches when and why to use Metis tools for project planning, work decomposition, and phase management.\",\n      \"version\": \"1.0.10\",\n      \"author\": {\n        \"name\": \"Colliery\",\n        \"email\": \"contact@colliery.io\"\n      }\n    }\n  ]\n}\n",
        "README.md": "# Metis\n\n<div align=\"center\">\n  <img src=\"crates/metis-docs-gui/src-tauri/icons/icon.png\" alt=\"Metis Owl Logo\" width=\"128\" height=\"128\">\n  <br><br>\n  <strong>Persistent, structured project management for AI coding agents.</strong>\n  <br>\n  Give your AI assistant a memory that survives sessions, context windows, and compaction.\n</div>\n\n## Install\n\n```bash\ncurl -fsSL https://raw.githubusercontent.com/colliery-io/metis/main/scripts/install.sh | bash\n```\n\nThis installs the Metis desktop app. **Launch it once** -- on first launch it installs the `metis` CLI (which includes the MCP server) to your system PATH. After that, you're ready to connect Claude Code.\n\n<details>\n<summary>Other install methods</summary>\n\n**Manual download** from [GitHub Releases](https://github.com/colliery-io/metis/releases/latest):\n- macOS (Apple Silicon): `Metis_x.x.x_aarch64.dmg`\n- macOS (Intel): `Metis_x.x.x_x64.dmg`\n- Windows: `Metis_x.x.x_x64-setup.exe`\n- Linux: `Metis_x.x.x_amd64.AppImage`\n\n**macOS note**: You may need to run `sudo xattr -rd com.apple.quarantine \"/Applications/Metis.app\"` after installing.\n</details>\n\n## Why Metis?\n\nAI coding agents lose context constantly -- not just between sessions, but during them. Context compaction, token limits, and session boundaries all erase the plan, the progress, and the reasoning behind decisions already made.\n\nMetis is a **memory system** for AI agents. It gives them a persistent, file-backed place to generate work, track progress, and record decisions -- so nothing is lost when context shifts. It uses the [Flight Levels](https://www.flightlevels.io/) methodology to add opinionated structure around *how* work is created and tracked, so your AI doesn't just remember what to do, it works through it intentionally.\n\n- **Persistent across everything.** Progress, decisions, and next steps live in markdown files that survive compaction, session restarts, and context window limits. Your AI reads the task and picks up where it left off.\n- **Intentional work generation.** Instead of jumping straight to code, Metis structures work top-down: Vision > Initiative > Task. Each level has phases that enforce thinking before doing -- discovery before design, design before decomposition.\n- **Human-in-the-loop where it matters.** Strategic decisions (initiative direction, architectural choices, task breakdown) require your approval. Tactical execution can be autonomous. You control the \"what,\" the AI handles the \"how.\"\n- **Plain markdown, git-friendly.** Documents are markdown with YAML frontmatter in a `.metis/` directory. No lock-in, no proprietary formats. Read them in any editor, commit them with your code, diff them in PRs.\n## How It Works\n\n### 1. Set up\n\nAfter launching the Metis app once (so the CLI is installed), add the MCP server and plugin:\n\n```bash\nclaude mcp add --scope user --transport stdio metis -- metis mcp\n```\n\nThen inside Claude Code:\n\n```\n/plugin marketplace add colliery-io/metis\n/plugin install metis@colliery-io-metis\n```\n\n### 2. Start working\n\nWith the plugin installed, Metis detects your project automatically. Just talk to Claude:\n\n> **You:** \"Initialize Metis for this project.\"\n\nClaude creates the `.metis/` directory and works with you to write a vision statement -- the purpose and direction of the project. Even for an existing codebase, the vision captures *where the project is headed* so all future work traces back to it.\n\n> **You:** \"I want to add real-time collaboration to this app.\"\n\nClaude creates initiatives under the vision. You discuss scope, approve the direction, and shape what gets built:\n\n```\n\"Build a real-time collaboration platform\"     # Vision - the why\n├── \"Implement WebSocket infrastructure\"       # Initiative - a project\n├── \"Build presence system\"                    # Initiative\n└── \"Design conflict resolution\"               # Initiative\n```\n\n> **You:** \"Break down the WebSocket initiative into tasks.\"\n\nClaude proposes a task breakdown, you review and adjust, and Claude creates the tasks:\n\n```\n\"Implement WebSocket infrastructure\"\n├── \"Set up WebSocket server\"                  # Task\n├── \"Add connection pooling\"                   # Task\n└── \"Write integration tests\"                  # Task\n```\n\n> **You:** \"/metis-ralph PROJ-T-0001\"\n\nClaude picks up the task, transitions it to active, and works on it autonomously -- writing code, running tests, updating the task document with progress. When it's done, it signals for your review.\n\n### 3. Tasks as working memory\n\nThis is the key idea. While a task is active, the AI continuously updates it with:\n- What it completed, what files it changed\n- What it discovered (unexpected patterns, blockers)\n- Decisions made and why\n- What's left to do\n\nIf the session ends or context compacts, the next session reads the task and picks up seamlessly. No work is lost.\n\n## Flight Level Configurations\n\nChoose the right level of structure for your project:\n\n**Streamlined** (default) -- good for most projects:\n```\nVision → Initiative → Task\n```\n\n**Full** -- for complex, multi-team efforts:\n```\nVision → Strategy → Initiative → Task\n```\n\n**Direct** -- for simple, solo work:\n```\nVision → Task\n```\n\nSet during init or change later:\n```bash\nmetis init --name \"My Project\" --preset full\nmetis config set --preset direct\n```\n\n### Document Phases\n\nEach document type progresses through defined phases:\n\n| Type | Phases |\n|------|--------|\n| **Vision** | draft > review > published |\n| **Strategy** | shaping > design > ready > active > completed |\n| **Initiative** | discovery > design > ready > decompose > active > completed |\n| **Task** | todo > active > completed (+ blocked) |\n| **ADR** | draft > discussion > decided > superseded |\n\nPhases are forward-only. You can't skip from `todo` to `completed` -- the task must go through `active` first. This prevents cutting corners.\n\n## MCP Tools\n\nClaude interacts with Metis through nine MCP tools:\n\n| Tool | Purpose |\n|------|---------|\n| `initialize_project` | Create a `.metis/` workspace |\n| `create_document` | Create vision, initiative, task, ADR, or backlog item |\n| `read_document` | Read document content by short code |\n| `edit_document` | Update document content |\n| `transition_phase` | Advance through workflow phases |\n| `list_documents` | List all documents with filtering |\n| `search_documents` | Full-text search across documents |\n| `archive_document` | Archive completed documents and children |\n| `reassign_parent` | Move tasks between initiatives or to/from backlog |\n\nEvery document gets a unique short code (e.g., `PROJ-T-0042`) used to reference it in all operations.\n\n## CLI\n\nThe `metis` CLI works directly from your terminal too:\n\n```bash\nmetis init --name \"Project Vision\"                              # Initialize\nmetis create initiative \"Auth System\" --vision \"project-vision\"  # Create documents\nmetis list --type task                                           # List documents\nmetis transition \"PROJ-T-0001\"                                   # Advance phase\nmetis search \"authentication\"                                    # Full-text search\nmetis status                                                     # Project overview\n```\n\n## Desktop GUI\n\nA visual kanban interface for managing projects. Boards for each document type, a rich markdown editor, drag-and-drop phase transitions, and multi-project support. Installed automatically via the install script.\n\n## Plugin Details\n\n**`/metis-ralph <SHORT_CODE>`** -- Autonomous task execution loop. Claude picks up a task, works on it iteratively (writing code, running tests, fixing issues), updates the task document with progress, and signals when done for your review. Use `/cancel-metis-ralph` to stop a running loop.\n\nThe plugin also includes **skills** (contextual methodology guidance for decomposition, phase transitions, and project setup) and **hooks** (automatic project detection on session start, state re-injection after context compaction).\n\nSee the [full plugin documentation](docs/claude-code-plugin.md) for details.\n\n## Custom Templates\n\nDocuments are generated from [Tera](https://tera.netlify.app/) templates with a fallback chain:\n\n1. **Project**: `.metis/templates/{type}/content.md` (highest priority)\n2. **Global**: `~/.config/metis/templates/{type}/content.md`\n3. **Built-in defaults**\n\nAvailable variables include `{{ title }}`, `{{ slug }}`, `{{ short_code }}`, `{{ created_at }}`, and type-specific variables like `{{ parent_title }}` for tasks.\n\n## Architecture\n\nMetis is built in Rust with five crates:\n\n| Crate | Role |\n|-------|------|\n| `metis-docs-core` | Domain logic, document management, SQLite + FTS5 search |\n| `metis-docs-cli` | CLI binary (`metis`), bundled with GUI installer |\n| `metis-docs-mcp` | MCP server for AI assistant integration |\n| `metis-docs-gui` | Desktop app (Tauri + Vue 3), auto-installs CLI on first launch |\n| `metis-docs-tui` | Terminal UI (deprecated) |\n\nDocuments are markdown files with YAML frontmatter, indexed in SQLite with FTS5 for fast full-text search. The filesystem is the source of truth; the database is a disposable cache.\n\n## Development\n\n```bash\nangreal test      # Run all tests\nangreal build     # Build all crates\nangreal check     # Clippy + format + check\nangreal coverage  # Generate coverage report\nangreal gui       # Launch GUI in dev mode\n```\n\n## Contributing\n\nApache 2.0 License. Contributions welcome:\n\n1. Fork the repository\n2. Create a feature branch\n3. Add tests for new functionality\n4. Ensure `angreal check` and `angreal test` pass\n5. For GUI changes, include a written test journey\n6. Submit a pull request\n",
        "plugins/metis/README.md": "# Metis Plugin\n\nFlight Levels methodology plugin for Metis work management. Includes methodology skills, iterative Ralph loops for task execution and initiative decomposition, and a Flight Levels agent for guidance.\n\n## Components\n\n| Component | Description |\n|-----------|-------------|\n| **Skills** | Flight Levels methodology guidance (decomposition, phases, patterns) |\n| **Agent** | `flight-levels` - Methodology expert for document selection and best practices |\n| **Commands** | `/metis-ralph`, `/metis-decompose`, `/cancel-metis-ralph` - Iterative work loops |\n| **Hooks** | SessionStart (project detection), Stop (Ralph loop control) |\n| **MCP** | Metis MCP server configuration |\n\n## Skills: Flight Levels Methodology\n\nFour focused skills provide targeted methodology guidance:\n\n### document-selection\n**Triggers:** \"what document type\", \"create a bug ticket\", \"should this be a task or initiative\", \"when to use ADR\"\n\nHelps choose the right document type (vision, strategy, initiative, task, backlog, ADR) and maps user terminology to Metis documents.\n\n### decomposition\n**Triggers:** \"break down this initiative\", \"decompose into tasks\", \"how to size tasks\", \"vertical slices\"\n\nGuides breaking higher-level work into actionable lower-level items with patterns like vertical slices, risk-first, and milestone-based decomposition.\n\n### phase-transitions\n**Triggers:** \"when to transition\", \"move to active\", \"exit criteria\", \"how to complete a task\"\n\nExplains phase sequences, exit criteria, and the critical rule that phases cannot be skipped.\n\n### project-patterns\n**Triggers:** \"start a new project\", \"greenfield\", \"tech debt campaign\", \"incident response\", \"which preset\"\n\nProvides patterns for different work types: greenfield projects, tech debt campaigns, incident response, and feature development. Also covers preset selection and anti-patterns.\n\n## Agent: Flight Levels\n\nThe `flight-levels` agent provides methodology guidance when working with Metis documents:\n\n- Document type selection based on work scope\n- Work decomposition patterns and timing\n- Phase transitions and exit criteria\n- Anti-pattern identification\n- User terminology mapping (e.g., \"bug ticket\" → backlog item)\n\nThe agent is triggered automatically when methodology guidance is needed.\n\n## Commands: Metis Ralph Loops\n\nIterative AI loops based on the [Ralph Wiggum technique](https://ghuntley.com/ralph/).\n\n### /metis-ralph\n\nExecute a Metis task with a Ralph loop.\n\n```bash\n/metis-ralph PROJ-T-0001\n/metis-ralph PROJ-T-0001 --max-iterations 20\n/metis-ralph PROJ-T-0001 --project-path /path/to/.metis\n```\n\n**Flow:**\n1. Reads task content from Metis\n2. Transitions task to \"active\"\n3. Works on implementation\n4. Iterates until complete\n5. Transitions to \"completed\"\n6. Outputs completion promise to exit\n\n### /metis-decompose\n\nDecompose a Metis initiative into tasks.\n\n```bash\n/metis-decompose PROJ-I-0001\n/metis-decompose PROJ-I-0001 --max-iterations 15\n```\n\n**Flow:**\n1. Reads initiative content from Metis\n2. Transitions initiative to \"decompose\"\n3. Analyzes requirements and creates tasks\n4. Iterates: reviews coverage, adds tasks, refines\n5. Transitions to \"active\"\n6. Outputs completion promise to exit\n\n### /cancel-metis-ralph\n\nCancel an active Metis Ralph loop.\n\n```bash\n/cancel-metis-ralph\n```\n\n## Options\n\n| Option | Description |\n|--------|-------------|\n| `--max-iterations <n>` | Stop after N iterations (default: unlimited) |\n| `--project-path <path>` | Path to .metis folder (default: auto-detect) |\n\n## How Ralph Loops Work\n\n### State File\n\nLoop state is stored in `.claude/metis-ralph.local.md`:\n\n```yaml\n---\nactive: true\nmode: task  # or \"decompose\"\nshort_code: \"PROJ-T-0001\"\nproject_path: \"/path/to/.metis\"\niteration: 1\nmax_iterations: 20\ncompletion_promise: \"TASK COMPLETE\"\nstarted_at: \"2026-01-10T...\"\n---\n\nExecute Metis task PROJ-T-0001\n```\n\n### Stop Hook\n\nThe stop hook intercepts Claude's exit attempts:\n\n1. Checks if loop is active\n2. Looks for completion promise in Claude's output\n3. If found: allows exit\n4. If not found: blocks exit, feeds prompt back, increments iteration\n\n### Completion Signals\n\nTo complete a loop, Claude must:\n\n1. Finish the actual work\n2. Transition the Metis document to the appropriate phase\n3. Output the promise tag:\n\n**Task execution:**\n```\n<promise>TASK COMPLETE</promise>\n```\n\n**Initiative decomposition:**\n```\n<promise>DECOMPOSITION COMPLETE</promise>\n```\n\n## When to Use Ralph Loops\n\n**Good for:**\n- Well-defined tasks with clear success criteria\n- Tasks requiring iteration (tests to pass, bugs to fix)\n- Breaking down complex initiatives systematically\n- Autonomous work with automatic Metis state updates\n\n**Not good for:**\n- Tasks requiring human judgment\n- Exploratory work with unclear scope\n- One-shot operations\n\n## Installation\n\nAdd this plugin to your Claude Code configuration:\n\n```json\n{\n  \"plugins\": [\n    \"/path/to/metis/plugins/metis\"\n  ]\n}\n```\n\nOr symlink to your plugins directory:\n\n```bash\nln -s /path/to/metis/plugins/metis ~/.claude/plugins/metis\n```\n\n## Dependencies\n\n- Metis MCP server must be connected and available\n- `jq` command-line tool (for stop hook JSON parsing)\n\n## Safety\n\n- Always use `--max-iterations` as a safety net for Ralph loops\n- The loop cannot be stopped manually except via `/cancel-metis-ralph`\n- Document phase transitions persist even if the loop is cancelled\n"
      },
      "plugins": [
        {
          "name": "metis",
          "source": "./plugins/metis",
          "description": "Flight Levels methodology for project and work management. Teaches when and why to use Metis tools for project planning, work decomposition, and phase management.",
          "version": "1.0.10",
          "author": {
            "name": "Colliery",
            "email": "contact@colliery.io"
          },
          "categories": [],
          "install_commands": [
            "/plugin marketplace add colliery-io/metis",
            "/plugin install metis@colliery-io-metis"
          ]
        }
      ]
    }
  ]
}