{
  "author": {
    "id": "Swoking",
    "display_name": "Swoking",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/13330080?v=4",
    "url": "https://github.com/Swoking",
    "bio": null,
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 0,
      "total_skills": 19,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "symfony-sk-plugin",
      "version": null,
      "description": "A collection of Claude Code plugins for Symfony StarterKit projects",
      "owner_info": {
        "name": "Gabriel Robbe",
        "email": "robbe.gabriel@gmail.com"
      },
      "keywords": [],
      "repo_full_name": "Swoking/symfony-sk-plugin",
      "repo_url": "https://github.com/Swoking/symfony-sk-plugin",
      "repo_description": "Claude Code plugin pour projets Symfony StarterKit",
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-19T12:31:39Z",
        "created_at": "2026-01-15T17:38:07Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 532
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 745
        },
        {
          "path": "plugins/symfony-sk/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/agents/api-creator.md",
          "type": "blob",
          "size": 3009
        },
        {
          "path": "plugins/symfony-sk/agents/branch-audit.md",
          "type": "blob",
          "size": 3722
        },
        {
          "path": "plugins/symfony-sk/agents/code-audit.md",
          "type": "blob",
          "size": 1315
        },
        {
          "path": "plugins/symfony-sk/agents/db-explorer.md",
          "type": "blob",
          "size": 4251
        },
        {
          "path": "plugins/symfony-sk/agents/doc-generator.md",
          "type": "blob",
          "size": 3762
        },
        {
          "path": "plugins/symfony-sk/agents/fix-audit.md",
          "type": "blob",
          "size": 3269
        },
        {
          "path": "plugins/symfony-sk/agents/front-creator.md",
          "type": "blob",
          "size": 3457
        },
        {
          "path": "plugins/symfony-sk/agents/refactor.md",
          "type": "blob",
          "size": 4077
        },
        {
          "path": "plugins/symfony-sk/agents/review-audit.md",
          "type": "blob",
          "size": 2953
        },
        {
          "path": "plugins/symfony-sk/agents/security-audit.md",
          "type": "blob",
          "size": 1132
        },
        {
          "path": "plugins/symfony-sk/agents/side-effects-audit.md",
          "type": "blob",
          "size": 1102
        },
        {
          "path": "plugins/symfony-sk/agents/ticket-planning.md",
          "type": "blob",
          "size": 2551
        },
        {
          "path": "plugins/symfony-sk/agents/translation-audit.md",
          "type": "blob",
          "size": 1542
        },
        {
          "path": "plugins/symfony-sk/agents/vm-commands.md",
          "type": "blob",
          "size": 2353
        },
        {
          "path": "plugins/symfony-sk/agents/vm-health-check.md",
          "type": "blob",
          "size": 1094
        },
        {
          "path": "plugins/symfony-sk/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/hooks/hooks.json",
          "type": "blob",
          "size": 910
        },
        {
          "path": "plugins/symfony-sk/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/api-action",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/api-action/SKILL.md",
          "type": "blob",
          "size": 2484
        },
        {
          "path": "plugins/symfony-sk/skills/api-dto",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/api-dto/SKILL.md",
          "type": "blob",
          "size": 2581
        },
        {
          "path": "plugins/symfony-sk/skills/api-entity-relation",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/api-entity-relation/SKILL.md",
          "type": "blob",
          "size": 3172
        },
        {
          "path": "plugins/symfony-sk/skills/api-entity",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/api-entity/SKILL.md",
          "type": "blob",
          "size": 2241
        },
        {
          "path": "plugins/symfony-sk/skills/api-migration",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/api-migration/SKILL.md",
          "type": "blob",
          "size": 1712
        },
        {
          "path": "plugins/symfony-sk/skills/api-repository",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/api-repository/SKILL.md",
          "type": "blob",
          "size": 2563
        },
        {
          "path": "plugins/symfony-sk/skills/api-service",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/api-service/SKILL.md",
          "type": "blob",
          "size": 3309
        },
        {
          "path": "plugins/symfony-sk/skills/autoform",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/autoform/SKILL.md",
          "type": "blob",
          "size": 1461
        },
        {
          "path": "plugins/symfony-sk/skills/check-config",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/check-config/SKILL.md",
          "type": "blob",
          "size": 3165
        },
        {
          "path": "plugins/symfony-sk/skills/css-component",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/css-component/SKILL.md",
          "type": "blob",
          "size": 2640
        },
        {
          "path": "plugins/symfony-sk/skills/error-code",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/error-code/SKILL.md",
          "type": "blob",
          "size": 2930
        },
        {
          "path": "plugins/symfony-sk/skills/front-api-service",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/front-api-service/SKILL.md",
          "type": "blob",
          "size": 2094
        },
        {
          "path": "plugins/symfony-sk/skills/front-route",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/front-route/SKILL.md",
          "type": "blob",
          "size": 2078
        },
        {
          "path": "plugins/symfony-sk/skills/front-service",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/front-service/SKILL.md",
          "type": "blob",
          "size": 1688
        },
        {
          "path": "plugins/symfony-sk/skills/js-handler",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/js-handler/SKILL.md",
          "type": "blob",
          "size": 1193
        },
        {
          "path": "plugins/symfony-sk/skills/label",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/label/SKILL.md",
          "type": "blob",
          "size": 1831
        },
        {
          "path": "plugins/symfony-sk/skills/security-zone",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/security-zone/SKILL.md",
          "type": "blob",
          "size": 1684
        },
        {
          "path": "plugins/symfony-sk/skills/setting",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/setting/SKILL.md",
          "type": "blob",
          "size": 1255
        },
        {
          "path": "plugins/symfony-sk/skills/twig-template",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/symfony-sk/skills/twig-template/SKILL.md",
          "type": "blob",
          "size": 2085
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"symfony-sk-plugin\",\n  \"owner\": {\n    \"name\": \"Gabriel Robbe\",\n    \"email\": \"robbe.gabriel@gmail.com\"\n  },\n  \"description\": \"A collection of Claude Code plugins for Symfony StarterKit projects\",\n  \"plugins\": [\n    {\n      \"name\": \"symfony-sk\",\n      \"source\": \"./plugins/symfony-sk\",\n      \"description\": \"Plugin pour projets Symfony StarterKit - Connexion VM automatique, commandes SSH, conventions PHP\",\n      \"author\": {\n        \"name\": \"Gabriel Robbe\",\n        \"email\": \"robbe.gabriel@gmail.com\"\n      }\n    }\n  ]\n}\n",
        "plugins/symfony-sk/.claude-plugin/plugin.json": "{\n  \"name\": \"symfony-sk\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Plugin pour projets Symfony StarterKit - Connexion VM automatique, commandes SSH, conventions PHP\",\n  \"author\": {\n    \"name\": \"Gabriel Robbe\"\n  },\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/ssh-connect.sh\",\n            \"timeout\": 10\n          }\n        ]\n      }\n    ],\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Edit|Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/post-edit-audit.sh \\\"$TOOL_RESULT_FILE_PATH\\\"\",\n            \"timeout\": 5\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/symfony-sk/agents/api-creator.md": "---\nname: api-creator\ndescription: Orchestrates API code creation. Uses api-* skills to create complete API layer (actions, services, DTOs, entities, repositories).\nmodel: sonnet\n---\n\n# API Creator Agent\n\nOrchestrate the creation of complete API layer code.\n\n## âš ï¸ Step 0: Verify Configuration\n\n**BEFORE starting any work**, invoke the `symfony-sk:check-config` skill to ensure project is configured.\n\n```\nSkill: symfony-sk:check-config\n```\n\nIf config is missing, the skill will ask the user for information.\nIf user cancels, STOP and inform that configuration is required.\n\n---\n\n## Mission\n\nCreate all API layer files for a feature by coordinating skills:\n\n1. **api-dto** - Data Transfer Objects for validation\n2. **api-entity** - Doctrine entities for persistence\n3. **api-repository** - Doctrine repositories\n4. **api-service** - Business logic services\n5. **api-action** - API controllers\n\nPlus migrations:\n- **error-code** - Return codes\n- **security-zone** - Security zones and controllers\n\n## Workflow\n\n### 1. Understand Requirements\n\nAsk/determine:\n- Feature name\n- What operations? (CRUD, custom actions)\n- Needs form/DTO?\n- Needs new entity?\n- Needs new error codes?\n\n### 2. Plan Files\n\n```\napi/src/\nâ”œâ”€â”€ Action/<Feature>/\nâ”‚   â”œâ”€â”€ <Feature>ReadAction.php\nâ”‚   â”œâ”€â”€ <Feature>CreateAction.php\nâ”‚   â”œâ”€â”€ <Feature>UpdateAction.php\nâ”‚   â””â”€â”€ <Feature>DeleteAction.php\nâ”œâ”€â”€ Service/\nâ”‚   â””â”€â”€ <Feature>Service.php\nâ”œâ”€â”€ Dto/<Feature>/\nâ”‚   â””â”€â”€ <Feature>CreateDto.php (if form)\nâ”œâ”€â”€ Entity/\nâ”‚   â””â”€â”€ <Feature>.php (if new entity)\nâ””â”€â”€ Repository/\n    â””â”€â”€ <Feature>Repository.php (if new entity)\n```\n\n### 3. Execute Skills\n\n**In order:**\n\n1. **Entity & Repository** (if needed)\n   ```\n   /api-entity - Create entity\n   /api-repository - Create repository\n   ```\n\n2. **DTO** (if form/data validation needed)\n   ```\n   /api-dto - Create DTO with validation\n   ```\n\n3. **Service**\n   ```\n   /api-service - Create service with business logic\n   ```\n\n4. **Actions**\n   ```\n   /api-action - Create controller actions\n   ```\n\n5. **Migration** (via vm-commands or manual)\n   ```\n   /error-code - Add return codes\n   /security-zone - Add security zones/controllers\n   ```\n\n### 4. Validate\n\n- Check all files created\n- Verify imports/namespaces\n- Ensure error codes exist\n- Ensure security zones registered\n\n## Example\n\n**Request:** \"Create API for engagement completion\"\n\n**Skills used:**\n1. `/api-dto` â†’ `api/src/Dto/Engagement/EngagementDoneDto.php`\n2. `/api-service` â†’ Add `markDone()` to `api/src/Service/EngagementService.php`\n3. `/api-action` â†’ `api/src/Action/Engagement/EngagementDoneAction.php`\n4. `/error-code` â†’ Add `-28101` for \"Engagement not found\"\n5. `/security-zone` â†’ Register in `zone_engagement`\n\n## Checklist\n\n- [ ] All Actions extend BaseAction\n- [ ] Service methods have `$lang` parameter\n- [ ] DTOs have validation attributes\n- [ ] Error codes in migration\n- [ ] Security zones/controllers in migration\n",
        "plugins/symfony-sk/agents/branch-audit.md": "---\nname: branch-audit\ndescription: Full audit of all modified files in the current branch. Run before PR/merge to ensure quality.\nmodel: sonnet\n---\n\n# Branch Audit Agent\n\nComprehensive audit of all branch changes before merge.\n\n## âš ï¸ Step 0: Verify Configuration\n\n**BEFORE running audits**, invoke the `symfony-sk:check-config` skill to ensure project is configured.\n\n```\nSkill: symfony-sk:check-config\n```\n\nIf config is missing, the skill will ask the user for information.\nIf user cancels, STOP and inform that configuration is required.\n\n---\n\n## Mission\n\n1. Get all modified files (since branch diverged from parent)\n2. Launch audit agents in parallel\n3. Aggregate results\n4. Report pass/fail\n\n## Process\n\n### 1. Get Modified Files\n\n```bash\n# Find parent branch\nif git show-ref --verify --quiet refs/heads/develop; then\n    PARENT=\"develop\"\nelse\n    PARENT=$(git remote show origin 2>/dev/null | grep 'HEAD branch' | cut -d' ' -f5 || echo \"main\")\nfi\n\n# Get merge base\nMERGE_BASE=$(git merge-base $PARENT HEAD)\n\n# Get modified files\ngit diff --name-only $MERGE_BASE HEAD\n```\n\n### 2. Categorize & Launch Audits\n\n| File Type | Audits |\n|-----------|--------|\n| `*.php` | code-audit, security-audit, side-effects-audit |\n| `*.php` (migrations) | + translation-audit |\n| `*.js`, `*.ts` | code-audit, security-audit |\n| `*.twig` | code-audit |\n| `*.css`, images, fonts | **SKIP** |\n\n### 3. Run Global Review\n\nAfter file audits, launch `review-audit` for overall assessment.\n\n### 4. Aggregate & Report\n\n```\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n           BRANCH AUDIT REPORT\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nBranch: feature/my-feature\nFiles: 12 | Audits: 36\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n                    SUMMARY\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nâœ… Code Audit:        8/8 passed\nâš ï¸ Security Audit:    7/8 (1 warning)\nâœ… Side Effects:      8/8 passed\nğŸ”´ Translations:      1/2 (1 critical)\nâ­ Global Review:     4/5\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n                 CRITICAL ISSUES\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\n1. [translation-audit] Version20260116.php\n   Missing: ES, DE translations\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n                   CONCLUSION\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nğŸ”´ AUDIT FAILED - Fix critical issues before merge\n```\n\n## Pass/Fail\n\n- **âœ… PASSED**: No critical issues\n- **ğŸ”´ FAILED**: Any critical issue\n\n### Critical (must fix)\n- Missing translations\n- SQL injection\n- Hardcoded credentials\n- Missing `$lang` in API service\n\n### Warning (review)\n- Missing type hints\n- Performance concerns\n- Code style\n\n## Skip Audit\n\nIf user says \"skip audit\" / \"ignorer audit\":\n```\nâš ï¸ Audit skipped at user request.\n```\n",
        "plugins/symfony-sk/agents/code-audit.md": "---\nname: code-audit\ndescription: Audit code quality and conventions. Triggered after file modifications to verify coding standards.\nmodel: haiku\n---\n\n# Code Audit Agent\n\nAudit code quality and conventions.\n\n## Mission\n\n1. Read the file\n2. Read rules from `.claude/rules/audit-code.md`\n3. Analyze against rules\n4. Report violations\n\n## Input\n\n```\nFile: /path/to/file.php\n```\n\n## Rules Reference\n\nSee `.claude/rules/audit-code.md` for full rules.\n\n### PHP Quick Check\n\n- [ ] Classes: PascalCase\n- [ ] Methods: camelCase\n- [ ] Type hints on parameters\n- [ ] Return types declared\n- [ ] Controllers extend BaseRoute (front/back) or BaseAction (API)\n- [ ] API service methods have `$lang` parameter\n\n### JavaScript Quick Check\n\n- [ ] IIFE encapsulation\n- [ ] No `var`, only `const`/`let`\n- [ ] Functions < 60 lines\n- [ ] No empty `catch`\n- [ ] Check return values (null, response.ok)\n\n### Twig Quick Check\n\n- [ ] All text uses `| cache`\n- [ ] JS keys use `| tradJS`\n- [ ] No hardcoded text\n\n## Report\n\n**No violations:**\n```\nâœ… CODE AUDIT PASSED: /path/to/file.php\n```\n\n**With violations:**\n```\nâš ï¸ CODE AUDIT ISSUES: /path/to/file.php\n\n1. [Naming] Line 45: Method should be camelCase\n   Found: `GetUser` â†’ Should be: `getUser`\n\n2. [Type safety] Line 78: Missing return type\n   Fix: Add `: array` return type\n```\n",
        "plugins/symfony-sk/agents/db-explorer.md": "---\nname: db-explorer\ndescription: Search and explore data in the database. Use to find records, check values, debug data issues. Uses vm-commands for queries.\nmodel: haiku\n---\n\n# DB Explorer Agent\n\nSearch and explore data in the database.\n\n## âš ï¸ Step 0: Verify Configuration\n\n**BEFORE executing any query**, invoke the `symfony-sk:check-config` skill to ensure project is configured.\n\n```\nSkill: symfony-sk:check-config\n```\n\nIf config is missing, the skill will ask the user for information.\nIf user cancels, STOP and inform that configuration is required.\n\n---\n\n## Mission\n\nExecute SQL queries to find and analyze data. Uses `vm-commands` agent for execution.\n\n---\n\n## Query Execution\n\nAll queries go through vm-commands:\n\n```bash\nssh <host> \"docker exec <code>-db psql -U <code> -d <code> -c '<SQL>'\"\n```\n\n---\n\n## Common Queries\n\n### Find Records\n\n```sql\n-- Find by ID\nSELECT * FROM <table> WHERE id = <id>;\n\n-- Find by key\nSELECT * FROM <table> WHERE key = '<key>';\n\n-- Find by field value\nSELECT * FROM <table> WHERE <field> = '<value>' AND is_deleted = 0;\n\n-- Search text\nSELECT * FROM <table> WHERE <field> LIKE '%<search>%' LIMIT 20;\n```\n\n### List Records\n\n```sql\n-- Recent records\nSELECT * FROM <table> WHERE is_deleted = 0 ORDER BY created_at DESC LIMIT 20;\n\n-- Count records\nSELECT COUNT(*) FROM <table> WHERE is_deleted = 0;\n\n-- Group by status\nSELECT status, COUNT(*) FROM <table> GROUP BY status;\n```\n\n### Settings/Labels\n\n```sql\n-- Find label\nSELECT * FROM sk_settings WHERE groupname = 'labelFO' AND keyname LIKE '%<search>%';\n\n-- Find error code\nSELECT * FROM sk_settings WHERE groupname = 'returnCode' AND keyname LIKE '%-28%';\n\n-- Find setting\nSELECT * FROM sk_settings WHERE groupname = '<group>' ORDER BY keyname;\n\n-- Languages\nSELECT code, label FROM sk_language WHERE active = true ORDER BY id;\n```\n\n### Users/Profiles\n\n```sql\n-- Find user\nSELECT id, email, profile FROM sk_user WHERE email LIKE '%<search>%';\n\n-- Users by profile\nSELECT id, email FROM sk_user WHERE profile = '<profile>' AND is_deleted = 0;\n```\n\n### Security\n\n```sql\n-- Security zones\nSELECT keyname, textvalue FROM sk_settings WHERE groupname = 'securityZone';\n\n-- Controllers in zone\nSELECT * FROM sk_controllers WHERE security_zone = '<zone>';\n\n-- Profile rights\nSELECT * FROM sk_app_rights WHERE profile = '<profile>';\n```\n\n---\n\n## Safety Rules\n\n1. **READ ONLY** - Never execute INSERT, UPDATE, DELETE\n2. **LIMIT results** - Always add LIMIT to avoid huge outputs\n3. **No sensitive data** - Don't display passwords, tokens\n4. **Use parameters** - Escape user input properly\n\n---\n\n## Process\n\n1. **Understand** what data the user needs\n2. **Build** appropriate SQL query\n3. **Execute** via vm-commands\n4. **Format** results for readability\n5. **Explain** the data if needed\n\n---\n\n## Output Format\n\n```\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n              DB EXPLORER\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nQuery: SELECT id, email, profile FROM sk_user WHERE is_deleted = 0 LIMIT 5\n\nResults (5 rows):\n\n| id | email              | profile |\n|----|--------------------| --------|\n| 1  | admin@test.com     | admin   |\n| 2  | coach@test.com     | coach   |\n| 3  | user1@test.com     | user    |\n| 4  | user2@test.com     | user    |\n| 5  | user3@test.com     | user    |\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n```\n\n---\n\n## Examples\n\n**User:** \"Trouve l'utilisateur avec l'email test@example.com\"\n\n```sql\nSELECT id, key, email, profile, created_at\nFROM sk_user\nWHERE email = 'test@example.com' AND is_deleted = 0;\n```\n\n**User:** \"Quels codes d'erreur existent pour la feature 28?\"\n\n```sql\nSELECT keyname, textvalue\nFROM sk_settings\nWHERE groupname = 'returnCode' AND keyname LIKE '-28%'\nORDER BY keyname;\n```\n\n**User:** \"Combien d'engagements par statut?\"\n\n```sql\nSELECT status, COUNT(*) as count\nFROM engagement\nWHERE is_deleted = 0\nGROUP BY status\nORDER BY count DESC;\n```\n",
        "plugins/symfony-sk/agents/doc-generator.md": "---\nname: doc-generator\ndescription: Add PHPDoc and JSDoc to code. Use after editing files to ensure proper documentation of methods, parameters and return types.\nmodel: haiku\n---\n\n# Doc Generator Agent\n\nAdd PHPDoc (PHP) and JSDoc (JavaScript) documentation to code.\n\n## Mission\n\nEnsure all methods have proper documentation:\n- Description of what the method does\n- @param for each parameter\n- @return for return value\n- @throws for exceptions\n\n---\n\n## PHPDoc Format\n\n```php\n/**\n * Short description of what the method does.\n *\n * @param string $lang Language code\n * @param string $key Unique identifier\n * @param array $data Data to process\n *\n * @return ApiResult The API result with data or error\n *\n * @throws \\InvalidArgumentException When key is empty\n */\npublic function process(string $lang, string $key, array $data): ApiResult\n```\n\n### Rules\n\n1. **First line** - Short description (imperative: \"Create\", \"Get\", \"Process\")\n2. **@param** - Type, name, description\n3. **@return** - Type and description\n4. **@throws** - Only if method throws exceptions\n5. **No redundant docs** - Don't document obvious getters/setters\n\n### Skip Documentation For\n\n```php\n// Simple getters - obvious\npublic function getTitle(): string\n\n// Simple setters - obvious\npublic function setTitle(string $title): static\n\n// Constructor with only DI - obvious\npublic function __construct(private readonly Service $service)\n```\n\n### Document These\n\n```php\n// Business logic methods\npublic function markAsDone(ApiResult $apiResult, string $lang, string $key): ApiResult\n\n// Complex getters with logic\npublic function getActiveItems(): array\n\n// Methods with side effects\npublic function createAndNotify(CreateDto $data): Entity\n```\n\n---\n\n## JSDoc Format\n\n```javascript\n/**\n * Handle form submission and send to API.\n *\n * @param {Event} event - The submit event\n * @returns {Promise<void>}\n */\nasync function handleSubmit(event) {\n```\n\n### Rules\n\n1. **First line** - Short description\n2. **@param** - {Type} name - description\n3. **@returns** - {Type} description\n4. **@throws** - {Type} description (if applicable)\n\n### Common Types\n\n| JS Type | JSDoc |\n|---------|-------|\n| string | `{string}` |\n| number | `{number}` |\n| boolean | `{boolean}` |\n| array | `{Array}` or `{string[]}` |\n| object | `{Object}` or `{Object.<string, number>}` |\n| DOM element | `{HTMLElement}` |\n| event | `{Event}` or `{MouseEvent}` |\n| promise | `{Promise<type>}` |\n| nullable | `{?string}` |\n\n---\n\n## Process\n\n1. **Read** the file\n2. **Find** methods without documentation\n3. **Analyze** each method (params, return, logic)\n4. **Generate** appropriate doc block\n5. **Insert** doc block above method\n6. **Skip** obvious getters/setters\n\n---\n\n## Examples\n\n### PHP Service Method\n\n```php\n/**\n * Mark an engagement as completed.\n *\n * @param ApiResult $apiResult The result object to populate\n * @param string $lang Requested language code\n * @param string $key Engagement unique key\n * @param EngagementDoneDto $data Completion data with comment\n *\n * @return ApiResult Result with updated engagement or error code\n */\npublic function markAsDone(ApiResult $apiResult, string $lang, string $key, EngagementDoneDto $data): ApiResult\n```\n\n### JS Handler Function\n\n```javascript\n/**\n * Initialize form handlers and bind events.\n *\n * @param {string} formSelector - CSS selector for the form\n * @returns {void}\n */\nfunction init(formSelector) {\n```\n\n---\n\n## Trigger\n\nThis agent runs automatically via post-edit hook on:\n- `*.php` files (except migrations, entities)\n- `*.js` files\n\n---\n\n## Output\n\n```\nDoc Generator: src/Service/FeatureService.php\n\nAdded documentation:\n  + markAsDone() - line 45\n  + processUpdate() - line 78\n\nSkipped (already documented or obvious):\n  - __construct()\n  - getHelper()\n```\n",
        "plugins/symfony-sk/agents/fix-audit.md": "---\nname: fix-audit\ndescription: Auto-fix simple audit issues. Use after audit fails to automatically correct fixable issues like missing type hints, var declarations, empty catches.\nmodel: haiku\n---\n\n# Fix Audit Agent\n\nAutomatically fix simple, mechanical audit issues.\n\n## Mission\n\n1. Parse audit report issues\n2. Categorize as auto-fixable or manual\n3. Fix auto-fixable issues\n4. Report remaining issues\n\n---\n\n## Auto-Fixable Issues\n\n### PHP\n\n| Issue | Fix |\n|-------|-----|\n| Missing return type | Add based on return statements |\n| Missing parameter type | Add based on usage/docblock |\n| `var` declaration | Replace with `const`/`let` |\n| Debug statements | Remove `dd()`, `var_dump()`, `dump()` |\n| Trailing whitespace | Remove |\n\n### JavaScript\n\n| Issue | Fix |\n|-------|-----|\n| `var` keyword | Replace with `const` or `let` |\n| Debug `console.log` | Remove only debug logs like `console.log('here')`, `console.log('test')`, `console.log('aze')` |\n| Missing `'use strict'` | Add at IIFE start |\n| Empty catch | Add `console.error` with context |\n\n**Note:** Keep useful console.log with data, e.g., `console.log('User:', user)` - only remove meaningless debug strings.\n\n### Twig\n\n| Issue | Fix |\n|-------|-----|\n| Missing `\\| cache` | Add filter (needs label creation) |\n\n---\n\n## Non-Fixable Issues\n\nReport these for manual fix:\n\n- Security vulnerabilities (SQL injection, XSS)\n- Missing translations (need user input)\n- Architecture issues\n- Business logic errors\n- Missing `$lang` parameter (signature change)\n\n---\n\n## Process\n\n1. **Parse** the audit report\n2. **Group** issues by file\n3. **For each file**:\n   - Read file content\n   - Apply auto-fixes\n   - Write fixed content\n4. **Report**:\n   - Fixed issues\n   - Remaining manual issues\n\n---\n\n## Report Format\n\n```\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n              FIX AUDIT REPORT\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nAUTO-FIXED (12 issues):\n\nsrc/Service/FeatureService.php:\n  âœ… Line 45: Added return type `: array`\n  âœ… Line 78: Removed `dd()` debug statement\n\npublic/js/feature.js:\n  âœ… Line 12: Changed `var` to `const`\n  âœ… Line 34: Added 'use strict'\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nMANUAL FIX REQUIRED (3 issues):\n\nsrc/Controller/FeatureAction.php:\n  âš ï¸ Line 23: Missing $lang parameter in service call\n     â†’ Add $lang to method signature and pass to service\n\nmigrations/Version20260118.php:\n  âš ï¸ Line 45: Missing ES translation\n     â†’ Use /labels skill to add translation\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n```\n\n---\n\n## Safety Rules\n\n1. **Never fix** security issues automatically\n2. **Never change** business logic\n3. **Never modify** function signatures without review\n4. **Always backup** before bulk fixes\n5. **Re-run audit** after fixes to verify\n",
        "plugins/symfony-sk/agents/front-creator.md": "---\nname: front-creator\ndescription: Orchestrates Front/Back code creation. Uses front-* skills to create complete presentation layer (routes, services, templates, JS, CSS).\nmodel: sonnet\n---\n\n# Front Creator Agent\n\nOrchestrate the creation of complete Front/Back office layer code.\n\n## âš ï¸ Step 0: Verify Configuration\n\n**BEFORE starting any work**, invoke the `symfony-sk:check-config` skill to ensure project is configured.\n\n```\nSkill: symfony-sk:check-config\n```\n\nIf config is missing, the skill will ask the user for information.\nIf user cancels, STOP and inform that configuration is required.\n\n---\n\n## Mission\n\nCreate all presentation layer files by coordinating skills:\n\n1. **front-api-service** - API client service\n2. **front-service** - Business logic (Bll)\n3. **front-route** - Controllers\n4. **twig-template** - HTML templates\n5. **js-handler** - JavaScript handlers\n6. **css-component** - CSS styles\n\nPlus migrations:\n- **label** - Translation keys\n- **security-zone** - Security zones and controllers\n\n## Workflow\n\n### 1. Understand Requirements\n\nAsk/determine:\n- Feature name\n- Front or Back office (or both)?\n- Page type (form, list, detail, action)?\n- Needs API calls?\n- Needs JavaScript?\n\n### 2. Plan Files\n\n```\nfront/  (or back/)\nâ”œâ”€â”€ src/\nâ”‚   â”œâ”€â”€ Controller/<Feature>/\nâ”‚   â”‚   â””â”€â”€ <Feature><Action>Route.php\nâ”‚   â”œâ”€â”€ Service/\nâ”‚   â”‚   â”œâ”€â”€ Api/\nâ”‚   â”‚   â”‚   â””â”€â”€ Api<Feature>.php\nâ”‚   â”‚   â””â”€â”€ Bll/\nâ”‚   â”‚       â””â”€â”€ <Feature>Service.php\nâ”œâ”€â”€ templates/<feature>/\nâ”‚   â””â”€â”€ <action>.html.twig\nâ””â”€â”€ public/site/\n    â”œâ”€â”€ js/<feature>/\n    â”‚   â””â”€â”€ <action>.js\n    â””â”€â”€ css/<feature>/\n        â””â”€â”€ <action>.css\n```\n\n### 3. Execute Skills\n\n**In order:**\n\n1. **API Service** (to call API)\n   ```\n   /front-api-service - Create API client\n   ```\n\n2. **Bll Service** (business logic)\n   ```\n   /front-service - Create service\n   ```\n\n3. **Route Controller**\n   ```\n   /front-route - Create controller\n   ```\n\n4. **Template**\n   ```\n   /twig-template - Create Twig template\n   ```\n\n5. **JavaScript** (if needed)\n   ```\n   /js-handler - Create JS handler (follows javascript-standards.md)\n   ```\n\n6. **CSS** (if needed)\n   ```\n   /css-component - Create CSS styles\n   ```\n\n7. **Migration**\n   ```\n   /labels - Add translation keys\n   /security-zone - Add security zones/controllers\n   ```\n\n### 4. Validate\n\n- Check all files created\n- Verify translations exist\n- Ensure security zones registered\n- Check JS follows standards\n\n## Example\n\n**Request:** \"Create front page for engagement completion\"\n\n**Skills used:**\n1. `/front-api-service` â†’ `front/src/Service/Api/ApiEngagement.php`\n2. `/front-service` â†’ `front/src/Service/Bll/EngagementService.php`\n3. `/front-route` â†’ `front/src/Controller/Engagement/EngagementDoneRoute.php`\n4. `/twig-template` â†’ `front/templates/engagement/done.html.twig`\n5. `/js-handler` â†’ `front/public/site/js/engagement/done.js`\n6. `/labels` â†’ Add `engagement_done_title`, `engagement_done_submit`, etc.\n7. `/security-zone` â†’ Register in `zone_engagement`\n\n## Checklist\n\n- [ ] Routes extend BaseRoute\n- [ ] Routes use GET or POST only (never PUT/DELETE)\n- [ ] Services inject HelperService\n- [ ] Templates use `| cache` for all text\n- [ ] JS keys passed via `| tradJS`\n- [ ] JS follows `.claude/rules/javascript-standards.md`\n- [ ] Labels in migration\n- [ ] Security zones/controllers in migration\n",
        "plugins/symfony-sk/agents/refactor.md": "---\nname: refactor\ndescription: Guided refactoring operations. Use for rename, extract, move operations with automatic updates across the codebase.\nmodel: sonnet\n---\n\n# Refactor Agent\n\nGuided refactoring with automatic cross-codebase updates.\n\n## âš ï¸ Step 0: Verify Configuration\n\n**BEFORE starting refactoring**, invoke the `symfony-sk:check-config` skill to ensure project is configured.\n\n```\nSkill: symfony-sk:check-config\n```\n\nIf config is missing, the skill will ask the user for information.\nIf user cancels, STOP and inform that configuration is required.\n\n---\n\n## Mission\n\nPerform safe refactoring operations:\n- Rename (class, method, property, variable)\n- Extract (method, class, interface)\n- Move (file, class to different namespace)\n\n---\n\n## Operations\n\n### Rename Class\n\n1. Find all usages (imports, type hints, instantiations)\n2. Update class name in file\n3. Update all usages\n4. Rename file to match class name\n5. Update namespace if needed\n\n```\n/refactor rename class OldName NewName\n```\n\n### Rename Method\n\n1. Find all call sites\n2. Update method declaration\n3. Update all call sites\n4. Update PHPDoc references\n\n```\n/refactor rename method ClassName::oldMethod newMethod\n```\n\n### Rename Property\n\n1. Find all usages (direct, getter/setter)\n2. Update property declaration\n3. Update getter/setter names\n4. Update all usages\n\n```\n/refactor rename property ClassName::$oldProp $newProp\n```\n\n### Extract Method\n\n1. Identify code block to extract\n2. Determine parameters needed\n3. Determine return value\n4. Create new method\n5. Replace original code with call\n\n```\n/refactor extract method ClassName startLine endLine newMethodName\n```\n\n### Move Class\n\n1. Update namespace\n2. Move file to new location\n3. Update all imports\n4. Update autoload if needed\n\n```\n/refactor move class App\\Old\\ClassName App\\New\\ClassName\n```\n\n---\n\n## Process\n\n### 1. Analyze\n\n- Find all references to the target\n- Identify files that will change\n- Check for conflicts (name already exists)\n\n### 2. Preview\n\nShow user what will change:\n\n```\nRefactor: Rename FeatureService to EngagementService\n\nFiles affected (5):\n  - api/src/Service/FeatureService.php â†’ EngagementService.php\n  - api/src/Controller/FeatureAction.php (2 usages)\n  - api/src/Controller/FeatureListAction.php (1 usage)\n  - front/src/Service/Bll/FeatureService.php (1 import)\n\nProceed? [yes/no]\n```\n\n### 3. Execute\n\nApply changes in order:\n1. Update usages first\n2. Update declaration last\n3. Rename file if needed\n\n### 4. Verify\n\n- Run audit on changed files\n- Check for broken references\n\n---\n\n## Safety Rules\n\n1. **Always preview** before executing\n2. **Never refactor** without user confirmation\n3. **Check git status** - warn if uncommitted changes\n4. **Search thoroughly** - use Grep for all patterns\n5. **Handle strings** - warn about string references (config, routes)\n\n---\n\n## Search Patterns\n\n### Class references\n```\n- `use <FullClassName>`\n- `new <ClassName>`\n- `<ClassName>::`\n- `: <ClassName>` (type hint)\n- `@param <ClassName>`\n- `@return <ClassName>`\n```\n\n### Method references\n```\n- `->methodName(`\n- `::methodName(`\n- `'methodName'` (string reference)\n```\n\n---\n\n## Report Format\n\n```\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n              REFACTOR COMPLETE\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nOperation: Rename class FeatureService â†’ EngagementService\n\nChanges applied:\n  âœ… api/src/Service/EngagementService.php (renamed + updated)\n  âœ… api/src/Controller/FeatureAction.php (2 references)\n  âœ… api/src/Controller/FeatureListAction.php (1 reference)\n\nâš ï¸ Manual review needed:\n  - config/services.yaml line 45 (string reference)\n\nRun `git diff` to review all changes.\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n```\n",
        "plugins/symfony-sk/agents/review-audit.md": "---\nname: review-audit\ndescription: Global review of all branch changes. Evaluates architecture, coherence, and overall quality of the feature implementation.\nmodel: sonnet\n---\n\n# Review Audit Agent\n\nSenior developer review of overall implementation quality.\n\n## Mission\n\n1. Read all modified files\n2. Understand the feature\n3. Evaluate as a whole\n4. Provide global assessment\n\n## Process\n\n```bash\nMERGE_BASE=$(git merge-base develop HEAD 2>/dev/null || git merge-base main HEAD)\ngit diff $MERGE_BASE HEAD\n```\n\n## Evaluation Criteria\n\n### Architecture (score /5)\n- [ ] Files in correct locations\n- [ ] Separation of concerns\n- [ ] No business logic in controllers\n- [ ] Proper layer flow: Route â†’ Service â†’ API â†’ Action â†’ Service\n\n### Pattern Consistency (score /5)\n- [ ] Same patterns used throughout\n- [ ] Follows existing project patterns\n- [ ] Consistent error handling\n- [ ] Consistent response format\n\n### Data Flow (score /5)\n- [ ] Language passed through all layers\n- [ ] ApiResult used consistently\n- [ ] Proper data transformation\n\n### Feature Completeness (score /5)\n- [ ] All needed operations implemented\n- [ ] All text has translations\n- [ ] All errors have codes\n- [ ] Security zones registered\n\n### Code Quality (score /5)\n- [ ] No dead code\n- [ ] No debug statements (dd, var_dump, console.log)\n- [ ] No hardcoded values\n- [ ] No TODO/FIXME left\n\n## Report Format\n\n```\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n              GLOBAL REVIEW AUDIT\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nFeature: [Detected purpose]\nFiles: XX | +XXX / -XXX lines\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nArchitecture:         â­â­â­â­â˜† (4/5)\nPattern Consistency:  â­â­â­â­â­ (5/5)\nData Flow:           â­â­â­â­â˜† (4/5)\nFeature Completeness: â­â­â­â˜†â˜† (3/5)\nCode Quality:        â­â­â­â­â˜† (4/5)\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\nOverall: â­â­â­â­â˜† (4/5)\n\nâœ… APPROVED with minor fixes\n\nPriority fixes:\n1. Remove console.log in file X line Y\n2. Add missing delete functionality\n\nSuggestions:\n1. Consider extracting validation to separate service\n\nâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n```\n\n## Verdict\n\n| Score | Verdict |\n|-------|---------|\n| â‰¥ 4/5 | âœ… APPROVED |\n| â‰¥ 3/5 | âœ… APPROVED with fixes |\n| < 3/5 | âš ï¸ NEEDS REVISION |\n| Critical issues | âŒ REJECTED |\n",
        "plugins/symfony-sk/agents/security-audit.md": "---\nname: security-audit\ndescription: Audit security vulnerabilities. Triggered after file modifications to check for security issues.\nmodel: haiku\n---\n\n# Security Audit Agent\n\nAudit security vulnerabilities.\n\n## Mission\n\n1. Read the file\n2. Read rules from `.claude/rules/audit-security.md`\n3. Check for vulnerabilities\n4. Report issues\n\n## Rules Reference\n\nSee `.claude/rules/audit-security.md` for full rules.\n\n### Quick Check\n\n- [ ] No raw SQL with string concatenation\n- [ ] Input validated before use\n- [ ] No `|raw` on untrusted content\n- [ ] No hardcoded credentials\n- [ ] CSRF tokens on forms\n- [ ] State-changing actions use POST\n- [ ] File paths validated (no traversal)\n- [ ] No sensitive data in logs\n\n## Report\n\n**No issues:**\n```\nâœ… SECURITY AUDIT PASSED: /path/to/file.php\n```\n\n**With issues:**\n```\nğŸ”´ SECURITY AUDIT ISSUES: /path/to/file.php\n\nCRITICAL:\n1. [SQL Injection] Line 45\n   Raw SQL with user input: `$sql = \"SELECT * FROM users WHERE id = \" . $id`\n   Fix: Use parameterized query\n\nWARNING:\n1. [Input validation] Line 78\n   User input used without validation\n   Suggestion: Add validation before use\n```\n",
        "plugins/symfony-sk/agents/side-effects-audit.md": "---\nname: side-effects-audit\ndescription: Audit potential side effects of code changes. Identifies unintended consequences.\nmodel: haiku\n---\n\n# Side Effects Audit Agent\n\nIdentify potential side effects of code changes.\n\n## Mission\n\n1. Read the file\n2. Read rules from `.claude/rules/audit-side-effects.md`\n3. Identify potential side effects\n4. Report concerns\n\n## Rules Reference\n\nSee `.claude/rules/audit-side-effects.md` for full rules.\n\n### Quick Check\n\n- [ ] Entity changes are intentional\n- [ ] Cascading deletes expected\n- [ ] Transactions used where needed\n- [ ] No N+1 queries\n- [ ] Large datasets paginated\n- [ ] API calls have error handling\n- [ ] Events don't cause loops\n- [ ] File cleanup handled\n\n## Report\n\n**No issues:**\n```\nâœ… SIDE EFFECTS AUDIT PASSED: /path/to/file.php\n```\n\n**With concerns:**\n```\nâš ï¸ SIDE EFFECTS AUDIT: /path/to/file.php\n\nCONCERNS:\n1. [Database] Line 45\n   Entity modification may cascade\n   Verify: Check entity relationships\n\n2. [Performance] Line 78\n   Loop with database query inside\n   Risk: N+1 query pattern\n   Fix: Use batch query or eager loading\n```\n",
        "plugins/symfony-sk/agents/ticket-planning.md": "---\nname: ticket-planning\ndescription: Plan and structure ticket/issue implementation. Creates organized plans in .claude/ticket/ with vertical slice steps.\nmodel: sonnet\n---\n\n# Ticket Planning Agent\n\nPlan ticket implementations using vertical slice steps.\n\n## âš ï¸ Step 0: Verify Configuration\n\n**BEFORE starting planning**, invoke the `symfony-sk:check-config` skill to ensure project is configured.\n\n```\nSkill: symfony-sk:check-config\n```\n\nIf config is missing, the skill will ask the user for information.\nIf user cancels, STOP and inform that configuration is required.\n\n---\n\n## Mission\n\n1. Understand ticket requirements\n2. Create folder `.claude/ticket/<number>-<desc>/`\n3. Plan implementation as vertical slices\n4. Write summary.md and step-XX-*.md files\n5. Validate with user\n\n## Vertical Slice Philosophy\n\n**A step is a COMPLETE functional slice, NOT a micro-task.**\n\nâŒ WRONG:\n```\nstep-01: Add translation keys\nstep-02: Add DTO\nstep-03: Add error codes\n```\n\nâœ… CORRECT:\n```\nstep-01: Create form (DTO + migration: labels + form + error codes)\nstep-02: Create API (actions + services + migration: security)\nstep-03: Create front (routes + services + migration: security)\nstep-04: Create UI (templates + JS + migration: labels)\n```\n\n## Folder Structure\n\n```\n.claude/ticket/<ticket-number>-<short-description>/\nâ”œâ”€â”€ summary.md\nâ”œâ”€â”€ step-01-<name>.md\nâ”œâ”€â”€ step-02-<name>.md\nâ””â”€â”€ ...\n```\n\n## summary.md Template\n\n```markdown\n# Ticket #<number> - <title>\n\n## Description\n<Brief description>\n\n## Progress\n| Step | Description | Status |\n|------|-------------|--------|\n| 01 | ... | â³ Ã€ faire |\n\n## Status: â³ Ã€ faire | ğŸ”„ En cours | âœ… TerminÃ© | âŒ BloquÃ©\n```\n\n## step-XX-*.md Template\n\n```markdown\n# Step XX - <Title>\n\n## Objective\n<What this step accomplishes>\n\n## Files to Create/Modify\n- `path/to/file.php` - <description>\n\n## Skills to Use\n- `/labels` - For translation keys\n- `/error-codes` - For error codes (via vm-commands DB query)\n- `/autoforms` - For form declaration\n- `/api-action`, `/api-service`, `/api-dto` - For API layer\n- `/front-route`, `/front-service` - For Front layer\n- `/twig-template`, `/js-handler`, `/css-component` - For UI\n\n## Migration Changes\n- Labels: <keys to add>\n- Error codes: <codes to add>\n- Security: <zones/controllers>\n\n## Checklist\n- [ ] Files created\n- [ ] Migration updated\n- [ ] Tested\n```\n\n## Workflow\n\n1. Ask for ticket number and description\n2. Analyze requirements (form? API? UI?)\n3. Plan vertical slices\n4. Use AskUserQuestion to validate plan\n5. Create files\n",
        "plugins/symfony-sk/agents/translation-audit.md": "---\nname: translation-audit\ndescription: Audit migration files for missing translations. Ensures all labels and error codes have translations for all languages.\nmodel: haiku\n---\n\n# Translation Audit Agent\n\nVerify translations are complete for all languages.\n\n## Mission\n\n1. Read migration file\n2. Query DB for languages via `vm-commands`\n3. Check all translation methods\n4. Report missing translations\n\n## Methods to Check\n\n```php\n$this->addLabelFO(string $key, string|array $texts)\n$this->addLabelBO(string $key, string|array $texts)\n$this->addAutoformLabel(string $field, string|array $label)\n$this->addReturnCode(int $code, string|array $texts)\n```\n\n## Process\n\n1. **Get languages from DB**\n   ```sql\n   SELECT code FROM sk_language WHERE active = true\n   ```\n\n2. **Parse migration** for translation calls\n\n3. **Check** each call has all languages\n\n## Report\n\n**All complete:**\n```\nâœ… TRANSLATION AUDIT PASSED: Version20260116.php\nLanguages: FR, EN, ES\nLabels: 5/5 complete\nError codes: 2/2 complete\n```\n\n**Missing translations:**\n```\nğŸ”´ TRANSLATION AUDIT ISSUES: Version20260116.php\n\nLanguages in DB: FR, EN, ES\n\nMISSING:\n1. addLabelFO('feature_title', [...]) - Line 45\n   Missing: ES\n\n2. addReturnCode(-28102, [...]) - Line 52\n   Missing: ES, DE\n\nFix: Add translations for all active languages\n```\n\n## Rules\n\n- All `addLabelFO` / `addLabelBO` must have all languages\n- All `addReturnCode` must have all languages\n- All `addAutoformLabel` must have all languages\n- Keys should follow naming convention: `<feature>_<context>_<element>`\n",
        "plugins/symfony-sk/agents/vm-commands.md": "---\nname: vm-commands\ndescription: Execute commands on the project VM via SSH. Use for running scripts, migrations, cache clear, rebuild containers, or any command that must run on the remote server.\nmodel: haiku\n---\n\n# VM Commands Agent\n\nExecute commands on the project's remote VM.\n\n## âš ï¸ Step 0: Verify Configuration\n\n**BEFORE executing any command**, invoke the `symfony-sk:check-config` skill to ensure project is configured.\n\n```\nSkill: symfony-sk:check-config\n```\n\nIf config is missing, the skill will ask the user for information.\nIf user cancels, STOP and inform that configuration is required.\n\n---\n\n## Configuration\n\nRead from `$CLAUDE_PROJECT_DIR/.claude/project.json`:\n\n```json\n{\n  \"code\": \"project-code\",\n  \"ssh\": { \"host\": \"hostname\" }\n}\n```\n\n## Command Pattern\n\n```bash\nssh <host> \". /sk/sk.lib && . /sk/sk_switchProject <code> && ${skv___projectPath}/scripts/<script>\"\n```\n\n**Variables after `sk_switchProject`:**\n- `${skv___projectPath}` - Project root\n- `${skv___project}` - Project code\n\n## Available Scripts\n\n| Script | Args | Description |\n|--------|------|-------------|\n| `dmm` | - | Execute pending migrations |\n| `dmg` | - | Generate new migration |\n| `dme` | `<Version>` | Re-execute specific migration |\n| `cc` | `all` | Clear all caches |\n\n## Container Commands\n\n```bash\n# Method 1: go script\nssh <host> \". /sk/sk.lib && . /sk/sk_switchProject <code> && ${skv___projectPath}/scripts/go <container> -e '<cmd>'\"\n\n# Method 2: docker exec (complex commands)\nssh <host> \"docker exec --workdir /var/www/html/<container> <code>-<container> <command>\"\n```\n\n| Container | Workdir |\n|-----------|---------|\n| api | /var/www/html/api |\n| front | /var/www/html/front |\n| back | /var/www/html/back |\n| db | - |\n\n## Database Query\n\n```bash\nssh <host> \"docker exec <code>-db psql -U <code> -d <code> -c '<SQL>'\"\n```\n\n---\n\n## âš ï¸ Interactive Shell Errors\n\nSome scripts use `go` which runs `docker exec -it` (interactive flag) but don't actually need it.\n\n**When you get an error about interactive terminal / TTY:**\n\n1. **Read the error message** to understand what command was being run\n2. **Try executing the command directly** using `docker exec` without `-it`:\n   ```bash\n   ssh <host> \"docker exec --workdir /var/www/html/<container> <code>-<container> <command>\"\n   ```\n3. **If it still fails**, ask the user to run it manually\n",
        "plugins/symfony-sk/agents/vm-health-check.md": "---\nname: vm-health-check\ndescription: Check VM health at session start. Verifies ping, SSH, and all containers are accessible.\nmodel: haiku\n---\n\n# VM Health Check Agent\n\nVerify the VM is accessible and healthy.\n\n## âš ï¸ Step 0: Verify Configuration\n\n**BEFORE checking VM health**, invoke the `symfony-sk:check-config` skill to ensure project is configured.\n\n```\nSkill: symfony-sk:check-config\n```\n\nIf config is missing, the skill will ask the user for information.\nIf user cancels, STOP and inform that configuration is required.\n\n---\n\n## Process\n\n1. Read `$CLAUDE_PROJECT_DIR/.claude/project.json`\n2. Test SSH connection\n3. Check containers are running\n4. Report status\n\n## Checks\n\n```bash\n# SSH connection\nssh -o ConnectTimeout=5 <host> \"echo OK\"\n\n# Containers status\nssh <host> \"docker ps --format '{{.Names}}' | grep <code>\"\n```\n\n## Expected Containers\n\n- `<code>-api`\n- `<code>-front`\n- `<code>-back` (if hasBack: true)\n- `<code>-db`\n- `<code>-web`\n- `<code>-webapi`\n\n## Report\n\n```\nVM Health Check: <host>\nâœ… SSH: Connected\nâœ… api: Running\nâœ… front: Running\nâœ… db: Running\n...\n```\n",
        "plugins/symfony-sk/hooks/hooks.json": "{\n  \"description\": \"Hooks for Symfony StarterKit projects\",\n  \"hooks\": {\n    \"SessionStart\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/check-project-config.sh\",\n            \"timeout\": 5\n          },\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/ssh-connect.sh\",\n            \"timeout\": 10\n          },\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/vm-health-check.sh\",\n            \"timeout\": 45\n          }\n        ]\n      }\n    ],\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Edit|Write\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/post-edit-audit.sh \\\"$TOOL_RESULT_FILE_PATH\\\"\",\n            \"timeout\": 5\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "plugins/symfony-sk/skills/api-action/SKILL.md": "---\nname: symfony-sk:api-action\ndescription: Create API Action controllers extending BaseAction. Use for API endpoints.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# API Action Skill\n\n## Mission\n\nCreate API controller actions that handle HTTP requests, validate DTOs, and return JSON.\n\n---\n\n## Location\n\n`api/src/Controller/<Feature>/<Name>Action.php`\n\n---\n\n## Template - Without DTO\n\n```php\n<?php\n\nnamespace App\\Controller\\<Feature>;\n\nuse App\\Service\\<Feature>Service;\nuse StarterKit\\Controller\\BaseAction;\nuse Symfony\\Component\\HttpFoundation\\JsonResponse;\nuse Symfony\\Component\\Routing\\Attribute\\Route;\n\nclass <Feature><Action>Action extends BaseAction\n{\n    #[Route(\"/{lang}/<route>\", name: \"<feature>_<action>\", methods: [\"POST\"])]\n    public function <action>Action(<Feature>Service $service, string $lang, string $key): JsonResponse\n    {\n        $this->initApiResult($lang);\n\n        $this->apiResult = $service-><method>($this->apiResult, $lang, $key);\n\n        return $this->processReturnCode();\n    }\n}\n```\n\n---\n\n## Template - With DTO\n\n```php\n<?php\n\nnamespace App\\Controller\\<Feature>;\n\nuse App\\Dto\\<Feature>\\<Feature><Action>Dto;\nuse App\\Service\\<Feature>Service;\nuse StarterKit\\Controller\\BaseAction;\nuse Symfony\\Component\\HttpFoundation\\JsonResponse;\nuse Symfony\\Component\\HttpFoundation\\Request;\nuse Symfony\\Component\\Routing\\Attribute\\Route;\n\nclass <Feature><Action>Action extends BaseAction\n{\n    #[Route(\"/{lang}/<route>\", name: \"<feature>_<action>\", methods: [\"POST\"])]\n    public function <action>Action(<Feature>Service $service, Request $request, string $lang): JsonResponse\n    {\n        $data = $this->initApiResult($lang, <Feature><Action>Dto::class, $request);\n\n        if ($this->apiResult->getCode() === 0) {\n            $this->apiResult = $service-><method>($this->apiResult, $lang, $data);\n        }\n\n        return $this->processReturnCode();\n    }\n}\n```\n\n---\n\n## Key Rules\n\n1. **Extends `BaseAction`**\n2. **Route starts with `/{lang}/`**\n3. **ALWAYS pass `$lang` to service**\n4. **Check `getCode() === 0` before calling service with DTO**\n5. **Return `$this->processReturnCode()`**\n\n---\n\n## HTTP Methods\n\n| Action | Method |\n|--------|--------|\n| List/Read | GET |\n| Create | POST |\n| Update | PUT |\n| Delete | DELETE |\n| Custom | POST |\n\n---\n\n## Checklist\n\n- [ ] Extends `BaseAction`\n- [ ] Route starts with `/{lang}/`\n- [ ] `$lang` passed to service\n- [ ] Returns `processReturnCode()`\n- [ ] Registered in security zone (use `/security-zone`)\n",
        "plugins/symfony-sk/skills/api-dto/SKILL.md": "---\nname: symfony-sk:api-dto\ndescription: Create DTOs with validation attributes for form data. Use when receiving structured input.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# API DTO Skill\n\n## Mission\n\nCreate Data Transfer Objects with validation attributes for API input.\n\n---\n\n## Location\n\n`api/src/Dto/<Feature>/<Name>Dto.php`\n\n---\n\n## Template\n\n```php\n<?php\n\nnamespace App\\Dto\\<Feature>;\n\nuse StarterKit\\Attribute\\Dto;\nuse StarterKit\\Attribute\\StringProperty;\nuse StarterKit\\Attribute\\IntegerProperty;\nuse App\\Attribute\\DateProperty;\nuse App\\Attribute\\TimeProperty;\n\n#[Dto(emptyError: -XXXXX)]\nfinal class <Name>Dto\n{\n    #[StringProperty(emptyError: -XXXXY, invalidError: -XXXXY, mandatory: true)]\n    public ?string $title = null;\n\n    #[DateProperty(emptyError: -XXXXZ, invalidError: -XXXXZ, mandatory: true)]\n    public ?\\DateTime $date = null;\n\n    #[StringProperty(emptyError: -XXXXW, invalidError: -XXXXW, mandatory: false)]\n    public ?string $description = null;\n}\n```\n\n---\n\n## Property Attributes\n\n### From StarterKit (`StarterKit\\Attribute\\`)\n\n| Attribute | PHP Type | Usage |\n|-----------|----------|-------|\n| `StringProperty` | `?string` | Text, lists |\n| `TextareaProperty` | `?string` | Long text |\n| `IntegerProperty` | `?int` | Numbers |\n| `BooleanProperty` | `?bool` | Yes/No |\n| `EmailProperty` | `?string` | Email validation |\n| `SettingProperty` | `?string` | Dropdown from settings |\n\n### From App (`App\\Attribute\\`)\n\n| Attribute | PHP Type | Usage |\n|-----------|----------|-------|\n| `DateProperty` | `?\\DateTime` | Date (Y-m-d) |\n| `TimeProperty` | `?\\DateTime` | Time (H:i) |\n\n---\n\n## Common Parameters\n\n| Parameter | Description |\n|-----------|-------------|\n| `emptyError` | Error code when empty but mandatory |\n| `invalidError` | Error code when format invalid |\n| `mandatory` | Required field (true/false) |\n| `hidden` | Hide in form |\n| `onChange` | JS callback function name |\n\n---\n\n## Error Code Allocation\n\nUse `/error-code` skill to allocate codes. Query existing codes first via **vm-executor** agent.\n\nConvention `-XXYZZ`:\n- `XX` = Feature code\n- `Y` = Action index\n- `ZZ` = Unique error number (not necessarily sequential, just unique in the range)\n\n**Note**: Each DTO/form needs unique codes. If a feature already has codes `-28100` to `-28105`, the next ones could be `-28106`, `-28107`, etc.\n\n---\n\n## Checklist\n\n- [ ] `#[Dto(emptyError: -XXXXX)]` on class\n- [ ] Each property has attribute with error codes\n- [ ] Error codes allocated via `/error-code` skill (query existing first)\n- [ ] Register form via `/autoform` skill\n",
        "plugins/symfony-sk/skills/api-entity-relation/SKILL.md": "---\nname: symfony-sk:api-entity-relation\ndescription: Add a relation between two existing entities. Use when linking entities with ManyToOne, OneToMany, or ManyToMany relationships.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# API Entity Relation Skill\n\n## Mission\n\nAdd a relationship between two existing Doctrine entities.\n\n---\n\n## Relation Types\n\n### ManyToOne (N:1)\n\nOne entity references another. Most common.\n\n```\nTask -> Event (many tasks belong to one event)\n```\n\n### OneToMany (1:N)\n\nInverse of ManyToOne. Collection on the \"one\" side.\n\n```\nEvent -> Tasks (one event has many tasks)\n```\n\n### ManyToMany (N:N)\n\nBoth sides have collections. Requires join table.\n\n```\nEvent <-> Tags (events have tags, tags have events)\n```\n\n---\n\n## Templates\n\n### ManyToOne (owning side)\n\nAdd to the entity that holds the foreign key:\n\n```php\nuse App\\Entity\\<Target>;\n\n#[ORM\\ManyToOne(targetEntity: <Target>::class)]\n#[ORM\\JoinColumn(nullable: false)]\nprivate ?<Target> $<target> = null;\n\npublic function get<Target>(): ?<Target>\n{\n    return $this-><target>;\n}\n\npublic function set<Target>(?<Target> $<target>): static\n{\n    $this-><target> = $<target>;\n    return $this;\n}\n```\n\n### OneToMany (inverse side)\n\nAdd to the entity that has the collection:\n\n```php\nuse Doctrine\\Common\\Collections\\ArrayCollection;\nuse Doctrine\\Common\\Collections\\Collection;\n\n// In constructor\n$this-><targets> = new ArrayCollection();\n\n// Property\n#[ORM\\OneToMany(targetEntity: <Target>::class, mappedBy: '<source>', cascade: ['persist', 'remove'])]\nprivate Collection $<targets>;\n\npublic function get<Targets>(): Collection\n{\n    return $this-><targets>;\n}\n\npublic function add<Target>(<Target> $<target>): static\n{\n    if (!$this-><targets>->contains($<target>)) {\n        $this-><targets>->add($<target>);\n        $<target>->set<Source>($this);\n    }\n    return $this;\n}\n\npublic function remove<Target>(<Target> $<target>): static\n{\n    if ($this-><targets>->removeElement($<target>)) {\n        if ($<target>->get<Source>() === $this) {\n            $<target>->set<Source>(null);\n        }\n    }\n    return $this;\n}\n```\n\n### ManyToMany\n\nOwning side:\n```php\n#[ORM\\ManyToMany(targetEntity: <Target>::class, inversedBy: '<sources>')]\n#[ORM\\JoinTable(name: '<source>_<target>')]\nprivate Collection $<targets>;\n```\n\nInverse side:\n```php\n#[ORM\\ManyToMany(targetEntity: <Source>::class, mappedBy: '<targets>')]\nprivate Collection $<sources>;\n```\n\n---\n\n## Process\n\n1. **Identify relation type** (ManyToOne, OneToMany, ManyToMany)\n2. **Identify owning side** (the one with the foreign key)\n3. **Add property + methods** to owning side\n4. **Add inverse property + methods** if bidirectional\n5. **Add constructor initialization** for collections\n6. **Run `dsu`** to update schema\n\n---\n\n## After Modification\n\n```bash\nssh <host> \"docker exec <code>-api ./scripts/dsu\"\n```\n\n---\n\n## Checklist\n\n- [ ] Relation type identified\n- [ ] Owning side determined\n- [ ] Property added with ORM attributes\n- [ ] Getter/setter added\n- [ ] Constructor initializes collections (if applicable)\n- [ ] Inverse side added (if bidirectional)\n- [ ] `mappedBy` / `inversedBy` match property names\n- [ ] Schema updated via `dsu`\n",
        "plugins/symfony-sk/skills/api-entity/SKILL.md": "---\nname: symfony-sk:api-entity\ndescription: Create or modify Doctrine entities. Use for database models.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# API Entity Skill\n\n## Mission\n\nCreate or modify Doctrine ORM entities.\n\n---\n\n## Location\n\n`api/src/Entity/<Name>.php`\n\n---\n\n## Template\n\n```php\n<?php\n\nnamespace App\\Entity;\n\nuse App\\Repository\\<Name>Repository;\nuse Doctrine\\ORM\\Mapping as ORM;\nuse StarterKit\\Entity\\BaseEntity;\nuse Symfony\\Component\\Serializer\\Attribute\\Groups;\n\n#[ORM\\Entity(repositoryClass: <Name>Repository::class)]\n#[ORM\\Table(name: '<table_name>')]\nclass <Name> extends BaseEntity\n{\n    #[ORM\\Column(type: 'string', length: 255)]\n    #[Groups(['<feature>'])]\n    private ?string $title = null;\n\n    #[ORM\\Column(type: 'datetime', nullable: true)]\n    #[Groups(['<feature>'])]\n    private ?\\DateTime $date = null;\n\n    #[ORM\\ManyToOne(targetEntity: User::class)]\n    #[ORM\\JoinColumn(nullable: false)]\n    private ?User $owner = null;\n\n    // Getters and setters...\n\n    public function getTitle(): ?string\n    {\n        return $this->title;\n    }\n\n    public function setTitle(?string $title): self\n    {\n        $this->title = $title;\n        return $this;\n    }\n}\n```\n\n---\n\n## Common Column Types\n\n| Type | Usage |\n|------|-------|\n| `string` | Text (specify length) |\n| `text` | Long text |\n| `integer` | Numbers |\n| `boolean` | True/false |\n| `datetime` | Date and time |\n| `date` | Date only |\n| `json` | JSON data |\n\n---\n\n## Relationships\n\n```php\n// Many-to-One\n#[ORM\\ManyToOne(targetEntity: User::class)]\n#[ORM\\JoinColumn(nullable: false)]\nprivate ?User $owner = null;\n\n// One-to-Many\n#[ORM\\OneToMany(mappedBy: 'parent', targetEntity: Child::class)]\nprivate Collection $children;\n\n// Many-to-Many\n#[ORM\\ManyToMany(targetEntity: Tag::class)]\nprivate Collection $tags;\n```\n\n---\n\n## Serialization Groups\n\nUse `#[Groups(['<feature>'])]` for API output control.\n\n---\n\n## After Modification\n\n**IMPORTANT**: Run `dsu` (Doctrine Schema Update) on VM after entity changes.\n\nUse **vm-executor** agent:\n```\n\"Run: ./scripts/dsu\"\n```\n\n---\n\n## Checklist\n\n- [ ] Extends `BaseEntity`\n- [ ] Has repository class\n- [ ] Groups defined for serialization\n- [ ] Getters/setters for all properties\n- [ ] Run `dsu` after changes\n",
        "plugins/symfony-sk/skills/api-migration/SKILL.md": "---\nname: symfony-sk:api-migration\ndescription: Generate a new empty migration file with proper naming. Use when starting a new feature that needs database/settings changes.\nallowed-tools: Read, Write, Bash, Glob\n---\n\n# API Migration Skill\n\n## Mission\n\nGenerate a new empty migration file with proper naming convention.\n\n---\n\n## Process\n\n### 1. Generate via VM\n\nUse `vm-commands` agent to generate migration:\n\n```bash\nssh <host> \". /sk/sk.lib && . /sk/sk_switchProject <code> && ${skv___projectPath}/scripts/dmg\"\n```\n\nThis creates a new file like `api/migrations/Version20260118143022.php`\n\n### 2. Get the filename\n\nThe script outputs the created filename. Parse it to get the version name.\n\n### 3. Update description\n\nEdit the migration to add proper description:\n\n```php\npublic function getDescription(): string\n{\n    return '#<ticket> - <description>';\n}\n```\n\n---\n\n## Template\n\n```php\n<?php\n\ndeclare(strict_types=1);\n\nnamespace DoctrineMigrations;\n\nuse App\\_Const;\nuse App\\Migrations\\AppAbstractMigration;\nuse Doctrine\\DBAL\\Schema\\Schema;\n\nfinal class Version<timestamp> extends AppAbstractMigration\n{\n    public function getDescription(): string\n    {\n        return '#<ticket> - <description>';\n    }\n\n    public function up(Schema $schema): void\n    {\n        // Labels\n\n        // Error codes\n\n        // Security zones\n\n        // Controllers\n\n        // AutoForms\n    }\n}\n```\n\n---\n\n## Naming Convention\n\nDescription format: `#<ticket-number> - <short description>`\n\nExamples:\n- `#48 - Add engagement completion form`\n- `#52 - Add user profile settings`\n\n---\n\n## Checklist\n\n- [ ] Migration generated via `dmg` script\n- [ ] Description updated with ticket number\n- [ ] File extends `AppAbstractMigration`\n",
        "plugins/symfony-sk/skills/api-repository/SKILL.md": "---\nname: symfony-sk:api-repository\ndescription: Create or modify Doctrine repositories. Use for custom database queries.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# API Repository Skill\n\n## Mission\n\nCreate or modify Doctrine repositories for custom queries.\n\n---\n\n## Location\n\n`api/src/Repository/<Name>Repository.php`\n\n---\n\n## Template\n\n```php\n<?php\n\nnamespace App\\Repository;\n\nuse App\\Entity\\<Name>;\nuse Doctrine\\Bundle\\DoctrineBundle\\Repository\\ServiceEntityRepository;\nuse Doctrine\\Persistence\\ManagerRegistry;\n\n/**\n * @extends ServiceEntityRepository<<Name>>\n */\nclass <Name>Repository extends ServiceEntityRepository\n{\n    public function __construct(ManagerRegistry $registry)\n    {\n        parent::__construct($registry, <Name>::class);\n    }\n\n    /**\n     * @return <Name>[]\n     */\n    public function findActiveByOwner(User $owner): array\n    {\n        return $this->createQueryBuilder('e')\n            ->andWhere('e.owner = :owner')\n            ->andWhere('e.isDeleted = 0')\n            ->setParameter('owner', $owner)\n            ->orderBy('e.createdAt', 'DESC')\n            ->getQuery()\n            ->getResult();\n    }\n\n    public function findOneByKey(string $key): ?<Name>\n    {\n        return $this->createQueryBuilder('e')\n            ->andWhere('e.key = :key')\n            ->andWhere('e.isDeleted = 0')\n            ->setParameter('key', $key)\n            ->getQuery()\n            ->getOneOrNullResult();\n    }\n}\n```\n\n---\n\n## Common Patterns\n\n### Find with conditions\n```php\npublic function findByStatus(string $status): array\n{\n    return $this->createQueryBuilder('e')\n        ->andWhere('e.status = :status')\n        ->andWhere('e.isDeleted = 0')\n        ->setParameter('status', $status)\n        ->getQuery()\n        ->getResult();\n}\n```\n\n### Count\n```php\npublic function countByOwner(User $owner): int\n{\n    return $this->createQueryBuilder('e')\n        ->select('COUNT(e.id)')\n        ->andWhere('e.owner = :owner')\n        ->andWhere('e.isDeleted = 0')\n        ->setParameter('owner', $owner)\n        ->getQuery()\n        ->getSingleScalarResult();\n}\n```\n\n### With joins\n```php\npublic function findWithRelations(string $key): ?<Name>\n{\n    return $this->createQueryBuilder('e')\n        ->leftJoin('e.items', 'i')\n        ->addSelect('i')\n        ->andWhere('e.key = :key')\n        ->setParameter('key', $key)\n        ->getQuery()\n        ->getOneOrNullResult();\n}\n```\n\n---\n\n## Checklist\n\n- [ ] Extends `ServiceEntityRepository`\n- [ ] Type hints in PHPDoc\n- [ ] Always filter `isDeleted = 0`\n- [ ] Use QueryBuilder (not raw SQL)\n",
        "plugins/symfony-sk/skills/api-service/SKILL.md": "---\nname: symfony-sk:api-service\ndescription: Create or modify API services extending BaseService. Use for business logic.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# API Service Skill\n\n## Mission\n\nCreate API services that handle business logic, database operations, and return ApiResult.\n\n---\n\n## Location\n\n`api/src/Service/<Name>Service.php`\n\n---\n\n## Template\n\n```php\n<?php\n\nnamespace App\\Service;\n\nuse App\\Repository\\<Entity>Repository;\nuse Doctrine\\ORM\\EntityManagerInterface;\nuse Psr\\Log\\LoggerInterface;\nuse StarterKit\\Entity\\ApiResult;\nuse StarterKit\\Service\\BaseService;\nuse StarterKit\\Service\\Helper\\HelperService;\nuse Symfony\\Component\\EventDispatcher\\EventDispatcherInterface;\n\nclass <Feature>Service extends BaseService\n{\n    public function __construct(\n                         EntityManagerInterface $em,\n                         LoggerInterface        $logger,\n                         HelperService          $helper,\n                         EventDispatcherInterface $dispatcher,\n        private readonly <Entity>Repository     $repository,\n    ) {\n        parent::__construct($em, $logger, $helper, $dispatcher);\n    }\n\n    public function read(ApiResult $apiResult, string $lang, string $key): ApiResult\n    {\n        $entity = $this->repository->findOneBy(['key' => $key, 'isDeleted' => 0]);\n\n        if (!$entity) {\n            // Array contains values to inject in message placeholders (%%1%%, %%2%%, etc.)\n            return $this->helper->setReturnCode($apiResult, $lang, -XXXXX, [$key]);\n        }\n\n        $apiResult->setData($this->normalize($entity));\n        return $apiResult;\n    }\n\n    public function create(ApiResult $apiResult, string $lang, <Dto> $data): ApiResult\n    {\n        $entity = new <Entity>();\n        $this->helper->initNewEntity($entity);\n        // Set properties from $data\n\n        $this->entityManager->persist($entity);\n        $this->entityManager->flush();\n\n        $apiResult->setData($this->normalize($entity));\n        return $apiResult;\n    }\n\n    private function normalize(mixed $data): array\n    {\n        return $this->normalizer->normalize($data, null, ['groups' => ['<feature>']]);\n    }\n}\n```\n\n---\n\n## Key Rules\n\n1. **Extends `BaseService`**\n2. **Methods MUST have `$lang` parameter** (requested language for translations/localized data)\n3. **Return `ApiResult`**\n4. **Use `$this->helper->setReturnCode()` for errors**\n5. **Use error codes from `/error-code` skill**\n\n---\n\n## Error Handling with setReturnCode\n\n```php\n// Signature: setReturnCode(ApiResult $apiResult, string $lang, int $code, array $params = [])\n// $params contains values to inject into message placeholders\n\n// Example: Error message \"User %%1%% not found\" with email in array\nreturn $this->helper->setReturnCode($apiResult, $lang, -30201, [$user->getEmail()]);\n// Result: \"User test@test.com not found\"\n\n// Example: Multiple placeholders \"%%1%% cannot be assigned to %%2%%\"\nreturn $this->helper->setReturnCode($apiResult, $lang, -30202, [$taskName, $userName]);\n```\n\nUse **vm-executor** agent to find existing error codes or `/error-code` skill to create new ones.\n\n---\n\n## Checklist\n\n- [ ] Extends `BaseService`\n- [ ] Constructor calls `parent::__construct()`\n- [ ] All methods have `$lang` parameter\n- [ ] Error codes used for failures\n- [ ] Returns `ApiResult`\n",
        "plugins/symfony-sk/skills/autoform/SKILL.md": "---\nname: symfony-sk:autoform\ndescription: Declare AutoForms in migrations. Use when registering form keys and field labels.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# AutoForm Skill\n\n## â›” CRITICAL RULES\n\n**MANDATORY: Validate with `AskUserQuestion` BEFORE writing to migration.**\n\n---\n\n## Mission\n\nRegister AutoForm declarations and field labels in migrations.\n\n---\n\n## Functions\n\n```php\n// Register form\n$this->addAutoform('FormKey', FullDtoClass::class);\n\n// Add field labels\n$this->addAutoformLabel('DtoClassName_propertyName', [\n    'FR' => 'Label franÃ§ais',\n    'EN' => 'English label',\n]);\n```\n\n---\n\n## Label Key Format\n\n`<DtoClassName>_<propertyName>`\n\nExample: `EventCreateDto_title`, `EventCreateDto_date`\n\n---\n\n## Process\n\n1. **Identify DTO**: Name and properties\n2. **Generate labels**: For each property\n3. **Validate**: Use AskUserQuestion for all labels\n4. **Write**: Add to migration\n\n---\n\n## Example Migration\n\n```php\n// Register form\n$this->addAutoform('EventCreate', EventCreateDto::class);\n\n// Field labels\n$this->addAutoformLabel('EventCreateDto_title', [\n    'FR' => 'Titre',\n    'EN' => 'Title',\n]);\n\n$this->addAutoformLabel('EventCreateDto_date', [\n    'FR' => 'Date',\n    'EN' => 'Date',\n]);\n```\n\n---\n\n## Checklist\n\n- [ ] Form registered with `addAutoform()`\n- [ ] All properties have labels\n- [ ] Label keys follow `DtoClassName_propertyName`\n- [ ] All languages have translations\n- [ ] AskUserQuestion used before writing\n",
        "plugins/symfony-sk/skills/check-config/SKILL.md": "---\nname: symfony-sk:check-config\ndescription: Verify project configuration before using other skills/agents. Creates .claude/project.json if missing.\nallowed-tools: Read, Write, Edit, Glob, AskUserQuestion\nuser-invocable: false\n---\n\n# Check Config Skill\n\n## Mission\n\nVerify that the project is properly configured for Symfony StarterKit plugin. This skill is called automatically by agents before they start their work.\n\n---\n\n## Verification Steps\n\n### 1. Check if `.claude/project.json` exists\n\n```bash\n# File should exist at project root\n.claude/project.json\n```\n\n### 2. If missing, gather information\n\nUse `AskUserQuestion` to collect:\n\n```json\n{\n  \"questions\": [\n    {\n      \"question\": \"Quel est le code du projet ? (prÃ©fixe des containers Docker, ex: kotchi, myproject)\",\n      \"header\": \"Code projet\",\n      \"options\": [\n        {\"label\": \"Entrer le code\", \"description\": \"Je vais saisir le code du projet\"}\n      ],\n      \"multiSelect\": false\n    },\n    {\n      \"question\": \"Quelle est l'URL/hostname de la VM du projet ? (ex: kotchi2, myproject.dev)\",\n      \"header\": \"URL VM\",\n      \"options\": [\n        {\"label\": \"Pas de VM\", \"description\": \"DÃ©veloppement local uniquement\"},\n        {\"label\": \"Entrer l'URL\", \"description\": \"Je vais saisir l'URL de la VM\"}\n      ],\n      \"multiSelect\": false\n    },\n    {\n      \"question\": \"Le projet a-t-il un back office ?\",\n      \"header\": \"Back office\",\n      \"options\": [\n        {\"label\": \"Oui\", \"description\": \"Le projet a front + back office\"},\n        {\"label\": \"Non\", \"description\": \"Uniquement front office\"}\n      ],\n      \"multiSelect\": false\n    }\n  ]\n}\n```\n\n### 3. Create `.claude/project.json`\n\nAfter collecting answers, create the file:\n\n```json\n{\n  \"projectCode\": \"<user-provided-code>\",\n  \"projectUrl\": \"<user-provided-url-or-null>\",\n  \"hasBack\": true|false,\n  \"ssh\": {\n    \"host\": \"<projectUrl>\",\n    \"password\": \"<ask-if-needed>\"\n  }\n}\n```\n\n### 4. Verify required fields\n\n| Field | Required | Description |\n|-------|----------|-------------|\n| `projectCode` | Yes | Docker container prefix |\n| `projectUrl` | No | SSH hostname (null if local) |\n| `hasBack` | Yes | Boolean for back office |\n\n---\n\n## Return Values\n\nAfter verification, return the config for the calling agent:\n\n```\nCONFIG_OK:\n- projectCode: <code>\n- projectUrl: <url>\n- hasBack: <true/false>\n```\n\nOr if user cancels:\n\n```\nCONFIG_CANCELLED: User declined to configure project\n```\n\n---\n\n## Usage by Agents\n\nAgents should call this skill at the start:\n\n```markdown\n## Step 0: Verify Configuration\n\nBefore starting, invoke the `symfony-sk:check-config` skill to ensure project is configured.\n\nIf config is missing, the skill will ask the user for information.\nIf user cancels, STOP and inform user that configuration is required.\n```\n\n---\n\n## SSH Configuration (Optional)\n\nIf `projectUrl` is provided and SSH is needed:\n\n1. Check if `.claude/project.json` has `ssh.password`\n2. If missing, ask user for SSH password\n3. Store in project.json (this file should be in .gitignore)\n\n---\n\n## Checklist\n\n- [ ] `.claude/project.json` exists\n- [ ] `projectCode` is set\n- [ ] `hasBack` is set (boolean)\n- [ ] If remote VM: `projectUrl` is set\n",
        "plugins/symfony-sk/skills/css-component/SKILL.md": "---\nname: symfony-sk:css-component\ndescription: Create CSS/SCSS styles for components. Use for visual styling.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# CSS Component Skill\n\n## Mission\n\nCreate CSS/SCSS styles for UI components.\n\n---\n\n## Location\n\n`front/public/site/css/<feature>/<name>.css` (or `.scss`)\n\n---\n\n## Template - CSS\n\n```css\n/* Feature Component Styles */\n\n.feature-component {\n    /* Layout */\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n\n    /* Spacing */\n    padding: 1.5rem;\n    margin-bottom: 1rem;\n\n    /* Visual */\n    background-color: var(--bg-color, #fff);\n    border-radius: 0.5rem;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.feature-component__header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n}\n\n.feature-component__title {\n    font-size: 1.25rem;\n    font-weight: 600;\n    color: var(--text-color, #333);\n}\n\n.feature-component__body {\n    flex: 1;\n}\n\n.feature-component__footer {\n    display: flex;\n    justify-content: flex-end;\n    gap: 0.5rem;\n}\n\n/* States */\n.feature-component--loading {\n    opacity: 0.6;\n    pointer-events: none;\n}\n\n.feature-component--error {\n    border-color: var(--error-color, #dc3545);\n}\n```\n\n---\n\n## Template - SCSS\n\n```scss\n// Feature Component Styles\n\n$component-padding: 1.5rem;\n$component-radius: 0.5rem;\n\n.feature-component {\n    display: flex;\n    flex-direction: column;\n    gap: 1rem;\n    padding: $component-padding;\n    background-color: var(--bg-color, #fff);\n    border-radius: $component-radius;\n    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n\n    &__header {\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n    }\n\n    &__title {\n        font-size: 1.25rem;\n        font-weight: 600;\n    }\n\n    &__body {\n        flex: 1;\n    }\n\n    &__footer {\n        display: flex;\n        justify-content: flex-end;\n        gap: 0.5rem;\n    }\n\n    // States\n    &--loading {\n        opacity: 0.6;\n        pointer-events: none;\n    }\n\n    &--error {\n        border-color: var(--error-color, #dc3545);\n    }\n}\n```\n\n---\n\n## BEM Convention\n\n- **Block**: `.feature-component`\n- **Element**: `.feature-component__header`\n- **Modifier**: `.feature-component--loading`\n\n---\n\n## CSS Variables\n\nUse CSS variables for theming:\n\n```css\n.feature-component {\n    --bg-color: #fff;\n    --text-color: #333;\n    --accent-color: #007bff;\n}\n\n[data-theme=\"dark\"] .feature-component {\n    --bg-color: #1a1a1a;\n    --text-color: #f0f0f0;\n}\n```\n\n---\n\n## Checklist\n\n- [ ] BEM naming convention\n- [ ] CSS variables for theming\n- [ ] States (loading, error, active)\n- [ ] Responsive if needed\n",
        "plugins/symfony-sk/skills/error-code/SKILL.md": "---\nname: symfony-sk:error-code\ndescription: Add error codes with translations to migrations. Use for validation errors and service errors.\nallowed-tools: Read, Write, Edit, Glob, Grep, Bash\n---\n\n# Error Code Skill\n\n## â›” CRITICAL RULES\n\n**MANDATORY: Validate with `AskUserQuestion` BEFORE writing to migration.**\n\n---\n\n## Mission\n\nAdd return codes to migrations for form validation and service errors.\n\n---\n\n## Code Convention: `-XXYZZ`\n\n| Part | Meaning |\n|------|---------|\n| XX | Feature (e.g., 28 = Event) |\n| Y | Action (1=create, 2=read, 3=update, 4=delete, 5+=partial) |\n| ZZ | Error index (00=form empty, 01-99=specific) |\n\nExample: `-28105` = Event feature, create action, error #5\n\n---\n\n## Process\n\n1. **Check cache** for feature codes\n2. **Query DB** if cache missing/stale (via vm-commands)\n3. **Update cache** with results\n4. **Find next available** code in action range\n5. **Generate translations**\n6. **Validate**: Use AskUserQuestion\n7. **Write**: Add to migration\n8. **Update cache** with new code\n\n---\n\n## Function\n\n```php\n$this->addReturnCode(-28105, [\n    'FR' => 'Titre requis',\n    'EN' => 'Title required',\n]);\n```\n\n---\n\n## Identify Feature Code\n\nDetermine the feature code (XX in -XXYZZ) from:\n\n1. **Current migration** - Look for existing `-XXxxx` codes\n2. **DTO/Controller name** - `EventCreateDto` â†’ search Event codes\n3. **User context** - \"pour engagement\" â†’ search engagement codes\n4. **DB query** - Find which XX is used for this domain\n\n---\n\n## Cache Mechanism\n\nCache file: `$CLAUDE_PROJECT_DIR/.claude/cache/error-codes.json`\n\n```json\n{\n  \"updated\": \"2026-01-18T14:30:00Z\",\n  \"codes\": {\n    \"-28100\": \"Event - Form empty\",\n    \"-28101\": \"Event - Title required\",\n    \"-30100\": \"Engagement - Form empty\"\n  }\n}\n```\n\n### Usage\n\n1. **Read cache** before proposing new code\n2. **Query DB** if cache missing or > 1 hour old\n3. **Update cache** after DB query\n4. **Add new code** to cache after creation\n\nThis avoids proposing duplicate codes.\n\n---\n\n## Query Existing Codes\n\n**Use the `vm-commands` agent to run DB queries:**\n\n```sql\n-- All codes for a feature (XX = 28)\nSELECT keyname FROM sk_settings\nWHERE groupname='returnCode' AND keyname LIKE '-28%'\nORDER BY keyname;\n\n-- All codes (for full cache)\nSELECT keyname, textvalue FROM sk_settings\nWHERE groupname='returnCode'\nORDER BY keyname;\n```\n\nThe VM agent executes via SSH on the project VM.\n\n---\n\n## AskUserQuestion Format\n\n```json\n{\n  \"questions\": [{\n    \"question\": \"Code proposÃ© : -28105\\n\\nTraductions :\\nâ€¢ FR : Titre requis\\nâ€¢ EN : Title required\\n\\nCorrect ?\",\n    \"header\": \"Code\",\n    \"options\": [\n      {\"label\": \"Oui, valider\", \"description\": \"Correct\"},\n      {\"label\": \"Modifier\", \"description\": \"Changer\"}\n    ],\n    \"multiSelect\": false\n  }]\n}\n```\n\n---\n\n## Checklist\n\n- [ ] Searched existing codes first\n- [ ] Code follows -XXYZZ convention\n- [ ] All languages have translations\n- [ ] AskUserQuestion used before writing\n",
        "plugins/symfony-sk/skills/front-api-service/SKILL.md": "---\nname: symfony-sk:front-api-service\ndescription: Create Api services for calling the backend API. Use for HTTP calls to API layer.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# Front API Service Skill\n\n## Mission\n\nCreate API client services that call the backend API.\n\n---\n\n## Location\n\n- Front: `front/src/Service/Api/Api<Feature>.php`\n- Back: `back/src/Service/Api/Api<Feature>.php`\n\n---\n\n## Template\n\n```php\n<?php\n\nnamespace App\\Service\\Api;\n\nuse StarterKit\\Model\\ApiResult;\nuse StarterKit\\Service\\BaseApiService;\n\nclass Api<Feature> extends BaseApiService\n{\n    public function read(string $lang, string $key): ApiResult\n    {\n        $this->setGetMethod();\n        $this->setSecureByUser();\n        $this->setApiRoute($lang.\"/<feature>/\".$key);\n\n        return $this->callApi();\n    }\n\n    public function update(string $lang, string $key, array $data): ApiResult\n    {\n        $this->setPutMethod();\n        $this->setSecureByUser();\n        $this->callNeedDataInBody();\n        $this->setBody($data);\n        $this->setApiRoute($lang.\"/<feature>/\".$key);\n\n        return $this->callApi();\n    }\n\n    public function delete(string $lang, string $key): ApiResult\n    {\n        $this->setDeleteMethod();\n        $this->setSecureByUser();\n        $this->setApiRoute($lang.\"/<feature>/\".$key);\n\n        return $this->callApi();\n    }\n}\n```\n\n---\n\n## Available Methods\n\n### HTTP Methods\n- `setGetMethod()`\n- `setPostMethod()`\n- `setPutMethod()`\n- `setDeleteMethod()`\n\n### Authentication\n- `setSecureByUser()` - User token\n- `setSecureByApiKey()` - API key\n- (none) - Public\n\n### Request Body\n- `callNeedDataInBody()` - Required before `setBody()`\n- `setBody(array $data)`\n\n---\n\n## Key Rules\n\n1. **Extends `BaseApiService`**\n2. **No constructor** (parent handles it)\n3. **Routes start with `$lang.\"/...\"`**\n4. **Call `callNeedDataInBody()` before `setBody()`**\n\n---\n\n## Checklist\n\n- [ ] Extends `BaseApiService`\n- [ ] `$lang` is first parameter\n- [ ] Routes start with `$lang.\"/...\"`\n- [ ] `setSecureByUser()` for authenticated endpoints\n- [ ] `callNeedDataInBody()` before `setBody()`\n",
        "plugins/symfony-sk/skills/front-route/SKILL.md": "---\nname: symfony-sk:front-route\ndescription: Create front/back Route controllers extending BaseRoute. Use for pages and form endpoints.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# Front Route Skill\n\n## Mission\n\nCreate Route controllers for front or back office.\n\n---\n\n## Location\n\n- Front: `front/src/Controller/<Feature>/<Name>Route.php`\n- Back: `back/src/Controller/<Feature>/<Name>Route.php`\n\n---\n\n## HTTP Methods\n\n**CRITICAL: Only GET or POST** - Never PUT, DELETE, PATCH in front/back.\n\n---\n\n## Template\n\n```php\n<?php\n\nnamespace App\\Controller\\<Feature>;\n\nuse App\\Service\\Bll\\<Feature>Service;\nuse StarterKit\\Controller\\BaseRoute;\nuse Symfony\\Component\\HttpFoundation\\JsonResponse;\nuse Symfony\\Component\\HttpFoundation\\Response;\nuse Symfony\\Component\\Routing\\Attribute\\Route;\n\nclass <Feature><Action>Route extends BaseRoute\n{\n    #[Route(\"/<feature>/{key}/<action>\", name: \"<feature>_<action>\", methods: [\"POST\"])]\n    public function <action>(string $key, <Feature>Service $service): Response\n    {\n        $result = $service-><method>($key);\n\n        return $this->checkAuthorization($result, new JsonResponse([\n            'code' => $result->getCode(),\n            'message' => $result->getMessage(),\n            'data' => $result->getData(),\n        ]));\n    }\n}\n```\n\n---\n\n## Key Rules\n\n1. **Extends `BaseRoute`**\n2. **Inject services in method parameters** (NOT constructor)\n3. **Wrap response with `$this->checkAuthorization()`**\n4. **Only GET or POST methods**\n\n---\n\n## Patterns\n\n### JSON Response (API-like)\n```php\nreturn $this->checkAuthorization($result, new JsonResponse([\n    'code' => $result->getCode(),\n    'message' => $result->getMessage(),\n    'data' => $result->getData(),\n]));\n```\n\n### Page Render\n```php\nreturn $this->checkAuthorization($result, $this->render('feature/page.html.twig', [\n    'data' => $result->getData(),\n]));\n```\n\n---\n\n## Checklist\n\n- [ ] Extends `BaseRoute`\n- [ ] Service injected in method parameter\n- [ ] HTTP method is GET or POST only\n- [ ] Response wrapped with `checkAuthorization()`\n- [ ] Registered in security zone\n",
        "plugins/symfony-sk/skills/front-service/SKILL.md": "---\nname: symfony-sk:front-service\ndescription: Create Bll services for front/back. Use for business logic that calls API.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# Front Service (Bll) Skill\n\n## Mission\n\nCreate Business Logic Layer services that call API services.\n\n---\n\n## Location\n\n- Front: `front/src/Service/Bll/<Name>Service.php`\n- Back: `back/src/Service/Bll/<Name>Service.php`\n\n---\n\n## Template\n\n```php\n<?php\n\nnamespace App\\Service\\Bll;\n\nuse App\\Service\\Api\\Api<Feature>;\nuse StarterKit\\Model\\ApiResult;\nuse StarterKit\\Service\\Bll\\HelperService;\n\nclass <Feature>Service\n{\n    public function __construct(\n        private readonly HelperService $helper,\n        private readonly Api<Feature>  $api,\n    ) {\n        $this->helper->logDebug(\"[App] - Service - <Feature>Service - Load\");\n    }\n\n    public function read(string $key): ApiResult\n    {\n        $this->helper->logDebug(\"[App] - Service - <Feature>Service - Read\");\n\n        return $this->api->read($this->helper->getLanguage(), $key);\n    }\n\n    public function update(string $key, array $data): ApiResult\n    {\n        $this->helper->logDebug(\"[App] - Service - <Feature>Service - Update\");\n\n        return $this->api->update($this->helper->getLanguage(), $key, $data);\n    }\n}\n```\n\n---\n\n## Key Rules\n\n1. **Constructor injection** (unlike Route controllers)\n2. **Inject `HelperService`** for language and logging\n3. **Use `$this->helper->getLanguage()`** for API calls\n4. **Return `ApiResult`**\n5. **Log method calls**\n\n---\n\n## Checklist\n\n- [ ] `HelperService` injected\n- [ ] Api service(s) injected\n- [ ] Methods use `$this->helper->getLanguage()`\n- [ ] Debug logging at method entry\n- [ ] Returns `ApiResult`\n",
        "plugins/symfony-sk/skills/js-handler/SKILL.md": "---\nname: symfony-sk:js-handler\ndescription: Create JavaScript handlers for pages. Use for DOM interactions and API calls.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# JavaScript Handler Skill\n\n## Mission\n\nCreate JavaScript handlers following the project's strict standards.\n\n---\n\n## Location\n\n`front/public/site/js/<feature>/<name>.js`\n\n---\n\n## Standards\n\n**MANDATORY: Read and apply ALL rules from:**\n\n`.claude/rules/javascript-standards.md`\n\n---\n\n## Quick Reference\n\n1. **IIFE** - `(function() { 'use strict'; ... })();`\n2. **No `var`** - `const` default, `let` if reassignment\n3. **Declare locally** - Variables closest to usage\n4. **Assertions** - Validate at function entry, throw explicit errors\n5. **Max 60 lines** - Per function\n6. **Check returns** - `response.ok`, null, undefined\n7. **No empty catch** - Log with context or re-throw\n8. **No mutation** - Return new objects\n9. **Object mapping** - Over `switch` when possible\n10. **Bounded loops** - Prefer `map`/`filter`/`reduce`\n\n---\n\n## Translations\n\n```javascript\n// Twig: {{ ['key1', 'key2'] | tradJS }}\n// JS: window.trad.key1\n```\n\n---\n\n## Checklist\n\nSee `.claude/rules/javascript-standards.md` for complete checklist.\n",
        "plugins/symfony-sk/skills/label/SKILL.md": "---\nname: symfony-sk:label\ndescription: Add labels with translations to migrations. Use for ANY UI text - titles, buttons, messages, placeholders, etc.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# Label Skill\n\n## â›” CRITICAL RULES\n\n**MANDATORY: Validate with `AskUserQuestion` BEFORE writing to migration.**\n\n### Validation workflow:\n1. Determine key name, target, translations\n2. Use AskUserQuestion to show all values\n3. WAIT for user confirmation\n4. Write only after \"oui/yes/ok\"\n\n---\n\n## Mission\n\nAdd translation labels to migrations for all UI text.\n\n---\n\n## Key Naming Convention\n\nFormat: `<feature>_<context>_<element>`\n\n| Part | Examples |\n|------|----------|\n| feature | `engagement`, `event`, `cohort` |\n| context | `confirm_done`, `edit`, `list` |\n| element | `title`, `btn`, `placeholder` |\n\nPrefix `js_` for keys only used in JavaScript.\n\n---\n\n## Functions\n\n```php\n$this->addLabelFO('key', ['FR' => '...', 'EN' => '...']); // Front office\n$this->addLabelBO('key', ['FR' => '...', 'EN' => '...']); // Back office\n```\n\n---\n\n## Process\n\n1. **Check languages**: Query `sk_language` table\n2. **Propose**: Key + target + all translations\n3. **Validate**: Use AskUserQuestion\n4. **Write**: Add to migration after confirmation\n\n---\n\n## AskUserQuestion Format\n\n```json\n{\n  \"questions\": [{\n    \"question\": \"Label proposÃ© :\\nâ€¢ ClÃ© : feature_action_title\\nâ€¢ Cible : labelFO\\n\\nTraductions :\\nâ€¢ FR : Titre\\nâ€¢ EN : Title\\n\\nCorrect ?\",\n    \"header\": \"Label\",\n    \"options\": [\n      {\"label\": \"Oui, valider\", \"description\": \"Correct\"},\n      {\"label\": \"Modifier\", \"description\": \"Changer\"}\n    ],\n    \"multiSelect\": false\n  }]\n}\n```\n\n---\n\n## Checklist\n\n- [ ] Key follows `<feature>_<context>_<element>` convention\n- [ ] All languages have translations\n- [ ] AskUserQuestion used before writing\n- [ ] User confirmed\n",
        "plugins/symfony-sk/skills/security-zone/SKILL.md": "---\nname: symfony-sk:security-zone\ndescription: Create security zones and assign rights to profiles. Use when registering controllers.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# Security Zone Skill\n\n## â›” CRITICAL RULES\n\n**MANDATORY: Validate with `AskUserQuestion` BEFORE writing to migration.**\n\n---\n\n## Mission\n\nCreate security zones, register controllers, and assign profile access rights.\n\n---\n\n## Functions\n\n```php\n// Create zone with translations\n$this->addSkSecurityZone(_Const::SECZONE_FEATURE, [\n    'FR' => 'Gestion des fonctionnalitÃ©s',\n    'EN' => 'Feature management',\n]);\n\n// Register controller\n$this->addSkControllers(self::SERVICE_FRONT, 'ControllerName', _Const::SECZONE_FEATURE);\n$this->addSkControllers(self::SERVICE_API, 'ActionName', _Const::SECZONE_FEATURE);\n\n// Grant access\n$this->addSkAppRights(_Const::PROFILE_ADMIN, _Const::SECZONE_FEATURE, self::SECURITY_LEVEL_FULLACCESS);\n```\n\n---\n\n## Constants\n\n### Services\n- `self::SERVICE_FRONT` (0)\n- `self::SERVICE_BACK` (1)\n- `self::SERVICE_API` (2)\n\n### Security Levels\n- `self::SECURITY_LEVEL_NOACCESS` (0)\n- `self::SECURITY_LEVEL_READONLY` (1)\n- `self::SECURITY_LEVEL_FULLACCESS` (2)\n\n### Public Zone\n- `Constants::SECZONE_ANONYMOUS` - For public routes\n\n---\n\n## Process\n\n1. **Define zone**: Name + translations\n2. **Add constant**: In `api/src/_Const.php`\n3. **Register controllers**: Front, back, and/or API\n4. **Assign rights**: Per profile\n5. **Validate**: Use AskUserQuestion\n\n---\n\n## Checklist\n\n- [ ] Zone constant added to `_Const.php`\n- [ ] Zone has translations for all languages\n- [ ] All controllers registered\n- [ ] Rights assigned to profiles\n- [ ] AskUserQuestion used before writing\n",
        "plugins/symfony-sk/skills/setting/SKILL.md": "---\nname: symfony-sk:setting\ndescription: Add settings to sk_settings table. Use for configuration values.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# Setting Skill\n\n## â›” CRITICAL RULES\n\n**MANDATORY: Validate with `AskUserQuestion` BEFORE writing to migration.**\n\n---\n\n## Mission\n\nAdd configuration settings to the sk_settings table.\n\n---\n\n## Functions\n\n```php\n// Single language setting\n$this->addSetting(null, 'group', 'key', 'textValue', 0);\n$this->addSetting('FR', 'group', 'key', 'textValue', 0);\n\n// All languages at once\n$this->addSkSettingsForAllLanguage('group', 'key',\n    ['FR' => 'Texte FR', 'EN' => 'Text EN'],\n    ['FR' => 0, 'EN' => 0]\n);\n```\n\n---\n\n## Common Groups\n\n| Group | Usage |\n|-------|-------|\n| `returnCode` | Error messages |\n| `labelFO` | Front office translations |\n| `labelBO` | Back office translations |\n| `formLabel` | Form field labels |\n| Custom | Feature-specific settings |\n\n---\n\n## Process\n\n1. **Identify group and key**\n2. **Determine value**: Text and/or integer\n3. **Check if multilingual**\n4. **Validate**: Use AskUserQuestion\n5. **Write**: Add to migration\n\n---\n\n## Checklist\n\n- [ ] Group name is valid\n- [ ] Key is unique in group\n- [ ] Multilingual if needed\n- [ ] AskUserQuestion used before writing\n",
        "plugins/symfony-sk/skills/twig-template/SKILL.md": "---\nname: symfony-sk:twig-template\ndescription: Create Twig templates for pages and partials. Use for HTML rendering.\nallowed-tools: Read, Write, Edit, Glob, Grep\n---\n\n# Twig Template Skill\n\n## Mission\n\nCreate Twig templates for pages and partials.\n\n---\n\n## Location\n\n- Front: `front/templates/<feature>/<name>.html.twig`\n- Back: `back/templates/<feature>/<name>.html.twig`\n\n---\n\n## Key Rules\n\n### No Hardcoded Text\n\n**CRITICAL: All text must use translations.**\n\n```twig\n{# WRONG #}\n<h1>My Title</h1>\n\n{# CORRECT #}\n<h1>{{ 'feature_page_title' | cache }}</h1>\n```\n\n### Translation Filters\n\n```twig\n{# Basic translation (uses labelFO in front, labelBO in back) #}\n{{ 'key' | cache }}\n\n{# For JavaScript - makes keys available as window.trad.key #}\n{% block jsImport %}\n    {{ ['key1', 'key2'] | tradJS }}\n{% endblock %}\n```\n\n---\n\n## Template Structure\n\n```twig\n{% extends 'base.html.twig' %}\n\n{% block title %}{{ 'feature_page_title' | cache }}{% endblock %}\n\n{% block stylesheets %}\n    {{ parent() }}\n    <link rel=\"stylesheet\" href=\"{{ asset('site/css/feature/page.css') }}\">\n{% endblock %}\n\n{% block body %}\n    <div class=\"feature-page\">\n        <h1>{{ 'feature_page_title' | cache }}</h1>\n\n        {# Content here #}\n    </div>\n{% endblock %}\n\n{% block jsImport %}\n    {{ parent() }}\n    {{ ['feature_confirm_btn', 'feature_cancel_btn'] | tradJS }}\n    <script src=\"{{ asset('site/js/feature/page.js') }}\"></script>\n{% endblock %}\n```\n\n---\n\n## Common Patterns\n\n### Loop\n```twig\n{% for item in items %}\n    <div>{{ item.title }}</div>\n{% else %}\n    <p>{{ 'feature_no_items' | cache }}</p>\n{% endfor %}\n```\n\n### Conditional\n```twig\n{% if user.isAdmin %}\n    <button>{{ 'feature_admin_btn' | cache }}</button>\n{% endif %}\n```\n\n### Include partial\n```twig\n{% include 'components/modal.html.twig' with {\n    'titleKey': 'feature_modal_title',\n    'content': data\n} %}\n```\n\n---\n\n## Checklist\n\n- [ ] All text uses `| cache` filter\n- [ ] JS keys passed via `| tradJS`\n- [ ] Extends appropriate base template\n- [ ] Assets loaded in correct blocks\n- [ ] Labels created via `/label` skill\n"
      },
      "plugins": [
        {
          "name": "symfony-sk",
          "source": "./plugins/symfony-sk",
          "description": "Plugin pour projets Symfony StarterKit - Connexion VM automatique, commandes SSH, conventions PHP",
          "author": {
            "name": "Gabriel Robbe",
            "email": "robbe.gabriel@gmail.com"
          },
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Swoking/symfony-sk-plugin",
            "/plugin install symfony-sk@symfony-sk-plugin"
          ]
        }
      ]
    }
  ]
}