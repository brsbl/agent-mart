{
  "author": {
    "id": "HarleyCoops",
    "display_name": "Christian Harley Cooper",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/76745467?u=8c04759cedd92ae7ebd81da10fcb6fd43a58c43e&v=4",
    "url": "https://github.com/HarleyCoops",
    "bio": "Trader and risk expert working on langchain, python and AI tools. ",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 3,
      "total_skills": 0,
      "total_stars": 3,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "ralph-on-shelf-marketplace",
      "version": null,
      "description": "Autonomous AI agents running in E2B cloud sandboxes with self-referential iteration loops",
      "owner_info": {
        "name": "HarleyCoops",
        "url": "https://github.com/HarleyCoops"
      },
      "keywords": [],
      "repo_full_name": "HarleyCoops/RalphOnAShelf",
      "repo_url": "https://github.com/HarleyCoops/RalphOnAShelf",
      "repo_description": "Claude Agent SDK built inside Best-In-Class E2B Sandbox",
      "homepage": null,
      "signals": {
        "stars": 3,
        "forks": 0,
        "pushed_at": "2026-01-10T14:09:04Z",
        "created_at": "2025-12-31T23:07:06Z",
        "license": "MIT"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 601
        },
        {
          "path": ".claude-plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugins/ralph-on-shelf",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugins/ralph-on-shelf/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugins/ralph-on-shelf/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 409
        },
        {
          "path": ".claude-plugins/ralph-on-shelf/README.md",
          "type": "blob",
          "size": 5122
        },
        {
          "path": ".claude-plugins/ralph-on-shelf/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugins/ralph-on-shelf/agents/sandbox-executor.md",
          "type": "blob",
          "size": 1579
        },
        {
          "path": ".claude-plugins/ralph-on-shelf/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugins/ralph-on-shelf/commands/cancel-ros.md",
          "type": "blob",
          "size": 954
        },
        {
          "path": ".claude-plugins/ralph-on-shelf/commands/ros-mcp.md",
          "type": "blob",
          "size": 865
        },
        {
          "path": ".claude-plugins/ralph-on-shelf/commands/ros.md",
          "type": "blob",
          "size": 2216
        },
        {
          "path": ".claude-plugins/ralph-on-shelf/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugins/ralph-on-shelf/hooks/stop.md",
          "type": "blob",
          "size": 2416
        },
        {
          "path": ".claude-plugins/ralph-on-shelf/hooks/stop.py",
          "type": "blob",
          "size": 2662
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"ralph-on-shelf-marketplace\",\n  \"description\": \"Autonomous AI agents running in E2B cloud sandboxes with self-referential iteration loops\",\n  \"owner\": {\n    \"name\": \"HarleyCoops\",\n    \"url\": \"https://github.com/HarleyCoops\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"ralph-on-shelf\",\n      \"source\": \"./.claude-plugins/ralph-on-shelf\",\n      \"description\": \"Launch autonomous Claude Agent SDK loops inside E2B cloud sandboxes. Includes /ros and /cancel-ros commands.\",\n      \"version\": \"0.1.0\",\n      \"keywords\": [\"e2b\", \"sandbox\", \"autonomous\", \"agent\", \"loop\", \"ralph-wiggum\"]\n    }\n  ]\n}\n",
        ".claude-plugins/ralph-on-shelf/.claude-plugin/plugin.json": "{\n  \"name\": \"ralph-on-shelf\",\n  \"version\": \"0.1.0\",\n  \"description\": \"Autonomous AI agents running in E2B cloud sandboxes with self-referential iteration loops\",\n  \"author\": {\n    \"name\": \"HarleyCoops\",\n    \"url\": \"https://github.com/HarleyCoops\"\n  },\n  \"repository\": \"https://github.com/HarleyCoops/RalphOnAShelf\",\n  \"keywords\": [\"e2b\", \"sandbox\", \"autonomous\", \"agent\", \"loop\", \"mcp\"],\n  \"license\": \"MIT\"\n}\n",
        ".claude-plugins/ralph-on-shelf/README.md": "# Ralph-On-Shelf Plugin\n\nAutonomous AI agents running in E2B cloud sandboxes with self-referential iteration loops.\n\n## Overview\n\nRalph-On-Shelf (ROS) enables Claude to launch autonomous agent loops that run inside isolated E2B cloud sandboxes. The agent works on your task iteratively until completion, with full access to Python, bash, and file operations in a safe environment.\n\n**Key Features:**\n- **Autonomous Execution** - Agent runs independently until task completion\n- **E2B Sandboxes** - Isolated Linux VMs for safe code execution\n- **Self-Referential Loop** - Continues working across iterations until done\n- **Configurable Limits** - Set max iterations and completion signals\n\n## Installation\n\n### Prerequisites\n\n1. **E2B API Key** - Get one at [e2b.dev](https://e2b.dev)\n2. **Anthropic API Key** - For Claude Agent SDK\n\nAdd to your `.env` file:\n```bash\nE2B_API_KEY=your_e2b_key\nANTHROPIC_API_KEY=your_anthropic_key\n```\n\n### Install Plugin\n\n**Option 1: From GitHub Marketplace**\n```bash\n/plugin marketplace add HarleyCoops/RalphOnAShelf\n/plugin install ralph-on-shelf@ralph-tools\n```\n\n**Option 2: Local Development**\n```bash\nclaude --plugin-dir ./.claude-plugins/ralph-on-shelf\n```\n\n## Commands\n\n### `/ros <prompt> [options]`\n\nStart an autonomous Ralph loop.\n\n**Arguments:**\n- `prompt` (required) - The task for the agent to work on\n- `--max-iterations N` - Maximum iterations before stopping (default: 10)\n- `--completion-promise TEXT` - Text that signals completion (default: \"COMPLETE\")\n\n**Examples:**\n```bash\n# Simple task\n/ros \"Create a Python script that calculates prime numbers\"\n\n# Complex task with higher iteration limit\n/ros \"Build a REST API with tests. Output COMPLETE when done.\" --max-iterations 20\n\n# Custom completion signal\n/ros \"Analyze this dataset and generate a report\" --completion-promise \"ANALYSIS DONE\"\n```\n\n### `/cancel-ros`\n\nCancel an active ROS loop and clean up the sandbox.\n\n```bash\n/cancel-ros\n```\n\n## How It Works\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│  1. /ros \"task\"                                                 │\n│     │                                                           │\n│     ▼                                                           │\n│  2. Create E2B Sandbox (isolated Linux VM)                      │\n│     │                                                           │\n│     ▼                                                           │\n│  3. Claude Agent SDK runs inside sandbox                        │\n│     │                                                           │\n│     ▼                                                           │\n│  4. Agent works on task (code, files, bash)                     │\n│     │                                                           │\n│     ▼                                                           │\n│  5. Check for completion signal                                 │\n│     │                                                           │\n│     ├──→ Found \"COMPLETE\" → Done, cleanup sandbox               │\n│     │                                                           │\n│     └──→ Not found → Increment iteration, re-run from step 4    │\n│                                                                 │\n│  6. Max iterations reached → Stop, cleanup sandbox              │\n└─────────────────────────────────────────────────────────────────┘\n```\n\n## Components\n\n| Component | File | Purpose |\n|-----------|------|---------|\n| `/ros` command | `commands/ros.md` | Start autonomous loop |\n| `/cancel-ros` command | `commands/cancel-ros.md` | Cancel active loop |\n| Sandbox executor agent | `agents/sandbox-executor.md` | Execute code in E2B |\n| Stop hook | `hooks/stop.md` | Re-feed prompt on iteration |\n\n## State Management\n\nROS tracks loop state in `.ros-state.json`:\n\n```json\n{\n  \"active\": true,\n  \"prompt\": \"Your task...\",\n  \"max_iterations\": 10,\n  \"completion_promise\": \"COMPLETE\",\n  \"current_iteration\": 3,\n  \"sandbox_id\": \"abc123\",\n  \"status\": \"running\"\n}\n```\n\n## Agent Capabilities\n\nInside the E2B sandbox, the agent can:\n\n- **Execute Python code** - Full Python 3.11+ environment\n- **Run bash commands** - Git, curl, system tools\n- **Read/write files** - Persistent within the sandbox session\n- **Install packages** - Via pip\n- **Access the network** - HTTP requests, API calls\n\n## Requirements\n\n- Python 3.11+\n- `e2b-code-interpreter` >= 1.0.0\n- `claude-agent-sdk`\n- `python-dotenv`\n\n## Roadmap\n\n- [ ] **Ralph Orchestrator** - Launch multiple sandboxes in parallel\n- [ ] **Sandbox templates** - Pre-configured environments (Node, Rust, etc.)\n- [ ] **Progress streaming** - Real-time output from sandbox\n- [ ] **Checkpoint/resume** - Save state across sessions\n\n## License\n\nMIT\n",
        ".claude-plugins/ralph-on-shelf/agents/sandbox-executor.md": "---\nname: sandbox-executor\ndescription: Execute code in E2B sandboxes for ROS loops\nmodel: sonnet\ntools:\n  - Bash\n  - Read\n  - Write\n  - Edit\n---\n\n# E2B Sandbox Executor Agent\n\nYou are the sandbox executor for Ralph-On-Shelf. Your job is to execute Python code in isolated E2B sandboxes.\n\n## Capabilities\n\nYou can:\n1. Create and manage E2B sandboxes\n2. Execute Python code safely in isolation\n3. Read/write files in the sandbox\n4. Install packages via pip\n5. Return execution results\n\n## E2B Integration\n\nUse the project's E2B setup at `${CLAUDE_PLUGIN_ROOT}/main.py`:\n\n```python\nfrom e2b_code_interpreter import Sandbox\n\n# Create sandbox\nwith Sandbox() as sbx:\n    # Execute code\n    result = sbx.run_code(code)\n\n    # Access outputs\n    stdout = \"\".join(result.logs.stdout)\n    stderr = \"\".join(result.logs.stderr)\n    results = [r.text for r in result.results if hasattr(r, 'text')]\n```\n\n## File Operations in Sandbox\n\n```python\n# Write file to sandbox\nsbx.files.write(\"/path/in/sandbox/file.py\", content)\n\n# Read file from sandbox\ncontent = sbx.files.read(\"/path/in/sandbox/file.py\")\n\n# List files\nfiles = sbx.files.list(\"/path\")\n```\n\n## Best Practices\n\n1. **Persist sandbox between iterations** - Store sandbox_id in state file\n2. **Use files for state** - Write progress to files the agent can read next iteration\n3. **Handle errors gracefully** - Return error info so the loop can adapt\n4. **Clean up on completion** - Kill sandbox when loop finishes\n\n## Usage\n\nWhen called by the ROS loop, execute the requested code and return structured results for the next iteration.\n",
        ".claude-plugins/ralph-on-shelf/commands/cancel-ros.md": "---\nname: cancel-ros\ndescription: Cancel an active Ralph-On-Shelf loop\n---\n\n# Cancel Ralph-On-Shelf\n\nThis command cancels any active ROS loop.\n\n## Instructions\n\n1. **Read the state file** at `${CLAUDE_PLUGIN_ROOT}/.ros-state.json`\n\n2. **If no active loop**, report:\n   ```\n   No active Ralph-On-Shelf loop to cancel.\n   ```\n\n3. **If active loop exists**, update the state:\n   ```json\n   {\n     \"active\": false,\n     \"status\": \"cancelled\",\n     \"cancelled_at\": \"<current ISO timestamp>\",\n     \"final_iteration\": <current_iteration>\n   }\n   ```\n\n4. **Kill the E2B sandbox** if one is running:\n   - Read the `sandbox_id` from state\n   - Call sandbox.kill() to clean up\n\n5. **Report cancellation**:\n   ```\n   Ralph-On-Shelf loop cancelled.\n   - Completed iterations: {{final_iteration}}\n   - Original prompt: {{prompt}}\n   - Sandbox cleaned up: {{sandbox_id}}\n   ```\n\n## Execute\n\nCancel the ROS loop now by updating the state file and cleaning up resources.\n",
        ".claude-plugins/ralph-on-shelf/commands/ros-mcp.md": "---\nname: ros-mcp\ndescription: List available MCP servers for Ralph-On-Shelf\narguments: []\n---\n\n# ROS MCP Servers\n\nList all available MCP (Model Context Protocol) servers that Ralph can connect to.\n\n## Execute\n\n```bash\ncd {{cwd}} && python -c \"\nfrom mcp_registry import list_servers_summary, get_all_servers\nfrom mcp_selector import get_available_servers\n\nprint(list_servers_summary())\nprint()\nprint('Currently Available (auth configured):')\navailable = get_available_servers()\nif available:\n    for name in available:\n        print(f'  - {name}')\nelse:\n    print('  Only open/no-auth servers available')\nprint()\nprint('To use MCP servers with ROS:')\nprint('  /ros \\\"your task\\\" --mcp auto        # Auto-select based on task')\nprint('  /ros \\\"your task\\\" --mcp exa-search  # Use specific server')\nprint('  /ros \\\"your task\\\" --mcp none        # Disable MCP')\n\"\n```\n",
        ".claude-plugins/ralph-on-shelf/commands/ros.md": "---\nname: ros\ndescription: Start a Ralph-On-Shelf autonomous loop in an E2B sandbox with MCP tools\narguments:\n  - name: prompt\n    description: The task prompt for the agent to work on\n    required: true\n  - name: max-iterations\n    description: Maximum number of iterations before stopping (default 10)\n    required: false\n  - name: completion-promise\n    description: Text that signals successful completion (default COMPLETE)\n    required: false\n  - name: output-dir\n    description: Local directory to save workspace files (default ./ralph_output)\n    required: false\n  - name: mcp\n    description: MCP mode - \"auto\" (select based on prompt), \"none\", or comma-separated server names like \"exa-search,aws-knowledge\"\n    required: false\n---\n\n# Ralph-On-Shelf (ROS)\n\nLaunch an autonomous Claude agent inside an E2B cloud sandbox with MCP connector support.\n\n## MCP Servers\n\nWhen `mcp=auto` (default), Ralph analyzes your prompt and automatically connects to relevant MCP servers:\n- **exa-search**: Web search and research (keywords: search, find, research, web)\n- **aws-knowledge**: AWS documentation and cloud knowledge (keywords: aws, cloud, lambda, s3)\n\nUse `mcp=none` to disable MCP and use the classic SDK mode.\nUse `mcp=exa-search,aws-knowledge` to explicitly specify servers.\n\n## Execute\n\nRun the following Python code to start the Ralph loop:\n\n```bash\ncd {{cwd}} && python -c \"\nfrom main import launch_ralph\n\nresult = launch_ralph(\n    prompt='''{{prompt}}''',\n    max_iterations={{max-iterations | default: 10}},\n    completion_promise='{{completion-promise | default: COMPLETE}}',\n    output_dir='{{output-dir | default: ralph_output}}',\n    mcp='{{mcp | default: auto}}',\n    timeout=600\n)\n\nprint(f'[ralph] final status: {result[\\\"status\\\"]}')\nprint(f'[ralph] total iterations: {result[\\\"iterations\\\"]}/{result[\\\"max_iterations\\\"]}')\nprint(f'[ralph] MCP servers: {result.get(\\\"mcp_servers\\\", [])}')\nif result.get('downloaded_files'):\n    print(f'[ralph] files saved to: {result[\\\"output_dir\\\"]}')\n    for f in result['downloaded_files']:\n        print(f'  - {f}')\n\"\n```\n\nThe agent will run autonomously in the E2B sandbox until:\n- The completion promise appears in the output\n- Max iterations is reached\n",
        ".claude-plugins/ralph-on-shelf/hooks/stop.md": "---\nname: ros-stop-hook\nevent: Stop\ndescription: Intercepts session stop to continue Ralph-On-Shelf loop\n---\n\n# Ralph-On-Shelf Stop Hook\n\nThis hook intercepts when Claude tries to stop/exit and continues the autonomous loop if ROS is active.\n\n## Check ROS State\n\n1. Read the state file at `${CLAUDE_PLUGIN_ROOT}/.ros-state.json`\n2. If the file doesn't exist or `active` is false, allow normal exit\n3. If active, check the conditions below\n\n## Continuation Logic\n\nWhen ROS is active, check these conditions:\n\n### Stop Conditions (allow exit)\n- `current_iteration >= max_iterations` - max iterations reached\n- `status` is \"completed\" - completion promise was found\n- `status` is \"cancelled\" - user cancelled via /cancel-ros\n\nIf any stop condition is met:\n- Set `active: false` in state file\n- Report final status to user\n- Allow normal exit\n\n### Continue Conditions (block exit and re-feed)\nIf none of the stop conditions are met:\n\n1. **Increment iteration counter** in state file\n2. **Block the exit** by outputting a continuation message\n3. **Re-feed the original prompt** to continue the loop\n\n## Re-feed Message Template\n\nWhen continuing the loop, output:\n\n```\n---\nROS ITERATION {{current_iteration + 1}} / {{max_iterations}}\n---\n\nContinuing Ralph-On-Shelf loop...\n\nOriginal task: {{prompt}}\n\nInstructions:\n- Review any files you created in previous iterations\n- Continue working toward the completion criteria\n- Output \"{{completion_promise}}\" when the task is complete\n- You have {{max_iterations - current_iteration}} iterations remaining\n\nResume working on the task now.\n```\n\n## Implementation\n\nRead the state file and make decisions:\n\n```python\nimport json\nfrom pathlib import Path\n\nstate_path = Path(\"${CLAUDE_PLUGIN_ROOT}/.ros-state.json\")\n\nif state_path.exists():\n    state = json.loads(state_path.read_text())\n\n    if state.get(\"active\"):\n        current = state.get(\"current_iteration\", 0)\n        max_iter = state.get(\"max_iterations\", 10)\n\n        if current >= max_iter or state.get(\"status\") in [\"completed\", \"cancelled\"]:\n            # Allow exit\n            state[\"active\"] = False\n            state_path.write_text(json.dumps(state, indent=2))\n        else:\n            # Continue loop - increment and re-feed\n            state[\"current_iteration\"] = current + 1\n            state_path.write_text(json.dumps(state, indent=2))\n            # Output continuation message (hook should block exit)\n```\n",
        ".claude-plugins/ralph-on-shelf/hooks/stop.py": "#!/usr/bin/env python3\n\"\"\"\nRalph-On-Shelf Stop Hook\n\nIntercepts session stop to continue the autonomous loop if ROS is active.\n\"\"\"\n\nimport json\nimport sys\nfrom datetime import datetime\nfrom pathlib import Path\n\n# State file location - relative to plugin root\nPLUGIN_ROOT = Path(__file__).parent.parent\nSTATE_FILE = PLUGIN_ROOT / \".ros-state.json\"\n\n\ndef load_state() -> dict | None:\n    \"\"\"Load ROS state from file.\"\"\"\n    if STATE_FILE.exists():\n        try:\n            return json.loads(STATE_FILE.read_text())\n        except json.JSONDecodeError:\n            return None\n    return None\n\n\ndef save_state(state: dict) -> None:\n    \"\"\"Save ROS state to file.\"\"\"\n    STATE_FILE.write_text(json.dumps(state, indent=2))\n\n\ndef main():\n    state = load_state()\n\n    # No state or not active - allow normal exit\n    if not state or not state.get(\"active\"):\n        sys.exit(0)\n\n    current_iteration = state.get(\"current_iteration\", 0)\n    max_iterations = state.get(\"max_iterations\", 10)\n    status = state.get(\"status\", \"running\")\n    prompt = state.get(\"prompt\", \"\")\n    completion_promise = state.get(\"completion_promise\", \"COMPLETE\")\n\n    # Check stop conditions\n    if current_iteration >= max_iterations:\n        state[\"active\"] = False\n        state[\"status\"] = \"max_iterations_reached\"\n        state[\"ended_at\"] = datetime.now().isoformat()\n        save_state(state)\n        print(f\"\\n[ROS] Max iterations ({max_iterations}) reached. Loop ended.\")\n        sys.exit(0)\n\n    if status in [\"completed\", \"cancelled\"]:\n        state[\"active\"] = False\n        state[\"ended_at\"] = datetime.now().isoformat()\n        save_state(state)\n        print(f\"\\n[ROS] Loop {status}.\")\n        sys.exit(0)\n\n    # Continue the loop - increment and re-feed\n    state[\"current_iteration\"] = current_iteration + 1\n    save_state(state)\n\n    # Output continuation message - this blocks exit and re-feeds\n    remaining = max_iterations - current_iteration - 1\n    print(f\"\"\"\n================================================================================\nROS ITERATION {current_iteration + 1} / {max_iterations}\n================================================================================\n\nContinuing Ralph-On-Shelf loop...\n\n**Original task:** {prompt}\n\n**Instructions:**\n- Review any files you created in previous iterations\n- Check the E2B sandbox for your work so far\n- Continue working toward the completion criteria\n- Output \"{completion_promise}\" when the task is complete\n- You have {remaining} iterations remaining\n\nResume working on the task now.\n\"\"\")\n\n    # Exit with non-zero to block the stop (hook behavior)\n    sys.exit(1)\n\n\nif __name__ == \"__main__\":\n    main()\n"
      },
      "plugins": [
        {
          "name": "ralph-on-shelf",
          "source": "./.claude-plugins/ralph-on-shelf",
          "description": "Launch autonomous Claude Agent SDK loops inside E2B cloud sandboxes. Includes /ros and /cancel-ros commands.",
          "version": "0.1.0",
          "keywords": [
            "e2b",
            "sandbox",
            "autonomous",
            "agent",
            "loop",
            "ralph-wiggum"
          ],
          "categories": [
            "agent",
            "autonomous",
            "e2b",
            "loop",
            "ralph-wiggum",
            "sandbox"
          ],
          "install_commands": [
            "/plugin marketplace add HarleyCoops/RalphOnAShelf",
            "/plugin install ralph-on-shelf@ralph-on-shelf-marketplace"
          ]
        }
      ]
    }
  ]
}