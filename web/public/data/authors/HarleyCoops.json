{
  "author": {
    "id": "HarleyCoops",
    "display_name": "Christian Harley Cooper",
    "avatar_url": "https://avatars.githubusercontent.com/u/76745467?u=8c04759cedd92ae7ebd81da10fcb6fd43a58c43e&v=4"
  },
  "marketplaces": [
    {
      "name": "ralph-on-shelf-marketplace",
      "version": null,
      "description": "Autonomous AI agents running in E2B cloud sandboxes with self-referential iteration loops",
      "repo_full_name": "HarleyCoops/RalphOnAShelf",
      "repo_url": "https://github.com/HarleyCoops/RalphOnAShelf",
      "repo_description": "Claude Agent SDK built inside Best-In-Class E2B Sandbox",
      "signals": {
        "stars": 3,
        "forks": 0,
        "pushed_at": "2026-01-10T14:09:04Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"ralph-on-shelf-marketplace\",\n  \"description\": \"Autonomous AI agents running in E2B cloud sandboxes with self-referential iteration loops\",\n  \"owner\": {\n    \"name\": \"HarleyCoops\",\n    \"url\": \"https://github.com/HarleyCoops\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"ralph-on-shelf\",\n      \"source\": \"./.claude-plugins/ralph-on-shelf\",\n      \"description\": \"Launch autonomous Claude Agent SDK loops inside E2B cloud sandboxes. Includes /ros and /cancel-ros commands.\",\n      \"version\": \"0.1.0\",\n      \"keywords\": [\"e2b\", \"sandbox\", \"autonomous\", \"agent\", \"loop\", \"ralph-wiggum\"]\n    }\n  ]\n}\n",
        "README.md": "<div align=\"center\">\n\n# Ralph-On-Shelf (ROS)\n\n![Ralph On A Shelf](RalphOnAShelf.jpeg)\n\nAutonomous AI agents running in secure E2B sandboxes with MCP tool integration.\n\nRalph says: \"I'm helping!\" He just does it from inside a sandbox.\n\n[![Python 3.11+](https://img.shields.io/badge/python-3.11+-blue.svg)](https://www.python.org/downloads/)\n[![E2B](https://img.shields.io/badge/sandbox-E2B-orange.svg)](https://e2b.dev)\n[![Claude Code](https://img.shields.io/badge/cli-Claude%20Code-purple.svg)](https://claude.ai/code)\n[![MCP](https://img.shields.io/badge/tools-MCP-green.svg)](https://modelcontextprotocol.io)\n\n</div>\n\n---\n\n## What is Ralph-On-Shelf?\n\nRalph-On-Shelf (ROS) is an autonomous agent system that combines **Wiggum planning** with **Ralph execution**:\n\n1. **Wiggum** (local) analyzes your task, breaks it into todos, and assigns the right MCP tools\n2. **Ralph** (in E2B sandbox) executes the plan autonomously with self-referential iteration\n\nThink of it as Chief Wiggum dispatching Ralph to do the actual work - earnest, persistent, and quietly effective.\n\n## Architecture\n\n```\n                    LOCAL                          E2B CLOUD SANDBOX\n                      |                                   |\nUser Task -----> [Wiggum Planner] -----> [Ralph Loop] -----> Results\n                      |                       |\n                 Creates todos           Iterates until\n                 Assigns MCPs            completion or\n                 Shows plan              max iterations\n                      |                       |\n                      v                       v\n              \"Search needs exa-search\"   \"I'm helping!\"\n              \"File ops need nothing\"     *uses tools*\n                                          *writes files*\n                                          *downloads output*\n```\n\n## Key Features\n\n### Wiggum Planning (Local)\n- Analyzes task complexity and breaks into 1-5 subtasks\n- Assigns only the MCP tools each subtask actually needs\n- Shows you the plan before execution begins\n- Adjusts iteration count based on estimated complexity\n\n### Ralph Execution (Sandbox)\n- Runs entirely inside isolated E2B cloud VM\n- Self-referential loop (stop-hook pattern) - iterates until complete\n- Access to 13+ MCP servers for external tools\n- Local tools for file operations (write_file, read_file, execute_python)\n- Ralph Wiggum quotes in terminal output\n\n### Available MCP Servers\n\n| Server | Type | Use Case |\n|--------|------|----------|\n| exa-search | open | Web search and research |\n| tavily | api_key | AI-optimized search |\n| aws-knowledge | open | AWS documentation |\n| github | oauth | Repository management |\n| notion | oauth | Workspace and docs |\n| linear | oauth | Issue tracking |\n| stripe | api_key | Payment processing |\n| pinecone | api_key | Vector database |\n| huggingface | api_key | ML models |\n| firecrawl | api_key | Web scraping |\n| sentry | api_key | Error tracking |\n| posthog | api_key | Analytics |\n| wandb | api_key | ML experiments |\n\n## Quick Start\n\n### Prerequisites\n\n- Python 3.11+\n- Anthropic API key\n- E2B API key\n- Optional: API keys for MCP servers you want to use\n\n### Install\n\n```bash\npip install -e .\n```\n\n### Configure\n\nCreate `.env`:\n\n```bash\nANTHROPIC_API_KEY=sk-ant-...\nE2B_API_KEY=e2b_...\n\n# Optional MCP API keys\nTAVILY_API_KEY=tvly-...\nGITHUB_TOKEN=ghp_...\nSTRIPE_API_KEY=sk_...\nPINECONE_API_KEY=...\n```\n\n### Run Directly (Python)\n\n```python\nfrom main import launch_ralph\n\nresult = launch_ralph(\n    prompt=\"Search for Python 3.13 features and create a summary file\",\n    max_iterations=5,\n    use_wiggum=True  # Enable Wiggum planning (default)\n)\n```\n\n### Use with Claude Code (Plugin)\n\nROS integrates with Claude Code as a native plugin:\n\n```bash\n# Start an autonomous task\n/ros \"Build a REST API with tests. Output COMPLETE when done.\" --max-iterations 10\n\n# List available MCP servers\n/ros-mcp\n\n# Cancel a running loop\n/cancel-ros\n```\n\nThe `/ros` command triggers the full Wiggum + Ralph workflow inside Claude Code.\n\n## Example Output\n\n```\n[wiggum] Analyzing task...\n\n============================================================\n  WIGGUM EXECUTION PLAN\n============================================================\n\nAnalysis: Search for news and write summary to file.\nEstimated iterations: 3\n\nTodos:\n  1. Search the web for latest Claude AI news\n     MCPs: exa-search, tavily\n\n  2. Analyze results and create summary\n     MCPs: (no external tools)\n\n  3. Write summary to file\n     MCPs: (no external tools)\n\n============================================================\n\n[ralph] launching autonomous sandbox agent\n[ralph] MCP servers: exa-search, tavily\n\n============================================================\n  RALPH LOOP - ITERATION 1/3\n============================================================\n\n    [Ralph] I'm learnding!\n\n[mcp] tavily/tavily_search: {\"query\": \"Claude AI news\"...}\n[mcp-result] {\"results\": [...]}\n\n[tool] write_file: {\"path\": \"summary.txt\", \"content\": \"...\"}\n[result] Successfully wrote 500 characters to summary.txt\n\nCOMPLETE\n\n[ralph] Completion signal detected!\n    [Ralph] I found a moon rock in my nose!\n\n[ralph] downloading 1 file(s) to ./ralph_output\n[ralph] downloaded: summary.txt\n```\n\n## How It Works\n\n### Wiggum Planner (Local)\n\n```python\nclass WiggumPlanner:\n    def plan(self, prompt: str) -> dict:\n        # 1. Analyze task with Claude\n        # 2. Break into subtasks (todos)\n        # 3. Assign MCPs to each subtask\n        # 4. Return structured plan\n```\n\nThe planner sees all available MCP servers and their auth status, then assigns only what's needed:\n\n```json\n{\n  \"todos\": [\n    {\"task\": \"Search for info\", \"mcps\": [\"exa-search\"]},\n    {\"task\": \"Process data\", \"mcps\": []},\n    {\"task\": \"Store in vector DB\", \"mcps\": [\"pinecone\"]}\n  ]\n}\n```\n\n### Ralph Loop (Sandbox)\n\nThe entire iteration loop runs inside the E2B sandbox:\n\n```python\ndef ralph_loop():\n    while iteration < max_iterations:\n        result = run_single_iteration(...)\n\n        if completion_promise in result:\n            return \"completed\"  # Stop-hook exit\n\n        # Re-feed prompt (stop-hook pattern)\n        continue\n```\n\nThis is the same pattern as the official `ralph-wiggum` plugin, but running inside an isolated cloud VM.\n\n### Tool Architecture\n\nRalph has access to two types of tools:\n\n1. **MCP Tools** (external) - Search, databases, APIs\n   - Handled by Anthropic API's MCP connector\n   - Connected via SSE/HTTP to remote servers\n\n2. **Local Tools** (sandbox) - File operations\n   - `write_file` - Create files in workspace\n   - `read_file` - Read file contents\n   - `list_files` - List workspace files\n   - `execute_python` - Run Python code\n\n## State Files\n\n- **Sandbox state**: `/home/user/ralph_state.json` - iteration history\n- **Plugin state**: `.claude-plugins/ralph-on-shelf/.ros-state.json` - loop status\n\n## Project Layout\n\n```\nRalphOnAShelf/\n  main.py              # Core: WiggumPlanner + RalphLoop\n  mcp_registry.py      # MCP server definitions\n  mcp_selector.py      # Auto-selection logic\n  .env                 # API keys\n  ralph_output/        # Downloaded files land here\n  .claude-plugins/\n    ralph-on-shelf/\n      plugin.json\n      commands/\n        ros.md         # /ros command\n        ros-mcp.md     # /ros-mcp command\n        cancel-ros.md  # /cancel-ros command\n      hooks/\n        stop.py        # Stop hook for iteration\n      agents/\n        sandbox-executor.md\n```\n\n## Relationship to Official Plugins\n\nROS builds on the same concepts as the official [ralph-wiggum](https://github.com/anthropics/claude-code/tree/main/plugins/ralph-wiggum) plugin:\n\n| Feature | ralph-wiggum | Ralph-On-Shelf |\n|---------|--------------|----------------|\n| Loop location | Local (Claude Code) | E2B Sandbox |\n| Stop-hook pattern | Yes | Yes |\n| MCP integration | No | Yes (13+ servers) |\n| File isolation | No | Yes (sandbox) |\n| Wiggum planning | No | Yes |\n\nROS is designed for tasks that need:\n- Isolated execution environment\n- External tool access (search, APIs)\n- File operations without local system access\n\n## Roadmap\n\n- [x] Wiggum planning with MCP assignment\n- [x] Full loop inside sandbox (stop-hook pattern)\n- [x] Local tools (file ops, code execution)\n- [ ] Multi-sandbox parallel execution (one per todo)\n- [ ] Wiggum orchestrator spawning multiple Ralphs\n- [ ] Progress streaming\n- [ ] Checkpoint/resume\n- [ ] Cost tracking\n\n## License\n\nMIT License. See LICENSE for details.\n",
        ".claude-plugins/ralph-on-shelf/README.md": "# Ralph-On-Shelf Plugin\n\nAutonomous AI agents running in E2B cloud sandboxes with self-referential iteration loops.\n\n## Overview\n\nRalph-On-Shelf (ROS) enables Claude to launch autonomous agent loops that run inside isolated E2B cloud sandboxes. The agent works on your task iteratively until completion, with full access to Python, bash, and file operations in a safe environment.\n\n**Key Features:**\n- **Autonomous Execution** - Agent runs independently until task completion\n- **E2B Sandboxes** - Isolated Linux VMs for safe code execution\n- **Self-Referential Loop** - Continues working across iterations until done\n- **Configurable Limits** - Set max iterations and completion signals\n\n## Installation\n\n### Prerequisites\n\n1. **E2B API Key** - Get one at [e2b.dev](https://e2b.dev)\n2. **Anthropic API Key** - For Claude Agent SDK\n\nAdd to your `.env` file:\n```bash\nE2B_API_KEY=your_e2b_key\nANTHROPIC_API_KEY=your_anthropic_key\n```\n\n### Install Plugin\n\n**Option 1: From GitHub Marketplace**\n```bash\n/plugin marketplace add HarleyCoops/RalphOnAShelf\n/plugin install ralph-on-shelf@ralph-tools\n```\n\n**Option 2: Local Development**\n```bash\nclaude --plugin-dir ./.claude-plugins/ralph-on-shelf\n```\n\n## Commands\n\n### `/ros <prompt> [options]`\n\nStart an autonomous Ralph loop.\n\n**Arguments:**\n- `prompt` (required) - The task for the agent to work on\n- `--max-iterations N` - Maximum iterations before stopping (default: 10)\n- `--completion-promise TEXT` - Text that signals completion (default: \"COMPLETE\")\n\n**Examples:**\n```bash\n# Simple task\n/ros \"Create a Python script that calculates prime numbers\"\n\n# Complex task with higher iteration limit\n/ros \"Build a REST API with tests. Output COMPLETE when done.\" --max-iterations 20\n\n# Custom completion signal\n/ros \"Analyze this dataset and generate a report\" --completion-promise \"ANALYSIS DONE\"\n```\n\n### `/cancel-ros`\n\nCancel an active ROS loop and clean up the sandbox.\n\n```bash\n/cancel-ros\n```\n\n## How It Works\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│  1. /ros \"task\"                                                 │\n│     │                                                           │\n│     ▼                                                           │\n│  2. Create E2B Sandbox (isolated Linux VM)                      │\n│     │                                                           │\n│     ▼                                                           │\n│  3. Claude Agent SDK runs inside sandbox                        │\n│     │                                                           │\n│     ▼                                                           │\n│  4. Agent works on task (code, files, bash)                     │\n│     │                                                           │\n│     ▼                                                           │\n│  5. Check for completion signal                                 │\n│     │                                                           │\n│     ├──→ Found \"COMPLETE\" → Done, cleanup sandbox               │\n│     │                                                           │\n│     └──→ Not found → Increment iteration, re-run from step 4    │\n│                                                                 │\n│  6. Max iterations reached → Stop, cleanup sandbox              │\n└─────────────────────────────────────────────────────────────────┘\n```\n\n## Components\n\n| Component | File | Purpose |\n|-----------|------|---------|\n| `/ros` command | `commands/ros.md` | Start autonomous loop |\n| `/cancel-ros` command | `commands/cancel-ros.md` | Cancel active loop |\n| Sandbox executor agent | `agents/sandbox-executor.md` | Execute code in E2B |\n| Stop hook | `hooks/stop.md` | Re-feed prompt on iteration |\n\n## State Management\n\nROS tracks loop state in `.ros-state.json`:\n\n```json\n{\n  \"active\": true,\n  \"prompt\": \"Your task...\",\n  \"max_iterations\": 10,\n  \"completion_promise\": \"COMPLETE\",\n  \"current_iteration\": 3,\n  \"sandbox_id\": \"abc123\",\n  \"status\": \"running\"\n}\n```\n\n## Agent Capabilities\n\nInside the E2B sandbox, the agent can:\n\n- **Execute Python code** - Full Python 3.11+ environment\n- **Run bash commands** - Git, curl, system tools\n- **Read/write files** - Persistent within the sandbox session\n- **Install packages** - Via pip\n- **Access the network** - HTTP requests, API calls\n\n## Requirements\n\n- Python 3.11+\n- `e2b-code-interpreter` >= 1.0.0\n- `claude-agent-sdk`\n- `python-dotenv`\n\n## Roadmap\n\n- [ ] **Ralph Orchestrator** - Launch multiple sandboxes in parallel\n- [ ] **Sandbox templates** - Pre-configured environments (Node, Rust, etc.)\n- [ ] **Progress streaming** - Real-time output from sandbox\n- [ ] **Checkpoint/resume** - Save state across sessions\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "ralph-on-shelf",
          "source": "./.claude-plugins/ralph-on-shelf",
          "description": "Launch autonomous Claude Agent SDK loops inside E2B cloud sandboxes. Includes /ros and /cancel-ros commands.",
          "version": "0.1.0",
          "keywords": [
            "e2b",
            "sandbox",
            "autonomous",
            "agent",
            "loop",
            "ralph-wiggum"
          ],
          "categories": [
            "agent",
            "autonomous",
            "e2b",
            "loop",
            "ralph-wiggum",
            "sandbox"
          ],
          "install_commands": [
            "/plugin marketplace add HarleyCoops/RalphOnAShelf",
            "/plugin install ralph-on-shelf@ralph-on-shelf-marketplace"
          ]
        }
      ]
    }
  ]
}