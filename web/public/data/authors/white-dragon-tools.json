{
  "author": {
    "id": "white-dragon-tools",
    "display_name": "white-dragon-tools",
    "avatar_url": "https://avatars.githubusercontent.com/u/256289784?v=4"
  },
  "marketplaces": [
    {
      "name": "roblox-studio-physical-operation-marketplace",
      "version": "0.6.2",
      "description": "Roblox Studio 自动化工具集 — 通过 MCP 协议为 Claude Code 提供 Roblox Studio 物理操作能力",
      "repo_full_name": "white-dragon-tools/roblox-studio-physical-operation",
      "repo_url": "https://github.com/white-dragon-tools/roblox-studio-physical-operation",
      "repo_description": null,
      "signals": {
        "stars": 0,
        "forks": 2,
        "pushed_at": "2026-02-14T17:01:41Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"roblox-studio-physical-operation-marketplace\",\n  \"version\": \"0.6.2\",\n  \"description\": \"Roblox Studio 自动化工具集 — 通过 MCP 协议为 Claude Code 提供 Roblox Studio 物理操作能力\",\n  \"owner\": {\n    \"name\": \"White Dragon Tools\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"roblox-studio-physical-operation\",\n      \"description\": \"Roblox Studio 自动化 MCP 工具。提供 12 个工具：列出 Studio 实例、打开/关闭场景、获取状态、管理模态弹窗、游戏控制（启动/停止/暂停）、日志读取与错误检测、截图（窗口/全屏/视口）、工具栏按钮状态检测、保存场景、视口录制。支持 Windows 和 macOS 双平台。\",\n      \"source\": \"./\",\n      \"category\": \"development\",\n      \"homepage\": \"https://github.com/white-dragon-tools/roblox-studio-physical-operation\",\n      \"tags\": [\"roblox\", \"game-development\", \"mcp\", \"automation\"]\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"roblox-studio-physical-operation\",\n  \"version\": \"0.6.2\",\n  \"description\": \"Roblox Studio 自动化 MCP 工具 — 进程管理、游戏控制、日志分析、截图、工具栏状态检测、视口录制。支持 Windows 和 macOS。\",\n  \"author\": {\n    \"name\": \"White Dragon Tools\",\n    \"url\": \"https://github.com/white-dragon-tools\"\n  },\n  \"repository\": \"https://github.com/white-dragon-tools/roblox-studio-physical-operation\",\n  \"homepage\": \"https://github.com/white-dragon-tools/roblox-studio-physical-operation\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"roblox\", \"roblox-studio\", \"automation\", \"mcp\", \"game-development\"]\n}\n",
        "README.md": "# Roblox Studio Physical Operation Tools\n\nNode.js CLI tool for controlling Roblox Studio -- toolbar detection, game control, log analysis.\n\nCross-platform: Windows + macOS.\n\n## Install\n\n```bash\nnpm install @white-dragon-tools/roblox-studio-physical-operation\n```\n\n## Usage\n\n```bash\nrspo <command> [place_path] [options]\nrspo <command> -h    # Show command help\n```\n\nAll commands output JSON to stdout.\n\n### Commands\n\n#### Studio Management\n\n| Command | Description |\n|---------|-------------|\n| `list` | List all running Studio instances (local + cloud) |\n| `open <place_path>` | Open Studio with a .rbxl file |\n| `close <place_path>` | Close Studio (Stop-Process/kill -9) |\n| `status <place_path>` | Get full status (process, window, modals, log path) |\n\n#### Modal Dialog Control\n\n| Command | Description |\n|---------|-------------|\n| `modal <place_path>` | Detect modal dialogs |\n| `modal <place_path> --close` | Close all modal dialogs |\n\n#### Place Operations\n\n| Command | Description |\n|---------|-------------|\n| `save <place_path>` | Save current place (Ctrl+S / Cmd+S) |\n\n#### Game Control\n\n| Command | Description |\n|---------|-------------|\n| `game start <place_path>` | Start game (F5) |\n| `game stop <place_path>` | Stop game (Shift+F5) |\n| `game pause <place_path>` | Pause/resume game (F12) |\n\n#### Log Analysis\n\n| Command | Description |\n|---------|-------------|\n| `log <place_path>` | Get filtered logs (user script output only) |\n| `log <place_path> --errors` | Detect errors in logs |\n\nLog options: `--after-line`, `--before-line`, `--start-date`, `--end-date`, `--timestamps`, `--context`\n\n#### Toolbar Detection\n\n| Command | Description |\n|---------|-------------|\n| `toolbar <place_path>` | Detect toolbar button state via template matching |\n| `toolbar <place_path> --debug` | Toolbar detection with debug image |\n\n#### Screenshot & Recording\n\n| Command | Description |\n|---------|-------------|\n| `screenshot <place_path>` | Capture game viewport (default) |\n| `screenshot <place_path> --normal` | Capture Studio window |\n| `screenshot <place_path> --full` | Capture window with all modal dialogs |\n| `record <place_path>` | Record viewport frames (default 3s, 3fps) |\n| `record <place_path> --duration 5 --fps 2` | Custom duration and fps |\n\n### Examples\n\n```bash\n# List all running instances\nrspo list\n\n# Get full Studio status\nrspo status \"D:/project/game.rbxl\"\n\n# Start game\nrspo game start \"D:/project/game.rbxl\"\n\n# Get logs\nrspo log \"D:/project/game.rbxl\"\n\n# Get logs with options\nrspo log \"D:/project/game.rbxl\" --after-line 100 --timestamps\n\n# Get logs filtered by run context (play/edit)\nrspo log \"D:/project/game.rbxl\" --context play\n\n# Search logs (pipe to grep/jq)\nrspo log \"D:/project/game.rbxl\" | jq -r .logs | grep \"Score:\"\n\n# Detect toolbar state (running/stopped)\nrspo toolbar \"D:/project/game.rbxl\"\n\n# Save place\nrspo save \"D:/project/game.rbxl\"\n\n# Capture game viewport screenshot (default)\nrspo screenshot \"D:/project/game.rbxl\"\n\n# Capture normal window screenshot\nrspo screenshot \"D:/project/game.rbxl\" --normal\n\n# Record viewport (each frame saved as separate file)\nrspo record \"D:/project/game.rbxl\" --duration 5 --fps 2\n\n# Get command help\nrspo log -h\n```\n\n### Output Examples\n\n**status:**\n```json\n{\n  \"active\": true,\n  \"ready\": true,\n  \"pid\": 12345,\n  \"hwnd\": 67890,\n  \"log_path\": \"/path/to/studio.log\",\n  \"log_last_line\": 2330,\n  \"has_modal\": false,\n  \"modal_count\": 0,\n  \"modals\": []\n}\n```\n\n**toolbar:**\n```json\n{\n  \"play\": \"enabled\",\n  \"pause\": \"disabled\",\n  \"stop\": \"disabled\",\n  \"game_state\": \"stopped\"\n}\n```\n\n`game_state`: `stopped` or `running`.\n\n**log:**\n```json\n{\n  \"logs\": \"[P] Hello world!\\n[P] Score: 100\",\n  \"startLine\": 100,\n  \"lastLine\": 2330,\n  \"remaining\": 0,\n  \"hasMore\": false\n}\n```\n\nLog context labels: `[P]` = Play (game running), `[E]` = Edit mode.\n\n**record:**\n```json\n{\n  \"success\": true,\n  \"dir\": \"/tmp/roblox_studio_mcp_screenshots/project_game/record_1770989155354\",\n  \"frames\": 6,\n  \"frame_size\": \"1920x1080\",\n  \"files\": [\n    \".../record_1770989155354/frame_001.png\",\n    \".../record_1770989155354/frame_002.png\",\n    \".../record_1770989155354/frame_003.png\",\n    \".../record_1770989155354/frame_004.png\",\n    \".../record_1770989155354/frame_005.png\",\n    \".../record_1770989155354/frame_006.png\"\n  ],\n  \"duration\": 3,\n  \"fps\": 2\n}\n```\n\n**list:**\n```json\n[\n  { \"pid\": 12345, \"hwnd\": 67890, \"type\": \"local\", \"place_path\": \"D:/project/game.rbxl\" },\n  { \"pid\": 12346, \"hwnd\": 67891, \"type\": \"cloud\", \"place_id\": 123456789 }\n]\n```\n\n## Claude Code Plugin\n\nThis tool can be used as a [Claude Code plugin](https://docs.anthropic.com/en/docs/claude-code), giving Claude direct control over Roblox Studio via MCP tools.\n\n### Install\n\nClone or symlink this repo into your project's `.claude/plugins/` directory, or use `--plugin-dir`:\n\n```bash\n# Project-level plugin\ncp -r . /path/to/your-project/.claude/plugins/roblox-studio\n\n# Or test locally\nclaude --plugin-dir .claude-plugin\n```\n\n### MCP Tools\n\n| Tool | Description |\n|------|-------------|\n| `list_studios` | List all running Studio instances |\n| `open_place` | Open Studio with a .rbxl file |\n| `close_place` | Close a Studio instance (force kill) |\n| `get_status` | Get full status: process, window, modals, log path, last line |\n| `manage_modals` | Detect or close modal dialogs |\n| `game_control` | Start (F5) / Stop (Shift+F5) / Pause (F12) |\n| `get_logs` | Get filtered logs with play/edit context, incremental reading |\n| `save_place` | Save current place (Ctrl+S / Cmd+S) |\n| `screenshot` | Capture screenshot (default: viewport, also normal / full) |\n| `record` | Record viewport frames, each saved as separate PNG |\n| `detect_toolbar` | Detect toolbar button state via template matching |\n\n### Example Usage in Claude Code\n\n```\n> Use get_status to check if my game.rbxl is open, then start the game and get the logs\n```\n\nClaude will call `get_status`, `game_control`, and `get_logs` tools automatically.\n\n## As a Library\n\n```js\nimport { getLogsFromLine, findErrors } from \"@white-dragon-tools/roblox-studio-physical-operation/log-utils\";\nimport { detectToolbarStateFromFile } from \"@white-dragon-tools/roblox-studio-physical-operation/toolbar-detector\";\nimport { getSession, openPlace, closePlace } from \"@white-dragon-tools/roblox-studio-physical-operation/studio-manager\";\n// Parse logs from a file\nconst result = getLogsFromLine(\"/path/to/studio.log\", {\n  timestamps: true,\n  includeContext: true,\n  runContext: \"play\",\n});\n\n// Detect toolbar state from a screenshot\nconst state = await detectToolbarStateFromFile(\"screenshot.png\");\nconsole.log(state.gameState); // \"running\" or \"stopped\"\nconsole.log(state.theme);     // \"dark\", \"light\", or \"legacy\"\n\n// Session management\nconst [ok, msg, session] = await getSession(\"/path/to/game.rbxl\");\nif (ok) console.log(session.pid, session.hwnd, session.logPath);\n\n```\n\n## Architecture\n\n```\nsrc/\n  index.mjs                # Library entry point (re-exports all modules)\n  cli.mjs                  # CLI entry point, option parsing and routing\n  cli-parse.mjs            # CLI option/argument parsing helpers\n  mcp-server.mjs           # MCP server entry point (Claude Code plugin)\n  screenshot-utils.mjs     # Screenshot directory management, viewport recording\n  log-filter.mjs           # Log exclusion rules (Studio internal log prefixes/substrings)\n  log-utils.mjs            # Log parsing, date filtering, search, error detection\n  studio-manager.mjs       # Process finding, PID-log mapping, session management\n  toolbar-detector.mjs     # OpenCV WASM multi-theme template matching + color analysis\n  platform/\n    index.mjs              # Auto-select Windows or macOS backend\n    windows.mjs            # Win32 API via koffi (EnumWindows, SendInput, PrintWindow)\n    macos.mjs              # CoreGraphics + Accessibility API via koffi, AppleScript\n.claude-plugin/\n  plugin.json              # Plugin manifest\n.mcp.json                  # MCP server configuration (stdio transport, at plugin root)\ntemplates/\n  dark/                    # Dark theme toolbar button templates\n    play.png, pause.png, stop.png\n  play.png, pause.png, stop.png   # Legacy/light theme toolbar button templates\ntests/\n  log-filter.test.mjs\n  log-utils.test.mjs\n  toolbar-detector.test.mjs     # Screenshot regression tests (running/stopped samples)\n```\n\n## Dependencies\n\n- **@modelcontextprotocol/sdk** -- MCP server for Claude Code plugin integration\n- **koffi** -- Native FFI: Win32 API on Windows, CoreGraphics/CoreFoundation/Accessibility API on macOS\n- **opencv-wasm** -- Template matching for toolbar detection (cross-platform, no native compilation)\n- **sharp** -- Image processing: screenshot capture, grayscale conversion, cropping\n\n## Platform Details\n\n### Windows\n- Process finding: PowerShell `Get-Process`\n- Window management: Win32 API via koffi (EnumWindows, SendInput, PrintWindow)\n- Modal detection: Window enumeration by PID, filtering by size\n- Screenshot: `PrintWindow` with `PW_RENDERFULLCONTENT`, BGRA→RGB conversion\n- Session matching: Log file command line parsing → place path matching\n- Studio path: Registry `HKCR\\roblox-studio\\shell\\open\\command`\n- Log directory: `%LOCALAPPDATA%\\Roblox\\logs`\n- DPI aware: `SetProcessDpiAwareness` / `SetProcessDPIAware` fallback\n\n### macOS\n- Process finding: `pgrep` + `ps`\n- Window management: CoreGraphics `CGWindowListCopyWindowInfo` via koffi\n- Modal detection: Accessibility API (`AXUIElement`, `AXModal`, `AXDialog`)\n- Keyboard input: CoreGraphics `CGEventCreateKeyboardEvent` / `CGEventPost`\n- Screenshot: `screencapture -l <windowId>`\n- Viewport capture: Accessibility API tree traversal to find game viewport rect, then crop\n- Session matching: CrashHandler `--studioPid` + `--attachment` parsing, `lsof` fallback\n- Studio path: `/Applications/RobloxStudio.app`, `~/Applications/`, or Spotlight (`mdfind`)\n- Log directory: `~/Library/Logs/Roblox`\n- Requires: Screen Recording + Accessibility permissions\n\n## Development\n\n```bash\nnpm install\nnpm test          # Run all tests (vitest)\nnpm run test:watch # Watch mode\n```\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "roblox-studio-physical-operation",
          "description": "Roblox Studio 自动化 MCP 工具。提供 12 个工具：列出 Studio 实例、打开/关闭场景、获取状态、管理模态弹窗、游戏控制（启动/停止/暂停）、日志读取与错误检测、截图（窗口/全屏/视口）、工具栏按钮状态检测、保存场景、视口录制。支持 Windows 和 macOS 双平台。",
          "source": "./",
          "category": "development",
          "homepage": "https://github.com/white-dragon-tools/roblox-studio-physical-operation",
          "tags": [
            "roblox",
            "game-development",
            "mcp",
            "automation"
          ],
          "categories": [
            "automation",
            "development",
            "game-development",
            "mcp",
            "roblox"
          ],
          "install_commands": [
            "/plugin marketplace add white-dragon-tools/roblox-studio-physical-operation",
            "/plugin install roblox-studio-physical-operation@roblox-studio-physical-operation-marketplace"
          ]
        }
      ]
    }
  ]
}