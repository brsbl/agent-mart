{
  "author": {
    "id": "henkisdabro",
    "display_name": "Henrik SÃ¶derlund",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/477513?u=3343b823bb703661fadf826ae26524101b108664&v=4",
    "url": "https://github.com/henkisdabro",
    "bio": "Ex Agency Founder | Ad Tech ðŸ› ï¸ | Google Tag Manager & Google Analytics ðŸ“Š | Digital Advertising & Media Buying ðŸ“£",
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 20,
      "total_commands": 13,
      "total_skills": 23,
      "total_stars": 17,
      "total_forks": 1
    }
  },
  "marketplaces": [
    {
      "name": "wookstar-claude-plugins",
      "version": null,
      "description": "Comprehensive Claude Code marketplace with specialised bundles for productivity, development, analytics, documents, e-commerce, and individual MCP server integrations",
      "owner_info": {
        "name": "Henrik Soederlund",
        "email": "whom-wealthy.2z@icloud.com"
      },
      "keywords": [],
      "repo_full_name": "henkisdabro/wookstar-claude-plugins",
      "repo_url": "https://github.com/henkisdabro/wookstar-claude-plugins",
      "repo_description": "An opinionated plugin pack for Claude Code. Skills, Commands, Hooks, MCPs organised in thematic \"bundles\" to cover productivity, development, Google Analytics & Google Tag Manager,  Shopify and a few other bits",
      "homepage": "",
      "signals": {
        "stars": 17,
        "forks": 1,
        "pushed_at": "2026-01-16T08:57:01Z",
        "created_at": "2025-10-10T03:18:55Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/README.md",
          "type": "blob",
          "size": 8499
        },
        {
          "path": ".claude-plugin/USAGE.md",
          "type": "blob",
          "size": 11859
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 12946
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claudecode",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claudecode/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claudecode/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 242
        },
        {
          "path": "plugins/claudecode/README.md",
          "type": "blob",
          "size": 1541
        },
        {
          "path": "plugins/claudecode/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/claudecode/commands/reflection.md",
          "type": "blob",
          "size": 2293
        },
        {
          "path": "plugins/claudecode/commands/ultra-think.md",
          "type": "blob",
          "size": 4850
        },
        {
          "path": "plugins/cloudflare-skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/cloudflare-skills/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/cloudflare-skills/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 217
        },
        {
          "path": "plugins/cloudflare-skills/README.md",
          "type": "blob",
          "size": 2127
        },
        {
          "path": "plugins/cloudflare-skills/building-ai-agent-on-cloudflare",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/cloudflare-skills/building-ai-agent-on-cloudflare/SKILL.md",
          "type": "blob",
          "size": 9307
        },
        {
          "path": "plugins/cloudflare-skills/building-mcp-server-on-cloudflare",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/cloudflare-skills/building-mcp-server-on-cloudflare/SKILL.md",
          "type": "blob",
          "size": 6098
        },
        {
          "path": "plugins/cloudflare-skills/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/cloudflare-skills/commands/build-agent.md",
          "type": "blob",
          "size": 1341
        },
        {
          "path": "plugins/cloudflare-skills/commands/build-mcp.md",
          "type": "blob",
          "size": 1217
        },
        {
          "path": "plugins/developer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/developer/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/developer/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 436
        },
        {
          "path": "plugins/developer/README.md",
          "type": "blob",
          "size": 3692
        },
        {
          "path": "plugins/developer/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/developer/agents/documentation-manager.md",
          "type": "blob",
          "size": 3445
        },
        {
          "path": "plugins/developer/agents/fullstack-developer.md",
          "type": "blob",
          "size": 32260
        },
        {
          "path": "plugins/developer/agents/validation-gates.md",
          "type": "blob",
          "size": 4799
        },
        {
          "path": "plugins/developer/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/developer/commands/containerize.md",
          "type": "blob",
          "size": 4115
        },
        {
          "path": "plugins/developer/commands/execute-prp.md",
          "type": "blob",
          "size": 1523
        },
        {
          "path": "plugins/developer/commands/generate-prp.md",
          "type": "blob",
          "size": 2844
        },
        {
          "path": "plugins/developer/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/developer/skills/devtools",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/developer/skills/devtools/SKILL.md",
          "type": "blob",
          "size": 14046
        },
        {
          "path": "plugins/developer/skills/devtools/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/developer/skills/devtools/references/troubleshooting.md",
          "type": "blob",
          "size": 5666
        },
        {
          "path": "plugins/developer/skills/fifteen-factor-app",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/developer/skills/fifteen-factor-app/SKILL.md",
          "type": "blob",
          "size": 6177
        },
        {
          "path": "plugins/developer/skills/fifteen-factor-app/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/developer/skills/fifteen-factor-app/references/modern-extensions.md",
          "type": "blob",
          "size": 9134
        },
        {
          "path": "plugins/developer/skills/fifteen-factor-app/references/original-factors.md",
          "type": "blob",
          "size": 10031
        },
        {
          "path": "plugins/developer/skills/fifteen-factor-app/references/overview.md",
          "type": "blob",
          "size": 5187
        },
        {
          "path": "plugins/developer/skills/fifteen-factor-app/references/setup-and-tools.md",
          "type": "blob",
          "size": 6943
        },
        {
          "path": "plugins/developer/skills/git-commit-helper",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/developer/skills/git-commit-helper/SKILL.md",
          "type": "blob",
          "size": 4394
        },
        {
          "path": "plugins/developer/skills/prp-generator",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/developer/skills/prp-generator/SKILL.md",
          "type": "blob",
          "size": 12796
        },
        {
          "path": "plugins/developer/skills/prp-generator/assets",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/developer/skills/prp-generator/assets/prp_template.md",
          "type": "blob",
          "size": 6338
        },
        {
          "path": "plugins/developer/skills/prp-generator/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/developer/skills/prp-generator/references/research_methodology.md",
          "type": "blob",
          "size": 9565
        },
        {
          "path": "plugins/developer/skills/webapp-testing",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/developer/skills/webapp-testing/SKILL.md",
          "type": "blob",
          "size": 3945
        },
        {
          "path": "plugins/documents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/documents/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/documents/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 397
        },
        {
          "path": "plugins/documents/README.md",
          "type": "blob",
          "size": 1407
        },
        {
          "path": "plugins/documents/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/documents/skills/docx",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/documents/skills/docx/SKILL.md",
          "type": "blob",
          "size": 10150
        },
        {
          "path": "plugins/documents/skills/docx/docx-js.md",
          "type": "blob",
          "size": 16509
        },
        {
          "path": "plugins/documents/skills/docx/ooxml.md",
          "type": "blob",
          "size": 23572
        },
        {
          "path": "plugins/documents/skills/pdf-processing-pro",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/documents/skills/pdf-processing-pro/FORMS.md",
          "type": "blob",
          "size": 14006
        },
        {
          "path": "plugins/documents/skills/pdf-processing-pro/OCR.md",
          "type": "blob",
          "size": 2828
        },
        {
          "path": "plugins/documents/skills/pdf-processing-pro/SKILL.md",
          "type": "blob",
          "size": 7048
        },
        {
          "path": "plugins/documents/skills/pdf-processing-pro/TABLES.md",
          "type": "blob",
          "size": 14911
        },
        {
          "path": "plugins/documents/skills/xlsx",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/documents/skills/xlsx/SKILL.md",
          "type": "blob",
          "size": 10632
        },
        {
          "path": "plugins/marketing",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/marketing/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/marketing/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 501
        },
        {
          "path": "plugins/marketing/README.md",
          "type": "blob",
          "size": 4149
        },
        {
          "path": "plugins/marketing/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/marketing/skills/ga4",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/marketing/skills/ga4/SKILL.md",
          "type": "blob",
          "size": 12968
        },
        {
          "path": "plugins/marketing/skills/ga4/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/marketing/skills/ga4/references/audiences.md",
          "type": "blob",
          "size": 7417
        },
        {
          "path": "plugins/marketing/skills/ga4/references/bigquery.md",
          "type": "blob",
          "size": 10282
        },
        {
          "path": "plugins/marketing/skills/ga4/references/custom-dimensions.md",
          "type": "blob",
          "size": 9338
        },
        {
          "path": "plugins/marketing/skills/ga4/references/custom-events.md",
          "type": "blob",
          "size": 10113
        },
        {
          "path": "plugins/marketing/skills/ga4/references/data-management.md",
          "type": "blob",
          "size": 8696
        },
        {
          "path": "plugins/marketing/skills/ga4/references/debugview.md",
          "type": "blob",
          "size": 8438
        },
        {
          "path": "plugins/marketing/skills/ga4/references/events-fundamentals.md",
          "type": "blob",
          "size": 9424
        },
        {
          "path": "plugins/marketing/skills/ga4/references/gtag.md",
          "type": "blob",
          "size": 9702
        },
        {
          "path": "plugins/marketing/skills/ga4/references/gtm-integration.md",
          "type": "blob",
          "size": 9802
        },
        {
          "path": "plugins/marketing/skills/ga4/references/measurement-protocol.md",
          "type": "blob",
          "size": 11564
        },
        {
          "path": "plugins/marketing/skills/ga4/references/privacy.md",
          "type": "blob",
          "size": 9864
        },
        {
          "path": "plugins/marketing/skills/ga4/references/recommended-events.md",
          "type": "blob",
          "size": 10724
        },
        {
          "path": "plugins/marketing/skills/ga4/references/reporting.md",
          "type": "blob",
          "size": 8399
        },
        {
          "path": "plugins/marketing/skills/ga4/references/setup.md",
          "type": "blob",
          "size": 8642
        },
        {
          "path": "plugins/marketing/skills/ga4/references/user-tracking.md",
          "type": "blob",
          "size": 8514
        },
        {
          "path": "plugins/marketing/skills/google-ads-scripts",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/marketing/skills/google-ads-scripts/SKILL.md",
          "type": "blob",
          "size": 11326
        },
        {
          "path": "plugins/marketing/skills/google-ads-scripts/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/marketing/skills/google-ads-scripts/references/ads-api-reference.md",
          "type": "blob",
          "size": 32274
        },
        {
          "path": "plugins/marketing/skills/gtm",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/marketing/skills/gtm/SKILL.md",
          "type": "blob",
          "size": 9598
        },
        {
          "path": "plugins/marketing/skills/gtm/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/marketing/skills/gtm/references/api.md",
          "type": "blob",
          "size": 15483
        },
        {
          "path": "plugins/marketing/skills/gtm/references/best-practices.md",
          "type": "blob",
          "size": 9441
        },
        {
          "path": "plugins/marketing/skills/gtm/references/custom-templates.md",
          "type": "blob",
          "size": 13556
        },
        {
          "path": "plugins/marketing/skills/gtm/references/datalayer.md",
          "type": "blob",
          "size": 12479
        },
        {
          "path": "plugins/marketing/skills/gtm/references/debugging.md",
          "type": "blob",
          "size": 10591
        },
        {
          "path": "plugins/marketing/skills/gtm/references/setup.md",
          "type": "blob",
          "size": 6882
        },
        {
          "path": "plugins/marketing/skills/gtm/references/tags.md",
          "type": "blob",
          "size": 8334
        },
        {
          "path": "plugins/marketing/skills/gtm/references/triggers.md",
          "type": "blob",
          "size": 10025
        },
        {
          "path": "plugins/marketing/skills/gtm/references/variables.md",
          "type": "blob",
          "size": 11508
        },
        {
          "path": "plugins/mcp-alphavantage",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-alphavantage/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-alphavantage/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 251
        },
        {
          "path": "plugins/mcp-alphavantage/README.md",
          "type": "blob",
          "size": 469
        },
        {
          "path": "plugins/mcp-coingecko",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-coingecko/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-coingecko/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 238
        },
        {
          "path": "plugins/mcp-coingecko/README.md",
          "type": "blob",
          "size": 456
        },
        {
          "path": "plugins/mcp-currency-conversion",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-currency-conversion/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-currency-conversion/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 247
        },
        {
          "path": "plugins/mcp-currency-conversion/README.md",
          "type": "blob",
          "size": 376
        },
        {
          "path": "plugins/mcp-fetch",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-fetch/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-fetch/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 201
        },
        {
          "path": "plugins/mcp-fetch/README.md",
          "type": "blob",
          "size": 309
        },
        {
          "path": "plugins/mcp-gemini-bridge",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-gemini-bridge/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-gemini-bridge/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 213
        },
        {
          "path": "plugins/mcp-gemini-bridge/README.md",
          "type": "blob",
          "size": 351
        },
        {
          "path": "plugins/mcp-google-workspace",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-google-workspace/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-google-workspace/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 227
        },
        {
          "path": "plugins/mcp-google-workspace/README.md",
          "type": "blob",
          "size": 382
        },
        {
          "path": "plugins/mcp-mikrotik",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-mikrotik/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-mikrotik/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 215
        },
        {
          "path": "plugins/mcp-mikrotik/README.md",
          "type": "blob",
          "size": 380
        },
        {
          "path": "plugins/mcp-n8n",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-n8n/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-n8n/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 196
        },
        {
          "path": "plugins/mcp-n8n/README.md",
          "type": "blob",
          "size": 240
        },
        {
          "path": "plugins/mcp-notion",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-notion/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-notion/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 205
        },
        {
          "path": "plugins/mcp-notion/README.md",
          "type": "blob",
          "size": 304
        },
        {
          "path": "plugins/mcp-open-meteo",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-open-meteo/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-open-meteo/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 214
        },
        {
          "path": "plugins/mcp-open-meteo/README.md",
          "type": "blob",
          "size": 429
        },
        {
          "path": "plugins/mcp-perplexity",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-perplexity/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/mcp-perplexity/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 222
        },
        {
          "path": "plugins/mcp-perplexity/README.md",
          "type": "blob",
          "size": 460
        },
        {
          "path": "plugins/productivity",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/productivity/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/productivity/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 360
        },
        {
          "path": "plugins/productivity/README.md",
          "type": "blob",
          "size": 4820
        },
        {
          "path": "plugins/productivity/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/productivity/commands/execute-parallel.md",
          "type": "blob",
          "size": 1368
        },
        {
          "path": "plugins/productivity/commands/planning.md",
          "type": "blob",
          "size": 1129
        },
        {
          "path": "plugins/productivity/commands/prep-parallel.md",
          "type": "blob",
          "size": 647
        },
        {
          "path": "plugins/productivity/commands/primer.md",
          "type": "blob",
          "size": 549
        },
        {
          "path": "plugins/productivity/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/productivity/skills/google-apps-script",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/productivity/skills/google-apps-script/SKILL.md",
          "type": "blob",
          "size": 12259
        },
        {
          "path": "plugins/productivity/skills/google-apps-script/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/productivity/skills/google-apps-script/references/apps-script-api-reference.md",
          "type": "blob",
          "size": 38726
        },
        {
          "path": "plugins/productivity/skills/tampermonkey",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/SKILL.md",
          "type": "blob",
          "size": 11524
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/api-async.md",
          "type": "blob",
          "size": 7584
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/api-audio.md",
          "type": "blob",
          "size": 7046
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/api-cookies.md",
          "type": "blob",
          "size": 8733
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/api-dom-ui.md",
          "type": "blob",
          "size": 9839
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/api-storage.md",
          "type": "blob",
          "size": 8708
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/api-sync.md",
          "type": "blob",
          "size": 8053
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/api-tabs.md",
          "type": "blob",
          "size": 7941
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/browser-compatibility.md",
          "type": "blob",
          "size": 7164
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/common-pitfalls.md",
          "type": "blob",
          "size": 8603
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/debugging.md",
          "type": "blob",
          "size": 7256
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/header-reference.md",
          "type": "blob",
          "size": 8343
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/http-requests.md",
          "type": "blob",
          "size": 10873
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/patterns.md",
          "type": "blob",
          "size": 12479
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/sandbox-modes.md",
          "type": "blob",
          "size": 6947
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/security-checklist.md",
          "type": "blob",
          "size": 7806
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/url-matching.md",
          "type": "blob",
          "size": 6626
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/version-numbering.md",
          "type": "blob",
          "size": 4298
        },
        {
          "path": "plugins/productivity/skills/tampermonkey/references/web-requests.md",
          "type": "blob",
          "size": 7324
        },
        {
          "path": "plugins/shopify-developer",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/shopify-developer/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/shopify-developer/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 378
        },
        {
          "path": "plugins/shopify-developer/README.md",
          "type": "blob",
          "size": 7098
        },
        {
          "path": "plugins/shopify-developer/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-api",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-api/SKILL.md",
          "type": "blob",
          "size": 17400
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-app-dev",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-app-dev/SKILL.md",
          "type": "blob",
          "size": 16962
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-debugging",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-debugging/SKILL.md",
          "type": "blob",
          "size": 15396
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-liquid",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-liquid/SKILL.md",
          "type": "blob",
          "size": 9539
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-liquid/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-liquid/references/filters.md",
          "type": "blob",
          "size": 13546
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-liquid/references/objects.md",
          "type": "blob",
          "size": 21106
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-liquid/references/syntax.md",
          "type": "blob",
          "size": 11177
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-performance",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-performance/SKILL.md",
          "type": "blob",
          "size": 15694
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-theme-dev",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-theme-dev/SKILL.md",
          "type": "blob",
          "size": 18055
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-theme-dev/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/shopify-developer/skills/shopify-theme-dev/references/settings-schema.md",
          "type": "blob",
          "size": 13274
        },
        {
          "path": "plugins/ultimate-skill-creator",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ultimate-skill-creator/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ultimate-skill-creator/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 349
        },
        {
          "path": "plugins/ultimate-skill-creator/README.md",
          "type": "blob",
          "size": 6222
        },
        {
          "path": "plugins/ultimate-skill-creator/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ultimate-skill-creator/agents/skill-architect.md",
          "type": "blob",
          "size": 5249
        },
        {
          "path": "plugins/ultimate-skill-creator/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ultimate-skill-creator/commands/create-skill-ultimate.md",
          "type": "blob",
          "size": 6328
        },
        {
          "path": "plugins/ultimate-skill-creator/commands/setup-skill-hook.md",
          "type": "blob",
          "size": 3544
        },
        {
          "path": "plugins/ultimate-skill-creator/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ultimate-skill-creator/hooks/skill-activation-prompt",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ultimate-skill-creator/hooks/skill-activation-prompt/README.md",
          "type": "blob",
          "size": 4713
        },
        {
          "path": "plugins/ultimate-skill-creator/hooks/skill-activation-prompt/package.json",
          "type": "blob",
          "size": 404
        },
        {
          "path": "plugins/ultimate-skill-creator/hooks/skill-activation-prompt/skill-activation-prompt.sh",
          "type": "blob",
          "size": 100
        },
        {
          "path": "plugins/ultimate-skill-creator/hooks/skill-activation-prompt/skill-activation-prompt.ts",
          "type": "blob",
          "size": 4468
        },
        {
          "path": "plugins/ultimate-skill-creator/hooks/skill-activation-prompt/tsconfig.json",
          "type": "blob",
          "size": 522
        },
        {
          "path": "plugins/ultimate-skill-creator/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ultimate-skill-creator/skills/skill-mastery",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ultimate-skill-creator/skills/skill-mastery/SKILL.md",
          "type": "blob",
          "size": 9976
        },
        {
          "path": "plugins/ultimate-skill-creator/skills/skill-mastery/references",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/ultimate-skill-creator/skills/skill-mastery/references/advanced-patterns.md",
          "type": "blob",
          "size": 8175
        },
        {
          "path": "plugins/ultimate-skill-creator/skills/skill-mastery/references/api-reference.md",
          "type": "blob",
          "size": 6120
        },
        {
          "path": "plugins/ultimate-skill-creator/skills/skill-mastery/references/archetypes.md",
          "type": "blob",
          "size": 6064
        },
        {
          "path": "plugins/ultimate-skill-creator/skills/skill-mastery/references/token-hierarchy.md",
          "type": "blob",
          "size": 3889
        },
        {
          "path": "plugins/utilities",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/utilities/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/utilities/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 244
        },
        {
          "path": "plugins/utilities/README.md",
          "type": "blob",
          "size": 1647
        },
        {
          "path": "plugins/utilities/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/utilities/skills/timezone-tools",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/utilities/skills/timezone-tools/SKILL.md",
          "type": "blob",
          "size": 3761
        }
      ],
      "files": {
        ".claude-plugin/README.md": "# Claude Code Marketplace\n\nA comprehensive plugin providing productivity-enhancing commands, specialized AI agents, and powerful integrations for Claude Code.\n\n## Installation\n\n```bash\n# Add the marketplace\n/plugin marketplace add github:henkisdabro/wookstar-claude-plugins\n\n# Install the main plugin\n/plugin install claudecode-marketplace@claudecode-marketplace\n```\n\nThis installs all commands and agents in one package.\n\n---\n\n## Quick Navigation\n\n- **[Commands](#commands)** - 13 slash commands for development workflows\n- **[Specialized Agents](#specialized-agents)** - 3 AI experts for full-stack, docs, and testing\n- **[MCP Servers](#mcp-servers)** - 20+ external integrations\n- **[Environment Variables](#environment-variables)** - Required API keys\n\n---\n\n## Commands\n\nAll commands are available immediately after installing the plugin.\n\n### Development Utilities\n\n#### `/containerize`\n\nContainerize your application with production-ready Docker configuration.\n\n```bash\n/containerize --node              # Node.js application\n/containerize --python            # Python application\n/containerize --multi-stage       # Optimized multi-stage build\n```\n\n**Features:**\n- Analyzes application architecture\n- Creates optimized Dockerfile with security best practices\n- Generates docker-compose.yaml for local development\n- Configures health checks and graceful shutdown\n\n#### `/prompt_writer`\n\nAdvanced prompt engineering assistant.\n\n```bash\n/prompt_writer \"Create a function that validates email addresses\"\n```\n\n**Features:**\n- Analyzes your request for clarity\n- Structures prompts for optimal Claude responses\n- Suggests context and constraints\n\n#### `/reflection`\n\nCode analysis and reflection tool.\n\n```bash\n/reflection\n```\n\n**Features:**\n- Analyzes recent code changes\n- Identifies patterns and anti-patterns\n- Suggests refactoring opportunities\n\n#### `/primer`\n\nQuick project initialization and setup.\n\n#### `/create-agentsmd-symlink`\n\nManages agent configuration symlinks for team setups.\n\n---\n\n### Planning & Strategy\n\n#### `/ultra-think`\n\nDeep analytical thinking mode for complex problems.\n\n```bash\n/ultra-think \"Design a real-time collaboration system with WebSockets\"\n```\n\n**Features:**\n- Multi-layered problem analysis\n- Considers edge cases and constraints\n- Evaluates multiple approaches\n- Provides detailed reasoning and tradeoffs\n\n**Best for:** Architecture decisions, complex algorithm design, system design\n\n#### `/planning`\n\nStructured planning workflows for feature development.\n\n```bash\n/planning \"Build user authentication module\"\n```\n\n**Features:**\n- Creates step-by-step implementation plans\n- Identifies dependencies and prerequisites\n- Breaks down tasks into manageable chunks\n\n#### `/generate-prp`\n\nGenerate a Progressive Refinement Plan.\n\n```bash\n/generate-prp \"Build a recommendation engine\"\n```\n\n**Features:**\n- Creates phased implementation plan\n- Defines milestones and deliverables\n- Prioritizes core functionality first\n\n#### `/execute-prp`\n\nExecute a previously generated Progressive Refinement Plan.\n\n```bash\n/execute-prp\n```\n\n**Features:**\n- Implements plan phase by phase\n- Validates each milestone\n- Adapts plan based on learnings\n\n#### `/infinite`\n\nExtended context planning mode for large-scale projects.\n\n```bash\n/infinite \"Design microservices architecture for e-commerce platform\"\n```\n\n---\n\n### Parallel Execution\n\n#### `/prep-parallel`\n\nPrepare and analyze tasks for parallel execution.\n\n```bash\n/prep-parallel \"Run tests, build frontend, compile backend, lint code\"\n```\n\n**Features:**\n- Analyzes task dependencies\n- Groups independent tasks\n- Optimizes execution order\n\n#### `/execute-parallel`\n\nExecute prepared tasks in parallel.\n\n```bash\n/execute-parallel\n```\n\n**Features:**\n- Runs independent tasks simultaneously\n- Monitors progress of each task\n- Handles failures gracefully\n\n---\n\n## Specialized Agents\n\nThese agents activate automatically when relevant to your work.\n\n### Full-Stack Developer\n\nExpert full-stack development specialist.\n\n**Expertise:**\n- Frontend: React, TypeScript, Vue, modern CSS\n- Backend: Node.js, Express, FastAPI, REST/GraphQL APIs\n- Databases: PostgreSQL, MongoDB, Redis\n- Architecture: Microservices, serverless, monoliths\n\n**When it activates:**\n- Building web applications\n- API development\n- Database schema design\n- Full-stack feature implementation\n\n### Documentation Manager\n\nTechnical documentation specialist.\n\n**Expertise:**\n- README files and getting started guides\n- API documentation\n- Architecture diagrams and decisions\n- Code comments and JSDoc\n- Technical specifications\n\n**When it activates:**\n- After implementing new features\n- When code structure changes\n- Creating new projects\n- API modifications\n\n### Validation Gates\n\nTesting and quality assurance specialist.\n\n**Expertise:**\n- Unit testing (Jest, pytest, etc.)\n- Integration testing\n- Build validation\n- Code quality checks\n- Test coverage analysis\n\n**When it activates:**\n- After feature implementation\n- Before commits\n- During refactoring\n- When tests are requested\n\n---\n\n## MCP Servers\n\nMCP servers are installed individually to extend Claude Code with external data sources and integrations.\n\n### Core Utilities\n\nEssential servers for most projects:\n\n- **mcp-fetch** - Web content fetching and scraping\n- **mcp-playwright** - Browser automation and testing\n\n### AI & Planning\n\nAI-powered assistants:\n\n- **mcp-serena** - AI planning assistant\n- **mcp-gemini-bridge** - Gemini API capabilities\n- **mcp-perplexity** - AI-powered search\n\n### Data & APIs\n\nExternal data sources (most require API keys):\n\n- **mcp-open-meteo** - Weather data (no key required)\n- **mcp-currency-conversion** - Currency exchange rates\n- **mcp-coingecko** - Cryptocurrency market data\n- **mcp-alphavantage** - Stock market data\n- **mcp-context7** - Context management\n- **mcp-firecrawl** - Advanced web scraping\n- **mcp-google-workspace** - Gmail, Calendar, Drive\n- **mcp-notion** - Notion workspace integration\n\n### Documentation\n\nQuick access to technical docs:\n\n- **mcp-cloudflare-docs** - Cloudflare documentation\n- **mcp-microsoft-docs** - Microsoft documentation\n\n### Development Tools\n\nDevelopment automation:\n\n- **mcp-chrome-devtools** - Chrome DevTools protocol\n- **mcp-n8n** - n8n workflow automation\n- **mcp-mikrotik** - MikroTik router management\n\n**Installation:**\n\n```bash\n/plugin install mcp-fetch@claudecode-marketplace\n/plugin install mcp-perplexity@claudecode-marketplace\n```\n\n---\n\n## Environment Variables\n\nSome MCP servers require API keys. Create a `.env` file in your project root:\n\n```bash\n# Cryptocurrency data\nCOINGECKO_DEMO_API_KEY=your_key_here\n\n# Stock market data\nALPHAVANTAGEAPIKEY=your_key_here\n\n# Workspace management\nCONTEXT7_API_KEY=your_key_here\n\n# Web scraping\nFIRECRAWL_API_KEY=your_key_here\n\n# AI search\nPERPLEXITY_API_KEY=your_key_here\n\n# Workflow automation\nN8N_API_KEY=your_key_here\n\n# Google Workspace\nGOOGLE_OAUTH_CLIENT_ID=your_client_id\nGOOGLE_OAUTH_CLIENT_SECRET=your_client_secret\n\n# Network management\nMIKROTIK_HOST=192.168.88.1\nMIKROTIK_USER=admin\nMIKROTIK_PASSWORD=your_password\n```\n\n---\n\n## Common Workflows\n\n### New Project Setup\n\n```bash\n/plugin install claudecode-marketplace@claudecode-marketplace\n\n/containerize --node --multi-stage\n# Fullstack agent implements features\n# Documentation agent maintains docs\n```\n\n### Complex Feature Development\n\n```bash\n/ultra-think \"Design authentication system with OAuth2\"\n/generate-prp\n/execute-prp\n# Validation agent tests implementation\n```\n\n### Data Integration Project\n\n```bash\n# Install MCP data servers\n/plugin install mcp-coingecko@claudecode-marketplace\n/plugin install mcp-open-meteo@claudecode-marketplace\n\n# Query external data sources\n\"Show me Bitcoin price trends and weather correlation\"\n```\n\n---\n\n## Getting Help\n\n### Plugin Management\n\n```bash\n/plugin list                    # Show installed plugins\n/plugin uninstall claudecode-marketplace@claudecode-marketplace\n/plugin marketplace update claudecode-marketplace\n```\n\n### Documentation\n\n- **[ARCHITECTURE.md](./ARCHITECTURE.md)** - Design decisions and technical details\n- **[USAGE.md](./USAGE.md)** - Detailed examples and troubleshooting\n\n---\n\n## Support\n\n- **GitHub Issues:** [Report bugs or request features](https://github.com/henkisdabro/wookstar-claude-plugins/issues)\n- **Email:** whom-wealthy.2z@icloud.com\n- **Claude Code Docs:** [docs.claude.com/claude-code](https://docs.claude.com/en/docs/claude-code)\n\n---\n\n## Version\n\n**Marketplace Version:** 2.0.0\n\n---\n\n**Happy coding with Claude Code!**\n",
        ".claude-plugin/USAGE.md": "# Usage Guide\n\nPractical examples and workflows for using the Claude Code Marketplace.\n\n## Getting Started\n\n### Step 1: Add the Marketplace\n\n```bash\n# From GitHub (recommended for teams)\n/plugin marketplace add henkisdabro/wookstar-claude-plugins\n\n# From local directory (for development)\n/plugin marketplace add /path/to/wookstar-claude-plugins\n```\n\n### Step 2: Browse Available Plugins\n\n```bash\n# Interactive browser\n/plugin\n\n# List all marketplaces\n/plugin marketplace list\n\n# View marketplace details\n/plugin marketplace info claudecode-marketplace\n```\n\n### Step 3: Install Plugins\n\n```bash\n# Install a single plugin\n/plugin install development-utilities@wookstar-claude-plugins\n\n# Install multiple plugins\n/plugin install development-utilities@wookstar-claude-plugins planning-tools@wookstar-claude-plugins\n```\n\n## Common Workflows\n\n### Workflow 1: Setting Up a New Project\n\n**Scenario:** Starting a new full-stack web application\n\n```bash\n# 1. Install essential plugins\n/plugin install development-utilities@wookstar-claude-plugins\n/plugin install fullstack-developer@wookstar-claude-plugins\n/plugin install documentation-manager@wookstar-claude-plugins\n\n# 2. Use containerize command to set up Docker\n/containerize --node --multi-stage\n\n# 3. Generate project documentation\n# The documentation-manager agent will help maintain docs as you build\n```\n\n### Workflow 2: Complex Planning Session\n\n**Scenario:** Architecting a new feature\n\n```bash\n# 1. Install planning tools\n/plugin install planning-tools@wookstar-claude-plugins\n\n# 2. Start with ultra-think for deep analysis\n/ultra-think \"Design a real-time collaboration system with WebSockets and Redis\"\n\n# 3. Generate a progressive refinement plan\n/generate-prp\n\n# 4. Execute the plan systematically\n/execute-prp\n```\n\n### Workflow 3: Team Development Setup\n\n**Scenario:** Onboarding team members with consistent tooling\n\n**1. Team Lead: Configure project settings**\n\nCreate `.claude/settings.json`:\n\n```json\n{\n  \"extraKnownMarketplaces\": {\n    \"claudecode-marketplace\": {\n      \"source\": {\n        \"source\": \"github\",\n        \"repo\": \"henkisdabro/wookstar-claude-plugins\"\n      }\n    }\n  },\n  \"enabledPlugins\": [\n    \"development-utilities@wookstar-claude-plugins\",\n    \"planning-tools@wookstar-claude-plugins\",\n    \"fullstack-developer@wookstar-claude-plugins\",\n    \"documentation-manager@wookstar-claude-plugins\",\n    \"validation-gates@wookstar-claude-plugins\"\n  ]\n}\n```\n\n**2. Team Members: Trust repository**\n\nWhen team members trust the repository in Claude Code, plugins are automatically installed.\n\n### Workflow 4: Quality Assurance Pipeline\n\n**Scenario:** Ensuring code quality with automated validation\n\n```bash\n# 1. Install validation tools\n/plugin install validation-gates@wookstar-claude-plugins\n\n# 2. The validation-gates agent automatically:\n#    - Runs tests after code changes\n#    - Validates build processes\n#    - Ensures quality gates pass\n\n# 3. Review audit logs\ncat .claude/logs/tool-usage.log\n```\n\n### Workflow 5: Data Integration Project\n\n**Scenario:** Building a dashboard with multiple data sources\n\n```bash\n# 1. Install individual MCP data servers you need\n/plugin install mcp-coingecko@wookstar-claude-plugins\n/plugin install mcp-alphavantage@wookstar-claude-plugins\n/plugin install mcp-open-meteo@wookstar-claude-plugins\n/plugin install mcp-currency-conversion@wookstar-claude-plugins\n\n# 2. Set up environment variables\ncat > .env << EOF\nCOINGECKO_DEMO_API_KEY=your_key\nALPHAVANTAGEAPIKEY=your_key\nCONTEXT7_API_KEY=your_key\nEOF\n\n# 3. Now you can access:\n#    - Weather data (open-meteo)\n#    - Crypto prices (coingecko)\n#    - Stock data (alphavantage)\n#    - Currency conversion\n```\n\n## Plugin-Specific Usage\n\n### Development Utilities\n\n#### Containerize Command\n\n```bash\n# Node.js application\n/containerize --node\n\n# Python application\n/containerize --python\n\n# Multi-stage build for production\n/containerize --multi-stage\n\n# With specific application type\n/containerize api-server\n```\n\n#### Prompt Writer\n\n```bash\n# Generate optimized prompts\n/prompt_writer \"Create a function that validates email addresses\"\n\n# The tool will help you craft effective prompts for Claude\n```\n\n#### Reflection Tool\n\n```bash\n# Analyze current code state\n/reflection\n\n# Review recent changes and suggest improvements\n```\n\n### Planning Tools\n\n#### Ultra-Think\n\n```bash\n# Deep analysis mode\n/ultra-think \"How should we implement authentication with OAuth2?\"\n\n# Break down complex problems systematically\n```\n\n#### Progressive Refinement Planning\n\n```bash\n# Generate a plan\n/generate-prp \"Build a recommendation engine\"\n\n# Execute the plan\n/execute-prp\n\n# View plan status\n/planning status\n```\n\n#### Infinite Planning\n\n```bash\n# Extended planning session\n/infinite \"Design microservices architecture for e-commerce platform\"\n```\n\n### Parallel Execution\n\n```bash\n# Prepare tasks for parallel execution\n/prep-parallel \"Run tests, build frontend, compile backend\"\n\n# Execute tasks in parallel\n/execute-parallel\n```\n\n### Specialized Agents\n\n#### Fullstack Developer\n\n```bash\n# Invoke the agent for full-stack tasks\n# The agent proactively handles:\n# - Frontend development (React, TypeScript)\n# - Backend APIs (Node.js, Express, FastAPI)\n# - Database design (PostgreSQL, MongoDB)\n# - Full application architecture\n\n# Example: \"Build a REST API for user management with React frontend\"\n```\n\n#### Documentation Manager\n\n```bash\n# The agent automatically:\n# - Updates README.md after code changes\n# - Maintains API documentation\n# - Creates comprehensive technical docs\n# - Ensures documentation accuracy\n\n# Example: \"Update documentation for the new authentication module\"\n```\n\n#### Validation Gates\n\n```bash\n# The agent proactively:\n# - Runs tests after implementation\n# - Validates builds\n# - Checks code quality\n# - Ensures all tests pass\n\n# Example: \"Implement user registration feature\"\n# Agent will test and validate automatically\n```\n\n## MCP Server Usage\n\n### Essential Servers\n\nOnce installed, MCP servers are automatically available:\n\n```bash\n# Fetch web content\n# Uses the fetch MCP server automatically\n\n# Check current time in Perth\n# Uses the time MCP server\n\n# Browser automation\n# Uses playwright MCP server\n```\n\n### AI Tools\n\n```bash\n# Serena planning assistant\n# Available for complex planning tasks\n\n# Gemini integration\n# Access Gemini API capabilities\n```\n\n### Data Sources\n\n```bash\n# Weather queries\n\"What's the weather in Perth?\"\n\n# Crypto prices\n\"Get current Bitcoin price\"\n\n# Stock data\n\"Show me Tesla stock performance\"\n\n# Currency conversion\n\"Convert 100 USD to EUR\"\n```\n\n### Dev Tools\n\n```bash\n# Chrome DevTools integration\n# Debug web applications\n\n# n8n automation\n# Trigger n8n workflows\n\n# MikroTik management\n# Configure network devices\n```\n\n## Environment Configuration\n\n### Required Environment Variables\n\nCreate `.env` in your project root:\n\n```bash\n# API Keys\nCOINGECKO_DEMO_API_KEY=your_key_here\nALPHAVANTAGEAPIKEY=your_key_here\nCONTEXT7_API_KEY=your_key_here\nFIRECRAWL_API_KEY=your_key_here\nN8N_API_KEY=your_key_here\n\n# OAuth (Google Workspace)\nGOOGLE_OAUTH_CLIENT_ID=your_client_id\nGOOGLE_OAUTH_CLIENT_SECRET=your_client_secret\n\n# Network (MikroTik)\nMIKROTIK_HOST=192.168.88.1\nMIKROTIK_USER=admin\nMIKROTIK_PASSWORD=your_password\n\n# Cloudflare Access\nCF_ACCESS_CLIENT_ID=your_client_id\nCF_ACCESS_CLIENT_SECRET=your_client_secret\n```\n\n### Testing Environment Setup\n\n```bash\n# Verify environment variables are loaded\n/plugin test-env\n\n# Check MCP server connectivity\n/plugin mcp-status\n\n# View active MCP servers\n/plugin mcp-list\n```\n\n## Troubleshooting\n\n### Plugin Installation Issues\n\n```bash\n# Update marketplace metadata\n/plugin marketplace update claudecode-marketplace\n\n# Reinstall plugin\n/plugin uninstall development-utilities\n/plugin install development-utilities@wookstar-claude-plugins\n\n# Clear plugin cache\n/plugin cache clear\n```\n\n### MCP Server Issues\n\n```bash\n# Check MCP server logs\ncat ~/.claude/logs/mcp-*.log\n\n# Restart specific MCP server\n/plugin mcp-restart fetch\n\n# Verify environment variables\necho $COINGECKO_DEMO_API_KEY\n```\n\n### Hook Issues\n\n```bash\n# Check hook execution logs\ncat .claude/logs/tool-usage.log\n\n# Disable specific hook temporarily\n# Edit .claude/settings.json\n\n# Test hook manually\nbash .claude-plugin/hooks/tool-logger/log-tool-usage.sh\n```\n\n## Best Practices\n\n### 1. Start Small\n\n```bash\n# Install one plugin category at a time\n/plugin install development-utilities@wookstar-claude-plugins\n\n# Test thoroughly before adding more\n```\n\n### 2. Configure Environment Early\n\n```bash\n# Set up .env before installing MCP plugins\ncp .env.example .env\n# Edit .env with your credentials\n\n# Then install individual MCP servers you need\n/plugin install mcp-coingecko@wookstar-claude-plugins\n/plugin install mcp-alphavantage@wookstar-claude-plugins\n/plugin install mcp-firecrawl@wookstar-claude-plugins\n```\n\n### 3. Use Version Pinning for Teams\n\n```json\n{\n  \"enabledPlugins\": [\n    \"development-utilities@wookstar-claude-plugins#v1.0.0\"\n  ]\n}\n```\n\n### 4. Regular Updates\n\n```bash\n# Update marketplace metadata weekly\n/plugin marketplace update claudecode-marketplace\n\n# Check for plugin updates\n/plugin list --outdated\n\n# Update all plugins\n/plugin update --all\n```\n\n### 5. Monitor Resource Usage\n\n```bash\n# Check MCP server resource usage\n/plugin mcp-stats\n\n# Disable unused MCP servers\n/plugin mcp-disable serena\n```\n\n## Advanced Usage\n\n### Custom Plugin Development\n\nBased on marketplace plugins:\n\n```bash\n# Clone marketplace\ngit clone https://github.com/henkisdabro/wookstar-claude-plugins\n\n# Create custom command\nmkdir -p .claude-plugin/commands\n# Create your command markdown file\ntouch .claude-plugin/commands/my-command.md\n\n# Add entry to marketplace.json\n# Edit marketplace.json and add your plugin entry\n\n# Test locally\n/plugin marketplace add ./claudecode-marketplace\n/plugin install my-plugin@wookstar-claude-plugins\n```\n\n### Combining Plugins\n\n```bash\n# Use multiple plugins together\n/ultra-think \"Design authentication system\"  # planning-tools\n/containerize --node                          # development-utilities\n# fullstack-developer agent implements\n# validation-gates agent tests\n# documentation-manager agent documents\n```\n\n### Creating Team Workflows\n\n```bash\n# Define standard workflow in team docs\n# 1. Planning: /ultra-think or /generate-prp\n# 2. Implementation: Use fullstack-developer agent\n# 3. Validation: validation-gates agent runs tests\n# 4. Documentation: documentation-manager updates docs\n# 5. Review: Check .claude/logs/tool-usage.log\n```\n\n## Performance Tips\n\n### 1. Selective MCP Server Installation\n\n```bash\n# Install only the MCP servers you need\n# Core utilities (recommended for most projects)\n/plugin install mcp-fetch@wookstar-claude-plugins\n/plugin install mcp-time@wookstar-claude-plugins\n\n# Data sources (install as needed)\n/plugin install mcp-open-meteo@wookstar-claude-plugins\n/plugin install mcp-currency-conversion@wookstar-claude-plugins\n```\n\n### 2. Lazy Loading\n\nPlugins and MCP servers load on-demand. No performance impact when not in use.\n\n### 3. Resource Monitoring\n\n```bash\n# Monitor active MCP servers\n/plugin mcp-stats\n\n# Disable servers when project is complete\n/plugin mcp-disable unused-server\n```\n\n## Support and Resources\n\n### Getting Help\n\n```bash\n# Plugin help\n/plugin help\n\n# Marketplace help\n/plugin marketplace help\n\n# Command-specific help\n/containerize --help\n```\n\n### Documentation\n\n- [Main README](README.md)\n- [Architecture Guide](ARCHITECTURE.md)\n- [This Usage Guide](USAGE.md)\n\n### Community\n\n- GitHub Issues: Report bugs and request features\n- Email: whom-wealthy.2z@icloud.com\n- Documentation: https://docs.claude.com/en/docs/claude-code\n\n## Next Steps\n\n1. Install your first plugin\n2. Explore plugin capabilities\n3. Set up team configuration\n4. Integrate into your workflow\n5. Provide feedback for improvements\n\nHappy coding with Claude Code Marketplace!\n",
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"wookstar-claude-plugins\",\n  \"owner\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"metadata\": {\n    \"description\": \"Comprehensive Claude Code marketplace with specialised bundles for productivity, development, analytics, documents, e-commerce, and individual MCP server integrations\",\n    \"version\": \"5.2.0\",\n    \"homepage\": \"https://github.com/henkisdabro/wookstar-claude-plugins\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"productivity\",\n      \"source\": \"./plugins/productivity\",\n      \"description\": \"Workflow orchestration suite: 4 commands for planning, parallel task execution, and session priming + 2 skills (Google Apps Script for Workspace automation, Tampermonkey for browser userscripts)\",\n      \"version\": \"2.1.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"homepage\": \"https://github.com/henkisdabro/wookstar-claude-plugins\",\n      \"keywords\": [\n        \"productivity\",\n        \"planning\",\n        \"workflows\",\n        \"parallel\",\n        \"orchestration\",\n        \"google-apps-script\",\n        \"workspace\",\n        \"tampermonkey\",\n        \"userscript\",\n        \"browser-automation\",\n        \"greasemonkey\"\n      ],\n      \"category\": \"productivity\"\n    },\n    {\n      \"name\": \"developer\",\n      \"source\": \"./plugins/developer\",\n      \"description\": \"Complete development suite: 3 expert agents (fullstack developer, validation gates, documentation manager) + 3 commands (containerize, PRP generation/execution) + 5 skills (git commit helper, webapp testing, devtools, PRP generator, Fifteen-Factor App) + 7 MCP integrations (Chrome DevTools, Playwright, Cloudflare docs, Microsoft docs, Firecrawl, Context7, Serena AI)\",\n      \"version\": \"2.1.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"homepage\": \"https://github.com/henkisdabro/wookstar-claude-plugins\",\n      \"keywords\": [\n        \"development\",\n        \"fullstack\",\n        \"testing\",\n        \"validation\",\n        \"git\",\n        \"playwright\",\n        \"devtools\",\n        \"debugging\",\n        \"docker\",\n        \"prp\",\n        \"fifteen-factor\",\n        \"architecture\"\n      ],\n      \"category\": \"development\",\n      \"mcpServers\": \"./.mcp.json\"\n    },\n    {\n      \"name\": \"documents\",\n      \"source\": \"./plugins/documents\",\n      \"description\": \"Professional document processing suite: 3 comprehensive skills for Word (.docx), Excel (.xlsx), and PDF files - create, edit, analyse, and process documents with advanced features like tracked changes, forms, tables, OCR, and formulas\",\n      \"version\": \"1.1.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"homepage\": \"https://github.com/henkisdabro/wookstar-claude-plugins\",\n      \"keywords\": [\n        \"documents\",\n        \"docx\",\n        \"word\",\n        \"excel\",\n        \"xlsx\",\n        \"pdf\",\n        \"spreadsheet\",\n        \"forms\",\n        \"ocr\",\n        \"office\"\n      ],\n      \"category\": \"documents\"\n    },\n    {\n      \"name\": \"claudecode\",\n      \"source\": \"./plugins/claudecode\",\n      \"description\": \"Claude Code thinking tools: 2 commands (ultra-think for deep analytical reasoning, reflection for improving CLAUDE.md instructions)\",\n      \"version\": \"3.1.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"homepage\": \"https://github.com/henkisdabro/wookstar-claude-plugins\",\n      \"keywords\": [\n        \"claude-code\",\n        \"thinking\",\n        \"reasoning\",\n        \"analysis\",\n        \"reflection\",\n        \"meta\"\n      ],\n      \"category\": \"meta\"\n    },\n    {\n      \"name\": \"ultimate-skill-creator\",\n      \"source\": \"./plugins/ultimate-skill-creator\",\n      \"description\": \"Advanced skill development toolkit: 1 agent (skill-architect) + 2 commands (/create-skill-ultimate, /setup-skill-hook) + 1 comprehensive skill (skill-mastery with 4 reference guides and 2 utility scripts) + 1 hook (skill-activation-prompt). Combines official plugin-dev patterns, community best practices, and latest API. Requires plugin-dev@claude-plugins-official for validation agents.\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"homepage\": \"https://github.com/henkisdabro/wookstar-claude-plugins\",\n      \"keywords\": [\n        \"skills\",\n        \"skill-creator\",\n        \"plugin-dev\",\n        \"development\",\n        \"best-practices\",\n        \"meta\",\n        \"archetypes\",\n        \"token-efficiency\",\n        \"progressive-disclosure\"\n      ],\n      \"category\": \"meta\"\n    },\n    {\n      \"name\": \"cloudflare-skills\",\n      \"source\": \"./plugins/cloudflare-skills\",\n      \"description\": \"Official Cloudflare development skills: 2 commands (build-agent, build-mcp) + 2 comprehensive skills for building AI agents and MCP servers on Cloudflare Workers with reference guides for agent patterns, state management, OAuth setup, and troubleshooting\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Cloudflare\",\n        \"url\": \"https://github.com/cloudflare\"\n      },\n      \"homepage\": \"https://github.com/cloudflare/skills\",\n      \"keywords\": [\n        \"cloudflare\",\n        \"workers\",\n        \"ai-agents\",\n        \"mcp\",\n        \"mcp-server\",\n        \"serverless\",\n        \"edge\",\n        \"oauth\",\n        \"durable-objects\"\n      ],\n      \"category\": \"development\"\n    },\n    {\n      \"name\": \"utilities\",\n      \"source\": \"./plugins/utilities\",\n      \"description\": \"General utility tools: timezone conversion and time queries across IANA timezones\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"homepage\": \"https://github.com/henkisdabro/wookstar-claude-plugins\",\n      \"keywords\": [\n        \"utilities\",\n        \"timezone\",\n        \"time\",\n        \"conversion\",\n        \"tools\"\n      ],\n      \"category\": \"utilities\"\n    },\n    {\n      \"name\": \"marketing\",\n      \"source\": \"./plugins/marketing\",\n      \"description\": \"Complete marketing analytics suite: comprehensive GTM skill (9 reference guides for tags, triggers, variables, data layer, debugging, custom templates, API), comprehensive GA4 skill (15 reference guides for setup, events, ecommerce, BigQuery, Measurement Protocol, privacy compliance), and Google Ads Scripts skill for campaign automation. Includes MCP integrations for Analytics and GTM APIs.\",\n      \"version\": \"2.0.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"homepage\": \"https://github.com/henkisdabro/wookstar-claude-plugins\",\n      \"keywords\": [\n        \"gtm\",\n        \"google-tag-manager\",\n        \"ga4\",\n        \"google-analytics\",\n        \"analytics\",\n        \"tracking\",\n        \"tags\",\n        \"triggers\",\n        \"variables\",\n        \"datalayer\",\n        \"events\",\n        \"ecommerce\",\n        \"bigquery\",\n        \"measurement-protocol\",\n        \"google-ads-scripts\",\n        \"marketing\",\n        \"debugging\"\n      ],\n      \"category\": \"analytics\",\n      \"mcpServers\": \"./.mcp.json\"\n    },\n    {\n      \"name\": \"shopify-developer\",\n      \"source\": \"./plugins/shopify-developer\",\n      \"description\": \"Professional Shopify development suite with 6 specialised skills covering Liquid templating, theme development, API integration (GraphQL/REST), custom app development, performance optimisation, and debugging. Complete solution for building custom themes, headless storefronts, and Shopify apps.\",\n      \"version\": \"1.1.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"homepage\": \"https://github.com/henkisdabro/wookstar-claude-plugins\",\n      \"keywords\": [\n        \"shopify\",\n        \"liquid\",\n        \"ecommerce\",\n        \"theme\",\n        \"development\",\n        \"api\",\n        \"graphql\",\n        \"rest\",\n        \"app-development\",\n        \"performance\",\n        \"debugging\",\n        \"storefront\"\n      ],\n      \"category\": \"development\"\n    },\n    {\n      \"name\": \"mcp-gemini-bridge\",\n      \"source\": \"./plugins/mcp-gemini-bridge\",\n      \"description\": \"Google Gemini AI model integration via MCP\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"keywords\": [\"mcp\", \"gemini\", \"ai\", \"google\"],\n      \"category\": \"ai\",\n      \"mcpServers\": \"./.mcp.json\"\n    },\n    {\n      \"name\": \"mcp-perplexity\",\n      \"source\": \"./plugins/mcp-perplexity\",\n      \"description\": \"Perplexity AI-powered search and information retrieval\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"keywords\": [\"mcp\", \"perplexity\", \"search\", \"ai\"],\n      \"category\": \"ai\",\n      \"mcpServers\": \"./.mcp.json\"\n    },\n    {\n      \"name\": \"mcp-alphavantage\",\n      \"source\": \"./plugins/mcp-alphavantage\",\n      \"description\": \"Stock market data, company information, and financial indicators via AlphaVantage\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"keywords\": [\"mcp\", \"stocks\", \"finance\", \"alphavantage\", \"market-data\"],\n      \"category\": \"data\",\n      \"mcpServers\": \"./.mcp.json\"\n    },\n    {\n      \"name\": \"mcp-coingecko\",\n      \"source\": \"./plugins/mcp-coingecko\",\n      \"description\": \"Cryptocurrency prices, market data, and historical trends via CoinGecko\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"keywords\": [\"mcp\", \"crypto\", \"cryptocurrency\", \"coingecko\", \"market-data\"],\n      \"category\": \"data\",\n      \"mcpServers\": \"./.mcp.json\"\n    },\n    {\n      \"name\": \"mcp-currency-conversion\",\n      \"source\": \"./plugins/mcp-currency-conversion\",\n      \"description\": \"Real-time currency exchange rates and conversion (no API key required)\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"keywords\": [\"mcp\", \"currency\", \"forex\", \"exchange\", \"conversion\"],\n      \"category\": \"data\",\n      \"mcpServers\": \"./.mcp.json\"\n    },\n    {\n      \"name\": \"mcp-fetch\",\n      \"source\": \"./plugins/mcp-fetch\",\n      \"description\": \"Web content fetching and HTTP requests\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"keywords\": [\"mcp\", \"fetch\", \"web\", \"http\"],\n      \"category\": \"mcpServers\",\n      \"mcpServers\": \"./.mcp.json\"\n    },\n    {\n      \"name\": \"mcp-google-workspace\",\n      \"source\": \"./plugins/mcp-google-workspace\",\n      \"description\": \"Google Workspace integration (Gmail, Drive, Calendar)\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"keywords\": [\"mcp\", \"google\", \"workspace\", \"gmail\", \"drive\", \"calendar\"],\n      \"category\": \"mcpServers\",\n      \"mcpServers\": \"./.mcp.json\"\n    },\n    {\n      \"name\": \"mcp-mikrotik\",\n      \"source\": \"./plugins/mcp-mikrotik\",\n      \"description\": \"MikroTik router management and network automation\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"keywords\": [\"mcp\", \"mikrotik\", \"router\", \"network\", \"automation\"],\n      \"category\": \"mcpServers\",\n      \"mcpServers\": \"./.mcp.json\"\n    },\n    {\n      \"name\": \"mcp-n8n\",\n      \"source\": \"./plugins/mcp-n8n\",\n      \"description\": \"n8n workflow automation integration\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"keywords\": [\"mcp\", \"n8n\", \"automation\", \"workflows\"],\n      \"category\": \"mcpServers\",\n      \"mcpServers\": \"./.mcp.json\"\n    },\n    {\n      \"name\": \"mcp-notion\",\n      \"source\": \"./plugins/mcp-notion\",\n      \"description\": \"Notion workspace and database integration\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"keywords\": [\"mcp\", \"notion\", \"workspace\", \"notes\", \"database\"],\n      \"category\": \"mcpServers\",\n      \"mcpServers\": \"./.mcp.json\"\n    },\n    {\n      \"name\": \"mcp-open-meteo\",\n      \"source\": \"./plugins/mcp-open-meteo\",\n      \"description\": \"Weather and climate data (no API key required)\",\n      \"version\": \"1.0.0\",\n      \"author\": {\n        \"name\": \"Henrik Soederlund\",\n        \"email\": \"whom-wealthy.2z@icloud.com\"\n      },\n      \"keywords\": [\"mcp\", \"weather\", \"climate\", \"forecast\"],\n      \"category\": \"mcpServers\",\n      \"mcpServers\": \"./.mcp.json\"\n    }\n  ]\n}\n",
        "plugins/claudecode/.claude-plugin/plugin.json": "{\n  \"name\": \"claudecode\",\n  \"description\": \"Claude Code power tools: thinking/reasoning commands (ultra-think, reflection)\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"3.1.0\"\n}\n",
        "plugins/claudecode/README.md": "# Claude Code Toolkit\n\nThinking and reasoning tools for Claude Code - enhance analytical capabilities and improve your configuration.\n\n## What's Included\n\n### Commands (2)\n\n- **/ultra-think** - Deep analytical thinking mode for complex problems\n- **/reflection** - Analyse chat history and improve CLAUDE.md instructions\n\n## Installation\n\n```bash\n/plugin install claudecode@wookstar\n```\n\n## Usage Examples\n\n```bash\n# Deep analytical thinking for complex problems\n/ultra-think \"Design a distributed caching system for global users\"\n\n# Analyse and improve your CLAUDE.md instructions\n/reflection\n```\n\n## Command Details\n\n### /ultra-think\n\nActivates deep analysis mode for complex problem-solving:\n\n- Multi-dimensional analysis (technical, business, user perspectives)\n- Systematic exploration of the problem space\n- Identification of constraints and hidden complexities\n- Comprehensive solution evaluation\n\n### /reflection\n\nAnalyses your conversation history to improve instructions:\n\n- Reviews chat history for patterns and issues\n- Identifies areas where responses could improve\n- Proposes specific changes to CLAUDE.md\n- Implements approved improvements\n\n## When to Use\n\nThis toolkit is ideal for:\n\n- Complex problem-solving requiring deep analysis\n- Multi-perspective evaluation of solutions\n- Improving your Claude Code configuration\n- Understanding constraints and trade-offs\n\n## Related Plugins\n\nFor skill creation and development, see the **ultimate-skill-creator** plugin:\n\n```bash\n/plugin install ultimate-skill-creator@wookstar\n```\n",
        "plugins/claudecode/commands/reflection.md": "---\ndescription: Analyse and improve CLAUDE.md instructions based on chat history\n---\n\nYou are an expert in prompt engineering, specializing in optimizing AI code assistant instructions. Your task is to analyze and improve the instructions for Claude Code found in u/CLAUDE.md. Follow these steps carefully:\n\n1. Analysis Phase:\n   Review the chat history in your context window.\n\nThen, examine the current Claude instructions:\n<claude_instructions>\nu/CLAUDE.md\n</claude_instructions>\n\nAnalyze the chat history and instructions to identify areas that could be improved. Look for:\n\n- Inconsistencies in Claude's responses\n- Misunderstandings of user requests\n- Areas where Claude could provide more detailed or accurate information\n- Opportunities to enhance Claude's ability to handle specific types of queries or tasks\n\n2. Interaction Phase:\n   Present your findings and improvement ideas to the human. For each suggestion:\n   a) Explain the current issue you've identified\n   b) Propose a specific change or addition to the instructions\n   c) Describe how this change would improve Claude's performance\n\nWait for feedback from the human on each suggestion before proceeding. If the human approves a change, move it to the implementation phase. If not, refine your suggestion or move on to the next idea.\n\n3. Implementation Phase:\n   For each approved change:\n   a) Clearly state the section of the instructions you're modifying\n   b) Present the new or modified text for that section\n   c) Explain how this change addresses the issue identified in the analysis phase\n\n4. Output Format:\n   Present your final output in the following structure:\n\n<analysis>\n[List the issues identified and potential improvements]\n</analysis>\n\n<improvements>\n[For each approved improvement:\n1. Section being modified\n2. New or modified instruction text\n3. Explanation of how this addresses the identified issue]\n</improvements>\n\n<final_instructions>\n[Present the complete, updated set of instructions for Claude, incorporating all approved changes]\n</final_instructions>\n\nRemember, your goal is to enhance Claude's performance and consistency while maintaining the core functionality and purpose of the AI assistant. Be thorough in your analysis, clear in your explanations, and precise in your implementations.\n",
        "plugins/claudecode/commands/ultra-think.md": "---\ndescription: Engage deep analysis mode with extended multi-perspective reasoning\nargument-hint: [problem or question to analyse]\n---\n\n# Deep Analysis and Problem Solving Mode\n\nDeep analysis and problem solving mode\n\n## Instructions\n\n1. **Initialize Ultra Think Mode**\n   - Acknowledge the request for enhanced analytical thinking\n   - Set context for deep, systematic reasoning\n   - Prepare to explore the problem space comprehensively\n\n2. **Parse the Problem or Question**\n   - Extract the core challenge from: **$ARGUMENTS**\n   - Identify all stakeholders and constraints\n   - Recognize implicit requirements and hidden complexities\n   - Question assumptions and surface unknowns\n\n3. **Multi-Dimensional Analysis**\n   Approach the problem from multiple angles:\n\n   ### Technical Perspective\n\n   - Analyze technical feasibility and constraints\n   - Consider scalability, performance, and maintainability\n   - Evaluate security implications\n   - Assess technical debt and future-proofing\n\n   ### Business Perspective\n\n   - Understand business value and ROI\n   - Consider time-to-market pressures\n   - Evaluate competitive advantages\n   - Assess risk vs. reward trade-offs\n\n   ### User Perspective\n\n   - Analyze user needs and pain points\n   - Consider usability and accessibility\n   - Evaluate user experience implications\n   - Think about edge cases and user journeys\n\n   ### System Perspective\n\n   - Consider system-wide impacts\n   - Analyze integration points\n   - Evaluate dependencies and coupling\n   - Think about emergent behaviors\n\n4. **Generate Multiple Solutions**\n   - Brainstorm at least 3-5 different approaches\n   - For each approach, consider:\n     - Pros and cons\n     - Implementation complexity\n     - Resource requirements\n     - Potential risks\n     - Long-term implications\n   - Include both conventional and creative solutions\n   - Consider hybrid approaches\n\n5. **Deep Dive Analysis**\n   For the most promising solutions:\n   - Create detailed implementation plans\n   - Identify potential pitfalls and mitigation strategies\n   - Consider phased approaches and MVPs\n   - Analyze second and third-order effects\n   - Think through failure modes and recovery\n\n6. **Cross-Domain Thinking**\n   - Draw parallels from other industries or domains\n   - Apply design patterns from different contexts\n   - Consider biological or natural system analogies\n   - Look for innovative combinations of existing solutions\n\n7. **Challenge and Refine**\n   - Play devil's advocate with each solution\n   - Identify weaknesses and blind spots\n   - Consider \"what if\" scenarios\n   - Stress-test assumptions\n   - Look for unintended consequences\n\n8. **Synthesize Insights**\n   - Combine insights from all perspectives\n   - Identify key decision factors\n   - Highlight critical trade-offs\n   - Summarize innovative discoveries\n   - Present a nuanced view of the problem space\n\n9. **Provide Structured Recommendations**\n   Present findings in a clear structure:\n   ``\n\n   ## Problem Analysis\n\n   - Core challenge\n   - Key constraints\n   - Critical success factors\n\n   ## Solution Options\n\n   ### Option 1: [Name]\n\n   - Description\n   - Pros/Cons\n   - Implementation approach\n   - Risk assessment\n\n   ### Option 2: [Name]\n\n   [Similar structure]\n\n   ## Recommendation\n\n   - Recommended approach\n   - Rationale\n   - Implementation roadmap\n   - Success metrics\n   - Risk mitigation plan\n\n   ## Alternative Perspectives\n\n   - Contrarian view\n   - Future considerations\n   - Areas for further research\n   `\n\n10. **Meta-Analysis**\n    - Reflect on the thinking process itself\n    - Identify areas of uncertainty\n    - Acknowledge biases or limitations\n    - Suggest additional expertise needed\n    - Provide confidence levels for recommendations\n\n## Usage Examples\n\n`bash\n\n### Architectural decision\n\n/project:ultra-think Should we migrate to microservices or improve our monolith?\n\n### Complex problem solving\n\n/project:ultra-think How do we scale our system to handle 10x traffic while reducing costs?\n\n### Strategic planning\n\n/project:ultra-think What technology stack should we choose for our next-gen platform?\n\n### Design challenge\n\n/project:ultra-think How can we improve our API to be more developer-friendly while maintaining backward compatibility?\n``\n\n## Key Principles\n\n- **First Principles Thinking**: Break down to fundamental truths\n- **Systems Thinking**: Consider interconnections and feedback loops\n- **Probabilistic Thinking**: Work with uncertainties and ranges\n- **Inversion**: Consider what to avoid, not just what to do\n- **Second-Order Thinking**: Consider consequences of consequences\n\n## Output Expectations\n\n- Comprehensive analysis (typically 2-4 pages of insights)\n- Multiple viable solutions with trade-offs\n- Clear reasoning chains\n- Acknowledgment of uncertainties\n- Actionable recommendations\n- Novel insights or perspectives\n",
        "plugins/cloudflare-skills/.claude-plugin/plugin.json": "{\n  \"name\": \"cloudflare\",\n  \"description\": \"Plugin that includes Skills for building AI agents and MCP servers on the Cloudflare developer platform\",\n  \"version\": \"1.0.0\",\n  \"author\": {\n    \"name\": \"Cloudflare\"\n  }\n}\n",
        "plugins/cloudflare-skills/README.md": "# Cloudflare Skills for Claude\n\nA collection of Claude Skills for building on the Cloudflare developer platform.\n\n## Skills\n\n### building-mcp-server-on-cloudflare\n\nBuild remote Model Context Protocol (MCP) servers on Cloudflare with tools, OAuth authentication, and production deployment.\n\n**Triggers:** \"build MCP server\", \"create MCP tools\", \"remote MCP\", \"deploy MCP\", \"OAuth to MCP\", \"MCP authentication\"\n\n**Contents:**\n- `SKILL.md` - Core guide for building MCP servers\n- `references/examples.md` - Official templates and boilerplates\n- `references/oauth-setup.md` - Security and OAuth configuration\n- `references/troubleshooting.md` - Common issues and fixes\n\n### building-ai-agent-on-cloudflare\n\nBuild AI agents using the Cloudflare Agents SDK with state management, real-time WebSockets, scheduled tasks, and tool integration.\n\n**Triggers:** \"build an agent\", \"AI agent\", \"chat agent\", \"stateful agent\", \"Agents SDK\", \"real-time AI\", \"WebSocket AI\"\n\n**Contents:**\n- `SKILL.md` - Core guide for building agents\n- `references/examples.md` - Official templates and reference implementations\n- `references/agent-patterns.md` - Tool calling, RAG, multi-agent orchestration\n- `references/state-patterns.md` - State management strategies\n- `references/troubleshooting.md` - Common issues and fixes\n\n## Usage\n\nThese skills are designed for use with Claude. When a user's request matches the trigger phrases, Claude will use the relevant skill to provide accurate, up-to-date guidance for building on Cloudflare.\n\n## Structure\n\nEach skill follows the standard layout:\n\n```\nskill-name/\nâ”œâ”€â”€ SKILL.md              # Main skill file with YAML frontmatter\nâ””â”€â”€ references/           # Supporting documentation\n    â”œâ”€â”€ examples.md\n    â”œâ”€â”€ patterns.md\n    â””â”€â”€ troubleshooting.md\n```\n\n## Resources\n\n- [Cloudflare Agents Documentation](https://developers.cloudflare.com/agents/)\n- [Cloudflare MCP Guide](https://developers.cloudflare.com/agents/model-context-protocol/)\n- [Agents SDK Repository](https://github.com/cloudflare/agents)\n- [Agents Starter Template](https://github.com/cloudflare/agents-starter)\n",
        "plugins/cloudflare-skills/building-ai-agent-on-cloudflare/SKILL.md": "---\nname: building-ai-agent-on-cloudflare\ndescription: |\n  Builds AI agents on Cloudflare using the Agents SDK with state management,\n  real-time WebSockets, scheduled tasks, tool integration, and chat capabilities.\n  Generates production-ready agent code deployed to Workers.\n\n  Use when: user wants to \"build an agent\", \"AI agent\", \"chat agent\", \"stateful\n  agent\", mentions \"Agents SDK\", needs \"real-time AI\", \"WebSocket AI\", or asks\n  about agent \"state management\", \"scheduled tasks\", or \"tool calling\".\n---\n\n# Building Cloudflare Agents\n\nCreates AI-powered agents using Cloudflare's Agents SDK with persistent state, real-time communication, and tool integration.\n\n## When to Use\n\n- User wants to build an AI agent or chatbot\n- User needs stateful, real-time AI interactions\n- User asks about the Cloudflare Agents SDK\n- User wants scheduled tasks or background AI work\n- User needs WebSocket-based AI communication\n\n## Prerequisites\n\n- Cloudflare account with Workers enabled\n- Node.js 18+ and npm/pnpm/yarn\n- Wrangler CLI (`npm install -g wrangler`)\n\n## Quick Start\n\n```bash\nnpm create cloudflare@latest -- my-agent --template=cloudflare/agents-starter\ncd my-agent\nnpm start\n```\n\nAgent runs at `http://localhost:8787`\n\n## Core Concepts\n\n### What is an Agent?\n\nAn Agent is a stateful, persistent AI service that:\n- Maintains state across requests and reconnections\n- Communicates via WebSockets or HTTP\n- Runs on Cloudflare's edge via Durable Objects\n- Can schedule tasks and call tools\n- Scales horizontally (each user/session gets own instance)\n\n### Agent Lifecycle\n\n```\nClient connects â†’ Agent.onConnect() â†’ Agent processes messages\n                                    â†’ Agent.onMessage()\n                                    â†’ Agent.setState() (persists + syncs)\nClient disconnects â†’ State persists â†’ Client reconnects â†’ State restored\n```\n\n## Basic Agent Structure\n\n```typescript\nimport { Agent, Connection } from \"agents\";\n\ninterface Env {\n  AI: Ai;  // Workers AI binding\n}\n\ninterface State {\n  messages: Array<{ role: string; content: string }>;\n  preferences: Record<string, string>;\n}\n\nexport class MyAgent extends Agent<Env, State> {\n  // Initial state for new instances\n  initialState: State = {\n    messages: [],\n    preferences: {},\n  };\n\n  // Called when agent starts or resumes\n  async onStart() {\n    console.log(\"Agent started with state:\", this.state);\n  }\n\n  // Handle WebSocket connections\n  async onConnect(connection: Connection) {\n    connection.send(JSON.stringify({\n      type: \"welcome\",\n      history: this.state.messages,\n    }));\n  }\n\n  // Handle incoming messages\n  async onMessage(connection: Connection, message: string) {\n    const data = JSON.parse(message);\n\n    if (data.type === \"chat\") {\n      await this.handleChat(connection, data.content);\n    }\n  }\n\n  // Handle disconnections\n  async onClose(connection: Connection) {\n    console.log(\"Client disconnected\");\n  }\n\n  // React to state changes\n  onStateUpdate(state: State, source: string) {\n    console.log(\"State updated by:\", source);\n  }\n\n  private async handleChat(connection: Connection, userMessage: string) {\n    // Add user message to history\n    const messages = [\n      ...this.state.messages,\n      { role: \"user\", content: userMessage },\n    ];\n\n    // Call AI\n    const response = await this.env.AI.run(\"@cf/meta/llama-3-8b-instruct\", {\n      messages,\n    });\n\n    // Update state (persists and syncs to all clients)\n    this.setState({\n      ...this.state,\n      messages: [\n        ...messages,\n        { role: \"assistant\", content: response.response },\n      ],\n    });\n\n    // Send response\n    connection.send(JSON.stringify({\n      type: \"response\",\n      content: response.response,\n    }));\n  }\n}\n```\n\n## Entry Point Configuration\n\n```typescript\n// src/index.ts\nimport { routeAgentRequest } from \"agents\";\nimport { MyAgent } from \"./agent\";\n\nexport default {\n  async fetch(request: Request, env: Env) {\n    // routeAgentRequest handles routing to /agents/:class/:name\n    return (\n      (await routeAgentRequest(request, env)) ||\n      new Response(\"Not found\", { status: 404 })\n    );\n  },\n};\n\nexport { MyAgent };\n```\n\nClients connect via: `wss://my-agent.workers.dev/agents/MyAgent/session-id`\n\n## Wrangler Configuration\n\n```toml\nname = \"my-agent\"\nmain = \"src/index.ts\"\ncompatibility_date = \"2024-12-01\"\n\n[ai]\nbinding = \"AI\"\n\n[durable_objects]\nbindings = [{ name = \"AGENT\", class_name = \"MyAgent\" }]\n\n[[migrations]]\ntag = \"v1\"\nnew_classes = [\"MyAgent\"]\n```\n\n## State Management\n\n### Reading State\n\n```typescript\n// Current state is always available\nconst currentMessages = this.state.messages;\nconst userPrefs = this.state.preferences;\n```\n\n### Updating State\n\n```typescript\n// setState persists AND syncs to all connected clients\nthis.setState({\n  ...this.state,\n  messages: [...this.state.messages, newMessage],\n});\n\n// Partial updates work too\nthis.setState({\n  preferences: { ...this.state.preferences, theme: \"dark\" },\n});\n```\n\n### SQL Storage\n\nFor complex queries, use the embedded SQLite database:\n\n```typescript\n// Create tables\nawait this.sql`\n  CREATE TABLE IF NOT EXISTS documents (\n    id INTEGER PRIMARY KEY AUTOINCREMENT,\n    title TEXT NOT NULL,\n    content TEXT,\n    created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n  )\n`;\n\n// Insert\nawait this.sql`\n  INSERT INTO documents (title, content)\n  VALUES (${title}, ${content})\n`;\n\n// Query\nconst docs = await this.sql`\n  SELECT * FROM documents WHERE title LIKE ${`%${search}%`}\n`;\n```\n\n## Scheduled Tasks\n\nAgents can schedule future work:\n\n```typescript\nasync onMessage(connection: Connection, message: string) {\n  const data = JSON.parse(message);\n\n  if (data.type === \"schedule_reminder\") {\n    // Schedule task for 1 hour from now\n    const { id } = await this.schedule(3600, \"sendReminder\", {\n      message: data.reminderText,\n      userId: data.userId,\n    });\n\n    connection.send(JSON.stringify({ type: \"scheduled\", taskId: id }));\n  }\n}\n\n// Called when scheduled task fires\nasync sendReminder(data: { message: string; userId: string }) {\n  // Send notification, email, etc.\n  console.log(`Reminder for ${data.userId}: ${data.message}`);\n\n  // Can also update state\n  this.setState({\n    ...this.state,\n    lastReminder: new Date().toISOString(),\n  });\n}\n```\n\n### Schedule Options\n\n```typescript\n// Delay in seconds\nawait this.schedule(60, \"taskMethod\", { data });\n\n// Specific date\nawait this.schedule(new Date(\"2025-01-01T00:00:00Z\"), \"taskMethod\", { data });\n\n// Cron expression (recurring)\nawait this.schedule(\"0 9 * * *\", \"dailyTask\", {});  // 9 AM daily\nawait this.schedule(\"*/5 * * * *\", \"everyFiveMinutes\", {});  // Every 5 min\n\n// Manage schedules\nconst schedules = await this.getSchedules();\nawait this.cancelSchedule(taskId);\n```\n\n## Chat Agent (AI-Powered)\n\nFor chat-focused agents, extend `AIChatAgent`:\n\n```typescript\nimport { AIChatAgent } from \"agents/ai-chat-agent\";\n\nexport class ChatBot extends AIChatAgent<Env> {\n  // Called for each user message\n  async onChatMessage(message: string) {\n    const response = await this.env.AI.run(\"@cf/meta/llama-3-8b-instruct\", {\n      messages: [\n        { role: \"system\", content: \"You are a helpful assistant.\" },\n        ...this.messages,  // Automatic history management\n        { role: \"user\", content: message },\n      ],\n      stream: true,\n    });\n\n    // Stream response back to client\n    return response;\n  }\n}\n```\n\nFeatures included:\n- Automatic message history\n- Resumable streaming (survives disconnects)\n- Built-in `saveMessages()` for persistence\n\n## Client Integration\n\n### React Hook\n\n```tsx\nimport { useAgent } from \"agents/react\";\n\nfunction Chat() {\n  const { state, send, connected } = useAgent({\n    agent: \"my-agent\",\n    name: userId,  // Agent instance ID\n  });\n\n  const sendMessage = (text: string) => {\n    send(JSON.stringify({ type: \"chat\", content: text }));\n  };\n\n  return (\n    <div>\n      {state.messages.map((msg, i) => (\n        <div key={i}>{msg.role}: {msg.content}</div>\n      ))}\n      <input onKeyDown={(e) => e.key === \"Enter\" && sendMessage(e.target.value)} />\n    </div>\n  );\n}\n```\n\n### Vanilla JavaScript\n\n```javascript\nconst ws = new WebSocket(\"wss://my-agent.workers.dev/agents/MyAgent/user123\");\n\nws.onopen = () => {\n  console.log(\"Connected to agent\");\n};\n\nws.onmessage = (event) => {\n  const data = JSON.parse(event.data);\n  console.log(\"Received:\", data);\n};\n\nws.send(JSON.stringify({ type: \"chat\", content: \"Hello!\" }));\n```\n\n## Common Patterns\n\nSee [references/agent-patterns.md](references/agent-patterns.md) for:\n- Tool calling and function execution\n- Multi-agent orchestration\n- RAG (Retrieval Augmented Generation)\n- Human-in-the-loop workflows\n\n## Deployment\n\n```bash\n# Deploy\nnpx wrangler deploy\n\n# View logs\nwrangler tail\n\n# Test endpoint\ncurl https://my-agent.workers.dev/agents/MyAgent/test-user\n```\n\n## Troubleshooting\n\nSee [references/troubleshooting.md](references/troubleshooting.md) for common issues.\n\n## References\n\n- [references/examples.md](references/examples.md) â€” Official templates and production examples\n- [references/agent-patterns.md](references/agent-patterns.md) â€” Advanced patterns\n- [references/state-patterns.md](references/state-patterns.md) â€” State management strategies\n- [references/troubleshooting.md](references/troubleshooting.md) â€” Error solutions\n",
        "plugins/cloudflare-skills/building-mcp-server-on-cloudflare/SKILL.md": "---\nname: building-mcp-server-on-cloudflare\ndescription: |\n  Builds remote MCP (Model Context Protocol) servers on Cloudflare Workers\n  with tools, OAuth authentication, and production deployment. Generates\n  server code, configures auth providers, and deploys to Workers.\n\n  Use when: user wants to \"build MCP server\", \"create MCP tools\", \"remote\n  MCP\", \"deploy MCP\", add \"OAuth to MCP\", or mentions Model Context Protocol\n  on Cloudflare. Also triggers on \"MCP authentication\" or \"MCP deployment\".\n---\n\n# Building MCP Servers on Cloudflare\n\nCreates production-ready Model Context Protocol servers on Cloudflare Workers with tools, authentication, and deployment.\n\n## When to Use\n\n- User wants to build a remote MCP server\n- User needs to expose tools via MCP\n- User asks about MCP authentication or OAuth\n- User wants to deploy MCP to Cloudflare Workers\n\n## Prerequisites\n\n- Cloudflare account with Workers enabled\n- Node.js 18+ and npm/pnpm/yarn\n- Wrangler CLI (`npm install -g wrangler`)\n\n## Quick Start\n\n### Option 1: Public Server (No Auth)\n\n```bash\nnpm create cloudflare@latest -- my-mcp-server \\\n  --template=cloudflare/ai/demos/remote-mcp-authless\ncd my-mcp-server\nnpm start\n```\n\nServer runs at `http://localhost:8788/mcp`\n\n### Option 2: Authenticated Server (OAuth)\n\n```bash\nnpm create cloudflare@latest -- my-mcp-server \\\n  --template=cloudflare/ai/demos/remote-mcp-github-oauth\ncd my-mcp-server\n```\n\nRequires OAuth app setup. See [references/oauth-setup.md](references/oauth-setup.md).\n\n## Core Workflow\n\n### Step 1: Define Tools\n\nTools are functions MCP clients can call. Define them using `server.tool()`:\n\n```typescript\nimport { McpAgent } from \"agents/mcp\";\nimport { z } from \"zod\";\n\nexport class MyMCP extends McpAgent {\n  server = new Server({ name: \"my-mcp\", version: \"1.0.0\" });\n\n  async init() {\n    // Simple tool with parameters\n    this.server.tool(\n      \"add\",\n      { a: z.number(), b: z.number() },\n      async ({ a, b }) => ({\n        content: [{ type: \"text\", text: String(a + b) }],\n      })\n    );\n\n    // Tool that calls external API\n    this.server.tool(\n      \"get_weather\",\n      { city: z.string() },\n      async ({ city }) => {\n        const response = await fetch(`https://api.weather.com/${city}`);\n        const data = await response.json();\n        return {\n          content: [{ type: \"text\", text: JSON.stringify(data) }],\n        };\n      }\n    );\n  }\n}\n```\n\n### Step 2: Configure Entry Point\n\n**Public server** (`src/index.ts`):\n\n```typescript\nimport { MyMCP } from \"./mcp\";\n\nexport default {\n  fetch(request: Request, env: Env, ctx: ExecutionContext) {\n    const url = new URL(request.url);\n    if (url.pathname === \"/mcp\") {\n      return MyMCP.serveSSE(\"/mcp\").fetch(request, env, ctx);\n    }\n    return new Response(\"MCP Server\", { status: 200 });\n  },\n};\n\nexport { MyMCP };\n```\n\n**Authenticated server** â€” See [references/oauth-setup.md](references/oauth-setup.md).\n\n### Step 3: Test Locally\n\n```bash\n# Start server\nnpm start\n\n# In another terminal, test with MCP Inspector\nnpx @modelcontextprotocol/inspector@latest\n# Open http://localhost:5173, enter http://localhost:8788/mcp\n```\n\n### Step 4: Deploy\n\n```bash\nnpx wrangler deploy\n```\n\nServer accessible at `https://[worker-name].[account].workers.dev/mcp`\n\n### Step 5: Connect Clients\n\n**Claude Desktop** (`claude_desktop_config.json`):\n\n```json\n{\n  \"mcpServers\": {\n    \"my-server\": {\n      \"command\": \"npx\",\n      \"args\": [\"mcp-remote\", \"https://my-mcp.workers.dev/mcp\"]\n    }\n  }\n}\n```\n\nRestart Claude Desktop after updating config.\n\n## Tool Patterns\n\n### Return Types\n\n```typescript\n// Text response\nreturn { content: [{ type: \"text\", text: \"result\" }] };\n\n// Multiple content items\nreturn {\n  content: [\n    { type: \"text\", text: \"Here's the data:\" },\n    { type: \"text\", text: JSON.stringify(data, null, 2) },\n  ],\n};\n```\n\n### Input Validation with Zod\n\n```typescript\nthis.server.tool(\n  \"create_user\",\n  {\n    email: z.string().email(),\n    name: z.string().min(1).max(100),\n    role: z.enum([\"admin\", \"user\", \"guest\"]),\n    age: z.number().int().min(0).optional(),\n  },\n  async (params) => {\n    // params are fully typed and validated\n  }\n);\n```\n\n### Accessing Environment/Bindings\n\n```typescript\nexport class MyMCP extends McpAgent<Env> {\n  async init() {\n    this.server.tool(\"query_db\", { sql: z.string() }, async ({ sql }) => {\n      // Access D1 binding\n      const result = await this.env.DB.prepare(sql).all();\n      return { content: [{ type: \"text\", text: JSON.stringify(result) }] };\n    });\n  }\n}\n```\n\n## Authentication\n\nFor OAuth-protected servers, see [references/oauth-setup.md](references/oauth-setup.md).\n\nSupported providers:\n- GitHub\n- Google\n- Auth0\n- Stytch\n- WorkOS\n- Any OAuth 2.0 compliant provider\n\n## Wrangler Configuration\n\nMinimal `wrangler.toml`:\n\n```toml\nname = \"my-mcp-server\"\nmain = \"src/index.ts\"\ncompatibility_date = \"2024-12-01\"\n\n[durable_objects]\nbindings = [{ name = \"MCP\", class_name = \"MyMCP\" }]\n\n[[migrations]]\ntag = \"v1\"\nnew_classes = [\"MyMCP\"]\n```\n\nWith bindings (D1, KV, etc.):\n\n```toml\n[[d1_databases]]\nbinding = \"DB\"\ndatabase_name = \"my-db\"\ndatabase_id = \"xxx\"\n\n[[kv_namespaces]]\nbinding = \"KV\"\nid = \"xxx\"\n```\n\n## Common Issues\n\n### \"Tool not found\" in Client\n\n1. Verify tool name matches exactly (case-sensitive)\n2. Ensure `init()` registers tools before connections\n3. Check server logs: `wrangler tail`\n\n### Connection Fails\n\n1. Confirm endpoint path is `/mcp`\n2. Check CORS if browser-based client\n3. Verify Worker is deployed: `wrangler deployments list`\n\n### OAuth Redirect Errors\n\n1. Callback URL must match OAuth app config exactly\n2. Check `GITHUB_CLIENT_ID` and `GITHUB_CLIENT_SECRET` are set\n3. For local dev, use `http://localhost:8788/callback`\n\n## References\n\n- [references/examples.md](references/examples.md) â€” Official templates and production examples\n- [references/oauth-setup.md](references/oauth-setup.md) â€” OAuth provider configuration\n- [references/tool-patterns.md](references/tool-patterns.md) â€” Advanced tool examples\n- [references/troubleshooting.md](references/troubleshooting.md) â€” Error codes and fixes\n",
        "plugins/cloudflare-skills/commands/build-agent.md": "---\ndescription: Build an AI agent on Cloudflare using the Agents SDK\nargument-hint: [agent-description]\nallowed-tools: [Read, Glob, Grep, Bash, Write, Edit, WebFetch]\n---\n\n# Build AI Agent on Cloudflare\n\nThis command helps you build AI agents using the Cloudflare Agents SDK with state management, real-time WebSockets, scheduled tasks, and tool integration.\n\n## Arguments\n\nThe user invoked this command with: $ARGUMENTS\n\n## Instructions\n\nWhen this command is invoked:\n\n1. Read the skill file at `building-ai-agent-on-cloudflare/SKILL.md` for core guidance\n2. Reference `building-ai-agent-on-cloudflare/references/examples.md` for templates\n3. Use `building-ai-agent-on-cloudflare/references/agent-patterns.md` for tool calling and patterns\n4. Use `building-ai-agent-on-cloudflare/references/state-patterns.md` for state management\n5. Consult `building-ai-agent-on-cloudflare/references/troubleshooting.md` for common issues\n\n## Capabilities\n\n- Stateful AI agents with persistent memory\n- Real-time WebSocket communication\n- Scheduled tasks and cron jobs\n- Tool integration and function calling\n- Multi-agent orchestration\n- RAG (Retrieval Augmented Generation) patterns\n\n## Example Usage\n\n```\n/build-agent a customer support chatbot\n/build-agent real-time coding assistant with WebSocket\n/build-agent multi-agent workflow orchestrator\n```\n",
        "plugins/cloudflare-skills/commands/build-mcp.md": "---\ndescription: Build a remote MCP server on Cloudflare with tools and OAuth\nargument-hint: [mcp-description]\nallowed-tools: [Read, Glob, Grep, Bash, Write, Edit, WebFetch]\n---\n\n# Build MCP Server on Cloudflare\n\nThis command helps you build remote Model Context Protocol (MCP) servers on Cloudflare with tools, OAuth authentication, and production deployment.\n\n## Arguments\n\nThe user invoked this command with: $ARGUMENTS\n\n## Instructions\n\nWhen this command is invoked:\n\n1. Read the skill file at `building-mcp-server-on-cloudflare/SKILL.md` for core guidance\n2. Reference `building-mcp-server-on-cloudflare/references/examples.md` for official templates\n3. Use `building-mcp-server-on-cloudflare/references/oauth-setup.md` for security and OAuth\n4. Consult `building-mcp-server-on-cloudflare/references/troubleshooting.md` for common issues\n\n## Capabilities\n\n- Remote MCP server deployment on Cloudflare Workers\n- OAuth 2.0 authentication setup\n- Tool definition and implementation\n- Production-ready deployment patterns\n- Integration with Claude and other MCP clients\n\n## Example Usage\n\n```\n/build-mcp a GitHub integration server\n/build-mcp database query tool with OAuth\n/build-mcp file management MCP server\n```\n",
        "plugins/developer/.claude-plugin/plugin.json": "{\n  \"name\": \"developer\",\n  \"description\": \"Complete development suite: 3 expert agents (fullstack developer, validation gates, documentation manager) + 3 commands (containerize, PRP generation/execution) + 5 skills (git commit helper, webapp testing, devtools, PRP generator, Fifteen-Factor App) + 7 MCP integrations\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"2.1.0\"\n}\n",
        "plugins/developer/README.md": "# Developer Toolkit\n\nComplete development toolkit with expert agents, commands, testing skills, and powerful MCP integrations.\n\n## What's Included\n\n### Agents (3)\n\n- **fullstack-developer** - Expert in frontend (React, TypeScript, Vue) and backend (Node.js, FastAPI, databases)\n- **validation-gates** - Testing and quality assurance specialist (unit tests, integration tests, coverage)\n- **documentation-manager** - Technical documentation specialist for README files, API docs, and architecture decisions\n\n### Commands (3)\n\n- **/containerize** - Create production-ready Docker configurations\n- **/generate-prp** - Generate Progressive Refinement Plans for complex features\n- **/execute-prp** - Execute previously generated PRPs\n\n### Skills (5)\n\n- **git-commit-helper** - Generate descriptive commit messages from git diffs\n- **webapp-testing** - Web application testing toolkit with Playwright\n- **devtools** - Chrome DevTools MCP setup guide for browser debugging and automation\n- **prp-generator** - Generate comprehensive Product Requirement Plans with research methodology\n- **fifteen-factor-app** - SaaS architecture principles (extends the Twelve-Factor App methodology)\n\n### MCP Servers (7)\n\n- **chrome-devtools** - Chrome DevTools Protocol integration\n- **cloudflare-docs** - Cloudflare documentation access\n- **context7** - Context-aware code understanding\n- **firecrawl** - Advanced web scraping and crawling\n- **microsoft-docs** - Microsoft documentation access\n- **playwright** - Browser automation and testing\n- **serena** - AI planning and task management assistant\n\n## Installation\n\n```bash\n/plugin install developer@wookstar\n```\n\n## Required Environment Variables\n\nCreate a `.env` file in your project root:\n\n```bash\n# Context7 (optional)\nCONTEXT7_API_KEY=your_key_here\n\n# Firecrawl (optional)\nFIRECRAWL_API_KEY=your_key_here\n```\n\n## Usage Examples\n\n```bash\n# Fullstack agent helps with development\n\"Build a REST API with authentication\"\n\n# Documentation manager keeps docs in sync\n\"Update the documentation after these code changes\"\n\n# Validation agent runs tests\n\"Run all tests and check coverage\"\n\n# Generate a Progressive Refinement Plan\n/generate-prp \"Build user authentication module\"\n\n# Execute the generated plan\n/execute-prp\n\n# Container-ize your application\n/containerize\n\n# Git commit helper\n\"Generate a commit message for my changes\"\n\n# Playwright testing\n\"Test the checkout flow in our web app\"\n\n# Use Chrome DevTools\n\"Debug this JavaScript performance issue\"\n\n# Access documentation\n\"Show me Cloudflare Workers examples\"\n\n# Architecture guidance\n\"Help me design this service following fifteen-factor principles\"\n```\n\n## Skill Details\n\n### fifteen-factor-app\n\nExtends the original Twelve-Factor App methodology with three additional factors for modern cloud-native applications:\n\n- **API First** - Design APIs before implementation\n- **Telemetry** - Built-in observability and monitoring\n- **Security** - Security as a first-class concern\n\nUse when planning SaaS architecture, creating PRPs/PRDs, or evaluating application designs.\n\n### prp-generator\n\nGenerates comprehensive Product Requirement Plans with:\n\n- Research methodology documentation\n- Structured requirement templates\n- Implementation guidance\n- Risk assessment frameworks\n\n## When to Use\n\nThis toolkit is ideal for:\n\n- Full-stack web application development\n- Testing and quality assurance\n- Browser automation and testing\n- Git workflow optimisation\n- Accessing technical documentation\n- Web scraping and data extraction\n- Generating comprehensive project plans\n- Maintaining documentation alongside code changes\n- SaaS architecture design and review\n- Container-ising applications for deployment\n",
        "plugins/developer/agents/documentation-manager.md": "---\nname: documentation-manager\ndescription: \"Expert documentation specialist. Proactively updates documentation when code changes are made, ensures README accuracy, and maintains comprehensive technical documentation. Be sure to give this subagent information on the files that were changed so it knows where to look to document changes. Always call this agent after there are code changes.\"\ntools: Read, Write, Edit, MultiEdit, Grep, Glob, ls\n---\n\nYou are a documentation management specialist focused on maintaining high-quality, accurate, and comprehensive documentation for software projects. Your primary responsibility is ensuring that all documentation stays synchronized with code changes and remains helpful for developers.\n\n## Core Responsibilities\n\n### 1. Documentation Synchronization\n- When code changes are made, proactively check if related documentation needs updates\n- Ensure README.md accurately reflects current project state, dependencies, and setup instructions\n- Update API documentation when endpoints or interfaces change\n- Maintain consistency between code comments and external documentation\n\n### 2. Documentation Structure\n- Organize documentation following best practices:\n  - README.md for project overview and quick start\n  - docs/ folder for detailed documentation\n  - API.md for endpoint documentation\n  - ARCHITECTURE.md for system design\n  - CONTRIBUTING.md for contribution guidelines\n- Ensure clear navigation between documentation files\n\n### 3. Documentation Quality Standards\n- Write clear, concise explanations that a mid-level developer can understand\n- Include code examples for complex concepts\n- Add diagrams or ASCII art where visual representation helps\n- Ensure all commands and code snippets are tested and accurate\n- Use consistent formatting and markdown conventions\n\n### 4. Proactive Documentation Tasks\nWhen you notice:\n- New features added â†’ Update feature documentation\n- Dependencies changed â†’ Update installation/setup docs\n- API changes â†’ Update API documentation and examples\n- Configuration changes â†’ Update configuration guides\n- Breaking changes â†’ Add migration guides\n\n### 5. Documentation Validation\n- Check that all links in documentation are valid\n- Verify that code examples compile/run correctly\n- Ensure setup instructions work on fresh installations\n- Validate that documented commands produce expected results\n\n## Working Process\n\n1. **Analyze Changes**: When code modifications occur, analyze what was changed\n2. **Identify Impact**: Determine which documentation might be affected\n3. **Update Systematically**: Update all affected documentation files\n4. **Validate Changes**: Ensure documentation remains accurate and helpful\n5. **Cross-Reference**: Make sure all related docs are consistent\n\n## Key Principles\n\n- Documentation is as important as code\n- Out-of-date documentation is worse than no documentation\n- Examples are worth a thousand words\n- Always consider the reader's perspective\n- Test everything you document\n\n## Output Standards\n\nWhen updating documentation:\n- Use clear headings and subheadings\n- Include table of contents for long documents\n- Add timestamps or version numbers when relevant\n- Provide both simple and advanced examples\n- Link to related documentation sections\n\nRemember: Good documentation reduces support burden, accelerates onboarding, and makes projects more maintainable. Always strive for clarity, accuracy, and completeness.",
        "plugins/developer/agents/fullstack-developer.md": "---\nname: fullstack-developer\ndescription: Full-stack development specialist covering frontend, backend, and database technologies. Use PROACTIVELY for end-to-end application development, API integration, database design, and complete feature implementation.\ntools: Read, Write, Edit, Bash\nmodel: opus\nskills: webapp-testing, git-commit-helper\n---\n\nYou are a full-stack developer with expertise across the entire application stack, from user interfaces to databases and deployment.\n\n## Core Technology Stack\n\n### Frontend Technologies\n\n- **React/Next.js**: Modern component-based UI development with SSR/SSG\n- **TypeScript**: Type-safe JavaScript development and API contracts\n- **State Management**: Redux Toolkit, Zustand, React Query for server state\n- **Styling**: Tailwind CSS, Styled Components, CSS Modules\n- **Testing**: Jest, React Testing Library, Playwright for E2E\n\n### Backend Technologies\n\n- **Node.js/Express**: RESTful APIs and middleware architecture\n- **Python/FastAPI**: High-performance APIs with automatic documentation\n- **Database Integration**: PostgreSQL, MongoDB, Redis for caching\n- **Authentication**: JWT, OAuth 2.0, Auth0, NextAuth.js\n- **API Design**: OpenAPI/Swagger, GraphQL, tRPC for type safety\n\n### Development Tools\n\n- **Version Control**: Git workflows, branching strategies, code review\n- **Build Tools**: Vite, Webpack, esbuild for optimization\n- **Package Management**: npm, yarn, pnpm dependency management\n- **Code Quality**: ESLint, Prettier, Husky pre-commit hooks\n\n## Technical Implementation\n\n### 1. Complete Full-Stack Application Architecture\n\n``typescript\n// types/api.ts - Shared type definitions\nexport interface User {\n  id: string;\n  email: string;\n  name: string;\n  role: 'admin' | 'user';\n  createdAt: string;\n  updatedAt: string;\n}\n\nexport interface CreateUserRequest {\n  email: string;\n  name: string;\n  password: string;\n}\n\nexport interface LoginRequest {\n  email: string;\n  password: string;\n}\n\nexport interface AuthResponse {\n  user: User;\n  token: string;\n  refreshToken: string;\n}\n\nexport interface ApiResponse<T> {\n  success: boolean;\n  data?: T;\n  error?: string;\n  message?: string;\n}\n\nexport interface PaginatedResponse<T> {\n  data: T[];\n  pagination: {\n    page: number;\n    limit: number;\n    total: number;\n    totalPages: number;\n  };\n}\n\n// Database Models\nexport interface CreatePostRequest {\n  title: string;\n  content: string;\n  tags: string[];\n  published: boolean;\n}\n\nexport interface Post {\n  id: string;\n  title: string;\n  content: string;\n  slug: string;\n  tags: string[];\n  published: boolean;\n  authorId: string;\n  author: User;\n  createdAt: string;\n  updatedAt: string;\n  viewCount: number;\n  likeCount: number;\n}\n`\n\n### 2. Backend API Implementation with Express.js\n\n`typescript\n// server/app.ts - Express application setup\nimport express from 'express';\nimport cors from 'cors';\nimport helmet from 'helmet';\nimport rateLimit from 'express-rate-limit';\nimport compression from 'compression';\nimport { authRouter } from './routes/auth';\nimport { userRouter } from './routes/users';\nimport { postRouter } from './routes/posts';\nimport { errorHandler } from './middleware/errorHandler';\nimport { authMiddleware } from './middleware/auth';\nimport { logger } from './utils/logger';\n\nconst app = express();\n\n// Security middleware\napp.use(helmet());\napp.use(cors({\n  origin: process.env.FRONTEND_URL,\n  credentials: true\n}));\n\n// Rate limiting\nconst limiter = rateLimit({\n  windowMs: 15 *60* 1000, // 15 minutes\n  max: 100, // limit each IP to 100 requests per windowMs\n  message: 'Too many requests from this IP'\n});\napp.use('/api/', limiter);\n\n// Parsing middleware\napp.use(express.json({ limit: '10mb' }));\napp.use(express.urlencoded({ extended: true }));\napp.use(compression());\n\n// Logging middleware\napp.use((req, res, next) => {\n  logger.info(${req.method} ${req.path}, {\n    ip: req.ip,\n    userAgent: req.get('User-Agent')\n  });\n  next();\n});\n\n// Health check endpoint\napp.get('/health', (req, res) => {\n  res.json({\n    status: 'healthy',\n    timestamp: new Date().toISOString(),\n    uptime: process.uptime()\n  });\n});\n\n// API routes\napp.use('/api/auth', authRouter);\napp.use('/api/users', authMiddleware, userRouter);\napp.use('/api/posts', postRouter);\n\n// Error handling middleware\napp.use(errorHandler);\n\n// 404 handler\napp.use('*', (req, res) => {\n  res.status(404).json({\n    success: false,\n    error: 'Route not found'\n  });\n});\n\nexport { app };\n\n// server/routes/auth.ts - Authentication routes\nimport { Router } from 'express';\nimport bcrypt from 'bcryptjs';\nimport jwt from 'jsonwebtoken';\nimport { z } from 'zod';\nimport { User } from '../models/User';\nimport { validateRequest } from '../middleware/validation';\nimport { logger } from '../utils/logger';\nimport type { LoginRequest, CreateUserRequest, AuthResponse } from '../../types/api';\n\nconst router = Router();\n\nconst loginSchema = z.object({\n  email: z.string().email(),\n  password: z.string().min(6)\n});\n\nconst registerSchema = z.object({\n  email: z.string().email(),\n  name: z.string().min(2).max(50),\n  password: z.string().min(8).regex(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)/)\n});\n\nrouter.post('/register', validateRequest(registerSchema), async (req, res, next) => {\n  try {\n    const { email, name, password }: CreateUserRequest = req.body;\n\n    // Check if user already exists\n    const existingUser = await User.findOne({ email });\n    if (existingUser) {\n      return res.status(400).json({\n        success: false,\n        error: 'User already exists with this email'\n      });\n    }\n\n    // Hash password\n    const saltRounds = 12;\n    const hashedPassword = await bcrypt.hash(password, saltRounds);\n\n    // Create user\n    const user = new User({\n      email,\n      name,\n      password: hashedPassword,\n      role: 'user'\n    });\n\n    await user.save();\n\n    // Generate tokens\n    const token = jwt.sign(\n      { userId: user._id, email: user.email, role: user.role },\n      process.env.JWT_SECRET!,\n      { expiresIn: '1h' }\n    );\n\n    const refreshToken = jwt.sign(\n      { userId: user._id },\n      process.env.JWT_REFRESH_SECRET!,\n      { expiresIn: '7d' }\n    );\n\n    logger.info('User registered successfully', { userId: user._id, email });\n\n    const response: AuthResponse = {\n      user: {\n        id: user._id.toString(),\n        email: user.email,\n        name: user.name,\n        role: user.role,\n        createdAt: user.createdAt.toISOString(),\n        updatedAt: user.updatedAt.toISOString()\n      },\n      token,\n      refreshToken\n    };\n\n    res.status(201).json({\n      success: true,\n      data: response,\n      message: 'User registered successfully'\n    });\n  } catch (error) {\n    next(error);\n  }\n});\n\nrouter.post('/login', validateRequest(loginSchema), async (req, res, next) => {\n  try {\n    const { email, password }: LoginRequest = req.body;\n\n    // Find user\n    const user = await User.findOne({ email });\n    if (!user) {\n      return res.status(401).json({\n        success: false,\n        error: 'Invalid credentials'\n      });\n    }\n\n    // Verify password\n    const isValidPassword = await bcrypt.compare(password, user.password);\n    if (!isValidPassword) {\n      return res.status(401).json({\n        success: false,\n        error: 'Invalid credentials'\n      });\n    }\n\n    // Generate tokens\n    const token = jwt.sign(\n      { userId: user._id, email: user.email, role: user.role },\n      process.env.JWT_SECRET!,\n      { expiresIn: '1h' }\n    );\n\n    const refreshToken = jwt.sign(\n      { userId: user._id },\n      process.env.JWT_REFRESH_SECRET!,\n      { expiresIn: '7d' }\n    );\n\n    logger.info('User logged in successfully', { userId: user._id, email });\n\n    const response: AuthResponse = {\n      user: {\n        id: user._id.toString(),\n        email: user.email,\n        name: user.name,\n        role: user.role,\n        createdAt: user.createdAt.toISOString(),\n        updatedAt: user.updatedAt.toISOString()\n      },\n      token,\n      refreshToken\n    };\n\n    res.json({\n      success: true,\n      data: response,\n      message: 'Login successful'\n    });\n  } catch (error) {\n    next(error);\n  }\n});\n\nrouter.post('/refresh', async (req, res, next) => {\n  try {\n    const { refreshToken } = req.body;\n\n    if (!refreshToken) {\n      return res.status(401).json({\n        success: false,\n        error: 'Refresh token required'\n      });\n    }\n\n    const decoded = jwt.verify(refreshToken, process.env.JWT_REFRESH_SECRET!) as { userId: string };\n    const user = await User.findById(decoded.userId);\n\n    if (!user) {\n      return res.status(401).json({\n        success: false,\n        error: 'Invalid refresh token'\n      });\n    }\n\n    const newToken = jwt.sign(\n      { userId: user._id, email: user.email, role: user.role },\n      process.env.JWT_SECRET!,\n      { expiresIn: '1h' }\n    );\n\n    res.json({\n      success: true,\n      data: { token: newToken },\n      message: 'Token refreshed successfully'\n    });\n  } catch (error) {\n    next(error);\n  }\n});\n\nexport { router as authRouter };\n`\n\n### 3. Database Models with Mongoose\n\n`typescript\n// server/models/User.ts\nimport mongoose, { Document, Schema } from 'mongoose';\n\nexport interface IUser extends Document {\n  email: string;\n  name: string;\n  password: string;\n  role: 'admin' | 'user';\n  emailVerified: boolean;\n  lastLogin: Date;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nconst userSchema = new Schema<IUser>({\n  email: {\n    type: String,\n    required: true,\n    unique: true,\n    lowercase: true,\n    trim: true,\n    index: true\n  },\n  name: {\n    type: String,\n    required: true,\n    trim: true,\n    maxlength: 50\n  },\n  password: {\n    type: String,\n    required: true,\n    minlength: 8\n  },\n  role: {\n    type: String,\n    enum: ['admin', 'user'],\n    default: 'user'\n  },\n  emailVerified: {\n    type: Boolean,\n    default: false\n  },\n  lastLogin: {\n    type: Date,\n    default: Date.now\n  }\n}, {\n  timestamps: true,\n  toJSON: {\n    transform: function(doc, ret) {\n      delete ret.password;\n      return ret;\n    }\n  }\n});\n\n// Indexes for performance\nuserSchema.index({ email: 1 });\nuserSchema.index({ role: 1 });\nuserSchema.index({ createdAt: -1 });\n\nexport const User = mongoose.model<IUser>('User', userSchema);\n\n// server/models/Post.ts\nimport mongoose, { Document, Schema } from 'mongoose';\n\nexport interface IPost extends Document {\n  title: string;\n  content: string;\n  slug: string;\n  tags: string[];\n  published: boolean;\n  authorId: mongoose.Types.ObjectId;\n  viewCount: number;\n  likeCount: number;\n  createdAt: Date;\n  updatedAt: Date;\n}\n\nconst postSchema = new Schema<IPost>({\n  title: {\n    type: String,\n    required: true,\n    trim: true,\n    maxlength: 200\n  },\n  content: {\n    type: String,\n    required: true\n  },\n  slug: {\n    type: String,\n    required: true,\n    unique: true,\n    lowercase: true,\n    index: true\n  },\n  tags: [{\n    type: String,\n    trim: true,\n    lowercase: true\n  }],\n  published: {\n    type: Boolean,\n    default: false\n  },\n  authorId: {\n    type: Schema.Types.ObjectId,\n    ref: 'User',\n    required: true,\n    index: true\n  },\n  viewCount: {\n    type: Number,\n    default: 0\n  },\n  likeCount: {\n    type: Number,\n    default: 0\n  }\n}, {\n  timestamps: true\n});\n\n// Compound indexes for complex queries\npostSchema.index({ published: 1, createdAt: -1 });\npostSchema.index({ authorId: 1, published: 1 });\npostSchema.index({ tags: 1, published: 1 });\npostSchema.index({ title: 'text', content: 'text' });\n\n// Virtual populate for author\npostSchema.virtual('author', {\n  ref: 'User',\n  localField: 'authorId',\n  foreignField: '_id',\n  justOne: true\n});\n\nexport const Post = mongoose.model<IPost>('Post', postSchema);\n`\n\n### 4. Frontend React Application\n\n`tsx\n// frontend/src/App.tsx - Main application component\nimport React from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools';\nimport { Toaster } from 'react-hot-toast';\nimport { AuthProvider } from './contexts/AuthContext';\nimport { ProtectedRoute } from './components/ProtectedRoute';\nimport { Layout } from './components/Layout';\nimport { HomePage } from './pages/HomePage';\nimport { LoginPage } from './pages/LoginPage';\nimport { RegisterPage } from './pages/RegisterPage';\nimport { DashboardPage } from './pages/DashboardPage';\nimport { PostsPage } from './pages/PostsPage';\nimport { CreatePostPage } from './pages/CreatePostPage';\nimport { ProfilePage } from './pages/ProfilePage';\nimport { ErrorBoundary } from './components/ErrorBoundary';\n\nconst queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      retry: (failureCount, error: any) => {\n        if (error?.status === 401) return false;\n        return failureCount < 3;\n      },\n      staleTime: 5 *60* 1000, // 5 minutes\n      cacheTime: 10 *60* 1000, // 10 minutes\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n\nfunction App() {\n  return (\n    <ErrorBoundary>\n      <QueryClientProvider client={queryClient}>\n        <AuthProvider>\n          <Router>\n            <div className=\"min-h-screen bg-gray-50\">\n              <Layout>\n                <Routes>\n                  <Route path=\"/\" element={<HomePage />} />\n                  <Route path=\"/login\" element={<LoginPage />} />\n                  <Route path=\"/register\" element={<RegisterPage />} />\n                  <Route path=\"/posts\" element={<PostsPage />} />\n\n                  {/* Protected routes */}\n                  <Route path=\"/dashboard\" element={\n                    <ProtectedRoute>\n                      <DashboardPage />\n                    </ProtectedRoute>\n                  } />\n                  <Route path=\"/posts/create\" element={\n                    <ProtectedRoute>\n                      <CreatePostPage />\n                    </ProtectedRoute>\n                  } />\n                  <Route path=\"/profile\" element={\n                    <ProtectedRoute>\n                      <ProfilePage />\n                    </ProtectedRoute>\n                  } />\n                </Routes>\n              </Layout>\n            </div>\n          </Router>\n        </AuthProvider>\n        <Toaster position=\"top-right\" />\n        <ReactQueryDevtools initialIsOpen={false} />\n      </QueryClientProvider>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;\n\n// frontend/src/contexts/AuthContext.tsx - Authentication context\nimport React, { createContext, useContext, useReducer, useEffect } from 'react';\nimport { User, AuthResponse } from '../types/api';\nimport { authAPI } from '../services/api';\n\ninterface AuthState {\n  user: User | null;\n  token: string | null;\n  isLoading: boolean;\n  isAuthenticated: boolean;\n}\n\ntype AuthAction =\n  | { type: 'LOGIN_START' }\n  | { type: 'LOGIN_SUCCESS'; payload: AuthResponse }\n  | { type: 'LOGIN_FAILURE' }\n  | { type: 'LOGOUT' }\n  | { type: 'SET_LOADING'; payload: boolean };\n\nconst initialState: AuthState = {\n  user: null,\n  token: localStorage.getItem('auth_token'),\n  isLoading: true,\n  isAuthenticated: false,\n};\n\nfunction authReducer(state: AuthState, action: AuthAction): AuthState {\n  switch (action.type) {\n    case 'LOGIN_START':\n      return { ...state, isLoading: true };\n\n    case 'LOGIN_SUCCESS':\n      localStorage.setItem('auth_token', action.payload.token);\n      localStorage.setItem('refresh_token', action.payload.refreshToken);\n      return {\n        ...state,\n        user: action.payload.user,\n        token: action.payload.token,\n        isLoading: false,\n        isAuthenticated: true,\n      };\n    \n    case 'LOGIN_FAILURE':\n      localStorage.removeItem('auth_token');\n      localStorage.removeItem('refresh_token');\n      return {\n        ...state,\n        user: null,\n        token: null,\n        isLoading: false,\n        isAuthenticated: false,\n      };\n    \n    case 'LOGOUT':\n      localStorage.removeItem('auth_token');\n      localStorage.removeItem('refresh_token');\n      return {\n        ...state,\n        user: null,\n        token: null,\n        isAuthenticated: false,\n      };\n    \n    case 'SET_LOADING':\n      return { ...state, isLoading: action.payload };\n    \n    default:\n      return state;\n  }\n}\n\ninterface AuthContextType extends AuthState {\n  login: (email: string, password: string) => Promise<void>;\n  register: (email: string, name: string, password: string) => Promise<void>;\n  logout: () => void;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n  const [state, dispatch] = useReducer(authReducer, initialState);\n\n  useEffect(() => {\n    const token = localStorage.getItem('auth_token');\n    if (token) {\n      // Verify token with backend\n      authAPI.verifyToken(token)\n        .then((user) => {\n          dispatch({\n            type: 'LOGIN_SUCCESS',\n            payload: {\n              user,\n              token,\n              refreshToken: localStorage.getItem('refresh_token') || '',\n            },\n          });\n        })\n        .catch(() => {\n          dispatch({ type: 'LOGIN_FAILURE' });\n        });\n    } else {\n      dispatch({ type: 'SET_LOADING', payload: false });\n    }\n  }, []);\n\n  const login = async (email: string, password: string) => {\n    dispatch({ type: 'LOGIN_START' });\n    try {\n      const response = await authAPI.login({ email, password });\n      dispatch({ type: 'LOGIN_SUCCESS', payload: response });\n    } catch (error) {\n      dispatch({ type: 'LOGIN_FAILURE' });\n      throw error;\n    }\n  };\n\n  const register = async (email: string, name: string, password: string) => {\n    dispatch({ type: 'LOGIN_START' });\n    try {\n      const response = await authAPI.register({ email, name, password });\n      dispatch({ type: 'LOGIN_SUCCESS', payload: response });\n    } catch (error) {\n      dispatch({ type: 'LOGIN_FAILURE' });\n      throw error;\n    }\n  };\n\n  const logout = () => {\n    dispatch({ type: 'LOGOUT' });\n  };\n\n  return (\n    <AuthContext.Provider\n      value={{\n        ...state,\n        login,\n        register,\n        logout,\n      }}\n    >\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n`\n\n### 5. API Integration and State Management\n\n`typescript\n// frontend/src/services/api.ts - API client\nimport axios, { AxiosError } from 'axios';\nimport toast from 'react-hot-toast';\nimport {\n  User,\n  Post,\n  AuthResponse,\n  LoginRequest,\n  CreateUserRequest,\n  CreatePostRequest,\n  PaginatedResponse,\n  ApiResponse\n} from '../types/api';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || '<http://localhost:3001/api>';\n\n// Create axios instance\nconst api = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 10000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor to add auth token\napi.interceptors.request.use(\n  (config) => {\n    const token = localStorage.getItem('auth_token');\n    if (token) {\n      config.headers.Authorization = Bearer ${token};\n    }\n    return config;\n  },\n  (error) => Promise.reject(error)\n);\n\n// Response interceptor for token refresh and error handling\napi.interceptors.response.use(\n  (response) => response,\n  async (error: AxiosError) => {\n    const originalRequest = error.config as any;\n\n    if (error.response?.status === 401 && !originalRequest._retry) {\n      originalRequest._retry = true;\n\n      try {\n        const refreshToken = localStorage.getItem('refresh_token');\n        if (refreshToken) {\n          const response = await axios.post(${API_BASE_URL}/auth/refresh, {\n            refreshToken,\n          });\n\n          const newToken = response.data.data.token;\n          localStorage.setItem('auth_token', newToken);\n          \n          // Retry original request with new token\n          originalRequest.headers.Authorization = Bearer ${newToken};\n          return api(originalRequest);\n        }\n      } catch (refreshError) {\n        // Refresh failed, redirect to login\n        localStorage.removeItem('auth_token');\n        localStorage.removeItem('refresh_token');\n        window.location.href = '/login';\n        return Promise.reject(refreshError);\n      }\n    }\n\n    // Handle other errors\n    if (error.response?.data?.error) {\n      toast.error(error.response.data.error);\n    } else {\n      toast.error('An unexpected error occurred');\n    }\n\n    return Promise.reject(error);\n  }\n);\n\n// Authentication API\nexport const authAPI = {\n  login: async (credentials: LoginRequest): Promise<AuthResponse> => {\n    const response = await api.post<ApiResponse<AuthResponse>>('/auth/login', credentials);\n    return response.data.data!;\n  },\n\n  register: async (userData: CreateUserRequest): Promise<AuthResponse> => {\n    const response = await api.post<ApiResponse<AuthResponse>>('/auth/register', userData);\n    return response.data.data!;\n  },\n\n  verifyToken: async (token: string): Promise<User> => {\n    const response = await api.get<ApiResponse<User>>('/auth/verify', {\n      headers: { Authorization: Bearer ${token} },\n    });\n    return response.data.data!;\n  },\n};\n\n// Posts API\nexport const postsAPI = {\n  getPosts: async (page = 1, limit = 10): Promise<PaginatedResponse<Post>> => {\n    const response = await api.get<ApiResponse<PaginatedResponse<Post>>>(\n      /posts?page=${page}&limit=${limit}\n    );\n    return response.data.data!;\n  },\n\n  getPost: async (id: string): Promise<Post> => {\n    const response = await api.get<ApiResponse<Post>>(/posts/${id});\n    return response.data.data!;\n  },\n\n  createPost: async (postData: CreatePostRequest): Promise<Post> => {\n    const response = await api.post<ApiResponse<Post>>('/posts', postData);\n    return response.data.data!;\n  },\n\n  updatePost: async (id: string, postData: Partial<CreatePostRequest>): Promise<Post> => {\n    const response = await api.put<ApiResponse<Post>>(/posts/${id}, postData);\n    return response.data.data!;\n  },\n\n  deletePost: async (id: string): Promise<void> => {\n    await api.delete(/posts/${id});\n  },\n\n  likePost: async (id: string): Promise<Post> => {\n    const response = await api.post<ApiResponse<Post>>(/posts/${id}/like);\n    return response.data.data!;\n  },\n};\n\n// Users API\nexport const usersAPI = {\n  getProfile: async (): Promise<User> => {\n    const response = await api.get<ApiResponse<User>>('/users/profile');\n    return response.data.data!;\n  },\n\n  updateProfile: async (userData: Partial<User>): Promise<User> => {\n    const response = await api.put<ApiResponse<User>>('/users/profile', userData);\n    return response.data.data!;\n  },\n};\n\nexport default api;\n`\n\n### 6. Reusable UI Components\n\n`tsx\n// frontend/src/components/PostCard.tsx - Reusable post component\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport { useMutation, useQueryClient } from '@tanstack/react-query';\nimport { Heart, Eye, Calendar, User } from 'lucide-react';\nimport { Post } from '../types/api';\nimport { postsAPI } from '../services/api';\nimport { useAuth } from '../contexts/AuthContext';\nimport { formatDate } from '../utils/dateUtils';\nimport toast from 'react-hot-toast';\n\ninterface PostCardProps {\n  post: Post;\n  showActions?: boolean;\n  className?: string;\n}\n\nexport function PostCard({ post, showActions = true, className = '' }: PostCardProps) {\n  const { user } = useAuth();\n  const queryClient = useQueryClient();\n\n  const likeMutation = useMutation({\n    mutationFn: postsAPI.likePost,\n    onSuccess: (updatedPost) => {\n      // Update the post in the cache\n      queryClient.setQueryData(['posts'], (oldData: any) => {\n        if (!oldData) return oldData;\n        return {\n          ...oldData,\n          data: oldData.data.map((p: Post) =>\n            p.id === updatedPost.id ? updatedPost : p\n          ),\n        };\n      });\n      toast.success('Post liked!');\n    },\n    onError: () => {\n      toast.error('Failed to like post');\n    },\n  });\n\n  const handleLike = () => {\n    if (!user) {\n      toast.error('Please login to like posts');\n      return;\n    }\n    likeMutation.mutate(post.id);\n  };\n\n  return (\n    <article className={bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow ${className}}>\n      <div className=\"p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center space-x-2 text-sm text-gray-600\">\n            <User className=\"w-4 h-4\" />\n            <span>{post.author.name}</span>\n            <Calendar className=\"w-4 h-4 ml-4\" />\n            <span>{formatDate(post.createdAt)}</span>\n          </div>\n          {!post.published && (\n            <span className=\"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full\">\n              Draft\n            </span>\n          )}\n        </div>\n\n        <h3 className=\"text-xl font-semibold text-gray-900 mb-3\">\n          <Link \n            to={/posts/${post.id}}\n            className=\"hover:text-blue-600 transition-colors\"\n          >\n            {post.title}\n          </Link>\n        </h3>\n\n        <p className=\"text-gray-600 mb-4 line-clamp-3\">\n          {post.content.substring(0, 200)}...\n        </p>\n\n        <div className=\"flex flex-wrap gap-2 mb-4\">\n          {post.tags.map((tag) => (\n            <span\n              key={tag}\n              className=\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full\"\n            >\n              #{tag}\n            </span>\n          ))}\n        </div>\n\n        {showActions && (\n          <div className=\"flex items-center justify-between pt-4 border-t border-gray-200\">\n            <div className=\"flex items-center space-x-4 text-sm text-gray-600\">\n              <div className=\"flex items-center space-x-1\">\n                <Eye className=\"w-4 h-4\" />\n                <span>{post.viewCount}</span>\n              </div>\n              <div className=\"flex items-center space-x-1\">\n                <Heart className=\"w-4 h-4\" />\n                <span>{post.likeCount}</span>\n              </div>\n            </div>\n\n            <button\n              onClick={handleLike}\n              disabled={likeMutation.isLoading}\n              className=\"flex items-center space-x-2 px-3 py-1 text-sm text-blue-600 hover:bg-blue-50 rounded-md transition-colors disabled:opacity-50\"\n            >\n              <Heart className={w-4 h-4 ${likeMutation.isLoading ? 'animate-pulse' : ''}} />\n              <span>Like</span>\n            </button>\n          </div>\n        )}\n      </div>\n    </article>\n  );\n}\n\n// frontend/src/components/LoadingSpinner.tsx - Loading component\nimport React from 'react';\n\ninterface LoadingSpinnerProps {\n  size?: 'sm' | 'md' | 'lg';\n  className?: string;\n}\n\nexport function LoadingSpinner({ size = 'md', className = '' }: LoadingSpinnerProps) {\n  const sizeClasses = {\n    sm: 'w-4 h-4',\n    md: 'w-8 h-8',\n    lg: 'w-12 h-12',\n  };\n\n  return (\n    <div className={flex justify-center items-center ${className}}>\n      <div\n        className={${sizeClasses[size]} border-2 border-gray-300 border-t-blue-600 rounded-full animate-spin}\n      />\n    </div>\n  );\n}\n\n// frontend/src/components/ErrorBoundary.tsx - Error boundary component\nimport React, { Component, ErrorInfo, ReactNode } from 'react';\n\ninterface Props {\n  children: ReactNode;\n}\n\ninterface State {\n  hasError: boolean;\n  error?: Error;\n}\n\nexport class ErrorBoundary extends Component<Props, State> {\n  public state: State = {\n    hasError: false,\n  };\n\n  public static getDerivedStateFromError(error: Error): State {\n    return { hasError: true, error };\n  }\n\n  public componentDidCatch(error: Error, errorInfo: ErrorInfo) {\n    console.error('Uncaught error:', error, errorInfo);\n  }\n\n  public render() {\n    if (this.state.hasError) {\n      return (\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n          <div className=\"max-w-md w-full bg-white rounded-lg shadow-md p-6 text-center\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">\n              Something went wrong\n            </h2>\n            <p className=\"text-gray-600 mb-6\">\n              We're sorry, but something unexpected happened. Please try refreshing the page.\n            </p>\n            <button\n              onClick={() => window.location.reload()}\n              className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors\"\n            >\n              Refresh Page\n            </button>\n          </div>\n        </div>\n      );\n    }\n\n    return this.props.children;\n  }\n}\n`\n\n## Development Best Practices\n\n### Code Quality and Testing\n\n`typescript\n// Testing example with Jest and React Testing Library\n// frontend/src/components/**tests**/PostCard.test.tsx\nimport React from 'react';\nimport { render, screen, fireEvent, waitFor } from '@testing-library/react';\nimport { QueryClient, QueryClientProvider } from '@tanstack/react-query';\nimport { BrowserRouter } from 'react-router-dom';\nimport { PostCard } from '../PostCard';\nimport { AuthProvider } from '../../contexts/AuthContext';\nimport { mockPost, mockUser } from '../../**mocks**/data';\n\nconst createWrapper = () => {\n  const queryClient = new QueryClient({\n    defaultOptions: { queries: { retry: false } },\n  });\n\n  return ({ children }: { children: React.ReactNode }) => (\n    <QueryClientProvider client={queryClient}>\n      <BrowserRouter>\n        <AuthProvider>\n          {children}\n        </AuthProvider>\n      </BrowserRouter>\n    </QueryClientProvider>\n  );\n};\n\ndescribe('PostCard', () => {\n  it('renders post information correctly', () => {\n    render(<PostCard post={mockPost} />, { wrapper: createWrapper() });\n\n    expect(screen.getByText(mockPost.title)).toBeInTheDocument();\n    expect(screen.getByText(mockPost.author.name)).toBeInTheDocument();\n    expect(screen.getByText(${mockPost.viewCount})).toBeInTheDocument();\n    expect(screen.getByText(${mockPost.likeCount})).toBeInTheDocument();\n  });\n\n  it('handles like button click', async () => {\n    const user = userEvent.setup();\n    render(<PostCard post={mockPost} />, { wrapper: createWrapper() });\n\n    const likeButton = screen.getByRole('button', { name: /like/i });\n    await user.click(likeButton);\n\n    await waitFor(() => {\n      expect(screen.getByText('Post liked!')).toBeInTheDocument();\n    });\n  });\n});\n`\n\n### Performance Optimization\n\n`typescript\n// frontend/src/hooks/useInfiniteScroll.ts - Custom hook for pagination\nimport { useInfiniteQuery } from '@tanstack/react-query';\nimport { useEffect } from 'react';\nimport { postsAPI } from '../services/api';\n\nexport function useInfiniteScroll() {\n  const {\n    data,\n    fetchNextPage,\n    hasNextPage,\n    isFetchingNextPage,\n    isLoading,\n    error,\n  } = useInfiniteQuery({\n    queryKey: ['posts'],\n    queryFn: ({ pageParam = 1 }) => postsAPI.getPosts(pageParam),\n    getNextPageParam: (lastPage, allPages) => {\n      return lastPage.pagination.page < lastPage.pagination.totalPages\n        ? lastPage.pagination.page + 1\n        : undefined;\n    },\n  });\n\n  useEffect(() => {\n    const handleScroll = () => {\n      if (\n        window.innerHeight + document.documentElement.scrollTop >=\n        document.documentElement.offsetHeight - 1000\n      ) {\n        if (hasNextPage && !isFetchingNextPage) {\n          fetchNextPage();\n        }\n      }\n    };\n\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, [fetchNextPage, hasNextPage, isFetchingNextPage]);\n\n  const posts = data?.pages.flatMap(page => page.data) ?? [];\n\n  return {\n    posts,\n    isLoading,\n    isFetchingNextPage,\n    hasNextPage,\n    error,\n  };\n}\n``\n\nYour full-stack implementations should prioritize:\n\n1. **Type Safety** - End-to-end TypeScript for robust development\n2. **Performance** - Optimization at every layer from database to UI\n3. **Security** - Authentication, authorization, and data validation\n4. **Testing** - Comprehensive test coverage across the stack\n5. **Developer Experience** - Clear code organization and modern tooling\n\nAlways include error handling, loading states, accessibility features, and comprehensive documentation for maintainable applications.\n",
        "plugins/developer/agents/validation-gates.md": "---\nname: validation-gates\ndescription: \"Testing and validation specialist. Proactively runs tests, validates code changes, ensures quality gates are met, and iterates on fixes until all tests pass. Call this agent after you implement features and need to validate that they were implemented correctly. Be very specific with the features that were implemented and a general idea of what needs to be tested.\"\ntools: Bash, Read, Edit, MultiEdit, Grep, Glob, TodoWrite\nskills: webapp-testing\nhooks:\n  PostToolUse:\n    - matcher: \"Bash(npm test:*)|Bash(pnpm test:*)|Bash(pytest:*)|Bash(go test:*)|Bash(jest:*)|Bash(vitest:*)\"\n      hooks:\n        - type: command\n          command: \"${CLAUDE_PLUGIN_ROOT}/scripts/validate-test-output.sh\"\n---\n\nYou are a validation and testing specialist responsible for ensuring code quality through comprehensive testing, validation, and iterative improvement. Your role is to act as a quality gatekeeper, ensuring that all code changes meet the project's standards before being considered complete.\n\n## Core Responsibilities\n\n### 1. Automated Testing Execution\n- Run all relevant tests after code changes\n- Execute linting and formatting checks\n- Run type checking where applicable\n- Perform build validation\n- Check for security vulnerabilities\n\n### 2. Test Coverage Management\n- Ensure new code has appropriate test coverage\n- Write missing tests for uncovered code paths\n- Validate that tests actually test meaningful scenarios\n- Maintain or improve overall test coverage metrics\n\n### 3. Iterative Fix Process\nWhen tests fail:\n1. Analyze the failure carefully\n2. Identify the root cause\n3. Implement a fix\n4. Re-run tests to verify the fix\n5. Continue iterating until all tests pass\n6. Document any non-obvious fixes\n\n### 4. Validation Gates Checklist\nBefore marking any task as complete, ensure:\n- [ ] All unit tests pass\n- [ ] Integration tests pass (if applicable)\n- [ ] Linting produces no errors\n- [ ] Type checking passes (for typed languages)\n- [ ] Code formatting is correct\n- [ ] Build succeeds without warnings\n- [ ] No security vulnerabilities detected\n- [ ] Performance benchmarks met (if applicable)\n\n### 5. Test Writing Standards\nWhen creating new tests:\n- Write descriptive test names that explain what is being tested\n- Include at least:\n  - Happy path test cases\n  - Edge case scenarios\n  - Error/failure cases\n  - Boundary condition tests\n- Use appropriate testing patterns (AAA: Arrange, Act, Assert)\n- Mock external dependencies appropriately\n- Keep tests fast and deterministic\n\n## Validation Process Workflow\n\n1. **Initial Assessment**\n   - Identify what type of validation is needed\n   - Determine which tests should be run\n   - Check for existing test suites\n\n2. **Execute Validation**\n   ```bash\n   # Example validation sequence (adapt based on project)\n   npm run lint\n   npm run typecheck\n   npm run test\n   npm run build\n   ```\n\n3. **Handle Failures**\n   - Read error messages carefully\n   - Use grep/search to find related code\n   - Fix issues one at a time\n   - Re-run failed tests after each fix\n\n4. **Iterate Until Success**\n   - Continue fixing and testing\n   - Don't give up after first attempt\n   - Try different approaches if needed\n   - Ask for help if truly blocked\n\n5. **Final Verification**\n   - Run complete test suite one final time\n   - Verify no regressions were introduced\n   - Ensure all validation gates pass\n\n## Common Validation Commands by Language\n\n### JavaScript/TypeScript\n```bash\nnpm run lint          # or: npx eslint .\nnpm run typecheck     # or: npx tsc --noEmit\nnpm run test         # or: npx jest\nnpm run test:coverage # Check coverage\nnpm run build        # Verify build\n```\n\n### Python\n```bash\nruff check .         # Linting\nmypy .              # Type checking\npytest              # Run tests\npytest --cov        # With coverage\npython -m build     # Build check\n```\n\n### Go\n```bash\ngo fmt ./...        # Format\ngo vet ./...        # Linting\ngo test ./...       # Run tests\ngo build .          # Build validation\n```\n\n## Quality Metrics to Track\n\n- Test success rate (must be 100%)\n- Code coverage (aim for >80%)\n- Linting warnings/errors (should be 0)\n- Build time (shouldn't increase significantly)\n- Test execution time (keep under reasonable limits)\n\n## Important Principles\n\n1. **Never Skip Validation**: Even for \"simple\" changes\n2. **Fix, Don't Disable**: Fix failing tests rather than disabling them\n3. **Test Behavior, Not Implementation**: Focus on what code does, not how\n4. **Fast Feedback**: Run quick tests first, comprehensive tests after\n5. **Document Failures**: When tests reveal bugs, document the fix\n\nRemember: Your role is to ensure that code not only works but is maintainable, reliable, and meets all quality standards. Be thorough, be persistent, and don't compromise on quality.",
        "plugins/developer/commands/containerize.md": "---\ndescription: Containerize application with optimized Docker configuration, security, and multi-stage builds\nargument-hint: [application-type] | --node | --python | --java | --go | --multi-stage\nmodel: sonnet\nallowed-tools:\n  - Read\n  - Write\n  - Edit\n  - Bash(docker *)\n  - Bash(docker-compose *)\n  - Bash(podman *)\n---\n\n# Application Containerization\n\nContainerize application for deployment: $ARGUMENTS\n\n## Current Application Analysis\n\n- Application type: @package.json or @setup.py or @go.mod or @pom.xml (detect runtime)\n- Existing Docker: @Dockerfile or @docker-compose.yml or @compose.yaml (if exists)\n- Dependencies: !find . -name \"*requirements*.txt\" -o -name \"package*.json\" -o -name \"go.mod\" | head -3\n- Port configuration: !grep -r \"PORT\\|listen\\|bind\" src/ 2>/dev/null | head -3 || echo \"Port detection needed\"\n- Build tools: @Makefile or build scripts detection\n\n## Task\n\nImplement production-ready containerization strategy:\n\n1. **Application Analysis and Containerization Strategy**\n   - Analyze application architecture and runtime requirements\n   - Identify application dependencies and external services\n   - Determine optimal base image and runtime environment\n   - Plan multi-stage build strategy for optimization\n   - Assess security requirements and compliance needs\n\n2. **Dockerfile Creation and Optimization**\n   - Create comprehensive Dockerfile with multi-stage builds\n   - Select minimal base images (Alpine, distroless, or slim variants)\n   - Configure proper layer caching and build optimization\n   - Implement security best practices (non-root user, minimal attack surface)\n   - Set up proper file permissions and ownership\n\n3. **Build Process Configuration**\n   - Configure .dockerignore file to exclude unnecessary files\n   - Set up build arguments and environment variables\n   - Implement build-time dependency installation and cleanup\n   - Configure application bundling and asset optimization\n   - Set up proper build context and file structure\n\n4. **Runtime Configuration**\n   - Configure application startup and health checks\n   - Set up proper signal handling and graceful shutdown\n   - Configure logging and output redirection\n   - Set up environment-specific configuration management\n   - Configure resource limits and performance tuning\n\n5. **Security Hardening**\n   - Run application as non-root user with minimal privileges\n   - Configure security scanning and vulnerability assessment\n   - Implement secrets management and secure credential handling\n   - Set up network security and firewall rules\n   - Configure security policies and access controls\n\n6. **Docker Compose Configuration**\n   - Create compose.yaml for local development\n   - Configure service dependencies and networking\n   - Set up volume mounting and data persistence\n   - Configure environment variables and secrets\n   - Set up development vs production configurations\n\n7. **Container Orchestration Preparation**\n   - Prepare configurations for Kubernetes deployment\n   - Create deployment manifests and service definitions\n   - Configure ingress and load balancing\n   - Set up persistent volumes and storage classes\n   - Configure auto-scaling and resource management\n\n8. **Monitoring and Observability**\n   - Configure application metrics and health endpoints\n   - Set up logging aggregation and centralized logging\n   - Configure distributed tracing and monitoring\n   - Set up alerting and notification systems\n   - Configure performance monitoring and profiling\n\n9. **CI/CD Integration**\n   - Configure automated Docker image building\n   - Set up image scanning and security validation\n   - Configure image registry and artifact management\n   - Set up automated deployment pipelines\n   - Configure rollback and blue-green deployment strategies\n\n10. **Testing and Validation**\n    - Test container builds and functionality\n    - Validate security configurations and compliance\n    - Test deployment in different environments\n    - Validate performance and resource utilization\n    - Test backup and disaster recovery procedures\n    - Create documentation for container deployment and management\n",
        "plugins/developer/commands/execute-prp.md": "---\ndescription: Execute a Product Requirement Plan step by step\nargument-hint: [PRP file path]\nallowed-tools:\n  - Read\n  - Write\n  - Edit\n  - Bash(npm *)|Bash(pnpm *)|Bash(python *)|Bash(go *)|Bash(pytest *)|Bash(jest *)\n  - Grep\n  - Glob\n  - TodoWrite\n---\n\n# Execute BASE PRP\n\nImplement a feature using using the PRP file.\n\n## PRP File: $ARGUMENTS\n\n## Execution Process\n\n1. **Load PRP**\n   - Read the specified PRP file\n   - Understand all context and requirements\n   - Follow all instructions in the PRP and extend the research if needed\n   - Ensure you have all needed context to implement the PRP fully\n   - Do more web searches and codebase exploration as needed\n\n2. **ULTRATHINK**\n   - Think hard before you execute the plan. Create a comprehensive plan addressing all requirements.\n   - Break down complex tasks into smaller, manageable steps using your todos tools.\n   - Use the TodoWrite tool to create and track your implementation plan.\n   - Identify implementation patterns from existing code to follow.\n\n3. **Execute the plan**\n   - Execute the PRP\n   - Implement all the code\n\n4. **Validate**\n   - Run each validation command\n   - Fix any failures\n   - Re-run until all pass\n\n5. **Complete**\n   - Ensure all checklist items done\n   - Run final validation suite\n   - Report completion status\n   - Read the PRP again to ensure you have implemented everything\n\n6. **Reference the PRP**\n   - You can always reference the PRP again if needed\n\nNote: If validation fails, use error patterns in PRP to fix and retry.",
        "plugins/developer/commands/generate-prp.md": "---\ndescription: Generate a comprehensive Product Requirement Plan for a feature\nargument-hint: [feature description or file]\nallowed-tools:\n  - Read\n  - Grep\n  - Glob\n  - WebSearch\n  - WebFetch\n  - Write\n---\n\n# Create PRP\n\n## Feature file: $ARGUMENTS\n\nGenerate a complete PRP for general feature implementation with thorough research. Ensure context is passed to the AI agent to enable self-validation and iterative refinement. Read the feature file first to understand what needs to be created, how the examples provided help, and any other considerations.\n\nThe AI agent only gets the context you are appending to the PRP and training data. Assuma the AI agent has access to the codebase and the same knowledge cutoff as you, so its important that your research findings are included or referenced in the PRP. The Agent has Websearch capabilities, so pass urls to documentation and examples.\n\n## Research Process\n\n1. **Codebase Analysis**\n   - Search for similar features/patterns in the codebase\n   - Identify files to reference in PRP\n   - Note existing conventions to follow\n   - Check test patterns for validation approach\n\n2. **External Research**\n   - Search for similar features/patterns online\n   - Library documentation (include specific URLs)\n   - Implementation examples (GitHub/StackOverflow/blogs)\n   - Best practices and common pitfalls\n\n3. **User Clarification** (if needed)\n   - Specific patterns to mirror and where to find them?\n   - Integration requirements and where to find them?\n\n## PRP Generation\n\nUsing templates/prp_base.md as template:\n\n### Critical Context to Include and pass to the AI agent as part of the PRP\n- **Documentation**: URLs with specific sections\n- **Code Examples**: Real snippets from codebase\n- **Gotchas**: Library quirks, version issues\n- **Patterns**: Existing approaches to follow\n\n### Implementation Blueprint\n- Start with pseudocode showing approach\n- Reference real files for patterns\n- Include error handling strategy\n- list tasks to be completed to fullfill the PRP in the order they should be completed\n\n### Validation Gates (Must be Executable) eg for python\n```bash\n# Syntax/Style\nruff check --fix && mypy .\n\n# Unit Tests\nuv run pytest tests/ -v\n\n```\n\n*** CRITICAL AFTER YOU ARE DONE RESEARCHING AND EXPLORING THE CODEBASE BEFORE YOU START WRITING THE PRP ***\n\n*** ULTRATHINK ABOUT THE PRP AND PLAN YOUR APPROACH THEN START WRITING THE PRP ***\n\n## Output\nSave as: `PRPs/{feature-name}.md`\n\n## Quality Checklist\n- [ ] All necessary context included\n- [ ] Validation gates are executable by AI\n- [ ] References existing patterns\n- [ ] Clear implementation path\n- [ ] Error handling documented\n\nScore the PRP on a scale of 1-10 (confidence level to succeed in one-pass implementation using claude codes)\n\nRemember: The goal is one-pass implementation success through comprehensive context.",
        "plugins/developer/skills/devtools/SKILL.md": "---\nname: devtools\ndescription: This skill helps launch and configure the Chrome DevTools MCP server, giving Claude visual access to a live browser for debugging and automation. Use when the user asks to set up browser debugging, launch Chrome with DevTools, configure chrome-devtools-mcp, see what my app looks like, take screenshots of my web application, check the browser console, debug console errors, inspect network requests, analyse API responses, measure Core Web Vitals or page performance, run a Lighthouse audit, test button clicks or form submissions, automate browser interactions, fill out forms programmatically, simulate user actions, emulate mobile devices or slow networks, capture DOM snapshots, execute JavaScript in the browser, or troubleshoot Chrome DevTools MCP connection issues. Supports Windows, Linux, and WSL2 environments.\n---\n\n# Chrome DevTools MCP Setup\n\n## Overview\n\nThis skill automates the setup and launch of Chrome with remote debugging for use with the chrome-devtools-mcp server. It handles environment detection, Chrome installation verification, MCP configuration, and browser launch across Windows, Linux, and WSL2.\n\n**GitHub Repository:** https://github.com/ChromeDevTools/chrome-devtools-mcp\n\n## Why Give Claude Browser Access?\n\nWithout browser access, Claude is \"coding blindfolded\" - making changes without seeing the results. The Chrome DevTools MCP server provides **26 specialised tools** that give Claude eyes into your running application:\n\n| Category | Capabilities |\n|----------|--------------|\n| **Visual Inspection** | Take screenshots, capture DOM snapshots, see rendered output |\n| **Console & Logging** | Read console messages, catch JavaScript errors, debug issues |\n| **Network Analysis** | Inspect API requests/responses, analyse headers, debug fetch calls |\n| **Performance** | Record traces, measure Core Web Vitals (LCP, CLS, TBT), identify bottlenecks |\n| **User Simulation** | Click elements, fill forms, drag-and-drop, handle dialogs |\n| **Device Emulation** | Simulate mobile viewports, throttle CPU/network, test responsive design |\n\nThis enables Claude to:\n- **Verify changes visually** instead of guessing if CSS/layout is correct\n- **Debug runtime errors** by reading actual console output\n- **Test user flows** by simulating clicks and form submissions\n- **Identify performance issues** with real Core Web Vitals data\n- **Catch regressions** by comparing screenshots before/after changes\n\n## Quick Start Workflow\n\nExecute these steps in order:\n\n### Step 1: Detect Environment\n\nRun the environment detection script to determine the platform:\n\n```bash\nbash scripts/detect_environment.sh\n```\n\nThe script returns one of: `windows`, `linux`, or `wsl2`\n\n### Step 2: Verify Chrome Installation\n\nRun the Chrome check script with the detected environment:\n\n```bash\nbash scripts/check_chrome.sh <environment>\n```\n\nThe script outputs `status:installed` or `status:not_installed`. If Chrome is not installed, the script provides detailed installation instructions. See the **Chrome Installation** section below for manual installation options.\n\n**IMPORTANT:** Do not proceed to later steps until Chrome is installed and verified.\n\n### Step 3: Check MCP Server Status\n\nVerify if chrome-devtools-mcp is configured:\n\n```bash\nclaude mcp list | grep -i chrome\n```\n\nIf not installed, install with:\n\n```bash\nclaude mcp add chrome-devtools -- npx chrome-devtools-mcp@latest --browserUrl http://127.0.0.1:9222\n```\n\n### Step 4: Detect Running Dev Server\n\nCheck for running dev servers on common ports:\n\n```bash\nbash scripts/detect_dev_server.sh\n```\n\nThis checks ports 5173, 5174, 5175, 3000, 3001, 8080, and 8000.\n\nIf no dev server is running and one is needed, offer to start it:\n- For Vite projects: `npm run dev`\n- For Next.js: `npm run dev` or `npx next dev`\n- For React CRA: `npm start`\n\n### Step 5: Launch Chrome with Debugging\n\nLaunch Chrome with remote debugging enabled:\n\n```bash\nbash scripts/launch_chrome.sh <environment> <url> [headed]\n```\n\n**Arguments:**\n- `<environment>`: `windows`, `linux`, or `wsl2`\n- `<url>`: Target URL (e.g., `http://localhost:5173`)\n- `[headed]`: Optional - pass `headed` for visible browser, omit for headless (default)\n\n**Examples:**\n```bash\n# Headless (default)\nbash scripts/launch_chrome.sh wsl2 http://localhost:5173\n\n# Headed (visible browser)\nbash scripts/launch_chrome.sh wsl2 http://localhost:5173 headed\n```\n\n## Platform-Specific Commands\n\n### WSL2 / Linux\n\n```bash\n# Headless\ngoogle-chrome --headless --remote-debugging-port=9222 --no-first-run --user-data-dir=/tmp/chrome-mcp http://localhost:5173 &\n\n# Headed\ngoogle-chrome --remote-debugging-port=9222 --no-first-run --user-data-dir=/tmp/chrome-mcp http://localhost:5173 &\n```\n\n### Windows (CMD/PowerShell)\n\n```cmd\nREM Headless\nstart chrome.exe --headless --remote-debugging-port=9222 --no-first-run --user-data-dir=%TEMP%\\chrome-mcp http://localhost:5173\n\nREM Headed\nstart chrome.exe --remote-debugging-port=9222 --no-first-run --user-data-dir=%TEMP%\\chrome-mcp http://localhost:5173\n```\n\n## Chrome Installation\n\nIf Chrome is not detected, install it using one of these methods:\n\n### Linux / WSL2\n\n**Option 1: Direct download (recommended)**\n```bash\nwget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb\nsudo apt install -y ./google-chrome-stable_current_amd64.deb\n```\n\n**Option 2: Add Google's repository**\n```bash\n# Add signing key\nwget -q -O - https://dl.google.com/linux/linux_signing_key.pub | sudo gpg --dearmor -o /usr/share/keyrings/google-chrome.gpg\n\n# Add repository\necho 'deb [arch=amd64 signed-by=/usr/share/keyrings/google-chrome.gpg] http://dl.google.com/linux/chrome/deb/ stable main' | sudo tee /etc/apt/sources.list.d/google-chrome.list\n\n# Install\nsudo apt update\nsudo apt install -y google-chrome-stable\n```\n\n**Option 3: Chromium (open-source alternative)**\n```bash\nsudo apt update\nsudo apt install -y chromium-browser\n```\n\n### Windows\n\n**Option 1: Download from Google**\nVisit https://www.google.com/chrome/ and run the installer.\n\n**Option 2: Using winget**\n```powershell\nwinget install Google.Chrome\n```\n\n**Option 3: Using Chocolatey**\n```powershell\nchoco install googlechrome\n```\n\n**Option 4: PowerShell direct download**\n```powershell\n$installer = \"$env:TEMP\\chrome_installer.exe\"\nInvoke-WebRequest -Uri \"https://dl.google.com/chrome/install/latest/chrome_installer.exe\" -OutFile $installer\nStart-Process -FilePath $installer -Args \"/silent /install\" -Wait\nRemove-Item $installer\n```\n\n### Verify Installation\n\nAfter installation, verify with:\n```bash\nbash scripts/check_chrome.sh <environment>\n```\n\n## MCP Configuration\n\n### Quick Install\n\n```bash\nclaude mcp add chrome-devtools -- npx chrome-devtools-mcp@latest --browserUrl http://127.0.0.1:9222\n```\n\n### Configuration Reference\n\nAll flags can be passed via the `args` array in `.mcp.json`:\n\n| Flag | Description | Default |\n|------|-------------|---------|\n| `--browserUrl`, `-u` | Connect to running Chrome (e.g., `http://127.0.0.1:9222`) | - |\n| `--autoConnect` | Auto-connect to Chrome 145+ with remote debugging enabled | `false` |\n| `--headless` | Run in headless (no UI) mode | `false` |\n| `--isolated` | Use temporary user-data-dir, auto-cleaned on close | `false` |\n| `--channel` | Chrome channel: `stable`, `canary`, `beta`, `dev` | `stable` |\n| `--viewport` | Initial viewport size (e.g., `1280x720`, max `3840x2160` headless) | - |\n| `--executablePath`, `-e` | Path to custom Chrome executable | - |\n| `--userDataDir` | Custom user data directory | `~/.cache/chrome-devtools-mcp/chrome-profile` |\n| `--wsEndpoint`, `-w` | WebSocket endpoint (alternative to `--browserUrl`) | - |\n| `--wsHeaders` | Custom WebSocket headers as JSON (use with `--wsEndpoint`) | - |\n| `--proxyServer` | Proxy server for Chrome | - |\n| `--acceptInsecureCerts` | Ignore self-signed/expired certificate errors | `false` |\n| `--chromeArg` | Additional Chrome launch arguments (array) | - |\n| `--logFile` | Debug log file path (set `DEBUG=*` for verbose) | - |\n| `--categoryEmulation` | Include emulation tools | `true` |\n| `--categoryPerformance` | Include performance tools | `true` |\n| `--categoryNetwork` | Include network tools | `true` |\n\n### Basic Configuration\n\n```json\n{\n  \"mcpServers\": {\n    \"chrome-devtools\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"chrome-devtools-mcp@latest\",\n        \"--browserUrl\",\n        \"http://127.0.0.1:9222\"\n      ]\n    }\n  }\n}\n```\n\n### Headless with Isolated Profile\n\nBest for CI/CD or automated testing - uses a temporary profile that's cleaned up automatically:\n\n```json\n{\n  \"mcpServers\": {\n    \"chrome-devtools\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"chrome-devtools-mcp@latest\",\n        \"--headless\",\n        \"--isolated\"\n      ]\n    }\n  }\n}\n```\n\n### Custom Viewport for Mobile Testing\n\n```json\n{\n  \"mcpServers\": {\n    \"chrome-devtools\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"chrome-devtools-mcp@latest\",\n        \"--browserUrl=http://127.0.0.1:9222\",\n        \"--viewport=390x844\"\n      ]\n    }\n  }\n}\n```\n\n### Using Chrome Canary/Beta\n\n```json\n{\n  \"mcpServers\": {\n    \"chrome-devtools\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"chrome-devtools-mcp@latest\",\n        \"--channel=canary\",\n        \"--headless\",\n        \"--isolated\"\n      ]\n    }\n  }\n}\n```\n\n### With Debug Logging\n\n```json\n{\n  \"mcpServers\": {\n    \"chrome-devtools\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"chrome-devtools-mcp@latest\",\n        \"--browserUrl=http://127.0.0.1:9222\",\n        \"--logFile=/tmp/chrome-devtools-mcp.log\"\n      ],\n      \"env\": {\n        \"DEBUG\": \"*\"\n      }\n    }\n  }\n}\n```\n\n### WebSocket Connection with Auth Headers\n\nFor connecting to remote Chrome instances with authentication:\n\n```json\n{\n  \"mcpServers\": {\n    \"chrome-devtools\": {\n      \"command\": \"npx\",\n      \"args\": [\n        \"chrome-devtools-mcp@latest\",\n        \"--wsEndpoint=ws://127.0.0.1:9222/devtools/browser/<id>\",\n        \"--wsHeaders={\\\"Authorization\\\":\\\"Bearer YOUR_TOKEN\\\"}\"\n      ]\n    }\n  }\n}\n```\n\nTo get the WebSocket endpoint, visit `http://127.0.0.1:9222/json/version` and look for `webSocketDebuggerUrl`.\n\n## Connection Methods\n\n### Method 1: Manual Connection (Recommended)\n\nStart Chrome yourself with remote debugging, then connect via `--browserUrl`. This is the approach used in the Quick Start Workflow above.\n\n**When to use:**\n- Running Claude in a sandboxed environment\n- Need full control over Chrome launch options\n- Working with self-signed certificates\n\n### Method 2: Auto-Connect (Chrome 145+)\n\nLet chrome-devtools-mcp automatically connect to a running Chrome instance.\n\n**Step 1:** Enable remote debugging in Chrome:\n1. Navigate to `chrome://inspect/#remote-debugging`\n2. Follow the dialog to allow debugging connections\n\n**Step 2:** Configure MCP with `--autoConnect`:\n\n```json\n{\n  \"mcpServers\": {\n    \"chrome-devtools\": {\n      \"command\": \"npx\",\n      \"args\": [\"chrome-devtools-mcp@latest\", \"--autoConnect\"]\n    }\n  }\n}\n```\n\n**When to use:**\n- Sharing state between manual testing and Claude-driven testing\n- Avoiding WebDriver sign-in blocks (some sites block automated browsers)\n- Want Chrome to prompt for permission before Claude connects\n\n### Method 3: Let MCP Launch Chrome\n\nIf you omit `--browserUrl` and `--autoConnect`, the MCP server will launch its own Chrome instance.\n\n```json\n{\n  \"mcpServers\": {\n    \"chrome-devtools\": {\n      \"command\": \"npx\",\n      \"args\": [\"chrome-devtools-mcp@latest\", \"--headless\", \"--isolated\"]\n    }\n  }\n}\n```\n\n**When to use:**\n- Fully automated workflows\n- No need to maintain browser state\n- CI/CD pipelines\n\n## User Data Directory\n\nBy default, chrome-devtools-mcp uses a persistent profile at:\n- **Linux/macOS:** `$HOME/.cache/chrome-devtools-mcp/chrome-profile-$CHANNEL`\n- **Windows:** `%HOMEPATH%/.cache/chrome-devtools-mcp/chrome-profile-$CHANNEL`\n\nThis profile is shared across all MCP sessions, preserving cookies, local storage, and login state.\n\nUse `--isolated` for a fresh, temporary profile that's automatically cleaned up when the browser closes.\n\n## Troubleshooting\n\nFor detailed troubleshooting steps, read `references/troubleshooting.md`.\n\n### Quick Checks\n\n1. **Test MCP server runs:**\n   ```bash\n   npx chrome-devtools-mcp@latest --help\n   ```\n\n2. **Verify Chrome is listening:**\n   ```bash\n   curl -s http://127.0.0.1:9222/json/version\n   ```\n\n3. **Check for existing Chrome processes:**\n   ```bash\n   # Linux/WSL2\n   pgrep -a chrome\n\n   # Windows\n   tasklist | findstr chrome\n   ```\n\n### Common Issues\n\n| Issue | Solution |\n|-------|----------|\n| \"Target closed\" error | Close all Chrome instances, restart with debugging |\n| Module not found | Clear npm cache: `rm -rf ~/.npm/_npx && npm cache clean --force` |\n| Connection refused | Ensure Chrome launched with `--remote-debugging-port=9222` |\n| Port already in use | Kill existing Chrome or use different port |\n| Chrome won't start in sandbox | Use `--browserUrl` to connect to manually-started Chrome |\n| WebDriver sign-in blocked | Use `--autoConnect` to connect to your normal browser session |\n| VM-to-host connection fails | See `references/troubleshooting.md` for port forwarding guidance |\n\n## Known Limitations\n\n### Operating System Sandboxes\n\nSome MCP clients sandbox the server using macOS Seatbelt or Linux containers. In sandboxed environments, chrome-devtools-mcp cannot start Chrome (which requires its own sandbox permissions).\n\n**Workarounds:**\n1. Disable sandboxing for chrome-devtools-mcp in your MCP client\n2. Use `--browserUrl` to connect to a Chrome instance started outside the sandbox\n\n### Security Considerations\n\nThe remote debugging port exposes your browser to any application on your machine. When debugging is enabled:\n- Avoid browsing sensitive sites (banking, email with sensitive data)\n- Use `--isolated` for a separate profile\n- Close Chrome when done debugging\n\n## Verification\n\nAfter setup, verify the connection works:\n\n1. Chrome should be running with remote debugging\n2. MCP server should connect to `http://127.0.0.1:9222`\n3. Test with `mcp__chrome-devtools__list_pages` tool\n",
        "plugins/developer/skills/devtools/references/troubleshooting.md": "# Chrome DevTools MCP Troubleshooting Guide\n\n## General Tips\n\n1. **Test MCP server independently:**\n   ```bash\n   npx chrome-devtools-mcp@latest --help\n   ```\n\n2. **Ensure npm/node versions match:**\n   Make sure the MCP client uses the same npm and node version as the terminal.\n\n3. **Use --yes flag for npx:**\n   When configuring MCP client, use `--yes` to auto-accept installation prompts:\n   ```bash\n   npx --yes chrome-devtools-mcp@latest\n   ```\n\n4. **Check IDE output logs:**\n   If the client is an IDE, look for specific errors in the Output pane.\n\n## Debugging with Logs\n\n### Enable Debug Mode\n\nStart the MCP server with debugging enabled:\n\n```bash\nDEBUG=* npx chrome-devtools-mcp@latest --log-file=/tmp/chrome-devtools-mcp.log\n```\n\n### Debug Configuration in .mcp.json\n\n```json\n{\n  \"mcpServers\": {\n    \"chrome-devtools\": {\n      \"type\": \"stdio\",\n      \"command\": \"npx\",\n      \"args\": [\n        \"chrome-devtools-mcp@latest\",\n        \"--log-file\",\n        \"/tmp/chrome-devtools-mcp.log\"\n      ],\n      \"env\": {\n        \"DEBUG\": \"*\"\n      }\n    }\n  }\n}\n```\n\n### View Logs\n\n```bash\n# Follow log file in real-time\ntail -f /tmp/chrome-devtools-mcp.log\n\n# View last 50 lines\ntail -50 /tmp/chrome-devtools-mcp.log\n```\n\n## Specific Problems\n\n### Error: `Cannot find module ...` (ERR_MODULE_NOT_FOUND)\n\n**Cause:** Non-supported Node version or corrupted npm/npx cache.\n\n**Solution:**\n```bash\n# Clear npx cache (NOTE: may remove other npx executables)\nrm -rf ~/.npm/_npx\n\n# Clear npm cache\nnpm cache clean --force\n\n# Reinstall\nnpx chrome-devtools-mcp@latest --help\n```\n\n### Error: \"Target closed\"\n\n**Cause:** Browser could not be started or closed unexpectedly.\n\n**Solutions:**\n1. Close all existing Chrome instances:\n   ```bash\n   # Linux/WSL2\n   pkill -f chrome\n\n   # Windows\n   taskkill /F /IM chrome.exe\n   ```\n\n2. Ensure latest stable Chrome is installed\n\n3. Check system meets Chrome requirements: https://support.google.com/chrome/a/answer/7100626\n\n4. Restart Chrome with debugging:\n   ```bash\n   google-chrome --headless --remote-debugging-port=9222 --no-first-run --user-data-dir=/tmp/chrome-mcp &\n   ```\n\n### Error: Connection Refused\n\n**Cause:** Chrome not running with remote debugging enabled.\n\n**Solutions:**\n1. Verify Chrome is running with debugging:\n   ```bash\n   curl -s http://127.0.0.1:9222/json/version\n   ```\n\n2. Check if port 9222 is in use:\n   ```bash\n   # Linux/WSL2\n   ss -tuln | grep 9222\n   lsof -i :9222\n\n   # Windows (PowerShell)\n   netstat -ano | findstr 9222\n   ```\n\n3. Kill process using the port and restart Chrome:\n   ```bash\n   fuser -k 9222/tcp\n   ```\n\n### Error: Port Already in Use\n\n**Cause:** Another process (often previous Chrome instance) is using port 9222.\n\n**Solution:**\n```bash\n# Find and kill process on port\nfuser -k 9222/tcp\n\n# Or use different port\ngoogle-chrome --remote-debugging-port=9223 ...\n\n# Update MCP config to match\nclaude mcp add chrome-devtools -- npx chrome-devtools-mcp@latest --browserUrl http://127.0.0.1:9223\n```\n\n### WSL2: Remote Debugging Between VM and Host\n\n**Cause:** Host header validation blocks connections from VM to host Chrome.\n\n**Solution:** Tunnel the port over SSH:\n\n```bash\n# In WSL2, run:\nssh -N -L 127.0.0.1:9222:127.0.0.1:9222 <user>@<host-ip>\n\n# Then configure MCP to connect to localhost\nclaude mcp add chrome-devtools -- npx chrome-devtools-mcp@latest --browserUrl http://127.0.0.1:9222\n```\n\n### Chrome Won't Start in Headless Mode\n\n**Cause:** Missing dependencies or sandbox issues.\n\n**Solutions:**\n\n1. Install missing dependencies (Linux):\n   ```bash\n   sudo apt install -y \\\n     libnss3 \\\n     libnspr4 \\\n     libatk1.0-0 \\\n     libatk-bridge2.0-0 \\\n     libcups2 \\\n     libdrm2 \\\n     libxkbcommon0 \\\n     libxcomposite1 \\\n     libxdamage1 \\\n     libxfixes3 \\\n     libxrandr2 \\\n     libgbm1 \\\n     libasound2\n   ```\n\n2. Try with sandbox disabled (testing only):\n   ```bash\n   google-chrome --headless --no-sandbox --remote-debugging-port=9222 ...\n   ```\n\n### MCP Server Not Responding\n\n**Diagnostic steps:**\n\n1. Check if server is running:\n   ```bash\n   pgrep -f chrome-devtools-mcp\n   ```\n\n2. Check Claude MCP status:\n   ```bash\n   claude mcp list\n   ```\n\n3. Remove and re-add MCP server:\n   ```bash\n   claude mcp remove chrome-devtools\n   claude mcp add chrome-devtools -- npx chrome-devtools-mcp@latest --browserUrl http://127.0.0.1:9222\n   ```\n\n4. Restart Claude Code session\n\n## Verification Commands\n\n### Check Chrome is Listening\n\n```bash\ncurl -s http://127.0.0.1:9222/json/version\n```\n\nExpected output:\n```json\n{\n   \"Browser\": \"Chrome/xxx.x.xxxx.xx\",\n   \"Protocol-Version\": \"1.3\",\n   ...\n}\n```\n\n### List Available Pages\n\n```bash\ncurl -s http://127.0.0.1:9222/json/list\n```\n\n### Check MCP Configuration\n\n```bash\nclaude mcp list\ncat ~/.mcp.json\n```\n\n## Quick Recovery Script\n\nIf everything is broken, run this to reset:\n\n```bash\n#!/bin/bash\n# Reset Chrome DevTools MCP setup\n\n# Kill all Chrome\npkill -9 -f chrome || true\n\n# Clear temp data\nrm -rf /tmp/chrome-mcp\n\n# Clear npx cache\nrm -rf ~/.npm/_npx\n\n# Remove MCP config\nclaude mcp remove chrome-devtools 2>/dev/null || true\n\n# Wait\nsleep 2\n\n# Start fresh Chrome\ngoogle-chrome --headless --remote-debugging-port=9222 --no-first-run --user-data-dir=/tmp/chrome-mcp &\n\n# Wait for startup\nsleep 3\n\n# Re-add MCP\nclaude mcp add chrome-devtools -- npx chrome-devtools-mcp@latest --browserUrl http://127.0.0.1:9222\n\necho \"Done. Restart Claude Code session.\"\n```\n\n## Resources\n\n- **GitHub Repository:** https://github.com/ChromeDevTools/chrome-devtools-mcp\n- **Chrome DevTools Protocol:** https://chromedevtools.github.io/devtools-protocol/\n- **Chrome System Requirements:** https://support.google.com/chrome/a/answer/7100626\n",
        "plugins/developer/skills/fifteen-factor-app/SKILL.md": "---\nname: fifteen-factor-app\ndescription: The Fifteen-Factor App methodology for modern cloud-native SaaS applications. This skill should be automatically invoked when planning SaaS tools, product software architecture, microservices design, PRPs/PRDs, or cloud-native application development. Extends the original Twelve-Factor App principles with three additional factors (API First, Telemetry, Security). Trigger keywords include \"fifteen factor\", \"12 factor\", \"SaaS architecture\", \"cloud-native design\", \"application architecture\", \"microservices best practices\", or when in a planning/architecture session.\nuser-invocable: false\n---\n\n# Fifteen-Factor App Methodology\n\n## Overview\n\nThe Fifteen-Factor App methodology extends the original Twelve-Factor App principles (created by Heroku in 2012) with three additional factors essential for modern cloud-native applications: API First, Telemetry, and Security.\n\nThis methodology provides architectural principles and guidelines for building software-as-a-service applications that are:\n\n- **Performant** - Optimised for speed and efficiency\n- **Scalable** - Designed for horizontal scaling without significant changes\n- **Manageable** - Easy to deploy, monitor, and maintain\n- **Resilient** - Robust against failures with graceful degradation\n\n## When to Apply This Methodology\n\nApply the Fifteen-Factor principles during:\n\n1. **Architecture Planning** - When designing new applications or microservices\n2. **PRP/PRD Creation** - When documenting technical requirements and specifications\n3. **Code Reviews** - When evaluating whether implementations follow best practices\n4. **Migration Planning** - When modernising legacy applications for cloud deployment\n5. **Technical Debt Assessment** - When identifying architectural improvements\n\n## The Fifteen Factors at a Glance\n\n| Factor | Principle | Key Concept |\n|--------|-----------|-------------|\n| I. Codebase | One codebase, many deploys | Single repo per app, version controlled |\n| II. Dependencies | Explicitly declare and isolate | No implicit system-wide packages |\n| III. Config | Store in environment | Never hardcode configuration |\n| IV. Backing Services | Treat as attached resources | Databases, caches are swappable resources |\n| V. Build, Release, Run | Strict separation | Immutable releases, no runtime changes |\n| VI. Processes | Stateless and share-nothing | Horizontal scaling, no sticky sessions |\n| VII. Port Binding | Export via port | Self-contained, no runtime injection |\n| VIII. Concurrency | Scale out via process model | Horizontal over vertical scaling |\n| IX. Disposability | Fast startup, graceful shutdown | Maximise robustness |\n| X. Dev/Prod Parity | Keep environments similar | Continuous deployment |\n| XI. Logs | Treat as event streams | Separate generation from processing |\n| XII. Admin Processes | Run as one-off processes | Same environment as app |\n| **XIII. API First** | Design contracts first | Enable parallel development |\n| **XIV. Telemetry** | Monitor everything | APM, health checks, domain metrics |\n| **XV. Security** | Authentication & Authorisation | RBAC, identity per request |\n\n## Applying Factors in Planning Sessions\n\nWhen creating a PRP, PRD, or architecture plan, evaluate the design against each factor:\n\n### Foundation Factors (I-VI)\n\nThese establish the baseline for any cloud-native application:\n\n- **Codebase**: Define repository structure and branching strategy\n- **Dependencies**: Specify package manager and dependency isolation approach\n- **Config**: Plan environment variable strategy and secrets management\n- **Backing Services**: Identify all external services and abstraction layers\n- **Build/Release/Run**: Design CI/CD pipeline with immutable artifacts\n- **Processes**: Ensure stateless design, plan session/state storage\n\n### Operational Factors (VII-XII)\n\nThese ensure smooth operation and maintenance:\n\n- **Port Binding**: Define service exposure strategy\n- **Concurrency**: Plan horizontal scaling approach\n- **Disposability**: Design for container orchestration\n- **Dev/Prod Parity**: Minimise environment differences\n- **Logs**: Plan logging infrastructure (ELK, Fluentd, etc.)\n- **Admin Processes**: Automate one-off tasks\n\n### Modern Extensions (XIII-XV)\n\nThese address contemporary requirements:\n\n- **API First**: Define OpenAPI/Swagger contracts before implementation\n- **Telemetry**: Plan APM, health endpoints, and observability\n- **Security**: Design authentication/authorisation (OAuth2, RBAC)\n\n## Architecture Checklist\n\nUse this checklist when reviewing or planning an application:\n\n```\nâ–¡ Single codebase in version control\nâ–¡ All dependencies explicitly declared\nâ–¡ Configuration externalised to environment\nâ–¡ Backing services abstracted and swappable\nâ–¡ Build, release, run stages separated\nâ–¡ Stateless processes (no sticky sessions)\nâ–¡ Services self-contained with port binding\nâ–¡ Designed for horizontal scaling\nâ–¡ Fast startup and graceful shutdown\nâ–¡ Dev/staging/prod environments aligned\nâ–¡ Logs streamed to external aggregator\nâ–¡ Admin tasks automated and reproducible\nâ–¡ API contracts defined before implementation\nâ–¡ Telemetry: APM, health checks, metrics\nâ–¡ Security: Authentication and authorisation\n```\n\n## Resources\n\nDetailed documentation for each factor is available in the references directory:\n\n- `references/overview.md` - Complete factor summary with diagrams\n- `references/original-factors.md` - Factors I-XII with implementation examples\n- `references/modern-extensions.md` - Factors XIII-XV (API First, Telemetry, Security)\n- `references/setup-and-tools.md` - Tooling recommendations and quick start\n\nTo load detailed information about specific factors, read the appropriate reference file. For example, when planning API design, load `references/modern-extensions.md` for API First guidance.\n\n### Searching References\n\nFor specific implementation patterns, search the references:\n\n- API contracts: `grep -i \"swagger\\|openapi\" references/`\n- Logging patterns: `grep -i \"log\\|fluentd\\|elk\" references/`\n- Security patterns: `grep -i \"oauth\\|rbac\\|authentication\" references/`\n- Container patterns: `grep -i \"docker\\|container\" references/`\n",
        "plugins/developer/skills/fifteen-factor-app/references/modern-extensions.md": "# Modern Extensions (XIII-XV)\n\nThis reference contains detailed documentation for the three additional factors that extend the original Twelve-Factor App methodology for modern cloud-native applications.\n\n---\n\n## XIII. API First\n\n**Principle:** Define the service contract first to help consumers understand what the request and response communication is expected to be. Service consumers can work in parallel to develop consuming applications, even before the actual service contract is implemented and available.\n\n### Key Advantages\n\n1. **Cross-Platform Compatible** - Facilitates discussions with stakeholders whether internal team, customers, or third-party systems integrating with the APIs\n2. **Parallel Development** - Teams can develop in parallel knowing what to expect\n3. **Reuse of Schemas** - Enables reuse of contract definitions across services\n\n### Benefits\n\n- Avoids bottlenecks from waterfall model\n- Multiple stakeholders can work in parallel\n- Cuts implementation and integration time\n- Enables API virtualisation for early testing\n- Extension of contract-first development pattern\n\n### Tools\n\n- **Apiary** - GitHub integration and server mocks\n- **Prism** - Open-source HTTP mock server\n- **Swagger/OpenAPI** - API documentation and contract generation\n- **Postman** - API testing and mock servers\n\n### Implementation Examples\n\n**Gradle Dependencies (Java):**\n\n```groovy\ndependencies {\n    implementation group: 'io.springfox', name: 'springfox-swagger2', version: '3.0.0'\n    implementation group: 'io.springfox', name: 'springfox-swagger-ui', version: '3.0.0'\n}\n```\n\n**Swagger Annotations:**\n\n```java\n@PUT\n@Path(\"/{contextName}/user/{userName}\")\n@Consumes({ \"application/json\" })\n@Produces({ \"application/json\" })\n@ApiOperation(value = \"\", notes = \"\", response = UserProperty.class, tags = {})\n@ApiResponses(value = {\n    @ApiResponse(\n        code = 200,\n        message = \"Successfully updated the user configuration\",\n        response = UserProperty.class),\n\n    @ApiResponse(\n        code = 404,\n        message = \"context or user not found\",\n        response = UserProperty.class),\n\n    @ApiResponse(\n        code = 500,\n        message = \"Server error\",\n        response = UserProperty.class)\n})\nvoid updateUser(\n    @ApiParam(value = \"context name\", required = true)\n    @PathParam(\"contextName\") String contextName,\n\n    @ApiParam(value = \"User name\", required = true)\n    @PathParam(\"userName\") String userName,\n\n    @ApiParam(value = \"The new user configuration\", required = true)\n    UpdateUserRequest updateUserRequest,\n\n    @Context SecurityContext securityContext,\n    @Suspended final AsyncResponse asyncResponse);\n```\n\n**OpenAPI 3.0 Specification:**\n\n```yaml\nopenapi: 3.0.0\ninfo:\n  title: User Management API\n  version: 1.0.0\npaths:\n  /users/{userId}:\n    get:\n      summary: Get user by ID\n      parameters:\n        - name: userId\n          in: path\n          required: true\n          schema:\n            type: string\n      responses:\n        '200':\n          description: User found\n          content:\n            application/json:\n              schema:\n                $ref: '#/components/schemas/User'\n        '404':\n          description: User not found\n```\n\n### Implementation Checklist\n\n- [ ] API contracts defined before implementation\n- [ ] OpenAPI/Swagger documentation generated\n- [ ] Mock servers available for parallel development\n- [ ] Contract tests in place\n- [ ] API versioning strategy defined\n- [ ] Breaking change policy documented\n\n---\n\n## XIV. Telemetry\n\n**Principle:** Design to include collection of monitoring domain/application-specific logs/data, health information, and statistics on modern cloud platforms. With increasing dynamicity in deployments, especially in cloud-native environments, this factor is essential.\n\n### Telemetry Categories\n\n1. **Application Performance Monitoring (APM)**\n   - Stream of events monitoring application performance\n   - Response times, throughput, error rates\n   - Database query performance\n   - External service call metrics\n\n2. **Domain-Specific Telemetry**\n   - Stream of events and data for analytics and reporting\n   - Business metrics and KPIs\n   - User behaviour analytics\n   - Custom application metrics\n\n3. **Health and System Logs**\n   - Application start, shutdown, scaling events\n   - Web request tracing\n   - Periodic health check results\n   - Resource utilisation metrics\n\n### Recommended Tools\n\n| Category | Tools |\n|----------|-------|\n| Health & System Logs | Cloud Provider Tools, ELK Stack |\n| Distributed Tracing | Jaeger, Zipkin, OpenTelemetry |\n| Metrics & Dashboards | Grafana, Prometheus |\n| APM | AppDynamics, New Relic, Datadog |\n| Container Orchestration | Kubernetes metrics, Istio |\n\n### Implementation Examples\n\n**Gradle Dependencies (Java):**\n\n```groovy\ndependencies {\n    // Jaeger dependencies for distributed tracing\n    implementation group: 'io.opentracing.contrib',\n                   name: 'opentracing-spring-jaeger-cloud-starter',\n                   version: '3.1.2'\n    implementation group: 'io.opentracing.contrib',\n                   name: 'opentracing-spring-cloud-starter',\n                   version: '0.5.9'\n\n    // Logging\n    implementation group: 'log4j', name: 'log4j', version: '1.2.17'\n\n    // Health probe - Spring Boot Actuator\n    implementation \"org.springframework.boot:spring-boot-starter-actuator:${spring_boot_version}\"\n}\n```\n\n**Spring Boot Actuator Endpoints:**\n\n```yaml\nmanagement:\n  endpoints:\n    web:\n      exposure:\n        include: health,metrics,prometheus\n  endpoint:\n    health:\n      show-details: always\n```\n\n**Prometheus Metrics (Node.js):**\n\n```javascript\nconst prometheus = require('prom-client');\n\nconst httpRequestsTotal = new prometheus.Counter({\n  name: 'http_requests_total',\n  help: 'Total number of HTTP requests',\n  labelNames: ['method', 'path', 'status']\n});\n\napp.get('/metrics', async (req, res) => {\n  res.set('Content-Type', prometheus.register.contentType);\n  res.end(await prometheus.register.metrics());\n});\n```\n\n### Implementation Checklist\n\n- [ ] APM solution integrated\n- [ ] Health check endpoints exposed\n- [ ] Distributed tracing configured\n- [ ] Metrics collection enabled\n- [ ] Dashboards created for key metrics\n- [ ] Alerting rules defined\n- [ ] Log aggregation configured\n\n---\n\n## XV. Security (Authentication and Authorisation)\n\n**Principle:** Security is essential for any application. All applications, especially cloud-native applications, should secure their APIs using Role-Based Access Control (RBAC). Implement identity for each request to maintain audit trails and track data changes.\n\n### Why Security Matters\n\n- Maintain audit trail of events per user session\n- Track which user made which data changes\n- Protect sensitive data and operations\n- Comply with regulations (GDPR, HIPAA, SOC2)\n- Prevent unauthorised access\n\n### Security Standards and Solutions\n\n| Category | Solutions |\n|----------|-----------|\n| Authentication | OAuth2, OpenID Connect, SAML |\n| Single Sign-On | Okta, Auth0, Keycloak |\n| Authorisation | RBAC, ABAC, Policy engines (OPA) |\n| API Security | JWT tokens, API keys, mTLS |\n| Secret Management | HashiCorp Vault, AWS Secrets Manager |\n\n### Implementation Patterns\n\n**JWT Token Validation (Spring Security):**\n\n```java\n@Configuration\n@EnableWebSecurity\npublic class SecurityConfig extends WebSecurityConfigurerAdapter {\n\n    @Override\n    protected void configure(HttpSecurity http) throws Exception {\n        http\n            .authorizeRequests()\n                .antMatchers(\"/public/**\").permitAll()\n                .antMatchers(\"/admin/**\").hasRole(\"ADMIN\")\n                .anyRequest().authenticated()\n            .and()\n            .oauth2ResourceServer()\n                .jwt();\n    }\n}\n```\n\n**RBAC Implementation (Node.js):**\n\n```javascript\nconst checkRole = (requiredRole) => {\n  return (req, res, next) => {\n    const userRoles = req.user.roles;\n\n    if (!userRoles.includes(requiredRole)) {\n      return res.status(403).json({\n        error: 'Insufficient permissions'\n      });\n    }\n\n    next();\n  };\n};\n\napp.delete('/users/:id',\n  authenticate,\n  checkRole('admin'),\n  deleteUserHandler\n);\n```\n\n**OAuth2 Configuration:**\n\n```yaml\nspring:\n  security:\n    oauth2:\n      resourceserver:\n        jwt:\n          issuer-uri: https://auth.example.com/\n          jwk-set-uri: https://auth.example.com/.well-known/jwks.json\n```\n\n### Security Checklist\n\n- [ ] Authentication mechanism implemented (OAuth2/OIDC)\n- [ ] Authorisation model defined (RBAC/ABAC)\n- [ ] All API endpoints protected\n- [ ] JWT token validation configured\n- [ ] Secret management solution in place\n- [ ] Audit logging enabled\n- [ ] Rate limiting implemented\n- [ ] Input validation on all endpoints\n- [ ] HTTPS enforced everywhere\n- [ ] Security headers configured (CORS, CSP, etc.)\n\n### Zero Trust Principles\n\n1. **Never trust, always verify** - Authenticate every request\n2. **Least privilege access** - Minimum permissions required\n3. **Assume breach** - Design as if network is compromised\n4. **Verify explicitly** - Use multiple factors when possible\n5. **Limit blast radius** - Segment access and permissions\n",
        "plugins/developer/skills/fifteen-factor-app/references/original-factors.md": "# Original Twelve Factors (I-XII)\n\nThis reference contains detailed documentation for the original twelve factors from the Twelve-Factor App methodology.\n\n---\n\n## I. Codebase\n\n**Principle:** One codebase is tracked in version control. There is only one codebase per application, but there will be many deploys of the application.\n\nThe codebase is the same across all deploys, although different versions may be active in each deployment. For example, a developer has some commits not yet deployed to staging; staging has some commits not yet deployed to production.\n\n### Implementation\n\n**Clone an existing Git Repository:**\n\n```bash\ngit clone git@github.com:example/fifteen-factor-app.git\ncd fifteen-factor-app\n```\n\n**Create a new Git Repository:**\n\n```bash\ngit init\ngit add .\ngit commit -m \"Initial commit for the application\"\ngit remote add origin https://github.com/<username>/fifteen-factor-app.git\ngit push -u origin main\n```\n\n### Key Points\n\n- One repository per application\n- Multiple deploys from same codebase\n- Version control is mandatory (Git recommended)\n- Different versions may be active in different environments\n\n---\n\n## II. Dependencies\n\n**Principle:** Never rely on the implicit existence of system-wide packages. Declare all dependencies completely and exactly via a dependency declaration manifest. Use dependency isolation during execution to ensure no implicit dependencies \"leak in\" from the surrounding system.\n\n### Implementation Examples\n\n**Maven (Java):**\n\n```xml\n<dependency>\n  <groupId>com.example</groupId>\n  <artifactId>foo-bar</artifactId>\n  <version>1.2.3</version>\n  <exclusions>\n    <exclusion>\n      <groupId>org.slf4j</groupId>\n      <artifactId>slf4j-api</artifactId>\n    </exclusion>\n  </exclusions>\n</dependency>\n```\n\n**npm (Node.js):**\n\n```json\n{\n  \"dependencies\": {\n    \"express\": \"^4.18.0\",\n    \"lodash\": \"^4.17.21\"\n  }\n}\n```\n\n**pip (Python):**\n\n```text\nflask==2.3.0\nrequests==2.31.0\n```\n\n### Key Points\n\n- Explicit declaration of all dependencies\n- Dependency isolation (virtual environments, containers)\n- Exclude transitive dependencies when necessary\n- Lock file for reproducible builds\n\n---\n\n## III. Config\n\n**Principle:** Everything that varies between different deploys across environments (staging, production, developer environments) is configuration. This includes:\n\n- Database, distributed cache, and other backing services configuration\n- Credentials to external services (Azure Event Hub, Amazon S3, Media Server)\n- Application connectivity information (IP addresses, ports, hostnames)\n\nApplication configuration should never be hardcoded. Save configuration values in environment variables or externalise the configuration.\n\n### Implementation Examples\n\n**Spring Framework (Java):**\n\n```properties\nspring.datasource.url=jdbc:mysql://${MYSQL_HOST}:${MYSQL_PORT}/movies\nspring.datasource.username=${MYSQL_USER}\nspring.datasource.password=${MYSQL_PASSWORD}\n```\n\n**Node.js:**\n\n```javascript\nconst config = {\n  database: {\n    host: process.env.DB_HOST,\n    port: process.env.DB_PORT,\n    user: process.env.DB_USER,\n    password: process.env.DB_PASSWORD\n  }\n};\n```\n\n### Key Points\n\n- Never hardcode configuration\n- Use environment variables\n- Consider external config servers (Spring Cloud Config, Consul)\n- Separate config from code\n\n---\n\n## IV. Backing Services\n\n**Principle:** All backing services, whether local or third-party, should be treated as attached resources. The application code makes no distinction between local and third-party services. All are attached resources accessed via URL or other locator/credentials stored in config.\n\nAttached resources can be swapped at any point without impacting the service.\n\n### Examples of Backing Services\n\n- Data stores: Oracle, MongoDB, MySQL, PostgreSQL\n- Messaging/queueing systems: ActiveMQ, RabbitMQ, Kafka\n- SMTP services: Postfix, SendGrid\n- Caching systems: Redis, Memcached\n\n### Implementation Example\n\n**Spring JPA (Java):**\n\n```java\n@Repository\npublic interface JoggingRepository extends JpaRepository<Jogger, Long> {\n}\n```\n\nThe code is agnostic to the actual database provider - just defining the repository makes all standard operations available.\n\n### Key Points\n\n- Abstract backing services\n- Resources are attached and detachable\n- No code changes required to swap services\n- Use configuration for connection details\n\n---\n\n## V. Build, Release, Run\n\n**Principle:** Enforce strict separation between the build, release, and run stages. Code changes are not possible at runtime as there is no way to propagate those changes back to the build stage.\n\nAutomation using CI/CD tools (like Jenkins, GitHub Actions) facilitates the build and deployment process. Containerisation tools (like Docker) make it easy to separate stages efficiently.\n\n### The Three Stages\n\n**Build Stage:** Transform code repo into executable bundle (build)\n\n```bash\nmvn clean install\nnpm run build\n```\n\n**Release Stage:** Combine build with deploy's current config\n\n```bash\ndocker build -t myapp:v1.2.3 .\n```\n\n**Run Stage:** Run the app in execution environment by launching processes\n\n```bash\ndocker run --name <container_id> -it <image_id>\n```\n\n### Key Points\n\n- Builds are immutable\n- Releases combine builds with configuration\n- Runtime changes are prohibited\n- Every release has unique ID\n\n---\n\n## VI. Stateless Processes\n\n**Principle:** Execute the app as one or more stateless processes. All processes are stateless and share nothing. Any data that needs to be persisted must be stored in a stateful backing service (such as a datastore).\n\nBy making applications aligned with stateless behaviour (REST), services can be horizontally scaled as per requirements without any impact.\n\n### Key Points\n\n- No local state in processes\n- Session data in external store (Redis, database)\n- Enables horizontal scaling\n- No sticky sessions\n- Process can be killed and restarted anytime\n\n---\n\n## VII. Port Binding\n\n**Principle:** Export services via port binding. The application is completely self-contained and does not rely on runtime injection of a webserver into the execution environment to create a web-facing service.\n\nFrom a Java perspective, Spring Boot is an example as it by default comes with an embedded server.\n\n### Implementation Example\n\n**Docker:**\n\n```bash\ndocker run --restart always --name mysql8.0 \\\n  --net dev-network \\\n  -v /tools/ext-docker/mysqlext:/var/lib/mysql \\\n  -p 3306:3306 \\\n  -d -e MYSQL_ROOT_PASSWORD=some-pass mysql:8.0\n```\n\n### Key Points\n\n- Self-contained applications\n- Embedded web servers (Tomcat, Jetty, Undertow)\n- No external webserver dependency\n- Services accessible via port\n\n---\n\n## VIII. Concurrency\n\n**Principle:** Scale out via the process model. Applications should be designed to distribute workload across multiple processes. Individual processes can leverage concurrency models like threads internally.\n\nThe share-nothing, horizontally partitionable nature of application processes means that adding more concurrency is a simple and reliable operation.\n\n### Implementation Example\n\n**Docker:**\n\n```bash\ndocker run --name 15factor-app-1 -p 8081:8080 \\\n  --network dev-network -d vikasg11/15factor-app:0.0.1-SNAPSHOT\n\ndocker run --name 15factor-app-2 -p 8082:8080 \\\n  --network dev-network -d vikasg11/15factor-app:0.0.1-SNAPSHOT\n```\n\n### Key Points\n\n- Horizontal scaling preferred\n- Multiple process instances\n- Load balancing across instances\n- Internal threading for CPU-bound tasks\n\n---\n\n## IX. Disposability\n\n**Principle:** Maximise robustness with fast startup and graceful shutdown. Processes are disposable - they can be started or stopped at a moment's notice. Graceful shutdowns are essential to ensure the correct state.\n\nIn containerisation and microservices, deployment processes implicitly follow this principle to a greater extent.\n\n### Key Points\n\n- Fast startup times (seconds, not minutes)\n- Graceful shutdown on SIGTERM\n- Complete in-flight requests\n- Release resources properly\n- Handle unexpected termination (SIGKILL)\n\n---\n\n## X. Dev/Prod Parity\n\n**Principle:** Keep development, staging, and production as similar as possible. The application is designed for continuous deployment by keeping the gap between development and production small.\n\nThe principle also resists using different backing services between development and production, even when adapters theoretically abstract away differences.\n\n### Key Points\n\n- Minimise time gap (deploy quickly)\n- Minimise personnel gap (developers deploy)\n- Minimise tools gap (same backing services)\n- Use containers for consistency\n- Infrastructure as Code (Terraform, Pulumi)\n\n---\n\n## XI. Logs\n\n**Principle:** Treat logs as event streams. Logs provide visibility into the behaviour of a running app. They are the stream of aggregated, time-ordered events collected from output streams of all running processes and backing services.\n\nSeparate log generation from log processing.\n\n### Implementation\n\n**Gradle (Java):**\n\n```groovy\ndependencies {\n    implementation group: 'log4j', name: 'log4j', version: '1.2.17'\n}\n```\n\n### Recommended Stack\n\n- **Fluentd** - Collect stream of logs\n- **Elasticsearch** - Storage and indexing\n- **Kibana** - Visualisation and dashboards\n\n### Key Points\n\n- Write to stdout/stderr\n- No local log files\n- Centralised log aggregation\n- Time-ordered event streams\n- Separate generation from processing\n\n---\n\n## XII. Admin Processes\n\n**Principle:** Run admin/management tasks as one-off processes. One-off admin processes should run in an identical environment as the regular long-running processes of the app.\n\nAdmin code must ship with application code to avoid synchronisation issues. Ensure one-off scripts are automated so they are not executed manually before releasing the build.\n\n### Examples of Admin Processes\n\n- Database migrations\n- Console/REPL for debugging\n- One-off scripts for data fixes\n- Report generation\n\n### Key Points\n\n- Same environment as app\n- Ship with application code\n- Automate, don't run manually\n- Use same dependency isolation\n- Version controlled with app code\n",
        "plugins/developer/skills/fifteen-factor-app/references/overview.md": "# Fifteen-Factor App Methodology - Overview\n\n## Introduction\n\nThe Fifteen-Factor App methodology is an extension of the original Twelve-Factor App principles created by Heroku programmers in 2012. The original methodology provided general principles and guidelines for creating robust enterprise applications. With the evolution of modern application architectures - particularly containerised cloud-native applications and microservices - three additional factors have been identified as essential.\n\n## The Extended Methodology\n\nThe Fifteen-Factor App methodology adds three factors to address modern architectural requirements:\n\n1. **API First Approach** - Design service contracts before implementation\n2. **Telemetry** - Monitor distributed application deployments\n3. **Security** - Implement authentication and authorisation for each request\n\n## Core Principles\n\nThe methodology remains aligned with the original Twelve-Factor principles:\n\n- Use **Declarative Formats** for setup automation, minimising time and cost for new developers\n- Have a **Clean Contract**, offering maximum portability between execution environments\n- Are suitable for deployment on **modern Cloud Platforms**, obviating the need for dedicated servers\n- **Minimise Divergence** between development and production, enabling continuous deployment\n- **Dynamically Scalable** without significant changes to tooling, architecture, or development practices\n- **Service-Driven Approach** - Contracts available for frontend clients, routing gateways, or downstream systems\n- **Monitoring** distributed deployments for domain/application-specific data, health, and statistics\n- **Security** addressed appropriately with identity implementation for each request\n\n## Factor Summary Table\n\n| # | Factor | Principle | Implementation Focus |\n|---|--------|-----------|---------------------|\n| I | Codebase | One codebase tracked in version control | Git repository, branching strategy |\n| II | Dependencies | Explicitly declare and isolate | Package managers (Maven, npm, pip) |\n| III | Config | Store config in environment | Environment variables, external config |\n| IV | Backing Services | Treat as attached resources | Database abstraction, service locators |\n| V | Build, Release, Run | Strict separation of stages | CI/CD pipelines, immutable artifacts |\n| VI | Processes | Stateless and share-nothing | Horizontal scaling, external state |\n| VII | Port Binding | Export services via port | Self-contained services, embedded servers |\n| VIII | Concurrency | Scale out via process model | Container orchestration, load balancing |\n| IX | Disposability | Fast startup, graceful shutdown | Health checks, signal handling |\n| X | Dev/Prod Parity | Keep environments similar | Docker, infrastructure as code |\n| XI | Logs | Treat as event streams | Log aggregation, centralised logging |\n| XII | Admin Processes | Run as one-off processes | Automated scripts, same environment |\n| XIII | API First | Design contracts first | OpenAPI/Swagger, contract testing |\n| XIV | Telemetry | Monitor everything | APM, metrics, distributed tracing |\n| XV | Security | Authentication & Authorisation | OAuth2, RBAC, identity management |\n\n## Factor Categories\n\n### Foundation Factors (I-VI)\n\nThese establish the fundamental architecture:\n\n- **Codebase** - Version control and deployment model\n- **Dependencies** - Package management and isolation\n- **Config** - Externalised configuration\n- **Backing Services** - Service abstraction\n- **Build/Release/Run** - Deployment pipeline\n- **Processes** - Stateless architecture\n\n### Operational Factors (VII-XII)\n\nThese ensure operational excellence:\n\n- **Port Binding** - Service exposure\n- **Concurrency** - Scaling model\n- **Disposability** - Resilience\n- **Dev/Prod Parity** - Environment consistency\n- **Logs** - Observability\n- **Admin Processes** - Maintenance\n\n### Modern Extensions (XIII-XV)\n\nThese address contemporary requirements:\n\n- **API First** - Contract-driven development\n- **Telemetry** - Full observability stack\n- **Security** - Zero-trust architecture\n\n## Architecture Decision Framework\n\nWhen designing a new application or evaluating an existing one, use this decision framework:\n\n### Phase 1: Foundation\n\n1. How will the codebase be structured and versioned?\n2. How will dependencies be declared and isolated?\n3. Where will configuration be stored?\n4. How will backing services be abstracted?\n5. What is the build/release/run pipeline?\n6. How will state be managed externally?\n\n### Phase 2: Operations\n\n7. How will services expose their ports?\n8. What is the horizontal scaling strategy?\n9. How will services handle startup/shutdown?\n10. How will environments be kept consistent?\n11. How will logs be collected and processed?\n12. How will admin tasks be automated?\n\n### Phase 3: Modern Requirements\n\n13. Are API contracts defined before implementation?\n14. Is comprehensive telemetry in place?\n15. Is security properly implemented throughout?\n\n## Related References\n\n- `original-factors.md` - Detailed documentation for factors I-XII\n- `modern-extensions.md` - Detailed documentation for factors XIII-XV\n- `setup-and-tools.md` - Tooling and implementation guidance\n",
        "plugins/developer/skills/fifteen-factor-app/references/setup-and-tools.md": "# Setup and Tools Reference\n\nThis reference provides quick setup guidance and tooling recommendations for implementing the Fifteen-Factor App methodology.\n\n---\n\n## Git Quick Start\n\nConfigure your Git user before starting:\n\n```bash\ngit config --global user.name \"Your Fullname\"\ngit config --global user.email \"Your Email\"\n```\n\nFor Windows users, Git Bash is recommended for a better command-line experience.\n\n### Connecting to GitHub Using SSH\n\nRefer to [GitHub SSH documentation](https://docs.github.com/en/github/authenticating-to-github/connecting-to-github-with-ssh) to set up SSH for your GitHub account.\n\n### Clone an Application\n\n```bash\ngit clone git@github.com:example/fifteen-factor-app.git\ncd fifteen-factor-app\n```\n\n---\n\n## Java/Spring Framework Stack\n\n### Recommended Tools\n\n| Tool | Version | Required |\n|------|---------|----------|\n| JDK | 17+ (LTS) | Yes |\n| Java IDE | IntelliJ IDEA / VS Code | Yes |\n| Gradle | 8.x | Yes |\n| Maven | 3.9.x | Alternative |\n| Git client | 2.x | Yes |\n| Docker | 24.x | Yes |\n| Spring Boot | 3.2.x | Yes |\n\n### Spring Boot Starter Dependencies\n\n```groovy\ndependencies {\n    // Web\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n\n    // Data\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n\n    // Security\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    implementation 'org.springframework.boot:spring-boot-starter-oauth2-resource-server'\n\n    // Observability\n    implementation 'org.springframework.boot:spring-boot-starter-actuator'\n    implementation 'io.micrometer:micrometer-registry-prometheus'\n\n    // Tracing\n    implementation 'io.micrometer:micrometer-tracing-bridge-otel'\n    implementation 'io.opentelemetry:opentelemetry-exporter-otlp'\n}\n```\n\n---\n\n## Node.js/TypeScript Stack\n\n### Recommended Tools\n\n| Tool | Version | Required |\n|------|---------|----------|\n| Node.js | 20+ (LTS) | Yes |\n| pnpm | 8.x | Yes |\n| TypeScript | 5.x | Yes |\n| Docker | 24.x | Yes |\n\n### Essential Packages\n\n```json\n{\n  \"dependencies\": {\n    \"express\": \"^4.18.0\",\n    \"dotenv\": \"^16.0.0\",\n    \"winston\": \"^3.11.0\",\n    \"prom-client\": \"^15.0.0\"\n  },\n  \"devDependencies\": {\n    \"typescript\": \"^5.3.0\",\n    \"@types/node\": \"^20.0.0\",\n    \"@types/express\": \"^4.17.0\"\n  }\n}\n```\n\n---\n\n## Python Stack\n\n### Recommended Tools\n\n| Tool | Version | Required |\n|------|---------|----------|\n| Python | 3.11+ | Yes |\n| pip | Latest | Yes |\n| Poetry | 1.7+ | Recommended |\n| Docker | 24.x | Yes |\n\n### Essential Packages\n\n```text\nfastapi>=0.109.0\nuvicorn>=0.27.0\npython-dotenv>=1.0.0\nstructlog>=24.1.0\nprometheus-client>=0.19.0\n```\n\n---\n\n## Container and Orchestration\n\n### Docker Basics\n\n**Dockerfile Example:**\n\n```dockerfile\nFROM node:20-alpine AS builder\nWORKDIR /app\nCOPY package*.json ./\nRUN npm ci\nCOPY . .\nRUN npm run build\n\nFROM node:20-alpine\nWORKDIR /app\nCOPY --from=builder /app/dist ./dist\nCOPY --from=builder /app/node_modules ./node_modules\nEXPOSE 3000\nCMD [\"node\", \"dist/index.js\"]\n```\n\n**Docker Compose:**\n\n```yaml\nversion: '3.8'\nservices:\n  app:\n    build: .\n    ports:\n      - \"3000:3000\"\n    environment:\n      - DATABASE_URL=${DATABASE_URL}\n      - REDIS_URL=${REDIS_URL}\n    depends_on:\n      - db\n      - redis\n\n  db:\n    image: postgres:16-alpine\n    environment:\n      POSTGRES_DB: app\n      POSTGRES_USER: user\n      POSTGRES_PASSWORD: ${DB_PASSWORD}\n    volumes:\n      - postgres_data:/var/lib/postgresql/data\n\n  redis:\n    image: redis:7-alpine\n\nvolumes:\n  postgres_data:\n```\n\n### Kubernetes Basics\n\n**Deployment:**\n\n```yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: fifteen-factor-app\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: fifteen-factor-app\n  template:\n    metadata:\n      labels:\n        app: fifteen-factor-app\n    spec:\n      containers:\n      - name: app\n        image: myapp:latest\n        ports:\n        - containerPort: 3000\n        envFrom:\n        - configMapRef:\n            name: app-config\n        - secretRef:\n            name: app-secrets\n        livenessProbe:\n          httpGet:\n            path: /health\n            port: 3000\n          initialDelaySeconds: 10\n          periodSeconds: 10\n        readinessProbe:\n          httpGet:\n            path: /ready\n            port: 3000\n          initialDelaySeconds: 5\n          periodSeconds: 5\n```\n\n---\n\n## CI/CD Pipelines\n\n### GitHub Actions Example\n\n```yaml\nname: CI/CD Pipeline\n\non:\n  push:\n    branches: [main]\n  pull_request:\n    branches: [main]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Set up Node.js\n        uses: actions/setup-node@v4\n        with:\n          node-version: '20'\n          cache: 'pnpm'\n\n      - name: Install dependencies\n        run: pnpm install\n\n      - name: Run tests\n        run: pnpm test\n\n      - name: Build\n        run: pnpm build\n\n      - name: Build and push Docker image\n        if: github.ref == 'refs/heads/main'\n        run: |\n          docker build -t myapp:${{ github.sha }} .\n          docker push myapp:${{ github.sha }}\n```\n\n---\n\n## Observability Stack\n\n### ELK Stack (Logs)\n\n- **Elasticsearch** - Log storage and indexing\n- **Logstash/Fluentd** - Log collection and processing\n- **Kibana** - Visualisation and dashboards\n\n### Prometheus + Grafana (Metrics)\n\n**Prometheus scrape config:**\n\n```yaml\nscrape_configs:\n  - job_name: 'app'\n    static_configs:\n      - targets: ['app:3000']\n    metrics_path: '/metrics'\n```\n\n### Jaeger/Zipkin (Tracing)\n\n**OpenTelemetry setup:**\n\n```javascript\nconst { NodeSDK } = require('@opentelemetry/sdk-node');\nconst { OTLPTraceExporter } = require('@opentelemetry/exporter-trace-otlp-http');\n\nconst sdk = new NodeSDK({\n  traceExporter: new OTLPTraceExporter({\n    url: 'http://jaeger:4318/v1/traces',\n  }),\n});\n\nsdk.start();\n```\n\n---\n\n## Security Tools\n\n### Secret Management\n\n- **HashiCorp Vault** - Enterprise secret management\n- **AWS Secrets Manager** - AWS-native secrets\n- **1Password CLI** - Developer-friendly option\n- **doppler** - Environment variable sync\n\n### API Security\n\n- **Auth0** - Identity as a Service\n- **Keycloak** - Self-hosted identity provider\n- **OAuth2 Proxy** - Add auth to any service\n\n---\n\n## Development Environment\n\n### Recommended VS Code Extensions\n\n```json\n{\n  \"recommendations\": [\n    \"ms-azuretools.vscode-docker\",\n    \"esbenp.prettier-vscode\",\n    \"dbaeumer.vscode-eslint\",\n    \"ms-kubernetes-tools.vscode-kubernetes-tools\",\n    \"redhat.vscode-yaml\",\n    \"42crunch.vscode-openapi\"\n  ]\n}\n```\n\n### Environment Variables Template\n\nCreate a `.env.example` file:\n\n```bash\n# Application\nNODE_ENV=development\nPORT=3000\nLOG_LEVEL=debug\n\n# Database\nDATABASE_URL=postgresql://user:password@localhost:5432/app\n\n# Cache\nREDIS_URL=redis://localhost:6379\n\n# External Services\nAPI_KEY=your-api-key-here\nOAUTH_CLIENT_ID=your-client-id\nOAUTH_CLIENT_SECRET=your-client-secret\n\n# Observability\nOTEL_EXPORTER_OTLP_ENDPOINT=http://localhost:4318\n```\n",
        "plugins/developer/skills/git-commit-helper/SKILL.md": "---\nname: git-commit-helper\ndescription: Generate descriptive commit messages by analyzing git diffs. Use when the user asks for help writing commit messages or reviewing staged changes.\nuser-invocable: false\n---\n\n# Git Commit Helper\n\n## Quick start\n\nAnalyze staged changes and generate commit message:\n\n```bash\n# View staged changes\ngit diff --staged\n\n# Generate commit message based on changes\n# (Claude will analyze the diff and suggest a message)\n```\n\n## Commit message format\n\nFollow conventional commits format:\n\n```\n<type>(<scope>): <description>\n\n[optional body]\n\n[optional footer]\n```\n\n### Types\n\n- **feat**: New feature\n- **fix**: Bug fix\n- **docs**: Documentation changes\n- **style**: Code style changes (formatting, missing semicolons)\n- **refactor**: Code refactoring\n- **test**: Adding or updating tests\n- **chore**: Maintenance tasks\n\n### Examples\n\n**Feature commit:**\n```\nfeat(auth): add JWT authentication\n\nImplement JWT-based authentication system with:\n- Login endpoint with token generation\n- Token validation middleware\n- Refresh token support\n```\n\n**Bug fix:**\n```\nfix(api): handle null values in user profile\n\nPrevent crashes when user profile fields are null.\nAdd null checks before accessing nested properties.\n```\n\n**Refactor:**\n```\nrefactor(database): simplify query builder\n\nExtract common query patterns into reusable functions.\nReduce code duplication in database layer.\n```\n\n## Analyzing changes\n\nReview what's being committed:\n\n```bash\n# Show files changed\ngit status\n\n# Show detailed changes\ngit diff --staged\n\n# Show statistics\ngit diff --staged --stat\n\n# Show changes for specific file\ngit diff --staged path/to/file\n```\n\n## Commit message guidelines\n\n**DO:**\n- Use imperative mood (\"add feature\" not \"added feature\")\n- Keep first line under 50 characters\n- Capitalize first letter\n- No period at end of summary\n- Explain WHY not just WHAT in body\n\n**DON'T:**\n- Use vague messages like \"update\" or \"fix stuff\"\n- Include technical implementation details in summary\n- Write paragraphs in summary line\n- Use past tense\n\n## Multi-file commits\n\nWhen committing multiple related changes:\n\n```\nrefactor(core): restructure authentication module\n\n- Move auth logic from controllers to service layer\n- Extract validation into separate validators\n- Update tests to use new structure\n- Add integration tests for auth flow\n\nBreaking change: Auth service now requires config object\n```\n\n## Scope examples\n\n**Frontend:**\n- `feat(ui): add loading spinner to dashboard`\n- `fix(form): validate email format`\n\n**Backend:**\n- `feat(api): add user profile endpoint`\n- `fix(db): resolve connection pool leak`\n\n**Infrastructure:**\n- `chore(ci): update Node version to 20`\n- `feat(docker): add multi-stage build`\n\n## Breaking changes\n\nIndicate breaking changes clearly:\n\n```\nfeat(api)!: restructure API response format\n\nBREAKING CHANGE: All API responses now follow JSON:API spec\n\nPrevious format:\n{ \"data\": {...}, \"status\": \"ok\" }\n\nNew format:\n{ \"data\": {...}, \"meta\": {...} }\n\nMigration guide: Update client code to handle new response structure\n```\n\n## Template workflow\n\n1. **Review changes**: `git diff --staged`\n2. **Identify type**: Is it feat, fix, refactor, etc.?\n3. **Determine scope**: What part of the codebase?\n4. **Write summary**: Brief, imperative description\n5. **Add body**: Explain why and what impact\n6. **Note breaking changes**: If applicable\n\n## Interactive commit helper\n\nUse `git add -p` for selective staging:\n\n```bash\n# Stage changes interactively\ngit add -p\n\n# Review what's staged\ngit diff --staged\n\n# Commit with message\ngit commit -m \"type(scope): description\"\n```\n\n## Amending commits\n\nFix the last commit message:\n\n```bash\n# Amend commit message only\ngit commit --amend\n\n# Amend and add more changes\ngit add forgotten-file.js\ngit commit --amend --no-edit\n```\n\n## Best practices\n\n1. **Atomic commits** - One logical change per commit\n2. **Test before commit** - Ensure code works\n3. **Reference issues** - Include issue numbers if applicable\n4. **Keep it focused** - Don't mix unrelated changes\n5. **Write for humans** - Future you will read this\n\n## Commit message checklist\n\n- [ ] Type is appropriate (feat/fix/docs/etc.)\n- [ ] Scope is specific and clear\n- [ ] Summary is under 50 characters\n- [ ] Summary uses imperative mood\n- [ ] Body explains WHY not just WHAT\n- [ ] Breaking changes are clearly marked\n- [ ] Related issue numbers are included\n",
        "plugins/developer/skills/prp-generator/SKILL.md": "---\nname: prp-generator\ndescription: Generate comprehensive Product Requirement Plans (PRPs) for feature implementation with thorough codebase analysis and external research. Use when the user requests a PRP, PRD, or detailed implementation plan for a new feature. Conducts systematic research, identifies patterns, and creates executable validation gates for one-pass implementation success.\ncontext: fork\nagent: Plan\n---\n\n# PRP Generator\n\n## Overview\n\nThis skill generates comprehensive Product Requirement Plans (PRPs) that enable AI agents to implement features in a single pass with high success rates. The skill combines systematic codebase analysis with external research to create detailed, context-rich implementation blueprints.\n\n## When to Use This Skill\n\nInvoke this skill when:\n- User requests a PRP or PRD (Product Requirement Plan/Document)\n- User wants a detailed implementation plan for a new feature\n- User asks to \"plan out\" or \"design\" a complex feature\n- Beginning a significant feature development that would benefit from structured planning\n- User provides a feature description file and asks for implementation guidance\n\n## Core Principle\n\n**Context is Everything**: The AI agent implementing your PRP only receives:\n1. The PRP content you create\n2. Training data knowledge\n3. Access to the codebase\n4. WebSearch capabilities\n\nTherefore, your PRP must be self-contained with all necessary context, specific references, and executable validation gates.\n\n## Workflow\n\n### Phase 1: Understanding the Feature\n\n1. **Read the Feature Request**\n   - If user provides a feature file path, read it completely\n   - If user provides verbal description, clarify requirements by asking:\n     - What is the user trying to accomplish?\n     - What are the acceptance criteria?\n     - Are there any specific constraints or requirements?\n   - Identify the core problem being solved\n\n2. **Clarify Ambiguities**\n   - Use AskUserQuestion tool for any unclear requirements\n   - Confirm technology stack assumptions\n   - Verify integration points\n   - Ask about specific patterns to follow if not obvious\n\n### Phase 2: Codebase Analysis (Mandatory)\n\n**Goal**: Understand existing patterns, conventions, and integration points\n\nRefer to `references/research_methodology.md` for detailed guidance, but the core steps are:\n\n1. **Search for Similar Features**\n   ```\n   Use Grep to search for:\n   - Similar component names\n   - Similar functionality keywords\n   - Similar UI patterns\n   - Similar API endpoints\n   ```\n\n   Document findings with:\n   - Exact file paths and line numbers\n   - Code snippets showing patterns\n   - Relevance to new feature\n   - Necessary adaptations\n\n2. **Identify Architectural Patterns**\n   - Directory structure conventions\n   - Component organization patterns\n   - State management approach\n   - API structure patterns\n   - Routing patterns (if applicable)\n\n   Example findings:\n   ```\n   Pattern: Feature-based directory structure\n   Location: src/features/\n   Application: Create src/features/[new-feature]/\n   ```\n\n3. **Document Coding Conventions**\n   - TypeScript usage patterns (interfaces vs types, strict mode)\n   - Component patterns (FC vs function, default vs named exports)\n   - Styling approach (CSS modules, styled-components, Tailwind)\n   - Import ordering and organization\n   - Function and variable naming\n   - Comment style\n\n   Example:\n   ```\n   Convention: Named exports for all components\n   Example: export function UserProfile() { ... }\n   Found in: src/components/*.tsx\n   ```\n\n4. **Study Test Patterns**\n   - Test framework and version\n   - Test file naming and location\n   - Mock strategies\n   - Coverage expectations\n   - Example test to mirror\n\n   Document:\n   ```\n   Framework: Vitest + @testing-library/react\n   Pattern: Co-located tests with *.test.tsx\n   Example: src/components/Button/Button.test.tsx\n   Mock Strategy: Use vi.fn() for functions, MSW for HTTP\n   ```\n\n5. **Check Project Configuration**\n   - Review `package.json` for dependencies and scripts\n   - Check `tsconfig.json` for TypeScript settings\n   - Review build configuration (vite.config.ts, etc.)\n   - Note path aliases and special configurations\n\n   Document:\n   ```\n   Build Tool: Vite 5.x\n   Path Aliases: '@/' â†’ 'src/', '@components/' â†’ 'src/components/'\n   TypeScript: Strict mode enabled\n   ```\n\n### Phase 3: External Research (Mandatory)\n\n**Goal**: Find best practices, documentation, examples, and gotchas\n\nRefer to `references/research_methodology.md` for detailed guidance, but the core steps are:\n\n1. **Search for Library Documentation**\n   - Go to official documentation for any libraries being used\n   - Find the SPECIFIC version in package.json\n   - Document exact URLs to relevant sections\n   - Note version-specific features or changes\n\n   Example output:\n   ```\n   Library: @tanstack/react-query\n   Version: 5.28.0 (from package.json)\n   Docs: https://tanstack.com/query/latest/docs/react/overview\n   Key Sections:\n     - Queries: https://tanstack.com/query/latest/docs/react/guides/queries\n     - Mutations: https://tanstack.com/query/latest/docs/react/guides/mutations\n   Gotchas:\n     - Query keys must be arrays\n     - Automatic refetching on window focus\n     - Default staleTime is 0\n   ```\n\n2. **Find Implementation Examples**\n   - Search GitHub for similar implementations\n   - Look for StackOverflow solutions (recent, highly-voted)\n   - Find blog posts from reputable sources\n   - Check official example repositories\n\n   Document:\n   ```\n   Example: Form validation with React Hook Form + Zod\n   Source: https://github.com/react-hook-form/react-hook-form/tree/master/examples/V7/zodResolver\n   Relevance: Shows exact integration pattern needed\n   Key Takeaway: Use zodResolver from @hookform/resolvers\n   ```\n\n3. **Research Best Practices**\n   - Search for \"[technology] best practices [current year]\"\n   - Look for common pitfalls and gotchas\n   - Research performance considerations\n   - Check security implications (OWASP guidelines)\n\n   Document:\n   ```\n   Practice: Input sanitization for user content\n   Why: Prevent XSS attacks\n   How: Use DOMPurify before rendering HTML\n   Reference: https://owasp.org/www-community/attacks/xss/\n   Warning: NEVER use dangerouslySetInnerHTML without sanitization\n   ```\n\n4. **Performance & Security Research**\n   - Bundle size implications of new dependencies\n   - Runtime performance patterns\n   - Security vulnerabilities to avoid\n   - Accessibility considerations\n\n   Document specific URLs and recommendations\n\n### Phase 4: Ultra-Thinking (Critical)\n\n**STOP AND THINK DEEPLY BEFORE WRITING THE PRP**\n\nThis is the most important phase. Spend significant time analyzing:\n\n1. **Integration Analysis**\n   - How does the new feature connect to existing code?\n   - What existing patterns should be followed?\n   - Where might conflicts arise?\n   - What files will need to be created vs modified?\n\n2. **Implementation Path Planning**\n   - What is the logical order of implementation steps?\n   - What are the dependencies between steps?\n   - Where are the potential roadblocks?\n   - What edge cases need handling?\n\n3. **Validation Strategy**\n   - What can be validated automatically?\n   - What requires manual testing?\n   - How can the implementer verify each step?\n   - What are the success criteria?\n\n4. **Context Completeness Check**\n   Ask yourself:\n   - Could an AI agent implement this without asking questions?\n   - Are all integration points documented?\n   - Are all necessary examples included?\n   - Are gotchas and warnings clearly stated?\n   - Are validation gates executable?\n   - Is the implementation path clear and logical?\n\n5. **Quality Assessment**\n   - Is this PRP comprehensive enough for one-pass implementation?\n   - What could cause the implementation to fail?\n   - What additional context would be helpful?\n   - Are all assumptions documented?\n\n### Phase 5: Generate the PRP\n\nUse the template from `assets/prp_template.md` as the base structure, and populate it with:\n\n1. **Metadata Section**\n   - Feature name\n   - Timeline estimate\n   - Confidence score (1-10)\n   - Creation date\n\n2. **Executive Summary**\n   - 2-3 sentences describing the feature\n   - Core value proposition\n\n3. **Research Findings**\n   - Codebase analysis results (with file:line references)\n   - External research (with specific URLs and sections)\n   - Document EVERYTHING discovered in Phase 2 and 3\n\n4. **Technical Specification**\n   - Architecture overview\n   - Component breakdown\n   - Data models\n   - API endpoints (if applicable)\n\n5. **Implementation Blueprint**\n   - Prerequisites\n   - Step-by-step implementation (with pseudocode)\n   - File-by-file changes\n   - Reference patterns from codebase\n   - Error handling strategy\n   - Edge cases\n\n6. **Testing Strategy**\n   - Unit test approach\n   - Integration test approach\n   - Manual testing checklist\n\n7. **Validation Gates**\n   Must be EXECUTABLE commands:\n   ```bash\n   # Type checking\n   npm run type-check\n\n   # Linting\n   npm run lint\n\n   # Tests\n   npm run test\n\n   # Build\n   npm run build\n   ```\n\n8. **Success Criteria**\n   - Clear, measurable completion criteria\n   - Checklist format\n\n### Phase 6: Quality Scoring\n\nScore the PRP on a scale of 1-10 for one-pass implementation success:\n\n**Scoring Criteria**:\n- **9-10**: Exceptionally detailed, all context included, clear path, executable gates\n- **7-8**: Very good, minor gaps, mostly clear implementation path\n- **5-6**: Adequate, some ambiguity, may require clarification\n- **3-4**: Incomplete research, missing context, unclear path\n- **1-2**: Insufficient for implementation\n\n**If score is below 7**: Go back and improve the PRP before delivering it.\n\n### Phase 7: Save and Deliver\n\n1. **Determine Feature Name**\n   - Use kebab-case\n   - Be descriptive but concise\n   - Example: \"user-authentication\", \"dark-mode-toggle\", \"data-export\"\n\n2. **Save the PRP**\n   ```\n   Save to: PRPs/[feature-name].md\n   ```\n\n   If PRPs directory doesn't exist, create it:\n   ```bash\n   mkdir -p PRPs\n   ```\n\n3. **Deliver Summary to User**\n   Provide:\n   - Brief summary of the feature\n   - Location of saved PRP\n   - Confidence score and rationale\n   - Next steps recommendation\n\n## Quality Checklist\n\nBefore delivering the PRP, verify:\n\n- [ ] Feature requirements fully understood\n- [ ] Codebase analysis completed with specific file references\n- [ ] External research completed with URLs and versions\n- [ ] All similar patterns identified and documented\n- [ ] Coding conventions documented\n- [ ] Test patterns identified\n- [ ] Implementation steps clearly defined\n- [ ] Validation gates are executable (not pseudo-code)\n- [ ] Error handling strategy documented\n- [ ] Edge cases identified\n- [ ] Success criteria defined\n- [ ] Confidence score 7+ (if not, improve the PRP)\n- [ ] No assumptions left undocumented\n- [ ] Integration points clearly identified\n- [ ] PRP saved to correct location\n\n## Common Pitfalls to Avoid\n\n1. **Vague References**\n   - âŒ \"There's a similar component somewhere\"\n   - âœ… \"See UserProfile at src/components/UserProfile.tsx:45-67\"\n\n2. **Missing Version Information**\n   - âŒ \"Use React Query\"\n   - âœ… \"Use @tanstack/react-query v5.28.0\"\n\n3. **Non-Executable Validation Gates**\n   - âŒ \"Run tests and make sure they pass\"\n   - âœ… \"npm run test && npm run build\"\n\n4. **Generic Best Practices**\n   - âŒ \"Follow React best practices\"\n   - âœ… \"Use named exports (see src/components/Button.tsx:1)\"\n\n5. **Incomplete Research**\n   - âŒ Skipping codebase analysis\n   - âœ… Thoroughly document existing patterns\n\n6. **Missing Gotchas**\n   - âŒ Assuming smooth implementation\n   - âœ… Document known issues and edge cases\n\n## Example Usage\n\n**User Request**:\n> \"Create a PRP for adding dark mode support to the application\"\n\n**Your Response**:\n1. Clarify: \"Should dark mode preference persist across sessions? Should it respect system preferences?\"\n2. Research codebase for theme-related code\n3. Research external resources (dark mode best practices, library options)\n4. Ultra-think about implementation approach\n5. Generate comprehensive PRP using template\n6. Score the PRP\n7. Save to `PRPs/dark-mode-support.md`\n8. Deliver summary with confidence score\n\n## Resources\n\n### Template\n- `assets/prp_template.md` - Base template for all PRPs\n\n### References\n- `references/research_methodology.md` - Detailed research guidance and best practices\n\n## Notes\n\n- **Research is mandatory**: Never skip codebase or external research\n- **Be specific**: Always include file paths, line numbers, URLs, versions\n- **Think deeply**: Phase 4 (Ultra-Thinking) is critical for success\n- **Validate everything**: All validation gates must be executable\n- **Score honestly**: If confidence is below 7, improve the PRP\n- **Context is king**: The implementer only has what you put in the PRP\n",
        "plugins/developer/skills/prp-generator/assets/prp_template.md": "# Product Requirement Plan: [Feature Name]\n\n## Metadata\n\n- **Feature**: [Feature name]\n- **Target Completion**: [Timeline estimate]\n- **Confidence Score**: [1-10] - Likelihood of one-pass implementation success\n- **Created**: [Date]\n\n## Executive Summary\n\n[2-3 sentences describing what this feature does and why it's valuable]\n\n## Research Findings\n\n### Codebase Analysis\n\n#### Similar Patterns Found\n\n[List similar features or patterns discovered in the codebase with file references]\n\n- **Pattern**: [Pattern name]\n  - **Location**: `path/to/file.ts:line`\n  - **Description**: [What this pattern does]\n  - **Relevance**: [Why this is useful for the current feature]\n\n#### Existing Conventions\n\n[List coding conventions, architectural patterns, and style guidelines to follow]\n\n- **Convention**: [Convention name]\n  - **Example**: [Code snippet or file reference]\n  - **Application**: [How to apply this to the new feature]\n\n#### Test Patterns\n\n[Document existing test patterns and validation approaches]\n\n- **Test Framework**: [Framework name and version]\n- **Pattern**: [Test pattern to follow]\n- **Location**: `path/to/test.spec.ts`\n\n### External Research\n\n#### Documentation References\n\n[List all relevant documentation with specific URLs and sections]\n\n- **Resource**: [Library/Framework name]\n  - **URL**: [Specific URL to docs]\n  - **Key Sections**: [Relevant sections to read]\n  - **Version**: [Specific version]\n  - **Gotchas**: [Known issues or quirks]\n\n#### Implementation Examples\n\n[List real-world examples and references]\n\n- **Example**: [Title/Description]\n  - **Source**: [GitHub/StackOverflow/Blog URL]\n  - **Relevance**: [What to learn from this]\n  - **Cautions**: [What to avoid]\n\n#### Best Practices\n\n[Document industry best practices and common pitfalls]\n\n- **Practice**: [Best practice name]\n  - **Why**: [Rationale]\n  - **How**: [Implementation approach]\n  - **Warning**: [What to avoid]\n\n## Technical Specification\n\n### Architecture Overview\n\n[High-level architecture diagram or description]\n\n```\n[ASCII diagram or description of component interactions]\n```\n\n### Component Breakdown\n\n#### Component 1: [Name]\n\n- **Purpose**: [What this component does]\n- **Location**: `path/to/component`\n- **Dependencies**: [List dependencies]\n- **Interface**: [API or props interface]\n\n#### Component 2: [Name]\n\n[Repeat for each major component]\n\n### Data Models\n\n[Define all data structures, types, and schemas]\n\n```typescript\n// Example: Define interfaces/types\ninterface FeatureData {\n  // ...\n}\n```\n\n### API Endpoints (if applicable)\n\n[Document any new API endpoints]\n\n- **Endpoint**: `POST /api/feature`\n  - **Purpose**: [What it does]\n  - **Request**: [Request schema]\n  - **Response**: [Response schema]\n  - **Authentication**: [Auth requirements]\n\n## Implementation Blueprint\n\n### Prerequisites\n\n[List any setup steps, dependencies to install, or environment configuration needed]\n\n1. [Prerequisite 1]\n2. [Prerequisite 2]\n\n### Implementation Steps (in order)\n\n#### Step 1: [Step Name]\n\n**Goal**: [What this step accomplishes]\n\n**Pseudocode Approach**:\n```\n// High-level pseudocode showing the approach\nfunction stepOne() {\n  // ...\n}\n```\n\n**Files to Create/Modify**:\n- `path/to/file1.ts` - [What changes]\n- `path/to/file2.ts` - [What changes]\n\n**Reference Pattern**: See `existing/pattern/file.ts:123` for similar implementation\n\n**Validation**: [How to verify this step works]\n\n#### Step 2: [Step Name]\n\n[Repeat for each implementation step]\n\n### Error Handling Strategy\n\n[Document how errors should be handled]\n\n- **Client-side errors**: [Approach]\n- **Server-side errors**: [Approach]\n- **Validation errors**: [Approach]\n- **Network errors**: [Approach]\n\n### Edge Cases\n\n[List all edge cases to handle]\n\n1. **Edge Case**: [Description]\n   - **Solution**: [How to handle]\n\n## Testing Strategy\n\n### Unit Tests\n\n[Describe unit test approach]\n\n- **Coverage Target**: [Percentage or scope]\n- **Key Test Cases**: [List critical test scenarios]\n- **Mock Strategy**: [What to mock and why]\n\n### Integration Tests\n\n[Describe integration test approach]\n\n- **Test Scenarios**: [List integration test cases]\n- **Setup Required**: [Test environment setup]\n\n### Manual Testing Checklist\n\n- [ ] [Test scenario 1]\n- [ ] [Test scenario 2]\n- [ ] [Edge case 1]\n- [ ] [Edge case 2]\n\n## Validation Gates\n\n### Pre-Implementation Validation\n\n```bash\n# Ensure development environment is ready\n[Commands to verify environment setup]\n```\n\n### During Implementation Validation\n\n```bash\n# Type checking\nnpm run type-check\n\n# Linting\nnpm run lint\n\n# Unit tests (watch mode during development)\nnpm run test:watch\n```\n\n### Post-Implementation Validation\n\n```bash\n# Full test suite\nnpm run test\n\n# Type checking\nnpm run type-check\n\n# Linting\nnpm run lint\n\n# Build verification\nnpm run build\n\n# E2E tests (if applicable)\nnpm run test:e2e\n```\n\n### Manual Validation Steps\n\n1. [Manual test step 1]\n2. [Manual test step 2]\n3. [Verify in browser/UI]\n\n## Dependencies\n\n### New Dependencies (if any)\n\n```json\n{\n  \"dependencies\": {\n    \"package-name\": \"^version\"\n  },\n  \"devDependencies\": {\n    \"test-package\": \"^version\"\n  }\n}\n```\n\n**Justification**: [Why each dependency is needed]\n\n### Version Compatibility\n\n- **Node**: [Version requirement]\n- **Framework**: [Version requirement]\n- **Other**: [Version requirements]\n\n## Migration & Rollout\n\n### Database Migrations (if applicable)\n\n[Document any database schema changes]\n\n### Feature Flags (if applicable)\n\n[Document feature flag strategy]\n\n### Rollout Plan\n\n1. [Rollout step 1]\n2. [Rollout step 2]\n\n## Success Criteria\n\n- [ ] All validation gates pass\n- [ ] All test cases pass (unit, integration, manual)\n- [ ] No TypeScript errors\n- [ ] No linting errors\n- [ ] Build succeeds\n- [ ] Feature works as specified\n- [ ] Edge cases handled\n- [ ] Error handling implemented\n- [ ] Code follows existing conventions\n- [ ] Documentation updated\n\n## Known Limitations\n\n[Document any known limitations or future enhancements]\n\n## References\n\n### Internal Documentation\n\n- [Link to internal docs]\n\n### External Resources\n\n- [Link to external resources used during research]\n\n## Appendix\n\n### Code Snippets from Research\n\n[Include any useful code snippets discovered during research]\n\n```typescript\n// Example from existing codebase\n```\n\n### Additional Notes\n\n[Any additional context that doesn't fit elsewhere]\n",
        "plugins/developer/skills/prp-generator/references/research_methodology.md": "# Research Methodology for PRP Generation\n\nThis document provides detailed guidance on conducting thorough research for creating comprehensive Product Requirement Plans.\n\n## Research Philosophy\n\nThe AI agent implementing the PRP only receives:\n1. The context you include in the PRP\n2. Their training data knowledge\n3. Access to the codebase\n4. WebSearch capabilities\n\nTherefore, your research findings MUST be:\n- **Comprehensive**: Cover all aspects of implementation\n- **Specific**: Include exact URLs, file paths, line numbers\n- **Actionable**: Provide concrete examples and patterns\n- **Complete**: Assume the implementer won't have your conversation context\n\n## Codebase Analysis Process\n\n### 1. Find Similar Features\n\n**Goal**: Identify existing implementations that solve similar problems\n\n**Approach**:\n```bash\n# Search for similar feature keywords\n# Use Grep tool with relevant patterns\n\n# Look for:\n- Similar UI components\n- Similar API endpoints\n- Similar data models\n- Similar business logic\n```\n\n**What to Document**:\n- Exact file paths with line numbers (e.g., `src/components/UserProfile.tsx:45-67`)\n- Code snippets showing the pattern\n- Why this pattern is relevant\n- Any modifications needed\n\n**Example**:\n```\nFound: User authentication flow in `src/auth/AuthProvider.tsx:23-89`\nPattern: Context provider with useAuth hook\nRelevance: Similar state management approach needed for feature X\nAdaptation: Will need to add Y and Z properties\n```\n\n### 2. Identify Architectural Patterns\n\n**Goal**: Understand how the codebase is structured\n\n**Look for**:\n- Directory structure conventions\n- File naming patterns\n- Component organization\n- State management approach (Redux, Context, Zustand, etc.)\n- API structure patterns\n- Database access patterns\n- Error handling patterns\n\n**What to Document**:\n```\nPattern: Feature-based directory structure\nExample: src/features/authentication/\nApplication: Create src/features/[new-feature]/ with:\n  - components/\n  - hooks/\n  - types/\n  - api/\n  - tests/\n```\n\n### 3. Analyze Coding Conventions\n\n**Goal**: Ensure consistency with existing codebase\n\n**Check**:\n- TypeScript usage (strict mode? interfaces vs types?)\n- Component patterns (FC vs function? default vs named exports?)\n- Styling approach (CSS modules, styled-components, Tailwind?)\n- Import ordering\n- Comment style\n- Function naming (camelCase, descriptive names)\n\n**What to Document**:\n```\nConvention: Named exports for all components\nExample: export function UserProfile() { ... }\nReasoning: Easier refactoring and better IDE support\n```\n\n### 4. Study Test Patterns\n\n**Goal**: Write tests that match existing patterns\n\n**Investigate**:\n- Test framework (Jest, Vitest, etc.)\n- Testing library usage (@testing-library/react?)\n- Test file naming (`*.test.ts` or `*.spec.ts`?)\n- Test organization (co-located or separate test directory?)\n- Mock patterns\n- Test coverage expectations\n\n**What to Document**:\n```\nPattern: Co-located tests with *.test.tsx suffix\nFramework: Vitest + @testing-library/react\nExample: src/components/Button.test.tsx\nApproach: Test user interactions, not implementation details\nMock Strategy: Use vi.fn() for callbacks, MSW for API calls\n```\n\n### 5. Check Configuration Files\n\n**Goal**: Understand build, lint, and tooling setup\n\n**Review**:\n- `package.json` - scripts and dependencies\n- `tsconfig.json` - TypeScript configuration\n- `vite.config.ts` or `webpack.config.js` - build setup\n- `.eslintrc` - linting rules\n- `.prettierrc` - formatting rules\n\n**What to Document**:\n```\nTypeScript: Strict mode enabled\nBuild: Vite with React plugin\nPath Aliases: '@/' maps to 'src/'\nMust use: Import type syntax for type-only imports\n```\n\n## External Research Process\n\n### 1. Library Documentation\n\n**When to Search**:\n- Using a new library or framework feature\n- Integrating third-party services\n- Implementing complex functionality\n\n**How to Search**:\n1. Go directly to official documentation\n2. Search for the specific version being used\n3. Look for:\n   - Getting started guides\n   - API references\n   - Examples\n   - Migration guides\n   - Known issues\n\n**What to Document**:\n```\nLibrary: @tanstack/react-query v5\nURL: https://tanstack.com/query/latest/docs/react/guides/queries\nKey Sections:\n  - Queries: https://tanstack.com/query/latest/docs/react/guides/queries\n  - Mutations: https://tanstack.com/query/latest/docs/react/guides/mutations\nVersion: 5.28.0 (check package.json)\nGotchas:\n  - Query keys must be arrays\n  - Automatic refetching on window focus (may want to disable)\n  - Stale time defaults to 0\n```\n\n### 2. Implementation Examples\n\n**Where to Search**:\n- GitHub repositories (search: \"language:typescript [feature]\")\n- StackOverflow (recent answers)\n- Official example repositories\n- Blog posts from reputable sources\n\n**What to Look For**:\n- Production-grade code (not quick hacks)\n- Recent examples (check dates)\n- Well-explained implementations\n- Edge case handling\n\n**What to Document**:\n```\nExample: Form validation with Zod and React Hook Form\nSource: https://github.com/react-hook-form/react-hook-form/tree/master/examples/V7/zodResolver\nRelevance: Shows integration pattern we need\nKey Takeaway: Use zodResolver for seamless integration\nCaution: Needs @hookform/resolvers package\n```\n\n### 3. Best Practices Research\n\n**Search Queries**:\n- \"[Technology] best practices 2024\"\n- \"[Feature] common pitfalls\"\n- \"[Library] performance optimization\"\n- \"[Pattern] security considerations\"\n\n**What to Document**:\n```\nPractice: Input sanitization for user-generated content\nWhy: Prevent XSS attacks\nHow: Use DOMPurify library before rendering HTML\nReference: https://owasp.org/www-community/attacks/xss/\nWarning: Never use dangerouslySetInnerHTML without sanitization\n```\n\n### 4. Performance Considerations\n\n**Research**:\n- Bundle size implications\n- Runtime performance patterns\n- Common optimization techniques\n- Lazy loading opportunities\n\n**What to Document**:\n```\nPerformance: Large data table rendering\nSolution: Use virtualization (@tanstack/react-virtual)\nReference: https://tanstack.com/virtual/latest\nBenefit: Render only visible rows (handles 100k+ items)\nTradeoff: Adds 15KB to bundle\n```\n\n### 5. Security Research\n\n**Check**:\n- Common vulnerabilities (OWASP Top 10)\n- Authentication/authorization patterns\n- Data validation requirements\n- Secure defaults\n\n**What to Document**:\n```\nSecurity: API authentication\nPattern: Use HTTP-only cookies for tokens\nReference: https://owasp.org/www-community/HttpOnly\nImplementation: Configure in Cloudflare Workers\nWarning: Don't store tokens in localStorage\n```\n\n## Combining Research Findings\n\n### Integration Analysis\n\nAfter completing both codebase and external research:\n\n1. **Match external patterns to codebase conventions**\n   - \"Library X recommends pattern Y, but codebase uses pattern Z\"\n   - Document adaptations needed\n\n2. **Identify conflicts or gaps**\n   - \"Existing auth pattern doesn't support OAuth\"\n   - Document how to extend existing patterns\n\n3. **Plan integration points**\n   - \"New feature will integrate with existing [Component] at [Location]\"\n   - Document all touch points\n\n### Context Completeness Check\n\nBefore finalizing research, verify:\n\n- [ ] Can implementer understand the codebase structure from your findings?\n- [ ] Are all external dependencies documented with versions and URLs?\n- [ ] Are code examples specific enough to follow?\n- [ ] Are gotchas and warnings clearly stated?\n- [ ] Are all integration points identified?\n- [ ] Can implementer validate their work with the gates you've defined?\n\n## Research Output Format\n\nOrganize findings into these categories for the PRP:\n\n1. **Codebase Analysis**\n   - Similar patterns (with file:line references)\n   - Existing conventions (with examples)\n   - Test patterns (with framework details)\n\n2. **External Research**\n   - Documentation references (with specific URLs and sections)\n   - Implementation examples (with source links and relevance)\n   - Best practices (with rationale and warnings)\n\n3. **Integration Points**\n   - Where new code connects to existing code\n   - What patterns to follow\n   - What conventions to maintain\n\n## Common Research Pitfalls to Avoid\n\n1. **Vague references**: \"There's a similar component somewhere\" âŒ\n   - Should be: \"See UserProfile component at src/components/UserProfile.tsx:45\" âœ…\n\n2. **Outdated examples**: Linking to old blog posts or deprecated APIs âŒ\n   - Should be: Check dates, verify current best practices âœ…\n\n3. **Missing version info**: \"Use React Query\" âŒ\n   - Should be: \"Use @tanstack/react-query v5.28.0\" âœ…\n\n4. **No gotchas**: Assuming smooth implementation âŒ\n   - Should be: Document known issues, common mistakes, edge cases âœ…\n\n5. **Too generic**: \"Follow React best practices\" âŒ\n   - Should be: Specific patterns with code examples âœ…\n\n## Research Time Allocation\n\n**Codebase Analysis**: 40% of research time\n- Critical for maintaining consistency\n- Most valuable for implementation\n\n**External Research**: 35% of research time\n- Essential for new technologies\n- Validation of approaches\n\n**Integration Planning**: 15% of research time\n- Connecting the dots\n- Identifying conflicts\n\n**Documentation**: 10% of research time\n- Organizing findings\n- Creating clear references\n\n## Quality Indicators\n\nYour research is complete when:\n- âœ… An implementer could start coding immediately\n- âœ… All necessary context is documented\n- âœ… Integration points are clear\n- âœ… Validation approach is defined\n- âœ… Edge cases are identified\n- âœ… Error handling strategy is outlined\n- âœ… No assumptions are left undocumented\n",
        "plugins/developer/skills/webapp-testing/SKILL.md": "---\nname: webapp-testing\ndescription: Toolkit for interacting with and testing local web applications using Playwright. Supports verifying frontend functionality, debugging UI behavior, capturing browser screenshots, and viewing browser logs.\nlicense: Complete terms in LICENSE.txt\ncontext: fork\nagent: Explore\n---\n\n# Web Application Testing\n\nTo test local web applications, write native Python Playwright scripts.\n\n**Helper Scripts Available**:\n- `scripts/with_server.py` - Manages server lifecycle (supports multiple servers)\n\n**Always run scripts with `--help` first** to see usage. DO NOT read the source until you try running the script first and find that a customized solution is abslutely necessary. These scripts can be very large and thus pollute your context window. They exist to be called directly as black-box scripts rather than ingested into your context window.\n\n## Decision Tree: Choosing Your Approach\n\n```\nUser task â†’ Is it static HTML?\n    â”œâ”€ Yes â†’ Read HTML file directly to identify selectors\n    â”‚         â”œâ”€ Success â†’ Write Playwright script using selectors\n    â”‚         â””â”€ Fails/Incomplete â†’ Treat as dynamic (below)\n    â”‚\n    â””â”€ No (dynamic webapp) â†’ Is the server already running?\n        â”œâ”€ No â†’ Run: python scripts/with_server.py\" --help\n        â”‚        Then use the helper + write simplified Playwright script\n        â”‚\n        â””â”€ Yes â†’ Reconnaissance-then-action:\n            1. Navigate and wait for networkidle\n            2. Take screenshot or inspect DOM\n            3. Identify selectors from rendered state\n            4. Execute actions with discovered selectors\n```\n\n## Example: Using with_server.py\n\nTo start a server, run `--help` first, then use the helper:\n\n**Single server:**\n```bash\npython scripts/with_server.py\" --server \"npm run dev\" --port 5173 -- python your_automation.py\n```\n\n**Multiple servers (e.g., backend + frontend):**\n```bash\npython scripts/with_server.py\" \\\n  --server \"cd backend && python server.py\" --port 3000 \\\n  --server \"cd frontend && npm run dev\" --port 5173 \\\n  -- python your_automation.py\n```\n\nTo create an automation script, include only Playwright logic (servers are managed automatically):\n```python\nfrom playwright.sync_api import sync_playwright\n\nwith sync_playwright() as p:\n    browser = p.chromium.launch(headless=True) # Always launch chromium in headless mode\n    page = browser.new_page()\n    page.goto('http://localhost:5173') # Server already running and ready\n    page.wait_for_load_state('networkidle') # CRITICAL: Wait for JS to execute\n    # ... your automation logic\n    browser.close()\n```\n\n## Reconnaissance-Then-Action Pattern\n\n1. **Inspect rendered DOM**:\n   ```python\n   page.screenshot(path='/tmp/inspect.png', full_page=True)\n   content = page.content()\n   page.locator('button').all()\n   ```\n\n2. **Identify selectors** from inspection results\n\n3. **Execute actions** using discovered selectors\n\n## Common Pitfall\n\nâŒ **Don't** inspect the DOM before waiting for `networkidle` on dynamic apps\nâœ… **Do** wait for `page.wait_for_load_state('networkidle')` before inspection\n\n## Best Practices\n\n- **Use bundled scripts as black boxes** - To accomplish a task, consider whether one of the scripts available in `scripts/` can help. These scripts handle common, complex workflows reliably without cluttering the context window. Use `--help` to see usage, then invoke directly. \n- Use `sync_playwright()` for synchronous scripts\n- Always close the browser when done\n- Use descriptive selectors: `text=`, `role=`, CSS selectors, or IDs\n- Add appropriate waits: `page.wait_for_selector()` or `page.wait_for_timeout()`\n\n## Reference Files\n\n- **examples/** - Examples showing common patterns:\n  - `element_discovery.py` - Discovering buttons, links, and inputs on a page\n  - `static_html_automation.py` - Using file:// URLs for local HTML\n  - `console_logging.py` - Capturing console logs during automation",
        "plugins/documents/.claude-plugin/plugin.json": "{\n  \"name\": \"documents\",\n  \"description\": \"Professional document processing suite: 3 comprehensive skills for Word (.docx), Excel (.xlsx), and PDF files - create, edit, analyse, and process documents with advanced features like tracked changes, forms, tables, OCR, and formulas\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"1.1.0\"\n}\n",
        "plugins/documents/README.md": "# Documents Toolkit\n\nProfessional document processing for Word, Excel, and PDF files.\n\n## What's Included\n\n### Skills (3)\n- **docx** - Word document creation, editing, tracked changes, comments\n- **xlsx** - Excel spreadsheet creation, formulas, formatting, data analysis\n- **pdf-processing-pro** - PDF forms, tables, OCR, validation, batch operations\n\n## Installation\n\n```bash\n/plugin install documents-toolkit@wookstar\n```\n\n## Usage Examples\n\n```bash\n# Word documents\n\"Create a professional proposal document\"\n\"Edit this Word file with tracked changes\"\n\n# Excel spreadsheets\n\"Create a budget spreadsheet with formulas\"\n\"Analyze this sales data in Excel\"\n\n# PDF processing\n\"Extract tables from this PDF\"\n\"Fill out this PDF form\"\n\"Run OCR on this scanned document\"\n```\n\n## Features\n\n### DOCX\n- Create new Word documents\n- Edit with tracked changes (redlining)\n- Add comments and annotations\n- Preserve formatting\n- Text extraction and analysis\n\n### XLSX\n- Create spreadsheets with formulas\n- Advanced formatting\n- Data analysis\n- Charts and visualizations\n- Multiple sheets\n\n### PDF\n- Form filling\n- Table extraction\n- OCR (text recognition)\n- Validation\n- Batch operations\n\n## When to Use\n\nThis toolkit is ideal for:\n- Business document creation and editing\n- Financial reporting and analysis\n- Contract management with tracked changes\n- Form processing\n- Data extraction from PDFs\n- Spreadsheet automation\n",
        "plugins/documents/skills/docx/SKILL.md": "---\nname: docx\ndescription: \"Comprehensive document creation, editing, and analysis with support for tracked changes, comments, formatting preservation, and text extraction. When Claude needs to work with professional documents (.docx files) for: (1) Creating new documents, (2) Modifying or editing content, (3) Working with tracked changes, (4) Adding comments, or any other document tasks\"\nlicense: Proprietary. LICENSE.txt has complete terms\n---\n\n# DOCX creation, editing, and analysis\n\n## Overview\n\nA user may ask you to create, edit, or analyze the contents of a .docx file. A .docx file is essentially a ZIP archive containing XML files and other resources that you can read or edit. You have different tools and workflows available for different tasks.\n\n## Workflow Decision Tree\n\n### Reading/Analyzing Content\nUse \"Text extraction\" or \"Raw XML access\" sections below\n\n### Creating New Document\nUse \"Creating a new Word document\" workflow\n\n### Editing Existing Document\n- **Your own document + simple changes**\n  Use \"Basic OOXML editing\" workflow\n\n- **Someone else's document**\n  Use **\"Redlining workflow\"** (recommended default)\n\n- **Legal, academic, business, or government docs**\n  Use **\"Redlining workflow\"** (required)\n\n## Reading and analyzing content\n\n### Text extraction\nIf you just need to read the text contents of a document, you should convert the document to markdown using pandoc. Pandoc provides excellent support for preserving document structure and can show tracked changes:\n\n```bash\n# Convert document to markdown with tracked changes\npandoc --track-changes=all path-to-file.docx -o output.md\n# Options: --track-changes=accept/reject/all\n```\n\n### Raw XML access\nYou need raw XML access for: comments, complex formatting, document structure, embedded media, and metadata. For any of these features, you'll need to unpack a document and read its raw XML contents.\n\n#### Unpacking a file\n`python ooxml/scripts/unpack.py <office_file> <output_directory>`\n\n#### Key file structures\n* `word/document.xml` - Main document contents\n* `word/comments.xml` - Comments referenced in document.xml\n* `word/media/` - Embedded images and media files\n* Tracked changes use `<w:ins>` (insertions) and `<w:del>` (deletions) tags\n\n## Creating a new Word document\n\nWhen creating a new Word document from scratch, use **docx-js**, which allows you to create Word documents using JavaScript/TypeScript.\n\n### Workflow\n1. **MANDATORY - READ ENTIRE FILE**: Read [`docx-js.md`](docx-js.md) (~500 lines) completely from start to finish. **NEVER set any range limits when reading this file.** Read the full file content for detailed syntax, critical formatting rules, and best practices before proceeding with document creation.\n2. Create a JavaScript/TypeScript file using Document, Paragraph, TextRun components (You can assume all dependencies are installed, but if not, refer to the dependencies section below)\n3. Export as .docx using Packer.toBuffer()\n\n## Editing an existing Word document\n\nWhen editing an existing Word document, use the **Document library** (a Python library for OOXML manipulation). The library automatically handles infrastructure setup and provides methods for document manipulation. For complex scenarios, you can access the underlying DOM directly through the library.\n\n### Workflow\n1. **MANDATORY - READ ENTIRE FILE**: Read [`ooxml.md`](ooxml.md) (~600 lines) completely from start to finish. **NEVER set any range limits when reading this file.** Read the full file content for the Document library API and XML patterns for directly editing document files.\n2. Unpack the document: `python ooxml/scripts/unpack.py <office_file> <output_directory>`\n3. Create and run a Python script using the Document library (see \"Document Library\" section in ooxml.md)\n4. Pack the final document: `python ooxml/scripts/pack.py <input_directory> <office_file>`\n\nThe Document library provides both high-level methods for common operations and direct DOM access for complex scenarios.\n\n## Redlining workflow for document review\n\nThis workflow allows you to plan comprehensive tracked changes using markdown before implementing them in OOXML. **CRITICAL**: For complete tracked changes, you must implement ALL changes systematically.\n\n**Batching Strategy**: Group related changes into batches of 3-10 changes. This makes debugging manageable while maintaining efficiency. Test each batch before moving to the next.\n\n**Principle: Minimal, Precise Edits**\nWhen implementing tracked changes, only mark text that actually changes. Repeating unchanged text makes edits harder to review and appears unprofessional. Break replacements into: [unchanged text] + [deletion] + [insertion] + [unchanged text]. Preserve the original run's RSID for unchanged text by extracting the `<w:r>` element from the original and reusing it.\n\nExample - Changing \"30 days\" to \"60 days\" in a sentence:\n```python\n# BAD - Replaces entire sentence\n'<w:del><w:r><w:delText>The term is 30 days.</w:delText></w:r></w:del><w:ins><w:r><w:t>The term is 60 days.</w:t></w:r></w:ins>'\n\n# GOOD - Only marks what changed, preserves original <w:r> for unchanged text\n'<w:r w:rsidR=\"00AB12CD\"><w:t>The term is </w:t></w:r><w:del><w:r><w:delText>30</w:delText></w:r></w:del><w:ins><w:r><w:t>60</w:t></w:r></w:ins><w:r w:rsidR=\"00AB12CD\"><w:t> days.</w:t></w:r>'\n```\n\n### Tracked changes workflow\n\n1. **Get markdown representation**: Convert document to markdown with tracked changes preserved:\n   ```bash\n   pandoc --track-changes=all path-to-file.docx -o current.md\n   ```\n\n2. **Identify and group changes**: Review the document and identify ALL changes needed, organizing them into logical batches:\n\n   **Location methods** (for finding changes in XML):\n   - Section/heading numbers (e.g., \"Section 3.2\", \"Article IV\")\n   - Paragraph identifiers if numbered\n   - Grep patterns with unique surrounding text\n   - Document structure (e.g., \"first paragraph\", \"signature block\")\n   - **DO NOT use markdown line numbers** - they don't map to XML structure\n\n   **Batch organization** (group 3-10 related changes per batch):\n   - By section: \"Batch 1: Section 2 amendments\", \"Batch 2: Section 5 updates\"\n   - By type: \"Batch 1: Date corrections\", \"Batch 2: Party name changes\"\n   - By complexity: Start with simple text replacements, then tackle complex structural changes\n   - Sequential: \"Batch 1: Pages 1-3\", \"Batch 2: Pages 4-6\"\n\n3. **Read documentation and unpack**:\n   - **MANDATORY - READ ENTIRE FILE**: Read [`ooxml.md`](ooxml.md) (~600 lines) completely from start to finish. **NEVER set any range limits when reading this file.** Pay special attention to the \"Document Library\" and \"Tracked Change Patterns\" sections.\n   - **Unpack the document**: `python ooxml/scripts/unpack.py <file.docx> <dir>`\n   - **Note the suggested RSID**: The unpack script will suggest an RSID to use for your tracked changes. Copy this RSID for use in step 4b.\n\n4. **Implement changes in batches**: Group changes logically (by section, by type, or by proximity) and implement them together in a single script. This approach:\n   - Makes debugging easier (smaller batch = easier to isolate errors)\n   - Allows incremental progress\n   - Maintains efficiency (batch size of 3-10 changes works well)\n\n   **Suggested batch groupings:**\n   - By document section (e.g., \"Section 3 changes\", \"Definitions\", \"Termination clause\")\n   - By change type (e.g., \"Date changes\", \"Party name updates\", \"Legal term replacements\")\n   - By proximity (e.g., \"Changes on pages 1-3\", \"Changes in first half of document\")\n\n   For each batch of related changes:\n\n   **a. Map text to XML**: Grep for text in `word/document.xml` to verify how text is split across `<w:r>` elements.\n\n   **b. Create and run script**: Use `get_node` to find nodes, implement changes, then `doc.save()`. See **\"Document Library\"** section in ooxml.md for patterns.\n\n   **Note**: Always grep `word/document.xml` immediately before writing a script to get current line numbers and verify text content. Line numbers change after each script run.\n\n5. **Pack the document**: After all batches are complete, convert the unpacked directory back to .docx:\n   ```bash\n   python ooxml/scripts/pack.py unpacked reviewed-document.docx\n   ```\n\n6. **Final verification**: Do a comprehensive check of the complete document:\n   - Convert final document to markdown:\n     ```bash\n     pandoc --track-changes=all reviewed-document.docx -o verification.md\n     ```\n   - Verify ALL changes were applied correctly:\n     ```bash\n     grep \"original phrase\" verification.md  # Should NOT find it\n     grep \"replacement phrase\" verification.md  # Should find it\n     ```\n   - Check that no unintended changes were introduced\n\n\n## Converting Documents to Images\n\nTo visually analyze Word documents, convert them to images using a two-step process:\n\n1. **Convert DOCX to PDF**:\n   ```bash\n   soffice --headless --convert-to pdf document.docx\n   ```\n\n2. **Convert PDF pages to JPEG images**:\n   ```bash\n   pdftoppm -jpeg -r 150 document.pdf page\n   ```\n   This creates files like `page-1.jpg`, `page-2.jpg`, etc.\n\nOptions:\n- `-r 150`: Sets resolution to 150 DPI (adjust for quality/size balance)\n- `-jpeg`: Output JPEG format (use `-png` for PNG if preferred)\n- `-f N`: First page to convert (e.g., `-f 2` starts from page 2)\n- `-l N`: Last page to convert (e.g., `-l 5` stops at page 5)\n- `page`: Prefix for output files\n\nExample for specific range:\n```bash\npdftoppm -jpeg -r 150 -f 2 -l 5 document.pdf page  # Converts only pages 2-5\n```\n\n## Code Style Guidelines\n**IMPORTANT**: When generating code for DOCX operations:\n- Write concise code\n- Avoid verbose variable names and redundant operations\n- Avoid unnecessary print statements\n\n## Dependencies\n\nRequired dependencies (install if not available):\n\n- **pandoc**: `sudo apt-get install pandoc` (for text extraction)\n- **docx**: `npm install -g docx` (for creating new documents)\n- **LibreOffice**: `sudo apt-get install libreoffice` (for PDF conversion)\n- **Poppler**: `sudo apt-get install poppler-utils` (for pdftoppm to convert PDF to images)\n- **defusedxml**: `pip install defusedxml` (for secure XML parsing)",
        "plugins/documents/skills/docx/docx-js.md": "# DOCX Library Tutorial\n\nGenerate .docx files with JavaScript/TypeScript.\n\n**Important: Read this entire document before starting.** Critical formatting rules and common pitfalls are covered throughout - skipping sections may result in corrupted files or rendering issues.\n\n## Setup\nAssumes docx is already installed globally\nIf not installed: `npm install -g docx`\n\n```javascript\nconst { Document, Packer, Paragraph, TextRun, Table, TableRow, TableCell, ImageRun, Media, \n        Header, Footer, AlignmentType, PageOrientation, LevelFormat, ExternalHyperlink, \n        InternalHyperlink, TableOfContents, HeadingLevel, BorderStyle, WidthType, TabStopType, \n        TabStopPosition, UnderlineType, ShadingType, VerticalAlign, SymbolRun, PageNumber,\n        FootnoteReferenceRun, Footnote, PageBreak } = require('docx');\n\n// Create & Save\nconst doc = new Document({ sections: [{ children: [/* content */] }] });\nPacker.toBuffer(doc).then(buffer => fs.writeFileSync(\"doc.docx\", buffer)); // Node.js\nPacker.toBlob(doc).then(blob => { /* download logic */ }); // Browser\n```\n\n## Text & Formatting\n```javascript\n// IMPORTANT: Never use \\n for line breaks - always use separate Paragraph elements\n// âŒ WRONG: new TextRun(\"Line 1\\nLine 2\")\n// âœ… CORRECT: new Paragraph({ children: [new TextRun(\"Line 1\")] }), new Paragraph({ children: [new TextRun(\"Line 2\")] })\n\n// Basic text with all formatting options\nnew Paragraph({\n  alignment: AlignmentType.CENTER,\n  spacing: { before: 200, after: 200 },\n  indent: { left: 720, right: 720 },\n  children: [\n    new TextRun({ text: \"Bold\", bold: true }),\n    new TextRun({ text: \"Italic\", italics: true }),\n    new TextRun({ text: \"Underlined\", underline: { type: UnderlineType.DOUBLE, color: \"FF0000\" } }),\n    new TextRun({ text: \"Colored\", color: \"FF0000\", size: 28, font: \"Arial\" }), // Arial default\n    new TextRun({ text: \"Highlighted\", highlight: \"yellow\" }),\n    new TextRun({ text: \"Strikethrough\", strike: true }),\n    new TextRun({ text: \"x2\", superScript: true }),\n    new TextRun({ text: \"H2O\", subScript: true }),\n    new TextRun({ text: \"SMALL CAPS\", smallCaps: true }),\n    new SymbolRun({ char: \"2022\", font: \"Symbol\" }), // Bullet â€¢\n    new SymbolRun({ char: \"00A9\", font: \"Arial\" })   // Copyright Â© - Arial for symbols\n  ]\n})\n```\n\n## Styles & Professional Formatting\n\n```javascript\nconst doc = new Document({\n  styles: {\n    default: { document: { run: { font: \"Arial\", size: 24 } } }, // 12pt default\n    paragraphStyles: [\n      // Document title style - override built-in Title style\n      { id: \"Title\", name: \"Title\", basedOn: \"Normal\",\n        run: { size: 56, bold: true, color: \"000000\", font: \"Arial\" },\n        paragraph: { spacing: { before: 240, after: 120 }, alignment: AlignmentType.CENTER } },\n      // IMPORTANT: Override built-in heading styles by using their exact IDs\n      { id: \"Heading1\", name: \"Heading 1\", basedOn: \"Normal\", next: \"Normal\", quickFormat: true,\n        run: { size: 32, bold: true, color: \"000000\", font: \"Arial\" }, // 16pt\n        paragraph: { spacing: { before: 240, after: 240 }, outlineLevel: 0 } }, // Required for TOC\n      { id: \"Heading2\", name: \"Heading 2\", basedOn: \"Normal\", next: \"Normal\", quickFormat: true,\n        run: { size: 28, bold: true, color: \"000000\", font: \"Arial\" }, // 14pt\n        paragraph: { spacing: { before: 180, after: 180 }, outlineLevel: 1 } },\n      // Custom styles use your own IDs\n      { id: \"myStyle\", name: \"My Style\", basedOn: \"Normal\",\n        run: { size: 28, bold: true, color: \"000000\" },\n        paragraph: { spacing: { after: 120 }, alignment: AlignmentType.CENTER } }\n    ],\n    characterStyles: [{ id: \"myCharStyle\", name: \"My Char Style\",\n      run: { color: \"FF0000\", bold: true, underline: { type: UnderlineType.SINGLE } } }]\n  },\n  sections: [{\n    properties: { page: { margin: { top: 1440, right: 1440, bottom: 1440, left: 1440 } } },\n    children: [\n      new Paragraph({ heading: HeadingLevel.TITLE, children: [new TextRun(\"Document Title\")] }), // Uses overridden Title style\n      new Paragraph({ heading: HeadingLevel.HEADING_1, children: [new TextRun(\"Heading 1\")] }), // Uses overridden Heading1 style\n      new Paragraph({ style: \"myStyle\", children: [new TextRun(\"Custom paragraph style\")] }),\n      new Paragraph({ children: [\n        new TextRun(\"Normal with \"),\n        new TextRun({ text: \"custom char style\", style: \"myCharStyle\" })\n      ]})\n    ]\n  }]\n});\n```\n\n**Professional Font Combinations:**\n- **Arial (Headers) + Arial (Body)** - Most universally supported, clean and professional\n- **Times New Roman (Headers) + Arial (Body)** - Classic serif headers with modern sans-serif body\n- **Georgia (Headers) + Verdana (Body)** - Optimized for screen reading, elegant contrast\n\n**Key Styling Principles:**\n- **Override built-in styles**: Use exact IDs like \"Heading1\", \"Heading2\", \"Heading3\" to override Word's built-in heading styles\n- **HeadingLevel constants**: `HeadingLevel.HEADING_1` uses \"Heading1\" style, `HeadingLevel.HEADING_2` uses \"Heading2\" style, etc.\n- **Include outlineLevel**: Set `outlineLevel: 0` for H1, `outlineLevel: 1` for H2, etc. to ensure TOC works correctly\n- **Use custom styles** instead of inline formatting for consistency\n- **Set a default font** using `styles.default.document.run.font` - Arial is universally supported\n- **Establish visual hierarchy** with different font sizes (titles > headers > body)\n- **Add proper spacing** with `before` and `after` paragraph spacing\n- **Use colors sparingly**: Default to black (000000) and shades of gray for titles and headings (heading 1, heading 2, etc.)\n- **Set consistent margins** (1440 = 1 inch is standard)\n\n\n## Lists (ALWAYS USE PROPER LISTS - NEVER USE UNICODE BULLETS)\n```javascript\n// Bullets - ALWAYS use the numbering config, NOT unicode symbols\n// CRITICAL: Use LevelFormat.BULLET constant, NOT the string \"bullet\"\nconst doc = new Document({\n  numbering: {\n    config: [\n      { reference: \"bullet-list\",\n        levels: [{ level: 0, format: LevelFormat.BULLET, text: \"â€¢\", alignment: AlignmentType.LEFT,\n          style: { paragraph: { indent: { left: 720, hanging: 360 } } } }] },\n      { reference: \"first-numbered-list\",\n        levels: [{ level: 0, format: LevelFormat.DECIMAL, text: \"%1.\", alignment: AlignmentType.LEFT,\n          style: { paragraph: { indent: { left: 720, hanging: 360 } } } }] },\n      { reference: \"second-numbered-list\", // Different reference = restarts at 1\n        levels: [{ level: 0, format: LevelFormat.DECIMAL, text: \"%1.\", alignment: AlignmentType.LEFT,\n          style: { paragraph: { indent: { left: 720, hanging: 360 } } } }] }\n    ]\n  },\n  sections: [{\n    children: [\n      // Bullet list items\n      new Paragraph({ numbering: { reference: \"bullet-list\", level: 0 },\n        children: [new TextRun(\"First bullet point\")] }),\n      new Paragraph({ numbering: { reference: \"bullet-list\", level: 0 },\n        children: [new TextRun(\"Second bullet point\")] }),\n      // Numbered list items\n      new Paragraph({ numbering: { reference: \"first-numbered-list\", level: 0 },\n        children: [new TextRun(\"First numbered item\")] }),\n      new Paragraph({ numbering: { reference: \"first-numbered-list\", level: 0 },\n        children: [new TextRun(\"Second numbered item\")] }),\n      // âš ï¸ CRITICAL: Different reference = INDEPENDENT list that restarts at 1\n      // Same reference = CONTINUES previous numbering\n      new Paragraph({ numbering: { reference: \"second-numbered-list\", level: 0 },\n        children: [new TextRun(\"Starts at 1 again (because different reference)\")] })\n    ]\n  }]\n});\n\n// âš ï¸ CRITICAL NUMBERING RULE: Each reference creates an INDEPENDENT numbered list\n// - Same reference = continues numbering (1, 2, 3... then 4, 5, 6...)\n// - Different reference = restarts at 1 (1, 2, 3... then 1, 2, 3...)\n// Use unique reference names for each separate numbered section!\n\n// âš ï¸ CRITICAL: NEVER use unicode bullets - they create fake lists that don't work properly\n// new TextRun(\"â€¢ Item\")           // WRONG\n// new SymbolRun({ char: \"2022\" }) // WRONG\n// âœ… ALWAYS use numbering config with LevelFormat.BULLET for real Word lists\n```\n\n## Tables\n```javascript\n// Complete table with margins, borders, headers, and bullet points\nconst tableBorder = { style: BorderStyle.SINGLE, size: 1, color: \"CCCCCC\" };\nconst cellBorders = { top: tableBorder, bottom: tableBorder, left: tableBorder, right: tableBorder };\n\nnew Table({\n  columnWidths: [4680, 4680], // âš ï¸ CRITICAL: Set column widths at table level - values in DXA (twentieths of a point)\n  margins: { top: 100, bottom: 100, left: 180, right: 180 }, // Set once for all cells\n  rows: [\n    new TableRow({\n      tableHeader: true,\n      children: [\n        new TableCell({\n          borders: cellBorders,\n          width: { size: 4680, type: WidthType.DXA }, // ALSO set width on each cell\n          // âš ï¸ CRITICAL: Always use ShadingType.CLEAR to prevent black backgrounds in Word.\n          shading: { fill: \"D5E8F0\", type: ShadingType.CLEAR }, \n          verticalAlign: VerticalAlign.CENTER,\n          children: [new Paragraph({ \n            alignment: AlignmentType.CENTER,\n            children: [new TextRun({ text: \"Header\", bold: true, size: 22 })]\n          })]\n        }),\n        new TableCell({\n          borders: cellBorders,\n          width: { size: 4680, type: WidthType.DXA }, // ALSO set width on each cell\n          shading: { fill: \"D5E8F0\", type: ShadingType.CLEAR },\n          children: [new Paragraph({ \n            alignment: AlignmentType.CENTER,\n            children: [new TextRun({ text: \"Bullet Points\", bold: true, size: 22 })]\n          })]\n        })\n      ]\n    }),\n    new TableRow({\n      children: [\n        new TableCell({\n          borders: cellBorders,\n          width: { size: 4680, type: WidthType.DXA }, // ALSO set width on each cell\n          children: [new Paragraph({ children: [new TextRun(\"Regular data\")] })]\n        }),\n        new TableCell({\n          borders: cellBorders,\n          width: { size: 4680, type: WidthType.DXA }, // ALSO set width on each cell\n          children: [\n            new Paragraph({ \n              numbering: { reference: \"bullet-list\", level: 0 },\n              children: [new TextRun(\"First bullet point\")] \n            }),\n            new Paragraph({ \n              numbering: { reference: \"bullet-list\", level: 0 },\n              children: [new TextRun(\"Second bullet point\")] \n            })\n          ]\n        })\n      ]\n    })\n  ]\n})\n```\n\n**IMPORTANT: Table Width & Borders**\n- Use BOTH `columnWidths: [width1, width2, ...]` array AND `width: { size: X, type: WidthType.DXA }` on each cell\n- Values in DXA (twentieths of a point): 1440 = 1 inch, Letter usable width = 9360 DXA (with 1\" margins)\n- Apply borders to individual `TableCell` elements, NOT the `Table` itself\n\n**Precomputed Column Widths (Letter size with 1\" margins = 9360 DXA total):**\n- **2 columns:** `columnWidths: [4680, 4680]` (equal width)\n- **3 columns:** `columnWidths: [3120, 3120, 3120]` (equal width)\n\n## Links & Navigation\n```javascript\n// TOC (requires headings) - CRITICAL: Use HeadingLevel only, NOT custom styles\n// âŒ WRONG: new Paragraph({ heading: HeadingLevel.HEADING_1, style: \"customHeader\", children: [new TextRun(\"Title\")] })\n// âœ… CORRECT: new Paragraph({ heading: HeadingLevel.HEADING_1, children: [new TextRun(\"Title\")] })\nnew TableOfContents(\"Table of Contents\", { hyperlink: true, headingStyleRange: \"1-3\" }),\n\n// External link\nnew Paragraph({\n  children: [new ExternalHyperlink({\n    children: [new TextRun({ text: \"Google\", style: \"Hyperlink\" })],\n    link: \"https://www.google.com\"\n  })]\n}),\n\n// Internal link & bookmark\nnew Paragraph({\n  children: [new InternalHyperlink({\n    children: [new TextRun({ text: \"Go to Section\", style: \"Hyperlink\" })],\n    anchor: \"section1\"\n  })]\n}),\nnew Paragraph({\n  children: [new TextRun(\"Section Content\")],\n  bookmark: { id: \"section1\", name: \"section1\" }\n}),\n```\n\n## Images & Media\n```javascript\n// Basic image with sizing & positioning\n// CRITICAL: Always specify 'type' parameter - it's REQUIRED for ImageRun\nnew Paragraph({\n  alignment: AlignmentType.CENTER,\n  children: [new ImageRun({\n    type: \"png\", // NEW REQUIREMENT: Must specify image type (png, jpg, jpeg, gif, bmp, svg)\n    data: fs.readFileSync(\"image.png\"),\n    transformation: { width: 200, height: 150, rotation: 0 }, // rotation in degrees\n    altText: { title: \"Logo\", description: \"Company logo\", name: \"Name\" } // IMPORTANT: All three fields are required\n  })]\n})\n```\n\n## Page Breaks\n```javascript\n// Manual page break\nnew Paragraph({ children: [new PageBreak()] }),\n\n// Page break before paragraph\nnew Paragraph({\n  pageBreakBefore: true,\n  children: [new TextRun(\"This starts on a new page\")]\n})\n\n// âš ï¸ CRITICAL: NEVER use PageBreak standalone - it will create invalid XML that Word cannot open\n// âŒ WRONG: new PageBreak() \n// âœ… CORRECT: new Paragraph({ children: [new PageBreak()] })\n```\n\n## Headers/Footers & Page Setup\n```javascript\nconst doc = new Document({\n  sections: [{\n    properties: {\n      page: {\n        margin: { top: 1440, right: 1440, bottom: 1440, left: 1440 }, // 1440 = 1 inch\n        size: { orientation: PageOrientation.LANDSCAPE },\n        pageNumbers: { start: 1, formatType: \"decimal\" } // \"upperRoman\", \"lowerRoman\", \"upperLetter\", \"lowerLetter\"\n      }\n    },\n    headers: {\n      default: new Header({ children: [new Paragraph({ \n        alignment: AlignmentType.RIGHT,\n        children: [new TextRun(\"Header Text\")]\n      })] })\n    },\n    footers: {\n      default: new Footer({ children: [new Paragraph({ \n        alignment: AlignmentType.CENTER,\n        children: [new TextRun(\"Page \"), new TextRun({ children: [PageNumber.CURRENT] }), new TextRun(\" of \"), new TextRun({ children: [PageNumber.TOTAL_PAGES] })]\n      })] })\n    },\n    children: [/* content */]\n  }]\n});\n```\n\n## Tabs\n```javascript\nnew Paragraph({\n  tabStops: [\n    { type: TabStopType.LEFT, position: TabStopPosition.MAX / 4 },\n    { type: TabStopType.CENTER, position: TabStopPosition.MAX / 2 },\n    { type: TabStopType.RIGHT, position: TabStopPosition.MAX * 3 / 4 }\n  ],\n  children: [new TextRun(\"Left\\tCenter\\tRight\")]\n})\n```\n\n## Constants & Quick Reference\n- **Underlines:** `SINGLE`, `DOUBLE`, `WAVY`, `DASH`\n- **Borders:** `SINGLE`, `DOUBLE`, `DASHED`, `DOTTED`  \n- **Numbering:** `DECIMAL` (1,2,3), `UPPER_ROMAN` (I,II,III), `LOWER_LETTER` (a,b,c)\n- **Tabs:** `LEFT`, `CENTER`, `RIGHT`, `DECIMAL`\n- **Symbols:** `\"2022\"` (â€¢), `\"00A9\"` (Â©), `\"00AE\"` (Â®), `\"2122\"` (â„¢), `\"00B0\"` (Â°), `\"F070\"` (âœ“), `\"F0FC\"` (âœ—)\n\n## Critical Issues & Common Mistakes\n- **CRITICAL: PageBreak must ALWAYS be inside a Paragraph** - standalone PageBreak creates invalid XML that Word cannot open\n- **ALWAYS use ShadingType.CLEAR for table cell shading** - Never use ShadingType.SOLID (causes black background).\n- Measurements in DXA (1440 = 1 inch) | Each table cell needs â‰¥1 Paragraph | TOC requires HeadingLevel styles only\n- **ALWAYS use custom styles** with Arial font for professional appearance and proper visual hierarchy\n- **ALWAYS set a default font** using `styles.default.document.run.font` - Arial recommended\n- **ALWAYS use columnWidths array for tables** + individual cell widths for compatibility\n- **NEVER use unicode symbols for bullets** - always use proper numbering configuration with `LevelFormat.BULLET` constant (NOT the string \"bullet\")\n- **NEVER use \\n for line breaks anywhere** - always use separate Paragraph elements for each line\n- **ALWAYS use TextRun objects within Paragraph children** - never use text property directly on Paragraph\n- **CRITICAL for images**: ImageRun REQUIRES `type` parameter - always specify \"png\", \"jpg\", \"jpeg\", \"gif\", \"bmp\", or \"svg\"\n- **CRITICAL for bullets**: Must use `LevelFormat.BULLET` constant, not string \"bullet\", and include `text: \"â€¢\"` for the bullet character\n- **CRITICAL for numbering**: Each numbering reference creates an INDEPENDENT list. Same reference = continues numbering (1,2,3 then 4,5,6). Different reference = restarts at 1 (1,2,3 then 1,2,3). Use unique reference names for each separate numbered section!\n- **CRITICAL for TOC**: When using TableOfContents, headings must use HeadingLevel ONLY - do NOT add custom styles to heading paragraphs or TOC will break\n- **Tables**: Set `columnWidths` array + individual cell widths, apply borders to cells not table\n- **Set table margins at TABLE level** for consistent cell padding (avoids repetition per cell)",
        "plugins/documents/skills/docx/ooxml.md": "# Office Open XML Technical Reference\n\n**Important: Read this entire document before starting.** This document covers:\n- [Technical Guidelines](#technical-guidelines) - Schema compliance rules and validation requirements\n- [Document Content Patterns](#document-content-patterns) - XML patterns for headings, lists, tables, formatting, etc.\n- [Document Library (Python)](#document-library-python) - Recommended approach for OOXML manipulation with automatic infrastructure setup\n- [Tracked Changes (Redlining)](#tracked-changes-redlining) - XML patterns for implementing tracked changes\n\n## Technical Guidelines\n\n### Schema Compliance\n- **Element ordering in `<w:pPr>`**: `<w:pStyle>`, `<w:numPr>`, `<w:spacing>`, `<w:ind>`, `<w:jc>`\n- **Whitespace**: Add `xml:space='preserve'` to `<w:t>` elements with leading/trailing spaces\n- **Unicode**: Escape characters in ASCII content: `\"` becomes `&#8220;`\n  - **Character encoding reference**: Curly quotes `\"\"` become `&#8220;&#8221;`, apostrophe `'` becomes `&#8217;`, em-dash `â€”` becomes `&#8212;`\n- **Tracked changes**: Use `<w:del>` and `<w:ins>` tags with `w:author=\"Claude\"` outside `<w:r>` elements\n  - **Critical**: `<w:ins>` closes with `</w:ins>`, `<w:del>` closes with `</w:del>` - never mix\n  - **RSIDs must be 8-digit hex**: Use values like `00AB1234` (only 0-9, A-F characters)\n  - **trackRevisions placement**: Add `<w:trackRevisions/>` after `<w:proofState>` in settings.xml\n- **Images**: Add to `word/media/`, reference in `document.xml`, set dimensions to prevent overflow\n\n## Document Content Patterns\n\n### Basic Structure\n```xml\n<w:p>\n  <w:r><w:t>Text content</w:t></w:r>\n</w:p>\n```\n\n### Headings and Styles\n```xml\n<w:p>\n  <w:pPr>\n    <w:pStyle w:val=\"Title\"/>\n    <w:jc w:val=\"center\"/>\n  </w:pPr>\n  <w:r><w:t>Document Title</w:t></w:r>\n</w:p>\n\n<w:p>\n  <w:pPr><w:pStyle w:val=\"Heading2\"/></w:pPr>\n  <w:r><w:t>Section Heading</w:t></w:r>\n</w:p>\n```\n\n### Text Formatting\n```xml\n<!-- Bold -->\n<w:r><w:rPr><w:b/><w:bCs/></w:rPr><w:t>Bold</w:t></w:r>\n<!-- Italic -->\n<w:r><w:rPr><w:i/><w:iCs/></w:rPr><w:t>Italic</w:t></w:r>\n<!-- Underline -->\n<w:r><w:rPr><w:u w:val=\"single\"/></w:rPr><w:t>Underlined</w:t></w:r>\n<!-- Highlight -->\n<w:r><w:rPr><w:highlight w:val=\"yellow\"/></w:rPr><w:t>Highlighted</w:t></w:r>\n```\n\n### Lists\n```xml\n<!-- Numbered list -->\n<w:p>\n  <w:pPr>\n    <w:pStyle w:val=\"ListParagraph\"/>\n    <w:numPr><w:ilvl w:val=\"0\"/><w:numId w:val=\"1\"/></w:numPr>\n    <w:spacing w:before=\"240\"/>\n  </w:pPr>\n  <w:r><w:t>First item</w:t></w:r>\n</w:p>\n\n<!-- Restart numbered list at 1 - use different numId -->\n<w:p>\n  <w:pPr>\n    <w:pStyle w:val=\"ListParagraph\"/>\n    <w:numPr><w:ilvl w:val=\"0\"/><w:numId w:val=\"2\"/></w:numPr>\n    <w:spacing w:before=\"240\"/>\n  </w:pPr>\n  <w:r><w:t>New list item 1</w:t></w:r>\n</w:p>\n\n<!-- Bullet list (level 2) -->\n<w:p>\n  <w:pPr>\n    <w:pStyle w:val=\"ListParagraph\"/>\n    <w:numPr><w:ilvl w:val=\"1\"/><w:numId w:val=\"1\"/></w:numPr>\n    <w:spacing w:before=\"240\"/>\n    <w:ind w:left=\"900\"/>\n  </w:pPr>\n  <w:r><w:t>Bullet item</w:t></w:r>\n</w:p>\n```\n\n### Tables\n```xml\n<w:tbl>\n  <w:tblPr>\n    <w:tblStyle w:val=\"TableGrid\"/>\n    <w:tblW w:w=\"0\" w:type=\"auto\"/>\n  </w:tblPr>\n  <w:tblGrid>\n    <w:gridCol w:w=\"4675\"/><w:gridCol w:w=\"4675\"/>\n  </w:tblGrid>\n  <w:tr>\n    <w:tc>\n      <w:tcPr><w:tcW w:w=\"4675\" w:type=\"dxa\"/></w:tcPr>\n      <w:p><w:r><w:t>Cell 1</w:t></w:r></w:p>\n    </w:tc>\n    <w:tc>\n      <w:tcPr><w:tcW w:w=\"4675\" w:type=\"dxa\"/></w:tcPr>\n      <w:p><w:r><w:t>Cell 2</w:t></w:r></w:p>\n    </w:tc>\n  </w:tr>\n</w:tbl>\n```\n\n### Layout\n```xml\n<!-- Page break before new section (common pattern) -->\n<w:p>\n  <w:r>\n    <w:br w:type=\"page\"/>\n  </w:r>\n</w:p>\n<w:p>\n  <w:pPr>\n    <w:pStyle w:val=\"Heading1\"/>\n  </w:pPr>\n  <w:r>\n    <w:t>New Section Title</w:t>\n  </w:r>\n</w:p>\n\n<!-- Centered paragraph -->\n<w:p>\n  <w:pPr>\n    <w:spacing w:before=\"240\" w:after=\"0\"/>\n    <w:jc w:val=\"center\"/>\n  </w:pPr>\n  <w:r><w:t>Centered text</w:t></w:r>\n</w:p>\n\n<!-- Font change - paragraph level (applies to all runs) -->\n<w:p>\n  <w:pPr>\n    <w:rPr><w:rFonts w:ascii=\"Courier New\" w:hAnsi=\"Courier New\"/></w:rPr>\n  </w:pPr>\n  <w:r><w:t>Monospace text</w:t></w:r>\n</w:p>\n\n<!-- Font change - run level (specific to this text) -->\n<w:p>\n  <w:r>\n    <w:rPr><w:rFonts w:ascii=\"Courier New\" w:hAnsi=\"Courier New\"/></w:rPr>\n    <w:t>This text is Courier New</w:t>\n  </w:r>\n  <w:r><w:t> and this text uses default font</w:t></w:r>\n</w:p>\n```\n\n## File Updates\n\nWhen adding content, update these files:\n\n**`word/_rels/document.xml.rels`:**\n```xml\n<Relationship Id=\"rId1\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/numbering\" Target=\"numbering.xml\"/>\n<Relationship Id=\"rId5\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image\" Target=\"media/image1.png\"/>\n```\n\n**`[Content_Types].xml`:**\n```xml\n<Default Extension=\"png\" ContentType=\"image/png\"/>\n<Override PartName=\"/word/numbering.xml\" ContentType=\"application/vnd.openxmlformats-officedocument.wordprocessingml.numbering+xml\"/>\n```\n\n### Images\n**CRITICAL**: Calculate dimensions to prevent page overflow and maintain aspect ratio.\n\n```xml\n<!-- Minimal required structure -->\n<w:p>\n  <w:r>\n    <w:drawing>\n      <wp:inline>\n        <wp:extent cx=\"2743200\" cy=\"1828800\"/>\n        <wp:docPr id=\"1\" name=\"Picture 1\"/>\n        <a:graphic xmlns:a=\"http://schemas.openxmlformats.org/drawingml/2006/main\">\n          <a:graphicData uri=\"http://schemas.openxmlformats.org/drawingml/2006/picture\">\n            <pic:pic xmlns:pic=\"http://schemas.openxmlformats.org/drawingml/2006/picture\">\n              <pic:nvPicPr>\n                <pic:cNvPr id=\"0\" name=\"image1.png\"/>\n                <pic:cNvPicPr/>\n              </pic:nvPicPr>\n              <pic:blipFill>\n                <a:blip r:embed=\"rId5\"/>\n                <!-- Add for stretch fill with aspect ratio preservation -->\n                <a:stretch>\n                  <a:fillRect/>\n                </a:stretch>\n              </pic:blipFill>\n              <pic:spPr>\n                <a:xfrm>\n                  <a:ext cx=\"2743200\" cy=\"1828800\"/>\n                </a:xfrm>\n                <a:prstGeom prst=\"rect\"/>\n              </pic:spPr>\n            </pic:pic>\n          </a:graphicData>\n        </a:graphic>\n      </wp:inline>\n    </w:drawing>\n  </w:r>\n</w:p>\n```\n\n### Links (Hyperlinks)\n\n**IMPORTANT**: All hyperlinks (both internal and external) require the Hyperlink style to be defined in styles.xml. Without this style, links will look like regular text instead of blue underlined clickable links.\n\n**External Links:**\n```xml\n<!-- In document.xml -->\n<w:hyperlink r:id=\"rId5\">\n  <w:r>\n    <w:rPr><w:rStyle w:val=\"Hyperlink\"/></w:rPr>\n    <w:t>Link Text</w:t>\n  </w:r>\n</w:hyperlink>\n\n<!-- In word/_rels/document.xml.rels -->\n<Relationship Id=\"rId5\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink\" \n              Target=\"https://www.example.com/\" TargetMode=\"External\"/>\n```\n\n**Internal Links:**\n\n```xml\n<!-- Link to bookmark -->\n<w:hyperlink w:anchor=\"myBookmark\">\n  <w:r>\n    <w:rPr><w:rStyle w:val=\"Hyperlink\"/></w:rPr>\n    <w:t>Link Text</w:t>\n  </w:r>\n</w:hyperlink>\n\n<!-- Bookmark target -->\n<w:bookmarkStart w:id=\"0\" w:name=\"myBookmark\"/>\n<w:r><w:t>Target content</w:t></w:r>\n<w:bookmarkEnd w:id=\"0\"/>\n```\n\n**Hyperlink Style (required in styles.xml):**\n```xml\n<w:style w:type=\"character\" w:styleId=\"Hyperlink\">\n  <w:name w:val=\"Hyperlink\"/>\n  <w:basedOn w:val=\"DefaultParagraphFont\"/>\n  <w:uiPriority w:val=\"99\"/>\n  <w:unhideWhenUsed/>\n  <w:rPr>\n    <w:color w:val=\"467886\" w:themeColor=\"hyperlink\"/>\n    <w:u w:val=\"single\"/>\n  </w:rPr>\n</w:style>\n```\n\n## Document Library (Python)\n\nUse the Document class from `scripts/document.py` for all tracked changes and comments. It automatically handles infrastructure setup (people.xml, RSIDs, settings.xml, comment files, relationships, content types). Only use direct XML manipulation for complex scenarios not supported by the library.\n\n**Working with Unicode and Entities:**\n- **Searching**: Both entity notation and Unicode characters work - `contains=\"&#8220;Company\"` and `contains=\"\\u201cCompany\"` find the same text\n- **Replacing**: Use either entities (`&#8220;`) or Unicode (`\\u201c`) - both work and will be converted appropriately based on the file's encoding (ascii â†’ entities, utf-8 â†’ Unicode)\n\n### Initialization\n\n**Find the docx skill root** (directory containing `scripts/` and `ooxml/`):\n```bash\n# Search for document.py to locate the skill root\n# Note: /mnt/skills is used here as an example; check your context for the actual location\nfind /mnt/skills -name \"document.py\" -path \"*/docx/scripts/*\" 2>/dev/null | head -1\n# Example output: /mnt/skills/docx/scripts/document.py\n# Skill root is: /mnt/skills/docx\n```\n\n**Run your script with PYTHONPATH** set to the docx skill root:\n```bash\nPYTHONPATH=/mnt/skills/docx python your_script.py\n```\n\n**In your script**, import from the skill root:\n```python\nfrom scripts.document import Document, DocxXMLEditor\n\n# Basic initialization (automatically creates temp copy and sets up infrastructure)\ndoc = Document('unpacked')\n\n# Customize author and initials\ndoc = Document('unpacked', author=\"John Doe\", initials=\"JD\")\n\n# Enable track revisions mode\ndoc = Document('unpacked', track_revisions=True)\n\n# Specify custom RSID (auto-generated if not provided)\ndoc = Document('unpacked', rsid=\"07DC5ECB\")\n```\n\n### Creating Tracked Changes\n\n**CRITICAL**: Only mark text that actually changes. Keep ALL unchanged text outside `<w:del>`/`<w:ins>` tags. Marking unchanged text makes edits unprofessional and harder to review.\n\n**Attribute Handling**: The Document class auto-injects attributes (w:id, w:date, w:rsidR, w:rsidDel, w16du:dateUtc, xml:space) into new elements. When preserving unchanged text from the original document, copy the original `<w:r>` element with its existing attributes to maintain document integrity.\n\n**Method Selection Guide**:\n- **Adding your own changes to regular text**: Use `replace_node()` with `<w:del>`/`<w:ins>` tags, or `suggest_deletion()` for removing entire `<w:r>` or `<w:p>` elements\n- **Partially modifying another author's tracked change**: Use `replace_node()` to nest your changes inside their `<w:ins>`/`<w:del>`\n- **Completely rejecting another author's insertion**: Use `revert_insertion()` on the `<w:ins>` element (NOT `suggest_deletion()`)\n- **Completely rejecting another author's deletion**: Use `revert_deletion()` on the `<w:del>` element to restore deleted content using tracked changes\n\n```python\n# Minimal edit - change one word: \"The report is monthly\" â†’ \"The report is quarterly\"\n# Original: <w:r w:rsidR=\"00AB12CD\"><w:rPr><w:rFonts w:ascii=\"Calibri\"/></w:rPr><w:t>The report is monthly</w:t></w:r>\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", contains=\"The report is monthly\")\nrpr = tags[0].toxml() if (tags := node.getElementsByTagName(\"w:rPr\")) else \"\"\nreplacement = f'<w:r w:rsidR=\"00AB12CD\">{rpr}<w:t>The report is </w:t></w:r><w:del><w:r>{rpr}<w:delText>monthly</w:delText></w:r></w:del><w:ins><w:r>{rpr}<w:t>quarterly</w:t></w:r></w:ins>'\ndoc[\"word/document.xml\"].replace_node(node, replacement)\n\n# Minimal edit - change number: \"within 30 days\" â†’ \"within 45 days\"\n# Original: <w:r w:rsidR=\"00XYZ789\"><w:rPr><w:rFonts w:ascii=\"Calibri\"/></w:rPr><w:t>within 30 days</w:t></w:r>\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", contains=\"within 30 days\")\nrpr = tags[0].toxml() if (tags := node.getElementsByTagName(\"w:rPr\")) else \"\"\nreplacement = f'<w:r w:rsidR=\"00XYZ789\">{rpr}<w:t>within </w:t></w:r><w:del><w:r>{rpr}<w:delText>30</w:delText></w:r></w:del><w:ins><w:r>{rpr}<w:t>45</w:t></w:r></w:ins><w:r w:rsidR=\"00XYZ789\">{rpr}<w:t> days</w:t></w:r>'\ndoc[\"word/document.xml\"].replace_node(node, replacement)\n\n# Complete replacement - preserve formatting even when replacing all text\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", contains=\"apple\")\nrpr = tags[0].toxml() if (tags := node.getElementsByTagName(\"w:rPr\")) else \"\"\nreplacement = f'<w:del><w:r>{rpr}<w:delText>apple</w:delText></w:r></w:del><w:ins><w:r>{rpr}<w:t>banana orange</w:t></w:r></w:ins>'\ndoc[\"word/document.xml\"].replace_node(node, replacement)\n\n# Insert new content (no attributes needed - auto-injected)\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", contains=\"existing text\")\ndoc[\"word/document.xml\"].insert_after(node, '<w:ins><w:r><w:t>new text</w:t></w:r></w:ins>')\n\n# Partially delete another author's insertion\n# Original: <w:ins w:author=\"Jane Smith\" w:date=\"...\"><w:r><w:t>quarterly financial report</w:t></w:r></w:ins>\n# Goal: Delete only \"financial\" to make it \"quarterly report\"\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:ins\", attrs={\"w:id\": \"5\"})\n# IMPORTANT: Preserve w:author=\"Jane Smith\" on the outer <w:ins> to maintain authorship\nreplacement = '''<w:ins w:author=\"Jane Smith\" w:date=\"2025-01-15T10:00:00Z\">\n  <w:r><w:t>quarterly </w:t></w:r>\n  <w:del><w:r><w:delText>financial </w:delText></w:r></w:del>\n  <w:r><w:t>report</w:t></w:r>\n</w:ins>'''\ndoc[\"word/document.xml\"].replace_node(node, replacement)\n\n# Change part of another author's insertion\n# Original: <w:ins w:author=\"Jane Smith\"><w:r><w:t>in silence, safe and sound</w:t></w:r></w:ins>\n# Goal: Change \"safe and sound\" to \"soft and unbound\"\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:ins\", attrs={\"w:id\": \"8\"})\nreplacement = f'''<w:ins w:author=\"Jane Smith\" w:date=\"2025-01-15T10:00:00Z\">\n  <w:r><w:t>in silence, </w:t></w:r>\n</w:ins>\n<w:ins>\n  <w:r><w:t>soft and unbound</w:t></w:r>\n</w:ins>\n<w:ins w:author=\"Jane Smith\" w:date=\"2025-01-15T10:00:00Z\">\n  <w:del><w:r><w:delText>safe and sound</w:delText></w:r></w:del>\n</w:ins>'''\ndoc[\"word/document.xml\"].replace_node(node, replacement)\n\n# Delete entire run (use only when deleting all content; use replace_node for partial deletions)\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", contains=\"text to delete\")\ndoc[\"word/document.xml\"].suggest_deletion(node)\n\n# Delete entire paragraph (in-place, handles both regular and numbered list paragraphs)\npara = doc[\"word/document.xml\"].get_node(tag=\"w:p\", contains=\"paragraph to delete\")\ndoc[\"word/document.xml\"].suggest_deletion(para)\n\n# Add new numbered list item\ntarget_para = doc[\"word/document.xml\"].get_node(tag=\"w:p\", contains=\"existing list item\")\npPr = tags[0].toxml() if (tags := target_para.getElementsByTagName(\"w:pPr\")) else \"\"\nnew_item = f'<w:p>{pPr}<w:r><w:t>New item</w:t></w:r></w:p>'\ntracked_para = DocxXMLEditor.suggest_paragraph(new_item)\ndoc[\"word/document.xml\"].insert_after(target_para, tracked_para)\n# Optional: add spacing paragraph before content for better visual separation\n# spacing = DocxXMLEditor.suggest_paragraph('<w:p><w:pPr><w:pStyle w:val=\"ListParagraph\"/></w:pPr></w:p>')\n# doc[\"word/document.xml\"].insert_after(target_para, spacing + tracked_para)\n```\n\n### Adding Comments\n\n```python\n# Add comment spanning two existing tracked changes\n# Note: w:id is auto-generated. Only search by w:id if you know it from XML inspection\nstart_node = doc[\"word/document.xml\"].get_node(tag=\"w:del\", attrs={\"w:id\": \"1\"})\nend_node = doc[\"word/document.xml\"].get_node(tag=\"w:ins\", attrs={\"w:id\": \"2\"})\ndoc.add_comment(start=start_node, end=end_node, text=\"Explanation of this change\")\n\n# Add comment on a paragraph\npara = doc[\"word/document.xml\"].get_node(tag=\"w:p\", contains=\"paragraph text\")\ndoc.add_comment(start=para, end=para, text=\"Comment on this paragraph\")\n\n# Add comment on newly created tracked change\n# First create the tracked change\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", contains=\"old\")\nnew_nodes = doc[\"word/document.xml\"].replace_node(\n    node,\n    '<w:del><w:r><w:delText>old</w:delText></w:r></w:del><w:ins><w:r><w:t>new</w:t></w:r></w:ins>'\n)\n# Then add comment on the newly created elements\n# new_nodes[0] is the <w:del>, new_nodes[1] is the <w:ins>\ndoc.add_comment(start=new_nodes[0], end=new_nodes[1], text=\"Changed old to new per requirements\")\n\n# Reply to existing comment\ndoc.reply_to_comment(parent_comment_id=0, text=\"I agree with this change\")\n```\n\n### Rejecting Tracked Changes\n\n**IMPORTANT**: Use `revert_insertion()` to reject insertions and `revert_deletion()` to restore deletions using tracked changes. Use `suggest_deletion()` only for regular unmarked content.\n\n```python\n# Reject insertion (wraps it in deletion)\n# Use this when another author inserted text that you want to delete\nins = doc[\"word/document.xml\"].get_node(tag=\"w:ins\", attrs={\"w:id\": \"5\"})\nnodes = doc[\"word/document.xml\"].revert_insertion(ins)  # Returns [ins]\n\n# Reject deletion (creates insertion to restore deleted content)\n# Use this when another author deleted text that you want to restore\ndel_elem = doc[\"word/document.xml\"].get_node(tag=\"w:del\", attrs={\"w:id\": \"3\"})\nnodes = doc[\"word/document.xml\"].revert_deletion(del_elem)  # Returns [del_elem, new_ins]\n\n# Reject all insertions in a paragraph\npara = doc[\"word/document.xml\"].get_node(tag=\"w:p\", contains=\"paragraph text\")\nnodes = doc[\"word/document.xml\"].revert_insertion(para)  # Returns [para]\n\n# Reject all deletions in a paragraph\npara = doc[\"word/document.xml\"].get_node(tag=\"w:p\", contains=\"paragraph text\")\nnodes = doc[\"word/document.xml\"].revert_deletion(para)  # Returns [para]\n```\n\n### Inserting Images\n\n**CRITICAL**: The Document class works with a temporary copy at `doc.unpacked_path`. Always copy images to this temp directory, not the original unpacked folder.\n\n```python\nfrom PIL import Image\nimport shutil, os\n\n# Initialize document first\ndoc = Document('unpacked')\n\n# Copy image and calculate full-width dimensions with aspect ratio\nmedia_dir = os.path.join(doc.unpacked_path, 'word/media')\nos.makedirs(media_dir, exist_ok=True)\nshutil.copy('image.png', os.path.join(media_dir, 'image1.png'))\nimg = Image.open(os.path.join(media_dir, 'image1.png'))\nwidth_emus = int(6.5 * 914400)  # 6.5\" usable width, 914400 EMUs/inch\nheight_emus = int(width_emus * img.size[1] / img.size[0])\n\n# Add relationship and content type\nrels_editor = doc['word/_rels/document.xml.rels']\nnext_rid = rels_editor.get_next_rid()\nrels_editor.append_to(rels_editor.dom.documentElement,\n    f'<Relationship Id=\"{next_rid}\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image\" Target=\"media/image1.png\"/>')\ndoc['[Content_Types].xml'].append_to(doc['[Content_Types].xml'].dom.documentElement,\n    '<Default Extension=\"png\" ContentType=\"image/png\"/>')\n\n# Insert image\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:p\", line_number=100)\ndoc[\"word/document.xml\"].insert_after(node, f'''<w:p>\n  <w:r>\n    <w:drawing>\n      <wp:inline distT=\"0\" distB=\"0\" distL=\"0\" distR=\"0\">\n        <wp:extent cx=\"{width_emus}\" cy=\"{height_emus}\"/>\n        <wp:docPr id=\"1\" name=\"Picture 1\"/>\n        <a:graphic xmlns:a=\"http://schemas.openxmlformats.org/drawingml/2006/main\">\n          <a:graphicData uri=\"http://schemas.openxmlformats.org/drawingml/2006/picture\">\n            <pic:pic xmlns:pic=\"http://schemas.openxmlformats.org/drawingml/2006/picture\">\n              <pic:nvPicPr><pic:cNvPr id=\"1\" name=\"image1.png\"/><pic:cNvPicPr/></pic:nvPicPr>\n              <pic:blipFill><a:blip r:embed=\"{next_rid}\"/><a:stretch><a:fillRect/></a:stretch></pic:blipFill>\n              <pic:spPr><a:xfrm><a:ext cx=\"{width_emus}\" cy=\"{height_emus}\"/></a:xfrm><a:prstGeom prst=\"rect\"><a:avLst/></a:prstGeom></pic:spPr>\n            </pic:pic>\n          </a:graphicData>\n        </a:graphic>\n      </wp:inline>\n    </w:drawing>\n  </w:r>\n</w:p>''')\n```\n\n### Getting Nodes\n\n```python\n# By text content\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:p\", contains=\"specific text\")\n\n# By line range\npara = doc[\"word/document.xml\"].get_node(tag=\"w:p\", line_number=range(100, 150))\n\n# By attributes\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:del\", attrs={\"w:id\": \"1\"})\n\n# By exact line number (must be line number where tag opens)\npara = doc[\"word/document.xml\"].get_node(tag=\"w:p\", line_number=42)\n\n# Combine filters\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", line_number=range(40, 60), contains=\"text\")\n\n# Disambiguate when text appears multiple times - add line_number range\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", contains=\"Section\", line_number=range(2400, 2500))\n```\n\n### Saving\n\n```python\n# Save with automatic validation (copies back to original directory)\ndoc.save()  # Validates by default, raises error if validation fails\n\n# Save to different location\ndoc.save('modified-unpacked')\n\n# Skip validation (debugging only - needing this in production indicates XML issues)\ndoc.save(validate=False)\n```\n\n### Direct DOM Manipulation\n\nFor complex scenarios not covered by the library:\n\n```python\n# Access any XML file\neditor = doc[\"word/document.xml\"]\neditor = doc[\"word/comments.xml\"]\n\n# Direct DOM access (defusedxml.minidom.Document)\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:p\", line_number=5)\nparent = node.parentNode\nparent.removeChild(node)\nparent.appendChild(node)  # Move to end\n\n# General document manipulation (without tracked changes)\nold_node = doc[\"word/document.xml\"].get_node(tag=\"w:p\", contains=\"original text\")\ndoc[\"word/document.xml\"].replace_node(old_node, \"<w:p><w:r><w:t>replacement text</w:t></w:r></w:p>\")\n\n# Multiple insertions - use return value to maintain order\nnode = doc[\"word/document.xml\"].get_node(tag=\"w:r\", line_number=100)\nnodes = doc[\"word/document.xml\"].insert_after(node, \"<w:r><w:t>A</w:t></w:r>\")\nnodes = doc[\"word/document.xml\"].insert_after(nodes[-1], \"<w:r><w:t>B</w:t></w:r>\")\nnodes = doc[\"word/document.xml\"].insert_after(nodes[-1], \"<w:r><w:t>C</w:t></w:r>\")\n# Results in: original_node, A, B, C\n```\n\n## Tracked Changes (Redlining)\n\n**Use the Document class above for all tracked changes.** The patterns below are for reference when constructing replacement XML strings.\n\n### Validation Rules\nThe validator checks that the document text matches the original after reverting Claude's changes. This means:\n- **NEVER modify text inside another author's `<w:ins>` or `<w:del>` tags**\n- **ALWAYS use nested deletions** to remove another author's insertions\n- **Every edit must be properly tracked** with `<w:ins>` or `<w:del>` tags\n\n### Tracked Change Patterns\n\n**CRITICAL RULES**:\n1. Never modify the content inside another author's tracked changes. Always use nested deletions.\n2. **XML Structure**: Always place `<w:del>` and `<w:ins>` at paragraph level containing complete `<w:r>` elements. Never nest inside `<w:r>` elements - this creates invalid XML that breaks document processing.\n\n**Text Insertion:**\n```xml\n<w:ins w:id=\"1\" w:author=\"Claude\" w:date=\"2025-07-30T23:05:00Z\" w16du:dateUtc=\"2025-07-31T06:05:00Z\">\n  <w:r w:rsidR=\"00792858\">\n    <w:t>inserted text</w:t>\n  </w:r>\n</w:ins>\n```\n\n**Text Deletion:**\n```xml\n<w:del w:id=\"2\" w:author=\"Claude\" w:date=\"2025-07-30T23:05:00Z\" w16du:dateUtc=\"2025-07-31T06:05:00Z\">\n  <w:r w:rsidDel=\"00792858\">\n    <w:delText>deleted text</w:delText>\n  </w:r>\n</w:del>\n```\n\n**Deleting Another Author's Insertion (MUST use nested structure):**\n```xml\n<!-- Nest deletion inside the original insertion -->\n<w:ins w:author=\"Jane Smith\" w:id=\"16\">\n  <w:del w:author=\"Claude\" w:id=\"40\">\n    <w:r><w:delText>monthly</w:delText></w:r>\n  </w:del>\n</w:ins>\n<w:ins w:author=\"Claude\" w:id=\"41\">\n  <w:r><w:t>weekly</w:t></w:r>\n</w:ins>\n```\n\n**Restoring Another Author's Deletion:**\n```xml\n<!-- Leave their deletion unchanged, add new insertion after it -->\n<w:del w:author=\"Jane Smith\" w:id=\"50\">\n  <w:r><w:delText>within 30 days</w:delText></w:r>\n</w:del>\n<w:ins w:author=\"Claude\" w:id=\"51\">\n  <w:r><w:t>within 30 days</w:t></w:r>\n</w:ins>\n```",
        "plugins/documents/skills/pdf-processing-pro/FORMS.md": "# PDF Form Processing Guide\n\nComplete guide for processing PDF forms in production environments.\n\n## Table of contents\n\n- Form analysis and field detection\n- Form filling workflows\n- Validation strategies\n- Field types and handling\n- Multi-page forms\n- Flattening and finalization\n- Error handling patterns\n- Production examples\n\n## Form analysis\n\n### Analyze form structure\n\nUse `analyze_form.py` to extract complete form information:\n\n```bash\npython scripts/analyze_form.py application.pdf --output schema.json\n```\n\nOutput format:\n\n```json\n{\n  \"full_name\": {\n    \"type\": \"text\",\n    \"required\": true,\n    \"max_length\": 100,\n    \"x\": 120.5,\n    \"y\": 450.2,\n    \"width\": 300,\n    \"height\": 20\n  },\n  \"date_of_birth\": {\n    \"type\": \"text\",\n    \"required\": true,\n    \"format\": \"MM/DD/YYYY\",\n    \"x\": 120.5,\n    \"y\": 400.8,\n    \"width\": 150,\n    \"height\": 20\n  },\n  \"email_newsletter\": {\n    \"type\": \"checkbox\",\n    \"required\": false,\n    \"x\": 120.5,\n    \"y\": 350.4,\n    \"width\": 15,\n    \"height\": 15\n  },\n  \"preferred_contact\": {\n    \"type\": \"radio\",\n    \"required\": true,\n    \"options\": [\"email\", \"phone\", \"mail\"],\n    \"x\": 120.5,\n    \"y\": 300.0,\n    \"width\": 200,\n    \"height\": 60\n  }\n}\n```\n\n### Programmatic analysis\n\n```python\nfrom pypdf import PdfReader\n\nreader = PdfReader(\"form.pdf\")\nfields = reader.get_fields()\n\nfor field_name, field_info in fields.items():\n    print(f\"Field: {field_name}\")\n    print(f\"  Type: {field_info.get('/FT')}\")\n    print(f\"  Value: {field_info.get('/V')}\")\n    print(f\"  Flags: {field_info.get('/Ff', 0)}\")\n    print()\n```\n\n## Form filling workflows\n\n### Basic workflow\n\n```bash\n# 1. Analyze form\npython scripts/analyze_form.py template.pdf --output schema.json\n\n# 2. Prepare data\ncat > data.json << EOF\n{\n  \"full_name\": \"John Doe\",\n  \"date_of_birth\": \"01/15/1990\",\n  \"email\": \"john@example.com\",\n  \"email_newsletter\": true,\n  \"preferred_contact\": \"email\"\n}\nEOF\n\n# 3. Validate data\npython scripts/validate_form.py data.json schema.json\n\n# 4. Fill form\npython scripts/fill_form.py template.pdf data.json filled.pdf\n\n# 5. Flatten (optional - makes fields non-editable)\npython scripts/flatten_form.py filled.pdf final.pdf\n```\n\n### Programmatic filling\n\n```python\nfrom pypdf import PdfReader, PdfWriter\n\nreader = PdfReader(\"template.pdf\")\nwriter = PdfWriter()\n\n# Clone all pages\nfor page in reader.pages:\n    writer.add_page(page)\n\n# Fill form fields\nwriter.update_page_form_field_values(\n    writer.pages[0],\n    {\n        \"full_name\": \"John Doe\",\n        \"date_of_birth\": \"01/15/1990\",\n        \"email\": \"john@example.com\",\n        \"email_newsletter\": \"/Yes\",  # Checkbox value\n        \"preferred_contact\": \"/email\"  # Radio value\n    }\n)\n\n# Save filled form\nwith open(\"filled.pdf\", \"wb\") as output:\n    writer.write(output)\n```\n\n## Field types and handling\n\n### Text fields\n\n```python\n# Simple text\nfield_values[\"customer_name\"] = \"Jane Smith\"\n\n# Formatted text (dates)\nfield_values[\"date\"] = \"12/25/2024\"\n\n# Numbers\nfield_values[\"amount\"] = \"1234.56\"\n\n# Multi-line text\nfield_values[\"comments\"] = \"Line 1\\nLine 2\\nLine 3\"\n```\n\n### Checkboxes\n\nCheckboxes typically use `/Yes` for checked, `/Off` for unchecked:\n\n```python\n# Check checkbox\nfield_values[\"agree_to_terms\"] = \"/Yes\"\n\n# Uncheck checkbox\nfield_values[\"newsletter_opt_out\"] = \"/Off\"\n```\n\n**Note**: Some PDFs use different values. Check with `analyze_form.py`:\n\n```json\n{\n  \"some_checkbox\": {\n    \"type\": \"checkbox\",\n    \"on_value\": \"/On\",   # â† Check this\n    \"off_value\": \"/Off\"\n  }\n}\n```\n\n### Radio buttons\n\nRadio buttons are mutually exclusive options:\n\n```python\n# Select one option from radio group\nfield_values[\"preferred_contact\"] = \"/email\"\n\n# Other options in same group\n# field_values[\"preferred_contact\"] = \"/phone\"\n# field_values[\"preferred_contact\"] = \"/mail\"\n```\n\n### Dropdown/List boxes\n\n```python\n# Single selection\nfield_values[\"country\"] = \"United States\"\n\n# List of available options in schema\n\"country\": {\n  \"type\": \"dropdown\",\n  \"options\": [\"United States\", \"Canada\", \"Mexico\", ...]\n}\n```\n\n## Validation strategies\n\n### Schema-based validation\n\n```python\nimport json\nfrom jsonschema import validate, ValidationError\n\n# Load schema from analyze_form.py output\nwith open(\"schema.json\") as f:\n    schema = json.load(f)\n\n# Load form data\nwith open(\"data.json\") as f:\n    data = json.load(f)\n\n# Validate all fields\nerrors = []\n\nfor field_name, field_schema in schema.items():\n    value = data.get(field_name)\n\n    # Check required fields\n    if field_schema.get(\"required\") and not value:\n        errors.append(f\"Missing required field: {field_name}\")\n\n    # Check field type\n    if value and field_schema.get(\"type\") == \"text\":\n        if not isinstance(value, str):\n            errors.append(f\"Field {field_name} must be string\")\n\n    # Check max length\n    max_length = field_schema.get(\"max_length\")\n    if value and max_length and len(str(value)) > max_length:\n        errors.append(f\"Field {field_name} exceeds max length {max_length}\")\n\n    # Check format (dates, emails, etc)\n    format_type = field_schema.get(\"format\")\n    if value and format_type:\n        if not validate_format(value, format_type):\n            errors.append(f\"Field {field_name} has invalid format\")\n\nif errors:\n    print(\"Validation errors:\")\n    for error in errors:\n        print(f\"  - {error}\")\n    exit(1)\n\nprint(\"Validation passed\")\n```\n\n### Format validation\n\n```python\nimport re\nfrom datetime import datetime\n\ndef validate_format(value, format_type):\n    \"\"\"Validate field format.\"\"\"\n\n    if format_type == \"email\":\n        pattern = r'^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,}$'\n        return re.match(pattern, value) is not None\n\n    elif format_type == \"phone\":\n        # US phone: (555) 123-4567 or 555-123-4567\n        pattern = r'^\\(?\\d{3}\\)?[-.\\s]?\\d{3}[-.\\s]?\\d{4}$'\n        return re.match(pattern, value) is not None\n\n    elif format_type == \"MM/DD/YYYY\":\n        try:\n            datetime.strptime(value, \"%m/%d/%Y\")\n            return True\n        except ValueError:\n            return False\n\n    elif format_type == \"SSN\":\n        # XXX-XX-XXXX\n        pattern = r'^\\d{3}-\\d{2}-\\d{4}$'\n        return re.match(pattern, value) is not None\n\n    elif format_type == \"ZIP\":\n        # XXXXX or XXXXX-XXXX\n        pattern = r'^\\d{5}(-\\d{4})?$'\n        return re.match(pattern, value) is not None\n\n    return True  # Unknown format, skip validation\n```\n\n## Multi-page forms\n\n### Handling multi-page forms\n\n```python\nfrom pypdf import PdfReader, PdfWriter\n\nreader = PdfReader(\"multi_page_form.pdf\")\nwriter = PdfWriter()\n\n# Clone all pages\nfor page in reader.pages:\n    writer.add_page(page)\n\n# Fill fields on page 1\nwriter.update_page_form_field_values(\n    writer.pages[0],\n    {\n        \"name_page1\": \"John Doe\",\n        \"email_page1\": \"john@example.com\"\n    }\n)\n\n# Fill fields on page 2\nwriter.update_page_form_field_values(\n    writer.pages[1],\n    {\n        \"address_page2\": \"123 Main St\",\n        \"city_page2\": \"Springfield\"\n    }\n)\n\n# Fill fields on page 3\nwriter.update_page_form_field_values(\n    writer.pages[2],\n    {\n        \"signature_page3\": \"John Doe\",\n        \"date_page3\": \"12/25/2024\"\n    }\n)\n\nwith open(\"filled_multi_page.pdf\", \"wb\") as output:\n    writer.write(output)\n```\n\n### Identifying page-specific fields\n\n```python\n# Analyze which fields are on which pages\nfor page_num, page in enumerate(reader.pages, 1):\n    fields = page.get(\"/Annots\", [])\n\n    if fields:\n        print(f\"\\nPage {page_num} fields:\")\n        for field_ref in fields:\n            field = field_ref.get_object()\n            field_name = field.get(\"/T\", \"Unknown\")\n            print(f\"  - {field_name}\")\n```\n\n## Flattening forms\n\n### Why flatten\n\nFlattening makes form fields non-editable, embedding values permanently:\n\n- **Security**: Prevent modifications\n- **Distribution**: Share read-only forms\n- **Printing**: Ensure correct appearance\n- **Archival**: Long-term storage\n\n### Flatten with pypdf\n\n```python\nfrom pypdf import PdfReader, PdfWriter\n\nreader = PdfReader(\"filled.pdf\")\nwriter = PdfWriter()\n\n# Add all pages\nfor page in reader.pages:\n    writer.add_page(page)\n\n# Flatten all form fields\nwriter.flatten_fields()\n\n# Save flattened PDF\nwith open(\"flattened.pdf\", \"wb\") as output:\n    writer.write(output)\n```\n\n### Using included script\n\n```bash\npython scripts/flatten_form.py filled.pdf flattened.pdf\n```\n\n## Error handling patterns\n\n### Robust form filling\n\n```python\nimport logging\nfrom pathlib import Path\nfrom pypdf import PdfReader, PdfWriter\nfrom pypdf.errors import PdfReadError\n\nlogging.basicConfig(level=logging.INFO)\nlogger = logging.getLogger(__name__)\n\ndef fill_form_safe(template_path, data, output_path):\n    \"\"\"Fill form with comprehensive error handling.\"\"\"\n\n    try:\n        # Validate inputs\n        template = Path(template_path)\n        if not template.exists():\n            raise FileNotFoundError(f\"Template not found: {template_path}\")\n\n        # Read template\n        logger.info(f\"Reading template: {template_path}\")\n        reader = PdfReader(template_path)\n\n        if not reader.pages:\n            raise ValueError(\"PDF has no pages\")\n\n        # Check if form has fields\n        fields = reader.get_fields()\n        if not fields:\n            logger.warning(\"PDF has no form fields\")\n            return False\n\n        # Create writer\n        writer = PdfWriter()\n        for page in reader.pages:\n            writer.add_page(page)\n\n        # Validate data against schema\n        missing_required = []\n        invalid_fields = []\n\n        for field_name, field_info in fields.items():\n            # Check required fields\n            is_required = field_info.get(\"/Ff\", 0) & 2 == 2\n            if is_required and field_name not in data:\n                missing_required.append(field_name)\n\n            # Check invalid field names in data\n            if field_name in data:\n                value = data[field_name]\n                # Add type validation here if needed\n\n        if missing_required:\n            raise ValueError(f\"Missing required fields: {missing_required}\")\n\n        # Fill fields\n        logger.info(\"Filling form fields\")\n        writer.update_page_form_field_values(\n            writer.pages[0],\n            data\n        )\n\n        # Write output\n        logger.info(f\"Writing output: {output_path}\")\n        with open(output_path, \"wb\") as output:\n            writer.write(output)\n\n        logger.info(\"Form filled successfully\")\n        return True\n\n    except PdfReadError as e:\n        logger.error(f\"PDF read error: {e}\")\n        return False\n\n    except FileNotFoundError as e:\n        logger.error(f\"File error: {e}\")\n        return False\n\n    except ValueError as e:\n        logger.error(f\"Validation error: {e}\")\n        return False\n\n    except Exception as e:\n        logger.error(f\"Unexpected error: {e}\")\n        return False\n\n# Usage\nsuccess = fill_form_safe(\n    \"template.pdf\",\n    {\"name\": \"John\", \"email\": \"john@example.com\"},\n    \"filled.pdf\"\n)\n\nif not success:\n    exit(1)\n```\n\n## Production examples\n\n### Example 1: Batch form processing\n\n```python\nimport json\nimport glob\nfrom pathlib import Path\nfrom fill_form_safe import fill_form_safe\n\n# Process multiple submissions\nsubmissions_dir = Path(\"submissions\")\ntemplate = \"application_template.pdf\"\noutput_dir = Path(\"completed\")\noutput_dir.mkdir(exist_ok=True)\n\nfor submission_file in submissions_dir.glob(\"*.json\"):\n    print(f\"Processing: {submission_file.name}\")\n\n    # Load submission data\n    with open(submission_file) as f:\n        data = json.load(f)\n\n    # Fill form\n    applicant_id = data.get(\"id\", \"unknown\")\n    output_file = output_dir / f\"application_{applicant_id}.pdf\"\n\n    success = fill_form_safe(template, data, output_file)\n\n    if success:\n        print(f\"  âœ“ Completed: {output_file}\")\n    else:\n        print(f\"  âœ— Failed: {submission_file.name}\")\n```\n\n### Example 2: Form with conditional logic\n\n```python\ndef prepare_form_data(raw_data):\n    \"\"\"Prepare form data with conditional logic.\"\"\"\n\n    form_data = {}\n\n    # Basic fields\n    form_data[\"full_name\"] = raw_data[\"name\"]\n    form_data[\"email\"] = raw_data[\"email\"]\n\n    # Conditional fields\n    if raw_data.get(\"is_student\"):\n        form_data[\"student_id\"] = raw_data[\"student_id\"]\n        form_data[\"school_name\"] = raw_data[\"school\"]\n    else:\n        form_data[\"employer\"] = raw_data.get(\"employer\", \"\")\n\n    # Checkbox logic\n    form_data[\"newsletter\"] = \"/Yes\" if raw_data.get(\"opt_in\") else \"/Off\"\n\n    # Calculated fields\n    total = sum(raw_data.get(\"items\", []))\n    form_data[\"total_amount\"] = f\"${total:.2f}\"\n\n    return form_data\n\n# Usage\nraw_input = {\n    \"name\": \"Jane Smith\",\n    \"email\": \"jane@example.com\",\n    \"is_student\": True,\n    \"student_id\": \"12345\",\n    \"school\": \"State University\",\n    \"opt_in\": True,\n    \"items\": [10.00, 25.50, 15.75]\n}\n\nform_data = prepare_form_data(raw_input)\nfill_form_safe(\"template.pdf\", form_data, \"output.pdf\")\n```\n\n## Best practices\n\n1. **Always analyze before filling**: Use `analyze_form.py` to understand structure\n2. **Validate early**: Check data before attempting to fill\n3. **Use logging**: Track operations for debugging\n4. **Handle errors gracefully**: Don't crash on invalid data\n5. **Test with samples**: Verify with small datasets first\n6. **Flatten when distributing**: Make read-only for recipients\n7. **Keep templates versioned**: Track form template changes\n8. **Document field mappings**: Maintain data-to-field documentation\n\n## Troubleshooting\n\n### Fields not filling\n\n1. Check field names match exactly (case-sensitive)\n2. Verify checkbox/radio values (`/Yes`, `/On`, etc.)\n3. Ensure PDF is not encrypted or protected\n4. Check if form uses XFA format (not supported by pypdf)\n\n### Encoding issues\n\n```python\n# Handle special characters\nfield_values[\"name\"] = \"JosÃ© GarcÃ­a\"  # UTF-8 encoded\n```\n\n### Large batch processing\n\n```python\n# Process in chunks to avoid memory issues\nchunk_size = 100\n\nfor i in range(0, len(submissions), chunk_size):\n    chunk = submissions[i:i + chunk_size]\n    process_batch(chunk)\n```\n",
        "plugins/documents/skills/pdf-processing-pro/OCR.md": "# PDF OCR Processing Guide\n\nExtract text from scanned PDFs and image-based documents.\n\n## Quick start\n\n```python\nimport pytesseract\nfrom pdf2image import convert_from_path\nfrom PIL import Image\n\n# Convert PDF to images\nimages = convert_from_path(\"scanned.pdf\")\n\n# Extract text from each page\nfor i, image in enumerate(images):\n    text = pytesseract.image_to_string(image)\n    print(f\"Page {i+1}:\\n{text}\\n\")\n```\n\n## Installation\n\n### Install Tesseract\n\n**macOS:**\n```bash\nbrew install tesseract\n```\n\n**Ubuntu/Debian:**\n```bash\nsudo apt-get install tesseract-ocr\n```\n\n**Windows:**\nDownload from: https://github.com/UB-Mannheim/tesseract/wiki\n\n### Install Python packages\n\n```bash\npip install pytesseract pdf2image pillow\n```\n\n## Language support\n\n```python\n# English (default)\ntext = pytesseract.image_to_string(image, lang=\"eng\")\n\n# Spanish\ntext = pytesseract.image_to_string(image, lang=\"spa\")\n\n# Multiple languages\ntext = pytesseract.image_to_string(image, lang=\"eng+spa+fra\")\n```\n\nInstall additional languages:\n```bash\n# macOS\nbrew install tesseract-lang\n\n# Ubuntu\nsudo apt-get install tesseract-ocr-spa tesseract-ocr-fra\n```\n\n## Image preprocessing\n\n```python\nfrom PIL import Image, ImageEnhance, ImageFilter\n\ndef preprocess_for_ocr(image):\n    \"\"\"Optimize image for better OCR accuracy.\"\"\"\n\n    # Convert to grayscale\n    image = image.convert(\"L\")\n\n    # Increase contrast\n    enhancer = ImageEnhance.Contrast(image)\n    image = enhancer.enhance(2.0)\n\n    # Denoise\n    image = image.filter(ImageFilter.MedianFilter())\n\n    # Sharpen\n    image = image.filter(ImageFilter.SHARPEN)\n\n    return image\n\n# Usage\nimage = Image.open(\"scanned_page.png\")\nprocessed = preprocess_for_ocr(image)\ntext = pytesseract.image_to_string(processed)\n```\n\n## Best practices\n\n1. **Preprocess images** for better accuracy\n2. **Use appropriate language** models\n3. **Batch process** large documents\n4. **Cache results** to avoid re-processing\n5. **Validate output** - OCR is not 100% accurate\n6. **Consider confidence scores** for quality checks\n\n## Production example\n\n```python\nimport pytesseract\nfrom pdf2image import convert_from_path\nfrom PIL import Image\n\ndef ocr_pdf(pdf_path, output_path):\n    \"\"\"OCR PDF and save to text file.\"\"\"\n\n    # Convert to images\n    images = convert_from_path(pdf_path, dpi=300)\n\n    full_text = []\n\n    for i, image in enumerate(images, 1):\n        print(f\"Processing page {i}/{len(images)}\")\n\n        # Preprocess\n        processed = preprocess_for_ocr(image)\n\n        # OCR\n        text = pytesseract.image_to_string(processed, lang=\"eng\")\n        full_text.append(f\"--- Page {i} ---\\n{text}\\n\")\n\n    # Save\n    with open(output_path, \"w\", encoding=\"utf-8\") as f:\n        f.write(\"\\n\".join(full_text))\n\n    print(f\"Saved to {output_path}\")\n\n# Usage\nocr_pdf(\"scanned_document.pdf\", \"extracted_text.txt\")\n```\n",
        "plugins/documents/skills/pdf-processing-pro/SKILL.md": "---\nname: PDF Processing Pro\ndescription: Production-ready PDF processing with forms, tables, OCR, validation, and batch operations. Use when working with complex PDF workflows in production environments, processing large volumes of PDFs, or requiring robust error handling and validation.\n---\n\n# PDF Processing Pro\n\nProduction-ready PDF processing toolkit with pre-built scripts, comprehensive error handling, and support for complex workflows.\n\n## Quick start\n\n### Extract text from PDF\n\n```python\nimport pdfplumber\n\nwith pdfplumber.open(\"document.pdf\") as pdf:\n    text = pdf.pages[0].extract_text()\n    print(text)\n```\n\n### Analyze PDF form (using included script)\n\n```bash\npython scripts/analyze_form.py\" input.pdf --output fields.json\n# Returns: JSON with all form fields, types, and positions\n```\n\n### Fill PDF form with validation\n\n```bash\npython scripts/fill_form.py\" input.pdf data.json output.pdf\n# Validates all fields before filling, includes error reporting\n```\n\n### Extract tables from PDF\n\n```bash\npython scripts/extract_tables.py\" report.pdf --output tables.csv\n# Extracts all tables with automatic column detection\n```\n\n## Features\n\n### âœ… Production-ready scripts\n\nAll scripts include:\n- **Error handling**: Graceful failures with detailed error messages\n- **Validation**: Input validation and type checking\n- **Logging**: Configurable logging with timestamps\n- **Type hints**: Full type annotations for IDE support\n- **CLI interface**: `--help` flag for all scripts\n- **Exit codes**: Proper exit codes for automation\n\n### âœ… Comprehensive workflows\n\n- **PDF Forms**: Complete form processing pipeline\n- **Table Extraction**: Advanced table detection and extraction\n- **OCR Processing**: Scanned PDF text extraction\n- **Batch Operations**: Process multiple PDFs efficiently\n- **Validation**: Pre and post-processing validation\n\n## Advanced topics\n\n### PDF Form Processing\n\nFor complete form workflows including:\n- Field analysis and detection\n- Dynamic form filling\n- Validation rules\n- Multi-page forms\n- Checkbox and radio button handling\n\nSee [FORMS.md](FORMS.md)\n\n### Table Extraction\n\nFor complex table extraction:\n- Multi-page tables\n- Merged cells\n- Nested tables\n- Custom table detection\n- Export to CSV/Excel\n\nSee [TABLES.md](TABLES.md)\n\n### OCR Processing\n\nFor scanned PDFs and image-based documents:\n- Tesseract integration\n- Language support\n- Image preprocessing\n- Confidence scoring\n- Batch OCR\n\nSee [OCR.md](OCR.md)\n\n## Included scripts\n\n### Form processing\n\n**analyze_form.py** - Extract form field information\n```bash\npython scripts/analyze_form.py\" input.pdf [--output fields.json] [--verbose]\n```\n\n**fill_form.py** - Fill PDF forms with data\n```bash\npython scripts/fill_form.py\" input.pdf data.json output.pdf [--validate]\n```\n\n**validate_form.py** - Validate form data before filling\n```bash\npython scripts/validate_form.py\" data.json schema.json\n```\n\n### Table extraction\n\n**extract_tables.py** - Extract tables to CSV/Excel\n```bash\npython scripts/extract_tables.py\" input.pdf [--output tables.csv] [--format csv|excel]\n```\n\n### Text extraction\n\n**extract_text.py** - Extract text with formatting preservation\n```bash\npython scripts/extract_text.py\" input.pdf [--output text.txt] [--preserve-formatting]\n```\n\n### Utilities\n\n**merge_pdfs.py** - Merge multiple PDFs\n```bash\npython scripts/merge_pdfs.py\" file1.pdf file2.pdf file3.pdf --output merged.pdf\n```\n\n**split_pdf.py** - Split PDF into individual pages\n```bash\npython scripts/split_pdf.py\" input.pdf --output-dir pages/\n```\n\n**validate_pdf.py** - Validate PDF integrity\n```bash\npython scripts/validate_pdf.py\" input.pdf\n```\n\n## Common workflows\n\n### Workflow 1: Process form submissions\n\n```bash\n# 1. Analyze form structure\npython scripts/analyze_form.py\" template.pdf --output schema.json\n\n# 2. Validate submission data\npython scripts/validate_form.py\" submission.json schema.json\n\n# 3. Fill form\npython scripts/fill_form.py\" template.pdf submission.json completed.pdf\n\n# 4. Validate output\npython scripts/validate_pdf.py\" completed.pdf\n```\n\n### Workflow 2: Extract data from reports\n\n```bash\n# 1. Extract tables\npython scripts/extract_tables.py\" monthly_report.pdf --output data.csv\n\n# 2. Extract text for analysis\npython scripts/extract_text.py\" monthly_report.pdf --output report.txt\n```\n\n### Workflow 3: Batch processing\n\n```python\nimport glob\nfrom pathlib import Path\nimport subprocess\n\n# Process all PDFs in directory\nfor pdf_file in glob.glob(\"invoices/*.pdf\"):\n    output_file = Path(\"processed\") / Path(pdf_file).name\n\n    result = subprocess.run([\n        \"python\", \"scripts/extract_text.py\",\n        pdf_file,\n        \"--output\", str(output_file)\n    ], capture_output=True)\n\n    if result.returncode == 0:\n        print(f\"âœ“ Processed: {pdf_file}\")\n    else:\n        print(f\"âœ— Failed: {pdf_file} - {result.stderr}\")\n```\n\n## Error handling\n\nAll scripts follow consistent error patterns:\n\n```python\n# Exit codes\n# 0 - Success\n# 1 - File not found\n# 2 - Invalid input\n# 3 - Processing error\n# 4 - Validation error\n\n# Example usage in automation\nresult = subprocess.run([\"python\", \"scripts/fill_form.py\", ...])\n\nif result.returncode == 0:\n    print(\"Success\")\nelif result.returncode == 4:\n    print(\"Validation failed - check input data\")\nelse:\n    print(f\"Error occurred: {result.returncode}\")\n```\n\n## Dependencies\n\nAll scripts require:\n\n```bash\npip install pdfplumber pypdf pillow pytesseract pandas\n```\n\nOptional for OCR:\n```bash\n# Install tesseract-ocr system package\n# macOS: brew install tesseract\n# Ubuntu: apt-get install tesseract-ocr\n# Windows: Download from GitHub releases\n```\n\n## Performance tips\n\n- **Use batch processing** for multiple PDFs\n- **Enable multiprocessing** with `--parallel` flag (where supported)\n- **Cache extracted data** to avoid re-processing\n- **Validate inputs early** to fail fast\n- **Use streaming** for large PDFs (>50MB)\n\n## Best practices\n\n1. **Always validate inputs** before processing\n2. **Use try-except** in custom scripts\n3. **Log all operations** for debugging\n4. **Test with sample PDFs** before production\n5. **Set timeouts** for long-running operations\n6. **Check exit codes** in automation\n7. **Backup originals** before modification\n\n## Troubleshooting\n\n### Common issues\n\n**\"Module not found\" errors**:\n```bash\npip install -r requirements.txt\n```\n\n**Tesseract not found**:\n```bash\n# Install tesseract system package (see Dependencies)\n```\n\n**Memory errors with large PDFs**:\n```python\n# Process page by page instead of loading entire PDF\nwith pdfplumber.open(\"large.pdf\") as pdf:\n    for page in pdf.pages:\n        text = page.extract_text()\n        # Process page immediately\n```\n\n**Permission errors**:\n```bash\nchmod +x scripts/*.py\n```\n\n## Getting help\n\nAll scripts support `--help`:\n\n```bash\npython scripts/analyze_form.py\" --help\npython scripts/extract_tables.py\" --help\n```\n\nFor detailed documentation on specific topics, see:\n- [FORMS.md](FORMS.md) - Complete form processing guide\n- [TABLES.md](TABLES.md) - Advanced table extraction\n- [OCR.md](OCR.md) - Scanned PDF processing\n",
        "plugins/documents/skills/pdf-processing-pro/TABLES.md": "# PDF Table Extraction Guide\n\nAdvanced table extraction strategies for production environments.\n\n## Table of contents\n\n- Basic table extraction\n- Multi-page tables\n- Complex table structures\n- Export formats\n- Table detection algorithms\n- Custom extraction rules\n- Performance optimization\n- Production examples\n\n## Basic table extraction\n\n### Using pdfplumber (recommended)\n\n```python\nimport pdfplumber\n\nwith pdfplumber.open(\"report.pdf\") as pdf:\n    page = pdf.pages[0]\n    tables = page.extract_tables()\n\n    for i, table in enumerate(tables):\n        print(f\"\\nTable {i + 1}:\")\n        for row in table:\n            print(row)\n```\n\n### Using included script\n\n```bash\npython scripts/extract_tables.py report.pdf --output tables.csv\n```\n\nOutput:\n```csv\nName,Age,City\nJohn Doe,30,New York\nJane Smith,25,Los Angeles\nBob Johnson,35,Chicago\n```\n\n## Table extraction strategies\n\n### Strategy 1: Automatic detection\n\nLet pdfplumber auto-detect tables:\n\n```python\nimport pdfplumber\n\nwith pdfplumber.open(\"document.pdf\") as pdf:\n    for page_num, page in enumerate(pdf.pages, 1):\n        tables = page.extract_tables()\n\n        if tables:\n            print(f\"Found {len(tables)} table(s) on page {page_num}\")\n\n            for table_num, table in enumerate(tables, 1):\n                print(f\"\\nTable {table_num}:\")\n                # First row is usually headers\n                headers = table[0]\n                print(f\"Columns: {headers}\")\n\n                # Data rows\n                for row in table[1:]:\n                    print(row)\n```\n\n### Strategy 2: Custom table settings\n\nFine-tune detection with custom settings:\n\n```python\nimport pdfplumber\n\ntable_settings = {\n    \"vertical_strategy\": \"lines\",  # or \"text\", \"lines_strict\"\n    \"horizontal_strategy\": \"lines\",\n    \"explicit_vertical_lines\": [],\n    \"explicit_horizontal_lines\": [],\n    \"snap_tolerance\": 3,\n    \"join_tolerance\": 3,\n    \"edge_min_length\": 3,\n    \"min_words_vertical\": 3,\n    \"min_words_horizontal\": 1,\n    \"keep_blank_chars\": False,\n    \"text_tolerance\": 3,\n    \"text_x_tolerance\": 3,\n    \"text_y_tolerance\": 3,\n    \"intersection_tolerance\": 3\n}\n\nwith pdfplumber.open(\"document.pdf\") as pdf:\n    page = pdf.pages[0]\n    tables = page.extract_tables(table_settings=table_settings)\n```\n\n### Strategy 3: Explicit boundaries\n\nDefine table boundaries manually:\n\n```python\nimport pdfplumber\n\nwith pdfplumber.open(\"document.pdf\") as pdf:\n    page = pdf.pages[0]\n\n    # Define bounding box (x0, top, x1, bottom)\n    bbox = (50, 100, 550, 700)\n\n    # Extract table within bounding box\n    cropped = page.within_bbox(bbox)\n    tables = cropped.extract_tables()\n```\n\n## Multi-page tables\n\n### Detect and merge multi-page tables\n\n```python\nimport pdfplumber\n\ndef extract_multipage_table(pdf_path, start_page=0, end_page=None):\n    \"\"\"Extract table that spans multiple pages.\"\"\"\n\n    all_rows = []\n    headers = None\n\n    with pdfplumber.open(pdf_path) as pdf:\n        pages = pdf.pages[start_page:end_page]\n\n        for page_num, page in enumerate(pages):\n            tables = page.extract_tables()\n\n            if not tables:\n                continue\n\n            # Assume first table on page\n            table = tables[0]\n\n            if page_num == 0:\n                # First page: capture headers and data\n                headers = table[0]\n                all_rows.extend(table[1:])\n            else:\n                # Subsequent pages: skip headers if they repeat\n                if table[0] == headers:\n                    all_rows.extend(table[1:])\n                else:\n                    all_rows.extend(table)\n\n    return [headers] + all_rows if headers else all_rows\n\n# Usage\ntable = extract_multipage_table(\"report.pdf\", start_page=2, end_page=5)\n\nprint(f\"Extracted {len(table) - 1} rows\")\nprint(f\"Columns: {table[0]}\")\n```\n\n## Complex table structures\n\n### Handling merged cells\n\n```python\nimport pdfplumber\n\ndef handle_merged_cells(table):\n    \"\"\"Process table with merged cells.\"\"\"\n\n    processed = []\n\n    for row in table:\n        new_row = []\n        last_value = None\n\n        for cell in row:\n            if cell is None or cell == \"\":\n                # Merged cell - use value from left\n                new_row.append(last_value)\n            else:\n                new_row.append(cell)\n                last_value = cell\n\n        processed.append(new_row)\n\n    return processed\n\n# Usage\nwith pdfplumber.open(\"document.pdf\") as pdf:\n    table = pdf.pages[0].extract_tables()[0]\n    clean_table = handle_merged_cells(table)\n```\n\n### Nested tables\n\n```python\ndef extract_nested_tables(page, bbox):\n    \"\"\"Extract nested tables from a region.\"\"\"\n\n    cropped = page.within_bbox(bbox)\n\n    # Try to detect sub-regions with tables\n    tables = cropped.extract_tables()\n\n    result = []\n    for table in tables:\n        # Process each nested table\n        if table:\n            result.append({\n                \"type\": \"nested\",\n                \"data\": table\n            })\n\n    return result\n```\n\n### Tables with varying column counts\n\n```python\ndef normalize_table_columns(table):\n    \"\"\"Normalize table with inconsistent column counts.\"\"\"\n\n    if not table:\n        return table\n\n    # Find max column count\n    max_cols = max(len(row) for row in table)\n\n    # Pad short rows\n    normalized = []\n    for row in table:\n        if len(row) < max_cols:\n            # Pad with empty strings\n            row = row + [\"\"] * (max_cols - len(row))\n        normalized.append(row)\n\n    return normalized\n```\n\n## Export formats\n\n### Export to CSV\n\n```python\nimport csv\n\ndef export_to_csv(table, output_path):\n    \"\"\"Export table to CSV.\"\"\"\n\n    with open(output_path, \"w\", newline=\"\", encoding=\"utf-8\") as f:\n        writer = csv.writer(f)\n        writer.writerows(table)\n\n# Usage\ntable = extract_table(\"report.pdf\")\nexport_to_csv(table, \"output.csv\")\n```\n\n### Export to Excel\n\n```python\nimport pandas as pd\n\ndef export_to_excel(tables, output_path):\n    \"\"\"Export multiple tables to Excel with sheets.\"\"\"\n\n    with pd.ExcelWriter(output_path, engine=\"openpyxl\") as writer:\n        for i, table in enumerate(tables):\n            if not table:\n                continue\n\n            # Convert to DataFrame\n            headers = table[0]\n            data = table[1:]\n            df = pd.DataFrame(data, columns=headers)\n\n            # Write to sheet\n            sheet_name = f\"Table_{i + 1}\"\n            df.to_excel(writer, sheet_name=sheet_name, index=False)\n\n            # Auto-adjust column widths\n            worksheet = writer.sheets[sheet_name]\n            for column in worksheet.columns:\n                max_length = 0\n                column_letter = column[0].column_letter\n                for cell in column:\n                    if len(str(cell.value)) > max_length:\n                        max_length = len(str(cell.value))\n                worksheet.column_dimensions[column_letter].width = max_length + 2\n\n# Usage\ntables = extract_all_tables(\"report.pdf\")\nexport_to_excel(tables, \"output.xlsx\")\n```\n\n### Export to JSON\n\n```python\nimport json\n\ndef export_to_json(table, output_path):\n    \"\"\"Export table to JSON.\"\"\"\n\n    if not table:\n        return\n\n    headers = table[0]\n    data = table[1:]\n\n    # Convert to list of dictionaries\n    records = []\n    for row in data:\n        record = {}\n        for i, header in enumerate(headers):\n            value = row[i] if i < len(row) else None\n            record[header] = value\n        records.append(record)\n\n    # Save to JSON\n    with open(output_path, \"w\", encoding=\"utf-8\") as f:\n        json.dump(records, f, indent=2)\n\n# Usage\ntable = extract_table(\"report.pdf\")\nexport_to_json(table, \"output.json\")\n```\n\n## Table detection algorithms\n\n### Visual debugging\n\n```python\nimport pdfplumber\n\ndef visualize_table_detection(pdf_path, page_num=0, output_path=\"debug.png\"):\n    \"\"\"Visualize detected table structure.\"\"\"\n\n    with pdfplumber.open(pdf_path) as pdf:\n        page = pdf.pages[page_num]\n\n        # Draw detected table lines\n        im = page.to_image(resolution=150)\n        im = im.debug_tablefinder()\n        im.save(output_path)\n\n        print(f\"Saved debug image to {output_path}\")\n\n# Usage\nvisualize_table_detection(\"document.pdf\", page_num=0)\n```\n\n### Algorithm: Line-based detection\n\nBest for tables with visible borders:\n\n```python\ntable_settings = {\n    \"vertical_strategy\": \"lines\",\n    \"horizontal_strategy\": \"lines\"\n}\n\ntables = page.extract_tables(table_settings=table_settings)\n```\n\n### Algorithm: Text-based detection\n\nBest for tables without borders:\n\n```python\ntable_settings = {\n    \"vertical_strategy\": \"text\",\n    \"horizontal_strategy\": \"text\"\n}\n\ntables = page.extract_tables(table_settings=table_settings)\n```\n\n### Algorithm: Explicit lines\n\nFor complex layouts, define lines manually:\n\n```python\n# Define vertical lines at x-coordinates\nvertical_lines = [50, 150, 250, 350, 450, 550]\n\n# Define horizontal lines at y-coordinates\nhorizontal_lines = [100, 130, 160, 190, 220, 250]\n\ntable_settings = {\n    \"explicit_vertical_lines\": vertical_lines,\n    \"explicit_horizontal_lines\": horizontal_lines\n}\n\ntables = page.extract_tables(table_settings=table_settings)\n```\n\n## Custom extraction rules\n\n### Rule-based extraction\n\n```python\ndef extract_with_rules(page, rules):\n    \"\"\"Extract table using custom rules.\"\"\"\n\n    # Rule: \"Headers are bold\"\n    if rules.get(\"bold_headers\"):\n        chars = page.chars\n        bold_chars = [c for c in chars if \"Bold\" in c.get(\"fontname\", \"\")]\n        # Use bold chars to identify header row\n        pass\n\n    # Rule: \"First column is always left-aligned\"\n    if rules.get(\"left_align_first_col\"):\n        # Adjust extraction to respect alignment\n        pass\n\n    # Rule: \"Currency values in last column\"\n    if rules.get(\"currency_last_col\"):\n        # Parse currency format\n        pass\n\n    # Extract with adjusted settings\n    return page.extract_tables()\n```\n\n### Post-processing rules\n\n```python\ndef apply_post_processing(table, rules):\n    \"\"\"Apply post-processing rules to extracted table.\"\"\"\n\n    processed = []\n\n    for row in table:\n        new_row = []\n\n        for i, cell in enumerate(row):\n            value = cell\n\n            # Rule: Strip whitespace\n            if rules.get(\"strip_whitespace\"):\n                value = value.strip() if value else value\n\n            # Rule: Convert currency to float\n            if rules.get(\"parse_currency\") and i == len(row) - 1:\n                if value and \"$\" in value:\n                    value = float(value.replace(\"$\", \"\").replace(\",\", \"\"))\n\n            # Rule: Parse dates\n            if rules.get(\"parse_dates\") and i == 0:\n                # Convert to datetime\n                pass\n\n            new_row.append(value)\n\n        processed.append(new_row)\n\n    return processed\n```\n\n## Performance optimization\n\n### Process large PDFs efficiently\n\n```python\ndef extract_tables_optimized(pdf_path):\n    \"\"\"Extract tables with memory optimization.\"\"\"\n\n    import gc\n\n    results = []\n\n    with pdfplumber.open(pdf_path) as pdf:\n        for page_num, page in enumerate(pdf.pages):\n            print(f\"Processing page {page_num + 1}/{len(pdf.pages)}\")\n\n            # Extract tables from current page\n            tables = page.extract_tables()\n            results.extend(tables)\n\n            # Force garbage collection\n            gc.collect()\n\n    return results\n```\n\n### Parallel processing\n\n```python\nfrom concurrent.futures import ProcessPoolExecutor\nimport pdfplumber\n\ndef extract_page_tables(args):\n    \"\"\"Extract tables from a single page.\"\"\"\n    pdf_path, page_num = args\n\n    with pdfplumber.open(pdf_path) as pdf:\n        page = pdf.pages[page_num]\n        return page.extract_tables()\n\ndef extract_tables_parallel(pdf_path, max_workers=4):\n    \"\"\"Extract tables using multiple processes.\"\"\"\n\n    with pdfplumber.open(pdf_path) as pdf:\n        page_count = len(pdf.pages)\n\n    # Create tasks\n    tasks = [(pdf_path, i) for i in range(page_count)]\n\n    # Process in parallel\n    with ProcessPoolExecutor(max_workers=max_workers) as executor:\n        results = list(executor.map(extract_page_tables, tasks))\n\n    # Flatten results\n    all_tables = []\n    for page_tables in results:\n        all_tables.extend(page_tables)\n\n    return all_tables\n```\n\n## Production examples\n\n### Example 1: Financial report extraction\n\n```python\nimport pdfplumber\nimport pandas as pd\nfrom decimal import Decimal\n\ndef extract_financial_tables(pdf_path):\n    \"\"\"Extract financial data with proper number formatting.\"\"\"\n\n    tables = []\n\n    with pdfplumber.open(pdf_path) as pdf:\n        for page in pdf.pages:\n            page_tables = page.extract_tables()\n\n            for table in page_tables:\n                # Convert to DataFrame\n                df = pd.DataFrame(table[1:], columns=table[0])\n\n                # Parse currency columns\n                for col in df.columns:\n                    if df[col].str.contains(\"$\", na=False).any():\n                        df[col] = df[col].str.replace(r\"[$,()]\", \"\", regex=True)\n                        df[col] = pd.to_numeric(df[col], errors=\"coerce\")\n\n                tables.append(df)\n\n    return tables\n```\n\n### Example 2: Batch table extraction\n\n```python\nimport glob\nfrom pathlib import Path\n\ndef batch_extract_tables(input_dir, output_dir):\n    \"\"\"Extract tables from all PDFs in directory.\"\"\"\n\n    input_path = Path(input_dir)\n    output_path = Path(output_dir)\n    output_path.mkdir(exist_ok=True)\n\n    for pdf_file in input_path.glob(\"*.pdf\"):\n        print(f\"Processing: {pdf_file.name}\")\n\n        try:\n            # Extract tables\n            tables = extract_all_tables(str(pdf_file))\n\n            # Export to Excel\n            output_file = output_path / f\"{pdf_file.stem}_tables.xlsx\"\n            export_to_excel(tables, str(output_file))\n\n            print(f\"  âœ“ Extracted {len(tables)} table(s)\")\n\n        except Exception as e:\n            print(f\"  âœ— Error: {e}\")\n\n# Usage\nbatch_extract_tables(\"invoices/\", \"extracted/\")\n```\n\n## Best practices\n\n1. **Visualize first**: Use debug mode to understand table structure\n2. **Test settings**: Try different strategies for best results\n3. **Handle errors**: PDFs vary widely in quality\n4. **Validate output**: Check extracted data makes sense\n5. **Post-process**: Clean and normalize extracted data\n6. **Use pandas**: Leverage DataFrame operations for analysis\n7. **Cache results**: Avoid re-processing large files\n8. **Monitor performance**: Profile for bottlenecks\n\n## Troubleshooting\n\n### Tables not detected\n\n1. Try different detection strategies\n2. Use visual debugging to see structure\n3. Define explicit lines manually\n4. Check if table is actually an image\n\n### Incorrect cell values\n\n1. Adjust snap/join tolerance\n2. Check text extraction quality\n3. Use post-processing to clean data\n4. Verify PDF is not scanned image\n\n### Performance issues\n\n1. Process pages individually\n2. Use parallel processing\n3. Reduce image resolution\n4. Extract only needed pages\n",
        "plugins/documents/skills/xlsx/SKILL.md": "---\nname: xlsx\ndescription: \"Comprehensive spreadsheet creation, editing, and analysis with support for formulas, formatting, data analysis, and visualization. When Claude needs to work with spreadsheets (.xlsx, .xlsm, .csv, .tsv, etc) for: (1) Creating new spreadsheets with formulas and formatting, (2) Reading or analyzing data, (3) Modify existing spreadsheets while preserving formulas, (4) Data analysis and visualization in spreadsheets, or (5) Recalculating formulas\"\nlicense: Proprietary. LICENSE.txt has complete terms\n---\n\n# Requirements for Outputs\n\n## All Excel files\n\n### Zero Formula Errors\n- Every Excel model MUST be delivered with ZERO formula errors (#REF!, #DIV/0!, #VALUE!, #N/A, #NAME?)\n\n### Preserve Existing Templates (when updating templates)\n- Study and EXACTLY match existing format, style, and conventions when modifying files\n- Never impose standardized formatting on files with established patterns\n- Existing template conventions ALWAYS override these guidelines\n\n## Financial models\n\n### Color Coding Standards\nUnless otherwise stated by the user or existing template\n\n#### Industry-Standard Color Conventions\n- **Blue text (RGB: 0,0,255)**: Hardcoded inputs, and numbers users will change for scenarios\n- **Black text (RGB: 0,0,0)**: ALL formulas and calculations\n- **Green text (RGB: 0,128,0)**: Links pulling from other worksheets within same workbook\n- **Red text (RGB: 255,0,0)**: External links to other files\n- **Yellow background (RGB: 255,255,0)**: Key assumptions needing attention or cells that need to be updated\n\n### Number Formatting Standards\n\n#### Required Format Rules\n- **Years**: Format as text strings (e.g., \"2024\" not \"2,024\")\n- **Currency**: Use $#,##0 format; ALWAYS specify units in headers (\"Revenue ($mm)\")\n- **Zeros**: Use number formatting to make all zeros \"-\", including percentages (e.g., \"$#,##0;($#,##0);-\")\n- **Percentages**: Default to 0.0% format (one decimal)\n- **Multiples**: Format as 0.0x for valuation multiples (EV/EBITDA, P/E)\n- **Negative numbers**: Use parentheses (123) not minus -123\n\n### Formula Construction Rules\n\n#### Assumptions Placement\n- Place ALL assumptions (growth rates, margins, multiples, etc.) in separate assumption cells\n- Use cell references instead of hardcoded values in formulas\n- Example: Use =B5*(1+$B$6) instead of =B5*1.05\n\n#### Formula Error Prevention\n- Verify all cell references are correct\n- Check for off-by-one errors in ranges\n- Ensure consistent formulas across all projection periods\n- Test with edge cases (zero values, negative numbers)\n- Verify no unintended circular references\n\n#### Documentation Requirements for Hardcodes\n- Comment or in cells beside (if end of table). Format: \"Source: [System/Document], [Date], [Specific Reference], [URL if applicable]\"\n- Examples:\n  - \"Source: Company 10-K, FY2024, Page 45, Revenue Note, [SEC EDGAR URL]\"\n  - \"Source: Company 10-Q, Q2 2025, Exhibit 99.1, [SEC EDGAR URL]\"\n  - \"Source: Bloomberg Terminal, 8/15/2025, AAPL US Equity\"\n  - \"Source: FactSet, 8/20/2025, Consensus Estimates Screen\"\n\n# XLSX creation, editing, and analysis\n\n## Overview\n\nA user may ask you to create, edit, or analyze the contents of an .xlsx file. You have different tools and workflows available for different tasks.\n\n## Important Requirements\n\n**LibreOffice Required for Formula Recalculation**: You can assume LibreOffice is installed for recalculating formula values using the `recalc.py` script. The script automatically configures LibreOffice on first run\n\n## Reading and analyzing data\n\n### Data analysis with pandas\nFor data analysis, visualization, and basic operations, use **pandas** which provides powerful data manipulation capabilities:\n\n```python\nimport pandas as pd\n\n# Read Excel\ndf = pd.read_excel('file.xlsx')  # Default: first sheet\nall_sheets = pd.read_excel('file.xlsx', sheet_name=None)  # All sheets as dict\n\n# Analyze\ndf.head()      # Preview data\ndf.info()      # Column info\ndf.describe()  # Statistics\n\n# Write Excel\ndf.to_excel('output.xlsx', index=False)\n```\n\n## Excel File Workflows\n\n## CRITICAL: Use Formulas, Not Hardcoded Values\n\n**Always use Excel formulas instead of calculating values in Python and hardcoding them.** This ensures the spreadsheet remains dynamic and updateable.\n\n### âŒ WRONG - Hardcoding Calculated Values\n```python\n# Bad: Calculating in Python and hardcoding result\ntotal = df['Sales'].sum()\nsheet['B10'] = total  # Hardcodes 5000\n\n# Bad: Computing growth rate in Python\ngrowth = (df.iloc[-1]['Revenue'] - df.iloc[0]['Revenue']) / df.iloc[0]['Revenue']\nsheet['C5'] = growth  # Hardcodes 0.15\n\n# Bad: Python calculation for average\navg = sum(values) / len(values)\nsheet['D20'] = avg  # Hardcodes 42.5\n```\n\n### âœ… CORRECT - Using Excel Formulas\n```python\n# Good: Let Excel calculate the sum\nsheet['B10'] = '=SUM(B2:B9)'\n\n# Good: Growth rate as Excel formula\nsheet['C5'] = '=(C4-C2)/C2'\n\n# Good: Average using Excel function\nsheet['D20'] = '=AVERAGE(D2:D19)'\n```\n\nThis applies to ALL calculations - totals, percentages, ratios, differences, etc. The spreadsheet should be able to recalculate when source data changes.\n\n## Common Workflow\n1. **Choose tool**: pandas for data, openpyxl for formulas/formatting\n2. **Create/Load**: Create new workbook or load existing file\n3. **Modify**: Add/edit data, formulas, and formatting\n4. **Save**: Write to file\n5. **Recalculate formulas (MANDATORY IF USING FORMULAS)**: Use the recalc.py script\n   ```bash\n   python recalc.py output.xlsx\n   ```\n6. **Verify and fix any errors**: \n   - The script returns JSON with error details\n   - If `status` is `errors_found`, check `error_summary` for specific error types and locations\n   - Fix the identified errors and recalculate again\n   - Common errors to fix:\n     - `#REF!`: Invalid cell references\n     - `#DIV/0!`: Division by zero\n     - `#VALUE!`: Wrong data type in formula\n     - `#NAME?`: Unrecognized formula name\n\n### Creating new Excel files\n\n```python\n# Using openpyxl for formulas and formatting\nfrom openpyxl import Workbook\nfrom openpyxl.styles import Font, PatternFill, Alignment\n\nwb = Workbook()\nsheet = wb.active\n\n# Add data\nsheet['A1'] = 'Hello'\nsheet['B1'] = 'World'\nsheet.append(['Row', 'of', 'data'])\n\n# Add formula\nsheet['B2'] = '=SUM(A1:A10)'\n\n# Formatting\nsheet['A1'].font = Font(bold=True, color='FF0000')\nsheet['A1'].fill = PatternFill('solid', start_color='FFFF00')\nsheet['A1'].alignment = Alignment(horizontal='center')\n\n# Column width\nsheet.column_dimensions['A'].width = 20\n\nwb.save('output.xlsx')\n```\n\n### Editing existing Excel files\n\n```python\n# Using openpyxl to preserve formulas and formatting\nfrom openpyxl import load_workbook\n\n# Load existing file\nwb = load_workbook('existing.xlsx')\nsheet = wb.active  # or wb['SheetName'] for specific sheet\n\n# Working with multiple sheets\nfor sheet_name in wb.sheetnames:\n    sheet = wb[sheet_name]\n    print(f\"Sheet: {sheet_name}\")\n\n# Modify cells\nsheet['A1'] = 'New Value'\nsheet.insert_rows(2)  # Insert row at position 2\nsheet.delete_cols(3)  # Delete column 3\n\n# Add new sheet\nnew_sheet = wb.create_sheet('NewSheet')\nnew_sheet['A1'] = 'Data'\n\nwb.save('modified.xlsx')\n```\n\n## Recalculating formulas\n\nExcel files created or modified by openpyxl contain formulas as strings but not calculated values. Use the provided `recalc.py` script to recalculate formulas:\n\n```bash\npython recalc.py <excel_file> [timeout_seconds]\n```\n\nExample:\n```bash\npython recalc.py output.xlsx 30\n```\n\nThe script:\n- Automatically sets up LibreOffice macro on first run\n- Recalculates all formulas in all sheets\n- Scans ALL cells for Excel errors (#REF!, #DIV/0!, etc.)\n- Returns JSON with detailed error locations and counts\n- Works on both Linux and macOS\n\n## Formula Verification Checklist\n\nQuick checks to ensure formulas work correctly:\n\n### Essential Verification\n- [ ] **Test 2-3 sample references**: Verify they pull correct values before building full model\n- [ ] **Column mapping**: Confirm Excel columns match (e.g., column 64 = BL, not BK)\n- [ ] **Row offset**: Remember Excel rows are 1-indexed (DataFrame row 5 = Excel row 6)\n\n### Common Pitfalls\n- [ ] **NaN handling**: Check for null values with `pd.notna()`\n- [ ] **Far-right columns**: FY data often in columns 50+ \n- [ ] **Multiple matches**: Search all occurrences, not just first\n- [ ] **Division by zero**: Check denominators before using `/` in formulas (#DIV/0!)\n- [ ] **Wrong references**: Verify all cell references point to intended cells (#REF!)\n- [ ] **Cross-sheet references**: Use correct format (Sheet1!A1) for linking sheets\n\n### Formula Testing Strategy\n- [ ] **Start small**: Test formulas on 2-3 cells before applying broadly\n- [ ] **Verify dependencies**: Check all cells referenced in formulas exist\n- [ ] **Test edge cases**: Include zero, negative, and very large values\n\n### Interpreting recalc.py Output\nThe script returns JSON with error details:\n```json\n{\n  \"status\": \"success\",           // or \"errors_found\"\n  \"total_errors\": 0,              // Total error count\n  \"total_formulas\": 42,           // Number of formulas in file\n  \"error_summary\": {              // Only present if errors found\n    \"#REF!\": {\n      \"count\": 2,\n      \"locations\": [\"Sheet1!B5\", \"Sheet1!C10\"]\n    }\n  }\n}\n```\n\n## Best Practices\n\n### Library Selection\n- **pandas**: Best for data analysis, bulk operations, and simple data export\n- **openpyxl**: Best for complex formatting, formulas, and Excel-specific features\n\n### Working with openpyxl\n- Cell indices are 1-based (row=1, column=1 refers to cell A1)\n- Use `data_only=True` to read calculated values: `load_workbook('file.xlsx', data_only=True)`\n- **Warning**: If opened with `data_only=True` and saved, formulas are replaced with values and permanently lost\n- For large files: Use `read_only=True` for reading or `write_only=True` for writing\n- Formulas are preserved but not evaluated - use recalc.py to update values\n\n### Working with pandas\n- Specify data types to avoid inference issues: `pd.read_excel('file.xlsx', dtype={'id': str})`\n- For large files, read specific columns: `pd.read_excel('file.xlsx', usecols=['A', 'C', 'E'])`\n- Handle dates properly: `pd.read_excel('file.xlsx', parse_dates=['date_column'])`\n\n## Code Style Guidelines\n**IMPORTANT**: When generating Python code for Excel operations:\n- Write minimal, concise Python code without unnecessary comments\n- Avoid verbose variable names and redundant operations\n- Avoid unnecessary print statements\n\n**For Excel files themselves**:\n- Add comments to cells with complex formulas or important assumptions\n- Document data sources for hardcoded values\n- Include notes for key calculations and model sections",
        "plugins/marketing/.claude-plugin/plugin.json": "{\n  \"name\": \"marketing\",\n  \"description\": \"Complete marketing analytics suite: comprehensive GTM skill (9 reference guides for tags, triggers, variables, data layer, debugging, custom templates, API), comprehensive GA4 skill (15 reference guides for setup, events, ecommerce, BigQuery, Measurement Protocol, privacy compliance), and Google Ads Scripts skill for campaign automation\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"2.0.0\"\n}\n",
        "plugins/marketing/README.md": "# Marketing Toolkit\n\nComplete marketing analytics suite covering Google Tag Manager, Google Analytics 4, and Google Ads Scripts with comprehensive reference documentation.\n\n## What's Included\n\n### Skills (3)\n\n- **ga4** - Comprehensive Google Analytics 4 guide with 15 reference documents covering setup, events, custom dimensions, audiences, BigQuery, Measurement Protocol, privacy compliance, and more\n- **gtm** - Complete Google Tag Manager guide with 9 reference documents covering tags, triggers, variables, data layer, debugging, custom templates, and API automation\n- **google-ads-scripts** - Google Ads Scripts expertise for campaign automation, bidding strategies, and performance reporting\n\n### MCP Servers (2)\n\n- **analytics-mcp** - Google Analytics API integration\n- **gtm-mcp-server** - Google Tag Manager API integration via Stape\n\n## Installation\n\n```bash\n/plugin install marketing@wookstar\n```\n\n## Required Environment Variables\n\n```bash\n# For analytics-mcp\nGOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json\nGOOGLE_PROJECT_ID=your-project-id\n```\n\n## Usage Examples\n\n### Google Tag Manager\n\n```bash\n# Get GTM fundamentals\n\"Explain how GTM data layer works for SPAs\"\n\n# Setup guidance\n\"Help me install GTM on my React website\"\n\n# Debug tracking\n\"My form submission tag isn't firing, help me debug\"\n\n# E-commerce tracking\n\"Implement GA4 e-commerce tracking via GTM\"\n\n# Custom templates\n\"Build a custom GTM template for my analytics tool\"\n```\n\n### Google Analytics 4\n\n```bash\n# Initial setup\n\"Help me create a GA4 property and install tracking\"\n\n# E-commerce tracking\n\"Implement purchase event tracking for my checkout\"\n\n# BigQuery analysis\n\"Write SQL to analyze GA4 conversion funnels in BigQuery\"\n\n# Privacy compliance\n\"Implement Google Consent Mode v2 for GDPR\"\n\n# Measurement Protocol\n\"Send server-side events to GA4 from my Node.js backend\"\n```\n\n### Google Ads Scripts\n\n```bash\n# Campaign automation\n\"Write a script to pause low-performing keywords automatically\"\n\n# Bidding strategies\n\"Create an automated bid adjustment script based on ROAS\"\n\n# Performance reports\n\"Generate a weekly campaign performance report\"\n```\n\n## Skill Details\n\n### GA4 Skill\n\nComprehensive Google Analytics 4 expertise covering:\n\n**Setup & Configuration:**\n- Property and data stream creation\n- Measurement ID configuration\n- Data retention settings\n\n**Implementation:**\n- gtag.js installation\n- GTM integration\n- Cross-domain measurement\n\n**Events:**\n- Event architecture and parameters\n- Recommended events (purchase, login, etc.)\n- Custom event design\n\n**Advanced:**\n- Measurement Protocol for server-side tracking\n- BigQuery export and SQL analysis\n- User ID and cross-device tracking\n- Privacy and Consent Mode v2\n\n**Reference Files (15):**\n- setup.md, events-fundamentals.md, custom-events.md\n- recommended-events.md, custom-dimensions.md, user-tracking.md\n- audiences.md, reporting.md, bigquery.md\n- gtag.md, gtm-integration.md, measurement-protocol.md\n- debugview.md, privacy.md, data-management.md\n\n### GTM Skill\n\nComplete Google Tag Manager expertise covering:\n\n**Core Concepts:**\n- Tags, triggers, and variables\n- Container types and installation\n\n**Configuration:**\n- GA4 tags and event tracking\n- Google Ads conversion tracking\n- Third-party tag integration\n\n**Advanced:**\n- Data layer implementation\n- Custom JavaScript variables\n- Custom templates with sandboxed JS\n- GTM API automation\n\n**Reference Files (9):**\n- setup.md, tags.md, triggers.md\n- variables.md, datalayer.md, debugging.md\n- best-practices.md, custom-templates.md, api.md\n\n### Google Ads Scripts\n\nCampaign automation expertise covering:\n\n- AdsApp API for campaign management\n- Bidding strategy automation\n- Performance reporting scripts\n- Keyword and ad management\n- Scheduled script execution\n\n## When to Use\n\nThis toolkit is ideal for:\n\n- Implementing GTM containers and configurations\n- Setting up GA4 tracking and analytics\n- Building e-commerce tracking implementations\n- Debugging tracking issues\n- Creating BigQuery exports and analyses\n- Implementing privacy and consent features\n- Automating Google Ads campaign management\n- Building custom GTM templates\n",
        "plugins/marketing/skills/ga4/SKILL.md": "---\nname: ga4\ndescription: Comprehensive Google Analytics 4 guide covering property setup, events, custom events, recommended events, custom dimensions, user tracking, audiences, reporting, BigQuery integration, gtag.js implementation, GTM integration, Measurement Protocol, DebugView, privacy compliance, and data management. Use when working with GA4 implementation, tracking, analysis, or any GA4-related tasks.\n---\n\n# Google Analytics 4 Complete Guide\n\n## Overview\n\nGoogle Analytics 4 (GA4) is Google's event-based analytics platform for measuring user interactions across websites and applications. This comprehensive skill provides guidance on all aspects of GA4 - from initial property setup through advanced analysis, implementation methods, and compliance.\n\nGA4 uses an event-based data model where every user interaction is tracked as an event with associated parameters. This differs from the session-based model of Universal Analytics, providing more flexibility and cross-platform measurement capabilities.\n\n## When to Use This Skill\n\nInvoke this skill for any GA4-related task, including:\n\n**Setup and Configuration:**\n- Creating GA4 properties and data streams\n- Configuring Measurement IDs (G-XXXXXXXXXX)\n- Setting up data retention and collection settings\n- Managing property access and permissions\n\n**Implementation:**\n- Installing GA4 via gtag.js, GTM, or CMS plugins\n- Implementing event tracking (automatic, recommended, custom)\n- Setting up ecommerce tracking\n- Configuring cross-domain measurement\n\n**Events and Tracking:**\n- Understanding event architecture and parameters\n- Implementing recommended events (purchase, login, sign_up)\n- Creating custom events for business-specific tracking\n- Working with event parameters and limits\n\n**Analysis and Reporting:**\n- Using standard reports and Explorations\n- Building funnel and path analyses\n- Creating audiences and segments\n- Exporting data to BigQuery\n\n**Advanced Topics:**\n- Measurement Protocol for server-side tracking\n- User ID and cross-device tracking\n- Privacy compliance and Consent Mode\n- DebugView testing and validation\n\n## Quick Start\n\n### 1. Create GA4 Property\n\n1. Navigate to analytics.google.com\n2. Admin -> Create -> Property\n3. Enter property name, timezone, currency\n4. Create web data stream\n5. Note your Measurement ID (G-XXXXXXXXXX)\n\n### 2. Install Tracking (Choose One Method)\n\n**Option A: Google Tag Manager (Recommended)**\n```\n1. Install GTM container on website\n2. Create Google Tag with GA4 Measurement ID\n3. Trigger: Initialisation - All Pages\n4. Publish container\n```\n\n**Option B: gtag.js Direct**\n```html\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX\"></script>\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n  gtag('config', 'G-XXXXXXXXXX');\n</script>\n```\n\n### 3. Verify Installation\n\n1. Enable Google Analytics Debugger extension\n2. Admin -> DebugView\n3. Confirm events appearing: session_start, page_view\n4. Check Realtime reports for active users\n\n### 4. Send Custom Events\n\n```javascript\ngtag('event', 'button_click', {\n  'button_name': 'Subscribe',\n  'button_location': 'header'\n});\n```\n\n## Decision Tree: Which Reference Do I Need?\n\n```\nWhat are you trying to do?\n\nSetting up GA4 for the first time?\n  -> references/setup.md\n\nUnderstanding how events work?\n  -> references/events-fundamentals.md\n\nImplementing standard tracking events?\n  -> references/recommended-events.md\n\nCreating business-specific custom events?\n  -> references/custom-events.md\n\nMaking parameters appear in reports?\n  -> references/custom-dimensions.md\n\nImplementing User ID / cross-device tracking?\n  -> references/user-tracking.md\n\nBuilding audiences for remarketing?\n  -> references/audiences.md\n\nAnalysing data in GA4 reports?\n  -> references/reporting.md\n\nExporting to BigQuery for SQL analysis?\n  -> references/bigquery.md\n\nInstalling via gtag.js directly?\n  -> references/gtag.md\n\nSetting up GA4 in Google Tag Manager?\n  -> references/gtm-integration.md\n\nSending events from server/backend?\n  -> references/measurement-protocol.md\n\nTesting and debugging implementation?\n  -> references/debugview.md\n\nImplementing GDPR/Consent Mode?\n  -> references/privacy.md\n\nConfiguring Admin settings?\n  -> references/data-management.md\n```\n\n## Core Concepts\n\n### Event-Based Model\n\nGA4 tracks everything as events. Four categories:\n\n| Category | Description | Examples |\n|----------|-------------|----------|\n| Automatic | Fire without configuration | session_start, first_visit |\n| Enhanced Measurement | Toggle on/off in settings | scroll, click, file_download |\n| Recommended | Google-defined with standard parameters | purchase, login, sign_up |\n| Custom | Business-specific tracking | demo_requested, trial_started |\n\n### Key Limits and Constraints\n\n| Limit | Value |\n|-------|-------|\n| Event names per property | 500 distinct |\n| Parameters per event | 25 |\n| Event name length | 40 characters |\n| Parameter name length | 40 characters |\n| Parameter value length | 100 characters |\n| Custom dimensions (event-scoped) | 50 |\n| Custom dimensions (user-scoped) | 25 |\n| Custom dimensions (item-scoped) | 10 |\n| Audiences per property | 100 |\n\n### Measurement ID Format\n\n- Format: G-XXXXXXXXXX (G- prefix + 10 alphanumeric characters)\n- Location: Admin -> Data Streams -> Web Stream\n- Used in: gtag.js config, GTM tags, Measurement Protocol\n\n## Topic Overview\n\n### Setup and Installation\n**Reference:** [references/setup.md](references/setup.md)\n\nCreate GA4 accounts, properties, and data streams. Covers account hierarchy, property configuration, data stream setup for web/iOS/Android, and initial configuration settings.\n\n### Events Fundamentals\n**Reference:** [references/events-fundamentals.md](references/events-fundamentals.md)\n\nUnderstand GA4's event-based architecture. Covers the four event categories, event structure, parameter scopes (event/user/item), naming conventions, and limits.\n\n### Custom Events\n**Reference:** [references/custom-events.md](references/custom-events.md)\n\nCreate business-specific events beyond recommended events. Covers naming conventions, parameter design, industry patterns (SaaS, education, media), and implementation examples.\n\n### Recommended Events\n**Reference:** [references/recommended-events.md](references/recommended-events.md)\n\nImplement Google-defined recommended events. Covers engagement events (login, sign_up), monetisation events (purchase, add_to_cart), and the items array structure for ecommerce.\n\n### Custom Dimensions\n**Reference:** [references/custom-dimensions.md](references/custom-dimensions.md)\n\nTransform event parameters into reportable dimensions. Covers registration workflow, scope selection (event/user/item), custom metrics, calculated metrics, and troubleshooting.\n\n### User Tracking\n**Reference:** [references/user-tracking.md](references/user-tracking.md)\n\nImplement User ID and cross-device tracking. Covers User ID setup, user properties, Reporting Identity options, cross-domain tracking, and data deletion.\n\n### Audiences\n**Reference:** [references/audiences.md](references/audiences.md)\n\nCreate segments for analysis and remarketing. Covers audience conditions, predictive audiences, sequence conditions, membership duration, and Google Ads export.\n\n### Reporting\n**Reference:** [references/reporting.md](references/reporting.md)\n\nAnalyse data using standard reports and Explorations. Covers report types, exploration techniques (funnel, path, cohort), segments, comparisons, and attribution models.\n\n### BigQuery Export\n**Reference:** [references/bigquery.md](references/bigquery.md)\n\nExport raw event data to BigQuery for advanced analysis. Covers linking setup, table schema, SQL query patterns, UNNEST operations, and cost optimisation.\n\n### gtag.js Implementation\n**Reference:** [references/gtag.md](references/gtag.md)\n\nImplement GA4 directly using gtag.js without GTM. Covers installation, gtag commands (config, event, set), common patterns, and framework integration.\n\n### GTM Integration\n**Reference:** [references/gtm-integration.md](references/gtm-integration.md)\n\nImplement GA4 using Google Tag Manager. Covers configuration tags, event tags, triggers, variables, data layer integration, and Preview mode testing.\n\n### Measurement Protocol\n**Reference:** [references/measurement-protocol.md](references/measurement-protocol.md)\n\nSend events server-side using the Measurement Protocol API. Covers authentication, request format, validation, Python/Node.js/PHP examples, and best practices.\n\n### DebugView\n**Reference:** [references/debugview.md](references/debugview.md)\n\nTest and validate GA4 implementation. Covers enabling debug mode, reading DebugView interface, validation workflows, and troubleshooting common issues.\n\n### Privacy Compliance\n**Reference:** [references/privacy.md](references/privacy.md)\n\nImplement GDPR/CCPA compliance. Covers Consent Mode v2, consent parameters, regional settings, data deletion, and integration with consent management platforms.\n\n### Data Management\n**Reference:** [references/data-management.md](references/data-management.md)\n\nConfigure GA4 Admin settings. Covers data retention, data filters, user permissions, property settings, enhanced measurement, and key events (conversions).\n\n## Common Workflows\n\n### Implementing Ecommerce Tracking\n\n1. **Review recommended events:** [references/recommended-events.md](references/recommended-events.md)\n2. **Implement the purchase funnel:**\n   - view_item -> add_to_cart -> begin_checkout -> purchase\n3. **Structure items array correctly:**\n   - Required: item_id OR item_name\n   - Recommended: price, quantity, item_category\n4. **Test with DebugView:** [references/debugview.md](references/debugview.md)\n5. **Register custom item parameters:** [references/custom-dimensions.md](references/custom-dimensions.md)\n\n### Setting Up Cross-Device Tracking\n\n1. **Implement User ID:** [references/user-tracking.md](references/user-tracking.md)\n2. **Configure Reporting Identity:** Admin -> Data Settings -> Reporting Identity\n3. **Set user properties:** [references/custom-dimensions.md](references/custom-dimensions.md)\n4. **Build cross-device audiences:** [references/audiences.md](references/audiences.md)\n\n### Implementing GDPR Compliance\n\n1. **Set up Consent Mode:** [references/privacy.md](references/privacy.md)\n2. **Configure default consent state (denied)**\n3. **Integrate with CMP (OneTrust, Cookiebot, etc.)**\n4. **Update consent on user acceptance**\n5. **Test consent implementation:** [references/debugview.md](references/debugview.md)\n\n### Building Custom Reports\n\n1. **Understand available data:** [references/reporting.md](references/reporting.md)\n2. **Register custom parameters as dimensions:** [references/custom-dimensions.md](references/custom-dimensions.md)\n3. **Create Explorations for custom analysis**\n4. **For unsampled data, export to BigQuery:** [references/bigquery.md](references/bigquery.md)\n\n## Best Practices\n\n### Naming Conventions\n\n- Use snake_case for event names: `video_tutorial_watched`\n- Be descriptive and action-oriented\n- Keep under 40 characters\n- Avoid generic names (event1, click, data)\n\n### Implementation Strategy\n\n1. Start with Enhanced Measurement (automatic events)\n2. Add recommended events for standard tracking\n3. Create custom events only when needed\n4. Register parameters as custom dimensions for reporting\n5. Test thoroughly with DebugView before production\n\n### Data Quality\n\n- Create separate properties for test/production\n- Set up internal traffic filters from day one\n- Document all custom events and parameters\n- Regularly audit implementation with DebugView\n- Export to BigQuery for data backup\n\n## References\n\n| Topic | File |\n|-------|------|\n| Property Setup | [references/setup.md](references/setup.md) |\n| Events Fundamentals | [references/events-fundamentals.md](references/events-fundamentals.md) |\n| Custom Events | [references/custom-events.md](references/custom-events.md) |\n| Recommended Events | [references/recommended-events.md](references/recommended-events.md) |\n| Custom Dimensions | [references/custom-dimensions.md](references/custom-dimensions.md) |\n| User Tracking | [references/user-tracking.md](references/user-tracking.md) |\n| Audiences | [references/audiences.md](references/audiences.md) |\n| Reporting | [references/reporting.md](references/reporting.md) |\n| BigQuery Export | [references/bigquery.md](references/bigquery.md) |\n| gtag.js Implementation | [references/gtag.md](references/gtag.md) |\n| GTM Integration | [references/gtm-integration.md](references/gtm-integration.md) |\n| Measurement Protocol | [references/measurement-protocol.md](references/measurement-protocol.md) |\n| DebugView Testing | [references/debugview.md](references/debugview.md) |\n| Privacy Compliance | [references/privacy.md](references/privacy.md) |\n| Data Management | [references/data-management.md](references/data-management.md) |\n",
        "plugins/marketing/skills/ga4/references/audiences.md": "# GA4 Audiences and Segmentation\n\nExpert guidance for creating and managing audiences for analysis, remarketing, and personalisation.\n\n## Overview\n\nAudiences in GA4 allow creation of user segments for analysis, remarketing, and personalisation based on dimensions, metrics, and events. Audiences can be exported to Google Ads for targeting and used in GA4 reports for analysis.\n\n## Accessing Audiences\n\n**Path:** Admin -> Audiences\n\n**Available Actions:**\n- View all audiences\n- Create new audiences\n- Edit existing audiences\n- View audience membership\n\n## Predefined Audiences\n\nGA4 includes template audiences:\n\n| Audience | Description |\n|----------|-------------|\n| All Users | All users in selected timeframe |\n| Purchasers | Users who completed purchase (30 days) |\n| New Users | First-time visitors |\n| Returning Users | Repeat visitors |\n| Recent Users | Active in last 7 days |\n\n### Activating Predefined Audiences\n\n1. Admin -> Audiences -> Create Audience\n2. Select suggested template\n3. Customise conditions if needed\n4. Save audience\n\n## Creating Custom Audiences\n\n### Basic Process\n\n1. Admin -> Audiences -> New Audience\n2. Choose method:\n   - Start from scratch\n   - Use suggested template\n   - Create predictive audience\n3. Configure audience:\n   - Name: Descriptive (e.g., \"High-Value Shoppers\")\n   - Description: Optional notes\n   - Membership duration: 1-540 days\n4. Add conditions\n5. Preview size\n6. Save\n\n### Condition Types\n\n#### Dimension Filters\n\nFilter by user or event attributes:\n\n```\ncountry == \"United States\"\ndevice_category == \"mobile\"\nplatform == \"web\"\n```\n\n**Available Dimensions:**\n- User: city, country, device_category, platform\n- Event: event_name, page_location, item_id\n- Custom: Any registered custom dimensions\n\n#### Metric Filters\n\nFilter by quantitative measures:\n\n```\ntotalRevenue > 100\nsessionCount >= 3\nengagementTime > 60\n```\n\n**Available Metrics:**\n- Event count\n- Session count\n- Revenue\n- Engagement time\n- Conversion count\n\n#### Event Conditions\n\nInclude/exclude based on events:\n\n**Include users who:**\n- Have triggered specific event\n- Have NOT triggered event\n- Triggered event with specific parameters\n\n**Example:** Users who triggered `purchase` with `value > 50`\n\n#### Sequence Conditions\n\nBuild audiences based on event order:\n\n**Example:** Users who:\n1. Viewed product (view_item)\n2. Added to cart (add_to_cart)\n3. Did NOT complete purchase (within 7 days)\n\n### Membership Duration\n\n| Duration | Use Case |\n|----------|----------|\n| 1-7 days | Short campaigns |\n| 30-90 days | Remarketing |\n| 540 days | Lifetime segments |\n\n**How it works:**\n- User enters when conditions met\n- Stays for duration period\n- Exits after duration (unless conditions still met)\n\n## Audience Examples\n\n### High-Value Customers\n\n```\nConditions:\n- totalRevenue > 500 (lifetime)\n- purchaseCount >= 3\n\nMembership: 540 days\n```\n\n### Cart Abandoners\n\n```\nSequence:\n1. add_to_cart (within last 7 days)\n2. Did NOT: purchase\n\nMembership: 7 days\n```\n\n### Engaged Mobile Users\n\n```\nConditions:\n- deviceCategory == \"mobile\"\n- sessionCount >= 5 (last 30 days)\n- avgEngagementTime > 60 seconds\n\nMembership: 30 days\n```\n\n### Product Category Viewers\n\n```\nEvent Condition:\n- view_item (last 30 days)\n- item_category == \"Electronics\"\n\nMembership: 30 days\n```\n\n### Geographic Segment\n\n```\nConditions:\n- country == \"United States\"\n- region == \"California\"\n\nMembership: 90 days\n```\n\n### Newsletter Subscribers\n\n```\nEvent Condition:\n- sign_up (any time)\n- method == \"newsletter\"\n\nMembership: 540 days\n```\n\n## Predictive Audiences\n\nGA4 can create audiences based on predicted user behaviour.\n\n### Available Predictions\n\n| Prediction | Description |\n|------------|-------------|\n| Purchase probability | Likelihood to purchase (7 days) |\n| Churn probability | Likelihood to not return (7 days) |\n| Revenue prediction | Expected 28-day revenue |\n\n### Requirements\n\n- 1,000+ users triggering target event (28 days)\n- Sufficient historical data\n- Model quality threshold met\n\n### Creating Predictive Audience\n\n1. Create New Audience\n2. Choose \"Predictive\"\n3. Select metric (purchase probability, etc.)\n4. Set threshold (e.g., > 50% purchase probability)\n5. Save\n\n### Use Cases\n\n- Target likely purchasers with ads\n- Re-engage likely-to-churn users\n- Focus on high-revenue potential users\n\n## Audience Triggers\n\n### What are Triggers\n\nActions that fire when user enters audience.\n\n### Supported Actions\n\n- Send event to GA4\n- Create Google Ads remarketing list\n- Send to Google Ads for targeting\n\n### Setup\n\n1. Create audience\n2. In settings, add trigger\n3. Configure action (event name, Ads account)\n4. Save\n\n### Use Cases\n\n- Track when users become high-value\n- Send conversion events to Ads\n- Real-time remarketing lists\n\n## Exporting to Google Ads\n\n### Prerequisites\n\n- Google Ads account linked\n- Admin -> Product Links -> Google Ads Links\n- Minimum audience size met\n\n### Minimum Sizes\n\n| Region | Minimum Users |\n|--------|---------------|\n| Standard | 100 active |\n| EEA/UK | 1,000 active |\n\n### Setup\n\n1. Link Google Ads account\n2. In audience, enable \"Ads Personalisation\"\n3. Audience appears in Ads within 24-48 hours\n\n### Export Destinations\n\n- Google Ads (remarketing, targeting)\n- Display & Video 360\n- Search Ads 360\n\n## Analysing Audiences\n\n### Viewing Audience Data\n\n**Reports -> Realtime:**\n- Active users in audience\n\n**Reports -> User Acquisition:**\n- How audience members acquired\n\n**Explorations -> Segment Overlap:**\n- Compare audiences\n\n**Explorations -> User Lifetime:**\n- LTV of audience members\n\n### Audience Metrics\n\n| Metric | Description |\n|--------|-------------|\n| Total Users | Current members |\n| New Users (7/30 days) | Recent additions |\n| User Growth | Trend over time |\n\n## Using Audiences in Explorations\n\n### As Segments\n\n1. Open Exploration\n2. Click \"+\" in Segments\n3. Select audience\n4. Apply to analysis\n\n### Comparing Audiences\n\n1. Add multiple audiences as segments\n2. View side-by-side comparison\n3. Analyse differences\n\n## Limits and Quotas\n\n| Limit | Standard | 360 |\n|-------|----------|-----|\n| Audiences per property | 100 | 400 |\n| Conditions per audience | 10 | 10 |\n| Membership duration max | 540 days | 540 days |\n\n## Common Issues\n\n### Audience Size Too Small\n\n**Causes:**\n- Conditions too restrictive\n- Low traffic volume\n- Date range too narrow\n\n**Solutions:**\n1. Broaden conditions\n2. Increase membership duration\n3. Wait for more traffic\n\n### Audience Not in Google Ads\n\n**Causes:**\n- Below minimum size\n- Link not configured\n- Ads personalisation disabled\n\n**Solutions:**\n1. Check audience size\n2. Verify Google Ads link\n3. Enable Ads Personalisation\n\n### Stale Audience Data\n\n**Cause:** Audiences update with delay\n\n**Solution:** Wait 24-48 hours for updates\n\n## Best Practices\n\n### Naming Conventions\n\nUse clear, descriptive names:\n- \"High-Value Customers - $500+\"\n- \"Cart Abandoners - Last 7 Days\"\n- \"Newsletter Subscribers\"\n\n### Documentation\n\nDocument each audience:\n- Purpose\n- Conditions used\n- Expected size\n- Use cases\n\n### Regular Review\n\n- Audit audiences quarterly\n- Remove unused audiences\n- Update conditions as needed\n\n## Quick Reference\n\n### Audience Limits\n\n- Maximum: 100 audiences (standard)\n- Membership: 1-540 days\n- Export minimum: 100 users (1,000 EEA/UK)\n\n### Export Destinations\n\n- Google Ads\n- Display & Video 360\n- Search Ads 360\n\n### Predictive Options\n\n- Purchase probability\n- Churn probability\n- Revenue prediction\n",
        "plugins/marketing/skills/ga4/references/bigquery.md": "# GA4 BigQuery Export and Analysis\n\nComplete guide to GA4 BigQuery export including setup, schema, SQL query patterns, and data analysis.\n\n## Overview\n\nGA4 BigQuery export provides raw, event-level data access for advanced analysis, custom reporting, machine learning, and long-term data warehousing. Unlike GA4 reports, BigQuery data is unsampled and allows SQL-based analysis.\n\n## Why Use BigQuery\n\n| Benefit | Description |\n|---------|-------------|\n| Unsampled data | No sampling thresholds |\n| Raw event data | Access every parameter |\n| SQL analysis | Complex queries and joins |\n| Data integration | Combine with other sources |\n| Long-term storage | Beyond GA4 retention |\n| Custom attribution | Build custom models |\n| Machine learning | Train on GA4 data |\n\n## BigQuery Export Setup\n\n### Prerequisites\n\n- GA4 property (standard or 360)\n- Google Cloud project\n- BigQuery API enabled\n- Editor permissions on GA4 property\n\n### Setup Steps\n\n**Step 1: Create/Select Google Cloud Project**\n\n1. Go to console.cloud.google.com\n2. Create new project or select existing\n3. Enable BigQuery API\n\n**Step 2: Link GA4 to BigQuery**\n\n1. GA4 Admin -> Product Links -> BigQuery Links\n2. Click \"Link\"\n3. Choose Google Cloud project\n4. Select dataset location (US, EU, etc.)\n5. Configure export:\n   - Daily: Complete export once per day\n   - Streaming: Real-time (360 only)\n6. Include advertising IDs (optional)\n7. Confirm setup\n\n### Export Options\n\n| Option | Description | Availability |\n|--------|-------------|--------------|\n| Daily Export | Once per day (~9 AM property timezone) | Standard GA4 |\n| Streaming Export | Near real-time | GA4 360 only |\n| Include Advertising IDs | For Ads integration | Optional |\n\n### Data Availability\n\n- Daily tables: ~24 hours after day ends\n- Intraday tables: ~3 updates per day\n- Streaming: Minutes after collection (360)\n\n## Table Structure\n\n### Table Naming\n\n```\nproject.dataset.events_YYYYMMDD     # Daily export\nproject.dataset.events_intraday_YYYYMMDD  # Intraday\nproject.dataset.events_*            # Wildcard all dates\n```\n\n### Key Schema Fields\n\n#### Event Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| event_date | STRING | YYYYMMDD format |\n| event_timestamp | INTEGER | Microseconds since epoch |\n| event_name | STRING | Event name |\n| event_params | RECORD (REPEATED) | Event parameters |\n| event_value_in_usd | FLOAT | Event value |\n\n#### User Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| user_id | STRING | User ID if set |\n| user_pseudo_id | STRING | Anonymous ID |\n| user_properties | RECORD (REPEATED) | User properties |\n| user_first_touch_timestamp | INTEGER | First visit |\n\n#### Device Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| device.category | STRING | desktop, mobile, tablet |\n| device.operating_system | STRING | Windows, iOS, Android |\n| device.browser | STRING | Chrome, Safari |\n\n#### Geo Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| geo.country | STRING | Country name |\n| geo.region | STRING | State/region |\n| geo.city | STRING | City name |\n\n#### Traffic Source Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| traffic_source.source | STRING | google, direct |\n| traffic_source.medium | STRING | organic, cpc |\n| traffic_source.name | STRING | Campaign name |\n\n#### E-commerce Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| ecommerce.transaction_id | STRING | Transaction ID |\n| ecommerce.purchase_revenue_in_usd | FLOAT | Purchase revenue |\n| items | RECORD (REPEATED) | Items array |\n\n## SQL Query Patterns\n\n### Query 1: Event Count by Name\n\n```sql\nSELECT\n  event_name,\n  COUNT(*) as event_count\nFROM\n  `project.dataset.events_*`\nWHERE\n  _TABLE_SUFFIX BETWEEN '20250101' AND '20250131'\nGROUP BY\n  event_name\nORDER BY\n  event_count DESC\n```\n\n### Query 2: Extract Event Parameters\n\n```sql\nSELECT\n  event_date,\n  event_name,\n  user_pseudo_id,\n  (SELECT value.string_value FROM UNNEST(event_params) WHERE key = 'page_location') as page_location,\n  (SELECT value.string_value FROM UNNEST(event_params) WHERE key = 'page_title') as page_title\nFROM\n  `project.dataset.events_*`\nWHERE\n  _TABLE_SUFFIX BETWEEN '20250101' AND '20250131'\n  AND event_name = 'page_view'\nLIMIT 1000\n```\n\n### Query 3: Purchase Analysis\n\n```sql\nSELECT\n  event_date,\n  COUNT(DISTINCT user_pseudo_id) as purchasers,\n  COUNT(DISTINCT ecommerce.transaction_id) as transactions,\n  SUM(ecommerce.purchase_revenue_in_usd) as total_revenue,\n  AVG(ecommerce.purchase_revenue_in_usd) as avg_order_value\nFROM\n  `project.dataset.events_*`\nWHERE\n  _TABLE_SUFFIX BETWEEN '20250101' AND '20250131'\n  AND event_name = 'purchase'\n  AND ecommerce.transaction_id IS NOT NULL\nGROUP BY\n  event_date\nORDER BY\n  event_date\n```\n\n### Query 4: UNNEST Items Array\n\n```sql\nSELECT\n  event_date,\n  item.item_name,\n  item.item_category,\n  SUM(item.quantity) as total_quantity,\n  SUM(item.item_revenue_in_usd) as total_revenue\nFROM\n  `project.dataset.events_*`,\n  UNNEST(items) as item\nWHERE\n  _TABLE_SUFFIX BETWEEN '20250101' AND '20250131'\n  AND event_name = 'purchase'\nGROUP BY\n  event_date,\n  item.item_name,\n  item.item_category\nORDER BY\n  total_revenue DESC\n```\n\n### Query 5: User Journey Analysis\n\n```sql\nWITH user_events AS (\n  SELECT\n    user_pseudo_id,\n    event_timestamp,\n    event_name,\n    (SELECT value.string_value FROM UNNEST(event_params)\n     WHERE key = 'page_location') as page_location\n  FROM\n    `project.dataset.events_*`\n  WHERE\n    _TABLE_SUFFIX = '20250115'\n)\nSELECT\n  user_pseudo_id,\n  ARRAY_AGG(\n    STRUCT(event_name, page_location, event_timestamp)\n    ORDER BY event_timestamp\n  ) as event_sequence\nFROM\n  user_events\nGROUP BY\n  user_pseudo_id\nLIMIT 100\n```\n\n### Query 6: Session Attribution\n\n```sql\nSELECT\n  event_date,\n  traffic_source.source,\n  traffic_source.medium,\n  traffic_source.name as campaign,\n  COUNT(DISTINCT user_pseudo_id) as users,\n  COUNT(DISTINCT CONCAT(user_pseudo_id,\n    (SELECT value.int_value FROM UNNEST(event_params)\n     WHERE key = 'ga_session_id'))) as sessions\nFROM\n  `project.dataset.events_*`\nWHERE\n  _TABLE_SUFFIX BETWEEN '20250101' AND '20250131'\nGROUP BY\n  event_date,\n  traffic_source.source,\n  traffic_source.medium,\n  traffic_source.name\nORDER BY\n  sessions DESC\n```\n\n### Helper Functions\n\n```sql\n-- Reusable functions for parameter extraction\nCREATE TEMP FUNCTION GetParamString(params ANY TYPE, target_key STRING)\nRETURNS STRING\nAS (\n  (SELECT value.string_value FROM UNNEST(params) WHERE key = target_key)\n);\n\nCREATE TEMP FUNCTION GetParamInt(params ANY TYPE, target_key STRING)\nRETURNS INT64\nAS (\n  (SELECT value.int_value FROM UNNEST(params) WHERE key = target_key)\n);\n\n-- Usage\nSELECT\n  event_date,\n  GetParamString(event_params, 'page_location') as page_location,\n  GetParamInt(event_params, 'engagement_time_msec') as engagement_time\nFROM\n  `project.dataset.events_*`\nWHERE\n  _TABLE_SUFFIX BETWEEN '20250101' AND '20250131'\n```\n\n## Query Optimisation\n\n### Best Practices\n\n**1. Use _TABLE_SUFFIX Filtering:**\n```sql\n-- Good\nWHERE _TABLE_SUFFIX BETWEEN '20250101' AND '20250131'\n\n-- Bad (scans all partitions)\nWHERE event_date BETWEEN '20250101' AND '20250131'\n```\n\n**2. Filter on Clustered Columns:**\n```sql\n-- Tables clustered by event_name and event_timestamp\nWHERE event_name IN ('page_view', 'purchase')\n```\n\n**3. Select Specific Columns:**\n```sql\n-- Good\nSELECT event_name, user_pseudo_id, event_timestamp\n\n-- Bad (high cost)\nSELECT *\n```\n\n**4. Limit UNNEST Operations:**\n```sql\n-- Good: Inline UNNEST\n(SELECT value.string_value FROM UNNEST(event_params)\n WHERE key = 'page_location')\n\n-- Avoid: Full UNNEST in FROM\nFROM table, UNNEST(event_params) as param\nWHERE param.key = 'page_location'\n```\n\n**5. Use LIMIT During Development:**\n```sql\nLIMIT 1000  -- Test query first\n```\n\n## Cost Management\n\n### BigQuery Pricing\n\n| Type | Cost |\n|------|------|\n| Storage | ~$0.02/GB/month |\n| Queries | ~$5/TB scanned |\n| Streaming inserts | ~$0.05/GB (360 only) |\n\n### Free Tier\n\n- 10 GB storage free/month\n- 1 TB queries free/month\n\n### Reducing Costs\n\n1. Partition by date using _TABLE_SUFFIX\n2. Select only needed columns\n3. Use LIMIT for testing\n4. Create materialised views for frequent queries\n5. Set up cost alerts in Google Cloud\n\n## Data Retention\n\n### GA4 vs BigQuery\n\n| Platform | Retention |\n|----------|-----------|\n| GA4 Standard | 2 or 14 months |\n| BigQuery | Unlimited (until deleted) |\n\n### Setting Table Expiration\n\n```sql\nALTER TABLE `project.dataset.events_20250101`\nSET OPTIONS (\n  expiration_timestamp=TIMESTAMP \"2026-01-01 00:00:00 UTC\"\n)\n```\n\n## Common Use Cases\n\n### 1. Unsampled Reporting\n\nGA4 UI may sample large datasets. BigQuery provides complete data.\n\n### 2. Custom Attribution\n\n- Access full user journey\n- Build custom attribution models\n- Credit touchpoints as needed\n\n### 3. Data Integration\n\n- Join GA4 with CRM data\n- Combine with product catalogue\n- Enrich with external sources\n\n### 4. Machine Learning\n\n- Export to ML tools\n- Predict churn, LTV, conversions\n- Train custom models\n\n### 5. Long-term Analysis\n\n- Historical analysis beyond GA4 limits\n- Year-over-year comparisons\n- Trend analysis\n\n## Troubleshooting\n\n### No Data in Tables\n\n**Causes:**\n- Link just created (wait 24 hours)\n- Export paused\n- Wrong project/dataset\n\n**Solutions:**\n1. Wait for first export\n2. Check BigQuery Links status\n3. Verify project configuration\n\n### Missing Events\n\n**Causes:**\n- Events not firing\n- Consent mode blocking\n- Filter applied\n\n**Solutions:**\n1. Verify in DebugView first\n2. Check consent configuration\n3. Review data filters\n\n### High Query Costs\n\n**Causes:**\n- SELECT * usage\n- Missing date filters\n- Large date ranges\n\n**Solutions:**\n1. Select specific columns\n2. Always use _TABLE_SUFFIX\n3. Narrow date ranges\n\n## Quick Reference\n\n### Table Names\n\n- Daily: `events_YYYYMMDD`\n- Intraday: `events_intraday_YYYYMMDD`\n- Wildcard: `events_*`\n\n### Date Filter\n\n```sql\nWHERE _TABLE_SUFFIX BETWEEN '20250101' AND '20250131'\n```\n\n### Extract Parameter\n\n```sql\n(SELECT value.string_value FROM UNNEST(event_params)\n WHERE key = 'param_name')\n```\n\n### UNNEST Items\n\n```sql\nFROM table, UNNEST(items) as item\n```\n\n### Costs\n\n- Storage: $0.02/GB/month\n- Queries: $5/TB scanned\n- Free: 10 GB storage, 1 TB queries/month\n",
        "plugins/marketing/skills/ga4/references/custom-dimensions.md": "# GA4 Custom Dimensions and Metrics\n\nExpert guidance for registering event parameters as custom dimensions and creating custom metrics.\n\n## Overview\n\nCustom dimensions and metrics transform event parameters into reportable fields in GA4. All custom parameters remain invisible in reports until registered. Registration requires understanding scope types, following naming conventions, and accounting for processing delays.\n\n## Understanding Scopes\n\nGA4 uses three scopes that determine what data the parameter applies to:\n\n### Event Scope\n\n**Applies to:** Single event occurrence\n**Lifespan:** That specific event only\n**Use for:** Event-specific information\n\n```javascript\ngtag('event', 'button_click', {\n  'button_name': 'Subscribe',        // Event-scoped\n  'button_location': 'header',       // Event-scoped\n  'button_id': 'btn_subscribe_01'    // Event-scoped\n});\n```\n\n**Examples:** form_name, video_title, button_name, page_section\n\n### User Scope\n\n**Applies to:** All events from that user\n**Lifespan:** Session persistence (until cleared)\n**Use for:** User attributes that persist\n\n```javascript\ngtag('set', 'user_properties', {\n  'subscription_tier': 'premium',         // User-scoped\n  'customer_lifetime_value': 5000,        // User-scoped\n  'preferred_language': 'en'              // User-scoped\n});\n```\n\n**Examples:** subscription_tier, customer_segment, company_size, signup_date\n\n### Item Scope\n\n**Applies to:** Individual items in ecommerce events\n**Lifespan:** That transaction only\n**Use for:** Product-specific information\n\n```javascript\ngtag('event', 'purchase', {\n  'items': [\n    {\n      'item_id': 'SKU_123',\n      'item_name': 'Blue T-Shirt',\n      'item_color': 'blue',         // Item-scoped\n      'item_size': 'large',         // Item-scoped\n      'supplier': 'Vendor A'        // Item-scoped\n    }\n  ]\n});\n```\n\n**Examples:** item_color, item_size, supplier, product_quality\n\n## Scope Selection Matrix\n\n| Question | Event Scope | User Scope | Item Scope |\n|----------|-------------|------------|------------|\n| Applies to one event? | Yes | No | No |\n| Applies to all user events? | No | Yes | No |\n| Applies to products? | No | No | Yes |\n| Changes per interaction? | Yes | Rarely | Per item |\n\n## Dimension Limits\n\n### Standard GA4\n\n| Dimension Type | Limit |\n|----------------|-------|\n| Event-scoped | 50 |\n| User-scoped | 25 |\n| Item-scoped | 10 |\n| Custom metrics | 50 |\n| Calculated metrics | 5 |\n\n### GA4 360\n\n| Dimension Type | Limit |\n|----------------|-------|\n| Event-scoped | 125 |\n| User-scoped | 100 |\n| Item-scoped | 25 |\n| Custom metrics | 125 |\n| Calculated metrics | 50 |\n\n## Registration Workflow\n\n### Step 1: Send Parameter in Event\n\nFirst, ensure the parameter is being sent in events:\n\n**Event-scoped parameter:**\n```javascript\ngtag('event', 'video_watched', {\n  'video_title': 'Getting Started Guide',\n  'video_duration': 180,\n  'video_quality': 'hd'\n});\n```\n\n**User-scoped parameter (user property):**\n```javascript\ngtag('set', 'user_properties', {\n  'customer_segment': 'enterprise',\n  'subscription_tier': 'premium'\n});\n```\n\n**Item-scoped parameter:**\n```javascript\ngtag('event', 'purchase', {\n  'items': [{\n    'item_id': 'SKU_123',\n    'supplier': 'Vendor A'  // Custom item parameter\n  }]\n});\n```\n\n### Step 2: Verify in DebugView\n\nBefore registration, confirm the parameter appears:\n\n1. Admin -> DebugView\n2. Enable Google Analytics Debugger extension\n3. Trigger the event\n4. Click event in DebugView\n5. See parameter in event details\n6. Note exact parameter name (case-sensitive)\n\n### Step 3: Register as Custom Dimension\n\nNavigate to Admin -> Data Display -> Custom Definitions:\n\n1. Click \"Create custom dimension\"\n2. Fill form:\n   - **Dimension name:** Human-friendly name (e.g., \"Video Quality\")\n   - **Scope:** Select Event, User, or Item\n   - **Description:** Optional notes\n   - **Event parameter / User property:** Exact name from code (case-sensitive)\n3. Click Save\n\n### Step 4: Wait for Data Population\n\n**Critical:** Custom dimensions don't appear immediately.\n\n- **Wait time:** 24-48 hours\n- **Historical data:** Retroactively processed\n- **New data:** Starts populating\n- **Do not** create duplicate dimensions while waiting\n\n### Step 5: Use in Reports\n\nAfter 24-48 hours:\n\n- **Standard Reports:** Add as secondary dimension\n- **Explorations:** Select from dimension picker\n- **Filters/Segments:** Filter by dimension values\n- **Google Ads:** Export for audience building\n\n## Creating Custom Metrics\n\n### Standard Custom Metrics\n\nFor numerical tracking beyond standard metrics:\n\n```javascript\ngtag('event', 'video_watched', {\n  'video_title': 'GA4 Tutorial',\n  'minutes_watched': 45,      // Custom metric\n  'completion_rate': 85       // Custom metric\n});\n```\n\n**Registration:**\n\n1. Admin -> Data Display -> Custom Definitions\n2. Click \"Create custom metric\"\n3. Fill form:\n   - **Metric name:** Display name (e.g., \"Minutes Watched\")\n   - **Scope:** Event (only option)\n   - **Event parameter:** Parameter name (minutes_watched)\n   - **Unit of measurement:** Standard, Currency, Distance, Time (optional)\n4. Save and wait 24-48 hours\n\n### Calculated Metrics\n\nCreate metrics derived from existing metrics:\n\n**Examples:**\n- Revenue per User = revenue / users\n- Conversion Rate = conversions / sessions * 100\n- Average Order Value = revenue / purchases\n\n**Creation:**\n\n1. Admin -> Data Display -> Custom Definitions\n2. Click \"Create custom metric\"\n3. Metric Name: \"Revenue per User\"\n4. Type: Calculated\n5. Formula: `revenue / users`\n6. Save (no processing delay for calculated metrics)\n\n## Common Registration Examples\n\n### Event-Scoped Dimensions\n\n| Dimension Name | Parameter Name | Use Case |\n|----------------|----------------|----------|\n| Video Title | video_title | Track video performance |\n| Form Name | form_name | Analyse form submissions |\n| Button Location | button_location | Track CTA placement |\n| Content Type | content_type | Categorise content |\n| Error Message | error_message | Debug issues |\n\n### User-Scoped Dimensions\n\n| Dimension Name | User Property | Use Case |\n|----------------|---------------|----------|\n| Subscription Tier | subscription_tier | Segment by plan |\n| Customer Segment | customer_segment | Analyse cohorts |\n| Company Size | company_size | B2B analysis |\n| Account Age | account_age_days | Retention analysis |\n| Preferred Language | preferred_language | Localisation |\n\n### Item-Scoped Dimensions\n\n| Dimension Name | Item Parameter | Use Case |\n|----------------|----------------|----------|\n| Item Colour | item_color | Product analysis |\n| Item Size | item_size | Inventory insights |\n| Supplier | supplier | Vendor performance |\n| Material | material | Product attributes |\n| Stock Status | stock_status | Availability analysis |\n\n## Troubleshooting\n\n### Dimension Not Appearing After 48 Hours\n\n**Possible causes:**\n- Parameter name mismatch (case-sensitive)\n- Events not sending parameter\n- Wrong scope selected\n- Low data volume (threshold not met)\n\n**Solutions:**\n1. Verify exact parameter name in DebugView\n2. Confirm events are sending parameter\n3. Check scope matches how parameter is sent\n4. Wait for more data volume\n\n### Parameter in DebugView But Not Reports\n\n**Expected behaviour for first 24-48 hours**\n\n**If persists:**\n1. Check Realtime reports (available sooner)\n2. Verify at least 1000 events with parameter\n3. Check data retention settings\n4. Confirm dimension registered correctly\n\n### Dimension Quota Exceeded\n\n**Cause:** Hit maximum dimension limit\n\n**Solutions:**\n1. Delete unused dimensions\n2. Combine similar dimensions\n3. Plan essential dimensions\n4. Consider GA4 360 for higher limits\n\n### Multiple Users Same Dimension Value\n\n**For user-scoped:** Expected - applies to all user events\n**For event-scoped:** Expected if same value sent\n**For item-scoped:** Expected across products\n\n## Best Practices\n\n### Planning Strategy\n\n1. **Audit existing parameters** - What are you already sending?\n2. **Prioritise dimensions** - Which are essential for reporting?\n3. **Reserve capacity** - Don't use all 50 immediately\n4. **Document dimensions** - Maintain registry of all dimensions\n\n### Naming Conventions\n\n**Parameter names:**\n- snake_case\n- Under 40 characters\n- Descriptive and consistent\n\n**Dimension display names:**\n- Title Case\n- Clear and descriptive\n- Match parameter purpose\n\n### Documentation Template\n\n```markdown\n## Custom Dimension: Video Title\n\n**Parameter Name:** video_title\n**Scope:** Event\n**Description:** Title of video watched by user\n**Events Using:** video_start, video_complete, video_progress\n**Registration Date:** 2024-01-15\n**Status:** Active\n\n**Example Value:** \"Getting Started with GA4\"\n\n**Reports Using:**\n- Video Performance Exploration\n- Content Engagement Dashboard\n```\n\n## Quick Reference\n\n### Registration Checklist\n\n- [ ] Parameter sent in events\n- [ ] Verified in DebugView\n- [ ] Correct scope selected\n- [ ] Exact parameter name used\n- [ ] Waited 24-48 hours\n- [ ] Tested in Explorations\n\n### Scope Quick Guide\n\n| I want to track... | Use Scope |\n|-------------------|-----------|\n| Per-event data | Event |\n| User attributes | User |\n| Product attributes | Item |\n\n### Limits Summary\n\n| Type | Standard | 360 |\n|------|----------|-----|\n| Event dimensions | 50 | 125 |\n| User dimensions | 25 | 100 |\n| Item dimensions | 10 | 25 |\n| Custom metrics | 50 | 125 |\n",
        "plugins/marketing/skills/ga4/references/custom-events.md": "# GA4 Custom Events\n\nExpert guidance for creating business-specific custom events beyond Google's recommended events.\n\n## Overview\n\nCustom events enable measurement of unique business goals, industry-specific actions, and contextual behaviours not covered by Google's recommended events. This reference covers event naming conventions, parameter design strategies, and implementation across all platforms.\n\n## When to Use Custom Events\n\nCreate custom events when:\n\n- Business action not covered by recommended events\n- Industry-specific tracking requirements\n- Unique user interactions to measure\n- Business-specific conversion points\n- Detailed behavioural analysis needs\n\n## Event Naming Conventions\n\n### Format and Constraints\n\n| Constraint | Value |\n|------------|-------|\n| Case | snake_case (lowercase with underscores) |\n| Maximum length | 40 characters |\n| Starting character | Letter |\n| Allowed characters | Letters, numbers, underscores |\n\n### Naming Framework\n\n```\n[action]_[object]_[context]\n```\n\n**Examples:**\n- product_comparison_viewed\n- pricing_calculator_used\n- whitepaper_downloaded\n- trial_signup_completed\n- support_ticket_created\n\n### Good Event Names\n\n| Event Name | Description |\n|------------|-------------|\n| demo_requested | User requested product demo |\n| feature_trial_started | User started feature trial |\n| integration_configured | User set up integration |\n| report_exported | User exported report |\n| team_member_invited | User invited team member |\n\n### Anti-Patterns (Avoid)\n\n| Bad Name | Problem | Better Name |\n|----------|---------|-------------|\n| click | Too generic | button_click |\n| event1 | Not descriptive | form_submit |\n| MyEvent | Wrong case | my_event |\n| trackAction | Camel case | track_action |\n| data | Meaningless | data_exported |\n\n## Event Parameter Design\n\n### Parameter Strategy\n\nFor each custom event, identify:\n\n1. **What is the action?** The user behaviour being measured\n2. **What context is needed?** Information to analyse the action\n3. **What parameters provide context?** Data points to collect\n4. **What are the constraints?** Length limits, data types\n\n### Parameter Limits\n\n| Limit | Value |\n|-------|-------|\n| Parameters per event | 25 |\n| Parameter name length | 40 characters |\n| Parameter value length | 100 characters |\n| Data types | String, Integer, Float |\n\n### Parameter Examples\n\n**demo_requested Event:**\n```javascript\ngtag('event', 'demo_requested', {\n  'demo_type': 'product_walkthrough',\n  'industry': 'technology',\n  'company_size': 'enterprise',\n  'lead_source': 'organic_search',\n  'product_interest': 'analytics_suite'\n});\n```\n\n**course_enrollment Event:**\n```javascript\ngtag('event', 'course_enrollment', {\n  'course_id': 'COURSE_101',\n  'course_name': 'Advanced GA4',\n  'instructor': 'Jane Smith',\n  'price': 99.99,\n  'currency': 'USD',\n  'level': 'advanced',\n  'duration_hours': 8\n});\n```\n\n**support_ticket_created Event:**\n```javascript\ngtag('event', 'support_ticket_created', {\n  'ticket_type': 'bug_report',\n  'product': 'mobile_app',\n  'severity': 'high',\n  'department': 'engineering',\n  'resolution_time_expected': 24\n});\n```\n\n## Industry-Specific Patterns\n\n### SaaS Events\n\n| Event | Parameters |\n|-------|------------|\n| trial_started | plan_type, trial_duration, feature_count |\n| trial_ended | conversion_status, days_active, features_used |\n| upgrade_initiated | from_plan, to_plan, estimated_value |\n| plan_downgraded | from_plan, to_plan, reason_category |\n| feature_activated | feature_name, activation_method |\n| integration_connected | integration_name, connection_type |\n| api_key_generated | key_purpose, environment |\n| workspace_created | workspace_type, team_size |\n\n### Education Events\n\n| Event | Parameters |\n|-------|------------|\n| lesson_completed | course_id, lesson_id, completion_time |\n| quiz_submitted | quiz_id, score_percentage, attempts |\n| certificate_earned | course_id, grade, completion_date |\n| course_enrolled | course_id, enrollment_type, price |\n| instructor_contacted | inquiry_type, response_time |\n| resource_downloaded | resource_type, file_format |\n| discussion_posted | topic_category, word_count |\n| peer_review_submitted | assignment_id, rating_given |\n\n### Media Events\n\n| Event | Parameters |\n|-------|------------|\n| article_shared | article_id, share_platform, category |\n| video_watched | video_id, duration, engagement_percent |\n| podcast_completed | episode_id, listen_duration, completion |\n| newsletter_subscribed | newsletter_type, source |\n| content_bookmarked | content_id, content_type |\n| author_followed | author_id, follow_source |\n| comment_posted | content_id, word_count |\n| paywall_reached | content_type, view_count_prior |\n\n### E-commerce (Beyond Recommended)\n\n| Event | Parameters |\n|-------|------------|\n| product_compared | products_compared, category |\n| review_submitted | product_id, star_rating, has_photo |\n| wishlist_shared | item_count, share_method |\n| size_guide_viewed | product_category, size_selected |\n| store_locator_used | postcode, results_count |\n| gift_wrap_selected | wrap_type, price |\n| loyalty_redeemed | points_redeemed, reward_type |\n| back_in_stock_signup | product_id, notification_preference |\n\n## Implementation Examples\n\n### gtag.js Implementation\n\n```javascript\n// Simple event\ngtag('event', 'demo_requested', {\n  'demo_type': 'product_walkthrough',\n  'industry': 'technology'\n});\n\n// Event with multiple parameters\ngtag('event', 'subscription_changed', {\n  'change_type': 'upgrade',\n  'from_plan': 'basic',\n  'to_plan': 'professional',\n  'price_difference': 50,\n  'currency': 'USD',\n  'billing_cycle': 'monthly'\n});\n```\n\n### GTM Data Layer Implementation\n\n```javascript\n// Push event to data layer\ndataLayer.push({\n  'event': 'demo_requested',\n  'demo_type': 'product_walkthrough',\n  'industry': 'technology',\n  'company_size': 'enterprise'\n});\n\n// In GTM:\n// 1. Create Data Layer Variables for each parameter\n// 2. Create Custom Event trigger for 'demo_requested'\n// 3. Create GA4 Event tag with mapped parameters\n```\n\n### Measurement Protocol (Server-Side)\n\n```python\nimport requests\nimport json\n\nMEASUREMENT_ID = \"G-XXXXXXXXXX\"\nAPI_SECRET = \"your_api_secret\"\n\ndef send_custom_event(client_id, event_name, params):\n    url = f\"https://www.google-analytics.com/mp/collect?measurement_id={MEASUREMENT_ID}&api_secret={API_SECRET}\"\n\n    payload = {\n        \"client_id\": client_id,\n        \"events\": [{\n            \"name\": event_name,\n            \"params\": params\n        }]\n    }\n\n    response = requests.post(\n        url,\n        headers={\"Content-Type\": \"application/json\"},\n        data=json.dumps(payload)\n    )\n\n    return response.status_code == 204\n\n# Example usage\nsend_custom_event(\n    client_id=\"123.456\",\n    event_name=\"subscription_renewed\",\n    params={\n        \"plan_type\": \"professional\",\n        \"renewal_value\": 299.00,\n        \"currency\": \"USD\",\n        \"renewal_count\": 3\n    }\n)\n```\n\n## Registering Custom Dimensions\n\nCustom parameters won't appear in GA4 reports until registered as custom dimensions.\n\n### Registration Process\n\n1. **Send parameter in event** (any platform)\n2. **Verify in DebugView** (Admin -> DebugView)\n3. **Register dimension:**\n   - Admin -> Data Display -> Custom Definitions\n   - Create Custom Dimension\n   - Dimension Name: Human-friendly (e.g., \"Demo Type\")\n   - Scope: Event, User, or Item\n   - Event Parameter: Exact name from code (e.g., \"demo_type\")\n4. **Wait 24-48 hours** for data to populate\n5. **Use in reports** (Explorations, Standard Reports)\n\n### Scope Selection\n\n| Scope | Use For | Example |\n|-------|---------|---------|\n| Event | Single event data | demo_type, button_name |\n| User | User attributes | subscription_tier, customer_segment |\n| Item | Product data | item_color, item_size |\n\n## Testing Custom Events\n\n### DebugView Workflow\n\n1. Enable debug mode:\n   - Chrome extension: Google Analytics Debugger\n   - URL parameter: `?debug_mode=true`\n   - gtag config: `debug_mode: true`\n\n2. Trigger custom event\n\n3. Check DebugView:\n   - Event appears with correct name\n   - All parameters present\n   - Parameter values correct\n   - No errors or warnings\n\n### Validation Checklist\n\n- [ ] Event name follows snake_case\n- [ ] Event name under 40 characters\n- [ ] All parameters present\n- [ ] Parameter names under 40 characters\n- [ ] Parameter values under 100 characters\n- [ ] Correct data types (string vs number)\n- [ ] No PII in parameters\n\n## Common Issues\n\n### Event Not Appearing\n\n**Causes:**\n- Debug mode not enabled\n- Wrong Measurement ID\n- JavaScript error before gtag call\n- Ad blocker blocking\n\n**Solutions:**\n1. Enable Google Analytics Debugger extension\n2. Verify Measurement ID\n3. Check browser console for errors\n4. Test in incognito mode\n\n### Parameters Missing\n\n**Causes:**\n- Parameter name typo\n- Value is undefined/null\n- Data layer variable not populated\n\n**Solutions:**\n1. Check exact parameter name\n2. Validate value before sending\n3. Debug data layer in GTM Preview\n\n### Wrong Data Type\n\n**Causes:**\n- Sending string instead of number\n- Array where string expected\n\n**Solutions:**\n1. Validate data type before sending\n2. Convert values appropriately\n3. Test with DebugView\n\n## Best Practices\n\n### Design Guidelines\n\n1. **Be consistent** - Same event name everywhere\n2. **Be descriptive** - Clear, action-oriented names\n3. **Be specific** - Avoid generic catch-all events\n4. **Plan parameters** - Document required vs optional\n5. **Validate values** - Check before sending\n\n### Documentation\n\nDocument each custom event:\n\n```markdown\n## Event: demo_requested\n\n**Description:** User requested a product demonstration\n\n**Parameters:**\n| Name | Type | Required | Description |\n|------|------|----------|-------------|\n| demo_type | string | Yes | Type of demo requested |\n| industry | string | No | User's industry |\n| company_size | string | No | Size category |\n\n**Example:**\ngtag('event', 'demo_requested', {\n  'demo_type': 'product_walkthrough',\n  'industry': 'technology'\n});\n```\n\n### Version Control\n\nTrack event changes:\n- Document when events added/modified\n- Include in code review process\n- Update documentation on changes\n",
        "plugins/marketing/skills/ga4/references/data-management.md": "# GA4 Data Management and Admin Settings\n\nExpert guidance for GA4 Admin settings including data retention, filters, user access, and property configuration.\n\n## Overview\n\nGA4 Admin settings control data retention, data filters, user permissions, property configuration, and data collection parameters. Proper configuration ensures data quality and team collaboration.\n\n## Accessing Admin Settings\n\n**Path:** GA4 Property -> Admin (bottom-left gear icon)\n\n**Structure:**\n- Account Column: Account-level settings\n- Property Column: Property-level settings\n\n## Data Settings\n\n### Data Retention\n\n**Path:** Admin -> Data Settings -> Data Retention\n\n| Option | Use Case |\n|--------|----------|\n| 2 months | Privacy-focused, GDPR |\n| 14 months | Year-over-year analysis |\n\n**What's Affected:**\n- User-level data in Explorations\n- Event-level data in Explorations\n- User Explorer report\n\n**Not Affected:**\n- Standard reports (aggregated, kept longer)\n- Conversion data\n- Audience data\n\n**Reset on New Activity:**\n- **ON:** Timer resets when user returns (rolling window)\n- **OFF:** Data deleted at fixed date\n\n**Recommendation:**\n- Standard sites: 2 months\n- Ecommerce/high-value: 14 months\n- Export to BigQuery for unlimited retention\n\n### Data Collection\n\n**Path:** Admin -> Data Settings -> Data Collection\n\n**Google Signals:**\n- Enable for demographics, interests\n- Enables cross-device tracking\n- Requires user opt-in for personalisation\n- Impacts data thresholds in reports\n\n**User-Provided Data:**\n- Mark if collecting email, address, phone\n- Required for certain Google Ads features\n- Impacts policy compliance\n\n## Data Filters\n\n**Path:** Admin -> Data Settings -> Data Filters\n\n### Filter Types\n\n| Type | Purpose |\n|------|---------|\n| Internal Traffic | Exclude office/employee traffic |\n| Developer Traffic | Exclude staging/development |\n| Unwanted Referrals | Exclude payment processors |\n\n### Creating Internal Traffic Filter\n\n**Step 1: Define Internal Traffic**\n\n1. Admin -> Data Streams -> Stream settings\n2. Configure tag settings -> Define internal traffic\n3. Add rules:\n   - Rule name: \"Office IP\"\n   - Match type: IP address equals/begins with\n   - IP address: Enter office IPs\n4. Save\n\n**Step 2: Create Filter**\n\n1. Admin -> Data Settings -> Data Filters\n2. Click \"Create Filter\"\n3. Configure:\n   - Filter name: \"Internal Traffic - Office\"\n   - Filter type: Internal Traffic\n   - Filter state: Testing (initially)\n4. Save\n\n**Step 3: Test Filter**\n\n1. Visit website from office IP\n2. Check DebugView: events have `traffic_type = internal`\n3. If correct, set filter to \"Active\"\n\n### Filter States\n\n| State | Behaviour |\n|-------|-----------|\n| Testing | Tags traffic, doesn't exclude |\n| Active | Excludes from reports |\n| Inactive | Disabled |\n\n## User Management\n\n**Path:** Admin -> Property Access Management\n\n### Roles\n\n| Role | Capabilities |\n|------|--------------|\n| Viewer | View reports, create Explorations |\n| Analyst | + Create audiences, custom dimensions, annotations |\n| Marketer | + Manage audiences, link Google Ads |\n| Editor | + Modify property settings, create events |\n| Administrator | Full access including user management |\n\n### Adding Users\n\n1. Property Access Management -> Add\n2. Enter email address\n3. Select role\n4. Add optional message\n5. Click \"Add\"\n\n### Best Practices\n\n- Principle of least privilege\n- Regular access audits\n- Remove users when leaving\n- Use service accounts for integrations\n\n## Property Settings\n\n**Path:** Admin -> Property Settings\n\n### Key Settings\n\n| Setting | Description |\n|---------|-------------|\n| Property name | Descriptive name |\n| Property ID | Read-only numeric ID |\n| Reporting Time Zone | Day boundaries in reports |\n| Currency | Default for revenue |\n| Industry Category | Benchmarking |\n\n### Timezone Considerations\n\n- Affects FUTURE data only\n- Historical data keeps old timezone\n- Cannot change retroactively\n- Plan carefully before changing\n\n## Data Streams\n\n**Path:** Admin -> Data Streams\n\n### Managing Streams\n\nClick stream name to access:\n\n**Stream Details:**\n- Stream name\n- Stream URL\n- Measurement ID\n- Stream ID\n\n**Enhanced Measurement:**\n- Page views (always on)\n- Scrolls\n- Outbound clicks\n- Site search\n- Video engagement\n- File downloads\n- Form interactions\n\n**Toggle individually** to enable/disable each event type.\n\n### Measurement Protocol API Secrets\n\nFor server-side tracking:\n\n1. Click stream -> Measurement Protocol API secrets\n2. Click \"Create\"\n3. Enter nickname\n4. Copy secret (shown once)\n5. Store securely\n\n## Events Settings\n\n**Path:** Admin -> Events\n\n### Viewing Events\n\n- List of all collected events\n- Event count over time\n- Parameter details\n\n### Create Event (Modify Existing)\n\nCreate new events by modifying existing:\n\n1. Click \"Create Event\"\n2. Event name: New event name\n3. Matching conditions: Based on existing event\n4. Modifications: Add/change parameters\n5. Save\n\n**Example:**\n```\nCreate: important_page_view\nWhen: event_name = page_view AND page_path = /pricing\n```\n\n### Mark as Key Event\n\n1. Find event in list\n2. Toggle \"Mark as key event\"\n3. Event appears in conversion reports\n\n**Limits:** Maximum 30 key events per property\n\n## Key Events (Conversions)\n\n**Path:** Admin -> Key Events\n\n### Purpose\n\n- Track important user actions\n- Import to Google Ads for optimisation\n- Appear in conversion reports\n\n### Default Key Events\n\n- purchase (ecommerce)\n- first_visit\n- session_start (if enabled)\n\n### Marking Events\n\n1. Event must have fired at least once\n2. Toggle \"Mark as key event\"\n3. Affects future data immediately\n\n## Custom Definitions\n\n**Path:** Admin -> Data Display -> Custom Definitions\n\n### Custom Dimensions\n\n1. Click \"Create custom dimension\"\n2. Configure:\n   - Dimension name: Display name\n   - Scope: Event, User, or Item\n   - Event/User parameter: Exact parameter name\n3. Save\n4. Wait 24-48 hours for data\n\n### Custom Metrics\n\n1. Click \"Create custom metric\"\n2. Configure:\n   - Metric name: Display name\n   - Scope: Event\n   - Event parameter: Numeric parameter\n   - Unit: Standard, Currency, Distance, Time\n3. Save\n\n### Limits\n\n| Type | Standard | 360 |\n|------|----------|-----|\n| Event-scoped dimensions | 50 | 125 |\n| User-scoped dimensions | 25 | 100 |\n| Item-scoped dimensions | 10 | 25 |\n| Custom metrics | 50 | 125 |\n\n## Product Links\n\n**Path:** Admin -> Product Links\n\n### Available Links\n\n| Link | Purpose |\n|------|---------|\n| Google Ads Links | Remarketing, conversions |\n| Search Ads 360 | SA360 integration |\n| Display & Video 360 | DV360 integration |\n| BigQuery Links | Raw data export |\n| AdSense Links | AdSense revenue |\n\n### Linking Google Ads\n\n1. Google Ads Links -> Link\n2. Choose Ads account\n3. Enable options:\n   - Personalised advertising\n   - Auto-tagging\n4. Confirm link\n\n## DebugView\n\n**Path:** Admin -> DebugView\n\n### Purpose\n\n- Real-time event debugging\n- View events from debug-enabled devices\n- Check parameters and user properties\n\n### Enable Debug Mode\n\n- Browser extension: Google Analytics Debugger\n- URL parameter: ?debug_mode=true\n- gtag config: debug_mode: true\n- GTM: Add debug_mode parameter\n\n## Channel Groups\n\n**Path:** Admin -> Data Display -> Channel Groups\n\n### Default Channel Groups\n\nPre-defined groupings for traffic sources:\n- Direct\n- Organic Search\n- Paid Search\n- Display\n- Social\n- Email\n- Referral\n\n### Custom Channel Groups\n\nCreate custom groupings:\n\n1. Click \"Create new channel group\"\n2. Add channels with rules\n3. Define conditions (source, medium, campaign)\n4. Prioritise channels\n5. Save\n\n## Calculated Metrics\n\n**Path:** Admin -> Data Display -> Custom Definitions\n\nCreate derived metrics:\n\n**Examples:**\n- Revenue per User = revenue / users\n- Conversion Rate = conversions / sessions * 100\n- Average Order Value = revenue / purchases\n\n**Process:**\n1. Create custom metric\n2. Type: Calculated\n3. Enter formula\n4. Save (no processing delay)\n\n## Attribution Settings\n\n**Path:** Admin -> Attribution Settings\n\n### Reporting Attribution Model\n\nChoose default model:\n- Data-driven (recommended)\n- Last click\n- First click\n- Linear\n- Time decay\n- Position-based\n\n### Lookback Window\n\n- Acquisition: 30 days\n- Other conversions: 30/60/90 days\n\n## Quick Reference\n\n### Data Retention\n\n- Default: 2 months\n- Max: 14 months\n- For longer: Export to BigQuery\n\n### User Roles\n\n- Viewer: View only\n- Analyst: View + create\n- Marketer: View + create + Ads\n- Editor: All except user management\n- Administrator: Full access\n\n### Custom Definitions Limits\n\n- Event dimensions: 50\n- User dimensions: 25\n- Item dimensions: 10\n- Custom metrics: 50\n\n### Key Events Limit\n\n- Maximum: 30 per property\n\n### Data Filter States\n\n- Testing: Tags but doesn't exclude\n- Active: Excludes from reports\n- Inactive: Disabled\n",
        "plugins/marketing/skills/ga4/references/debugview.md": "# GA4 DebugView Testing and Validation\n\nComprehensive guide to testing and validating GA4 implementation using DebugView.\n\n## Overview\n\nDebugView is GA4's real-time debugging tool for validating implementation, testing events, and troubleshooting tracking issues. Events appear in DebugView within seconds, enabling rapid testing before data reaches standard reports.\n\n## Accessing DebugView\n\n**Path:** GA4 Admin -> DebugView\n\n**Requirements:**\n- Debug mode enabled on website/app\n- Events sent within last 30 minutes\n- Active user session\n\n## Enabling Debug Mode\n\n### Method 1: Chrome Extension (Recommended)\n\n1. Install \"Google Analytics Debugger\" from Chrome Web Store\n2. Navigate to your website\n3. Enable extension (icon turns blue)\n4. Events automatically appear in DebugView\n\n**Benefits:** Easy toggle, no code changes, works instantly\n\n### Method 2: URL Parameter\n\nAdd `?debug_mode=true` to any URL:\n\n```\nhttps://yourwebsite.com?debug_mode=true\nhttps://yourwebsite.com/page?debug_mode=true\n```\n\n**Benefits:** No extension needed, works for sharing debug links\n\n### Method 3: gtag.js Configuration\n\n```javascript\ngtag('config', 'G-XXXXXXXXXX', {\n  'debug_mode': true\n});\n```\n\n**Important:** Remove for production.\n\n### Method 4: GTM Configuration\n\nIn GA4 Configuration tag:\n1. Expand \"Configuration Settings\"\n2. Add Fields to Set:\n   - Field Name: debug_mode\n   - Value: true\n\n**Important:** Remove or use variable for production.\n\n### Method 5: Mobile App Debug\n\n**iOS (Xcode):**\n1. Edit Scheme -> Arguments\n2. Add: `-FIRDebugEnabled`\n\n**Android (ADB):**\n```bash\nadb shell setprop debug.firebase.analytics.app com.example.app\n```\n\n## DebugView Interface\n\n### Device Stream (Left Panel)\n\n- Shows active debug sessions\n- Displays device type\n- Lists user_pseudo_id or user_id\n- Shows session timing\n- Select device to view events\n\n### Event Stream (Centre Panel)\n\n- Real-time event list\n- Event names with timestamps\n- Event count per type\n- Click event for details\n- Chronological order\n\n### Event Details (Right Panel)\n\nClick any event to see:\n- Event name\n- Timestamp\n- All event parameters\n- User properties\n- Device information\n\n## Reading Event Data\n\n### Event Card Information\n\n| Element | Description |\n|---------|-------------|\n| Event Name | e.g., page_view, purchase |\n| Timestamp | When event fired |\n| Event Count | Times this event fired |\n| Parameters | All sent parameters |\n| User Properties | User-level attributes |\n\n### Example Event\n\n```\nEvent: purchase\nTimestamp: 14:23:45\nParameters:\n  transaction_id: \"T_12345\"\n  value: 99.99\n  currency: \"USD\"\n  items: [Array with 2 items]\nUser Properties:\n  user_tier: \"premium\"\n```\n\n## Validation Workflows\n\n### Workflow 1: New Implementation Test\n\n1. Enable debug mode\n2. Open DebugView\n3. Load website page\n4. Verify automatic events:\n   - session_start\n   - page_view\n   - first_visit (if new user)\n5. Navigate to second page\n6. Verify page_view fires again\n7. Check parameters on all events\n\n### Workflow 2: Custom Event Test\n\n1. Enable debug mode\n2. Open DebugView\n3. Trigger custom event (click button, submit form)\n4. Verify event appears with correct name\n5. Check all expected parameters present\n6. Verify parameter values correct\n7. Confirm data types (number vs string)\n\n### Workflow 3: Ecommerce Test\n\n1. Enable debug mode\n2. Complete purchase flow\n3. Verify each step:\n\n| Step | Event | Check |\n|------|-------|-------|\n| Product page | view_item | items array populated |\n| Add to cart | add_to_cart | items, value, currency |\n| Checkout | begin_checkout | items, value |\n| Shipping | add_shipping_info | shipping_tier |\n| Payment | add_payment_info | payment_type |\n| Confirmation | purchase | transaction_id unique |\n\n4. Verify items array structure\n5. Confirm value matches cart total\n\n### Workflow 4: GTM Integration Test\n\n1. Enable GTM Preview mode\n2. Enable GA4 debug mode\n3. Trigger GTM tag\n4. Verify in GTM Preview:\n   - Tag fires\n   - Variables populated\n5. Verify in DebugView:\n   - Event appears\n   - Parameters match GTM\n6. Cross-reference both tools\n\n## Validation Checklists\n\n### Page View Validation\n\n- [ ] page_view event appears\n- [ ] page_location parameter present (full URL)\n- [ ] page_title parameter present\n- [ ] page_referrer present (if applicable)\n- [ ] Fires on every page navigation\n\n### Purchase Event Validation\n\n- [ ] purchase event fires once\n- [ ] transaction_id is unique\n- [ ] value parameter matches total\n- [ ] currency parameter present (USD, EUR, etc.)\n- [ ] items array populated\n- [ ] Each item has item_id or item_name\n- [ ] Each item has price and quantity\n\n### Custom Event Validation\n\n- [ ] Event name appears correctly\n- [ ] Event name follows snake_case\n- [ ] Event name under 40 characters\n- [ ] All expected parameters present\n- [ ] Parameter names under 40 characters\n- [ ] Parameter values under 100 characters\n- [ ] Correct data types (string, number)\n- [ ] No PII in parameters\n\n### User Properties Validation\n\n- [ ] User properties appear in event details\n- [ ] Property names correct\n- [ ] Property values expected format\n- [ ] Properties persist across events\n\n## Troubleshooting\n\n### Issue: Events Not Appearing\n\n**Causes:**\n- Debug mode not enabled\n- Wrong GA4 property selected\n- Events sent more than 30 minutes ago\n- Measurement ID incorrect\n- Ad blocker blocking\n\n**Solutions:**\n1. Verify debug mode enabled (extension active)\n2. Check correct property in DebugView\n3. Refresh page and try again\n4. Verify Measurement ID\n5. Disable ad blockers for testing\n6. Try incognito mode\n\n### Issue: Missing Parameters\n\n**Causes:**\n- Parameter name misspelled\n- Value is undefined/null\n- Data layer not populated\n- GTM variable not firing\n\n**Solutions:**\n1. Check exact parameter name (case-sensitive)\n2. Validate value before sending\n3. Check GTM Preview for data layer\n4. Verify GTM variable configuration\n\n### Issue: Wrong Parameter Values\n\n**Causes:**\n- Incorrect data type (string vs number)\n- Variable mapping wrong in GTM\n- JavaScript returning wrong value\n- Encoding issues\n\n**Solutions:**\n1. Check data type expectations\n2. Verify GTM variable mapping\n3. Console.log values before sending\n4. Check for special character issues\n\n### Issue: Duplicate Events\n\n**Causes:**\n- Multiple tags firing for same event\n- Both gtag.js AND GTM installed\n- Trigger firing multiple times\n- Event pushed to data layer twice\n\n**Solutions:**\n1. Check for duplicate GTM tags\n2. Choose one implementation method\n3. Add trigger conditions to prevent duplicates\n4. Debug data layer pushes\n\n### Issue: Events in DebugView but Not Reports\n\n**Expected:** Standard reports have 24-48 hour delay\n\n**If persistent:**\n1. Check Realtime reports (faster)\n2. Verify event count meets threshold\n3. Check data retention settings\n4. Confirm no filters blocking data\n\n## Testing User Properties\n\n### Set User Properties\n\n```javascript\ngtag('set', 'user_properties', {\n  'user_tier': 'premium',\n  'account_age_days': 365\n});\n```\n\n### Verify in DebugView\n\n1. Click any event in stream\n2. Scroll to User Properties section\n3. Verify properties appear\n4. Check values correct\n5. Confirm properties persist across events\n\n## Best Practices\n\n### Before Launch\n\n- [ ] Test all critical events (purchase, sign_up)\n- [ ] Verify on multiple browsers\n- [ ] Test on mobile devices\n- [ ] Check in incognito mode\n- [ ] Test with new vs returning users\n- [ ] Verify consent mode behaviour\n\n### During Development\n\n- [ ] Test each new event immediately\n- [ ] Use DebugView + GTM Preview together\n- [ ] Document expected vs actual\n- [ ] Screenshot issues for team\n- [ ] Test edge cases\n\n### After Launch\n\n- [ ] Monitor DebugView first 30 minutes\n- [ ] Check for unexpected duplicates\n- [ ] Verify volumes match expectations\n- [ ] Confirm in standard reports (24-48 hours)\n\n## Quick Reference\n\n### Enable Debug Mode\n\n| Method | How |\n|--------|-----|\n| Chrome extension | Install and enable |\n| URL parameter | ?debug_mode=true |\n| gtag.js | debug_mode: true |\n| GTM | Add debug_mode field |\n\n### Access DebugView\n\nAdmin -> DebugView\n\n### Key Checks\n\n- Event names: max 40 characters, snake_case\n- Parameters: max 25 per event\n- Parameter names: max 40 characters\n- Parameter values: max 100 characters\n- No PII in any fields\n- Unique transaction_id for purchases\n\n### Event Lifecycle\n\n1. User action triggers event\n2. Event sent to GA4\n3. Appears in DebugView (seconds)\n4. Appears in Realtime (30 seconds)\n5. Appears in standard reports (24-48 hours)\n",
        "plugins/marketing/skills/ga4/references/events-fundamentals.md": "# GA4 Events Fundamentals\n\nComprehensive guide to GA4 event architecture including event types, parameters, scopes, and naming conventions.\n\n## Overview\n\nGoogle Analytics 4 uses an event-based architecture where every user interaction is tracked as an event. Understanding GA4's event structure, parameter system, and scoping model is fundamental to successful implementation.\n\n## Event-Based Model\n\nUnlike Universal Analytics (session-based), GA4 tracks everything as events:\n\n- Page views are events\n- Clicks are events\n- Purchases are events\n- Custom interactions are events\n\nEach event has a name and optional parameters providing context.\n\n## Four Event Categories\n\n### 1. Automatically Collected Events\n\nEvents that fire without additional configuration once GA4 is installed.\n\n| Event | Description | When Fired |\n|-------|-------------|------------|\n| session_start | Session begins | First event in session |\n| first_visit | User's first visit | First ever session |\n| user_engagement | Page in focus | After 1+ second focused |\n| page_view | Page loads | With Enhanced Measurement |\n\nThese events cannot be disabled and always fire when conditions are met.\n\n### 2. Enhanced Measurement Events\n\nAutomatically tracked interactions that can be toggled on/off in GA4 settings.\n\n| Event | Trigger | Configuration |\n|-------|---------|---------------|\n| scroll | 90% vertical scroll depth | Data Stream settings |\n| click | Outbound link clicks | Data Stream settings |\n| file_download | PDF, DOC, ZIP, etc. | Data Stream settings |\n| video_start | YouTube video starts | Requires JS API |\n| video_progress | 10%, 25%, 50%, 75% | Requires JS API |\n| video_complete | Video finishes | Requires JS API |\n| view_search_results | Site search performed | Query parameter config |\n| form_start | First form interaction | Data Stream settings |\n| form_submit | Form submission | Data Stream settings |\n\n**Enabling/Disabling:**\nAdmin -> Data Streams -> Stream -> Enhanced Measurement (gear icon)\n\n### 3. Recommended Events\n\nGoogle-defined event names with standardised parameters for consistency.\n\n**Engagement Events:**\n- login (method parameter)\n- sign_up (method parameter)\n- search (search_term parameter)\n- share (method, content_type parameters)\n\n**Monetisation Events:**\n- purchase (transaction_id, value, currency, items)\n- add_to_cart (items, value, currency)\n- remove_from_cart (items)\n- begin_checkout (items, value, currency)\n- add_payment_info (payment_type)\n- add_shipping_info (shipping_tier)\n- refund (transaction_id, value, items)\n\n**Content Events:**\n- view_item (items)\n- view_item_list (items, item_list_id)\n- select_item (items)\n- view_promotion (promotion_id, promotion_name)\n- select_promotion (promotion_id, promotion_name)\n\n### 4. Custom Events\n\nBusiness-specific events created for unique tracking needs.\n\n**Examples:**\n- video_tutorial_watched\n- whitepaper_downloaded\n- demo_requested\n- pricing_calculator_used\n- support_ticket_created\n\n## Event Structure\n\nEvery GA4 event consists of:\n\n```\nEvent\nâ”œâ”€â”€ event_name (required, max 40 chars)\nâ”œâ”€â”€ event_parameters (optional, max 25 per event)\nâ”‚   â”œâ”€â”€ parameter_name: value\nâ”‚   â”œâ”€â”€ parameter_name: value\nâ”‚   â””â”€â”€ ...\nâ”œâ”€â”€ event_timestamp (automatic)\nâ””â”€â”€ user_information (automatic)\n```\n\n**Example Event:**\n```javascript\ngtag('event', 'purchase', {\n  'transaction_id': 'TXN_12345',\n  'value': 99.99,\n  'currency': 'USD',\n  'items': [\n    {\n      'item_id': 'SKU_001',\n      'item_name': 'Blue T-Shirt',\n      'price': 29.99,\n      'quantity': 2\n    }\n  ]\n});\n```\n\n## Parameter Scopes\n\nParameters apply at different scopes depending on their purpose.\n\n### Event Scope\n\nApplies to a single event occurrence only.\n\n**Use for:** Event-specific information\n**Lifespan:** That specific event\n**Examples:** button_name, form_id, video_title\n\n```javascript\ngtag('event', 'button_click', {\n  'button_name': 'Subscribe',      // Event-scoped\n  'button_location': 'header',     // Event-scoped\n  'button_id': 'btn_subscribe_01'  // Event-scoped\n});\n```\n\n### User Scope\n\nApplies to all events from that user during the session.\n\n**Use for:** User attributes that persist\n**Lifespan:** Session (until cleared)\n**Examples:** subscription_tier, customer_segment, loyalty_level\n\n```javascript\ngtag('set', 'user_properties', {\n  'subscription_tier': 'premium',      // User-scoped\n  'customer_lifetime_value': 5000,     // User-scoped\n  'preferred_language': 'en'           // User-scoped\n});\n```\n\n### Item Scope\n\nApplies to individual items in ecommerce events.\n\n**Use for:** Product-specific information\n**Lifespan:** That transaction only\n**Examples:** item_color, item_size, supplier_name\n\n```javascript\ngtag('event', 'purchase', {\n  'items': [\n    {\n      'item_id': 'SKU_123',\n      'item_name': 'Blue T-Shirt',\n      'item_color': 'blue',    // Item-scoped\n      'item_size': 'large',    // Item-scoped\n      'supplier': 'Vendor A'   // Item-scoped\n    }\n  ]\n});\n```\n\n## Event and Parameter Limits\n\n### Property Limits\n\n| Limit | Standard GA4 | GA4 360 |\n|-------|-------------|---------|\n| Distinct event names | 500 | 2,000 |\n| Event-scoped dimensions | 50 | 125 |\n| User-scoped dimensions | 25 | 100 |\n| Item-scoped dimensions | 10 | 25 |\n| Custom metrics | 50 | 125 |\n| Calculated metrics | 5 | 50 |\n\n### Per-Event Limits\n\n| Limit | Value |\n|-------|-------|\n| Parameters per event | 25 |\n| Event name length | 40 characters |\n| Parameter name length | 40 characters |\n| Parameter value length | 100 characters |\n| Items array size | 27 items |\n\n### Special Parameter Limits\n\n| Parameter | Max Length |\n|-----------|------------|\n| page_title | 300 characters |\n| page_referrer | 420 characters |\n| page_location | 1,000 characters |\n\n## Event Naming Conventions\n\n### Best Practices\n\n- Use snake_case (lowercase with underscores)\n- Be descriptive and action-oriented\n- Start with verb when possible\n- Keep under 40 characters\n- Avoid generic names\n\n### Naming Pattern\n\n```\n[action]_[object]_[context]\n\nExamples:\n- video_tutorial_started\n- whitepaper_downloaded\n- demo_request_submitted\n- pricing_calculator_used\n```\n\n### Good Examples\n\n| Event Name | Purpose |\n|------------|---------|\n| video_tutorial_watched | User completed video |\n| product_comparison_viewed | User compared products |\n| trial_signup_completed | User signed up for trial |\n| support_ticket_created | User created support issue |\n\n### Bad Examples\n\n| Event Name | Problem |\n|------------|---------|\n| event1 | Too generic |\n| click | Not descriptive |\n| MyCustomEvent | Wrong case (not snake_case) |\n| data | Meaningless |\n| very_long_descriptive_event_name_that_exceeds_limits | Too long |\n\n## Reserved Event Names\n\nDo not use these names (reserved by Google):\n\n- ad_activeview\n- ad_click\n- ad_exposure\n- ad_impression\n- ad_query\n- adunit_exposure\n- app_clear_data\n- app_install\n- app_update\n- app_remove\n- error\n- first_open\n- first_visit\n- in_app_purchase\n- notification_dismiss\n- notification_foreground\n- notification_open\n- notification_receive\n- os_update\n- screen_view\n- session_start\n- user_engagement\n\n## Reserved Parameter Names\n\nDo not use these parameter names:\n\n- firebase_conversion\n- Parameters starting with:\n  - google_\n  - ga_\n  - firebase_\n\n## Common Event Parameters\n\n### Standard Parameters\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| value | Number | Monetary value |\n| currency | String | ISO currency code (USD, EUR) |\n| transaction_id | String | Unique transaction ID |\n| items | Array | Product objects |\n| method | String | Login/signup method |\n| search_term | String | User search query |\n\n### Automatically Collected Parameters\n\nThese are collected automatically with each event:\n\n- page_location\n- page_referrer\n- page_title\n- language\n- screen_resolution\n- engagement_time_msec\n\n## Accessing Event Data\n\n### DebugView (Real-time)\n\n- Location: Admin -> DebugView\n- Shows live event stream\n- Click event to see parameters\n- Best for testing\n\n### Realtime Reports (30 minutes)\n\n- Location: Reports -> Realtime\n- Event count by name\n- Active users\n- Geographic location\n\n### Standard Reports (24hr+ delay)\n\n- Location: Reports -> Engagement -> Events\n- All event activity\n- Event counts and trends\n- Parameter breakdown (if registered as dimensions)\n\n## Implementation Examples\n\n### Simple Event\n\n```javascript\ngtag('event', 'button_click', {\n  'button_name': 'Subscribe',\n  'button_location': 'header'\n});\n```\n\n### Form Submission\n\n```javascript\ngtag('event', 'form_submit', {\n  'form_name': 'Contact Form',\n  'form_id': 'contact-form',\n  'form_destination': '/thank-you'\n});\n```\n\n### Video Engagement\n\n```javascript\ngtag('event', 'video_watched', {\n  'video_title': 'Getting Started Guide',\n  'video_id': 'VID_001',\n  'video_duration': 180,\n  'video_percent': 100\n});\n```\n\n### Purchase\n\n```javascript\ngtag('event', 'purchase', {\n  'transaction_id': 'TXN_' + Date.now(),\n  'value': 149.99,\n  'currency': 'USD',\n  'tax': 10.00,\n  'shipping': 5.99,\n  'items': [\n    {\n      'item_id': 'SKU_123',\n      'item_name': 'Premium Widget',\n      'item_category': 'Electronics',\n      'price': 149.99,\n      'quantity': 1\n    }\n  ]\n});\n```\n\n## Next Steps\n\nAfter understanding event fundamentals:\n\n1. Review recommended events for your use case\n2. Design custom events for business-specific tracking\n3. Register parameters as custom dimensions\n4. Implement via gtag.js or GTM\n5. Test with DebugView\n",
        "plugins/marketing/skills/ga4/references/gtag.md": "# GA4 gtag.js Direct Implementation\n\nExpert guidance for implementing GA4 using gtag.js directly without Google Tag Manager.\n\n## Overview\n\ngtag.js (Google Tag) is the official JavaScript library for implementing GA4 tracking directly on websites. This reference covers installation, gtag commands, event tracking, user properties, and framework integration patterns.\n\n## When to Use gtag.js\n\n**Choose gtag.js when:**\n- Only need Google products (GA4, Google Ads)\n- Want lightweight implementation\n- Have code access to website\n- No tag management system required\n- Simple tracking needs\n\n**Choose GTM instead when:**\n- Need multiple tracking tags\n- Team collaboration required\n- Frequent changes expected\n- Want version control for tags\n\n## Installation\n\n### Basic Installation\n\nPlace in `<head>` section, before all other scripts:\n\n```html\n<!-- Google tag (gtag.js) -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX\"></script>\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n  gtag('config', 'G-XXXXXXXXXX');\n</script>\n```\n\n### Placement Requirements\n\n| Requirement | Description |\n|-------------|-------------|\n| Location | `<head>` section |\n| Position | Before all other scripts |\n| Async | Script loaded asynchronously |\n| Every page | Must be on all pages |\n\n## gtag Commands\n\n### gtag('js', new Date())\n\nInitialises the library with timestamp.\n\n```javascript\ngtag('js', new Date());\n```\n\n**Required:** Yes, must be called first\n\n### gtag('config', 'G-ID')\n\nConfigures GA4 with Measurement ID.\n\n**Basic:**\n```javascript\ngtag('config', 'G-XXXXXXXXXX');\n```\n\n**With Options:**\n```javascript\ngtag('config', 'G-XXXXXXXXXX', {\n  'page_title': 'Custom Page Title',\n  'page_location': window.location.href,\n  'send_page_view': true,\n  'allow_google_signals': true,\n  'allow_ad_personalization_signals': true,\n  'user_id': 'USER_12345'\n});\n```\n\n### gtag('event', 'name', {params})\n\nSends events to GA4.\n\n**Simple Event:**\n```javascript\ngtag('event', 'button_click', {\n  'button_name': 'Subscribe',\n  'button_location': 'header'\n});\n```\n\n**Recommended Event:**\n```javascript\ngtag('event', 'purchase', {\n  'transaction_id': 'TXN_12345',\n  'value': 99.99,\n  'currency': 'USD',\n  'items': [{\n    'item_id': 'SKU_001',\n    'item_name': 'Product Name',\n    'price': 99.99,\n    'quantity': 1\n  }]\n});\n```\n\n### gtag('set', {properties})\n\nSets user properties and User ID.\n\n**User ID:**\n```javascript\n// On login\ngtag('set', 'user_id', 'USER_12345');\n\n// On logout - MUST use null, never empty string\ngtag('set', 'user_id', null);\n```\n\n**User Properties:**\n```javascript\ngtag('set', 'user_properties', {\n  'subscription_tier': 'premium',\n  'customer_segment': 'enterprise',\n  'account_age_days': 365\n});\n```\n\n### gtag('consent', 'default/update', {})\n\nManages consent state.\n\n**Default (Before Consent):**\n```javascript\ngtag('consent', 'default', {\n  'ad_storage': 'denied',\n  'analytics_storage': 'denied',\n  'ad_user_data': 'denied',\n  'ad_personalization': 'denied'\n});\n```\n\n**Update (After Consent):**\n```javascript\ngtag('consent', 'update', {\n  'ad_storage': 'granted',\n  'analytics_storage': 'granted',\n  'ad_user_data': 'granted',\n  'ad_personalization': 'granted'\n});\n```\n\n## Common Implementation Patterns\n\n### Button Click Tracking\n\n```html\n<button id=\"subscribe-btn\">Subscribe</button>\n\n<script>\ndocument.getElementById('subscribe-btn').addEventListener('click', function() {\n  gtag('event', 'button_click', {\n    'button_name': 'Subscribe',\n    'button_location': 'homepage_hero',\n    'button_id': 'subscribe-btn'\n  });\n});\n</script>\n```\n\n### Form Submission Tracking\n\n```html\n<form id=\"contact-form\">\n  <input type=\"email\" name=\"email\" required>\n  <button type=\"submit\">Submit</button>\n</form>\n\n<script>\ndocument.getElementById('contact-form').addEventListener('submit', function(e) {\n  gtag('event', 'form_submit', {\n    'form_name': 'Contact Form',\n    'form_id': 'contact-form',\n    'form_destination': '/thank-you'\n  });\n});\n</script>\n```\n\n### Video Tracking\n\n```javascript\n// Video start\ngtag('event', 'video_start', {\n  'video_title': 'Getting Started Guide',\n  'video_id': 'VID_001',\n  'video_duration': 180\n});\n\n// Video progress\ngtag('event', 'video_progress', {\n  'video_title': 'Getting Started Guide',\n  'video_id': 'VID_001',\n  'video_percent': 50\n});\n\n// Video complete\ngtag('event', 'video_complete', {\n  'video_title': 'Getting Started Guide',\n  'video_id': 'VID_001'\n});\n```\n\n### Ecommerce Purchase\n\n```javascript\ngtag('event', 'purchase', {\n  'transaction_id': 'TXN_' + Date.now(),\n  'value': 149.99,\n  'currency': 'USD',\n  'tax': 10.00,\n  'shipping': 5.99,\n  'coupon': 'SUMMER20',\n  'items': [\n    {\n      'item_id': 'SKU_001',\n      'item_name': 'Premium Widget',\n      'item_brand': 'Acme',\n      'item_category': 'Electronics',\n      'item_variant': 'Blue',\n      'price': 149.99,\n      'quantity': 1\n    }\n  ]\n});\n```\n\n### User Authentication\n\n```javascript\n// On login\nfunction handleLogin(userId, method) {\n  // Set User ID\n  gtag('set', 'user_id', userId);\n\n  // Send login event\n  gtag('event', 'login', {\n    'method': method\n  });\n\n  // Set user properties\n  gtag('set', 'user_properties', {\n    'account_type': 'registered',\n    'login_method': method\n  });\n}\n\n// On logout\nfunction handleLogout() {\n  // Clear User ID\n  gtag('set', 'user_id', null);\n\n  // Optional: track logout\n  gtag('event', 'logout');\n}\n```\n\n## Single Page Applications\n\n### Manual Page View Tracking\n\nSPAs don't trigger traditional page loads. Track manually:\n\n```javascript\n// Call on route change\nfunction trackPageView(path, title) {\n  gtag('config', 'G-XXXXXXXXXX', {\n    'page_path': path,\n    'page_title': title\n  });\n}\n\n// Example with router\nrouter.afterEach((to) => {\n  trackPageView(to.path, to.meta.title);\n});\n```\n\n### Disable Automatic Page View\n\nIf handling manually:\n\n```javascript\ngtag('config', 'G-XXXXXXXXXX', {\n  'send_page_view': false\n});\n\n// Then send manually\ngtag('event', 'page_view', {\n  'page_title': 'Custom Title',\n  'page_location': window.location.href,\n  'page_path': '/custom-path'\n});\n```\n\n## Framework Integration\n\n### React / Next.js\n\n```javascript\n// lib/gtag.js\nexport const GA_MEASUREMENT_ID = 'G-XXXXXXXXXX';\n\nexport const pageview = (url) => {\n  window.gtag('config', GA_MEASUREMENT_ID, {\n    page_path: url,\n  });\n};\n\nexport const event = (action, params) => {\n  window.gtag('event', action, params);\n};\n```\n\n```javascript\n// In _app.js or layout\nimport { useEffect } from 'react';\nimport { useRouter } from 'next/router';\nimport * as gtag from '../lib/gtag';\n\nexport default function App({ Component, pageProps }) {\n  const router = useRouter();\n\n  useEffect(() => {\n    const handleRouteChange = (url) => {\n      gtag.pageview(url);\n    };\n    router.events.on('routeChangeComplete', handleRouteChange);\n    return () => {\n      router.events.off('routeChangeComplete', handleRouteChange);\n    };\n  }, [router.events]);\n\n  return <Component {...pageProps} />;\n}\n```\n\n### Vue.js\n\n```javascript\n// plugins/gtag.js\nexport default {\n  install(app) {\n    app.config.globalProperties.$gtag = (action, params) => {\n      window.gtag('event', action, params);\n    };\n  }\n};\n```\n\n```javascript\n// In router\nrouter.afterEach((to, from) => {\n  gtag('config', 'G-XXXXXXXXXX', {\n    page_path: to.fullPath,\n    page_title: to.meta.title\n  });\n});\n```\n\n### Angular\n\n```typescript\n// analytics.service.ts\nimport { Injectable } from '@angular/core';\n\ndeclare let gtag: Function;\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class AnalyticsService {\n  event(action: string, params: object) {\n    gtag('event', action, params);\n  }\n\n  pageView(path: string, title: string) {\n    gtag('config', 'G-XXXXXXXXXX', {\n      page_path: path,\n      page_title: title\n    });\n  }\n}\n```\n\n## Multiple Properties\n\nTrack to multiple GA4 properties:\n\n```javascript\n// Configure both\ngtag('config', 'G-XXXXXXXXXX');  // Property 1\ngtag('config', 'G-YYYYYYYYYY');  // Property 2\n\n// Events sent to both automatically\ngtag('event', 'purchase', {\n  'value': 99.99,\n  'currency': 'USD'\n});\n\n// Send to specific property only\ngtag('event', 'purchase', {\n  'send_to': 'G-XXXXXXXXXX',\n  'value': 99.99,\n  'currency': 'USD'\n});\n```\n\n## Debug Mode\n\nEnable debug mode for testing:\n\n```javascript\ngtag('config', 'G-XXXXXXXXXX', {\n  'debug_mode': true\n});\n```\n\n**Important:** Remove for production.\n\n## Common Pitfalls\n\n### 1. gtag Called Before Initialisation\n\n**Problem:** Events called before gtag snippet\n**Solution:** Ensure snippet loads first in `<head>`\n\n### 2. Multiple gtag Snippets\n\n**Problem:** Duplicate events\n**Solution:** Single snippet, multiple config calls\n\n### 3. Empty String for User ID\n\n**Problem:** User ID not cleared properly\n**Solution:** Use `null`, never empty string `\"\"`\n\n### 4. Missing Currency\n\n**Problem:** Monetary events without currency\n**Solution:** Always include `currency` with `value`\n\n### 5. Unregistered Parameters\n\n**Problem:** Parameters not in reports\n**Solution:** Register as custom dimensions\n\n## Critical Rules\n\n| Rule | Value |\n|------|-------|\n| Event name max | 40 characters |\n| Parameter name max | 40 characters |\n| Parameter value max | 100 characters |\n| Parameters per event | 25 |\n| Event names | snake_case |\n\n## Quick Reference\n\n### Initialise\n\n```javascript\ngtag('js', new Date());\ngtag('config', 'G-XXXXXXXXXX');\n```\n\n### Send Event\n\n```javascript\ngtag('event', 'event_name', {params});\n```\n\n### Set User ID\n\n```javascript\ngtag('set', 'user_id', 'USER_123');\n```\n\n### Set User Properties\n\n```javascript\ngtag('set', 'user_properties', {key: 'value'});\n```\n\n### Clear User ID\n\n```javascript\ngtag('set', 'user_id', null);\n```\n",
        "plugins/marketing/skills/ga4/references/gtm-integration.md": "# GA4 Google Tag Manager Integration\n\nExpert guidance for implementing GA4 using Google Tag Manager including tags, triggers, variables, and data layer.\n\n## Overview\n\nGoogle Tag Manager (GTM) provides a powerful, no-code approach to implementing GA4 tracking. GTM centralises tag management, enables version control, and allows updates without code changes.\n\n## Why Use GTM\n\n| Benefit | Description |\n|---------|-------------|\n| No code changes | Update tracking without developers |\n| Version control | Rollback to previous versions |\n| Team collaboration | Multiple users, permissions |\n| Testing | Preview mode before publish |\n| Multiple tags | Manage all tags in one place |\n| Flexibility | Complex trigger conditions |\n\n## GTM Container Installation\n\n### Head Snippet\n\nPlace immediately after `<head>`:\n\n```html\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-XXXXXXX');</script>\n<!-- End Google Tag Manager -->\n```\n\n### Body Snippet\n\nPlace immediately after `<body>`:\n\n```html\n<!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-XXXXXXX\"\nheight=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n```\n\n## GA4 Configuration Tag\n\nThe base tag that initialises GA4 on all pages.\n\n### Creating the Tag\n\n1. GTM -> Tags -> New\n2. Click \"Tag Configuration\"\n3. Select \"Google Tag\"\n4. Enter GA4 Measurement ID (G-XXXXXXXXXX)\n5. Click \"Triggering\"\n6. Select \"Initialisation - All Pages\"\n7. Name tag: \"GA4 - Configuration\"\n8. Save\n\n### Configuration Options\n\n| Option | Description |\n|--------|-------------|\n| Send page view | Auto page view on load (default: true) |\n| Google Signals | Demographics, cross-device |\n| User ID | Cross-device tracking |\n| Debug mode | Enable DebugView |\n\n### Adding User ID\n\n1. Create Data Layer Variable for user_id\n2. In Configuration tag, expand \"Configuration Settings\"\n3. Add Fields to Set:\n   - Field Name: user_id\n   - Value: {{DL - User ID}}\n\n## GA4 Event Tags\n\nSend specific events to GA4.\n\n### Creating Event Tags\n\n1. Tags -> New\n2. Tag Configuration -> Google Tag\n3. Tag ID: G-XXXXXXXXXX (same as config)\n4. Event Name: enter event name\n5. Event Parameters: add parameters\n6. Set trigger\n7. Save\n\n### Event Tag Example: Button Click\n\n**Tag Configuration:**\n- Tag Type: Google Tag\n- Tag ID: G-XXXXXXXXXX\n- Event Name: button_click\n- Event Parameters:\n  - button_name: {{Click Text}}\n  - button_id: {{Click ID}}\n  - button_location: header\n\n**Trigger:**\n- Trigger Type: Click - All Elements\n- Fire on: Some Clicks\n- Condition: Click ID equals \"subscribe-btn\"\n\n### Event Tag Example: Form Submit\n\n**Tag Configuration:**\n- Tag Type: Google Tag\n- Tag ID: G-XXXXXXXXXX\n- Event Name: form_submit\n- Event Parameters:\n  - form_name: {{Form Name Variable}}\n  - form_id: {{Form ID}}\n\n**Trigger:**\n- Trigger Type: Form Submission\n- Fire on: Some Forms\n- Condition: Form ID equals \"contact-form\"\n\n### Event Tag Example: Purchase\n\n**Tag Configuration:**\n- Tag Type: Google Tag\n- Tag ID: G-XXXXXXXXXX\n- Event Name: purchase\n- Event Parameters:\n  - transaction_id: {{DL - Transaction ID}}\n  - value: {{DL - Purchase Value}}\n  - currency: {{DL - Currency}}\n  - items: {{DL - Items}}\n\n**Trigger:**\n- Trigger Type: Custom Event\n- Event Name: purchase\n\n## GTM Triggers\n\n### Trigger Types\n\n| Type | Use For |\n|------|---------|\n| Page View | Page loads |\n| DOM Ready | After DOM parsed |\n| Window Loaded | After all resources |\n| Click - All Elements | Any click |\n| Click - Just Links | Link clicks only |\n| Form Submission | Form submits |\n| Custom Event | dataLayer.push events |\n| Scroll Depth | Scroll percentage |\n| Timer | Time-based |\n| JavaScript Error | Error tracking |\n\n### Creating Triggers\n\n**Page View Trigger:**\n1. Triggers -> New\n2. Trigger Type: Page View\n3. Fire on: Some Page Views\n4. Condition: Page Path contains \"/products\"\n5. Name: \"Page View - Products\"\n6. Save\n\n**Click Trigger:**\n1. Triggers -> New\n2. Trigger Type: Click - All Elements\n3. Fire on: Some Clicks\n4. Condition: Click ID equals \"cta-button\"\n5. Name: \"Click - CTA Button\"\n6. Save\n\n**Custom Event Trigger:**\n1. Triggers -> New\n2. Trigger Type: Custom Event\n3. Event Name: add_to_cart\n4. Fire on: All Custom Events\n5. Name: \"CE - Add to Cart\"\n6. Save\n\n## GTM Variables\n\n### Built-in Variables\n\nEnable in Variables section:\n\n**Page Variables:**\n- Page URL\n- Page Hostname\n- Page Path\n- Referrer\n\n**Click Variables:**\n- Click Element\n- Click Classes\n- Click ID\n- Click Text\n- Click URL\n\n**Form Variables:**\n- Form Element\n- Form Classes\n- Form ID\n- Form Text\n\n### Data Layer Variables\n\nExtract data from dataLayer.push():\n\n**Creating Variable:**\n1. Variables -> User-Defined -> New\n2. Variable Type: Data Layer Variable\n3. Data Layer Variable Name: exact key name\n4. Name: \"DL - Product ID\"\n5. Save\n\n**Example:**\n```javascript\ndataLayer.push({\n  'event': 'add_to_cart',\n  'product_id': 'SKU_123',\n  'product_name': 'Blue T-Shirt',\n  'product_price': 29.99\n});\n```\n\nVariables needed:\n- DL - Product ID: `product_id`\n- DL - Product Name: `product_name`\n- DL - Product Price: `product_price`\n\n### Custom JavaScript Variables\n\nFor computed values:\n\n```javascript\nfunction() {\n  return document.title + ' | ' + window.location.pathname;\n}\n```\n\n## Data Layer Integration\n\n### What is the Data Layer\n\nJavaScript object that holds structured data for GTM:\n\n```javascript\nwindow.dataLayer = window.dataLayer || [];\n```\n\n### Pushing Events\n\n```javascript\n// Simple event\ndataLayer.push({\n  'event': 'button_click',\n  'button_name': 'Subscribe',\n  'button_location': 'header'\n});\n\n// Ecommerce event\ndataLayer.push({\n  'event': 'purchase',\n  'ecommerce': {\n    'transaction_id': 'TXN_12345',\n    'value': 99.99,\n    'currency': 'USD',\n    'items': [\n      {\n        'item_id': 'SKU_001',\n        'item_name': 'Product Name',\n        'price': 99.99,\n        'quantity': 1\n      }\n    ]\n  }\n});\n```\n\n### GTM Listens for Event Key\n\nWhen dataLayer.push includes `event`, GTM can trigger tags.\n\n## Preview Mode Testing\n\n### Enabling Preview\n\n1. Click \"Preview\" (top-right in GTM)\n2. Enter website URL\n3. Click \"Connect\"\n4. Tag Assistant window opens\n\n### What to Check\n\n**Tags Tab:**\n- Which tags fired\n- Which tags didn't fire\n- Firing order\n\n**Variables Tab:**\n- Variable values at each event\n- Data Layer contents\n\n**Data Layer Tab:**\n- All dataLayer.push calls\n- Event sequence\n\n**Errors Tab:**\n- Any configuration errors\n- Warning messages\n\n### Testing Workflow\n\n1. Enable Preview mode\n2. Navigate website\n3. Trigger actions (clicks, forms, purchases)\n4. Verify in Tag Assistant:\n   - Correct tags fire\n   - Parameters populated\n   - No errors\n\n## Publishing Changes\n\n### Process\n\n1. Click \"Submit\" (top-right)\n2. Enter Version Name (e.g., \"GA4 Setup - January 2025\")\n3. Enter Version Description\n4. Click \"Publish\"\n\n### Best Practices\n\n- Use descriptive version names\n- Include date in version name\n- Document all changes\n- Test in Preview before publish\n- Keep version history clean\n\n## Common Tag Configurations\n\n### GA4 Configuration Tag\n\n```\nName: GA4 - Configuration\nType: Google Tag\nTag ID: G-XXXXXXXXXX\nTrigger: Initialisation - All Pages\n```\n\n### GA4 Event - Button Click\n\n```\nName: GA4 - Button Click\nType: Google Tag\nTag ID: G-XXXXXXXXXX\nEvent Name: button_click\nParameters:\n  - button_name: {{Click Text}}\n  - button_id: {{Click ID}}\nTrigger: Click - CTA Buttons\n```\n\n### GA4 Event - Form Submit\n\n```\nName: GA4 - Form Submit\nType: Google Tag\nTag ID: G-XXXXXXXXXX\nEvent Name: form_submit\nParameters:\n  - form_name: {{DL - Form Name}}\n  - form_id: {{Form ID}}\nTrigger: Form Submission\n```\n\n### GA4 Event - Purchase\n\n```\nName: GA4 - Purchase\nType: Google Tag\nTag ID: G-XXXXXXXXXX\nEvent Name: purchase\nParameters:\n  - transaction_id: {{DL - Transaction ID}}\n  - value: {{DL - Value}}\n  - currency: {{DL - Currency}}\n  - items: {{DL - Items}}\nTrigger: CE - Purchase\n```\n\n## Troubleshooting\n\n### Tags Not Firing\n\n**Causes:**\n- Trigger conditions not met\n- Wrong variable values\n- Tag paused\n\n**Solutions:**\n1. Check trigger conditions in Preview\n2. Verify variable values\n3. Ensure tag not paused\n\n### Wrong Parameter Values\n\n**Causes:**\n- Incorrect variable mapping\n- Data layer not populated\n- Timing issues\n\n**Solutions:**\n1. Check Data Layer in Preview\n2. Verify variable names match exactly\n3. Check event sequence timing\n\n### Duplicate Events\n\n**Causes:**\n- Multiple tags for same event\n- Both GTM and gtag.js\n- Trigger fires multiple times\n\n**Solutions:**\n1. Remove duplicate tags\n2. Choose GTM OR gtag.js\n3. Add trigger conditions\n\n## Best Practices\n\n### Naming Conventions\n\n**Tags:**\n- \"GA4 - Configuration\"\n- \"GA4 - Purchase\"\n- \"GA4 - Form Submit\"\n\n**Triggers:**\n- \"PV - Products Pages\"\n- \"Click - CTA Buttons\"\n- \"CE - Add to Cart\"\n\n**Variables:**\n- \"DL - Product ID\"\n- \"CJS - Page Category\"\n- \"Constant - GA4 ID\"\n\n### Container Organisation\n\n- Create folders for GA4 tags\n- Create folders for variables\n- Use consistent naming\n- Document custom configurations\n\n### Testing Protocol\n\n1. Always use Preview mode\n2. Test all triggers\n3. Verify all parameters\n4. Check DebugView\n5. Then publish\n\n## Quick Reference\n\n### Setup Order\n\n1. Create GA4 Configuration tag (Initialisation trigger)\n2. Test with Preview\n3. Create event tags\n4. Create triggers\n5. Create variables\n6. Test with Preview\n7. Publish\n\n### Common Issues\n\n- Tags not firing: Check triggers\n- Wrong values: Check variables\n- Duplicates: Remove extra tags\n- No data: Verify Measurement ID\n",
        "plugins/marketing/skills/ga4/references/measurement-protocol.md": "# GA4 Measurement Protocol\n\nComplete guide to GA4 Measurement Protocol for server-side event tracking.\n\n## Overview\n\nThe GA4 Measurement Protocol allows server-side event collection, enabling data transmission to GA4 from any HTTP-capable environment including backend servers, mobile app backends, kiosks, and IoT devices.\n\n## When to Use Measurement Protocol\n\n| Use Case | Description |\n|----------|-------------|\n| Server-side tracking | Events from backend systems |\n| Offline conversions | Import CRM/POS data |\n| Payment processing | Track post-checkout events |\n| Subscription renewals | Server-initiated events |\n| Lead enrichment | Enhance leads from backend |\n| IoT devices | Non-browser environments |\n| Headless architectures | API-first systems |\n\n## API Endpoints\n\n### Production Endpoint\n\n```\nPOST https://www.google-analytics.com/mp/collect\n```\n\n### Debug Endpoint\n\n```\nPOST https://www.google-analytics.com/debug/mp/collect\n```\n\n**Key Difference:** Debug returns validation messages without storing data.\n\n## Authentication\n\n### Required Credentials\n\n1. **Measurement ID** (G-XXXXXXXXXX)\n   - Location: GA4 Admin -> Data Streams -> Web Stream\n\n2. **API Secret**\n   - Location: Data Streams -> Measurement Protocol API secrets\n\n### Generating API Secret\n\n1. GA4 Admin -> Data Streams\n2. Click your data stream\n3. Scroll to \"Measurement Protocol API secrets\"\n4. Click \"Create\"\n5. Enter nickname (e.g., \"Server-side tracking\")\n6. Click \"Create\"\n7. **Copy secret immediately** (shown once only)\n8. Store securely\n\n## Request Structure\n\n### URL Format\n\n```\nhttps://www.google-analytics.com/mp/collect?measurement_id={MEASUREMENT_ID}&api_secret={API_SECRET}\n```\n\n### Headers\n\n```\nContent-Type: application/json\n```\n\n### Request Body (JSON)\n\n```json\n{\n  \"client_id\": \"unique_client_identifier\",\n  \"user_id\": \"optional_user_id\",\n  \"timestamp_micros\": \"1234567890123456\",\n  \"user_properties\": {\n    \"property_name\": {\n      \"value\": \"property_value\"\n    }\n  },\n  \"consent\": {\n    \"ad_storage\": \"granted\",\n    \"analytics_storage\": \"granted\"\n  },\n  \"events\": [\n    {\n      \"name\": \"event_name\",\n      \"params\": {\n        \"parameter_name\": \"parameter_value\",\n        \"value\": 123.45,\n        \"currency\": \"USD\"\n      }\n    }\n  ]\n}\n```\n\n## Required and Optional Fields\n\n### Required Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| client_id | string | Unique client identifier (UUID recommended) |\n| events | array | Array of event objects (max 25) |\n| events[].name | string | Event name (max 40 chars) |\n\n### Optional Fields\n\n| Field | Type | Description |\n|-------|------|-------------|\n| user_id | string | User ID for cross-device |\n| timestamp_micros | integer | Event timestamp (microseconds) |\n| user_properties | object | User-level properties |\n| consent | object | Consent status |\n| non_personalized_ads | boolean | Disable ad personalisation |\n\n## Common Event Parameters\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| session_id | string | Session identifier |\n| engagement_time_msec | integer | Engagement time (ms) |\n| page_location | string | Full URL |\n| page_title | string | Page title |\n| value | number | Monetary value |\n| currency | string | ISO 4217 code |\n| transaction_id | string | Unique transaction ID |\n| items | array | E-commerce items |\n\n## Implementation Examples\n\n### Python Implementation\n\n**Using Requests Library:**\n\n```python\nimport requests\nimport json\nimport uuid\n\nMEASUREMENT_ID = \"G-XXXXXXXXXX\"\nAPI_SECRET = \"your_api_secret\"\nENDPOINT = f\"https://www.google-analytics.com/mp/collect?measurement_id={MEASUREMENT_ID}&api_secret={API_SECRET}\"\n\ndef send_event(client_id, event_name, params=None):\n    payload = {\n        \"client_id\": client_id,\n        \"events\": [{\n            \"name\": event_name,\n            \"params\": params or {}\n        }]\n    }\n\n    response = requests.post(\n        ENDPOINT,\n        headers={\"Content-Type\": \"application/json\"},\n        data=json.dumps(payload)\n    )\n\n    return response.status_code == 204\n\n# Send page view\nsend_event(\n    client_id=\"user_123.session_456\",\n    event_name=\"page_view\",\n    params={\n        \"page_location\": \"https://example.com/page\",\n        \"page_title\": \"Example Page\"\n    }\n)\n\n# Send purchase\nsend_event(\n    client_id=\"user_123.session_456\",\n    event_name=\"purchase\",\n    params={\n        \"transaction_id\": \"T_12345\",\n        \"value\": 99.99,\n        \"currency\": \"USD\",\n        \"items\": [{\n            \"item_id\": \"SKU_123\",\n            \"item_name\": \"Product Name\",\n            \"price\": 99.99,\n            \"quantity\": 1\n        }]\n    }\n)\n```\n\n**Using ga4mp Library:**\n\n```python\n# Install: pip install ga4mp\nfrom ga4mp import GtagMP\n\nga = GtagMP(\n    measurement_id=\"G-XXXXXXXXXX\",\n    api_secret=\"your_api_secret\",\n    client_id=\"unique_client_id\"\n)\n\n# Send event\nga.send_event(\n    event_name=\"purchase\",\n    event_parameters={\n        \"transaction_id\": \"T_12345\",\n        \"value\": 99.99,\n        \"currency\": \"USD\",\n        \"items\": [{\n            \"item_id\": \"SKU_123\",\n            \"item_name\": \"Product Name\",\n            \"price\": 99.99,\n            \"quantity\": 1\n        }]\n    }\n)\n```\n\n### Node.js Implementation\n\n```javascript\nconst axios = require('axios');\nconst { v4: uuidv4 } = require('uuid');\n\nconst MEASUREMENT_ID = 'G-XXXXXXXXXX';\nconst API_SECRET = 'your_api_secret';\nconst ENDPOINT = `https://www.google-analytics.com/mp/collect?measurement_id=${MEASUREMENT_ID}&api_secret=${API_SECRET}`;\n\nasync function sendEvent(clientId, eventName, params = {}) {\n  const payload = {\n    client_id: clientId,\n    events: [{\n      name: eventName,\n      params: params\n    }]\n  };\n\n  try {\n    const response = await axios.post(ENDPOINT, payload, {\n      headers: { 'Content-Type': 'application/json' }\n    });\n    return response.status === 204;\n  } catch (error) {\n    console.error('Error sending event:', error);\n    return false;\n  }\n}\n\n// Send purchase event\nsendEvent('client_123', 'purchase', {\n  transaction_id: 'T_12345',\n  value: 99.99,\n  currency: 'USD',\n  items: [{\n    item_id: 'SKU_123',\n    item_name: 'Product',\n    price: 99.99,\n    quantity: 1\n  }]\n});\n```\n\n### PHP Implementation\n\n```php\n<?php\n// Using php-GA4-Measurement-Protocol library\n// Install: composer require br33f/php-ga4-measurement-protocol\n\nuse Br33f\\Ga4\\MeasurementProtocol\\Dto\\Event\\PurchaseEvent;\nuse Br33f\\Ga4\\MeasurementProtocol\\Dto\\Request\\MeasurementRequest;\nuse Br33f\\Ga4\\MeasurementProtocol\\Service;\n\n$measurementId = 'G-XXXXXXXXXX';\n$apiSecret = 'your_api_secret';\n\n$service = new Service($apiSecret, $measurementId);\n\n$event = new PurchaseEvent();\n$event->setTransactionId('T_12345')\n      ->setValue(99.99)\n      ->setCurrency('USD');\n\n$request = new MeasurementRequest();\n$request->setClientId('unique_client_id')\n        ->addEvent($event);\n\n$service->send($request);\n?>\n```\n\n### cURL Example\n\n```bash\ncurl -X POST \"https://www.google-analytics.com/mp/collect?measurement_id=G-XXXXXXXXXX&api_secret=YOUR_SECRET\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"client_id\": \"client_123\",\n  \"events\": [{\n    \"name\": \"purchase\",\n    \"params\": {\n      \"transaction_id\": \"T_12345\",\n      \"value\": 99.99,\n      \"currency\": \"USD\"\n    }\n  }]\n}'\n```\n\n## Validation with Debug Endpoint\n\n### Send to Debug Endpoint\n\n```bash\ncurl -X POST \"https://www.google-analytics.com/debug/mp/collect?measurement_id=G-XXXXXXXXXX&api_secret=YOUR_SECRET\" \\\n-H \"Content-Type: application/json\" \\\n-d '{\n  \"client_id\": \"test_client\",\n  \"events\": [{\n    \"name\": \"test_event\",\n    \"params\": {\n      \"test_param\": \"test_value\"\n    }\n  }]\n}'\n```\n\n### Response Format\n\n```json\n{\n  \"validationMessages\": [\n    {\n      \"fieldPath\": \"events[0].name\",\n      \"description\": \"Event name must be 40 characters or fewer\",\n      \"validationCode\": \"NAME_INVALID\"\n    }\n  ]\n}\n```\n\n### Empty Response = Valid\n\n- No validationMessages = payload valid\n- Status 200 = request processed\n- Production returns 204 (no content)\n\n## Validation Codes\n\n| Code | Description | Fix |\n|------|-------------|-----|\n| NAME_INVALID | Invalid event/parameter name | snake_case, max 40 chars |\n| NAME_RESERVED | Reserved name used | Check reserved names |\n| VALUE_INVALID | Invalid parameter value | Check data type |\n| VALUE_REQUIRED | Required value missing | Add required parameter |\n| VALUE_OUT_OF_BOUNDS | Value exceeds limits | Check numeric ranges |\n| EXCEEDED_MAX_ENTITIES | Too many events | Max 25 per request |\n\n## Best Practices\n\n### 1. Always Validate First\n\n```python\nDEBUG_ENDPOINT = f\"https://www.google-analytics.com/debug/mp/collect?measurement_id={MEASUREMENT_ID}&api_secret={API_SECRET}\"\n\ndef validate_event(payload):\n    response = requests.post(\n        DEBUG_ENDPOINT,\n        headers={\"Content-Type\": \"application/json\"},\n        data=json.dumps(payload)\n    )\n    return response.json()\n```\n\n### 2. Use Consistent client_id\n\n- Same user = same client_id across sessions\n- Store in database for logged-in users\n- Use UUID format for anonymity\n\n### 3. Include session_id\n\n- Maintain session continuity\n- Generate unique session ID\n- Keep consistent within session\n\n### 4. Batch Events\n\n```python\npayload = {\n    \"client_id\": \"client_123\",\n    \"events\": [\n        {\"name\": \"event_1\", \"params\": {}},\n        {\"name\": \"event_2\", \"params\": {}},\n        {\"name\": \"event_3\", \"params\": {}}\n    ]  # Up to 25 events per request\n}\n```\n\n### 5. Handle Errors Gracefully\n\n```python\ndef send_with_retry(payload, max_retries=3):\n    for attempt in range(max_retries):\n        try:\n            response = requests.post(ENDPOINT, json=payload)\n            if response.status_code == 204:\n                return True\n        except Exception as e:\n            if attempt < max_retries - 1:\n                time.sleep(2 ** attempt)  # Exponential backoff\n            else:\n                log_error(e, payload)\n    return False\n```\n\n### 6. Set Proper Timestamps\n\n```python\nimport time\n\n# For historical data (max 3 days past)\ntimestamp_micros = int(time.time() * 1_000_000)\n\npayload = {\n    \"client_id\": \"client_123\",\n    \"timestamp_micros\": str(timestamp_micros),\n    \"events\": [...]\n}\n```\n\n### 7. Respect Consent\n\n```python\npayload = {\n    \"client_id\": \"client_123\",\n    \"consent\": {\n        \"ad_storage\": \"denied\",\n        \"analytics_storage\": \"granted\"\n    },\n    \"events\": [...]\n}\n```\n\n## Limits\n\n| Limit | Value |\n|-------|-------|\n| Events per request | 25 |\n| Event name length | 40 characters |\n| Parameter name length | 40 characters |\n| Parameter value length | 100 characters |\n| Parameters per event | 25 |\n| User properties per request | 25 |\n| Timestamp range | 3 days past, 72 hours future |\n\n## Common Issues\n\n### Events Not Appearing\n\n**Causes:**\n- Wrong Measurement ID\n- Invalid API secret\n- Validation errors\n- Consent blocking\n\n**Solutions:**\n1. Validate with debug endpoint\n2. Verify credentials\n3. Check consent parameters\n\n### Duplicate Events\n\n**Causes:**\n- Same request sent multiple times\n- Missing deduplication logic\n\n**Solutions:**\n1. Implement idempotency\n2. Track sent events\n3. Use unique transaction IDs\n\n### Missing User Association\n\n**Cause:** Different client_id values\n\n**Solution:** Store and reuse client_id from frontend\n\n## Quick Reference\n\n### Endpoint\n\n```\nProduction: /mp/collect\nDebug: /debug/mp/collect\n```\n\n### Required Fields\n\n- client_id (UUID recommended)\n- events array\n- event name\n\n### Max Limits\n\n- 25 events per request\n- 40 characters per event name\n- 25 parameters per event\n- 25 user properties per request\n\n### Validation\n\n- Send to debug endpoint\n- Empty response = valid\n- Check validationMessages array\n",
        "plugins/marketing/skills/ga4/references/privacy.md": "# GA4 Privacy and Compliance\n\nExpert guidance for GA4 privacy including GDPR, CCPA, Consent Mode v2, and data deletion.\n\n## Overview\n\nGA4 provides privacy-focused features for GDPR, CCPA, and global privacy regulations including Consent Mode, data controls, and compliance workflows.\n\n## Consent Mode v2\n\n### What is Consent Mode\n\nGoogle's API for communicating user consent status to GA4, Google Ads, and other Google tags.\n\n### Consent Parameters\n\n| Parameter | Purpose | Values |\n|-----------|---------|--------|\n| ad_storage | Advertising cookies | granted / denied |\n| analytics_storage | Analytics cookies | granted / denied |\n| ad_user_data | User data for advertising (NEW) | granted / denied |\n| ad_personalization | Personalized ads (NEW) | granted / denied |\n| personalization_storage | Website personalisation | granted / denied |\n| functionality_storage | Essential functionality | granted / denied |\n| security_storage | Security features | granted / denied |\n\n### Consent Mode v2 Requirements\n\nAs of March 2024, v2 parameters required for EU/EEA:\n- ad_user_data\n- ad_personalization\n\nWithout these, remarketing lists won't populate for EU users.\n\n## Implementing Consent Mode\n\n### Basic gtag.js Implementation\n\n**Step 1: Set Default Consent (BEFORE gtag.js loads)**\n\n```html\n<script>\n  // Set default consent to denied\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n\n  gtag('consent', 'default', {\n    'ad_storage': 'denied',\n    'ad_user_data': 'denied',\n    'ad_personalization': 'denied',\n    'analytics_storage': 'denied'\n  });\n</script>\n\n<!-- Then load gtag.js -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX\"></script>\n<script>\n  gtag('js', new Date());\n  gtag('config', 'G-XXXXXXXXXX');\n</script>\n```\n\n**Step 2: Update Consent After User Choice**\n\n```javascript\n// User accepts all cookies\ngtag('consent', 'update', {\n  'ad_storage': 'granted',\n  'ad_user_data': 'granted',\n  'ad_personalization': 'granted',\n  'analytics_storage': 'granted'\n});\n\n// User accepts only analytics\ngtag('consent', 'update', {\n  'ad_storage': 'denied',\n  'ad_user_data': 'denied',\n  'ad_personalization': 'denied',\n  'analytics_storage': 'granted'\n});\n\n// User denies all\ngtag('consent', 'update', {\n  'ad_storage': 'denied',\n  'ad_user_data': 'denied',\n  'ad_personalization': 'denied',\n  'analytics_storage': 'denied'\n});\n```\n\n### GTM Implementation\n\n**Method 1: Using CMP Template**\n\nMost CMPs (OneTrust, Cookiebot, etc.) provide GTM templates:\n\n1. Install CMP template from Community Gallery\n2. Configure default consent in template\n3. Template auto-updates consent on user choice\n\n**Method 2: Manual GTM Setup**\n\n**Create Consent Initialisation Tag:**\n\n1. Tag Type: Custom HTML\n2. Code:\n```html\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('consent', 'default', {\n    'ad_storage': 'denied',\n    'analytics_storage': 'denied',\n    'ad_user_data': 'denied',\n    'ad_personalization': 'denied'\n  });\n</script>\n```\n3. Trigger: Consent Initialisation - All Pages\n4. Tag firing priority: 999 (fires first)\n\n**Create Consent Update Tag:**\n\n1. Tag Type: Custom HTML\n2. Trigger: Custom event from CMP\n\n## Regional Settings\n\n### EU-Specific Consent\n\n```javascript\n// Denied for EU countries, granted elsewhere\ngtag('consent', 'default', {\n  'ad_storage': 'denied',\n  'analytics_storage': 'denied'\n}, {\n  'region': ['AT', 'BE', 'BG', 'HR', 'CY', 'CZ', 'DK', 'EE', 'FI',\n             'FR', 'DE', 'GR', 'HU', 'IE', 'IT', 'LV', 'LT', 'LU',\n             'MT', 'NL', 'PL', 'PT', 'RO', 'SK', 'SI', 'ES', 'SE', 'GB']\n});\n\n// Granted for non-EU\ngtag('consent', 'default', {\n  'ad_storage': 'granted',\n  'analytics_storage': 'granted'\n});\n```\n\n### California (CCPA)\n\n```javascript\ngtag('consent', 'default', {\n  'ad_storage': 'granted',\n  'analytics_storage': 'granted'\n}, {\n  'region': ['US-CA']\n});\n```\n\n## Consent Mode Behaviour\n\n### When analytics_storage = \"denied\"\n\n| Feature | Behaviour |\n|---------|-----------|\n| Cookies | Not stored |\n| client_id | Not persisted |\n| Tracking | Cookieless pings |\n| Modelling | Used to fill gaps |\n| User journey | Limited |\n\n### When analytics_storage = \"granted\"\n\n| Feature | Behaviour |\n|---------|-----------|\n| Cookies | Stored (_ga, _ga_*) |\n| client_id | Persists across sessions |\n| Tracking | Full functionality |\n| Modelling | Not needed |\n| User journey | Complete |\n\n### Conversion Modelling\n\nWhen consent denied, GA4 uses:\n- Machine learning to estimate conversions\n- Aggregated, anonymised data\n- Behavioural patterns\n- \"Modelled\" label in reports\n\n## Data Retention\n\n### Configuration\n\n**Path:** Admin -> Data Settings -> Data Retention\n\n| Option | Use Case |\n|--------|----------|\n| 2 months | Privacy-focused, GDPR minimum |\n| 14 months | Year-over-year analysis |\n\n### What's Affected\n\n**Affected (user/event data in Explorations):**\n- User-level data\n- Event-level data\n- User Explorer report\n\n**Not Affected (aggregated data):**\n- Standard reports\n- Conversion data\n- Audience data\n\n### Reset on New Activity\n\n- **ON:** Timer resets when user returns\n- **OFF:** Data deleted at fixed date\n\n## Data Deletion Requests\n\n### GDPR Article 17 (Right to Erasure)\n\n**Path:** Admin -> Data Settings -> Data Deletion Requests\n\n### Process\n\n1. Click \"Create deletion request\"\n2. Select parameter:\n   - User ID\n   - Client ID (user_pseudo_id)\n   - App Instance ID\n3. Enter identifier value\n4. Choose date range or \"All time\"\n5. Submit request\n\n### Processing\n\n- Takes up to 72 hours\n- Deletes ALL events for identifier\n- Cannot be undone\n- Confirmation email sent\n\n### Best Practice\n\n- Maintain deletion request log\n- Respond within 30 days (GDPR)\n- Document process in privacy policy\n\n## IP Anonymisation\n\n### GA4 Default Behaviour\n\n- GA4 does NOT log or store IP addresses\n- IP used only for geolocation derivation\n- No additional anonymisation needed\n- Privacy-first by design\n\n### Unlike Universal Analytics\n\n- No `anonymize_ip` parameter needed\n- IP never in reports or exports\n- Location derived, IP discarded\n\n## Google Signals\n\n### What It Enables\n\n- Demographics (age, gender)\n- Interests reporting\n- Cross-device tracking (without User ID)\n- Remarketing audiences\n\n### Privacy Implications\n\n- Requires consent for personalised ads\n- Subject to data thresholds\n- User opt-out via Ads Settings\n\n### Configuration\n\n**Path:** Admin -> Data Settings -> Data Collection\n\n- Enable only with proper consent\n- Respect user opt-outs\n- Document in privacy policy\n\n## GDPR Compliance Checklist\n\n### Legal Requirements\n\n- [ ] Privacy policy updated with GA4 usage\n- [ ] Cookie consent banner implemented\n- [ ] Legal basis documented (consent/legitimate interest)\n- [ ] DPA with Google signed\n- [ ] Cross-border data transfer disclosures\n\n### Technical Implementation\n\n- [ ] Consent Mode v2 configured\n- [ ] All 4 v2 parameters set (ad_storage, analytics_storage, ad_user_data, ad_personalization)\n- [ ] Default consent = denied for EU\n- [ ] Consent updates on user acceptance\n- [ ] Data retention configured\n\n### Operational Processes\n\n- [ ] Data deletion process documented\n- [ ] User opt-out mechanism available\n- [ ] Regular privacy audit schedule\n- [ ] Staff training on procedures\n\n## CCPA Compliance\n\n### Requirements\n\n- Allow opt-out of \"sale\" of personal information\n- \"Do Not Sell My Personal Information\" link\n- Honor Global Privacy Control (GPC)\n\n### GPC Implementation\n\n```javascript\n// Detect GPC signal\nif (navigator.globalPrivacyControl) {\n  gtag('consent', 'update', {\n    'ad_storage': 'denied',\n    'ad_user_data': 'denied',\n    'ad_personalization': 'denied',\n    'analytics_storage': 'granted'  // Analytics OK, ads denied\n  });\n}\n```\n\n### GTM Variable for GPC\n\n1. Variable Type: JavaScript Variable\n2. Global Variable Name: `navigator.globalPrivacyControl`\n3. Use in consent logic\n\n## Consent Management Platforms\n\n### Popular CMPs\n\n- OneTrust\n- Cookiebot\n- Termly\n- Osano\n- TrustArc\n\n### GTM CMP Templates\n\n1. Community Template Gallery -> Search CMP\n2. Install template\n3. Configure settings\n4. Auto-updates consent to GA4\n\n## Testing Consent Mode\n\n### Verification Steps\n\n**1. DebugView Test:**\n- Before consent: Check analytics_storage = denied\n- After consent: Check analytics_storage = granted\n\n**2. Check Event Parameters:**\n- Look for `gcs` parameter (Google Consent State)\n- Events include consent status\n\n**3. Cookie Inspection:**\n- Before consent: No `_ga` cookie\n- After consent: `_ga` cookie set\n\n**4. GTM Preview:**\n- Consent Initialisation fires first\n- GA4 tag respects consent\n- Consent update fires on user action\n\n### Chrome DevTools Check\n\n```javascript\n// Check current consent state\ndataLayer.filter(item => item[0] === 'consent')\n```\n\n## Server-Side Consent\n\n### Measurement Protocol\n\n```json\n{\n  \"client_id\": \"client_123\",\n  \"consent\": {\n    \"ad_storage\": \"denied\",\n    \"analytics_storage\": \"granted\",\n    \"ad_user_data\": \"denied\",\n    \"ad_personalization\": \"denied\"\n  },\n  \"events\": [...]\n}\n```\n\n### Best Practice\n\n- Pass consent from frontend to backend\n- Include in all Measurement Protocol requests\n- Store user preferences in database\n\n## Quick Reference\n\n### Consent Parameters (v2)\n\n```javascript\ngtag('consent', 'default', {\n  'ad_storage': 'denied',\n  'analytics_storage': 'denied',\n  'ad_user_data': 'denied',\n  'ad_personalization': 'denied'\n});\n```\n\n### Update After Consent\n\n```javascript\ngtag('consent', 'update', {\n  'ad_storage': 'granted',\n  'analytics_storage': 'granted',\n  'ad_user_data': 'granted',\n  'ad_personalization': 'granted'\n});\n```\n\n### Data Deletion\n\nAdmin -> Data Settings -> Data Deletion Requests -> Create\n\n### Key Compliance Points\n\n- v2 parameters required for EU (March 2024)\n- Default to denied, update on consent\n- Data retention: 2 or 14 months\n- No IP storage in GA4\n- Respond to deletion within 30 days\n",
        "plugins/marketing/skills/ga4/references/recommended-events.md": "# GA4 Recommended Events\n\nComplete guide to implementing Google-defined recommended events including ecommerce, engagement, and monetisation events.\n\n## Overview\n\nGA4 provides recommended event names and parameter structures defined by Google for consistency across analytics implementations. These standardised events enable key features like ecommerce reports, conversion modelling, and Google Ads integration.\n\n## Why Use Recommended Events\n\n1. **Standard reporting** - Pre-built reports for recommended events\n2. **Google Ads integration** - Automatic conversion import\n3. **Machine learning** - Better predictive audiences\n4. **Consistency** - Cross-property comparison\n5. **Future compatibility** - New features use standard events\n\n## Recommended Events Categories\n\n### Engagement Events\n\n| Event | Description | Key Parameters |\n|-------|-------------|----------------|\n| login | User authentication | method |\n| sign_up | Account creation | method |\n| search | Site search | search_term |\n| share | Content sharing | method, content_type, item_id |\n| select_content | Content selection | content_type, item_id |\n\n### Monetisation Events (Ecommerce)\n\n| Event | Description | Key Parameters |\n|-------|-------------|----------------|\n| view_item | Product page view | items, value, currency |\n| view_item_list | Product list view | items, item_list_id, item_list_name |\n| select_item | Product selected | items |\n| add_to_cart | Cart addition | items, value, currency |\n| remove_from_cart | Cart removal | items |\n| view_cart | Cart viewed | items, value, currency |\n| begin_checkout | Checkout started | items, value, currency |\n| add_shipping_info | Shipping selected | shipping_tier, items |\n| add_payment_info | Payment entered | payment_type, items |\n| purchase | Transaction complete | transaction_id, value, currency, items |\n| refund | Purchase refunded | transaction_id, value, items |\n\n### Promotion Events\n\n| Event | Description | Key Parameters |\n|-------|-------------|----------------|\n| view_promotion | Promotion displayed | promotion_id, promotion_name, items |\n| select_promotion | Promotion clicked | promotion_id, promotion_name, items |\n\n### Other Recommended Events\n\n| Event | Description | Key Parameters |\n|-------|-------------|----------------|\n| add_to_wishlist | Wishlist addition | items, value, currency |\n| generate_lead | Lead generation | value, currency |\n\n## The Items Array\n\nThe items array is critical for ecommerce tracking. Each item object can contain:\n\n### Required (At Least One)\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| item_id | string | Product SKU |\n| item_name | string | Product name |\n\n### Highly Recommended\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| price | number | Unit price |\n| quantity | integer | Number of units |\n| item_category | string | Primary category |\n\n### Optional\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| item_brand | string | Brand name |\n| item_variant | string | Size, colour, etc. |\n| coupon | string | Item-level coupon |\n| discount | number | Discount amount |\n| item_category2-5 | string | Hierarchy categories |\n| item_list_id | string | List identifier |\n| item_list_name | string | List name |\n| affiliation | string | Store affiliation |\n| location_id | string | Store location |\n| index | integer | Position in list |\n\n### Items Array Example\n\n```javascript\n'items': [\n  {\n    'item_id': 'SKU_001',\n    'item_name': 'Blue T-Shirt',\n    'item_brand': 'Acme',\n    'item_category': 'Apparel',\n    'item_category2': 'T-Shirts',\n    'item_variant': 'Large',\n    'price': 29.99,\n    'quantity': 2,\n    'coupon': 'SUMMER20',\n    'discount': 5.00\n  },\n  {\n    'item_id': 'SKU_002',\n    'item_name': 'Black Jeans',\n    'item_brand': 'Acme',\n    'item_category': 'Apparel',\n    'item_category2': 'Jeans',\n    'item_variant': '32',\n    'price': 59.99,\n    'quantity': 1\n  }\n]\n```\n\n## Complete Ecommerce Implementation\n\n### Purchase Event (Most Important)\n\n```javascript\ngtag('event', 'purchase', {\n  'transaction_id': 'TXN_12345',      // Required: unique per purchase\n  'value': 119.97,                     // Recommended: total value\n  'currency': 'USD',                   // Recommended: currency code\n  'tax': 8.40,                         // Optional: tax amount\n  'shipping': 9.99,                    // Optional: shipping cost\n  'coupon': 'SUMMER20',                // Optional: order-level coupon\n  'affiliation': 'Online Store',       // Optional: store name\n  'items': [\n    {\n      'item_id': 'SKU_001',\n      'item_name': 'Blue T-Shirt',\n      'item_category': 'Apparel',\n      'price': 29.99,\n      'quantity': 2\n    },\n    {\n      'item_id': 'SKU_002',\n      'item_name': 'Black Jeans',\n      'item_category': 'Apparel',\n      'price': 59.99,\n      'quantity': 1\n    }\n  ]\n});\n```\n\n### Full Ecommerce Journey\n\n**1. view_item_list (Product Listing Page)**\n\n```javascript\ngtag('event', 'view_item_list', {\n  'item_list_id': 'category_apparel',\n  'item_list_name': 'Apparel Collection',\n  'items': [\n    {\n      'item_id': 'SKU_001',\n      'item_name': 'Blue T-Shirt',\n      'price': 29.99,\n      'index': 1\n    },\n    {\n      'item_id': 'SKU_002',\n      'item_name': 'Black Jeans',\n      'price': 59.99,\n      'index': 2\n    }\n  ]\n});\n```\n\n**2. select_item (Product Click)**\n\n```javascript\ngtag('event', 'select_item', {\n  'item_list_id': 'category_apparel',\n  'item_list_name': 'Apparel Collection',\n  'items': [\n    {\n      'item_id': 'SKU_001',\n      'item_name': 'Blue T-Shirt',\n      'price': 29.99\n    }\n  ]\n});\n```\n\n**3. view_item (Product Detail Page)**\n\n```javascript\ngtag('event', 'view_item', {\n  'currency': 'USD',\n  'value': 29.99,\n  'items': [\n    {\n      'item_id': 'SKU_001',\n      'item_name': 'Blue T-Shirt',\n      'item_brand': 'Acme',\n      'item_category': 'Apparel',\n      'item_variant': 'Large',\n      'price': 29.99\n    }\n  ]\n});\n```\n\n**4. add_to_cart**\n\n```javascript\ngtag('event', 'add_to_cart', {\n  'currency': 'USD',\n  'value': 59.98,\n  'items': [\n    {\n      'item_id': 'SKU_001',\n      'item_name': 'Blue T-Shirt',\n      'price': 29.99,\n      'quantity': 2\n    }\n  ]\n});\n```\n\n**5. view_cart**\n\n```javascript\ngtag('event', 'view_cart', {\n  'currency': 'USD',\n  'value': 119.97,\n  'items': [\n    {\n      'item_id': 'SKU_001',\n      'item_name': 'Blue T-Shirt',\n      'price': 29.99,\n      'quantity': 2\n    },\n    {\n      'item_id': 'SKU_002',\n      'item_name': 'Black Jeans',\n      'price': 59.99,\n      'quantity': 1\n    }\n  ]\n});\n```\n\n**6. begin_checkout**\n\n```javascript\ngtag('event', 'begin_checkout', {\n  'currency': 'USD',\n  'value': 119.97,\n  'coupon': 'SUMMER20',\n  'items': [\n    {\n      'item_id': 'SKU_001',\n      'item_name': 'Blue T-Shirt',\n      'price': 29.99,\n      'quantity': 2\n    },\n    {\n      'item_id': 'SKU_002',\n      'item_name': 'Black Jeans',\n      'price': 59.99,\n      'quantity': 1\n    }\n  ]\n});\n```\n\n**7. add_shipping_info**\n\n```javascript\ngtag('event', 'add_shipping_info', {\n  'currency': 'USD',\n  'value': 119.97,\n  'shipping_tier': 'Express',\n  'items': [/* same items array */]\n});\n```\n\n**8. add_payment_info**\n\n```javascript\ngtag('event', 'add_payment_info', {\n  'currency': 'USD',\n  'value': 119.97,\n  'payment_type': 'Credit Card',\n  'items': [/* same items array */]\n});\n```\n\n**9. purchase** (see complete example above)\n\n## Engagement Events Implementation\n\n### login Event\n\n```javascript\ngtag('event', 'login', {\n  'method': 'Google'  // or 'Email', 'Facebook', etc.\n});\n```\n\n### sign_up Event\n\n```javascript\ngtag('event', 'sign_up', {\n  'method': 'Email'\n});\n```\n\n### search Event\n\n```javascript\ngtag('event', 'search', {\n  'search_term': 'blue t-shirt'\n});\n```\n\n### share Event\n\n```javascript\ngtag('event', 'share', {\n  'method': 'Twitter',\n  'content_type': 'article',\n  'item_id': 'ARTICLE_123'\n});\n```\n\n### generate_lead Event\n\n```javascript\ngtag('event', 'generate_lead', {\n  'currency': 'USD',\n  'value': 50.00  // Estimated lead value\n});\n```\n\n## GTM Implementation\n\n### Data Layer Push\n\n```javascript\ndataLayer.push({\n  'event': 'purchase',\n  'ecommerce': {\n    'transaction_id': 'TXN_12345',\n    'value': 119.97,\n    'currency': 'USD',\n    'tax': 8.40,\n    'shipping': 9.99,\n    'items': [\n      {\n        'item_id': 'SKU_001',\n        'item_name': 'Blue T-Shirt',\n        'price': 29.99,\n        'quantity': 2\n      }\n    ]\n  }\n});\n```\n\n### GTM Configuration\n\n1. Create Data Layer Variables for ecommerce parameters\n2. Create Custom Event trigger for 'purchase'\n3. Create GA4 Event tag:\n   - Event Name: purchase\n   - Map ecommerce parameters to event parameters\n4. Test in Preview mode\n5. Publish\n\n## Critical Implementation Rules\n\n### Transaction ID\n\n- **Must be unique** for each purchase\n- Same transaction_id = duplicate (deduped by GA4)\n- Use order number or generate unique ID\n\n### Currency\n\n- **Always include** with monetary events\n- Use ISO 4217 codes (USD, EUR, GBP, AUD)\n- Same currency for value and item prices\n\n### Items Array\n\n- Include at least item_id OR item_name (required)\n- Keep items array consistent across events\n- Maximum 27 items per event\n\n### Value Calculation\n\n- Should match sum of (price * quantity) for all items\n- Include discounts in calculation\n- Exclude tax and shipping from item values\n\n## Testing Recommended Events\n\n### DebugView Validation\n\n1. Enable debug mode\n2. Complete user journey\n3. For each event, verify:\n   - Event name matches exactly\n   - All required parameters present\n   - Parameter values correct\n   - Items array structure valid\n\n### Ecommerce Validation Checklist\n\n- [ ] view_item fires on product pages\n- [ ] add_to_cart fires when adding items\n- [ ] begin_checkout fires at checkout start\n- [ ] purchase fires once per transaction\n- [ ] transaction_id is unique\n- [ ] Value matches cart total\n- [ ] Currency included on all monetary events\n- [ ] Items array populated correctly\n\n## Common Issues\n\n### Duplicate Purchases\n\n**Cause:** Same transaction_id sent multiple times\n**Solution:** Ensure unique ID, implement prevention logic\n\n### Missing Revenue\n\n**Cause:** Currency parameter missing\n**Solution:** Always include currency with value\n\n### Empty Items Array\n\n**Cause:** Data not available when event fires\n**Solution:** Validate items array before sending\n\n### Wrong Event Names\n\n**Cause:** Using custom names instead of recommended\n**Solution:** Use exact recommended event names (case-sensitive)\n\n## Key Events (Conversions)\n\nMark recommended events as key events for conversion tracking:\n\n1. Admin -> Events\n2. Find event (e.g., purchase)\n3. Toggle \"Mark as key event\"\n\nEvents marked as key events:\n- Appear in conversion reports\n- Can be imported to Google Ads\n- Used for optimisation\n",
        "plugins/marketing/skills/ga4/references/reporting.md": "# GA4 Reporting and Data Analysis\n\nComprehensive guide to GA4 standard reports, Explorations, and data analysis techniques.\n\n## Overview\n\nGA4 provides standard reports for common metrics and Explorations for advanced analysis. Standard reports offer quick insights while Explorations enable custom, flexible analysis with drag-and-drop interfaces.\n\n## Standard Reports\n\n### Accessing Reports\n\n**Path:** Reports (left navigation)\n\n### Report Categories\n\n#### Realtime Reports\n\n**Path:** Reports -> Realtime\n\n| Data | Description |\n|------|-------------|\n| Active users | Users in last 30 minutes |\n| Views by page | Current page activity |\n| Events by name | Real-time event counts |\n| Conversions | Recent conversions |\n| User locations | Geographic map |\n\n#### Life Cycle Reports\n\n**Acquisition Reports:**\n- User acquisition (first touch)\n- Traffic acquisition (session level)\n- Channels, sources, campaigns\n\n**Engagement Reports:**\n- Events (all event activity)\n- Conversions (key events)\n- Pages and screens\n- Landing pages\n\n**Monetisation Reports:**\n- E-commerce purchases\n- Publisher ads (AdSense)\n- In-app purchases\n- Revenue metrics\n\n**Retention Reports:**\n- User engagement over time\n- Cohort analysis\n- User retention\n- Lifetime value\n\n#### User Reports\n\n**Demographics:**\n- Age, gender (requires Google Signals)\n- Country, city, language\n\n**Tech:**\n- Browser, device, OS\n- Screen resolution\n- App version\n\n### Customising Standard Reports\n\n**Add Secondary Dimension:**\n1. Click \"+\" next to primary dimension\n2. Select additional dimension\n3. View combined breakdown\n\n**Apply Filters:**\n1. Click \"Add filter +\"\n2. Choose dimension\n3. Set condition (equals, contains, etc.)\n4. Apply\n\n**Change Date Range:**\n1. Top-right date selector\n2. Choose preset or custom range\n3. Enable comparison if needed\n\n## Explorations\n\n### Accessing Explorations\n\n**Path:** Explore (left navigation)\n\n### Exploration Types\n\n#### 1. Free Form Exploration\n\n**Purpose:** Flexible custom reports with drag-and-drop interface\n\n**Components:**\n- Dimensions: User attributes\n- Metrics: Quantitative measures\n- Rows: Primary dimension\n- Columns: Secondary dimension\n- Values: Metrics to display\n- Filters: Limit data shown\n- Segments: Compare user groups\n\n**Use Cases:**\n- Custom traffic source reports\n- Product performance analysis\n- Custom conversion reports\n\n#### 2. Funnel Exploration\n\n**Purpose:** Analyse conversion funnels and drop-off points\n\n**Setup:**\n1. Add steps (events or page views)\n2. Configure funnel type:\n   - Closed: Must complete in order\n   - Open: Can enter at any step\n3. Analyse results\n\n**Example Steps:**\n1. page_view (homepage)\n2. view_item\n3. add_to_cart\n4. begin_checkout\n5. purchase\n\n**Insights:**\n- Completion rate per step\n- Drop-off percentage\n- Time between steps\n\n#### 3. Path Exploration\n\n**Purpose:** Visualise user journeys and navigation paths\n\n**Types:**\n- Starting point: Paths from specific event/page\n- Ending point: Paths to specific event/page\n\n**Visualisation:**\n- Node size = traffic volume\n- Arrows = path direction\n- Numbers = user count\n\n#### 4. Segment Overlap\n\n**Purpose:** Compare and analyse audience overlap\n\n**Setup:**\n1. Add 2-3 segments\n2. View Venn diagram\n3. Analyse:\n   - Unique users per segment\n   - Overlapping users\n   - Total reach\n\n#### 5. Cohort Exploration\n\n**Purpose:** Analyse user retention over time\n\n**Setup:**\n1. Cohort: User grouping (acquisition date)\n2. Granularity: Daily, weekly, monthly\n3. Metrics: Sessions, revenue, events\n4. Time period: Days/weeks since cohort start\n\n**Insights:**\n- Week 1 retention rates\n- Revenue per cohort\n- Long-term engagement patterns\n\n#### 6. User Exploration\n\n**Purpose:** Analyse individual user behaviour\n\n**Setup:**\n1. Add user identifier\n2. View user details:\n   - All events\n   - Event parameters\n   - Device, location\n   - Session timeline\n\n**Use Cases:**\n- Debug specific issues\n- Understand power users\n- Investigate anomalies\n\n#### 7. User Lifetime\n\n**Purpose:** Analyse user value over lifetime\n\n**Dimensions:** Acquisition source, campaign\n**Metrics:** Lifetime value, revenue, sessions\n**Time period:** Lifetime duration\n\n## Creating Segments\n\n### Segment Types\n\n| Type | Description |\n|------|-------------|\n| User segment | Users matching conditions |\n| Session segment | Sessions matching conditions |\n| Event segment | Events matching conditions |\n\n### Building Segments\n\n**Path:** Explorations -> Create new segment\n\n**Conditions:**\n- Demographics (country, age, gender)\n- Technology (device, browser)\n- Acquisition (source, medium, campaign)\n- Behaviour (events, conversions)\n- E-commerce (purchasers, revenue)\n- Custom dimensions/metrics\n\n### Segment Examples\n\n**High-Value Purchasers:**\n```\nUsers where:\n- totalRevenue > 500\n- purchaseCount >= 3\n```\n\n**Mobile Converters:**\n```\nSessions where:\n- deviceCategory = mobile\n- keyEvent: purchase\n```\n\n**Engaged Users:**\n```\nUsers where:\n- sessionCount >= 5\n- avgEngagementTime > 120 seconds\n```\n\n## Comparisons\n\n### Creating Comparisons\n\n1. In report, click \"Add comparison\"\n2. Choose dimension or segment\n3. Select values to compare\n\n### Example Comparisons\n\n- Desktop vs Mobile\n- UK vs US traffic\n- This month vs last month\n- New vs returning users\n\n### Visualisation\n\n- Side-by-side metrics\n- Colour-coded lines in charts\n- Percentage differences\n\n## Key Metrics Reference\n\n### User Metrics\n\n| Metric | Description |\n|--------|-------------|\n| Total Users | All users in period |\n| New Users | First-time visitors |\n| Active Users | Users with engagement |\n| DAU/WAU/MAU | Daily/Weekly/Monthly active |\n\n### Engagement Metrics\n\n| Metric | Description |\n|--------|-------------|\n| Sessions | Session count |\n| Average Engagement Time | Time actively engaged |\n| Engagement Rate | % of engaged sessions |\n| Events per Session | Average event count |\n\n### Conversion Metrics\n\n| Metric | Description |\n|--------|-------------|\n| Conversions | Key event count |\n| Conversion Rate | % with conversion |\n| Total Revenue | Sum of revenue |\n| ARPPU | Revenue per paying user |\n\n### E-commerce Metrics\n\n| Metric | Description |\n|--------|-------------|\n| Purchase Revenue | Revenue from purchases |\n| Transactions | Purchase count |\n| Average Purchase Revenue | Revenue per transaction |\n| Items Viewed/Added/Purchased | Item counts |\n\n## Attribution\n\n### Accessing Attribution\n\n**Path:** Advertising -> Attribution\n\n### Attribution Models\n\n| Model | Description |\n|-------|-------------|\n| Data-driven | ML-based credit assignment |\n| Last click | Full credit to last touch |\n| First click | Full credit to first touch |\n| Linear | Equal credit to all |\n| Time decay | More credit to recent |\n| Position-based | More to first and last |\n\n### Comparing Models\n\n- View conversions by channel per model\n- Understand attribution impact\n- Optimise marketing spend\n\n## Analysis Best Practices\n\n### Finding Insights\n\n1. **Start broad:** Review standard reports\n2. **Identify anomalies:** Look for unusual patterns\n3. **Drill down:** Add dimensions, apply filters\n4. **Use Explorations:** Build custom analyses\n5. **Export and share:** Download or share links\n\n### Common Analyses\n\n**Conversion Funnel:**\n- Identify drop-off points\n- Optimise low-performing steps\n- A/B test improvements\n\n**Traffic Source Performance:**\n- Which sources drive conversions?\n- Cost per acquisition by channel\n- ROI by campaign\n\n**User Retention:**\n- Return rate after first visit\n- Active duration\n- Best retention sources\n\n**Product Performance:**\n- Most viewed products\n- Conversion rate by product\n- Revenue by category\n\n## Exporting Data\n\n### Export Options\n\n**From Reports:**\n- Download as CSV/PDF\n- Share report link\n\n**From Explorations:**\n- Export to Google Sheets\n- Download as CSV/PDF\n\n**To BigQuery:**\n- Admin -> BigQuery Links\n- Raw event data export\n\n## Report Limits\n\n| Limit | Value |\n|-------|-------|\n| Explorations per property | 200 |\n| Shared Explorations per user | 50 |\n| Segments per Exploration | 100 |\n| Rows per Exploration | 1,000,000 |\n\n## Quick Reference\n\n### Exploration Types\n\n- Free Form: Custom flexible reports\n- Funnel: Conversion path analysis\n- Path: User journey visualisation\n- Segment Overlap: Audience comparison\n- Cohort: Retention analysis\n- User: Individual behaviour\n- User Lifetime: LTV analysis\n\n### Segment Scopes\n\n- User: Users matching conditions\n- Session: Sessions matching conditions\n- Event: Events matching conditions\n",
        "plugins/marketing/skills/ga4/references/setup.md": "# GA4 Property Setup and Installation\n\nComplete guide for creating Google Analytics 4 accounts, properties, data streams, and installing tracking code.\n\n## Overview\n\nSetting up Google Analytics 4 requires creating an account hierarchy, configuring data streams, and installing tracking code. This reference provides step-by-step guidance for all GA4 setup methods from initial property creation through implementation verification.\n\n## Account Hierarchy\n\nGA4 uses a three-level hierarchy:\n\n```\nGoogle Account (Login credentials)\nâ””â”€â”€ Analytics Account (Container for properties)\n    â””â”€â”€ GA4 Property (Analytics container for website/app)\n        â””â”€â”€ Data Stream (Platform-specific: Web, iOS, Android)\n            â””â”€â”€ Events and Parameters\n```\n\n### Level Definitions\n\n| Level | Purpose | Limit |\n|-------|---------|-------|\n| Analytics Account | Organisation container | 2,000 properties |\n| GA4 Property | Website/app container | 1,000 data streams |\n| Data Stream | Platform-specific tracking | Unique Measurement ID |\n\n## Creating a GA4 Property\n\n### Step 1: Navigate to Analytics\n\n1. Go to analytics.google.com\n2. Sign in with Google account\n3. Click Admin (bottom-left)\n4. Click \"Create\" -> \"Property\"\n\n### Step 2: Configure Property Details\n\n**Property Name:**\n- Use descriptive name: \"Main Website\", \"E-commerce Site\"\n- Include environment if needed: \"Production Website\"\n\n**Reporting Time Zone:**\n- Select primary business timezone\n- Affects day boundaries in reports\n- Cannot be changed retroactively\n\n**Currency:**\n- Select reporting currency (USD, EUR, GBP, AUD)\n- All monetary values converted to this currency\n\n### Step 3: Business Information\n\n**Industry Category:**\n- Select relevant industry\n- Influences default reports and benchmarks\n\n**Business Objectives:**\n- Get baseline reports (recommended for beginners)\n- Examine user behaviour\n- Measure customer actions\n- Get insights on customers\n- Improve marketing ROI\n\n### Step 4: Accept Terms\n\n- Google Analytics Terms of Service\n- Data Processing Amendment (GDPR)\n- Click \"Create\"\n\n## Data Stream Configuration\n\n### Web Data Stream\n\n**Creating the Stream:**\n\n1. Admin -> Data Streams\n2. Click \"Add Stream\"\n3. Select \"Web\"\n4. Enter website URL (example.com, not https://www.example.com)\n5. Enter stream name (\"Main Website\")\n6. Enable Enhanced Measurement (recommended)\n7. Click \"Create stream\"\n\n**Enhanced Measurement Events:**\n\n| Event | Trigger | Toggle |\n|-------|---------|--------|\n| page_view | Page loads | Always on |\n| scroll | 90% vertical scroll | Optional |\n| click | Outbound link clicks | Optional |\n| view_search_results | Site search | Optional |\n| video_start/progress/complete | YouTube engagement | Optional |\n| file_download | PDF, DOC, ZIP clicks | Optional |\n| form_start/form_submit | Form interactions | Optional |\n\n**Measurement ID:**\n- Format: G-XXXXXXXXXX\n- Location: Data Streams -> Click stream -> Top section\n- Copy for installation\n\n### iOS Data Stream\n\n**Prerequisites:**\n- Apple Developer account\n- iOS app in development/published\n- Firebase project (auto-created)\n\n**Setup:**\n\n1. Admin -> Data Streams -> Add Stream -> iOS app\n2. Enter Bundle ID (com.company.appname)\n3. Enter App Store ID (optional)\n4. Click \"Register app\"\n5. Download GoogleService-Info.plist\n6. Add to Xcode project\n\n**Firebase SDK Installation:**\n\n```ruby\n# Podfile\npod 'Firebase/Analytics'\n```\n\n```swift\n// AppDelegate.swift\nimport Firebase\n\nfunc application(_ application: UIApplication,\n                didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -> Bool {\n    FirebaseApp.configure()\n    return true\n}\n```\n\n### Android Data Stream\n\n**Prerequisites:**\n- Android Studio\n- Android app package name\n\n**Setup:**\n\n1. Admin -> Data Streams -> Add Stream -> Android app\n2. Enter package name (com.company.appname)\n3. Click \"Register app\"\n4. Download google-services.json\n5. Place in app/ directory\n\n**Firebase SDK Installation:**\n\n```gradle\n// Project build.gradle\nbuildscript {\n    dependencies {\n        classpath 'com.google.gms:google-services:4.3.15'\n    }\n}\n\n// App build.gradle\nplugins {\n    id 'com.google.gms.google-services'\n}\n\ndependencies {\n    implementation platform('com.google.firebase:firebase-bom:32.0.0')\n    implementation 'com.google.firebase:firebase-analytics'\n}\n```\n\n## Installation Methods\n\n### Method 1: CMS Plugin (Easiest)\n\n**WordPress - Site Kit by Google:**\n\n1. Plugins -> Add New -> Search \"Site Kit by Google\"\n2. Install and Activate\n3. Site Kit -> Start Setup\n4. Connect Google account\n5. Select or create GA4 property\n6. Activate Analytics module\n\n**Shopify:**\n\n1. Settings -> Customer events\n2. Add custom pixel -> Google Analytics 4\n3. Enter Measurement ID\n4. Save\n\n**Wix:**\n\n1. Settings -> Marketing & SEO -> Marketing Integrations\n2. Google Analytics -> Connect\n3. Sign in and select GA4 property\n\n### Method 2: gtag.js Direct\n\nPlace in `<head>` section before other scripts:\n\n```html\n<!-- Google tag (gtag.js) -->\n<script async src=\"https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX\"></script>\n<script>\n  window.dataLayer = window.dataLayer || [];\n  function gtag(){dataLayer.push(arguments);}\n  gtag('js', new Date());\n  gtag('config', 'G-XXXXXXXXXX');\n</script>\n```\n\n### Method 3: Google Tag Manager (Recommended)\n\n**Step 1: Install GTM Container**\n\nHead snippet (after `<head>`):\n```html\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-XXXXXXX');</script>\n<!-- End Google Tag Manager -->\n```\n\nBody snippet (after `<body>`):\n```html\n<!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-XXXXXXX\"\nheight=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n```\n\n**Step 2: Create GA4 Configuration Tag**\n\n1. GTM -> Tags -> New\n2. Tag Type: Google Tag\n3. Tag ID: G-XXXXXXXXXX\n4. Trigger: Initialisation - All Pages\n5. Save and Publish\n\n## Installation Verification\n\n### Immediate Verification (0-5 minutes)\n\n1. **Enable Debug Mode:**\n   - Install Google Analytics Debugger Chrome extension\n   - Enable extension (icon turns blue)\n   - Visit website\n\n2. **Check DebugView:**\n   - GA4 -> Admin -> DebugView\n   - Select device from dropdown\n   - Confirm events appearing\n\n3. **Expected Events:**\n   - session_start\n   - first_visit (new users)\n   - page_view\n\n### Realtime Verification (5-30 minutes)\n\n1. Reports -> Realtime\n2. Confirm active users showing\n3. Verify events by name\n4. Check user location on map\n\n### Standard Reports (24-48 hours)\n\nStandard reports have processing delay:\n- Reports -> Acquisition -> User acquisition\n- Reports -> Engagement -> Events\n- Reports -> Engagement -> Pages and screens\n\n## Post-Setup Configuration\n\n### Data Retention\n\n**Location:** Admin -> Data Settings -> Data Retention\n\n| Option | Use Case |\n|--------|----------|\n| 2 months | Privacy-focused, GDPR |\n| 14 months | Year-over-year analysis |\n\n**Reset on New Activity:** ON (recommended) - timer resets when user returns\n\n### Internal Traffic Filter\n\n**Location:** Admin -> Data Settings -> Data Filters\n\n1. Create Filter -> Internal Traffic\n2. Enter office IP addresses\n3. Set to \"Testing\" first\n4. Verify in DebugView (traffic_type = internal)\n5. Set to \"Active\"\n\n### Google Signals\n\n**Location:** Admin -> Data Settings -> Data Collection\n\n- Enables demographics (age, gender)\n- Enables cross-device tracking\n- Requires user consent for personalised ads\n\n## Common Issues\n\n### No Data Appearing\n\n- Verify Measurement ID is correct\n- Check code placement in `<head>`\n- Disable ad blockers for testing\n- Wait 24-48 hours for standard reports\n\n### Data Only in DebugView\n\n- Remove debug_mode: true from production\n- Disable Google Analytics Debugger extension\n- Check for internal traffic filters\n\n### Duplicate Events\n\n- Remove duplicate tracking implementations\n- Choose one method: gtag.js OR GTM OR plugin\n- Check for multiple Measurement IDs\n\n### Wrong Timezone\n\n- Cannot change retroactively\n- Affects only future data\n- Consider creating new property if critical\n\n## Next Steps\n\nAfter completing setup:\n\n1. Configure Enhanced Measurement events\n2. Set up internal traffic filters\n3. Create first custom events\n4. Register custom dimensions\n5. Link Google Ads (if applicable)\n6. Set up BigQuery export (for advanced analysis)\n",
        "plugins/marketing/skills/ga4/references/user-tracking.md": "# GA4 User ID and Cross-Device Tracking\n\nComplete guide to User ID implementation, user properties, and cross-device tracking in GA4.\n\n## Overview\n\nUser ID enables cross-device tracking for authenticated users. User properties allow tracking custom user attributes across all events. Together, they provide a unified view of user behaviour across devices and sessions.\n\n## User ID Implementation\n\n### What is User ID\n\n- Persistent identifier for authenticated users\n- Enables cross-device tracking\n- Requires explicit user authentication\n- Must not contain PII (hash if needed)\n- Set when user logs in, cleared on logout\n\n### Implementation Methods\n\n#### Method 1: gtag.js\n\n**On Login:**\n```javascript\n// Set User ID when user logs in\ngtag('config', 'G-XXXXXXXXXX', {\n  'user_id': 'USER_12345'\n});\n\n// Or use gtag('set')\ngtag('set', 'user_id', 'USER_12345');\n```\n\n**On Logout:**\n```javascript\n// Clear User ID - MUST use null, never empty string\ngtag('set', 'user_id', null);\n```\n\n#### Method 2: GTM Data Layer\n\n**Push to Data Layer:**\n```javascript\n// On login\ndataLayer.push({\n  'user_id': 'USER_12345'\n});\n\n// On logout\ndataLayer.push({\n  'user_id': null\n});\n```\n\n**GTM Configuration:**\n1. Create Data Layer Variable: `user_id`\n2. In GA4 Configuration tag, add parameter:\n   - Parameter: `user_id`\n   - Value: `{{DL - User ID}}`\n\n#### Method 3: Measurement Protocol\n\n```json\n{\n  \"client_id\": \"client_123\",\n  \"user_id\": \"USER_12345\",\n  \"events\": [\n    {\n      \"name\": \"login\",\n      \"params\": {\n        \"method\": \"email\"\n      }\n    }\n  ]\n}\n```\n\n### User ID Best Practices\n\n| Do | Don't |\n|----|-------|\n| Use internal user IDs | Use email addresses |\n| Hash sensitive IDs | Use phone numbers |\n| Set on login | Use PII directly |\n| Clear on logout | Use empty string to clear |\n| Document ID format | Expose ID format publicly |\n\n### User ID Format Examples\n\n**Good:**\n- `USER_12345` (internal ID)\n- `abc123def456` (hashed value)\n- `u_a1b2c3d4` (prefixed ID)\n\n**Bad:**\n- `john@example.com` (email - PII)\n- `+1-555-123-4567` (phone - PII)\n- `John Smith` (name - PII)\n\n## Reporting Identity\n\nConfigure how GA4 identifies users across sessions.\n\n### Path\n\nAdmin -> Data Settings -> Reporting Identity\n\n### Options\n\n| Option | Description | Best For |\n|--------|-------------|----------|\n| Blended | User ID + Device ID + Google Signals | Most comprehensive |\n| Observed | User ID + Device ID only | More privacy-focused |\n| Device-based | Device ID only | Most restrictive |\n\n### Blended (Recommended)\n\n- Uses User ID when available\n- Falls back to Device ID + Google Signals\n- Most complete user view\n- Enables cross-device insights\n\n### Observed\n\n- Uses User ID and Device ID only\n- No Google Signals data\n- More privacy-focused\n- Fewer users identified\n\n### Device-based\n\n- Uses only client_id (device)\n- No cross-device tracking\n- Maximum privacy\n- Limited user insights\n\n## User Properties\n\n### What are User Properties\n\n- Custom attributes set at user level\n- Persist across all events from that user\n- Different from event parameters\n- Must be registered as custom dimensions to report\n\n### Limits\n\n| Limit | Value |\n|-------|-------|\n| User properties per property | 25 |\n| Property name length | 24 characters |\n| Property value length | 36 characters |\n\n### Setting User Properties\n\n**gtag.js:**\n```javascript\ngtag('set', 'user_properties', {\n  'user_tier': 'premium',\n  'account_age_days': 365,\n  'preferred_category': 'electronics'\n});\n```\n\n**GTM Data Layer:**\n```javascript\ndataLayer.push({\n  'user_properties': {\n    'user_tier': 'premium',\n    'account_age_days': 365\n  }\n});\n```\n\n**Measurement Protocol:**\n```json\n{\n  \"client_id\": \"client_123\",\n  \"user_properties\": {\n    \"user_tier\": {\n      \"value\": \"premium\"\n    },\n    \"account_age_days\": {\n      \"value\": 365\n    }\n  },\n  \"events\": [...]\n}\n```\n\n### Common User Properties\n\n| Property | Values | Use Case |\n|----------|--------|----------|\n| user_tier | free, premium, enterprise | Segment by subscription |\n| signup_date | YYYY-MM-DD | Cohort analysis |\n| subscription_status | active, trial, cancelled | Revenue analysis |\n| customer_ltv | Numeric bucket | Value segmentation |\n| industry | Technology, Finance, etc. | B2B analysis |\n| company_size | 1-10, 11-50, 51-200, etc. | Enterprise targeting |\n| interests | Category string | Personalisation |\n\n### PII Considerations\n\n**Avoid:**\n- email\n- name\n- phone_number\n- address\n- credit_card\n\n**Use Instead:**\n- email_domain\n- first_name_initial\n- user_segment\n- location_region\n\n## Cross-Device Tracking\n\n### How It Works\n\n1. User visits on mobile (logged in) -> user_id set\n2. User visits on desktop (logged in) -> same user_id\n3. GA4 stitches sessions together\n4. Reports show unified user journey\n\n### Requirements\n\n- User ID implemented and set on login\n- Google Signals enabled (for Blended identity)\n- Users signed into Google accounts\n- User opt-in to personalisation\n\n### Enabling Google Signals\n\n1. Admin -> Data Settings -> Data Collection\n2. Enable Google Signals\n3. Accept terms\n4. Wait 24 hours for data\n\n### Cross-Domain Tracking\n\nFor User ID across domains:\n\n**gtag.js Configuration:**\n```javascript\ngtag('config', 'G-XXXXXXXXXX', {\n  'linker': {\n    'domains': ['example.com', 'shop.example.com', 'blog.example.com']\n  }\n});\n```\n\n**What This Does:**\n- Passes client_id between domains via URL parameter\n- Preserves user_id if set\n- Maintains session continuity\n- Uses `_gl` URL parameter\n\n**GTM Setup:**\n1. In GA4 Configuration tag\n2. Expand Configuration Settings\n3. Add Fields to Set:\n   - Field Name: linker\n   - Value: `{\"domains\": [\"example.com\", \"shop.example.com\"]}`\n\n### Testing Cross-Domain\n\n1. Visit domain1.com\n2. Click link to domain2.com\n3. Verify `_gl` parameter in URL\n4. Check DebugView shows same user\n5. Confirm session continues\n\n## User-Scoped Custom Dimensions\n\nRegister user properties for reporting:\n\n### Registration\n\n1. Admin -> Data Display -> Custom Definitions\n2. Click \"Create custom dimension\"\n3. Configure:\n   - Dimension name: \"User Tier\"\n   - Scope: User\n   - User property: `user_tier`\n4. Save\n\n### Using in Reports\n\n- Add as dimension in Explorations\n- Filter/segment by dimension\n- Analyse user cohorts\n- Compare user segments\n\n## User Data Deletion\n\n### GDPR/CCPA Compliance\n\n**Path:** Admin -> Data Settings -> Data Deletion Requests\n\n### Process\n\n1. Click \"Create deletion request\"\n2. Select parameter: User ID\n3. Enter User ID value to delete\n4. Choose scope: All data or date range\n5. Submit request\n\n### Processing\n\n- Takes up to 72 hours\n- Deletes ALL events for that User ID\n- Cannot be undone\n- Confirmation email sent\n\n### Use Cases\n\n- GDPR right to erasure requests\n- CCPA deletion requests\n- User account deletion\n- Data cleanup\n\n## Testing User ID\n\n### Verification Workflow\n\n1. **Implement User ID**\n2. **Enable DebugView**\n3. **Test Login:**\n   - Before login: Events have only client_id\n   - After login: Verify user_id in event details\n4. **Test Logout:**\n   - After logout: Verify user_id cleared/null\n5. **Test Cross-Device:**\n   - Login on Device 1\n   - Login on Device 2 with same account\n   - Verify same user_id\n\n### DebugView Verification\n\n1. Open Admin -> DebugView\n2. Click any event\n3. Expand event details\n4. Check \"User ID\" field populated\n\n### Reports Verification\n\n- Wait 24-48 hours\n- Check user count vs sessions\n- Lower user count = User ID working (same user, multiple sessions)\n\n## Common Issues\n\n### User ID Not Appearing\n\n**Causes:**\n- Set after gtag config\n- Cleared immediately\n- Wrong parameter name\n\n**Solutions:**\n1. Set user_id in config call\n2. Verify login flow\n3. Check parameter is 'user_id' exactly\n\n### Cross-Device Not Working\n\n**Causes:**\n- Different User IDs\n- User ID not set on all devices\n- Reporting Identity not configured\n\n**Solutions:**\n1. Verify same User ID across devices\n2. Ensure login sets User ID\n3. Check Reporting Identity = Blended\n\n### User Properties Not in Reports\n\n**Cause:** Not registered as custom dimensions\n\n**Solution:**\n1. Register as user-scoped custom dimension\n2. Wait 24-48 hours\n3. Use in Explorations\n\n## Quick Reference\n\n### Set User ID\n\n```javascript\ngtag('config', 'G-XXXXXXXXXX', {\n  'user_id': 'USER_123'\n});\n```\n\n### Set User Properties\n\n```javascript\ngtag('set', 'user_properties', {\n  'user_tier': 'premium'\n});\n```\n\n### Clear User ID\n\n```javascript\ngtag('set', 'user_id', null);\n```\n\n### Limits\n\n- 25 user properties per property\n- User property name: 24 characters max\n- User property value: 36 characters max\n- User ID: Must not contain PII\n",
        "plugins/marketing/skills/google-ads-scripts/SKILL.md": "---\nname: google-ads-scripts\ndescription: Expert guidance for Google Ads Script development including AdsApp API, campaign management, ad groups, keywords, bidding strategies, performance reporting, budget management, automated rules, and optimization patterns. Use when automating Google Ads campaigns, managing keywords and bids, creating performance reports, implementing automated rules, optimizing ad spend, working with campaign budgets, monitoring quality scores, tracking conversions, pausing low-performing keywords, adjusting bids based on ROAS, or building Google Ads automation scripts. Covers campaign operations, keyword targeting, bid optimization, conversion tracking, error handling, and JavaScript-based automation in Google Ads editor.\n---\n\n# Google Ads Scripts\n\n## Overview\n\nThis skill provides comprehensive guidance for developing Google Ads Scripts using the AdsApp API. Google Ads Scripts enable automation of campaign management, bid optimization, performance reporting, and bulk operations through JavaScript code that runs directly in the Google Ads editor.\n\n## When to Use This Skill\n\nInvoke this skill when:\n\n- Automating Google Ads campaign management operations\n- Managing keywords and adjusting bids programmatically\n- Creating performance reports and dashboards\n- Implementing automated rules for campaign optimization\n- Optimizing ad spend based on ROAS or CPA targets\n- Working with campaign budgets and spend limits\n- Monitoring quality scores and pausing low-performers\n- Tracking conversions and adjusting strategies\n- Building bulk operations for large-scale account management\n- Implementing time-based or performance-based automation\n- Debugging Google Ads Script code or API issues\n\n## Core Capabilities\n\n### 1. Campaign Operations\n\nManage campaigns programmatically including creation, modification, status changes, and bulk updates. The AdsApp.campaigns() selector provides filtering and iteration patterns.\n\n**Common operations:**\n- Get campaigns with conditions (status, budget, name patterns)\n- Modify campaign properties (name, budget, dates, status)\n- Apply labels for organization\n- Pause/enable campaigns based on performance criteria\n\n### 2. Keyword & Bid Management\n\nAutomate keyword targeting and bid adjustments based on performance metrics.\n\n**Common operations:**\n- Get keywords with quality score filtering\n- Adjust max CPC bids based on ROAS/CPA targets\n- Add/remove negative keywords\n- Monitor keyword-level conversions\n- Implement bid optimization algorithms\n\n### 3. Performance Reporting\n\nGenerate custom reports using campaign, ad group, keyword, and ad statistics.\n\n**Common operations:**\n- Retrieve metrics for custom date ranges\n- Calculate derived metrics (CTR, CPC, conversion rate)\n- Export data to Google Sheets\n- Create automated dashboards\n- Monitor KPIs and trigger alerts\n\n### 4. Budget Management\n\nControl spending and allocate budgets across campaigns.\n\n**Common operations:**\n- Get/set daily campaign budgets\n- Monitor spend against thresholds\n- Pause campaigns when budget limits reached\n- Distribute budgets based on performance\n\n### 5. Automated Rules & Optimization\n\nBuild intelligence into campaign management with automated decision-making.\n\n**Common operations:**\n- Pause low-performing keywords (low QS, high CPC, no conversions)\n- Increase bids for high-performers\n- Adjust budgets based on day-of-week patterns\n- Implement custom bidding strategies\n\n### 6. Error Handling & Resilience\n\nImplement robust error handling to manage API limits, quota issues, and runtime errors.\n\n**Key patterns:**\n- Try-catch blocks for error handling\n- Null checks for optional properties\n- Logging to sheets for audit trails\n- Rate limiting awareness (30-minute execution limit)\n\n## Quick Start Examples\n\n### Example 1: Pause Low-Quality Keywords\n\n```javascript\nfunction pauseLowQualityKeywords() {\n  const keywords = AdsApp.keywords()\n    .withCondition('keyword.status = ENABLED')\n    .withCondition('keyword.quality_info.quality_score < 4')\n    .withCondition('keyword.metrics.cost > 100000000')  // >100 spend\n    .get();\n\n  let count = 0;\n  while (keywords.hasNext()) {\n    const keyword = keywords.next();\n    keyword.pause();\n    count++;\n  }\n\n  Logger.log(`Paused ${count} low-quality keywords`);\n}\n```\n\n### Example 2: Optimize Bids Based on ROAS\n\n```javascript\nfunction optimizeBidsByROAS() {\n  const TARGET_ROAS = 3.0;  // 300%\n\n  const keywords = AdsApp.keywords()\n    .withCondition('keyword.status = ENABLED')\n    .withCondition('keyword.metrics.conversions > 5')  // Min conversions\n    .get();\n\n  while (keywords.hasNext()) {\n    const keyword = keywords.next();\n    const stats = keyword.getStatsFor('LAST_30_DAYS');\n    const roas = stats.getReturnOnAdSpend();\n    const currentBid = keyword.getMaxCpc();\n\n    if (roas > TARGET_ROAS) {\n      // Increase bid by 10%\n      keyword.setMaxCpc(Math.floor(currentBid * 1.1));\n    } else if (roas < TARGET_ROAS * 0.7) {\n      // Decrease bid by 5%\n      keyword.setMaxCpc(Math.floor(currentBid * 0.95));\n    }\n  }\n}\n```\n\n### Example 3: Export Campaign Performance to Sheets\n\n```javascript\nfunction exportCampaignPerformance() {\n  const campaigns = AdsApp.campaigns()\n    .withCondition('campaign.status = ENABLED')\n    .orderBy('campaign.metrics.cost DESC')\n    .get();\n\n  const report = [['Campaign', 'Clicks', 'Cost', 'Conversions', 'CPC', 'ROAS']];\n\n  while (campaigns.hasNext()) {\n    const campaign = campaigns.next();\n    const stats = campaign.getStatsFor('LAST_30_DAYS');\n\n    report.push([\n      campaign.getName(),\n      stats.getClicks(),\n      stats.getCost() / 1000000,  // Convert from micros\n      stats.getConversions(),\n      stats.getAverageCpc() / 1000000,\n      stats.getReturnOnAdSpend()\n    ]);\n  }\n\n  // Write to Google Sheets\n  const ss = SpreadsheetApp.openById('YOUR_SHEET_ID');\n  const sheet = ss.getSheetByName('Campaign Report') || ss.insertSheet('Campaign Report');\n  sheet.clear();\n  sheet.getRange(1, 1, report.length, report[0].length).setValues(report);\n}\n```\n\n## Working with References\n\nFor comprehensive API documentation, code patterns, and detailed examples, see:\n\n- **references/ads-api-reference.md** - Complete AdsApp API reference including all selectors, methods, conditions, statistics, and enterprise patterns\n\nThe reference file contains:\n- Complete API hierarchy and object model\n- All selector patterns and conditions\n- Statistics methods and date ranges\n- Campaign, ad group, keyword, and ad operations\n- Bidding strategy implementation details\n- Performance reporting patterns\n- Budget management techniques\n- Advanced targeting options\n- Error handling patterns\n- Performance optimization strategies\n- Quotas and limits reference\n\n## Best Practices\n\n### 1. Use Batch Operations\n\nAvoid individual API calls in loops. Instead, collect entities and perform batch operations:\n\n```javascript\n// âœ… Good - Batch collection\nconst keywords = AdsApp.keywords()\n  .withCondition('keyword.quality_info.quality_score < 5')\n  .get();\n\nconst toUpdate = [];\nwhile (keywords.hasNext()) {\n  toUpdate.push(keywords.next());\n}\n\ntoUpdate.forEach(keyword => keyword.setMaxCpc(50000));\n```\n\n### 2. Filter with Conditions\n\nUse `.withCondition()` to filter at the API level rather than in JavaScript:\n\n```javascript\n// âœ… Good - API-level filtering\nconst campaigns = AdsApp.campaigns()\n  .withCondition('campaign.status = ENABLED')\n  .withCondition('campaign.budget_information.budget_amount > 100000000')\n  .get();\n```\n\n### 3. Handle Errors Gracefully\n\nAlways wrap operations in try-catch blocks and log errors:\n\n```javascript\nfunction safeOperation() {\n  try {\n    // Operation code\n  } catch (error) {\n    Logger.log('Error: ' + error.message);\n    Logger.log('Stack: ' + error.stack);\n\n    // Optionally email alert\n    MailApp.sendEmail(\n      Session.getEffectiveUser().getEmail(),\n      'Ads Script Error',\n      error.message\n    );\n  }\n}\n```\n\n### 4. Respect Execution Limits\n\nScripts have a 30-minute execution timeout. For large accounts:\n- Limit result sets with `.withLimit()`\n- Process in batches\n- Use early termination when needed\n\n### 5. Convert Micros Correctly\n\nGoogle Ads API uses micros (1/1,000,000) for currency values:\n\n```javascript\nconst costMicros = stats.getCost();\nconst costCurrency = costMicros / 1000000;  // Convert to dollars/local currency\n\nconst bidCurrency = 5.00;  // $5.00\nconst bidMicros = bidCurrency * 1000000;  // 5000000 micros\n```\n\n### 6. Log Operations for Auditing\n\nMaintain audit trails by logging changes to Google Sheets:\n\n```javascript\nfunction logChange(operation, entity, details) {\n  const ss = SpreadsheetApp.openById('LOG_SHEET_ID');\n  const sheet = ss.getSheetByName('Audit Log');\n  sheet.appendRow([\n    new Date(),\n    operation,\n    entity,\n    JSON.stringify(details)\n  ]);\n}\n```\n\n## Integration with Other Skills\n\n- **google-apps-script** - Use for Google Sheets reporting, Gmail notifications, Drive file management, and trigger setup\n- **ga4-measurement-protocol** - Combine with GA4 for tracking script-triggered events\n- **gtm-api** - Coordinate with GTM configurations for holistic tracking\n\n## Common Patterns\n\n### Pattern: Conditional Bid Adjustment\n\n```javascript\nfunction adjustBidsBasedOnDayOfWeek() {\n  const today = new Date().getDay();  // 0 = Sunday, 6 = Saturday\n  const isWeekend = today === 0 || today === 6;\n\n  const campaigns = AdsApp.campaigns()\n    .withCondition('campaign.status = ENABLED')\n    .get();\n\n  while (campaigns.hasNext()) {\n    const campaign = campaigns.next();\n    const budget = campaign.getBudget().getAmount();\n\n    if (isWeekend) {\n      campaign.getBudget().setAmount(budget * 1.2);  // +20% on weekends\n    }\n  }\n}\n```\n\n### Pattern: Quality Score Monitoring\n\n```javascript\nfunction monitorQualityScores() {\n  const threshold = 5;\n\n  const lowQualityKeywords = AdsApp.keywords()\n    .withCondition(`keyword.quality_info.quality_score < ${threshold}`)\n    .withCondition('keyword.status = ENABLED')\n    .orderBy('keyword.metrics.cost DESC')  // Most expensive first\n    .withLimit(100)\n    .get();\n\n  const alerts = [];\n  while (lowQualityKeywords.hasNext()) {\n    const keyword = lowQualityKeywords.next();\n    alerts.push({\n      keyword: keyword.getText(),\n      qualityScore: keyword.getQualityScore(),\n      cost: keyword.getStatsFor('LAST_7_DAYS').getCost() / 1000000\n    });\n  }\n\n  if (alerts.length > 0) {\n    // Send email or log to sheet\n    Logger.log(`${alerts.length} keywords with QS < ${threshold}`);\n  }\n}\n```\n\n## Validation & Testing\n\nUse the validation scripts in `scripts/` for pre-deployment checks:\n\n- **scripts/validators.py** - Validate campaign data, bid values, budget amounts before applying changes\n\n## Troubleshooting\n\n**Common Issues:**\n\n1. **Execution timeout** - Reduce scope with `.withLimit()` or process in batches\n2. **Quota exceeded** - Reduce API call frequency, use cached data\n3. **Type errors** - Remember micros conversion for currency values\n4. **Null values** - Always check for null before accessing properties\n\n**Debug with Logger:**\n\n```javascript\nLogger.log('Debug info: ' + JSON.stringify(data));\n// View logs: View > Logs in script editor\n```\n\n---\n\nThis skill provides production-ready patterns for Google Ads automation. Consult the comprehensive API reference for detailed method signatures and advanced use cases.\n",
        "plugins/marketing/skills/google-ads-scripts/references/ads-api-reference.md": "---\nname: \"Google Ads Script - Mission Critical Reference\"\ndescription: \"Enterprise-grade, offline-accessible comprehensive guide for Google Ads Script development. Covers AdsApp API, campaign management, ad groups, keywords, bidding, performance reporting, targeting options, advanced operations, error handling, and optimization patterns. Designed as the sole authoritative source for mission-critical Google Ads automation when network infrastructure is unavailable.\"\nversion: \"2025-11-ENTERPRISE\"\nlast_updated: \"November 2025\"\nsecurity_classification: \"REFERENCE\"\n---\n\n# GOOGLE ADS SCRIPT ENTERPRISE REFERENCE\n## Mission-Critical Documentation\n\n**Document Version:** 2025-11-ENTERPRISE  \n**Last Updated:** November 10, 2025  \n**API Version:** v22 (Current Stable)  \n**Offline Accessibility:** GUARANTEED  \n**Verification Status:** Official Google Ads Documentation Cross-Referenced  \n\n---\n\n## TABLE OF CONTENTS\n\n1. [Enterprise Skill Overview](#enterprise-skill-overview)\n2. [Core Architecture](#core-architecture)\n3. [AdsApp API Fundamentals](#adsapp-api-fundamentals)\n4. [Campaign Operations](#campaign-operations)\n5. [Ad Group Management](#ad-group-management)\n6. [Keywords & Targeting](#keywords--targeting)\n7. [Ads Management](#ads-management)\n8. [Bidding Strategy](#bidding-strategy)\n9. [Performance Reporting](#performance-reporting)\n10. [Budget Management](#budget-management)\n11. [Advanced Targeting](#advanced-targeting)\n12. [Automated Rules & Alerts](#automated-rules--alerts)\n13. [Error Handling & Debugging](#error-handling--debugging)\n14. [Performance Optimization](#performance-optimization)\n15. [Best Practices](#best-practices)\n\n---\n\n## ENTERPRISE SKILL OVERVIEW\n\n### Activation Criteria\n\nThis skill activates when developers need:\n- Campaign management automation\n- Keyword bid optimization\n- Performance-based campaign adjustments\n- Ad scheduling automation\n- Budget allocation and management\n- Quality score monitoring\n- Conversion tracking setup\n- Report generation and analysis\n- Pause/enable campaigns based on criteria\n- Bulk operations and batch updates\n\n### Document Guarantees\n\nâœ“ NO external links required  \nâœ“ ALL AdsApp operations documented  \nâœ“ COMPLETE API patterns included  \nâœ“ ALL error scenarios covered  \nâœ“ Production-ready code examples  \nâœ“ Optimization strategies included  \nâœ“ Performance metrics reference  \nâœ“ Advanced patterns explained  \n\n---\n\n## CORE ARCHITECTURE\n\n### Google Ads Script Runtime Model\n\n**Execution Model:**\n- Runs in Google Ads editor\n- JavaScript ES6 compatible\n- Access to account-level data\n- Time-based and event-based triggers\n\n**Rate Limits and Quotas:**\n\n| Limit | Value | Impact |\n|-------|-------|--------|\n| **Script execution time** | 30 minutes | Per run timeout |\n| **API quota** | Depends on account | Shared with other tools |\n| **Read operations** | Unlimited (rate limited) | Account data access |\n| **Write operations** | Limited | Use batch operations |\n| **Daily budget spend** | Account budget | Cannot exceed daily limit |\n| **Monthly script runs** | Depends on triggers | Time-based limits |\n\n**AdsApp Object Hierarchy:**\n```\nAdsApp (Root)\nâ”œâ”€â”€ campaigns()                  # Campaign selector\nâ”œâ”€â”€ adGroups()                   # Ad group selector\nâ”œâ”€â”€ keywords()                   # Keyword selector\nâ”œâ”€â”€ ads()                        # Ad selector\nâ”œâ”€â”€ productGroups()              # Shopping product groups\nâ”œâ”€â”€ shoppingCampaigns()         # Shopping campaigns\nâ”œâ”€â”€ campaignTargeting()         # Campaign-level targeting\nâ”œâ”€â”€ currentAccount()            # Current account info\nâ”œâ”€â”€ report()                    # GAQL reporting\nâ””â”€â”€ mutate()                    # Batch mutations\n```\n\n---\n\n## ADSAPP API FUNDAMENTALS\n\n### Core Concepts\n\n**Selector Pattern:**\n```javascript\n// All campaigns\nconst campaigns = AdsApp.campaigns().get();\n\n// With conditions\nconst campaigns = AdsApp.campaigns()\n  .withCondition('campaign.status = ENABLED')\n  .withCondition('campaign.name CONTAINS \"Sale\"')\n  .get();\n\n// Limit results\nconst campaigns = AdsApp.campaigns()\n  .withLimit(100)\n  .get();\n\n// Order by\nconst campaigns = AdsApp.campaigns()\n  .orderBy('campaign.metrics.clicks DESC')\n  .get();\n```\n\n**Iterator Pattern:**\n```javascript\nconst campaigns = AdsApp.campaigns().get();\n\nwhile (campaigns.hasNext()) {\n  const campaign = campaigns.next();\n  // Process campaign\n}\n\n// Or convert to array\nconst campaignsArray = [];\nwhile (campaigns.hasNext()) {\n  campaignsArray.push(campaigns.next());\n}\n```\n\n**Statistics:**\n```javascript\nconst campaigns = AdsApp.campaigns().get();\nLogger.log('Total campaigns: ' + campaigns.totalNumEntities());\n```\n\n### Date Range Strings\n\n```javascript\n// Predefined ranges\ngetStatsFor('TODAY')\ngetStatsFor('YESTERDAY')\ngetStatsFor('LAST_7_DAYS')\ngetStatsFor('LAST_14_DAYS')\ngetStatsFor('LAST_30_DAYS')\ngetStatsFor('LAST_90_DAYS')\ngetStatsFor('THIS_MONTH')\ngetStatsFor('LAST_MONTH')\n\n// Custom range\nconst stats = campaign.getStatsFor('20250101', '20251110');\n```\n\n---\n\n## CAMPAIGN OPERATIONS\n\n### Getting Campaigns\n\n**Basic retrieval:**\n```javascript\n// Get all campaigns\nconst campaigns = AdsApp.campaigns().get();\n\n// Get single campaign by name\nconst campaignIterator = AdsApp.campaigns()\n  .withCondition('campaign.name = \"My Campaign\"')\n  .get();\n\nif (campaignIterator.hasNext()) {\n  const campaign = campaignIterator.next();\n}\n```\n\n**Filter campaigns:**\n```javascript\n// Enabled campaigns only\nconst campaigns = AdsApp.campaigns()\n  .withCondition('campaign.status = ENABLED')\n  .get();\n\n// By budget\nconst campaigns = AdsApp.campaigns()\n  .withCondition('campaign.budget_information.budget_amount >= 100000000')\n  .get();\n\n// By type (SEARCH, DISPLAY, SHOPPING, VIDEO, PERFORMANCE_MAX)\nconst campaigns = AdsApp.campaigns()\n  .withCondition('campaign.type = SEARCH')\n  .get();\n\n// Recently modified\nconst campaigns = AdsApp.campaigns()\n  .withCondition('campaign.status = ENABLED')\n  .withCondition('campaign.name CONTAINS \"Q4\"')\n  .get();\n```\n\n### Campaign Properties\n\n**Get campaign info:**\n```javascript\nconst campaign = campaigns.next();\n\nconst id = campaign.getId();                    // Numeric ID\nconst name = campaign.getName();                // Campaign name\nconst status = campaign.getStatus();            // ENABLED, PAUSED, REMOVED\nconst budget = campaign.getBudget().getAmount(); // Daily budget in micros\nconst campaignType = campaign.getType();        // SEARCH, DISPLAY, etc.\nconst startDate = campaign.getStartDate();      // Start date (YYYY-MM-DD)\nconst endDate = campaign.getEndDate();          // End date\nconst adServingOptimizationStatus = campaign.getAdServingOptimizationStatus();\n```\n\n**Statistics:**\n```javascript\nconst stats = campaign.getStatsFor('LAST_30_DAYS');\nconst cost = stats.getCost();                   // In micros (divide by 1,000,000)\nconst clicks = stats.getClicks();\nconst impressions = stats.getImpressions();\nconst conversions = stats.getConversions();\nconst ctr = stats.getClickThroughRate();        // As decimal (0-1)\nconst cpc = stats.getAverageCpc();              // Average cost per click\nconst cpa = stats.getAveragePageviews();        // NOTE: check specific metric\n```\n\n### Campaign Management\n\n**Create campaign:**\n```javascript\n// Build campaign\nconst campaign = AdsApp.campaigns().newCampaignBuilder()\n  .withName('New Campaign')\n  .withStatus('PAUSED')\n  .withBudget(5000000)  // 5000 in local currency, in micros\n  .withType('SEARCH')\n  .build()\n  .getResult();\n```\n\n**Modify campaign:**\n```javascript\ncampaign.setName('Updated Name');\ncampaign.setStatus('ENABLED');  // ENABLED, PAUSED, REMOVED\n\n// Budget (in micros)\ncampaign.getBudget().setAmount(10000000);  // 10000\n\n// Start/end dates\ncampaign.setStartDate('2025-12-01');\ncampaign.setEndDate('2025-12-31');\n```\n\n**Pause/enable:**\n```javascript\ncampaign.pause();\ncampaign.enable();\ncampaign.remove();  // Archive campaign\n```\n\n**Campaign labels:**\n```javascript\ncampaign.applyLabel('MyLabel');\ncampaign.removeLabel('MyLabel');\nconst labels = campaign.labels();  // Get labels\n```\n\n---\n\n## AD GROUP MANAGEMENT\n\n### Getting Ad Groups\n\n**Basic retrieval:**\n```javascript\n// All ad groups\nconst adGroups = AdsApp.adGroups().get();\n\n// In specific campaign\nconst adGroups = campaign.adGroups().get();\n\n// By name\nconst adGroupIterator = AdsApp.adGroups()\n  .withCondition('ad_group.name = \"Ad Group Name\"')\n  .get();\n\n// By status\nconst adGroups = AdsApp.adGroups()\n  .withCondition('ad_group.status = ENABLED')\n  .get();\n\n// By performance\nconst adGroups = AdsApp.adGroups()\n  .withCondition('ad_group.metrics.avg_cpc > 200000')  // > 0.20 in local currency\n  .orderBy('ad_group.metrics.cost DESC')\n  .get();\n```\n\n### Ad Group Properties\n\n**Get info:**\n```javascript\nconst adGroup = adGroups.next();\n\nconst id = adGroup.getId();\nconst name = adGroup.getName();\nconst status = adGroup.getStatus();\nconst campaign = adGroup.getCampaign();\nconst cpiBid = adGroup.getCpcBid();  // Cost per click in micros\nconst stats = adGroup.getStatsFor('LAST_7_DAYS');\n```\n\n**Statistics:**\n```javascript\nconst stats = adGroup.getStatsFor('LAST_30_DAYS');\nconst cost = stats.getCost();\nconst clicks = stats.getClicks();\nconst impressions = stats.getImpressions();\nconst conversions = stats.getConversions();\nconst conversionRate = stats.getConversionRate();\nconst roas = stats.getReturnOnAdSpend();\n```\n\n### Ad Group Operations\n\n**Create ad group:**\n```javascript\nconst adGroup = campaign.newAdGroupBuilder()\n  .withName('New Ad Group')\n  .withStatus('PAUSED')\n  .withCpc(50000)  // 0.50 in local currency, in micros\n  .build()\n  .getResult();\n```\n\n**Modify ad group:**\n```javascript\nadGroup.setName('Updated Name');\nadGroup.setStatus('ENABLED');  // ENABLED, PAUSED, REMOVED\nadGroup.bidding().setCpc(75000);  // 0.75\n```\n\n**Bidding:**\n```javascript\n// Get current bid\nconst bid = adGroup.getCpcBid();\n\n// Set CPC bid\nadGroup.bidding().setCpc(50000);\n\n// Set max CPC\nadGroup.bidding().setMaxCpc(100000);\n```\n\n### Keywords in Ad Group\n\n**Get keywords:**\n```javascript\n// All keywords in ad group\nconst keywords = adGroup.keywords().get();\n\n// Negative keywords\nconst negativeKeywords = adGroup.negativeKeywords().get();\n```\n\n**Add keyword:**\n```javascript\nconst keyword = adGroup.newKeywordBuilder()\n  .withText('blue shoes')\n  .withMatchType('BROAD')\n  .withFinalUrl('https://example.com/shoes')\n  .withMaxCpc(50000)\n  .build()\n  .getResult();\n```\n\n**Remove keyword:**\n```javascript\nconst keyword = adGroup.keywords().get().next();\nkeyword.remove();\n```\n\n---\n\n## KEYWORDS & TARGETING\n\n### Keyword Operations\n\n**Get all keywords:**\n```javascript\nconst keywords = AdsApp.keywords().get();\n\n// With conditions\nconst keywords = AdsApp.keywords()\n  .withCondition('keyword.status = ENABLED')\n  .withCondition('keyword.match_type = EXACT')\n  .withCondition('keyword.text CONTAINS \"shoe\"')\n  .get();\n\n// By quality score\nconst keywords = AdsApp.keywords()\n  .withCondition('keyword.quality_info.quality_score >= 7')\n  .get();\n\n// High cost keywords\nconst keywords = AdsApp.keywords()\n  .withCondition('keyword.metrics.cost > 500000000')  // > 500 in local currency\n  .orderBy('keyword.metrics.cost DESC')\n  .get();\n```\n\n### Keyword Properties\n\n**Get keyword details:**\n```javascript\nconst keyword = keywords.next();\n\nconst id = keyword.getId();\nconst text = keyword.getText();\nconst matchType = keyword.getMatchType();  // EXACT, PHRASE, BROAD\nconst maxCpc = keyword.getMaxCpc();        // In micros\nconst status = keyword.getStatus();\nconst destinationUrl = keyword.getDestinationUrl();\nconst approvalStatus = keyword.getApprovalStatus();\nconst disapprovalReasons = keyword.getDisapprovalReasons();  // Array\n```\n\n**Quality score:**\n```javascript\nconst qualityScore = keyword.getQualityScore();         // 1-10 or null\nconst creativeQualityScore = keyword.getCreativeQualityScore();\nconst landingPageQualityScore = keyword.getLandingPageQualityScore();\nconst postClickQualityScore = keyword.getPostClickQualityScore();\n```\n\n**Statistics:**\n```javascript\nconst stats = keyword.getStatsFor('LAST_30_DAYS');\nconst cost = stats.getCost();\nconst clicks = stats.getClicks();\nconst impressions = stats.getImpressions();\nconst conversions = stats.getConversions();\nconst avgCpc = stats.getAverageCpc();\nconst searchImpressionShare = stats.getSearchImpressionShare();\n```\n\n### Keyword Management\n\n**Create keyword:**\n```javascript\n// In ad group\nconst keyword = adGroup.newKeywordBuilder()\n  .withText('blue running shoes')\n  .withMatchType('PHRASE')\n  .withMaxCpc(50000)\n  .build()\n  .getResult();\n```\n\n**Modify keyword:**\n```javascript\nkeyword.setMaxCpc(75000);\nkeyword.setDestinationUrl('https://example.com/products');\nkeyword.pause();\nkeyword.enable();\n```\n\n**Match types:**\n```\nBROAD        // Matches query variations (default)\nPHRASE       // Matches phrase and close variations\nEXACT        // Matches exact phrase only\n```\n\n**Negative keywords:**\n```javascript\n// Create negative keyword\nconst negativeKeyword = adGroup.newNegativeKeywordBuilder()\n  .withText('cheap')\n  .withMatchType('BROAD')\n  .build()\n  .getResult();\n\n// Campaign-level negative\nconst campaignNegKeyword = campaign.newNegativeKeywordBuilder()\n  .withText('wholesale')\n  .withMatchType('EXACT')\n  .build()\n  .getResult();\n```\n\n### Targeting Options\n\n**Location targeting:**\n```javascript\nconst campaign = AdsApp.campaigns().get().next();\n\n// Add location\ncampaign.targeting()\n  .getLocationTarget()\n  .newLocationBuilder()\n  .withBidModifier(1.5)     // 50% higher bid\n  .build();\n\n// Get location targets\nconst locations = campaign.targeting().getLocationTarget().get();\n```\n\n**Device targeting:**\n```javascript\n// Bid modifiers for devices\ncampaign.targeting()\n  .getDeviceTarget()\n  .setBidModifier('MOBILE', 1.2);     // 20% higher for mobile\n\ncampaign.targeting()\n  .getDeviceTarget()\n  .setBidModifier('TABLET', 0.8);    // 20% lower for tablet\n\ncampaign.targeting()\n  .getDeviceTarget()\n  .setBidModifier('DESKTOP', 1.0);   // Standard bid\n```\n\n**Audience targeting:**\n```javascript\n// Add audience\nadGroup.targeting()\n  .getAudienceTarget()\n  .newAudienceBuilder()\n  .withAudienceId('1234567890')\n  .withBidModifier(1.5)\n  .build();\n```\n\n---\n\n## ADS MANAGEMENT\n\n### Ad Types\n\n**Responsive Search Ads (RSA):**\n```javascript\nconst ad = adGroup.newAd()\n  .responsiveSearchAdBuilder()\n  .addHeadline('Headline 1')\n  .addHeadline('Headline 2')\n  .addHeadline('Headline 3')\n  .addDescription('Description 1')\n  .addDescription('Description 2')\n  .addFinalUrl('https://example.com')\n  .build()\n  .getResult();\n```\n\n**Expanded Text Ads (Legacy - still supported):**\n```javascript\nconst ad = adGroup.newAd()\n  .expandedTextAdBuilder()\n  .setHeadlinePart1('Headline Part 1')\n  .setHeadlinePart2('Headline Part 2')\n  .setDescription1('Description 1')\n  .setDescription2('Description 2')\n  .setFinalUrl('https://example.com')\n  .build()\n  .getResult();\n```\n\n### Getting Ads\n\n**All ads:**\n```javascript\nconst ads = AdsApp.ads().get();\n\n// By status\nconst ads = AdsApp.ads()\n  .withCondition('ad.status = ENABLED')\n  .get();\n\n// By ad group\nconst ads = adGroup.ads().get();\n\n// Pause low-performing ads\nconst ads = AdsApp.ads()\n  .withCondition('ad.metrics.avg_cpc > 500000')  // > 0.50\n  .orderBy('ad.metrics.avg_cpc DESC')\n  .get();\n```\n\n### Ad Properties\n\n**Get ad details:**\n```javascript\nconst ad = ads.next();\n\nconst id = ad.getId();\nconst status = ad.getStatus();\nconst type = ad.getType();  // RESPONSIVE_SEARCH_AD, EXPANDED_TEXT_AD, etc.\nconst creationTime = ad.getCreationTime();\nconst updateTime = ad.getUpdateTime();\nconst approvalStatus = ad.getApprovalStatus();\n```\n\n**Ad statistics:**\n```javascript\nconst stats = ad.getStatsFor('LAST_7_DAYS');\nconst impressions = stats.getImpressions();\nconst clicks = stats.getClicks();\nconst conversions = stats.getConversions();\nconst ctr = stats.getClickThroughRate();\n```\n\n### Ad Management\n\n**Modify ad:**\n```javascript\nad.pause();\nad.enable();\nad.remove();\n```\n\n**Ad labels:**\n```javascript\nad.applyLabel('TopAd');\nad.removeLabel('TopAd');\n```\n\n---\n\n## BIDDING STRATEGY\n\n### Bid Types and Adjustments\n\n**CPC (Cost-Per-Click) Bidding:**\n```javascript\n// Set CPC at ad group level\nadGroup.bidding().setCpc(50000);  // 0.50 in local currency\n\n// Set CPC at keyword level\nkeyword.setMaxCpc(75000);  // 0.75\n\n// Get current bid\nconst bid = keyword.getMaxCpc();\n```\n\n**Enhanced CPC:**\n```javascript\n// Enable enhanced CPC\ncampaign.bidding().setStrategy('ENHANCED_CPC');\n\n// Disable\ncampaign.bidding().setStrategy('MANUAL_CPC');\n```\n\n**Target CPA (Cost Per Acquisition):**\n```javascript\ncampaign.bidding().setStrategy('TARGET_CPA');\ncampaign.bidding().setTargetCpa(50000);  // 50.00 in local currency\n```\n\n**Target ROAS (Return on Ad Spend):**\n```javascript\ncampaign.bidding().setStrategy('MAXIMIZE_ROAS');\ncampaign.bidding().setTargetRoas(3.0);  // 300% ROAS\n```\n\n**Bid Adjustments:**\n```javascript\n// Time-of-day bid modifiers\nadGroup.adSchedules()\n  .newAdScheduleBuilder()\n  .withDayOfWeek('MONDAY')\n  .withStartHour(9)\n  .withStartMinute(0)\n  .withEndHour(17)\n  .withEndMinute(0)\n  .withBidModifier(1.2)  // 20% higher during 9-5\n  .build();\n\n// Device bid modifiers\nadGroup.devices()\n  .get()\n  .next()\n  .setBidModifier(1.5);  // Mobile 50% higher\n\n// Location bid modifiers\ncampaign.targeting()\n  .getLocationTarget()\n  .get()\n  .next()\n  .setBidModifier(1.2);  // 20% higher in specific location\n```\n\n---\n\n## PERFORMANCE REPORTING\n\n### Statistics Methods\n\n**Common metrics:**\n```javascript\nconst stats = campaign.getStatsFor('LAST_30_DAYS');\n\n// Click metrics\nstats.getClicks();\nstats.getImpressions();\nstats.getClickThroughRate();        // 0.05 = 5%\n\n// Cost metrics\nstats.getCost();                    // In micros\nstats.getAverageCpc();\nstats.getAverageCpm();\n\n// Conversion metrics\nstats.getConversions();\nstats.getConversionRate();          // 0.02 = 2%\nstats.getConversionValue();\nstats.getCostPerConversion();\n\n// ROI metrics\nstats.getReturnOnAdSpend();         // 2.5 = 250%\nstats.getAveragePageviews();\nstats.getAveragePosition();\n```\n\n### Generating Reports\n\n**Campaign performance report:**\n```javascript\nfunction generateCampaignReport() {\n  const campaigns = AdsApp.campaigns()\n    .withCondition('campaign.status = ENABLED')\n    .orderBy('campaign.metrics.cost DESC')\n    .get();\n  \n  const report = [];\n  while (campaigns.hasNext()) {\n    const campaign = campaigns.next();\n    const stats = campaign.getStatsFor('LAST_30_DAYS');\n    \n    report.push({\n      name: campaign.getName(),\n      cost: stats.getCost() / 1000000,  // Convert from micros\n      clicks: stats.getClicks(),\n      impressions: stats.getImpressions(),\n      conversions: stats.getConversions(),\n      cpc: stats.getAverageCpc() / 1000000,\n      roas: stats.getReturnOnAdSpend()\n    });\n  }\n  \n  return report;\n}\n```\n\n**Keyword performance report:**\n```javascript\nfunction generateKeywordReport() {\n  const keywords = AdsApp.keywords()\n    .withCondition('keyword.status = ENABLED')\n    .orderBy('keyword.metrics.clicks DESC')\n    .get();\n  \n  const report = [];\n  while (keywords.hasNext()) {\n    const keyword = keywords.next();\n    const stats = keyword.getStatsFor('LAST_7_DAYS');\n    \n    report.push({\n      text: keyword.getText(),\n      matchType: keyword.getMatchType(),\n      impressions: stats.getImpressions(),\n      clicks: stats.getClicks(),\n      cost: stats.getCost() / 1000000,\n      conversions: stats.getConversions(),\n      qualityScore: keyword.getQualityScore()\n    });\n  }\n  \n  return report;\n}\n```\n\n### Exporting Reports to Sheets\n\n```javascript\nfunction exportToSheets(data, sheetName) {\n  const ss = SpreadsheetApp.getActiveSpreadsheet();\n  let sheet = ss.getSheetByName(sheetName);\n  \n  // Create sheet if doesn't exist\n  if (!sheet) {\n    sheet = ss.insertSheet(sheetName);\n  } else {\n    sheet.clear();\n  }\n  \n  // Get headers\n  const headers = Object.keys(data[0]);\n  sheet.appendRow(headers);\n  \n  // Add data\n  data.forEach(row => {\n    sheet.appendRow(headers.map(header => row[header]));\n  });\n}\n\n// Usage\nconst report = generateCampaignReport();\nexportToSheets(report, 'Campaign Report');\n```\n\n---\n\n## BUDGET MANAGEMENT\n\n### Campaign Budgets\n\n**Get budget:**\n```javascript\nconst budget = campaign.getBudget();\nconst dailyBudget = budget.getAmount();  // In micros\n```\n\n**Set budget:**\n```javascript\n// Set daily budget\ncampaign.getBudget().setAmount(5000000);  // 5000 in local currency\n\n// Budget in micros = amount in local currency * 1,000,000\n// Example: 50.00 USD = 50000000 micros\n```\n\n**Budget info:**\n```javascript\nconst budget = campaign.getBudget();\nconst hasExplicitBudget = budget.isExplicitlyShared();\nconst budgetPeriod = budget.getPeriod();  // DAILY\n```\n\n### Budget Allocation\n\n**Distribute budget across campaigns:**\n```javascript\nfunction distributeBudget(totalBudgetMicros, campaignNames) {\n  const campaigns = AdsApp.campaigns()\n    .withCondition('campaign.status = ENABLED')\n    .get();\n  \n  const numCampaigns = campaignNames.length;\n  const budgetPerCampaign = totalBudgetMicros / numCampaigns;\n  \n  let campaignCount = 0;\n  while (campaigns.hasNext() && campaignCount < numCampaigns) {\n    const campaign = campaigns.next();\n    if (campaignNames.includes(campaign.getName())) {\n      campaign.getBudget().setAmount(budgetPerCampaign);\n      campaignCount++;\n    }\n  }\n}\n\n// Usage - 5000 total budget split across 5 campaigns = 1000 each\ndistributeBudget(5000000000, ['Campaign1', 'Campaign2', 'Campaign3', 'Campaign4', 'Campaign5']);\n```\n\n### Spending Alerts\n\n**Monitor daily spend:**\n```javascript\nfunction checkDailySpend() {\n  const dailyLimit = 1000000000;  // 1000 in local currency\n  \n  const campaigns = AdsApp.campaigns()\n    .withCondition('campaign.status = ENABLED')\n    .get();\n  \n  while (campaigns.hasNext()) {\n    const campaign = campaigns.next();\n    const stats = campaign.getStatsFor('TODAY');\n    const spend = stats.getCost();\n    \n    if (spend > dailyLimit) {\n      campaign.pause();\n      Logger.log('Campaign ' + campaign.getName() + ' paused - spend limit exceeded');\n    }\n  }\n}\n```\n\n---\n\n## ADVANCED TARGETING\n\n### Audience Targeting\n\n**Remarketing lists:**\n```javascript\n// Create in-market audience targets\nconst adGroup = AdsApp.adGroups().get().next();\nconst targeting = adGroup.targeting();\n\n// Get audience targets\nconst audiences = targeting.getAudienceTarget().get();\n```\n\n### Display Network Targeting\n\n**Placements:**\n```javascript\n// Add placement\nadGroup.display()\n  .newPlacementBuilder()\n  .withUrl('example.com')\n  .withMaxCpc(50000)\n  .build();\n\n// Negative placements\nadGroup.display()\n  .newNegativePlacementBuilder()\n  .withUrl('competitor.com')\n  .build();\n```\n\n**Topics:**\n```javascript\n// Add topic\nadGroup.display()\n  .newTopicBuilder()\n  .withTopicId('12345678')\n  .build();\n\n// Exclude topic\nadGroup.display()\n  .newNegativeTopicBuilder()\n  .withTopicId('12345678')\n  .build();\n```\n\n**Keywords:**\n```javascript\n// Contextual keyword\nadGroup.display()\n  .newDisplayKeywordBuilder()\n  .withText('shoes')\n  .build();\n\n// Negative display keyword\nadGroup.display()\n  .newNegativeDisplayKeywordBuilder()\n  .withText('cheap')\n  .build();\n```\n\n---\n\n## AUTOMATED RULES & ALERTS\n\n### Pause Low Performers\n\n```javascript\nfunction pauseLowPerformingKeywords() {\n  const keywords = AdsApp.keywords()\n    .withCondition('keyword.status = ENABLED')\n    .withCondition('keyword.metrics.avg_cpc > 500000')  // > 0.50\n    .withCondition('keyword.metrics.conversions < 1')\n    .get();\n  \n  let pausedCount = 0;\n  while (keywords.hasNext()) {\n    const keyword = keywords.next();\n    keyword.pause();\n    pausedCount++;\n  }\n  \n  Logger.log('Paused ' + pausedCount + ' low-performing keywords');\n}\n```\n\n### Bid Optimization Script\n\n```javascript\nfunction optimizeBids() {\n  const keywords = AdsApp.keywords()\n    .withCondition('keyword.status = ENABLED')\n    .withCondition('keyword.metrics.conversions > 5')\n    .get();\n  \n  const ROAS_TARGET = 2.0;  // 200%\n  \n  while (keywords.hasNext()) {\n    const keyword = keywords.next();\n    const stats = keyword.getStatsFor('LAST_30_DAYS');\n    const roas = stats.getReturnOnAdSpend();\n    const currentBid = keyword.getMaxCpc();\n    \n    if (roas > ROAS_TARGET) {\n      // Increase bid by 10%\n      keyword.setMaxCpc(currentBid * 1.1);\n    } else if (roas < 1.0) {\n      // Decrease bid by 5%\n      keyword.setMaxCpc(currentBid * 0.95);\n    }\n  }\n}\n```\n\n### Quality Score Monitoring\n\n```javascript\nfunction monitorQualityScores() {\n  const lowQualityKeywords = AdsApp.keywords()\n    .withCondition('keyword.quality_info.quality_score < 5')\n    .withCondition('keyword.status = ENABLED')\n    .orderBy('keyword.quality_info.quality_score ASC')\n    .get();\n  \n  Logger.log('Keywords with quality score < 5:');\n  while (lowQualityKeywords.hasNext()) {\n    const keyword = lowQualityKeywords.next();\n    Logger.log(keyword.getText() + ' - QS: ' + keyword.getQualityScore());\n  }\n}\n```\n\n---\n\n## ERROR HANDLING & DEBUGGING\n\n### Try-Catch Pattern\n\n```javascript\nfunction safeAdsOperation() {\n  try {\n    const campaigns = AdsApp.campaigns()\n      .withCondition('campaign.name = \"NonExistent\"')\n      .get();\n    \n    while (campaigns.hasNext()) {\n      const campaign = campaigns.next();\n      // Process\n    }\n  } catch (error) {\n    Logger.log('Error in campaign operation: ' + error.message);\n  }\n}\n```\n\n### Null Checks\n\n```javascript\nfunction handleNullSafely() {\n  const campaigns = AdsApp.campaigns().get();\n  \n  while (campaigns.hasNext()) {\n    const campaign = campaigns.next();\n    \n    // Check for null/undefined\n    const budget = campaign.getBudget();\n    if (!budget) {\n      Logger.log('No budget for ' + campaign.getName());\n      continue;\n    }\n    \n    const amount = budget.getAmount();\n    if (amount === null || amount === undefined) {\n      Logger.log('Budget amount not set');\n      continue;\n    }\n  }\n}\n```\n\n### Logging Best Practices\n\n```javascript\nfunction logOperations() {\n  const ss = SpreadsheetApp.getActiveSpreadsheet();\n  const logSheet = ss.getSheetByName('ScriptLog') || ss.insertSheet('ScriptLog');\n  \n  try {\n    const campaigns = AdsApp.campaigns().get();\n    const count = campaigns.totalNumEntities();\n    logSheet.appendRow([new Date(), 'SUCCESS', 'Processed ' + count + ' campaigns']);\n  } catch (error) {\n    logSheet.appendRow([new Date(), 'ERROR', error.message, error.stack]);\n  }\n}\n```\n\n---\n\n## PERFORMANCE OPTIMIZATION\n\n### Batch Operations\n\n**Process campaigns efficiently:**\n```javascript\nfunction optimizeBatchProcessing() {\n  // SLOW - Individual operations\n  const keywords = AdsApp.keywords().get();\n  while (keywords.hasNext()) {\n    const keyword = keywords.next();\n    if (keyword.getQualityScore() < 5) {\n      keyword.setMaxCpc(keyword.getMaxCpc() * 0.9);\n    }\n  }\n  \n  // FAST - Batch collect and process\n  const keywordsToUpdate = [];\n  const keywords = AdsApp.keywords()\n    .withCondition('keyword.quality_info.quality_score < 5')\n    .get();\n  \n  while (keywords.hasNext()) {\n    keywordsToUpdate.push(keywords.next());\n  }\n  \n  // Perform all updates\n  keywordsToUpdate.forEach(keyword => {\n    keyword.setMaxCpc(keyword.getMaxCpc() * 0.9);\n  });\n}\n```\n\n### Limiting Results\n\n```javascript\nfunction useEffectiveFiltering() {\n  // Get only what you need\n  const keywords = AdsApp.keywords()\n    .withCondition('keyword.status = ENABLED')\n    .withCondition('keyword.metrics.clicks > 10')\n    .withCondition('keyword.metrics.conversions = 0')\n    .withLimit(1000)\n    .get();\n  \n  // Process limited results\n}\n```\n\n### Caching Results\n\n```javascript\nfunction cacheReportsToSheets() {\n  const ss = SpreadsheetApp.getActiveSpreadsheet();\n  const cacheSheet = ss.getSheetByName('Cache') || ss.insertSheet('Cache');\n  \n  // Generate report (expensive operation)\n  const campaigns = AdsApp.campaigns().get();\n  const report = [];\n  \n  while (campaigns.hasNext()) {\n    const campaign = campaigns.next();\n    report.push([\n      campaign.getName(),\n      campaign.getStatsFor('LAST_7_DAYS').getCost() / 1000000\n    ]);\n  }\n  \n  // Cache to sheet\n  cacheSheet.clear();\n  cacheSheet.getRange(1, 1, report.length, 2).setValues(report);\n}\n```\n\n---\n\n## BEST PRACTICES\n\n### Complete Automation Template\n\n```javascript\n/**\n * Main entry point for Google Ads automation\n */\nfunction main() {\n  try {\n    Logger.log('Starting Ads Script execution: ' + new Date());\n    \n    // Validate setup\n    validateAccountSetup();\n    \n    // Execute tasks\n    const results = {\n      paused: pauseLowQualityKeywords(),\n      optimized: optimizeHighPerformingKeywords(),\n      alerts: checkBudgetStatus()\n    };\n    \n    // Log results\n    logResults(results);\n    \n    Logger.log('Completed successfully');\n  } catch (error) {\n    handleError(error);\n  }\n}\n\n/**\n * Validate script setup\n */\nfunction validateAccountSetup() {\n  const account = AdsApp.currentAccount();\n  if (!account) {\n    throw new Error('No account access');\n  }\n}\n\n/**\n * Pause low quality keywords\n */\nfunction pauseLowQualityKeywords() {\n  let count = 0;\n  const keywords = AdsApp.keywords()\n    .withCondition('keyword.status = ENABLED')\n    .withCondition('keyword.quality_info.quality_score < 4')\n    .get();\n  \n  while (keywords.hasNext()) {\n    keywords.next().pause();\n    count++;\n  }\n  \n  return count;\n}\n\n/**\n * Optimize high performers\n */\nfunction optimizeHighPerformingKeywords() {\n  let count = 0;\n  const keywords = AdsApp.keywords()\n    .withCondition('keyword.status = ENABLED')\n    .withCondition('keyword.metrics.cost_per_conversion < 500000')\n    .get();\n  \n  while (keywords.hasNext()) {\n    const keyword = keywords.next();\n    const bid = keyword.getMaxCpc();\n    keyword.setMaxCpc(bid * 1.05);  // 5% increase\n    count++;\n  }\n  \n  return count;\n}\n\n/**\n * Check budget status\n */\nfunction checkBudgetStatus() {\n  const alerts = [];\n  const campaigns = AdsApp.campaigns()\n    .withCondition('campaign.status = ENABLED')\n    .get();\n  \n  while (campaigns.hasNext()) {\n    const campaign = campaigns.next();\n    const stats = campaign.getStatsFor('TODAY');\n    const budget = campaign.getBudget().getAmount();\n    const spend = stats.getCost();\n    \n    if (spend > budget * 0.9) {\n      alerts.push(campaign.getName() + ': 90% of budget consumed');\n    }\n  }\n  \n  return alerts;\n}\n\n/**\n * Log results to sheet\n */\nfunction logResults(results) {\n  const ss = SpreadsheetApp.getActiveSpreadsheet();\n  const sheet = ss.getSheetByName('Log') || ss.insertSheet('Log');\n  \n  sheet.appendRow([\n    new Date(),\n    results.paused + ' keywords paused',\n    results.optimized + ' keywords optimized',\n    results.alerts.length + ' alerts'\n  ]);\n}\n\n/**\n * Error handler\n */\nfunction handleError(error) {\n  Logger.log('ERROR: ' + error.message);\n  \n  // Send notification\n  MailApp.sendEmail(Session.getEffectiveUser().getEmail(), \n    'Ads Script Error', \n    'Error: ' + error.message + '\\n\\n' + error.stack);\n}\n```\n\n### Code Organization\n\n```javascript\n// File: main.gs\nfunction main() {\n  CampaignOptimizer.run();\n  KeywordManager.run();\n  ReportGenerator.run();\n}\n\n// File: campaign-optimizer.gs\nconst CampaignOptimizer = {\n  run: function() {\n    this.pauseUnderperformers();\n    this.optimizeHigh Performers();\n  },\n  \n  pauseUnderperformers: function() {\n    // Implementation\n  },\n  \n  optimizeHighPerformers: function() {\n    // Implementation\n  }\n};\n\n// File: keyword-manager.gs\nconst KeywordManager = {\n  run: function() {\n    this.updateBids();\n    this.removeNegatives();\n  },\n  \n  updateBids: function() {\n    // Implementation\n  },\n  \n  removeNegatives: function() {\n    // Implementation\n  }\n};\n```\n\n---\n\n## QUOTAS AND LIMITS\n\n| Limit | Value | Notes |\n|-------|-------|-------|\n| **Execution time** | 30 minutes | Per script run |\n| **API calls** | Rate limited | Account limits vary |\n| **Campaigns per account** | Unlimited | Practical limit ~5000 |\n| **Ad groups per campaign** | Unlimited | Practical limit ~20000 |\n| **Keywords per ad group** | Unlimited | Practical limit ~5000 |\n| **Bid changes** | Unlimited | Subject to rate limiting |\n| **Budget changes** | Unlimited | Subject to rate limiting |\n| **Frequency of updates** | Once per hour | Recommended minimum |\n\n---\n\n**End of Google Ads Script Mission-Critical Reference**\n\n*Use this as your authoritative offline guide for all Google Ads Script development needs.*",
        "plugins/marketing/skills/gtm/SKILL.md": "---\nname: gtm\ndescription: Comprehensive Google Tag Manager guide covering container setup, tags, triggers, variables, data layer, debugging, custom templates, and API automation. Use when working with GTM implementation, configuration, optimisation, troubleshooting, or any GTM-related tasks.\n---\n\n# Google Tag Manager\n\n## Overview\n\nThis skill provides comprehensive expertise for Google Tag Manager (GTM), covering container setup, tag configuration, triggers, variables, data layer implementation, debugging, custom templates, and API automation. Whether you are implementing a new GTM setup, optimising an existing configuration, or troubleshooting issues, this skill has you covered.\n\n## When to Use This Skill\n\nInvoke this skill when:\n\n- Setting up a new GTM container\n- Configuring tags (GA4, Google Ads, Facebook Pixel, etc.)\n- Creating triggers (page views, clicks, form submissions, etc.)\n- Defining variables (data layer, custom JavaScript, constants, etc.)\n- Implementing the data layer for e-commerce or custom events\n- Debugging GTM issues using Preview mode or Tag Assistant\n- Building custom templates with sandboxed JavaScript\n- Automating GTM operations via the REST API\n- Optimising container performance and organisation\n- Ensuring privacy compliance and consent management\n\n## Quick Start\n\n### Container Setup\n\n1. Create a GTM account at [tagmanager.google.com](https://tagmanager.google.com)\n2. Create a container (Web, iOS, Android, or Server)\n3. Install the container snippet on your website\n4. Configure tags, triggers, and variables\n5. Test in Preview mode\n6. Publish\n\nSee [setup.md](references/setup.md) for detailed installation instructions.\n\n### Basic Tag Configuration\n\n```javascript\n// Example: GA4 Configuration Tag\nTag Type: Google Analytics: GA4 Configuration\nMeasurement ID: G-XXXXXXXXXX\nTrigger: All Pages\n```\n\nSee [tags.md](references/tags.md) for comprehensive tag documentation.\n\n### Data Layer Push\n\n```javascript\n// Push custom event to data layer\nwindow.dataLayer = window.dataLayer || [];\ndataLayer.push({\n  'event': 'custom_event',\n  'category': 'engagement',\n  'action': 'button_click',\n  'label': 'CTA Button'\n});\n```\n\nSee [datalayer.md](references/datalayer.md) for data layer patterns.\n\n## Core Concepts\n\n### Tags, Triggers, and Variables\n\n**Tags** are snippets of code that execute on your site (e.g., GA4, Google Ads, Facebook Pixel).\n\n**Triggers** define when tags fire (e.g., page views, clicks, form submissions).\n\n**Variables** capture dynamic values for use in tags and triggers (e.g., page URL, click text, data layer values).\n\n### How They Work Together\n\n```\nUser Action --> Trigger Fires --> Tag Executes --> Data Sent\n     ^                                    |\n     |                                    v\n     +--- Variables provide values -------+\n```\n\n## Topic Reference Guide\n\n### Container Setup and Installation\n\nFor container creation, snippet installation, and initial configuration:\n\n- **Reference**: [setup.md](references/setup.md)\n- **Topics**: Container types, snippet placement, noscript fallback, verification\n\n### Tag Configuration\n\nFor configuring analytics, advertising, and custom tags:\n\n- **Reference**: [tags.md](references/tags.md)\n- **Topics**: GA4 tags, Google Ads conversions, Facebook Pixel, custom HTML, tag sequencing\n\n### Trigger Types\n\nFor setting up firing conditions:\n\n- **Reference**: [triggers.md](references/triggers.md)\n- **Topics**: Page views, clicks, form submissions, custom events, trigger groups, blocking triggers\n\n### Variable Configuration\n\nFor capturing and formatting data:\n\n- **Reference**: [variables.md](references/variables.md)\n- **Topics**: Built-in variables, data layer variables, custom JavaScript, URL variables, lookup tables\n\n### Data Layer Implementation\n\nFor implementing the data layer:\n\n- **Reference**: [datalayer.md](references/datalayer.md)\n- **Topics**: Data layer structure, e-commerce tracking, SPA tracking, best practices\n\n### Debugging and Testing\n\nFor troubleshooting GTM implementations:\n\n- **Reference**: [debugging.md](references/debugging.md)\n- **Topics**: Preview mode, Tag Assistant, debug console, common issues, testing workflows\n\n### Best Practices\n\nFor naming conventions, performance, and security:\n\n- **Reference**: [best-practices.md](references/best-practices.md)\n- **Topics**: Naming conventions, container organisation, performance optimisation, security, deployment strategies\n\n### Custom Templates\n\nFor building custom tag and variable templates:\n\n- **Reference**: [custom-templates.md](references/custom-templates.md)\n- **Topics**: Sandboxed JavaScript, template APIs, permissions, testing, publishing to Gallery\n\n### API Automation\n\nFor programmatic GTM management:\n\n- **Reference**: [api.md](references/api.md)\n- **Topics**: Authentication, REST API operations, bulk operations, backup/restore, CI/CD integration\n\n## Common Workflows\n\n### Implement GA4 Page View Tracking\n\n1. Create GA4 Configuration tag with Measurement ID\n2. Set trigger to \"All Pages\"\n3. Test in Preview mode\n4. Verify in GA4 DebugView\n5. Publish\n\n### Track Form Submissions\n\n1. Create Form Submission trigger\n2. Create GA4 Event tag with event name `form_submit`\n3. Add form ID/name as event parameter\n4. Test submission in Preview mode\n5. Publish\n\n### Implement E-commerce Tracking\n\n1. Implement data layer with e-commerce events\n2. Create data layer variables for product data\n3. Create GA4 Event tags for each e-commerce event\n4. Map data layer variables to event parameters\n5. Test complete purchase flow\n6. Publish\n\n### Debug Tag Not Firing\n\n1. Enable Preview mode\n2. Perform the action that should fire the tag\n3. Check \"Tags Not Fired\" section\n4. Review trigger conditions in Variables tab\n5. Check data layer for required values\n6. Fix conditions and retest\n\nSee [debugging.md](references/debugging.md) for detailed debugging workflows.\n\n## Technical Constraints\n\n### JavaScript (ES5 Requirement)\n\nGTM Custom JavaScript Variables and Custom HTML Tags require ES5 syntax:\n\n```javascript\n// Use var instead of const/let\nvar myVar = 'value';\n\n// Use function instead of arrow functions\nvar myFunc = function(x) { return x * 2; };\n\n// Use string concatenation instead of template literals\nvar message = 'Hello, ' + name;\n```\n\n**Exception**: Custom Templates support some ES6 features in their sandboxed environment.\n\n### Regular Expressions (RE2 Format)\n\nGTM uses RE2 regex syntax, which differs from standard JavaScript regex:\n\n**Supported**: Character classes, quantifiers, anchors, groups, alternation\n**Not Supported**: Lookahead, lookbehind, backreferences, possessive quantifiers\n\n```regex\n# Match product pages\n^/products/[^/]+$\n\n# Case-insensitive matching\n(?i)^/checkout\n```\n\n## Naming Conventions\n\n### Tags\n\nFormat: `[Platform] - [Type] - [Description]`\n\nExamples:\n- `GA4 - Event - Form Submit`\n- `Google Ads - Conversion - Purchase`\n- `FB - Pixel - Page View`\n\n### Triggers\n\nFormat: `[Event Type] - [Description]`\n\nExamples:\n- `Click - CTA Button`\n- `Page View - Homepage`\n- `Form Submit - Contact Form`\n\n### Variables\n\nFormat: `[Type] - [Description]`\n\nExamples:\n- `DL - User ID` (Data Layer)\n- `CJS - Format Price` (Custom JavaScript)\n- `Constant - GA4 Measurement ID`\n\n## Performance Tips\n\n1. **Use native tag templates** instead of Custom HTML when possible\n2. **Minimise Custom JavaScript** execution time\n3. **Remove unused tags, triggers, and variables** regularly\n4. **Use tag sequencing wisely** to avoid unnecessary delays\n5. **Defer non-critical tags** to improve page load\n\n## Security Best Practices\n\n1. **Vet all Custom HTML tags** for malicious code\n2. **Never push PII to the data layer** - hash sensitive identifiers\n3. **Implement consent mode** for privacy compliance\n4. **Limit container admin access** to trusted users\n5. **Review third-party templates** before using\n\n## Quick Reference\n\n### Built-in Variables to Enable\n\n- Page URL, Page Path, Page Hostname\n- Click Element, Click Classes, Click ID, Click URL, Click Text\n- Form Element, Form ID, Form Classes\n- Scroll Depth Threshold, Scroll Direction\n\n### Common Trigger Types\n\n- Page View (All Pages, Some Pages)\n- Click (All Elements, Just Links)\n- Form Submission\n- Custom Event\n- History Change (for SPAs)\n- Timer\n- Scroll Depth\n\n### Essential Data Layer Events\n\n```javascript\n// Page view\nwindow.dataLayer.push({ 'event': 'page_view' });\n\n// User login\nwindow.dataLayer.push({ 'event': 'login', 'method': 'Google' });\n\n// Purchase\nwindow.dataLayer.push({\n  'event': 'purchase',\n  'ecommerce': {\n    'transaction_id': 'T12345',\n    'value': 99.99,\n    'currency': 'AUD',\n    'items': [...]\n  }\n});\n```\n\n## Reference Files\n\n| Topic | Reference File |\n|-------|----------------|\n| Container setup | [setup.md](references/setup.md) |\n| Tag configuration | [tags.md](references/tags.md) |\n| Trigger configuration | [triggers.md](references/triggers.md) |\n| Variable configuration | [variables.md](references/variables.md) |\n| Data layer | [datalayer.md](references/datalayer.md) |\n| Debugging | [debugging.md](references/debugging.md) |\n| Best practices | [best-practices.md](references/best-practices.md) |\n| Custom templates | [custom-templates.md](references/custom-templates.md) |\n| API automation | [api.md](references/api.md) |\n\n## External Resources\n\n- [GTM Help Center](https://support.google.com/tagmanager)\n- [GTM Developer Documentation](https://developers.google.com/tag-platform/tag-manager)\n- [GA4 Implementation Guide](https://developers.google.com/analytics/devguides/collection/ga4)\n- [GTM API Reference](https://developers.google.com/tag-platform/tag-manager/api/v2)\n",
        "plugins/marketing/skills/gtm/references/api.md": "# GTM API Automation\n\n**Sources**:\n\n- <https://developers.google.com/tag-platform/tag-manager/api/v2>\n- <https://developers.google.com/tag-platform/tag-manager/api/v2/devguide>\n\n**Last Updated**: 2025-01-09\n\n## Overview\n\nThe Google Tag Manager API provides programmatic access to GTM configuration data. With this API, you can automate tag management tasks, including creating containers, managing tags, triggers, variables, and publishing container versions. This guide covers authentication, common operations, and automation patterns.\n\n## Why Use the GTM API?\n\n**Benefits**:\n\n- **Automation**: Automate repetitive tasks\n- **Scalability**: Manage multiple containers programmatically\n- **Integration**: Integrate GTM with existing workflows and CI/CD\n- **Version Control**: Implement custom deployment workflows\n- **Bulk Operations**: Create, update, or delete resources in bulk\n\n**Common Use Cases**:\n\n- Deploy standard configurations across multiple containers\n- Implement custom approval workflows\n- Sync GTM configurations with external systems\n- Create automated testing for tag configurations\n- Build custom GTM management interfaces\n- Backup and restore container configurations\n\n## API Resource Hierarchy\n\n```\nAccount (accounts/123456)\n  +-- Container (accounts/123456/containers/7890)\n      +-- Workspace (accounts/123456/containers/7890/workspaces/1)\n      |   +-- Tags\n      |   +-- Triggers\n      |   +-- Variables\n      |   +-- Folders\n      +-- Versions\n      +-- Environments\n```\n\n## Authentication\n\n### OAuth 2.0 Scopes\n\n```\nhttps://www.googleapis.com/auth/tagmanager.readonly\nRead-only access to all GTM data\n\nhttps://www.googleapis.com/auth/tagmanager.edit.containers\nEdit access to container configurations\n\nhttps://www.googleapis.com/auth/tagmanager.delete.containers\nPermission to delete containers\n\nhttps://www.googleapis.com/auth/tagmanager.edit.containerversions\nCreate and modify container versions\n\nhttps://www.googleapis.com/auth/tagmanager.publish\nPublish container versions\n\nhttps://www.googleapis.com/auth/tagmanager.manage.users\nManage user permissions\n\nhttps://www.googleapis.com/auth/tagmanager.manage.accounts\nFull account access\n```\n\n### Setup Steps\n\n1. Create a Project in Google Cloud Console\n2. Enable the GTM API for your project\n3. Create OAuth 2.0 Credentials:\n   - For web apps: OAuth 2.0 Client ID\n   - For server apps: Service Account\n4. Download credentials JSON file\n5. Implement OAuth flow in your application\n\n### Python Setup\n\n```python\nfrom google.oauth2 import service_account\nfrom googleapiclient.discovery import build\n\nSCOPES = ['https://www.googleapis.com/auth/tagmanager.edit.containers']\nSERVICE_ACCOUNT_FILE = 'service-account-key.json'\n\ncredentials = service_account.Credentials.from_service_account_file(\n    SERVICE_ACCOUNT_FILE, scopes=SCOPES)\n\nservice = build('tagmanager', 'v2', credentials=credentials)\n```\n\n### Node.js Setup\n\n```javascript\nconst {google} = require('googleapis');\n\nconst auth = new google.auth.GoogleAuth({\n  keyFile: 'service-account-key.json',\n  scopes: ['https://www.googleapis.com/auth/tagmanager.edit.containers']\n});\n\nconst tagmanager = google.tagmanager({version: 'v2', auth});\n```\n\n## Common Operations\n\n### List Accounts\n\n```python\naccounts = service.accounts().list().execute()\n\nfor account in accounts.get('account', []):\n    print(f\"Account: {account['name']} ({account['accountId']})\")\n```\n\n### List Containers\n\n```python\naccount_path = 'accounts/123456'\ncontainers = service.accounts().containers().list(\n    parent=account_path\n).execute()\n\nfor container in containers.get('container', []):\n    print(f\"Container: {container['name']} ({container['containerId']})\")\n```\n\n### Create Workspace\n\n```python\ncontainer_path = 'accounts/123456/containers/7890'\nworkspace = service.accounts().containers().workspaces().create(\n    parent=container_path,\n    body={'name': 'API Workspace', 'description': 'Created via API'}\n).execute()\n\nworkspace_path = workspace['path']\n```\n\n### Create Trigger\n\n```python\ntrigger_body = {\n    'name': 'All Pages',\n    'type': 'PAGEVIEW'\n}\n\ntrigger = service.accounts().containers().workspaces().triggers().create(\n    parent=workspace_path,\n    body=trigger_body\n).execute()\n```\n\n### Create Tag\n\n```python\ntag_body = {\n    'name': 'GA4 Config',\n    'type': 'gaawe',\n    'parameter': [\n        {'key': 'measurementId', 'type': 'template', 'value': 'G-XXXXXXXXXX'}\n    ],\n    'firingTriggerId': [trigger['triggerId']]\n}\n\ntag = service.accounts().containers().workspaces().tags().create(\n    parent=workspace_path,\n    body=tag_body\n).execute()\n```\n\n### Create Variable\n\n```python\nvariable_body = {\n    'name': 'DL - User ID',\n    'type': 'v',  # Data Layer Variable\n    'parameter': [\n        {'key': 'name', 'type': 'template', 'value': 'userId'},\n        {'key': 'dataLayerVersion', 'type': 'integer', 'value': '2'}\n    ]\n}\n\nvariable = service.accounts().containers().workspaces().variables().create(\n    parent=workspace_path,\n    body=variable_body\n).execute()\n```\n\n### Create and Publish Version\n\n```python\n# Create version\nversion = service.accounts().containers().workspaces().create_version(\n    path=workspace_path,\n    body={'name': 'API Version', 'notes': 'Auto-deployed via API'}\n).execute()\n\n# Publish version\npublished = service.accounts().containers().versions().publish(\n    path=version['containerVersion']['path']\n).execute()\n\nprint(f\"Published version: {published['containerVersion']['containerVersionId']}\")\n```\n\n## Automation Patterns\n\n### Backup Container\n\n```python\nimport json\n\ndef backup_container(service, workspace_path, output_file):\n    # Get all resources\n    tags = service.accounts().containers().workspaces().tags().list(\n        parent=workspace_path\n    ).execute()\n\n    triggers = service.accounts().containers().workspaces().triggers().list(\n        parent=workspace_path\n    ).execute()\n\n    variables = service.accounts().containers().workspaces().variables().list(\n        parent=workspace_path\n    ).execute()\n\n    # Save to file\n    backup = {\n        'tags': tags.get('tag', []),\n        'triggers': triggers.get('trigger', []),\n        'variables': variables.get('variable', []),\n        'backup_date': datetime.now().isoformat()\n    }\n\n    with open(output_file, 'w') as f:\n        json.dump(backup, f, indent=2)\n\n    print(f\"Backup saved to {output_file}\")\n```\n\n### Bulk Tag Operations\n\n```python\ndef disable_all_tags(service, workspace_path):\n    \"\"\"Pause all tags in a workspace.\"\"\"\n    tags = service.accounts().containers().workspaces().tags().list(\n        parent=workspace_path\n    ).execute()\n\n    for tag in tags.get('tag', []):\n        tag['paused'] = True\n        service.accounts().containers().workspaces().tags().update(\n            path=tag['path'],\n            body=tag\n        ).execute()\n        print(f\"Paused: {tag['name']}\")\n\n\ndef enable_tags_by_prefix(service, workspace_path, prefix):\n    \"\"\"Enable tags matching a prefix.\"\"\"\n    tags = service.accounts().containers().workspaces().tags().list(\n        parent=workspace_path\n    ).execute()\n\n    for tag in tags.get('tag', []):\n        if tag['name'].startswith(prefix):\n            tag['paused'] = False\n            service.accounts().containers().workspaces().tags().update(\n                path=tag['path'],\n                body=tag\n            ).execute()\n            print(f\"Enabled: {tag['name']}\")\n```\n\n### Clone Tags Between Containers\n\n```python\ndef clone_tags(service, source_workspace, target_workspace, tag_prefix):\n    \"\"\"Clone tags from one workspace to another.\"\"\"\n    # Get source tags\n    source_tags = service.accounts().containers().workspaces().tags().list(\n        parent=source_workspace\n    ).execute()\n\n    for tag in source_tags.get('tag', []):\n        if tag['name'].startswith(tag_prefix):\n            # Remove source-specific fields\n            new_tag = {\n                'name': tag['name'],\n                'type': tag['type'],\n                'parameter': tag.get('parameter', []),\n                'firingTriggerId': tag.get('firingTriggerId', [])\n            }\n\n            # Create in target\n            service.accounts().containers().workspaces().tags().create(\n                parent=target_workspace,\n                body=new_tag\n            ).execute()\n            print(f\"Cloned: {tag['name']}\")\n```\n\n### Automated Deployment\n\n```python\ndef deploy_container(service, workspace_path, version_name, version_notes):\n    \"\"\"Create and publish a new container version.\"\"\"\n    # Create version\n    version = service.accounts().containers().workspaces().create_version(\n        path=workspace_path,\n        body={\n            'name': version_name,\n            'notes': version_notes\n        }\n    ).execute()\n\n    version_path = version['containerVersion']['path']\n\n    # Publish\n    published = service.accounts().containers().versions().publish(\n        path=version_path\n    ).execute()\n\n    return published['containerVersion']\n```\n\n## Error Handling\n\n```python\nfrom googleapiclient.errors import HttpError\n\ntry:\n    tag = service.accounts().containers().workspaces().tags().create(\n        parent=workspace_path,\n        body=tag_body\n    ).execute()\nexcept HttpError as error:\n    if error.resp.status == 404:\n        print(\"Resource not found\")\n    elif error.resp.status == 403:\n        print(\"Permission denied\")\n    elif error.resp.status == 409:\n        print(\"Resource already exists\")\n    elif error.resp.status == 429:\n        print(\"Rate limit exceeded - retry later\")\n    else:\n        print(f\"An error occurred: {error}\")\n```\n\n### Rate Limiting with Retry\n\n```python\nimport time\nfrom googleapiclient.errors import HttpError\n\ndef api_call_with_retry(func, max_retries=5):\n    \"\"\"Execute API call with exponential backoff.\"\"\"\n    for attempt in range(max_retries):\n        try:\n            return func()\n        except HttpError as error:\n            if error.resp.status == 429:  # Rate limit\n                wait_time = 2 ** attempt\n                print(f\"Rate limited. Waiting {wait_time}s...\")\n                time.sleep(wait_time)\n            else:\n                raise\n\n    raise Exception(\"Max retries exceeded\")\n\n# Usage\nresult = api_call_with_retry(\n    lambda: service.accounts().containers().list(parent=account_path).execute()\n)\n```\n\n## API Quotas\n\nDefault quotas:\n\n- **Queries per day**: 1,000 (can be increased)\n- **Queries per 100 seconds**: 100\n\nRequest quota increase via Google Cloud Console if needed.\n\n## Resource Paths\n\nAll API operations use resource paths:\n\n```\nAccount:    accounts/{account_id}\nContainer:  accounts/{account_id}/containers/{container_id}\nWorkspace:  accounts/{account_id}/containers/{container_id}/workspaces/{workspace_id}\nTag:        accounts/{account_id}/containers/{container_id}/workspaces/{workspace_id}/tags/{tag_id}\nTrigger:    accounts/{account_id}/containers/{container_id}/workspaces/{workspace_id}/triggers/{trigger_id}\nVariable:   accounts/{account_id}/containers/{container_id}/workspaces/{workspace_id}/variables/{variable_id}\nVersion:    accounts/{account_id}/containers/{container_id}/versions/{version_id}\n```\n\nUse paths from API responses rather than constructing them manually.\n\n## Best Practices\n\n### Use Workspaces\n\nAlways work within a workspace:\n\n1. Create a new workspace for API changes\n2. Make changes in the workspace\n3. Create and publish a version when ready\n4. Don't modify the default workspace\n\n### Test Before Production\n\n```python\n# Create test workspace\ntest_workspace = service.accounts().containers().workspaces().create(\n    parent=container_path,\n    body={'name': 'API Test', 'description': 'Testing API changes'}\n).execute()\n\n# Make changes and test\n\n# Delete if not needed\nservice.accounts().containers().workspaces().delete(\n    path=test_workspace['path']\n).execute()\n```\n\n### Version Everything\n\nAlways create versions with meaningful notes:\n\n```python\nversion = service.accounts().containers().workspaces().create_version(\n    path=workspace_path,\n    body={\n        'name': 'Release 2.3.0',\n        'notes': 'Added GA4 ecommerce tracking\\n- Purchase event\\n- Product views'\n    }\n).execute()\n```\n\n### Batch Requests\n\nFor multiple operations, use batch requests:\n\n```python\nfrom googleapiclient.http import BatchHttpRequest\n\ndef callback(request_id, response, exception):\n    if exception:\n        print(f\"Error: {exception}\")\n    else:\n        print(f\"Created: {response['name']}\")\n\nbatch = service.new_batch_http_request(callback=callback)\n\nfor tag_data in tags_to_create:\n    batch.add(service.accounts().containers().workspaces().tags().create(\n        parent=workspace_path,\n        body=tag_data\n    ))\n\nbatch.execute()\n```\n\n## Complete Workflow Example\n\n```python\nfrom google.oauth2 import service_account\nfrom googleapiclient.discovery import build\n\n# Setup\nSCOPES = ['https://www.googleapis.com/auth/tagmanager.edit.containers',\n          'https://www.googleapis.com/auth/tagmanager.publish']\ncredentials = service_account.Credentials.from_service_account_file(\n    'service-account.json', scopes=SCOPES)\nservice = build('tagmanager', 'v2', credentials=credentials)\n\n# 1. Find container\naccount_path = 'accounts/123456'\ncontainers = service.accounts().containers().list(parent=account_path).execute()\ncontainer = next(c for c in containers['container'] if c['name'] == 'My Site')\ncontainer_path = container['path']\n\n# 2. Create workspace\nworkspace = service.accounts().containers().workspaces().create(\n    parent=container_path,\n    body={'name': 'API Changes', 'description': 'Automated setup'}\n).execute()\nworkspace_path = workspace['path']\n\n# 3. Create trigger\ntrigger = service.accounts().containers().workspaces().triggers().create(\n    parent=workspace_path,\n    body={'name': 'All Pages', 'type': 'PAGEVIEW'}\n).execute()\n\n# 4. Create tag\ntag = service.accounts().containers().workspaces().tags().create(\n    parent=workspace_path,\n    body={\n        'name': 'GA4 Config',\n        'type': 'gaawe',\n        'parameter': [\n            {'key': 'measurementId', 'type': 'template', 'value': 'G-XXXXXX'}\n        ],\n        'firingTriggerId': [trigger['triggerId']]\n    }\n).execute()\n\n# 5. Create and publish version\nversion = service.accounts().containers().workspaces().create_version(\n    path=workspace_path,\n    body={'name': 'API Setup', 'notes': 'Automated GA4 configuration'}\n).execute()\n\npublished = service.accounts().containers().versions().publish(\n    path=version['containerVersion']['path']\n).execute()\n\nprint(f\"Published version: {published['containerVersion']['containerVersionId']}\")\n```\n\n## Quick Reference\n\n| Operation | Method |\n|-----------|--------|\n| List | `.list(parent=parent_path)` |\n| Get | `.get(path=resource_path)` |\n| Create | `.create(parent=parent_path, body=resource_body)` |\n| Update | `.update(path=resource_path, body=resource_body)` |\n| Delete | `.delete(path=resource_path)` |\n| Publish | `.create_version()` then `.publish()` |\n\n## Installation\n\n```bash\n# Python\npip install google-api-python-client google-auth-oauthlib\n\n# Node.js\nnpm install googleapis\n```\n\n## Resources\n\n- [GTM API Reference](https://developers.google.com/tag-platform/tag-manager/api/v2/reference)\n- [GTM API Developer Guide](https://developers.google.com/tag-platform/tag-manager/api/v2/devguide)\n- [OAuth 2.0 Documentation](https://developers.google.com/identity/protocols/oauth2)\n- [Python Client Library](https://github.com/googleapis/google-api-python-client)\n- [Tag Dictionary Reference](https://developers.google.com/tag-platform/tag-manager/api/v2/tag-dictionary-reference)\n",
        "plugins/marketing/skills/gtm/references/best-practices.md": "# GTM Best Practices\n\n**Sources**:\n\n- <https://developers.google.com/tag-platform/tag-manager>\n- <https://support.google.com/tagmanager>\n\n**Last Updated**: 2025-01-09\n\n## Overview\n\nThis guide covers best practices for Google Tag Manager including naming conventions, performance optimisation, security, privacy compliance, and deployment strategies. Following these practices ensures maintainable, secure, and efficient GTM implementations.\n\n## Technical Constraints\n\n### JavaScript (ES5 Requirement)\n\n**Critical**: GTM Custom JavaScript Variables and Custom HTML Tags require ECMAScript 5 (ES5) syntax.\n\n#### ES6 Features NOT Supported\n\n```javascript\n// WILL FAIL - ES6 syntax\nconst myVar = 'value';\nlet count = 0;\nconst arrow = () => console.log('test');\nconst template = `Hello ${name}`;\n\n// CORRECT - ES5 syntax\nvar myVar = 'value';\nvar count = 0;\nvar regularFunc = function() { console.log('test'); };\nvar concatenated = 'Hello ' + name;\n```\n\n#### Custom Templates Exception\n\nCustom Templates (sandboxed JavaScript) support some ES6 features:\n\n- `const` and `let` declarations\n- Template literals\n- Limited modern JavaScript features\n\n#### Workarounds\n\n**Option 1: Transpilation (Recommended)**\n\nUse BabelJS to transpile ES6+ to ES5 before pasting into GTM.\n\n**Option 2: text/gtmscript Tag**\n\nBypass GTM's syntax checking (use with caution):\n\n```html\n<script type=\"text/gtmscript\">\n  // Modern JavaScript here - no syntax validation in GTM UI\n  const myModernCode = () => {\n    // ...\n  };\n</script>\n```\n\n**Caveats**:\n\n- No syntax highlighting in GTM interface\n- No error checking until runtime\n- Harder to debug\n\n### Regular Expressions (RE2 Format)\n\n**Critical**: GTM uses RE2 (GoLang regex), NOT standard JavaScript/PCRE regex.\n\n#### Not Supported in RE2\n\n- Backreferences: `\\1`, `\\2`\n- Lookahead: `(?=...)`, `(?!...)`\n- Lookbehind: `(?<=...)`, `(?<!...)`\n- Conditional expressions\n- Possessive quantifiers\n\n#### Supported in RE2\n\n- Character classes: `[abc]`, `[^abc]`, `[a-z]`\n- Quantifiers: `*`, `+`, `?`, `{n,m}`\n- Anchors: `^`, `$`, `\\A`, `\\z`\n- Perl character classes: `\\d`, `\\w`, `\\s`\n- Groups: `(...)`, `(?:...)` (non-capturing)\n- Named groups: `(?P<name>...)`\n- Alternation: `|`\n- Case-insensitive flag: `(?i)`\n\n#### Common RE2 Patterns\n\n```regex\n# Match product pages\n^/products/[^/]+$\n\n# Category with ID\n^/category/\\d+\n\n# Case-insensitive matching\n(?i)^/checkout\n\n# Multiple domains\n^https://(www\\.)?example\\.(com|net)\n```\n\n## Naming Conventions\n\n### Tags\n\nFormat: `[Platform] - [Type] - [Description]`\n\n**Examples**:\n\n- `GA4 - Config - Main Property`\n- `GA4 - Event - Form Submit`\n- `GA4 - Event - Purchase Complete`\n- `Google Ads - Conversion - Form Submit`\n- `Google Ads - Remarketing - All Pages`\n- `FB - Pixel - Page View`\n- `LinkedIn - Insight - All Pages`\n- `Custom - Hotjar - Initialisation`\n\n### Triggers\n\nFormat: `[Event Type] - [Description]`\n\n**Examples**:\n\n- `Pageview - All Pages`\n- `Pageview - Product Pages`\n- `Click - CTA Buttons`\n- `Click - Outbound Links`\n- `Form - Contact Form`\n- `Custom Event - Purchase`\n- `Scroll - 50% Blog Posts`\n- `Timer - 30 Seconds`\n- `History Change - All`\n\n### Variables\n\nFormat: `[Type] - [Description]`\n\n**Prefixes**:\n\n- `DL` - Data Layer Variable\n- `CJS` - Custom JavaScript\n- `JS` - JavaScript Variable\n- `Const` - Constant\n- `Lookup` - Lookup Table\n- `Regex` - Regex Table\n- `URL` - URL Variable\n- `Cookie` - First Party Cookie\n- `DOM` - DOM Element\n\n**Examples**:\n\n- `DL - User ID`\n- `DL - Transaction Total`\n- `DL - Product Name`\n- `CJS - Page Category`\n- `CJS - Formatted Price`\n- `Const - GA4 Measurement ID`\n- `Const - FB Pixel ID`\n- `URL - UTM Source`\n- `Cookie - Session ID`\n- `Lookup - Page Type`\n\n### Folders\n\nOrganise by platform or purpose:\n\n```\nAnalytics/\n  GA4 Tags\n  GA4 Triggers\n  GA4 Variables\nAdvertising/\n  Google Ads\n  Facebook\n  LinkedIn\nUtilities/\n  Error Tracking\n  Performance Monitoring\nTesting/\n  Development Tags\n```\n\n## Container Organisation\n\n### Workspace Management\n\n**Development Workflow**:\n\n1. Create workspace for each feature/change\n2. Name workspace descriptively: `Add GA4 Ecommerce Tracking`\n3. Work in isolation\n4. Test thoroughly in Preview mode\n5. Submit for review\n6. Merge and publish\n\n**Best Practices**:\n\n- One feature per workspace\n- Regular cleanup of abandoned workspaces\n- Clear workspace descriptions\n- Resolve conflicts promptly\n\n### Version Control\n\n**Version Naming**:\n\n```\nv[Major].[Minor] - [Description]\n```\n\n**Examples**:\n\n- `v1.0 - Initial GTM Setup`\n- `v1.1 - Add GA4 Ecommerce`\n- `v2.0 - Major Restructure`\n- `v2.1 - Fix Checkout Tracking`\n\n**Version Notes Template**:\n\n```\nChanges:\n- Added GA4 purchase event tracking\n- Updated data layer structure for checkout\n- Fixed duplicate page view issue\n\nTesting:\n- Verified in dev environment\n- Tested all checkout flows\n- Confirmed data in GA4 DebugView\n\nTags Added:\n- GA4 - Event - Purchase Complete\n\nTags Modified:\n- GA4 - Event - Add to Cart (updated parameters)\n```\n\n### User Permissions\n\n**Permission Levels**:\n\n- **No Access**: External users\n- **Read**: Stakeholders, analysts (view only)\n- **Edit**: Developers, marketers\n- **Approve**: Senior developers, managers\n- **Publish**: Select trusted users only\n\n## Performance Optimisation\n\n### Tag Load Order\n\nUse tag firing priority (higher numbers fire first):\n\n```\n100 - Critical tags (error tracking, consent)\n50  - Analytics tags (GA4, Adobe)\n25  - Marketing tags (ads pixels)\n10  - Third-party tags\n0   - Default\n```\n\n### Minimise Custom HTML\n\n**Prefer** (in order):\n\n1. Built-in tags (GA4, Google Ads)\n2. Community Gallery templates\n3. Custom templates\n4. Custom HTML (last resort)\n\n**Why**:\n\n- Built-in tags are optimised\n- Less maintenance\n- Better performance\n- Reduced security risk\n\n### Tag Timeout\n\nConfigure timeout in Admin > Container Settings > Tag Settings:\n\n- Default: 2000ms (2 seconds)\n- Recommended: 3000-5000ms for complex tags\n\n**Prevents**:\n\n- Tags blocking page indefinitely\n- Poor user experience\n- False abandonment metrics\n\n### Container Size\n\nKeep container lean:\n\n- Remove unused tags, triggers, variables\n- Consolidate duplicate functionality\n- Audit quarterly\n- Monitor container size\n\n## Security Best Practices\n\n### Custom HTML Security\n\n**Security Checklist**:\n\n- [ ] No dangerous functions with user input\n- [ ] No document.write() with external sources\n- [ ] Validate all external script sources\n- [ ] Review third-party tag code\n- [ ] Use CSP (Content Security Policy) headers\n\n### Data Layer Security\n\n**Never Push PII**:\n\n```javascript\n// NEVER DO THIS\ndataLayer.push({\n  'email': 'user@example.com',\n  'phone': '+1234567890'\n});\n\n// HASH OR PSEUDONYMISE\ndataLayer.push({\n  'userIdHash': sha256('user@example.com'),\n  'hasPhone': true\n});\n```\n\n### Template Permissions\n\nReview custom template permissions:\n\n- Access to APIs\n- Access to global variables\n- Access to local storage\n- Network requests\n\nGrant minimum necessary permissions.\n\n## Quality Assurance\n\n### Testing Checklist\n\n**Before Publishing**:\n\n- [ ] Preview mode testing completed\n- [ ] All triggers fire correctly\n- [ ] Data layer variables populate\n- [ ] Tags send expected data\n- [ ] No console errors\n- [ ] Cross-browser testing\n- [ ] Mobile testing\n- [ ] Edge case scenarios tested\n\n### Debug Workflow\n\n1. Enable Preview Mode\n2. Navigate to test page\n3. Verify in Debug Panel:\n   - Tags Fired\n   - Tags Not Fired\n   - Data Layer\n   - Variables\n4. Check receiving platform (GA4, Google Ads, etc.)\n5. Test edge cases\n\n## Deployment Best Practices\n\n### Publishing Workflow\n\n1. **Development**: Test in development workspace\n2. **Staging**: Test in staging environment\n3. **Preview**: Final check in preview mode\n4. **Publish**: Publish to live container\n5. **Monitor**: Watch for errors/issues\n\n### Emergency Rollback\n\n**Quick Rollback**:\n\nVersions > Previous Version > Actions > Publish\n\n**Keep**:\n\n- Last 3 working versions readily accessible\n- Emergency contact list\n- Rollback documentation\n\n### Production Deployment Checklist\n\n- [ ] Workspace approved by team lead\n- [ ] All tests passing\n- [ ] Change documented in version notes\n- [ ] Stakeholders notified\n- [ ] Monitoring in place\n- [ ] Rollback plan ready\n\n## Maintenance\n\n### Regular Audits\n\n**Quarterly Review**:\n\n- Remove unused tags/triggers/variables\n- Update deprecated features\n- Review tag performance\n- Check for duplicate tracking\n- Verify naming consistency\n\n### Performance Monitoring\n\n**Monitor**:\n\n- Page load time impact\n- Tag load time\n- Failed tags\n- Timeout events\n- Error rates\n\n**Tools**:\n\n- Google Tag Assistant\n- Chrome DevTools\n- GTM Debug Panel\n- GA4 DebugView\n\n### Version Cleanup\n\n**Retention Policy**:\n\n- Keep last 10-15 versions\n- Archive old versions\n- Document reason for major changes\n- Maintain change history\n\n## Documentation\n\n### External Documentation\n\n**Maintain**:\n\n1. **GTM Implementation Guide**\n   - Container architecture\n   - Tag inventory\n   - Trigger mapping\n   - Variable dictionary\n   - Data layer specification\n\n2. **Change Log**\n   - Date of change\n   - Description\n   - Who made the change\n   - Reason for change\n\n3. **Troubleshooting Guide**\n   - Common issues\n   - Solutions\n   - Contact information\n\n## Resources\n\n- [GTM Developer Documentation](https://developers.google.com/tag-platform/tag-manager)\n- [GTM Help Center](https://support.google.com/tagmanager)\n- [GTM Community](https://support.google.com/tagmanager/community)\n- [RE2 Regex Syntax](https://github.com/google/re2/wiki/Syntax)\n",
        "plugins/marketing/skills/gtm/references/custom-templates.md": "# GTM Custom Templates\n\n**Sources**:\n\n- <https://developers.google.com/tag-platform/tag-manager/templates>\n- <https://developers.google.com/tag-platform/tag-manager/templates/api>\n\n**Last Updated**: 2025-01-09\n\n## Overview\n\nCustom Templates allow you to build reusable tag and variable templates with a user interface and sandboxed JavaScript. They provide security, governance, and maintainability benefits over Custom HTML tags. This guide covers template creation, sandboxed JavaScript APIs, permissions, testing, and publishing.\n\n## What Are Custom Templates?\n\nCustom Templates encapsulate code into reusable, configurable components:\n\n- **Tag Templates**: Create tags with UI controls instead of raw code\n- **Variable Templates**: Create variables with configurable options\n- **Client Templates**: Server-side GTM client endpoints\n\n### Benefits\n\n- **Security**: Sandboxed JavaScript with explicit permissions\n- **Governance**: Control what code can access\n- **Maintainability**: UI-based configuration\n- **Shareability**: Export/import or publish to Community Gallery\n- **No unsafe-eval**: Compiled at container build time\n\n## Sandboxed JavaScript\n\n### What Is Sandboxed JavaScript?\n\nA restricted subset of JavaScript used in custom templates:\n\n- No direct DOM access\n- No window/document object\n- No arbitrary HTTP requests\n- Must use `require()` to import APIs\n- All operations require explicit permissions\n\n### Basic Template Structure\n\n```javascript\n// Import required APIs\nconst sendPixel = require('sendPixel');\nconst logToConsole = require('logToConsole');\nconst encodeUriComponent = require('encodeUriComponent');\n\n// Access template configuration\nconst endpoint = data.endpoint;\nconst eventName = data.eventName;\n\n// Execute template logic\nconst url = endpoint + '?event=' + encodeUriComponent(eventName);\nsendPixel(url, data.gtmOnSuccess, data.gtmOnFailure);\n```\n\n### The `data` Object\n\nContains values from template fields:\n\n```javascript\n// If field is named \"pixelId\"\nconst pixelId = data.pixelId;\n\n// If checkbox field is named \"enableDebug\"\nconst debug = data.enableDebug;  // true or false\n```\n\n### Success and Failure Callbacks\n\nTag templates must signal completion:\n\n```javascript\n// Success - tag executed correctly\ndata.gtmOnSuccess();\n\n// Failure - tag encountered an error\ndata.gtmOnFailure();\n```\n\n## Common APIs\n\n### Network APIs\n\n```javascript\n// Send pixel (GET request)\nconst sendPixel = require('sendPixel');\nsendPixel(url, onSuccess, onFailure);\n\n// HTTP request (GET, POST, etc.)\nconst sendHttpRequest = require('sendHttpRequest');\nsendHttpRequest(url, options, body)\n  .then(onSuccess)\n  .catch(onFailure);\n\n// Inject external script\nconst injectScript = require('injectScript');\ninjectScript(url, onSuccess, onFailure, cacheToken);\n```\n\n### Data Conversion\n\n```javascript\nconst makeInteger = require('makeInteger');\nconst makeNumber = require('makeNumber');\nconst makeString = require('makeString');\nconst JSON = require('JSON');\n\nconst num = makeNumber('123.45');  // 123.45\nconst int = makeInteger('123.45'); // 123\nconst str = makeString(123);       // '123'\nconst obj = JSON.parse('{\"key\":\"value\"}');\nconst json = JSON.stringify({key: 'value'});\n```\n\n### URL and Encoding\n\n```javascript\nconst encodeUri = require('encodeUri');\nconst encodeUriComponent = require('encodeUriComponent');\nconst decodeUri = require('decodeUri');\nconst decodeUriComponent = require('decodeUriComponent');\nconst getUrl = require('getUrl');\nconst parseUrl = require('parseUrl');\n\nconst encoded = encodeUriComponent('hello world');\nconst hostname = getUrl('hostname');\nconst urlParts = parseUrl('https://example.com/page?param=value');\n```\n\n### Storage APIs\n\n```javascript\n// Cookies\nconst getCookieValues = require('getCookieValues');\nconst setCookie = require('setCookie');\n\nconst cookies = getCookieValues('cookieName');\nsetCookie('name', 'value', {\n  domain: 'example.com',\n  path: '/',\n  'max-age': 3600\n});\n\n// LocalStorage\nconst localStorage = require('localStorage');\nconst value = localStorage.getItem('key');\nlocalStorage.setItem('key', 'value');\n```\n\n### Window Access\n\n```javascript\n// Call window function\nconst callInWindow = require('callInWindow');\ncallInWindow('functionName', arg1, arg2);\n\n// Copy from window\nconst copyFromWindow = require('copyFromWindow');\nconst gaData = copyFromWindow('ga');\n\n// Set in window\nconst setInWindow = require('setInWindow');\nsetInWindow('myVar', 'value', true);\n```\n\n### Data Layer\n\n```javascript\nconst copyFromDataLayer = require('copyFromDataLayer');\nconst gtagSet = require('gtagSet');\n\nconst userId = copyFromDataLayer('userId');\ngtagSet({'user_id': userId});\n```\n\n### Utility\n\n```javascript\nconst logToConsole = require('logToConsole');\nconst getType = require('getType');\nconst queryPermission = require('queryPermission');\nconst getTimestampMillis = require('getTimestampMillis');\nconst generateRandom = require('generateRandom');\nconst Math = require('Math');\n\nlogToConsole('Debug message');\nconst type = getType(data.value);  // 'string', 'number', 'object', etc.\nconst canInject = queryPermission('inject_script', url);\nconst now = getTimestampMillis();\nconst random = generateRandom(1, 100);\n```\n\n## Building Tag Templates\n\n### Tag Template Workflow\n\n1. **Define Template Info**: Name, description, logo\n2. **Configure Fields**: UI elements for user input\n3. **Write Code**: Sandboxed JavaScript logic\n4. **Set Permissions**: Define allowed operations\n5. **Write Tests**: Validate functionality\n6. **Preview and Test**: Test in template editor\n\n### Simple Pixel Tag\n\n```javascript\nconst sendPixel = require('sendPixel');\nconst encodeUriComponent = require('encodeUriComponent');\n\nconst pixelUrl = data.pixelUrl +\n  '?id=' + encodeUriComponent(data.pixelId) +\n  '&event=' + encodeUriComponent(data.eventName);\n\nsendPixel(pixelUrl, data.gtmOnSuccess, data.gtmOnFailure);\n```\n\n### HTTP Request Tag\n\n```javascript\nconst sendHttpRequest = require('sendHttpRequest');\nconst JSON = require('JSON');\n\nconst postBody = JSON.stringify({\n  event: data.eventName,\n  userId: data.userId\n});\n\nconst options = {\n  headers: {'Content-Type': 'application/json'},\n  method: 'POST'\n};\n\nsendHttpRequest(data.endpoint, options, postBody)\n  .then(data.gtmOnSuccess)\n  .catch(data.gtmOnFailure);\n```\n\n### Script Injection Tag\n\n```javascript\nconst injectScript = require('injectScript');\nconst queryPermission = require('queryPermission');\n\nconst url = data.scriptUrl;\n\nif (queryPermission('inject_script', url)) {\n  injectScript(url, data.gtmOnSuccess, data.gtmOnFailure);\n} else {\n  data.gtmOnFailure();\n}\n```\n\n## Building Variable Templates\n\n### Variable Template Basics\n\nVariable templates return a value:\n\n```javascript\nconst getCookieValues = require('getCookieValues');\n\nconst cookieName = data.cookieName;\nconst cookies = getCookieValues(cookieName);\n\nif (cookies && cookies.length > 0) {\n  return cookies[0];\n}\n\nreturn data.defaultValue || '';\n```\n\n### LocalStorage Variable\n\n```javascript\nconst localStorage = require('localStorage');\n\nconst key = data.storageKey;\nconst value = localStorage.getItem(key);\n\nreturn value || data.defaultValue;\n```\n\n### Lookup Variable\n\n```javascript\nconst makeTableMap = require('makeTableMap');\n\nconst lookupTable = makeTableMap(data.table, 'key', 'value');\nconst inputValue = data.inputVariable;\n\nreturn lookupTable[inputValue] || data.defaultValue;\n```\n\n## Field Configuration\n\n### Common Field Types\n\n**Text Input**:\n\n```javascript\n{\n  \"type\": \"TEXT\",\n  \"name\": \"apiKey\",\n  \"displayName\": \"API Key\",\n  \"simpleValueType\": true,\n  \"valueValidators\": [\n    {\"type\": \"NON_EMPTY\"},\n    {\"type\": \"REGEX\", \"args\": [\"^[a-zA-Z0-9]{32}$\"]}\n  ]\n}\n```\n\n**Select Dropdown**:\n\n```javascript\n{\n  \"type\": \"SELECT\",\n  \"name\": \"eventType\",\n  \"displayName\": \"Event Type\",\n  \"selectItems\": [\n    {\"value\": \"pageview\", \"displayValue\": \"Pageview\"},\n    {\"value\": \"event\", \"displayValue\": \"Event\"}\n  ],\n  \"simpleValueType\": true\n}\n```\n\n**Checkbox**:\n\n```javascript\n{\n  \"type\": \"CHECKBOX\",\n  \"name\": \"enableDebug\",\n  \"checkboxText\": \"Enable Debug Logging\",\n  \"simpleValueType\": true,\n  \"defaultValue\": false\n}\n```\n\n**Group**:\n\n```javascript\n{\n  \"type\": \"GROUP\",\n  \"name\": \"advancedSettings\",\n  \"displayName\": \"Advanced Settings\",\n  \"groupStyle\": \"ZIPPY_CLOSED\",\n  \"subParams\": [\n    // Nested fields here\n  ]\n}\n```\n\n## Permissions\n\n### How Permissions Work\n\nWhen you `require()` an API, permissions are automatically added. Configure them in the Permissions tab.\n\n### sendPixel Permission\n\n```json\n{\n  \"allowedUrls\": \"specific\",\n  \"urls\": [\n    \"https://example.com/*\"\n  ]\n}\n```\n\n### get_cookies Permission\n\n```json\n{\n  \"cookieAccess\": \"specific\",\n  \"cookies\": [\n    \"session_id\",\n    \"user_*\"\n  ]\n}\n```\n\n### Best Practice\n\nUse the most restrictive permissions possible. Avoid \"any\" when you can specify exact URLs or cookie names.\n\n## Template Testing\n\n### Writing Tests\n\n```javascript\n// Test successful execution\nscenarios:\n- name: Tag fires successfully\n  code: |-\n    const mockData = {\n      endpoint: 'https://example.com/api',\n      eventName: 'test_event'\n    };\n\n    runCode(mockData);\n\n    assertApi('gtmOnSuccess').wasCalled();\n    assertApi('sendHttpRequest').wasCalledWith(\n      'https://example.com/api',\n      assertThat.objectContaining({method: 'POST'})\n    );\n```\n\n### Test APIs\n\n```javascript\n// Run template code\nrunCode(mockData);\n\n// Assert API called\nassertApi('sendPixel').wasCalled();\nassertApi('sendPixel').wasCalledWith(expectedUrl);\n\n// Assert value\nassertThat(result).isEqualTo('expected');\nassertThat(result).isNotEqualTo('unexpected');\n\n// Mock API\nmock('getCookieValues', function(name) {\n  if (name === 'session_id') {\n    return ['abc123'];\n  }\n  return [];\n});\n\n// Fail test\nfail('This should not happen');\n```\n\n### Test Patterns\n\n**Test Success Path**:\n\n```javascript\nconst mockData = {\n  pixelUrl: 'https://example.com/pixel',\n  eventName: 'purchase'\n};\n\nrunCode(mockData);\nassertApi('gtmOnSuccess').wasCalled();\n```\n\n**Test Failure Path**:\n\n```javascript\nmock('sendPixel', function(url, onSuccess, onFailure) {\n  onFailure();\n});\n\nrunCode(mockData);\nassertApi('gtmOnFailure').wasCalled();\n```\n\n**Test Variable Return**:\n\n```javascript\nmock('getCookieValues', function() {\n  return ['test_value'];\n});\n\nconst result = runCode({cookieName: 'test'});\nassertThat(result).isEqualTo('test_value');\n```\n\n## Error Handling\n\n```javascript\nconst sendHttpRequest = require('sendHttpRequest');\nconst logToConsole = require('logToConsole');\n\nsendHttpRequest(data.endpoint)\n  .then(function(response) {\n    logToConsole('Success:', response);\n    data.gtmOnSuccess();\n  })\n  .catch(function(error) {\n    logToConsole('Error:', error);\n    data.gtmOnFailure();\n  });\n```\n\n## Data Validation\n\n```javascript\nconst makeNumber = require('makeNumber');\nconst getType = require('getType');\nconst logToConsole = require('logToConsole');\n\n// Validate input exists\nif (getType(data.value) === 'undefined') {\n  logToConsole('Missing required value');\n  data.gtmOnFailure();\n  return;\n}\n\n// Convert and validate\nvar numValue = makeNumber(data.value);\nif (numValue === undefined) {\n  logToConsole('Invalid number');\n  data.gtmOnFailure();\n  return;\n}\n\n// Continue with valid data\ndata.gtmOnSuccess();\n```\n\n## Publishing to Community Gallery\n\n### Preparation\n\n1. **Complete Template Info**\n   - Descriptive name and description\n   - Appropriate categories\n   - Brand information\n   - Thumbnail image (optional)\n\n2. **Comprehensive Tests**\n   - Test all code paths\n   - Test error handling\n   - Test edge cases\n\n3. **Documentation**\n   - Clear field descriptions\n   - Help text for complex fields\n   - Notes section with usage instructions\n\n### Submission\n\n1. Export template from GTM\n2. Submit to Community Template Gallery\n3. Address reviewer feedback\n4. Template becomes publicly available\n\n## Converting Regular JS to Sandboxed JS\n\n### Direct DOM Access\n\n```javascript\n// Regular JavaScript (won't work)\ndocument.getElementById('element');\n\n// Sandboxed JavaScript\n// Not directly possible - use callInWindow or copyFromWindow\n```\n\n### Window Access\n\n```javascript\n// Regular JavaScript\nwindow.dataLayer.push({});\n\n// Sandboxed JavaScript\nconst callInWindow = require('callInWindow');\ncallInWindow('dataLayer.push', {event: 'custom'});\n```\n\n### HTTP Requests\n\n```javascript\n// Regular JavaScript\nvar xhr = new XMLHttpRequest();\n\n// Sandboxed JavaScript\nconst sendHttpRequest = require('sendHttpRequest');\nsendHttpRequest(url, {method: 'GET'})\n  .then(data.gtmOnSuccess)\n  .catch(data.gtmOnFailure);\n```\n\n## Quick Reference\n\n| Task | API |\n|------|-----|\n| Send pixel | `sendPixel(url, onSuccess, onFailure)` |\n| HTTP request | `sendHttpRequest(url, options, body)` |\n| Inject script | `injectScript(url, onSuccess, onFailure)` |\n| Read cookie | `getCookieValues(name)` |\n| Set cookie | `setCookie(name, value, options)` |\n| Read data layer | `copyFromDataLayer(key)` |\n| Get URL | `getUrl(component)` |\n| Parse URL | `parseUrl(url)` |\n| Encode URL | `encodeUriComponent(str)` |\n| Parse JSON | `JSON.parse(str)` |\n| Stringify JSON | `JSON.stringify(obj)` |\n| Log to console | `logToConsole(message)` |\n| Check type | `getType(value)` |\n| Query permission | `queryPermission(permission, arg)` |\n\n## Resources\n\n- [Custom Templates Guide](https://developers.google.com/tag-platform/tag-manager/templates)\n- [Sandboxed JavaScript API](https://developers.google.com/tag-platform/tag-manager/templates/api)\n- [Community Template Gallery](https://tagmanager.google.com/gallery/)\n- [Template Testing](https://developers.google.com/tag-platform/tag-manager/templates/tests)\n",
        "plugins/marketing/skills/gtm/references/datalayer.md": "# Data Layer Implementation\n\n**Sources**:\n\n- <https://developers.google.com/tag-platform/tag-manager/datalayer>\n- <https://developers.google.com/analytics/devguides/collection/ga4/ecommerce>\n\n**Last Updated**: 2025-01-09\n\n## Overview\n\nThe data layer is a JavaScript object that passes information from your website to Google Tag Manager. It serves as the central hub for all tracking data, enabling consistent and reliable tag configuration. This guide covers data layer fundamentals, e-commerce implementation, SPA handling, and best practices.\n\n## Data Layer Fundamentals\n\n### What is the Data Layer?\n\nThe data layer is a JavaScript array that stores data for GTM to consume:\n\n```javascript\nwindow.dataLayer = window.dataLayer || [];\n```\n\nEvery subsequent push into the dataLayer should be preceded with the above snippet for safety.\n\n### How It Works\n\n1. Website pushes data to `dataLayer`\n2. GTM listens for pushes\n3. Data becomes available via Data Layer Variables\n4. Tags and triggers can access the data\n\n### Basic Push Syntax\n\n```javascript\nwindow.dataLayer.push({\n  'key': 'value',\n  'anotherKey': 'anotherValue'\n});\n```\n\n### Event Push Syntax\n\n```javascript\nwindow.dataLayer.push({\n  'event': 'custom_event_name',\n  'eventData': 'associated data'\n});\n```\n\n## Data Layer Initialisation\n\n### Proper Setup Order\n\n```html\n<!-- 1. Initialise data layer BEFORE GTM -->\n<script>\n  window.dataLayer = window.dataLayer || [];\n  window.dataLayer.push({\n    'pageType': 'product',\n    'userId': 'USER123',\n    'userStatus': 'logged_in'\n  });\n</script>\n\n<!-- 2. GTM snippet loads and reads initial data -->\n<script>...</script>\n```\n\n### Why Order Matters\n\n- Data must be available when Container Loaded fires\n- Page View triggers need access to initial data\n- Prevents race conditions\n\n## Common Data Layer Patterns\n\n### Page Data\n\n```javascript\nwindow.dataLayer.push({\n  'event': 'page_data',\n  'page': {\n    'type': 'product',\n    'category': 'Electronics',\n    'subcategory': 'Phones'\n  }\n});\n```\n\n### User Data\n\n```javascript\nwindow.dataLayer.push({\n  'event': 'user_data',\n  'user': {\n    'id': 'USER123',\n    'status': 'logged_in',\n    'type': 'premium',\n    'lifetime_value': 1500.00\n  }\n});\n```\n\n### Form Submission\n\n```javascript\nwindow.dataLayer.push({\n  'event': 'form_submit',\n  'form': {\n    'id': 'contact-form',\n    'name': 'Contact Us',\n    'type': 'contact'\n  }\n});\n```\n\n### Button Click\n\n```javascript\nwindow.dataLayer.push({\n  'event': 'button_click',\n  'button': {\n    'id': 'cta-signup',\n    'text': 'Sign Up Now',\n    'location': 'hero'\n  }\n});\n```\n\n## GA4 E-commerce Data Layer\n\n### View Item List\n\n```javascript\nwindow.dataLayer.push({ ecommerce: null });  // Clear previous ecommerce data\nwindow.dataLayer.push({\n  'event': 'view_item_list',\n  'ecommerce': {\n    'item_list_id': 'category_phones',\n    'item_list_name': 'Phones',\n    'items': [\n      {\n        'item_id': 'SKU001',\n        'item_name': 'iPhone 15',\n        'affiliation': 'Online Store',\n        'index': 0,\n        'item_brand': 'Apple',\n        'item_category': 'Electronics',\n        'item_category2': 'Phones',\n        'item_list_id': 'category_phones',\n        'item_list_name': 'Phones',\n        'price': 1299.00,\n        'quantity': 1\n      },\n      {\n        'item_id': 'SKU002',\n        'item_name': 'Samsung Galaxy S24',\n        'index': 1,\n        'item_brand': 'Samsung',\n        'item_category': 'Electronics',\n        'item_category2': 'Phones',\n        'price': 999.00,\n        'quantity': 1\n      }\n    ]\n  }\n});\n```\n\n### Select Item\n\n```javascript\nwindow.dataLayer.push({ ecommerce: null });\nwindow.dataLayer.push({\n  'event': 'select_item',\n  'ecommerce': {\n    'item_list_id': 'category_phones',\n    'item_list_name': 'Phones',\n    'items': [{\n      'item_id': 'SKU001',\n      'item_name': 'iPhone 15',\n      'item_brand': 'Apple',\n      'item_category': 'Electronics',\n      'price': 1299.00,\n      'quantity': 1\n    }]\n  }\n});\n```\n\n### View Item\n\n```javascript\nwindow.dataLayer.push({ ecommerce: null });\nwindow.dataLayer.push({\n  'event': 'view_item',\n  'ecommerce': {\n    'currency': 'AUD',\n    'value': 1299.00,\n    'items': [{\n      'item_id': 'SKU001',\n      'item_name': 'iPhone 15',\n      'affiliation': 'Online Store',\n      'item_brand': 'Apple',\n      'item_category': 'Electronics',\n      'item_category2': 'Phones',\n      'item_variant': '128GB Black',\n      'price': 1299.00,\n      'quantity': 1\n    }]\n  }\n});\n```\n\n### Add to Cart\n\n```javascript\nwindow.dataLayer.push({ ecommerce: null });\nwindow.dataLayer.push({\n  'event': 'add_to_cart',\n  'ecommerce': {\n    'currency': 'AUD',\n    'value': 1299.00,\n    'items': [{\n      'item_id': 'SKU001',\n      'item_name': 'iPhone 15',\n      'item_brand': 'Apple',\n      'item_category': 'Electronics',\n      'item_variant': '128GB Black',\n      'price': 1299.00,\n      'quantity': 1\n    }]\n  }\n});\n```\n\n### Remove from Cart\n\n```javascript\nwindow.dataLayer.push({ ecommerce: null });\nwindow.dataLayer.push({\n  'event': 'remove_from_cart',\n  'ecommerce': {\n    'currency': 'AUD',\n    'value': 1299.00,\n    'items': [{\n      'item_id': 'SKU001',\n      'item_name': 'iPhone 15',\n      'price': 1299.00,\n      'quantity': 1\n    }]\n  }\n});\n```\n\n### View Cart\n\n```javascript\nwindow.dataLayer.push({ ecommerce: null });\nwindow.dataLayer.push({\n  'event': 'view_cart',\n  'ecommerce': {\n    'currency': 'AUD',\n    'value': 2298.00,\n    'items': [\n      {\n        'item_id': 'SKU001',\n        'item_name': 'iPhone 15',\n        'price': 1299.00,\n        'quantity': 1\n      },\n      {\n        'item_id': 'SKU003',\n        'item_name': 'AirPods Pro',\n        'price': 399.00,\n        'quantity': 1\n      }\n    ]\n  }\n});\n```\n\n### Begin Checkout\n\n```javascript\nwindow.dataLayer.push({ ecommerce: null });\nwindow.dataLayer.push({\n  'event': 'begin_checkout',\n  'ecommerce': {\n    'currency': 'AUD',\n    'value': 2298.00,\n    'coupon': 'SUMMER10',\n    'items': [{\n      'item_id': 'SKU001',\n      'item_name': 'iPhone 15',\n      'price': 1299.00,\n      'quantity': 1\n    }]\n  }\n});\n```\n\n### Add Shipping Info\n\n```javascript\nwindow.dataLayer.push({ ecommerce: null });\nwindow.dataLayer.push({\n  'event': 'add_shipping_info',\n  'ecommerce': {\n    'currency': 'AUD',\n    'value': 2298.00,\n    'shipping_tier': 'Express',\n    'items': [{\n      'item_id': 'SKU001',\n      'item_name': 'iPhone 15',\n      'price': 1299.00,\n      'quantity': 1\n    }]\n  }\n});\n```\n\n### Add Payment Info\n\n```javascript\nwindow.dataLayer.push({ ecommerce: null });\nwindow.dataLayer.push({\n  'event': 'add_payment_info',\n  'ecommerce': {\n    'currency': 'AUD',\n    'value': 2298.00,\n    'payment_type': 'Credit Card',\n    'items': [{\n      'item_id': 'SKU001',\n      'item_name': 'iPhone 15',\n      'price': 1299.00,\n      'quantity': 1\n    }]\n  }\n});\n```\n\n### Purchase\n\n```javascript\nwindow.dataLayer.push({ ecommerce: null });\nwindow.dataLayer.push({\n  'event': 'purchase',\n  'ecommerce': {\n    'transaction_id': 'T12345',\n    'affiliation': 'Online Store',\n    'value': 2348.00,\n    'tax': 213.45,\n    'shipping': 50.00,\n    'currency': 'AUD',\n    'coupon': 'SUMMER10',\n    'items': [\n      {\n        'item_id': 'SKU001',\n        'item_name': 'iPhone 15',\n        'affiliation': 'Online Store',\n        'coupon': 'SUMMER10',\n        'item_brand': 'Apple',\n        'item_category': 'Electronics',\n        'item_category2': 'Phones',\n        'item_variant': '128GB Black',\n        'price': 1299.00,\n        'quantity': 1\n      },\n      {\n        'item_id': 'SKU003',\n        'item_name': 'AirPods Pro',\n        'item_brand': 'Apple',\n        'item_category': 'Electronics',\n        'item_category2': 'Audio',\n        'price': 399.00,\n        'quantity': 1\n      }\n    ]\n  }\n});\n```\n\n### Refund\n\n```javascript\nwindow.dataLayer.push({ ecommerce: null });\nwindow.dataLayer.push({\n  'event': 'refund',\n  'ecommerce': {\n    'transaction_id': 'T12345',\n    'value': 1299.00,\n    'currency': 'AUD',\n    'items': [{\n      'item_id': 'SKU001',\n      'item_name': 'iPhone 15',\n      'price': 1299.00,\n      'quantity': 1\n    }]\n  }\n});\n```\n\n## Single-Page Application (SPA) Handling\n\n### Virtual Pageviews\n\nFor SPAs, push virtual pageviews when routes change:\n\n```javascript\n// React Router example\nuseEffect(() => {\n  window.dataLayer.push({\n    'event': 'virtual_pageview',\n    'page_path': location.pathname,\n    'page_title': document.title,\n    'page_location': window.location.href\n  });\n}, [location]);\n```\n\n### Data Clearing for SPAs\n\nClear previous page data to prevent carryover:\n\n```javascript\n// Method 1: Set to undefined\nwindow.dataLayer.push({\n  'event': 'virtual_pageview',\n  'page_path': '/new-page',\n  // Clear previous values\n  'transaction_id': undefined,\n  'ecommerce': undefined\n});\n\n// Method 2: Use reset function\nwindow.dataLayer.push(function() {\n  this.reset();\n});\n\nwindow.dataLayer.push({\n  'event': 'virtual_pageview',\n  'page_path': '/new-page'\n});\n```\n\n### What to Clear\n\n**Clear on every virtual pageview**:\n\n- Previous page-scoped data\n- Transaction data\n- Ecommerce data\n\n**Keep persistent**:\n\n- User ID\n- User status\n- Session-level data\n\n## Data Layer Best Practices\n\n### Never Overwrite the Array\n\n```javascript\n// BAD - Loses existing data\ndataLayer = [{'key': 'value'}];\n\n// GOOD - Preserves existing data\nwindow.dataLayer.push({'key': 'value'});\n```\n\n### Use Correct Casing\n\n```javascript\n// BAD - Wrong casing\nwindow.dataLayer.push({});  // lowercase 'l'\nwindow.dataLayer.push({});  // capital 'D'\n\n// GOOD - Correct camelCase\nwindow.dataLayer.push({});\n```\n\n### Quote Variable Names\n\n```javascript\n// GOOD - Always use quotes\nwindow.dataLayer.push({\n  'variable-name': 'value',\n  'anotherVariable': 'value'\n});\n```\n\n### Consistent Naming\n\n```javascript\n// BAD - Inconsistent\n// Page 1:\nwindow.dataLayer.push({'user_type': 'premium'});\n// Page 2:\nwindow.dataLayer.push({'userType': 'premium'});\n\n// GOOD - Consistent across all pages\nwindow.dataLayer.push({'userType': 'premium'});\n```\n\n### Clear E-commerce Data\n\nAlways clear ecommerce object before pushing:\n\n```javascript\nwindow.dataLayer.push({ ecommerce: null });\nwindow.dataLayer.push({\n  'event': 'purchase',\n  'ecommerce': { /* purchase data */ }\n});\n```\n\n### Avoid PII\n\nNever push personally identifiable information:\n\n```javascript\n// BAD - Contains PII\nwindow.dataLayer.push({\n  'email': 'user@example.com',\n  'phone': '+61412345678'\n});\n\n// GOOD - Hash or pseudonymise\nwindow.dataLayer.push({\n  'emailHash': 'a1b2c3d4...',  // SHA-256 hash\n  'hasPhone': true\n});\n```\n\n## Custom Data Layer Methods\n\n### The set() Method\n\nStore values for later retrieval:\n\n```javascript\nwindow.dataLayer.push(function() {\n  this.set('lastUpdated', new Date());\n});\n```\n\n### The get() Method\n\nRetrieve stored values:\n\n```javascript\nwindow.dataLayer.push(function() {\n  var lastUpdated = this.get('lastUpdated');\n  console.log('Last updated:', lastUpdated);\n});\n```\n\n### The reset() Method\n\nClear all data layer state:\n\n```javascript\nwindow.dataLayer.push(function() {\n  this.reset();\n});\n```\n\n## Debugging the Data Layer\n\n### Console Inspection\n\n```javascript\n// View entire data layer\nconsole.log(window.dataLayer);\n\n// Find specific events\ndataLayer.filter(function(item) {\n  return item.event === 'purchase';\n});\n```\n\n### Monitor Pushes\n\n```javascript\nvar originalPush = window.dataLayer.push;\nwindow.dataLayer.push = function() {\n  console.log('Data Layer push:', arguments[0]);\n  return originalPush.apply(this, arguments);\n};\n```\n\n### GTM Preview Mode\n\n1. Enable Preview mode\n2. Click any event in Summary\n3. Open Data Layer tab\n4. View data layer state at that event\n\n## Data Layer Specification\n\n### Documentation Template\n\nDocument your data layer for developers:\n\n```markdown\n## userType\n\n- **Type**: String\n- **Values**: 'guest', 'registered', 'premium'\n- **Populated**: On all pages after user identification\n- **Example**: `{'userType': 'premium'}`\n- **Used by**: User Segmentation Tags, Personalisation Triggers\n\n## ecommerce.items\n\n- **Type**: Array of Objects\n- **Required Fields**: item_id, item_name, price\n- **Optional Fields**: item_brand, item_category, quantity\n- **Populated**: E-commerce events only\n- **Example**: See purchase event documentation\n```\n\n## Resources\n\n- [Data Layer Developer Guide](https://developers.google.com/tag-platform/tag-manager/datalayer)\n- [GA4 E-commerce Implementation](https://developers.google.com/analytics/devguides/collection/ga4/ecommerce)\n- [Data Layer Best Practices](https://support.google.com/tagmanager/answer/6164391)\n",
        "plugins/marketing/skills/gtm/references/debugging.md": "# GTM Debugging and Testing\n\n**Sources**:\n\n- <https://support.google.com/tagmanager/answer/6107056>\n- <https://developers.google.com/tag-platform/tag-manager/server-side/debug>\n\n**Last Updated**: 2025-01-09\n\n## Overview\n\nTesting and debugging are critical components of any Google Tag Manager implementation. GTM provides comprehensive tools to help you verify that tags fire correctly, triggers activate as expected, and data flows accurately to your analytics platforms. This guide covers all debugging tools and workflows.\n\n## Preview Mode\n\n### Enabling Preview Mode\n\n1. Navigate to [tagmanager.google.com](https://tagmanager.google.com)\n2. Open your container workspace\n3. Click \"Preview\" in the top right corner\n4. Tag Assistant launches in a new tab\n5. Enter your website URL\n6. Optional: Uncheck \"Include debug signal in the URL\" if it causes issues\n7. Click \"Connect\"\n8. Your website opens in a new window with \"Connected\" indicator\n9. Return to Tag Assistant and click \"Continue\"\n\n### Tag Assistant Companion Extension\n\nInstalling the [Tag Assistant Companion Chrome extension](https://chrome.google.com/webstore/detail/tag-assistant-companion/jmekfmbnaedfebfnmakmokmlfpblbfdm) improves the preview experience by opening your website in a new tab instead of a popup window.\n\n### Previewing Older Versions\n\nTo test a previously published version:\n\n1. Go to \"Versions\" in workspace navigation\n2. Find the version to preview\n3. Click \"More Actions\" (three dots)\n4. Select \"Preview\"\n\n## Debug Interface\n\n### Interface Sections\n\n**Summary Panel**: Timeline of events as you interact with your website\n\n```\nContainer Loaded\n   Page View\n   DOM Ready\n   Window Loaded\n   Click (Button)\n   Custom Event (form_submit)\n```\n\nClick any event to see details.\n\n**Tags Panel**: Lists tags that fired and didn't fire\n\n- Green indicators: Successfully fired tags\n- Red indicators: Failed tags\n- Number shows fire count\n\n**Data Layer Panel**: Shows data layer state and events\n\n```javascript\n{\n  \"gtm.start\": 1704844800000,\n  \"event\": \"gtm.js\",\n  \"gtm.uniqueEventId\": 1\n}\n```\n\n**Variables Panel**: Lists all variables and their values\n\n| Variable Name | Value | Type |\n|--------------|-------|------|\n| Page URL | https://example.com/products | Built-in |\n| Page Path | /products | Built-in |\n| Product Name | Blue Widget | Data Layer Variable |\n\n**Errors Panel**: Shows JavaScript errors and tag failures\n\n```\nTag: GA4 Event - Purchase\nError: sendBeacon failed - network error\n\nTag: Facebook Pixel\nError: fbq is not defined\n```\n\n## Debugging Workflows\n\n### Tag Not Firing\n\n**Checklist**:\n\n1. **Check the trigger**\n   - Is the trigger configured correctly?\n   - Are the trigger conditions being met?\n   - Check trigger variables resolve correctly\n\n2. **Check for blocking triggers**\n   - Does the tag have any exception triggers?\n   - Are those triggers inadvertently activating?\n\n3. **Check tag priority/sequencing**\n   - Does another tag need to fire first?\n   - Is tag sequencing configured correctly?\n\n4. **Check the data layer**\n   - Is required data present when trigger evaluates?\n   - Are data layer variables returning expected values?\n\n### Trigger Not Activating\n\n**Debugging Steps**:\n\n1. **Verify trigger conditions**\n   - Check trigger type matches action\n   - Verify condition values match actual data\n   - Test with simpler conditions\n\n2. **Check built-in variables**\n   - Are required built-in variables enabled?\n   - Go to Variables > Configure\n   - Enable missing variables\n\n3. **Test variable values**\n   - Check Variables panel\n   - Verify trigger conditions match actual values\n   - Look for type mismatches (string vs number)\n\n### Variable Returning Undefined\n\n**Common Causes**:\n\n1. **Data layer variable not found**\n\n   ```javascript\n   // Data layer:\n   { \"product_name\": \"Widget\" }\n\n   // Variable configured as:\n   productName  // Wrong - case sensitive!\n\n   // Should be:\n   product_name  // Correct\n   ```\n\n2. **Timing issue**\n   - Data pushed after tag fires\n   - Use Custom Event trigger to wait for data\n\n3. **Incorrect data layer version**\n   - Check Data Layer Version setting\n   - Version 2 vs Version 1 syntax differs\n\n### Data Layer Issues\n\n**Debug Pattern**:\n\n```javascript\n// In browser console, inspect data layer\nconsole.log(window.dataLayer);\n\n// Check for specific event\nwindow.dataLayer.filter(function(item) {\n  return item.event === 'purchase';\n});\n\n// Watch for new pushes\nvar originalPush = window.dataLayer.push;\nwindow.dataLayer.push = function() {\n  console.log('DataLayer push:', arguments[0]);\n  return originalPush.apply(this, arguments);\n};\n```\n\n## Sharing Preview Mode\n\n### Share with Colleagues\n\n1. In Tag Assistant, click \"More Actions\" (three dots)\n2. Select \"Share\"\n3. Enter your website domain\n4. Copy the preview URL\n5. Send to colleagues\n\nRecipients can:\n\n- Connect to your site in preview mode\n- View the Tag Assistant debug interface\n- See the same container draft you're testing\n\n**Note**: The preview URL is temporary and expires after the debug session ends.\n\n## Browser Developer Tools\n\n### Network Tab\n\nMonitor tag requests:\n\n1. Open DevTools (F12)\n2. Go to Network tab\n3. Filter: \"analytics\", \"gtm\", \"google-analytics\"\n4. Trigger events on your site\n5. Inspect requests:\n   - Check parameters sent\n   - Verify timing\n   - Look for errors (red status codes)\n\n### Console Tab\n\nMonitor JavaScript execution:\n\n```javascript\n// Check GTM loaded\nconsole.log(google_tag_manager);\n\n// Check dataLayer\nconsole.log(dataLayer);\n\n// Monitor events\ndataLayer.push = new Proxy(dataLayer.push, {\n  apply: function(target, thisArg, args) {\n    console.log('DataLayer event:', args[0]);\n    return target.apply(thisArg, args);\n  }\n});\n```\n\n### Application Tab\n\nInspect cookies:\n\n1. Open Application tab\n2. Go to Cookies\n3. Select your domain\n4. Check for:\n   - `_ga` (GA client ID)\n   - `_gid` (GA session ID)\n   - Custom cookies\n\n## GA4 DebugView\n\n### Enable Debug Mode\n\n**Method 1: Via GTM data layer**\n\n```javascript\nwindow.dataLayer.push({\n  'debug_mode': true\n});\n```\n\n**Method 2: Chrome extension**\n\nInstall Google Analytics Debugger extension.\n\n### Using DebugView\n\n1. Go to GA4 property\n2. Navigate to Configure > DebugView\n3. See real-time events from your debug session\n\n**Verify in DebugView**:\n\n- Events appear immediately\n- Parameters are correct\n- Event sequence matches expectations\n\n## Testing Checklist\n\n### Pre-Publishing Checklist\n\nBefore publishing any container version:\n\n- [ ] Enable preview mode\n- [ ] Test on all key pages:\n  - [ ] Homepage\n  - [ ] Product pages\n  - [ ] Category pages\n  - [ ] Cart/checkout\n  - [ ] Confirmation page\n- [ ] Verify all critical tags fire\n- [ ] Check data layer on each page\n- [ ] Test all conversion events\n- [ ] Verify cross-domain tracking\n- [ ] Test with ad blockers disabled and enabled\n- [ ] Check mobile experience (responsive design mode)\n- [ ] Verify no JavaScript errors\n- [ ] Confirm data in vendor platforms (GA4, Ads, etc.)\n\n### E-commerce Testing Flow\n\n```javascript\n// 1. View item list - verify items array\n// 2. Select item - verify item details\n// 3. View item - verify product data\n// 4. Add to cart - verify cart event\n// 5. View cart - verify cart contents\n// 6. Begin checkout - verify checkout start\n// 7. Add shipping info - verify shipping selection\n// 8. Add payment info - verify payment method\n// 9. Purchase - verify transaction data\n```\n\n### Cross-Domain Testing\n\nWhen testing cross-domain tracking:\n\n1. Enable preview on primary domain\n2. Navigate to secondary domain\n3. Verify preview mode persists\n4. Check data layer for linker parameters\n5. Confirm client IDs match across domains\n\n## Common Issues and Solutions\n\n### Container Not Loading\n\n**Symptoms**: No GTM events in Preview mode\n\n**Solutions**:\n\n- Verify snippet is on page\n- Check container ID is correct\n- Look for JavaScript errors before GTM\n- Check Content Security Policy\n\n### Tags Fire Multiple Times\n\n**Symptoms**: Duplicate events in analytics\n\n**Solutions**:\n\n- Check for duplicate triggers\n- Review History Change triggers on SPAs\n- Verify tag firing options\n- Check for multiple container installations\n\n### Performance Issues\n\n**Symptoms**: Slow page load, high tag count\n\n**Solutions**:\n\n- Review number of tags firing\n- Check custom HTML execution time\n- Audit unnecessary triggers\n- Consider tag deferral for non-essential tags\n\n### Data Layer Values Incorrect\n\n**Symptoms**: Wrong values in analytics\n\n**Solutions**:\n\n- Check data layer push timing\n- Verify variable configuration\n- Check for data type issues\n- Review data layer path\n\n## Troubleshooting Tips\n\n### Clear Browser Cache\n\nSometimes old container versions cache:\n\n1. Hard refresh: Ctrl+Shift+R (Windows) / Cmd+Shift+R (Mac)\n2. Clear cache completely\n3. Close and reopen preview mode\n\n### Check Container Version\n\nVerify correct container loads:\n\n```javascript\n// In console:\ngoogle_tag_manager['GTM-XXXXX'].dataLayer.get('gtm.version')\n```\n\n### Verify Container ID\n\nEnsure correct container on page:\n\n```html\n<!-- Check page source for -->\n<script>\n(function(w,d,s,l,i){...})(window,document,'script','dataLayer','GTM-XXXXX');\n</script>\n```\n\n### Multiple Containers\n\nIf multiple containers exist:\n\n- Each fires independently\n- Check all containers in preview\n- Avoid duplicate tags across containers\n\n## Version Comparison\n\nCompare container versions:\n\n1. Go to \"Versions\"\n2. Select two versions\n3. Click \"Compare\"\n4. Review differences:\n   - Tags added/removed/modified\n   - Trigger changes\n   - Variable updates\n\n## Exit Preview Mode\n\nTo stop debugging:\n\n1. Click X in Tag Assistant debug interface\n2. Click \"Stop debugging\" on Tag Assistant page\n3. Close preview window\n\nPreview mode only affects your browser - regular visitors don't see the debug interface.\n\n## Documentation Template\n\nWhen testing, document results:\n\n```\nVersion: 123\nChanges:\n- Added GA4 purchase event\n- Modified product click trigger\n- Updated checkout flow\n\nTests Performed:\n- [PASS] Purchase event fires on confirmation page\n- [PASS] Product clicks tracked correctly\n- [PASS] Checkout funnel complete\n- [FAIL] Cross-domain tracking issue on subdomain (to fix)\n\nTested By: [Name]\nDate: 2025-01-09\n```\n\n## Resources\n\n- [GTM Preview and Debug Containers](https://support.google.com/tagmanager/answer/6107056)\n- [Preview and Debug Server Containers](https://developers.google.com/tag-platform/tag-manager/server-side/debug)\n- [Tag Assistant](https://support.google.com/tagassistant/answer/10039345)\n- [GA4 DebugView](https://support.google.com/analytics/answer/7201382)\n- [GTM Troubleshooting](https://support.google.com/tagmanager/topic/9002003)\n",
        "plugins/marketing/skills/gtm/references/setup.md": "# GTM Container Setup and Installation\n\n**Sources**:\n\n- <https://support.google.com/tagmanager/answer/6103696>\n- <https://developers.google.com/tag-platform/tag-manager/web>\n\n**Last Updated**: 2025-01-09\n\n## Overview\n\nThis guide covers the complete process of setting up a Google Tag Manager container, including account creation, container configuration, and snippet installation. Proper setup is essential for reliable tag management.\n\n## Creating a GTM Account\n\n### Step 1: Access Tag Manager\n\n1. Go to [tagmanager.google.com](https://tagmanager.google.com)\n2. Sign in with your Google account\n3. Click \"Create Account\"\n\n### Step 2: Configure Account Settings\n\n**Account Name**: Use your company or organisation name\n**Country**: Select your primary country\n\n### Step 3: Create Container\n\n**Container Name**: Use your website domain (e.g., www.example.com)\n**Target Platform**:\n\n- **Web**: For websites and web applications\n- **iOS**: For iOS mobile apps\n- **Android**: For Android mobile apps\n- **AMP**: For Accelerated Mobile Pages\n- **Server**: For server-side tagging\n\n## Container Installation\n\n### Web Container Snippet\n\nAfter creating your container, you receive two code snippets:\n\n#### Head Snippet (Required)\n\nPlace this code as high in the `<head>` as possible:\n\n```html\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-XXXXXX');</script>\n<!-- End Google Tag Manager -->\n```\n\nReplace `GTM-XXXXXX` with your container ID.\n\n#### Body Snippet (Recommended)\n\nPlace this code immediately after the opening `<body>` tag:\n\n```html\n<!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-XXXXXX\"\nheight=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n```\n\nThe noscript fallback ensures basic tracking for users with JavaScript disabled.\n\n### Snippet Placement Best Practices\n\n**Head Snippet Placement:**\n\n- Place after any charset or viewport meta tags\n- Place before any other scripts\n- Place before CSS stylesheets if possible\n- Do NOT place in the footer\n\n**Body Snippet Placement:**\n\n- Immediately after opening `<body>` tag\n- Before any visible content\n\n### Installation Verification\n\n#### Method 1: GTM Preview Mode\n\n1. In GTM, click \"Preview\" button\n2. Enter your website URL\n3. Verify \"Container Loaded\" event appears\n\n#### Method 2: Browser Developer Tools\n\n1. Open Developer Tools (F12)\n2. Go to Network tab\n3. Filter for \"gtm.js\"\n4. Verify request to googletagmanager.com\n\n#### Method 3: Tag Assistant Extension\n\n1. Install Google Tag Assistant extension\n2. Navigate to your website\n3. Check for green GTM icon\n\n### Common Installation Issues\n\n#### Container Not Loading\n\n**Symptoms**: No GTM events in Preview mode\n\n**Causes and Solutions**:\n\n- Snippet not on page - Verify snippet is present in page source\n- Incorrect container ID - Check GTM-XXXXXX matches your container\n- JavaScript error before GTM - Check console for errors\n- Content Security Policy blocking - Add googletagmanager.com to CSP\n\n#### Duplicate Container\n\n**Symptoms**: Tags fire multiple times\n\n**Solutions**:\n\n- Search page source for multiple GTM snippets\n- Check for GTM in both theme and plugins\n- Remove duplicate installations\n\n## Data Layer Initialisation\n\n### Proper Data Layer Setup\n\nInitialise the data layer BEFORE the GTM snippet:\n\n```html\n<script>\n  window.dataLayer = window.dataLayer || [];\n  dataLayer.push({\n    'pageType': 'product',\n    'productId': 'SKU123',\n    'userId': 'USER456'\n  });\n</script>\n<!-- Google Tag Manager -->\n<script>...</script>\n```\n\n### Why Initialise Before GTM?\n\n- Ensures data is available when Container Loaded fires\n- Prevents race conditions\n- Enables Page View triggers to access initial data\n\n## Container Settings\n\n### Container Information\n\nAccess via Admin > Container Settings:\n\n- **Container ID**: Your GTM-XXXXXX identifier\n- **Container Name**: Editable display name\n- **Container Type**: Web, iOS, Android, AMP, or Server\n\n### Container Sharing\n\nShare container access via Admin > User Management:\n\n**Permission Levels**:\n\n- **Read**: View container contents\n- **Edit**: Modify tags, triggers, variables\n- **Approve**: Approve workspace changes\n- **Publish**: Publish container versions\n\n### Environments\n\nConfigure environments via Admin > Environments:\n\n**Default Environments**:\n\n- **Live**: Production container\n- **Latest**: Most recent version (published or not)\n\n**Custom Environments**:\n\n- Create staging, development, or testing environments\n- Each has unique snippet with environment parameters\n- Control which version serves to each environment\n\n## Server-Side Container Setup\n\n### When to Use Server-Side Tagging\n\n- Enhanced data privacy and control\n- Reduced client-side JavaScript\n- Better data quality (server validation)\n- Cross-platform data collection\n\n### Setup Steps\n\n1. Create Server container in GTM\n2. Choose hosting option (Google Cloud or custom)\n3. Configure server-side client(s)\n4. Update web container to send data to server container\n\n## Multi-Container Setup\n\n### When to Use Multiple Containers\n\n- Different teams managing different sections\n- Acquisition scenarios (separate brand tracking)\n- Agency management with client isolation\n- Testing new configurations safely\n\n### Considerations\n\n- Both containers share the same data layer\n- Coordinate to avoid duplicate tracking\n- Consider performance impact\n- Document which container owns which tags\n\n## CMS-Specific Installation\n\n### WordPress\n\n**Method 1: Theme Files**\n\n- Edit header.php to add head snippet\n- Edit header.php to add body snippet after `<body>` tag\n\n**Method 2: Plugin**\n\n- Use GTM plugins (e.g., Google Site Kit, GTM4WP)\n- Configure container ID in plugin settings\n\n### Shopify\n\n1. Go to Online Store > Themes\n2. Edit code\n3. Add head snippet to theme.liquid in `<head>`\n4. Add body snippet after `<body>` in theme.liquid\n\n## Verification Checklist\n\nBefore going live:\n\n- [ ] GTM snippet in `<head>` on all pages\n- [ ] Noscript fallback after `<body>` tag\n- [ ] Container ID is correct\n- [ ] Data layer initialised before GTM snippet\n- [ ] Preview mode shows Container Loaded event\n- [ ] No JavaScript errors in console\n- [ ] Tags fire as expected in Preview mode\n- [ ] Verified data reaches analytics platforms\n\n## Resources\n\n- [GTM Help Center - Install Guide](https://support.google.com/tagmanager/answer/6103696)\n- [GTM Developer Guide](https://developers.google.com/tag-platform/tag-manager/web)\n- [Server-Side Tagging](https://developers.google.com/tag-platform/tag-manager/server-side)\n",
        "plugins/marketing/skills/gtm/references/tags.md": "# GTM Tag Configuration\n\n**Sources**:\n\n- <https://support.google.com/tagmanager/answer/6106716>\n- <https://developers.google.com/tag-platform/tag-manager/web>\n\n**Last Updated**: 2025-01-09\n\n## Overview\n\nTags are snippets of code that execute on your website when triggered. They send data to third-party platforms like Google Analytics, Google Ads, Facebook, and other marketing and analytics tools. This guide covers tag configuration, types, and best practices.\n\n## Tag Fundamentals\n\n### What Tags Do\n\nTags perform actions such as:\n\n- Sending pageview data to analytics platforms\n- Firing conversion pixels for advertising\n- Loading third-party scripts\n- Setting cookies\n- Sending custom events\n\n### Tag Structure\n\nEvery tag has three components:\n\n1. **Tag Type**: The template or custom code\n2. **Configuration**: Settings specific to the tag\n3. **Trigger(s)**: When the tag should fire\n\n## Built-in Tag Templates\n\n### Google Analytics 4 (GA4)\n\n#### GA4 Configuration Tag\n\nSets up the GA4 measurement and should fire on all pages:\n\n```\nTag Type: Google Analytics: GA4 Configuration\nMeasurement ID: G-XXXXXXXXXX\nTrigger: All Pages\n```\n\n**Common Settings**:\n\n- Send page view: Yes (default)\n- Debug mode: Enable for testing\n- User properties: Set user-scoped dimensions\n\n#### GA4 Event Tag\n\nSends custom events to GA4:\n\n```\nTag Type: Google Analytics: GA4 Event\nConfiguration Tag: {{GA4 Configuration}}\nEvent Name: button_click\nEvent Parameters:\n  - button_text: {{Click Text}}\n  - button_id: {{Click ID}}\nTrigger: Button Click\n```\n\n**Event Naming Best Practices**:\n\n- Use snake_case (e.g., `form_submit`, `video_play`)\n- Be descriptive but concise\n- Follow GA4 recommended events where applicable\n\n### Google Ads\n\n#### Google Ads Conversion Tracking\n\nTrack conversions for Google Ads campaigns:\n\n```\nTag Type: Google Ads Conversion Tracking\nConversion ID: AW-123456789\nConversion Label: AbCdEfGhIjKlMnOp\nConversion Value: {{Transaction Total}}\nCurrency Code: AUD\nTransaction ID: {{Transaction ID}}\nTrigger: Purchase Confirmation\n```\n\n#### Google Ads Remarketing\n\nBuild remarketing audiences:\n\n```\nTag Type: Google Ads Remarketing\nConversion ID: AW-123456789\nCustom Parameters:\n  - ecomm_prodid: {{Product ID}}\n  - ecomm_pagetype: {{Page Type}}\n  - ecomm_totalvalue: {{Cart Value}}\nTrigger: All Pages\n```\n\n### Facebook Pixel\n\n#### Facebook Pixel Base Code\n\n```\nTag Type: Custom HTML\nHTML:\n<!-- Facebook Pixel Code -->\n<script>\n!function(f,b,e,v,n,t,s)\n{if(f.fbq)return;n=f.fbq=function(){n.callMethod?\nn.callMethod.apply(n,arguments):n.queue.push(arguments)};\nif(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';\nn.queue=[];t=b.createElement(e);t.async=!0;\nt.src=v;s=b.getElementsByTagName(e)[0];\ns.parentNode.insertBefore(t,s)}(window, document,'script',\n'https://connect.facebook.net/en_US/fbevents.js');\nfbq('init', '{{FB Pixel ID}}');\nfbq('track', 'PageView');\n</script>\nTrigger: All Pages\n```\n\n**Note**: Consider using a Custom Template from the Community Gallery for better security and maintainability.\n\n#### Facebook Conversion Event\n\n```\nTag Type: Custom HTML\nHTML:\n<script>\nfbq('track', 'Purchase', {\n  value: {{Transaction Total}},\n  currency: 'AUD',\n  content_ids: {{Product IDs}},\n  content_type: 'product'\n});\n</script>\nTrigger: Purchase Confirmation\nTag Sequencing: Fire after Facebook Pixel Base Code\n```\n\n## Custom Tags\n\n### Custom HTML Tag\n\nFor scripts not supported by built-in templates:\n\n```html\n<script>\n  // Your custom JavaScript code here\n  console.log('Custom tag fired');\n\n  // Access data layer values\n  var userId = {{DL - User ID}};\n\n  // Send data to third-party service\n  thirdPartyTracker.track('event', {\n    userId: userId,\n    page: {{Page Path}}\n  });\n</script>\n```\n\n**Best Practices**:\n\n- Minimise Custom HTML usage - prefer templates\n- Always use ES5 syntax (no const, let, arrow functions)\n- Test thoroughly in Preview mode\n- Document what the code does\n\n### Custom Image Tag\n\nFor simple pixel tracking without JavaScript:\n\n```\nTag Type: Custom Image\nImage URL: https://tracking.example.com/pixel.gif?event=pageview&url={{Page URL}}\nTrigger: All Pages\n```\n\n## Tag Configuration Options\n\n### Tag Firing Options\n\n**Once per event**: Tag fires once per trigger event (default)\n**Once per page**: Tag fires maximum once per page load\n**Unlimited**: Tag fires every time trigger conditions are met\n\n### Tag Sequencing\n\nControl the order tags fire:\n\n**Setup Tag**: Fire a tag before the current tag\n**Cleanup Tag**: Fire a tag after the current tag\n\nExample use cases:\n\n- Load vendor library before event tags\n- Send data to multiple platforms in sequence\n- Execute cleanup code after main tag\n\n### Tag Priority\n\nHigher priority tags fire first (default is 0):\n\n```\nPriority 100: Essential tags (consent, error tracking)\nPriority 50: Analytics tags (GA4, Adobe)\nPriority 25: Marketing tags (ads pixels)\nPriority 0: Default\n```\n\n### Exception Triggers\n\nBlock a tag from firing even when trigger conditions are met:\n\n```\nTag: GA4 - Pageview\nFiring Triggers: All Pages\nException Triggers: Internal Traffic\n```\n\n## Tag Templates from Community Gallery\n\n### Accessing the Gallery\n\n1. Click \"Tag Configuration\"\n2. Scroll down to \"Custom\" section\n3. Click \"Discover more tag types in the Community Template Gallery\"\n4. Search and import templates\n\n### Popular Templates\n\n- **Consent Mode**: Google Consent Mode integration\n- **LinkedIn Insight**: LinkedIn conversion tracking\n- **Twitter Pixel**: Twitter/X conversion tracking\n- **Pinterest Tag**: Pinterest conversion tracking\n- **TikTok Pixel**: TikTok conversion tracking\n- **Hotjar**: Session recording and heatmaps\n\n### Template Benefits\n\n- Pre-built and tested\n- Sandboxed JavaScript for security\n- Configurable through UI\n- No Custom HTML security risks\n\n## Advanced Tag Patterns\n\n### Conditional Tag Firing\n\nUse variables in tag configuration for conditional behaviour:\n\n```\nTag: GA4 Event - Dynamic\nEvent Name: {{Event Name Variable}}\nEvent Parameters:\n  - value: {{Event Value Variable}}\nTrigger: Custom Event\n```\n\n### Data Layer Event Tags\n\nReact to data layer pushes:\n\n```javascript\n// Website code pushes event\ndataLayer.push({\n  'event': 'video_play',\n  'videoTitle': 'Product Demo',\n  'videoDuration': 120\n});\n```\n\n```\nGTM Tag:\nTag Type: GA4 Event\nEvent Name: video_play\nParameters:\n  - video_title: {{DL - Video Title}}\n  - video_duration: {{DL - Video Duration}}\nTrigger: Custom Event - video_play\n```\n\n### E-commerce Tags\n\n#### GA4 E-commerce Purchase\n\n```\nTag Type: GA4 Event\nEvent Name: purchase\nParameters:\n  - transaction_id: {{DL - Transaction ID}}\n  - value: {{DL - Transaction Value}}\n  - currency: {{DL - Currency}}\n  - items: {{DL - E-commerce Items}}\nTrigger: Purchase Event\n```\n\n## Tag Debugging\n\n### Preview Mode Verification\n\n1. Enable Preview mode\n2. Navigate to pages where tag should fire\n3. Check \"Tags Fired\" section\n4. Verify tag configuration in tag details\n\n### Common Issues\n\n**Tag Not Firing**:\n\n- Check trigger conditions\n- Verify data layer values exist\n- Look for blocking triggers\n\n**Tag Fires Multiple Times**:\n\n- Check for duplicate triggers\n- Review History Change triggers on SPAs\n- Verify tag firing options\n\n**Data Not Reaching Platform**:\n\n- Check Network tab for requests\n- Verify platform credentials (IDs, keys)\n- Test in platform's debug tools\n\n## Tag Naming Conventions\n\n### Recommended Format\n\n```\n[Platform] - [Type] - [Description]\n```\n\n### Examples\n\n- `GA4 - Config - Main Property`\n- `GA4 - Event - Form Submit`\n- `Google Ads - Conversion - Purchase`\n- `FB - Pixel - PageView`\n- `LinkedIn - Insight - All Pages`\n- `Custom - Hotjar - Initialisation`\n\n## Performance Considerations\n\n### Minimise Tag Load Impact\n\n1. Use asynchronous loading (default for GTM)\n2. Limit number of tags per page\n3. Use built-in templates over Custom HTML\n4. Defer non-essential tags\n5. Use tag firing options appropriately\n\n### Tag Audit Checklist\n\n- [ ] Remove unused tags\n- [ ] Consolidate duplicate tracking\n- [ ] Review Custom HTML for efficiency\n- [ ] Check tag sequencing necessity\n- [ ] Verify all tags have appropriate triggers\n\n## Resources\n\n- [GTM Tag Types Reference](https://support.google.com/tagmanager/answer/6106716)\n- [GA4 Event Reference](https://developers.google.com/analytics/devguides/collection/ga4/reference/events)\n- [Community Template Gallery](https://tagmanager.google.com/gallery/)\n",
        "plugins/marketing/skills/gtm/references/triggers.md": "# GTM Trigger Configuration\n\n**Sources**:\n\n- <https://support.google.com/tagmanager/topic/7679108>\n- <https://developers.google.com/tag-platform/tag-manager/web>\n\n**Last Updated**: 2025-01-09\n\n## Overview\n\nTriggers define when and how tags fire in Google Tag Manager. Understanding trigger types, configurations, and conditions is essential for accurate tracking. This guide covers all trigger types and their use cases.\n\n## Trigger Fundamentals\n\n### How Triggers Work\n\n1. User performs action on website\n2. GTM detects the action via built-in listeners\n3. Trigger conditions are evaluated\n4. If conditions match, associated tags fire\n\n### Trigger Components\n\n**Trigger Type**: The event category (click, pageview, etc.)\n**Filter Conditions**: When within that type to fire\n**Built-in Variables**: Data available for conditions\n\n## Page View Triggers\n\n### Page View\n\nFires as soon as the GTM snippet loads on the page.\n\n```\nTrigger Type: Page View\nFires on: All Page Views\n```\n\n**Use Cases**:\n\n- GA4 Configuration tag\n- Essential tracking pixels\n- Data layer initialisation tags\n\n### DOM Ready\n\nFires when the DOM is fully parsed (but images/resources may still be loading).\n\n```\nTrigger Type: Page View - DOM Ready\nFires on: All DOM Ready Events\n```\n\n**Use Cases**:\n\n- Tags that need to access DOM elements\n- Click listeners that need elements to exist\n- Form tracking initialisation\n\n### Window Loaded\n\nFires when the page and all resources (images, scripts, etc.) have fully loaded.\n\n```\nTrigger Type: Page View - Window Loaded\nFires on: All Window Loaded Events\n```\n\n**Use Cases**:\n\n- Performance measurement\n- Tags that depend on all content being loaded\n- Scroll depth initialisation\n\n### Conditional Page View\n\nFire on specific pages only:\n\n```\nTrigger Type: Page View\nFires on: Some Page Views\nConditions:\n  Page Path contains /products/\n```\n\n**Common Conditions**:\n\n- `Page Path` equals `/checkout/`\n- `Page URL` contains `utm_source=`\n- `Page Hostname` equals `www.example.com`\n- `Referrer` contains `google.com`\n\n## Click Triggers\n\n### All Elements Click\n\nFires on any click, regardless of element type.\n\n```\nTrigger Type: Click - All Elements\nFires on: Some Clicks\nConditions:\n  Click Classes contains cta-button\n```\n\n**Available Variables**:\n\n- Click Element (DOM element)\n- Click Classes\n- Click ID\n- Click Target\n- Click URL (for links)\n- Click Text\n\n### Just Links Click\n\nFires only on link (`<a>`) element clicks.\n\n```\nTrigger Type: Click - Just Links\nFires on: Some Link Clicks\nConditions:\n  Click URL contains /external/\n```\n\n**Additional Options**:\n\n- **Wait for Tags**: Pause navigation until tags fire (max 2000ms)\n- **Check Validation**: Only fire if link click would navigate\n\n**Use Cases**:\n\n- Outbound link tracking\n- File download tracking\n- Internal navigation tracking\n\n### Click Trigger Patterns\n\n**Button Clicks by ID**:\n\n```\nClick - All Elements\nClick ID equals submit-button\n```\n\n**Navigation Menu Clicks**:\n\n```\nClick - Just Links\nClick Element matches CSS selector nav a\n```\n\n**CTA Button Clicks**:\n\n```\nClick - All Elements\nClick Classes contains cta-button\nOR Click Text equals Get Started\n```\n\n## Form Triggers\n\n### Form Submission\n\nFires when a form is submitted.\n\n```\nTrigger Type: Form Submission\nFires on: Some Forms\nConditions:\n  Form ID equals contact-form\n```\n\n**Available Variables**:\n\n- Form Element\n- Form Classes\n- Form ID\n- Form Target\n- Form URL\n- Form Text\n\n**Options**:\n\n- **Wait for Tags**: Pause submission until tags fire\n- **Check Validation**: Only fire if form passes HTML5 validation\n\n### Form Trigger Patterns\n\n**All Form Submissions**:\n\n```\nForm Submission\nFires on: All Forms\n```\n\n**Specific Form by ID**:\n\n```\nForm Submission\nForm ID equals newsletter-signup\n```\n\n**Forms with Specific Class**:\n\n```\nForm Submission\nForm Classes contains tracking-form\n```\n\n## Custom Event Triggers\n\n### Custom Event\n\nFires when a specific event is pushed to the data layer.\n\n```\nTrigger Type: Custom Event\nEvent Name: purchase\n```\n\n**Data Layer Push**:\n\n```javascript\ndataLayer.push({\n  'event': 'purchase',\n  'transactionId': 'T12345',\n  'transactionTotal': 99.99\n});\n```\n\n### Custom Event with Conditions\n\n```\nTrigger Type: Custom Event\nEvent Name: form_submit\nConditions:\n  DL - Form Name equals Contact Form\n```\n\n### Regex Event Matching\n\nMatch multiple events with one trigger:\n\n```\nEvent Name: ^(add_to_cart|remove_from_cart|view_cart)$\nUse regex matching: Yes\n```\n\n## History Change Triggers\n\n### History Change\n\nFires when the URL fragment or History API state changes (essential for SPAs).\n\n```\nTrigger Type: History Change\nFires on: All History Changes\n```\n\n**Available Variables**:\n\n- New History Fragment\n- Old History Fragment\n- New History State\n- Old History State\n- History Source (pushState, replaceState, popstate, hashchange)\n\n### SPA Virtual Pageviews\n\n```\nTrigger Type: History Change\nFires on: All History Changes\n```\n\nUse with GA4 Event tag:\n\n```\nEvent Name: page_view\nParameters:\n  page_location: {{Page URL}}\n  page_title: {{Page Title}}\n```\n\n## Timer Triggers\n\n### Timer\n\nFires at specified intervals.\n\n```\nTrigger Type: Timer\nEvent Name: timer_30sec\nInterval: 30000 (milliseconds)\nLimit: 1 (fire once)\nConditions:\n  Page Path equals /article/\n```\n\n**Use Cases**:\n\n- Time on page tracking\n- Engaged user detection\n- Periodic data collection\n\n### Timer Configuration\n\n**Interval**: Milliseconds between fires\n**Limit**: Maximum number of times to fire (blank = unlimited)\n**Conditions**: When the timer should be active\n\n## Scroll Depth Triggers\n\n### Scroll Depth\n\nFires when user scrolls to specified depths.\n\n```\nTrigger Type: Scroll Depth\nVertical Scroll Depths:\n  Percentages: 25, 50, 75, 90\nFires on: Some Scroll Depths\nConditions:\n  Page Path matches RegEx ^/blog/\n```\n\n**Available Variables**:\n\n- Scroll Depth Threshold (percentage or pixels)\n- Scroll Depth Units (percent or pixels)\n- Scroll Direction (vertical or horizontal)\n\n### Scroll Tracking Patterns\n\n**Article Engagement**:\n\n```\nScroll Depth\nVertical: 25, 50, 75, 100 percent\nPage Path contains /blog/\n```\n\n**Product Page Scroll**:\n\n```\nScroll Depth\nVertical: 50, 100 percent\nPage Path matches RegEx ^/products/\n```\n\n## YouTube Video Triggers\n\n### YouTube Video\n\nFires based on YouTube embed interactions.\n\n```\nTrigger Type: YouTube Video\nCapture: Start, Complete, Pause, Seeking, Progress\nProgress: 10%, 25%, 50%, 75%, 90%\n```\n\n**Available Variables**:\n\n- Video Title\n- Video URL\n- Video Provider (youtube)\n- Video Status (start, complete, pause, etc.)\n- Video Percent (for progress events)\n- Video Duration\n- Video Current Time\n- Video Visible (boolean)\n\n### YouTube Tracking Patterns\n\n**All YouTube Interactions**:\n\n```\nYouTube Video\nCapture: Start, Complete, Pause, Progress\nProgress: 25%, 50%, 75%\n```\n\n**Completion Only**:\n\n```\nYouTube Video\nCapture: Complete\n```\n\n## Element Visibility Triggers\n\n### Element Visibility\n\nFires when specific elements become visible in the viewport.\n\n```\nTrigger Type: Element Visibility\nSelection Method: CSS Selector\nElement Selector: #product-reviews\nWhen to fire: Once per page\nMinimum Percent Visible: 50\n```\n\n**Options**:\n\n- **Once per page**: Fire once when element first becomes visible\n- **Once per element**: Fire once per matching element\n- **Every time**: Fire every time element enters viewport\n\n**Use Cases**:\n\n- Lazy-loaded content tracking\n- Ad viewability\n- Section engagement tracking\n\n## Trigger Groups\n\n### Combining Triggers\n\nTrigger groups allow \"AND\" logic between multiple triggers.\n\n```\nTrigger Group Name: Engaged User on Product Page\nTriggers:\n  - Timer - 30 seconds\n  - Scroll Depth - 50%\n```\n\n**Use Cases**:\n\n- Engaged user definition\n- Complex conversion criteria\n- Multi-step funnel tracking\n\n## Trigger Conditions\n\n### Condition Operators\n\n- **equals**: Exact match\n- **contains**: Substring match\n- **starts with**: Prefix match\n- **ends with**: Suffix match\n- **matches RegEx**: Regular expression match\n- **does not equal**: Negative exact match\n- **does not contain**: Negative substring match\n- **less than / greater than**: Numeric comparison\n\n### Multiple Conditions\n\n**AND Logic**: All conditions in a trigger must match\n**OR Logic**: Use multiple triggers on the same tag\n\n### Common Condition Patterns\n\n**Exclude Internal Traffic**:\n\n```\nPage URL does not contain ?internal=true\n```\n\n**Specific Page Types**:\n\n```\nDL - Page Type equals product\n```\n\n**URL Parameter Present**:\n\n```\nPage URL matches RegEx [?&]utm_source=\n```\n\n## Blocking Triggers (Exceptions)\n\n### How Exception Triggers Work\n\nException triggers prevent a tag from firing even when firing triggers match.\n\n```\nTag: GA4 - Pageview\nFiring Triggers: All Pages\nException Triggers: Internal Traffic\n```\n\n### Common Exception Patterns\n\n**Block Internal Traffic**:\n\n```\nException Trigger: Internal Traffic\nCondition: Page URL contains ?internal=true\n```\n\n**Block During Testing**:\n\n```\nException Trigger: Preview Mode\nCondition: Debug Mode equals true\n```\n\n## Trigger Naming Conventions\n\n### Recommended Format\n\n```\n[Event Type] - [Description]\n```\n\n### Examples\n\n- `Pageview - All Pages`\n- `Pageview - Product Pages`\n- `Click - CTA Buttons`\n- `Click - Outbound Links`\n- `Form - Contact Form`\n- `Custom Event - Purchase`\n- `Scroll - 50% Blog Posts`\n- `Timer - 30 Seconds`\n\n## Debugging Triggers\n\n### Preview Mode Analysis\n\n1. Enable Preview mode\n2. Perform the action\n3. Check Summary panel for event\n4. Click event to see fired/not fired triggers\n5. Review Variables panel for condition values\n\n### Common Issues\n\n**Trigger Not Firing**:\n\n- Variable values don't match conditions\n- Element not present when listener initialised\n- Event not being pushed to data layer\n\n**Trigger Fires Too Often**:\n\n- Conditions too broad\n- Missing exception trigger\n- History Change firing on initial page load\n\n## Resources\n\n- [GTM Trigger Types](https://support.google.com/tagmanager/topic/7679108)\n- [Built-in Variables](https://support.google.com/tagmanager/answer/7182738)\n- [Regular Expressions in GTM](https://support.google.com/tagmanager/answer/7679316)\n",
        "plugins/marketing/skills/gtm/references/variables.md": "# GTM Variable Configuration\n\n**Sources**:\n\n- <https://support.google.com/tagmanager/topic/9125128>\n- <https://developers.google.com/tag-platform/tag-manager/web>\n\n**Last Updated**: 2025-01-09\n\n## Overview\n\nVariables in Google Tag Manager store and provide dynamic values for use in tags, triggers, and other variables. They capture information from the page, data layer, cookies, URLs, and more. This guide covers all variable types and configuration patterns.\n\n## Variable Fundamentals\n\n### How Variables Work\n\nVariables capture values that can be:\n\n- Used in tag configurations (e.g., event parameters)\n- Used in trigger conditions (e.g., fire when X equals Y)\n- Referenced by other variables\n- Displayed in Preview mode for debugging\n\n### Variable Syntax\n\nReference variables using double curly braces:\n\n```\n{{Variable Name}}\n```\n\nExample in tag configuration:\n\n```\nEvent Name: {{Event Name Variable}}\nUser ID: {{DL - User ID}}\n```\n\n## Built-in Variables\n\n### Enabling Built-in Variables\n\n1. Go to Variables\n2. Click \"Configure\" in Built-in Variables section\n3. Enable required variables\n\n### Page Variables\n\n| Variable | Description |\n|----------|-------------|\n| Page URL | Full URL including query string |\n| Page Hostname | Domain name only |\n| Page Path | Path without domain or query |\n| Referrer | Previous page URL |\n\n### Click Variables\n\n| Variable | Description |\n|----------|-------------|\n| Click Element | DOM element that was clicked |\n| Click Classes | Class attribute of clicked element |\n| Click ID | ID attribute of clicked element |\n| Click Target | Target attribute (for links) |\n| Click URL | href attribute (for links) |\n| Click Text | Text content of clicked element |\n\n### Form Variables\n\n| Variable | Description |\n|----------|-------------|\n| Form Element | DOM form element |\n| Form Classes | Form class attribute |\n| Form ID | Form ID attribute |\n| Form Target | Form target attribute |\n| Form URL | Form action attribute |\n| Form Text | Form text content |\n\n### History Variables\n\n| Variable | Description |\n|----------|-------------|\n| New History Fragment | New URL hash fragment |\n| Old History Fragment | Previous URL hash fragment |\n| New History State | New History API state object |\n| Old History State | Previous History API state object |\n| History Source | What triggered the change |\n\n### Utility Variables\n\n| Variable | Description |\n|----------|-------------|\n| Event | Current data layer event name |\n| Environment Name | Current GTM environment |\n| Container ID | GTM container ID |\n| Container Version | Current container version |\n| Debug Mode | True if in Preview mode |\n| Random Number | Random number 0-2147483647 |\n| HTML ID | Unique HTML element ID |\n\n### Video Variables\n\n| Variable | Description |\n|----------|-------------|\n| Video Provider | e.g., \"youtube\" |\n| Video Status | start, complete, pause, etc. |\n| Video URL | Video source URL |\n| Video Title | Video title |\n| Video Duration | Total duration in seconds |\n| Video Current Time | Current playback position |\n| Video Percent | Percentage of video watched |\n| Video Visible | Whether video is in viewport |\n\n### Scroll Variables\n\n| Variable | Description |\n|----------|-------------|\n| Scroll Depth Threshold | Depth value that triggered |\n| Scroll Depth Units | \"percent\" or \"pixels\" |\n| Scroll Direction | \"vertical\" or \"horizontal\" |\n\n### Visibility Variables\n\n| Variable | Description |\n|----------|-------------|\n| Percent Visible | Percentage of element visible |\n| On-Screen Duration | Time element has been visible |\n\n## User-Defined Variables\n\n### Data Layer Variable\n\nAccess values from the data layer:\n\n```\nVariable Type: Data Layer Variable\nData Layer Variable Name: userId\nData Layer Version: Version 2\n```\n\n**Accessing Nested Values**:\n\n```\nData Layer Variable Name: ecommerce.items.0.item_name\n```\n\n**Data Layer Push**:\n\n```javascript\ndataLayer.push({\n  'userId': 'USER123',\n  'ecommerce': {\n    'items': [{\n      'item_name': 'Blue Widget'\n    }]\n  }\n});\n```\n\n### 1st Party Cookie\n\nRead cookie values:\n\n```\nVariable Type: 1st Party Cookie\nCookie Name: _ga\n```\n\n**Use Cases**:\n\n- Read GA client ID\n- Check session cookies\n- Access custom cookies\n\n### URL Variable\n\nParse URL components:\n\n```\nVariable Type: URL\nComponent Type: Query\nQuery Key: utm_source\n```\n\n**Component Types**:\n\n- **Full URL**: Complete URL\n- **Protocol**: http or https\n- **Host Name**: Domain name\n- **Port**: Port number\n- **Path**: URL path\n- **Query**: Query string or specific parameter\n- **Fragment**: URL hash/anchor\n\n### JavaScript Variable\n\nAccess global JavaScript variables:\n\n```\nVariable Type: JavaScript Variable\nGlobal Variable Name: document.title\n```\n\n**Examples**:\n\n- `document.title` - Page title\n- `navigator.userAgent` - User agent string\n- `window.innerWidth` - Viewport width\n\n### Custom JavaScript\n\nExecute JavaScript to return a value:\n\n```\nVariable Type: Custom JavaScript\nCustom JavaScript:\nfunction() {\n  var path = {{Page Path}};\n  return path.split('/')[1] || 'home';\n}\n```\n\n**Important**: Use ES5 syntax only (no const, let, arrow functions)\n\n**Pattern Examples**:\n\n```javascript\n// Get first path segment\nfunction() {\n  var path = {{Page Path}};\n  var segments = path.split('/').filter(function(s) { return s; });\n  return segments[0] || 'home';\n}\n```\n\n```javascript\n// Format currency\nfunction() {\n  var value = {{DL - Transaction Total}};\n  if (typeof value === 'number') {\n    return value.toFixed(2);\n  }\n  return '0.00';\n}\n```\n\n```javascript\n// Check if user is logged in\nfunction() {\n  var userId = {{DL - User ID}};\n  return userId ? 'logged_in' : 'guest';\n}\n```\n\n### Constant\n\nStore static values:\n\n```\nVariable Type: Constant\nValue: G-XXXXXXXXXX\n```\n\n**Use Cases**:\n\n- GA4 Measurement IDs\n- Pixel IDs\n- API keys (non-sensitive)\n- Environment-specific values\n\n### Lookup Table\n\nMap input values to output values:\n\n```\nVariable Type: Lookup Table\nInput Variable: {{Page Path}}\nLookup Table:\n  /                   -> home\n  /products           -> products\n  /about              -> about\n  /contact            -> contact\nDefault Value: other\n```\n\n### Regex Table\n\nMap regex patterns to values:\n\n```\nVariable Type: Regex Table\nInput Variable: {{Page Path}}\nRegex Table:\n  ^/$                 -> home\n  ^/products/         -> product_detail\n  ^/category/         -> category\n  ^/blog/             -> blog_post\nDefault Value: other\n```\n\n**Pattern Matching Tips**:\n\n- Patterns are matched in order, first match wins\n- Use `^` for start anchor, `$` for end anchor\n- Enable \"Ignore Case\" if needed\n- Enable \"Full Matches Only\" for stricter matching\n\n### Auto-Event Variable\n\nAccess data from built-in event listeners:\n\n```\nVariable Type: Auto-Event Variable\nVariable Type: Element Attribute\nAttribute Name: data-product-id\n```\n\n**Variable Types**:\n\n- **Element**: The DOM element\n- **Element Classes**: Class attribute\n- **Element ID**: ID attribute\n- **Element Target**: Target attribute\n- **Element Text**: Text content\n- **Element URL**: href attribute\n- **Element Attribute**: Custom attribute\n- **History Source**: History change source\n- **History New/Old State**: State objects\n- **History New/Old Fragment**: URL fragments\n\n### DOM Element\n\nRead content from DOM elements:\n\n```\nVariable Type: DOM Element\nSelection Method: CSS Selector\nElement Selector: h1.product-title\nAttribute Name: (leave blank for text content)\n```\n\n**Use Cases**:\n\n- Read page title from H1\n- Extract product name from element\n- Read meta tag content\n\n### Element Visibility\n\nCheck if element is visible:\n\n```\nVariable Type: Element Visibility\nSelection Method: ID\nElement ID: product-reviews\nOutput Type: Boolean\n```\n\n### Google Analytics Settings (Legacy)\n\nStore shared GA Universal settings:\n\n```\nVariable Type: Google Analytics Settings\nTracking ID: UA-XXXXXX-X\nFields to Set:\n  - anonymizeIp: true\nCustom Dimensions:\n  - index: 1, dimension value: {{User Type}}\n```\n\n**Note**: For GA4, use GA4 Configuration tags instead.\n\n## Variable Scoping and Persistence\n\n### Variable Evaluation\n\nVariables are evaluated:\n\n- When referenced in tags (at tag fire time)\n- When used in trigger conditions (at event time)\n- When referenced by other variables\n\n### Data Layer Persistence\n\nData layer values persist until:\n\n- Overwritten by a new push\n- Page reloads\n- Explicitly cleared (using undefined or reset)\n\n```javascript\n// Clear a value\ndataLayer.push({\n  'previousValue': undefined\n});\n```\n\n## Advanced Variable Patterns\n\n### Chained Variables\n\nVariables can reference other variables:\n\n```\nVariable: Full Event Name\nType: Custom JavaScript\nfunction() {\n  return {{Event Category}} + ' - ' + {{Event Action}};\n}\n```\n\n### Conditional Values\n\nReturn different values based on conditions:\n\n```javascript\nfunction() {\n  var pageType = {{DL - Page Type}};\n  if (pageType === 'product') {\n    return {{DL - Product ID}};\n  } else if (pageType === 'category') {\n    return {{DL - Category ID}};\n  }\n  return 'none';\n}\n```\n\n### Array/Object Handling\n\nWork with complex data structures:\n\n```javascript\n// Get first item from array\nfunction() {\n  var items = {{DL - Ecommerce Items}};\n  if (items && items.length > 0) {\n    return items[0].item_name;\n  }\n  return '';\n}\n```\n\n```javascript\n// Convert array to comma-separated string\nfunction() {\n  var items = {{DL - Ecommerce Items}};\n  if (!items) return '';\n  return items.map(function(item) {\n    return item.item_id;\n  }).join(',');\n}\n```\n\n### URL Parameter Extraction\n\nParse multiple URL parameters:\n\n```javascript\nfunction() {\n  var url = {{Page URL}};\n  var params = {};\n  var queryString = url.split('?')[1];\n  if (queryString) {\n    queryString.split('&').forEach(function(pair) {\n      var parts = pair.split('=');\n      params[parts[0]] = decodeURIComponent(parts[1] || '');\n    });\n  }\n  return params;\n}\n```\n\n## Variable Naming Conventions\n\n### Recommended Format\n\n```\n[Type] - [Description]\n```\n\n### Type Prefixes\n\n- **DL**: Data Layer Variable\n- **CJS**: Custom JavaScript\n- **URL**: URL Variable\n- **Cookie**: Cookie Variable\n- **Const**: Constant\n- **Lookup**: Lookup Table\n- **Regex**: Regex Table\n- **DOM**: DOM Element\n- **JS**: JavaScript Variable\n\n### Examples\n\n- `DL - User ID`\n- `DL - Product Name`\n- `DL - Transaction Total`\n- `CJS - Page Category`\n- `CJS - Formatted Price`\n- `URL - UTM Source`\n- `URL - UTM Campaign`\n- `Const - GA4 Measurement ID`\n- `Const - FB Pixel ID`\n- `Lookup - Page Type`\n- `Cookie - Session ID`\n\n## Debugging Variables\n\n### Preview Mode\n\n1. Enable Preview mode\n2. Click on any event in Summary\n3. Open Variables tab\n4. View all variable values at that event\n\n### Undefined Values\n\nIf a variable returns undefined:\n\n- Check data layer has the value\n- Verify variable name/path spelling\n- Check timing (value pushed after tag fires)\n- Verify data layer version setting\n\n### Common Issues\n\n**Data Layer Variable Not Found**:\n\n- Check exact path (case-sensitive)\n- Verify value exists in data layer\n- Check Data Layer Version setting\n\n**Custom JavaScript Errors**:\n\n- Check browser console for errors\n- Verify ES5 syntax (no const, let, arrow functions)\n- Test function logic separately\n\n**Lookup/Regex Table Not Matching**:\n\n- Check input variable value in Preview\n- Verify pattern syntax\n- Check pattern order (first match wins)\n\n## Resources\n\n- [GTM Variable Types](https://support.google.com/tagmanager/topic/9125128)\n- [Built-in Variables Reference](https://support.google.com/tagmanager/answer/7182738)\n- [Data Layer Developer Guide](https://developers.google.com/tag-platform/tag-manager/datalayer)\n",
        "plugins/mcp-alphavantage/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-alphavantage\",\n  \"description\": \"Stock market data, company information, and financial indicators via AlphaVantage\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"1.0.0\"\n}\n",
        "plugins/mcp-alphavantage/README.md": "# MCP AlphaVantage\n\nStock market data, company information, and financial indicators via AlphaVantage.\n\n## Installation\n\n```bash\n/plugin install mcp-alphavantage@wookstar\n```\n\n## Required Environment Variables\n\n```bash\nALPHAVANTAGEAPIKEY=your_key_here\n```\n\n## API Key\n\nGet your free API key at https://www.alphavantage.co/support/#api-key\n\n## Usage\n\nOnce installed, use for:\n- Stock market queries\n- Company financial data\n- Market trend analysis\n- Investment research\n",
        "plugins/mcp-coingecko/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-coingecko\",\n  \"description\": \"Cryptocurrency prices, market data, and historical trends via CoinGecko\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"1.0.0\"\n}\n",
        "plugins/mcp-coingecko/README.md": "# MCP CoinGecko\n\nCryptocurrency prices, market data, and historical trends via CoinGecko.\n\n## Installation\n\n```bash\n/plugin install mcp-coingecko@wookstar\n```\n\n## Required Environment Variables\n\n```bash\nCOINGECKO_DEMO_API_KEY=your_key_here\n```\n\n## API Key\n\nGet your demo API key at https://www.coingecko.com/en/api\n\n## Usage\n\nOnce installed, use for:\n- Cryptocurrency price queries\n- Market cap comparisons\n- Historical trend analysis\n- Portfolio tracking\n",
        "plugins/mcp-currency-conversion/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-currency-conversion\",\n  \"description\": \"Real-time currency exchange rates and conversion (no API key required)\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"1.0.0\"\n}\n",
        "plugins/mcp-currency-conversion/README.md": "# MCP Currency Conversion\n\nReal-time currency exchange rates and conversion.\n\n## Installation\n\n```bash\n/plugin install mcp-currency-conversion@wookstar\n```\n\n## Configuration\n\nNo API key required - uses public currency conversion service.\n\n## Usage\n\nOnce installed, use for:\n- Currency exchange rate queries\n- Converting between currencies\n- International pricing calculations\n",
        "plugins/mcp-fetch/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-fetch\",\n  \"description\": \"Web content fetching and HTTP requests\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"1.0.0\"\n}\n",
        "plugins/mcp-fetch/README.md": "# MCP Fetch\n\nWeb content fetching and HTTP requests.\n\n## Installation\n\n```bash\n/plugin install mcp-fetch@wookstar\n```\n\n## Description\n\nThis MCP server provides web content fetching capabilities using the `mcp-server-fetch` package.\n\n## Configuration\n\nNo API key required. Uses `uvx mcp-server-fetch` command.\n",
        "plugins/mcp-gemini-bridge/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-gemini-bridge\",\n  \"description\": \"Google Gemini AI model integration via MCP\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"1.0.0\"\n}\n",
        "plugins/mcp-gemini-bridge/README.md": "# MCP Gemini Bridge\n\nGoogle Gemini AI model integration via MCP.\n\n## Installation\n\n```bash\n/plugin install mcp-gemini-bridge@wookstar\n```\n\n## Configuration\n\nNo API key required - authentication handled via uvx.\n\n## Usage\n\nOnce installed, use Gemini for:\n- Multi-modal tasks (text and images)\n- Comparing AI model outputs\n- Alternative AI perspectives\n",
        "plugins/mcp-google-workspace/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-google-workspace\",\n  \"description\": \"Google Workspace integration (Gmail, Drive, Calendar)\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"1.0.0\"\n}\n",
        "plugins/mcp-google-workspace/README.md": "# MCP Google Workspace\n\nGoogle Workspace integration for Gmail, Drive, and Calendar.\n\n## Installation\n\n```bash\n/plugin install mcp-google-workspace@wookstar\n```\n\n## Configuration\n\nRequires the following environment variables:\n\n- `GOOGLE_OAUTH_CLIENT_ID`: Your Google OAuth client ID\n- `GOOGLE_OAUTH_CLIENT_SECRET`: Your Google OAuth client secret\n\nUses `uvx workspace-mcp` command.\n",
        "plugins/mcp-mikrotik/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-mikrotik\",\n  \"description\": \"MikroTik router management and network automation\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"1.0.0\"\n}\n",
        "plugins/mcp-mikrotik/README.md": "# MCP MikroTik\n\nMikroTik router management and network automation.\n\n## Installation\n\n```bash\n/plugin install mcp-mikrotik@wookstar\n```\n\n## Configuration\n\nRequires the following environment variables:\n\n- `MIKROTIK_HOST`: MikroTik router hostname or IP\n- `MIKROTIK_USER`: SSH username\n- `MIKROTIK_PASSWORD`: SSH password\n\nDefault port: 2200\n\nUses `uvx mcp-server-mikrotik` command.\n",
        "plugins/mcp-n8n/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-n8n\",\n  \"description\": \"n8n workflow automation integration\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"1.0.0\"\n}\n",
        "plugins/mcp-n8n/README.md": "# MCP n8n\n\nn8n workflow automation integration.\n\n## Installation\n\n```bash\n/plugin install mcp-n8n@wookstar\n```\n\n## Configuration\n\nRequires the following environment variables:\n\n- `N8N_API_KEY`: Your n8n API key\n\nUses `npx n8n-mcp` command.\n",
        "plugins/mcp-notion/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-notion\",\n  \"description\": \"Notion workspace and database integration\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"1.0.0\"\n}\n",
        "plugins/mcp-notion/README.md": "# MCP Notion\n\nNotion workspace and database integration.\n\n## Installation\n\n```bash\n/plugin install mcp-notion@wookstar\n```\n\n## Configuration\n\nThis MCP server uses HTTP transport via Notion's official MCP endpoint.\n\nNo environment variables required - authentication handled through Notion's MCP service.\n",
        "plugins/mcp-open-meteo/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-open-meteo\",\n  \"description\": \"Weather and climate data (no API key required)\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"1.0.0\"\n}\n",
        "plugins/mcp-open-meteo/README.md": "# MCP Open-Meteo\n\nWeather and climate data from Open-Meteo API.\n\n## Installation\n\n```bash\n/plugin install mcp-open-meteo@wookstar\n```\n\n## Description\n\nProvides access to weather forecasts, air quality data, marine data, historical weather archives, seasonal forecasts, ensemble predictions, and geocoding.\n\n## Configuration\n\nNo API key required. Uses the free Open-Meteo API endpoints.\n\nUses `npx open-meteo-mcp-server` command.\n",
        "plugins/mcp-perplexity/.claude-plugin/plugin.json": "{\n  \"name\": \"mcp-perplexity\",\n  \"description\": \"Perplexity AI-powered search and information retrieval\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"1.0.0\"\n}\n",
        "plugins/mcp-perplexity/README.md": "# MCP Perplexity\n\nPerplexity AI-powered search and information retrieval.\n\n## Installation\n\n```bash\n/plugin install mcp-perplexity@wookstar\n```\n\n## Required Environment Variables\n\n```bash\nPERPLEXITY_API_KEY=your_key_here\n```\n\n## API Key\n\nGet your API key at https://www.perplexity.ai/settings/api\n\n## Usage\n\nOnce installed, use for:\n- AI-powered research and information gathering\n- Real-time information retrieval\n- Searching for latest news and developments\n",
        "plugins/productivity/.claude-plugin/plugin.json": "{\n  \"name\": \"productivity\",\n  \"description\": \"Workflow orchestration suite: 4 commands for planning, parallel task execution, and session priming + 2 skills (Google Apps Script for Workspace automation, Tampermonkey for browser userscripts)\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"2.1.0\"\n}\n",
        "plugins/productivity/README.md": "# Productivity Toolkit\n\nStreamlined workflow orchestration commands for planning and parallel task execution in Claude Code, plus Google Apps Script automation for Workspace.\n\n## What's Included\n\n### Commands (4)\n\n- **/planning** - Structured planning workflows for feature development\n- **/prep-parallel** - Prepare tasks for parallel execution\n- **/execute-parallel** - Execute prepared tasks in parallel\n- **/primer** - Quick project initialisation and context gathering\n\n### Skills (2)\n\n- **google-apps-script** - Google Apps Script expertise for Workspace automation (Sheets, Docs, Gmail, Drive, Calendar, Forms, Slides)\n- **tampermonkey** - Tampermonkey userscript development for browser automation, page modification, and web enhancement\n\n## Installation\n\n```bash\n/plugin install productivity@wookstar\n```\n\n## Usage Examples\n\n### Workflow Commands\n\n```bash\n# Plan a complex feature with structured workflow\n/planning \"Design a real-time notification system\"\n\n# Prepare multiple tasks for parallel execution\n/prep-parallel \"tasks.md\"\n\n# Execute the prepared parallel tasks\n/execute-parallel\n\n# Quick project primer to understand codebase\n/primer\n```\n\n### Google Apps Script\n\n```bash\n# Sheets automation\n\"Create a custom function to calculate tax in Google Sheets\"\n\n# Gmail automation\n\"Build an auto-responder script for Gmail\"\n\n# Document generation\n\"Generate personalized contracts from a Sheets template\"\n\n# Workflow automation\n\"Create a script to sync Calendar events with Sheets\"\n```\n\n### Tampermonkey\n\n```bash\n# Page modification\n\"Write a userscript to add a dark mode toggle to example.com\"\n\n# Element hiding\n\"Create a script to hide annoying popups on news sites\"\n\n# Form automation\n\"Build a userscript that auto-fills login forms\"\n\n# Data extraction\n\"Write a script to extract product prices from a shopping site\"\n\n# SPA enhancements\n\"Create a userscript that adds keyboard shortcuts to a React app\"\n```\n\n## Command Details\n\n### /planning\n\nStructured planning workflow that guides you through feature development with organised phases:\n\n- Problem definition and scope\n- Technical requirements analysis\n- Implementation approach\n- Task breakdown and prioritisation\n\n### /prep-parallel\n\nPrepares tasks for parallel execution by:\n\n- Parsing task specifications from a file\n- Analysing dependencies between tasks\n- Organising tasks into executable batches\n- Generating execution plan\n\n### /execute-parallel\n\nExecutes prepared tasks in parallel:\n\n- Runs independent tasks concurrently\n- Manages task dependencies\n- Aggregates results from all tasks\n- Handles errors gracefully\n\n### /primer\n\nQuick project initialisation command that:\n\n- Scans project structure\n- Identifies key files and patterns\n- Gathers context about the codebase\n- Prepares for efficient development work\n\n## Skill Details\n\n### google-apps-script\n\nGoogle Apps Script expertise for Workspace automation:\n\n**Supported Services:**\n- Google Sheets - custom functions, data manipulation, automation\n- Google Docs - document creation, formatting, mail merge\n- Gmail - email automation, filters, auto-responders\n- Google Drive - file management, permissions, organisation\n- Google Calendar - event management, scheduling, sync\n- Google Forms - response handling, notifications\n- Google Slides - presentation generation\n\n**Capabilities:**\n- Custom function development\n- Trigger-based automation (time-based, form submission, etc.)\n- Web app deployment\n- Add-on development\n- External API integration\n- Workspace add-ons\n\n### tampermonkey\n\nTampermonkey userscript development for browser automation and web enhancement:\n\n**Use Cases:**\n- Browser scripts for page modification\n- Hiding unwanted elements (ads, popups, banners)\n- Form auto-fill and automation\n- Data extraction and scraping\n- Adding custom functionality to websites\n- SPA enhancements (URL change detection, keyboard shortcuts)\n- Cross-origin API requests from browser\n\n**Capabilities:**\n- Complete userscript header syntax (@match, @grant, @require, @run-at)\n- GM_* API functions (storage, HTTP requests, styles, notifications)\n- Common patterns (element waiting, mutation observers, URL detection)\n- Security best practices and sandboxing\n- Cross-browser compatibility (Chrome, Firefox, Edge)\n- 18 reference guides for deep API documentation\n\n## When to Use\n\nThis toolkit is ideal for:\n\n- Planning complex features with multiple components\n- Breaking down large projects into parallel workstreams\n- Executing multiple independent tasks efficiently\n- Quickly getting oriented in a new codebase\n- Orchestrating development workflows\n- Automating Google Workspace tasks\n- Building custom Sheets functions\n- Creating email and document automation\n- Writing browser userscripts for page modification\n- Automating repetitive browser tasks\n- Enhancing websites with custom functionality\n",
        "plugins/productivity/commands/execute-parallel.md": "---\ndescription: Execute multiple tasks in parallel using git worktrees\nargument-hint: [feature-name] [plan-file] [number-of-worktrees]\n---\n\n# Parallel Task Version Execution\n\n## Variables\nFEATURE_NAME: $ARGUMENTS\nPLAN_TO_EXECUTE: $ARGUMENTS\nNUMBER_OF_PARALLEL_WORKTREES: $ARGUMENTS\n\n## Instructions\n\nWe're going to create NUMBER_OF_PARALLEL_WORKTREES new subagents that use the Task tool to create N versions of the same feature in parallel.\n\nBe sure to read PLAN_TO_EXECUTE.\n\nThis enables use to concurrently build the same feature in parallel so we can test and validate each subagent's changes in isolation then pick the best changes.\n\nThe first agent will run in trees/<FEATURE_NAME>-1/\nThe second agent will run in trees/<FEATURE_NAME>-2/\n...\nThe last agent will run in trees/<FEATURE_NAME>-<NUMBER_OF_PARALLEL_WORKTREES>/\n\nThe code in trees/<FEATURE_NAME>-<i>/ will be identical to the code in the current branch. It will be setup and ready for you to build the feature end to end.\n\nEach agent will independently implement the engineering plan detailed in PLAN_TO_EXECUTE in their respective workspace.\n\nWhen the subagent completes it's work, have the subagent to report their final changes made in a comprehensive `RESULTS.md` file at the root of their respective workspace.\n\nMake sure agents don't run any tests or other code - focus on the code changes only.",
        "plugins/productivity/commands/planning.md": "---\ndescription: Create detailed project plans with research and collaboration\nargument-hint: [project objective or feature]\n---\n\nPlease create a detailed plan to implement a project objective or feature according to the user's task which is as follows:  $ARGUMENTS.\n\n- You will ask followup questions and clarification prompts to the user until you are clear how to approach the plan.\n- You are to collect as much information as you can around the project to maximise its chances of success. \n- You will now ULTRATHINK about the plan and figure out if you are missing anything, spin the project around from a different perspective and challenge your assumptions. \n- You will research online, to find peer reviewed solutions, best practises or other inspiration sources that help increase the chances of success.\n- Once your reserach is completed, you will create a clearly described task list and present that to the user.\n- You will NOT write any code or start building anything until the user has confirmed your plan and task list, so you will collaborate with the user until this has been completed and the plan is confirmed.",
        "plugins/productivity/commands/prep-parallel.md": "---\ndescription: Prepare git worktree directories for parallel task execution\nargument-hint: [feature-name] [number-of-worktrees]\n---\n\n# Initialize parallel git worktree directories for parallel Claude Code agents\n\n## Variables\nFEATURE_NAME: $ARGUMENTS\nNUMBER_OF_PARALLEL_WORKTREES: $ARGUMENTS\n\n## Execute these commands\n> Execute the loop in parallel with the Batch and Task tool\n\n- create a new dir `trees/`\n- for i in NUMBER_OF_PARALLEL_WORKTREES\n  - RUN `git worktree add -b FEATURE_NAME-i ./trees/FEATURE_NAME-i`\n  - RUN `cd trees/FEATURE_NAME-i`, `git ls-files` to validate\n- RUN `git worktree list` to verify all trees were created properly",
        "plugins/productivity/commands/primer.md": "---\ndescription: Prime the session with project context and objectives\n---\n\n# Prime Context for Claude Code\n\nUse the command `tree` to get an understanding of the project structure.\n\nStart with reading the CLAUDE.md file if it exists to get an understanding of the project.\n\nRead the README.md file to get an understanding of the project.\n\nRead key files in the src/ or root directory\n\nExplain back to me:\n- Project structure\n- Project purpose and goals\n- Key files and their purposes\n- Any important dependencies\n- Any important configuration files",
        "plugins/productivity/skills/google-apps-script/SKILL.md": "---\nname: google-apps-script\ndescription: Comprehensive guide for Google Apps Script development covering all built-in services (SpreadsheetApp, DocumentApp, GmailApp, DriveApp, CalendarApp, FormApp, SlidesApp), triggers, authorization, error handling, and performance optimization. Use when automating Google Sheets operations, creating Google Docs, managing Gmail/email, working with Google Drive files, automating Calendar events, implementing triggers (time-based, event-based), building custom functions, creating add-ons, handling OAuth scopes, optimizing Apps Script performance, working with UrlFetchApp for API calls, using PropertiesService for persistent storage, or implementing CacheService for temporary data. Covers batch operations, error recovery, and JavaScript ES6+ runtime.\n---\n\n# Google Apps Script\n\n## Overview\n\nThis skill provides comprehensive guidance for developing Google Apps Script applications that automate Google Workspace services. Google Apps Script is a cloud-based JavaScript platform that enables automation across Google Sheets, Docs, Gmail, Drive, Calendar, and more, with server-side execution and automatic OAuth integration.\n\n## When to Use This Skill\n\nInvoke this skill when:\n\n- Automating Google Sheets operations (reading, writing, formatting)\n- Creating or editing Google Docs programmatically\n- Managing Gmail messages and sending emails\n- Working with Google Drive files and folders\n- Automating Google Calendar events\n- Implementing triggers (time-based or event-based)\n- Building custom functions for Sheets\n- Creating Google Workspace add-ons\n- Handling OAuth scopes and authorization\n- Making HTTP requests to external APIs with UrlFetchApp\n- Using persistent storage with PropertiesService\n- Implementing caching strategies with CacheService\n- Optimizing performance with batch operations\n- Debugging Apps Script code or authorization issues\n\n## Core Services\n\n### 1. SpreadsheetApp (Google Sheets Automation)\n\nAutomate all aspects of Google Sheets including reading, writing, formatting, and data manipulation.\n\n**Common operations:**\n- Read/write cell values and ranges\n- Format cells (fonts, colors, borders)\n- Create/delete sheets\n- Insert/delete rows and columns\n- Apply formulas and data validation\n- Batch operations for performance\n\n### 2. DocumentApp (Google Docs Creation)\n\nCreate and edit Google Docs programmatically including text, tables, images, and formatting.\n\n**Common operations:**\n- Create documents and add content\n- Format paragraphs and text\n- Insert tables and images\n- Find and replace text\n- Manage document structure\n\n### 3. GmailApp & MailApp (Email Management)\n\nAutomate email operations including sending, searching, and managing Gmail messages.\n\n**Common operations:**\n- Send emails with attachments\n- Search and read Gmail messages\n- Manage labels and threads\n- Send HTML emails\n- Process inbox automatically\n\n### 4. DriveApp (File Operations)\n\nManage Google Drive files and folders programmatically.\n\n**Common operations:**\n- Create, copy, move, delete files\n- Search for files and folders\n- Share files and manage permissions\n- Convert file formats\n- Organize with folders\n\n### 5. CalendarApp (Calendar Automation)\n\nAutomate Google Calendar operations including events, reminders, and recurring appointments.\n\n**Common operations:**\n- Create and modify events\n- Set up recurring events\n- Add guests and reminders\n- Query calendar for events\n- Manage multiple calendars\n\n### 6. Triggers & Automation\n\nImplement time-based and event-driven automation.\n\n**Trigger types:**\n- Time-based (hourly, daily, weekly)\n- On edit (spreadsheet changes)\n- On form submit\n- On open (document/spreadsheet open)\n\n## Quick Start Examples\n\n### Example 1: Automated Spreadsheet Report\n\n```javascript\nfunction generateWeeklyReport() {\n  const ss = SpreadsheetApp.getActiveSpreadsheet();\n  const sheet = ss.getSheetByName('Data');\n\n  // Batch read for performance\n  const data = sheet.getRange('A2:D').getValues();\n\n  // Process data\n  const report = data\n    .filter(row => row[0])  // Filter empty rows\n    .map(row => ({\n      name: row[0],\n      value: row[1],\n      status: row[2],\n      date: row[3]\n    }));\n\n  // Write summary\n  const summarySheet = ss.getSheetByName('Summary') || ss.insertSheet('Summary');\n  summarySheet.clear();\n  summarySheet.appendRow(['Name', 'Total Value', 'Status']);\n\n  report.forEach(item => {\n    summarySheet.appendRow([item.name, item.value, item.status]);\n  });\n\n  // Email notification\n  MailApp.sendEmail({\n    to: Session.getEffectiveUser().getEmail(),\n    subject: 'Weekly Report Generated',\n    body: `Report generated with ${report.length} records.`\n  });\n}\n```\n\n### Example 2: Gmail Auto-Responder\n\n```javascript\nfunction processUnreadEmails() {\n  const threads = GmailApp.search('is:unread from:specific@example.com');\n\n  threads.forEach(thread => {\n    const messages = thread.getMessages();\n    const latestMessage = messages[messages.length - 1];\n\n    const subject = latestMessage.getSubject();\n    const body = latestMessage.getPlainBody();\n\n    // Process and respond\n    thread.reply(`Thank you for your email regarding: ${subject}\\n\\nWe will respond within 24 hours.`);\n\n    // Mark as read and label\n    thread.markRead();\n    const label = GmailApp.getUserLabelByName('Auto-Responded');\n    thread.addLabel(label);\n  });\n}\n```\n\n### Example 3: Document Generation from Template\n\n```javascript\nfunction generateDocumentFromTemplate() {\n  // Get template\n  const templateId = 'YOUR_TEMPLATE_ID';\n  const template = DriveApp.getFileById(templateId);\n\n  // Make copy\n  const newDoc = template.makeCopy('Generated Document - ' + new Date());\n\n  // Open and edit\n  const doc = DocumentApp.openById(newDoc.getId());\n  const body = doc.getBody();\n\n  // Replace placeholders\n  body.replaceText('{{NAME}}', 'John Doe');\n  body.replaceText('{{DATE}}', new Date().toDateString());\n  body.replaceText('{{AMOUNT}}', '$1,234.56');\n\n  // Save\n  doc.saveAndClose();\n\n  // Share with user\n  newDoc.addEditor('recipient@example.com');\n\n  Logger.log('Document created: ' + newDoc.getUrl());\n}\n```\n\n### Example 4: Time-Based Trigger Setup\n\n```javascript\nfunction setupDailyTrigger() {\n  // Delete existing triggers to avoid duplicates\n  const triggers = ScriptApp.getProjectTriggers();\n  triggers.forEach(trigger => {\n    if (trigger.getHandlerFunction() === 'dailyReport') {\n      ScriptApp.deleteTrigger(trigger);\n    }\n  });\n\n  // Create new trigger for 9 AM daily\n  ScriptApp.newTrigger('dailyReport')\n    .timeBased()\n    .atHour(9)\n    .everyDays(1)\n    .create();\n\n  Logger.log('Daily trigger configured');\n}\n\nfunction dailyReport() {\n  // This function runs daily at 9 AM\n  generateWeeklyReport();\n}\n```\n\n## Working with References\n\nFor comprehensive API documentation, code patterns, and detailed examples, see:\n\n- **references/apps-script-api-reference.md** - Complete Apps Script API reference for all built-in services\n\nThe reference file contains:\n- Core architecture and execution model\n- Complete SpreadsheetApp reference\n- Complete DocumentApp reference\n- GmailApp & MailApp methods\n- DriveApp operations\n- CalendarApp functionality\n- Trigger implementation patterns\n- Advanced services & utilities\n- Authorization & OAuth scopes\n- Error handling strategies\n- Performance optimization techniques\n- Quotas and limits reference\n\n## Best Practices\n\n### 1. Use Batch Operations for Performance\n\nMinimize API calls by batching reads and writes:\n\n```javascript\n// âœ… Good - Single batch read\nconst values = sheet.getRange('A1:Z1000').getValues();\n\n// âŒ Bad - 1000 individual reads\nfor (let i = 1; i <= 1000; i++) {\n  const value = sheet.getRange(`A${i}`).getValue();\n}\n```\n\n### 2. Cache Frequently Accessed Data\n\nUse CacheService for temporary data (25 min TTL):\n\n```javascript\nfunction getCachedData(key) {\n  const cache = CacheService.getScriptCache();\n  let data = cache.get(key);\n\n  if (!data) {\n    // Fetch from source\n    data = expensiveOperation();\n    cache.put(key, JSON.stringify(data), 600);  // 10 minutes\n  }\n\n  return JSON.parse(data);\n}\n```\n\n### 3. Handle Errors Gracefully\n\nImplement comprehensive error handling:\n\n```javascript\nfunction safeOperation() {\n  try {\n    // Operation code\n    const range = sheet.getRange('A1');\n    range.setValue('Value');\n  } catch (error) {\n    Logger.log('Error: ' + error.message);\n    Logger.log('Stack: ' + error.stack);\n\n    // Notify user\n    const ui = SpreadsheetApp.getUi();\n    ui.alert('Error: ' + error.message);\n\n    // Log to sheet for audit trail\n    const logSheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Error Log');\n    if (logSheet) {\n      logSheet.appendRow([new Date(), error.message, error.stack]);\n    }\n  }\n}\n```\n\n### 4. Respect Execution Limits\n\nScripts have a 6-minute timeout. For large operations:\n- Process in batches\n- Use triggers to split work\n- Implement progress tracking\n\n### 5. Minimize OAuth Scopes\n\nRequest only necessary permissions in `appscript.json`:\n\n```json\n{\n  \"oauthScopes\": [\n    \"https://www.googleapis.com/auth/spreadsheets.currentonly\",\n    \"https://www.googleapis.com/auth/script.send_mail\"\n  ]\n}\n```\n\n### 6. Use PropertiesService for Persistence\n\nStore configuration and state:\n\n```javascript\nfunction saveConfig(key, value) {\n  const props = PropertiesService.getScriptProperties();\n  props.setProperty(key, value);\n}\n\nfunction getConfig(key) {\n  const props = PropertiesService.getScriptProperties();\n  return props.getProperty(key);\n}\n```\n\n## Integration with Other Skills\n\n- **google-ads-scripts** - Use for exporting Google Ads data to Sheets for reporting\n- **gtm-datalayer** - Coordinate with GTM for tracking events triggered by Apps Script\n- **ga4-bigquery** - Query BigQuery from Apps Script and write results to Sheets\n\n## Common Patterns\n\n### Pattern: Spreadsheet Data Validation\n\n```javascript\nfunction setupDataValidation() {\n  const sheet = SpreadsheetApp.getActiveSheet();\n  const range = sheet.getRange('A2:A100');\n\n  // Create dropdown rule\n  const rule = SpreadsheetApp.newDataValidation()\n    .requireValueInList(['Option 1', 'Option 2', 'Option 3'])\n    .setAllowInvalid(false)\n    .build();\n\n  range.setDataValidation(rule);\n}\n```\n\n### Pattern: Retry Logic for API Calls\n\n```javascript\nfunction fetchWithRetry(url, maxRetries = 3) {\n  for (let attempt = 0; attempt <= maxRetries; attempt++) {\n    try {\n      const response = UrlFetchApp.fetch(url);\n      return JSON.parse(response.getContentText());\n    } catch (error) {\n      if (attempt === maxRetries) {\n        throw error;\n      }\n      Utilities.sleep(Math.pow(2, attempt) * 1000);  // Exponential backoff\n    }\n  }\n}\n```\n\n### Pattern: Form Response Processing\n\n```javascript\nfunction onFormSubmit(e) {\n  const response = e.values;  // Form responses\n  const email = response[1];  // Assuming email is column B\n  const name = response[2];   // Name in column C\n\n  // Send confirmation email\n  MailApp.sendEmail({\n    to: email,\n    subject: 'Form Submission Received',\n    body: `Hi ${name},\\n\\nThank you for your submission.`\n  });\n\n  // Log to separate sheet\n  const ss = SpreadsheetApp.getActiveSpreadsheet();\n  const logSheet = ss.getSheetByName('Processed') || ss.insertSheet('Processed');\n  logSheet.appendRow([new Date(), name, email, 'Processed']);\n}\n```\n\n## Validation & Testing\n\nUse the validation scripts in `scripts/` for pre-deployment checks:\n\n- **scripts/validators.py** - Validate spreadsheet operations, range notations, and data structures\n\n## Troubleshooting\n\n**Common Issues:**\n\n1. **Execution timeout** - Split work into smaller batches or use multiple triggers\n2. **Authorization error** - Check OAuth scopes in manifest file\n3. **Quota exceeded** - Reduce API call frequency, use caching\n4. **Null reference error** - Always validate that objects exist before accessing properties\n\n**Debug with Logger:**\n\n```javascript\nLogger.log('Debug info: ' + JSON.stringify(object));\n// View: View > Logs (Cmd/Ctrl + Enter)\n```\n\n**Use Breakpoints:**\n1. Add breakpoints in Apps Script editor\n2. Run with debugger\n3. Inspect variables and execution flow\n\n---\n\nThis skill provides production-ready patterns for Google Workspace automation. Consult the comprehensive API reference for detailed method signatures and advanced use cases.\n",
        "plugins/productivity/skills/google-apps-script/references/apps-script-api-reference.md": "---\nname: \"Google Apps Script - Mission Critical Reference\"\ndescription: \"Enterprise-grade, offline-accessible comprehensive guide for Google Apps Script development. Covers all built-in services (SpreadsheetApp, DocumentApp, GmailApp, DriveApp, CalendarApp, etc.), complete API reference, triggers, error handling, authorization scopes, performance optimization, and advanced patterns. Designed as the sole authoritative source for mission-critical automation when network infrastructure is unavailable.\"\nversion: \"2025-11-ENTERPRISE\"\nlast_updated: \"November 2025\"\nsecurity_classification: \"REFERENCE\"\n---\n\n# GOOGLE APPS SCRIPT ENTERPRISE REFERENCE\n## Mission-Critical Documentation\n\n**Document Version:** 2025-11-ENTERPRISE  \n**Last Updated:** November 10, 2025  \n**Offline Accessibility:** GUARANTEED  \n**Verification Status:** Official Google Documentation Cross-Referenced  \n\n---\n\n## TABLE OF CONTENTS\n\n1. [Enterprise Skill Overview](#enterprise-skill-overview)\n2. [Core Architecture](#core-architecture)\n3. [Complete Built-in Services Reference](#complete-built-in-services-reference)\n4. [SpreadsheetApp - Complete Reference](#spreadsheetapp---complete-reference)\n5. [DocumentApp - Complete Reference](#documentapp---complete-reference)\n6. [GmailApp & MailApp - Complete Reference](#gmailapp--mailapp---complete-reference)\n7. [DriveApp - Complete Reference](#driveapp---complete-reference)\n8. [CalendarApp - Complete Reference](#calendarapp---complete-reference)\n9. [Triggers - Complete Reference](#triggers---complete-reference)\n10. [Advanced Services & Utilities](#advanced-services--utilities)\n11. [Authorization & Security](#authorization--security)\n12. [Error Handling & Debugging](#error-handling--debugging)\n13. [Performance Optimization](#performance-optimization)\n14. [Best Practices & Patterns](#best-practices--patterns)\n\n---\n\n## ENTERPRISE SKILL OVERVIEW\n\n### Activation Criteria\n\nThis skill activates when developers need:\n- Google Sheets automation with Apps Script\n- Gmail/email automation and management\n- Google Drive file operations\n- Document/Presentation generation\n- Calendar automation\n- Form processing and integration\n- Cross-Google-Workspace automation\n- Custom functions and add-ons\n- Trigger implementation\n- Error handling and debugging\n\n### Document Guarantees\n\nâœ“ NO external links required  \nâœ“ ALL built-in services documented  \nâœ“ COMPLETE API patterns included  \nâœ“ ALL error scenarios covered  \nâœ“ Production-ready code examples  \nâœ“ Security hardening included  \nâœ“ Performance optimization strategies  \n\n---\n\n## CORE ARCHITECTURE\n\n### Google Apps Script Execution Model\n\n**Sandboxed JavaScript Runtime:**\n- Server-side execution\n- V8 runtime (modern JavaScript ES6+)\n- 6-minute execution timeout per function\n- Automatic service authorization\n\n**Services Architecture:**\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚    Google Apps Script Runtime (V8)      â”‚\nâ”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤\nâ”‚                                         â”‚\nâ”‚  Built-in Services (Auto-available)    â”‚\nâ”‚  â”œâ”€ SpreadsheetApp                     â”‚\nâ”‚  â”œâ”€ DocumentApp                        â”‚\nâ”‚  â”œâ”€ GmailApp                           â”‚\nâ”‚  â”œâ”€ DriveApp                           â”‚\nâ”‚  â”œâ”€ CalendarApp                        â”‚\nâ”‚  â”œâ”€ FormApp                            â”‚\nâ”‚  â”œâ”€ SlidesApp                          â”‚\nâ”‚  â””â”€ More...                            â”‚\nâ”‚                                         â”‚\nâ”‚  Utility Services                      â”‚\nâ”‚  â”œâ”€ Logger                             â”‚\nâ”‚  â”œâ”€ PropertiesService                  â”‚\nâ”‚  â”œâ”€ CacheService                       â”‚\nâ”‚  â”œâ”€ UrlFetchApp                        â”‚\nâ”‚  â””â”€ Utilities                          â”‚\nâ”‚                                         â”‚\nâ”‚  Advanced Services (Enable manually)   â”‚\nâ”‚  â”œâ”€ Google Analytics 4                 â”‚\nâ”‚  â”œâ”€ Google BigQuery                    â”‚\nâ”‚  â””â”€ More...                            â”‚\nâ”‚                                         â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Script Execution Limits\n\n| Limit | Value | Impact |\n|-------|-------|--------|\n| **Execution timeout** | 6 minutes | Functions must complete within this time |\n| **Spreadsheet read operations** | 300 per 100 seconds | Rate limit per user |\n| **Spreadsheet write operations** | 60 per 100 seconds | Rate limit per user |\n| **Email sends** | 100 per day (business) | Daily quota |\n| **Drive operations** | Depends on API | Use batch operations |\n| **Cache lifetime** | 25 minutes | Auto-deleted after timeout |\n| **Properties storage** | Unlimited (5GB practical) | Persistent storage |\n\n---\n\n## COMPLETE BUILT-IN SERVICES REFERENCE\n\n### Service Availability Matrix\n\n| Service | Type | Purpose |\n|---------|------|---------|\n| **SpreadsheetApp** | Built-in | Google Sheets manipulation |\n| **DocumentApp** | Built-in | Google Docs creation/editing |\n| **FormApp** | Built-in | Google Forms management |\n| **SlidesApp** | Built-in | Google Slides creation |\n| **GmailApp** | Built-in | Gmail operations (deprecated for email sending) |\n| **MailApp** | Built-in | Email sending (preferred) |\n| **CalendarApp** | Built-in | Google Calendar management |\n| **DriveApp** | Built-in | Google Drive file operations |\n| **ContactsApp** | Built-in | Google Contacts (deprecated) |\n| **Logger** | Built-in | Debug logging (console.log alternative) |\n| **PropertiesService** | Built-in | Persistent key-value storage |\n| **CacheService** | Built-in | Temporary key-value cache (25 min TTL) |\n| **UrlFetchApp** | Built-in | HTTP requests to external APIs |\n| **Utilities** | Built-in | Encoding, hashing, compression |\n| **ScriptApp** | Built-in | Trigger management |\n| **Session** | Built-in | User session information |\n| **Browser** | Built-in | UI dialogs and alerts |\n\n---\n\n## SPREADSHEETAPP - COMPLETE REFERENCE\n\n### Core Concepts\n\nSpreadsheetApp is the primary interface for Google Sheets automation.\n\n**Global Object:** `SpreadsheetApp`\n\n### Opening Spreadsheets\n\n**Get active spreadsheet:**\n```javascript\nconst ss = SpreadsheetApp.getActiveSpreadsheet();\nconst ssId = ss.getId();              // Get ID\nconst name = ss.getName();            // Get name\nconst url = ss.getUrl();              // Get URL\n```\n\n**Open by ID:**\n```javascript\nconst ss = SpreadsheetApp.openById('SHEET_ID_HERE');\n```\n\n**Open by URL:**\n```javascript\nconst ss = SpreadsheetApp.openByUrl('https://docs.google.com/spreadsheets/d/SHEET_ID/edit');\n```\n\n**Search and open:**\n```javascript\nconst files = DriveApp.getFilesByName('My Spreadsheet');\nif (files.hasNext()) {\n  const ss = SpreadsheetApp.open(files.next());\n}\n```\n\n### Sheet Operations\n\n**Get sheets:**\n```javascript\nconst ss = SpreadsheetApp.getActiveSpreadsheet();\nconst sheets = ss.getSheets();              // All sheets array\nconst sheet = sheets[0];                    // First sheet\nconst sheet = ss.getSheetByName('Sheet1');  // By name\nconst sheet = ss.getActiveSheet();          // Currently active\n```\n\n**Create sheet:**\n```javascript\nconst newSheet = ss.insertSheet('New Sheet Name');\nconst newSheet = ss.insertSheet('Sheet', 0);  // Insert at position\n```\n\n**Sheet properties:**\n```javascript\nconst name = sheet.getName();\nconst index = sheet.getIndex();\nconst id = sheet.getSheetId();\nconst rows = sheet.getMaxRows();\nconst cols = sheet.getMaxColumns();\n```\n\n**Delete sheet:**\n```javascript\nss.deleteSheet(sheet);\n```\n\n**Rename sheet:**\n```javascript\nsheet.setName('New Name');\n```\n\n### Range Operations\n\n**Get ranges:**\n```javascript\nconst range = sheet.getRange('A1');                    // Single cell\nconst range = sheet.getRange('A1:D10');               // Named range\nconst range = sheet.getRange(1, 1);                   // Row 1, Col 1\nconst range = sheet.getRange(1, 1, 5, 3);            // 5 rows, 3 cols from (1,1)\nconst namedRange = ss.getRangeByName('MyRange');      // Named range\n```\n\n**Read values:**\n```javascript\nconst value = range.getValue();                       // Single value\nconst values = range.getValues();                     // 2D array\nconst formulas = range.getFormulas();                 // Get formulas instead\nconst displayValues = range.getDisplayValues();       // Formatted display\nconst richValues = range.getRichTextValues();         // Rich text objects\n```\n\n**Write values:**\n```javascript\nrange.setValue('New Value');                          // Single cell\nrange.setValues([['A1', 'B1'], ['A2', 'B2']]);      // 2D array\nrange.setFormula('=SUM(A1:A10)');                    // Formula\nrange.setFormulas([['=A1', '=B1']]);                 // Array of formulas\n```\n\n**Clear ranges:**\n```javascript\nrange.clear();                          // Clear contents\nrange.clearContent();                   // Clear values only\nrange.clearFormat();                    // Clear formatting only\n```\n\n**Batch operations (faster):**\n```javascript\n// Get multiple ranges at once\nconst values = sheet.getRangeList(['A1', 'B1', 'C1']).getRanges()\n  .map(r => r.getValue());\n\n// Update multiple ranges\nsheet.getRangeList(['A1', 'B1', 'C1']).setValue('New Value');\n```\n\n### Formatting Operations\n\n**Text formatting:**\n```javascript\nrange.setFontSize(12);\nrange.setFontWeight('bold');\nrange.setFontStyle('italic');\nrange.setFontColor('#ff0000');\nrange.setFontFamily('Arial');\n```\n\n**Number formatting:**\n```javascript\nrange.setNumberFormat('0.00');           // 2 decimal places\nrange.setNumberFormat('$#,##0.00');      // Currency\nrange.setNumberFormat('0%');              // Percentage\nrange.setNumberFormat('mm/dd/yyyy');      // Date\nrange.setNumberFormat('h:mm AM/PM');      // Time\n```\n\n**Background color:**\n```javascript\nrange.setBackground('#00ff00');\nrange.setBackgroundRGB(0, 255, 0);\n```\n\n**Borders:**\n```javascript\nrange.setBorder(true, true, true, true, false, false);\n// top, left, bottom, right, vertical, horizontal\n```\n\n**Alignment:**\n```javascript\nrange.setHorizontalAlignment('center');      // left, center, right\nrange.setVerticalAlignment('middle');        // top, middle, bottom\nrange.setWrapStrategy(SpreadsheetApp.WrapStrategy.WRAP);\n```\n\n**Row and column operations:**\n```javascript\nsheet.setRowHeight(2, 50);                   // Set row height\nsheet.setColumnWidth(1, 100);                // Set column width\nsheet.autoResizeRows(1, 5);                  // Auto-fit 5 rows\nsheet.autoResizeColumns(1, 3);               // Auto-fit 3 columns\n```\n\n### Data Operations\n\n**Insert rows/columns:**\n```javascript\nsheet.insertRows(1, 5);                      // Insert 5 rows at position 1\nsheet.insertColumns(2, 3);                   // Insert 3 columns at position 2\n```\n\n**Delete rows/columns:**\n```javascript\nsheet.deleteRows(2, 5);                      // Delete 5 rows starting at row 2\nsheet.deleteColumns(3, 2);                   // Delete 2 columns starting at column 3\n```\n\n**Move rows/columns:**\n```javascript\nsheet.moveRows(range, destinationIndex);\n```\n\n**Copy range:**\n```javascript\nconst source = sheet.getRange('A1:C10');\nsource.copyTo(sheet.getRange('E1'));        // Copy to same sheet\nsource.copyTo(otherSheet.getRange('A1'));   // Copy to other sheet\n```\n\n**Append rows:**\n```javascript\nsheet.appendRow(['Value1', 'Value2', 'Value3']);\n```\n\n**Find and replace:**\n```javascript\nconst range = sheet.getRange('A1:Z100');\nrange.createTextFinder('old text')\n  .replaceAllWith('new text');\n```\n\n**Data validation:**\n```javascript\nconst range = sheet.getRange('A1:A10');\nconst rule = SpreadsheetApp.newDataValidation()\n  .requireNumberBetween(1, 100)\n  .setAllowInvalid(false)\n  .build();\nrange.setDataValidation(rule);\n```\n\n**Conditional formatting:**\n```javascript\nconst range = sheet.getRange('A1:A10');\nconst rule = SpreadsheetApp.newConditionalFormatRule()\n  .whenNumberGreaterThan(50)\n  .setBackground('#00ff00')\n  .setRanges([range])\n  .build();\nsheet.setConditionalFormatRules([rule]);\n```\n\n### Named Ranges\n\n**Create named range:**\n```javascript\nconst range = sheet.getRange('A1:C5');\nss.setNamedRange('MyRange', range);\n```\n\n**Get by name:**\n```javascript\nconst range = ss.getRangeByName('MyRange');\n```\n\n**Remove named range:**\n```javascript\nss.removeNamedRange('MyRange');\n```\n\n### Frozen Rows/Columns\n\n**Freeze rows/columns:**\n```javascript\nsheet.setFrozenRows(1);                      // Freeze first row\nsheet.setFrozenColumns(2);                   // Freeze first 2 columns\nsheet.setFrozenRows(1);\nsheet.setFrozenColumns(1);                   // Freeze row and column\n```\n\n**Unfreeze:**\n```javascript\nsheet.setFrozenRows(0);\nsheet.setFrozenColumns(0);\n```\n\n### Filters\n\n**Add filter:**\n```javascript\nconst range = sheet.getRange('A1:D50');\nrange.createFilter();\n```\n\n**Get filter:**\n```javascript\nconst filter = sheet.getFilter();\nif (filter) {\n  filter.remove();  // Remove filter\n}\n```\n\n---\n\n## DOCUMENTAPP - COMPLETE REFERENCE\n\n### Document Operations\n\n**Create document:**\n```javascript\nconst doc = DocumentApp.create('My Document');\nconst docId = doc.getId();\nconst body = doc.getBody();\n```\n\n**Open document:**\n```javascript\nconst doc = DocumentApp.openById('DOCUMENT_ID');\nconst doc = DriveApp.getFileById('FILE_ID').getAs(MimeType.GOOGLE_DOCS);\n```\n\n**Get active document (in bound script):**\n```javascript\nconst doc = DocumentApp.getActiveDocument();\n```\n\n### Body Operations\n\n**Append content:**\n```javascript\nconst body = doc.getBody();\nbody.appendParagraph('Text content');\nbody.appendHeading1('Heading 1');\nbody.appendHeading2('Heading 2');\nbody.appendHeading3('Heading 3');\nbody.appendTable([['Cell 1', 'Cell 2'], ['Cell 3', 'Cell 4']]);\nbody.appendHorizontalRule();\nbody.appendPageBreak();\n```\n\n**Insert content at specific position:**\n```javascript\nconst position = body.getChild(0);\nbody.insertParagraph(0, 'New first paragraph');\nbody.insertHeading1(0, 'New first heading');\n```\n\n**Text formatting:**\n```javascript\nconst text = body.editAsText();\ntext.setFontSize(12);\ntext.setFontFamily('Arial');\ntext.setBold(0, 5, true);                    // Bold characters 0-5\ntext.setItalic(6, 10, true);\ntext.setForegroundColor(0, 10, '#ff0000');\n```\n\n**Paragraph formatting:**\n```javascript\nconst paragraph = body.getParagraphs()[0];\nparagraph.setAlignment(DocumentApp.HorizontalAlignment.CENTER);\nparagraph.setHeadingAttributes(DocumentApp.ParagraphHeading.HEADING1);\nparagraph.setIndentFirstLine(36);            // First line indent\nparagraph.setIndentStart(18);                // Left indent\nparagraph.setIndentEnd(18);                  // Right indent\nparagraph.setSpacingBefore(12);\nparagraph.setSpacingAfter(12);\nparagraph.setLineSpacing(1.5);               // 1.5 line spacing\n```\n\n**Insert images:**\n```javascript\nconst imageBlob = DriveApp.getFileById('FILE_ID').getBlob();\nbody.appendImage(imageBlob);\nbody.appendImage(imageBlob)\n  .setWidth(200)\n  .setHeight(150);\n```\n\n**Insert links:**\n```javascript\nconst text = body.appendParagraph('Click here');\ntext.setLinkUrl(0, 10, 'https://example.com');\n```\n\n### Tables\n\n**Append table:**\n```javascript\nconst table = body.appendTable([\n  ['Header 1', 'Header 2'],\n  ['Row 1, Col 1', 'Row 1, Col 2'],\n  ['Row 2, Col 1', 'Row 2, Col 2']\n]);\n```\n\n**Modify tables:**\n```javascript\nconst table = body.getTables()[0];\ntable.appendTableRow(['New Cell 1', 'New Cell 2']);\ntable.deleteRow(0);                          // Delete first row\nconst cell = table.getRow(0).getCell(0);\ncell.setText('New content');\n```\n\n### Document Properties\n\n**Get/set title:**\n```javascript\nconst title = doc.getName();\ndoc.setName('New Title');\n```\n\n**Document ID:**\n```javascript\nconst docId = doc.getId();\nconst url = doc.getUrl();\n```\n\n**Body margins:**\n```javascript\nconst body = doc.getBody();\nbody.setMarginTop(72);          // 1 inch in points\nbody.setMarginBottom(72);\nbody.setMarginLeft(72);\nbody.setMarginRight(72);\n```\n\n**Page orientation:**\n```javascript\nconst margins = doc.getMarginTop();\ndoc.setPageHeight(792);         // 11 inches\ndoc.setPageWidth(612);          // 8.5 inches\n```\n\n### Finding and Replacing\n\n**Find text:**\n```javascript\nconst body = doc.getBody();\nconst element = body.findText('search term');\n```\n\n**Replace text:**\n```javascript\nbody.replaceText('old', 'new');\n```\n\n---\n\n## GMAILAPP & MAILAPP - COMPLETE REFERENCE\n\n### Sending Email (MailApp - Preferred)\n\n**Basic email:**\n```javascript\nMailApp.sendEmail('recipient@example.com', 'Subject', 'Message body');\n```\n\n**Email with options:**\n```javascript\nMailApp.sendEmail(\n  'recipient@example.com',\n  'Subject',\n  'Message body',\n  {\n    name: 'Sender Name',\n    replyTo: 'reply@example.com',\n    attachments: [blob1, blob2],\n    cc: 'cc@example.com',\n    bcc: 'bcc@example.com',\n    inlineImages: { imageName: imageBlob }\n  }\n);\n```\n\n**HTML email:**\n```javascript\nMailApp.sendEmail(\n  'recipient@example.com',\n  'Subject',\n  '',\n  {\n    htmlBody: '<h1>Hello</h1><p>This is HTML content</p>',\n    name: 'My Script'\n  }\n);\n```\n\n**Email with attachments:**\n```javascript\nconst file = DriveApp.getFileById('FILE_ID');\nMailApp.sendEmail('recipient@example.com', 'Subject', 'See attachment', {\n  attachments: [file.getAs(MimeType.PDF)]\n});\n```\n\n### GmailApp (Advanced Operations - Deprecated for Sending)\n\n**Search emails:**\n```javascript\nconst threads = GmailApp.search('is:unread from:sender@example.com');\nthreads.forEach(thread => {\n  Logger.log(thread.getFirstMessageSubject());\n});\n```\n\n**Get threads:**\n```javascript\nconst unreadThreads = GmailApp.getInboxUnreadCount();\nconst threads = GmailApp.getInboxThreads(0, 10);  // Get first 10\n```\n\n**Read messages:**\n```javascript\nconst thread = threads[0];\nconst messages = thread.getMessages();\nmessages.forEach(message => {\n  Logger.log(message.getSubject());\n  Logger.log(message.getFrom());\n  Logger.log(message.getPlainBody());\n  Logger.log(message.getHtmlBody());\n});\n```\n\n**Label operations:**\n```javascript\nconst label = GmailApp.getUserLabelByName('MyLabel');\nconst threads = label.getThreads();\n\n// Add label\nconst thread = GmailApp.getInboxThreads()[0];\nconst newLabel = GmailApp.getUserLabelByName('Archive');\nthread.addLabel(newLabel);\n\n// Remove label\nthread.removeLabel(newLabel);\n```\n\n**Mark as read:**\n```javascript\nthread.markRead();\nthread.markUnread();\n```\n\n**Star/unstar:**\n```javascript\nthread.star();\nthread.unstar();\n```\n\n**Archive:**\n```javascript\nthread.moveToArchive();\n```\n\n**Delete:**\n```javascript\nthread.moveToTrash();\n```\n\n---\n\n## DRIVEAPP - COMPLETE REFERENCE\n\n### File Operations\n\n**Create file:**\n```javascript\nconst blob = Utilities.newBlob('Content', 'text/plain', 'file.txt');\nconst file = DriveApp.createFile(blob);\nconst fileId = file.getId();\n```\n\n**Open file:**\n```javascript\nconst file = DriveApp.getFileById('FILE_ID');\nconst file = DriveApp.getFileByName('filename.txt');\nconst files = DriveApp.getFilesByName('filename.txt');  // Returns iterator\n```\n\n**File properties:**\n```javascript\nconst name = file.getName();\nconst id = file.getId();\nconst url = file.getUrl();\nconst mimeType = file.getMimeType();\nconst size = file.getSize();\nconst owner = file.getOwner().getEmail();\nconst lastUpdated = file.getLastUpdated();\nconst description = file.getDescription();\n```\n\n**Copy file:**\n```javascript\nconst copy = file.makeCopy('Copy Name');\n```\n\n**Move file:**\n```javascript\nconst folder = DriveApp.getFolderById('FOLDER_ID');\nfile.moveTo(folder);\n```\n\n**Rename file:**\n```javascript\nfile.setName('New Name');\n```\n\n**Delete file:**\n```javascript\nfile.setTrashed(true);  // Move to trash\nDriveApp.getFileById('FILE_ID').setTrashed(true);\n```\n\n**Download file:**\n```javascript\nconst blob = file.getBlob();\nconst content = blob.getDataAsString();\n```\n\n**Convert to different format:**\n```javascript\nconst csvBlob = file.getAs(MimeType.CSV);\nconst pdfBlob = file.getAs(MimeType.PDF);\n```\n\n### Folder Operations\n\n**Create folder:**\n```javascript\nconst folder = DriveApp.createFolder('New Folder');\nconst folderId = folder.getId();\n```\n\n**Open folder:**\n```javascript\nconst folder = DriveApp.getFolderById('FOLDER_ID');\nconst root = DriveApp.getRootFolder();\n```\n\n**List contents:**\n```javascript\nconst files = folder.getFiles();\nwhile (files.hasNext()) {\n  const file = files.next();\n  Logger.log(file.getName());\n}\n\nconst subfolders = folder.getFolders();\n```\n\n**Get files by name:**\n```javascript\nconst files = folder.getFilesByName('filename.txt');\nwhile (files.hasNext()) {\n  const file = files.next();\n  Logger.log(file.getId());\n}\n```\n\n**Copy folder (recursive):**\n```javascript\nfunction copyFolder(sourceFolder, targetFolder) {\n  // Copy files\n  const files = sourceFolder.getFiles();\n  while (files.hasNext()) {\n    const file = files.next();\n    file.makeCopy(file.getName(), targetFolder);\n  }\n  \n  // Copy subfolders\n  const folders = sourceFolder.getFolders();\n  while (folders.hasNext()) {\n    const subfolder = folders.next();\n    const newFolder = targetFolder.createFolder(subfolder.getName());\n    copyFolder(subfolder, newFolder);\n  }\n}\n```\n\n### Sharing\n\n**Share with users:**\n```javascript\nfile.addEditor('user@example.com');\nfile.addViewer('viewer@example.com');\nfile.addCommenter('commenter@example.com');\nfile.removeEditor('user@example.com');\nfile.removeViewer('user@example.com');\n```\n\n**Get editors:**\n```javascript\nconst editors = file.getEditors();\neditors.forEach(user => {\n  Logger.log(user.getEmail());\n});\n```\n\n**Get viewers:**\n```javascript\nconst viewers = file.getViewers();\n```\n\n**Share with entire domain:**\n```javascript\nfile.setSharing(DriveApp.Access.ANYONE_WITH_LINK, DriveApp.Permission.VIEW);\n```\n\n### Search\n\n**Search files/folders:**\n```javascript\nconst files = DriveApp.searchFiles(\"title = 'filename'\");\nconst files = DriveApp.searchFiles(\"trashed = false and mimeType != 'application/vnd.google-apps.folder'\");\nconst files = DriveApp.searchFiles(\"'FOLDER_ID' in parents and trashed = false\");\n```\n\n---\n\n## CALENDARAPP - COMPLETE REFERENCE\n\n### Calendar Operations\n\n**Get calendars:**\n```javascript\nconst calendar = CalendarApp.getDefaultCalendar();\nconst calendar = CalendarApp.getCalendarById('CALENDAR_ID');\nconst calendars = CalendarApp.getAllCalendars();\n```\n\n**Calendar properties:**\n```javascript\nconst name = calendar.getName();\nconst id = calendar.getId();\nconst color = calendar.getColor();\nconst description = calendar.getDescription();\nconst timeZone = calendar.getTimeZone();\n```\n\n### Event Operations\n\n**Create event:**\n```javascript\nconst startTime = new Date(2025, 10, 15, 9, 0);  // Nov 15, 2025 at 9 AM\nconst endTime = new Date(2025, 10, 15, 10, 0);  // Nov 15, 2025 at 10 AM\nconst event = calendar.createEvent('Meeting', startTime, endTime);\n```\n\n**All-day event:**\n```javascript\nconst event = calendar.createAllDayEvent('All-Day Event', new Date(2025, 10, 15));\n```\n\n**Event with multiple days:**\n```javascript\nconst startDate = new Date(2025, 10, 15);\nconst endDate = new Date(2025, 10, 18);\nconst event = calendar.createAllDayEventSeries('Multi-day Event', startDate, endDate);\n```\n\n**Recurring events:**\n```javascript\nconst recurrence = CalendarApp.newRecurrence()\n  .addDailyRule()\n  .addCount(10);                      // Repeat 10 times\nconst event = calendar.createEventSeries('Daily Meeting', startTime, endTime, recurrence);\n\n// Weekly\nconst recurrence = CalendarApp.newRecurrence()\n  .addWeeklyRule()\n  .addDayOfWeek(CalendarApp.Weekday.MONDAY)\n  .addDayOfWeek(CalendarApp.Weekday.WEDNESDAY)\n  .addDayOfWeek(CalendarApp.Weekday.FRIDAY);\n\n// Monthly\nconst recurrence = CalendarApp.newRecurrence()\n  .addMonthlyRule()\n  .addDayOfMonth(15);                 // 15th of each month\n\n// Every other week\nconst recurrence = CalendarApp.newRecurrence()\n  .addWeeklyRule()\n  .setInterval(2);                    // Every 2 weeks\n```\n\n**Get events:**\n```javascript\nconst events = calendar.getEvents(new Date(2025, 10, 1), new Date(2025, 10, 30));\nconst event = calendar.getEventById('EVENT_ID');\n\n// Events in time range\nconst start = new Date(2025, 10, 15, 9, 0);\nconst end = new Date(2025, 10, 15, 17, 0);\nconst events = calendar.getEvents(start, end);\n```\n\n### Event Details\n\n**Event properties:**\n```javascript\nconst title = event.getTitle();\nconst description = event.getDescription();\nconst location = event.getLocation();\nconst startTime = event.getStartTime();\nconst endTime = event.getEndTime();\nconst color = event.getColor();\nconst id = event.getId();\n```\n\n**Modify event:**\n```javascript\nevent.setTitle('New Title');\nevent.setDescription('Event description');\nevent.setLocation('Meeting Room 123');\nevent.setTime(newStart, newEnd);\nevent.setColor('#ff0000');\n```\n\n**Add guests:**\n```javascript\nevent.addGuest('guest@example.com');\nevent.removeGuest('guest@example.com');\nconst guests = event.getGuests();\nguests.forEach(guest => {\n  Logger.log(guest.getEmail());\n});\n```\n\n**Add reminders:**\n```javascript\nevent.addPopupNotification(15);         // 15 minutes before\nevent.addEmailNotification(24 * 60);    // 24 hours before\nevent.removeAllReminders();\n```\n\n**Tags (custom metadata):**\n```javascript\nevent.setTag('customKey', 'customValue');\nconst value = event.getTag('customKey');\nconst keys = event.getAllTags();\nevent.deleteTag('customKey');\n```\n\n**Delete event:**\n```javascript\nevent.deleteEvent();\n```\n\n---\n\n## TRIGGERS - COMPLETE REFERENCE\n\n### Simple Triggers (No Authorization Needed)\n\n**onOpen(e)** - Runs when document/sheet opens:\n```javascript\nfunction onOpen(e) {\n  const ui = SpreadsheetApp.getUi();\n  ui.createMenu('Custom Menu')\n    .addItem('Item 1', 'functionName1')\n    .addItem('Item 2', 'functionName2')\n    .addToUi();\n}\n```\n\n**onEdit(e)** - Runs when cell value changes:\n```javascript\nfunction onEdit(e) {\n  const range = e.range;\n  const value = e.value;\n  const sheet = e.source.getSheets()[0];\n  \n  Logger.log('Cell ' + range.getA1Notation() + ' changed to ' + value);\n}\n```\n\n**onInstall(e)** - Runs when add-on installed:\n```javascript\nfunction onInstall(e) {\n  onOpen(e);  // Typically calls onOpen\n}\n```\n\n### Installable Triggers (Require Authorization)\n\n**Time-based triggers:**\n```javascript\nfunction createTimeTriggers() {\n  // Every 6 hours\n  ScriptApp.newTrigger('myFunction')\n    .timeBased()\n    .everyHours(6)\n    .create();\n  \n  // Every day at 9 AM (randomized within the hour)\n  ScriptApp.newTrigger('myFunction')\n    .timeBased()\n    .atHour(9)\n    .everyDays(1)\n    .create();\n  \n  // Every Monday at 9 AM\n  ScriptApp.newTrigger('myFunction')\n    .timeBased()\n    .onWeekDay(ScriptApp.WeekDay.MONDAY)\n    .atHour(9)\n    .create();\n  \n  // Every minute (use sparingly!)\n  ScriptApp.newTrigger('myFunction')\n    .timeBased()\n    .everyMinutes(1)\n    .create();\n}\n```\n\n**Event-based triggers:**\n```javascript\nfunction createEventTriggers() {\n  const spreadsheet = SpreadsheetApp.getActiveSpreadsheet();\n  \n  // On any change in spreadsheet\n  ScriptApp.newTrigger('myFunction')\n    .onOpen(spreadsheet)\n    .create();\n  \n  // On form submit\n  const form = FormApp.openById('FORM_ID');\n  ScriptApp.newTrigger('onFormSubmit')\n    .forForm(form)\n    .onFormSubmit()\n    .create();\n  \n  // On edit in spreadsheet\n  ScriptApp.newTrigger('onEdit')\n    .forSpreadsheet(spreadsheet)\n    .onEdit()\n    .create();\n}\n```\n\n**Delete triggers:**\n```javascript\n// Delete all triggers for a function\nconst triggers = ScriptApp.getProjectTriggers();\ntriggers.forEach(trigger => {\n  if (trigger.getHandlerFunction() === 'functionName') {\n    ScriptApp.deleteTrigger(trigger);\n  }\n});\n```\n\n**Get all triggers:**\n```javascript\nconst triggers = ScriptApp.getProjectTriggers();\ntriggers.forEach(trigger => {\n  Logger.log('Function: ' + trigger.getHandlerFunction());\n  Logger.log('Type: ' + trigger.getTriggerSource());\n});\n```\n\n---\n\n## ADVANCED SERVICES & UTILITIES\n\n### UrlFetchApp (HTTP Requests)\n\n**GET request:**\n```javascript\nconst response = UrlFetchApp.fetch('https://api.example.com/data');\nconst content = response.getContentText();\nconst json = JSON.parse(content);\nconst statusCode = response.getResponseCode();\n```\n\n**POST request:**\n```javascript\nconst payload = {\n  key1: 'value1',\n  key2: 'value2'\n};\n\nconst options = {\n  method: 'POST',\n  payload: JSON.stringify(payload),\n  headers: {\n    'Content-Type': 'application/json'\n  }\n};\n\nconst response = UrlFetchApp.fetch('https://api.example.com/submit', options);\n```\n\n**Authentication headers:**\n```javascript\nconst options = {\n  method: 'GET',\n  headers: {\n    'Authorization': 'Bearer ' + TOKEN,\n    'Accept': 'application/json'\n  }\n};\n\nconst response = UrlFetchApp.fetch('https://api.example.com/protected', options);\n```\n\n**Timeout handling:**\n```javascript\nconst options = {\n  method: 'GET',\n  muteHttpExceptions: true,  // Don't throw on error\n  timeout: 30  // 30 second timeout\n};\n\ntry {\n  const response = UrlFetchApp.fetch(url, options);\n  if (response.getResponseCode() === 200) {\n    Logger.log(response.getContentText());\n  } else {\n    Logger.log('Error: ' + response.getResponseCode());\n  }\n} catch (error) {\n  Logger.log('Request failed: ' + error);\n}\n```\n\n### Utilities\n\n**Base64 encoding:**\n```javascript\nconst text = 'Hello World';\nconst encoded = Utilities.base64Encode(text);\nconst decoded = Utilities.base64Decode(encoded);\n```\n\n**Hashing:**\n```javascript\nconst text = 'password';\nconst hash = Utilities.computeDigest(Utilities.DigestAlgorithm.SHA_256, text);\nconst hashString = Utilities.base64Encode(hash);\n```\n\n**MD5:**\n```javascript\nconst md5 = Utilities.computeDigest(Utilities.DigestAlgorithm.MD5, text);\n```\n\n**UUID generation:**\n```javascript\nconst uuid = Utilities.getUuid();  // Generate unique ID\n```\n\n**Encoding:**\n```javascript\nconst text = 'Hello@World!';\nconst encoded = Utilities.urlEncode(text);\nconst escapedCsv = Utilities.csvEscape(text);\n```\n\n### PropertiesService (Persistent Storage)\n\n**Script properties (global):**\n```javascript\nconst scriptProperties = PropertiesService.getScriptProperties();\n\n// Set\nscriptProperties.setProperty('key', 'value');\nscriptProperties.setProperties({ key1: 'value1', key2: 'value2' });\n\n// Get\nconst value = scriptProperties.getProperty('key');\nconst allProperties = scriptProperties.getProperties();\n\n// Delete\nscriptProperties.deleteProperty('key');\nscriptProperties.deleteAllProperties();\n```\n\n**Document properties:**\n```javascript\nconst documentProperties = PropertiesService.getDocumentProperties();\n// Same methods as script properties\n```\n\n**User properties:**\n```javascript\nconst userProperties = PropertiesService.getUserProperties();\n// Separate storage per user\n```\n\n### CacheService (Temporary Storage - 25 Min TTL)\n\n**Script cache:**\n```javascript\nconst cache = CacheService.getScriptCache();\n\n// Set (duration in seconds, max 21600 = 6 hours)\ncache.put('key', 'value', 600);  // 10 minutes\n\n// Get\nconst value = cache.get('key');\n\n// Remove\ncache.remove('key');\ncache.removeAll(['key1', 'key2']);\n```\n\n**Difference from Properties:**\n```\nPropertiesService: Persistent, unlimited storage, ~9MB practical limit\nCacheService: Temporary, 25-minute TTL, faster access\n```\n\n### Logger (Debugging)\n\n**Log messages:**\n```javascript\nLogger.log('Simple message');\nLogger.log('Value: ' + value);\nLogger.log('Object: ' + JSON.stringify(object));\n\n// View logs: View > Logs or Ctrl+Enter\n```\n\n**Log levels:**\n```javascript\nLogger.log('Info');       // Standard\nLogger.log('Warning');    // Warning\nLogger.log('Error');      // Error\n```\n\n---\n\n## AUTHORIZATION & SECURITY\n\n### OAuth Scopes\n\n**Common scopes:**\n```javascript\n// Spreadsheets\nhttps://www.googleapis.com/auth/spreadsheets\nhttps://www.googleapis.com/auth/spreadsheets.readonly\nhttps://www.googleapis.com/auth/spreadsheets.currentonly\n\n// Drive\nhttps://www.googleapis.com/auth/drive\nhttps://www.googleapis.com/auth/drive.readonly\nhttps://www.googleapis.com/auth/drive.file\n\n// Gmail\nhttps://www.googleapis.com/auth/gmail.readonly\nhttps://www.googleapis.com/auth/gmail.modify\nhttps://www.googleapis.com/auth/gmail.send\n\n// Calendar\nhttps://www.googleapis.com/auth/calendar\nhttps://www.googleapis.com/auth/calendar.readonly\n\n// Documents\nhttps://www.googleapis.com/auth/documents\nhttps://www.googleapis.com/auth/documents.readonly\n\n// Forms\nhttps://www.googleapis.com/auth/forms.currentonly\nhttps://www.googleapis.com/auth/forms\n\n// External requests\nhttps://www.googleapis.com/auth/script.external_request\n\n// Email sending\nhttps://www.googleapis.com/auth/script.send_mail\n```\n\n### Setting Scopes Manually (appscript.json)\n\n**Manifest file:**\n```json\n{\n  \"timeZone\": \"America/New_York\",\n  \"exceptionLogging\": \"STACKDRIVER\",\n  \"runtimeVersion\": \"V8\",\n  \"oauthScopes\": [\n    \"https://www.googleapis.com/auth/spreadsheets.currentonly\",\n    \"https://www.googleapis.com/auth/drive.file\",\n    \"https://www.googleapis.com/auth/script.send_mail\"\n  ]\n}\n```\n\n**Best practice: Always use narrowest necessary scopes**\n\n### Authorization Flow\n\n**Check authorization:**\n```javascript\nconst info = ScriptApp.getAuthorizationInfo(ScriptApp.AuthMode.FULL);\nconst isAuthorized = info.isAuthorizationRequired();\n```\n\n**Request authorization:**\n```javascript\n// For specific scopes\nScriptApp.requireScopes(\n  ScriptApp.AuthMode.FULL,\n  ['https://www.googleapis.com/auth/script.send_mail']\n);\n\n// For all scopes\nScriptApp.requireAllScopes(ScriptApp.AuthMode.FULL);\n```\n\n---\n\n## ERROR HANDLING & DEBUGGING\n\n### Try-Catch-Finally\n\n**Basic error handling:**\n```javascript\ntry {\n  // Code that might fail\n  const range = sheet.getRange('A1');\n  range.getValue();\n} catch (error) {\n  Logger.log('Error: ' + error);\n  // Handle error\n} finally {\n  // Always runs\n  Logger.log('Completed');\n}\n```\n\n**Error object properties:**\n```javascript\ntry {\n  // Code\n} catch (error) {\n  Logger.log('Message: ' + error.message);\n  Logger.log('Stack: ' + error.stack);\n  Logger.log('Name: ' + error.name);\n}\n```\n\n**Throwing errors:**\n```javascript\nfunction validateInput(value) {\n  if (!value) {\n    throw new Error('Value cannot be empty');\n  }\n  if (value < 0) {\n    throw new Error('Value must be positive');\n  }\n}\n```\n\n### Debugging Techniques\n\n**Logging:**\n```javascript\nLogger.log('Debug message');\nLogger.log(JSON.stringify(object, null, 2));\nLogger.log('Value at step 1: ' + variable);\n```\n\n**Browser alerts (UI):**\n```javascript\nconst ui = SpreadsheetApp.getUi();\nui.alert('Error occurred: ' + error.message);\nui.showModelessDialog(\n  HtmlService.createHtmlOutput('Content'),\n  'Dialog Title'\n);\n```\n\n**Conditional logging:**\n```javascript\nconst DEBUG = true;\n\nif (DEBUG) {\n  Logger.log('Debug info');\n}\n```\n\n**Using debugger:**\n1. Add breakpoints in editor (click line number)\n2. Run function\n3. Execution pauses at breakpoint\n4. Inspect variables in sidebar\n\n---\n\n## PERFORMANCE OPTIMIZATION\n\n### Spreadsheet Operations\n\n**Batch reads/writes:**\n```javascript\n// SLOW - Individual cell access\nfor (let i = 1; i <= 100; i++) {\n  for (let j = 1; j <= 10; j++) {\n    const range = sheet.getRange(i, j);\n    const value = range.getValue();\n  }\n}\n\n// FAST - Batch read\nconst range = sheet.getRange(1, 1, 100, 10);\nconst values = range.getValues();\nfor (let i = 0; i < values.length; i++) {\n  for (let j = 0; j < values[i].length; j++) {\n    const value = values[i][j];\n  }\n}\n```\n\n**Caching frequently accessed data:**\n```javascript\nfunction getFastData() {\n  const cache = CacheService.getScriptCache();\n  let data = cache.get('myData');\n  \n  if (!data) {\n    // Fetch from sheet\n    const range = sheet.getRange('A1:C100');\n    data = JSON.stringify(range.getValues());\n    cache.put('myData', data, 600);  // 10 minutes\n  }\n  \n  return JSON.parse(data);\n}\n```\n\n**Properties vs Cache:**\n- Properties: Persistent, use for config\n- Cache: Fast, temporary, use for session data\n\n---\n\n## BEST PRACTICES & PATTERNS\n\n### Error-Resistant Script Template\n\n```javascript\n/**\n * Main function with error handling\n */\nfunction main() {\n  try {\n    validateSetup();\n    const data = fetchData();\n    processData(data);\n    Logger.log('Completed successfully');\n  } catch (error) {\n    handleError(error);\n  }\n}\n\n/**\n * Validates script setup\n */\nfunction validateSetup() {\n  const ss = SpreadsheetApp.getActiveSpreadsheet();\n  if (!ss) {\n    throw new Error('No active spreadsheet');\n  }\n}\n\n/**\n * Fetch data with retry logic\n */\nfunction fetchData(maxRetries = 3) {\n  for (let attempt = 0; attempt < maxRetries; attempt++) {\n    try {\n      const response = UrlFetchApp.fetch('https://api.example.com/data');\n      return JSON.parse(response.getContentText());\n    } catch (error) {\n      if (attempt === maxRetries - 1) throw error;\n      Utilities.sleep(Math.pow(2, attempt) * 1000);\n    }\n  }\n}\n\n/**\n * Process and error handling\n */\nfunction processData(data) {\n  if (!data || data.length === 0) {\n    throw new Error('No data to process');\n  }\n  // Process...\n}\n\n/**\n * Centralized error handling\n */\nfunction handleError(error) {\n  const errorMessage = 'Script error: ' + error.message;\n  Logger.log(errorMessage);\n  \n  // Notify user\n  const ui = SpreadsheetApp.getUi();\n  ui.alert(errorMessage);\n  \n  // Log to sheet for audit trail\n  const sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName('Logs');\n  if (sheet) {\n    sheet.appendRow([new Date(), error.message, error.stack]);\n  }\n}\n```\n\n### Factory Functions Pattern\n\n```javascript\nfunction createSpreadsheetManager(sheetName) {\n  const sheet = SpreadsheetApp.getActiveSpreadsheet().getSheetByName(sheetName);\n  \n  return {\n    appendRow: function(values) {\n      sheet.appendRow(values);\n    },\n    \n    getRange: function(notation) {\n      return sheet.getRange(notation);\n    },\n    \n    getData: function() {\n      return sheet.getDataRange().getValues();\n    }\n  };\n}\n\n// Usage\nconst manager = createSpreadsheetManager('Data');\nmanager.appendRow(['Value1', 'Value2']);\n```\n\n### Quota and Rate Limiting\n\n```javascript\n/**\n * Respects Google APIs rate limits\n */\nfunction respectRateLimits(items, batchSize = 100) {\n  for (let i = 0; i < items.length; i += batchSize) {\n    const batch = items.slice(i, i + batchSize);\n    processBatch(batch);\n    \n    // Don't sleep on last batch\n    if (i + batchSize < items.length) {\n      Utilities.sleep(1000);  // 1 second between batches\n    }\n  }\n}\n```\n\n---\n\n## QUOTAS AND LIMITS REFERENCE\n\n| Limit | Value |\n|-------|-------|\n| Execution time | 6 minutes |\n| Spreadsheet reads | 300 per 100 seconds |\n| Spreadsheet writes | 60 per 100 seconds |\n| Emails per day | 100 (business) |\n| Cache duration | 25 minutes |\n| Properties size | ~5 GB |\n| Script timeout | 6 minutes |\n\n---\n\n**End of Google Apps Script Mission-Critical Reference**\n\n*Use this as your authoritative offline guide for all Apps Script development needs.*",
        "plugins/productivity/skills/tampermonkey/SKILL.md": "---\nname: tampermonkey\ndescription: |\n  Write Tampermonkey userscripts for browser automation, page modification, and web enhancement.\n  Use when: creating browser scripts, writing greasemonkey scripts, automating user interactions,\n  injecting CSS or JavaScript into web pages, modifying website behaviour, building browser extensions,\n  hiding unwanted page elements, adding form auto-fill, scraping website data, intercepting requests,\n  detecting URL changes in SPAs, or storing persistent user preferences.\n  Covers userscript headers (@match, @grant, @require), synchronous and async GM_* API functions,\n  common patterns (DOM mutation, URL change detection, element waiting), security sandboxing,\n  and cross-browser compatibility (Chrome, Firefox, Edge).\nallowed-tools:\n  - Read\n  - Glob\n  - Grep\n  - Write\n  - Edit\n---\n\n# Tampermonkey Userscript Development\n\nExpert guidance for writing Tampermonkey userscripts - browser scripts that modify web pages, automate tasks, and enhance browsing experience.\n\n## Quick Start Template\n\n```javascript\n// ==UserScript==\n// @name         My Script Name                    // â† CUSTOMISE: Unique script name\n// @namespace    https://example.com/scripts/      // â† CUSTOMISE: Your unique namespace\n// @version      1.0.0                             // â† INCREMENT on updates\n// @description  Brief description of the script   // â† CUSTOMISE: What it does\n// @author       Your Name                         // â† CUSTOMISE: Your name\n// @match        https://example.com/*             // â† CUSTOMISE: Target URL pattern\n// @grant        none                              // â† ADD permissions as needed\n// @run-at       document-idle                     // â† ADJUST timing if needed\n// ==/UserScript==\n\n(function() {\n    'use strict';\n\n    // Your code here\n    console.log('Script loaded!');\n})();\n```\n\n---\n\n## Essential Header Tags\n\n| Tag | Required | Purpose | Example |\n|-----|----------|---------|---------|\n| `@name` | Yes | Script name (supports i18n with `:locale`) | `@name My Script` |\n| `@namespace` | Recommended | Unique identifier namespace | `@namespace https://yoursite.com/` |\n| `@version` | Yes* | Version for updates (*required for auto-update) | `@version 1.2.3` |\n| `@description` | Recommended | What the script does | `@description Enhances page layout` |\n| `@match` | Yes** | URLs to run on (**or @include) | `@match https://example.com/*` |\n| `@grant` | Situational | API permissions (use `none` for no GM_* APIs) | `@grant GM_setValue` |\n| `@run-at` | Optional | When to inject (default: `document-idle`) | `@run-at document-start` |\n\n**For complete header documentation, see:** [header-reference.md](references/header-reference.md)\n\n---\n\n## URL Matching Quick Reference\n\n```javascript\n// Exact domain\n// @match https://example.com/*\n\n// All subdomains\n// @match https://*.example.com/*\n\n// HTTP and HTTPS\n// @match *://example.com/*\n\n// Specific path\n// @match https://example.com/app/*\n\n// Exclude paths (use with @match)\n// @exclude https://example.com/admin/*\n```\n\n**For advanced patterns (regex, @include), see:** [url-matching.md](references/url-matching.md)\n\n---\n\n## @grant Permissions Quick Reference\n\n| You Need To... | Grant This |\n|----------------|------------|\n| Store persistent data | `@grant GM_setValue` + `@grant GM_getValue` |\n| Make cross-origin requests | `@grant GM_xmlhttpRequest` + `@connect domain` |\n| Add custom CSS | `@grant GM_addStyle` |\n| Access page's window | `@grant unsafeWindow` |\n| Show notifications | `@grant GM_notification` |\n| Add menu commands | `@grant GM_registerMenuCommand` |\n| Detect URL changes (SPA) | `@grant window.onurlchange` |\n\n```javascript\n// Disable sandbox (no GM_* except GM_info)\n// @grant none\n\n// Cross-origin requests require @connect\n// @grant GM_xmlhttpRequest\n// @connect api.example.com\n// @connect *.googleapis.com\n```\n\n**For complete permissions guide, see:** [header-reference.md](references/header-reference.md)\n\n---\n\n## @run-at Injection Timing\n\n| Value | When Script Runs | Use Case |\n|-------|------------------|----------|\n| `document-start` | Before DOM exists | Block resources, modify globals early |\n| `document-body` | When body exists | Early DOM manipulation |\n| `document-end` | At DOMContentLoaded | Most scripts - DOM ready |\n| `document-idle` | After DOMContentLoaded (default) | Safe default |\n| `context-menu` | On right-click menu | User-triggered actions |\n\n---\n\n## Common Patterns\n\n### Wait for Element\n\n```javascript\nfunction waitForElement(selector, timeout = 10000) {\n    return new Promise((resolve, reject) => {\n        const element = document.querySelector(selector);\n        if (element) return resolve(element);\n\n        const observer = new MutationObserver((mutations, obs) => {\n            const el = document.querySelector(selector);\n            if (el) {\n                obs.disconnect();\n                resolve(el);\n            }\n        });\n\n        observer.observe(document.body, { childList: true, subtree: true });\n\n        setTimeout(() => {\n            observer.disconnect();\n            reject(new Error(`Element ${selector} not found`));\n        }, timeout);\n    });\n}\n\n// Usage\nwaitForElement('#my-element').then(el => {\n    console.log('Found:', el);\n});\n```\n\n### SPA URL Change Detection\n\n```javascript\n// @grant window.onurlchange\n\nif (window.onurlchange === null) {\n    window.addEventListener('urlchange', (info) => {\n        console.log('URL changed to:', info.url);\n        // Re-run your modifications\n    });\n}\n```\n\n### Cross-Origin Request\n\n```javascript\n// @grant GM_xmlhttpRequest\n// @connect api.example.com\n\nGM_xmlhttpRequest({\n    method: 'GET',\n    url: 'https://api.example.com/data',\n    headers: { 'Content-Type': 'application/json' },\n    onload: function(response) {\n        const data = JSON.parse(response.responseText);\n        console.log(data);\n    },\n    onerror: function(error) {\n        console.error('Request failed:', error);\n    }\n});\n```\n\n### Add Custom Styles\n\n```javascript\n// @grant GM_addStyle\n\nGM_addStyle(`\n    .my-custom-class {\n        background: #f0f0f0;\n        padding: 10px;\n        border-radius: 5px;\n    }\n\n    #hide-this-element {\n        display: none !important;\n    }\n`);\n```\n\n### Persistent Settings\n\n```javascript\n// @grant GM_setValue\n// @grant GM_getValue\n// @grant GM_registerMenuCommand\n\nconst settings = {\n    enabled: GM_getValue('enabled', true),\n    theme: GM_getValue('theme', 'dark')\n};\n\nGM_registerMenuCommand('Toggle Enabled', () => {\n    settings.enabled = !settings.enabled;\n    GM_setValue('enabled', settings.enabled);\n    location.reload();\n});\n```\n\n**For more patterns, see:** [patterns.md](references/patterns.md)\n\n---\n\n## External Resources\n\n### @require - Load External Scripts\n\n```javascript\n// @require https://code.jquery.com/jquery-3.6.0.min.js\n\n// With integrity hash (recommended)\n// @require https://code.jquery.com/jquery-3.6.0.min.js#sha256-/xUj+3OJU...\n\n// Built-in libraries\n// @require tampermonkey://vendor/jquery.js\n```\n\n### @resource - Preload Resources\n\n```javascript\n// @resource myCSS https://example.com/style.css\n// @grant GM_getResourceText\n// @grant GM_addStyle\n\nconst css = GM_getResourceText('myCSS');\nGM_addStyle(css);\n```\n\n---\n\n## What Tampermonkey Cannot Do\n\nUserscripts have limitations:\n\n- **Access local files** - Cannot read/write files on your computer\n- **Run before page scripts** - In isolated sandbox mode, page scripts run first\n- **Access cross-origin iframes** - Browser security prevents this\n- **Persist across machines** - GM storage is local to each browser\n- **Bypass all CSP** - Some very strict CSP cannot be bypassed\n\nMost limitations have **workarounds** - see [common-pitfalls.md](references/common-pitfalls.md).\n\n---\n\n## When Generating Userscripts\n\nAlways include in your response:\n\n1. **Explanation** - What the script does (1-2 sentences)\n2. **Complete userscript** - Full code with all headers in a code block\n3. **Installation** - \"Copy/paste into Tampermonkey dashboard\" or \"Save as .user.js\"\n4. **Customisation points** - What the user can safely modify (selectors, timeouts, etc.)\n5. **Permissions used** - Which @grants and why they're needed\n6. **Browser support** - If Chrome-only, Firefox-only, or universal\n\n**Example response format:**\n\n> This script adds a dark mode toggle to Example.com and remembers the user's preference.\n\n```javascript\n// ==UserScript==\n// @name         Example.com Dark Mode\n// ...\n// ==/UserScript==\n```\n\n> **Installation:** Copy/paste into Tampermonkey dashboard\n> **Customisation:** Change `DARK_BG_COLOR` to adjust the background colour\n> **Permissions:** Uses `GM_setValue`/`GM_getValue` to remember preference\n> **Browsers:** Chrome and Firefox\n\n---\n\n## Pre-Delivery Checklist\n\nBefore returning a userscript, verify:\n\n### Critical (Must Pass)\n- [ ] No hardcoded API keys, tokens, or passwords\n- [ ] @match is specific (not `*://*/*`)\n- [ ] All external URLs use HTTPS\n- [ ] User input sanitised before DOM insertion\n\n### Important (Should Pass)\n- [ ] Wrapped in IIFE with 'use strict'\n- [ ] All @grant statements are necessary\n- [ ] @connect includes all external domains\n- [ ] Error handling for async operations\n- [ ] Null checks before DOM manipulation\n\n### Recommended\n- [ ] @version follows semantic versioning (X.Y.Z)\n- [ ] Works in both Chrome and Firefox\n- [ ] Comments explain non-obvious code\n\n**For complete security checklist, see:** [security-checklist.md](references/security-checklist.md)\n\n---\n\n## Reference Files Guide\n\nLoad these on-demand based on user needs:\n\n### Core Documentation\n\n| File | When to Load | Content |\n|------|--------------|---------|\n| [header-reference.md](references/header-reference.md) | Header syntax questions | All @tags with examples |\n| [url-matching.md](references/url-matching.md) | URL pattern questions | @match, @include, @exclude |\n| [patterns.md](references/patterns.md) | Implementation patterns | Common script patterns |\n| [sandbox-modes.md](references/sandbox-modes.md) | Security/isolation | Execution contexts |\n\n### API Reference\n\n| File | When to Load | Content |\n|------|--------------|---------|\n| [api-sync.md](references/api-sync.md) | GM_* function usage | Sync API documentation |\n| [api-async.md](references/api-async.md) | GM.* promise usage | Async API documentation |\n| [api-storage.md](references/api-storage.md) | Data persistence | setValue, getValue, listeners |\n| [http-requests.md](references/http-requests.md) | HTTP requests | GM_xmlhttpRequest |\n| [web-requests.md](references/web-requests.md) | Request interception | GM_webRequest (Firefox) |\n| [api-cookies.md](references/api-cookies.md) | Cookie manipulation | GM_cookie |\n| [api-dom-ui.md](references/api-dom-ui.md) | DOM/UI manipulation | addElement, addStyle, unsafeWindow |\n| [api-tabs.md](references/api-tabs.md) | Tab management | getTab, saveTab, openInTab |\n| [api-audio.md](references/api-audio.md) | Audio control | Mute/unmute tabs |\n\n### Troubleshooting & Quality\n\n| File | When to Load | Content |\n|------|--------------|---------|\n| [common-pitfalls.md](references/common-pitfalls.md) | Script issues | What breaks scripts |\n| [debugging.md](references/debugging.md) | Troubleshooting | How to debug |\n| [browser-compatibility.md](references/browser-compatibility.md) | Cross-browser | Chrome vs Firefox |\n| [security-checklist.md](references/security-checklist.md) | Pre-delivery | Security validation |\n| [version-numbering.md](references/version-numbering.md) | Version strings | Comparison rules |\n",
        "plugins/productivity/skills/tampermonkey/references/api-async.md": "# Tampermonkey Async API Reference\n\nDocumentation for GM.* promise-based functions.\n\n---\n\n## Overview\n\nThe GM.* API provides promise-based versions of GM_* functions. Use with async/await for cleaner code.\n\n**Key differences from GM_* functions:**\n- Return Promises instead of values/callbacks\n- Use `await` or `.then()` for results\n- Some have slightly different names (note capitalisation)\n\n---\n\n## Naming Conventions\n\n| Sync (GM_*) | Async (GM.*) | Note |\n|-------------|--------------|------|\n| `GM_getValue` | `GM.getValue` | Same name |\n| `GM_setValue` | `GM.setValue` | Same name |\n| `GM_deleteValue` | `GM.deleteValue` | Same name |\n| `GM_listValues` | `GM.listValues` | Same name |\n| `GM_getResourceURL` | `GM.getResourceUrl` | Note: lowercase \"r\" and \"l\" |\n| `GM_xmlhttpRequest` | `GM.xmlHttpRequest` | Note: uppercase \"H\" |\n| `GM_notification` | `GM.notification` | Returns boolean (was clicked) |\n| `GM_setClipboard` | `GM.setClipboard` | Returns Promise<void> |\n\n---\n\n## Storage Functions\n\n### GM.getValue(key, defaultValue)\n\n```javascript\n// @grant GM.getValue\n\nconst username = await GM.getValue('username', 'Anonymous');\nconst settings = await GM.getValue('settings', { theme: 'dark', lang: 'en' });\n```\n\n### GM.setValue(key, value)\n\n```javascript\n// @grant GM.setValue\n\nawait GM.setValue('username', 'John');\nawait GM.setValue('settings', { theme: 'light', lang: 'fr' });\nawait GM.setValue('lastVisit', Date.now());\n```\n\n### GM.deleteValue(key)\n\n```javascript\n// @grant GM.deleteValue\n\nawait GM.deleteValue('tempData');\n```\n\n### GM.listValues()\n\n```javascript\n// @grant GM.listValues\n\nconst keys = await GM.listValues();\nconsole.log('Stored keys:', keys);\n```\n\n### GM.getValues(keysOrDefaults) (v5.3+)\n\n```javascript\n// @grant GM.getValues\n\n// With array of keys\nconst values = await GM.getValues(['foo', 'bar', 'baz']);\n\n// With default values\nconst values2 = await GM.getValues({\n    foo: 1,\n    bar: 'default',\n    baz: null\n});\n```\n\n### GM.setValues(values) (v5.3+)\n\n```javascript\n// @grant GM.setValues\n\nawait GM.setValues({\n    username: 'John',\n    theme: 'dark',\n    lastLogin: Date.now()\n});\n```\n\n### GM.deleteValues(keys) (v5.3+)\n\n```javascript\n// @grant GM.deleteValues\n\nawait GM.deleteValues(['tempData', 'cache', 'oldSettings']);\n```\n\n### GM.addValueChangeListener(key, callback)\n\n```javascript\n// @grant GM.addValueChangeListener\n\nconst listenerId = await GM.addValueChangeListener('counter', (key, oldValue, newValue, remote) => {\n    console.log(`${key} changed from ${oldValue} to ${newValue}`);\n    if (remote) {\n        console.log('Change came from another tab');\n    }\n});\n```\n\n### GM.removeValueChangeListener(listenerId)\n\n```javascript\n// @grant GM.removeValueChangeListener\n\nawait GM.removeValueChangeListener(listenerId);\n```\n\n---\n\n## Resource Functions\n\n### GM.getResourceText(name)\n\n```javascript\n// @resource myCSS https://example.com/style.css\n// @grant GM.getResourceText\n\nconst cssText = await GM.getResourceText('myCSS');\n```\n\n### GM.getResourceUrl(name)\n\n**Note:** Lowercase \"r\" and \"l\" in \"Url\" (different from sync version).\n\n```javascript\n// @resource myIcon https://example.com/icon.png\n// @grant GM.getResourceUrl\n\nconst iconUrl = await GM.getResourceUrl('myIcon');\nimg.src = iconUrl;\n```\n\n---\n\n## Network Requests\n\n### GM.xmlHttpRequest(details)\n\n**Note:** Uppercase \"H\" in \"Http\" (different from sync version).\n\n```javascript\n// @grant GM.xmlHttpRequest\n// @connect api.example.com\n\ntry {\n    const response = await GM.xmlHttpRequest({\n        method: 'GET',\n        url: 'https://api.example.com/data',\n        headers: {\n            'Accept': 'application/json'\n        }\n    });\n\n    const data = JSON.parse(response.responseText);\n    console.log(data);\n} catch (error) {\n    console.error('Request failed:', error);\n}\n```\n\nThe promise also has an `abort()` function:\n\n```javascript\nconst request = GM.xmlHttpRequest({\n    method: 'GET',\n    url: 'https://api.example.com/large-file'\n});\n\n// Cancel after 5 seconds\nsetTimeout(() => request.abort(), 5000);\n\ntry {\n    const response = await request;\n} catch (error) {\n    console.log('Request was aborted or failed');\n}\n```\n\n---\n\n## UI Functions\n\n### GM.notification(details)\n\nReturns a Promise that resolves to `true` if clicked, `false` otherwise.\n\n```javascript\n// @grant GM.notification\n\nconst wasClicked = await GM.notification({\n    text: 'Click me!',\n    title: 'Notification',\n    timeout: 10000\n});\n\nif (wasClicked) {\n    console.log('User clicked the notification');\n} else {\n    console.log('Notification timed out or was dismissed');\n}\n```\n\n### GM.setClipboard(data, type)\n\n```javascript\n// @grant GM.setClipboard\n\nawait GM.setClipboard('Copied text', 'text');\nconsole.log('Text copied to clipboard');\n```\n\n---\n\n## Tab Functions\n\n### GM.getTab()\n\n```javascript\n// @grant GM.getTab\n\nconst tab = await GM.getTab();\nconsole.log('Tab data:', tab);\n```\n\n### GM.saveTab(tab)\n\n```javascript\n// @grant GM.saveTab\n\nconst tab = await GM.getTab();\ntab.customData = { lastAction: 'click', timestamp: Date.now() };\nawait GM.saveTab(tab);\n```\n\n### GM.getTabs()\n\n```javascript\n// @grant GM.getTabs\n\nconst tabs = await GM.getTabs();\nfor (const [tabId, tabData] of Object.entries(tabs)) {\n    console.log(`Tab ${tabId}:`, tabData);\n}\n```\n\n---\n\n## Cookie Functions\n\n### GM.cookie.list(details)\n\n```javascript\n// @grant GM.cookie\n\nconst cookies = await GM.cookie.list({ domain: 'example.com' });\nconsole.log('Cookies:', cookies);\n```\n\n### GM.cookie.set(details)\n\n```javascript\n// @grant GM.cookie\n\nawait GM.cookie.set({\n    name: 'myCookie',\n    value: 'myValue',\n    domain: 'example.com',\n    path: '/',\n    secure: true\n});\n```\n\n### GM.cookie.delete(details)\n\n```javascript\n// @grant GM.cookie\n\nawait GM.cookie.delete({ name: 'myCookie' });\n```\n\n---\n\n## Audio Functions (v5.0+)\n\n### GM.audio.setMute(details)\n\n```javascript\n// @grant GM.audio\n\nawait GM.audio.setMute({ isMuted: true });\nconsole.log('Tab muted');\n```\n\n### GM.audio.getState()\n\n```javascript\n// @grant GM.audio\n\nconst state = await GM.audio.getState();\nconsole.log(`Muted: ${state.isMuted}, Audible: ${state.isAudible}`);\n```\n\n### GM.audio.addStateChangeListener(listener)\n\n```javascript\n// @grant GM.audio\n\nawait GM.audio.addStateChangeListener((event) => {\n    if ('muted' in event) console.log('Mute changed:', event.muted);\n    if ('audible' in event) console.log('Audible changed:', event.audible);\n});\n```\n\n---\n\n## Combining Async Operations\n\n### Sequential Operations\n\n```javascript\nasync function loadUserData() {\n    const userId = await GM.getValue('userId');\n    const response = await GM.xmlHttpRequest({\n        url: `https://api.example.com/users/${userId}`\n    });\n    const userData = JSON.parse(response.responseText);\n    await GM.setValue('userData', userData);\n    return userData;\n}\n```\n\n### Parallel Operations\n\n```javascript\nasync function loadAllSettings() {\n    const [theme, language, notifications] = await Promise.all([\n        GM.getValue('theme', 'dark'),\n        GM.getValue('language', 'en'),\n        GM.getValue('notifications', true)\n    ]);\n\n    return { theme, language, notifications };\n}\n```\n\n### Error Handling\n\n```javascript\nasync function safeRequest(url) {\n    try {\n        const response = await GM.xmlHttpRequest({\n            method: 'GET',\n            url: url,\n            timeout: 5000\n        });\n        return JSON.parse(response.responseText);\n    } catch (error) {\n        console.error('Request failed:', error);\n        await GM.notification({\n            text: 'Failed to load data',\n            title: 'Error'\n        });\n        return null;\n    }\n}\n```\n",
        "plugins/productivity/skills/tampermonkey/references/api-audio.md": "# Tampermonkey Audio API Reference\n\nDocumentation for browser tab audio control functions.\n\n---\n\n## Overview\n\nThe GM_audio API (v5.0+) allows userscripts to:\n- Mute and unmute browser tabs\n- Check if a tab is currently playing audio\n- Monitor audio state changes\n\n**Required grant:**\n```javascript\n// @grant GM_audio\n```\n\n---\n\n## GM_audio.setMute(details, callback?)\n\nMute or unmute the current tab.\n\n### Basic Usage\n\n```javascript\n// @grant GM_audio\n\n// Mute the tab\nGM_audio.setMute({ isMuted: true }, function(error) {\n    if (error) {\n        console.error('Failed to mute:', error);\n    } else {\n        console.log('Tab muted');\n    }\n});\n\n// Unmute the tab\nGM_audio.setMute({ isMuted: false }, function(error) {\n    if (error) {\n        console.error('Failed to unmute:', error);\n    } else {\n        console.log('Tab unmuted');\n    }\n});\n```\n\n### Async Version\n\n```javascript\n// @grant GM.audio\n\n// Mute\nawait GM.audio.setMute({ isMuted: true });\nconsole.log('Tab muted');\n\n// Unmute\nawait GM.audio.setMute({ isMuted: false });\nconsole.log('Tab unmuted');\n```\n\n---\n\n## GM_audio.getState(callback)\n\nGet the current audio state of the tab.\n\n### Basic Usage\n\n```javascript\n// @grant GM_audio\n\nGM_audio.getState(function(state) {\n    if (!state) {\n        console.error('Failed to get audio state');\n        return;\n    }\n\n    console.log('Is muted:', state.isMuted);\n    console.log('Mute reason:', state.muteReason);  // Why it was muted\n    console.log('Is audible:', state.isAudible);    // Currently playing sound\n});\n```\n\n### State Object Properties\n\n| Property | Type | Description |\n|----------|------|-------------|\n| `isMuted` | boolean | Whether tab is currently muted |\n| `muteReason` | string | Why the tab was muted (see below) |\n| `isAudible` | boolean | Whether tab is currently playing audio |\n\n### Mute Reasons\n\n| Value | Description |\n|-------|-------------|\n| `user` | User manually muted (browser UI) |\n| `capture` | Muted by tab capture API |\n| `extension` | Muted by a browser extension |\n\n### Async Version\n\n```javascript\n// @grant GM.audio\n\nconst state = await GM.audio.getState();\nconsole.log(`Muted: ${state.isMuted}, Audible: ${state.isAudible}`);\n```\n\n---\n\n## GM_audio.addStateChangeListener(listener, callback)\n\nListen for changes to the tab's audio state.\n\n### Basic Usage\n\n```javascript\n// @grant GM_audio\n\nfunction audioListener(event) {\n    if ('muted' in event) {\n        if (event.muted) {\n            console.log('Tab was muted. Reason:', event.muted);\n        } else {\n            console.log('Tab was unmuted');\n        }\n    }\n\n    if ('audible' in event) {\n        console.log('Audible state changed:', event.audible);\n    }\n}\n\nGM_audio.addStateChangeListener(audioListener, function(error) {\n    if (error) {\n        console.error('Failed to add listener:', error);\n    } else {\n        console.log('Audio state listener registered');\n    }\n});\n```\n\n### Event Object Properties\n\n| Property | Type | Description |\n|----------|------|-------------|\n| `muted` | string or false | Mute reason if muted, false if unmuted |\n| `audible` | boolean | Current audible state |\n\n### Async Version\n\n```javascript\n// @grant GM.audio\n\nawait GM.audio.addStateChangeListener((event) => {\n    if (event.muted) {\n        console.log('Tab muted by:', event.muted);\n    }\n    if ('audible' in event) {\n        console.log('Audio playing:', event.audible);\n    }\n});\n```\n\n---\n\n## GM_audio.removeStateChangeListener(listener, callback)\n\nRemove a previously registered state change listener.\n\n### Basic Usage\n\n```javascript\n// @grant GM_audio\n\nfunction myListener(event) {\n    console.log('Audio event:', event);\n}\n\n// Register\nGM_audio.addStateChangeListener(myListener, () => {\n    console.log('Listener added');\n});\n\n// Later, remove\nGM_audio.removeStateChangeListener(myListener, () => {\n    console.log('Listener removed');\n});\n```\n\n### Async Version\n\n```javascript\n// @grant GM.audio\n\nawait GM.audio.removeStateChangeListener(myListener);\nconsole.log('Listener removed');\n```\n\n---\n\n## Common Patterns\n\n### Auto-Mute Tab\n\n```javascript\n// @grant GM_audio\n\n// Mute tab on script load\nGM_audio.setMute({ isMuted: true });\n\n// Or with async\n(async () => {\n    await GM.audio.setMute({ isMuted: true });\n})();\n```\n\n### Mute Toggle with Menu Command\n\n```javascript\n// @grant GM_audio\n// @grant GM_registerMenuCommand\n\nlet isMuted = false;\n\nasync function toggleMute() {\n    isMuted = !isMuted;\n    await GM.audio.setMute({ isMuted });\n    console.log(isMuted ? 'Muted' : 'Unmuted');\n}\n\nGM_registerMenuCommand('Toggle Mute', toggleMute, 'm');\n```\n\n### Audio Activity Monitor\n\n```javascript\n// @grant GM_audio\n\nGM_audio.addStateChangeListener((event) => {\n    if ('audible' in event) {\n        if (event.audible) {\n            console.log('Audio started playing');\n            // Maybe show an indicator\n            showAudioIndicator(true);\n        } else {\n            console.log('Audio stopped');\n            showAudioIndicator(false);\n        }\n    }\n});\n\nfunction showAudioIndicator(playing) {\n    let indicator = document.getElementById('audio-indicator');\n    if (!indicator) {\n        indicator = document.createElement('div');\n        indicator.id = 'audio-indicator';\n        indicator.style.cssText = `\n            position: fixed;\n            top: 10px;\n            right: 10px;\n            padding: 5px 10px;\n            background: #333;\n            color: white;\n            border-radius: 4px;\n            z-index: 999999;\n        `;\n        document.body.appendChild(indicator);\n    }\n    indicator.textContent = playing ? 'ðŸ”Š Playing' : 'ðŸ”‡ Silent';\n    indicator.style.display = playing ? 'block' : 'none';\n}\n```\n\n### Auto-Unmute on Specific Pages\n\n```javascript\n// @grant GM_audio\n\n// Unmute when visiting video pages\nif (location.pathname.includes('/video/') || location.pathname.includes('/watch')) {\n    GM_audio.setMute({ isMuted: false }, (error) => {\n        if (!error) {\n            console.log('Auto-unmuted for video page');\n        }\n    });\n}\n```\n\n### Remember Mute Preference\n\n```javascript\n// @grant GM_audio\n// @grant GM_getValue\n// @grant GM_setValue\n\n(async () => {\n    // Restore user's mute preference\n    const wasMuted = GM_getValue('userMutePreference', false);\n    await GM.audio.setMute({ isMuted: wasMuted });\n\n    // Listen for changes\n    await GM.audio.addStateChangeListener((event) => {\n        if ('muted' in event) {\n            // Save preference when user changes it\n            GM_setValue('userMutePreference', !!event.muted);\n        }\n    });\n})();\n```\n\n---\n\n## Error Handling\n\n```javascript\n// @grant GM_audio\n\nGM_audio.setMute({ isMuted: true }, (error) => {\n    if (error) {\n        switch (error) {\n            case 'not_supported':\n                console.log('Audio control not supported in this browser');\n                break;\n            case 'permission_denied':\n                console.log('Permission to control audio denied');\n                break;\n            default:\n                console.log('Unknown error:', error);\n        }\n    }\n});\n```\n",
        "plugins/productivity/skills/tampermonkey/references/api-cookies.md": "# Tampermonkey Cookie API Reference\n\nDocumentation for browser cookie manipulation functions.\n\n---\n\n## Overview\n\nThe GM_cookie API allows userscripts to:\n- List cookies from any domain (with @match/@include access)\n- Set cookies with full control over attributes\n- Delete cookies\n\n**Note:** httpOnly cookies are supported in BETA versions only.\n\n**Required grant:**\n```javascript\n// @grant GM_cookie\n```\n\n---\n\n## GM_cookie.list(details[, callback])\n\nRetrieve cookies matching specified criteria.\n\n### Basic Usage\n\n```javascript\n// @grant GM_cookie\n\n// List all cookies for current domain\nGM_cookie.list({}, function(cookies, error) {\n    if (error) {\n        console.error('Error:', error);\n        return;\n    }\n    console.log('Cookies:', cookies);\n});\n\n// Async version\nconst cookies = await GM.cookie.list();\n```\n\n### Filter Options\n\n```javascript\n// By domain\nGM_cookie.list({ domain: 'example.com' }, callback);\n\n// By name\nGM_cookie.list({ name: 'sessionId' }, callback);\n\n// By path\nGM_cookie.list({ path: '/app' }, callback);\n\n// By URL\nGM_cookie.list({ url: 'https://example.com/page' }, callback);\n\n// Partitioned cookies (v5.2+)\nGM_cookie.list({\n    partitionKey: { topLevelSite: 'https://example.com' }\n}, callback);\n\n// All cookies (empty partitionKey)\nGM_cookie.list({ partitionKey: {} }, callback);\n```\n\n### Cookie Object Properties\n\n```javascript\nGM_cookie.list({}, (cookies, error) => {\n    cookies.forEach(cookie => {\n        console.log(cookie.name);           // Cookie name\n        console.log(cookie.value);          // Cookie value\n        console.log(cookie.domain);         // Domain (e.g., \".example.com\")\n        console.log(cookie.path);           // Path (e.g., \"/\")\n        console.log(cookie.secure);         // HTTPS only\n        console.log(cookie.httpOnly);       // Not accessible via JS\n        console.log(cookie.sameSite);       // \"strict\", \"lax\", \"none\"\n        console.log(cookie.session);        // Session cookie (no expiry)\n        console.log(cookie.expirationDate); // Unix timestamp (seconds)\n        console.log(cookie.hostOnly);       // Exact domain match only\n        console.log(cookie.firstPartyDomain); // First-party isolation\n    });\n});\n```\n\n---\n\n## GM_cookie.set(details[, callback])\n\nCreate or update a cookie.\n\n### Basic Usage\n\n```javascript\n// @grant GM_cookie\n\n// Simple cookie\nGM_cookie.set({\n    name: 'myCookie',\n    value: 'myValue'\n}, function(error) {\n    if (error) {\n        console.error('Failed to set cookie:', error);\n    } else {\n        console.log('Cookie set!');\n    }\n});\n\n// Async version\nawait GM.cookie.set({ name: 'myCookie', value: 'myValue' });\n```\n\n### Full Options\n\n```javascript\nGM_cookie.set({\n    // Required\n    name: 'sessionToken',\n    value: 'abc123xyz',\n\n    // Optional - domain and path\n    url: 'https://example.com',           // URL to associate with\n    domain: '.example.com',               // Cookie domain\n    path: '/',                            // Cookie path\n\n    // Optional - security\n    secure: true,                         // HTTPS only\n    httpOnly: true,                       // Not accessible via JS\n    sameSite: 'strict',                   // \"strict\", \"lax\", \"none\"\n\n    // Optional - expiry\n    expirationDate: Math.floor(Date.now() / 1000) + 86400,  // 24 hours\n\n    // Optional - partitioning (v5.2+)\n    partitionKey: {\n        topLevelSite: 'https://example.com'\n    },\n\n    // Optional - first-party isolation\n    firstPartyDomain: 'example.com'\n}, callback);\n```\n\n### Cookie Expiry Examples\n\n```javascript\n// Session cookie (no expirationDate)\nGM_cookie.set({ name: 'session', value: 'temp' });\n\n// Expire in 1 hour\nGM_cookie.set({\n    name: 'hourly',\n    value: 'data',\n    expirationDate: Math.floor(Date.now() / 1000) + 3600\n});\n\n// Expire in 30 days\nGM_cookie.set({\n    name: 'monthly',\n    value: 'data',\n    expirationDate: Math.floor(Date.now() / 1000) + (30 * 24 * 60 * 60)\n});\n\n// Expire at specific date\nGM_cookie.set({\n    name: 'endOfYear',\n    value: 'data',\n    expirationDate: new Date('2025-12-31').getTime() / 1000\n});\n```\n\n---\n\n## GM_cookie.delete(details, callback)\n\nRemove a cookie.\n\n### Basic Usage\n\n```javascript\n// @grant GM_cookie\n\nGM_cookie.delete({ name: 'myCookie' }, function(error) {\n    if (error) {\n        console.error('Failed to delete:', error);\n    } else {\n        console.log('Cookie deleted');\n    }\n});\n\n// Async version\nawait GM.cookie.delete({ name: 'myCookie' });\n```\n\n### Delete Options\n\n```javascript\nGM_cookie.delete({\n    name: 'sessionToken',\n    url: 'https://example.com',           // URL associated with cookie\n    firstPartyDomain: 'example.com',      // First-party isolation\n    partitionKey: {                       // Partitioned cookies (v5.2+)\n        topLevelSite: 'https://example.com'\n    }\n}, callback);\n```\n\n---\n\n## Common Patterns\n\n### Read and Modify Cookie\n\n```javascript\nasync function updateCookie(name, modifier) {\n    const cookies = await GM.cookie.list({ name });\n\n    if (cookies.length === 0) {\n        console.log('Cookie not found');\n        return;\n    }\n\n    const cookie = cookies[0];\n    const newValue = modifier(cookie.value);\n\n    await GM.cookie.set({\n        name: cookie.name,\n        value: newValue,\n        domain: cookie.domain,\n        path: cookie.path,\n        secure: cookie.secure,\n        expirationDate: cookie.expirationDate\n    });\n\n    return newValue;\n}\n\n// Usage: increment a counter cookie\nupdateCookie('visitCount', val => String(parseInt(val || '0') + 1));\n```\n\n### Cookie Manager Class\n\n```javascript\nclass CookieManager {\n    constructor(domain) {\n        this.domain = domain;\n    }\n\n    async get(name) {\n        const cookies = await GM.cookie.list({ domain: this.domain, name });\n        return cookies.length > 0 ? cookies[0].value : null;\n    }\n\n    async set(name, value, options = {}) {\n        await GM.cookie.set({\n            name,\n            value,\n            domain: this.domain,\n            path: options.path || '/',\n            secure: options.secure ?? true,\n            expirationDate: options.expiresIn\n                ? Math.floor(Date.now() / 1000) + options.expiresIn\n                : undefined\n        });\n    }\n\n    async delete(name) {\n        await GM.cookie.delete({ name, domain: this.domain });\n    }\n\n    async getAll() {\n        return await GM.cookie.list({ domain: this.domain });\n    }\n\n    async clear() {\n        const cookies = await this.getAll();\n        for (const cookie of cookies) {\n            await this.delete(cookie.name);\n        }\n    }\n}\n\n// Usage\nconst cookies = new CookieManager('example.com');\nawait cookies.set('theme', 'dark', { expiresIn: 86400 * 30 });\nconst theme = await cookies.get('theme');\n```\n\n### Backup and Restore Cookies\n\n```javascript\nasync function backupCookies(domain) {\n    const cookies = await GM.cookie.list({ domain });\n    GM_setValue('cookieBackup', cookies);\n    return cookies.length;\n}\n\nasync function restoreCookies() {\n    const backup = GM_getValue('cookieBackup', []);\n    for (const cookie of backup) {\n        await GM.cookie.set({\n            name: cookie.name,\n            value: cookie.value,\n            domain: cookie.domain,\n            path: cookie.path,\n            secure: cookie.secure,\n            httpOnly: cookie.httpOnly,\n            sameSite: cookie.sameSite,\n            expirationDate: cookie.expirationDate\n        });\n    }\n    return backup.length;\n}\n```\n\n### Session Hijacking Prevention Check\n\n```javascript\nasync function checkSessionSecurity() {\n    const cookies = await GM.cookie.list({});\n    const issues = [];\n\n    for (const cookie of cookies) {\n        if (cookie.name.toLowerCase().includes('session') ||\n            cookie.name.toLowerCase().includes('token')) {\n\n            if (!cookie.secure) {\n                issues.push(`${cookie.name}: Not secure (sent over HTTP)`);\n            }\n            if (!cookie.httpOnly) {\n                issues.push(`${cookie.name}: Not httpOnly (accessible via JS)`);\n            }\n            if (cookie.sameSite === 'none' && !cookie.secure) {\n                issues.push(`${cookie.name}: SameSite=None without Secure`);\n            }\n        }\n    }\n\n    if (issues.length > 0) {\n        console.warn('Cookie security issues:', issues);\n    }\n    return issues;\n}\n```\n\n---\n\n## Security Considerations\n\n1. **Access Control**: Tampermonkey checks @match/@include access to the URL before allowing cookie operations\n\n2. **httpOnly Cookies**: Only available in BETA versions - most session cookies are httpOnly\n\n3. **Secure Flag**: Always set `secure: true` for sensitive cookies\n\n4. **SameSite**: Use `sameSite: 'strict'` or `'lax'` to prevent CSRF\n\n5. **Domain Scope**: Be careful with domain - `.example.com` includes all subdomains\n",
        "plugins/productivity/skills/tampermonkey/references/api-dom-ui.md": "# Tampermonkey DOM and UI API Reference\n\nDocumentation for DOM manipulation and UI-related functions.\n\n---\n\n## unsafeWindow\n\nAccess the page's actual window object, bypassing the sandbox.\n\n```javascript\n// @grant unsafeWindow\n\n// Access page variables\nconst config = unsafeWindow.pageConfig;\nconst userData = unsafeWindow.APP.user;\n\n// Call page functions\nunsafeWindow.showModal('Hello from userscript!');\nunsafeWindow.analytics.track('userscript_loaded');\n\n// Modify page globals\nunsafeWindow.DEBUG_MODE = true;\nunsafeWindow.featureFlags.newUI = true;\n\n// Listen to page events\nunsafeWindow.addEventListener('customEvent', (e) => {\n    console.log('Page event:', e.detail);\n});\n```\n\n### When to Use unsafeWindow\n\n| Scenario | Use unsafeWindow? |\n|----------|-------------------|\n| Read page JavaScript variables | Yes |\n| Call page-defined functions | Yes |\n| Access page's jQuery/React/Vue | Yes |\n| DOM manipulation | No (use document) |\n| Add event listeners to elements | No |\n| Create/modify elements | No |\n\n### Security Considerations\n\n```javascript\n// Safe - reading data\nconst token = unsafeWindow.authToken;\n\n// Dangerous - executing untrusted code\n// unsafeWindow.eval(userInput);  // DON'T DO THIS\n\n// Be careful with callbacks\nunsafeWindow.someFunction({\n    callback: function() {\n        // This runs in page context - be careful!\n    }\n});\n```\n\n---\n\n## GM_addStyle(css)\n\nAdd CSS styles to the document. Useful for customising page appearance.\n\n```javascript\n// @grant GM_addStyle\n\n// Basic styling\nGM_addStyle(`\n    .my-class {\n        background: #f0f0f0;\n        padding: 10px;\n        border-radius: 5px;\n    }\n`);\n\n// Hide elements\nGM_addStyle(`\n    #annoying-banner,\n    .popup-overlay,\n    .cookie-notice {\n        display: none !important;\n    }\n`);\n\n// Dark mode\nGM_addStyle(`\n    body {\n        background-color: #1a1a1a !important;\n        color: #e0e0e0 !important;\n    }\n\n    a {\n        color: #6db3f2 !important;\n    }\n\n    img {\n        filter: brightness(0.9);\n    }\n`);\n\n// Returns the style element\nconst styleEl = GM_addStyle('body { font-size: 16px; }');\nconsole.log('Style element:', styleEl);\n```\n\n### Dynamic Styles\n\n```javascript\n// Toggle styles\nlet darkModeStyle = null;\n\nfunction toggleDarkMode() {\n    if (darkModeStyle) {\n        darkModeStyle.remove();\n        darkModeStyle = null;\n    } else {\n        darkModeStyle = GM_addStyle(`\n            body { background: #1a1a1a; color: #fff; }\n        `);\n    }\n}\n\nGM_registerMenuCommand('Toggle Dark Mode', toggleDarkMode);\n```\n\n---\n\n## GM_addElement(tag_name, attributes)\n## GM_addElement(parent_node, tag_name, attributes)\n\nCreate and inject HTML elements. Can bypass Content Security Policy (CSP).\n\n### Add Script\n\n```javascript\n// @grant GM_addElement\n\n// Inline script\nGM_addElement('script', {\n    textContent: `\n        window.myGlobal = 'injected';\n        console.log('Script injected!');\n    `\n});\n\n// External script\nGM_addElement('script', {\n    src: 'https://example.com/library.js',\n    type: 'text/javascript'\n});\n\n// Module script\nGM_addElement('script', {\n    src: 'https://example.com/module.mjs',\n    type: 'module'\n});\n```\n\n### Add Styles\n\n```javascript\n// Inline styles\nGM_addElement('style', {\n    textContent: `\n        body { font-family: Arial; }\n        .highlight { background: yellow; }\n    `\n});\n\n// External stylesheet\nGM_addElement('link', {\n    rel: 'stylesheet',\n    href: 'https://example.com/style.css'\n});\n```\n\n### Add to Specific Parent\n\n```javascript\n// Add to body\nGM_addElement(document.body, 'div', {\n    id: 'my-container',\n    className: 'userscript-ui'\n});\n\n// Add to specific element\nconst container = document.querySelector('#main');\nGM_addElement(container, 'button', {\n    textContent: 'Click Me',\n    onclick: () => alert('Clicked!')\n});\n\n// Add to Shadow DOM\nconst shadowRoot = element.shadowRoot;\nGM_addElement(shadowRoot, 'style', {\n    textContent: 'div { color: blue; }'\n});\n```\n\n### Add Images\n\n```javascript\nGM_addElement('img', {\n    src: 'https://example.com/image.png',\n    alt: 'Description',\n    width: 100,\n    height: 100,\n    style: 'border-radius: 50%;'\n});\n```\n\n### Bypassing CSP\n\n```javascript\n// Sites with strict CSP block inline scripts\n// GM_addElement can bypass this\n\n// Instead of (may be blocked by CSP):\nconst script = document.createElement('script');\nscript.textContent = 'console.log(\"blocked\")';\ndocument.head.appendChild(script);\n\n// Use (bypasses CSP):\nGM_addElement('script', {\n    textContent: 'console.log(\"works!\")'\n});\n```\n\n---\n\n## Creating Custom UI\n\n### Floating Panel\n\n```javascript\nfunction createPanel() {\n    const panel = document.createElement('div');\n    panel.id = 'userscript-panel';\n    panel.innerHTML = `\n        <div class=\"panel-header\">\n            <span>My Script</span>\n            <button class=\"close-btn\">&times;</button>\n        </div>\n        <div class=\"panel-content\">\n            <label>\n                <input type=\"checkbox\" id=\"feature1\"> Enable Feature 1\n            </label>\n            <label>\n                <input type=\"checkbox\" id=\"feature2\"> Enable Feature 2\n            </label>\n        </div>\n    `;\n\n    document.body.appendChild(panel);\n\n    // Add styles\n    GM_addStyle(`\n        #userscript-panel {\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            width: 250px;\n            background: white;\n            border: 1px solid #ccc;\n            border-radius: 8px;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.15);\n            z-index: 999999;\n            font-family: system-ui, sans-serif;\n        }\n\n        #userscript-panel .panel-header {\n            display: flex;\n            justify-content: space-between;\n            align-items: center;\n            padding: 10px 15px;\n            background: #f5f5f5;\n            border-radius: 8px 8px 0 0;\n            border-bottom: 1px solid #e0e0e0;\n        }\n\n        #userscript-panel .close-btn {\n            background: none;\n            border: none;\n            font-size: 20px;\n            cursor: pointer;\n            color: #666;\n        }\n\n        #userscript-panel .panel-content {\n            padding: 15px;\n        }\n\n        #userscript-panel label {\n            display: block;\n            margin-bottom: 10px;\n            cursor: pointer;\n        }\n    `);\n\n    // Event handlers\n    panel.querySelector('.close-btn').onclick = () => panel.remove();\n\n    return panel;\n}\n\nGM_registerMenuCommand('Open Panel', createPanel);\n```\n\n### Toast Notifications\n\n```javascript\nfunction showToast(message, duration = 3000) {\n    const toast = document.createElement('div');\n    toast.className = 'userscript-toast';\n    toast.textContent = message;\n    document.body.appendChild(toast);\n\n    // Trigger animation\n    setTimeout(() => toast.classList.add('show'), 10);\n\n    // Auto-remove\n    setTimeout(() => {\n        toast.classList.remove('show');\n        setTimeout(() => toast.remove(), 300);\n    }, duration);\n}\n\nGM_addStyle(`\n    .userscript-toast {\n        position: fixed;\n        bottom: 20px;\n        left: 50%;\n        transform: translateX(-50%) translateY(100px);\n        background: #333;\n        color: white;\n        padding: 12px 24px;\n        border-radius: 4px;\n        z-index: 999999;\n        opacity: 0;\n        transition: all 0.3s ease;\n    }\n\n    .userscript-toast.show {\n        transform: translateX(-50%) translateY(0);\n        opacity: 1;\n    }\n`);\n\n// Usage\nshowToast('Settings saved!');\n```\n\n### Draggable Element\n\n```javascript\nfunction makeDraggable(element) {\n    let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;\n\n    const header = element.querySelector('.panel-header') || element;\n    header.style.cursor = 'move';\n\n    header.onmousedown = dragMouseDown;\n\n    function dragMouseDown(e) {\n        e.preventDefault();\n        pos3 = e.clientX;\n        pos4 = e.clientY;\n        document.onmouseup = closeDragElement;\n        document.onmousemove = elementDrag;\n    }\n\n    function elementDrag(e) {\n        e.preventDefault();\n        pos1 = pos3 - e.clientX;\n        pos2 = pos4 - e.clientY;\n        pos3 = e.clientX;\n        pos4 = e.clientY;\n        element.style.top = (element.offsetTop - pos2) + 'px';\n        element.style.left = (element.offsetLeft - pos1) + 'px';\n        element.style.right = 'auto';\n    }\n\n    function closeDragElement() {\n        document.onmouseup = null;\n        document.onmousemove = null;\n    }\n}\n\n// Usage\nconst panel = createPanel();\nmakeDraggable(panel);\n```\n\n---\n\n## Interacting with Page Frameworks\n\n### Inject into React App\n\n```javascript\n// @grant unsafeWindow\n\n// Wait for React\nfunction waitForReact(callback) {\n    const interval = setInterval(() => {\n        if (unsafeWindow.React && unsafeWindow.ReactDOM) {\n            clearInterval(interval);\n            callback(unsafeWindow.React, unsafeWindow.ReactDOM);\n        }\n    }, 100);\n}\n\n// Access React component state\nfunction getReactState(element) {\n    const key = Object.keys(element).find(k => k.startsWith('__reactInternalInstance'));\n    if (key) {\n        let fiber = element[key];\n        while (fiber) {\n            if (fiber.memoizedState) return fiber.memoizedState;\n            fiber = fiber.return;\n        }\n    }\n    return null;\n}\n```\n\n### Inject into Vue App\n\n```javascript\n// @grant unsafeWindow\n\n// Access Vue component\nconst vueElement = document.querySelector('#app');\nconst vueInstance = vueElement.__vue__;\n\nif (vueInstance) {\n    console.log('Vue data:', vueInstance.$data);\n    // Modify Vue state\n    vueInstance.someProperty = 'new value';\n}\n```\n\n### Inject into Angular App\n\n```javascript\n// @grant unsafeWindow\n\n// Access Angular scope (AngularJS)\nconst element = document.querySelector('[ng-controller]');\nconst scope = unsafeWindow.angular.element(element).scope();\n\nif (scope) {\n    scope.$apply(() => {\n        scope.someValue = 'modified';\n    });\n}\n```\n",
        "plugins/productivity/skills/tampermonkey/references/api-storage.md": "# Tampermonkey Storage API Reference\n\nComplete documentation for persistent data storage functions.\n\n---\n\n## Overview\n\nTampermonkey provides a key-value storage system that:\n- Persists across page reloads and browser sessions\n- Is isolated per script (scripts can't access each other's data)\n- Supports any JSON-serialisable value type\n- Can notify listeners of changes across tabs\n\n---\n\n## Single Value Operations\n\n### GM_setValue(key, value)\n\nStore a value. Supports strings, numbers, booleans, objects, arrays, null, and undefined.\n\n```javascript\n// @grant GM_setValue\n\n// Primitive values\nGM_setValue('username', 'John');\nGM_setValue('count', 42);\nGM_setValue('enabled', true);\nGM_setValue('lastVisit', Date.now());\n\n// Objects and arrays\nGM_setValue('settings', {\n    theme: 'dark',\n    fontSize: 14,\n    notifications: true\n});\n\nGM_setValue('history', ['page1', 'page2', 'page3']);\n\n// Nested objects work too\nGM_setValue('userData', {\n    profile: { name: 'John', age: 30 },\n    preferences: { lang: 'en', timezone: 'UTC' }\n});\n```\n\n### GM_getValue(key, defaultValue)\n\nRetrieve a value. Returns defaultValue if key doesn't exist.\n\n```javascript\n// @grant GM_getValue\n\nconst username = GM_getValue('username', 'Guest');\nconst count = GM_getValue('count', 0);\nconst settings = GM_getValue('settings', { theme: 'light' });\n\n// Check if value exists\nconst value = GM_getValue('maybeExists');\nif (value === undefined) {\n    console.log('Key does not exist');\n}\n```\n\n### GM_deleteValue(key)\n\nRemove a stored value.\n\n```javascript\n// @grant GM_deleteValue\n\nGM_deleteValue('temporaryData');\nGM_deleteValue('cache');\n```\n\n### GM_listValues()\n\nGet an array of all stored keys.\n\n```javascript\n// @grant GM_listValues\n\nconst keys = GM_listValues();\nconsole.log('Stored keys:', keys);\n// ['username', 'settings', 'history']\n\n// Iterate all stored data\nkeys.forEach(key => {\n    console.log(key, '=', GM_getValue(key));\n});\n```\n\n---\n\n## Batch Operations (v5.3+)\n\nMore efficient for multiple operations - reduces overhead.\n\n### GM_setValues(values)\n\nStore multiple values at once.\n\n```javascript\n// @grant GM_setValues\n\nGM_setValues({\n    username: 'John',\n    theme: 'dark',\n    lastLogin: Date.now(),\n    settings: { notifications: true, sound: false }\n});\n```\n\n### GM_getValues(keysOrDefaults)\n\nRetrieve multiple values at once.\n\n```javascript\n// @grant GM_getValues\n\n// With array - returns object with keys (undefined for missing)\nconst values = GM_getValues(['username', 'theme', 'nonexistent']);\n// { username: 'John', theme: 'dark', nonexistent: undefined }\n\n// With defaults object - missing keys get default values\nconst values2 = GM_getValues({\n    username: 'Guest',\n    theme: 'light',\n    notifications: true\n});\n// { username: 'John', theme: 'dark', notifications: true }\n```\n\n### GM_deleteValues(keys)\n\nDelete multiple values at once.\n\n```javascript\n// @grant GM_deleteValues\n\nGM_deleteValues(['cache', 'tempData', 'oldSettings']);\n```\n\n---\n\n## Change Listeners\n\nListen for value changes, including from other tabs/windows.\n\n### GM_addValueChangeListener(key, callback)\n\n```javascript\n// @grant GM_addValueChangeListener\n\nconst listenerId = GM_addValueChangeListener('counter', (key, oldValue, newValue, remote) => {\n    console.log(`Key: ${key}`);\n    console.log(`Old value: ${oldValue}`);\n    console.log(`New value: ${newValue}`);\n    console.log(`Remote change: ${remote}`);  // true if from another tab\n\n    if (remote) {\n        // Another tab changed this value\n        updateUI(newValue);\n    }\n});\n```\n\n**Callback parameters:**\n\n| Parameter | Type | Description |\n|-----------|------|-------------|\n| `key` | string | The key that changed |\n| `oldValue` | any | Previous value |\n| `newValue` | any | New value |\n| `remote` | boolean | true if change was from another tab |\n\n### GM_removeValueChangeListener(listenerId)\n\n```javascript\n// @grant GM_removeValueChangeListener\n\nGM_removeValueChangeListener(listenerId);\n```\n\n---\n\n## Common Patterns\n\n### Settings Manager\n\n```javascript\n// @grant GM_getValue\n// @grant GM_setValue\n// @grant GM_registerMenuCommand\n\nconst DEFAULT_SETTINGS = {\n    enabled: true,\n    theme: 'auto',\n    fontSize: 14,\n    notifications: true\n};\n\nclass Settings {\n    constructor() {\n        this.data = GM_getValue('settings', DEFAULT_SETTINGS);\n    }\n\n    get(key) {\n        return this.data[key] ?? DEFAULT_SETTINGS[key];\n    }\n\n    set(key, value) {\n        this.data[key] = value;\n        GM_setValue('settings', this.data);\n    }\n\n    reset() {\n        this.data = { ...DEFAULT_SETTINGS };\n        GM_setValue('settings', this.data);\n    }\n}\n\nconst settings = new Settings();\n\n// Menu commands\nGM_registerMenuCommand('Toggle Feature', () => {\n    settings.set('enabled', !settings.get('enabled'));\n    location.reload();\n});\n```\n\n### Cache with Expiry\n\n```javascript\n// @grant GM_getValue\n// @grant GM_setValue\n\nfunction getCached(key, fetchFn, maxAgeMs = 3600000) {\n    const cached = GM_getValue(`cache_${key}`);\n\n    if (cached && Date.now() - cached.timestamp < maxAgeMs) {\n        return Promise.resolve(cached.data);\n    }\n\n    return fetchFn().then(data => {\n        GM_setValue(`cache_${key}`, {\n            data: data,\n            timestamp: Date.now()\n        });\n        return data;\n    });\n}\n\n// Usage\ngetCached('userData', () => fetchUserData(), 60000)  // 1 minute cache\n    .then(data => console.log(data));\n```\n\n### Cross-Tab Communication\n\n```javascript\n// @grant GM_setValue\n// @grant GM_getValue\n// @grant GM_addValueChangeListener\n\n// Tab 1: Send message\nfunction broadcast(channel, message) {\n    GM_setValue(`broadcast_${channel}`, {\n        message: message,\n        timestamp: Date.now(),\n        sender: GM_getValue('tabId', Math.random().toString(36))\n    });\n}\n\n// Tab 2: Receive messages\nGM_addValueChangeListener('broadcast_main', (key, oldVal, newVal, remote) => {\n    if (remote && newVal) {\n        console.log('Received:', newVal.message);\n        handleMessage(newVal.message);\n    }\n});\n\n// Send a message\nbroadcast('main', { action: 'refresh', data: { userId: 123 } });\n```\n\n### Migration Between Versions\n\n```javascript\n// @grant GM_getValue\n// @grant GM_setValue\n// @grant GM_deleteValue\n\nconst CURRENT_VERSION = 3;\n\nfunction migrateStorage() {\n    const version = GM_getValue('storageVersion', 1);\n\n    if (version < 2) {\n        // v1 -> v2: Rename key\n        const oldData = GM_getValue('userData');\n        if (oldData) {\n            GM_setValue('user', oldData);\n            GM_deleteValue('userData');\n        }\n    }\n\n    if (version < 3) {\n        // v2 -> v3: Convert settings format\n        const settings = GM_getValue('settings', {});\n        if (typeof settings.theme === 'boolean') {\n            settings.theme = settings.theme ? 'dark' : 'light';\n            GM_setValue('settings', settings);\n        }\n    }\n\n    GM_setValue('storageVersion', CURRENT_VERSION);\n}\n\nmigrateStorage();\n```\n\n### Persistent Counter\n\n```javascript\n// @grant GM_getValue\n// @grant GM_setValue\n\nfunction incrementCounter(key, amount = 1) {\n    const current = GM_getValue(key, 0);\n    const newValue = current + amount;\n    GM_setValue(key, newValue);\n    return newValue;\n}\n\n// Track page visits\nconst visitCount = incrementCounter('pageVisits');\nconsole.log(`You've visited this page ${visitCount} times`);\n```\n\n---\n\n## Data Types and Limits\n\n### Supported Types\n\n| Type | Support | Notes |\n|------|---------|-------|\n| string | Yes | No size limit (practical) |\n| number | Yes | Including floats, Infinity, NaN |\n| boolean | Yes | |\n| null | Yes | |\n| undefined | Yes | |\n| object | Yes | Must be JSON-serialisable |\n| array | Yes | Must be JSON-serialisable |\n| Date | Partial | Stored as string, retrieve with new Date() |\n| Map/Set | No | Convert to array/object first |\n| Function | No | Cannot be serialised |\n| Symbol | No | Cannot be serialised |\n\n### Handling Non-Serialisable Data\n\n```javascript\n// Date objects\nGM_setValue('lastUpdate', new Date().toISOString());\nconst date = new Date(GM_getValue('lastUpdate'));\n\n// Map\nconst map = new Map([['a', 1], ['b', 2]]);\nGM_setValue('myMap', Array.from(map.entries()));\nconst restored = new Map(GM_getValue('myMap'));\n\n// Set\nconst set = new Set([1, 2, 3]);\nGM_setValue('mySet', Array.from(set));\nconst restoredSet = new Set(GM_getValue('mySet'));\n```\n\n---\n\n## Async Versions\n\nAll storage functions have GM.* async equivalents. See [api-async.md](api-async.md).\n\n```javascript\n// Async equivalents\nconst value = await GM.getValue('key', 'default');\nawait GM.setValue('key', 'value');\nawait GM.deleteValue('key');\nconst keys = await GM.listValues();\nawait GM.setValues({ a: 1, b: 2 });\nconst values = await GM.getValues(['a', 'b']);\nawait GM.deleteValues(['a', 'b']);\n```\n",
        "plugins/productivity/skills/tampermonkey/references/api-sync.md": "# Tampermonkey Synchronous API Reference\n\nDocumentation for all GM_* synchronous functions.\n\n---\n\n## GM_info\n\nGet information about the script and Tampermonkey. No @grant required.\n\n```javascript\nconsole.log(GM_info.script.name);        // Script name\nconsole.log(GM_info.script.version);     // Script version\nconsole.log(GM_info.scriptHandler);      // \"Tampermonkey\"\nconsole.log(GM_info.version);            // Tampermonkey version\n```\n\n**Key properties:**\n\n| Property | Type | Description |\n|----------|------|-------------|\n| `script.name` | string | Script name |\n| `script.version` | string | Script version |\n| `script.description` | string | Script description |\n| `script.namespace` | string | Script namespace |\n| `script.matches` | string[] | @match patterns |\n| `script.includes` | string[] | @include patterns |\n| `script.excludes` | string[] | @exclude patterns |\n| `script.grant` | string[] | Granted permissions |\n| `scriptHandler` | string | \"Tampermonkey\" |\n| `version` | string | Tampermonkey version |\n| `isIncognito` | boolean | Running in private mode |\n| `sandboxMode` | string | 'js', 'raw', or 'dom' |\n| `downloadMode` | string | 'native', 'disabled', or 'browser' |\n\n---\n\n## GM_log(message)\n\nLog a message to the console.\n\n```javascript\n// @grant GM_log\n\nGM_log('Debug message');\nGM_log('User ID: ' + userId);\n```\n\n---\n\n## GM_addStyle(css)\n\nAdd CSS styles to the document. Returns the injected style element.\n\n```javascript\n// @grant GM_addStyle\n\n// Add styles\nconst styleElement = GM_addStyle(`\n    .my-class {\n        background: #f0f0f0;\n        padding: 10px;\n    }\n\n    #hide-element {\n        display: none !important;\n    }\n\n    body {\n        font-family: 'Arial', sans-serif !important;\n    }\n`);\n```\n\n---\n\n## GM_addElement(tag_name, attributes)\n## GM_addElement(parent_node, tag_name, attributes)\n\nCreate and inject HTML elements, bypassing CSP restrictions.\n\n```javascript\n// @grant GM_addElement\n\n// Add script to page\nGM_addElement('script', {\n    textContent: 'window.myVar = \"injected\";'\n});\n\n// Add external script\nGM_addElement('script', {\n    src: 'https://example.com/script.js',\n    type: 'text/javascript'\n});\n\n// Add image to specific parent\nGM_addElement(document.body, 'img', {\n    src: 'https://example.com/image.png',\n    alt: 'My Image'\n});\n\n// Add style to shadow DOM\nGM_addElement(shadowRoot, 'style', {\n    textContent: 'div { color: blue; }'\n});\n```\n\n**Returns:** The injected HTML element.\n\n---\n\n## GM_notification(details, ondone)\n## GM_notification(text, title, image, onclick)\n\nDisplay desktop notifications.\n\n**Object syntax:**\n\n```javascript\n// @grant GM_notification\n\nGM_notification({\n    text: 'Download complete!',\n    title: 'My Script',\n    image: 'https://example.com/icon.png',\n    timeout: 5000,                    // Auto-close after 5 seconds\n    silent: false,                    // Play sound\n    highlight: false,                 // Highlight tab\n    url: 'https://example.com/',      // Open on click (v5.0+)\n    tag: 'download-notification',     // Update existing (v5.0+)\n    onclick: (event) => {\n        event.preventDefault();       // Prevent URL opening\n        console.log('Clicked!');\n    },\n    ondone: () => {\n        console.log('Notification closed');\n    }\n});\n```\n\n**Simple syntax:**\n\n```javascript\nGM_notification('Message', 'Title', 'https://example.com/icon.png', () => {\n    console.log('Clicked!');\n});\n```\n\n**Parameters:**\n\n| Property | Type | Description |\n|----------|------|-------------|\n| `text` | string | Notification message |\n| `title` | string | Notification title |\n| `image` | string | Icon URL |\n| `timeout` | number | Auto-close time in ms |\n| `silent` | boolean | Suppress sound |\n| `highlight` | boolean | Flash the tab |\n| `url` | string | URL to open on click (v5.0+) |\n| `tag` | string | Unique ID for updating (v5.0+) |\n| `onclick` | function | Click handler |\n| `ondone` | function | Close handler |\n\n---\n\n## GM_openInTab(url, options)\n## GM_openInTab(url, loadInBackground)\n\nOpen a new browser tab.\n\n```javascript\n// @grant GM_openInTab\n\n// Simple usage\nGM_openInTab('https://example.com/');\n\n// With options\nconst tab = GM_openInTab('https://example.com/', {\n    active: true,        // Focus the new tab\n    insert: true,        // Insert next to current tab\n    setParent: true,     // Set current tab as parent\n    incognito: false,    // Open in incognito\n    loadInBackground: false  // Legacy: opposite of active\n});\n\n// Close the tab later\ntab.close();\n\n// Listen for tab close\ntab.onclose = () => console.log('Tab closed');\n```\n\n**Returns:** Object with `close()` function, `onclose` listener, and `closed` flag.\n\n---\n\n## GM_registerMenuCommand(name, callback, options_or_accessKey)\n\nAdd an entry to Tampermonkey's menu.\n\n```javascript\n// @grant GM_registerMenuCommand\n\n// Simple usage\nconst menuId = GM_registerMenuCommand('Say Hello', () => {\n    alert('Hello!');\n});\n\n// With options (v4.20+)\nconst menuId2 = GM_registerMenuCommand('Toggle Feature', (event) => {\n    console.log('Clicked with:', event);\n}, {\n    accessKey: 't',       // Keyboard shortcut\n    autoClose: true,      // Close menu after click\n    title: 'Enable or disable the feature',  // Tooltip (v5.0+)\n    id: existingId        // Update existing command (v5.0+)\n});\n\n// With just access key (legacy)\nconst menuId3 = GM_registerMenuCommand('Quick Action', callback, 'q');\n```\n\n**Returns:** Menu command ID for later removal.\n\n---\n\n## GM_unregisterMenuCommand(menuCmdId)\n\nRemove a menu command.\n\n```javascript\n// @grant GM_unregisterMenuCommand\n\nconst menuId = GM_registerMenuCommand('Temporary', callback);\n// Later...\nGM_unregisterMenuCommand(menuId);\n```\n\n---\n\n## GM_setClipboard(data, info, cb)\n\nCopy data to the clipboard.\n\n```javascript\n// @grant GM_setClipboard\n\n// Copy text\nGM_setClipboard('Hello, World!', 'text');\n\n// Copy HTML\nGM_setClipboard('<b>Bold text</b>', 'html');\n\n// With callback\nGM_setClipboard('Copied text', 'text', () => {\n    console.log('Clipboard set!');\n});\n\n// With full info object\nGM_setClipboard('Data', {\n    type: 'text',\n    mimetype: 'text/plain'\n});\n```\n\n---\n\n## GM_download(details)\n## GM_download(url, name)\n\nDownload a file.\n\n```javascript\n// @grant GM_download\n\n// Simple download\nGM_download('https://example.com/file.pdf', 'document.pdf');\n\n// With options\nconst download = GM_download({\n    url: 'https://example.com/file.zip',\n    name: 'archive.zip',\n    saveAs: true,              // Prompt for location\n    headers: {\n        'Authorization': 'Bearer token123'\n    },\n    onload: () => console.log('Complete!'),\n    onerror: (error) => console.error('Failed:', error.error),\n    onprogress: (progress) => console.log(`${progress.loaded}/${progress.total}`),\n    ontimeout: () => console.log('Timed out')\n});\n\n// Cancel download\ndownload.abort();\n```\n\n**Note:** File extensions must be whitelisted in Tampermonkey options.\n\n**Error types:**\n- `not_enabled` - Download feature disabled\n- `not_whitelisted` - Extension not allowed\n- `not_permitted` - Missing permission\n- `not_supported` - Browser doesn't support\n- `not_succeeded` - Download failed\n\n---\n\n## GM_getResourceText(name)\n\nGet text content of a preloaded @resource.\n\n```javascript\n// @resource myCSS https://example.com/style.css\n// @grant GM_getResourceText\n// @grant GM_addStyle\n\nconst css = GM_getResourceText('myCSS');\nGM_addStyle(css);\n```\n\n---\n\n## GM_getResourceURL(name)\n\nGet a data URL for a preloaded @resource.\n\n```javascript\n// @resource myIcon https://example.com/icon.png\n// @grant GM_getResourceURL\n\nconst iconUrl = GM_getResourceURL('myIcon');\nconst img = document.createElement('img');\nimg.src = iconUrl;\ndocument.body.appendChild(img);\n```\n\n---\n\n## unsafeWindow\n\nAccess the page's actual window object (not the sandbox).\n\n```javascript\n// @grant unsafeWindow\n\n// Access page variables\nconsole.log(unsafeWindow.pageConfig);\n\n// Call page functions\nunsafeWindow.showModal('Hello from userscript!');\n\n// Modify page globals\nunsafeWindow.DEBUG_MODE = true;\n```\n\n**Warning:** Use carefully - can break if page structure changes.\n",
        "plugins/productivity/skills/tampermonkey/references/api-tabs.md": "# Tampermonkey Tab API Reference\n\nDocumentation for tab management and cross-tab communication.\n\n---\n\n## Tab-Persistent Storage\n\n### GM_getTab(callback)\n\nGet an object that persists for the lifetime of the current tab.\n\n```javascript\n// @grant GM_getTab\n\nGM_getTab(function(tab) {\n    console.log('Tab object:', tab);\n\n    // Tab object is initially empty {}\n    // Add any data you want\n    tab.visitCount = (tab.visitCount || 0) + 1;\n    tab.lastVisit = Date.now();\n\n    // Data persists across page navigations within this tab\n    console.log('Visits in this tab:', tab.visitCount);\n});\n```\n\n### GM_saveTab(tab, cb)\n\nSave changes to the tab object.\n\n```javascript\n// @grant GM_saveTab\n\nGM_getTab(function(tab) {\n    // Modify tab data\n    tab.userData = {\n        preferences: { theme: 'dark' },\n        history: ['page1', 'page2']\n    };\n\n    // Save changes\n    GM_saveTab(tab, function() {\n        console.log('Tab data saved');\n    });\n});\n```\n\n### GM_getTabs(callback)\n\nGet tab objects from all tabs running the script.\n\n```javascript\n// @grant GM_getTabs\n\nGM_getTabs(function(tabs) {\n    console.log('All tabs:', tabs);\n\n    // tabs is an object: { tabId1: tabData1, tabId2: tabData2, ... }\n    for (const [tabId, tabData] of Object.entries(tabs)) {\n        console.log(`Tab ${tabId}:`, tabData);\n    }\n\n    // Count active tabs\n    const tabCount = Object.keys(tabs).length;\n    console.log(`Script running in ${tabCount} tabs`);\n});\n```\n\n---\n\n## Window Control\n\n### GM_openInTab(url, options)\n\nOpen a new browser tab.\n\n```javascript\n// @grant GM_openInTab\n\n// Simple - opens in background\nGM_openInTab('https://example.com/');\n\n// Open and focus\nGM_openInTab('https://example.com/', { active: true });\n\n// Full options\nconst newTab = GM_openInTab('https://example.com/', {\n    active: true,           // Focus the new tab\n    insert: true,           // Insert next to current tab\n    setParent: true,        // Current tab is parent (closing parent closes this)\n    incognito: false,       // Open in private/incognito mode\n    loadInBackground: false // Legacy: opposite of active\n});\n\n// Control the opened tab\nnewTab.onclose = function() {\n    console.log('New tab was closed');\n};\n\n// Check if closed\nif (newTab.closed) {\n    console.log('Tab is already closed');\n}\n\n// Close programmatically\nsetTimeout(() => {\n    newTab.close();\n}, 5000);\n```\n\n### window.close\n\nClose the current tab (requires grant).\n\n```javascript\n// @grant window.close\n\n// Close after confirmation\nif (confirm('Close this tab?')) {\n    window.close();\n}\n\n// Note: Cannot close the last tab in a window (security restriction)\n```\n\n### window.focus\n\nBring the window to the front.\n\n```javascript\n// @grant window.focus\n\n// Focus this window/tab\nwindow.focus();\n\n// Unlike unsafeWindow.focus(), this works regardless of browser settings\n```\n\n---\n\n## URL Change Detection\n\n### window.onurlchange\n\nListen for URL changes in single-page applications (SPAs).\n\n```javascript\n// @grant window.onurlchange\n\n// Check if supported\nif (window.onurlchange === null) {\n    // Feature is supported\n    window.addEventListener('urlchange', function(info) {\n        console.log('URL changed to:', info.url);\n\n        // Re-run modifications for new page\n        if (info.url.includes('/profile')) {\n            modifyProfilePage();\n        } else if (info.url.includes('/settings')) {\n            modifySettingsPage();\n        }\n    });\n}\n```\n\n### Comprehensive SPA Handler\n\n```javascript\n// @grant window.onurlchange\n\n(function() {\n    'use strict';\n\n    // Initial page load\n    handlePage(location.href);\n\n    // URL changes (SPA navigation)\n    if (window.onurlchange === null) {\n        window.addEventListener('urlchange', (e) => handlePage(e.url));\n    }\n\n    function handlePage(url) {\n        // Wait for content to load\n        setTimeout(() => {\n            if (url.includes('/dashboard')) {\n                enhanceDashboard();\n            } else if (url.includes('/search')) {\n                enhanceSearch();\n            }\n        }, 100);\n    }\n})();\n```\n\n---\n\n## Cross-Tab Communication\n\n### Using GM_setValue/addValueChangeListener\n\n```javascript\n// @grant GM_setValue\n// @grant GM_getValue\n// @grant GM_addValueChangeListener\n\n// Unique ID for this tab\nconst TAB_ID = Math.random().toString(36).substr(2, 9);\n\n// Broadcast a message to all tabs\nfunction broadcast(type, data) {\n    GM_setValue('broadcast', {\n        type: type,\n        data: data,\n        sender: TAB_ID,\n        timestamp: Date.now()\n    });\n}\n\n// Listen for broadcasts\nGM_addValueChangeListener('broadcast', (key, oldVal, newVal, remote) => {\n    if (remote && newVal && newVal.sender !== TAB_ID) {\n        console.log('Received:', newVal.type, newVal.data);\n        handleMessage(newVal.type, newVal.data);\n    }\n});\n\nfunction handleMessage(type, data) {\n    switch (type) {\n        case 'REFRESH':\n            location.reload();\n            break;\n        case 'SETTINGS_CHANGED':\n            applySettings(data);\n            break;\n        case 'PING':\n            broadcast('PONG', { respondingTo: data.from });\n            break;\n    }\n}\n\n// Usage\nbroadcast('SETTINGS_CHANGED', { theme: 'dark' });\n```\n\n### Tab Registry\n\n```javascript\n// @grant GM_getTab\n// @grant GM_saveTab\n// @grant GM_getTabs\n// @grant GM_addValueChangeListener\n\n// Register this tab\nfunction registerTab() {\n    GM_getTab(tab => {\n        tab.id = tab.id || Math.random().toString(36).substr(2, 9);\n        tab.registered = Date.now();\n        tab.url = location.href;\n        GM_saveTab(tab);\n    });\n}\n\n// Get list of active tabs\nfunction getActiveTabs(callback) {\n    GM_getTabs(tabs => {\n        const activeTabs = Object.entries(tabs)\n            .filter(([id, data]) => data.registered)\n            .map(([id, data]) => ({\n                id: data.id,\n                url: data.url,\n                age: Date.now() - data.registered\n            }));\n        callback(activeTabs);\n    });\n}\n\n// Check if another tab has the same URL\nfunction isDuplicateTab(callback) {\n    GM_getTab(currentTab => {\n        GM_getTabs(allTabs => {\n            const duplicates = Object.values(allTabs).filter(\n                t => t.url === location.href && t.id !== currentTab.id\n            );\n            callback(duplicates.length > 0, duplicates);\n        });\n    });\n}\n\n// Usage\nregisterTab();\nisDuplicateTab((isDuplicate, others) => {\n    if (isDuplicate) {\n        console.log('Another tab has this page open:', others);\n    }\n});\n```\n\n### Leader Election\n\n```javascript\n// @grant GM_setValue\n// @grant GM_getValue\n// @grant GM_addValueChangeListener\n\nconst TAB_ID = Math.random().toString(36).substr(2, 9);\nlet isLeader = false;\n\nasync function electLeader() {\n    const leader = GM_getValue('leader', null);\n    const now = Date.now();\n\n    // Leader is valid if set within last 5 seconds\n    if (leader && now - leader.timestamp < 5000 && leader.id !== TAB_ID) {\n        isLeader = false;\n        return;\n    }\n\n    // Claim leadership\n    GM_setValue('leader', { id: TAB_ID, timestamp: now });\n\n    // Wait and verify\n    await new Promise(r => setTimeout(r, 100));\n\n    const currentLeader = GM_getValue('leader');\n    isLeader = currentLeader && currentLeader.id === TAB_ID;\n\n    console.log(isLeader ? 'This tab is the leader' : 'Another tab is leader');\n}\n\n// Heartbeat to maintain leadership\nsetInterval(() => {\n    if (isLeader) {\n        GM_setValue('leader', { id: TAB_ID, timestamp: Date.now() });\n    }\n}, 3000);\n\n// Re-elect if leader disappears\nGM_addValueChangeListener('leader', () => {\n    setTimeout(electLeader, 100);\n});\n\nelectLeader();\n\n// Only leader performs certain actions\nfunction doLeaderOnlyTask() {\n    if (!isLeader) return;\n    console.log('Performing leader-only task');\n}\n```\n\n---\n\n## Async Versions\n\n```javascript\n// GM.getTab()\nconst tab = await GM.getTab();\ntab.data = 'value';\n\n// GM.saveTab()\nawait GM.saveTab(tab);\n\n// GM.getTabs()\nconst tabs = await GM.getTabs();\n```\n",
        "plugins/productivity/skills/tampermonkey/references/browser-compatibility.md": "# Browser Compatibility Guide\n\nCross-browser differences and compatibility matrix for Tampermonkey userscripts.\n\n---\n\n## Browser Support Matrix\n\n| Feature | Chrome | Firefox | Edge | Safari | Opera |\n|---------|--------|---------|------|--------|-------|\n| **Tampermonkey** | âœ… | âœ… | âœ… | âš ï¸ Userscripts app | âœ… |\n| **Manifest Version** | V3 | V2 | V3 | N/A | V3 |\n\n### API Compatibility\n\n| API | Chrome | Firefox | Edge | Notes |\n|-----|--------|---------|------|-------|\n| `GM_setValue/getValue` | âœ… | âœ… | âœ… | Universal |\n| `GM_xmlhttpRequest` | âœ… | âœ… | âœ… | Universal |\n| `GM_addStyle` | âœ… | âœ… | âœ… | Universal |\n| `GM_addElement` | âœ… | âœ… | âœ… | Universal |\n| `GM_notification` | âœ… | âœ… | âœ… | Universal |\n| `GM_download` | âœ… | âœ… | âœ… | Universal |\n| `GM_openInTab` | âœ… | âœ… | âœ… | Universal |\n| `GM_registerMenuCommand` | âœ… | âœ… | âœ… | Universal |\n| `GM_cookie` | âœ… | âœ… | âœ… | Universal |\n| `GM_webRequest` | âŒ MV3 | âœ… | âŒ MV3 | Firefox only now |\n| `GM_audio` | âœ… | âœ… | âœ… | v5.0+ |\n| `window.onurlchange` | âœ… | âœ… | âœ… | Universal |\n| `unsafeWindow` | âœ… | âœ… | âœ… | Universal |\n\n### Sandbox & Execution Context\n\n| Feature | Chrome | Firefox | Notes |\n|---------|--------|---------|-------|\n| `@sandbox raw` | âœ… | âœ… | Page context |\n| `@sandbox JavaScript` | âœ… | âœ… USERSCRIPT_WORLD | Firefox has special context |\n| `@sandbox DOM` | âœ… | âœ… | Isolated context |\n| `document-start` timing | âš ï¸ | âœ… | Firefox more reliable |\n| `cloneInto` | âŒ | âœ… | Firefox only |\n| `exportFunction` | âŒ | âœ… | Firefox only |\n\n---\n\n## Manifest V3 Limitations (Chrome/Edge)\n\nChrome and Edge use Manifest V3, which restricts certain features:\n\n### What Doesn't Work in MV3\n\n1. **@webRequest** - Request interception is blocked\n2. **Some background script patterns** - Persistent background pages removed\n3. **Certain CSP bypass methods** - More restricted\n\n### Workarounds\n\n```javascript\n// Instead of @webRequest, use page-level interception\n// @grant unsafeWindow\n\n// Intercept fetch\nconst originalFetch = unsafeWindow.fetch;\nunsafeWindow.fetch = function(...args) {\n    console.log('Intercepted fetch:', args[0]);\n    return originalFetch.apply(this, args);\n};\n\n// Intercept XMLHttpRequest\nconst originalOpen = unsafeWindow.XMLHttpRequest.prototype.open;\nunsafeWindow.XMLHttpRequest.prototype.open = function(method, url) {\n    console.log('Intercepted XHR:', method, url);\n    return originalOpen.apply(this, arguments);\n};\n```\n\n---\n\n## Firefox-Specific Features\n\n### cloneInto and exportFunction\n\nFirefox's USERSCRIPT_WORLD requires special functions to share data with the page.\n\n```javascript\n// Share object with page (Firefox)\nfunction shareWithPage(name, value) {\n    if (typeof cloneInto !== 'undefined') {\n        // Firefox - must use cloneInto\n        unsafeWindow[name] = cloneInto(value, unsafeWindow, {\n            cloneFunctions: true\n        });\n    } else {\n        // Chrome - direct assignment works\n        unsafeWindow[name] = value;\n    }\n}\n\n// Export function for page to call (Firefox)\nfunction exportToPage(name, fn) {\n    if (typeof exportFunction !== 'undefined') {\n        // Firefox\n        unsafeWindow[name] = exportFunction(fn, unsafeWindow);\n    } else {\n        // Chrome\n        unsafeWindow[name] = fn;\n    }\n}\n\n// Usage\nshareWithPage('myData', { count: 42, items: ['a', 'b'] });\nexportToPage('myFunction', (arg) => console.log('Called with:', arg));\n```\n\n### Firefox Containers\n\nFirefox supports container tabs for privacy isolation.\n\n```javascript\n// @run-in container-id-2\n// @run-in container-id-3\n\n// Get container ID at runtime\nconsole.log('Container:', GM_info.container);\n// { id: \"2\", name: \"Personal\" }\n```\n\n---\n\n## Safari Support\n\nSafari uses a third-party app called \"Userscripts\" (not Tampermonkey).\n\n### Key Differences\n\n| Feature | Safari Userscripts | Tampermonkey |\n|---------|-------------------|--------------|\n| Installation | Mac App Store | Browser extension |\n| @grant support | Limited | Full |\n| GM_* APIs | Subset | Full |\n| Auto-update | Manual | Automatic |\n\n### Writing Safari-Compatible Scripts\n\n```javascript\n// Check if running in Safari Userscripts app\nconst isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n\n// Use only widely-supported APIs\n// @grant GM_getValue\n// @grant GM_setValue\n// @grant GM_xmlhttpRequest\n\n// Avoid Safari-incompatible features\n// @grant GM_webRequest  // May not work\n// @grant GM_audio       // May not work\n```\n\n---\n\n## Cross-Browser Best Practices\n\n### 1. Feature Detection\n\n```javascript\n// Check if API exists before using\nif (typeof GM_notification !== 'undefined') {\n    GM_notification('Hello!');\n} else {\n    alert('Hello!');  // Fallback\n}\n\n// Check for Firefox-specific features\nconst isFirefox = typeof cloneInto !== 'undefined';\n```\n\n### 2. Graceful Degradation\n\n```javascript\n// Provide fallbacks for unsupported features\nasync function showNotification(message) {\n    if (typeof GM_notification !== 'undefined') {\n        GM_notification({ text: message });\n    } else if ('Notification' in window && Notification.permission === 'granted') {\n        new Notification(message);\n    } else {\n        console.log('Notification:', message);\n    }\n}\n```\n\n### 3. Avoid Browser-Specific Code\n\n```javascript\n// Wrong - breaks in other browsers\nif (navigator.userAgent.includes('Firefox')) {\n    // Firefox-specific code\n}\n\n// Right - feature detection\nif (typeof exportFunction !== 'undefined') {\n    // Use exportFunction\n} else {\n    // Use alternative\n}\n```\n\n### 4. Test in Multiple Browsers\n\nBefore releasing a script:\n\n1. âœ… Test in Chrome (most common)\n2. âœ… Test in Firefox (second most common)\n3. âœ… Test in Edge (uses same engine as Chrome)\n4. âš ï¸ Test in Safari if targeting Mac users\n\n---\n\n## Browser-Specific Bugs & Workarounds\n\n### Chrome: document-start Timing\n\nChrome's document-start isn't always reliable.\n\n```javascript\n// @run-at document-start\n\n// May not run early enough - add fallback\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n} else {\n    init();  // Already loaded\n}\n```\n\n### Firefox: Strict CSP Sites\n\nSome sites have strict CSP that even Tampermonkey can't bypass.\n\n```javascript\n// If GM_addElement fails, try @require instead\n// @require https://example.com/library.js\n\n// Or inject via unsafeWindow\nunsafeWindow.eval('console.log(\"injected\")');  // Last resort\n```\n\n### Edge: Extension Sync Issues\n\nEdge sometimes doesn't sync Tampermonkey settings.\n\n**Workaround:** Export/import settings manually between devices.\n\n---\n\n## Version Requirements\n\nSome features require specific Tampermonkey versions:\n\n| Feature | Minimum Version |\n|---------|-----------------|\n| `GM.* async APIs` | 4.0+ |\n| `GM_audio` | 5.0+ |\n| `@tag` | 5.0+ |\n| `GM_notification.tag` | 5.0+ |\n| `@run-in` | 5.3+ |\n| `GM_setValues/getValues` | 5.3+ |\n\n```javascript\n// Check Tampermonkey version\nconst version = GM_info.version;\nconsole.log('Tampermonkey version:', version);\n\n// Feature detection is safer than version checking\nif (typeof GM_audio !== 'undefined') {\n    // Use GM_audio\n}\n```\n",
        "plugins/productivity/skills/tampermonkey/references/common-pitfalls.md": "# Common Userscript Pitfalls\n\nMistakes that break userscripts and how to avoid them.\n\n---\n\n## Pitfall 1: @match Too Broad\n\nRunning on every page slows the browser and causes unexpected behaviour.\n\n**Wrong:**\n```javascript\n// @match *://*/*\n// @match https://*/*\n```\n\n**Right:**\n```javascript\n// @match https://example.com/*\n// @match https://*.example.com/*\n```\n\n**Why it matters:** Overly broad patterns mean your script runs on thousands of sites, consuming memory and potentially breaking pages.\n\n---\n\n## Pitfall 2: Missing @connect\n\nCross-origin requests fail silently or show permission dialogs without @connect.\n\n**Wrong:**\n```javascript\n// @grant GM_xmlhttpRequest\n// No @connect declaration\n\nGM_xmlhttpRequest({\n    url: 'https://api.example.com/data',  // Will prompt or fail\n    ...\n});\n```\n\n**Right:**\n```javascript\n// @grant GM_xmlhttpRequest\n// @connect api.example.com\n\nGM_xmlhttpRequest({\n    url: 'https://api.example.com/data',  // Works\n    ...\n});\n```\n\n**Best practice:** Declare all known domains, then add `@connect *` as fallback.\n\n---\n\n## Pitfall 3: Not Waiting for Elements\n\nElements may not exist when your script runs, especially on SPAs.\n\n**Wrong:**\n```javascript\n// @run-at document-end\n\n// Element might not exist yet!\ndocument.querySelector('#dynamic-content').textContent = 'Modified';\n// TypeError: Cannot read property 'textContent' of null\n```\n\n**Right:**\n```javascript\n// Use waitForElement pattern\nasync function init() {\n    const element = await waitForElement('#dynamic-content');\n    element.textContent = 'Modified';\n}\n\nfunction waitForElement(selector, timeout = 10000) {\n    return new Promise((resolve, reject) => {\n        const el = document.querySelector(selector);\n        if (el) return resolve(el);\n\n        const observer = new MutationObserver((_, obs) => {\n            const el = document.querySelector(selector);\n            if (el) {\n                obs.disconnect();\n                resolve(el);\n            }\n        });\n\n        observer.observe(document.body, { childList: true, subtree: true });\n        setTimeout(() => {\n            observer.disconnect();\n            reject(new Error(`Timeout: ${selector}`));\n        }, timeout);\n    });\n}\n\ninit();\n```\n\n---\n\n## Pitfall 4: Blocking Async Operations\n\nGM_xmlhttpRequest is asynchronous - you can't use its return value directly.\n\n**Wrong:**\n```javascript\nconst response = GM_xmlhttpRequest({\n    method: 'GET',\n    url: 'https://api.example.com/data'\n});\nconsole.log(response.responseText);  // undefined!\n```\n\n**Right (callback):**\n```javascript\nGM_xmlhttpRequest({\n    method: 'GET',\n    url: 'https://api.example.com/data',\n    onload: function(response) {\n        console.log(response.responseText);  // Works\n    }\n});\n```\n\n**Right (async/await with GM.*):**\n```javascript\nconst response = await GM.xmlHttpRequest({\n    method: 'GET',\n    url: 'https://api.example.com/data'\n});\nconsole.log(response.responseText);  // Works\n```\n\n---\n\n## Pitfall 5: CSP Blocking Script Injection\n\nContent Security Policy blocks dynamically created scripts.\n\n**Wrong:**\n```javascript\nconst script = document.createElement('script');\nscript.textContent = 'console.log(\"blocked by CSP\")';\ndocument.head.appendChild(script);  // Blocked!\n```\n\n**Right:**\n```javascript\n// @grant GM_addElement\n\nGM_addElement('script', {\n    textContent: 'console.log(\"bypasses CSP\")'\n});\n```\n\n---\n\n## Pitfall 6: Sandbox Context Confusion\n\nWithout unsafeWindow, you can't access page variables.\n\n**Wrong:**\n```javascript\n// @grant none\n\n// Trying to access page's React app\nconsole.log(window.React);  // undefined in sandbox\n```\n\n**Right:**\n```javascript\n// @grant unsafeWindow\n\nconsole.log(unsafeWindow.React);  // Works\n```\n\n**Note:** `@grant none` disables the sandbox entirely (different approach).\n\n---\n\n## Pitfall 7: Memory Leaks in Observers\n\nMutationObservers that never disconnect consume memory.\n\n**Wrong:**\n```javascript\nconst observer = new MutationObserver(() => {\n    processNewContent();\n});\nobserver.observe(document.body, { childList: true, subtree: true });\n// Never disconnected - runs forever!\n```\n\n**Right:**\n```javascript\nconst observer = new MutationObserver(() => {\n    if (shouldStop()) {\n        observer.disconnect();\n        return;\n    }\n    processNewContent();\n});\nobserver.observe(document.body, { childList: true, subtree: true });\n\n// Or disconnect on page unload\nwindow.addEventListener('beforeunload', () => observer.disconnect());\n```\n\n---\n\n## Pitfall 8: Overly Aggressive DOM Modifications\n\nModifying the DOM too frequently causes performance issues.\n\n**Wrong:**\n```javascript\n// Runs on EVERY mutation\nconst observer = new MutationObserver(() => {\n    document.querySelectorAll('.item').forEach(el => {\n        el.style.color = 'red';  // Runs thousands of times\n    });\n});\n```\n\n**Right:**\n```javascript\n// Debounce modifications\nlet timeout;\nconst observer = new MutationObserver(() => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => {\n        document.querySelectorAll('.item:not(.processed)').forEach(el => {\n            el.style.color = 'red';\n            el.classList.add('processed');\n        });\n    }, 100);\n});\n```\n\n---\n\n## Pitfall 9: Forgetting Error Handling\n\nNetwork requests and async operations can fail.\n\n**Wrong:**\n```javascript\nGM_xmlhttpRequest({\n    url: 'https://api.example.com/data',\n    onload: (r) => {\n        const data = JSON.parse(r.responseText);  // Crashes if invalid JSON\n        process(data);\n    }\n});\n```\n\n**Right:**\n```javascript\nGM_xmlhttpRequest({\n    url: 'https://api.example.com/data',\n    onload: (r) => {\n        try {\n            const data = JSON.parse(r.responseText);\n            process(data);\n        } catch (e) {\n            console.error('Failed to parse response:', e);\n        }\n    },\n    onerror: (e) => {\n        console.error('Request failed:', e);\n    },\n    ontimeout: () => {\n        console.error('Request timed out');\n    }\n});\n```\n\n---\n\n## Pitfall 10: Global Variable Pollution\n\nVariables leak into page scope without IIFE wrapper.\n\n**Wrong:**\n```javascript\n// ==UserScript==\n// ...\n// ==/UserScript==\n\nvar myData = 'secret';  // Visible to page as window.myData!\nfunction process() { ... }  // Visible to page\n```\n\n**Right:**\n```javascript\n// ==UserScript==\n// ...\n// ==/UserScript==\n\n(function() {\n    'use strict';\n\n    var myData = 'secret';  // Private to script\n    function process() { ... }  // Private to script\n})();\n```\n\n---\n\n## Pitfall 11: Wrong Timing with @run-at\n\nScript runs before elements exist.\n\n**Wrong:**\n```javascript\n// @run-at document-start\n\ndocument.querySelector('#header').remove();  // null - DOM doesn't exist yet!\n```\n\n**Right:**\n```javascript\n// @run-at document-end\n\ndocument.querySelector('#header').remove();  // Works\n```\n\n**Or wait for DOM:**\n```javascript\n// @run-at document-start\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    document.querySelector('#header').remove();\n});\n```\n\n---\n\n## Pitfall 12: Cross-Browser Differences\n\nFirefox and Chrome behave differently.\n\n**Firefox-only features:**\n```javascript\n// cloneInto and exportFunction only exist in Firefox\nif (typeof cloneInto !== 'undefined') {\n    unsafeWindow.myData = cloneInto(data, unsafeWindow);\n} else {\n    unsafeWindow.myData = data;  // Chrome\n}\n```\n\n**Manifest V3 limitations (Chrome):**\n```javascript\n// @webRequest doesn't work in Chrome MV3\n// Use alternative approaches or inform user\n```\n\n---\n\n## Pitfall 13: Hardcoded Selectors\n\nPage structure changes break scripts.\n\n**Fragile:**\n```javascript\ndocument.querySelector('div.sc-1234abcd > div:nth-child(3) > span');\n```\n\n**Robust:**\n```javascript\n// Use stable attributes\ndocument.querySelector('[data-testid=\"username\"]');\ndocument.querySelector('[aria-label=\"Close\"]');\n\n// Or multiple fallbacks\nconst element = document.querySelector('#username') ||\n                document.querySelector('[data-user]') ||\n                document.querySelector('.profile-name');\n```\n\n---\n\n## Pitfall 14: Not Testing in Target Browser\n\nScripts that work in Chrome may break in Firefox.\n\n**Before deploying:**\n1. Test in Chrome\n2. Test in Firefox\n3. Test in private/incognito mode\n4. Test with page's CSP (disable extensions to check)\n\n---\n\n## Quick Diagnostic Checklist\n\nWhen a script doesn't work:\n\n```\n[ ] Console shows errors? (F12 â†’ Console)\n[ ] Script is enabled in Tampermonkey dashboard?\n[ ] @match pattern matches current URL?\n[ ] Required @grant statements present?\n[ ] @connect includes target domains?\n[ ] Element exists when script runs?\n[ ] Using async correctly (callbacks/await)?\n[ ] Browser-specific features used correctly?\n```\n",
        "plugins/productivity/skills/tampermonkey/references/debugging.md": "# Debugging Userscripts\n\nHow to troubleshoot and fix broken userscripts.\n\n---\n\n## Quick Diagnostic Checklist\n\nWhen a script doesn't work, check these first:\n\n```\n[ ] 1. Is the script enabled in Tampermonkey dashboard?\n[ ] 2. Does the @match pattern match the current URL?\n[ ] 3. Are there errors in the browser console? (F12)\n[ ] 4. Are all required @grant statements present?\n[ ] 5. Does @connect include all external domains?\n[ ] 6. Is the element present when the script runs?\n```\n\n---\n\n## Viewing Script Errors\n\n### Browser Console (Recommended)\n\n1. Press **F12** to open DevTools\n2. Go to **Console** tab\n3. Look for red error messages\n4. Filter by \"userscript\" if needed\n\n### Tampermonkey Dashboard\n\n1. Click Tampermonkey icon â†’ **Dashboard**\n2. Look for scripts with error indicators\n3. Click script name â†’ **Editor** to see inline errors\n\n---\n\n## Testing if Script Runs\n\n### Method 1: Alert (Most Obvious)\n\n```javascript\n// ==UserScript==\n// @name         Test Script\n// @match        https://example.com/*\n// ==/UserScript==\n\nalert('Script is running!');  // Will definitely show if script loads\n```\n\n### Method 2: Console Log\n\n```javascript\nconsole.log('=== USERSCRIPT LOADED ===');\nconsole.log('URL:', location.href);\nconsole.log('Time:', new Date().toISOString());\n```\n\n### Method 3: Visual Indicator\n\n```javascript\n// @grant GM_addStyle\n\nGM_addStyle(`\n    body::before {\n        content: 'Script Active';\n        position: fixed;\n        top: 0;\n        right: 0;\n        background: green;\n        color: white;\n        padding: 5px 10px;\n        z-index: 999999;\n        font-size: 12px;\n    }\n`);\n```\n\n---\n\n## Common Error Messages\n\n### \"Cannot read property 'X' of null\"\n\n**Cause:** Element doesn't exist when script runs.\n\n```javascript\n// Error\ndocument.querySelector('#missing').textContent = 'Hi';\n\n// Fix: Check if element exists\nconst el = document.querySelector('#missing');\nif (el) {\n    el.textContent = 'Hi';\n} else {\n    console.log('Element not found');\n}\n\n// Better fix: Wait for element\nwaitForElement('#missing').then(el => {\n    el.textContent = 'Hi';\n});\n```\n\n### \"GM_xxx is not defined\"\n\n**Cause:** Missing @grant statement.\n\n```javascript\n// Error - forgot @grant\nGM_setValue('key', 'value');  // ReferenceError\n\n// Fix - add @grant\n// @grant GM_setValue\nGM_setValue('key', 'value');  // Works\n```\n\n### \"Access to XMLHttpRequest blocked by CORS\"\n\n**Cause:** Using native fetch/XHR instead of GM_xmlhttpRequest.\n\n```javascript\n// Error - blocked by CORS\nfetch('https://api.example.com/data');\n\n// Fix - use GM_xmlhttpRequest\n// @grant GM_xmlhttpRequest\n// @connect api.example.com\n\nGM_xmlhttpRequest({\n    url: 'https://api.example.com/data',\n    onload: (r) => console.log(r.responseText)\n});\n```\n\n### \"Content Security Policy\" errors\n\n**Cause:** Site's CSP blocks inline scripts.\n\n```javascript\n// Error - blocked by CSP\nconst script = document.createElement('script');\nscript.textContent = 'console.log(\"blocked\")';\ndocument.head.appendChild(script);\n\n// Fix - use GM_addElement\n// @grant GM_addElement\nGM_addElement('script', {\n    textContent: 'console.log(\"works\")'\n});\n```\n\n---\n\n## Debugging Techniques\n\n### 1. Isolate the Problem\n\nComment out sections to find what's breaking:\n\n```javascript\nconsole.log('Step 1');\n// doSomething();\n\nconsole.log('Step 2');\n// doSomethingElse();\n\nconsole.log('Step 3');\n// maybeBroken();  // Uncomment one at a time\n```\n\n### 2. Log Variables\n\n```javascript\nconst element = document.querySelector('#target');\nconsole.log('Element:', element);\nconsole.log('Element exists:', !!element);\nconsole.log('Element HTML:', element?.outerHTML);\n```\n\n### 3. Breakpoints\n\n```javascript\n// Pause execution here\ndebugger;\n\n// Or set breakpoints in DevTools:\n// 1. F12 â†’ Sources tab\n// 2. Find your script (search for script name)\n// 3. Click line number to set breakpoint\n```\n\n### 4. Network Tab\n\nFor GM_xmlhttpRequest issues:\n\n1. F12 â†’ **Network** tab\n2. Look for your request\n3. Check **Headers**, **Response**, **Timing**\n4. Red = failed request\n\n### 5. Test @match Pattern\n\n```javascript\n// Log when script runs to verify @match\nconsole.log('Script matched:', location.href);\n\n// Test pattern manually:\n// @match https://example.com/*\n// Should match: https://example.com/page\n// Should NOT match: https://other.com/example.com\n```\n\n---\n\n## Debugging Async Code\n\n### Problem: Callback Not Firing\n\n```javascript\nGM_xmlhttpRequest({\n    url: 'https://api.example.com/data',\n    onload: (response) => {\n        console.log('Response received');  // Never logs\n    }\n});\n\n// Debug: Add all callbacks\nGM_xmlhttpRequest({\n    url: 'https://api.example.com/data',\n    onload: (r) => console.log('Success:', r.status),\n    onerror: (e) => console.log('Error:', e),\n    ontimeout: () => console.log('Timeout'),\n    onabort: () => console.log('Aborted')\n});\n```\n\n### Problem: Promise Never Resolves\n\n```javascript\n// Stuck promise\nconst data = await someAsyncFunction();  // Never continues\n\n// Debug: Add timeout\nconst data = await Promise.race([\n    someAsyncFunction(),\n    new Promise((_, reject) =>\n        setTimeout(() => reject(new Error('Timeout after 10s')), 10000)\n    )\n]);\n```\n\n---\n\n## Debugging Element Waiting\n\n### Check if Element Ever Appears\n\n```javascript\n// Watch for element in console\nconst observer = new MutationObserver((mutations) => {\n    const el = document.querySelector('#target');\n    if (el) {\n        console.log('FOUND:', el);\n        observer.disconnect();\n    }\n});\nobserver.observe(document.body, { childList: true, subtree: true });\n\n// After 30 seconds, report if not found\nsetTimeout(() => {\n    if (document.querySelector('#target') === null) {\n        console.log('Element never appeared after 30s');\n        console.log('Current DOM:', document.body.innerHTML.substring(0, 1000));\n    }\n}, 30000);\n```\n\n---\n\n## Debugging Storage\n\n### Verify Values Are Saved\n\n```javascript\n// Save\nGM_setValue('test', { foo: 'bar' });\nconsole.log('Saved');\n\n// Read back immediately\nconst value = GM_getValue('test');\nconsole.log('Retrieved:', value);\nconsole.log('Type:', typeof value);\n\n// List all keys\nconst keys = GM_listValues();\nconsole.log('All keys:', keys);\n```\n\n### Clear Storage for Fresh Start\n\n```javascript\n// Delete all stored values\nGM_listValues().forEach(key => {\n    console.log('Deleting:', key);\n    GM_deleteValue(key);\n});\n```\n\n---\n\n## Browser-Specific Debugging\n\n### Chrome DevTools Tips\n\n- **Sources** â†’ **Content Scripts** shows userscripts\n- **Application** â†’ **Storage** shows extension data\n- Use **Snippets** to test code quickly\n\n### Firefox DevTools Tips\n\n- **Debugger** â†’ Search for script name\n- About:debugging â†’ This Firefox â†’ Tampermonkey â†’ Inspect\n- Firefox shows better error messages for cloneInto issues\n\n---\n\n## Getting Help\n\nIf you can't solve the issue:\n\n1. **Check Tampermonkey forums** - Search for similar issues\n2. **Provide minimal reproduction** - Smallest script that shows the bug\n3. **Include browser/TM version** - Found in GM_info\n4. **Share console errors** - Copy the exact error message\n\n```javascript\n// Get debug info to share\nconsole.log('Browser:', navigator.userAgent);\nconsole.log('Tampermonkey:', GM_info.version);\nconsole.log('Script:', GM_info.script.name, GM_info.script.version);\n```\n",
        "plugins/productivity/skills/tampermonkey/references/header-reference.md": "# Tampermonkey Header Tags Reference\n\nComplete documentation for all userscript header tags.\n\n## Metadata Block Format\n\n```javascript\n// ==UserScript==\n// @tag value\n// ==/UserScript==\n```\n\n---\n\n## Script Identity\n\n### @name\n\nThe script's display name. Supports internationalisation.\n\n```javascript\n// @name         My Awesome Script\n// @name:de      Mein tolles Skript\n// @name:fr      Mon script gÃ©nial\n// @name:ja      ç§ã®ç´ æ™´ã‚‰ã—ã„ã‚¹ã‚¯ãƒªãƒ—ãƒˆ\n```\n\n### @namespace\n\nUnique identifier namespace, typically a URL you control.\n\n```javascript\n// @namespace    https://yoursite.com/userscripts\n```\n\n### @version\n\nScript version for update checking. Must increase with each update.\n\n```javascript\n// @version      1.0.0\n// @version      2.3.1-beta\n// @version      2024-01-15\n```\n\n**See:** [version-numbering.md](version-numbering.md) for comparison rules.\n\n### @description\n\nBrief description of what the script does. Supports i18n.\n\n```javascript\n// @description       Enhances the user interface with dark mode\n// @description:de    Verbessert die BenutzeroberflÃ¤che mit Dunkelmodus\n```\n\n### @author\n\nThe script author's name.\n\n```javascript\n// @author       John Doe\n```\n\n### @copyright\n\nCopyright statement shown in the script editor.\n\n```javascript\n// @copyright    2024, John Doe (https://example.com)\n```\n\n### @homepage, @homepageURL, @website, @source\n\nLink to the script's homepage (all are aliases).\n\n```javascript\n// @homepage     https://github.com/user/repo\n// @supportURL   https://github.com/user/repo/issues\n```\n\n### @supportURL\n\nURL for users to report issues.\n\n```javascript\n// @supportURL   https://github.com/user/repo/issues\n```\n\n---\n\n## Icons\n\n### @icon, @iconURL, @defaulticon\n\nScript icon (low resolution).\n\n```javascript\n// @icon         https://example.com/icon.png\n// @icon         data:image/png;base64,iVBORw0...\n```\n\n### @icon64, @icon64URL\n\nScript icon at 64x64 pixels. Used at various places in the options page.\n\n```javascript\n// @icon64       https://example.com/icon64.png\n```\n\n---\n\n## URL Matching\n\n### @match\n\nSpecify pages where the script runs. Uses match patterns.\n\n**Pattern format:** `<scheme>://<host><path>`\n\n```javascript\n// Match all pages on example.com\n// @match        https://example.com/*\n\n// Match any subdomain\n// @match        https://*.example.com/*\n\n// Match all HTTPS sites\n// @match        https://*/*\n\n// Match HTTP and HTTPS\n// @match        *://example.com/*\n\n// Match specific paths\n// @match        https://example.com/page/*/details\n\n// Multiple matches (use multiple tags)\n// @match        https://example.com/*\n// @match        https://other.com/*\n```\n\n**Special patterns:**\n- `*` in scheme matches http or https\n- `*` in host matches any subdomain\n- `*` in path matches any characters\n\n### @include\n\nLegacy matching with glob patterns and regex support.\n\n```javascript\n// Glob patterns\n// @include      https://example.com/*\n// @include      *://*.example.com/*\n\n// Regular expression (wrapped in //)\n// @include      /^https:\\/\\/www\\.example\\.com\\/page\\/\\d+$/\n```\n\n**Note:** @include with `://` is interpreted like @match. Use @match for new scripts.\n\n### @exclude\n\nExclude URLs even if matched by @match or @include.\n\n```javascript\n// @match        https://example.com/*\n// @exclude      https://example.com/admin/*\n// @exclude      https://example.com/api/*\n```\n\n---\n\n## Execution Control\n\n### @run-at\n\nWhen to inject the script.\n\n| Value | Description |\n|-------|-------------|\n| `document-start` | Inject as early as possible, before DOM |\n| `document-body` | Inject when body element exists |\n| `document-end` | Inject at/after DOMContentLoaded |\n| `document-idle` | Inject after DOMContentLoaded (default) |\n| `context-menu` | Inject when clicked in browser context menu |\n\n```javascript\n// @run-at       document-start\n// @run-at       document-idle\n// @run-at       context-menu\n```\n\n**Note:** With `context-menu`, @include and @exclude are ignored.\n\n### @run-in (v5.3+)\n\nControl browser context (normal vs incognito tabs).\n\n```javascript\n// Only in normal tabs\n// @run-in       normal-tabs\n\n// Only in incognito/private mode\n// @run-in       incognito-tabs\n\n// Firefox containers\n// @run-in       container-id-2\n// @run-in       container-id-3\n```\n\nDefault: Runs in all tabs if not specified.\n\n### @noframes\n\nOnly run on main page, not in iframes.\n\n```javascript\n// @noframes\n```\n\n---\n\n## Permissions and Security\n\n### @grant\n\nWhitelist GM_* functions and special window features.\n\n```javascript\n// GM functions\n// @grant        GM_setValue\n// @grant        GM_getValue\n// @grant        GM_xmlhttpRequest\n// @grant        GM_addStyle\n// @grant        GM_notification\n\n// Special window access\n// @grant        unsafeWindow\n// @grant        window.close\n// @grant        window.focus\n// @grant        window.onurlchange\n\n// Disable sandbox (no GM_* except GM_info)\n// @grant        none\n```\n\n### @sandbox (v4.18+)\n\nControl script injection context.\n\n| Value | Behaviour |\n|-------|-----------|\n| `raw` | Run in page context (MAIN_WORLD) - default |\n| `JavaScript` | Need unsafeWindow access, may use USERSCRIPT_WORLD |\n| `DOM` | Only need DOM access, may use ISOLATED_WORLD |\n\n```javascript\n// @sandbox      JavaScript\n// @sandbox      DOM\n// @sandbox      raw\n```\n\n**See:** [sandbox-modes.md](sandbox-modes.md) for details.\n\n### @connect\n\nWhitelist domains for GM_xmlhttpRequest.\n\n```javascript\n// @connect      api.example.com\n// @connect      *.googleapis.com\n// @connect      self\n// @connect      localhost\n// @connect      127.0.0.1\n// @connect      *\n```\n\n**Best practice:** Declare known domains explicitly, add `*` to offer \"allow all\" option.\n\n### @antifeature\n\nDisclose monetisation (required by GreasyFork).\n\n```javascript\n// @antifeature       ads         We show advertisements\n// @antifeature       tracking    Analytics included\n// @antifeature       miner       Uses crypto mining\n// @antifeature:de    ads         Wir zeigen Werbung an\n```\n\n---\n\n## External Resources\n\n### @require\n\nLoad external JavaScript before script runs.\n\n```javascript\n// External URLs\n// @require      https://code.jquery.com/jquery-3.6.0.min.js\n// @require      https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js\n\n// With integrity hash (SRI)\n// @require      https://code.jquery.com/jquery-3.6.0.min.js#sha256-/xUj+3OJU...\n\n// Multiple hashes\n// @require      https://example.com/lib.js#md5=abc123,sha256=def456\n\n// Built-in vendor libraries\n// @require      tampermonkey://vendor/jquery.js\n// @require      tampermonkey://vendor/jszip/jszip.js\n```\n\n### @resource\n\nPreload resources accessible via GM_getResourceText/GM_getResourceURL.\n\n```javascript\n// @resource     myCSS    https://example.com/style.css\n// @resource     myIcon   https://example.com/icon.png\n// @resource     myData   https://example.com/data.json\n\n// With integrity hash\n// @resource     secure   https://example.com/file.js#sha256=abc123\n```\n\n---\n\n## Updates\n\n### @updateURL\n\nURL to check for updates (requires @version).\n\n```javascript\n// @updateURL    https://example.com/script.meta.js\n```\n\n### @downloadURL\n\nURL to download updates from. Use `none` to disable.\n\n```javascript\n// @downloadURL  https://example.com/script.user.js\n// @downloadURL  none\n```\n\n---\n\n## Web Request Interception\n\n### @webRequest\n\nDefine request interception rules (experimental, MV2 only).\n\n```javascript\n// @webRequest   {\"selector\": \"*://ads.example.com/*\", \"action\": \"cancel\"}\n// @webRequest   {\"selector\": {\"include\": \"*tracking*\"}, \"action\": {\"redirect\": \"https://example.com/blocked\"}}\n```\n\n---\n\n## Miscellaneous\n\n### @tag (v5.0+)\n\nAdd categorisation tags visible in script list.\n\n```javascript\n// @tag          productivity\n// @tag          social-media\n// @tag          utility\n```\n\n### @unwrap\n\nInject script without wrapper/sandbox (for Scriptlets).\n\n```javascript\n// @unwrap\n```\n\n---\n\n## Subresource Integrity (SRI)\n\nEnsure external resources haven't been tampered with.\n\n**Supported hash algorithms:**\n- SHA-256 (native)\n- MD5 (native)\n- SHA-1, SHA-384, SHA-512 (require window.crypto)\n\n**Formats:**\n- Hex: `#sha256=e3b0c44298fc1c149...`\n- Base64: `#sha256-47DEQpj8HBSa+/TImW...`\n\n```javascript\n// Single hash\n// @require      https://example.com/lib.js#sha256=abc123def456...\n\n// Multiple hashes (last supported one used)\n// @require      https://example.com/lib.js#md5=abc,sha256=def\n```\n",
        "plugins/productivity/skills/tampermonkey/references/http-requests.md": "# HTTP Requests API Reference\n\nDocumentation for GM_xmlhttpRequest - cross-origin HTTP requests.\n\n---\n\n## Overview\n\nGM_xmlhttpRequest allows userscripts to make HTTP requests to any domain, bypassing the browser's same-origin policy. This is one of the most powerful Tampermonkey APIs.\n\n---\n\n## Required Setup\n\n```javascript\n// @grant GM_xmlhttpRequest\n// @connect api.example.com\n// @connect *.googleapis.com\n```\n\n**Important:** Always declare domains with `@connect`. Without it, users get permission dialogs or requests fail.\n\n---\n\n## Basic Examples\n\n### GET Request\n\n```javascript\nGM_xmlhttpRequest({\n    method: 'GET',\n    url: 'https://api.example.com/data',\n    onload: function(response) {\n        console.log('Status:', response.status);\n        console.log('Response:', response.responseText);\n    },\n    onerror: function(error) {\n        console.error('Request failed');\n    }\n});\n```\n\n### POST Request with JSON\n\n```javascript\nGM_xmlhttpRequest({\n    method: 'POST',\n    url: 'https://api.example.com/submit',\n    headers: {\n        'Content-Type': 'application/json',\n        'Accept': 'application/json'\n    },\n    data: JSON.stringify({\n        name: 'John',\n        email: 'john@example.com'\n    }),\n    onload: function(response) {\n        const result = JSON.parse(response.responseText);\n        console.log('Success:', result);\n    }\n});\n```\n\n---\n\n## Full Options Reference\n\n```javascript\nGM_xmlhttpRequest({\n    // Request configuration\n    method: 'POST',                    // GET, HEAD, POST, PUT, DELETE, PATCH\n    url: 'https://api.example.com/',   // Target URL (or Blob/File v5.4.6226+)\n    headers: {                         // Custom headers\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer token123',\n        'X-Custom-Header': 'value'\n    },\n    data: 'request body',              // String, Blob, File, FormData, URLSearchParams\n\n    // Request modifiers\n    timeout: 30000,                    // Timeout in milliseconds\n    binary: false,                     // Send data in binary mode\n    nocache: false,                    // Don't cache the resource\n    revalidate: false,                 // Revalidate cached content\n    anonymous: false,                  // Don't send cookies (enforces fetch mode)\n    fetch: false,                      // Use fetch instead of XMLHttpRequest\n\n    // Authentication\n    user: 'username',                  // Basic auth username\n    password: 'password',              // Basic auth password\n    cookie: 'name=value',              // Cookie to include\n    cookiePartition: {                 // Partitioned cookies (v5.2+)\n        topLevelSite: 'https://example.com'\n    },\n\n    // Response handling\n    responseType: 'json',              // arraybuffer, blob, json, stream\n    overrideMimeType: 'text/plain',    // Override response MIME type\n\n    // Redirect handling (v6180+)\n    redirect: 'follow',                // follow, error, manual\n\n    // Context for callbacks\n    context: { custom: 'data' },       // Passed to response object\n\n    // Proxy (Firefox only v5.5.6233+)\n    proxy: {\n        type: 'http',                  // direct, http, https, socks, socks4\n        host: 'proxy.example.com',\n        port: 8080,\n        username: 'proxyuser',\n        password: 'proxypass',\n        proxyDNS: true,\n        failoverTimeout: 5,\n        proxyAuthorizationHeader: 'Basic ...',\n        connectionIsolationKey: 'key'\n    },\n\n    // Callbacks\n    onload: function(response) {},\n    onerror: function(response) {},\n    onabort: function(response) {},\n    ontimeout: function(response) {},\n    onprogress: function(progress) {},\n    onreadystatechange: function(response) {},\n    onloadstart: function(response) {}  // For stream responseType\n});\n```\n\n---\n\n## Response Object\n\n```javascript\nonload: function(response) {\n    response.finalUrl;        // Final URL after redirects\n    response.readyState;      // XMLHttpRequest readyState (4 = DONE)\n    response.status;          // HTTP status code (200, 404, etc.)\n    response.statusText;      // HTTP status text (\"OK\", \"Not Found\")\n    response.responseHeaders; // Response headers as string\n    response.response;        // Parsed response (if responseType set)\n    response.responseText;    // Raw response text\n    response.responseXML;     // Parsed XML (if applicable)\n    response.context;         // Custom context from request\n}\n```\n\n---\n\n## @connect Directive\n\nWhitelist domains for GM_xmlhttpRequest.\n\n```javascript\n// Specific domain (includes subdomains)\n// @connect api.example.com\n\n// Subdomain pattern\n// @connect *.googleapis.com\n\n// Current page's domain\n// @connect self\n\n// Localhost\n// @connect localhost\n// @connect 127.0.0.1\n\n// Any IP address\n// @connect 192.168.1.1\n\n// Allow all (prompts user)\n// @connect *\n```\n\n**Best practice:**\n1. Declare all known domains explicitly\n2. Add `@connect *` as fallback for \"allow all\" option\n3. Both initial URL and final URL (after redirects) are checked\n\n---\n\n## Advanced Features\n\n### Aborting Requests\n\n```javascript\nconst request = GM_xmlhttpRequest({\n    method: 'GET',\n    url: 'https://api.example.com/large-file',\n    onload: response => console.log('Done'),\n    onabort: () => console.log('Aborted')\n});\n\n// Cancel after 5 seconds\nsetTimeout(() => request.abort(), 5000);\n```\n\n### Progress Tracking\n\n```javascript\nGM_xmlhttpRequest({\n    method: 'GET',\n    url: 'https://example.com/large-file.zip',\n    onprogress: function(progress) {\n        if (progress.lengthComputable) {\n            const percent = (progress.loaded / progress.total * 100).toFixed(2);\n            console.log(`Downloaded: ${percent}%`);\n        }\n    },\n    onload: response => console.log('Complete')\n});\n```\n\n### Streaming Response\n\n```javascript\nGM_xmlhttpRequest({\n    method: 'GET',\n    url: 'https://api.example.com/stream',\n    responseType: 'stream',\n    onloadstart: function(response) {\n        const reader = response.response.getReader();\n\n        function read() {\n            reader.read().then(({ done, value }) => {\n                if (done) return;\n                console.log('Chunk:', new TextDecoder().decode(value));\n                read();\n            });\n        }\n\n        read();\n    }\n});\n```\n\n---\n\n## Common Patterns\n\n### REST API Client\n\n```javascript\n// @grant GM_xmlhttpRequest\n// @connect api.example.com\n\nconst api = {\n    baseUrl: 'https://api.example.com',\n    token: null,\n\n    request(method, endpoint, data = null) {\n        return new Promise((resolve, reject) => {\n            GM_xmlhttpRequest({\n                method: method,\n                url: this.baseUrl + endpoint,\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': this.token ? `Bearer ${this.token}` : ''\n                },\n                data: data ? JSON.stringify(data) : null,\n                onload: response => {\n                    if (response.status >= 200 && response.status < 300) {\n                        resolve(JSON.parse(response.responseText));\n                    } else {\n                        reject(new Error(`HTTP ${response.status}`));\n                    }\n                },\n                onerror: reject\n            });\n        });\n    },\n\n    get(endpoint) { return this.request('GET', endpoint); },\n    post(endpoint, data) { return this.request('POST', endpoint, data); },\n    put(endpoint, data) { return this.request('PUT', endpoint, data); },\n    delete(endpoint) { return this.request('DELETE', endpoint); }\n};\n\n// Usage\napi.token = 'your-api-token';\napi.get('/users/123').then(user => console.log(user));\n```\n\n### Form Data Upload\n\n```javascript\nconst formData = new FormData();\nformData.append('file', blob, 'filename.txt');\nformData.append('description', 'My file');\n\nGM_xmlhttpRequest({\n    method: 'POST',\n    url: 'https://api.example.com/upload',\n    data: formData,\n    onload: response => console.log('Uploaded!')\n});\n```\n\n### Retry with Exponential Backoff\n\n```javascript\nfunction requestWithRetry(options, maxRetries = 3) {\n    return new Promise((resolve, reject) => {\n        let attempt = 0;\n\n        function tryRequest() {\n            GM_xmlhttpRequest({\n                ...options,\n                onload: resolve,\n                onerror: (error) => {\n                    if (++attempt < maxRetries) {\n                        const delay = Math.pow(2, attempt) * 1000;\n                        console.log(`Retry ${attempt} in ${delay}ms`);\n                        setTimeout(tryRequest, delay);\n                    } else {\n                        reject(error);\n                    }\n                }\n            });\n        }\n\n        tryRequest();\n    });\n}\n```\n\n### Handle Different Response Types\n\n```javascript\n// JSON response\nGM_xmlhttpRequest({\n    url: 'https://api.example.com/data.json',\n    responseType: 'json',\n    onload: r => console.log(r.response)  // Already parsed\n});\n\n// Binary data\nGM_xmlhttpRequest({\n    url: 'https://example.com/image.png',\n    responseType: 'blob',\n    onload: response => {\n        const url = URL.createObjectURL(response.response);\n        img.src = url;\n    }\n});\n\n// ArrayBuffer\nGM_xmlhttpRequest({\n    url: 'https://example.com/data.bin',\n    responseType: 'arraybuffer',\n    onload: response => {\n        const view = new DataView(response.response);\n        console.log(view.getUint32(0));\n    }\n});\n```\n\n---\n\n## Async/Await Version\n\nUse GM.xmlHttpRequest (note uppercase H) for promises:\n\n```javascript\n// @grant GM.xmlHttpRequest\n// @connect api.example.com\n\ntry {\n    const response = await GM.xmlHttpRequest({\n        method: 'GET',\n        url: 'https://api.example.com/data'\n    });\n    const data = JSON.parse(response.responseText);\n    console.log(data);\n} catch (error) {\n    console.error('Request failed:', error);\n}\n```\n\nThe promise also has an `abort()` function:\n\n```javascript\nconst request = GM.xmlHttpRequest({\n    method: 'GET',\n    url: 'https://api.example.com/large-file'\n});\n\n// Cancel after 5 seconds\nsetTimeout(() => request.abort(), 5000);\n\ntry {\n    const response = await request;\n} catch (error) {\n    console.log('Request was aborted or failed');\n}\n```\n\n---\n\n## Error Handling\n\nAlways include error handlers:\n\n```javascript\nGM_xmlhttpRequest({\n    url: 'https://api.example.com/data',\n    onload: (response) => {\n        if (response.status >= 200 && response.status < 300) {\n            try {\n                const data = JSON.parse(response.responseText);\n                processData(data);\n            } catch (e) {\n                console.error('Invalid JSON:', e);\n            }\n        } else {\n            console.error('HTTP error:', response.status, response.statusText);\n        }\n    },\n    onerror: (error) => {\n        console.error('Network error:', error);\n    },\n    ontimeout: () => {\n        console.error('Request timed out');\n    }\n});\n```\n",
        "plugins/productivity/skills/tampermonkey/references/patterns.md": "# Tampermonkey Common Patterns\n\nReusable patterns and templates for common userscript tasks.\n\n---\n\n## Page Load Detection\n\n### Wait for DOM Ready\n\n```javascript\n// For @run-at document-start scripts\nif (document.readyState === 'loading') {\n    document.addEventListener('DOMContentLoaded', init);\n} else {\n    init();\n}\n\nfunction init() {\n    console.log('DOM is ready');\n}\n```\n\n### Wait for Specific Element\n\n```javascript\nfunction waitForElement(selector, timeout = 10000) {\n    return new Promise((resolve, reject) => {\n        // Check if already exists\n        const existing = document.querySelector(selector);\n        if (existing) return resolve(existing);\n\n        // Set up observer\n        const observer = new MutationObserver((mutations, obs) => {\n            const element = document.querySelector(selector);\n            if (element) {\n                obs.disconnect();\n                resolve(element);\n            }\n        });\n\n        observer.observe(document.documentElement, {\n            childList: true,\n            subtree: true\n        });\n\n        // Timeout\n        setTimeout(() => {\n            observer.disconnect();\n            reject(new Error(`Timeout waiting for ${selector}`));\n        }, timeout);\n    });\n}\n\n// Usage\nwaitForElement('#main-content').then(el => {\n    console.log('Found element:', el);\n}).catch(err => {\n    console.log('Element not found:', err);\n});\n```\n\n### Wait for Multiple Elements\n\n```javascript\nasync function waitForElements(selectors, timeout = 10000) {\n    const results = {};\n    await Promise.all(selectors.map(async selector => {\n        results[selector] = await waitForElement(selector, timeout);\n    }));\n    return results;\n}\n\n// Usage\nconst elements = await waitForElements(['#header', '#footer', '.sidebar']);\n```\n\n---\n\n## DOM Mutation Observation\n\n### Watch for Dynamic Content\n\n```javascript\nfunction observeDOM(targetSelector, callback, options = {}) {\n    const target = document.querySelector(targetSelector) || document.body;\n\n    const observer = new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type === 'childList') {\n                mutation.addedNodes.forEach(node => {\n                    if (node.nodeType === Node.ELEMENT_NODE) {\n                        callback(node, 'added');\n                    }\n                });\n            }\n        }\n    });\n\n    observer.observe(target, {\n        childList: true,\n        subtree: true,\n        ...options\n    });\n\n    return observer;\n}\n\n// Usage - watch for new posts\nobserveDOM('#feed', (node, action) => {\n    if (node.matches('.post')) {\n        console.log('New post added:', node);\n        processPost(node);\n    }\n});\n```\n\n### Debounced Observer\n\n```javascript\nfunction observeDOMDebounced(target, callback, delay = 100) {\n    let timeout;\n\n    const observer = new MutationObserver(() => {\n        clearTimeout(timeout);\n        timeout = setTimeout(callback, delay);\n    });\n\n    observer.observe(target, { childList: true, subtree: true });\n    return observer;\n}\n\n// Usage - process changes once they settle\nobserveDOMDebounced(document.body, () => {\n    console.log('DOM changes settled');\n    processPage();\n});\n```\n\n---\n\n## SPA Navigation Handling\n\n### URL Change Detection\n\n```javascript\n// @grant window.onurlchange\n\nlet currentUrl = location.href;\n\nfunction handleUrlChange() {\n    if (location.href !== currentUrl) {\n        currentUrl = location.href;\n        console.log('URL changed:', currentUrl);\n        onPageChange();\n    }\n}\n\n// Method 1: window.onurlchange (if granted)\nif (window.onurlchange === null) {\n    window.addEventListener('urlchange', handleUrlChange);\n}\n\n// Method 2: History API interception\nconst originalPushState = history.pushState;\nconst originalReplaceState = history.replaceState;\n\nhistory.pushState = function() {\n    originalPushState.apply(this, arguments);\n    handleUrlChange();\n};\n\nhistory.replaceState = function() {\n    originalReplaceState.apply(this, arguments);\n    handleUrlChange();\n};\n\nwindow.addEventListener('popstate', handleUrlChange);\n```\n\n### Route-Based Handlers\n\n```javascript\nconst routes = {\n    '/': homeHandler,\n    '/profile': profileHandler,\n    '/settings': settingsHandler,\n    '/post/:id': postHandler\n};\n\nfunction matchRoute(path) {\n    for (const [pattern, handler] of Object.entries(routes)) {\n        const regex = new RegExp('^' + pattern.replace(/:(\\w+)/g, '(?<$1>[^/]+)') + '$');\n        const match = path.match(regex);\n        if (match) {\n            return { handler, params: match.groups || {} };\n        }\n    }\n    return null;\n}\n\nfunction onPageChange() {\n    const route = matchRoute(location.pathname);\n    if (route) {\n        route.handler(route.params);\n    }\n}\n\nfunction postHandler(params) {\n    console.log('Viewing post:', params.id);\n}\n```\n\n---\n\n## Element Manipulation\n\n### Inject HTML\n\n```javascript\nfunction injectHTML(targetSelector, html, position = 'beforeend') {\n    const target = document.querySelector(targetSelector);\n    if (target) {\n        target.insertAdjacentHTML(position, html);\n    }\n}\n\n// Positions: beforebegin, afterbegin, beforeend, afterend\ninjectHTML('#container', '<div class=\"injected\">Hello</div>', 'afterbegin');\n```\n\n### Remove Elements\n\n```javascript\nfunction removeElements(selector) {\n    document.querySelectorAll(selector).forEach(el => el.remove());\n}\n\n// Hide elements with CSS (faster, reversible)\nfunction hideElements(selector) {\n    GM_addStyle(`${selector} { display: none !important; }`);\n}\n\n// Usage\nremoveElements('.ads, .sponsored, .promoted');\nhideElements('[data-ad], .advertisement');\n```\n\n### Replace Text\n\n```javascript\nfunction replaceText(find, replace, root = document.body) {\n    const walker = document.createTreeWalker(\n        root,\n        NodeFilter.SHOW_TEXT,\n        null,\n        false\n    );\n\n    const textNodes = [];\n    while (walker.nextNode()) {\n        textNodes.push(walker.currentNode);\n    }\n\n    textNodes.forEach(node => {\n        if (node.nodeValue.includes(find)) {\n            node.nodeValue = node.nodeValue.replace(new RegExp(find, 'g'), replace);\n        }\n    });\n}\n\n// Usage\nreplaceText('old term', 'new term');\n```\n\n---\n\n## Form Enhancement\n\n### Auto-Fill Forms\n\n```javascript\nfunction autoFill(fieldValues) {\n    for (const [selector, value] of Object.entries(fieldValues)) {\n        const field = document.querySelector(selector);\n        if (field) {\n            field.value = value;\n            // Trigger change event for reactive frameworks\n            field.dispatchEvent(new Event('input', { bubbles: true }));\n            field.dispatchEvent(new Event('change', { bubbles: true }));\n        }\n    }\n}\n\n// Usage\nautoFill({\n    '#email': 'user@example.com',\n    '#name': 'John Doe',\n    'input[name=\"phone\"]': '555-1234'\n});\n```\n\n### Form Validation Enhancement\n\n```javascript\nfunction enhanceValidation(formSelector) {\n    const form = document.querySelector(formSelector);\n    if (!form) return;\n\n    form.addEventListener('submit', (e) => {\n        const email = form.querySelector('[type=\"email\"]');\n        const password = form.querySelector('[type=\"password\"]');\n\n        let valid = true;\n\n        if (email && !email.value.includes('@')) {\n            showError(email, 'Invalid email address');\n            valid = false;\n        }\n\n        if (password && password.value.length < 8) {\n            showError(password, 'Password must be at least 8 characters');\n            valid = false;\n        }\n\n        if (!valid) {\n            e.preventDefault();\n        }\n    });\n}\n\nfunction showError(field, message) {\n    let error = field.nextElementSibling;\n    if (!error || !error.classList.contains('field-error')) {\n        error = document.createElement('span');\n        error.className = 'field-error';\n        error.style.color = 'red';\n        field.parentNode.insertBefore(error, field.nextSibling);\n    }\n    error.textContent = message;\n}\n```\n\n---\n\n## Keyboard Shortcuts\n\n### Simple Keyboard Handler\n\n```javascript\ndocument.addEventListener('keydown', (e) => {\n    // Ignore when typing in inputs\n    if (e.target.matches('input, textarea, [contenteditable]')) return;\n\n    // Ctrl+Shift+S\n    if (e.ctrlKey && e.shiftKey && e.key === 'S') {\n        e.preventDefault();\n        saveAction();\n    }\n\n    // Alt+D\n    if (e.altKey && e.key === 'd') {\n        e.preventDefault();\n        toggleDarkMode();\n    }\n});\n```\n\n### Keyboard Shortcut Manager\n\n```javascript\nconst shortcuts = new Map();\n\nfunction registerShortcut(combo, callback, description) {\n    shortcuts.set(combo.toLowerCase(), { callback, description });\n}\n\ndocument.addEventListener('keydown', (e) => {\n    if (e.target.matches('input, textarea, [contenteditable]')) return;\n\n    const parts = [];\n    if (e.ctrlKey) parts.push('ctrl');\n    if (e.altKey) parts.push('alt');\n    if (e.shiftKey) parts.push('shift');\n    parts.push(e.key.toLowerCase());\n\n    const combo = parts.join('+');\n    const shortcut = shortcuts.get(combo);\n\n    if (shortcut) {\n        e.preventDefault();\n        shortcut.callback();\n    }\n});\n\n// Usage\nregisterShortcut('ctrl+shift+d', toggleDarkMode, 'Toggle dark mode');\nregisterShortcut('alt+s', openSettings, 'Open settings');\n```\n\n---\n\n## Data Extraction\n\n### Table to Array\n\n```javascript\nfunction tableToArray(tableSelector) {\n    const table = document.querySelector(tableSelector);\n    if (!table) return [];\n\n    const headers = Array.from(table.querySelectorAll('th')).map(th => th.textContent.trim());\n    const rows = Array.from(table.querySelectorAll('tbody tr'));\n\n    return rows.map(row => {\n        const cells = Array.from(row.querySelectorAll('td'));\n        const obj = {};\n        cells.forEach((cell, i) => {\n            obj[headers[i] || `col${i}`] = cell.textContent.trim();\n        });\n        return obj;\n    });\n}\n\n// Usage\nconst data = tableToArray('#results-table');\nconsole.log(JSON.stringify(data, null, 2));\n```\n\n### Extract Links\n\n```javascript\nfunction extractLinks(selector = 'a[href]') {\n    return Array.from(document.querySelectorAll(selector)).map(a => ({\n        text: a.textContent.trim(),\n        href: a.href,\n        title: a.title || ''\n    }));\n}\n\n// Filter external links\nconst externalLinks = extractLinks().filter(link =>\n    !link.href.includes(location.hostname)\n);\n```\n\n---\n\n## Performance Patterns\n\n### Throttle Function\n\n```javascript\nfunction throttle(func, limit) {\n    let inThrottle;\n    return function(...args) {\n        if (!inThrottle) {\n            func.apply(this, args);\n            inThrottle = true;\n            setTimeout(() => inThrottle = false, limit);\n        }\n    };\n}\n\n// Usage\nconst throttledScroll = throttle(() => {\n    console.log('Scrolled');\n}, 100);\n\nwindow.addEventListener('scroll', throttledScroll);\n```\n\n### Debounce Function\n\n```javascript\nfunction debounce(func, wait) {\n    let timeout;\n    return function(...args) {\n        clearTimeout(timeout);\n        timeout = setTimeout(() => func.apply(this, args), wait);\n    };\n}\n\n// Usage\nconst debouncedSearch = debounce((query) => {\n    console.log('Searching:', query);\n}, 300);\n\ninput.addEventListener('input', (e) => debouncedSearch(e.target.value));\n```\n\n### Lazy Execution\n\n```javascript\nfunction lazyExecute(callback, delay = 0) {\n    if ('requestIdleCallback' in window) {\n        requestIdleCallback(callback);\n    } else {\n        setTimeout(callback, delay);\n    }\n}\n\n// Usage - run non-critical code when browser is idle\nlazyExecute(() => {\n    console.log('Running low-priority task');\n    collectAnalytics();\n});\n```\n\n---\n\n## Error Handling\n\n### Safe Wrapper\n\n```javascript\nfunction safe(fn, fallback = null) {\n    return function(...args) {\n        try {\n            return fn.apply(this, args);\n        } catch (error) {\n            console.error('Error in userscript:', error);\n            return fallback;\n        }\n    };\n}\n\n// Usage\nconst safeParseJSON = safe(JSON.parse, {});\nconst data = safeParseJSON(maybeInvalidJSON);\n```\n\n### Retry Pattern\n\n```javascript\nasync function retry(fn, maxAttempts = 3, delay = 1000) {\n    for (let attempt = 1; attempt <= maxAttempts; attempt++) {\n        try {\n            return await fn();\n        } catch (error) {\n            if (attempt === maxAttempts) throw error;\n            console.log(`Attempt ${attempt} failed, retrying...`);\n            await new Promise(r => setTimeout(r, delay * attempt));\n        }\n    }\n}\n\n// Usage\nconst data = await retry(() => fetchData(url), 3, 1000);\n```\n",
        "plugins/productivity/skills/tampermonkey/references/sandbox-modes.md": "# Tampermonkey Sandbox Modes\n\nUnderstanding script execution contexts and security sandboxing.\n\n---\n\n## Overview\n\nTampermonkey can inject userscripts into different execution contexts (worlds). The context affects:\n- What the script can access\n- Security isolation\n- CSP (Content Security Policy) restrictions\n- How to communicate with the page\n\n---\n\n## Execution Worlds\n\n### MAIN_WORLD (Page Context)\n\nScript runs in the same context as the page's JavaScript.\n\n**Pros:**\n- Direct access to page variables and functions\n- No need for unsafeWindow\n- Can modify page objects directly\n\n**Cons:**\n- Subject to page's CSP\n- Can be detected by the page\n- Security risks if page is malicious\n\n### ISOLATED_WORLD (Content Script Context)\n\nScript runs in an isolated context, separate from the page.\n\n**Pros:**\n- Protected from page scripts\n- Can't be detected easily\n- Safer execution\n\n**Cons:**\n- Cannot directly access page variables\n- Need unsafeWindow for page interaction\n- Some APIs may not work\n\n### USERSCRIPT_WORLD (Firefox Only)\n\nSpecial context created for userscripts, with enhanced capabilities.\n\n**Pros:**\n- Bypasses CSP\n- Better isolation than MAIN_WORLD\n- Supports document-start timing\n\n**Cons:**\n- Firefox only\n- Need cloneInto/exportFunction for page communication\n\n---\n\n## @sandbox Directive\n\nControl where your script runs using @sandbox.\n\n### @sandbox raw\n\nRequest to run in page context (MAIN_WORLD).\n\n```javascript\n// @sandbox raw\n\n// Direct page access\nconsole.log(window.pageVariable);  // Works\npageFunction();  // Works\n```\n\n**Use when:**\n- You need direct page variable access\n- Page CSP doesn't block inline scripts\n- You don't need isolation\n\n### @sandbox JavaScript\n\nRequest access to unsafeWindow. May use USERSCRIPT_WORLD on Firefox.\n\n```javascript\n// @sandbox JavaScript\n\n// Access page through unsafeWindow\nconsole.log(unsafeWindow.pageVariable);\nunsafeWindow.pageFunction();\n```\n\n**Use when:**\n- You need unsafeWindow access\n- You want CSP bypass (Firefox)\n- Default for most scripts needing page interaction\n\n### @sandbox DOM\n\nOnly need DOM access, no page JavaScript access.\n\n```javascript\n// @sandbox DOM\n\n// DOM access works\ndocument.querySelector('#element').textContent = 'Modified';\n\n// Page variables are NOT accessible\n// window.pageVariable is undefined\n```\n\n**Use when:**\n- Only modifying DOM/CSS\n- Don't need page JavaScript access\n- Want maximum isolation\n\n---\n\n## @grant none\n\nDisables the sandbox entirely.\n\n```javascript\n// @grant none\n\n// Runs in page context\n// No GM_* functions available (except GM_info)\nconsole.log(window.pageVariable);  // Direct access\n```\n\n**When to use:**\n- Simple scripts that don't need GM_* APIs\n- Direct page integration needed\n- Smallest footprint\n\n**What you lose:**\n- All GM_* functions (except GM_info)\n- Cross-origin requests\n- Persistent storage\n- CSP bypass\n\n---\n\n## Firefox: cloneInto and exportFunction\n\nWhen running in USERSCRIPT_WORLD, you need special functions to share data with the page.\n\n### cloneInto\n\nClone an object so the page can access it.\n\n```javascript\n// Share data with page\nconst data = { name: 'John', count: 42 };\nunsafeWindow.myData = cloneInto(data, unsafeWindow);\n\n// Clone with functions\nconst obj = { getValue: () => 42 };\nunsafeWindow.myObj = cloneInto(obj, unsafeWindow, { cloneFunctions: true });\n```\n\n### exportFunction\n\nExport a function so the page can call it.\n\n```javascript\n// Export a function\nfunction myHandler(arg) {\n    console.log('Called with:', arg);\n    return 'response';\n}\n\nunsafeWindow.myHandler = exportFunction(myHandler, unsafeWindow);\n\n// Page can now call: myHandler('hello')\n```\n\n### Complete Example\n\n```javascript\n// @sandbox JavaScript\n\n// Create an API for the page\nconst scriptAPI = {\n    version: '1.0.0',\n    getData: function() {\n        return GM_getValue('data', null);\n    },\n    setData: function(data) {\n        GM_setValue('data', data);\n    }\n};\n\n// Export to page\nif (typeof cloneInto !== 'undefined') {\n    // Firefox - need to export\n    unsafeWindow.ScriptAPI = cloneInto(scriptAPI, unsafeWindow, {\n        cloneFunctions: true\n    });\n} else {\n    // Chrome - direct assignment works\n    unsafeWindow.ScriptAPI = scriptAPI;\n}\n```\n\n---\n\n## Content Security Policy (CSP)\n\n### What CSP Blocks\n\nCSP can prevent:\n- Inline `<script>` tags\n- eval() and new Function()\n- Inline event handlers\n- Loading scripts from non-whitelisted domains\n\n### How Tampermonkey Bypasses CSP\n\n| Context | CSP Bypass |\n|---------|------------|\n| MAIN_WORLD | No - subject to CSP |\n| ISOLATED_WORLD | Partial - script runs, but injected scripts may be blocked |\n| USERSCRIPT_WORLD | Yes - bypasses CSP |\n\n### Techniques for CSP Issues\n\n**Use GM_addElement instead of createElement:**\n\n```javascript\n// This may be blocked by CSP:\nconst script = document.createElement('script');\nscript.textContent = 'console.log(\"blocked\")';\ndocument.head.appendChild(script);\n\n// This bypasses CSP:\nGM_addElement('script', {\n    textContent: 'console.log(\"works\")'\n});\n```\n\n**Use @require for external scripts:**\n\n```javascript\n// Instead of dynamically loading scripts, use @require\n// @require https://code.jquery.com/jquery-3.6.0.min.js\n```\n\n---\n\n## Content Script API Setting\n\nIn Tampermonkey settings, you can configure how scripts are injected:\n\n### Content Script (Default)\n\n- Scripts injected via content script API\n- Retrieved via messaging\n- No true document-start support\n\n### UserScripts API\n\n- Uses browser's UserScripts API\n- Chrome: via messaging, no document-start\n- Firefox: instant execution, document-start works\n\n### UserScripts API Dynamic\n\n- Both wrapper and script injected via API\n- True document-start support\n- Most compatible\n\n---\n\n## Detecting the Current Context\n\n```javascript\n// Check if in isolated world\nconst isIsolated = typeof cloneInto !== 'undefined';\n\n// Check sandbox mode from GM_info\nconsole.log('Sandbox mode:', GM_info.sandboxMode);\n// Values: 'js', 'raw', 'dom'\n\n// Check if page objects are directly accessible\nconst hasDirectAccess = window.somePageVariable !== undefined;\n```\n\n---\n\n## Best Practices\n\n### 1. Start with @sandbox DOM\n\nIf you only need DOM access, use the most restrictive mode:\n\n```javascript\n// @sandbox DOM\n// Most isolated, safest\n```\n\n### 2. Use @sandbox JavaScript for page interaction\n\n```javascript\n// @sandbox JavaScript\n// Access page via unsafeWindow\nconst pageData = unsafeWindow.APP_CONFIG;\n```\n\n### 3. Handle cross-browser differences\n\n```javascript\n// Works in all contexts\nfunction shareWithPage(name, value) {\n    if (typeof cloneInto !== 'undefined') {\n        // Firefox USERSCRIPT_WORLD\n        unsafeWindow[name] = cloneInto(value, unsafeWindow, {\n            cloneFunctions: true\n        });\n    } else {\n        // Chrome or MAIN_WORLD\n        unsafeWindow[name] = value;\n    }\n}\n```\n\n### 4. Test in multiple browsers\n\nDifferent browsers may behave differently. Test in:\n- Chrome (Manifest V3)\n- Firefox\n- Edge\n- Safari (if using Userscripts app)\n",
        "plugins/productivity/skills/tampermonkey/references/security-checklist.md": "# Security Checklist for Userscripts\n\nPre-delivery validation to ensure scripts are secure and well-formed.\n\n---\n\n## Critical Security Checks\n\nThese issues can expose users to serious risks.\n\n### 1. No Hardcoded Secrets\n\n**Check:** Script contains no API keys, tokens, or passwords.\n\n```javascript\n// DANGEROUS - exposed credentials\nconst API_KEY = 'sk-1234567890abcdef';\nconst AUTH_TOKEN = 'Bearer eyJhbGciOiJIUzI1NiIs...';\n\n// SAFE - user provides credentials\nconst API_KEY = GM_getValue('apiKey', '');\nif (!API_KEY) {\n    alert('Please set your API key in the script settings');\n}\n```\n\n### 2. @match Not Overly Broad\n\n**Check:** Script doesn't run on all websites unnecessarily.\n\n```javascript\n// DANGEROUS - runs everywhere\n// @match *://*/*\n// @match https://*/*\n\n// SAFE - specific targets\n// @match https://example.com/*\n// @match https://*.example.com/*\n```\n\n### 3. User Input Sanitised\n\n**Check:** User-provided data is sanitised before DOM insertion.\n\n```javascript\n// DANGEROUS - XSS vulnerability\nconst userInput = prompt('Enter name:');\nelement.innerHTML = `Hello, ${userInput}!`;  // Can inject HTML/JS\n\n// SAFE - use textContent\nelement.textContent = `Hello, ${userInput}!`;\n\n// SAFE - escape HTML\nfunction escapeHtml(text) {\n    const div = document.createElement('div');\n    div.textContent = text;\n    return div.innerHTML;\n}\nelement.innerHTML = `Hello, ${escapeHtml(userInput)}!`;\n```\n\n### 4. HTTPS for External Requests\n\n**Check:** All external URLs use HTTPS.\n\n```javascript\n// DANGEROUS - HTTP can be intercepted\n// @connect http://api.example.com\nGM_xmlhttpRequest({ url: 'http://api.example.com/data' });\n\n// SAFE - HTTPS encrypted\n// @connect api.example.com\nGM_xmlhttpRequest({ url: 'https://api.example.com/data' });\n```\n\n### 5. No eval() or new Function()\n\n**Check:** Script doesn't execute arbitrary code.\n\n```javascript\n// DANGEROUS - code injection risk\neval(userInput);\nnew Function(userInput)();\nsetTimeout(userInput, 1000);  // If userInput is a string\n\n// SAFE - use proper callbacks\nsetTimeout(() => doSomething(), 1000);\n```\n\n---\n\n## Header Validation\n\n### Required Headers\n\n```javascript\n// ==UserScript==\n// @name         âœ“ Descriptive and unique\n// @namespace    âœ“ Your unique identifier\n// @version      âœ“ Semantic version (1.0.0)\n// @description  âœ“ Clear description\n// @author       âœ“ Your name\n// @match        âœ“ Specific URL patterns\n// @grant        âœ“ Only needed permissions\n// ==/UserScript==\n```\n\n### Permission Minimisation\n\n**Check:** Only necessary @grant statements are included.\n\n```javascript\n// BAD - excessive permissions\n// @grant GM_setValue\n// @grant GM_getValue\n// @grant GM_xmlhttpRequest\n// @grant GM_notification\n// @grant unsafeWindow\n// @grant GM_download\n// @grant GM_cookie\n\n// GOOD - only what's needed\n// @grant GM_addStyle\n// (Script only modifies CSS)\n```\n\n### @connect Validation\n\n**Check:** All @connect domains are legitimate and expected.\n\n```javascript\n// Verify each domain is needed\n// @connect api.example.com      âœ“ Main API\n// @connect cdn.example.com      âœ“ CDN resources\n// @connect tracking.ads.com     âœ— Why is this here?\n```\n\n---\n\n## Code Quality Checks\n\n### 1. IIFE Wrapper\n\n**Check:** Script is wrapped to prevent global pollution.\n\n```javascript\n// REQUIRED\n(function() {\n    'use strict';\n    // Script code here\n})();\n```\n\n### 2. Error Handling\n\n**Check:** Async operations have error handlers.\n\n```javascript\n// BAD - no error handling\nGM_xmlhttpRequest({\n    url: 'https://api.example.com/data',\n    onload: (r) => process(JSON.parse(r.responseText))\n});\n\n// GOOD - comprehensive error handling\nGM_xmlhttpRequest({\n    url: 'https://api.example.com/data',\n    onload: (r) => {\n        try {\n            const data = JSON.parse(r.responseText);\n            process(data);\n        } catch (e) {\n            console.error('Parse error:', e);\n        }\n    },\n    onerror: (e) => console.error('Request failed:', e),\n    ontimeout: () => console.error('Request timed out')\n});\n```\n\n### 3. Null Checks\n\n**Check:** DOM queries check for null before use.\n\n```javascript\n// BAD - crashes if element missing\ndocument.querySelector('#target').click();\n\n// GOOD - safe access\nconst el = document.querySelector('#target');\nif (el) {\n    el.click();\n}\n\n// BETTER - optional chaining\ndocument.querySelector('#target')?.click();\n```\n\n---\n\n## Performance Checks\n\n### 1. No Infinite Loops\n\n**Check:** Loops have proper exit conditions.\n\n```javascript\n// DANGEROUS - potential infinite loop\nwhile (true) {\n    if (condition) break;\n}\n\n// SAFE - bounded iterations\nfor (let i = 0; i < 1000; i++) {\n    if (condition) break;\n}\n```\n\n### 2. Observer Cleanup\n\n**Check:** MutationObservers are disconnected when done.\n\n```javascript\n// BAD - runs forever\nconst observer = new MutationObserver(callback);\nobserver.observe(document.body, { childList: true, subtree: true });\n\n// GOOD - disconnects when appropriate\nconst observer = new MutationObserver((mutations, obs) => {\n    if (foundTarget) {\n        obs.disconnect();\n    }\n});\n```\n\n### 3. Debounced Operations\n\n**Check:** Frequent operations are throttled.\n\n```javascript\n// BAD - runs on every mutation\nobserver.observe(document.body, { childList: true, subtree: true });\n\n// GOOD - debounced\nlet timeout;\nconst observer = new MutationObserver(() => {\n    clearTimeout(timeout);\n    timeout = setTimeout(processChanges, 100);\n});\n```\n\n---\n\n## Pre-Delivery Checklist\n\nBefore returning a userscript, verify:\n\n### Critical (Must Pass)\n\n- [ ] No hardcoded API keys, tokens, or passwords\n- [ ] @match is specific (not `*://*/*`)\n- [ ] All external URLs use HTTPS\n- [ ] User input is sanitised before DOM insertion\n- [ ] No eval() or string-based setTimeout/setInterval\n\n### Important (Should Pass)\n\n- [ ] Wrapped in IIFE with 'use strict'\n- [ ] All @grant statements are necessary\n- [ ] @connect includes all external domains\n- [ ] Error handling for async operations\n- [ ] Null checks before DOM manipulation\n\n### Recommended (Nice to Have)\n\n- [ ] @version follows semantic versioning\n- [ ] MutationObservers are cleaned up\n- [ ] Frequent operations are debounced\n- [ ] Comments explain non-obvious code\n- [ ] Works in both Chrome and Firefox\n\n---\n\n## Security Red Flags\n\nImmediately question scripts that:\n\n| Red Flag | Concern |\n|----------|---------|\n| `@match *://*/*` | Why does it need to run everywhere? |\n| `@grant unsafeWindow` | Does it really need page context? |\n| `eval()` or `new Function()` | Code injection risk |\n| Hardcoded URLs to unknown domains | Data exfiltration? |\n| `@connect *` without explanation | Where is data going? |\n| Minified/obfuscated code | What is it hiding? |\n| Requests to IP addresses | Suspicious destination |\n| localStorage/cookie access without clear purpose | Data harvesting? |\n\n---\n\n## Safe Patterns\n\n### Safe Data Storage\n\n```javascript\n// Use GM storage, not localStorage\nGM_setValue('userPrefs', { theme: 'dark' });\nconst prefs = GM_getValue('userPrefs', {});\n```\n\n### Safe External Requests\n\n```javascript\n// Validate response before use\nGM_xmlhttpRequest({\n    url: 'https://api.example.com/data',\n    onload: (r) => {\n        if (r.status !== 200) {\n            console.error('Unexpected status:', r.status);\n            return;\n        }\n\n        let data;\n        try {\n            data = JSON.parse(r.responseText);\n        } catch (e) {\n            console.error('Invalid JSON');\n            return;\n        }\n\n        if (!data.expected_field) {\n            console.error('Missing expected field');\n            return;\n        }\n\n        process(data);\n    }\n});\n```\n\n### Safe DOM Insertion\n\n```javascript\n// Create elements programmatically\nconst div = document.createElement('div');\ndiv.textContent = userInput;  // Safe - no HTML parsing\ndiv.className = 'my-class';\ndocument.body.appendChild(div);\n```\n",
        "plugins/productivity/skills/tampermonkey/references/url-matching.md": "# URL Matching Patterns\n\nComplete guide to @match, @include, and @exclude patterns.\n\n---\n\n## @match (Recommended)\n\nThe modern, safer way to specify where scripts run.\n\n### Pattern Format\n\n```\n<scheme>://<host><path>\n```\n\n| Component | Description | Wildcards |\n|-----------|-------------|-----------|\n| `scheme` | Protocol (http, https, *) | `*` matches http or https |\n| `host` | Domain name | `*` matches any subdomain |\n| `path` | URL path | `*` matches any characters |\n\n### Common Patterns\n\n```javascript\n// Exact domain\n// @match https://example.com/*\n\n// All subdomains\n// @match https://*.example.com/*\n\n// Both HTTP and HTTPS\n// @match *://example.com/*\n\n// Specific path\n// @match https://example.com/app/*\n\n// Any page on any HTTPS site (use sparingly!)\n// @match https://*/*\n\n// Specific file\n// @match https://example.com/page.html\n```\n\n### Wildcard Rules\n\n| Pattern | Matches | Does NOT Match |\n|---------|---------|----------------|\n| `https://example.com/*` | example.com/page | sub.example.com |\n| `https://*.example.com/*` | sub.example.com | example.com |\n| `*://example.com/*` | http://example.com, https://example.com | ftp://example.com |\n| `https://example.com/app/*` | example.com/app/page | example.com/other |\n\n### Special Patterns\n\n```javascript\n// Match root domain AND all subdomains\n// @match https://example.com/*\n// @match https://*.example.com/*\n\n// Match specific subdomains only\n// @match https://www.example.com/*\n// @match https://api.example.com/*\n\n// Path with wildcard in middle\n// @match https://example.com/user/*/profile\n```\n\n---\n\n## @include (Legacy)\n\nMore flexible but less secure than @match. Supports glob patterns and regex.\n\n### Glob Patterns\n\n```javascript\n// Standard glob\n// @include https://example.com/*\n\n// Multiple wildcards\n// @include *://*.example.com/*\n\n// Match any TLD\n// @include https://example.*/*\n```\n\n### Regular Expressions\n\nWrap in forward slashes:\n\n```javascript\n// Match URLs containing \"example\"\n// @include /example/\n\n// Match specific pattern\n// @include /^https:\\/\\/www\\.example\\.com\\/page\\/\\d+$/\n\n// Case-insensitive\n// @include /example\\.com/i\n```\n\n### @include vs @match\n\n| Feature | @match | @include |\n|---------|--------|----------|\n| Security | Stricter | More permissive |\n| Regex support | No | Yes |\n| TLD wildcards | No | Yes (`example.*`) |\n| Recommended | Yes | Legacy |\n\n---\n\n## @exclude\n\nExclude URLs even if they match @match or @include.\n\n```javascript\n// Run on example.com except admin pages\n// @match https://example.com/*\n// @exclude https://example.com/admin/*\n// @exclude https://example.com/api/*\n\n// Exclude with regex\n// @exclude /example\\.com\\/private/\n\n// Exclude specific file\n// @exclude https://example.com/login.html\n```\n\n### Precedence\n\n1. @exclude is checked first\n2. If URL matches @exclude, script doesn't run\n3. Otherwise, @match/@include is checked\n\n---\n\n## Common Use Cases\n\n### Single Website\n\n```javascript\n// All pages on example.com\n// @match https://example.com/*\n// @match https://www.example.com/*\n```\n\n### Multiple Related Sites\n\n```javascript\n// Company's multiple domains\n// @match https://example.com/*\n// @match https://example.co.uk/*\n// @match https://example.de/*\n```\n\n### SaaS Application\n\n```javascript\n// Customer subdomains\n// @match https://*.example.com/*\n// @exclude https://api.example.com/*\n// @exclude https://static.example.com/*\n```\n\n### Social Media Platform\n\n```javascript\n// Multiple sections\n// @match https://twitter.com/*\n// @match https://x.com/*\n// @match https://mobile.twitter.com/*\n```\n\n### Development & Production\n\n```javascript\n// Both environments\n// @match https://example.com/*\n// @match https://staging.example.com/*\n// @match http://localhost:3000/*\n// @match http://127.0.0.1:3000/*\n```\n\n---\n\n## Testing Patterns\n\n### Verify in Browser\n\n1. Navigate to target page\n2. Check if Tampermonkey icon shows script count\n3. Click icon â†’ see which scripts matched\n\n### Debug Patterns\n\n```javascript\n// Add to script to verify matching\nconsole.log('Script matched URL:', location.href);\nconsole.log('Host:', location.host);\nconsole.log('Path:', location.pathname);\n```\n\n### Pattern Tester\n\nTest if a URL matches your pattern:\n\n```javascript\n// Manual test\nconst patterns = [\n    'https://example.com/*',\n    'https://*.example.com/*'\n];\n\nconst testUrl = 'https://sub.example.com/page';\n\n// Note: This is simplified - actual matching is more complex\npatterns.forEach(pattern => {\n    const regex = pattern\n        .replace(/\\*/g, '.*')\n        .replace(/\\//g, '\\\\/');\n    const matches = new RegExp(`^${regex}$`).test(testUrl);\n    console.log(`${pattern}: ${matches}`);\n});\n```\n\n---\n\n## Common Mistakes\n\n### Mistake 1: Missing www\n\n```javascript\n// WRONG - misses www subdomain\n// @match https://example.com/*\n\n// RIGHT - include both\n// @match https://example.com/*\n// @match https://www.example.com/*\n\n// OR use subdomain wildcard (but matches ALL subdomains)\n// @match https://*.example.com/*\n```\n\n### Mistake 2: HTTP vs HTTPS\n\n```javascript\n// WRONG - only matches HTTPS\n// @match https://example.com/*\n\n// RIGHT - if site uses both\n// @match *://example.com/*\n```\n\n### Mistake 3: Trailing Slash\n\n```javascript\n// These are different!\n// @match https://example.com/    // Only root page\n// @match https://example.com/*   // All pages\n```\n\n### Mistake 4: Too Broad\n\n```javascript\n// WRONG - runs on every site (security risk, performance hit)\n// @match *://*/*\n\n// RIGHT - be specific\n// @match https://example.com/*\n```\n\n### Mistake 5: Query Parameters\n\n@match doesn't match query strings or hashes:\n\n```javascript\n// This won't match https://example.com/page?id=123\n// @match https://example.com/page?*\n\n// Use @include with regex instead\n// @include /^https:\\/\\/example\\.com\\/page\\?/\n```\n\n---\n\n## URL Fragment Handling\n\n@match ignores URL fragments (#hash):\n\n```javascript\n// @match https://example.com/*\n\n// Matches all of these:\n// https://example.com/page\n// https://example.com/page#section1\n// https://example.com/page#section2\n```\n\nFor SPA fragment detection, use window.onurlchange:\n\n```javascript\n// @grant window.onurlchange\n\nif (window.onurlchange === null) {\n    window.addEventListener('urlchange', (info) => {\n        console.log('URL changed:', info.url);\n    });\n}\n```\n\n---\n\n## Performance Considerations\n\nMore @match patterns = more overhead:\n\n```javascript\n// SLOW - 100 separate patterns\n// @match https://site1.com/*\n// @match https://site2.com/*\n// ... 98 more ...\n\n// FASTER - use wildcards where possible\n// @match https://*.example.com/*\n\n// Or use @include with regex for complex patterns\n// @include /^https:\\/\\/(site1|site2|site3)\\.com/\n```\n",
        "plugins/productivity/skills/tampermonkey/references/version-numbering.md": "# Tampermonkey Version Numbering\n\nRules for script version comparison and update detection.\n\n---\n\n## Overview\n\nThe `@version` tag determines:\n- Whether updates are available\n- Version comparison in the script list\n- Update check eligibility (required for auto-updates)\n\n```javascript\n// @version 1.0.0\n```\n\n---\n\n## Version Comparison Rules\n\nTampermonkey compares versions segment by segment. Higher = newer.\n\n### Basic Numeric Versions\n\n```\n1.0 < 1.1 < 1.2 < 2.0\n1.9 < 1.10 < 1.11\n1.0.0 < 1.0.1 < 1.1.0\n```\n\n**Note:** `1.9 < 1.10` (numeric comparison, not string)\n\n### Equivalent Versions\n\nThese are considered equal:\n\n```\n1 == 1. == 1.0 == 1.0.0\n1.1 == 1.1.0 == 1.1.00\n16.4 == 16.04\n```\n\n### Pre-release Tags\n\nPre-release versions are **lower** than their release counterparts:\n\n```\n1.0-alpha < 1.0-beta < 1.0\n1.0.0-alpha < 1.0.0-alpha.1 < 1.0.0\n1.10.0-alpha < 1.10.0\n```\n\n### Alpha vs Release Order\n\n```\nAlpha-v1 < Alpha-v2 < Alpha-v10 < Beta < 1.0\n0.5pre3 < 0.5preliminary < 0.6pre4\n```\n\n---\n\n## Complete Version Hierarchy\n\nFrom lowest to highest:\n\n```\nAlpha-v1\nAlpha-v2\nAlpha-v10\nBeta\n0.5pre3\n0.5preliminary\n0.6pre4\n0.6pre5\n0.7pre4\n0.7pre10\n1.-1\n1 == 1. == 1.0 == 1.0.0\n1.1a\n1.1aa\n1.1ab\n1.1b\n1.1c\n1.1.-1\n1.1 == 1.1.0 == 1.1.00\n1.1.1.1.1\n1.1.1.1.2\n1.1.1.1\n1.10.0-alpha\n1.10 == 1.10.0\n1.11.0-0.3.7\n1.11.0-alpha\n1.11.0-alpha.1\n1.11.0-alpha+1\n1.12+1 == 1.12+1.0\n1.12+1.1 == 1.12+1.1.0\n1.12+2\n1.12+2.1\n1.12+3\n1.12+4\n1.12\n2.0\n16.4 == 16.04\n2023-08-17.alpha\n2023-08-17\n2023-08-17_14-04 == 2023-08-17_14-04.0\n2023-08-17+alpha\n2023-09-11_14-0\n```\n\n---\n\n## Recommended Version Formats\n\n### Semantic Versioning (Recommended)\n\n```javascript\n// Major.Minor.Patch\n// @version 1.0.0    // Initial release\n// @version 1.0.1    // Bug fix\n// @version 1.1.0    // New feature\n// @version 2.0.0    // Breaking change\n```\n\n### With Pre-release Tags\n\n```javascript\n// @version 1.0.0-alpha\n// @version 1.0.0-alpha.1\n// @version 1.0.0-beta\n// @version 1.0.0-rc.1\n// @version 1.0.0\n```\n\n### Date-Based Versions\n\n```javascript\n// @version 2024-01-15\n// @version 2024-01-15.1    // Second release same day\n// @version 2024-01-16\n```\n\n### Date-Time Based\n\n```javascript\n// @version 2024-01-15_14-30\n// @version 2024-01-15_16-45\n```\n\n---\n\n## Best Practices\n\n### 1. Always Increment\n\n```javascript\n// WRONG - same version won't trigger update\n// @version 1.0.0  â†’  @version 1.0.0\n\n// CORRECT\n// @version 1.0.0  â†’  @version 1.0.1\n```\n\n### 2. Use Three Segments\n\n```javascript\n// GOOD - clear and standard\n// @version 1.0.0\n\n// ACCEPTABLE - but less clear\n// @version 1.0\n// @version 1\n```\n\n### 3. Pre-release for Testing\n\n```javascript\n// Development versions\n// @version 1.1.0-dev\n// @version 1.1.0-alpha\n// @version 1.1.0-beta\n\n// Release\n// @version 1.1.0\n```\n\n### 4. Build Metadata\n\nUse `+` for build info (doesn't affect comparison order):\n\n```javascript\n// @version 1.0.0+build.123\n// @version 1.0.0+20240115\n```\n\n---\n\n## Update Checking\n\n### Requirements for Auto-Update\n\n1. **@version** must be present\n2. **@updateURL** should point to a meta file\n3. **@downloadURL** should point to the script file\n\n```javascript\n// @version      1.0.0\n// @updateURL    https://example.com/script.meta.js\n// @downloadURL  https://example.com/script.user.js\n```\n\n### Disabling Updates\n\n```javascript\n// @downloadURL  none\n```\n\n### Update Check Logic\n\n1. Tampermonkey fetches the @updateURL\n2. Parses the @version from the meta file\n3. Compares with installed @version\n4. If remote > local, downloads from @downloadURL\n\n---\n\n## Common Mistakes\n\n### 1. String vs Numeric Comparison\n\n```javascript\n// WRONG assumption: \"1.9\" > \"1.10\" (as strings)\n// CORRECT: 1.9 < 1.10 (numeric comparison)\n```\n\n### 2. Forgetting to Increment\n\n```javascript\n// Users won't get update if version stays same\n// Always increment, even for small fixes\n```\n\n### 3. Invalid Characters\n\n```javascript\n// AVOID special characters in version\n// @version 1.0.0-final!     // May cause issues\n// @version 1.0.0-final      // OK\n```\n\n### 4. Skipping Versions\n\n```javascript\n// This is fine - no need for sequential versions\n// @version 1.0.0  â†’  @version 2.0.0\n```\n\n---\n\n## Version Display\n\nThe version appears in:\n- Tampermonkey dashboard\n- Script editor header\n- Update notifications\n- Browser extension popup\n\nKeep it readable and meaningful for users.\n",
        "plugins/productivity/skills/tampermonkey/references/web-requests.md": "# Web Request Interception API Reference\n\nDocumentation for GM_webRequest - intercept and modify browser requests.\n\n---\n\n## Overview\n\nGM_webRequest allows userscripts to intercept, block, or redirect web requests before they're made. This is useful for:\n- Blocking ads and tracking\n- Redirecting URLs\n- Modifying request patterns\n\n**Important Limitations:**\n- **Experimental API** - may change at any time\n- **Not available in Manifest V3** (Chrome 5.2+, Edge)\n- **Firefox only** for current usage\n- Only handles: `sub_frame`, `script`, `xhr`, `websocket` request types\n\n---\n\n## Required Setup\n\n```javascript\n// @grant GM_webRequest\n```\n\n---\n\n## Basic Usage\n\n```javascript\nGM_webRequest([\n    // Cancel requests to ads\n    {\n        selector: '*://ads.example.com/*',\n        action: 'cancel'\n    },\n\n    // Redirect tracking URLs\n    {\n        selector: '*://tracker.example.com/*',\n        action: {\n            redirect: 'https://example.com/blocked'\n        }\n    },\n\n    // Pattern-based redirect\n    {\n        selector: { match: '*://old.example.com/*' },\n        action: {\n            redirect: {\n                from: '([^:]+)://old.example.com/(.*)',\n                to: '$1://new.example.com/$2'\n            }\n        }\n    },\n\n    // Exclude certain paths\n    {\n        selector: {\n            include: '*://example.com/*',\n            exclude: '*://example.com/api/*'\n        },\n        action: 'cancel'\n    }\n], function(info, message, details) {\n    console.log('Action:', info);        // 'cancel' or 'redirect'\n    console.log('Message:', message);    // 'ok' or 'error'\n    console.log('URL:', details.url);\n    console.log('Redirect URL:', details.redirect_url);\n});\n```\n\n---\n\n## Rule Properties\n\n### Selector\n\nDefines which URLs the rule matches.\n\n| Property | Type | Description |\n|----------|------|-------------|\n| `selector` | string | Simple URL pattern |\n| `selector.include` | string/array | URLs to include |\n| `selector.match` | string/array | Match patterns |\n| `selector.exclude` | string/array | URLs to exclude |\n\n```javascript\n// String selector (simplest)\n{ selector: '*://ads.example.com/*' }\n\n// Object selector with include/exclude\n{\n    selector: {\n        include: '*://example.com/*',\n        exclude: '*://example.com/api/*'\n    }\n}\n\n// Array of patterns\n{\n    selector: {\n        include: ['*://ads1.com/*', '*://ads2.com/*'],\n        match: '*://tracker.com/*'\n    }\n}\n```\n\n### Action\n\nDefines what to do when a URL matches.\n\n| Property | Type | Description |\n|----------|------|-------------|\n| `action` | string | `'cancel'` to block |\n| `action.cancel` | boolean | Block the request |\n| `action.redirect` | string/object | Redirect destination |\n\n```javascript\n// Cancel (block) the request\n{ action: 'cancel' }\n{ action: { cancel: true } }\n\n// Redirect to static URL\n{ action: { redirect: 'https://example.com/blocked' } }\n\n// Redirect with pattern replacement\n{\n    action: {\n        redirect: {\n            from: '([^:]+)://old.com/(.*)',\n            to: '$1://new.com/$2'\n        }\n    }\n}\n```\n\n---\n\n## @webRequest Header\n\nDefine rules at script level (applies before script loads):\n\n```javascript\n// @webRequest {\"selector\": \"*://ads.example.com/*\", \"action\": \"cancel\"}\n// @webRequest {\"selector\": {\"include\": \"*tracking*\"}, \"action\": {\"redirect\": \"about:blank\"}}\n```\n\nThis is useful for blocking resources that load before your script runs.\n\n---\n\n## Listener Callback\n\n```javascript\nGM_webRequest(rules, function(info, message, details) {\n    // info: 'cancel' or 'redirect'\n    // message: 'ok' or 'error'\n    // details: {\n    //     rule: <the triggered rule>,\n    //     url: <request URL>,\n    //     redirect_url: <where redirected>,\n    //     description: <error description if any>\n    // }\n});\n```\n\n---\n\n## Common Use Cases\n\n### Block Ads\n\n```javascript\nGM_webRequest([\n    { selector: '*://ads.example.com/*', action: 'cancel' },\n    { selector: '*://tracking.example.com/*', action: 'cancel' },\n    { selector: '*://analytics.example.com/*', action: 'cancel' }\n]);\n```\n\n### Redirect Old URLs\n\n```javascript\nGM_webRequest([\n    {\n        selector: { match: '*://old-domain.com/*' },\n        action: {\n            redirect: {\n                from: '([^:]+)://old-domain.com/(.*)',\n                to: '$1://new-domain.com/$2'\n            }\n        }\n    }\n]);\n```\n\n### Block Specific Resource Types\n\n```javascript\n// Block scripts from untrusted domains\nGM_webRequest([\n    {\n        selector: {\n            include: '*://*.untrusted.com/*.js'\n        },\n        action: 'cancel'\n    }\n]);\n```\n\n### Redirect to Local Resources\n\n```javascript\nGM_webRequest([\n    {\n        selector: 'https://cdn.example.com/library.js',\n        action: {\n            redirect: 'https://my-cdn.com/modified-library.js'\n        }\n    }\n]);\n```\n\n---\n\n## Limitations\n\n### Browser Support\n\n| Browser | GM_webRequest Support |\n|---------|----------------------|\n| Firefox | âœ… Supported |\n| Chrome (MV3) | âŒ Not available |\n| Edge (MV3) | âŒ Not available |\n| Safari | âŒ Not available |\n\n### Request Types\n\nOnly these request types can be intercepted:\n- `sub_frame` - iframes\n- `script` - JavaScript files\n- `xhr` - XMLHttpRequest/fetch\n- `websocket` - WebSocket connections\n\nThese **cannot** be intercepted:\n- Main document (`main_frame`)\n- Images\n- Stylesheets\n- Fonts\n\n---\n\n## Alternatives for MV3\n\nSince GM_webRequest doesn't work in Chrome/Edge MV3, use these alternatives:\n\n### Page-Level Interception\n\n```javascript\n// @grant unsafeWindow\n\n// Intercept fetch\nconst originalFetch = unsafeWindow.fetch;\nunsafeWindow.fetch = function(...args) {\n    const url = args[0]?.url || args[0];\n    console.log('Intercepted fetch:', url);\n\n    // Block certain URLs\n    if (url.includes('tracking.com')) {\n        return Promise.reject(new Error('Blocked'));\n    }\n\n    return originalFetch.apply(this, args);\n};\n\n// Intercept XMLHttpRequest\nconst originalOpen = unsafeWindow.XMLHttpRequest.prototype.open;\nunsafeWindow.XMLHttpRequest.prototype.open = function(method, url) {\n    console.log('Intercepted XHR:', method, url);\n\n    // Block certain URLs\n    if (url.includes('tracking.com')) {\n        throw new Error('Blocked');\n    }\n\n    return originalOpen.apply(this, arguments);\n};\n```\n\n### Remove Elements After Load\n\n```javascript\n// Remove ad iframes after they load\nconst observer = new MutationObserver(() => {\n    document.querySelectorAll('iframe[src*=\"ads\"]').forEach(el => el.remove());\n});\nobserver.observe(document.body, { childList: true, subtree: true });\n```\n\n### Use CSS to Hide\n\n```javascript\n// @grant GM_addStyle\n\nGM_addStyle(`\n    iframe[src*=\"ads\"],\n    [id*=\"advertisement\"],\n    [class*=\"sponsored\"] {\n        display: none !important;\n    }\n`);\n```\n\n---\n\n## Best Practices\n\n1. **Be specific with selectors** - Avoid overly broad patterns\n2. **Test thoroughly** - Request interception can break sites\n3. **Provide fallbacks** - Check if GM_webRequest is available\n4. **Log actions** - Use the listener callback for debugging\n5. **Consider MV3 alternatives** - Your script may need to work in Chrome too\n\n```javascript\n// Check if GM_webRequest is available\nif (typeof GM_webRequest !== 'undefined') {\n    GM_webRequest([...rules...]);\n} else {\n    console.log('GM_webRequest not available, using fallback');\n    // Use page-level interception instead\n}\n```\n",
        "plugins/shopify-developer/.claude-plugin/plugin.json": "{\n  \"name\": \"shopify-developer\",\n  \"description\": \"Professional Shopify development suite with 6 specialised skills covering Liquid templating, theme development, API integration (GraphQL/REST), custom app development, performance optimisation, and debugging\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"1.1.0\"\n}\n",
        "plugins/shopify-developer/README.md": "# Shopify Developer Toolkit\n\nProfessional Shopify development toolkit with specialized skills for Liquid templating, theme customization, API integration, app development, and performance optimization.\n\n## Overview\n\nComplete toolkit for Shopify developers covering theme development, Liquid templating language, Shopify APIs (GraphQL/REST), custom app development, performance optimization, and debugging. Whether you're building custom themes, developing apps, or optimizing existing stores, this toolkit provides expert guidance for professional Shopify development.\n\n## Status: Production Ready (v1.0.0)\n\nThis toolkit includes 6 comprehensive skills covering all aspects of Shopify development.\n\n## Included Skills\n\n### 1. **shopify-liquid** - Liquid Templating Language\n\nComplete Liquid templating reference including syntax, filters, objects, control flow, loops, and conditionals.\n\n**Use when:**\n- Working with .liquid files\n- Creating theme templates\n- Implementing dynamic content\n- Using Liquid filters to format data\n- Accessing Shopify objects (product, collection, cart, customer)\n- Debugging Liquid syntax errors\n\n**Key Features:**\n- Output, logic, and assignment syntax\n- Control flow and conditionals\n- Iteration and loops\n- Essential filters (money, strings, arrays, dates, images)\n- Key Shopify objects (product, collection, cart, customer)\n- Template inclusion patterns\n\n### 2. **shopify-theme-dev** - Theme Development\n\nTheme development and customization including file structure, sections, snippets, and Dawn theme patterns.\n\n**Use when:**\n- Building custom Shopify themes\n- Modifying existing themes\n- Working with theme sections and blocks\n- Implementing JSON templates\n- Using Shopify CLI for theme development\n- Customizing Dawn or other themes\n\n**Key Features:**\n- Theme file structure and organization\n- Sections and snippets architecture\n- JSON templates and schema\n- Theme settings and configuration\n- Shopify CLI workflow\n- Dawn theme best practices\n\n### 3. **shopify-api** - API Integration\n\nGraphQL and REST API integration for Shopify stores including Admin API, Storefront API, and webhooks.\n\n**Use when:**\n- Integrating with Shopify Admin API\n- Building headless storefronts with Storefront API\n- Implementing custom checkout experiences\n- Working with webhooks\n- Bulk operations and data sync\n- OAuth and API authentication\n\n**Key Features:**\n- GraphQL Admin API queries and mutations\n- Storefront API for headless commerce\n- REST API endpoints and methods\n- Webhook setup and handling\n- OAuth authentication flow\n- Rate limiting and best practices\n\n### 4. **shopify-app-dev** - Custom App Development\n\nCustom Shopify app development including embedded apps, OAuth, App Bridge, and Polaris components.\n\n**Use when:**\n- Building custom Shopify apps\n- Creating embedded admin apps\n- Implementing OAuth authentication\n- Using App Bridge for embedded experiences\n- Designing with Polaris UI components\n- Deploying apps to Shopify App Store\n\n**Key Features:**\n- Shopify App CLI setup\n- Embedded app architecture\n- OAuth and session management\n- App Bridge integration\n- Polaris component library\n- App Store submission guidelines\n\n### 5. **shopify-performance** - Performance Optimization\n\nSpeed and Core Web Vitals optimization for Shopify stores including image optimization, JavaScript, CSS, and liquid performance.\n\n**Use when:**\n- Optimizing page load times\n- Improving Core Web Vitals scores\n- Reducing JavaScript and CSS bloat\n- Implementing lazy loading\n- Optimizing Liquid code performance\n- Improving mobile performance\n\n**Key Features:**\n- Core Web Vitals optimization (LCP, FID, CLS)\n- Image optimization strategies\n- JavaScript and CSS minification\n- Liquid code optimization\n- Lazy loading patterns\n- Performance monitoring tools\n\n### 6. **shopify-debugging** - Troubleshooting & Testing\n\nDebugging tools and techniques for Shopify theme and app development including theme check, console debugging, and testing strategies.\n\n**Use when:**\n- Debugging Liquid template errors\n- Troubleshooting JavaScript issues\n- Testing theme changes\n- Using Shopify CLI for debugging\n- Inspecting network requests\n- Validating theme code\n\n**Key Features:**\n- Theme Check linting tool\n- Browser developer tools\n- Liquid error debugging\n- JavaScript console debugging\n- Network request inspection\n- Testing workflows\n\n## Installation\n\n```bash\n/plugin install shopify-developer@wookstar\n```\n\nThis installs all 6 Shopify development skills as a complete toolkit.\n\n## Common Workflows\n\n### Building a Custom Theme\n\n1. **shopify-theme-dev** - Set up theme structure and sections\n2. **shopify-liquid** - Implement dynamic templates with Liquid\n3. **shopify-performance** - Optimize for speed and Core Web Vitals\n4. **shopify-debugging** - Test and debug theme implementation\n\n### Creating a Headless Storefront\n\n1. **shopify-api** - Set up Storefront API integration\n2. **shopify-liquid** - Reference Shopify objects and data structures\n3. **shopify-performance** - Implement performance best practices\n4. **shopify-debugging** - Test API integration and data flow\n\n### Developing a Custom App\n\n1. **shopify-app-dev** - Set up app structure and OAuth\n2. **shopify-api** - Integrate with Admin API\n3. **shopify-debugging** - Test app functionality\n4. **shopify-performance** - Optimize app performance\n\n## Prerequisites\n\n- Basic knowledge of HTML, CSS, and JavaScript\n- Shopify Partner account (for app development)\n- Shopify CLI installed (recommended)\n- Node.js and npm/yarn (for app development)\n- Familiarity with Liquid templating (for theme development)\n\n## Environment Setup\n\n### Shopify CLI Installation\n\n```bash\n# Install Shopify CLI\nnpm install -g @shopify/cli @shopify/theme\n\n# Authenticate\nshopify auth login\n\n# Start development\nshopify theme dev --store your-store.myshopify.com\n```\n\n### Required Tools\n\n- **Shopify CLI** - Theme and app development\n- **Node.js** - App development and build tools\n- **Git** - Version control\n- **Code Editor** - VS Code with Liquid extension recommended\n\n## Key Resources\n\n**Official Documentation:**\n- [Shopify Developer Docs](https://shopify.dev/)\n- [Liquid Reference](https://shopify.dev/docs/api/liquid)\n- [Theme Development](https://shopify.dev/docs/themes)\n- [App Development](https://shopify.dev/docs/apps)\n- [Storefront API](https://shopify.dev/docs/api/storefront)\n- [Admin API](https://shopify.dev/docs/api/admin)\n\n**Developer Tools:**\n- [Shopify CLI](https://shopify.dev/docs/themes/tools/cli)\n- [Theme Check](https://shopify.dev/docs/themes/tools/theme-check)\n- [Polaris](https://polaris.shopify.com/) - Shopify's design system\n- [App Bridge](https://shopify.dev/docs/apps/tools/app-bridge)\n\n## Support and Community\n\n- **Shopify Community** - community.shopify.com\n- **GitHub** - github.com/Shopify\n- **Discord** - Shopify Devs Discord server\n\n## Version\n\nCurrent version: **1.0.0**\n\n## Category\n\nDevelopment / E-commerce\n\n---\n\n**Created by:** Henrik Soederlund ([@henkisdabro](https://github.com/henkisdabro))\n**Part of:** Claude Code Plugin Marketplace\n**License:** Follow Shopify's terms of service for API usage\n",
        "plugins/shopify-developer/skills/shopify-api/SKILL.md": "---\nname: shopify-api\ndescription: Complete API integration guide for Shopify including GraphQL Admin API, REST Admin API, Storefront API, Ajax API, OAuth authentication, rate limiting, and webhooks. Use when making API calls to Shopify, authenticating apps, fetching product/order/customer data programmatically, implementing cart operations, handling webhooks, or working with API version 2025-10. Requires fetch or axios for JavaScript implementations.\n---\n\n# Shopify API Integration\n\nExpert guidance for all Shopify APIs including GraphQL Admin API, REST Admin API, Storefront API, Ajax API, authentication, and webhooks.\n\n## When to Use This Skill\n\nInvoke this skill when:\n\n- Making GraphQL or REST API calls to Shopify\n- Implementing OAuth 2.0 authentication for apps\n- Fetching product, collection, order, or customer data programmatically\n- Using Storefront API for headless commerce\n- Implementing Ajax cart operations in themes\n- Setting up webhooks for event handling\n- Working with API version 2025-10\n- Handling rate limiting and API errors\n- Building custom integrations with Shopify\n- Using Shopify Admin API from Node.js, Python, or other languages\n\n## Core Capabilities\n\n### 1. GraphQL Admin API\n\nModern API for Shopify Admin operations with efficient data fetching.\n\n**Endpoint:**\n```\nPOST https://{store}.myshopify.com/admin/api/2025-10/graphql.json\n```\n\n**Headers:**\n```javascript\n{\n  'X-Shopify-Access-Token': 'shpat_...',\n  'Content-Type': 'application/json'\n}\n```\n\n**Basic Query:**\n```graphql\nquery GetProducts($first: Int!) {\n  products(first: $first) {\n    edges {\n      node {\n        id\n        title\n        handle\n        status\n        vendor\n        productType\n\n        # Pricing\n        priceRange {\n          minVariantPrice { amount currencyCode }\n          maxVariantPrice { amount currencyCode }\n        }\n\n        # Images\n        images(first: 5) {\n          edges {\n            node {\n              id\n              url\n              altText\n            }\n          }\n        }\n\n        # Variants\n        variants(first: 10) {\n          edges {\n            node {\n              id\n              title\n              sku\n              price\n              inventoryQuantity\n              available: availableForSale\n            }\n          }\n        }\n      }\n    }\n\n    pageInfo {\n      hasNextPage\n      hasPreviousPage\n      startCursor\n      endCursor\n    }\n  }\n}\n```\n\n**Variables:**\n```json\n{\n  \"first\": 10\n}\n```\n\n**JavaScript Example:**\n```javascript\nasync function getProducts(accessToken, store, limit = 10) {\n  const query = `\n    query GetProducts($first: Int!) {\n      products(first: $first) {\n        edges {\n          node {\n            id\n            title\n            handle\n            priceRange {\n              minVariantPrice { amount currencyCode }\n            }\n          }\n        }\n        pageInfo {\n          hasNextPage\n          endCursor\n        }\n      }\n    }\n  `;\n\n  const response = await fetch(\n    `https://${store}.myshopify.com/admin/api/2025-10/graphql.json`,\n    {\n      method: 'POST',\n      headers: {\n        'X-Shopify-Access-Token': accessToken,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        query,\n        variables: { first: limit },\n      }),\n    }\n  );\n\n  const { data, errors } = await response.json();\n\n  if (errors) {\n    console.error('GraphQL Errors:', errors);\n    throw new Error(errors[0].message);\n  }\n\n  return data.products;\n}\n```\n\n**Common Mutations:**\n\nCreate product:\n```graphql\nmutation CreateProduct($input: ProductInput!) {\n  productCreate(input: $input) {\n    product {\n      id\n      title\n      handle\n    }\n    userErrors {\n      field\n      message\n    }\n  }\n}\n```\n\nUpdate product:\n```graphql\nmutation UpdateProduct($input: ProductInput!) {\n  productUpdate(input: $input) {\n    product {\n      id\n      title\n      status\n    }\n    userErrors {\n      field\n      message\n    }\n  }\n}\n```\n\nSet metafield:\n```graphql\nmutation SetMetafield($input: MetafieldInput!) {\n  metafieldSet(input: $input) {\n    metafield {\n      id\n      namespace\n      key\n      value\n      type\n    }\n    userErrors {\n      field\n      message\n    }\n  }\n}\n```\n\n### 2. REST Admin API\n\nTraditional REST API for Shopify Admin operations.\n\n**Base URL:**\n```\nhttps://{store}.myshopify.com/admin/api/2025-10/\n```\n\n**Authentication:**\n```javascript\nheaders: {\n  'X-Shopify-Access-Token': 'shpat_...'\n}\n```\n\n**Common Endpoints:**\n\nGet products:\n```javascript\nGET /admin/api/2025-10/products.json?limit=50&status=active\n\n// JavaScript\nconst response = await fetch(\n  `https://${store}.myshopify.com/admin/api/2025-10/products.json?limit=50`,\n  {\n    headers: {\n      'X-Shopify-Access-Token': accessToken,\n    },\n  }\n);\n\nconst { products } = await response.json();\n```\n\nGet single product:\n```javascript\nGET /admin/api/2025-10/products/{product_id}.json\n```\n\nCreate product:\n```javascript\nPOST /admin/api/2025-10/products.json\n\n// Body\n{\n  \"product\": {\n    \"title\": \"New Product\",\n    \"body_html\": \"<p>Description</p>\",\n    \"vendor\": \"My Vendor\",\n    \"product_type\": \"Shoes\",\n    \"status\": \"draft\"\n  }\n}\n```\n\nUpdate product:\n```javascript\nPUT /admin/api/2025-10/products/{product_id}.json\n\n// Body\n{\n  \"product\": {\n    \"id\": 123456789,\n    \"title\": \"Updated Title\"\n  }\n}\n```\n\nGet orders:\n```javascript\nGET /admin/api/2025-10/orders.json?status=any&limit=50\n```\n\nGet customers:\n```javascript\nGET /admin/api/2025-10/customers.json?limit=50\n```\n\n### 3. OAuth 2.0 Authentication\n\nComplete OAuth flow for custom apps.\n\n**Step 1: Authorization Request**\n```\nGET https://{shop}.myshopify.com/admin/oauth/authorize?\n  client_id={api_key}&\n  redirect_uri={redirect_uri}&\n  scope={scopes}&\n  state={random_state}\n```\n\n**Scopes:**\n```javascript\nconst scopes = [\n  'read_products',\n  'write_products',\n  'read_orders',\n  'write_orders',\n  'read_customers',\n  'write_customers',\n  'read_inventory',\n  'write_inventory',\n  'read_metafields',\n  'write_metafields',\n].join(',');\n```\n\n**Step 2: Handle Callback**\n```javascript\n// User approves, Shopify redirects to:\nGET {redirect_uri}?code={auth_code}&state={state}&hmac={hmac}&shop={shop}\n\n// Verify HMAC for security\nfunction verifyHmac(query, secret) {\n  const { hmac, ...params } = query;\n\n  const message = Object.keys(params)\n    .sort()\n    .map(key => `${key}=${params[key]}`)\n    .join('&');\n\n  const hash = crypto\n    .createHmac('sha256', secret)\n    .update(message)\n    .digest('hex');\n\n  return hash === hmac;\n}\n```\n\n**Step 3: Exchange Code for Token**\n```javascript\nPOST https://{shop}.myshopify.com/admin/oauth/access_token\n\n// Body\n{\n  \"client_id\": \"{api_key}\",\n  \"client_secret\": \"{api_secret}\",\n  \"code\": \"{auth_code}\"\n}\n\n// Response\n{\n  \"access_token\": \"shpat_...\",\n  \"scope\": \"write_products,read_orders\"\n}\n\n// Node.js example\nasync function getAccessToken(shop, code, apiKey, apiSecret) {\n  const response = await fetch(\n    `https://${shop}/admin/oauth/access_token`,\n    {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        client_id: apiKey,\n        client_secret: apiSecret,\n        code,\n      }),\n    }\n  );\n\n  const { access_token, scope } = await response.json();\n  return { access_token, scope };\n}\n```\n\n### 4. Rate Limiting\n\nGraphQL uses points-based rate limiting.\n\n**Rate Limits:**\n- 50 cost points per second maximum\n- Bucket refills at 50 points/second\n- Each query has a calculated cost\n\n**Check Rate Limit:**\n```javascript\nconst response = await fetch(graphqlEndpoint, options);\n\nconst rateLimitHeader = response.headers.get('X-Shopify-GraphQL-Admin-Api-Call-Limit');\n// Example: \"42/50\" (42 points used, 50 max)\n\nconst [used, limit] = rateLimitHeader.split('/').map(Number);\n\nif (used > 40) {\n  // Approaching limit, slow down\n  await delay(1000);\n}\n```\n\n**Implement Retry Logic:**\n```javascript\nasync function fetchWithRetry(url, options, maxRetries = 3) {\n  for (let i = 0; i < maxRetries; i++) {\n    const response = await fetch(url, options);\n\n    if (response.status === 429) {\n      // Rate limited\n      const retryAfter = response.headers.get('Retry-After') || 2;\n      await delay(retryAfter * 1000 * Math.pow(2, i)); // Exponential backoff\n      continue;\n    }\n\n    return response;\n  }\n\n  throw new Error('Max retries exceeded');\n}\n\nfunction delay(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n```\n\n### 5. Storefront API\n\nPublic API for headless/custom storefronts.\n\n**Endpoint:**\n```\nPOST https://{store}.myshopify.com/api/2025-10/graphql.json\n```\n\n**Headers (Public Access):**\n```javascript\n{\n  'Content-Type': 'application/json',\n  'X-Shopify-Storefront-Access-Token': '{public_token}' // Optional for public stores\n}\n```\n\n**Query Products:**\n```graphql\nquery GetProducts($first: Int!) {\n  products(first: $first) {\n    edges {\n      node {\n        id\n        title\n        handle\n        description\n        priceRange {\n          minVariantPrice { amount currencyCode }\n          maxVariantPrice { amount currencyCode }\n        }\n        images(first: 3) {\n          edges {\n            node {\n              url\n              altText\n            }\n          }\n        }\n        variants(first: 10) {\n          edges {\n            node {\n              id\n              title\n              price { amount currencyCode }\n              availableForSale\n              sku\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n**Cart Operations:**\n\nCreate cart:\n```graphql\nmutation CreateCart($input: CartInput!) {\n  cartCreate(input: $input) {\n    cart {\n      id\n      checkoutUrl\n      lines(first: 10) {\n        edges {\n          node {\n            id\n            quantity\n            merchandise {\n              ... on ProductVariant {\n                id\n                title\n                price { amount }\n              }\n            }\n          }\n        }\n      }\n      cost {\n        totalAmount { amount currencyCode }\n        subtotalAmount { amount }\n        totalTaxAmount { amount }\n      }\n    }\n  }\n}\n```\n\nAdd to cart:\n```graphql\nmutation AddToCart($cartId: ID!, $lines: [CartLineInput!]!) {\n  cartLinesAdd(cartId: $cartId, lines: $lines) {\n    cart {\n      id\n      lines(first: 10) {\n        edges {\n          node {\n            id\n            quantity\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n### 6. Ajax API (Theme-Only)\n\nJavaScript API for cart operations in themes.\n\n**Get Cart:**\n```javascript\nfetch('/cart.js')\n  .then(response => response.json())\n  .then(cart => {\n    console.log('Cart:', cart);\n    console.log('Item count:', cart.item_count);\n    console.log('Total:', cart.total_price);\n    console.log('Items:', cart.items);\n  });\n```\n\n**Add to Cart:**\n```javascript\nfetch('/cart/add.js', {\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify({\n    id: variantId,              // Required: variant ID\n    quantity: 1,                 // Optional: default 1\n    properties: {                // Optional: custom data\n      'Gift wrap': 'Yes',\n      'Note': 'Happy Birthday!'\n    }\n  })\n})\n  .then(response => response.json())\n  .then(item => {\n    console.log('Added to cart:', item);\n  })\n  .catch(error => {\n    console.error('Error:', error);\n  });\n```\n\n**Update Cart:**\n```javascript\nfetch('/cart/change.js', {\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify({\n    line: 1,          // Line item index (1-based)\n    quantity: 2       // New quantity (0 = remove)\n  })\n})\n  .then(response => response.json())\n  .then(cart => console.log('Updated cart:', cart));\n```\n\n**Clear Cart:**\n```javascript\nfetch('/cart/clear.js', { method: 'POST' })\n  .then(response => response.json())\n  .then(cart => console.log('Cart cleared'));\n```\n\n**Update Cart Attributes:**\n```javascript\nfetch('/cart/update.js', {\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify({\n    attributes: {\n      'gift_wrap': 'true',\n      'gift_message': 'Happy Birthday!'\n    },\n    note: 'Please handle with care'\n  })\n})\n  .then(response => response.json())\n  .then(cart => console.log('Cart updated'));\n```\n\n### 7. Webhooks\n\nEvent-driven notifications for app integrations.\n\n**Common Webhooks:**\n```javascript\n// Product events\n'products/create'\n'products/update'\n'products/delete'\n\n// Order events\n'orders/create'\n'orders/updated'\n'orders/paid'\n'orders/fulfilled'\n'orders/cancelled'\n\n// Customer events\n'customers/create'\n'customers/update'\n'customers/delete'\n\n// Cart events\n'carts/create'\n'carts/update'\n\n// Inventory events\n'inventory_levels/update'\n\n// App events\n'app/uninstalled'\n```\n\n**Register Webhook (GraphQL):**\n```graphql\nmutation CreateWebhook($input: WebhookSubscriptionInput!) {\n  webhookSubscriptionCreate(input: $input) {\n    webhookSubscription {\n      id\n      topic\n      endpoint {\n        __typename\n        ... on WebhookHttpEndpoint {\n          callbackUrl\n        }\n      }\n    }\n    userErrors {\n      field\n      message\n    }\n  }\n}\n```\n\n**Variables:**\n```json\n{\n  \"input\": {\n    \"topic\": \"ORDERS_CREATE\",\n    \"webhookSubscription\": {\n      \"callbackUrl\": \"https://your-app.com/webhooks/orders\",\n      \"format\": \"JSON\"\n    }\n  }\n}\n```\n\n**Handle Webhook (Node.js/Express):**\n```javascript\napp.post('/webhooks/orders', async (req, res) => {\n  // Verify webhook HMAC\n  const hmac = req.headers['x-shopify-hmac-sha256'];\n  const body = JSON.stringify(req.body);\n\n  const hash = crypto\n    .createHmac('sha256', SHOPIFY_WEBHOOK_SECRET)\n    .update(body)\n    .digest('base64');\n\n  if (hash !== hmac) {\n    return res.status(401).send('Invalid HMAC');\n  }\n\n  // Process order\n  const order = req.body;\n  console.log('New order:', order.id, order.email);\n\n  // Respond quickly (within 5 seconds)\n  res.status(200).send('OK');\n\n  // Process in background\n  await processOrder(order);\n});\n```\n\n## Common Patterns\n\n### Pagination (GraphQL)\n\n```javascript\nasync function getAllProducts(accessToken, store) {\n  let allProducts = [];\n  let hasNextPage = true;\n  let cursor = null;\n\n  while (hasNextPage) {\n    const query = `\n      query GetProducts($first: Int!, $after: String) {\n        products(first: $first, after: $after) {\n          edges {\n            node { id title }\n          }\n          pageInfo {\n            hasNextPage\n            endCursor\n          }\n        }\n      }\n    `;\n\n    const response = await fetch(endpoint, {\n      method: 'POST',\n      headers: {\n        'X-Shopify-Access-Token': accessToken,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        query,\n        variables: { first: 50, after: cursor },\n      }),\n    });\n\n    const { data } = await response.json();\n    allProducts.push(...data.products.edges.map(e => e.node));\n\n    hasNextPage = data.products.pageInfo.hasNextPage;\n    cursor = data.products.pageInfo.endCursor;\n  }\n\n  return allProducts;\n}\n```\n\n### Error Handling\n\n```javascript\nasync function safeApiCall(query, variables) {\n  try {\n    const response = await fetch(endpoint, {\n      method: 'POST',\n      headers: {\n        'X-Shopify-Access-Token': accessToken,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({ query, variables }),\n    });\n\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n    }\n\n    const { data, errors } = await response.json();\n\n    if (errors) {\n      console.error('GraphQL Errors:', errors);\n      throw new Error(errors[0].message);\n    }\n\n    return data;\n  } catch (error) {\n    console.error('API Error:', error);\n    throw error;\n  }\n}\n```\n\n## Best Practices\n\n1. **Always check API version** - Use latest stable (2025-10)\n2. **Implement rate limit handling** - Use exponential backoff\n3. **Verify webhook HMAC** - Security critical\n4. **Use GraphQL over REST** when possible - More efficient\n5. **Request only needed fields** - Reduce response size\n6. **Handle errors gracefully** - Check `errors` and `userErrors`\n7. **Store access tokens securely** - Never expose in client code\n8. **Use minimum necessary scopes** - Security best practice\n9. **Implement retry logic** - Handle transient failures\n10. **Respond to webhooks quickly** - Within 5 seconds\n\n## Detailed References\n\n- **[references/graphql-queries.md](references/graphql-queries.md)** - Complete query examples\n- **[references/rest-endpoints.md](references/rest-endpoints.md)** - All REST endpoints\n- **[references/webhook-payloads.md](references/webhook-payloads.md)** - Webhook payload structures\n\n## Integration with Other Skills\n\n- **shopify-app-dev** - Use when building custom Shopify apps\n- **shopify-liquid** - Use when displaying API data in theme templates\n- **shopify-debugging** - Use when troubleshooting API errors\n- **shopify-performance** - Use when optimizing API request patterns\n\n## Quick Reference\n\n```javascript\n// GraphQL Admin API\nPOST https://{store}.myshopify.com/admin/api/2025-10/graphql.json\nHeaders: { 'X-Shopify-Access-Token': 'shpat_...' }\n\n// REST Admin API\nGET https://{store}.myshopify.com/admin/api/2025-10/products.json\nHeaders: { 'X-Shopify-Access-Token': 'shpat_...' }\n\n// Storefront API\nPOST https://{store}.myshopify.com/api/2025-10/graphql.json\nHeaders: { 'X-Shopify-Storefront-Access-Token': 'token' }\n\n// Ajax API (theme)\nfetch('/cart.js')\nfetch('/cart/add.js', { method: 'POST', body: ... })\nfetch('/cart/change.js', { method: 'POST', body: ... })\n```\n",
        "plugins/shopify-developer/skills/shopify-app-dev/SKILL.md": "---\nname: shopify-app-dev\ndescription: Custom Shopify app development using Shopify CLI, app architecture, OAuth authentication, app extensions, admin UI, Hydrogen/Remix frameworks, and deployment. Use when creating Shopify apps, setting up Shopify CLI, building app extensions, implementing OAuth flows, creating admin UI components, working with Hydrogen or Remix, deploying to Cloudflare Workers, or integrating third-party services with Shopify stores.\n---\n\n# Shopify App Development\n\nExpert guidance for building custom Shopify apps using Shopify CLI, modern frameworks, and best practices.\n\n## When to Use This Skill\n\nInvoke this skill when:\n\n- Creating custom Shopify apps with Shopify CLI\n- Setting up app development environment\n- Implementing OAuth authentication for apps\n- Building app extensions (admin blocks, theme app extensions)\n- Creating admin UI components and pages\n- Working with Hydrogen or Remix for headless storefronts\n- Deploying apps to Cloudflare Workers or other platforms\n- Integrating third-party APIs with Shopify\n- Creating app proxies for custom functionality\n- Implementing app billing and subscription plans\n- Building public or custom apps\n\n## Core Capabilities\n\n### 1. Shopify CLI Setup\n\nInstall and configure Shopify CLI for app development.\n\n**Install Shopify CLI:**\n```bash\n# Using npm\nnpm install -g @shopify/cli @shopify/app\n\n# Using Homebrew (macOS)\nbrew tap shopify/shopify\nbrew install shopify-cli\n\n# Verify installation\nshopify version\n```\n\n**Create New App:**\n```bash\n# Create app with Node.js/React\nshopify app init\n\n# Choose template:\n# - Remix (recommended)\n# - Node.js + React\n# - PHP\n# - Ruby\n\n# App structure created:\nmy-app/\nâ”œâ”€â”€ app/                    # Remix app routes\nâ”œâ”€â”€ extensions/             # App extensions\nâ”œâ”€â”€ shopify.app.toml       # App configuration\nâ”œâ”€â”€ package.json\nâ””â”€â”€ README.md\n```\n\n**App Configuration (shopify.app.toml):**\n```toml\n# This file stores app configuration\n\nname = \"my-app\"\nclient_id = \"your-client-id\"\napplication_url = \"https://your-app.com\"\nembedded = true\n\n[access_scopes]\n# API access scopes\nscopes = \"write_products,read_orders,read_customers\"\n\n[auth]\nredirect_urls = [\n  \"https://your-app.com/auth/callback\",\n  \"https://your-app.com/auth/shopify/callback\"\n]\n\n[webhooks]\napi_version = \"2025-10\"\n\n[[webhooks.subscriptions]]\ntopics = [\"products/create\", \"products/update\"]\nuri = \"/webhooks\"\n```\n\n### 2. Development Workflow\n\n**Start Development Server:**\n```bash\n# Start dev server with tunneling\nshopify app dev\n\n# Server starts with:\n# - Local development URL: http://localhost:3000\n# - Public tunnel URL: https://random-subdomain.ngrok.io\n# - App installed in development store\n```\n\n**Deploy App:**\n```bash\n# Deploy to production\nshopify app deploy\n\n# Generate app version and deploy extensions\n```\n\n**Environment Variables (.env):**\n```bash\nSHOPIFY_API_KEY=your_api_key\nSHOPIFY_API_SECRET=your_api_secret\nSCOPES=write_products,read_orders\nHOST=your-app-domain.com\nSHOPIFY_APP_URL=https://your-app.com\nDATABASE_URL=postgresql://...\n```\n\n### 3. App Architecture (Remix)\n\nModern Shopify app using Remix framework.\n\n**app/routes/app._index.jsx (Home Page):**\n```javascript\nimport { useLoaderData } from \"@remix-run/react\";\nimport { authenticate } from \"../shopify.server\";\nimport {\n  Page,\n  Layout,\n  Card,\n  DataTable,\n  Button,\n} from \"@shopify/polaris\";\n\nexport async function loader({ request }) {\n  const { admin, session } = await authenticate.admin(request);\n\n  // Fetch products using GraphQL\n  const response = await admin.graphql(`\n    query {\n      products(first: 10) {\n        edges {\n          node {\n            id\n            title\n            handle\n            status\n          }\n        }\n      }\n    }\n  `);\n\n  const { data } = await response.json();\n\n  return {\n    products: data.products.edges.map(e => e.node),\n    shop: session.shop,\n  };\n}\n\nexport default function Index() {\n  const { products, shop } = useLoaderData();\n\n  const rows = products.map((product) => [\n    product.title,\n    product.handle,\n    product.status,\n  ]);\n\n  return (\n    <Page title=\"Products\">\n      <Layout>\n        <Layout.Section>\n          <Card>\n            <DataTable\n              columnContentTypes={[\"text\", \"text\", \"text\"]}\n              headings={[\"Title\", \"Handle\", \"Status\"]}\n              rows={rows}\n            />\n          </Card>\n        </Layout.Section>\n      </Layout>\n    </Page>\n  );\n}\n```\n\n**app/routes/app.product.$id.jsx (Product Detail):**\n```javascript\nimport { json } from \"@remix-run/node\";\nimport { useLoaderData, useSubmit } from \"@remix-run/react\";\nimport { authenticate } from \"../shopify.server\";\nimport {\n  Page,\n  Layout,\n  Card,\n  Form,\n  FormLayout,\n  TextField,\n  Button,\n} from \"@shopify/polaris\";\nimport { useState } from \"react\";\n\nexport async function loader({ request, params }) {\n  const { admin } = await authenticate.admin(request);\n\n  const response = await admin.graphql(`\n    query GetProduct($id: ID!) {\n      product(id: $id) {\n        id\n        title\n        description\n        status\n        vendor\n      }\n    }\n  `, {\n    variables: { id: `gid://shopify/Product/${params.id}` },\n  });\n\n  const { data } = await response.json();\n\n  return json({ product: data.product });\n}\n\nexport async function action({ request, params }) {\n  const { admin } = await authenticate.admin(request);\n\n  const formData = await request.formData();\n  const title = formData.get(\"title\");\n  const description = formData.get(\"description\");\n\n  const response = await admin.graphql(`\n    mutation UpdateProduct($input: ProductInput!) {\n      productUpdate(input: $input) {\n        product {\n          id\n          title\n        }\n        userErrors {\n          field\n          message\n        }\n      }\n    }\n  `, {\n    variables: {\n      input: {\n        id: `gid://shopify/Product/${params.id}`,\n        title,\n        description,\n      },\n    },\n  });\n\n  const { data } = await response.json();\n\n  if (data.productUpdate.userErrors.length > 0) {\n    return json({ errors: data.productUpdate.userErrors }, { status: 400 });\n  }\n\n  return json({ success: true });\n}\n\nexport default function ProductDetail() {\n  const { product } = useLoaderData();\n  const submit = useSubmit();\n\n  const [title, setTitle] = useState(product.title);\n  const [description, setDescription] = useState(product.description);\n\n  const handleSubmit = () => {\n    const formData = new FormData();\n    formData.append(\"title\", title);\n    formData.append(\"description\", description);\n\n    submit(formData, { method: \"post\" });\n  };\n\n  return (\n    <Page title=\"Edit Product\" backAction={{ url: \"/app\" }}>\n      <Layout>\n        <Layout.Section>\n          <Card>\n            <FormLayout>\n              <TextField\n                label=\"Title\"\n                value={title}\n                onChange={setTitle}\n                autoComplete=\"off\"\n              />\n              <TextField\n                label=\"Description\"\n                value={description}\n                onChange={setDescription}\n                multiline={4}\n                autoComplete=\"off\"\n              />\n              <Button primary onClick={handleSubmit}>\n                Save\n              </Button>\n            </FormLayout>\n          </Card>\n        </Layout.Section>\n      </Layout>\n    </Page>\n  );\n}\n```\n\n### 4. App Extensions\n\nExtend Shopify functionality with various extension types.\n\n**Admin Action Extension:**\n\nCreate button in admin product page:\n\n```bash\nshopify app generate extension\n\n# Choose: Admin action\n# Name: Export Product\n```\n\n**extensions/export-product/src/index.jsx:**\n```javascript\nimport { extend, AdminAction } from \"@shopify/admin-ui-extensions\";\n\nextend(\"Admin::Product::SubscriptionAction\", (root, { data }) => {\n  const { id, title } = data.selected[0];\n\n  const button = root.createComponent(AdminAction, {\n    title: \"Export Product\",\n    onPress: async () => {\n      // Call your app API\n      const response = await fetch(\"/api/export\", {\n        method: \"POST\",\n        body: JSON.stringify({ productId: id }),\n        headers: { \"Content-Type\": \"application/json\" },\n      });\n\n      if (response.ok) {\n        root.toast.show(\"Product exported successfully!\");\n      } else {\n        root.toast.show(\"Export failed\", { isError: true });\n      }\n    },\n  });\n\n  root.append(button);\n});\n```\n\n**Theme App Extension:**\n\nAdd app block to themes:\n\n```bash\nshopify app generate extension\n\n# Choose: Theme app extension\n# Name: Product Reviews\n```\n\n**extensions/product-reviews/blocks/reviews.liquid:**\n```liquid\n{% schema %}\n{\n  \"name\": \"Product Reviews\",\n  \"target\": \"section\",\n  \"settings\": [\n    {\n      \"type\": \"text\",\n      \"id\": \"heading\",\n      \"label\": \"Heading\",\n      \"default\": \"Customer Reviews\"\n    },\n    {\n      \"type\": \"range\",\n      \"id\": \"reviews_to_show\",\n      \"label\": \"Reviews to Show\",\n      \"min\": 1,\n      \"max\": 10,\n      \"default\": 5\n    }\n  ]\n}\n{% endschema %}\n\n<div class=\"product-reviews\">\n  <h2>{{ block.settings.heading }}</h2>\n\n  {% comment %}\n    Fetch reviews from your app API\n  {% endcomment %}\n\n  <div id=\"reviews-container\" data-product-id=\"{{ product.id }}\"></div>\n</div>\n\n<script>\n  // Fetch and render reviews\n  fetch(`/apps/reviews/api/reviews?product_id={{ product.id }}&limit={{ block.settings.reviews_to_show }}`)\n    .then(r => r.json())\n    .then(reviews => {\n      const container = document.getElementById('reviews-container');\n      container.innerHTML = reviews.map(review => `\n        <div class=\"review\">\n          <div class=\"rating\">${'â­'.repeat(review.rating)}</div>\n          <h3>${review.title}</h3>\n          <p>${review.content}</p>\n          <p class=\"author\">- ${review.author}</p>\n        </div>\n      `).join('');\n    });\n</script>\n\n{% stylesheet %}\n  .product-reviews {\n    padding: 2rem;\n  }\n\n  .review {\n    margin-bottom: 1.5rem;\n    padding-bottom: 1.5rem;\n    border-bottom: 1px solid #eee;\n  }\n\n  .rating {\n    color: #ffa500;\n    margin-bottom: 0.5rem;\n  }\n{% endstylesheet %}\n```\n\n### 5. Webhooks in Apps\n\nHandle Shopify events in your app.\n\n**app/routes/webhooks.jsx:**\n```javascript\nimport { authenticate } from \"../shopify.server\";\nimport db from \"../db.server\";\n\nexport async function action({ request }) {\n  const { topic, shop, session, admin, payload } = await authenticate.webhook(request);\n\n  console.log(`Webhook received: ${topic} from ${shop}`);\n\n  switch (topic) {\n    case \"APP_UNINSTALLED\":\n      // Clean up app data\n      await db.session.deleteMany({ where: { shop } });\n      break;\n\n    case \"PRODUCTS_CREATE\":\n      // Handle new product\n      console.log(\"New product created:\", payload.id, payload.title);\n      await handleProductCreated(payload);\n      break;\n\n    case \"PRODUCTS_UPDATE\":\n      // Handle product update\n      console.log(\"Product updated:\", payload.id);\n      await handleProductUpdated(payload);\n      break;\n\n    case \"ORDERS_CREATE\":\n      // Handle new order\n      console.log(\"New order:\", payload.id, payload.email);\n      await handleOrderCreated(payload);\n      break;\n\n    case \"CUSTOMERS_CREATE\":\n      // Handle new customer\n      await handleCustomerCreated(payload);\n      break;\n\n    default:\n      console.log(\"Unhandled webhook topic:\", topic);\n  }\n\n  return new Response(\"OK\", { status: 200 });\n}\n\nasync function handleProductCreated(product) {\n  // Process new product\n  await db.product.create({\n    data: {\n      shopifyId: product.id,\n      title: product.title,\n      handle: product.handle,\n    },\n  });\n}\n\nasync function handleOrderCreated(order) {\n  // Send email notification, update inventory, etc.\n  console.log(`Order ${order.id} received for ${order.email}`);\n}\n```\n\n**Register Webhooks (app/shopify.server.js):**\n```javascript\nimport \"@shopify/shopify-app-remix/adapters/node\";\nimport {\n  ApiVersion,\n  AppDistribution,\n  shopifyApp,\n  DeliveryMethod,\n} from \"@shopify/shopify-app-remix/server\";\n\nconst shopify = shopifyApp({\n  apiKey: process.env.SHOPIFY_API_KEY,\n  apiSecretKey: process.env.SHOPIFY_API_SECRET,\n  scopes: process.env.SCOPES?.split(\",\"),\n  appUrl: process.env.SHOPIFY_APP_URL,\n  authPathPrefix: \"/auth\",\n  sessionStorage: new SQLiteSessionStorage(),\n  distribution: AppDistribution.AppStore,\n  apiVersion: ApiVersion.October25,\n\n  webhooks: {\n    APP_UNINSTALLED: {\n      deliveryMethod: DeliveryMethod.Http,\n      callbackUrl: \"/webhooks\",\n    },\n    PRODUCTS_CREATE: {\n      deliveryMethod: DeliveryMethod.Http,\n      callbackUrl: \"/webhooks\",\n    },\n    PRODUCTS_UPDATE: {\n      deliveryMethod: DeliveryMethod.Http,\n      callbackUrl: \"/webhooks\",\n    },\n    ORDERS_CREATE: {\n      deliveryMethod: DeliveryMethod.Http,\n      callbackUrl: \"/webhooks\",\n    },\n  },\n});\n\nexport default shopify;\nexport const authenticate = shopify.authenticate;\n```\n\n### 6. App Proxy\n\nCreate custom storefront routes that access your app.\n\n**Setup in Partner Dashboard:**\n```\nSubpath prefix: apps\nSubpath: reviews\nProxy URL: https://your-app.com/api/proxy\n```\n\n**Result:**\n```\nhttps://store.com/apps/reviews â†’ proxies to â†’ https://your-app.com/api/proxy\n```\n\n**Handle Proxy Requests (app/routes/api.proxy.jsx):**\n```javascript\nimport { json } from \"@remix-run/node\";\n\nexport async function loader({ request }) {\n  const url = new URL(request.url);\n\n  // Verify proxy request\n  const signature = url.searchParams.get(\"signature\");\n  const shop = url.searchParams.get(\"shop\");\n\n  if (!verifyProxySignature(signature, request)) {\n    return json({ error: \"Invalid signature\" }, { status: 401 });\n  }\n\n  // Handle different paths\n  const path = url.searchParams.get(\"path_prefix\");\n\n  if (path === \"/apps/reviews/product\") {\n    const productId = url.searchParams.get(\"product_id\");\n    const reviews = await getProductReviews(productId);\n\n    return json({ reviews });\n  }\n\n  return json({ message: \"App Proxy\" });\n}\n\nfunction verifyProxySignature(signature, request) {\n  // Verify HMAC signature\n  // Implementation depends on your setup\n  return true;\n}\n```\n\n### 7. Polaris UI Components\n\nUse Shopify's design system for consistent admin UI.\n\n**Common Components:**\n```javascript\nimport {\n  Page,\n  Layout,\n  Card,\n  Button,\n  TextField,\n  Select,\n  Checkbox,\n  Badge,\n  Banner,\n  DataTable,\n  Modal,\n  Toast,\n  Frame,\n} from \"@shopify/polaris\";\n\nexport default function MyPage() {\n  return (\n    <Page\n      title=\"Settings\"\n      primaryAction={{ content: \"Save\", onAction: handleSave }}\n      secondaryActions={[{ content: \"Cancel\", onAction: handleCancel }]}\n    >\n      <Layout>\n        <Layout.Section>\n          <Card title=\"General Settings\" sectioned>\n            <TextField\n              label=\"App Name\"\n              value={name}\n              onChange={setName}\n            />\n\n            <Select\n              label=\"Status\"\n              options={[\n                { label: \"Active\", value: \"active\" },\n                { label: \"Draft\", value: \"draft\" },\n              ]}\n              value={status}\n              onChange={setStatus}\n            />\n\n            <Checkbox\n              label=\"Enable notifications\"\n              checked={notifications}\n              onChange={setNotifications}\n            />\n          </Card>\n        </Layout.Section>\n\n        <Layout.Section secondary>\n          <Card title=\"Status\" sectioned>\n            <Badge status=\"success\">Active</Badge>\n          </Card>\n        </Layout.Section>\n      </Layout>\n    </Page>\n  );\n}\n```\n\n### 8. Deployment\n\nDeploy Shopify apps to production.\n\n**Deploy to Cloudflare Workers:**\n\n**wrangler.toml:**\n```toml\nname = \"shopify-app\"\ncompatibility_date = \"2025-11-10\"\nmain = \"build/index.js\"\n\n[vars]\nSHOPIFY_API_KEY = \"your_api_key\"\n\n[[kv_namespaces]]\nbinding = \"SESSIONS\"\nid = \"your_kv_namespace_id\"\n```\n\n**Deploy:**\n```bash\n# Build app\nnpm run build\n\n# Deploy to Cloudflare\nwrangler deploy\n```\n\n**Environment Secrets:**\n```bash\n# Add secrets\nwrangler secret put SHOPIFY_API_SECRET\nwrangler secret put DATABASE_URL\n```\n\n## Best Practices\n\n1. **Use Shopify CLI** for app scaffolding and development\n2. **Implement proper OAuth** with HMAC verification\n3. **Handle webhook events** for real-time updates\n4. **Use Polaris** for consistent admin UI\n5. **Test in development store** before production\n6. **Implement error handling** for all API calls\n7. **Store session data securely** (encrypted database)\n8. **Follow Shopify app requirements** for listing\n9. **Implement app billing** for monetization\n10. **Use app extensions** to enhance merchant experience\n\n## Integration with Other Skills\n\n- **shopify-api** - Use when making API calls from your app\n- **shopify-liquid** - Use when creating theme app extensions\n- **shopify-debugging** - Use when troubleshooting app issues\n- **shopify-performance** - Use when optimizing app performance\n\n## Quick Reference\n\n```bash\n# Create app\nshopify app init\n\n# Start development\nshopify app dev\n\n# Generate extension\nshopify app generate extension\n\n# Deploy app\nshopify app deploy\n\n# Configure webhooks\n# Edit shopify.app.toml\n```\n",
        "plugins/shopify-developer/skills/shopify-debugging/SKILL.md": "---\nname: shopify-debugging\ndescription: Complete debugging and troubleshooting guide for Shopify including Liquid errors, theme preview debugging, API error handling, JavaScript console debugging, network request inspection, cart issues, checkout problems, and common error codes. Use when debugging Liquid syntax errors, troubleshooting theme rendering issues, fixing API errors, debugging JavaScript, investigating cart problems, or resolving webhook failures.\n---\n\n# Shopify Debugging & Troubleshooting\n\nExpert guidance for debugging Shopify themes, apps, and API integrations with practical solutions to common issues.\n\n## When to Use This Skill\n\nInvoke this skill when:\n\n- Debugging Liquid template errors or syntax issues\n- Troubleshooting theme rendering problems\n- Fixing API errors (GraphQL, REST)\n- Debugging JavaScript errors in themes or apps\n- Investigating cart or checkout issues\n- Resolving webhook delivery failures\n- Troubleshooting OAuth authentication problems\n- Debugging theme preview or customizer issues\n- Investigating slow page loads or performance problems\n- Fixing metafield or metaobject access errors\n- Resolving CORS or network request issues\n\n## Core Capabilities\n\n### 1. Liquid Debugging\n\nDebug Liquid template errors and rendering issues.\n\n**Enable Theme Preview:**\n```\n1. Go to Online Store > Themes\n2. Click \"Customize\" on your theme\n3. Open browser DevTools (F12)\n4. Check Console for Liquid errors\n```\n\n**Common Liquid Errors:**\n\n**Syntax Error:**\n```liquid\n{# âŒ Error: Missing endif #}\n{% if product.available %}\n  <button>Add to Cart</button>\n{# Missing {% endif %} #}\n\n{# âœ… Fixed #}\n{% if product.available %}\n  <button>Add to Cart</button>\n{% endif %}\n```\n\n**Undefined Variable:**\n```liquid\n{# âŒ Error: product undefined on collection page #}\n{{ product.title }}\n\n{# âœ… Fixed: Check context #}\n{% if product %}\n  {{ product.title }}\n{% else %}\n  {# Not on product page #}\n{% endif %}\n```\n\n**Invalid Filter:**\n```liquid\n{# âŒ Error: Unknown filter #}\n{{ product.price | format_money }}\n\n{# âœ… Fixed: Correct filter name #}\n{{ product.price | money }}\n```\n\n**Debug Output:**\n```liquid\n{# Output variable as JSON #}\n{{ product | json }}\n\n{# Check variable type #}\n{{ product.class }}\n\n{# Check if variable exists #}\n{% if product %}\n  Product exists\n{% else %}\n  Product is nil\n{% endif %}\n\n{# Output all properties #}\n<pre>{{ product | json }}</pre>\n```\n\n**Console Logging from Liquid:**\n```liquid\n<script>\n  console.log('Product ID:', {{ product.id }});\n  console.log('Product data:', {{ product | json }});\n  console.log('Cart:', {{ cart | json }});\n</script>\n```\n\n### 2. JavaScript Debugging\n\nDebug JavaScript errors in themes and apps.\n\n**Browser Console:**\n```javascript\n// Log to console\nconsole.log('Debug:', variable);\nconsole.error('Error:', error);\nconsole.warn('Warning:', warning);\n\n// Log object properties\nconsole.table(data);\n\n// Group related logs\nconsole.group('Cart Operations');\nconsole.log('Cart ID:', cartId);\nconsole.log('Items:', items);\nconsole.groupEnd();\n\n// Time operations\nconsole.time('API Call');\nawait fetch('/api/data');\nconsole.timeEnd('API Call');\n\n// Stack trace\nconsole.trace('Execution path');\n```\n\n**Breakpoints:**\n```javascript\n// Programmatic breakpoint\ndebugger;\n\n// Set in browser DevTools:\n// Sources tab > Click line number\n```\n\n**Error Handling:**\n```javascript\n// âŒ Unhandled error\nconst data = await fetch('/api/data').then(r => r.json());\n\n// âœ… Proper error handling\ntry {\n  const response = await fetch('/api/data');\n\n  if (!response.ok) {\n    throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n  }\n\n  const data = await response.json();\n  console.log('Data:', data);\n} catch (error) {\n  console.error('Failed to fetch data:', error);\n  // Show user-friendly error message\n  alert('Failed to load data. Please try again.');\n}\n```\n\n**Network Debugging:**\n```\n1. Open DevTools > Network tab\n2. Filter by XHR or Fetch\n3. Click request to see:\n   - Request headers\n   - Request payload\n   - Response headers\n   - Response body\n   - Timing information\n```\n\n### 3. API Error Debugging\n\nDebug GraphQL and REST API errors.\n\n**GraphQL Errors:**\n\nError response format:\n```json\n{\n  \"errors\": [\n    {\n      \"message\": \"Field 'invalidField' doesn't exist on type 'Product'\",\n      \"locations\": [{ \"line\": 3, \"column\": 5 }],\n      \"path\": [\"product\", \"invalidField\"],\n      \"extensions\": {\n        \"code\": \"FIELD_NOT_FOUND\",\n        \"typeName\": \"Product\"\n      }\n    }\n  ],\n  \"data\": null\n}\n```\n\n**Check for errors BEFORE accessing data:**\n```javascript\nconst response = await fetch(graphqlEndpoint, {\n  method: 'POST',\n  headers: {\n    'X-Shopify-Access-Token': accessToken,\n    'Content-Type': 'application/json',\n  },\n  body: JSON.stringify({ query, variables }),\n});\n\nconst { data, errors } = await response.json();\n\n// âœ… Always check errors first\nif (errors) {\n  console.error('GraphQL Errors:');\n  errors.forEach(error => {\n    console.error('Message:', error.message);\n    console.error('Location:', error.locations);\n    console.error('Path:', error.path);\n    console.error('Code:', error.extensions?.code);\n  });\n  throw new Error(errors[0].message);\n}\n\n// Now safe to use data\nconsole.log('Products:', data.products);\n```\n\n**Common GraphQL Errors:**\n\n**Authentication Error:**\n```json\n{\n  \"errors\": [{\n    \"message\": \"Access denied\",\n    \"extensions\": { \"code\": \"UNAUTHENTICATED\" }\n  }]\n}\n```\n\n**Fix:** Check access token:\n```javascript\n// Verify token is valid\nconst token = 'shpat_...';\n\n// Check token format (should start with shpat_)\nif (!token.startsWith('shpat_')) {\n  console.error('Invalid token format');\n}\n\n// Verify in headers\nheaders: {\n  'X-Shopify-Access-Token': token,  // âœ… Correct header\n  'Authorization': `Bearer ${token}`, // âŒ Wrong for Admin API\n}\n```\n\n**Field Not Found:**\n```json\n{\n  \"errors\": [{\n    \"message\": \"Field 'invalidField' doesn't exist on type 'Product'\"\n  }]\n}\n```\n\n**Fix:** Check field name in API docs:\n```graphql\n# âŒ Wrong field name\nquery {\n  product(id: \"gid://shopify/Product/123\") {\n    invalidField\n  }\n}\n\n# âœ… Correct field name\nquery {\n  product(id: \"gid://shopify/Product/123\") {\n    title\n    handle\n    status\n  }\n}\n```\n\n**Rate Limit Error:**\n```javascript\n// Check rate limit header\nconst response = await fetch(graphqlEndpoint, options);\n\nconst rateLimit = response.headers.get('X-Shopify-GraphQL-Admin-Api-Call-Limit');\nconsole.log('Rate limit:', rateLimit); // \"42/50\"\n\nif (response.status === 429) {\n  const retryAfter = response.headers.get('Retry-After');\n  console.log(`Rate limited. Retry after ${retryAfter} seconds`);\n}\n```\n\n**REST API Errors:**\n\n**404 Not Found:**\n```javascript\nconst response = await fetch(`https://${shop}/admin/api/2025-10/products/999999.json`, {\n  headers: { 'X-Shopify-Access-Token': token },\n});\n\nif (response.status === 404) {\n  console.error('Product not found');\n  // Check:\n  // 1. Product ID is correct\n  // 2. Product exists in store\n  // 3. Using correct endpoint\n}\n```\n\n**422 Unprocessable Entity:**\n```json\n{\n  \"errors\": {\n    \"title\": [\"can't be blank\"],\n    \"price\": [\"must be greater than 0\"]\n  }\n}\n```\n\n**Fix:** Validate input:\n```javascript\nconst response = await fetch(endpoint, {\n  method: 'POST',\n  headers: {\n    'X-Shopify-Access-Token': token,\n    'Content-Type': 'application/json',\n  },\n  body: JSON.stringify({\n    product: {\n      title: '',  // âŒ Empty title\n      price: -10, // âŒ Negative price\n    },\n  }),\n});\n\nif (response.status === 422) {\n  const { errors } = await response.json();\n  console.error('Validation errors:', errors);\n\n  // Fix data\n  const validProduct = {\n    title: 'Product Name',  // âœ… Valid title\n    price: 19.99,           // âœ… Valid price\n  };\n}\n```\n\n### 4. Cart Debugging\n\nDebug cart and Ajax API issues.\n\n**Cart Not Updating:**\n```javascript\n// âŒ Common mistake: Wrong variant ID\nfetch('/cart/add.js', {\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify({\n    id: '123',  // âŒ Wrong: using product ID instead of variant ID\n    quantity: 1,\n  }),\n});\n\n// âœ… Fixed: Use variant ID\nfetch('/cart/add.js', {\n  method: 'POST',\n  headers: { 'Content-Type': 'application/json' },\n  body: JSON.stringify({\n    id: 123456789,  // âœ… Variant ID (numeric)\n    quantity: 1,\n  }),\n})\n  .then(response => {\n    if (!response.ok) {\n      return response.json().then(err => {\n        console.error('Cart error:', err);\n        throw err;\n      });\n    }\n    return response.json();\n  })\n  .then(item => {\n    console.log('Added to cart:', item);\n    // Update cart UI\n  })\n  .catch(error => {\n    console.error('Failed to add to cart:', error);\n  });\n```\n\n**Get Current Cart:**\n```javascript\n// Debug current cart state\nfetch('/cart.js')\n  .then(r => r.json())\n  .then(cart => {\n    console.log('Cart:', cart);\n    console.log('Item count:', cart.item_count);\n    console.log('Total:', cart.total_price);\n    console.log('Items:', cart.items);\n\n    cart.items.forEach(item => {\n      console.log('Item:', item.product_id, item.variant_id, item.quantity);\n    });\n  });\n```\n\n**Cart AJAX Errors:**\n```javascript\n// Common error: Insufficient inventory\n{\n  \"status\": 422,\n  \"message\": \"You can only add 5 of this item to your cart\",\n  \"description\": \"Cannot add more than 5 to cart\"\n}\n\n// Fix: Check inventory before adding\nconst variant = product.variants.find(v => v.id === variantId);\n\nif (variant.inventory_quantity < quantity) {\n  alert(`Only ${variant.inventory_quantity} available`);\n} else {\n  // Add to cart\n}\n```\n\n### 5. Theme Preview Debugging\n\nDebug issues in the theme customizer.\n\n**Theme Editor Console:**\n```\n1. Open theme customizer\n2. Open DevTools (F12)\n3. Check Console for errors\n4. Look for:\n   - Liquid errors (red text)\n   - JavaScript errors\n   - Network failures\n```\n\n**Section Not Rendering:**\n```liquid\n{# Check section schema #}\n{% schema %}\n{\n  \"name\": \"My Section\",\n  \"settings\": [...]  {# âœ… Must have settings #}\n}\n{% endschema %}\n\n{# âŒ Missing schema = won't show in customizer #}\n```\n\n**Settings Not Updating:**\n```liquid\n{# âŒ Wrong: Using hardcoded value #}\n<h1>Hardcoded Title</h1>\n\n{# âœ… Fixed: Use setting #}\n<h1>{{ section.settings.title }}</h1>\n\n{% schema %}\n{\n  \"name\": \"Hero\",\n  \"settings\": [\n    {\n      \"type\": \"text\",\n      \"id\": \"title\",\n      \"label\": \"Title\",\n      \"default\": \"Welcome\"\n    }\n  ]\n}\n{% endschema %}\n```\n\n**Block Attributes Missing:**\n```liquid\n{# âŒ Missing shopify_attributes #}\n<div class=\"block\">\n  {{ block.settings.text }}\n</div>\n\n{# âœ… Fixed: Add shopify_attributes for theme editor #}\n<div class=\"block\" {{ block.shopify_attributes }}>\n  {{ block.settings.text }}\n</div>\n```\n\n### 6. Webhook Debugging\n\nDebug webhook delivery and processing.\n\n**Webhook Not Received:**\n\nCheck in Shopify Admin:\n```\n1. Settings > Notifications > Webhooks\n2. Click webhook\n3. Check \"Recent deliveries\"\n4. Look for delivery status:\n   - âœ… Success (200 OK)\n   - âŒ Failed (4xx/5xx errors)\n```\n\n**Verify Webhook HMAC:**\n```javascript\nimport crypto from 'crypto';\n\nfunction verifyWebhook(body, hmac, secret) {\n  const hash = crypto\n    .createHmac('sha256', secret)\n    .update(body, 'utf8')\n    .digest('base64');\n\n  return hash === hmac;\n}\n\n// Express example\napp.post('/webhooks/orders', (req, res) => {\n  const hmac = req.headers['x-shopify-hmac-sha256'];\n  const body = JSON.stringify(req.body);\n\n  if (!verifyWebhook(body, hmac, process.env.SHOPIFY_WEBHOOK_SECRET)) {\n    console.error('Invalid webhook HMAC');\n    return res.status(401).send('Unauthorized');\n  }\n\n  console.log('Webhook verified');\n\n  // Process webhook\n  const order = req.body;\n  console.log('Order:', order.id, order.email);\n\n  // Respond quickly (< 5 seconds)\n  res.status(200).send('OK');\n});\n```\n\n**Webhook Timeout:**\n```javascript\n// âŒ Processing takes too long (> 5 seconds)\napp.post('/webhooks/orders', async (req, res) => {\n  await processOrder(req.body);  // Slow operation\n  res.send('OK');  // Response delayed\n});\n\n// âœ… Respond immediately, process async\napp.post('/webhooks/orders', async (req, res) => {\n  const order = req.body;\n\n  // Respond quickly\n  res.status(200).send('OK');\n\n  // Process in background\n  processOrder(order).catch(console.error);\n});\n```\n\n### 7. Common Error Messages\n\n**Liquid Errors:**\n\n```\nError: Liquid syntax error: Unknown tag 'section'\nFix: Use {% section %} only in JSON templates, not .liquid files\n```\n\n```\nError: undefined method 'title' for nil:NilClass\nFix: Variable is nil. Add {% if %} check or provide default:\n{{ product.title | default: \"No title\" }}\n```\n\n```\nError: Exceeded maximum number of allowed iterations\nFix: Infinite loop detected. Check loop conditions.\n```\n\n**JavaScript Errors:**\n\n```\nTypeError: Cannot read property 'forEach' of undefined\nFix: Array is undefined. Check:\nif (items && Array.isArray(items)) {\n  items.forEach(item => { ... });\n}\n```\n\n```\nReferenceError: $ is not defined\nFix: jQuery not loaded or script runs before jQuery loads\n```\n\n```\nSyntaxError: Unexpected token <\nFix: API returned HTML error page instead of JSON. Check API endpoint.\n```\n\n**API Errors:**\n\n```\nAccess denied - check your access scopes\nFix: App needs additional permissions. Update scopes in Partner Dashboard.\n```\n\n```\nThrottled: Exceeded API rate limit\nFix: Implement rate limit handling with exponential backoff.\n```\n\n```\nField doesn't exist on type\nFix: Check API version and field availability in docs.\n```\n\n## Debugging Toolkit\n\n**Browser DevTools:**\n```\n- Console: View errors and logs\n- Network: Inspect API requests\n- Sources: Set breakpoints\n- Application: View cookies, localStorage\n- Performance: Profile page load\n```\n\n**Shopify Tools:**\n```\n- Theme Preview: Test changes before publishing\n- Theme Inspector: View section data\n- API Explorer: Test GraphQL queries\n- Webhook Logs: Check delivery status\n```\n\n**Useful Console Commands:**\n```javascript\n// Get all form data\nnew FormData(document.querySelector('form'))\n\n// View all cookies\ndocument.cookie\n\n// Check localStorage\nlocalStorage\n\n// View all global variables\nconsole.log(window)\n\n// Get computed styles\ngetComputedStyle(element)\n```\n\n## Best Practices\n\n1. **Always check for errors** before accessing data (API responses)\n2. **Use try-catch blocks** for all async operations\n3. **Log meaningful messages** with context\n4. **Verify HMAC** for all webhooks\n5. **Test in theme preview** before publishing\n6. **Monitor API rate limits** and implement backoff\n7. **Handle edge cases** (nil values, empty arrays)\n8. **Use browser DevTools** for network debugging\n9. **Check API version** compatibility\n10. **Validate input** before API calls\n\n## Integration with Other Skills\n\n- **shopify-liquid** - Use when debugging Liquid template code\n- **shopify-api** - Use when debugging API calls\n- **shopify-theme-dev** - Use when debugging theme structure issues\n- **shopify-app-dev** - Use when debugging custom apps\n- **shopify-performance** - Use when debugging slow performance\n\n## Quick Reference\n\n```javascript\n// Debug Liquid\n{{ variable | json }}\n{% if variable %}{{ variable }}{% endif %}\n\n// Debug JavaScript\nconsole.log('Debug:', data);\ndebugger;\n\n// Debug API\nconst { data, errors } = await response.json();\nif (errors) console.error(errors);\n\n// Debug Cart\nfetch('/cart.js').then(r => r.json()).then(console.log);\n\n// Debug Webhooks\nconst valid = verifyHmac(body, hmac, secret);\nconsole.log('Webhook valid:', valid);\n```\n",
        "plugins/shopify-developer/skills/shopify-liquid/SKILL.md": "---\nname: shopify-liquid\ndescription: Complete Liquid templating language reference including syntax, filters, objects, control flow, loops, and conditionals for Shopify themes. Use when working with .liquid files, creating theme templates, implementing dynamic content, debugging Liquid code, working with sections and snippets, or rendering product/collection/cart data in Shopify stores.\n---\n\n# Shopify Liquid Templating\n\nExpert guidance for Shopify's Liquid templating language including complete syntax reference, filters, objects, and best practices.\n\n## When to Use This Skill\n\nInvoke this skill when:\n\n- Working with `.liquid`, `.css.liquid`, or `.js.liquid` files\n- Creating or modifying theme templates (product, collection, cart, etc.)\n- Implementing dynamic content rendering\n- Using Liquid filters to format data (money, dates, strings)\n- Accessing Shopify objects (product, collection, cart, customer)\n- Writing conditional logic or loops in templates\n- Debugging Liquid syntax errors or output issues\n- Creating sections or snippets with Liquid logic\n- Formatting prices, dates, or other data\n\n## Core Capabilities\n\n### 1. Liquid Syntax Fundamentals\n\nThree core syntax types:\n\n**Output (display values):**\n```liquid\n{{ product.title }}\n{{ product.price | money }}\n{{ collection.products.size }}\n```\n\n**Logic (conditionals and control):**\n```liquid\n{% if product.available %}\n  <button>Add to Cart</button>\n{% else %}\n  <p>Sold Out</p>\n{% endif %}\n```\n\n**Assignment (variables):**\n```liquid\n{% assign sale_price = product.price | times: 0.8 %}\n{% capture full_title %}{{ collection.title }} - {{ product.title }}{% endcapture %}\n```\n\n**Whitespace control:**\n```liquid\n{%- if condition -%}\n  Content (strips whitespace)\n{%- endif -%}\n```\n\n### 2. Control Flow Tags\n\n**Conditionals:**\n- `if/elsif/else/endif` - Standard conditionals\n- `unless/endunless` - Negated if\n- `case/when/else/endcase` - Switch statements\n\n**Logical operators:**\n- `and`, `or` - Combine conditions\n- `==`, `!=`, `>`, `<`, `>=`, `<=` - Comparisons\n- `contains` - Substring/array search\n\n**Example:**\n```liquid\n{% if product.available and product.price < 100 %}\n  Affordable and in stock\n{% elsif product.available %}\n  Available but pricey\n{% else %}\n  Out of stock\n{% endif %}\n```\n\n### 3. Iteration (Loops)\n\n**for loop:**\n```liquid\n{% for product in collection.products %}\n  {{ product.title }}\n{% endfor %}\n\n{# With modifiers #}\n{% for product in collection.products limit: 5 offset: 10 reversed %}\n  {{ product.title }}\n{% endfor %}\n```\n\n**forloop object:**\n```liquid\n{% for item in array %}\n  {{ forloop.index }}      {# 1-based index #}\n  {{ forloop.index0 }}     {# 0-based index #}\n  {{ forloop.first }}      {# Boolean: first item #}\n  {{ forloop.last }}       {# Boolean: last item #}\n  {{ forloop.length }}     {# Total items #}\n{% endfor %}\n```\n\n**Pagination:**\n```liquid\n{% paginate collection.products by 12 %}\n  {% for product in paginate.collection.products %}\n    {% render 'product-card', product: product %}\n  {% endfor %}\n\n  {% if paginate.pages > 1 %}\n    {{ paginate | default_pagination }}\n  {% endif %}\n{% endpaginate %}\n```\n\n### 4. Essential Filters\n\n**Money formatting:**\n```liquid\n{{ 1000 | money }}                          {# $10.00 #}\n{{ 1000 | money_without_currency }}         {# 10.00 #}\n{{ 1000 | money_without_trailing_zeros }}   {# $10 #}\n```\n\n**String manipulation:**\n```liquid\n{{ \"hello\" | upcase }}                {# HELLO #}\n{{ \"hello\" | capitalize }}            {# Hello #}\n{{ \"hello world\" | truncate: 8 }}     {# hello... #}\n{{ \"a,b,c\" | split: \",\" }}            {# [\"a\",\"b\",\"c\"] #}\n{{ text | strip_html }}               {# Remove HTML tags #}\n```\n\n**Array/collection:**\n```liquid\n{{ array | first }}                              {# First element #}\n{{ array | last }}                               {# Last element #}\n{{ array | size }}                               {# Count #}\n{{ products | map: \"title\" }}                    {# Extract property #}\n{{ products | where: \"vendor\", \"Nike\" }}         {# Filter #}\n{{ products | sort: \"price\" }}                   {# Sort #}\n{{ array | join: \", \" }}                         {# Join with separator #}\n```\n\n**Date formatting:**\n```liquid\n{{ order.created_at | date: '%B %d, %Y' }}      {# November 10, 2025 #}\n{{ order.created_at | date: '%m/%d/%Y' }}       {# 11/10/2025 #}\n{{ order.created_at | date: '%H:%M %p' }}       {# 12:39 PM #}\n```\n\n**Image handling:**\n```liquid\n{{ product.image | img_url: '500x500' }}        {# Resize image #}\n{{ product.image | img_url: 'medium' }}         {# Named size #}\n{{ 'logo.png' | asset_url }}                    {# Theme asset CDN #}\n```\n\n**Math operations:**\n```liquid\n{{ 5 | plus: 3 }}           {# 8 #}\n{{ 5 | minus: 3 }}          {# 2 #}\n{{ 5 | times: 3 }}          {# 15 #}\n{{ 10 | divided_by: 2 }}    {# 5 #}\n{{ 1.567 | round: 2 }}      {# 1.57 #}\n```\n\n**Chaining filters:**\n```liquid\n{{ collection.products | where: \"available\" | map: \"title\" | sort | first }}\n```\n\n### 5. Key Shopify Objects\n\n**Product object:**\n```liquid\n{{ product.title }}\n{{ product.price | money }}\n{{ product.available }}              {# Boolean #}\n{{ product.vendor }}\n{{ product.type }}\n{{ product.images }}                 {# Array #}\n{{ product.variants }}               {# Array #}\n{{ product.selected_variant }}\n{{ product.metafields.custom.field }}\n```\n\n**Collection object:**\n```liquid\n{{ collection.title }}\n{{ collection.products }}            {# Array #}\n{{ collection.products_count }}\n{{ collection.all_tags }}\n{{ collection.sort_by }}\n{{ collection.filters }}\n```\n\n**Cart object (global):**\n```liquid\n{{ cart.item_count }}\n{{ cart.total_price | money }}\n{{ cart.items }}                     {# Array of line items #}\n{{ cart.empty? }}                    {# Boolean #}\n```\n\n**Customer object:**\n```liquid\n{{ customer.name }}\n{{ customer.email }}\n{{ customer.orders_count }}\n{{ customer.total_spent | money }}\n{{ customer.default_address }}\n```\n\n**Global objects:**\n```liquid\n{{ shop.name }}\n{{ shop.currency }}\n{{ shop.url }}\n{{ request.path }}\n{{ request.page_type }}             {# \"product\", \"collection\", etc. #}\n{{ settings.color_primary }}        {# Theme settings #}\n```\n\n### 6. Template Inclusion\n\n**render (isolated scope - PREFERRED):**\n```liquid\n{% render 'product-card', product: product, show_price: true %}\n\n{# Render for each item #}\n{% render 'product-card' for collection.products as item %}\n```\n\n**include (shared scope - LEGACY):**\n```liquid\n{% include 'product-details' %}\n```\n\n**section (dynamic sections):**\n```liquid\n{% section 'featured-product' %}\n```\n\n## Common Patterns\n\n### Product availability check\n```liquid\n{% if product.available %}\n  <button type=\"submit\">Add to Cart</button>\n{% elsif product.selected_variant.incoming %}\n  <p>Coming {{ product.selected_variant.incoming_date | date: '%B %d' }}</p>\n{% else %}\n  <p class=\"sold-out\">Sold Out</p>\n{% endif %}\n```\n\n### Price display with sale\n```liquid\n{% if product.compare_at_price > product.price %}\n  <span class=\"sale-price\">{{ product.price | money }}</span>\n  <span class=\"original-price\">{{ product.compare_at_price | money }}</span>\n  <span class=\"savings\">Save {{ product.compare_at_price | minus: product.price | money }}</span>\n{% else %}\n  <span class=\"price\">{{ product.price | money }}</span>\n{% endif %}\n```\n\n### Loop through variants\n```liquid\n{% for variant in product.variants %}\n  <option\n    value=\"{{ variant.id }}\"\n    {% unless variant.available %}disabled{% endunless %}\n  >\n    {{ variant.title }} - {{ variant.price | money }}\n  </option>\n{% endfor %}\n```\n\n### Check collection tags\n```liquid\n{% if collection.all_tags contains 'sale' %}\n  <div class=\"sale-banner\">Sale items available!</div>\n{% endif %}\n```\n\n## Best Practices\n\n1. **Use whitespace control** (`{%-` and `-%}`) to keep HTML clean\n2. **Prefer `render` over `include`** for better performance and isolation\n3. **Cache expensive operations** by assigning to variables\n4. **Use descriptive variable names** for clarity\n5. **Leverage filters** instead of complex logic when possible\n6. **Check for existence** before accessing nested properties\n7. **Use `default` filter** for fallback values: `{{ product.metafield | default: \"N/A\" }}`\n\n## Detailed References\n\nFor comprehensive documentation:\n\n- **[references/syntax.md](references/syntax.md)** - Complete syntax reference with all tags\n- **[references/filters.md](references/filters.md)** - All 60+ filters with examples\n- **[references/objects.md](references/objects.md)** - Complete object property reference\n\n## Integration with Other Skills\n\n- **shopify-theme-dev** - Use when working with theme file structure and sections\n- **shopify-api** - Use when fetching data via Ajax or GraphQL to display in Liquid\n- **shopify-debugging** - Use when troubleshooting Liquid rendering issues\n- **shopify-performance** - Use when optimizing Liquid template performance\n\n## Quick Syntax Reference\n\n```liquid\n{# Output #}\n{{ variable }}\n{{ product.title | upcase }}\n\n{# Conditionals #}\n{% if condition %}...{% elsif %}...{% else %}...{% endif %}\n{% unless condition %}...{% endunless %}\n{% case variable %}{% when value %}...{% endcase %}\n\n{# Loops #}\n{% for item in array %}...{% endfor %}\n{% for item in array limit: 5 offset: 10 %}...{% endfor %}\n{% break %} / {% continue %}\n\n{# Variables #}\n{% assign var = value %}\n{% capture var %}content{% endcapture %}\n\n{# Inclusion #}\n{% render 'snippet', param: value %}\n{% section 'section-name' %}\n\n{# Comments #}\n{% comment %}...{% endcomment %}\n{# Single line #}\n```\n",
        "plugins/shopify-developer/skills/shopify-liquid/references/filters.md": "# Liquid Filters - Complete Reference\n\nFilters modify output using pipe syntax: `{{ value | filter: parameter }}`\n\n## String Filters\n\n### upcase\n\nConvert to uppercase:\n\n```liquid\n{{ \"hello world\" | upcase }}\n{# Output: HELLO WORLD #}\n```\n\n### downcase\n\nConvert to lowercase:\n\n```liquid\n{{ \"HELLO WORLD\" | downcase }}\n{# Output: hello world #}\n```\n\n### capitalize\n\nCapitalize first letter only:\n\n```liquid\n{{ \"hello world\" | capitalize }}\n{# Output: Hello world #}\n```\n\n### reverse\n\nReverse string or array:\n\n```liquid\n{{ \"hello\" | reverse }}\n{# Output: olleh #}\n\n{{ array | reverse }}\n{# Reverses array order #}\n```\n\n### size\n\nGet character count or array length:\n\n```liquid\n{{ \"hello\" | size }}\n{# Output: 5 #}\n\n{{ collection.products | size }}\n{# Output: number of products #}\n```\n\n### remove\n\nRemove all occurrences of substring:\n\n```liquid\n{{ \"hello world world\" | remove: \"world\" }}\n{# Output: hello   #}\n```\n\n### remove_first\n\nRemove first occurrence only:\n\n```liquid\n{{ \"hello world world\" | remove_first: \"world\" }}\n{# Output: hello  world #}\n```\n\n### replace\n\nReplace all occurrences:\n\n```liquid\n{{ \"hello\" | replace: \"l\", \"L\" }}\n{# Output: heLLo #}\n```\n\n### replace_first\n\nReplace first occurrence only:\n\n```liquid\n{{ \"hello\" | replace_first: \"l\", \"L\" }}\n{# Output: heLlo #}\n```\n\n### split\n\nSplit string into array:\n\n```liquid\n{{ \"a,b,c,d\" | split: \",\" }}\n{# Output: [\"a\", \"b\", \"c\", \"d\"] #}\n\n{% assign tags = \"sale,new,featured\" | split: \",\" %}\n{% for tag in tags %}\n  {{ tag }}\n{% endfor %}\n```\n\n### strip\n\nRemove leading and trailing whitespace:\n\n```liquid\n{{ \"  hello  \" | strip }}\n{# Output: hello #}\n```\n\n### lstrip\n\nRemove leading whitespace only:\n\n```liquid\n{{ \"  hello  \" | lstrip }}\n{# Output: hello   #}\n```\n\n### rstrip\n\nRemove trailing whitespace only:\n\n```liquid\n{{ \"  hello  \" | rstrip }}\n{# Output:   hello #}\n```\n\n### truncate\n\nLimit string length with ellipsis:\n\n```liquid\n{{ \"hello world\" | truncate: 8 }}\n{# Output: hello... #}\n\n{{ \"hello world\" | truncate: 10, \"!\" }}\n{# Output: hello worl! #}\n\n{{ \"hello world\" | truncate: 50 }}\n{# Output: hello world (no truncation if shorter) #}\n```\n\n### truncatewords\n\nLimit by word count:\n\n```liquid\n{{ \"hello world testing\" | truncatewords: 2 }}\n{# Output: hello world... #}\n\n{{ \"hello world testing\" | truncatewords: 2, \"--\" }}\n{# Output: hello world-- #}\n```\n\n### append\n\nAdd string to end:\n\n```liquid\n{{ \"hello\" | append: \" world\" }}\n{# Output: hello world #}\n\n{% assign file_name = \"image\" | append: \".jpg\" %}\n{# file_name: image.jpg #}\n```\n\n### prepend\n\nAdd string to beginning:\n\n```liquid\n{{ \"world\" | prepend: \"hello \" }}\n{# Output: hello world #}\n```\n\n### newline_to_br\n\nConvert newlines to `<br>` tags:\n\n```liquid\n{{ product.description | newline_to_br }}\n{# Converts \\n to <br> #}\n```\n\n### strip_html\n\nRemove all HTML tags:\n\n```liquid\n{{ \"<p>Hello <strong>world</strong></p>\" | strip_html }}\n{# Output: Hello world #}\n```\n\n### escape\n\nEscape HTML special characters:\n\n```liquid\n{{ \"<div>Test</div>\" | escape }}\n{# Output: &lt;div&gt;Test&lt;/div&gt; #}\n```\n\n### escape_once\n\nEscape HTML but don't double-escape:\n\n```liquid\n{{ \"&lt;div&gt;\" | escape_once }}\n{# Output: &lt;div&gt; (not double-escaped) #}\n```\n\n### url_encode\n\nURL-encode string:\n\n```liquid\n{{ \"hello world\" | url_encode }}\n{# Output: hello+world #}\n\n{{ \"foo@bar.com\" | url_encode }}\n{# Output: foo%40bar.com #}\n```\n\n### url_decode\n\nDecode URL-encoded string:\n\n```liquid\n{{ \"hello+world\" | url_decode }}\n{# Output: hello world #}\n```\n\n### base64_encode\n\nEncode to base64:\n\n```liquid\n{{ \"hello\" | base64_encode }}\n{# Output: aGVsbG8= #}\n```\n\n### base64_decode\n\nDecode from base64:\n\n```liquid\n{{ \"aGVsbG8=\" | base64_decode }}\n{# Output: hello #}\n```\n\n### slice\n\nExtract substring or array slice:\n\n```liquid\n{{ \"hello\" | slice: 0, 3 }}\n{# Output: hel #}\n\n{{ \"hello\" | slice: -3, 3 }}\n{# Output: llo #}\n```\n\n## Numeric Filters\n\n### abs\n\nAbsolute value:\n\n```liquid\n{{ -5 | abs }}\n{# Output: 5 #}\n\n{{ 5 | abs }}\n{# Output: 5 #}\n```\n\n### ceil\n\nRound up to nearest integer:\n\n```liquid\n{{ 1.2 | ceil }}\n{# Output: 2 #}\n\n{{ 1.9 | ceil }}\n{# Output: 2 #}\n```\n\n### floor\n\nRound down to nearest integer:\n\n```liquid\n{{ 1.9 | floor }}\n{# Output: 1 #}\n\n{{ 1.1 | floor }}\n{# Output: 1 #}\n```\n\n### round\n\nRound to specified decimal places:\n\n```liquid\n{{ 1.5 | round }}\n{# Output: 2 #}\n\n{{ 1.567 | round: 2 }}\n{# Output: 1.57 #}\n\n{{ 1.234 | round: 1 }}\n{# Output: 1.2 #}\n```\n\n### plus\n\nAddition:\n\n```liquid\n{{ 5 | plus: 3 }}\n{# Output: 8 #}\n\n{{ product.price | plus: 1000 }}\n{# Add $10.00 (prices in cents) #}\n```\n\n### minus\n\nSubtraction:\n\n```liquid\n{{ 5 | minus: 3 }}\n{# Output: 2 #}\n```\n\n### times\n\nMultiplication:\n\n```liquid\n{{ 5 | times: 3 }}\n{# Output: 15 #}\n\n{{ product.price | times: 0.8 }}\n{# 20% discount #}\n```\n\n### divided_by\n\nInteger division:\n\n```liquid\n{{ 10 | divided_by: 2 }}\n{# Output: 5 #}\n\n{{ 10 | divided_by: 3 }}\n{# Output: 3 (integer division) #}\n\n{{ 10.0 | divided_by: 3 }}\n{# Output: 3.33... (float division) #}\n```\n\n### modulo\n\nGet remainder:\n\n```liquid\n{{ 10 | modulo: 3 }}\n{# Output: 1 #}\n\n{# Check if even #}\n{% if forloop.index | modulo: 2 == 0 %}\n  Even row\n{% endif %}\n```\n\n### at_least\n\nEnsure minimum value:\n\n```liquid\n{{ 1 | at_least: 5 }}\n{# Output: 5 #}\n\n{{ 10 | at_least: 5 }}\n{# Output: 10 #}\n```\n\n### at_most\n\nEnsure maximum value:\n\n```liquid\n{{ 100 | at_most: 50 }}\n{# Output: 50 #}\n\n{{ 10 | at_most: 50 }}\n{# Output: 10 #}\n```\n\n## Array/Collection Filters\n\n### first\n\nGet first element:\n\n```liquid\n{{ collection.products | first }}\n{# Returns first product #}\n\n{{ \"a,b,c\" | split: \",\" | first }}\n{# Output: a #}\n```\n\n### last\n\nGet last element:\n\n```liquid\n{{ collection.products | last }}\n{# Returns last product #}\n```\n\n### join\n\nJoin array with separator:\n\n```liquid\n{{ product.tags | join: \", \" }}\n{# Output: sale, new, featured #}\n```\n\n### map\n\nExtract property from each object:\n\n```liquid\n{{ collection.products | map: \"title\" }}\n{# Returns array of product titles #}\n\n{{ collection.products | map: \"title\" | join: \", \" }}\n{# Output: Product 1, Product 2, Product 3 #}\n```\n\n### sort\n\nSort array by property:\n\n```liquid\n{{ collection.products | sort: \"price\" }}\n{# Sort by price ascending #}\n\n{{ collection.products | sort: \"title\" }}\n{# Sort alphabetically #}\n```\n\n### sort_natural\n\nCase-insensitive sort:\n\n```liquid\n{{ collection.products | sort_natural: \"title\" }}\n{# Sorts: Apple, banana, Cherry (natural order) #}\n```\n\n### where\n\nFilter array by property value:\n\n```liquid\n{{ collection.products | where: \"vendor\", \"Nike\" }}\n{# Only Nike products #}\n\n{{ collection.products | where: \"available\", true }}\n{# Only available products #}\n\n{{ collection.products | where: \"type\", \"shoes\" | map: \"title\" }}\n{# Combine with map #}\n```\n\n### uniq\n\nRemove duplicates:\n\n```liquid\n{{ collection.all_vendors | uniq }}\n{# Unique vendor names #}\n```\n\n### limit\n\nLimit array to N items:\n\n```liquid\n{{ collection.products | limit: 5 }}\n{# First 5 products #}\n```\n\n### offset\n\nSkip first N items:\n\n```liquid\n{{ collection.products | offset: 10 }}\n{# Products from 11th onward #}\n```\n\n### concat\n\nMerge two arrays:\n\n```liquid\n{% assign array1 = \"a,b,c\" | split: \",\" %}\n{% assign array2 = \"d,e,f\" | split: \",\" %}\n{{ array1 | concat: array2 | join: \", \" }}\n{# Output: a, b, c, d, e, f #}\n```\n\n### compact\n\nRemove nil values from array:\n\n```liquid\n{{ array | compact }}\n{# Removes nil/null elements #}\n```\n\n## Shopify-Specific Filters\n\n### money\n\nFormat as currency with symbol:\n\n```liquid\n{{ 1000 | money }}\n{# Output: $10.00 #}\n\n{{ 1599 | money }}\n{# Output: $15.99 #}\n```\n\n### money_without_currency\n\nFormat without currency symbol:\n\n```liquid\n{{ 1000 | money_without_currency }}\n{# Output: 10.00 #}\n```\n\n### money_without_trailing_zeros\n\nRemove unnecessary decimals:\n\n```liquid\n{{ 1000 | money_without_trailing_zeros }}\n{# Output: $10 #}\n\n{{ 1050 | money_without_trailing_zeros }}\n{# Output: $10.50 #}\n```\n\n### weight_with_unit\n\nAdd weight unit:\n\n```liquid\n{{ 500 | weight_with_unit }}\n{# Output: 500 g #}\n\n{{ product.variants.first.weight | weight_with_unit }}\n```\n\n### asset_url\n\nGet theme asset CDN URL:\n\n```liquid\n{{ 'logo.png' | asset_url }}\n{# Output: //cdn.shopify.com/s/files/1/0000/0000/t/1/assets/logo.png #}\n```\n\n### img_url\n\nGenerate image URL with size:\n\n```liquid\n{{ product.featured_image | img_url: '500x500' }}\n{# Resize to 500x500 #}\n\n{{ product.featured_image | img_url: 'large' }}\n{# Named size: pico, icon, thumb, small, compact, medium, large, grande, 1024x1024, 2048x2048 #}\n\n{{ product.featured_image | img_url: '500x500', crop: 'center' }}\n{# With crop #}\n```\n\n### link_to_type\n\nCreate link to product type collection:\n\n```liquid\n{{ product.type | link_to_type }}\n{# Output: <a href=\"/collections/types?q=Shoes\">Shoes</a> #}\n```\n\n### link_to_vendor\n\nCreate link to vendor collection:\n\n```liquid\n{{ product.vendor | link_to_vendor }}\n{# Output: <a href=\"/collections/vendors?q=Nike\">Nike</a> #}\n```\n\n### link_to_tag\n\nCreate link to tag filter:\n\n```liquid\n{{ tag | link_to_tag: tag }}\n{# Output: <a href=\"/collections/all/sale\">sale</a> #}\n```\n\n### highlight\n\nHighlight search terms:\n\n```liquid\n{{ product.title | highlight: search.terms }}\n{# Wraps search terms in <strong class=\"highlight\"> tags #}\n```\n\n### highlight_active_tag\n\nHighlight current tag:\n\n```liquid\n{{ tag | highlight_active_tag: tag }}\n{# Wraps current tag in <span class=\"active\"> #}\n```\n\n### payment_type_img_url\n\nGet payment icon URL:\n\n```liquid\n{{ 'visa' | payment_type_img_url }}\n{# Returns Shopify-hosted Visa icon URL #}\n```\n\n### placeholder_svg_tag\n\nGenerate placeholder SVG:\n\n```liquid\n{{ 'product-1' | placeholder_svg_tag }}\n{# Generates placeholder product image SVG #}\n\n{{ 'collection-1' | placeholder_svg_tag: 'custom-class' }}\n{# With custom CSS class #}\n```\n\n### color_to_rgb\n\nConvert hex to RGB:\n\n```liquid\n{{ '#ff0000' | color_to_rgb }}\n{# Output: rgb(255, 0, 0) #}\n```\n\n### color_to_hsl\n\nConvert hex to HSL:\n\n```liquid\n{{ '#ff0000' | color_to_hsl }}\n{# Output: hsl(0, 100%, 50%) #}\n```\n\n### color_extract\n\nExtract color component:\n\n```liquid\n{{ '#ff0000' | color_extract: 'red' }}\n{# Output: 255 #}\n```\n\n### color_brightness\n\nCalculate brightness:\n\n```liquid\n{{ '#ff0000' | color_brightness }}\n{# Output: brightness value 0-255 #}\n```\n\n### color_modify\n\nModify color properties:\n\n```liquid\n{{ '#ff0000' | color_modify: 'alpha', 0.5 }}\n{# Adjust alpha channel #}\n```\n\n## Date Filters\n\n### date\n\nFormat date using strftime:\n\n```liquid\n{{ order.created_at | date: '%B %d, %Y' }}\n{# Output: November 10, 2025 #}\n\n{{ order.created_at | date: '%m/%d/%Y' }}\n{# Output: 11/10/2025 #}\n\n{{ order.created_at | date: '%Y-%m-%d %H:%M:%S' }}\n{# Output: 2025-11-10 14:30:00 #}\n```\n\n**Common format codes:**\n\n- `%Y` - 4-digit year (2025)\n- `%y` - 2-digit year (25)\n- `%m` - Month number (11)\n- `%B` - Full month (November)\n- `%b` - Short month (Nov)\n- `%d` - Day of month (10)\n- `%e` - Day without leading zero (10)\n- `%A` - Full weekday (Monday)\n- `%a` - Short weekday (Mon)\n- `%H` - Hour 24-hour (14)\n- `%I` - Hour 12-hour (02)\n- `%M` - Minutes (30)\n- `%S` - Seconds (45)\n- `%p` - AM/PM\n- `%z` - Timezone offset (+0000)\n\n**Examples:**\n\n```liquid\n{{ \"now\" | date: \"%Y-%m-%d\" }}\n{# Current date: 2025-11-10 #}\n\n{{ article.published_at | date: \"%B %d, %Y at %I:%M %p\" }}\n{# November 10, 2025 at 02:30 PM #}\n```\n\n## URL Filters\n\n### url_for_type\n\nGet collection URL for product type:\n\n```liquid\n{{ product.type | url_for_type }}\n{# Output: /collections/types?q=Shoes #}\n```\n\n### url_for_vendor\n\nGet collection URL for vendor:\n\n```liquid\n{{ product.vendor | url_for_vendor }}\n{# Output: /collections/vendors?q=Nike #}\n```\n\n### within\n\nScope URL within collection:\n\n```liquid\n{{ product.url | within: collection }}\n{# Output: /collections/sale/products/product-handle #}\n```\n\n### default_pagination\n\nGenerate pagination HTML:\n\n```liquid\n{{ paginate | default_pagination }}\n{# Outputs complete pagination HTML #}\n```\n\n## Utility Filters\n\n### default\n\nProvide fallback value:\n\n```liquid\n{{ product.metafield | default: \"N/A\" }}\n{# If metafield is nil, outputs \"N/A\" #}\n\n{{ variant.title | default: \"Default\" }}\n```\n\n### json\n\nConvert to JSON:\n\n```liquid\n{{ product | json }}\n{# Outputs product object as JSON string #}\n\n<script>\nvar productData = {{ product | json }};\n</script>\n```\n\n## Filter Chaining\n\nFilters execute left-to-right and can be chained:\n\n```liquid\n{{ \"hello world\" | upcase | replace: \"WORLD\", \"SHOPIFY\" }}\n{# Output: HELLO SHOPIFY #}\n\n{{ collection.products | where: \"available\" | map: \"title\" | sort | join: \", \" }}\n{# Filter â†’ extract â†’ sort â†’ join #}\n\n{{ product.price | times: 0.8 | round: 2 | money }}\n{# Calculate 20% discount, round, format as money #}\n\n{{ product.description | strip_html | truncatewords: 50 | escape }}\n{# Strip HTML â†’ truncate â†’ escape for safety #}\n```\n\n## Performance Tips\n\n1. **Cache filtered results** if used multiple times:\n\n```liquid\n{# âŒ Inefficient: #}\n{% for i in (1..10) %}\n  {{ collection.products | where: \"available\" | size }}\n{% endfor %}\n\n{# âœ… Efficient: #}\n{% assign available_products = collection.products | where: \"available\" %}\n{% for i in (1..10) %}\n  {{ available_products.size }}\n{% endfor %}\n```\n\n2. **Use `limit` and `offset` filters** instead of manual iteration control\n\n3. **Combine filters intelligently** to reduce operations:\n\n```liquid\n{# âŒ Less efficient: #}\n{% assign titles = collection.products | map: \"title\" %}\n{% assign sorted = titles | sort %}\n{% assign limited = sorted | limit: 5 %}\n\n{# âœ… More efficient: #}\n{% assign limited_titles = collection.products | map: \"title\" | sort | limit: 5 %}\n```\n",
        "plugins/shopify-developer/skills/shopify-liquid/references/objects.md": "# Liquid Objects - Complete Reference\n\n## Global Objects (Available Everywhere)\n\n### shop\n\nStore-level information:\n\n```liquid\n{{ shop.name }}              {# Store name #}\n{{ shop.url }}               {# Store URL (https://...) #}\n{{ shop.description }}       {# Store tagline/description #}\n{{ shop.currency }}          {# ISO currency code: USD, GBP, EUR #}\n{{ shop.money_format }}      {# Money format string: ${{amount}} #}\n{{ shop.permanent_domain }}  {# Domain: store.myshopify.com #}\n{{ shop.domain }}            {# Primary domain #}\n{{ shop.email }}             {# Support email #}\n{{ shop.phone }}             {# Support phone #}\n{{ shop.address }}           {# Store address object #}\n{{ shop.address.city }}\n{{ shop.address.province }}\n{{ shop.address.country }}\n{{ shop.address.zip }}\n{{ shop.enabled_payment_types }}  {# Array of enabled payment methods #}\n{{ shop.checkout.privacy_policy_url }}\n{{ shop.checkout.terms_of_service_url }}\n{{ shop.checkout.refund_policy_url }}\n```\n\n### request\n\nRequest context and routing:\n\n```liquid\n{{ request.path }}                {# Current URL path: /products/handle #}\n{{ request.host }}                {# Current domain #}\n{{ request.origin }}              {# Protocol + host #}\n{{ request.page_type }}           {# \"product\", \"collection\", \"index\", etc. #}\n{{ request.locale.iso_code }}     {# Language: \"en\", \"fr\", \"es\" #}\n{{ request.locale.root_url }}     {# Root URL for locale #}\n{{ request.design_mode }}         {# Boolean: theme editor active #}\n{{ request.visual_preview_mode }} {# Boolean: theme preview active #}\n\n{# Query parameters #}\n{{ request.query_string }}        {# Full query string #}\n\n{# Build canonical URL #}\n{{ request.canonical_url }}       {# Full canonical URL #}\n{{ request.path_with_query }}     {# Path + query string #}\n```\n\n### settings\n\nTheme settings (from settings_schema.json):\n\n```liquid\n{# Colors #}\n{{ settings.color_primary }}\n{{ settings.color_secondary }}\n{{ settings.color_body_bg }}\n\n{# Typography #}\n{{ settings.type_header_font }}\n{{ settings.type_body_font }}\n\n{# Layout #}\n{{ settings.layout_container_width }}\n{{ settings.layout_sidebar_enabled }}\n\n{# Media #}\n{{ settings.logo }}              {# Image object #}\n{{ settings.logo.src }}\n{{ settings.logo.width }}\n{{ settings.logo.height }}\n{{ settings.logo.alt }}\n\n{# Text content #}\n{{ settings.announcement_text }}\n{{ settings.footer_text }}\n\n{# Boolean settings #}\n{% if settings.show_breadcrumbs %}\n  {# Render breadcrumbs #}\n{% endif %}\n\n{# URL settings #}\n{{ settings.social_twitter_link }}\n{{ settings.social_facebook_link }}\n```\n\n### routes\n\nURL routes to standard pages:\n\n```liquid\n{{ routes.root_url }}               {# / #}\n{{ routes.account_url }}            {# /account #}\n{{ routes.account_login_url }}      {# /account/login #}\n{{ routes.account_logout_url }}     {# /account/logout #}\n{{ routes.account_register_url }}   {# /account/register #}\n{{ routes.account_addresses_url }}  {# /account/addresses #}\n{{ routes.collections_url }}        {# /collections #}\n{{ routes.all_products_collection_url }}  {# /collections/all #}\n{{ routes.search_url }}             {# /search #}\n{{ routes.cart_url }}               {# /cart #}\n{{ routes.cart_add_url }}           {# /cart/add #}\n{{ routes.cart_change_url }}        {# /cart/change #}\n{{ routes.cart_clear_url }}         {# /cart/clear #}\n{{ routes.cart_update_url }}        {# /cart/update #}\n```\n\n### section\n\nCurrent section context (within sections):\n\n```liquid\n{{ section.id }}                  {# Unique ID: \"section-1234567890\" #}\n{{ section.settings.title }}      {# Section setting #}\n{{ section.settings.background_color }}\n{{ section.index }}               {# Position on page #}\n{{ section.location }}            {# Where section appears #}\n\n{# Blocks #}\n{{ section.blocks }}              {# Array of blocks #}\n{{ section.blocks.size }}         {# Number of blocks #}\n\n{% for block in section.blocks %}\n  {{ block.id }}\n  {{ block.type }}\n  {{ block.settings.text }}\n  {{ block.shopify_attributes }}  {# Required for theme editor #}\n{% endfor %}\n\n{# Blocks by type #}\n{{ section.blocks_by_type }}      {# Organized by type #}\n```\n\n### block\n\nCurrent block context (within section blocks):\n\n```liquid\n{{ block.id }}                    {# Unique ID: \"block-9876543210\" #}\n{{ block.type }}                  {# Block type name #}\n{{ block.settings.text }}         {# Block setting #}\n{{ block.shopify_attributes }}    {# Required for theme editor #}\n\n{# Example usage in section #}\n{% for block in section.blocks %}\n  <div {{ block.shopify_attributes }}>\n    {% case block.type %}\n      {% when 'heading' %}\n        <h2>{{ block.settings.title }}</h2>\n      {% when 'text' %}\n        <p>{{ block.settings.content }}</p>\n    {% endcase %}\n  </div>\n{% endfor %}\n```\n\n## Page Context Objects\n\n### product\n\nProduct object (on product pages):\n\n```liquid\n{# Core properties #}\n{{ product.id }}                   {# Numeric ID #}\n{{ product.title }}                {# Product name #}\n{{ product.handle }}               {# URL slug #}\n{{ product.description }}          {# Full HTML description #}\n{{ product.vendor }}               {# Brand/manufacturer #}\n{{ product.type }}                 {# Category #}\n{{ product.url }}                  {# Product URL #}\n{{ product.available }}            {# Boolean: any variant in stock #}\n{{ product.published_at }}         {# Publication timestamp #}\n{{ product.created_at }}           {# Creation timestamp #}\n{{ product.updated_at }}           {# Last modified timestamp #}\n\n{# Pricing (in cents) #}\n{{ product.price }}                {# Current variant price #}\n{{ product.price_min }}            {# Cheapest variant #}\n{{ product.price_max }}            {# Most expensive variant #}\n{{ product.price_varies }}         {# Boolean: different prices #}\n{{ product.compare_at_price }}     {# Original price for sales #}\n{{ product.compare_at_price_min }}\n{{ product.compare_at_price_max }}\n{{ product.compare_at_price_varies }}\n\n{# Images #}\n{{ product.featured_image }}       {# Primary image object #}\n{{ product.featured_image.src }}\n{{ product.featured_image.width }}\n{{ product.featured_image.height }}\n{{ product.featured_image.alt }}\n{{ product.featured_image | img_url: '500x500' }}\n\n{{ product.images }}               {# Array of all images #}\n{{ product.images.size }}          {# Image count #}\n\n{% for image in product.images %}\n  <img src=\"{{ image | img_url: '300x300' }}\" alt=\"{{ image.alt }}\">\n{% endfor %}\n\n{{ product.media }}                {# Array of all media (images, videos, 3D) #}\n\n{# Variants #}\n{{ product.variants }}             {# Array of variants #}\n{{ product.variants.size }}        {# Variant count #}\n{{ product.selected_variant }}     {# Currently selected variant #}\n{{ product.selected_or_first_available_variant }}\n{{ product.first_available_variant }}\n{{ product.has_only_default_variant }}  {# Boolean: single variant #}\n\n{# Options #}\n{{ product.options }}              {# Array: [\"Size\", \"Color\"] #}\n{{ product.options_with_values }}  {# Array of option objects #}\n\n{% for option in product.options_with_values %}\n  <label>{{ option.name }}</label>\n  <select>\n    {% for value in option.values %}\n      <option>{{ value }}</option>\n    {% endfor %}\n  </select>\n{% endfor %}\n\n{# Collections #}\n{{ product.collections }}          {# Array of collections #}\n{{ product.collections.size }}\n\n{# Tags #}\n{{ product.tags }}                 {# Array of tags #}\n{{ product.tags | join: \", \" }}\n\n{# Custom data #}\n{{ product.metafields.namespace.key }}\n{{ product.metafields.custom.field_name }}\n\n{# Template #}\n{{ product.template_suffix }}      {# Template variant: \"alternate\" #}\n```\n\n### variant\n\nVariant object (product.variants, product.selected_variant):\n\n```liquid\n{{ variant.id }}                   {# Variant ID #}\n{{ variant.product_id }}           {# Parent product ID #}\n{{ variant.title }}                {# \"Red / Medium\" #}\n{{ variant.price }}                {# Price in cents #}\n{{ variant.compare_at_price }}     {# Original price #}\n{{ variant.sku }}                  {# SKU code #}\n{{ variant.barcode }}              {# Barcode #}\n{{ variant.weight }}               {# Weight in grams #}\n{{ variant.weight_unit }}          {# \"kg\", \"lb\", etc. #}\n{{ variant.weight_in_unit }}       {# Weight in configured unit #}\n\n{# Availability #}\n{{ variant.available }}            {# Boolean: in stock #}\n{{ variant.inventory_quantity }}   {# Current stock level #}\n{{ variant.inventory_policy }}     {# \"continue\" or \"deny\" #}\n{{ variant.inventory_management }} {# \"shopify\" or null #}\n\n{# Options #}\n{{ variant.option1 }}              {# First option value: \"Red\" #}\n{{ variant.option2 }}              {# Second option value: \"Medium\" #}\n{{ variant.option3 }}              {# Third option value #}\n{{ variant.options }}              {# Array: [\"Red\", \"Medium\"] #}\n\n{# Image #}\n{{ variant.featured_image }}       {# Variant-specific image #}\n{{ variant.image }}                {# Same as featured_image #}\n\n{# URL #}\n{{ variant.url }}                  {# Product URL with variant param #}\n\n{# Metafields #}\n{{ variant.metafields.namespace.key }}\n```\n\n### collection\n\nCollection object (on collection pages):\n\n```liquid\n{# Core properties #}\n{{ collection.id }}                {# Numeric ID #}\n{{ collection.title }}             {# Collection name #}\n{{ collection.handle }}            {# URL slug #}\n{{ collection.description }}       {# HTML description #}\n{{ collection.url }}               {# Collection URL #}\n{{ collection.published_at }}      {# Publication date #}\n\n{# Image #}\n{{ collection.image }}             {# Featured image object #}\n{{ collection.image.src }}\n{{ collection.image | img_url: '1024x1024' }}\n\n{# Products #}\n{{ collection.products }}          {# Array of products #}\n{{ collection.products_count }}    {# Current page count #}\n{{ collection.all_products_count }}{# Total count #}\n\n{# Filtering & sorting #}\n{{ collection.all_tags }}          {# All tags (max 1000) #}\n{{ collection.all_types }}         {# All product types #}\n{{ collection.all_vendors }}       {# All vendors #}\n{{ collection.current_type }}      {# Active type filter #}\n{{ collection.current_vendor }}    {# Active vendor filter #}\n{{ collection.sort_by }}           {# Current sort method #}\n{{ collection.default_sort_by }}   {# Default sort #}\n{{ collection.sort_options }}      {# Available sort methods #}\n\n{# Filters (Storefront Filtering) #}\n{{ collection.filters }}           {# Array of filter objects #}\n\n{% for filter in collection.filters %}\n  {{ filter.label }}               {# Filter name #}\n  {{ filter.type }}                {# \"list\", \"price_range\" #}\n  {{ filter.active_values }}       {# Currently active #}\n  {{ filter.values }}              {# Available values #}\n{% endfor %}\n\n{# Navigation (on product pages within collection) #}\n{{ collection.next_product }}      {# Next product in collection #}\n{{ collection.previous_product }}  {# Previous product #}\n\n{# Metafields #}\n{{ collection.metafields.namespace.key }}\n\n{# Template #}\n{{ collection.template_suffix }}\n```\n\n### cart\n\nCart object (global - always available):\n\n```liquid\n{# Cart state #}\n{{ cart.item_count }}              {# Total line items #}\n{{ cart.total_price }}             {# Total in cents #}\n{{ cart.total_weight }}            {# Weight sum #}\n{{ cart.empty? }}                  {# Boolean: is cart empty #}\n\n{# Items #}\n{{ cart.items }}                   {# Array of line items #}\n{{ cart.items.size }}              {# Number of line items #}\n\n{% for item in cart.items %}\n  {{ item.product_id }}\n  {{ item.variant_id }}\n  {{ item.title }}\n  {{ item.quantity }}\n  {{ item.price }}\n  {{ item.line_price }}            {# price Ã— quantity #}\n  {{ item.image }}\n{% endfor %}\n\n{# Notes and attributes #}\n{{ cart.note }}                    {# Customer note #}\n{{ cart.attributes }}              {# Custom cart attributes #}\n\n{# Access specific attribute #}\n{% if cart.attributes.gift_wrap %}\n  Gift wrap requested\n{% endif %}\n\n{# Discounts #}\n{{ cart.cart_level_discount_applications }}\n{{ cart.total_discount }}          {# Total discount amount #}\n\n{# Checkout #}\n{{ cart.requires_shipping }}       {# Boolean #}\n```\n\n### line_item\n\nLine item object (cart.items):\n\n```liquid\n{% for item in cart.items %}\n  {{ item.id }}                    {# Line item ID #}\n  {{ item.key }}                   {# Unique key #}\n  {{ item.product_id }}            {# Product ID #}\n  {{ item.variant_id }}            {# Variant ID #}\n\n  {# Product info #}\n  {{ item.product }}               {# Product object #}\n  {{ item.variant }}               {# Variant object #}\n  {{ item.title }}                 {# Product title #}\n  {{ item.product_title }}         {# Same as title #}\n  {{ item.variant_title }}         {# Variant options #}\n\n  {# Pricing #}\n  {{ item.quantity }}              {# Quantity ordered #}\n  {{ item.price }}                 {# Price per unit (cents) #}\n  {{ item.line_price }}            {# Total: price Ã— quantity #}\n  {{ item.original_price }}        {# Before discounts #}\n  {{ item.original_line_price }}\n  {{ item.final_price }}           {# After discounts #}\n  {{ item.final_line_price }}\n\n  {# Images #}\n  {{ item.image }}                 {# Line item image #}\n  {{ item.featured_image.src }}\n\n  {# URL #}\n  {{ item.url }}                   {# Link to product #}\n\n  {# SKU #}\n  {{ item.sku }}                   {# Variant SKU #}\n\n  {# Properties (custom line item data) #}\n  {{ item.properties }}            {# Hash of properties #}\n  {% for property in item.properties %}\n    {{ property.first }}: {{ property.last }}\n  {% endfor %}\n\n  {# Discounts #}\n  {{ item.discount_allocations }}\n  {% for discount in item.discount_allocations %}\n    {{ discount.amount }}\n    {{ discount.discount_application.title }}\n  {% endfor %}\n\n  {# Fulfillment #}\n  {{ item.requires_shipping }}     {# Boolean #}\n  {{ item.taxable }}               {# Boolean #}\n{% endfor %}\n```\n\n### customer\n\nCustomer object (when logged in):\n\n```liquid\n{% if customer %}\n  {{ customer.id }}                    {# Numeric ID #}\n  {{ customer.email }}                 {# Email address #}\n  {{ customer.first_name }}\n  {{ customer.last_name }}\n  {{ customer.name }}                  {# Full name #}\n  {{ customer.phone }}\n\n  {# Account status #}\n  {{ customer.has_account }}           {# Boolean: registered #}\n  {{ customer.accepts_marketing }}     {# Email marketing opt-in #}\n  {{ customer.email_marketing_consent }}\n\n  {# Addresses #}\n  {{ customer.addresses }}             {# Array of addresses #}\n  {{ customer.addresses_count }}\n  {{ customer.default_address }}       {# Primary address #}\n\n  {% for address in customer.addresses %}\n    {{ address.first_name }}\n    {{ address.last_name }}\n    {{ address.address1 }}\n    {{ address.address2 }}\n    {{ address.city }}\n    {{ address.province }}\n    {{ address.province_code }}        {# State/region code #}\n    {{ address.country }}\n    {{ address.country_code }}         {# Country code: US, CA, etc. #}\n    {{ address.zip }}\n    {{ address.phone }}\n    {{ address.company }}\n  {% endfor %}\n\n  {# Orders #}\n  {{ customer.orders }}                {# Array of orders #}\n  {{ customer.orders_count }}          {# Total orders #}\n  {{ customer.total_spent }}           {# Lifetime value (cents) #}\n\n  {# Tags #}\n  {{ customer.tags }}                  {# Array of customer tags #}\n\n  {# Metafields #}\n  {{ customer.metafields.namespace.key }}\n{% endif %}\n```\n\n### order\n\nOrder object (order confirmation, customer account):\n\n```liquid\n{{ order.id }}                     {# Numeric ID #}\n{{ order.name }}                   {# Order name: \"#1001\" #}\n{{ order.order_number }}           {# 1001 #}\n{{ order.confirmation_number }}    {# Unique confirmation #}\n{{ order.email }}                  {# Customer email #}\n{{ order.phone }}                  {# Customer phone #}\n{{ order.customer_url }}           {# Link to view order #}\n\n{# Timestamps #}\n{{ order.created_at }}             {# Order date/time #}\n{{ order.updated_at }}\n{{ order.cancelled_at }}           {# If cancelled #}\n{{ order.processed_at }}\n\n{# Customer #}\n{{ order.customer }}               {# Customer object #}\n{{ order.customer.name }}\n\n{# Items #}\n{{ order.line_items }}             {# Array of line items #}\n{{ order.line_items_count }}\n\n{% for item in order.line_items %}\n  {{ item.title }}\n  {{ item.quantity }}\n  {{ item.price }}\n  {{ item.line_price }}\n{% endfor %}\n\n{# Pricing #}\n{{ order.subtotal_price }}         {# Before tax/shipping #}\n{{ order.total_price }}            {# Grand total #}\n{{ order.tax_price }}              {# Total tax #}\n{{ order.shipping_price }}         {# Shipping cost #}\n{{ order.total_discounts }}        {# Discount amount #}\n\n{# Status #}\n{{ order.financial_status }}       {# \"paid\", \"pending\", \"refunded\" #}\n{{ order.fulfillment_status }}     {# \"fulfilled\", \"partial\", null #}\n{{ order.cancelled }}              {# Boolean #}\n{{ order.cancel_reason }}\n\n{# Addresses #}\n{{ order.shipping_address }}\n{{ order.billing_address }}\n\n{# Shipping #}\n{{ order.shipping_method.title }}  {# Shipping method name #}\n{{ order.shipping_method.price }}\n\n{# Discounts #}\n{{ order.discount_applications }}\n{% for discount in order.discount_applications %}\n  {{ discount.title }}\n  {{ discount.total_allocated_amount }}\n{% endfor %}\n\n{# Notes #}\n{{ order.note }}                   {# Customer note #}\n{{ order.attributes }}             {# Custom attributes #}\n\n{# Tags #}\n{{ order.tags }}\n```\n\n### article\n\nArticle object (blog post pages):\n\n```liquid\n{{ article.id }}                   {# Numeric ID #}\n{{ article.title }}                {# Article headline #}\n{{ article.handle }}               {# URL slug #}\n{{ article.content }}              {# Full HTML content #}\n{{ article.excerpt }}              {# Summary/teaser #}\n{{ article.excerpt_or_content }}   {# Excerpt if set, else content #}\n\n{# Author #}\n{{ article.author }}               {# Author name #}\n{{ article.author_url }}           {# Author profile URL #}\n\n{# Dates #}\n{{ article.published_at }}         {# Publication date #}\n{{ article.created_at }}\n{{ article.updated_at }}\n\n{# URL #}\n{{ article.url }}                  {# Article URL #}\n\n{# Image #}\n{{ article.image }}                {# Featured image #}\n{{ article.image.src }}\n{{ article.image | img_url: 'large' }}\n\n{# Comments #}\n{{ article.comments }}             {# Array of comments #}\n{{ article.comments_count }}\n{{ article.comments_enabled }}     {# Boolean #}\n{{ article.moderated }}            {# Comment moderation enabled #}\n\n{# Tags #}\n{{ article.tags }}                 {# Array of tags #}\n\n{# Blog reference #}\n{{ article.blog }}                 {# Parent blog object #}\n{{ article.blog.title }}\n\n{# Metafields #}\n{{ article.metafields.namespace.key }}\n```\n\n### blog\n\nBlog object (blog listing page):\n\n```liquid\n{{ blog.id }}                      {# Numeric ID #}\n{{ blog.title }}                   {# Blog name #}\n{{ blog.handle }}                  {# URL slug #}\n{{ blog.url }}                     {# Blog URL #}\n\n{# Articles #}\n{{ blog.articles }}                {# Array of articles #}\n{{ blog.articles_count }}          {# Total articles #}\n\n{# Tags #}\n{{ blog.all_tags }}                {# All article tags #}\n\n{# Metafields #}\n{{ blog.metafields.namespace.key }}\n```\n\n### search\n\nSearch results object:\n\n```liquid\n{{ search.performed }}             {# Boolean: search executed #}\n{{ search.results }}               {# Results array #}\n{{ search.results_count }}         {# Number of results #}\n{{ search.terms }}                 {# Search query #}\n{{ search.types }}                 {# Resource types found #}\n\n{% for item in search.results %}\n  {% case item.object_type %}\n    {% when 'product' %}\n      {{ item.title }}\n      {{ item.price | money }}\n    {% when 'article' %}\n      {{ item.title }}\n      {{ item.excerpt }}\n    {% when 'page' %}\n      {{ item.title }}\n      {{ item.content | strip_html | truncatewords: 50 }}\n  {% endcase %}\n{% endfor %}\n```\n\n## Metafields\n\nAccess custom data on any object:\n\n```liquid\n{# Product metafields #}\n{{ product.metafields.namespace.key }}\n{{ product.metafields.custom.warranty_info }}\n{{ product.metafields.specifications.material }}\n\n{# Collection metafields #}\n{{ collection.metafields.seo.custom_title }}\n\n{# Customer metafields #}\n{{ customer.metafields.loyalty.points }}\n\n{# Shop metafields #}\n{{ shop.metafields.global.announcement }}\n\n{# Check for existence #}\n{% if product.metafields.custom.size_guide %}\n  {{ product.metafields.custom.size_guide }}\n{% endif %}\n\n{# Use default filter for safety #}\n{{ product.metafields.custom.field | default: \"Not specified\" }}\n```\n\n## Metaobjects\n\nAccess metaobject definitions:\n\n```liquid\n{# Access metaobject by handle #}\n{% assign testimonial = shop.metaobjects.testimonials['customer-review-1'] %}\n\n{{ testimonial.name }}\n{{ testimonial.rating }}\n{{ testimonial.content }}\n\n{# Loop through metaobjects #}\n{% for testimonial in shop.metaobjects.testimonials.values %}\n  {{ testimonial.fields.author }}\n  {{ testimonial.fields.quote }}\n{% endfor %}\n```\n",
        "plugins/shopify-developer/skills/shopify-liquid/references/syntax.md": "# Liquid Syntax - Complete Reference\n\n## Tag Categories\n\n### Control Flow Tags\n\n#### if/elsif/else/endif\n\n```liquid\n{% if product.available %}\n  <button>Add to Cart</button>\n{% elsif product.coming_soon %}\n  <p>Coming Soon</p>\n{% else %}\n  <p>Sold Out</p>\n{% endif %}\n```\n\n**Operators:**\n- `==` - equals\n- `!=` - not equals\n- `>` - greater than\n- `<` - less than\n- `>=` - greater than or equal\n- `<=` - less than or equal\n- `contains` - substring or array contains\n- `and` - logical AND\n- `or` - logical OR\n\n**Examples:**\n```liquid\n{% if product.price > 100 and product.available %}\n  Premium item in stock\n{% endif %}\n\n{% if product.tags contains 'sale' or product.type == 'clearance' %}\n  On sale!\n{% endif %}\n```\n\n#### unless\n\nNegated if statement:\n\n```liquid\n{% unless customer.name == blank %}\n  Hello, {{ customer.name }}\n{% endunless %}\n\n{# Equivalent to: #}\n{% if customer.name != blank %}\n  Hello, {{ customer.name }}\n{% endif %}\n```\n\n#### case/when\n\nSwitch-case statement:\n\n```liquid\n{% case product.type %}\n  {% when 'shoes' %}\n    <icon>ðŸ‘Ÿ</icon>\n  {% when 'boots' %}\n    <icon>ðŸ‘¢</icon>\n  {% when 'sneakers' %}\n    <icon>ðŸ‘Ÿ</icon>\n  {% else %}\n    <icon>ðŸ“¦</icon>\n{% endcase %}\n```\n\n### Iteration Tags\n\n#### for loop\n\n```liquid\n{% for product in collection.products %}\n  {{ product.title }}\n{% endfor %}\n```\n\n**Modifiers:**\n\n```liquid\n{# Limit to first 5 #}\n{% for product in collection.products limit: 5 %}\n  {{ product.title }}\n{% endfor %}\n\n{# Skip first 10 #}\n{% for product in collection.products offset: 10 %}\n  {{ product.title }}\n{% endfor %}\n\n{# Reverse order #}\n{% for product in collection.products reversed %}\n  {{ product.title }}\n{% endfor %}\n\n{# Combine modifiers #}\n{% for product in collection.products limit: 5 offset: 10 %}\n  {# Items 11-15 #}\n{% endfor %}\n```\n\n**forloop object (available inside loops):**\n\n```liquid\n{% for item in array %}\n  {{ forloop.index }}        {# 1-based: 1, 2, 3, ... #}\n  {{ forloop.index0 }}       {# 0-based: 0, 1, 2, ... #}\n  {{ forloop.rindex }}       {# Reverse 1-based: 3, 2, 1 #}\n  {{ forloop.rindex0 }}      {# Reverse 0-based: 2, 1, 0 #}\n  {{ forloop.first }}        {# true on first iteration #}\n  {{ forloop.last }}         {# true on last iteration #}\n  {{ forloop.length }}       {# Total number of items #}\n{% endfor %}\n```\n\n**Example usage:**\n\n```liquid\n{% for product in collection.products %}\n  {% if forloop.first %}\n    <h2>Featured Product</h2>\n  {% endif %}\n\n  <div class=\"product-{{ forloop.index }}\">\n    {{ product.title }}\n  </div>\n\n  {% if forloop.index == 3 %}\n    <hr> {# Divider after 3rd item #}\n  {% endif %}\n\n  {% if forloop.last %}\n    <p>Showing {{ forloop.length }} products</p>\n  {% endif %}\n{% endfor %}\n```\n\n#### break and continue\n\n```liquid\n{% for product in collection.products %}\n  {% if product.handle == 'target' %}\n    {% break %}  {# Exit loop entirely #}\n  {% endif %}\n\n  {% if product.available == false %}\n    {% continue %}  {# Skip to next iteration #}\n  {% endif %}\n\n  {{ product.title }}\n{% endfor %}\n```\n\n#### tablerow\n\nCreates HTML table rows:\n\n```liquid\n{% tablerow product in collection.products cols: 3 %}\n  {{ product.title }}\n{% endtablerow %}\n\n{# Output: #}\n<table>\n  <tr class=\"row1\">\n    <td class=\"col1\">Product 1</td>\n    <td class=\"col2\">Product 2</td>\n    <td class=\"col3\">Product 3</td>\n  </tr>\n  <tr class=\"row2\">\n    <td class=\"col1\">Product 4</td>\n    ...\n  </tr>\n</table>\n```\n\n**tablerow object:**\n\n```liquid\n{% tablerow product in products cols: 3 limit: 12 %}\n  {{ tablerow.col }}         {# Current column (1-based) #}\n  {{ tablerow.col0 }}        {# Current column (0-based) #}\n  {{ tablerow.row }}         {# Current row (1-based) #}\n  {{ tablerow.index }}       {# Item index (1-based) #}\n  {{ tablerow.first }}       {# true on first item #}\n  {{ tablerow.last }}        {# true on last item #}\n  {{ tablerow.col_first }}   {# true on first column #}\n  {{ tablerow.col_last }}    {# true on last column #}\n{% endtablerow %}\n```\n\n#### paginate\n\nFor paginating large collections:\n\n```liquid\n{% paginate collection.products by 12 %}\n\n  {% for product in paginate.collection.products %}\n    {% render 'product-card', product: product %}\n  {% endfor %}\n\n  {# Pagination controls #}\n  {% if paginate.pages > 1 %}\n    {{ paginate | default_pagination }}\n  {% endif %}\n\n{% endpaginate %}\n```\n\n**paginate object:**\n\n```liquid\n{{ paginate.current_page }}      {# Current page number #}\n{{ paginate.pages }}              {# Total pages #}\n{{ paginate.items }}              {# Total items #}\n{{ paginate.page_size }}          {# Items per page #}\n\n{{ paginate.previous.url }}       {# Previous page URL (if exists) #}\n{{ paginate.previous.title }}     {# Previous page title #}\n{{ paginate.previous.is_link }}   {# Boolean #}\n\n{{ paginate.next.url }}           {# Next page URL (if exists) #}\n{{ paginate.next.title }}         {# Next page title #}\n{{ paginate.next.is_link }}       {# Boolean #}\n\n{{ paginate.parts }}              {# Array of page links #}\n```\n\n**Custom pagination:**\n\n```liquid\n{% paginate collection.products by 20 %}\n\n  <div class=\"pagination\">\n    {% if paginate.previous %}\n      <a href=\"{{ paginate.previous.url }}\">â† Previous</a>\n    {% endif %}\n\n    {% for part in paginate.parts %}\n      {% if part.is_link %}\n        <a href=\"{{ part.url }}\">{{ part.title }}</a>\n      {% else %}\n        <span class=\"current\">{{ part.title }}</span>\n      {% endif %}\n    {% endfor %}\n\n    {% if paginate.next %}\n      <a href=\"{{ paginate.next.url }}\">Next â†’</a>\n    {% endif %}\n  </div>\n\n{% endpaginate %}\n```\n\n### Variable Assignment\n\n#### assign\n\nSingle-line variable assignment:\n\n```liquid\n{% assign sale_price = product.price | times: 0.8 %}\n{% assign is_available = product.available %}\n{% assign product_count = collection.products.size %}\n{% assign full_name = customer.first_name | append: ' ' | append: customer.last_name %}\n```\n\n#### capture\n\nMulti-line content capture:\n\n```liquid\n{% capture product_title %}\n  {{ collection.title }} - {{ product.title }}\n{% endcapture %}\n\n{{ product_title }}  {# \"Summer Sale - Blue T-Shirt\" #}\n\n{% capture greeting %}\n  <h1>Welcome, {{ customer.name }}!</h1>\n  <p>You have {{ customer.orders_count }} orders.</p>\n{% endcapture %}\n\n{{ greeting }}\n```\n\n#### liquid (multi-statement)\n\nCleaner syntax for multiple statements:\n\n```liquid\n{% liquid\n  assign product_type = product.type\n  assign is_on_sale = product.on_sale\n  assign sale_percentage = product.discount_percent\n\n  if is_on_sale\n    assign status = 'SALE'\n  else\n    assign status = 'REGULAR'\n  endif\n\n  echo status\n%}\n```\n\n### Template Inclusion\n\n#### render\n\nIsolated scope (preferred method):\n\n```liquid\n{# Basic usage #}\n{% render 'product-card', product: product %}\n\n{# Multiple parameters #}\n{% render 'product-card',\n  product: product,\n  show_price: true,\n  show_vendor: false,\n  css_class: 'featured'\n%}\n\n{# Render for each item #}\n{% render 'product-card' for collection.products as item %}\n\n{# Pass arrays #}\n{% render 'gallery', images: product.images %}\n```\n\n**Inside product-card.liquid:**\n\n```liquid\n{# Only has access to passed parameters #}\n<div class=\"product {% if css_class %}{{ css_class }}{% endif %}\">\n  <h3>{{ product.title }}</h3>\n\n  {% if show_price %}\n    <p>{{ product.price | money }}</p>\n  {% endif %}\n\n  {% if show_vendor %}\n    <p>{{ product.vendor }}</p>\n  {% endif %}\n</div>\n```\n\n#### include\n\nShared scope (legacy, avoid in new code):\n\n```liquid\n{% include 'product-details' %}\n\n{# Can access all parent template variables #}\n{# Harder to debug and reason about #}\n```\n\n#### section\n\nLoad dynamic sections:\n\n```liquid\n{% section 'featured-product' %}\n{% section 'newsletter-signup' %}\n```\n\n### Utility Tags\n\n#### comment\n\nMulti-line comments:\n\n```liquid\n{% comment %}\n  This entire block is ignored\n  by the Liquid renderer.\n  Use for documentation.\n{% endcomment %}\n\n{# Single-line comment #}\n```\n\n#### echo\n\nOutput shorthand (alternative to `{{ }}`):\n\n```liquid\n{% echo product.title %}\n{# Equivalent to: {{ product.title }} #}\n```\n\n#### raw\n\nOutput Liquid code without processing:\n\n```liquid\n{% raw %}\n  {{ This will be output as-is }}\n  {% Liquid tags won't be processed %}\n{% endraw %}\n```\n\nUseful for documentation or code examples.\n\n## Whitespace Control\n\nStrip whitespace using hyphens:\n\n```liquid\n{%- if condition -%}\n  Content (whitespace stripped on both sides)\n{%- endif -%}\n\n{{ \"hello\" -}}world\n{# Output: helloworld (no space) #}\n\n{{- product.title }}\n{# Strips whitespace before output #}\n\n{{ product.title -}}\n{# Strips whitespace after output #}\n```\n\n**Example:**\n\n```liquid\n{# Without whitespace control: #}\n{% for item in array %}\n  {{ item }}\n{% endfor %}\n\n{# Output has newlines and indentation #}\n\n{# With whitespace control: #}\n{%- for item in array -%}\n  {{ item }}\n{%- endfor -%}\n\n{# Output is compact #}\n```\n\n## Operator Precedence\n\n**Order of evaluation (right-to-left):**\n\n```liquid\n{% if true or false and false %}\n  {# Evaluates as: true or (false and false) = true #}\n{% endif %}\n```\n\n**IMPORTANT:** No parentheses support in Liquid. Break complex conditions into variables:\n\n```liquid\n{# âŒ DOESN'T WORK: #}\n{% if (x > 5 and y < 10) or z == 0 %}\n\n{# âœ… WORKS: #}\n{% assign condition1 = false %}\n{% if x > 5 and y < 10 %}\n  {% assign condition1 = true %}\n{% endif %}\n\n{% if condition1 or z == 0 %}\n  {# Logic here #}\n{% endif %}\n```\n\n## Performance Tips\n\n1. **Cache repeated calculations:**\n\n```liquid\n{# âŒ Inefficient: #}\n{% for i in (1..10) %}\n  {{ collection.products.size }}  {# Calculated 10 times #}\n{% endfor %}\n\n{# âœ… Efficient: #}\n{% assign product_count = collection.products.size %}\n{% for i in (1..10) %}\n  {{ product_count }}\n{% endfor %}\n```\n\n2. **Use `limit` and `offset` instead of iterating full arrays:**\n\n```liquid\n{# âŒ Inefficient: #}\n{% for product in collection.products %}\n  {% if forloop.index <= 5 %}\n    {{ product.title }}\n  {% endif %}\n{% endfor %}\n\n{# âœ… Efficient: #}\n{% for product in collection.products limit: 5 %}\n  {{ product.title }}\n{% endfor %}\n```\n\n3. **Prefer `render` over `include`** for better performance and variable scoping\n\n4. **Use `liquid` tag** for cleaner multi-statement blocks\n\n## Common Gotchas\n\n1. **No parentheses in conditions** - Use variables instead\n2. **Right-to-left evaluation** - Be careful with operator precedence\n3. **String concatenation** - Use `append` filter or `capture` tag\n4. **Array/object mutation** - Not possible; create new variables\n5. **Integer division** - `{{ 5 | divided_by: 2 }}` returns `2`, not `2.5`\n6. **Truthy/falsy values:**\n   - `false` and `nil` are falsy\n   - Everything else (including `0`, `\"\"`, `[]`) is truthy\n\n## Debugging Tips\n\n1. **Output variable types:**\n\n```liquid\n{{ product | json }}  {# Output entire object as JSON #}\n{{ product.class }}   {# Output object type #}\n{{ variable.size }}   {# Check array/string length #}\n```\n\n2. **Check for nil/existence:**\n\n```liquid\n{% if product.metafield %}\n  Metafield exists\n{% else %}\n  Metafield is nil\n{% endif %}\n```\n\n3. **Use default filter for safety:**\n\n```liquid\n{{ product.metafield.value | default: \"Not set\" }}\n```\n\n4. **Enable theme preview console** to see Liquid errors in real-time\n",
        "plugins/shopify-developer/skills/shopify-performance/SKILL.md": "---\nname: shopify-performance\ndescription: Performance optimization for Shopify stores including theme speed optimization, image optimization, JavaScript and CSS minification, lazy loading, CDN usage, caching strategies, Liquid template performance, and Core Web Vitals improvement. Use when optimizing store speed, reducing load times, improving Lighthouse scores, optimizing images, implementing lazy loading, reducing JavaScript bloat, or improving Core Web Vitals metrics (LCP, FID, CLS).\n---\n\n# Shopify Performance Optimization\n\nExpert guidance for optimizing Shopify store performance including theme speed, asset optimization, and Core Web Vitals.\n\n## When to Use This Skill\n\nInvoke this skill when:\n\n- Optimizing Shopify theme performance and load times\n- Improving Lighthouse or PageSpeed Insights scores\n- Reducing Time to Interactive (TTI) or Largest Contentful Paint (LCP)\n- Optimizing images for faster loading\n- Implementing lazy loading for images and videos\n- Minifying and optimizing JavaScript and CSS\n- Reducing JavaScript bundle sizes\n- Improving Core Web Vitals metrics (LCP, FID, CLS)\n- Implementing caching strategies\n- Optimizing Liquid template rendering\n- Reducing server response times\n- Improving mobile performance\n\n## Core Capabilities\n\n### 1. Image Optimization\n\nImages are typically the largest assets - optimize aggressively.\n\n**Use Shopify CDN Image Sizing:**\n```liquid\n{# âŒ Don't load full-size images #}\n<img src=\"{{ product.featured_image.src }}\" alt=\"{{ product.title }}\">\n\n{# âœ… Use img_url filter with appropriate size #}\n<img\n  src=\"{{ product.featured_image | img_url: '800x800' }}\"\n  alt=\"{{ product.featured_image.alt | escape }}\"\n  loading=\"lazy\"\n  width=\"800\"\n  height=\"800\"\n>\n```\n\n**Responsive Images:**\n```liquid\n<img\n  src=\"{{ image | img_url: '800x' }}\"\n  srcset=\"\n    {{ image | img_url: '400x' }} 400w,\n    {{ image | img_url: '800x' }} 800w,\n    {{ image | img_url: '1200x' }} 1200w,\n    {{ image | img_url: '1600x' }} 1600w\n  \"\n  sizes=\"(max-width: 600px) 400px, (max-width: 1200px) 800px, 1200px\"\n  alt=\"{{ image.alt | escape }}\"\n  loading=\"lazy\"\n  width=\"800\"\n  height=\"800\"\n>\n```\n\n**Modern Image Formats:**\n```liquid\n<picture>\n  {# WebP for modern browsers #}\n  <source\n    type=\"image/webp\"\n    srcset=\"\n      {{ image | img_url: '400x', format: 'pjpg' }} 400w,\n      {{ image | img_url: '800x', format: 'pjpg' }} 800w\n    \"\n  >\n\n  {# Fallback to JPEG #}\n  <img\n    src=\"{{ image | img_url: '800x' }}\"\n    srcset=\"\n      {{ image | img_url: '400x' }} 400w,\n      {{ image | img_url: '800x' }} 800w\n    \"\n    alt=\"{{ image.alt | escape }}\"\n    loading=\"lazy\"\n  >\n</picture>\n```\n\n**Lazy Loading:**\n```liquid\n{# Native lazy loading #}\n<img\n  src=\"{{ image | img_url: '800x' }}\"\n  alt=\"{{ image.alt | escape }}\"\n  loading=\"lazy\"\n  decoding=\"async\"\n>\n\n{# Eager load above-the-fold images #}\n{% if forloop.index <= 3 %}\n  <img src=\"{{ image | img_url: '800x' }}\" loading=\"eager\">\n{% else %}\n  <img src=\"{{ image | img_url: '800x' }}\" loading=\"lazy\">\n{% endif %}\n```\n\n**Preload Critical Images:**\n```liquid\n{# In <head> for hero images #}\n<link\n  rel=\"preload\"\n  as=\"image\"\n  href=\"{{ section.settings.hero_image | img_url: '1920x' }}\"\n  imagesrcset=\"\n    {{ section.settings.hero_image | img_url: '800x' }} 800w,\n    {{ section.settings.hero_image | img_url: '1920x' }} 1920w\n  \"\n  imagesizes=\"100vw\"\n>\n```\n\n### 2. JavaScript Optimization\n\nReduce JS payload and execution time.\n\n**Defer Non-Critical JavaScript:**\n```html\n{# âŒ Blocking JavaScript #}\n<script src=\"{{ 'theme.js' | asset_url }}\"></script>\n\n{# âœ… Deferred JavaScript #}\n<script src=\"{{ 'theme.js' | asset_url }}\" defer></script>\n\n{# âœ… Async for independent scripts #}\n<script src=\"{{ 'analytics.js' | asset_url }}\" async></script>\n```\n\n**Inline Critical JavaScript:**\n```liquid\n{# Inline small, critical scripts #}\n<script>\n  // Critical initialization code\n  document.documentElement.classList.remove('no-js');\n  document.documentElement.classList.add('js');\n</script>\n```\n\n**Code Splitting:**\n```javascript\n// Load features only when needed\nasync function loadCart() {\n  const { Cart } = await import('./cart.js');\n  return new Cart();\n}\n\n// Load on interaction\ndocument.querySelector('.cart-icon').addEventListener('click', async () => {\n  const cart = await loadCart();\n  cart.open();\n}, { once: true });\n```\n\n**Remove Unused JavaScript:**\n```javascript\n// âŒ Don't load libraries you don't use\n// Example: Don't include entire jQuery if you only need a few functions\n\n// âœ… Use native alternatives\n// Instead of: $('.selector').hide()\n// Use: document.querySelector('.selector').style.display = 'none';\n\n// Instead of: $.ajax()\n// Use: fetch()\n```\n\n**Minify JavaScript:**\n```bash\n# Use build tools to minify\nnpm install terser --save-dev\n\n# Minify\nterser theme.js -o theme.min.js -c -m\n```\n\n### 3. CSS Optimization\n\nOptimize stylesheets for faster rendering.\n\n**Critical CSS:**\n```liquid\n{# Inline critical above-the-fold CSS in <head> #}\n<style>\n  /* Critical CSS only (header, hero) */\n  .header { /* ... */ }\n  .hero { /* ... */ }\n  .button { /* ... */ }\n</style>\n\n{# Load full CSS deferred #}\n<link\n  rel=\"preload\"\n  href=\"{{ 'theme.css' | asset_url }}\"\n  as=\"style\"\n  onload=\"this.onload=null;this.rel='stylesheet'\"\n>\n<noscript>\n  <link rel=\"stylesheet\" href=\"{{ 'theme.css' | asset_url }}\">\n</noscript>\n```\n\n**Remove Unused CSS:**\n```bash\n# Use PurgeCSS to remove unused styles\nnpm install @fullhuman/postcss-purgecss --save-dev\n\n# Configure in postcss.config.js\nmodule.exports = {\n  plugins: [\n    require('@fullhuman/postcss-purgecss')({\n      content: ['./**/*.liquid'],\n      defaultExtractor: content => content.match(/[\\w-/:]+(?<!:)/g) || [],\n    }),\n  ],\n};\n```\n\n**Minify CSS:**\n```bash\n# Use cssnano\nnpm install cssnano --save-dev\n\n# Minify\nnpx cssnano style.css style.min.css\n```\n\n**Avoid @import:**\n```css\n/* âŒ Don't use @import (blocks rendering) */\n@import url('fonts.css');\n\n/* âœ… Use multiple <link> tags instead */\n```\n\n```liquid\n<link rel=\"stylesheet\" href=\"{{ 'main.css' | asset_url }}\">\n<link rel=\"stylesheet\" href=\"{{ 'fonts.css' | asset_url }}\">\n```\n\n### 4. Font Optimization\n\nOptimize web fonts for faster text rendering.\n\n**Font Loading:**\n```liquid\n{# Preload fonts #}\n<link\n  rel=\"preload\"\n  href=\"{{ 'font.woff2' | asset_url }}\"\n  as=\"font\"\n  type=\"font/woff2\"\n  crossorigin\n>\n\n{# Font face with font-display #}\n<style>\n  @font-face {\n    font-family: 'CustomFont';\n    src: url('{{ 'font.woff2' | asset_url }}') format('woff2');\n    font-weight: 400;\n    font-style: normal;\n    font-display: swap; /* Show fallback font immediately */\n  }\n</style>\n```\n\n**System Font Stack:**\n```css\n/* Use system fonts for instant rendering */\nbody {\n  font-family:\n    -apple-system,\n    BlinkMacSystemFont,\n    \"Segoe UI\",\n    Roboto,\n    \"Helvetica Neue\",\n    Arial,\n    sans-serif;\n}\n```\n\n**Subset Fonts:**\n```css\n/* Load only required characters */\n@font-face {\n  font-family: 'CustomFont';\n  src: url('font-latin.woff2') format('woff2');\n  unicode-range: U+0000-00FF, U+0131, U+0152-0153;\n}\n```\n\n### 5. Liquid Template Optimization\n\nOptimize Liquid rendering for faster server response.\n\n**Cache Expensive Operations:**\n```liquid\n{# âŒ Repeated calculations #}\n{% for i in (1..10) %}\n  {{ collection.products.size }}  {# Calculated 10 times #}\n{% endfor %}\n\n{# âœ… Cache result #}\n{% assign product_count = collection.products.size %}\n{% for i in (1..10) %}\n  {{ product_count }}\n{% endfor %}\n```\n\n**Use limit and offset:**\n```liquid\n{# âŒ Iterate full array and break #}\n{% for product in collection.products %}\n  {% if forloop.index > 5 %}{% break %}{% endif %}\n  {{ product.title }}\n{% endfor %}\n\n{# âœ… Use limit #}\n{% for product in collection.products limit: 5 %}\n  {{ product.title }}\n{% endfor %}\n```\n\n**Avoid Nested Loops:**\n```liquid\n{# âŒ O(nÂ²) complexity #}\n{% for product in collection.products %}\n  {% for variant in product.variants %}\n    {# Expensive nested loop #}\n  {% endfor %}\n{% endfor %}\n\n{# âœ… Flatten or preprocess #}\n{% assign all_variants = collection.products | map: 'variants' | flatten %}\n{% for variant in all_variants limit: 50 %}\n  {{ variant.title }}\n{% endfor %}\n```\n\n**Prefer render over include:**\n```liquid\n{# âŒ include (slower, shared scope) #}\n{% include 'product-card' %}\n\n{# âœ… render (faster, isolated scope) #}\n{% render 'product-card', product: product %}\n```\n\n**Use section-specific stylesheets:**\n```liquid\n{# Scope CSS to section for better caching #}\n{% stylesheet %}\n  .my-section { /* ... */ }\n{% endstylesheet %}\n\n{# Scope JavaScript to section #}\n{% javascript %}\n  class MySection { /* ... */ }\n{% endjavascript %}\n```\n\n### 6. Third-Party Script Optimization\n\nMinimize impact of external scripts.\n\n**Defer Third-Party Scripts:**\n```liquid\n{# âŒ Blocking third-party script #}\n<script src=\"https://external.com/script.js\"></script>\n\n{# âœ… Async or defer #}\n<script src=\"https://external.com/script.js\" async></script>\n\n{# âœ… Load on user interaction #}\n<script>\n  let gaLoaded = false;\n  function loadGA() {\n    if (gaLoaded) return;\n    const script = document.createElement('script');\n    script.src = 'https://www.googletagmanager.com/gtag/js?id=GA_ID';\n    script.async = true;\n    document.head.appendChild(script);\n    gaLoaded = true;\n  }\n\n  // Load on scroll or after delay\n  window.addEventListener('scroll', loadGA, { once: true });\n  setTimeout(loadGA, 3000);\n</script>\n```\n\n**Use Facade Pattern:**\n```html\n{# Show placeholder instead of embedding heavy iframe #}\n<div class=\"video-facade\" data-video-id=\"abc123\">\n  <img src=\"thumbnail.jpg\" alt=\"Video\">\n  <button onclick=\"loadVideo(this)\">Play Video</button>\n</div>\n\n<script>\n  function loadVideo(btn) {\n    const facade = btn.parentElement;\n    const videoId = facade.dataset.videoId;\n    const iframe = document.createElement('iframe');\n    iframe.src = `https://www.youtube.com/embed/${videoId}?autoplay=1`;\n    facade.replaceWith(iframe);\n  }\n</script>\n```\n\n### 7. Caching Strategies\n\nLeverage browser and CDN caching.\n\n**Asset Versioning:**\n```liquid\n{# Shopify auto-versions assets #}\n<link rel=\"stylesheet\" href=\"{{ 'theme.css' | asset_url }}\">\n{# Outputs: /cdn/.../theme.css?v=12345678 #}\n```\n\n**Long Cache Headers:**\n```liquid\n{# Shopify CDN sets appropriate cache headers #}\n{# CSS/JS: 1 year #}\n{# Images: 1 year #}\n```\n\n**Service Worker (Advanced):**\n```javascript\n// sw.js - Cache static assets\nself.addEventListener('install', event => {\n  event.waitUntil(\n    caches.open('v1').then(cache => {\n      return cache.addAll([\n        '/cdn/.../theme.css',\n        '/cdn/.../theme.js',\n        '/cdn/.../logo.png',\n      ]);\n    })\n  );\n});\n\nself.addEventListener('fetch', event => {\n  event.respondWith(\n    caches.match(event.request).then(response => {\n      return response || fetch(event.request);\n    })\n  );\n});\n```\n\n### 8. Core Web Vitals Optimization\n\nImprove Google's Core Web Vitals metrics.\n\n**Largest Contentful Paint (LCP):**\n```liquid\n{# Optimize largest element load time #}\n\n{# 1. Preload hero image #}\n<link rel=\"preload\" as=\"image\" href=\"{{ hero_image | img_url: '1920x' }}\">\n\n{# 2. Use priority hint #}\n<img src=\"{{ hero_image | img_url: '1920x' }}\" fetchpriority=\"high\">\n\n{# 3. Optimize server response time (use Shopify CDN) #}\n\n{# 4. Remove render-blocking resources #}\n<script src=\"theme.js\" defer></script>\n```\n\n**First Input Delay (FID) / Interaction to Next Paint (INP):**\n```javascript\n// 1. Reduce JavaScript execution time\n// 2. Break up long tasks\nfunction processItems(items) {\n  // âŒ Long task\n  items.forEach(item => processItem(item));\n\n  // âœ… Break into smaller chunks\n  async function processInChunks() {\n    for (let i = 0; i < items.length; i++) {\n      processItem(items[i]);\n\n      // Yield to main thread every 50 items\n      if (i % 50 === 0) {\n        await new Promise(resolve => setTimeout(resolve, 0));\n      }\n    }\n  }\n  processInChunks();\n}\n\n// 3. Use requestIdleCallback\nrequestIdleCallback(() => {\n  // Non-critical work\n});\n```\n\n**Cumulative Layout Shift (CLS):**\n```liquid\n{# 1. Always set width and height on images #}\n<img\n  src=\"{{ image | img_url: '800x' }}\"\n  width=\"800\"\n  height=\"600\"\n  alt=\"Product\"\n>\n\n{# 2. Reserve space for dynamic content #}\n<div style=\"min-height: 400px;\">\n  {# Content loads here #}\n</div>\n\n{# 3. Use aspect-ratio for responsive images #}\n<style>\n  .image-container {\n    aspect-ratio: 16 / 9;\n  }\n</style>\n```\n\n### 9. Performance Monitoring\n\nTrack performance metrics.\n\n**Measure Core Web Vitals:**\n```javascript\n// Load web-vitals library\nimport { getCLS, getFID, getLCP } from 'web-vitals';\n\nfunction sendToAnalytics({ name, value, id }) {\n  // Send to analytics\n  gtag('event', name, {\n    event_category: 'Web Vitals',\n    event_label: id,\n    value: Math.round(name === 'CLS' ? value * 1000 : value),\n  });\n}\n\ngetCLS(sendToAnalytics);\ngetFID(sendToAnalytics);\ngetLCP(sendToAnalytics);\n```\n\n**Performance Observer:**\n```javascript\n// Monitor long tasks\nconst observer = new PerformanceObserver(list => {\n  for (const entry of list.getEntries()) {\n    console.warn('Long task detected:', entry.duration, 'ms');\n  }\n});\n\nobserver.observe({ entryTypes: ['longtask'] });\n```\n\n## Performance Checklist\n\n**Images:**\n- [ ] Use `img_url` filter with appropriate sizes\n- [ ] Implement responsive images with `srcset`\n- [ ] Add `loading=\"lazy\"` to below-fold images\n- [ ] Set explicit `width` and `height` attributes\n- [ ] Preload critical hero images\n- [ ] Use modern formats (WebP)\n\n**JavaScript:**\n- [ ] Defer or async all non-critical scripts\n- [ ] Minify and bundle JavaScript\n- [ ] Code-split large bundles\n- [ ] Remove unused code\n- [ ] Lazy load features on interaction\n\n**CSS:**\n- [ ] Inline critical CSS\n- [ ] Defer non-critical CSS\n- [ ] Remove unused styles\n- [ ] Minify stylesheets\n- [ ] Avoid `@import`\n\n**Fonts:**\n- [ ] Preload critical fonts\n- [ ] Use `font-display: swap`\n- [ ] Consider system font stack\n- [ ] Subset fonts when possible\n\n**Third-Party:**\n- [ ] Audit all third-party scripts\n- [ ] Load scripts async or on interaction\n- [ ] Use facade pattern for heavy embeds\n- [ ] Monitor third-party impact\n\n**Liquid:**\n- [ ] Cache expensive calculations\n- [ ] Use `limit` instead of manual breaks\n- [ ] Prefer `render` over `include`\n- [ ] Avoid nested loops\n\n**Core Web Vitals:**\n- [ ] LCP < 2.5s\n- [ ] FID < 100ms (INP < 200ms)\n- [ ] CLS < 0.1\n\n## Best Practices\n\n1. **Test on real devices** - Mobile 3G performance matters\n2. **Use Lighthouse** for performance audits\n3. **Monitor Core Web Vitals** in production\n4. **Optimize above-the-fold** content first\n5. **Lazy load everything else** below the fold\n6. **Minimize main thread work** for better interactivity\n7. **Use Shopify CDN** for all assets\n8. **Version assets** for effective caching\n9. **Compress images** before uploading\n10. **Regular performance audits** to catch regressions\n\n## Integration with Other Skills\n\n- **shopify-liquid** - Use when optimizing Liquid template code\n- **shopify-theme-dev** - Use when organizing theme assets\n- **shopify-debugging** - Use when troubleshooting performance issues\n- **shopify-api** - Use when optimizing API request patterns\n\n## Quick Reference\n\n```liquid\n{# Images #}\n<img src=\"{{ image | img_url: '800x' }}\" loading=\"lazy\" width=\"800\" height=\"800\">\n\n{# Scripts #}\n<script src=\"{{ 'theme.js' | asset_url }}\" defer></script>\n\n{# Fonts #}\n<link rel=\"preload\" href=\"{{ 'font.woff2' | asset_url }}\" as=\"font\" crossorigin>\n\n{# Critical CSS #}\n<style>/* Critical CSS */</style>\n<link rel=\"preload\" href=\"{{ 'theme.css' | asset_url }}\" as=\"style\" onload=\"this.rel='stylesheet'\">\n\n{# Responsive images #}\n<img srcset=\"{{ image | img_url: '400x' }} 400w, {{ image | img_url: '800x' }} 800w\">\n```\n",
        "plugins/shopify-developer/skills/shopify-theme-dev/SKILL.md": "---\nname: shopify-theme-dev\ndescription: Complete theme development guide including file structure, JSON templates, sections, snippets, settings schema, and Online Store 2.0 architecture. Use when creating Shopify themes, organizing theme files, building sections and blocks, working with .json template files, configuring settings_schema.json, creating snippets, or implementing theme customization features.\n---\n\n# Shopify Theme Development\n\nExpert guidance for Shopify theme development including file structure, Online Store 2.0 architecture, sections, snippets, and configuration.\n\n## When to Use This Skill\n\nInvoke this skill when:\n\n- Creating or modifying Shopify themes\n- Working with `.json` template files (Online Store 2.0)\n- Building theme sections with schema definitions\n- Creating reusable snippets\n- Organizing theme file structure\n- Configuring `settings_schema.json` for theme settings\n- Implementing section blocks and settings\n- Setting up theme assets (CSS, JavaScript, images)\n- Working with layout files (`theme.liquid`, `password.liquid`)\n- Creating template variations with suffixes\n\n## Core Capabilities\n\n### 1. Theme File Structure\n\nComplete directory organization for Shopify themes:\n\n```\ntheme/\nâ”œâ”€â”€ assets/                     {# Static resources #}\nâ”‚   â”œâ”€â”€ style.css              {# Main stylesheet #}\nâ”‚   â”œâ”€â”€ style.css.liquid       {# Dynamic CSS with Liquid #}\nâ”‚   â”œâ”€â”€ theme.js               {# Main JavaScript #}\nâ”‚   â”œâ”€â”€ theme.js.liquid        {# Dynamic JS with Liquid #}\nâ”‚   â”œâ”€â”€ logo.png               {# Images #}\nâ”‚   â””â”€â”€ fonts/                 {# Custom fonts #}\nâ”‚\nâ”œâ”€â”€ config/                     {# Configuration #}\nâ”‚   â”œâ”€â”€ settings_schema.json   {# Theme settings UI #}\nâ”‚   â””â”€â”€ settings_data.json     {# Default values #}\nâ”‚\nâ”œâ”€â”€ layout/                     {# Master templates #}\nâ”‚   â”œâ”€â”€ theme.liquid           {# Main wrapper #}\nâ”‚   â”œâ”€â”€ password.liquid        {# Password protection #}\nâ”‚   â””â”€â”€ checkout.liquid        {# Checkout (Plus only) #}\nâ”‚\nâ”œâ”€â”€ locales/                    {# Translations #}\nâ”‚   â”œâ”€â”€ en.default.json        {# English #}\nâ”‚   â””â”€â”€ fr.json                {# French #}\nâ”‚\nâ”œâ”€â”€ sections/                   {# Reusable sections #}\nâ”‚   â”œâ”€â”€ header.liquid\nâ”‚   â”œâ”€â”€ hero-banner.liquid\nâ”‚   â”œâ”€â”€ product-card.liquid\nâ”‚   â””â”€â”€ footer.liquid\nâ”‚\nâ”œâ”€â”€ snippets/                   {# Reusable partials #}\nâ”‚   â”œâ”€â”€ product-price.liquid\nâ”‚   â”œâ”€â”€ product-rating.liquid\nâ”‚   â””â”€â”€ icon.liquid\nâ”‚\nâ””â”€â”€ templates/                  {# Page templates #}\n    â”œâ”€â”€ index.json              {# Homepage (JSON) #}\n    â”œâ”€â”€ product.json            {# Product page (JSON) #}\n    â”œâ”€â”€ collection.json         {# Collection page (JSON) #}\n    â”œâ”€â”€ product.liquid          {# Product (Liquid - legacy) #}\n    â”œâ”€â”€ cart.liquid\n    â”œâ”€â”€ search.liquid\n    â”œâ”€â”€ page.liquid\n    â”œâ”€â”€ 404.liquid\n    â””â”€â”€ customers/\n        â”œâ”€â”€ account.liquid\n        â”œâ”€â”€ login.liquid\n        â””â”€â”€ register.liquid\n```\n\n### 2. JSON Templates (Online Store 2.0)\n\nModern template format using JSON configuration:\n\n**templates/index.json (Homepage):**\n```json\n{\n  \"sections\": {\n    \"hero\": {\n      \"type\": \"hero-banner\",\n      \"settings\": {\n        \"heading\": \"Summer Collection\",\n        \"subheading\": \"New arrivals\",\n        \"button_text\": \"Shop Now\",\n        \"button_link\": \"/collections/all\"\n      }\n    },\n    \"featured\": {\n      \"type\": \"featured-products\",\n      \"blocks\": {\n        \"block_1\": {\n          \"type\": \"product\",\n          \"settings\": {\n            \"product\": \"snowboard\"\n          }\n        },\n        \"block_2\": {\n          \"type\": \"product\",\n          \"settings\": {\n            \"product\": \"skateboard\"\n          }\n        }\n      },\n      \"block_order\": [\"block_1\", \"block_2\"],\n      \"settings\": {\n        \"title\": \"Featured Products\",\n        \"products_to_show\": 4\n      }\n    }\n  },\n  \"order\": [\"hero\", \"featured\"]\n}\n```\n\n**templates/product.json:**\n```json\n{\n  \"sections\": {\n    \"main\": {\n      \"type\": \"main-product\",\n      \"settings\": {\n        \"show_vendor\": true,\n        \"show_quantity\": true,\n        \"enable_zoom\": true\n      }\n    },\n    \"recommendations\": {\n      \"type\": \"product-recommendations\",\n      \"settings\": {\n        \"heading\": \"You may also like\",\n        \"products_to_show\": 4\n      }\n    }\n  },\n  \"order\": [\"main\", \"recommendations\"]\n}\n```\n\n### 3. Section Architecture\n\nSections are reusable content blocks with schema configuration:\n\n**sections/hero-banner.liquid:**\n```liquid\n<div class=\"hero\" style=\"background-color: {{ section.settings.background_color }}\">\n  {% if section.settings.image %}\n    <img\n      src=\"{{ section.settings.image | img_url: '1920x' }}\"\n      alt=\"{{ section.settings.heading }}\"\n      loading=\"lazy\"\n    >\n  {% endif %}\n\n  <div class=\"hero__content\">\n    {% if section.settings.heading != blank %}\n      <h1>{{ section.settings.heading }}</h1>\n    {% endif %}\n\n    {% if section.settings.subheading != blank %}\n      <p>{{ section.settings.subheading }}</p>\n    {% endif %}\n\n    {% if section.settings.button_text != blank %}\n      <a href=\"{{ section.settings.button_link }}\" class=\"button\">\n        {{ section.settings.button_text }}\n      </a>\n    {% endif %}\n  </div>\n</div>\n\n{% stylesheet %}\n  .hero {\n    position: relative;\n    min-height: 500px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    padding: var(--spacing, 2rem);\n  }\n\n  .hero img {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    object-fit: cover;\n    z-index: -1;\n  }\n\n  .hero__content {\n    text-align: center;\n    max-width: 600px;\n  }\n{% endstylesheet %}\n\n{% javascript %}\n  console.log('Hero banner loaded');\n{% endjavascript %}\n\n{% schema %}\n{\n  \"name\": \"Hero Banner\",\n  \"tag\": \"section\",\n  \"class\": \"hero-section\",\n  \"settings\": [\n    {\n      \"type\": \"text\",\n      \"id\": \"heading\",\n      \"label\": \"Heading\",\n      \"default\": \"Welcome\"\n    },\n    {\n      \"type\": \"textarea\",\n      \"id\": \"subheading\",\n      \"label\": \"Subheading\",\n      \"default\": \"Discover our collection\"\n    },\n    {\n      \"type\": \"image_picker\",\n      \"id\": \"image\",\n      \"label\": \"Background Image\"\n    },\n    {\n      \"type\": \"color\",\n      \"id\": \"background_color\",\n      \"label\": \"Background Color\",\n      \"default\": \"#000000\"\n    },\n    {\n      \"type\": \"text\",\n      \"id\": \"button_text\",\n      \"label\": \"Button Text\",\n      \"default\": \"Shop Now\"\n    },\n    {\n      \"type\": \"url\",\n      \"id\": \"button_link\",\n      \"label\": \"Button Link\"\n    }\n  ],\n  \"presets\": [\n    {\n      \"name\": \"Hero Banner\"\n    }\n  ]\n}\n{% endschema %}\n```\n\n### 4. Sections with Blocks\n\nSections can contain dynamic blocks for flexible layouts:\n\n**sections/featured-products.liquid:**\n```liquid\n<div class=\"featured-products\" {{ section.shopify_attributes }}>\n  <h2>{{ section.settings.title }}</h2>\n\n  <div class=\"product-grid\">\n    {% for block in section.blocks %}\n      <div class=\"product-item\" {{ block.shopify_attributes }}>\n        {% case block.type %}\n          {% when 'product' %}\n            {% assign product = all_products[block.settings.product] %}\n            {% render 'product-card', product: product %}\n\n          {% when 'collection' %}\n            {% assign collection = collections[block.settings.collection] %}\n            <h3>{{ collection.title }}</h3>\n            {% for product in collection.products limit: block.settings.products_to_show %}\n              {% render 'product-card', product: product %}\n            {% endfor %}\n\n          {% when 'heading' %}\n            <h3>{{ block.settings.heading }}</h3>\n\n          {% when 'text' %}\n            <div class=\"text-block\">\n              {{ block.settings.text }}\n            </div>\n        {% endcase %}\n      </div>\n    {% endfor %}\n  </div>\n</div>\n\n{% schema %}\n{\n  \"name\": \"Featured Products\",\n  \"tag\": \"section\",\n  \"settings\": [\n    {\n      \"type\": \"text\",\n      \"id\": \"title\",\n      \"label\": \"Section Title\",\n      \"default\": \"Featured Products\"\n    },\n    {\n      \"type\": \"range\",\n      \"id\": \"products_per_row\",\n      \"label\": \"Products per Row\",\n      \"min\": 2,\n      \"max\": 5,\n      \"step\": 1,\n      \"default\": 4\n    }\n  ],\n  \"blocks\": [\n    {\n      \"type\": \"product\",\n      \"name\": \"Product\",\n      \"settings\": [\n        {\n          \"type\": \"product\",\n          \"id\": \"product\",\n          \"label\": \"Product\"\n        }\n      ]\n    },\n    {\n      \"type\": \"collection\",\n      \"name\": \"Collection\",\n      \"settings\": [\n        {\n          \"type\": \"collection\",\n          \"id\": \"collection\",\n          \"label\": \"Collection\"\n        },\n        {\n          \"type\": \"range\",\n          \"id\": \"products_to_show\",\n          \"label\": \"Products to Show\",\n          \"min\": 1,\n          \"max\": 12,\n          \"step\": 1,\n          \"default\": 4\n        }\n      ]\n    },\n    {\n      \"type\": \"heading\",\n      \"name\": \"Heading\",\n      \"settings\": [\n        {\n          \"type\": \"text\",\n          \"id\": \"heading\",\n          \"label\": \"Heading Text\"\n        }\n      ]\n    },\n    {\n      \"type\": \"text\",\n      \"name\": \"Text Block\",\n      \"settings\": [\n        {\n          \"type\": \"richtext\",\n          \"id\": \"text\",\n          \"label\": \"Text Content\"\n        }\n      ]\n    }\n  ],\n  \"presets\": [\n    {\n      \"name\": \"Featured Products\",\n      \"blocks\": [\n        {\n          \"type\": \"product\"\n        },\n        {\n          \"type\": \"product\"\n        },\n        {\n          \"type\": \"product\"\n        }\n      ]\n    }\n  ],\n  \"max_blocks\": 12\n}\n{% endschema %}\n```\n\n### 5. Snippets\n\nReusable template partials:\n\n**snippets/product-card.liquid:**\n```liquid\n{% comment %}\n  Usage: {% render 'product-card', product: product, show_vendor: true %}\n{% endcomment %}\n\n<div class=\"product-card\">\n  <a href=\"{{ product.url }}\">\n    {% if product.featured_image %}\n      <img\n        src=\"{{ product.featured_image | img_url: '400x400' }}\"\n        alt=\"{{ product.featured_image.alt | escape }}\"\n        loading=\"lazy\"\n      >\n    {% else %}\n      {{ 'product-1' | placeholder_svg_tag: 'placeholder' }}\n    {% endif %}\n  </a>\n\n  <div class=\"product-card__info\">\n    {% if show_vendor and product.vendor != blank %}\n      <p class=\"product-card__vendor\">{{ product.vendor }}</p>\n    {% endif %}\n\n    <h3 class=\"product-card__title\">\n      <a href=\"{{ product.url }}\">{{ product.title }}</a>\n    </h3>\n\n    <div class=\"product-card__price\">\n      {% render 'product-price', product: product %}\n    </div>\n\n    {% unless product.available %}\n      <p class=\"sold-out\">Sold Out</p>\n    {% endunless %}\n  </div>\n</div>\n```\n\n**snippets/product-price.liquid:**\n```liquid\n{% comment %}\n  Usage: {% render 'product-price', product: product %}\n{% endcomment %}\n\n{% if product.compare_at_price > product.price %}\n  <span class=\"price price--sale\">\n    {{ product.price | money }}\n  </span>\n  <span class=\"price price--compare\">\n    {{ product.compare_at_price | money }}\n  </span>\n  <span class=\"price__badge\">\n    Save {{ product.compare_at_price | minus: product.price | money }}\n  </span>\n{% else %}\n  <span class=\"price\">\n    {{ product.price | money }}\n  </span>\n{% endif %}\n\n{% if product.price_varies %}\n  <span class=\"price__from\">from</span>\n{% endif %}\n```\n\n### 6. Settings Schema\n\nComplete theme customization interface:\n\n**config/settings_schema.json:**\n```json\n[\n  {\n    \"name\": \"theme_info\",\n    \"theme_name\": \"My Theme\",\n    \"theme_version\": \"1.0.0\",\n    \"theme_author\": \"Your Name\",\n    \"theme_documentation_url\": \"https://...\",\n    \"theme_support_url\": \"https://...\"\n  },\n  {\n    \"name\": \"Colors\",\n    \"settings\": [\n      {\n        \"type\": \"header\",\n        \"content\": \"Color Scheme\"\n      },\n      {\n        \"type\": \"color\",\n        \"id\": \"color_primary\",\n        \"label\": \"Primary Color\",\n        \"default\": \"#000000\"\n      },\n      {\n        \"type\": \"color\",\n        \"id\": \"color_secondary\",\n        \"label\": \"Secondary Color\",\n        \"default\": \"#ffffff\"\n      },\n      {\n        \"type\": \"color_background\",\n        \"id\": \"color_body_bg\",\n        \"label\": \"Body Background\"\n      }\n    ]\n  },\n  {\n    \"name\": \"Typography\",\n    \"settings\": [\n      {\n        \"type\": \"font_picker\",\n        \"id\": \"type_header_font\",\n        \"label\": \"Heading Font\",\n        \"default\": \"helvetica_n7\"\n      },\n      {\n        \"type\": \"font_picker\",\n        \"id\": \"type_body_font\",\n        \"label\": \"Body Font\",\n        \"default\": \"helvetica_n4\"\n      },\n      {\n        \"type\": \"range\",\n        \"id\": \"type_base_size\",\n        \"label\": \"Base Font Size\",\n        \"min\": 12,\n        \"max\": 24,\n        \"step\": 1,\n        \"default\": 16,\n        \"unit\": \"px\"\n      }\n    ]\n  },\n  {\n    \"name\": \"Layout\",\n    \"settings\": [\n      {\n        \"type\": \"select\",\n        \"id\": \"layout_style\",\n        \"label\": \"Layout Style\",\n        \"options\": [\n          { \"value\": \"boxed\", \"label\": \"Boxed\" },\n          { \"value\": \"full-width\", \"label\": \"Full Width\" },\n          { \"value\": \"wide\", \"label\": \"Wide\" }\n        ],\n        \"default\": \"full-width\"\n      },\n      {\n        \"type\": \"checkbox\",\n        \"id\": \"layout_sidebar_enabled\",\n        \"label\": \"Enable Sidebar\",\n        \"default\": true\n      }\n    ]\n  },\n  {\n    \"name\": \"Header\",\n    \"settings\": [\n      {\n        \"type\": \"image_picker\",\n        \"id\": \"logo\",\n        \"label\": \"Logo\"\n      },\n      {\n        \"type\": \"range\",\n        \"id\": \"logo_max_width\",\n        \"label\": \"Logo Width\",\n        \"min\": 50,\n        \"max\": 300,\n        \"step\": 10,\n        \"default\": 150,\n        \"unit\": \"px\"\n      },\n      {\n        \"type\": \"link_list\",\n        \"id\": \"main_menu\",\n        \"label\": \"Main Menu\"\n      },\n      {\n        \"type\": \"checkbox\",\n        \"id\": \"header_sticky\",\n        \"label\": \"Sticky Header\",\n        \"default\": false\n      }\n    ]\n  },\n  {\n    \"name\": \"Social Media\",\n    \"settings\": [\n      {\n        \"type\": \"header\",\n        \"content\": \"Social Accounts\"\n      },\n      {\n        \"type\": \"url\",\n        \"id\": \"social_twitter\",\n        \"label\": \"Twitter URL\",\n        \"info\": \"https://twitter.com/username\"\n      },\n      {\n        \"type\": \"url\",\n        \"id\": \"social_facebook\",\n        \"label\": \"Facebook URL\"\n      },\n      {\n        \"type\": \"url\",\n        \"id\": \"social_instagram\",\n        \"label\": \"Instagram URL\"\n      }\n    ]\n  }\n]\n```\n\n### 7. Layout Files\n\nMaster template wrappers:\n\n**layout/theme.liquid:**\n```liquid\n<!doctype html>\n<html lang=\"{{ request.locale.iso_code }}\">\n<head>\n  <meta charset=\"utf-8\">\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1\">\n\n  <title>\n    {{ page_title }}\n    {%- if current_tags %} &ndash; {{ 'general.meta.tags' | t: tags: current_tags.join(', ') }}{% endif -%}\n    {%- if current_page != 1 %} &ndash; {{ 'general.meta.page' | t: page: current_page }}{% endif -%}\n    {%- unless page_title contains shop.name %} &ndash; {{ shop.name }}{% endunless -%}\n  </title>\n\n  {{ content_for_header }}\n\n  <link rel=\"stylesheet\" href=\"{{ 'style.css' | asset_url }}\">\n  <script src=\"{{ 'theme.js' | asset_url }}\" defer></script>\n</head>\n<body class=\"template-{{ request.page_type }}\">\n  {% section 'header' %}\n\n  <main role=\"main\">\n    {{ content_for_layout }}\n  </main>\n\n  {% section 'footer' %}\n</body>\n</html>\n```\n\n## Common Settings Input Types\n\nAll 28+ input types for theme customization:\n\n- `text` - Single line text\n- `textarea` - Multi-line text\n- `html` - HTML editor\n- `richtext` - WYSIWYG editor\n- `number` - Numeric input\n- `range` - Slider\n- `checkbox` - Boolean toggle\n- `select` - Dropdown menu\n- `radio` - Radio buttons\n- `color` - Color picker\n- `color_background` - Color with gradient\n- `image_picker` - Upload image\n- `media` - Image or video\n- `url` - URL input\n- `font_picker` - Font selector\n- `product` - Product picker\n- `collection` - Collection picker\n- `page` - Page picker\n- `blog` - Blog picker\n- `article` - Article picker\n- `link_list` - Menu picker\n- `date` - Date picker\n- `video_url` - Video URL (YouTube, Vimeo)\n\nSee [references/settings-schema.md](references/settings-schema.md) for complete examples.\n\n## Best Practices\n\n1. **Use JSON templates** for Online Store 2.0 compatibility\n2. **Make sections dynamic** with blocks for merchant flexibility\n3. **Add `shopify_attributes`** to section/block containers for theme editor\n4. **Provide sensible defaults** in schema settings\n5. **Use snippets** for repeated UI components\n6. **Add `{% stylesheet %}` and `{% javascript %}`** blocks in sections for scoped styles\n7. **Include accessibility** attributes (ARIA labels, alt text)\n8. **Test in theme editor** to ensure live preview works\n9. **Document snippet parameters** with comments\n10. **Use semantic HTML** for better SEO\n\n## Detailed References\n\n- **[references/settings-schema.md](references/settings-schema.md)** - Complete input type reference\n- **[references/section-patterns.md](references/section-patterns.md)** - Common section architectures\n- **[references/template-examples.md](references/template-examples.md)** - JSON template patterns\n\n## Integration with Other Skills\n\n- **shopify-liquid** - Use when working with Liquid code within theme files\n- **shopify-performance** - Use when optimizing theme load times and asset delivery\n- **shopify-api** - Use when fetching data via Ajax for dynamic sections\n- **shopify-debugging** - Use when troubleshooting theme editor or rendering issues\n\n## Quick Reference\n\n```liquid\n{# Section with settings #}\n{% schema %}\n{\n  \"name\": \"Section Name\",\n  \"settings\": [...],\n  \"blocks\": [...],\n  \"presets\": [...]\n}\n{% endschema %}\n\n{# Access section settings #}\n{{ section.settings.setting_id }}\n\n{# Loop through blocks #}\n{% for block in section.blocks %}\n  {{ block.settings.text }}\n  {{ block.shopify_attributes }}\n{% endfor %}\n\n{# Render snippet with parameters #}\n{% render 'snippet-name', param: value %}\n\n{# Access theme settings #}\n{{ settings.color_primary }}\n\n{# Section attributes for theme editor #}\n<div {{ section.shopify_attributes }}>...</div>\n<div {{ block.shopify_attributes }}>...</div>\n```\n",
        "plugins/shopify-developer/skills/shopify-theme-dev/references/settings-schema.md": "# Settings Schema - Complete Input Type Reference\n\nAll 28+ input types for `settings_schema.json` with examples.\n\n## Text Inputs\n\n### text\n\nSingle-line text input:\n\n```json\n{\n  \"type\": \"text\",\n  \"id\": \"store_name\",\n  \"label\": \"Store Name\",\n  \"default\": \"My Store\",\n  \"placeholder\": \"Enter store name\",\n  \"info\": \"This appears in the header\"\n}\n```\n\n### textarea\n\nMulti-line text input:\n\n```json\n{\n  \"type\": \"textarea\",\n  \"id\": \"footer_text\",\n  \"label\": \"Footer Text\",\n  \"default\": \"Â© 2025 My Store. All rights reserved.\",\n  \"placeholder\": \"Enter footer text\"\n}\n```\n\n### html\n\nHTML code editor:\n\n```json\n{\n  \"type\": \"html\",\n  \"id\": \"custom_html\",\n  \"label\": \"Custom HTML\",\n  \"default\": \"<p>Welcome to our store!</p>\",\n  \"info\": \"Add custom HTML code\"\n}\n```\n\n### richtext\n\nWYSIWYG rich text editor:\n\n```json\n{\n  \"type\": \"richtext\",\n  \"id\": \"announcement_content\",\n  \"label\": \"Announcement Bar Content\",\n  \"default\": \"<p>Free shipping on orders over $50!</p>\"\n}\n```\n\n## Numeric Inputs\n\n### number\n\nNumeric input field:\n\n```json\n{\n  \"type\": \"number\",\n  \"id\": \"products_per_page\",\n  \"label\": \"Products Per Page\",\n  \"default\": 12,\n  \"min\": 1,\n  \"max\": 100,\n  \"step\": 1,\n  \"info\": \"Number of products to show per page\"\n}\n```\n\n### range\n\nSlider input:\n\n```json\n{\n  \"type\": \"range\",\n  \"id\": \"columns\",\n  \"label\": \"Number of Columns\",\n  \"min\": 2,\n  \"max\": 6,\n  \"step\": 1,\n  \"default\": 4,\n  \"unit\": \"columns\",\n  \"info\": \"Adjust the grid layout\"\n}\n```\n\n**Common units:**\n- `px` - Pixels\n- `%` - Percentage\n- `em` - Em units\n- `rem` - Root em units\n- Custom text (like \"columns\", \"items\")\n\n## Boolean Inputs\n\n### checkbox\n\nToggle checkbox:\n\n```json\n{\n  \"type\": \"checkbox\",\n  \"id\": \"show_search\",\n  \"label\": \"Show Search Bar\",\n  \"default\": true,\n  \"info\": \"Display search in header\"\n}\n```\n\n### boolean\n\nBoolean setting (same as checkbox):\n\n```json\n{\n  \"type\": \"boolean\",\n  \"id\": \"enable_feature\",\n  \"label\": \"Enable Feature\",\n  \"default\": false\n}\n```\n\n## Selection Inputs\n\n### select\n\nDropdown menu:\n\n```json\n{\n  \"type\": \"select\",\n  \"id\": \"layout_style\",\n  \"label\": \"Layout Style\",\n  \"options\": [\n    {\n      \"value\": \"boxed\",\n      \"label\": \"Boxed\"\n    },\n    {\n      \"value\": \"full-width\",\n      \"label\": \"Full Width\"\n    },\n    {\n      \"value\": \"wide\",\n      \"label\": \"Wide\"\n    }\n  ],\n  \"default\": \"full-width\",\n  \"info\": \"Choose your layout style\"\n}\n```\n\n### radio\n\nRadio button selection:\n\n```json\n{\n  \"type\": \"radio\",\n  \"id\": \"text_alignment\",\n  \"label\": \"Text Alignment\",\n  \"options\": [\n    { \"value\": \"left\", \"label\": \"Left\" },\n    { \"value\": \"center\", \"label\": \"Center\" },\n    { \"value\": \"right\", \"label\": \"Right\" }\n  ],\n  \"default\": \"center\"\n}\n```\n\n## Color Inputs\n\n### color\n\nColor picker:\n\n```json\n{\n  \"type\": \"color\",\n  \"id\": \"primary_color\",\n  \"label\": \"Primary Color\",\n  \"default\": \"#000000\",\n  \"info\": \"Main brand color\"\n}\n```\n\n### color_background\n\nColor with gradient support:\n\n```json\n{\n  \"type\": \"color_background\",\n  \"id\": \"section_background\",\n  \"label\": \"Section Background\",\n  \"default\": \"linear-gradient(#ffffff, #000000)\"\n}\n```\n\n**Supports:**\n- Solid colors: `#ffffff`\n- Linear gradients: `linear-gradient(#fff, #000)`\n- Radial gradients\n- With opacity\n\n## Media Inputs\n\n### image_picker\n\nImage upload and selection:\n\n```json\n{\n  \"type\": \"image_picker\",\n  \"id\": \"logo\",\n  \"label\": \"Logo Image\",\n  \"info\": \"Recommended size: 300x100px\"\n}\n```\n\nAccess in Liquid:\n\n```liquid\n{% if settings.logo %}\n  <img src=\"{{ settings.logo | img_url: '300x' }}\" alt=\"{{ shop.name }}\">\n{% endif %}\n\n{{ settings.logo.width }}\n{{ settings.logo.height }}\n{{ settings.logo.alt }}\n{{ settings.logo.src }}\n```\n\n### media\n\nImage or video picker:\n\n```json\n{\n  \"type\": \"media\",\n  \"id\": \"hero_media\",\n  \"label\": \"Hero Media\",\n  \"accept\": [\"image\", \"video\"],\n  \"info\": \"Upload image or video\"\n}\n```\n\n### video_url\n\nVideo URL input (YouTube, Vimeo):\n\n```json\n{\n  \"type\": \"video_url\",\n  \"id\": \"promo_video\",\n  \"label\": \"Promo Video\",\n  \"accept\": [\"youtube\", \"vimeo\"],\n  \"placeholder\": \"https://www.youtube.com/watch?v=...\",\n  \"info\": \"YouTube or Vimeo URL\"\n}\n```\n\nAccess in Liquid:\n\n```liquid\n{% if settings.promo_video %}\n  {{ settings.promo_video.type }}  {# youtube or vimeo #}\n  {{ settings.promo_video.id }}    {# Video ID #}\n{% endif %}\n```\n\n## Typography Inputs\n\n### font_picker\n\nGoogle Fonts selector:\n\n```json\n{\n  \"type\": \"font_picker\",\n  \"id\": \"heading_font\",\n  \"label\": \"Heading Font\",\n  \"default\": \"helvetica_n7\",\n  \"info\": \"Font for headings\"\n}\n```\n\n**Font format:** `family_weight`\n- `n4` - Normal 400\n- `n7` - Bold 700\n- `i4` - Italic 400\n\nAccess in Liquid:\n\n```liquid\n{{ settings.heading_font.family }}\n{{ settings.heading_font.weight }}\n{{ settings.heading_font.style }}\n\n{# CSS font face #}\n<style>\n  {{ settings.heading_font | font_face }}\n\n  h1, h2, h3 {\n    font-family: {{ settings.heading_font.family }}, {{ settings.heading_font.fallback_families }};\n    font-weight: {{ settings.heading_font.weight }};\n    font-style: {{ settings.heading_font.style }};\n  }\n</style>\n```\n\n## Resource Pickers\n\n### product\n\nProduct selector:\n\n```json\n{\n  \"type\": \"product\",\n  \"id\": \"featured_product\",\n  \"label\": \"Featured Product\",\n  \"info\": \"Select a product to feature\"\n}\n```\n\nAccess in Liquid:\n\n```liquid\n{% assign product = all_products[settings.featured_product] %}\n{{ product.title }}\n{{ product.price | money }}\n```\n\n### collection\n\nCollection selector:\n\n```json\n{\n  \"type\": \"collection\",\n  \"id\": \"featured_collection\",\n  \"label\": \"Featured Collection\",\n  \"info\": \"Select a collection to feature\"\n}\n```\n\nAccess in Liquid:\n\n```liquid\n{% assign collection = collections[settings.featured_collection] %}\n{{ collection.title }}\n{% for product in collection.products limit: 4 %}\n  {{ product.title }}\n{% endfor %}\n```\n\n### page\n\nPage selector:\n\n```json\n{\n  \"type\": \"page\",\n  \"id\": \"about_page\",\n  \"label\": \"About Page\",\n  \"info\": \"Link to about page\"\n}\n```\n\nAccess in Liquid:\n\n```liquid\n{% assign page = pages[settings.about_page] %}\n<a href=\"{{ page.url }}\">{{ page.title }}</a>\n{{ page.content }}\n```\n\n### blog\n\nBlog selector:\n\n```json\n{\n  \"type\": \"blog\",\n  \"id\": \"main_blog\",\n  \"label\": \"Main Blog\",\n  \"info\": \"Select your primary blog\"\n}\n```\n\nAccess in Liquid:\n\n```liquid\n{% assign blog = blogs[settings.main_blog] %}\n{{ blog.title }}\n{% for article in blog.articles limit: 3 %}\n  {{ article.title }}\n{% endfor %}\n```\n\n### article\n\nArticle (blog post) selector:\n\n```json\n{\n  \"type\": \"article\",\n  \"id\": \"featured_article\",\n  \"label\": \"Featured Article\",\n  \"info\": \"Select an article to feature\"\n}\n```\n\n### link_list\n\nMenu/navigation selector:\n\n```json\n{\n  \"type\": \"link_list\",\n  \"id\": \"main_menu\",\n  \"label\": \"Main Navigation\",\n  \"default\": \"main-menu\",\n  \"info\": \"Select menu for header\"\n}\n```\n\nAccess in Liquid:\n\n```liquid\n{% assign menu = linklists[settings.main_menu] %}\n{% for link in menu.links %}\n  <a href=\"{{ link.url }}\">{{ link.title }}</a>\n\n  {% if link.links.size > 0 %}\n    {# Nested links #}\n    {% for child_link in link.links %}\n      <a href=\"{{ child_link.url }}\">{{ child_link.title }}</a>\n    {% endfor %}\n  {% endif %}\n{% endfor %}\n```\n\n## URL Inputs\n\n### url\n\nURL input field:\n\n```json\n{\n  \"type\": \"url\",\n  \"id\": \"twitter_url\",\n  \"label\": \"Twitter URL\",\n  \"placeholder\": \"https://twitter.com/username\",\n  \"info\": \"Your Twitter profile URL\"\n}\n```\n\n## Date & Time Inputs\n\n### date\n\nDate picker:\n\n```json\n{\n  \"type\": \"date\",\n  \"id\": \"sale_end_date\",\n  \"label\": \"Sale End Date\",\n  \"info\": \"When the sale ends\"\n}\n```\n\nAccess in Liquid:\n\n```liquid\n{{ settings.sale_end_date | date: '%B %d, %Y' }}\n```\n\n## Organization Elements\n\n### header\n\nVisual separator with heading:\n\n```json\n{\n  \"type\": \"header\",\n  \"content\": \"Color Scheme Settings\",\n  \"info\": \"Configure your color palette\"\n}\n```\n\nNot a setting, just a visual divider in the settings panel.\n\n### paragraph\n\nInformational text block:\n\n```json\n{\n  \"type\": \"paragraph\",\n  \"content\": \"These settings control the appearance of your product cards. Make sure to preview changes on different screen sizes.\"\n}\n```\n\n## Advanced Inputs\n\n### liquid\n\nLiquid code editor:\n\n```json\n{\n  \"type\": \"liquid\",\n  \"id\": \"custom_liquid\",\n  \"label\": \"Custom Liquid Code\",\n  \"info\": \"Add custom Liquid code\"\n}\n```\n\n### inline_richtext\n\nInline rich text (no `<p>` wrapper):\n\n```json\n{\n  \"type\": \"inline_richtext\",\n  \"id\": \"banner_text\",\n  \"label\": \"Banner Text\",\n  \"default\": \"Welcome to <strong>our store</strong>!\",\n  \"info\": \"Text without paragraph wrapper\"\n}\n```\n\n## Complete Example\n\nFull settings schema with multiple sections:\n\n```json\n[\n  {\n    \"name\": \"theme_info\",\n    \"theme_name\": \"Professional Theme\",\n    \"theme_version\": \"1.0.0\",\n    \"theme_author\": \"Your Name\",\n    \"theme_documentation_url\": \"https://docs.example.com\",\n    \"theme_support_url\": \"https://support.example.com\"\n  },\n  {\n    \"name\": \"Colors\",\n    \"settings\": [\n      {\n        \"type\": \"header\",\n        \"content\": \"Brand Colors\"\n      },\n      {\n        \"type\": \"color\",\n        \"id\": \"color_primary\",\n        \"label\": \"Primary Brand Color\",\n        \"default\": \"#2196F3\"\n      },\n      {\n        \"type\": \"color\",\n        \"id\": \"color_secondary\",\n        \"label\": \"Secondary Color\",\n        \"default\": \"#FFC107\"\n      },\n      {\n        \"type\": \"header\",\n        \"content\": \"Background Colors\"\n      },\n      {\n        \"type\": \"color_background\",\n        \"id\": \"color_body_bg\",\n        \"label\": \"Body Background\",\n        \"default\": \"#FFFFFF\"\n      },\n      {\n        \"type\": \"color_background\",\n        \"id\": \"color_header_bg\",\n        \"label\": \"Header Background\",\n        \"default\": \"linear-gradient(#FFFFFF, #F5F5F5)\"\n      }\n    ]\n  },\n  {\n    \"name\": \"Typography\",\n    \"settings\": [\n      {\n        \"type\": \"paragraph\",\n        \"content\": \"Select fonts for your store. Changes preview in real-time.\"\n      },\n      {\n        \"type\": \"font_picker\",\n        \"id\": \"type_header_font\",\n        \"label\": \"Heading Font\",\n        \"default\": \"helvetica_n7\",\n        \"info\": \"Font for all headings\"\n      },\n      {\n        \"type\": \"font_picker\",\n        \"id\": \"type_body_font\",\n        \"label\": \"Body Font\",\n        \"default\": \"helvetica_n4\",\n        \"info\": \"Font for body text\"\n      },\n      {\n        \"type\": \"range\",\n        \"id\": \"type_base_size\",\n        \"label\": \"Base Font Size\",\n        \"min\": 12,\n        \"max\": 24,\n        \"step\": 1,\n        \"default\": 16,\n        \"unit\": \"px\"\n      }\n    ]\n  },\n  {\n    \"name\": \"Header\",\n    \"settings\": [\n      {\n        \"type\": \"image_picker\",\n        \"id\": \"logo\",\n        \"label\": \"Logo Image\"\n      },\n      {\n        \"type\": \"range\",\n        \"id\": \"logo_width\",\n        \"label\": \"Logo Width\",\n        \"min\": 50,\n        \"max\": 300,\n        \"step\": 10,\n        \"default\": 150,\n        \"unit\": \"px\"\n      },\n      {\n        \"type\": \"link_list\",\n        \"id\": \"main_menu\",\n        \"label\": \"Main Menu\",\n        \"default\": \"main-menu\"\n      },\n      {\n        \"type\": \"checkbox\",\n        \"id\": \"header_sticky\",\n        \"label\": \"Sticky Header\",\n        \"default\": true,\n        \"info\": \"Header stays visible while scrolling\"\n      },\n      {\n        \"type\": \"select\",\n        \"id\": \"header_style\",\n        \"label\": \"Header Style\",\n        \"options\": [\n          { \"value\": \"minimal\", \"label\": \"Minimal\" },\n          { \"value\": \"classic\", \"label\": \"Classic\" },\n          { \"value\": \"centered\", \"label\": \"Centered\" }\n        ],\n        \"default\": \"classic\"\n      }\n    ]\n  },\n  {\n    \"name\": \"Product Pages\",\n    \"settings\": [\n      {\n        \"type\": \"checkbox\",\n        \"id\": \"product_show_vendor\",\n        \"label\": \"Show Vendor\",\n        \"default\": true\n      },\n      {\n        \"type\": \"checkbox\",\n        \"id\": \"product_show_sku\",\n        \"label\": \"Show SKU\",\n        \"default\": false\n      },\n      {\n        \"type\": \"select\",\n        \"id\": \"product_image_size\",\n        \"label\": \"Image Size\",\n        \"options\": [\n          { \"value\": \"small\", \"label\": \"Small\" },\n          { \"value\": \"medium\", \"label\": \"Medium\" },\n          { \"value\": \"large\", \"label\": \"Large\" }\n        ],\n        \"default\": \"medium\"\n      },\n      {\n        \"type\": \"product\",\n        \"id\": \"related_product\",\n        \"label\": \"Related Product\"\n      }\n    ]\n  },\n  {\n    \"name\": \"Social Media\",\n    \"settings\": [\n      {\n        \"type\": \"header\",\n        \"content\": \"Social Media Accounts\"\n      },\n      {\n        \"type\": \"url\",\n        \"id\": \"social_twitter\",\n        \"label\": \"Twitter\",\n        \"placeholder\": \"https://twitter.com/username\"\n      },\n      {\n        \"type\": \"url\",\n        \"id\": \"social_facebook\",\n        \"label\": \"Facebook\",\n        \"placeholder\": \"https://facebook.com/username\"\n      },\n      {\n        \"type\": \"url\",\n        \"id\": \"social_instagram\",\n        \"label\": \"Instagram\",\n        \"placeholder\": \"https://instagram.com/username\"\n      }\n    ]\n  }\n]\n```\n\n## Best Practices\n\n1. **Group related settings** into logical sections\n2. **Provide clear labels and info text** for guidance\n3. **Set sensible defaults** for all settings\n4. **Use appropriate input types** for each setting\n5. **Add placeholder text** for URL and text inputs\n6. **Use headers and paragraphs** to organize complex sections\n7. **Limit range values** to reasonable min/max\n8. **Test in theme customizer** to ensure good UX\n9. **Document dependencies** between settings\n10. **Consider mobile experience** when choosing input types\n",
        "plugins/ultimate-skill-creator/.claude-plugin/plugin.json": "{\n  \"name\": \"ultimate-skill-creator\",\n  \"version\": \"1.1.0\",\n  \"description\": \"Advanced skill development toolkit combining official plugin-dev patterns, community best practices, and latest API documentation for creating exceptional Claude Code skills\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  }\n}\n",
        "plugins/ultimate-skill-creator/README.md": "# Ultimate Skill Creator\n\nAdvanced skill development toolkit combining three authoritative sources for creating exceptional Claude Code skills.\n\n## Requirements\n\n**This plugin requires the official [plugin-dev](https://github.com/anthropics/claude-plugins-official) plugin for validation agents.**\n\n```bash\n# Install the required plugin-dev dependency first\n/plugin install plugin-dev@claude-plugins-official\n\n# Then install this plugin\n/plugin install ultimate-skill-creator@wookstar\n```\n\n## What's Included\n\n### Agent (1)\n\n- **skill-architect** - Designs optimal skill structure, recommends archetypes, and plans progressive disclosure\n\n### Commands (2)\n\n- **/create-skill-ultimate** - Guided skill creation workflow with all best practices applied\n- **/setup-skill-hook** - Automatically set up the skill-activation-prompt hook in your project\n\n### Skill (1)\n\n- **skill-mastery** - Comprehensive skill development guide (model-managed, not directly invocable)\n\n### Hook (1)\n\n- **skill-activation-prompt** - Automatically suggests relevant skills based on user prompts\n\n## Sources Combined\n\n| Source | What It Provides |\n|--------|-----------------|\n| **Official plugin-dev** | Validation agents, proven patterns, AI-assisted creation |\n| **Community best practices** | Token hierarchy, archetypes, advanced patterns |\n| **Official documentation** | Current API fields, latest features |\n\n## Usage\n\n### Create a New Skill\n\n```bash\n/create-skill-ultimate PDF processing tool\n/create-skill-ultimate --archetype=methodology code review workflow\n```\n\n### Get Architecture Advice\n\n```bash\n# Triggers skill-architect agent automatically\n\"Help me design a skill for API documentation\"\n\"What archetype should I use for a database migration skill?\"\n```\n\n## Key Features\n\n### Token Hierarchy Understanding\n\n```\nLevel 1: Metadata (~100 tokens)     - Always loaded\nLevel 2: SKILL.md (~1,500-5,000)    - On trigger\nLevel 3: References (unlimited)      - On-demand only\n```\n\n### Four Skill Archetypes\n\n| Archetype | Best For |\n|-----------|----------|\n| CLI Reference | Tool documentation |\n| Methodology | Workflows, processes |\n| Safety Tool | Validation, guardrails |\n| Orchestration | Multi-agent coordination |\n\n### Advanced Patterns\n\n- THE EXACT PROMPT - reproducible prompts\n- Risk Tiering - safety classifications\n- Robot Mode - machine-readable output\n- Why This Exists - context for triggering\n\n### Utility Scripts\n\n- `init_skill.py` - Scaffold a new skill directory structure\n- `package_skill.py` - Validate and package skill for distribution\n\n## File Structure\n\n```\nultimate-skill-creator/\nâ”œâ”€â”€ .claude-plugin/plugin.json\nâ”œâ”€â”€ README.md\nâ”œâ”€â”€ agents/\nâ”‚   â””â”€â”€ skill-architect.md\nâ”œâ”€â”€ commands/\nâ”‚   â”œâ”€â”€ create-skill-ultimate.md\nâ”‚   â””â”€â”€ setup-skill-hook.md\nâ”œâ”€â”€ hooks/\nâ”‚   â””â”€â”€ skill-activation-prompt/\nâ”‚       â”œâ”€â”€ README.md\nâ”‚       â”œâ”€â”€ skill-activation-prompt.sh\nâ”‚       â”œâ”€â”€ skill-activation-prompt.ts\nâ”‚       â”œâ”€â”€ package.json\nâ”‚       â””â”€â”€ tsconfig.json\nâ””â”€â”€ skills/\n    â””â”€â”€ skill-mastery/\n        â”œâ”€â”€ SKILL.md\n        â”œâ”€â”€ references/\n        â”‚   â”œâ”€â”€ token-hierarchy.md\n        â”‚   â”œâ”€â”€ archetypes.md\n        â”‚   â”œâ”€â”€ advanced-patterns.md\n        â”‚   â””â”€â”€ api-reference.md\n        â””â”€â”€ scripts/\n            â”œâ”€â”€ init_skill.py\n            â””â”€â”€ package_skill.py\n```\n\n## Hook Setup (Optional)\n\nThe skill-activation-prompt hook automatically suggests relevant skills based on your prompts. This is optional but recommended for teams with many custom skills.\n\n### Automatic Setup (Recommended)\n\nRun the setup command in your target project:\n\n```bash\n/setup-skill-hook\n```\n\nThis will:\n- Copy all hook files to `.claude/hooks/`\n- Install npm dependencies\n- Create a starter `skill-rules.json`\n- Configure `.claude/settings.json`\n\n### Manual Setup\n\nIf you prefer manual configuration:\n\n1. **Copy hook files to your project:**\n\n   ```bash\n   mkdir -p .claude/hooks\n   cp -r /path/to/ultimate-skill-creator/hooks/skill-activation-prompt/* .claude/hooks/\n   chmod +x .claude/hooks/skill-activation-prompt.sh\n   ```\n\n2. **Install dependencies:**\n\n   ```bash\n   cd .claude/hooks && npm install\n   ```\n\n3. **Create skill rules configuration:**\n\n   ```bash\n   mkdir -p .claude/skills\n   ```\n\n   Create `.claude/skills/skill-rules.json`:\n\n   ```json\n   {\n     \"version\": \"1.0.0\",\n     \"skills\": {\n       \"xlsx\": {\n         \"type\": \"domain\",\n         \"enforcement\": \"suggest\",\n         \"priority\": \"high\",\n         \"promptTriggers\": {\n           \"keywords\": [\"spreadsheet\", \"excel\", \"csv\"],\n           \"intentPatterns\": [\"create.*spreadsheet\"]\n         }\n       }\n     }\n   }\n   ```\n\n4. **Add hook to `.claude/settings.json`:**\n\n   ```json\n   {\n     \"hooks\": {\n       \"UserPromptSubmit\": [\n         {\n           \"type\": \"command\",\n           \"command\": \"$CLAUDE_PROJECT_DIR/.claude/hooks/skill-activation-prompt.sh\"\n         }\n       ]\n     }\n   }\n   ```\n\nSee `hooks/skill-activation-prompt/README.md` for full configuration reference.\n\n## Skill Creation Workflow\n\n1. **Choose archetype** - CLI, Methodology, Safety, or Orchestration\n2. **Write description first** - This determines if skill ever triggers\n3. **Scaffold with script** - Use init_skill.py to create structure\n4. **Draft SKILL.md** - Core guidance only (<500 lines)\n5. **Extract to references** - Detailed docs, API specs, schemas\n6. **Add examples** - Working code that demonstrates usage\n7. **Create scripts** - Utilities that execute (not load into context)\n8. **Test with fresh instance** - Does it trigger? Apply rules correctly?\n9. **Validate** - Use plugin-dev's skill-reviewer agent\n10. **Package** - Use package_skill.py for distribution\n\n## Quick Reference\n\n```\nSKILL CHECKLIST\n===============\n[ ] name: lowercase, hyphens, â‰¤64 chars\n[ ] description: third person, specific triggers, â‰¤1024 chars\n[ ] SKILL.md body: <500 lines\n[ ] References: one level deep\n[ ] Consistent terminology\n[ ] Tested with real scenarios\n\nDESCRIPTION TEMPLATE\n====================\ndescription: >-\n  [What it does - actions, capabilities].\n  Use when [trigger phrases, contexts, file types].\n```\n\n## Author\n\nHenrik Soederlund\n",
        "plugins/ultimate-skill-creator/agents/skill-architect.md": "---\nname: skill-architect\ndescription: >-\n  Design and architect Claude Code skills using combined best practices from\n  official toolkit, community patterns, and latest API documentation. Use when\n  user wants to \"design a skill\", \"architect skill structure\", \"plan skill layout\",\n  \"choose skill archetype\", or needs help determining the optimal structure,\n  progressive disclosure strategy, or token efficiency approach for a new skill.\nmodel: inherit\ncolor: cyan\ntools:\n  - Read\n  - Glob\n  - Grep\n  - Task\n  - AskUserQuestion\n---\n\n# Skill Architect Agent\n\nYou are an expert skill architect who designs optimal Claude Code skills by combining three authoritative sources:\n\n1. **Official plugin-dev toolkit** - Proven patterns and validation\n2. **Community best practices** - Token hierarchy, archetypes, advanced patterns\n3. **Official documentation** - Current API fields and constraints\n\n## Your Core Responsibilities\n\n### 1. Understand the Skill's Purpose\n\nAsk clarifying questions to understand:\n- What problem does this skill solve?\n- Who will use it and when?\n- What should trigger it (specific phrases)?\n- What's in scope vs out of scope?\n\n### 2. Recommend an Archetype\n\nBased on the purpose, recommend one of four archetypes:\n\n| Archetype | Best For | Key Features |\n|-----------|----------|--------------|\n| **CLI Reference** | Tool docs (git, npm) | Commands grouped by function, minimal prose |\n| **Methodology** | Workflows, processes | Philosophy + THE EXACT PROMPT + examples |\n| **Safety Tool** | Validation, guardrails | Threat model + risk tiers + rules |\n| **Orchestration** | Multi-agent coordination | Quick start + robot mode APIs |\n\nExplain why the recommended archetype fits and what alternatives exist.\n\n### 3. Design the Structure\n\nCreate a detailed structure recommendation:\n\n```\nskill-name/\nâ”œâ”€â”€ SKILL.md              # What goes here (word count target)\nâ”œâ”€â”€ references/           # What to extract here\nâ”‚   â””â”€â”€ [files].md\nâ”œâ”€â”€ examples/             # Working code samples\nâ””â”€â”€ scripts/              # Executable utilities\n```\n\nInclude:\n- Token budget estimate (metadata + SKILL.md + typical reference load)\n- Progressive disclosure strategy (what loads when)\n- Reference file organisation\n\n### 4. Draft the Description\n\nWrite a description following these rules:\n- Third person always (\"Processes files\" not \"I help you\")\n- Include WHAT it does AND WHEN to trigger\n- Specific trigger phrases users would say\n- Max 1024 characters\n\nProvide 2-3 description options for user to choose from.\n\n### 5. Outline the SKILL.md Body\n\nCreate an outline for SKILL.md content:\n- Section headings\n- Approximate word counts per section\n- What content goes in main body vs references\n- Quick start section design\n\n### 6. Verify Against Latest API\n\nUse the Task tool with claude-code-guide to confirm:\n- Current frontmatter fields\n- Any new constraints or features\n- Recommended optional fields for this skill type\n\n## Output Format\n\nProvide your architecture recommendation as:\n\n```markdown\n## Skill Architecture: [Name]\n\n### Archetype: [Selected]\n[Why this archetype fits]\n\n### Structure\n[Directory tree with annotations]\n\n### Token Budget\n| Component | Estimated Tokens |\n|-----------|-----------------|\n| Metadata | ~100 |\n| SKILL.md | ~X |\n| Typical use | ~Y |\n\n### Description Options\n1. [Option 1]\n2. [Option 2]\n\n### SKILL.md Outline\n1. [Section] (~X words)\n2. [Section] (~X words)\n...\n\n### Reference Files\n- [file.md]: [Purpose]\n\n### Recommendations\n- [Specific recommendations]\n```\n\n## Examples of When You Are Triggered\n\n<example>\nContext: User wants to create a new skill for database migrations.\nuser: \"I want to create a skill for managing database migrations\"\nassistant: \"I'll use the skill-architect agent to design the optimal structure for a database migration skill.\"\n<commentary>\nThe user wants to design a skill. Use skill-architect to analyse requirements and recommend structure before implementation.\n</commentary>\n</example>\n\n<example>\nContext: User is unsure how to structure their skill.\nuser: \"Should I put all the SQL examples in the main SKILL.md or in a reference file?\"\nassistant: \"Let me use the skill-architect agent to analyse your skill and recommend the optimal progressive disclosure strategy.\"\n<commentary>\nUser needs architecture guidance for progressive disclosure. Use skill-architect for structure recommendations.\n</commentary>\n</example>\n\n<example>\nContext: User wants to understand which archetype to use.\nuser: \"I'm building a skill for code review - should it be a methodology or safety tool?\"\nassistant: \"I'll use the skill-architect agent to analyse your requirements and recommend the best archetype.\"\n<commentary>\nUser needs help choosing between archetypes. Use skill-architect for archetype recommendation.\n</commentary>\n</example>\n\n## Important Guidelines\n\n- Always read the skill-mastery SKILL.md from this plugin for combined best practices\n- Check references/archetypes.md for detailed archetype templates\n- Check references/token-hierarchy.md for token efficiency strategies\n- Verify frontmatter against references/api-reference.md\n- Use British English spelling (analyse, optimise, behaviour)\n- Never use emdashes - use hyphens with spaces instead\n",
        "plugins/ultimate-skill-creator/commands/create-skill-ultimate.md": "---\ndescription: Create exceptional skills using combined best practices from official toolkit, community patterns, and latest API documentation\nallowed-tools: Read, Write, Edit, Glob, Grep, Bash, Task, Skill, AskUserQuestion, TodoWrite\nargument-hint: <skill-purpose> [--archetype=cli|methodology|safety|orchestration]\n---\n\n# Ultimate Skill Creation Workflow\n\nCreate bleeding-edge Claude Code skills by combining three authoritative sources:\n1. Official plugin-dev toolkit (validation, AI-assisted creation)\n2. Community best practices (token hierarchy, archetypes, advanced patterns)\n3. Latest official documentation (current API fields)\n\n## Phase 1: Load Combined Knowledge\n\nFirst, load the skill-mastery skill to have all best practices available:\n\nLoad the `skill-mastery` skill from this plugin using the Skill tool.\n\n## Phase 2: Understand Requirements\n\nBased on the user's request: $ARGUMENTS\n\nAsk clarifying questions to understand:\n1. **Purpose**: What problem does this skill solve?\n2. **Archetype**: Which pattern fits best?\n   - CLI Reference (tool documentation)\n   - Methodology (workflows, processes)\n   - Safety Tool (validation, guardrails)\n   - Orchestration (multi-agent coordination)\n3. **Triggers**: What phrases should activate this skill?\n4. **Scope**: What's in scope vs out of scope?\n\n## Phase 3: Fetch Latest Documentation\n\nUse the claude-code-guide agent via Task tool to verify latest API fields:\n\n```\nFetch the current official documentation for Claude Code skills frontmatter fields.\nConfirm the current constraints for: name, description, allowed-tools, model, context, agent, hooks, user-invocable, disable-model-invocation.\nReport any new fields or changed constraints.\n```\n\n## Phase 4: Design Skill Architecture\n\nBased on the archetype, design the structure:\n\n### CLI Reference Structure\n```\nskill-name/\nâ”œâ”€â”€ SKILL.md (commands grouped by function)\nâ””â”€â”€ references/\n    â””â”€â”€ advanced-options.md\n```\n\n### Methodology Structure\n```\nskill-name/\nâ”œâ”€â”€ SKILL.md (philosophy + THE EXACT PROMPT + examples)\nâ””â”€â”€ references/\n    â”œâ”€â”€ why-it-works.md\n    â””â”€â”€ before-after-examples.md\n```\n\n### Safety Tool Structure\n```\nskill-name/\nâ”œâ”€â”€ SKILL.md (threat model + risk tiers + rules)\nâ””â”€â”€ references/\n    â”œâ”€â”€ risk-classification.md\n    â””â”€â”€ override-mechanisms.md\n```\n\n### Orchestration Structure\n```\nskill-name/\nâ”œâ”€â”€ SKILL.md (quick start + core commands)\nâ”œâ”€â”€ references/\nâ”‚   â”œâ”€â”€ robot-mode-api.md\nâ”‚   â””â”€â”€ integrations.md\nâ””â”€â”€ scripts/\n    â””â”€â”€ automation-helpers.sh\n```\n\n## Phase 5: Write the Description (Most Critical)\n\nApply these rules:\n- Third person always (\"Processes files\" not \"I help you\")\n- Include WHAT it does AND WHEN to trigger\n- Specific trigger phrases users would say\n- Max 1024 characters\n\nUse this template:\n```yaml\ndescription: >-\n  [What it does - actions, capabilities].\n  Use when [trigger phrases, contexts, file types, user intents].\n```\n\n## Phase 6: Create the Skill\n\n**CRITICAL: Use AskUserQuestion to ask where the skill should be saved.**\n\nUse the AskUserQuestion tool with these options:\n\n```\nQuestion: \"Where should this skill be saved?\"\nHeader: \"Location\"\nOptions:\n1. Label: \"Personal (home folder)\"\n   Description: \"Save to ~/.claude/skills/<skill-name>/ - Available in all projects for this user\"\n2. Label: \"Project folder\"\n   Description: \"Save to .claude/skills/<skill-name>/ in current working directory - Project-specific skill\"\n3. Label: \"Existing plugin\"\n   Description: \"Add to an existing plugin in this project - For plugin development\"\n```\n\nAfter the user selects their preference, set the `--path` argument accordingly:\n- **Personal**: `--path ~/.claude/skills`\n- **Project**: `--path .claude/skills` (relative to current working directory)\n- **Plugin**: Ask which plugin, then use `--path plugins/<plugin-name>/skills`\n\n### Option A: Use init_skill.py (Recommended)\n\nRun the initialisation script to scaffold the skill structure:\n\n```bash\npython ${CLAUDE_PLUGIN_ROOT}/skills/skill-mastery/scripts/init_skill.py <skill-name> --path <location>\n```\n\nThen customise the generated files:\n1. Edit SKILL.md - replace TODO placeholders\n2. Customise or delete example files in scripts/, references/, assets/\n\n### Option B: Manual Creation\n\nCreate the skill structure using Write tool:\n\n1. Create directory structure\n2. Write SKILL.md with:\n   - Proper frontmatter (verified against latest API)\n   - Lean body (<500 lines, ~2,000 words)\n   - Progressive disclosure (pointers to references)\n3. Create reference files for detailed content\n4. Create scripts if needed (execute, don't load)\n\n## Phase 7: Validate Quality\n\nUse the skill-reviewer agent from plugin-dev:\n\n```\nUse the Task tool to launch the skill-reviewer agent to review the skill at [path].\nCheck: description quality, progressive disclosure, writing style, token efficiency.\n```\n\nApply the Quick Reference checklist:\n- [ ] name: lowercase, hyphens, â‰¤64 chars\n- [ ] description: third person, specific triggers, â‰¤1024 chars\n- [ ] SKILL.md body: <500 lines\n- [ ] References: one level deep\n- [ ] Consistent terminology\n- [ ] Examples concrete, not abstract\n\n## Phase 8: Test and Iterate\n\nGuide user through testing:\n\n1. **Test triggering**: Ask questions using trigger phrases\n2. **Test content**: Does guidance apply correctly?\n3. **Test references**: Do they load when needed?\n4. **Test with fresh context**: Start new conversation, try skill\n\nIf issues found, iterate on the skill and re-validate.\n\n## Phase 9: Package for Distribution (Optional)\n\nIf the user wants to share the skill, use the packaging script:\n\n```bash\npython ${CLAUDE_PLUGIN_ROOT}/skills/skill-mastery/scripts/package_skill.py <path/to/skill> [output-dir]\n```\n\nThis validates the skill and creates a distributable zip file.\n\n## Summary\n\nWhen complete, provide:\n- Skill location\n- How to trigger it\n- What it does\n- Token efficiency estimate (metadata + SKILL.md size)\n- Package location (if packaged)\n- Suggestions for improvement\n\n---\n\n## Notes\n\n- Always use British English spelling (analyse, optimise, behaviour)\n- Never use emdashes - use hyphens with spaces instead\n- Validate against latest API before finalising frontmatter\n- Prefer progressive disclosure over inline content\n- Test with the actual trigger phrases in description\n",
        "plugins/ultimate-skill-creator/commands/setup-skill-hook.md": "---\ndescription: Set up the skill-activation-prompt hook in your project with automatic configuration\nallowed-tools: Bash, Read, Write, Edit, Glob, AskUserQuestion\nargument-hint: \"[project-path]\"\n---\n\n# Setup Skill Activation Hook\n\nYou are setting up the skill-activation-prompt hook for a Claude Code project.\n\n## Your Task\n\n1. **Determine the target project directory:**\n   - If the user provided a path argument, use that\n   - Otherwise, use the current working directory\n   - Confirm the path exists and is a valid project directory\n\n2. **Check prerequisites:**\n   - Verify Node.js is installed (`node --version`)\n   - Check if `.claude/` directory exists (create if needed)\n\n3. **Copy hook files:**\n   - Create `.claude/hooks/` directory if it doesn't exist\n   - Copy these files from the plugin to the target:\n     - `skill-activation-prompt.sh`\n     - `skill-activation-prompt.ts`\n     - `package.json`\n     - `tsconfig.json`\n   - Make the shell script executable\n\n4. **Install dependencies:**\n   - Run `npm install` in the `.claude/hooks/` directory\n\n5. **Create skill-rules.json template:**\n   - Create `.claude/skills/` directory if it doesn't exist\n   - Create a starter `skill-rules.json` with example rules\n   - Ask user if they want to customise the rules now or later\n\n6. **Update settings.json:**\n   - Check if `.claude/settings.json` exists\n   - If it exists, merge the hook configuration (preserve existing settings)\n   - If not, create it with the hook configuration\n\n7. **Verify setup:**\n   - Confirm all files are in place\n   - Show a summary of what was configured\n\n## Hook Files Location\n\nThe hook source files are in the ultimate-skill-creator plugin:\n```\n${CLAUDE_PLUGIN_ROOT}/hooks/skill-activation-prompt/\n```\n\nUse `${CLAUDE_PLUGIN_ROOT}` to reference the plugin directory.\n\n## Starter skill-rules.json Template\n\nCreate with practical examples (adjust skill names to match your installed skills):\n\n```json\n{\n  \"version\": \"1.0.0\",\n  \"skills\": {\n    \"xlsx\": {\n      \"type\": \"domain\",\n      \"enforcement\": \"suggest\",\n      \"priority\": \"high\",\n      \"promptTriggers\": {\n        \"keywords\": [\"spreadsheet\", \"excel\", \"csv\", \"xlsx\"],\n        \"intentPatterns\": [\"create.*spreadsheet\", \"export.*excel\"]\n      }\n    },\n    \"pdf-processing-pro\": {\n      \"type\": \"domain\",\n      \"enforcement\": \"suggest\",\n      \"priority\": \"high\",\n      \"promptTriggers\": {\n        \"keywords\": [\"pdf\", \"extract text\", \"ocr\"],\n        \"intentPatterns\": [\"read.*pdf\", \"convert.*pdf\"]\n      }\n    }\n  }\n}\n```\n\nNote: Users should customise this with their actual installed skill names.\n\n## Settings.json Hook Configuration\n\nFor `UserPromptSubmit` events, the `matcher` field is omitted (it operates at the conversation level, not on tool names):\n\n```json\n{\n  \"hooks\": {\n    \"UserPromptSubmit\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"$CLAUDE_PROJECT_DIR/.claude/hooks/skill-activation-prompt.sh\"\n          }\n        ]\n      }\n    ]\n  }\n}\n```\n\n## Important Notes\n\n- If settings.json already has hooks configured, merge carefully - don't overwrite existing hooks\n- The hook expects `skill-rules.json` in `.claude/skills/`, not `.claude/hooks/`\n- Always make the shell script executable with `chmod +x`\n- Run npm install to get the `tsx` dependency\n\n## Success Message\n\nAfter setup, inform the user:\n- The hook is now active and will trigger on every prompt\n- They should edit `.claude/skills/skill-rules.json` to add their own skill triggers\n- Link to the hook README for configuration reference\n",
        "plugins/ultimate-skill-creator/hooks/skill-activation-prompt/README.md": "# skill-activation-prompt Hook\n\nAutomatically suggests relevant skills based on user prompts, helping Claude activate the right skills before responding.\n\n## Quick Start\n\nRun the setup command in your project:\n\n```bash\n/setup-skill-hook\n```\n\nThis handles all the installation steps automatically. Continue reading for manual setup or configuration details.\n\n## How It Works\n\n1. Triggers on every `UserPromptSubmit` event (when you send a message)\n2. Reads your `skill-rules.json` configuration for trigger patterns\n3. Matches your prompt against keywords and intent patterns\n4. Outputs skill suggestions grouped by priority (critical, high, medium, low)\n\n## Installation\n\n### Step 1: Copy Hook Files to Your Project\n\n```bash\n# Create hooks directory if it doesn't exist\nmkdir -p your-project/.claude/hooks\n\n# Copy all hook files from this plugin\ncp -r /path/to/ultimate-skill-creator/hooks/skill-activation-prompt/* your-project/.claude/hooks/\n\n# Make the shell script executable\nchmod +x your-project/.claude/hooks/skill-activation-prompt.sh\n```\n\n### Step 2: Install Dependencies\n\n```bash\ncd your-project/.claude/hooks\nnpm install\n```\n\nThis installs `tsx` for TypeScript execution.\n\n### Step 3: Create Your Skill Rules\n\nCreate a `skill-rules.json` file in your project's `.claude/skills/` directory:\n\n```bash\nmkdir -p your-project/.claude/skills\n```\n\n**Example `.claude/skills/skill-rules.json`:**\n\n```json\n{\n  \"version\": \"1.0.0\",\n  \"skills\": {\n    \"xlsx\": {\n      \"type\": \"domain\",\n      \"enforcement\": \"suggest\",\n      \"priority\": \"high\",\n      \"promptTriggers\": {\n        \"keywords\": [\"spreadsheet\", \"excel\", \"csv\", \"xlsx\"],\n        \"intentPatterns\": [\"create.*spreadsheet\", \"export.*excel\"]\n      }\n    },\n    \"pdf-processing-pro\": {\n      \"type\": \"domain\",\n      \"enforcement\": \"suggest\",\n      \"priority\": \"high\",\n      \"promptTriggers\": {\n        \"keywords\": [\"pdf\", \"ocr\", \"extract text\"],\n        \"intentPatterns\": [\"read.*pdf\", \"convert.*pdf\"]\n      }\n    },\n    \"security-review\": {\n      \"type\": \"guardrail\",\n      \"enforcement\": \"block\",\n      \"priority\": \"critical\",\n      \"promptTriggers\": {\n        \"keywords\": [\"credentials\", \"api key\", \"password\", \"secret\"],\n        \"intentPatterns\": [\"commit.*secret\", \"push.*credentials\"]\n      }\n    }\n  }\n}\n```\n\n### Step 4: Configure Claude Code Settings\n\nAdd the hook to your project's `.claude/settings.json`:\n\n```json\n{\n  \"hooks\": {\n    \"UserPromptSubmit\": [\n      {\n        \"type\": \"command\",\n        \"command\": \"$CLAUDE_PROJECT_DIR/.claude/hooks/skill-activation-prompt.sh\"\n      }\n    ]\n  }\n}\n```\n\n## Configuration Reference\n\n### Skill Rule Properties\n\n| Property | Values | Description |\n|----------|--------|-------------|\n| `type` | `guardrail`, `domain` | Guardrails enforce safety, domain skills provide expertise |\n| `enforcement` | `block`, `warn`, `suggest` | How strongly to recommend the skill |\n| `priority` | `critical`, `high`, `medium`, `low` | Display grouping in suggestions |\n| `promptTriggers.keywords` | `string[]` | Simple word matches (case-insensitive) |\n| `promptTriggers.intentPatterns` | `string[]` | Regex patterns for complex matching |\n\n### Priority Display\n\nWhen skills match, they're grouped and displayed as:\n\n- **CRITICAL** (âš ï¸): Required skills - typically guardrails\n- **HIGH** (ðŸ“š): Recommended skills - strong relevance\n- **MEDIUM** (ðŸ’¡): Suggested skills - likely helpful\n- **LOW** (ðŸ“Œ): Optional skills - might be useful\n\n## Example Output\n\nWhen you type a prompt that matches configured rules:\n\n```\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\nðŸŽ¯ SKILL ACTIVATION CHECK\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nðŸ“š RECOMMENDED SKILLS:\n  â†’ xlsx\n\nACTION: Use Skill tool BEFORE responding\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n```\n\n## Troubleshooting\n\n**Hook not triggering:**\n\n- Verify executable permission: `chmod +x skill-activation-prompt.sh`\n- Check `.claude/settings.json` is valid JSON\n- Ensure `$CLAUDE_PROJECT_DIR` environment variable is set\n\n**\"Cannot find module\" errors:**\n\n- Run `npm install` in the `.claude/hooks/` directory\n- Verify `tsx` is installed: `npx tsx --version`\n\n**Skills not being suggested:**\n\n- Confirm `skill-rules.json` exists in `.claude/skills/` (not `.claude/hooks/`)\n- Check JSON syntax is valid\n- Verify keywords are lowercase (matching is case-insensitive)\n- Test regex patterns separately before adding as `intentPatterns`\n\n**TypeScript errors:**\n\n- Run `npm run check` to validate TypeScript\n- Ensure Node.js 18+ is installed\n",
        "plugins/ultimate-skill-creator/hooks/skill-activation-prompt/package.json": "{\n  \"name\": \"skill-activation-prompt-hook\",\n  \"version\": \"1.0.0\",\n  \"description\": \"Claude Code hook that automatically suggests relevant skills based on user prompts and file context\",\n  \"private\": true,\n  \"type\": \"module\",\n  \"scripts\": {\n    \"check\": \"tsc --noEmit\"\n  },\n  \"dependencies\": {\n    \"tsx\": \"^4.7.0\"\n  },\n  \"devDependencies\": {\n    \"@types/node\": \"^22.0.0\",\n    \"typescript\": \"^5.7.0\"\n  }\n}\n",
        "plugins/ultimate-skill-creator/hooks/skill-activation-prompt/skill-activation-prompt.sh": "#!/bin/bash\nset -e\n\ncd \"$CLAUDE_PROJECT_DIR/.claude/hooks\"\ncat | npx tsx skill-activation-prompt.ts\n",
        "plugins/ultimate-skill-creator/hooks/skill-activation-prompt/skill-activation-prompt.ts": "#!/usr/bin/env node\nimport { readFileSync } from 'fs';\nimport { join } from 'path';\n\ninterface HookInput {\n    session_id: string;\n    transcript_path: string;\n    cwd: string;\n    permission_mode: string;\n    prompt: string;\n}\n\ninterface PromptTriggers {\n    keywords?: string[];\n    intentPatterns?: string[];\n}\n\ninterface SkillRule {\n    type: 'guardrail' | 'domain';\n    enforcement: 'block' | 'suggest' | 'warn';\n    priority: 'critical' | 'high' | 'medium' | 'low';\n    promptTriggers?: PromptTriggers;\n}\n\ninterface SkillRules {\n    version: string;\n    skills: Record<string, SkillRule>;\n}\n\ninterface MatchedSkill {\n    name: string;\n    matchType: 'keyword' | 'intent';\n    config: SkillRule;\n}\n\nasync function main() {\n    try {\n        // Read input from stdin\n        const input = readFileSync(0, 'utf-8');\n        const data: HookInput = JSON.parse(input);\n        const prompt = data.prompt.toLowerCase();\n\n        // Load skill rules\n        const projectDir = process.env.CLAUDE_PROJECT_DIR || '$HOME/project';\n        const rulesPath = join(projectDir, '.claude', 'skills', 'skill-rules.json');\n        const rules: SkillRules = JSON.parse(readFileSync(rulesPath, 'utf-8'));\n\n        const matchedSkills: MatchedSkill[] = [];\n\n        // Check each skill for matches\n        for (const [skillName, config] of Object.entries(rules.skills)) {\n            const triggers = config.promptTriggers;\n            if (!triggers) {\n                continue;\n            }\n\n            // Keyword matching\n            if (triggers.keywords) {\n                const keywordMatch = triggers.keywords.some(kw =>\n                    prompt.includes(kw.toLowerCase())\n                );\n                if (keywordMatch) {\n                    matchedSkills.push({ name: skillName, matchType: 'keyword', config });\n                    continue;\n                }\n            }\n\n            // Intent pattern matching\n            if (triggers.intentPatterns) {\n                const intentMatch = triggers.intentPatterns.some(pattern => {\n                    const regex = new RegExp(pattern, 'i');\n                    return regex.test(prompt);\n                });\n                if (intentMatch) {\n                    matchedSkills.push({ name: skillName, matchType: 'intent', config });\n                }\n            }\n        }\n\n        // Generate output if matches found\n        if (matchedSkills.length > 0) {\n            let output = 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\n';\n            output += 'ðŸŽ¯ SKILL ACTIVATION CHECK\\n';\n            output += 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\n\\n';\n\n            // Group by priority\n            const critical = matchedSkills.filter(s => s.config.priority === 'critical');\n            const high = matchedSkills.filter(s => s.config.priority === 'high');\n            const medium = matchedSkills.filter(s => s.config.priority === 'medium');\n            const low = matchedSkills.filter(s => s.config.priority === 'low');\n\n            if (critical.length > 0) {\n                output += 'âš ï¸ CRITICAL SKILLS (REQUIRED):\\n';\n                critical.forEach(s => output += `  â†’ ${s.name}\\n`);\n                output += '\\n';\n            }\n\n            if (high.length > 0) {\n                output += 'ðŸ“š RECOMMENDED SKILLS:\\n';\n                high.forEach(s => output += `  â†’ ${s.name}\\n`);\n                output += '\\n';\n            }\n\n            if (medium.length > 0) {\n                output += 'ðŸ’¡ SUGGESTED SKILLS:\\n';\n                medium.forEach(s => output += `  â†’ ${s.name}\\n`);\n                output += '\\n';\n            }\n\n            if (low.length > 0) {\n                output += 'ðŸ“Œ OPTIONAL SKILLS:\\n';\n                low.forEach(s => output += `  â†’ ${s.name}\\n`);\n                output += '\\n';\n            }\n\n            output += 'ACTION: Use Skill tool BEFORE responding\\n';\n            output += 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\\n';\n\n            console.log(output);\n        }\n\n        process.exit(0);\n    } catch (err) {\n        console.error('Error in skill-activation-prompt hook:', err);\n        process.exit(1);\n    }\n}\n\nmain().catch(err => {\n    console.error('Uncaught error:', err);\n    process.exit(1);\n});\n",
        "plugins/ultimate-skill-creator/hooks/skill-activation-prompt/tsconfig.json": "{\n    \"compilerOptions\": {\n        \"target\": \"ES2022\",\n        \"module\": \"NodeNext\",\n        \"moduleResolution\": \"NodeNext\",\n        \"lib\": [\"ES2022\"],\n        \"outDir\": \"./dist\",\n        \"rootDir\": \".\",\n        \"strict\": true,\n        \"esModuleInterop\": true,\n        \"skipLibCheck\": true,\n        \"forceConsistentCasingInFileNames\": true,\n        \"resolveJsonModule\": true,\n        \"allowSyntheticDefaultImports\": true,\n        \"types\": [\"node\"]\n    },\n    \"include\": [\"*.ts\"],\n    \"exclude\": [\"node_modules\", \"dist\"]\n}\n",
        "plugins/ultimate-skill-creator/skills/skill-mastery/SKILL.md": "---\nname: skill-mastery\ndescription: >-\n  Provides master-level guidance for creating exceptional Claude Code skills using\n  combined best practices from official plugin-dev toolkit, community patterns, and\n  latest API. Use when creating skills, designing skill architecture, writing skill\n  descriptions, planning progressive disclosure, choosing skill archetypes, optimising\n  token efficiency, or when user says \"create a skill\", \"skill best practices\",\n  \"skill description help\", \"token-efficient skill\".\nuser-invocable: false\n---\n\n# Skill Mastery: The Ultimate Guide\n\nCombines three authoritative sources into a unified approach:\n\n1. **Official plugin-dev toolkit** - Validation, patterns, AI-assisted creation\n2. **Community best practices** - Token hierarchy, archetypes, advanced patterns\n3. **Official documentation** - Current API fields, latest features\n\n## Mental Model: How Skills Actually Work\n\nSkills use **pure LLM reasoning** for selection - no embeddings or keyword matching. Claude evaluates all skill descriptions via natural language understanding, making description quality critical.\n\n### Token Loading Hierarchy\n\n```\nLevel 1: Metadata (~100 tokens)        Always loaded at startup\n         name + description in system prompt\n                    â†“\nLevel 2: SKILL.md (~1,500-5,000 tokens) Loaded when skill triggers\n         Full instructions after selection\n                    â†“\nLevel 3: Resources (unlimited)          Loaded on-demand only\n         scripts/, references/, assets/\n         Zero cost until accessed\n```\n\n**Key insight**: Only Level 1 costs tokens in every conversation. Design accordingly.\n\n## Quick Start: Creating a Skill\n\n### 1. Choose Your Archetype\n\n| Archetype | Best For | Structure |\n|-----------|----------|-----------|\n| **CLI Reference** | Tool documentation (git, gcloud) | Pure reference, minimal prose |\n| **Methodology** | Workflows, processes | Philosophy + THE EXACT PROMPT + examples |\n| **Safety Tool** | Validation, security | Threat model + risk tiers + what blocks/allows |\n| **Orchestration** | Multi-agent coordination | Quick start + robot mode APIs + integrations |\n\nSee [references/archetypes.md](references/archetypes.md) for detailed templates.\n\n### 2. Write the Description (Most Critical)\n\n**Rules:**\n- Third person always (\"Processes files\" not \"I help you\")\n- Include WHAT it does AND WHEN to trigger\n- Specific trigger phrases users would say\n- Max 1024 characters\n\n**Template:**\n```yaml\ndescription: >-\n  [What it does - actions, capabilities].\n  Use when [trigger phrases, contexts, file types, user intents].\n```\n\n**Good examples:**\n```yaml\n# Specific + triggers\ndescription: >-\n  Extract text and tables from PDF files, fill forms, merge documents.\n  Use when working with PDF files or when user mentions PDFs, forms,\n  or document extraction.\n\n# Action + context\ndescription: >-\n  Generate descriptive commit messages by analysing git diffs.\n  Use when user asks for help writing commit messages or reviewing\n  staged changes.\n```\n\n### 3. Structure with Progressive Disclosure\n\n```\nskill-name/\nâ”œâ”€â”€ SKILL.md              # Core guidance (<500 lines, ~2,000 words)\nâ”œâ”€â”€ references/           # Detailed docs (loaded on-demand)\nâ”‚   â”œâ”€â”€ api.md\nâ”‚   â””â”€â”€ patterns.md\nâ”œâ”€â”€ examples/             # Working code samples\nâ”‚   â””â”€â”€ complete-example.md\nâ””â”€â”€ scripts/              # Executable utilities (run, not loaded)\n    â””â”€â”€ validate.py\n```\n\n**Critical rules:**\n- Keep references ONE level deep from SKILL.md\n- No chains: SKILL.md -> advanced.md -> details.md (Claude may partial-read)\n- Long files (>100 lines): include TOC at top\n\n### 4. Write the Body\n\n**Style:**\n- Imperative/infinitive form (verb-first): \"Extract the data\", \"Run validation\"\n- NOT second person: avoid \"You should extract...\"\n- Concise - assume Claude is intelligent\n- Challenge each line: \"Does Claude need this?\"\n\n**Bad (~150 tokens):**\n```markdown\nPDF (Portable Document Format) files are a common file format that\ncontains text, images, and other content. To extract text from a PDF,\nyou'll need to use a library. There are many libraries available...\n```\n\n**Good (~50 tokens):**\n```markdown\n## Extract PDF text\nUse pdfplumber:\npython\nimport pdfplumber\nwith pdfplumber.open(\"file.pdf\") as pdf:\n    text = pdf.pages[0].extract_text()\n```\n\n## Required Frontmatter Fields\n\n| Field | Required | Constraints |\n|-------|----------|-------------|\n| `name` | Yes | Max 64 chars, `[a-z0-9-]` only, no \"anthropic\"/\"claude\" |\n| `description` | Yes | Max 1024 chars, non-empty, no XML tags |\n\n## Optional Frontmatter Fields\n\n| Field | Purpose | Example |\n|-------|---------|---------|\n| `allowed-tools` | Limit tool access | `Read, Grep, Glob` |\n| `model` | Specific model | `claude-sonnet-4-20250514` |\n| `context` | Isolation | `fork` for separate context |\n| `agent` | Subagent type | `Explore`, `Plan`, custom |\n| `hooks` | Lifecycle events | `PreToolUse`, `PostToolUse`, `Stop` |\n| `user-invocable` | Slash menu visibility | `false` to hide |\n| `disable-model-invocation` | Block Skill tool | `true` to prevent programmatic use |\n\nSee [references/api-reference.md](references/api-reference.md) for complete field documentation.\n\n## Degrees of Freedom\n\nMatch specificity to task fragility:\n\n| Freedom | When | Example |\n|---------|------|---------|\n| **High** | Multiple valid approaches | Code review guidelines |\n| **Medium** | Preferred pattern exists | Report templates |\n| **Low** | Fragile/error-prone | DB migration scripts - exact command |\n\n**Analogy:** Narrow bridge with cliffs = low freedom (exact guardrails). Open field = high freedom (general direction).\n\n## Advanced Patterns\n\n### THE EXACT PROMPT Pattern\n\nFor reproducible prompts in agent-to-agent handoff:\n\n```markdown\n## THE EXACT PROMPT - Plan Review\n\nCarefully review this entire plan and provide revisions for\nbetter architecture, new features, edge cases...\n```\n\nCopy-paste ready, automation friendly, no ambiguity.\n\n### Validation Loop Pattern\n\n```markdown\n## Validation workflow\n\n1. Make edits\n2. **Validate immediately**: python scripts/validate.py output/\n3. If validation fails:\n   - Review error message\n   - Fix issues\n   - Run validation again\n4. **Only proceed when validation passes**\n```\n\n### Risk Tiering Pattern\n\nFor safety-critical skills:\n\n| Tier | Approvals | Auto-approve | Examples |\n|------|-----------|--------------|----------|\n| **CRITICAL** | 2+ | Never | `rm -rf /`, `DROP DATABASE` |\n| **DANGEROUS** | 1 | Never | `git reset --hard` |\n| **CAUTION** | 0 | After 30s | `rm file.txt` |\n\nSee [references/advanced-patterns.md](references/advanced-patterns.md) for more patterns.\n\n## Anti-Patterns to Avoid\n\n| Anti-Pattern | Why Bad | Fix |\n|-------------|---------|-----|\n| Windows paths (`scripts\\helper.py`) | Breaks on Unix | Forward slashes |\n| Deeply nested references | Partial reads | One level deep |\n| Too many options | Confusing | Default + escape hatch |\n| Vague descriptions | Never triggers | Specific + triggers |\n| Magic numbers | Unverifiable | Document why |\n\n## Workflow: Creating Your Skill\n\n1. **Identify the archetype** - CLI, methodology, safety, or orchestration?\n2. **Write description first** - This determines if skill ever triggers\n3. **Initialise with script** - Use `init_skill.py` to scaffold structure\n4. **Draft SKILL.md** - Core guidance only (<500 lines)\n5. **Extract to references** - Detailed docs, API specs, schemas\n6. **Add examples** - Working code that demonstrates usage\n7. **Create scripts** - Utilities that execute (not load into context)\n8. **Test with fresh instance** - Does it trigger? Apply rules correctly?\n9. **Validate** - Use skill-reviewer or plugin-validator agents\n10. **Package for distribution** - Use `package_skill.py` to create zip\n\n## Utility Scripts\n\nThis skill includes two utility scripts in `scripts/`:\n\n### init_skill.py - Scaffold New Skills\n\n```bash\npython scripts/init_skill.py <skill-name> --path <location>\n\n# Examples:\npython scripts/init_skill.py my-api-helper --path ~/.claude/skills\npython scripts/init_skill.py database-tool --path .claude/skills\n```\n\nCreates a complete skill directory structure:\n- `SKILL.md` with template and TODO placeholders\n- `scripts/` directory with example script\n- `references/` directory with example reference\n- `assets/` directory for output files\n\n### package_skill.py - Create Distributable Zip\n\n```bash\npython scripts/package_skill.py <path/to/skill> [output-dir]\n\n# Examples:\npython scripts/package_skill.py ~/.claude/skills/my-skill\npython scripts/package_skill.py ./my-skill ./dist\n```\n\nValidates the skill and creates a distributable zip file:\n- Checks frontmatter format and required fields\n- Validates naming conventions\n- Ensures no TODO placeholders remain\n- Excludes `__pycache__` and `.pyc` files\n\n## Integration with Plugin-Dev\n\nThis skill works alongside the official plugin-dev toolkit (requires `plugin-dev@claude-plugins-official`):\n\n- **Use `/plugin-dev:create-plugin`** for full plugin creation workflow\n- **Use `plugin-dev:skill-reviewer` agent** for quality validation\n- **Use `plugin-dev:plugin-validator` agent** for comprehensive checks\n\n## Quick Reference Card\n\n```\nSKILL CHECKLIST\n===============\n[ ] name: lowercase, hyphens, â‰¤64 chars\n[ ] description: third person, specific triggers, â‰¤1024 chars\n[ ] SKILL.md body: <500 lines\n[ ] References: one level deep\n[ ] Long refs: include TOC\n[ ] Scripts: tested, explicit error handling\n[ ] Forward slashes only\n[ ] Consistent terminology\n[ ] Examples concrete, not abstract\n[ ] Tested with real scenarios\n\nDESCRIPTION TEMPLATE\n====================\ndescription: >-\n  [What it does - actions, capabilities].\n  Use when [trigger phrases, contexts, file types].\n```\n\n## Further Reading\n\n- [Token Hierarchy Deep Dive](references/token-hierarchy.md)\n- [Skill Archetypes](references/archetypes.md)\n- [Advanced Patterns](references/advanced-patterns.md)\n- [Official API Reference](references/api-reference.md)\n",
        "plugins/ultimate-skill-creator/skills/skill-mastery/references/advanced-patterns.md": "# Advanced Skill Patterns\n\nProduction-tested patterns from real-world skill collections.\n\n## THE EXACT PROMPT Pattern\n\nEncode reproducible prompts for agent-to-agent handoff or automation.\n\n**Why it works:**\n- Copy-paste ready (Stream Deck, scripts, macros)\n- No ambiguity about phrasing\n- Enables cross-model workflows (GPT -> Claude)\n- Self-documenting\n\n**Implementation:**\n```markdown\n## THE EXACT PROMPT - Feature Planning\n\nCarefully review this feature request and create a comprehensive\nimplementation plan covering:\n\n1. Architecture decisions with trade-offs\n2. Files to create/modify with specific changes\n3. Testing strategy for each component\n4. Potential edge cases and mitigations\n5. Dependencies that need updating\n\nOutput as a numbered checklist I can track progress against.\nUse ultrathink.\n```\n\n**Usage in workflows:**\n```markdown\n## Planning Workflow\n\n1. User describes feature\n2. Run THE EXACT PROMPT - Feature Planning\n3. Review plan, iterate if needed\n4. Run THE EXACT PROMPT - Implementation Start\n```\n\n---\n\n## \"Why This Exists\" Section\n\nFront-load motivation before instructions to help Claude understand context.\n\n**Pattern:**\n```markdown\n## Why This Exists\n\n[Problem statement - what pain does this solve?]\n\n- **Pain Point 1**: Specific description\n- **Pain Point 2**: Specific description\n- **Pain Point 3**: Specific description\n\n[Tool name] solves these by [brief solution].\n```\n\n**Example:**\n```markdown\n## Why This Exists\n\nManaging multiple AI coding agents is painful:\n\n- **Window chaos**: Each agent needs its own terminal\n- **Context switching**: Jumping between windows breaks flow\n- **No orchestration**: Same prompt to multiple agents = manual copy-paste\n\nNTM solves all of this with tmux-based session management and\ncross-agent communication protocols.\n```\n\n**Why it works:** Claude uses this to determine when the skill is relevant beyond just keyword matching.\n\n---\n\n## Risk Tiering Tables\n\nFor safety-critical skills, make risk levels explicit.\n\n**Pattern:**\n```markdown\n## Risk Classification\n\n| Tier | Human Approval | Auto-approve | Examples |\n|------|----------------|--------------|----------|\n| **CRITICAL** | 2+ | Never | `rm -rf /`, `DROP DATABASE`, push --force to main |\n| **DANGEROUS** | 1 | Never | `git reset --hard`, `DELETE FROM`, deploy to prod |\n| **CAUTION** | 0 | After 30s delay | `rm file.txt`, schema migration |\n| **SAFE** | 0 | Immediately | `rm *.log`, `git stash`, local dev operations |\n```\n\n**Extended pattern with override mechanisms:**\n```markdown\n## Override Mechanisms\n\n| Tier | Override Flag | Audit |\n|------|---------------|-------|\n| CRITICAL | Not possible | Full log + notification |\n| DANGEROUS | `--i-really-mean-it` | Logged |\n| CAUTION | `--yes` | Logged |\n| SAFE | None needed | None |\n```\n\n---\n\n## Robot Mode / Machine-Readable Output\n\nFor orchestration tools, document JSON/NDJSON APIs.\n\n**Pattern:**\n```markdown\n## Robot Mode (AI Automation)\n\nAll commands support `--robot` flag for machine-readable output.\n\n### Status Query\ntool --robot-status\n\n**Output:**\n{\n  \"type\": \"status\",\n  \"sessions\": [{\"id\": \"abc\", \"state\": \"running\"}],\n  \"timestamp\": \"2025-01-16T10:30:00Z\"\n}\n\n### Event Stream\ntool --robot-events\n\n**Output (NDJSON):**\n{\"type\": \"event\", \"name\": \"task_started\", \"task_id\": \"123\"}\n{\"type\": \"event\", \"name\": \"task_completed\", \"task_id\": \"123\", \"result\": \"success\"}\n```\n\n**Why it works:** Enables AI agents to programmatically interact with tools without parsing human-readable output.\n\n---\n\n## Exit Code Standardisation\n\nDocument exit codes for script integration.\n\n**Pattern:**\n```markdown\n## Exit Codes\n\n| Code | Meaning | Action |\n|------|---------|--------|\n| `0` | Success | Continue |\n| `1` | General error | Check stderr |\n| `2` | Invalid arguments | Fix command |\n| `3` | Not found | Check inputs |\n| `4` | Permission denied | Check auth |\n| `5` | Timeout | Retry or increase limit |\n| `10+` | Tool-specific | See tool docs |\n```\n\n---\n\n## ASCII State Diagrams\n\nVisualise complex flows in terminal-friendly format.\n\n**Pattern:**\n```markdown\n## Processing Pipeline\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   User Input    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚    Validate     â”‚â”€â”€â”€â”€ Invalid â”€â”€â”€â–¶ Error Response\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚ Valid\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚    Process      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   Store Result  â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚    Respond      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n**Box characters reference:**\n```\nCorners: â”Œ â” â”” â”˜\nLines:   â”‚ â”€\nArrows:  â–¼ â–² â—€ â–¶ â†\nT-joins: â”œ â”¤ â”¬ â”´ â”¼\n```\n\n---\n\n## Hierarchical Configuration\n\nDocument configuration precedence clearly.\n\n**Pattern:**\n```markdown\n## Configuration Precedence\n\nConfiguration loads in this order (later overrides earlier):\n\n1. **Built-in defaults** - Hardcoded in tool\n2. **System config** - `/etc/tool/config.toml`\n3. **User config** - `~/.config/tool/config.toml`\n4. **Project config** - `.tool/config.toml`\n5. **Environment variables** - `TOOL_*`\n6. **Command-line flags** - `--option=value`\n\n### Environment Variables\n\n| Variable | Config Equivalent | Default |\n|----------|-------------------|---------|\n| `TOOL_DEBUG` | `debug = true` | `false` |\n| `TOOL_TIMEOUT` | `timeout = 30` | `60` |\n```\n\n---\n\n## \"Use ultrathink\" Convention\n\nSignal to Claude to use extended thinking for complex analysis.\n\n**Usage:**\n```markdown\n## Complex Analysis Prompt\n\nAnalyse this codebase architecture and identify:\n1. Coupling between modules\n2. Potential circular dependencies\n3. Opportunities for abstraction\n4. Performance bottlenecks\n\nProvide specific file:line references for each finding.\n\nUse ultrathink.\n```\n\n**When to use:**\n- Multi-factor analysis\n- Architectural decisions\n- Security audits\n- Complex debugging\n\n---\n\n## Iteration Protocols\n\nFor refinement workflows, specify iteration expectations.\n\n**Pattern:**\n```markdown\n## Refinement Workflow\n\n### Expected Iterations\n\n| Round | Focus | Duration |\n|-------|-------|----------|\n| 1-2 | Major structural issues | High value |\n| 3-4 | Edge cases, polish | Medium value |\n| 5+ | Diminishing returns | Stop here |\n\n### Iteration Protocol\n\n1. Start fresh conversation for each round (context reset)\n2. Apply all previous feedback first\n3. Run THE EXACT PROMPT - Review\n4. Collect feedback, categorise by severity\n5. If only minor suggestions remain, iteration complete\n\n### Completion Criteria\n\nStop iterating when:\n- [ ] All critical issues resolved\n- [ ] No new major issues found in last round\n- [ ] Suggestions are purely stylistic\n```\n\n---\n\n## Integration Sections\n\nDocument how skill connects to ecosystem.\n\n**Pattern:**\n```markdown\n## Integration with Other Tools\n\n| Tool | Integration | Setup Required |\n|------|-------------|----------------|\n| **Git** | Auto-commit on success | None |\n| **CI/CD** | Trigger via webhook | `WEBHOOK_URL` env |\n| **Slack** | Notifications | `SLACK_TOKEN` env |\n| **Monitoring** | Metrics export | Enable in config |\n\n### Git Integration Example\n\n# After successful operation, auto-commit\ntool process --auto-commit --message \"Processed by tool\"\n\n### CI/CD Webhook\n\ntool process --notify-webhook=$WEBHOOK_URL\n```\n\n---\n\n## Quick Reference: All Patterns\n\n| Pattern | Use When |\n|---------|----------|\n| THE EXACT PROMPT | Reproducible prompts needed |\n| Why This Exists | Context improves triggering |\n| Risk Tiering | Safety-critical operations |\n| Robot Mode | Automation/orchestration |\n| Exit Codes | Script integration |\n| ASCII Diagrams | Complex flows |\n| Config Hierarchy | Multiple config sources |\n| Use ultrathink | Deep analysis needed |\n| Iteration Protocols | Refinement workflows |\n| Integration Sections | Ecosystem connectivity |\n",
        "plugins/ultimate-skill-creator/skills/skill-mastery/references/api-reference.md": "# Official API Reference\n\nCurrent frontmatter fields and constraints from official Claude Code documentation.\n\n## Required Fields\n\n### name\n\n**Type:** String\n**Required:** Yes\n**Constraints:**\n- Maximum 64 characters\n- Lowercase letters, numbers, and hyphens only: `[a-z0-9-]`\n- No XML tags\n- No reserved words: \"anthropic\", \"claude\"\n\n**Examples:**\n```yaml\nname: pdf-processing       # Good\nname: commit-helper        # Good\nname: BigQuery-Analysis    # Bad - uppercase\nname: claude-helper        # Bad - reserved word\nname: my_skill             # Bad - underscores\n```\n\n### description\n\n**Type:** String\n**Required:** Yes\n**Constraints:**\n- Maximum 1024 characters\n- Non-empty\n- No XML tags\n- Must be third person\n\n**Template:**\n```yaml\ndescription: >-\n  [What it does - actions, capabilities].\n  Use when [trigger phrases, contexts, file types, user intents].\n```\n\n**Examples:**\n```yaml\n# Good - specific, third person, trigger phrases\ndescription: >-\n  Extract text and tables from PDF files, fill forms, merge documents.\n  Use when working with PDF files or when user mentions PDFs, forms,\n  or document extraction.\n\n# Good - action + context\ndescription: >-\n  Generate descriptive commit messages by analysing git diffs.\n  Use when user asks for help writing commit messages or reviewing\n  staged changes.\n\n# Bad - first person\ndescription: I can help you process Excel files\n\n# Bad - vague\ndescription: Helps with documents\n\n# Bad - too long (over 1024 chars)\ndescription: [very long description...]\n```\n\n---\n\n## Optional Fields\n\n### allowed-tools\n\n**Type:** String (comma-separated) or Array\n**Purpose:** Limit which tools Claude can use when skill is active\n**Default:** All tools available\n\n**Examples:**\n```yaml\n# Comma-separated string\nallowed-tools: Read, Grep, Glob\n\n# YAML array\nallowed-tools:\n  - Read\n  - Grep\n  - Glob\n  - Bash(git:*)\n```\n\n**Tool patterns:**\n- `Read` - Specific tool\n- `Bash(git:*)` - Bash limited to git commands\n- `Bash(npm:*)` - Bash limited to npm commands\n- `mcp__server__tool` - Specific MCP tool\n\n### model\n\n**Type:** String\n**Purpose:** Override model for this skill's execution\n**Default:** Inherits from conversation\n\n**Examples:**\n```yaml\nmodel: claude-sonnet-4-20250514\nmodel: claude-opus-4-20250514\nmodel: inherit  # Explicit inherit\n```\n\n### context\n\n**Type:** String\n**Purpose:** Run skill in isolated context\n**Values:** `fork`\n\n**Example:**\n```yaml\ncontext: fork\n```\n\n**Effect:** Skill runs in separate context window, isolated from main conversation history.\n\n### agent\n\n**Type:** String\n**Purpose:** Specify subagent type when using `context: fork`\n**Values:** `Explore`, `Plan`, `general-purpose`, or custom agent name\n\n**Example:**\n```yaml\ncontext: fork\nagent: Explore\n```\n\n### hooks\n\n**Type:** Object\n**Purpose:** Define lifecycle hooks for the skill\n**Events:** `PreToolUse`, `PostToolUse`, `Stop`\n\n**Example:**\n```yaml\nhooks:\n  PreToolUse:\n    - matcher: Write\n      prompt: |\n        Before writing, verify the file path is within the project directory.\n        If not, ask user for confirmation.\n```\n\n### user-invocable\n\n**Type:** Boolean\n**Purpose:** Control visibility in slash command menu\n**Default:** `true`\n\n**Examples:**\n```yaml\nuser-invocable: false  # Hidden from menu\nuser-invocable: true   # Visible in menu (default)\n```\n\n**Note:** When `false`, skill is hidden from `/skill-name` menu but Claude can still:\n- Invoke via `Skill` tool programmatically\n- Discover and apply automatically based on description\n\n### disable-model-invocation\n\n**Type:** Boolean\n**Purpose:** Prevent Claude from programmatically invoking via Skill tool\n**Default:** `false`\n\n**Examples:**\n```yaml\ndisable-model-invocation: true   # Only user can invoke via /skill-name\ndisable-model-invocation: false  # Claude can also invoke (default)\n```\n\n---\n\n## Visibility Control Matrix\n\n| Setting | Slash Menu | Skill Tool | Auto-discovery |\n|---------|------------|------------|----------------|\n| Default | âœ… | âœ… | âœ… |\n| `user-invocable: false` | âŒ | âœ… | âœ… |\n| `disable-model-invocation: true` | âœ… | âŒ | âœ… |\n| Both false/true | âŒ | âŒ | âœ… |\n\n---\n\n## Complete Frontmatter Example\n\n```yaml\n---\nname: advanced-pdf-processing\ndescription: >-\n  Extract text, tables, and images from PDF files. Fill PDF forms\n  programmatically. Merge and split PDF documents. Use when working\n  with PDF files, document extraction, form filling, or PDF manipulation.\nallowed-tools:\n  - Read\n  - Write\n  - Bash(pdftotext:*)\n  - Bash(pdftk:*)\nmodel: inherit\nuser-invocable: true\nhooks:\n  PreToolUse:\n    - matcher: Write\n      prompt: Verify output path ends with .pdf before writing.\n---\n```\n\n---\n\n## Skills in Subagents\n\nInject skills into subagent context:\n\n```yaml\n---\nname: code-reviewer\ndescription: Review code for quality and security issues.\nskills: security-check, style-guide\n---\n\n[System prompt for code-reviewer agent]\n```\n\n**Effect:** Full content of `security-check` and `style-guide` skills is injected into the subagent's context.\n\n---\n\n## File Locations\n\n### Personal Skills (all projects)\n```\n~/.claude/skills/skill-name/SKILL.md\n```\n\n### Project Skills (shared via git)\n```\n.claude/skills/skill-name/SKILL.md\n```\n\n### Plugin Skills\n```\nplugin-name/skills/skill-name/SKILL.md\n```\n\n---\n\n## Validation Rules Summary\n\n| Field | Max Length | Pattern | Required |\n|-------|------------|---------|----------|\n| name | 64 | `[a-z0-9-]+` | Yes |\n| description | 1024 | Non-empty, no XML | Yes |\n| allowed-tools | - | Valid tool names | No |\n| model | - | Valid model ID | No |\n| context | - | `fork` | No |\n| agent | - | Valid agent name | No |\n\n---\n\n## Troubleshooting\n\n### Skill not triggering\n- Description too vague\n- Missing trigger phrases\n- Conflicting with another skill's description\n\n### Skill not loading\n- SKILL.md not found (case-sensitive)\n- Invalid YAML syntax (check `---` delimiters)\n- Name contains invalid characters\n\n### Skill errors during execution\n- Missing dependencies in scripts\n- Permission issues (`chmod +x`)\n- Windows paths instead of forward slashes\n\n### Debug mode\n```bash\nclaude --debug\n```\nShows skill loading and selection decisions.\n",
        "plugins/ultimate-skill-creator/skills/skill-mastery/references/archetypes.md": "# Skill Archetypes\n\nFour proven patterns for organising skills based on their purpose.\n\n## 1. CLI Reference Skill\n\n**Best for:** Tool documentation (git, gcloud, vercel, npm)\n\n**Characteristics:**\n- Pure reference, minimal explanatory prose\n- Claude already knows CLI semantics\n- Group commands by function\n- Include common workflows as recipes\n\n**Structure:**\n```markdown\n# Tool Name Skill\n\n## Authentication\n[auth commands with examples]\n\n## Core Operations\n\n### Create\ncommand create [options]\n  -n, --name     Name for resource\n  -t, --type     Type (default: basic)\n\n### Read\ncommand list [filters]\ncommand get <id>\n\n### Update\ncommand update <id> [options]\n\n### Delete\ncommand delete <id> [--force]\n\n## Common Workflows\n\n### Deploy to Production\n1. command build --prod\n2. command deploy --env production\n3. command verify --wait\n```\n\n**Token efficiency:** Highest. No explanations Claude doesn't need.\n\n---\n\n## 2. Methodology Skill\n\n**Best for:** Workflows, processes, thinking frameworks\n\n**Characteristics:**\n- Philosophy statement upfront\n- THE EXACT PROMPT pattern for reproducibility\n- Before/after examples\n- Why it works explanations\n\n**Structure:**\n```markdown\n# Methodology Name\n\n> **Core Philosophy:** [One-liner insight that drives everything]\n\n## Why This Matters\n\n[Brief motivation - 2-3 sentences max]\n\n## THE EXACT PROMPT\n\n[Copy-paste ready prompt in code block]\n\n## Why This Prompt Works\n\n[Technical breakdown of each component]\n\n## Before/After Examples\n\n### Before (Without Methodology)\n[Concrete example of suboptimal approach]\n\n### After (With Methodology)\n[Same scenario, better outcome]\n\n## When NOT to Use\n\n[Boundaries and limitations]\n```\n\n**Example - Code Review Methodology:**\n```markdown\n# Deep Code Review\n\n> **Core Philosophy:** Reviews should find bugs the tests missed, not style issues the linter catches.\n\n## THE EXACT PROMPT\n\nReview this code focusing on:\n1. Logic errors that tests wouldn't catch\n2. Edge cases in error handling\n3. Security implications of data flow\n4. Performance under scale\n\nSkip: formatting, naming conventions, documentation.\n\n## Why This Prompt Works\n\n- \"Logic errors tests wouldn't catch\" - focuses on value-add\n- \"Edge cases in error handling\" - common bug source\n- \"Security implications\" - expertise most devs lack\n- \"Skip formatting\" - prevents noise\n```\n\n---\n\n## 3. Safety Tool Skill\n\n**Best for:** Validation, security, guardrails\n\n**Characteristics:**\n- Threat model explicit\n- Risk tiering tables\n- What it blocks AND allows\n- Modular/extensible design\n- Security considerations section\n\n**Structure:**\n```markdown\n# Tool Name\n\n## Why This Exists\n\n[Threat model - what could go wrong without this]\n\n## Critical Design Principles\n\n1. **Principle One** - [Explanation]\n2. **Principle Two** - [Explanation]\n\n## Risk Tiers\n\n| Tier | Approval | Auto-approve | Examples |\n|------|----------|--------------|----------|\n| CRITICAL | 2+ humans | Never | rm -rf /, DROP DATABASE |\n| DANGEROUS | 1 human | Never | git reset --hard |\n| CAUTION | 0 | After 30s | rm single_file.txt |\n| SAFE | 0 | Immediately | rm *.log |\n\n## What It Blocks\n\n| Pattern | Reason | Override |\n|---------|--------|----------|\n| `rm -rf /` | Catastrophic | None |\n| `DROP TABLE` | Data loss | --i-really-mean-it |\n\n## What It Allows\n\n| Pattern | Why Safe |\n|---------|----------|\n| `rm *.tmp` | Temporary files |\n| `git stash` | Recoverable |\n\n## Modular Extensions\n\n[How to add new rules]\n\n## Security Considerations\n\n- [Assumption 1]\n- [Limitation 1]\n- [Known bypass scenarios]\n```\n\n---\n\n## 4. Orchestration Tool Skill\n\n**Best for:** Multi-agent coordination, automation, pipelines\n\n**Characteristics:**\n- Quick start for immediate use\n- Robot mode (JSON APIs) for automation\n- Integration matrix with other tools\n- State diagrams for complex flows\n\n**Structure:**\n```markdown\n# Tool Name\n\n## Why This Exists\n\n[Pain points solved - bullet list]\n\n## Quick Start\n\n[Minimal viable usage - 3 commands max]\n\n## Core Commands\n\n### Session Management\n[commands grouped logically]\n\n### Agent Control\n[commands grouped logically]\n\n## Robot Mode (Automation APIs)\n\n### Status Query\ntool --robot-status\n\nOutput:\n{\"sessions\": [...], \"agents\": [...], \"status\": \"ok\"}\n\n### Snapshot\ntool --robot-snapshot\n\nOutput:\n{\"type\": \"snapshot\", \"timestamp\": \"...\", \"data\": {...}}\n\n## Integration Matrix\n\n| Tool | Integration Type | Setup |\n|------|-----------------|-------|\n| Agent Mail | Message routing | Automatic |\n| Validator | Pre-flight checks | Enable in config |\n\n## State Diagram\n\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚   IDLE      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\n       â”‚ start\n       â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  RUNNING    â”‚â—„â”€â”€â”€â”€â”€â”€â”\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â”‚\n       â”‚ complete     â”‚ retry\n       â–¼              â”‚\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚\nâ”‚  VALIDATE   â”‚â”€â”€â”€â”€â”€â”€â”€â”˜\nâ””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜\n       â”‚ pass\n       â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  COMPLETE   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n---\n\n## Choosing Your Archetype\n\n| If your skill... | Use |\n|------------------|-----|\n| Documents a CLI tool | CLI Reference |\n| Teaches a process/workflow | Methodology |\n| Validates/blocks/guards | Safety Tool |\n| Coordinates multiple agents | Orchestration |\n| Does multiple of above | Hybrid (pick primary, add sections) |\n\n## Hybrid Example\n\nA \"deployment skill\" might combine:\n- **CLI Reference** sections for deploy commands\n- **Safety Tool** tiers for production vs staging\n- **Orchestration** for multi-step deploy pipeline\n\n```markdown\n# Deployment Skill\n\n## Commands (CLI Reference style)\n[deploy commands]\n\n## Safety Tiers (Safety Tool style)\n| Environment | Approval Required |\n|-------------|-------------------|\n| Production  | 2 humans          |\n| Staging     | 1 human           |\n| Dev         | None              |\n\n## Deployment Pipeline (Orchestration style)\n[state diagram and robot mode]\n```\n",
        "plugins/ultimate-skill-creator/skills/skill-mastery/references/token-hierarchy.md": "# Token Hierarchy Deep Dive\n\nUnderstanding how Claude loads and processes skills is critical for efficient design.\n\n## The Three-Level Loading Model\n\n### Level 1: Metadata (Always Loaded)\n\n**Cost:** ~100 tokens per skill\n**When:** Every conversation startup\n**What:** Only `name` and `description` from YAML frontmatter\n\n```yaml\n---\nname: pdf-processing\ndescription: Extract text from PDFs. Use when working with PDF files.\n---\n```\n\n**Implication:** You want many skills? Keep descriptions concise. 50 skills Ã— 100 tokens = 5,000 tokens at startup.\n\n### Level 2: SKILL.md Body (On Trigger)\n\n**Cost:** ~1,500-5,000 tokens (aim for <2,000)\n**When:** After Claude selects the skill based on description match\n**What:** Full markdown content of SKILL.md\n\n**Implication:** This is where core guidance lives. Make it count but keep it lean.\n\n### Level 3: Bundled Resources (On-Demand)\n\n**Cost:** Unlimited potential, but zero until accessed\n**When:** Claude reads a referenced file\n**What:** scripts/, references/, assets/\n\n**Implication:** Put detailed docs, schemas, examples here. They cost nothing until needed.\n\n## Selection Mechanism\n\n**Critical insight:** Claude uses **pure LLM reasoning** to select skills.\n\nThere is:\n- No embedding similarity search\n- No keyword matching algorithm\n- No classifier model\n\nClaude literally reads all descriptions and uses natural language understanding to decide relevance.\n\n**What this means:**\n- Vague descriptions = skill never triggers\n- Specific trigger phrases = reliable activation\n- Description quality is THE critical factor\n\n## Token Budget Strategy\n\n### For a Project with 20 Skills\n\n```\nStartup overhead:     20 Ã— 100 = 2,000 tokens (unavoidable)\nActive skill:         ~2,000 tokens (SKILL.md body)\nReference files:      ~5,000 tokens (only if accessed)\nConversation:         Remaining context window\n\nTotal for one skill usage: ~9,000 tokens\n```\n\n### Optimisation Strategies\n\n1. **Front-load essentials in SKILL.md**\n   - Quick start that covers 80% of use cases\n   - Only reference files for advanced features\n\n2. **Keep references shallow**\n   - SKILL.md -> reference.md (one level)\n   - Never: SKILL.md -> overview.md -> details.md\n\n3. **Use grep hints for large references**\n   ```markdown\n   ## Schema reference\n   See [schema.md](references/schema.md)\n\n   Quick lookup: `grep -i \"column_name\" references/schema.md`\n   ```\n\n4. **Scripts execute, not load**\n   ```markdown\n   # This loads script content (~500 tokens)\n   See scripts/validate.py for implementation details\n\n   # This executes without loading (~50 tokens output)\n   Run: python scripts/validate.py input.pdf\n   ```\n\n## Practical Examples\n\n### Token-Efficient Skill (~1,500 tokens active)\n\n```\nskill/\nâ”œâ”€â”€ SKILL.md (800 words core)\nâ””â”€â”€ references/\n    â”œâ”€â”€ api.md (full API, loaded only when needed)\n    â””â”€â”€ examples.md (working code, loaded only when needed)\n```\n\n### Token-Heavy Skill (~5,000 tokens active) - Avoid\n\n```\nskill/\nâ””â”€â”€ SKILL.md (3,000 words, everything inline)\n```\n\n### Optimal Structure\n\n```markdown\n# In SKILL.md\n\n## Quick start (always loaded)\n[80% of use cases covered in 500 words]\n\n## Advanced features (pointers only)\n- **Forms**: See [FORMS.md](references/FORMS.md)\n- **API**: See [API.md](references/API.md)\n\n## Quick search (for large references)\ngrep -i \"topic\" references/\n```\n\n## Measuring Token Impact\n\n1. **Check skill loading:** `claude --debug` shows what loads\n2. **Count SKILL.md:** ~4 characters = 1 token (rough estimate)\n3. **Test with fresh context:** Does skill work without reference files?\n\n## Summary\n\n| Level | Tokens | Optimisation |\n|-------|--------|--------------|\n| Metadata | ~100 fixed | Concise descriptions |\n| SKILL.md | ~1,500-2,000 target | 80% coverage, pointers to rest |\n| References | 0 until accessed | Large docs, schemas, examples |\n| Scripts | Output only | Execute don't load |\n",
        "plugins/utilities/.claude-plugin/plugin.json": "{\n  \"name\": \"utilities\",\n  \"description\": \"General utility tools: timezone conversion and time queries across IANA timezones\",\n  \"author\": {\n    \"name\": \"Henrik Soederlund\",\n    \"email\": \"whom-wealthy.2z@icloud.com\"\n  },\n  \"version\": \"1.0.0\"\n}\n",
        "plugins/utilities/README.md": "# Utilities Toolkit\n\nGeneral-purpose utility tools for common tasks in Claude Code.\n\n## What's Included\n\n### Skills (1)\n\n- **timezone-tools** - Timezone conversion and time utilities using the IANA timezone database\n\n## Installation\n\n```bash\n/plugin install utilities@wookstar\n```\n\n## Usage Examples\n\n```bash\n# Get current time in a specific timezone\n\"What time is it in Tokyo?\"\n\n# Convert time between timezones\n\"I have a meeting at 2pm New York time, what time is that in Perth?\"\n\n# Find timezone codes\n\"What are the timezone codes for London, Tokyo, and Sydney?\"\n```\n\n## Skill Details\n\n### timezone-tools\n\nGet current time in any timezone and convert times between different timezones.\n\n**Features:**\n\n- Current time queries for any IANA timezone\n- Time conversion between timezones with automatic DST handling\n- Timezone name search by city or country\n- Support for all IANA timezone database entries\n\n**Scripts included:**\n\n- `get_time.py` - Get current time in a specified timezone\n- `convert_time.py` - Convert time between two timezones\n- `list_timezones.py` - Search for timezone names\n\n**Time format:**\n\n- All times use 24-hour format (HH:MM)\n- ISO 8601 datetime format for output\n- IANA timezone names (e.g., `America/New_York`, not `EST`)\n\n## Dependencies\n\n- Python 3.9+\n- `tzlocal>=5.0` - for local timezone detection\n- `zoneinfo` - built-in Python 3.9+ (IANA timezone database)\n\nInstall with:\n\n```bash\npip install tzlocal\n```\n\n## When to Use\n\nThis toolkit is ideal for:\n\n- Working with distributed teams across timezones\n- Scheduling meetings across regions\n- Converting times for international coordination\n- Quick timezone lookups\n",
        "plugins/utilities/skills/timezone-tools/SKILL.md": "---\nname: timezone-tools\ndescription: Get current time in any timezone and convert times between timezones. Use when working with time, dates, timezones, scheduling across regions, or when user mentions specific cities/regions for time queries. Supports IANA timezone names.\n---\n\n# Timezone Tools\n\nGet current time in any timezone and convert times between different timezones using IANA timezone database.\n\n## Quick Start\n\n### Get current time in a timezone\n\n```bash\npython scripts/get_time.py\" \"America/New_York\"\n```\n\n### Convert time between timezones\n\n```bash\npython scripts/convert_time.py\" \"America/New_York\" \"14:30\" \"Australia/Perth\"\n```\n\n### Search for timezone names\n\n```bash\npython scripts/list_timezones.py\" \"perth\"\n```\n\n## Instructions\n\nWhen the user asks about time or timezones:\n\n1. **For current time queries** (e.g., \"What time is it in Tokyo?\"):\n   - Use `scripts/get_time.py` with IANA timezone name\n   - If unsure of timezone name, search first with `list_timezones.py`\n   - Script outputs: timezone, datetime, day of week, DST status\n\n2. **For time conversions** (e.g., \"What's 2pm EST in Perth time?\"):\n   - Use `scripts/convert_time.py` with source timezone, time (HH:MM 24-hour), target timezone\n   - Script shows source time, target time, and time difference\n   - Automatically handles DST changes\n\n3. **For timezone searches**:\n   - Use `scripts/list_timezones.py` with city/country name\n   - Returns matching IANA timezone names\n\n## Common Timezones Reference\n\nFor quick reference, see [data/common_timezones.json](data/common_timezones.json) which includes major cities worldwide, with Perth prominently featured.\n\n**User's local timezone**: The scripts automatically detect your local timezone using `tzlocal`.\n\n## Examples\n\n### Example 1: Current time query\n\nUser: \"What time is it in Perth?\"\n\n```bash\npython scripts/list_timezones.py\" \"perth\"\n# Output: Australia/Perth\n\npython scripts/get_time.py\" \"Australia/Perth\"\n# Output:\n# Timezone: Australia/Perth\n# Current time: 2025-11-07T15:30:45\n# Day: Thursday\n# DST: No\n```\n\n### Example 2: Time conversion\n\nUser: \"I have a meeting at 2pm New York time, what time is that in Perth?\"\n\n```bash\npython scripts/convert_time.py\" \"America/New_York\" \"14:00\" \"Australia/Perth\"\n# Output:\n# Source: America/New_York - 2025-11-07T14:00:00 (Thursday, DST: No)\n# Target: Australia/Perth - 2025-11-08T03:00:00 (Friday, DST: No)\n# Time difference: +13.0h\n```\n\n### Example 3: Multiple timezone search\n\nUser: \"What are the timezone codes for London, Tokyo, and Sydney?\"\n\n```bash\npython scripts/list_timezones.py\" \"london\"\npython scripts/list_timezones.py\" \"tokyo\"\npython scripts/list_timezones.py\" \"sydney\"\n# Outputs:\n# Europe/London\n# Asia/Tokyo\n# Australia/Sydney\n```\n\n## Time Format\n\n- All times use **24-hour format** (HH:MM): `14:30` not `2:30 PM`\n- ISO 8601 datetime format for output: `2025-11-07T14:30:45`\n- IANA timezone names (e.g., `America/New_York`, not `EST`)\n\n## Troubleshooting\n\n### \"Invalid timezone\" error\n\n- Use IANA timezone names: `America/New_York` not `EST` or `Eastern`\n- Search with `list_timezones.py` if unsure\n- Check [data/common_timezones.json](data/common_timezones.json) for reference\n\n### \"Invalid time format\" error\n\n- Use 24-hour format: `14:30` not `2:30 PM`\n- Format must be `HH:MM` with colon separator\n\n### Missing dependencies\n\nInstall required Python packages:\n\n```bash\npip install tzlocal\n```\n\n## Dependencies\n\n- Python 3.9+\n- `tzlocal>=5.0` - for local timezone detection\n- `zoneinfo` - built-in Python 3.9+ (IANA timezone database)\n\n## Notes\n\n- Scripts automatically handle Daylight Saving Time (DST)\n- Local timezone is auto-detected from system\n- All timezone data uses IANA Time Zone Database\n- Perth, Australia timezone: `Australia/Perth` (UTC+8, no DST)\n"
      },
      "plugins": [
        {
          "name": "productivity",
          "source": "./plugins/productivity",
          "description": "Workflow orchestration suite: 4 commands for planning, parallel task execution, and session priming + 2 skills (Google Apps Script for Workspace automation, Tampermonkey for browser userscripts)",
          "version": "2.1.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "homepage": "https://github.com/henkisdabro/wookstar-claude-plugins",
          "keywords": [
            "productivity",
            "planning",
            "workflows",
            "parallel",
            "orchestration",
            "google-apps-script",
            "workspace",
            "tampermonkey",
            "userscript",
            "browser-automation",
            "greasemonkey"
          ],
          "category": "productivity",
          "categories": [
            "browser-automation",
            "google-apps-script",
            "greasemonkey",
            "orchestration",
            "parallel",
            "planning",
            "productivity",
            "tampermonkey",
            "userscript",
            "workflows",
            "workspace"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install productivity@wookstar-claude-plugins"
          ]
        },
        {
          "name": "developer",
          "source": "./plugins/developer",
          "description": "Complete development suite: 3 expert agents (fullstack developer, validation gates, documentation manager) + 3 commands (containerize, PRP generation/execution) + 5 skills (git commit helper, webapp testing, devtools, PRP generator, Fifteen-Factor App) + 7 MCP integrations (Chrome DevTools, Playwright, Cloudflare docs, Microsoft docs, Firecrawl, Context7, Serena AI)",
          "version": "2.1.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "homepage": "https://github.com/henkisdabro/wookstar-claude-plugins",
          "keywords": [
            "development",
            "fullstack",
            "testing",
            "validation",
            "git",
            "playwright",
            "devtools",
            "debugging",
            "docker",
            "prp",
            "fifteen-factor",
            "architecture"
          ],
          "category": "development",
          "mcpServers": "./.mcp.json",
          "categories": [
            "architecture",
            "debugging",
            "development",
            "devtools",
            "docker",
            "fifteen-factor",
            "fullstack",
            "git",
            "playwright",
            "prp",
            "testing",
            "validation"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install developer@wookstar-claude-plugins"
          ]
        },
        {
          "name": "documents",
          "source": "./plugins/documents",
          "description": "Professional document processing suite: 3 comprehensive skills for Word (.docx), Excel (.xlsx), and PDF files - create, edit, analyse, and process documents with advanced features like tracked changes, forms, tables, OCR, and formulas",
          "version": "1.1.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "homepage": "https://github.com/henkisdabro/wookstar-claude-plugins",
          "keywords": [
            "documents",
            "docx",
            "word",
            "excel",
            "xlsx",
            "pdf",
            "spreadsheet",
            "forms",
            "ocr",
            "office"
          ],
          "category": "documents",
          "categories": [
            "documents",
            "docx",
            "excel",
            "forms",
            "ocr",
            "office",
            "pdf",
            "spreadsheet",
            "word",
            "xlsx"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install documents@wookstar-claude-plugins"
          ]
        },
        {
          "name": "claudecode",
          "source": "./plugins/claudecode",
          "description": "Claude Code thinking tools: 2 commands (ultra-think for deep analytical reasoning, reflection for improving CLAUDE.md instructions)",
          "version": "3.1.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "homepage": "https://github.com/henkisdabro/wookstar-claude-plugins",
          "keywords": [
            "claude-code",
            "thinking",
            "reasoning",
            "analysis",
            "reflection",
            "meta"
          ],
          "category": "meta",
          "categories": [
            "analysis",
            "claude-code",
            "meta",
            "reasoning",
            "reflection",
            "thinking"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install claudecode@wookstar-claude-plugins"
          ]
        },
        {
          "name": "ultimate-skill-creator",
          "source": "./plugins/ultimate-skill-creator",
          "description": "Advanced skill development toolkit: 1 agent (skill-architect) + 2 commands (/create-skill-ultimate, /setup-skill-hook) + 1 comprehensive skill (skill-mastery with 4 reference guides and 2 utility scripts) + 1 hook (skill-activation-prompt). Combines official plugin-dev patterns, community best practices, and latest API. Requires plugin-dev@claude-plugins-official for validation agents.",
          "version": "1.0.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "homepage": "https://github.com/henkisdabro/wookstar-claude-plugins",
          "keywords": [
            "skills",
            "skill-creator",
            "plugin-dev",
            "development",
            "best-practices",
            "meta",
            "archetypes",
            "token-efficiency",
            "progressive-disclosure"
          ],
          "category": "meta",
          "categories": [
            "archetypes",
            "best-practices",
            "development",
            "meta",
            "plugin-dev",
            "progressive-disclosure",
            "skill-creator",
            "skills",
            "token-efficiency"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install ultimate-skill-creator@wookstar-claude-plugins"
          ]
        },
        {
          "name": "cloudflare-skills",
          "source": "./plugins/cloudflare-skills",
          "description": "Official Cloudflare development skills: 2 commands (build-agent, build-mcp) + 2 comprehensive skills for building AI agents and MCP servers on Cloudflare Workers with reference guides for agent patterns, state management, OAuth setup, and troubleshooting",
          "version": "1.0.0",
          "author": {
            "name": "Cloudflare",
            "url": "https://github.com/cloudflare"
          },
          "homepage": "https://github.com/cloudflare/skills",
          "keywords": [
            "cloudflare",
            "workers",
            "ai-agents",
            "mcp",
            "mcp-server",
            "serverless",
            "edge",
            "oauth",
            "durable-objects"
          ],
          "category": "development",
          "categories": [
            "ai-agents",
            "cloudflare",
            "development",
            "durable-objects",
            "edge",
            "mcp",
            "mcp-server",
            "oauth",
            "serverless",
            "workers"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install cloudflare-skills@wookstar-claude-plugins"
          ]
        },
        {
          "name": "utilities",
          "source": "./plugins/utilities",
          "description": "General utility tools: timezone conversion and time queries across IANA timezones",
          "version": "1.0.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "homepage": "https://github.com/henkisdabro/wookstar-claude-plugins",
          "keywords": [
            "utilities",
            "timezone",
            "time",
            "conversion",
            "tools"
          ],
          "category": "utilities",
          "categories": [
            "conversion",
            "time",
            "timezone",
            "tools",
            "utilities"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install utilities@wookstar-claude-plugins"
          ]
        },
        {
          "name": "marketing",
          "source": "./plugins/marketing",
          "description": "Complete marketing analytics suite: comprehensive GTM skill (9 reference guides for tags, triggers, variables, data layer, debugging, custom templates, API), comprehensive GA4 skill (15 reference guides for setup, events, ecommerce, BigQuery, Measurement Protocol, privacy compliance), and Google Ads Scripts skill for campaign automation. Includes MCP integrations for Analytics and GTM APIs.",
          "version": "2.0.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "homepage": "https://github.com/henkisdabro/wookstar-claude-plugins",
          "keywords": [
            "gtm",
            "google-tag-manager",
            "ga4",
            "google-analytics",
            "analytics",
            "tracking",
            "tags",
            "triggers",
            "variables",
            "datalayer",
            "events",
            "ecommerce",
            "bigquery",
            "measurement-protocol",
            "google-ads-scripts",
            "marketing",
            "debugging"
          ],
          "category": "analytics",
          "mcpServers": "./.mcp.json",
          "categories": [
            "analytics",
            "bigquery",
            "datalayer",
            "debugging",
            "ecommerce",
            "events",
            "ga4",
            "google-ads-scripts",
            "google-analytics",
            "google-tag-manager",
            "gtm",
            "marketing",
            "measurement-protocol",
            "tags",
            "tracking",
            "triggers",
            "variables"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install marketing@wookstar-claude-plugins"
          ]
        },
        {
          "name": "shopify-developer",
          "source": "./plugins/shopify-developer",
          "description": "Professional Shopify development suite with 6 specialised skills covering Liquid templating, theme development, API integration (GraphQL/REST), custom app development, performance optimisation, and debugging. Complete solution for building custom themes, headless storefronts, and Shopify apps.",
          "version": "1.1.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "homepage": "https://github.com/henkisdabro/wookstar-claude-plugins",
          "keywords": [
            "shopify",
            "liquid",
            "ecommerce",
            "theme",
            "development",
            "api",
            "graphql",
            "rest",
            "app-development",
            "performance",
            "debugging",
            "storefront"
          ],
          "category": "development",
          "categories": [
            "api",
            "app-development",
            "debugging",
            "development",
            "ecommerce",
            "graphql",
            "liquid",
            "performance",
            "rest",
            "shopify",
            "storefront",
            "theme"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install shopify-developer@wookstar-claude-plugins"
          ]
        },
        {
          "name": "mcp-gemini-bridge",
          "source": "./plugins/mcp-gemini-bridge",
          "description": "Google Gemini AI model integration via MCP",
          "version": "1.0.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "keywords": [
            "mcp",
            "gemini",
            "ai",
            "google"
          ],
          "category": "ai",
          "mcpServers": "./.mcp.json",
          "categories": [
            "ai",
            "gemini",
            "google",
            "mcp"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install mcp-gemini-bridge@wookstar-claude-plugins"
          ]
        },
        {
          "name": "mcp-perplexity",
          "source": "./plugins/mcp-perplexity",
          "description": "Perplexity AI-powered search and information retrieval",
          "version": "1.0.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "keywords": [
            "mcp",
            "perplexity",
            "search",
            "ai"
          ],
          "category": "ai",
          "mcpServers": "./.mcp.json",
          "categories": [
            "ai",
            "mcp",
            "perplexity",
            "search"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install mcp-perplexity@wookstar-claude-plugins"
          ]
        },
        {
          "name": "mcp-alphavantage",
          "source": "./plugins/mcp-alphavantage",
          "description": "Stock market data, company information, and financial indicators via AlphaVantage",
          "version": "1.0.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "keywords": [
            "mcp",
            "stocks",
            "finance",
            "alphavantage",
            "market-data"
          ],
          "category": "data",
          "mcpServers": "./.mcp.json",
          "categories": [
            "alphavantage",
            "data",
            "finance",
            "market-data",
            "mcp",
            "stocks"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install mcp-alphavantage@wookstar-claude-plugins"
          ]
        },
        {
          "name": "mcp-coingecko",
          "source": "./plugins/mcp-coingecko",
          "description": "Cryptocurrency prices, market data, and historical trends via CoinGecko",
          "version": "1.0.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "keywords": [
            "mcp",
            "crypto",
            "cryptocurrency",
            "coingecko",
            "market-data"
          ],
          "category": "data",
          "mcpServers": "./.mcp.json",
          "categories": [
            "coingecko",
            "crypto",
            "cryptocurrency",
            "data",
            "market-data",
            "mcp"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install mcp-coingecko@wookstar-claude-plugins"
          ]
        },
        {
          "name": "mcp-currency-conversion",
          "source": "./plugins/mcp-currency-conversion",
          "description": "Real-time currency exchange rates and conversion (no API key required)",
          "version": "1.0.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "keywords": [
            "mcp",
            "currency",
            "forex",
            "exchange",
            "conversion"
          ],
          "category": "data",
          "mcpServers": "./.mcp.json",
          "categories": [
            "conversion",
            "currency",
            "data",
            "exchange",
            "forex",
            "mcp"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install mcp-currency-conversion@wookstar-claude-plugins"
          ]
        },
        {
          "name": "mcp-fetch",
          "source": "./plugins/mcp-fetch",
          "description": "Web content fetching and HTTP requests",
          "version": "1.0.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "keywords": [
            "mcp",
            "fetch",
            "web",
            "http"
          ],
          "category": "mcpServers",
          "mcpServers": "./.mcp.json",
          "categories": [
            "fetch",
            "http",
            "mcp",
            "mcpservers",
            "web"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install mcp-fetch@wookstar-claude-plugins"
          ]
        },
        {
          "name": "mcp-google-workspace",
          "source": "./plugins/mcp-google-workspace",
          "description": "Google Workspace integration (Gmail, Drive, Calendar)",
          "version": "1.0.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "keywords": [
            "mcp",
            "google",
            "workspace",
            "gmail",
            "drive",
            "calendar"
          ],
          "category": "mcpServers",
          "mcpServers": "./.mcp.json",
          "categories": [
            "calendar",
            "drive",
            "gmail",
            "google",
            "mcp",
            "mcpservers",
            "workspace"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install mcp-google-workspace@wookstar-claude-plugins"
          ]
        },
        {
          "name": "mcp-mikrotik",
          "source": "./plugins/mcp-mikrotik",
          "description": "MikroTik router management and network automation",
          "version": "1.0.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "keywords": [
            "mcp",
            "mikrotik",
            "router",
            "network",
            "automation"
          ],
          "category": "mcpServers",
          "mcpServers": "./.mcp.json",
          "categories": [
            "automation",
            "mcp",
            "mcpservers",
            "mikrotik",
            "network",
            "router"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install mcp-mikrotik@wookstar-claude-plugins"
          ]
        },
        {
          "name": "mcp-n8n",
          "source": "./plugins/mcp-n8n",
          "description": "n8n workflow automation integration",
          "version": "1.0.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "keywords": [
            "mcp",
            "n8n",
            "automation",
            "workflows"
          ],
          "category": "mcpServers",
          "mcpServers": "./.mcp.json",
          "categories": [
            "automation",
            "mcp",
            "mcpservers",
            "n8n",
            "workflows"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install mcp-n8n@wookstar-claude-plugins"
          ]
        },
        {
          "name": "mcp-notion",
          "source": "./plugins/mcp-notion",
          "description": "Notion workspace and database integration",
          "version": "1.0.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "keywords": [
            "mcp",
            "notion",
            "workspace",
            "notes",
            "database"
          ],
          "category": "mcpServers",
          "mcpServers": "./.mcp.json",
          "categories": [
            "database",
            "mcp",
            "mcpservers",
            "notes",
            "notion",
            "workspace"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install mcp-notion@wookstar-claude-plugins"
          ]
        },
        {
          "name": "mcp-open-meteo",
          "source": "./plugins/mcp-open-meteo",
          "description": "Weather and climate data (no API key required)",
          "version": "1.0.0",
          "author": {
            "name": "Henrik Soederlund",
            "email": "whom-wealthy.2z@icloud.com"
          },
          "keywords": [
            "mcp",
            "weather",
            "climate",
            "forecast"
          ],
          "category": "mcpServers",
          "mcpServers": "./.mcp.json",
          "categories": [
            "climate",
            "forecast",
            "mcp",
            "mcpservers",
            "weather"
          ],
          "install_commands": [
            "/plugin marketplace add henkisdabro/wookstar-claude-plugins",
            "/plugin install mcp-open-meteo@wookstar-claude-plugins"
          ]
        }
      ]
    }
  ]
}