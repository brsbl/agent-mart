{
  "author": {
    "id": "pigfoot",
    "display_name": "Chen, Chih-Chia",
    "avatar_url": "https://avatars.githubusercontent.com/u/69261?v=4"
  },
  "marketplaces": [
    {
      "name": "pigfoot-marketplace",
      "version": null,
      "description": "Curated Claude Code plugins: skills, workflows, and productivity tools",
      "repo_full_name": "pigfoot/claude-code-hubs",
      "repo_url": "https://github.com/pigfoot/claude-code-hubs",
      "repo_description": "Personal's Claude Code hubs, including skill marketplaces and configurations",
      "signals": {
        "stars": 2,
        "forks": 0,
        "pushed_at": "2026-02-04T07:56:29Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"pigfoot-marketplace\",\n  \"owner\": {\n    \"name\": \"Chih-Chia Chen, pigfoot\",\n    \"email\": \"pigfoot@gmail.com\"\n  },\n  \"metadata\": {\n    \"description\": \"Curated Claude Code plugins: skills, workflows, and productivity tools\",\n    \"version\": \"0.0.1\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"commit\",\n      \"source\": \"./plugins/commit\",\n      \"description\": \"Generate conventional commit messages automatically. Use when user runs git commit, stages changes, or asks for commit message help. Analyzes git diff to create clear, descriptive conventional commit messages. Triggers on git commit, staged changes, commit message requests.\",\n      \"version\": \"0.0.1\",\n      \"author\": {\n        \"name\": \"pigfoot\",\n        \"email\": \"pigfoot@gmail.com\"\n      }\n    },\n    {\n      \"name\": \"confluence\",\n      \"source\": \"./plugins/confluence\",\n      \"description\": \"Professional Confluence document management with unlimited file sizes and complete image support. Upload/download Markdown documents, handle images and diagrams, search with CQL, and integrate with CI/CD pipelines.\",\n      \"version\": \"0.1.0\",\n      \"author\": {\n        \"name\": \"pigfoot\",\n        \"email\": \"pigfoot@gmail.com\"\n      }\n    },\n    {\n      \"name\": \"secure-container-build\",\n      \"source\": \"./plugins/secure-container-build\",\n      \"description\": \"Build secure container images with Wolfi runtime, non-root users, and multi-stage builds. Templates for Python/uv, Bun, Node.js/pnpm, Golang (static/CGO), and Rust (glibc/musl) with allocator optimization\",\n      \"version\": \"0.0.1\",\n      \"author\": {\n        \"name\": \"pigfoot\",\n        \"email\": \"pigfoot@gmail.com\"\n      }\n    },\n    {\n      \"name\": \"github-actions-container-build\",\n      \"source\": \"./plugins/github-actions-container-build\",\n      \"description\": \"Build multi-architecture container images in GitHub Actions. Matrix builds (public repos with native ARM64), QEMU emulation (private repos), or ARM64 larger runners (Team/Enterprise). Uses Podman rootless builds\",\n      \"version\": \"0.0.1\",\n      \"author\": {\n        \"name\": \"pigfoot\",\n        \"email\": \"pigfoot@gmail.com\"\n      }\n    },\n    {\n      \"name\": \"nano-banana\",\n      \"source\": \"./plugins/nano-banana\",\n      \"description\": \"Unified image generation workflow with Gemini/Imagen models using fixed Python script approach (eliminates AI hallucinations). Generate 1-100 images with minimal JSON config. Supports TrendLife brand styling, interactive prompt design, and cross-platform operation.\",\n      \"version\": \"0.0.7\",\n      \"author\": {\n        \"name\": \"pigfoot\",\n        \"email\": \"pigfoot@gmail.com\"\n      }\n    },\n    {\n      \"name\": \"taiwan-calendar\",\n      \"source\": \"./plugins/taiwan-calendar\",\n      \"description\": \"Taiwan calendar skill for accurate working day/holiday information. Queries government API to provide today's date, check specific dates, count working days, and calculate N working days from a date. Solves Claude's knowledge cutoff issues with Taiwan holidays and weekdays.\",\n      \"version\": \"0.0.1\",\n      \"author\": {\n        \"name\": \"pigfoot\",\n        \"email\": \"pigfoot@gmail.com\"\n      }\n    },\n    {\n      \"name\": \"superpowers\",\n      \"source\": {\n        \"source\": \"url\",\n        \"url\": \"https://github.com/obra/superpowers.git\"\n      },\n      \"description\": \"Core skills library: TDD, debugging, collaboration patterns, and proven techniques\",\n      \"version\": \"4.1.1\",\n      \"keywords\": [\n        \"skills\",\n        \"tdd\",\n        \"debugging\",\n        \"collaboration\",\n        \"best-practices\",\n        \"workflows\"\n      ],\n      \"strict\": true\n    }\n  ]\n}\n",
        "README.md": "# pigfoot's Claude Code Hubs\n\nA curated collection of plugins, skills, and configuration templates for\n[Claude Code](https://docs.claude.com/en/docs/claude-code), plus integration with recommended third-party\nmarketplaces.\n\n## What's Inside\n\n### üîå Plugins\n\n**From this marketplace (pigfoot):**\n\n- **[commit](./plugins/commit/)** - Smart commit message generation with conventional commits, emoji prefixes, and\n  GPG signing support\n- **[confluence](./plugins/confluence/)** - Professional Confluence document management with **intelligent roundtrip\n  editing** (preserves macros while Claude edits content), **smart routing** (auto-selects between MCP and REST API\n  for 25x faster writes), short URL resolution, search quality detection, markdown-first workflows, unlimited file\n  sizes, and complete image support\n- **[nano-banana](./plugins/nano-banana/)** - AI image generation with Gemini models. Direct generation or interactive\n  prompting with brand style support\n- **[secure-container-build](./plugins/secure-container-build/)** - Build secure container images with Wolfi runtime,\n  non-root users, and multi-stage builds. Templates for Python/uv, Bun, Node.js/pnpm, Golang, and Rust\n- **[github-actions-container-build](./plugins/github-actions-container-build/)** - Build multi-architecture container\n  images in GitHub Actions. Matrix builds (public repos), QEMU (private repos), Podman rootless builds\n\n**Recommended third-party plugins:**\n\n- **[context7](https://github.com/upstash/context7)** - Access up-to-date documentation and code examples for any\n  library or framework (official from @claude-plugins-official)\n- **[superpowers](https://github.com/obra/superpowers)** - Comprehensive skills library with proven development\n  workflows (TDD, debugging, code review)\n\n### üéØ Skills\n\nReusable workflow patterns included in plugins - automatically available after plugin installation.\n\n### ‚öôÔ∏è Configuration Templates\n\n- **[.CLAUDE.md](./.CLAUDE.md)** - Comprehensive development guidelines template with language detection, workflow\n  patterns, and best practices\n\n## Prerequisites\n\n### Required Tools\n\nBefore using this marketplace, ensure you have these tools installed:\n\n#### macOS (using Homebrew)\n\nRecommended to use [Homebrew](https://brew.sh/):\n\n```bash\n# Install Homebrew if you don't have it\n/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"\n\n# Install required tools\nbrew install jq\nbrew install oven-sh/bun/bun\nbrew install uv\n```\n\n#### Linux\n\nUse `apt`, `apt-get`, `yum`, `pacman`, `apk` or any native package manager tool.\n\n**Example (Debian/Ubuntu):**\n\n```bash\nsudo apt-get update && sudo apt-get install -y jq\n\n# bun for javascript/typescript\ncurl -fsSL https://bun.sh/install | bash\n# uv for python\ncurl -LsSf https://astral.sh/uv/install.sh | sh\n```\n\n<details>\n<summary>Running Claude Code on Windows</summary>\n\nFor the best experience, we recommend using [Windows Terminal](https://aka.ms/terminal):\n\n- **Windows 11:** Windows Terminal is pre-installed. Just open it and run `claude`.\n- **Windows 10:** Install Windows Terminal first:\n\n  ```powershell\n  # Using winget\n  winget install Microsoft.WindowsTerminal\n\n  # Or using Scoop\n  scoop install windows-terminal\n  ```\n\n</details>\n\n<details>\n<summary>Windows (Scoop)</summary>\n\nInstall tools using [Scoop](https://scoop.sh/):\n\n```powershell\n# Install Scoop if you don't have it\nSet-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser\nInvoke-RestMethod -Uri https://get.scoop.sh | Invoke-Expression\n\n# Install required tools\nscoop install jq\nscoop install bun\nscoop install uv\n```\n\n> **Note:** Windows built-in `winget` is also possible, however Scoop is recommended for better compatibility with\n> command line tools.\n\n</details>\n\n## Install Claude Code\n\nFollow the [official installation guide](https://code.claude.com/docs/en/setup) or use one of the methods below:\n\n**Homebrew (macOS, Linux):**\n\n```bash\nbrew install --cask claude-code\n```\n\n**macOS, Linux, WSL, Git Bash:**\n\n```bash\ncurl -fsSL https://claude.ai/install.sh | bash\n```\n\n<details>\n<summary>Windows PowerShell</summary>\n\n```powershell\nirm https://claude.ai/install.ps1 | iex\n\n# Add to PATH (if needed)\n[Environment]::SetEnvironmentVariable(\n    \"Path\",\n    [Environment]::GetEnvironmentVariable(\"Path\", \"User\") + \";$env:USERPROFILE\\.local\\bin\",\n    \"User\"\n)\n```\n\n</details>\n\n## Custom Settings for Optimal Workflow (Optional)\n\nThis one-time setup grants Claude Code necessary permissions and configures `CLAUDE.md` for optimal workflow.\n\n### Step 1: Configure Allow Permissions\n\n**What this does:**\n\n- Grants permissions for common commands (git, file operations, package managers)\n- Enables skills and MCP tools\n- Optimizes Claude Code settings\n\n**macOS, Linux, WSL, Git Bash:**\n\n```bash\n# Create settings file if it doesn't exist\n[[ ! -r \"${HOME}/.claude/settings.json\" ]] && mkdir -p \"${HOME}/.claude\" && echo \"{}\" > \"${HOME}/.claude/settings.json\"\n\n# Add permissions\njq \"$(cat <<'EOF'\n.permissions.allow = (((.permissions // {}).allow // []) + [\n  \"Bash(ls:*)\", \"Bash(pwd:*)\", \"Bash(echo:*)\", \"Bash(export:*)\", \"Bash(test:*)\",\n  \"Bash(mkdir:*)\", \"Bash(mv:*)\", \"Bash(cat:*)\", \"Bash(cp:*)\", \"Bash(chmod:*)\", \"Bash(touch:*)\",\n  \"Bash(grep:*)\", \"Bash(find:*)\", \"Bash(sed:*)\", \"Bash(head:*)\", \"Bash(xargs:*)\",\n  \"Bash(git:*)\", \"Bash(gh:*)\", \"Bash(jq:*)\", \"Bash(curl:*)\",\n  \"Bash(node:*)\", \"Bash(npm:*)\", \"Bash(pnpm:*)\", \"Bash(npx:*)\", \"Bash(bun:*)\", \"Bash(bunx:*)\",\n  \"Bash(python:*)\", \"Bash(python3:*)\", \"Bash(uv:*)\", \"Bash(uvx:*)\",\n  \"Bash(docker:*)\", \"Bash(podman:*)\", \"Bash(buildah:*)\",\n  \"Bash(gh:*)\", \"Bash(gpg:*)\", \"Bash(gpgconf:*)\",\n  \"Read\", \"Edit\", \"NotebookEdit\", \"Update\", \"Write\", \"WebFetch\", \"WebSearch\",\n  \"Bash(.specify/scripts/bash/check-prerequisites.sh:*)\", \"Bash(.specify/scripts/bash/create-new-feature.sh:*)\",\n  \"Bash(.specify/scripts/bash/setup-plan.sh:*)\", \"Bash(.specify/scripts/bash/update-agent-context.sh:*)\",\n  \"Bash(openspec:*)\",\n  \"mcp__plugin_context7_context7\", \"mcp__plugin_confluence_atlassian__*\",\n  \"Skill(commit:*)\", \"Skill(confluence:*)\", \"Skill(nano-banana:*)\", \"Skill(superpowers:*)\", \"Skill(secure-container-build:*)\", \"Skill(github-actions-container-build:*)\"\n] | unique)\n  | .alwaysThinkingEnabled = true\n  | .includeCoAuthoredBy = false\n  | .model = \"opusplan\"\n  | .spinnerTipsEnabled = false\nEOF\n)\" \"${HOME}/.claude/settings.json\" > /tmp/temp.json && mv -f /tmp/temp.json \"${HOME}/.claude/settings.json\"\n\necho \"‚úÖ Permissions configured successfully!\"\n```\n\n<details>\n<summary>Windows PowerShell</summary>\n\n```powershell\n# Create settings file if it doesn't exist\n$settingsPath = \"$env:USERPROFILE\\.claude\\settings.json\"\nif (-not (Test-Path $settingsPath)) {\n    New-Item -ItemType Directory -Force -Path \"$env:USERPROFILE\\.claude\" | Out-Null\n    \"{}\" | Out-File -Encoding utf8 $settingsPath\n}\n\n$settings = Get-Content $settingsPath -Raw | ConvertFrom-Json\n\nif (-not $settings.permissions) {\n    $settings | Add-Member -Type NoteProperty -Name \"permissions\" -Value ([PSCustomObject]@{}) -Force\n}\n\nif (-not $settings.permissions.allow) {\n    $settings.permissions | Add-Member -Type NoteProperty -Name \"allow\" -Value @() -Force\n}\n\n$newPermissions = @(\n    \"Bash(git:*)\", \"Bash(gh:*)\", \"Bash(jq:*)\", \"Bash(curl:*)\",\n    \"Bash(node:*)\", \"Bash(npm:*)\", \"Bash(pnpm:*)\", \"Bash(npx:*)\", \"Bash(bun:*)\", \"Bash(bunx:*)\",\n    \"Bash(python:*)\", \"Bash(python3:*)\", \"Bash(uv:*)\", \"Bash(uvx:*)\",\n    \"Bash(docker:*)\", \"Bash(podman:*)\", \"Bash(buildah:*)\",\n    \"Bash(gh:*)\", \"Bash(gpg:*)\", \"Bash(gpgconf:*)\",\n    \"Read\", \"Edit\", \"NotebookEdit\", \"Update\", \"Write\", \"WebFetch\", \"WebSearch\",\n    \"Bash(.specify/scripts/bash/check-prerequisites.sh:*)\", \"Bash(.specify/scripts/bash/create-new-feature.sh:*)\",\n    \"Bash(.specify/scripts/bash/setup-plan.sh:*)\", \"Bash(.specify/scripts/bash/update-agent-context.sh:*)\",\n    \"Bash(openspec:*)\",\n    \"mcp__plugin_context7_context7\", \"mcp__plugin_confluence_atlassian__*\",\n    \"Skill(commit:*)\", \"Skill(confluence:*)\", \"Skill(nano-banana:*)\", \"Skill(superpowers:*)\", \"Skill(secure-container-build:*)\", \"Skill(github-actions-container-build:*)\"\n)\n\n$merged = @($settings.permissions.allow) + $newPermissions | Select-Object -Unique\n$settings.permissions.allow = $merged\n\n$settings | Add-Member -Type NoteProperty -Name \"alwaysThinkingEnabled\" -Value $true -Force\n$settings | Add-Member -Type NoteProperty -Name \"includeCoAuthoredBy\" -Value $false -Force\n$settings | Add-Member -Type NoteProperty -Name \"model\" -Value \"opusplan\" -Force\n$settings | Add-Member -Type NoteProperty -Name \"spinnerTipsEnabled\" -Value $false -Force\n\n$settings | ConvertTo-Json -Depth 10 | Out-File -Encoding utf8 $settingsPath\n\nWrite-Host \"‚úÖ Permissions configured successfully!\"\n```\n\n</details>\n\n#### Optional: Configure Language (Non-English Users)\n\nIf you want Claude Code to respond in a specific language, add the `language` field to your settings:\n\n```bash\n# Configure language (e.g., Traditional Chinese for Taiwan)\njq '.language = \"ÁπÅÈ´î‰∏≠ÊñáÂè∞ÁÅ£Áî®Ë™û\"' ~/.claude/settings.json > /tmp/temp.json && mv /tmp/temp.json ~/.claude/settings.json\n\n# Other examples:\n# jq '.language = \"ÁÆÄ‰Ωì‰∏≠Êñá\"' ~/.claude/settings.json > /tmp/temp.json && mv /tmp/temp.json ~/.claude/settings.json\n# jq '.language = \"Êó•Êú¨Ë™û\"' ~/.claude/settings.json > /tmp/temp.json && mv /tmp/temp.json ~/.claude/settings.json\n# jq '.language = \"Espa√±ol\"' ~/.claude/settings.json > /tmp/temp.json && mv /tmp/temp.json ~/.claude/settings.json\n\n# Remove language setting (revert to default English)\n# jq 'del(.language)' ~/.claude/settings.json > /tmp/temp.json && mv /tmp/temp.json ~/.claude/settings.json\n```\n\n<details>\n<summary>Windows PowerShell</summary>\n\n```powershell\n# Configure language (e.g., Traditional Chinese for Taiwan)\n$settingsPath = \"$env:USERPROFILE\\.claude\\settings.json\"\n$settings = Get-Content $settingsPath -Raw | ConvertFrom-Json\n$settings | Add-Member -Type NoteProperty -Name \"language\" -Value \"ÁπÅÈ´î‰∏≠ÊñáÂè∞ÁÅ£Áî®Ë™û\" -Force\n$settings | ConvertTo-Json -Depth 10 | Out-File -Encoding utf8 $settingsPath\n\n# Other examples:\n# $settings | Add-Member -Type NoteProperty -Name \"language\" -Value \"ÁÆÄ‰Ωì‰∏≠Êñá\" -Force\n# $settings | Add-Member -Type NoteProperty -Name \"language\" -Value \"Êó•Êú¨Ë™û\" -Force\n# $settings | Add-Member -Type NoteProperty -Name \"language\" -Value \"Espa√±ol\" -Force\n\n# Remove language setting (revert to default English)\n# $settings.PSObject.Properties.Remove(\"language\")\n# $settings | ConvertTo-Json -Depth 10 | Out-File -Encoding utf8 $settingsPath\n```\n\n</details>\n\n### Step 2: Install Plugins\n\nInstall plugins from [pigfoot/claude-code-hubs](https://github.com/pigfoot/claude-code-hubs) using CLI:\n\n```bash\n# Add marketplace\nclaude plugin marketplace add pigfoot/claude-code-hubs\n\n# Install plugins from pigfoot marketplace\nclaude plugin install --scope user commit@pigfoot-marketplace\nclaude plugin install --scope user confluence@pigfoot-marketplace\nclaude plugin install --scope user nano-banana@pigfoot-marketplace\nclaude plugin install --scope user secure-container-build@pigfoot-marketplace\nclaude plugin install --scope user github-actions-container-build@pigfoot-marketplace\n\n# Install recommended third-party plugins\nclaude plugin install --scope user context7@claude-plugins-official\nclaude plugin install --scope user superpowers@pigfoot-marketplace\n```\n\n**Update marketplace (fetch latest plugin list):**\n\n```bash\n# Update pigfoot marketplace to get latest plugin versions\nclaude plugin marketplace update pigfoot-marketplace\n```\n\n**Update plugins:**\n\n```bash\n# Update specific plugin\nclaude plugin update commit@pigfoot-marketplace\n\n# Update all pigfoot plugins (run one by one)\nclaude plugin update commit@pigfoot-marketplace\nclaude plugin update confluence@pigfoot-marketplace\nclaude plugin update nano-banana@pigfoot-marketplace\nclaude plugin update secure-container-build@pigfoot-marketplace\nclaude plugin update github-actions-container-build@pigfoot-marketplace\n\n# Update third-party plugins installed via this marketplace\n# (Note: superpowers must be installed first via: claude plugin install --scope user superpowers@pigfoot-marketplace)\nclaude plugin update superpowers@pigfoot-marketplace\n```\n\n### Step 3: Setup CLAUDE.md Template (Optional but Recommended)\n\nThe [CLAUDE.md](https://github.com/pigfoot/claude-code-hubs/blob/main/.CLAUDE.md) template provides comprehensive\ndevelopment guidelines that work with installed plugins.\n\n**For global configuration (applies to all projects):**\n\n**macOS, Linux, WSL, Git Bash:**\n\n```bash\nclaudeDir=\"${HOME}/.claude\"\ncurl -fsSL https://raw.githubusercontent.com/pigfoot/claude-code-hubs/main/.CLAUDE.md -o \"${claudeDir}/CLAUDE.md\"\n```\n\n<details>\n<summary>Windows PowerShell</summary>\n\n```powershell\n$claudeDir = \"$env:USERPROFILE\\.claude\"\nif (-not (Test-Path $claudeDir)) { New-Item -ItemType Directory -Path $claudeDir }\nInvoke-WebRequest -Uri \"https://raw.githubusercontent.com/pigfoot/claude-code-hubs/main/.CLAUDE.md\" -OutFile \"$claudeDir\\CLAUDE.md\"\n```\n\n</details>\n\n**For project-specific configuration:**\n\nChange `claudeDir` to your project root folder (e.g., `claudeDir=\".\"` or `$claudeDir = \".\"`) in the commands above.\n\n## Usage\n\n### üéØ commit Plugin - Smart Git Commits\n\n```bash\nclaude plugin install --scope user commit@pigfoot-marketplace\n```\n\n**What it does:**\nAutomates the tedious parts of creating well-formatted commits.\n\n**Benefits:**\n\n- ‚úÖ **No more commit message writer's block** - Analyzes your changes and suggests appropriate messages\n- ‚úÖ **Consistent format** - Automatic conventional commits with emoji (`‚ú® feat:`, `üêõ fix:`, etc.)\n- ‚úÖ **Multi-concern detection** - Suggests splitting commits when you've mixed different types of changes\n- ‚úÖ **GPG signing made easy** - Handles passphrase caching automatically\n- ‚úÖ **DCO compliance** - Always includes --signoff for projects requiring it\n\n**Usage:**\nJust say \"commit changes\" and Claude will handle the rest.\n\n**Example:**\n\n```bash\nUser: \"commit changes\"\n‚Üí Claude analyzes: auth changes + UI updates + docs\n‚Üí Suggests: Split into 3 commits?\n‚Üí Creates: ‚ú® feat: add JWT authentication\n         üíÑ style: update login UI\n         üìù docs: update auth documentation\n```\n\n---\n\n### üìö context7 Plugin - Up-to-Date Library Docs (Official)\n\n```bash\nclaude plugin install --scope user context7@claude-plugins-official\n```\n\n**What it does:**\nFetches current documentation and code examples from any library or framework via official Context7 MCP server.\n\n**Benefits:**\n\n- ‚úÖ **Always current** - Gets latest docs, not outdated LLM training data\n- ‚úÖ **Better suggestions** - Claude works with actual API docs and best practices\n- ‚úÖ **Faster learning** - No need to manually browse documentation sites\n- ‚úÖ **Accurate examples** - Real code snippets from official sources\n- ‚úÖ **Version-specific** - Can target specific library versions\n\n**Usage:**\nAsk Claude about any library naturally.\n\n**Examples:**\n\n- \"Show me the latest Next.js routing docs\"\n- \"How do I use MongoDB aggregation pipeline?\"\n- \"What are the best practices for React hooks?\"\n- \"How to configure Vite for a library?\"\n\n**Behind the scenes:**\nClaude automatically fetches documentation from Context7's curated database.\n\n**Note:** This is the official plugin from @claude-plugins-official, maintained by Upstash.\n\n#### Optional: Configure package runner (bunx recommended)\n\nBy default, context7 uses `npx` (Node.js package runner). This script configures bunx (recommended) or npx:\n\n**macOS, Linux, WSL, Git Bash:**\n\n```bash\n# Configure context7 to use bunx (recommended) or npx\nconfig_file=\"$HOME/.claude/plugins/marketplaces/claude-plugins-official/external_plugins/context7/.mcp.json\"\n\nif [ ! -f \"$config_file\" ]; then\n  echo \"‚ö†Ô∏è context7 config not found. Install context7 first:\"\n  echo \"   claude plugin install --scope user context7@claude-plugins-official\"\n  exit 1\nfi\n\nif command -v bunx &> /dev/null; then\n  # Use bunx (recommended: ~50-100ms faster than npx)\n  jq '.context7.command = \"bunx\" | .context7.args = [\"@upstash/context7-mcp\"]' \"$config_file\" > /tmp/mcp.json && mv /tmp/mcp.json \"$config_file\"\n  echo \"‚úÖ Configured context7 to use bunx (fastest)\"\nelif command -v npx &> /dev/null; then\n  # Use npx (fallback Node.js runner)\n  jq '.context7.command = \"npx\" | .context7.args = [\"-y\", \"@upstash/context7-mcp\"]' \"$config_file\" > /tmp/mcp.json && mv /tmp/mcp.json \"$config_file\"\n  echo \"‚úÖ Configured context7 to use npx (fallback)\"\nelse\n  echo \"‚ùå Neither bunx nor npx found. Install one of:\"\n  echo \"   - Bun (recommended): curl -fsSL https://bun.sh/install | bash\"\n  echo \"   - Node.js: see https://nodejs.org/\"\n  exit 1\nfi\n\n# Clear plugin cache to apply changes immediately\nrm -rf \"$HOME/.claude/plugins/cache\"\necho \"‚úÖ Plugin cache cleared - changes will take effect on next Claude Code start\"\n```\n\n<details>\n<summary>Windows PowerShell</summary>\n\n```powershell\n# Configure context7 to use bunx (recommended) or npx\n$configFile = \"$env:USERPROFILE\\.claude\\plugins\\marketplaces\\claude-plugins-official\\external_plugins\\context7\\.mcp.json\"\n\nif (-not (Test-Path $configFile)) {\n    Write-Host \"‚ö†Ô∏è context7 config not found. Install context7 first:\" -ForegroundColor Yellow\n    Write-Host \"   claude plugin install --scope user context7@claude-plugins-official\"\n    exit 1\n}\n\n$config = Get-Content $configFile -Raw | ConvertFrom-Json\n\nif (Get-Command bunx -ErrorAction SilentlyContinue) {\n    # Use bunx (recommended: ~50-100ms faster than npx)\n    $config.context7.command = \"bunx\"\n    $config.context7.args = @(\"@upstash/context7-mcp\")\n    $config | ConvertTo-Json -Depth 10 | Out-File -Encoding utf8 $configFile\n    Write-Host \"‚úÖ Configured context7 to use bunx (fastest)\" -ForegroundColor Green\n} elseif (Get-Command npx -ErrorAction SilentlyContinue) {\n    # Use npx (fallback Node.js runner)\n    $config.context7.command = \"npx\"\n    $config.context7.args = @(\"-y\", \"@upstash/context7-mcp\")\n    $config | ConvertTo-Json -Depth 10 | Out-File -Encoding utf8 $configFile\n    Write-Host \"‚úÖ Configured context7 to use npx (fallback)\" -ForegroundColor Green\n} else {\n    Write-Host \"‚ùå Neither bunx nor npx found. Install one of:\" -ForegroundColor Red\n    Write-Host \"   - Bun (recommended): https://bun.sh/install\"\n    Write-Host \"   - Node.js: https://nodejs.org/\"\n    exit 1\n}\n\n# Clear plugin cache to apply changes immediately\nRemove-Item -Recurse -Force \"$env:USERPROFILE\\.claude\\plugins\\cache\" -ErrorAction SilentlyContinue\nWrite-Host \"‚úÖ Plugin cache cleared - changes will take effect on next Claude Code start\" -ForegroundColor Green\n```\n\n</details>\n\n---\n\n### üçå nano-banana Plugin - AI Image Generation\n\n```bash\nclaude plugin install --scope user nano-banana@pigfoot-marketplace\n```\n\n**What it does:**\nGenerates and edits images using Google's Gemini or Imagen models with Python scripting powered by uv.\n\n**Recent Improvements (v0.0.8):**\n\n- ‚úÖ **uv compatibility enhancement** - PEP 723 inline metadata for library modules (logo_overlay.py)\n- ‚úÖ **Fixed intermittent failures** - Logo overlay works when Claude creates temporary scripts\n- ‚úÖ **Automatic dependency resolution** - uv correctly installs Pillow even when importing modules\n\n**Previous Improvements (v0.0.7):**\n\n- ‚úÖ **Zero hallucination rate** - Fixed Python script approach eliminates AI code generation errors\n- ‚úÖ **Unified workflow** - Same process for 1-100 images (no more dual paths)\n- ‚úÖ **Cross-platform support** - Windows UTF-8 encoding fix, system temp directory handling\n\n**Benefits:**\n\n- ‚úÖ **Dual API support** - Gemini (quality, slides) or Imagen (multiple images, negative prompts)\n- ‚úÖ **TrendLife brand support** - Automatic logo overlay with precise positioning matching PowerPoint template\n- ‚úÖ **Batch generation** - Generate 5+ slides efficiently in background with progress tracking (since v0.0.4)\n- ‚úÖ **AI image generation** - Create images from text descriptions\n- ‚úÖ **Image editing** - Edit existing images with AI-powered transformations\n- ‚úÖ **Interactive prompting** - Get help crafting effective prompts for better results\n- ‚úÖ **Brand style support** - TrendLife and NotebookLM presentation styles\n- ‚úÖ **Multiple models** - Choose between quality and speed\n- ‚úÖ **Format flexibility** - Output WebP (default), JPEG, or PNG with quality control\n\n**Prerequisites:**\n\n- [uv](https://docs.astral.sh/uv/) installed\n- `GEMINI_API_KEY` (or `GOOGLE_API_KEY`) environment variable set with a valid Gemini API key\n\n**üìñ Complete Documentation:**\nSee [plugins/nano-banana/README.md](./plugins/nano-banana/README.md) for:\n\n- Detailed API selection logic (Gemini vs Imagen)\n- Configuration examples (official API, custom endpoints)\n- Brand style support (Trend Micro, NotebookLM)\n- Slide deck visual styles (Professional, Blackboard, Data Viz, etc.)\n- Complete usage examples\n\n**Quick Configuration:**\n\n| Variable | Default | Description |\n|----------|---------|-------------|\n| `NANO_BANANA_MODEL` | (Claude chooses) | Gemini (`gemini-*-image*`) or Imagen (`imagen-*`) - auto-detects API |\n| `NANO_BANANA_FORMAT` | `webp` | Output format: `webp`, `jpg`, or `png` |\n| `NANO_BANANA_QUALITY` | `90` | Image quality (1-100) for webp/jpg |\n\n**Quick Start:**\n\n```bash\n# Official Google API\nexport GEMINI_API_KEY=\"your-api-key\"\n\n# Generate image\n\"Generate a photorealistic cat wearing sunglasses, beach sunset, 16:9\"\n\n# With brand style\n\"Create a professional infographic about CI/CD, style: trend\"\n\n# Multiple images with Imagen\nexport NANO_BANANA_MODEL=\"imagen-4.0-generate-001\"\n\"Generate 4 variations of running shoes product photos\"\n```\n\n---\n\n### üê≥ secure-container-build Plugin - Secure Container Images\n\n```bash\nclaude plugin install --scope user secure-container-build@pigfoot-marketplace\n```\n\n**What it does:**\nProvides Containerfile templates and best practices for building secure container images.\n\n**Benefits:**\n\n- ‚úÖ **Security-first runtime** - Wolfi distroless images with minimal attack surface and no CVEs\n- ‚úÖ **Non-root containers** - Run as UID 65532 by default\n- ‚úÖ **Multi-stage builds** - Minimal runtime images with only necessary artifacts\n- ‚úÖ **Production & debug variants** - Switch between secure production and debug-friendly images\n- ‚úÖ **Allocator optimization** - mimalloc support for Rust builds\n\n**Supported Stacks:**\n\n- **Python + uv** - Fast, reproducible Python builds\n- **Bun** - All-in-one JavaScript runtime\n- **Node.js + pnpm** - Efficient workspace-friendly builds\n- **Golang** - Static and CGO builds\n- **Rust** - glibc and musl builds with allocator options\n\n**Usage:**\nAsk Claude to create secure Containerfiles for your project.\n\n**Examples:**\n\n- \"Create a secure Containerfile for my Python app\"\n- \"Set up a multi-stage build for my Rust project\"\n- \"Help me optimize my container image size\"\n\n---\n\n### üöÄ github-actions-container-build Plugin - CI/CD Workflows\n\n```bash\nclaude plugin install --scope user github-actions-container-build@pigfoot-marketplace\n```\n\n**What it does:**\nProvides GitHub Actions workflows for building multi-architecture container images.\n\n**Benefits:**\n\n- ‚úÖ **Matrix builds** - Native ARM64 runners for public repos (10-50x faster)\n- ‚úÖ **QEMU fallback** - Free emulation for private repos\n- ‚úÖ **Podman rootless** - Secure, daemonless container builds\n- ‚úÖ **Multi-arch manifests** - Single tag for amd64 and arm64\n- ‚úÖ **Retry logic** - Automatic retries for transient failures\n\n**Usage:**\nAsk Claude to set up CI/CD for your container builds.\n\n**Examples:**\n\n- \"Set up GitHub Actions for multi-arch container builds\"\n- \"I need a workflow to build ARM64 images for my public repo\"\n- \"Create a container build pipeline for my private repository\"\n\n**Demo**\n[![asciicast](https://asciinema.org/a/rda4CuvQuKXcl2DsfsU9Gul3N.svg)](https://asciinema.org/a/rda4CuvQuKXcl2DsfsU9Gul3N)\n\n---\n\n### üìÖ taiwan-calendar Plugin - Taiwan Calendar Queries\n\n```bash\nclaude plugin install --scope user taiwan-calendar@pigfoot-marketplace\n```\n\n**What it does:**\nProvides accurate Taiwan working day and holiday information by querying government APIs in real-time, solving\nClaude's knowledge cutoff issues with Taiwan dates.\n\n**Prerequisites:**\n\n- [uv](https://docs.astral.sh/uv/) installed (no API key required - uses public government data)\n\n**Benefits:**\n\n- ‚úÖ **Accurate dates** - No more getting weekdays wrong or missing Taiwan holidays\n- ‚úÖ **Real-time data** - Queries government open data platform for current calendar\n- ‚úÖ **Working day aware** - Calculate deadlines accounting for holidays and weekends\n- ‚úÖ **Make-up workday support** - Knows about Taiwan's unique Ë£úÁè≠Êó• system\n- ‚úÖ **Multi-year support** - Automatically fetches data across year boundaries\n- ‚úÖ **Smart caching** - 1-hour cache reduces API calls while staying current\n\n**Features:**\n\n- **Today's date** - Current Taiwan date (UTC+8) with weekday and working day status\n- **Date queries** - Check any date for holiday/working day information\n- **Range calculations** - Count working days between dates\n- **Advanced calculations** - Find date N working days from now, next working day, next holiday\n\n**Usage:**\nJust ask Claude about Taiwan dates naturally - the skill triggers automatically.\n\n**Examples:**\n\n- \"‰ªäÂ§©ÊòØÂ∑•‰ΩúÊó•ÂóéÔºü\" ‚Üí \"‰ªäÂ§© 2026-02-04 (ÈÄ±‰∏â) ÊòØÂ∑•‰ΩúÊó•„ÄÇ\"\n- \"2/16 ÊòØÊòüÊúüÂπæÔºü\" ‚Üí \"2026-02-16 (ÈÄ±‰∏Ä) ÊòØÈùûÂ∑•‰ΩúÊó• - Ëæ≤ÊõÜÈô§Â§ï„ÄÇ\"\n- \"5 ÂÄãÂ∑•‰ΩúÊó•ÂæåÊòØÂì™Â§©Ôºü\" ‚Üí \"Âæû‰ªäÂ§©ÁÆóËµ∑ 5 ÂÄãÂ∑•‰ΩúÊó•ÂæåÊòØ 2026-02-11 (ÈÄ±‰∏â)„ÄÇ\"\n- \"ÈÄôÂÄãÊúàÊúâÂπæÂÄãÂ∑•‰ΩúÊó•Ôºü\"\n- \"‰∏ã‰∏ÄÂÄãÈÄ£ÂÅá‰ªÄÈ∫ºÊôÇÂÄôÔºü\"\n\n**Data Sources:**\n\n- Primary: Taiwan government open data (data.gov.tw via CDN)\n- Fallback: New Taipei City open data platform\n- Cache: 1-hour expiry with multi-year accumulation\n\n---\n\n### ü¶∏ superpowers Plugin - Proven Development Workflows\n\n```bash\nclaude plugin install --scope user superpowers@pigfoot-marketplace\n```\n\n> **Note:** This is a third-party plugin originally from [obra/superpowers](https://github.com/obra/superpowers),\n> available in this marketplace for convenient installation\n\n**What it does:**\nProvides a comprehensive library of battle-tested skills that enforce systematic development practices.\n\n**Benefits:**\n\n- ‚úÖ **TDD enforcement** - Test-Driven Development skill ensures you write tests first\n- ‚úÖ **Systematic debugging** - Four-phase framework (investigate ‚Üí analyze ‚Üí test ‚Üí implement) instead of guess-and-fix\n- ‚úÖ **Code review automation** - Built-in review checkpoints before completing major tasks\n- ‚úÖ **Better planning** - Skills for breaking down complex work into manageable tasks\n- ‚úÖ **Verification gates** - \"Evidence before claims\" - forces running tests before saying \"it works\"\n- ‚úÖ **Parallel execution** - Dispatch multiple agents for independent tasks\n- ‚úÖ **Anti-patterns prevention** - Stops common mistakes (testing mocks, skipping tests, etc.)\n\n**Key Skills Included:**\n\n**Testing:**\n\n- `test-driven-development` - Write test first, watch it fail, make it pass\n- `condition-based-waiting` - Replace flaky timeouts with condition polling\n- `testing-anti-patterns` - Prevents testing mock behavior and test-only methods\n\n**Debugging:**\n\n- `systematic-debugging` - Root cause first, then fix (no more guess-and-patch)\n- `root-cause-tracing` - Trace bugs backward through call stack\n- `verification-before-completion` - Must run verification before claiming \"done\"\n- `defense-in-depth` - Validate at every layer to make bugs structurally impossible\n\n**Collaboration:**\n\n- `brainstorming` - Refines rough ideas into solid designs via Socratic method\n- `writing-plans` - Creates detailed implementation plans for engineers\n- `executing-plans` - Executes plans in batches with review checkpoints\n- `requesting-code-review` - Automatic review against requirements\n- `dispatching-parallel-agents` - Handle multiple independent failures concurrently\n\n**Development:**\n\n- `using-git-worktrees` - Isolated workspaces for parallel feature work\n- `finishing-a-development-branch` - Structured options for merge/PR/cleanup\n\n**Usage:**\nSkills activate automatically when relevant, or you can invoke directly.\n\n**Examples:**\n\n```bash\n# Automatic activation\nUser: \"Add user authentication\"\n‚Üí brainstorming skill activates for design refinement\n‚Üí test-driven-development activates during implementation\n‚Üí verification-before-completion activates before claiming done\n\n# Manual invocation\nUser: \"/brainstorm how to architect this feature\"\n```\n\n**Why it matters:**\nWithout superpowers, you might get working code. With superpowers, you get **tested, verified,\nsystematically-designed code** that follows proven patterns.\n\n---\n\n### ‚öôÔ∏è .CLAUDE.md Configuration\n\nOnce configured, Claude will:\n\n- **Verify before act** - When uncertain, Claude checks docs/files first instead of guessing and proceeding\n- Auto-detect your communication language (supports Traditional Chinese, Japanese, etc.)\n- Write all code and documentation in English\n- Follow your project's conventions\n- Apply TDD workflow automatically (when superpowers installed)\n- Use the right tools for your stack\n- Integrate seamlessly with commit and context7 plugins\n\n## Available Plugins\n\n| Plugin | Description | Version |\n|--------|-------------|---------|\n| [commit](./plugins/commit/) | Conventional commits with emoji and GPG signing | 0.0.1 |\n| [confluence](./plugins/confluence/) | Confluence document management with unlimited uploads | 0.1.0 |\n| [nano-banana](./plugins/nano-banana/) | Python scripting and Gemini image generation | 0.0.9 |\n| [taiwan-calendar](./plugins/taiwan-calendar/) | Taiwan working day/holiday calendar queries | 0.0.1 |\n| [secure-container-build](./plugins/secure-container-build/) | Secure container images with Wolfi runtime | 0.0.1 |\n| [github-actions-container-build](./plugins/github-actions-container-build/) | Multi-arch container builds in GitHub Actions | 0.0.1 |\n\n## Project Structure\n\n```\nclaude-code-hubs/\n‚îú‚îÄ‚îÄ .claude-plugin/\n‚îÇ   ‚îî‚îÄ‚îÄ marketplace.json                        # Marketplace registry\n‚îú‚îÄ‚îÄ plugins/\n‚îÇ   ‚îú‚îÄ‚îÄ commit/                          # Git commit automation plugin\n‚îÇ   ‚îú‚îÄ‚îÄ confluence/                      # Confluence document management plugin\n‚îÇ   ‚îú‚îÄ‚îÄ nano-banana/                     # AI image generation plugin\n‚îÇ   ‚îú‚îÄ‚îÄ secure-container-build/          # Containerfile templates plugin\n‚îÇ   ‚îî‚îÄ‚îÄ github-actions-container-build/  # GitHub Actions CI/CD plugin\n‚îú‚îÄ‚îÄ .CLAUDE.md                                  # Global configuration template\n‚îú‚îÄ‚îÄ .specify/                                   # Spec-kit templates and memory\n‚îî‚îÄ‚îÄ README.md                                   # This file\n```\n\n## Troubleshooting\n\n<details>\n<summary>Click to expand troubleshooting guide</summary>\n\n### Permission Issues\n\nIf Claude asks for permissions repeatedly:\n\n```bash\n# Verify settings were applied\ncat ~/.claude/settings.json | jq '.permissions.allow'\n\n# Re-run the permission configuration script\n```\n\n### Plugin Installation Fails\n\n```bash\n# Check marketplace connection\nclaude plugin marketplace list\n\n# Try removing and re-adding marketplace\nclaude plugin marketplace remove pigfoot-marketplace\nclaude plugin marketplace add pigfoot/claude-code-hubs\n```\n\n### Tools Not Found\n\nEnsure tools are in your PATH:\n\n```bash\n# Check installations\nwhich jq bun uv\n\n# If not found, reinstall following Prerequisites section\n```\n\n</details>\n\n## Advanced Configuration\n\n### Customizing .CLAUDE.md\n\nThe template includes:\n\n- **Language Detection**: Auto-detects your primary language\n- **Git Workflow**: Smart commit patterns with the commit plugin\n- **Testing**: TDD workflow activation\n- **Tool Detection**: Auto-discovers your project's stack\n\nEdit `~/.claude/CLAUDE.md` or `./CLAUDE.md` to customize for your needs.\n\n### Adding More Plugins\n\nBrowse available plugins in `plugins/` directory, then:\n\n```bash\nclaude plugin install --scope user <plugin-name>@pigfoot-marketplace\n```\n\n## Plugin Directory\n\n| Plugin | Origin | Description | Skills Included |\n|--------|--------|-------------|-----------------|\n| [commit](./plugins/commit/) | pigfoot | Conventional commits with emoji and GPG signing | `commit:commit` |\n| [confluence](./plugins/confluence/) | pigfoot | Confluence document management with unlimited uploads | `confluence:confluence` |\n| [nano-banana](./plugins/nano-banana/) | pigfoot | Python scripting and Gemini image generation with dual-mode operation | `nano-banana:nano-banana` |\n| [secure-container-build](./plugins/secure-container-build/) | pigfoot | Secure container images with Wolfi runtime | `secure-container-build:secure-container-build` |\n| [github-actions-container-build](./plugins/github-actions-container-build/) | pigfoot | Multi-arch container builds in GitHub Actions | `github-actions-container-build:github-actions-container-build` |\n| [context7](https://github.com/upstash/context7) | official (@claude-plugins-official) | Library documentation via Context7 MCP | MCP server |\n| [superpowers](https://github.com/obra/superpowers) | 3rd-party (obra) | Proven development workflows (TDD, debugging, review) | 17+ skills (brainstorming, TDD, systematic-debugging, etc.) |\n\n**Installation:**\n\n- pigfoot plugins: `claude plugin install --scope user <name>@pigfoot-marketplace`\n- Official/3rd-party: `claude plugin install --scope user context7@claude-plugins-official` or\n  `claude plugin install --scope user superpowers@pigfoot-marketplace`\n\n## Contributing\n\nContributions are welcome! If you'd like to add a plugin or improve existing ones:\n\n- Read [.specify/memory/constitution.md](./.specify/memory/constitution.md) for project principles\n- Include complete documentation and tests\n- Use semantic versioning\n\n## For Plugin Developers\n\nInterested in creating your own plugins? See our [Developer Guide](./docs/DEVELOPMENT.md) for:\n\n- Plugin structure and standards\n- Skill development best practices\n- Testing and quality requirements\n- Submission process\n\n## License\n\nThis project is licensed under the MIT License - see individual plugin LICENSE files for specific terms.\n\n## Support\n\n- **Issues**: Report bugs or request features via GitHub Issues\n- **Discussions**: Ask questions or share ideas in GitHub Discussions\n- **Documentation**: See [Claude Code docs](https://docs.claude.com/en/docs/claude-code)\n\n## Acknowledgments\n\n- **Maintainer**: Chih-Chia Chen (pigfoot)\n- **Contributors**: See individual plugin author information\n- **Built for**: [Claude Code](https://docs.claude.com/en/docs/claude-code) by Anthropic\n\n## Related Resources\n\n- [Claude Code Documentation](https://docs.claude.com/en/docs/claude-code)\n- [Spec-Kit Templates](./.specify/templates/)\n- [Plugin Development Guide](https://docs.claude.com/en/docs/claude-code/plugins)\n\n---\n\n**Version**: 0.0.1 | **Last Updated**: 2025-11-06\n",
        "plugins/confluence/README.md": "# Confluence Document Manager\n\n> Professional Confluence document management with **intelligent roundtrip editing** (preserves macros while Claude\n> edits), markdown-first workflows, unlimited file sizes, and complete image support\n\n## Design & Research\n\nSee [docs/plans/005-confluence-smart-routing/](../../docs/plans/005-confluence-smart-routing/) for:\n\n- **[design.md](../../docs/plans/005-confluence-smart-routing/design.md)** - Smart routing architecture (MCP ‚Üî REST API)\n- **[research.md](../../docs/plans/005-confluence-smart-routing/research.md)** - Performance testing & technical\n  decisions\n\n## üöÄ Quick Start\n\n### 1. Install Plugin\n\n```bash\nclaude plugin install --scope user confluence@pigfoot-marketplace\n```\n\n### 2. Authenticate with OAuth (One-Time Setup)\n\n**First time only:** After installation, restart Claude Code and run:\n\n```\n/mcp\n```\n\nThis opens an interactive menu:\n\n1. **Select \"atlassian\"** from the list of MCP servers\n2. **Choose \"Authenticate\"**\n3. Browser window opens automatically\n4. Sign in to your Atlassian account\n5. Grant Confluence access permissions\n6. Authentication completes and token is stored securely\n\n**After authentication:** You can directly use Confluence features - no need to run `/mcp` again.\n\n**Note:** If you have multiple MCP servers (e.g., context7, github), `/mcp` shows all of them and you select which one\nto authenticate.\n\n**What you can do with MCP (OAuth):**\n\n- ‚úÖ Search pages with CQL queries\n- ‚úÖ Read page content\n- ‚úÖ Small text updates (<10KB)\n- ‚ùå Large document uploads (use API Token instead)\n- ‚ùå Image attachments (use API Token instead)\n\n### 3. (Optional) Set API Token for Full Features\n\nFor unlimited document sizes, image handling, and batch operations:\n\n```bash\n# Generate API Token at: https://id.atlassian.com/manage-profile/security/api-tokens\n# Then configure (see Installation section for detailed options):\n\nexport CONFLUENCE_URL=\"https://your-company.atlassian.net/wiki\"\nexport CONFLUENCE_USER=\"your-email@company.com\"\nexport CONFLUENCE_API_TOKEN=\"your-token-here\"\n```\n\n### 4. Try It Out\n\n**üß† Intelligent Roundtrip Editing (Recommended):**\n\n```\nEdit Confluence page 123456 to fix typos and improve clarity\n```\n\nClaude will detect macros, ask your preference (safe/advanced mode), create backup, edit intelligently, and preserve all\nmacros!\n\n**üîç Search with CQL:**\n\n```\nSearch Confluence for \"project documentation\"\n```\n\n**üìù Upload Markdown (for large files):**\n\n```bash\nuv run ~/.claude/plugins/.../scripts/upload_confluence.py document.md --id PAGE_ID\n```\n\n## ‚ö†Ô∏è Breaking Changes\n\n### Environment Variable Renamed (v1.0.0+)\n\n**`CONFLUENCE_USERNAME` is no longer supported. Use `CONFLUENCE_USER` instead.**\n\nThis change follows industry naming conventions (`DB_USER`, `MYSQL_USER`, `POSTGRES_USER`).\n\n**Migration:**\n\n```bash\n# Old (deprecated):\nexport CONFLUENCE_USERNAME=\"your-email@company.com\"\n\n# New (required):\nexport CONFLUENCE_USER=\"your-email@company.com\"\n```\n\n**Update your configuration:**\n\n- `.env` files: Rename the variable\n- Shell exports: Update your `~/.bashrc` or `~/.zshrc`\n- CI/CD: Update environment variable settings\n\n## ‚ú® Key Features\n\n### üîÄ Smart Routing (Auto API Selection)\n\n**Automatically selects the optimal API for each operation.** This plugin intelligently switches between MCP and REST\nAPI based on:\n\n- **Available credentials** - Uses REST API when token is configured, falls back to MCP otherwise\n- **Operation type** - Reads vs writes vs Rovo AI search\n- **Performance requirements** - REST API for fast writes (~1s), MCP for zero-config simplicity\n\n**Why this is unique:**\n\n- **25x faster writes** with REST API (~1s vs ~26s via MCP)\n- **Zero-config fallback** to MCP when no token configured\n- **Graceful degradation** - MCP session expires? Silently switches to REST API\n- **Best of both worlds** - Easy OAuth setup + optional performance optimization\n\n**What other tools lack:**\n\n- Official Atlassian MCP: Only MCP (slow writes, 55-min token expiry)\n- Third-party tools: Only REST API (requires manual setup, no OAuth option)\n- This plugin: Combines both with automatic selection\n\n### üîó Short URL Resolution\n\n**Decode Confluence TinyUI short URLs locally.** Supports `/wiki/x/ZQGBfg` format via Base64 decoding:\n\n- **Local processing** - No network calls needed (< 10ms)\n- **Privacy-preserving** - URL decoded on your machine\n- **All formats supported** - Short URLs, full URLs, direct page IDs\n\n### üéØ Smart Search with Quality Detection\n\n**Detects when Rovo search results may be imprecise.** Calculates confidence score and suggests CQL alternative:\n\n- **Confidence scoring** - Based on title matches and result count\n- **Automatic suggestions** - When confidence < 60%, suggests CQL with preview query\n- **Bilingual prompts** - Chinese + English for better UX\n- **Best of both** - Use Rovo for semantic search, CQL for precision\n\n**Example:**\n\n```\n‚ÑπÔ∏è  Search precision may be low (confidence: 35%).\n   Found 60 results, but only 1 title match(es) for 'API documentation'.\n\n   Consider using CQL search for more precise results:\n   title ~ \"API documentation\" OR text ~ \"API documentation\"\n```\n\n### üß† Intelligent Roundtrip Editing (Method 6)\n\n**Edit existing Confluence pages with Claude while preserving macros.** Revolutionary JSON diff/patch approach that:\n\n- **Preserves ALL macros** (expand, status, page properties, etc.) - structure never modified\n- **Claude edits ALL text** - including content inside macro bodies\n- **Safe Mode (default)**: Skip macro bodies, zero risk\n- **Advanced Mode (opt-in)**: Edit macro bodies with interactive confirmation\n- **Automatic backup & rollback**: Every edit is backed up, auto-rollback on failure\n- **User control**: Interactive prompts let you decide risk/benefit trade-offs\n\n**Why this matters:** Other tools force you to choose between losing macros or losing Claude's intelligence. Method 6\ngives you both.\n\n### üìù Markdown-First Workflows\n\nWrite documentation in Markdown locally, publish to Confluence with full formatting preservation. Perfect for teams who\nprefer Git-based workflows and want to maintain a single source of truth.\n\n### üì¶ Unlimited Document Sizes\n\nUpload documents of any size without MCP's 10-20KB limitation. Uses Confluence REST API directly for reliable large file\nhandling.\n\n### üñºÔ∏è Complete Image Support\n\n- Automatic Markdown image conversion (`![alt](path)` ‚Üí Confluence attachments)\n- Mermaid and PlantUML diagram support (convert to PNG/SVG first)\n- Batch attachment uploads with retry logic\n- Preserves image quality and metadata\n\n### ‚¨ÜÔ∏è‚¨áÔ∏è Bidirectional Sync\n\n- **Upload**: Markdown ‚Üí Confluence with full formatting preservation\n- **Download**: Confluence ‚Üí Markdown with attachments and frontmatter\n- Git integration via mark CLI for automated CI/CD publishing\n\n### üîç Advanced Search (CQL)\n\nSearch across spaces, labels, and content using Confluence Query Language. Find pages by date, author, or custom fields\nwith precision.\n\n### ü§ñ CI/CD Ready\n\nIntegrate with GitHub Actions, GitLab CI, or any automation pipeline. Perfect for documentation-as-code workflows.\n\n## üìñ Use Cases\n\n### 1. Content Editor - Intelligent Page Updates\n\n**Pain Point**: Existing Confluence pages have macros (expand panels, status badges, page properties) but need content\nupdates. Manual editing is tedious, and other tools lose macros during conversion.\n\n**Solution**: Edit with Claude using intelligent roundtrip editing:\n\n```python\n# Ask Claude to edit a page\n\"Edit Confluence page 123456 to fix typos and improve clarity\"\n```\n\n**What happens:**\n\n1. üîç Detects macros on the page (expand, status, etc.)\n2. üí¨ Asks if you want to edit macro content (optional)\n3. üíæ Creates automatic backup\n4. ü§ñ Claude edits the content intelligently\n5. ‚úÖ Macros fully preserved, text updated\n6. üîÑ Auto-rollback if anything fails\n\n**Two modes:**\n\n- **Safe Mode** (default): Only edits text outside macros - zero risk\n- **Advanced Mode**: Edits macro bodies with your confirmation + backup\n\n‚úÖ Preserves complex page structures\n‚úÖ Claude's intelligent editing\n‚úÖ Safety through backup/rollback\n‚úÖ Works with any page complexity\n\n---\n\n### 2. Documentation Team - Markdown Workflow\n\n**Pain Point**: Team writes docs in Markdown but needs to publish to Confluence for stakeholders.\n\n**Solution**: Write locally in your favorite editor, sync with one command:\n\n```bash\nuv run scripts/upload_confluence.py docs/api-guide.md --id 123456\n```\n\n‚úÖ Preserves formatting\n‚úÖ Handles diagrams automatically\n‚úÖ Single source of truth\n\n---\n\n### 2. DevOps Team - CI/CD Publishing\n\n**Pain Point**: Manual copy-paste of release notes to Confluence after every deployment.\n\n**Solution**: Automated pipeline publishing:\n\n```yaml\n# .github/workflows/publish-docs.yml\n- name: Publish to Confluence\n  run: |\n    uv run upload_confluence.py CHANGELOG.md --id ${{ secrets.CONFLUENCE_PAGE_ID }}\n```\n\n‚úÖ Zero manual work\n‚úÖ Always up-to-date\n‚úÖ Automated publishing\n\n---\n\n### 3. Product Manager - Rich Content Reports\n\n**Pain Point**: Complex reports with charts and screenshots exceed MCP size limits or require tedious manual image\nuploads.\n\n**Solution**: Embed images in Markdown, upload everything at once:\n\n```markdown\n# Markdown with images\n![Q4 Results](./charts/q4-revenue.png)\n![User Growth](./charts/user-growth.png)\n```\n\n```bash\n# Single command uploads document + all images\nuv run scripts/upload_confluence.py report.md --id 789012\n```\n\n‚úÖ Batch image handling\n‚úÖ No size limits\n‚úÖ Professional formatting\n\n---\n\n### 4. Content Maintainer - Bulk Downloads\n\n**Pain Point**: Need to migrate or backup dozens of Confluence pages to local storage.\n\n**Solution**: Download page hierarchies with one command:\n\n```bash\n# Download page + all children + attachments\nuv run scripts/download_confluence.py --download-children 456789\n```\n\n‚úÖ Preserves page structure\n‚úÖ Includes attachments\n‚úÖ Converts to clean Markdown\n\n## üîß Core Workflows\n\n### Intelligent Roundtrip Editing (Method 6)\n\n**Edit existing pages with Claude while preserving macros:**\n\n```python\n# Natural language editing - Claude understands your intent\n\"Edit Confluence page 123456 to improve the introduction section\"\n\"Fix typos on page 789012\"\n\"Update the API endpoint documentation on page 456789\"\n```\n\n**How it works:**\n\n1. **Detection Phase**\n\n   ```\n   üìñ Reading page 123456...\n   üîç Found 3 macros with editable content:\n      - expand: \"Advanced Configuration\" (127 chars)\n      - panel: \"Important Notes\" (89 chars)\n      - status: \"In Progress\"\n   ```\n\n2. **User Choice** (Interactive Prompt)\n\n   ```\n   ‚öôÔ∏è  Choose editing mode:\n\n   [1] Safe Mode (default)\n       ‚Ä¢ Edit text outside macros\n       ‚Ä¢ Zero risk to macro structure\n       ‚Ä¢ Recommended for most edits\n\n   [2] Advanced Mode\n       ‚Ä¢ Edit macro body content too\n       ‚Ä¢ Automatic backup created\n       ‚Ä¢ Auto-rollback on failure\n\n   Your choice [1]: _\n   ```\n\n3. **Editing & Backup**\n\n   ```\n   üíæ Backup created: .confluence_backups/123456/2026-01-23T10-30-15.json\n   ü§ñ Claude editing...\n   üîÑ Computing diff...\n   üìù Found 5 text changes\n   ‚úÖ Page updated successfully!\n   ```\n\n**Rollback if needed:**\n\n```bash\n# List available backups\nuv run scripts/rollback_confluence.py --list 123456\n\n# Restore from backup\nuv run scripts/rollback_confluence.py --restore 123456 2026-01-23T10-30-15\n```\n\n**When to use each mode:**\n\n| Scenario | Mode | Why |\n|----------|------|-----|\n| Fix typos | Safe | Fast, zero risk |\n| Rewrite sections | Safe | Preserves structure |\n| Edit expand panel content | Advanced | Requires confirmation |\n| Edit info/warning boxes | Advanced | Requires confirmation |\n| Major restructure | Safe first | Test, then Advanced if needed |\n\n**Safety features:**\n\n- ‚úÖ Automatic backup before every edit\n- ‚úÖ Auto-rollback on write failure\n- ‚úÖ Macro structure never modified\n- ‚úÖ Version history preserved\n- ‚úÖ 10 backups kept per page (configurable)\n\n---\n\n### Upload Markdown to Confluence (Markdown-First)\n\n**Update existing page:**\n\n```bash\n# Basic update\nuv run scripts/upload_confluence.py document.md --id 780369923\n\n# Preview before uploading (recommended)\nuv run scripts/upload_confluence.py document.md --id 780369923 --dry-run\n\n# Force re-upload all attachments\nuv run scripts/upload_confluence.py document.md --id 780369923 --force-reupload\n```\n\n**Create new page:**\n\n```bash\n# Create in specific space\nuv run scripts/upload_confluence.py document.md --space DEV --title \"API Guide\"\n\n# Create as child page\nuv run scripts/upload_confluence.py document.md --space DEV --parent-id 123456\n```\n\n**Tips:**\n\n- Images: Use Markdown syntax `![alt](path/to/image.png)` - script handles uploads automatically\n- Mermaid/PlantUML: Convert to PNG/SVG first, then reference as images\n- Frontmatter: Add YAML frontmatter for metadata (title, space, parent-id)\n\n---\n\n### Download Confluence to Markdown\n\n**Single page:**\n\n```bash\n# Download page by ID\nuv run scripts/download_confluence.py 123456789\n\n# Custom output directory\nuv run scripts/download_confluence.py --output-dir ./docs 123456789\n```\n\n**Page hierarchy:**\n\n```bash\n# Download page + all children\nuv run scripts/download_confluence.py --download-children 123456789\n```\n\n**Output:**\n\n- Markdown file with frontmatter (page ID, title, space)\n- Attachments in `{PageTitle}_attachments/` directory\n- Macros converted to Markdown equivalents\n\n---\n\n### Search and Query\n\n**Using MCP (via Claude Code):**\n\n```javascript\n// Search by text\nmcp__atlassian__confluence_search({\n  query: 'text ~ \"API documentation\"',\n  limit: 10\n})\n\n// Advanced CQL query\nmcp__atlassian__confluence_search({\n  query: 'space = \"DEV\" AND type = \"page\" AND created >= startOfYear()',\n  limit: 20\n})\n\n// Get specific page\nmcp__atlassian__confluence_get_page({\n  page_id: \"123456789\"\n})\n```\n\n**CQL Examples:**\n\n- Find recent pages: `space = \"DEV\" AND created >= -7d`\n- Search by label: `label = \"api\" AND space = \"TECH\"`\n- Find by creator: `creator = \"john.doe@company.com\"`\n\nSee [CQL Reference](skills/references/cql_reference.md) for complete syntax.\n\n---\n\n### Convert Markdown ‚Üî Wiki Markup\n\n**Markdown to Wiki:**\n\n```bash\nuv run scripts/convert_markdown_to_wiki.py input.md output.wiki\n```\n\n**Use cases:**\n\n- Generate Wiki Markup for manual paste\n- Debug conversion issues\n- Preview formatting before upload\n\nSee [Wiki Markup Guide](skills/references/wiki_markup_guide.md) for syntax reference.\n\n## üõ†Ô∏è Installation\n\n### Prerequisites\n\n**Required:**\n\n- [uv](https://docs.astral.sh/uv/) - Python package runner (for scripts)\n- [Claude Code](https://code.claude.com/) - CLI with MCP support\n- Atlassian Cloud account with Confluence access\n\n**Optional (for enhanced features):**\n\n- [mark CLI](#optional-mark-cli) - Git-to-Confluence sync\n- [Mermaid CLI](#optional-mermaid-cli) - Diagram rendering\n- PlantUML - UML diagram generation\n\n---\n\n### Step 1: Install the Plugin\n\n```bash\n# Add marketplace (if not already added)\nclaude plugin marketplace add pigfoot/claude-code-hubs\n\n# Install plugin\nclaude plugin install --scope user confluence@pigfoot-marketplace\n```\n\n**What gets configured automatically:**\n\n- ‚úÖ Atlassian Remote MCP Server (official endpoint)\n- ‚úÖ All Python scripts with inline dependencies\n- ‚úÖ Skill definitions and references\n\n---\n\n### Step 2: MCP Server Configuration\n\nThe plugin automatically configures the **Atlassian Remote MCP Server** (official cloud-based endpoint).\n\n**Automatic configuration** (already done by plugin):\n\n```json\n{\n  \"atlassian\": {\n    \"type\": \"http\",\n    \"url\": \"https://mcp.atlassian.com/v1/mcp\"\n  }\n}\n```\n\n**Benefits of Remote MCP Server:**\n\n- ‚úÖ No local installation required (no bunx/npx needed)\n- ‚úÖ Official Atlassian endpoint with OAuth 2.1\n- ‚úÖ Supports Confluence, Jira, and Compass\n- ‚úÖ Always up-to-date with latest features\n\n**First use OAuth flow:**\n\n- On first Confluence operation, Claude Code will prompt OAuth login\n- Browser opens to Atlassian authorization page\n- Grant permissions for Confluence access\n- Session stored securely by Claude Code\n\n**OAuth capabilities (via MCP):**\n\n- ‚úÖ Search pages with CQL\n- ‚úÖ Read page content\n- ‚úÖ Small text-only updates (<10KB)\n\n---\n\n### Step 3: Configure API Token (Recommended)\n\nAPI Token enables full functionality including large file uploads and image handling.\n\n**Additional capabilities:**\n\n- ‚úÖ Upload large documents (>10KB, no limits)\n- ‚úÖ Handle images and attachments\n- ‚úÖ Batch operations\n- ‚úÖ Offline/CI-CD workflows\n\n**Why both OAuth and API Token?**\nMCP uses cloud-based OAuth sessions that local Python scripts cannot access. For full functionality (large uploads,\nimages), you need API Token credentials.\n\n**Setup:**\n\n1. **Generate API Token:**\n   - Visit <https://id.atlassian.com/manage-profile/security/api-tokens>\n   - Click \"Create API token\"\n   - Give it a name (e.g., \"Claude Confluence Plugin\")\n   - Copy the token (save it securely - it won't be shown again)\n\n2. **Set environment variables:**\n\n   **Option A: Claude Code Settings (Recommended)**\n\n   This method makes credentials available to all skills in Claude Code.\n\n   **macOS / Linux / WSL / Git Bash:**\n\n   ```bash\n   # Replace with your actual values\n   CONFLUENCE_URL=\"https://your-company.atlassian.net/wiki\"\n   CONFLUENCE_USER=\"your-email@company.com\"\n   CONFLUENCE_API_TOKEN=\"your-token-here\"\n\n   # Check if jq is installed\n   if ! command -v jq &> /dev/null; then\n       echo \"Error: jq is required but not installed.\"\n       echo \"Install with: brew install jq (Mac) or apt install jq (Linux)\"\n       exit 1\n   fi\n\n   [[ ! -r \"${HOME}/.claude/settings.json\" ]] && mkdir -p \"${HOME}/.claude\" && echo \"{}\" > \"${HOME}/.claude/settings.json\"\n\n   jq \"$(cat <<EOFSETTINGS\n   .env.CONFLUENCE_URL=\"${CONFLUENCE_URL}\"\n     | .env.CONFLUENCE_USER=\"${CONFLUENCE_USER}\"\n     | .env.CONFLUENCE_API_TOKEN=\"${CONFLUENCE_API_TOKEN}\"\n   EOFSETTINGS\n   )\" ${HOME}/.claude/settings.json > /tmp/temp.json && mv -f /tmp/temp.json ${HOME}/.claude/settings.json\n\n   echo \"Configuration updated successfully\"\n   ```\n\n   **Windows PowerShell:**\n\n   ```powershell\n   # Replace with your actual values\n   $CONFLUENCE_URL = \"https://your-company.atlassian.net/wiki\"\n   $CONFLUENCE_USER = \"your-email@company.com\"\n   $CONFLUENCE_API_TOKEN = \"your-token-here\"\n\n   # Settings.json setup\n   $settingsPath = \"$env:USERPROFILE\\.claude\\settings.json\"\n   if (-not (Test-Path $settingsPath)) {\n       New-Item -ItemType Directory -Force -Path \"$env:USERPROFILE\\.claude\" | Out-Null\n       \"{}\" | Out-File -Encoding utf8 $settingsPath\n   }\n\n   $settings = Get-Content $settingsPath -Raw | ConvertFrom-Json\n\n   # Ensure env object exists\n   if (-not $settings.env) {\n       $settings | Add-Member -Type NoteProperty -Name \"env\" -Value (New-Object PSObject) -Force\n   }\n\n   # Add or update environment variables (preserving existing ones)\n   $settings.env | Add-Member -Type NoteProperty -Name \"CONFLUENCE_URL\" -Value $CONFLUENCE_URL -Force\n   $settings.env | Add-Member -Type NoteProperty -Name \"CONFLUENCE_USER\" -Value $CONFLUENCE_USER -Force\n   $settings.env | Add-Member -Type NoteProperty -Name \"CONFLUENCE_API_TOKEN\" -Value $CONFLUENCE_API_TOKEN -Force\n\n   $settings | ConvertTo-Json -Depth 10 | Out-File -Encoding utf8 $settingsPath\n\n   Write-Host \"Configuration updated successfully\" -ForegroundColor Green\n   ```\n\n   **Option B: Shell Environment Variables**\n\n   ```bash\n   # Add to ~/.bashrc, ~/.zshrc, or ~/.profile\n   export CONFLUENCE_URL=\"https://your-company.atlassian.net/wiki\"\n   export CONFLUENCE_USER=\"your-email@company.com\"\n   export CONFLUENCE_API_TOKEN=\"your-token-here\"\n   ```\n\n   **Option C: Project .env file**\n\n   ```bash\n   # Create .env file in your project directory\n   CONFLUENCE_URL=https://your-company.atlassian.net/wiki\n   CONFLUENCE_USER=your-email@company.com\n   CONFLUENCE_API_TOKEN=your-token-here\n   ```\n\n3. **Verify configuration:**\n\n   ```bash\n   # Test with a dry-run\n   uv run scripts/upload_confluence.py document.md --id PAGE_ID --dry-run\n   ```\n\n---\n\n### Optional: mark CLI\n\n**What it provides:**\nGit-to-Confluence automatic synchronization for CI/CD workflows.\n\n**Installation:**\n\n**macOS:**\n\n```bash\nbrew install kovetskiy/mark/mark\n```\n\n**Linux:**\n\n```bash\n# Download from GitHub releases\ncurl -LO https://github.com/kovetskiy/mark/releases/latest/download/mark-linux-amd64\nchmod +x mark-linux-amd64\nsudo mv mark-linux-amd64 /usr/local/bin/mark\n```\n\n**Windows:**\n\n```powershell\n# Download from GitHub releases\n# Visit: https://github.com/kovetskiy/mark/releases\n# Download mark-windows-amd64.exe\n# Add to PATH manually\n```\n\n**Note:** mark CLI is not available in winget. Manual installation required.\n\n**Without mark CLI:**\nYou can still use all upload/download/convert scripts. You'll just need to run uploads manually instead of automated\nGit-based sync.\n\n---\n\n### Optional: Mermaid CLI\n\n**What it provides:**\nConverts Mermaid diagrams to PNG/SVG for Confluence upload.\n\n**Installation:**\n\n**macOS:**\n\n```bash\nbrew install mermaid-cli\n```\n\n**Linux:**\n\n```bash\n# Using npm\nnpm install -g @mermaid-js/mermaid-cli\n\n# Or using bun\nbun install -g @mermaid-js/mermaid-cli\n\n# Or using snap\nsudo snap install mermaid-cli\n```\n\n**Windows:**\n\n```powershell\n# Using npm\nnpm install -g @mermaid-js/mermaid-cli\n\n# Or using bun\nbun install -g @mermaid-js/mermaid-cli\n\n# Or using Scoop\nscoop install mermaid-cli\n```\n\n**Usage:**\n\n```bash\n# Convert Mermaid to PNG\nmmdc -i diagram.mmd -o diagram.png -b transparent\n```\n\n**Without Mermaid CLI:**\nYou can still upload documents with images. You just need to convert Mermaid diagrams manually (e.g., using online\ntools) before uploading.\n\n---\n\n### Optional: PlantUML\n\n**What it provides:**\nConverts PlantUML diagrams to PNG/SVG for Confluence upload.\n\n**Installation:**\n\n**macOS:**\n\n```bash\nbrew install plantuml\n```\n\n**Linux:**\n\n```bash\nsudo apt-get install plantuml\n```\n\n**Windows:**\n\n```powershell\n# Using Scoop\nscoop install plantuml\n\n# Or download JAR file from https://plantuml.com/download\n```\n\n**Usage:**\n\n```bash\n# Convert PlantUML to PNG\nplantuml diagram.puml -tpng\n```\n\n**Without PlantUML:**\nYou can still upload documents. You just need to convert UML diagrams manually before uploading.\n\n## ü§î FAQ\n\n### When should I use MCP vs Python scripts?\n\n**Use MCP (via Claude Code) for:**\n\n- Quick searches and queries\n- Reading page content\n- Small text-only updates (<10KB)\n- Interactive exploration\n\n**Use Python scripts for:**\n\n- Large documents (>10KB)\n- Documents with images/attachments\n- Batch operations\n- CI/CD pipelines\n- Offline operations\n\n### Why do I need both OAuth and API Token?\n\nMCP's OAuth tokens are cloud-based sessions managed by Atlassian's server. Local Python scripts cannot access these\nsessions. API tokens provide direct REST API access for full functionality.\n\n### Can I use this without Git?\n\nYes! All core features (upload, download, convert, search) work without Git. Git integration via mark CLI is optional\nfor automated synchronization workflows.\n\n### Does this work with Confluence Server (on-premise)?\n\nThis plugin is designed for **Atlassian Cloud** only. Confluence Server uses different APIs and authentication methods.\n\n### How do I find my page ID?\n\n**Method 1 - From URL:**\n\n- Open page in browser\n- Look at URL: `https://yourcompany.atlassian.net/wiki/spaces/DEV/pages/123456789/Page+Title`\n- Page ID is `123456789`\n\n**Method 2 - Via search:**\n\n```javascript\nmcp__atlassian__confluence_search({\n  query: 'title ~ \"Your Page Title\"'\n})\n```\n\n### What happens to existing images when I re-upload?\n\nBy default, existing attachments are skipped to save bandwidth. Use `--force-reupload` to replace all images.\n\n## üêõ Troubleshooting\n\n### \"Missing environment variables\"\n\n**Cause:** API token credentials not configured.\n\n**Fix:**\n\n```bash\n# Verify variables are set\necho $CONFLUENCE_URL\necho $CONFLUENCE_USER\necho $CONFLUENCE_API_TOKEN\n\n# Or check .env file exists\ncat .env\n```\n\n### \"Content too large\" / MCP upload fails\n\n**Cause:** Using MCP for large documents (>10-20KB).\n\n**Fix:** Use upload script instead:\n\n```bash\nuv run scripts/upload_confluence.py document.md --id PAGE_ID\n```\n\n### \"Authentication failed\" for scripts\n\n**Cause:** Invalid API token or credentials.\n\n**Fix:**\n\n1. Generate new API token: <https://id.atlassian.com/manage-profile/security/api-tokens>\n2. Verify `CONFLUENCE_USER` matches your Atlassian account email\n3. Check `CONFLUENCE_URL` format: `https://yourcompany.atlassian.net/wiki` (no trailing slash)\n\n### OAuth prompt appears repeatedly\n\n**Cause:** MCP server not properly configured or session expired.\n\n**Fix:**\n\n1. Restart Claude Code\n2. Verify `.mcp.json` exists in plugin directory\n3. Complete OAuth flow in browser when prompted\n4. Check Atlassian permissions at <https://id.atlassian.com/manage-profile/apps>\n\n### Images not uploading\n\n**Cause:** Image paths incorrect or files don't exist.\n\n**Fix:**\n\n1. Use relative paths from markdown file location\n2. Verify image files exist:\n\n   ```bash\n   ls -la path/to/image.png\n   ```\n\n3. Use `--dry-run` to preview before upload:\n\n   ```bash\n   uv run scripts/upload_confluence.py doc.md --id PAGE_ID --dry-run\n   ```\n\n### Mermaid/PlantUML diagrams not showing\n\n**Cause:** Diagrams not converted to images.\n\n**Fix:**\n\n```bash\n# Convert Mermaid to PNG first\nmmdc -i diagram.mmd -o diagram.png -b transparent\n\n# Then reference in Markdown\n# ![Architecture](./diagram.png)\n\n# Then upload\nuv run scripts/upload_confluence.py document.md --id PAGE_ID\n```\n\n## üìö Reference Documentation\n\n- **[CQL Reference](skills/references/cql_reference.md)** - Complete Confluence Query Language syntax and examples\n- **[Wiki Markup Guide](skills/references/wiki_markup_guide.md)** - Confluence Wiki Markup syntax reference\n- **[Troubleshooting Guide](skills/references/troubleshooting.md)** - Detailed error messages and solutions\n\n## üîó External Resources\n\n- [Atlassian Remote MCP\n  Server](https://support.atlassian.com/atlassian-rovo-mcp-server/docs/getting-started-with-the-atlassian-remote-mcp-server/)\n  - Official documentation\n- [Atlassian MCP Server GitHub](https://github.com/atlassian/atlassian-mcp-server) - Remote MCP Server source code\n- [Confluence REST API](https://developer.atlassian.com/cloud/confluence/rest/v2/intro/) - API documentation\n- [mark CLI](https://github.com/kovetskiy/mark) - Git-to-Confluence sync tool\n- [Mermaid Documentation](https://mermaid.js.org/) - Diagram syntax and examples\n\n## üìÑ License\n\nMIT License - See [LICENSE](LICENSE) file for details.\n\n## ü§ù Contributing\n\nContributions welcome! Please see the main [repository](https://github.com/pigfoot/claude-code-hubs) for guidelines.\n\n## üë®‚Äçüíª For Developers\n\nIf you're developing skills or contributing to this plugin, see **[DEVELOPMENT.md](DEVELOPMENT.md)** for:\n\n- Technical decisions and architecture\n- Markdown conversion engine details (mistune 3.x vs md2cf)\n- Output compatibility analysis\n- Testing and validation procedures\n\n---\n\n**Version**: 0.1.0 | **Author**: pigfoot | **Marketplace**: pigfoot-marketplace\n",
        "plugins/secure-container-build/README.md": "# secure-container-build\n\nBuild secure container images with Wolfi runtime, non-root users, and multi-stage builds.\n\n## Features\n\n- **Security-first runtime**: Wolfi distroless images with minimal attack surface and no CVEs\n- **Non-root containers**: Run as UID 65532 by default\n- **Multi-stage builds**: Minimal runtime images with only necessary artifacts\n- **Production & debug variants**: Switch between secure production and debug-friendly images\n- **Allocator optimization**: mimalloc support for Rust builds\n\n## Supported Stacks\n\n| Stack | Containerfile | Runtime Image |\n|-------|--------------|---------------|\n| Python + uv | `Containerfile.python-uv` | glibc-dynamic |\n| Bun | `Containerfile.bun` | glibc-dynamic |\n| Node.js + pnpm | `Containerfile.nodejs` | glibc-dynamic |\n| Golang (static) | `Containerfile.golang` | static |\n| Golang (CGO) | `Containerfile.golang-cgo` | glibc-dynamic |\n| Rust (glibc) | `Containerfile.rust` | glibc-dynamic |\n| Rust (musl) | `Containerfile.rust-musl` | static |\n\n## Quick Start\n\n```bash\n# Install the plugin\n/plugin install secure-container-build@pigfoot\n\n# Copy template for your stack\ncp assets/Containerfile.python-uv ./Containerfile\n\n# Build production image\npodman build -t myapp:latest .\n\n# Build debug image (with shell)\npodman build --build-arg RUNTIME_TAG=latest-dev -t myapp:debug .\n```\n\n## Usage\n\nAsk Claude to set up secure container builds for your project:\n\n- \"Create a secure Containerfile for my Python app\"\n- \"Set up a multi-stage build for my Rust project\"\n- \"Help me optimize my container image size\"\n\n## Related\n\nFor CI/CD automation with GitHub Actions, see the **github-actions-container-build** plugin.\n\n## Version\n\n0.0.1\n",
        "plugins/github-actions-container-build/README.md": "# github-actions-container-build\n\nBuild multi-architecture container images in GitHub Actions using Podman and native ARM64 runners.\n\n## Features\n\n- **Matrix builds**: Native ARM64 runners for public repos (10-50x faster than QEMU)\n- **QEMU fallback**: Free emulation for private repos on GitHub Free tier\n- **Podman rootless**: Secure, daemonless container builds\n- **Multi-arch manifests**: Single tag for amd64 and arm64\n- **Retry logic**: Automatic retries for transient failures\n\n## Workflow Options\n\n| Workflow | Use Case | Speed |\n|----------|----------|-------|\n| `github-actions-workflow-matrix-build.yml` | Public repos | Fast (native) |\n| `github-actions-workflow-qemu.yml` | Private repos (free tier) | Slow (emulated) |\n\n## Quick Start\n\n```bash\n# Install the plugin\n/plugin install github-actions-container-build@pigfoot\n\n# For public repos (native ARM64)\ncp assets/github-actions-workflow-matrix-build.yml .github/workflows/build.yml\n\n# For private repos (QEMU)\ncp assets/github-actions-workflow-qemu.yml .github/workflows/build.yml\n```\n\n## Usage\n\nAsk Claude to set up CI/CD for your container builds:\n\n- \"Set up GitHub Actions for multi-arch container builds\"\n- \"I need a workflow to build ARM64 images for my public repo\"\n- \"Create a container build pipeline for my private repository\"\n\n## Related\n\nFor Containerfile templates and security best practices, see the **secure-container-build** plugin.\n\n## Version\n\n0.0.1\n",
        "plugins/nano-banana/README.md": "# Nano Banana Plugin\n\nPython scripting and Gemini/Imagen image generation using uv with inline script dependencies.\n\n## ‚ú® Recent Improvements (v0.0.9)\n\n### Reproducible Generation & Parameter Control\n\n- ‚úÖ **Seed parameter** - Reproducible image generation with automatic seed tracking\n  - Auto-generate timestamp-based seeds (recorded in results JSON)\n  - Manual seed specification for exact reproduction\n  - Per-slide or global seed configuration\n- ‚úÖ **Temperature parameter** - Experimental control over generation randomness (0.0-2.0)\n  - Per-slide or global temperature configuration\n  - Range validation and priority handling\n- ‚úÖ **Results tracking** - `generation-results.json` records actual seed and temperature used\n- ‚úÖ **Comprehensive testing** - 28+ test images validating seed reproducibility\n- ‚úÖ **Documentation** - Complete usage examples, natural language parsing guide, experiment results\n\n#### Key Findings\n\n- Seed: ‚úÖ Highly effective - same seed produces visually identical images\n- Temperature: ‚ö†Ô∏è Limited effect - changes output but unpredictable (recommend keeping default 1.0)\n\n## Previous Improvements (v0.0.8)\n\n### uv Compatibility Enhancement\n\n- ‚úÖ **PEP 723 for library modules** - Added inline dependency metadata to `logo_overlay.py`\n- ‚úÖ **Fixed intermittent failures** - Logo overlay now works when Claude creates temporary scripts\n- ‚úÖ **Documentation updates** - Added PEP 723 headers to all usage examples\n- ‚úÖ **Automatic dependency resolution** - `uv run` correctly installs Pillow even when importing logo_overlay\n\n#### Previous Improvements (v0.0.7)\n\n- ‚úÖ **Zero hallucination rate** - Fixed Python script approach replaces dynamic code generation\n- ‚úÖ **Unified workflow** - Same process for 1-100 images (no more dual paths)\n- ‚úÖ **Minimal config** - Only `slides` + `output_dir` required, no model field\n- ‚úÖ **Cross-platform** - Windows UTF-8 encoding fix, system temp directory handling\n- ‚úÖ **Enhanced documentation** - NNN-short-name format enforcement, webp format guide\n- ‚úÖ **Path resolution** - Execute script with absolute path while maintaining user's cwd\n\n#### Previous Improvements (v0.0.6)\n\n- ‚úÖ **TrendLife Brand Support** - Automatic logo overlay, brand colors\n- ‚úÖ **API documentation fixes** - Added missing `image_config` to basic examples\n\n#### Previous Improvements (v0.0.4)\n\n- ‚úÖ **Batch generation** - Generate 5+ slides in background with 80% context reduction\n- ‚úÖ Fixed API confusion between Gemini and Imagen (automatic detection)\n- ‚úÖ Added Imagen support for multi-image generation\n- ‚úÖ Respect `NANO_BANANA_MODEL` environment variable (no more overrides)\n- ‚úÖ Reduced token consumption by 51% (795 ‚Üí 387 lines in SKILL.md)\n\n## Features\n\n- **Unified Generation Workflow**: All image counts (1-100) use same fixed Python script with JSON config\n- **Zero Hallucination**: Fixed script eliminates AI code generation errors (60% ‚Üí 100% success rate)\n- **Dual API Support**: Generate images using Gemini OR Imagen models (automatic detection)\n- **Image Generation**: Gemini (quality, slides) or Imagen (multiple images, negative prompts)\n- **Interactive Prompting**: Get help crafting effective prompts with best practices\n- **Brand Style Support**: TrendLife (`style: \"trendlife\"`) with automatic logo overlay and NotebookLM styles\n- **Cross-Platform**: Works on Windows, Linux, and macOS with proper encoding and path handling\n- **Minimal Config**: Only `slides` + `output_dir` required, model via environment variable\n\n## Prerequisites\n\n- [uv](https://docs.astral.sh/uv/) installed\n- `GEMINI_API_KEY` (or `GOOGLE_API_KEY`) environment variable set with a valid Gemini API key\n\n## Quick Setup\n\n### Option A: Claude Code Settings (Recommended)\n\nConfigure environment variables in `~/.claude/settings.json` so they're available to all skills.\n\n#### macOS / Linux / WSL / Git Bash\n\n```bash\n# Replace with your actual API key\nGEMINI_API_KEY=\"your-api-key-here\"\n\n# Check if jq is installed\nif ! command -v jq &> /dev/null; then\n    echo \"Error: jq is required but not installed.\"\n    echo \"Install with: brew install jq (Mac) or apt install jq (Linux)\"\n    exit 1\nfi\n\n[[ ! -r \"${HOME}/.claude/settings.json\" ]] && mkdir -p \"${HOME}/.claude\" && echo \"{}\" > \"${HOME}/.claude/settings.json\"\n\njq \"$(cat <<EOFSETTINGS\n.env.GEMINI_API_KEY=\"${GEMINI_API_KEY}\"\nEOFSETTINGS\n)\" ${HOME}/.claude/settings.json > /tmp/temp.json && mv -f /tmp/temp.json ${HOME}/.claude/settings.json\n\necho \"Configuration updated successfully\"\n```\n\n#### Windows PowerShell\n\n```powershell\n# Replace with your actual API key\n$GEMINI_API_KEY = \"your-api-key-here\"\n\n# Settings.json setup\n$settingsPath = \"$env:USERPROFILE\\.claude\\settings.json\"\nif (-not (Test-Path $settingsPath)) {\n    New-Item -ItemType Directory -Force -Path \"$env:USERPROFILE\\.claude\" | Out-Null\n    \"{}\" | Out-File -Encoding utf8 $settingsPath\n}\n\n$settings = Get-Content $settingsPath -Raw | ConvertFrom-Json\n\n# Ensure env object exists\nif (-not $settings.env) {\n    $settings | Add-Member -Type NoteProperty -Name \"env\" -Value (New-Object PSObject) -Force\n}\n\n# Add or update environment variables (preserving existing ones)\n$settings.env | Add-Member -Type NoteProperty -Name \"GEMINI_API_KEY\" -Value $GEMINI_API_KEY -Force\n\n$settings | ConvertTo-Json -Depth 10 | Out-File -Encoding utf8 $settingsPath\n\nWrite-Host \"Configuration updated successfully\" -ForegroundColor Green\n```\n\n#### Verify installation\n\n```bash\n# macOS / Linux\ncat ~/.claude/settings.json\n\n# Windows PowerShell\nGet-Content (Join-Path $env:USERPROFILE \".claude\\settings.json\")\n```\n\n### Option B: Shell Environment Variables\n\n```bash\n# Add to ~/.bashrc, ~/.zshrc, or ~/.profile\nexport GEMINI_API_KEY=\"your-api-key-here\"\n```\n\n### Option C: Project .env file\n\n```bash\n# Create .env file in your project directory\nGEMINI_API_KEY=your-api-key-here\n```\n\n## Configuration\n\nCustomize plugin behavior using environment variables:\n\n| Variable | Default | Description |\n|----------|---------|-------------|\n| `NANO_BANANA_MODEL` | (Claude chooses) | **Specify model name** - determines API automatically:<br>‚Ä¢ Contains `\"imagen\"` ‚Üí Imagen API<br>‚Ä¢ Otherwise ‚Üí Gemini API<br>**IMPORTANT:** Used exactly as-is, no modifications |\n| `NANO_BANANA_FORMAT` | `webp` | Output image format: `webp`, `jpg`, or `png` |\n| `NANO_BANANA_QUALITY` | `90` | Image quality (1-100) for webp/jpg formats |\n| `GOOGLE_GEMINI_BASE_URL` | (official API) | Custom API endpoint (for non-official deployments) |\n| `GEMINI_API_KEY` | (falls back to `GOOGLE_API_KEY`) | API key (official or custom endpoint) |\n\n### API Selection Logic\n\nThe plugin automatically selects the correct API based on the model name:\n\n```python\n# Automatic detection\nif \"imagen\" in model.lower():\n    use_imagen_api = True   # ‚Üí generate_images()\nelse:\n    use_gemini_api = True   # ‚Üí generate_content()\n```\n\n#### Supported Models\n\n- **Gemini**: `gemini-3-pro-image-preview`, `gemini-2.5-flash-image`, or custom names\n- **Imagen**: `imagen-4.0-generate-001`, or custom names containing \"imagen\"\n\n#### ‚ö†Ô∏è Custom Endpoints\n\n- Model names from custom endpoints are used **exactly as-is**\n- Do NOT add `-preview` or other suffixes\n- Example: If your endpoint uses `gemini-3-pro-image` (no `-preview`), set it exactly like that\n\n### Examples\n\n#### Complete configuration (all variables)\n\n```bash\n# Required\nexport GEMINI_API_KEY=\"your-api-key\"                    # Or GOOGLE_API_KEY\n\n# Optional customization\nexport NANO_BANANA_MODEL=\"gemini-3-pro-image-preview\"  # Override model choice\nexport NANO_BANANA_FORMAT=\"webp\"                        # Output format (webp/jpg/png)\nexport NANO_BANANA_QUALITY=\"95\"                         # Quality 1-100 (webp/jpg)\n\n# For custom endpoints (self-hosted/proxy)\nexport GOOGLE_GEMINI_BASE_URL=\"https://api.example.com/v1\"\n```\n\n#### Official Google API (default)\n\n```bash\nexport GEMINI_API_KEY=\"your-api-key\"  # Or GOOGLE_API_KEY (backward compatible)\n# Model: Claude chooses Pro (default) or Flash (budget/fast) automatically\n# Optional: force specific model or format\n# export NANO_BANANA_MODEL=\"gemini-2.5-flash-image\"\n# export NANO_BANANA_FORMAT=\"jpg\"\n```\n\n#### Custom Endpoint (self-hosted or proxy)\n\n```bash\nexport GOOGLE_GEMINI_BASE_URL=\"https://your-api.example.com/v1\"\nexport GEMINI_API_KEY=\"your-custom-api-key\"\nexport NANO_BANANA_MODEL=\"gemini-3-pro-image\"\nexport NANO_BANANA_FORMAT=\"webp\"\nexport NANO_BANANA_QUALITY=\"90\"\n```\n\n#### High-quality PNG for professional work\n\n```bash\nexport NANO_BANANA_FORMAT=\"png\"\n```\n\n#### Why WebP default\n\n- Smaller file sizes (~30% smaller than JPEG at same quality)\n- Better compression than PNG for photos\n- Supports transparency (unlike JPEG)\n- Widely supported in modern browsers and tools\n\n**Note:** When using `NANO_BANANA_MODEL` with a custom model name, you typically need to set `GOOGLE_GEMINI_BASE_URL`\nand `GEMINI_API_KEY` to match your custom deployment.\n\n## Usage\n\nThe plugin operates in two modes automatically based on your request:\n\n### Direct Generation Mode\n\nUsed when you provide a detailed prompt or inline style specification. Claude generates immediately.\n\n#### Example 1: Detailed Prompt\n\n```\nUser: \"Generate a photorealistic image of a cute cat wearing sunglasses, sitting on a beach chair at sunset, golden hour lighting, 16:9 aspect ratio\"\n\nClaude: [Generates directly using gemini-3-pro-image-preview]\nOutput: 001-beach-cat/generated.webp\n```\n\n#### Example 2: With Brand Style (structured syntax)\n\n```\nUser: \"Generate a cybersecurity dashboard infographic, style: trend\"\n\nClaude: [Detects style:trend, applies Trend Micro brand colors, generates directly]\nOutput: 001-security-dashboard/generated.webp\n# Colors: Trend Red #d71920, Guardian Red #6f0000, grays, black/white\n```\n\n#### Example 3: With Brand Style (natural language)\n\n```\nUser: \"Use style trend to generate an LLM introduction infographic\"\n\nClaude: [Detects \"style trend\" mention, applies Trend Micro colors, generates]\nOutput: 001-llm-intro/generated.webp\n```\n\n#### Example 4: Image Editing\n\n```\nUser: \"Edit 001-cute-cat/generated.webp and add a party hat\"\n\nClaude: [Loads image, generates with edit prompt]\nOutput: 002-party-hat/edited.webp\n```\n\n#### Example 5: Slide Deck / Presentation (NotebookLM style)\n\n```\nUser: \"Create a slide explaining how transformers work, use notebooklm style\"\n\nClaude: [Detects notebooklm style, uses professional infographic aesthetic with hub-spoke layout]\nOutput: 001-transformer-architecture/generated.webp\n# Clean tech infographic with central attention mechanism, radiating key concepts\n```\n\n### Interactive Prompting Mode\n\nUsed when you request help crafting prompts or provide vague descriptions. Claude guides you through prompt design.\n\n#### Example 6: Explicit Prompting Request\n\n```\nUser: \"Help me write a good prompt for a professional poster\"\n\nClaude:\n  Step 1: Checking for style specifications... none found\n  Step 2: Let me ask a few questions to craft the best prompt:\n\n  Question 1: What type of image?\n  - [ ] Photo/realistic\n  - [x] Illustration/artistic\n  - [ ] Infographic/educational\n  - [ ] Product shot\n\n  Question 2: What's the main subject?\n  - [x] Concept/abstract\n  - [ ] Person\n  - [ ] Object/product\n\n  Step 3: Based on your needs, I recommend Physical Object Framing technique\n  Step 4: Generated prompt: \"Magazine cover featuring [...]\"\n  Step 5: Here's your prompt, ready to use!\n  Step 6: [Generates with crafted prompt]\n```\n\n#### Example 7: Vague Prompt (triggers prompting)\n\n```\nUser: \"Make a logo\"\n\nClaude:\n  Your request is quite brief. Let me help you design a better prompt.\n\n  Question 1: What type of logo?\n  - Minimalist/geometric\n  - Vintage/retro\n  - Modern/gradient\n  - Corporate/professional\n\n  [Continues with prompting workflow...]\n```\n\n### Style Support\n\n#### Brand Styles\n\n**Specify with:** `style: \"stylename\"` or natural language\n\n| Style | Syntax | Colors | Use Case |\n|-------|--------|--------|----------|\n| **Trend Micro** | `style: \"trend\"` or \"use style trend\" | Trend Red (#d71920), Guardian Red, grays | Corporate presentations, tech slides |\n| **NotebookLM** | `style: \"notebooklm\"` or \"notebooklm style\" | Professional aesthetic (‚ö†Ô∏è no branding) | Clean presentation slides, infographics |\n| **Custom** | `style: \"custom\"` | Your choice | Claude asks for color preferences |\n\n#### Slide Deck Visual Styles\n\n#### Available when creating slides/presentations\n\n| Visual Style | Best For | Characteristics |\n|--------------|----------|-----------------|\n| **Professional** | Business reports, tech presentations | Deep blue background (#003366), clean typography, neon accents |\n| **Blackboard** | Educational content, tutorials | Green/black board, chalk texture, hand-drawn feel |\n| **Data Viz** | Charts, metrics, analytics | High contrast, clean gridlines, pictogram callouts |\n| **Process Flow** | Step-by-step guides, workflows | Numbered steps, connecting arrows, geometric shapes |\n| **Overview** | Concept summaries, topic intros | Bento grid layout, pastel colors, icon-driven |\n\n**Claude automatically chooses the most appropriate visual style** based on your content type. To request a specific\nstyle:\n\n```\n\"Create a professional infographic explaining CI/CD pipelines\"\n\"Make a blackboard-style tutorial slide for sorting algorithms\"\n\"Generate a data viz slide showing Q4 metrics\"\n```\n\n#### Automatic Features for Slide Decks\n\nWhen creating slides/presentations:\n\n- ‚úÖ **Lossless WebP** format (VP8L encoding)\n  - 20-30% smaller than PNG\n  - Zero quality loss\n  - Perfect for text and icons\n- ‚úÖ **16:9 aspect ratio** (default for presentations)\n- ‚úÖ **2K resolution** (optimal for displays)\n\n**Priority:** Inline spec ‚Üí Ask in Interactive Mode ‚Üí No style (Direct Mode default)\n\n## Multi-Slide Generation: Context Window Optimization\n\n### The Problem\n\nWhen generating multiple images (e.g., 10 slides for a presentation), each image's output accumulates in the\nconversation context:\n\n- **Per image output:** ~150-200 tokens (generation logs, paths, status)\n- **10 slides:** 1,500-2,000 tokens consumed\n- **Risk:** Context window fills quickly, reducing available space for conversation\n\n### Solutions Evaluated\n\n#### Option 1: Current Approach (Direct Execution)\n\nExecute Python script 10 times sequentially in the main conversation.\n\n#### Option 1: Token Consumption\n\n- Main context: **1,500-2,000 tokens**\n- API cost: Low (single conversation)\n\n#### Option 1: Pros\n\n- ‚úÖ Simple implementation\n- ‚úÖ Immediate feedback per image\n- ‚úÖ Easy debugging with visible output\n\n#### Option 1: Cons\n\n- ‚ùå Context accumulates quickly\n- ‚ùå Verbose output fills conversation\n\n---\n\n#### Option 2: Subagent Approach\n\nSpawn independent subagent for each slide generation.\n\n#### Option 2: Token Consumption\n\n- Main context: **~1,400 tokens** (Task tool calls + results)\n- Total API cost: **~32,000 tokens** (10 subagents √ó 3,200 tokens each)\n\n#### Cost Breakdown per Subagent\n\n- System prompt: ~1,000 tokens\n- Skill loading (nano-banana): ~1,500 tokens\n- Task understanding + execution: ~500 tokens\n- Output: ~200 tokens\n\n#### Pros\n\n- ‚úÖ Isolated context per image\n- ‚úÖ Parallel execution possible\n- ‚úÖ Cleaner main conversation\n\n#### Cons\n\n- ‚ùå **15x higher API cost** (32,000 vs 2,000 tokens)\n- ‚ùå Slow startup overhead (2-5s per subagent)\n- ‚ùå Complex coordination (error handling, retries, timeouts)\n- ‚ùå Rate limit risks with parallel execution\n- ‚ùå Overkill for simple batch generation\n\n---\n\n#### Option 3: Background Bash + Progress File ‚úÖ (Selected)\n\nRun batch generation in background task, poll progress file periodically.\n\n#### Option 3: Token Consumption\n\n- Main context: **~390 tokens total**\n  - Start background task: ~20 tokens\n  - Poll progress (3 times): ~120 tokens\n  - Read final results: ~250 tokens\n- API cost: Same as current (no additional subagents)\n\n#### Workflow\n\n1. Create slides configuration JSON\n2. Start background task with `Bash(run_in_background=True)`\n3. Python script writes progress to `/tmp/nano-banana-progress.json`\n4. Poll progress file every 10-15 seconds\n5. Read final results from `/tmp/nano-banana-results.json`\n\n#### Option 3: Pros\n\n- ‚úÖ **80% context reduction** (1,800 ‚Üí 390 tokens)\n- ‚úÖ **Zero additional API cost** (same as current)\n- ‚úÖ **Fastest execution** (Python runs at full speed, no subagent overhead)\n- ‚úÖ **Progress tracking** (can show updates to user)\n- ‚úÖ **Low complexity** (simpler than subagent coordination)\n\n#### Option 3: Cons\n\n- ‚ùå Requires polling mechanism\n- ‚ùå Less immediate feedback (progress shown in batches)\n\n### Comparison Table\n\n| Method | Main Context | Total API Cost | Speed | Complexity | Best For |\n|--------|--------------|----------------|-------|------------|----------|\n| **Direct Execution** | 1,800 tokens | Low | Medium | Low | **1-4 images** (auto-selected) |\n| **Subagent** | 1,400 tokens | 32,000 tokens<br>**(+1,500%)** ‚ùå | Medium | High | Each image needs Claude's reasoning |\n| **Background Bash** ‚úÖ | **390 tokens<br>(-80%)** ‚úÖ | **Low (0% increase)** ‚úÖ | **Fast** ‚úÖ | Low-Medium | **5+ images** (auto-selected) |\n\n### Current Implementation (v0.0.5+)\n\nThe skill now automatically uses Background Bash approach for 5+ slides:\n\n```python\n# 1. Create slides configuration\nslides_config = {\n    \"slides\": [\n        {\"number\": 1, \"prompt\": \"CI/CD pipeline overview\", \"style\": \"professional\"},\n        {\"number\": 2, \"prompt\": \"Build stage architecture\", \"style\": \"professional\"},\n        {\"number\": 3, \"prompt\": \"Testing pyramid\", \"style\": \"data-viz\"},\n        # ... up to slide 10\n    ],\n    \"output_dir\": \"/path/to/deck/\",\n    \"format\": \"webp\",\n    \"quality\": 90\n}\n\n# 2. Start background task (MUST use 'uv run')\ntask_id = Bash(\n    command=\"uv run /path/to/generate_batch.py --config /tmp/slides_config.json\",\n    run_in_background=True\n)\n# Output: \"Started background task: task_abc123\"\n\n# 3. Poll progress periodically\nRead(\"/tmp/nano-banana-progress.json\")\n# ‚Üí {\"current\": 3, \"total\": 10, \"status\": \"generating slide 3...\", \"completed\": [\"slide-1.webp\", \"slide-2.webp\"]}\n\n# 4. Read final results when complete\nRead(\"/tmp/nano-banana-results.json\")\n# ‚Üí {\"completed\": 10, \"outputs\": [\"/path/to/deck/slide-1.webp\", ...], \"duration\": \"45s\"}\n```\n\n#### Context in Main Conversation\n\n```\nGenerating 10 slides in background...\nProgress: 3/10 slides completed (30%)\nProgress: 7/10 slides completed (70%)\n‚úì All 10 slides completed in 45s\n  Results: /path/to/deck/\n  Files: slide-1.webp through slide-10.webp\n```\n\n**Total context:** ~390 tokens (vs 1,800 with current approach)\n\n### Decision Rationale\n\n#### Why Background Bash won\n\n1. **Cost Efficiency:** Subagent approach costs 15x more API tokens for the same result\n2. **Performance:** No subagent startup overhead, Python runs at native speed\n3. **Simplicity:** Easier to implement and maintain than subagent coordination\n4. **Context Optimization:** 80% reduction in context usage (critical for long conversations)\n5. **Scalability:** Works equally well for 5 slides or 50 slides\n\n#### When Subagent still makes sense\n\n- Each slide requires Claude's judgment/reasoning (e.g., auto-selecting visual style based on content analysis)\n- Slides are completely independent and benefit from parallel processing\n- User doesn't care about API cost\n\n**Current Status:** Feature planned for future release. Current implementation uses direct execution (best for 1-3\nimages).\n\n## Quick Example\n\n```bash\nuv run - << 'EOF'\n# /// script\n# dependencies = [\"google-genai\", \"pillow\"]\n# ///\nimport os\nimport io\nfrom pathlib import Path\nfrom google import genai\nfrom google.genai import types\nfrom PIL import Image as PILImage\n\nOUTPUT_DIR = Path(\"001-cute-banana\")\nOUTPUT_DIR.mkdir(exist_ok=True)\n\n# Configuration from environment variables\nmodel = os.environ.get(\"NANO_BANANA_MODEL\")\nif not model:\n    # Claude chooses based on user context:\n    # - gemini-3-pro-image-preview: default, high quality (recommended)\n    # - gemini-2.5-flash-image: if user wants budget/fast/simple generation\n    model = \"gemini-3-pro-image-preview\"  # <-- Claude replaces based on user request\n\noutput_format = os.environ.get(\"NANO_BANANA_FORMAT\", \"webp\").lower()\nquality = int(os.environ.get(\"NANO_BANANA_QUALITY\", \"90\"))\n\n# Initialize client with optional custom endpoint\nbase_url = os.environ.get(\"GOOGLE_GEMINI_BASE_URL\")\napi_key = os.environ.get(\"GEMINI_API_KEY\") or os.environ.get(\"GOOGLE_API_KEY\")\n\nif base_url:\n    client = genai.Client(api_key=api_key, http_options={'base_url': base_url})\nelse:\n    client = genai.Client(api_key=api_key)\n\nresponse = client.models.generate_content(\n    model=model,\n    contents=[\"A cute banana character\"],\n    config=types.GenerateContentConfig(\n        response_modalities=['IMAGE']\n    )\n)\n\nfor part in response.parts:\n    if part.inline_data is not None:\n        # Get google-genai Image object\n        genai_image = part.as_image()\n\n        # Convert to PIL Image from bytes\n        pil_image = PILImage.open(io.BytesIO(genai_image.image_bytes))\n\n        # Save with format conversion\n        if output_format in (\"jpg\", \"jpeg\"):\n            output_path = OUTPUT_DIR / \"generated.jpg\"\n            pil_image.convert(\"RGB\").save(output_path, \"JPEG\", quality=quality)\n        elif output_format == \"webp\":\n            output_path = OUTPUT_DIR / \"generated.webp\"\n            pil_image.save(output_path, \"WEBP\", quality=quality)\n        else:  # png\n            output_path = OUTPUT_DIR / \"generated.png\"\n            pil_image.save(output_path, \"PNG\")\n\n        print(f\"Saved: {output_path}\")\nEOF\n```\n\n## Installation\n\n```bash\n/plugin install nano-banana@pigfoot\n```\n",
        "plugins/taiwan-calendar/README.md": "# Taiwan Calendar Plugin\n\nQuery Taiwan government calendar for accurate working day and holiday information.\n\n## Overview\n\nThis plugin solves Claude Code's knowledge cutoff issues with Taiwan dates by querying government open data APIs\nin real-time. Get accurate information about:\n\n- Today's date and working day status\n- Specific date queries (working day/holiday)\n- Working day counts in date ranges\n- N working days calculations\n- Next working day/holiday lookups\n\n## Installation\n\n### From Local Plugin\n\n```bash\n# Install from this directory\nclaude plugin install ./plugins/taiwan-calendar\n```\n\n### From Marketplace (if published)\n\n```bash\nclaude plugin install taiwan-calendar\n```\n\n## Usage\n\nOnce installed, Claude will automatically use this skill when you ask Taiwan calendar-related questions:\n\n```\nYou: \"‰ªäÂ§©ÊòØÂ∑•‰ΩúÊó•ÂóéÔºü\"\nClaude: [Uses taiwan-calendar skill]\n       \"‰ªäÂ§© 2025-01-06 (ÈÄ±‰∏Ä) ÊòØÂ∑•‰ΩúÊó•„ÄÇ\"\n\nYou: \"5 ÂÄãÂ∑•‰ΩúÊó•ÂæåÊòØÂì™Â§©Ôºü\"\nClaude: [Uses taiwan-calendar skill]\n       \"Âæû‰ªäÂ§©ÁÆóËµ∑ 5 ÂÄãÂ∑•‰ΩúÊó•ÂæåÊòØ 2025-01-13 (ÈÄ±‰∏Ä)„ÄÇ\"\n```\n\n## Features\n\n### Basic Queries\n\n- **Today's date**: Current Taiwan date (UTC+8) with weekday and working day status\n- **Date check**: Query any date for holiday/working day information\n- **Flexible input**: Supports YYYY-MM-DD, YYYY/MM/DD, MM/DD formats\n\n### Range Queries\n\n- **Working day count**: Calculate working days between two dates\n- **Holiday listing**: Show holidays in a date range\n\n### Advanced Calculations\n\n- **Add working days**: Find date N working days from today or specific date\n- **Next working day**: Find the next working day\n- **Next holiday**: Find the next national holiday\n\n## Data Source\n\n- **Primary**: Taiwan government open data platform (data.gov.tw)\n- **Fallback**: New Taipei City open data\n- **Cache**: 1-hour local cache for performance\n\n## Commands Reference\n\nAll commands are automatically invoked by Claude. For manual testing:\n\n```bash\n# Today's info\nuv run --managed-python scripts/taiwan_calendar.py today\n\n# Check specific date\nuv run --managed-python scripts/taiwan_calendar.py check 2025-01-01\n\n# Count working days\nuv run --managed-python scripts/taiwan_calendar.py range 2025-01-01 2025-01-31\n\n# N working days later\nuv run --managed-python scripts/taiwan_calendar.py add-days 5\n\n# Next working day\nuv run --managed-python scripts/taiwan_calendar.py next-working\n\n# Next holiday\nuv run --managed-python scripts/taiwan_calendar.py next-holiday\n```\n\n## Requirements\n\n- Python 3.11+ (automatically managed by `uv`)\n- Internet connection (for API queries)\n- Dependencies (automatically installed):\n  - `requests`\n  - `python-dateutil`\n\n## Technical Details\n\n- **Timezone**: Asia/Taipei (UTC+8)\n- **Cache location**: System temp directory (cross-platform)\n- **Cache expiry**: 1 hour\n- **Supported platforms**: macOS, Linux, Windows\n\n## Troubleshooting\n\n### API Unavailable\n\nIf government APIs are down, the plugin will:\n\n1. Try fallback API source\n2. Use expired cache with warning if network unavailable\n3. Show clear error message if all sources fail\n\n### Invalid Date Format\n\nUse supported formats:\n\n- `YYYY-MM-DD` (e.g., 2025-01-06)\n- `YYYY/MM/DD` (e.g., 2025/01/06)\n- `MM/DD` (e.g., 01/06, assumes current year)\n\n## License\n\nMIT\n\n## Author\n\npigfoot <pigfoot@gmail.com>\n\n## Version\n\n0.0.1\n"
      },
      "plugins": [
        {
          "name": "commit",
          "source": "./plugins/commit",
          "description": "Generate conventional commit messages automatically. Use when user runs git commit, stages changes, or asks for commit message help. Analyzes git diff to create clear, descriptive conventional commit messages. Triggers on git commit, staged changes, commit message requests.",
          "version": "0.0.1",
          "author": {
            "name": "pigfoot",
            "email": "pigfoot@gmail.com"
          },
          "categories": [],
          "install_commands": [
            "/plugin marketplace add pigfoot/claude-code-hubs",
            "/plugin install commit@pigfoot-marketplace"
          ]
        },
        {
          "name": "confluence",
          "source": "./plugins/confluence",
          "description": "Professional Confluence document management with unlimited file sizes and complete image support. Upload/download Markdown documents, handle images and diagrams, search with CQL, and integrate with CI/CD pipelines.",
          "version": "0.1.0",
          "author": {
            "name": "pigfoot",
            "email": "pigfoot@gmail.com"
          },
          "categories": [],
          "install_commands": [
            "/plugin marketplace add pigfoot/claude-code-hubs",
            "/plugin install confluence@pigfoot-marketplace"
          ]
        },
        {
          "name": "secure-container-build",
          "source": "./plugins/secure-container-build",
          "description": "Build secure container images with Wolfi runtime, non-root users, and multi-stage builds. Templates for Python/uv, Bun, Node.js/pnpm, Golang (static/CGO), and Rust (glibc/musl) with allocator optimization",
          "version": "0.0.1",
          "author": {
            "name": "pigfoot",
            "email": "pigfoot@gmail.com"
          },
          "categories": [],
          "install_commands": [
            "/plugin marketplace add pigfoot/claude-code-hubs",
            "/plugin install secure-container-build@pigfoot-marketplace"
          ]
        },
        {
          "name": "github-actions-container-build",
          "source": "./plugins/github-actions-container-build",
          "description": "Build multi-architecture container images in GitHub Actions. Matrix builds (public repos with native ARM64), QEMU emulation (private repos), or ARM64 larger runners (Team/Enterprise). Uses Podman rootless builds",
          "version": "0.0.1",
          "author": {
            "name": "pigfoot",
            "email": "pigfoot@gmail.com"
          },
          "categories": [],
          "install_commands": [
            "/plugin marketplace add pigfoot/claude-code-hubs",
            "/plugin install github-actions-container-build@pigfoot-marketplace"
          ]
        },
        {
          "name": "nano-banana",
          "source": "./plugins/nano-banana",
          "description": "Unified image generation workflow with Gemini/Imagen models using fixed Python script approach (eliminates AI hallucinations). Generate 1-100 images with minimal JSON config. Supports TrendLife brand styling, interactive prompt design, and cross-platform operation.",
          "version": "0.0.7",
          "author": {
            "name": "pigfoot",
            "email": "pigfoot@gmail.com"
          },
          "categories": [],
          "install_commands": [
            "/plugin marketplace add pigfoot/claude-code-hubs",
            "/plugin install nano-banana@pigfoot-marketplace"
          ]
        },
        {
          "name": "taiwan-calendar",
          "source": "./plugins/taiwan-calendar",
          "description": "Taiwan calendar skill for accurate working day/holiday information. Queries government API to provide today's date, check specific dates, count working days, and calculate N working days from a date. Solves Claude's knowledge cutoff issues with Taiwan holidays and weekdays.",
          "version": "0.0.1",
          "author": {
            "name": "pigfoot",
            "email": "pigfoot@gmail.com"
          },
          "categories": [],
          "install_commands": [
            "/plugin marketplace add pigfoot/claude-code-hubs",
            "/plugin install taiwan-calendar@pigfoot-marketplace"
          ]
        },
        {
          "name": "superpowers",
          "source": {
            "source": "url",
            "url": "https://github.com/obra/superpowers.git"
          },
          "description": "Core skills library: TDD, debugging, collaboration patterns, and proven techniques",
          "version": "4.1.1",
          "keywords": [
            "skills",
            "tdd",
            "debugging",
            "collaboration",
            "best-practices",
            "workflows"
          ],
          "strict": true,
          "categories": [
            "best-practices",
            "collaboration",
            "debugging",
            "skills",
            "tdd",
            "workflows"
          ],
          "install_commands": [
            "/plugin marketplace add pigfoot/claude-code-hubs",
            "/plugin install superpowers@pigfoot-marketplace"
          ]
        }
      ]
    }
  ]
}