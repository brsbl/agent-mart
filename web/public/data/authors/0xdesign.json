{
  "author": {
    "id": "0xdesign",
    "display_name": "0xdesign",
    "type": "User",
    "avatar_url": "https://avatars.githubusercontent.com/u/161882574?v=4",
    "url": "https://github.com/0xdesign",
    "bio": null,
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 2,
      "total_skills": 1,
      "total_stars": 457,
      "total_forks": 27
    }
  },
  "marketplaces": [
    {
      "name": "design-plugins",
      "version": null,
      "description": "Design exploration plugins for Claude Code",
      "owner_info": {
        "name": "0xdesigner"
      },
      "keywords": [],
      "repo_full_name": "0xdesign/design-plugin",
      "repo_url": "https://github.com/0xdesign/design-plugin",
      "repo_description": null,
      "homepage": null,
      "signals": {
        "stars": 457,
        "forks": 27,
        "pushed_at": "2026-01-24T22:20:34Z",
        "created_at": "2026-01-15T01:46:04Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 406
        },
        {
          "path": "design-and-refine",
          "type": "tree",
          "size": null
        },
        {
          "path": "design-and-refine/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "design-and-refine/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 341
        },
        {
          "path": "design-and-refine/README.md",
          "type": "blob",
          "size": 2013
        },
        {
          "path": "design-and-refine/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "design-and-refine/commands/cleanup.md",
          "type": "blob",
          "size": 1329
        },
        {
          "path": "design-and-refine/commands/start.md",
          "type": "blob",
          "size": 1460
        },
        {
          "path": "design-and-refine/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "design-and-refine/hooks/hooks.json",
          "type": "blob",
          "size": 537
        },
        {
          "path": "design-and-refine/skills",
          "type": "tree",
          "size": null
        },
        {
          "path": "design-and-refine/skills/design-lab",
          "type": "tree",
          "size": null
        },
        {
          "path": "design-and-refine/skills/design-lab/DESIGN_PRINCIPLES.md",
          "type": "blob",
          "size": 54525
        },
        {
          "path": "design-and-refine/skills/design-lab/SKILL.md",
          "type": "blob",
          "size": 30182
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"design-plugins\",\n  \"description\": \"Design exploration plugins for Claude Code\",\n  \"owner\": {\n    \"name\": \"0xdesigner\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"design-and-refine\",\n      \"source\": \"./design-and-refine\",\n      \"description\": \"Generate UI variations, collect feedback, synthesize the best elements, and iterate to confident design decisions\",\n      \"version\": \"1.1.0\"\n    }\n  ]\n}\n",
        "design-and-refine/.claude-plugin/plugin.json": "{\n  \"name\": \"design-and-refine\",\n  \"description\": \"Generate distinct UI design variations, collect feedback, synthesize the best elements, and produce implementation plans\",\n  \"version\": \"1.1.0\",\n  \"author\": {\n    \"name\": \"0xdesigner\"\n  },\n  \"keywords\": [\"design\", \"ui\", \"frontend\", \"prototyping\", \"refine\", \"iterate\"],\n  \"license\": \"MIT\"\n}\n",
        "design-and-refine/README.md": "# Design and Refine\n\nGenerate UI design variations, collect feedback, synthesize the best elements, and iterate to confident design decisions.\n\n## Installation\n\n### Local Testing\n\n```bash\nclaude --plugin-dir /path/to/design-variations-plugin\n```\n\n### From Marketplace\n\n```bash\n/plugin marketplace add 0xdesigner/design-plugin\n/plugin install design-and-refine@design-plugins\n```\n\n## Commands\n\n### `/design-and-refine:start [target]`\n\nStart a design and refine session.\n\n**Arguments:**\n- `target` (optional): Component or page to design/redesign\n\n**Example:**\n```\n/design-and-refine:start CheckoutSummary\n/design-and-refine:start\n```\n\n### `/design-and-refine:cleanup`\n\nRemove all temporary design lab files.\n\n## How It Works\n\n1. **Preflight**: Detects framework, package manager, styling system\n2. **Style Inference**: Reads your existing design tokens and patterns\n3. **Interview**: Asks about requirements, pain points, and direction\n4. **Generate**: Creates 5 distinct variations using your project's visual language\n5. **Review**: Preview variants side-by-side at `/__design_lab`\n6. **Feedback**: Tell me what you like about each variant\n7. **Synthesize**: Creates a refined version combining the best elements\n8. **Iterate**: Repeat until you're confident\n9. **Finalize**: Cleans up temp files, produces `DESIGN_PLAN.md`\n\n## Supported Frameworks\n\n- Next.js (App Router & Pages Router)\n- Vite (React, Vue)\n- Remix\n- Astro\n- Create React App\n\n## Supported Styling\n\n- Tailwind CSS\n- CSS Modules\n- Material UI\n- Chakra UI\n- Ant Design\n- styled-components\n- Emotion\n\n## Files Created\n\n### Temporary (cleaned up on completion or abort)\n- `.claude-design/` - All temporary variants and previews\n- `app/__design_lab/` or `pages/__design_lab.tsx` - Lab route\n- `app/__design_preview/` or `pages/__design_preview.tsx` - Preview route\n\n### Permanent (kept after finalization)\n- `DESIGN_PLAN.md` - Implementation plan for the chosen design\n- `DESIGN_MEMORY.md` - Reusable style decisions for future runs\n\n## License\n\nMIT\n",
        "design-and-refine/commands/cleanup.md": "---\ndescription: Remove all temporary design lab files created during a design-and-refine session\n---\n\n# Cleanup Command\n\nManually clean up all temporary files created during a design-and-refine session.\n\n## Usage\n\n```\n/design-and-refine:cleanup\n```\n\n## What This Does\n\nRemoves all temporary files and directories created during design exploration:\n\n1. **`.claude-design/`** - The main temporary directory containing:\n   - Design lab variants\n   - Preview files\n   - Design brief JSON\n   - Run logs\n\n2. **Temporary routes:**\n   - `app/__design_lab/` (Next.js App Router)\n   - `app/__design_preview/` (Next.js App Router)\n   - `pages/__design_lab.tsx` (Next.js Pages Router)\n   - `pages/__design_preview.tsx` (Next.js Pages Router)\n\n3. **Any App.tsx modifications** (for Vite projects without routers)\n\n## Instructions\n\nWhen this command is invoked:\n\n1. Check if `.claude-design/` directory exists\n2. If it exists, list the contents and ask for confirmation before deleting\n3. Check for temporary route files in common locations\n4. Delete confirmed files\n5. Report what was deleted\n\n**Safety rules:**\n- ONLY delete files inside `.claude-design/`\n- ONLY delete route files that match the plugin's naming pattern (`__design_lab`, `__design_preview`)\n- Always confirm with the user before deleting\n- Never delete user-authored files\n",
        "design-and-refine/commands/start.md": "---\ndescription: Start a design and refine session - generate variations, collect feedback, and iterate to the perfect design\n---\n\n# Start Design & Refine\n\nBegin an interactive design session that generates UI variations, collects your feedback, and iterates until you're confident in the result.\n\n## Usage\n\n```\n/design-and-refine:start [target]\n```\n\n**Arguments:**\n- `target` (optional): The component or page to design/redesign. If not provided, you'll be asked.\n\n## What This Does\n\n1. **Interviews you** about requirements, pain points, and style direction\n2. **Infers visual styles** from your existing codebase\n3. **Generates five distinct variations** in a temporary Design Lab route\n4. **Collects your feedback** on what you like about each\n5. **Synthesizes a refined version** combining the best elements\n6. **Iterates until you're confident** in the final design\n7. **Cleans up** all temporary files and produces an implementation plan\n\n## Instructions\n\nWhen this command is invoked, follow the Design Lab skill workflow exactly. The skill contains:\n- The complete interview script\n- Framework and styling detection logic\n- Visual style inference from the project\n- Variant generation guidelines\n- Feedback collection and synthesis process\n- Cleanup procedures\n\n$ARGUMENTS will contain any target specified by the user.\n\nBegin by running the preflight detection, then start the interview process. Use the AskUserQuestion tool for all interview steps.\n",
        "design-and-refine/hooks/hooks.json": "{\n  \"description\": \"Check for leftover design lab files on session end\",\n  \"hooks\": {\n    \"SessionEnd\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/cleanup-check.sh\",\n            \"timeout\": 10\n          }\n        ]\n      }\n    ],\n    \"Stop\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"${CLAUDE_PLUGIN_ROOT}/scripts/cleanup-check.sh\",\n            \"timeout\": 10\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        "design-and-refine/skills/design-lab/DESIGN_PRINCIPLES.md": "# Design Principles Reference\n\nThis document contains curated best practices from world-class designers and design systems. Reference these principles when generating design variations.\n\n---\n\n## Part 1: UX Foundations\n\n### Jakob Nielsen's 10 Usability Heuristics\n\n1. **Visibility of system status** - Always keep users informed through appropriate feedback within reasonable time\n2. **Match between system and real world** - Use familiar language, concepts, and conventions\n3. **User control and freedom** - Provide clear \"emergency exits\" (undo, cancel, back)\n4. **Consistency and standards** - Follow platform conventions; same words mean same things\n5. **Error prevention** - Eliminate error-prone conditions or ask for confirmation\n6. **Recognition over recall** - Minimize memory load; make options visible\n7. **Flexibility and efficiency** - Provide accelerators for expert users (shortcuts, defaults)\n8. **Aesthetic and minimalist design** - Remove irrelevant information; every element competes\n9. **Help users recover from errors** - Plain language errors with constructive solutions\n10. **Help and documentation** - Provide concise, task-focused help when needed\n\n### Don Norman's Design Principles\n\n- **Affordances** - Design elements should suggest their usage\n- **Signifiers** - Visual cues that indicate where actions should happen\n- **Mapping** - Controls should relate spatially to their effects\n- **Feedback** - Every action needs a perceivable response\n- **Conceptual model** - Users should understand how the system works\n\n### Cognitive Load Principles\n\n- **Limit choices** - 5-7 items max in navigation; 3-4 options in decisions\n- **Progressive disclosure** - Show only what's needed at each step\n- **Chunking** - Group related items; break long forms into steps\n- **Visual hierarchy** - Guide attention with size, color, contrast, position\n- **Reduce cognitive friction** - Minimize decisions, clicks, and reading\n\n### URL & State Principles\n\n- **URL state reflection** - Important UI state (filters, tabs, pagination) should be in the URL\n- **Shareable links** - Users should be able to share/bookmark the current view\n- **Browser navigation** - Back/forward buttons should work as expected\n\n### Destructive Actions\n\n- **Confirmation required** - Delete, remove, and irreversible actions need explicit confirmation\n- **Clear consequences** - State exactly what will happen (\"This will permanently delete 5 files\")\n- **Recovery path** - Prefer soft delete with undo over immediate permanent deletion\n- **Visual distinction** - Destructive buttons use warning colors (red) and distinct styling\n\n---\n\n## Part 2: Visual Design Systems\n\n### Typography (from iA, Stripe, Linear)\n\n**Hierarchy:**\n\n```\nDisplay:    32-48px, -0.02em tracking, 700 weight\nHeading 1:  24-32px, -0.02em tracking, 600 weight\nHeading 2:  20-24px, -0.01em tracking, 600 weight\nHeading 3:  16-18px, normal tracking, 600 weight\nBody:       14-16px, normal tracking, 400 weight\nCaption:    12-13px, +0.01em tracking, 400-500 weight\n```\n\n**Best practices:**\n\n- Max 60-75 characters per line for readability\n- Line height: 1.4-1.6 for body text, 1.2-1.3 for headings\n- Use weight contrast (400 vs 600) more than size contrast\n- Limit to 2 font families maximum\n- System fonts for performance: `-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif`\n\n**Typographic details:**\n\n- Use proper ellipsis `…` not `...` (three dots)\n- Use curly quotes `\"` `\"` not straight quotes `\"`\n- Non-breaking spaces for values: `10 MB`, `5 items` (use `&nbsp;` or `\\u00A0`)\n- `font-variant-numeric: tabular-nums` for numbers in tables, counters, prices\n- `text-wrap: balance` for headings (prevents orphans/widows)\n- `text-wrap: pretty` for body text (better line breaks)\n\n### Spacing System (8px grid)\n\n```\n4px   - Tight: icon padding, inline spacing\n8px   - Base: related elements, form field padding\n12px  - Comfortable: between form fields\n16px  - Standard: section padding, card padding\n24px  - Relaxed: between sections\n32px  - Spacious: major section breaks\n48px  - Generous: page section separation\n64px+ - Hero: landing page sections\n```\n\n**Spacing principles:**\n\n- Related items closer together (Gestalt proximity)\n- Consistent internal padding (all sides equal, or vertical > horizontal)\n- White space is not wasted space—it creates focus\n- Touch targets minimum 44x44px (Apple HIG)\n\n### Color (from Stripe, Linear, Vercel)\n\n**Neutral foundation:**\n\n```\nBackground:     #FFFFFF / #000000 (dark)\nSurface:        #FAFAFA / #111111 (dark)\nBorder:         #E5E5E5 / #333333 (dark)\nText primary:   #171717 / #EDEDED (dark)\nText secondary: #737373 / #A3A3A3 (dark)\nText tertiary:  #A3A3A3 / #737373 (dark)\n```\n\n**Accent usage:**\n\n- Primary action: single brand color, used sparingly\n- Interactive elements: consistent color for all clickable items\n- Semantic colors: red (error), green (success), yellow (warning), blue (info)\n- Hover states: 10% darker or add subtle background\n- Focus states: 2px ring with offset, high contrast\n\n**Color principles:**\n\n- WCAG AA minimum: 4.5:1 for text, 3:1 for UI elements\n- One primary accent color; avoid rainbow interfaces\n- Use opacity for secondary states (hover, disabled)\n- Dark mode: don't just invert—reduce contrast, use darker surfaces\n\n**Dark mode setup:**\n\n```html\n<!-- On <html> element -->\n<html class=\"dark\" style=\"color-scheme: dark\">\n\n<!-- Theme color matching page background -->\n<meta name=\"theme-color\" content=\"#000000\" media=\"(prefers-color-scheme: dark)\">\n<meta name=\"theme-color\" content=\"#ffffff\" media=\"(prefers-color-scheme: light)\">\n```\n\n### Content Handling\n\n**Text truncation:**\n\n```css\n/* Single line truncation */\n.truncate {\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n/* Multi-line truncation */\n.line-clamp-2 {\n  display: -webkit-box;\n  -webkit-box-orient: vertical;\n  -webkit-line-clamp: 2;\n  overflow: hidden;\n}\n\n/* Break long words */\n.break-words {\n  overflow-wrap: break-word;\n  word-break: break-word;\n}\n```\n\n**Flex children with text:**\n\n```css\n/* IMPORTANT: Flex children with text need min-w-0 to truncate properly */\n.flex-child-with-text {\n  min-width: 0; /* Allows text to shrink below content size */\n}\n```\n\n**Empty states:**\n\n- Always design the empty state—it's the first thing users see\n- Include helpful message + primary action\n- Use illustration or icon to add visual interest\n\n**Images:**\n\n```jsx\n// Always include explicit dimensions to prevent layout shift\n<img\n  src=\"/image.jpg\"\n  width={800}\n  height={600}\n  alt=\"Description\"\n  loading=\"lazy\"  // Defer off-screen images\n/>\n\n// For above-the-fold images\n<img src=\"/hero.jpg\" width={1200} height={800} alt=\"Hero\" priority />\n```\n\n### Border Radius (from modern SaaS)\n\n```\nNone (0px):     Tables, dividers, full-bleed images\nSmall (4px):    Buttons, inputs, tags, badges\nMedium (8px):   Cards, modals, dropdowns\nLarge (12px):   Feature cards, hero elements\nFull (9999px): Avatars, pills, toggle tracks\n```\n\n**Principles:**\n\n- Consistency: pick 2-3 radius values and stick to them\n- Nested elements: inner radius = outer radius - padding\n- Sharp corners feel technical/precise; round feels friendly/approachable\n\n### Shadows & Elevation (from Material, Linear)\n\n```\nLevel 0: none (flat, on surface)\nLevel 1: 0 1px 2px rgba(0,0,0,0.05)      - Subtle lift (cards)\nLevel 2: 0 4px 6px rgba(0,0,0,0.07)      - Raised (dropdowns)\nLevel 3: 0 10px 15px rgba(0,0,0,0.1)     - Floating (modals)\nLevel 4: 0 20px 25px rgba(0,0,0,0.15)    - High (popovers)\n```\n\n**Principles:**\n\n- Shadows should feel like natural light (top-down, slight offset)\n- Dark mode: use lighter surface colors instead of shadows\n- Combine with subtle border for definition\n- Interactive elements can elevate on hover\n\n---\n\n## Part 3: Component Patterns\n\n### Buttons (from Stripe, Linear)\n\n**Hierarchy:**\n\n1. **Primary** - One per view, main action, filled with brand color\n2. **Secondary** - Supporting actions, outlined or ghost style\n3. **Tertiary** - Low-emphasis actions, text-only with hover state\n4. **Destructive** - Delete/remove actions, red with confirmation\n\n**States:**\n\n- Default → Hover (+shadow or darken) → Active (scale 0.97) → Disabled (50% opacity)\n- Loading: replace text with spinner, maintain width\n- Min width: 80px; min height: 36px (touch-friendly: 44px)\n\n**Best practices:**\n\n- **Specific labels:** \"Save API Key\" not \"Continue\" or \"Submit\"\n- Verb + noun labels: \"Create project\" not \"Create\"\n- Sentence case, not ALL CAPS\n- Icon left of text (or icon-only with tooltip)\n- Primary button right-aligned in forms/dialogs\n- **Icon buttons require `aria-label`**\n\n**Active state feedback:**\n\n```css\nbutton:active {\n  transform: scale(0.97);\n}\n```\n\n### Forms (from Airbnb, Stripe, Vercel)\n\n**Input anatomy:**\n\n```\n┌─────────────────────────────────┐\n│ Label                           │  ← Required (above input, not inside)\n│ ┌─────────────────────────────┐ │\n│ │ Placeholder...              │ │  ← Format hint only, ends with ...\n│ └─────────────────────────────┘ │\n│ Helper text or error message    │  ← Specific and actionable\n└─────────────────────────────────┘\n```\n\n**Autocomplete attributes (required):**\n\n```html\n<!-- Always use appropriate autocomplete for user data -->\n<input type=\"email\" autocomplete=\"email\" />\n<input type=\"text\" autocomplete=\"name\" />\n<input type=\"text\" autocomplete=\"given-name\" />\n<input type=\"text\" autocomplete=\"family-name\" />\n<input type=\"text\" autocomplete=\"organization\" />\n<input type=\"text\" autocomplete=\"street-address\" />\n<input type=\"text\" autocomplete=\"postal-code\" />\n<input type=\"tel\" autocomplete=\"tel\" />\n<input type=\"password\" autocomplete=\"current-password\" />\n<input type=\"password\" autocomplete=\"new-password\" />\n<input type=\"text\" autocomplete=\"one-time-code\" />\n```\n\n**Input types and modes:**\n\n```html\n<!-- Use correct type for validation and keyboard -->\n<input type=\"email\" inputmode=\"email\" />\n<input type=\"tel\" inputmode=\"tel\" />\n<input type=\"url\" inputmode=\"url\" />\n<input type=\"number\" inputmode=\"numeric\" />\n\n<!-- Numeric input without spinners -->\n<input type=\"text\" inputmode=\"numeric\" pattern=\"[0-9]*\" />\n```\n\n**Disable spellcheck where inappropriate:**\n\n```jsx\n// Disable for codes, emails, usernames, URLs\n<input type=\"text\" spellCheck={false} autoComplete=\"username\" />\n<input type=\"email\" spellCheck={false} />\n<input type=\"text\" spellCheck={false} placeholder=\"Enter code...\" />\n```\n\n**Anti-patterns to avoid:**\n\n```jsx\n// NEVER block paste - this is hostile UX\n<input onPaste={(e) => e.preventDefault()} />  // ❌ NEVER DO THIS\n\n// NEVER use placeholder as label\n<input placeholder=\"Email\" />  // ❌ Placeholder disappears on focus\n\n// NEVER validate on every keystroke\nonChange={(e) => validateEmail(e.target.value)}  // ❌ Too aggressive\n```\n\n**Best practices:**\n\n- Labels above inputs (not inside—accessibility)\n- Placeholder ≠ label; use for format hints only, end with `...`\n- Inline validation on blur, not on every keystroke\n- Error messages: specific and actionable (\"Email must include @\")\n- **Focus first error field** after form submission fails\n- Success state: checkmark icon, green border (brief)\n- Required fields: mark optional ones instead of required\n- Single column forms outperform multi-column\n\n**Unsaved changes warning:**\n\n```jsx\n// Warn users before leaving with unsaved changes\nuseEffect(() => {\n  const handleBeforeUnload = (e) => {\n    if (hasUnsavedChanges) {\n      e.preventDefault();\n      e.returnValue = '';\n    }\n  };\n  window.addEventListener('beforeunload', handleBeforeUnload);\n  return () => window.removeEventListener('beforeunload', handleBeforeUnload);\n}, [hasUnsavedChanges]);\n```\n\n### Cards (from Material, Apple)\n\n**Anatomy:**\n\n```\n┌────────────────────────────────┐\n│ [Media/Image]                  │  ← Optional\n├────────────────────────────────┤\n│ Eyebrow · Metadata             │  ← Optional\n│ Title                          │  ← Required\n│ Description text that can      │  ← Optional\n│ wrap to multiple lines...      │\n├────────────────────────────────┤\n│ [Actions]              [More]  │  ← Optional\n└────────────────────────────────┘\n```\n\n**Best practices:**\n\n- Entire card clickable for primary action\n- Consistent padding (16-24px)\n- Image aspect ratios: 16:9, 4:3, 1:1 (be consistent)\n- Limit to 2 actions max; overflow to menu\n- Hover: subtle lift (translateY -2px + shadow increase)\n\n### Tables (from Linear, Notion)\n\n**Best practices:**\n\n- Left-align text, right-align numbers\n- **Use `tabular-nums` for numeric columns** (consistent width digits)\n- Zebra striping OR row hover, not both\n- Sticky header on scroll\n- Sortable columns: show current sort indicator\n- Actions: row hover reveals action buttons (or kebab menu)\n- Empty state: helpful message + action\n- Pagination vs infinite scroll: pagination for data accuracy, infinite for browsing\n- Min row height: 48px for touch; 40px for dense\n- **Virtualize tables with >50 rows**\n\n```css\n.numeric-column {\n  font-variant-numeric: tabular-nums;\n  text-align: right;\n}\n```\n\n### Navigation (from Apple HIG, Material)\n\n**Patterns by scale:**\n\n- **2-5 items**: Tab bar / horizontal tabs\n- **5-10 items**: Side navigation (collapsible)\n- **10+ items**: Side nav with sections/groups\n\n**Best practices:**\n\n- Current location always visible\n- Breadcrumbs for deep hierarchy (not for flat structures)\n- Mobile: bottom nav for primary actions (thumb-friendly)\n- Icons + labels together; icon-only needs tooltip\n- Consistent order across pages\n\n---\n\n## Part 4: Interaction Design\n\n### Feedback Patterns (from Dan Saffer's Microinteractions)\n\n**Every action needs feedback:**\n\n1. **Immediate** - Button press visual (scale, color change)\n2. **Progress** - Loading states for anything >1s\n3. **Completion** - Success confirmation (toast, checkmark, animation)\n4. **Failure** - Clear error with recovery path\n\n**Loading states:**\n\n- 0-100ms: No indicator needed\n- 100-300ms: Subtle change (opacity, skeleton)\n- 300ms-1s: Spinner or progress bar\n- 1s+: Skeleton screens + progress indication\n- 10s+: Background processing with notification\n\n### State Handling\n\n**Every component needs these states:**\n\n```\nDefault    → Base appearance\nHover      → Interactive hint (cursor change, highlight)\nFocus      → Keyboard navigation (visible ring)\nActive     → Being pressed/activated\nLoading    → Async operation in progress\nDisabled   → Not available (reduce opacity, remove pointer)\nError      → Invalid input or failed operation\nSuccess    → Completed successfully (brief)\nEmpty      → No data to display (helpful message + action)\n```\n\n### Touch & Pointer Interactions\n\n**Faster tap response:**\n\n```css\n/* Remove 300ms tap delay on touch devices */\nbutton, a, [role=\"button\"] {\n  touch-action: manipulation;\n}\n```\n\n**Contain scroll in modals:**\n\n```css\n/* Prevent scroll chaining to body when modal/drawer reaches edge */\n.modal, .drawer, .dropdown {\n  overscroll-behavior: contain;\n}\n```\n\n**Touch targets:**\n\n- Minimum 44x44px for all interactive elements (Apple HIG)\n- Provide adequate spacing between targets (8px minimum)\n\n**Hover states for pointer devices only:**\n\n```css\n/* Only apply hover effects on devices with fine pointers */\n@media (hover: hover) and (pointer: fine) {\n  .card:hover {\n    transform: translateY(-2px);\n    box-shadow: var(--shadow-lg);\n  }\n}\n```\n\n**Tap highlight:**\n\n```css\n/* Customize or remove tap highlight on mobile */\nbutton {\n  -webkit-tap-highlight-color: transparent; /* Remove default */\n  /* Or use a custom color */\n  -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);\n}\n```\n\n### Optimistic Updates (from Linear, Notion)\n\n- Update UI immediately, sync in background\n- Show subtle \"Saving...\" indicator\n- On failure: revert UI + show error toast with retry\n- Best for: toggles, reordering, text edits\n- Avoid for: destructive actions, payments\n\n### Progressive Disclosure\n\n**Reveal complexity gradually:**\n\n- Show essential options first\n- \"Advanced\" or \"More options\" for power features\n- Inline expansion over page navigation\n- Tooltips for supplementary information\n- Context menus for secondary actions\n\n### Inferring Intent\n\n**Anticipate user actions before they happen:**\n\n```jsx\n// Preload on mousedown (fires before click)\n<button\n  onMouseDown={() => prefetchData()}\n  onClick={() => showData()}\n>\n  View Details\n</button>\n\n// Preload on hover for links\n<Link\n  href=\"/dashboard\"\n  onMouseEnter={() => router.prefetch('/dashboard')}\n>\n  Dashboard\n</Link>\n```\n\n**Proximity-based preloading:**\n\n```jsx\n// Start loading when cursor approaches\nfunction useProximityPreload(ref, onApproach) {\n  useEffect(() => {\n    const element = ref.current;\n    const handleMouseMove = (e) => {\n      const rect = element.getBoundingClientRect();\n      const distance = Math.hypot(\n        e.clientX - (rect.left + rect.width / 2),\n        e.clientY - (rect.top + rect.height / 2)\n      );\n      if (distance < 100) onApproach();\n    };\n    document.addEventListener('mousemove', handleMouseMove);\n    return () => document.removeEventListener('mousemove', handleMouseMove);\n  }, [ref, onApproach]);\n}\n```\n\n**Smart defaults:**\n\n- Pre-fill forms with likely values\n- Remember user's last selection\n- Use geolocation for location fields\n- Default date pickers to sensible dates (today, tomorrow)\n\n### Interaction Metaphors\n\n**Physical analogies users already understand:**\n\n| Gesture | Real-world Metaphor | UI Behavior |\n|---------|---------------------|-------------|\n| Drag | Moving physical objects | Reorder, move items |\n| Swipe | Flipping pages, pushing aside | Navigate, dismiss |\n| Pinch | Zooming a camera lens | Scale content |\n| Pull down | Stretching a spring | Refresh content |\n| Long press | Pressing firmly to reveal | Context menu |\n\n**Consistency requirement:**\n\nOnce you establish a gesture metaphor, use it consistently:\n\n```\n❌ Swipe right to delete in one view, swipe right to archive in another\n✅ Swipe right always archives, swipe left always deletes\n```\n\n**Honor platform conventions:**\n\n- iOS: Swipe from left edge = back navigation\n- Android: Back button/gesture = return to previous screen\n- Desktop: Right-click = context menu\n\n### Ergonomic Interactions\n\n**Expand hit areas with pseudo-elements:**\n\n```css\n/* Thin visual element with large tap target */\n.icon-button {\n  position: relative;\n  width: 24px;\n  height: 24px;\n}\n\n.icon-button::after {\n  content: '';\n  position: absolute;\n  inset: -12px; /* Expands hit area to 48x48px */\n}\n```\n\n**Bidirectional scroll support:**\n\n```css\n/* Support both LTR and RTL scrolling */\n.horizontal-scroll {\n  overflow-x: auto;\n  scroll-behavior: smooth;\n  /* Use logical properties */\n  scroll-padding-inline: 16px;\n}\n```\n\n**Thumb-friendly mobile zones:**\n\n```\n┌─────────────────────────────────┐\n│     Hard to reach (top)         │  ← Avoid primary actions here\n├─────────────────────────────────┤\n│                                 │\n│     Comfortable middle          │  ← Secondary actions OK\n│                                 │\n├─────────────────────────────────┤\n│     Easy reach (bottom)         │  ← Primary actions here\n└─────────────────────────────────┘\n```\n\n### Contained Gestures\n\n**Prevent gesture conflicts with parent elements:**\n\n```css\n/* Contain drag/swipe gestures within element */\n.draggable-area {\n  touch-action: none; /* Disable browser handling */\n  user-select: none;  /* Prevent text selection during drag */\n}\n\n/* Allow vertical scroll but capture horizontal */\n.horizontal-swipe {\n  touch-action: pan-y; /* Allow vertical, capture horizontal */\n}\n```\n\n**Pointer capture for drag operations:**\n\n```jsx\nfunction useDrag(onDrag, onDragEnd) {\n  const handlePointerDown = (e) => {\n    e.currentTarget.setPointerCapture(e.pointerId);\n  };\n\n  const handlePointerMove = (e) => {\n    if (e.currentTarget.hasPointerCapture(e.pointerId)) {\n      onDrag({ x: e.clientX, y: e.clientY });\n    }\n  };\n\n  const handlePointerUp = (e) => {\n    e.currentTarget.releasePointerCapture(e.pointerId);\n    onDragEnd();\n  };\n\n  return {\n    onPointerDown: handlePointerDown,\n    onPointerMove: handlePointerMove,\n    onPointerUp: handlePointerUp,\n  };\n}\n```\n\n**Drag threshold detection:**\n\n```jsx\n// Distinguish click from drag with movement threshold\nconst DRAG_THRESHOLD = 5; // pixels\n\nfunction useDragThreshold() {\n  const startPos = useRef(null);\n  const [isDragging, setIsDragging] = useState(false);\n\n  const handlePointerDown = (e) => {\n    startPos.current = { x: e.clientX, y: e.clientY };\n  };\n\n  const handlePointerMove = (e) => {\n    if (!startPos.current) return;\n\n    const distance = Math.hypot(\n      e.clientX - startPos.current.x,\n      e.clientY - startPos.current.y\n    );\n\n    if (distance > DRAG_THRESHOLD) {\n      setIsDragging(true);\n    }\n  };\n\n  const handlePointerUp = (e) => {\n    const wasDragging = isDragging;\n    setIsDragging(false);\n    startPos.current = null;\n    return wasDragging; // Return true if was drag, false if was click\n  };\n\n  return { isDragging, handlePointerDown, handlePointerMove, handlePointerUp };\n}\n```\n\n**Gesture state machine:**\n\n```\nIDLE → PRESS (pointer down)\nPRESS → DRAG (movement > threshold)\nPRESS → CLICK (pointer up, no movement)\nDRAG → DRAG_END (pointer up)\nDRAG_END → IDLE (animation complete)\n```\n\n---\n\n## Part 5: Motion & Animation\n\n### The Frequency Principle\n\nAnimation frequency should match usage frequency:\n\n| Usage Pattern | Animation Approach |\n|---|---|\n| 100+ times/day | No animation—instant response |\n| Occasional use | Standard animation (150-300ms) |\n| Rare/first-time | Can add delight, longer duration |\n\nExample: A \"send message\" button used constantly → instant. An \"export report\" button used weekly → can animate.\n\n### Easing Blueprint\n\n**Ease-out family (most common):**\n\nUse for entrances, user-initiated actions, and most UI transitions.\n\n```css\n:root {\n  /* Increasing intensity: quad → cubic → quart → quint */\n  --ease-out-quad: cubic-bezier(0.25, 0.46, 0.45, 0.94);\n  --ease-out-cubic: cubic-bezier(0.215, 0.61, 0.355, 1);\n  --ease-out-quart: cubic-bezier(0.165, 0.84, 0.44, 1);\n  --ease-out-quint: cubic-bezier(0.23, 1, 0.32, 1);\n}\n```\n\n**Ease-in-out family:**\n\nUse for on-screen movement (element moving from point A to point B).\n\n```css\n:root {\n  --ease-in-out-quad: cubic-bezier(0.455, 0.03, 0.515, 0.955);\n  --ease-in-out-cubic: cubic-bezier(0.645, 0.045, 0.355, 1);\n}\n```\n\n**Easing decision flowchart:**\n\n```\nIs the element entering or exiting the screen?\n  → Yes: Use ease-out (for both enter AND exit)\n\nIs the element moving on screen (A to B)?\n  → Yes: Use ease-in-out\n\nIs it a hover state or color change?\n  → Yes: Use ease (CSS default) or ease-out-quad\n\nIs it constant/looping motion (spinner, progress)?\n  → Yes: Use linear\n```\n\n### Timing Guidelines\n\n| Element Type | Duration | Notes |\n|---|---|---|\n| Micro-interactions | 100-150ms | Buttons, toggles, hover states |\n| Tooltips, dropdowns | 150-250ms | Small UI appearing |\n| Modals, drawers | 200-300ms | Larger surfaces |\n| Page transitions | 300-400ms | Full view changes |\n| Staggered items | 30-50ms delay | Between each item |\n\n**Important:** Exit animations should be 20-30% faster than entrances.\n\n### Animation Patterns\n\n**Entrances:**\n\n- Fade in + slide up (8-16px)\n- Scale from 0.95 to 1 + fade (never from 0)\n- Stagger children by 30-50ms\n\n**Exits:**\n\n- Fade out (faster than entrance)\n- Scale to 0.95 + fade\n- Slide in direction of dismissal\n\n**Transform origin:**\n\nAlways set `transform-origin` toward the trigger element:\n\n```css\n/* Dropdown opening from button */\n.dropdown {\n  transform-origin: top left; /* Opens from button location */\n}\n\n/* Modal opening from center */\n.modal {\n  transform-origin: center center;\n}\n```\n\n**Hover flicker prevention:**\n\n```css\n/* ❌ Don't animate the parent on hover */\n.card:hover {\n  transform: scale(1.02); /* Causes flicker */\n}\n\n/* ✅ Animate a child element instead */\n.card:hover .card-content {\n  transform: scale(1.02);\n}\n```\n\n**Sequential tooltips:**\n\nAfter the first tooltip in a series, skip animation for subsequent ones:\n\n```jsx\n// Skip animation if another tooltip was shown recently\nconst skipAnimation = Date.now() - lastTooltipTime < 300;\n```\n\n### Spring Physics\n\n**When to use springs:**\n\n- Drag and drop interactions\n- Gesture-based animations\n- Interruptible motion (user can grab mid-animation)\n- Physics-based feel (natural, organic)\n\n**Spring parameters:**\n\n```jsx\n// Physical spring configuration\nconst spring = {\n  stiffness: 300,  // Higher = faster, snappier\n  damping: 30,     // Higher = less oscillation\n  mass: 1          // Higher = more inertia, slower\n};\n\n// Typical ranges:\n// stiffness: 100-1000 (most UI: 200-400)\n// damping: 10-100 (most UI: 20-40)\n// mass: 0.5-2 (most UI: 1)\n```\n\n**Critical principle: Never reuse spring values**\n\nEach interaction should have its own tuned spring. A dropdown menu spring differs from a drag-to-dismiss spring.\n\n```jsx\n// ❌ Bad - same spring for everything\nconst SPRING = { stiffness: 300, damping: 30 };\n\n// ✅ Good - tuned per interaction\nconst DROPDOWN_SPRING = { stiffness: 400, damping: 35, mass: 0.8 };\nconst DRAG_SPRING = { stiffness: 250, damping: 25, mass: 1 };\nconst BOUNCE_SPRING = { stiffness: 180, damping: 12, mass: 1 };\n```\n\n**Damping for rubber band effects:**\n\n```jsx\n// Rubber band effect for over-scroll\nfunction rubberBand(offset, limit, elasticity = 0.55) {\n  const clampedOffset = Math.max(0, offset);\n  const delta = clampedOffset - limit;\n  if (delta <= 0) return offset;\n\n  // Logarithmic decay for natural feel\n  return limit + (1 - Math.exp(-delta / (limit * elasticity))) * limit * elasticity;\n}\n```\n\n**iOS-style projection (momentum scrolling):**\n\n```jsx\n// Project final position based on velocity\nfunction project(velocity, position, deceleration = 0.998) {\n  // v(t) = v0 * deceleration^t\n  // When v(t) ≈ 0, t = log(0.001) / log(deceleration)\n  const duration = Math.log(0.001) / Math.log(deceleration);\n  const distance = velocity * (1 - Math.pow(deceleration, duration)) / (1 - deceleration);\n  return position + distance;\n}\n```\n\n**Framer Motion spring shorthand:**\n\n```jsx\n// Simple configuration\nconst springConfig = {\n  type: \"spring\",\n  duration: 0.5,  // Overall duration\n  bounce: 0.2     // 0 = no bounce, 1 = very bouncy\n};\n\n// Subtle bounce (most UI): 0.1 - 0.3\n// Playful bounce: 0.3 - 0.5\n// Avoid > 0.5 in most production UI\n```\n\n### Motion Choreography\n\n**Blur overlapping layers:**\n\nWhen animated elements cross paths, they create visual noise. Add subtle blur:\n\n```css\n/* Add 1-2px blur during transitions */\n.transitioning-element {\n  filter: blur(1px);\n}\n\n/* Or use will-change to hint GPU compositing */\n.animated-layer {\n  will-change: transform;\n  transform: translateZ(0); /* Force separate layer */\n}\n```\n\n**Stagger animation delays:**\n\n```jsx\n// Stagger children by 30-50ms each\nconst container = {\n  hidden: { opacity: 0 },\n  show: {\n    opacity: 1,\n    transition: {\n      staggerChildren: 0.04, // 40ms between each\n      delayChildren: 0.1,    // Wait 100ms before starting\n    }\n  }\n};\n\nconst item = {\n  hidden: { opacity: 0, y: 8 },\n  show: { opacity: 1, y: 0 }\n};\n```\n\n**Double exit stiffness:**\n\nExit animations should feel quicker. Double the spring stiffness:\n\n```jsx\nfunction AnimatedPanel({ isOpen }) {\n  return (\n    <motion.div\n      initial={{ opacity: 0, scale: 0.95 }}\n      animate={{ opacity: 1, scale: 1 }}\n      exit={{ opacity: 0, scale: 0.95 }}\n      transition={{\n        enter: { type: \"spring\", stiffness: 300, damping: 30 },\n        exit: { type: \"spring\", stiffness: 600, damping: 30 } // 2x stiffness\n      }}\n    />\n  );\n}\n```\n\n**Crossfade icons (not swap):**\n\nWhen changing icons, don't just swap. Scale down + blur out the old, scale up + blur in the new:\n\n```jsx\n// Icon crossfade\n<AnimatePresence mode=\"wait\">\n  <motion.div\n    key={iconKey}\n    initial={{ opacity: 0, scale: 0.5, filter: 'blur(7px)' }}\n    animate={{ opacity: 1, scale: 1, filter: 'blur(0px)' }}\n    exit={{ opacity: 0, scale: 0.5, filter: 'blur(7px)' }}\n    transition={{ duration: 0.15 }}\n  >\n    <Icon />\n  </motion.div>\n</AnimatePresence>\n```\n\n**Morph surfaces with overflow: hidden:**\n\nWhen morphing between shapes, prevent content from spilling:\n\n```jsx\n// Container with overflow: hidden + crossfade content\n<motion.div\n  layout\n  style={{ overflow: 'hidden', borderRadius: 12 }}\n  transition={{ layout: { duration: 0.3 } }}\n>\n  <AnimatePresence mode=\"wait\">\n    <motion.div\n      key={contentKey}\n      initial={{ opacity: 0 }}\n      animate={{ opacity: 1 }}\n      exit={{ opacity: 0 }}\n    >\n      {content}\n    </motion.div>\n  </AnimatePresence>\n</motion.div>\n```\n\n### High-Frequency Actions\n\n**No fade-in for menus:**\n\nMenus triggered frequently should appear instantly, but can fade out:\n\n```jsx\n// Instant appear, animated dismiss\n<motion.div\n  initial={false} // Skip enter animation\n  animate={{ opacity: 1 }}\n  exit={{ opacity: 0, transition: { duration: 0.1 } }}\n>\n  <Menu />\n</motion.div>\n```\n\n**Skip animation between rapid data updates:**\n\n```jsx\n// Skip animation if update is too fast\nconst lastUpdate = useRef(Date.now());\nconst ANIMATION_THRESHOLD = 100; // ms\n\nfunction updateValue(newValue) {\n  const now = Date.now();\n  const shouldAnimate = now - lastUpdate.current > ANIMATION_THRESHOLD;\n  lastUpdate.current = now;\n\n  if (shouldAnimate) {\n    animateToValue(newValue);\n  } else {\n    setValueInstantly(newValue);\n  }\n}\n```\n\n**Keyboard interactions often need no animation:**\n\n```jsx\n// Tab navigation - instant focus, no animation\n// Arrow key navigation - instant highlight\n// Enter to select - instant (or very fast 50ms)\nconst keyboardTransition = { duration: 0.05 };\nconst pointerTransition = { duration: 0.15 };\n\nconst transition = isKeyboardNav ? keyboardTransition : pointerTransition;\n```\n\n### Gesture Lifecycle\n\n**Three phases of gesture handling:**\n\n```\nSTART (pointer down)  → Set constraints, capture pointer\nMOVE (pointer move)   → Update position continuously\nEND (pointer up)      → Animate to final position\n```\n\n**Use jump() for continuous updates, set() for animated snap:**\n\n```jsx\nimport { useMotionValue, useSpring } from 'framer-motion';\n\nfunction DraggableElement() {\n  const x = useMotionValue(0);\n  const springX = useSpring(x, { stiffness: 300, damping: 30 });\n\n  const handleDrag = (e) => {\n    // During drag: jump() for instant tracking (no spring delay)\n    x.jump(e.clientX - startX);\n  };\n\n  const handleDragEnd = () => {\n    // On release: set() for animated snap to final position\n    springX.set(snapToNearest(x.get()));\n  };\n\n  return <motion.div style={{ x: springX }} />;\n}\n```\n\n**useTransform for derived values:**\n\n```jsx\nimport { useMotionValue, useTransform } from 'framer-motion';\n\nfunction SwipeCard() {\n  const x = useMotionValue(0);\n\n  // Derive rotation from horizontal position\n  const rotate = useTransform(x, [-200, 200], [-15, 15]);\n\n  // Derive opacity from position\n  const opacity = useTransform(x, [-200, 0, 200], [0.5, 1, 0.5]);\n\n  return (\n    <motion.div\n      style={{ x, rotate, opacity }}\n      drag=\"x\"\n      dragConstraints={{ left: 0, right: 0 }}\n    />\n  );\n}\n```\n\n**Gesture state tracking:**\n\n```jsx\nfunction useGestureState() {\n  const [state, setState] = useState('idle');\n  // idle → press → drag → drag-end → idle\n\n  const handlers = {\n    onPointerDown: () => setState('press'),\n    onDragStart: () => setState('drag'),\n    onDragEnd: () => {\n      setState('drag-end');\n      // Return to idle after animation\n      setTimeout(() => setState('idle'), 300);\n    },\n    onPointerUp: () => {\n      if (state === 'press') setState('idle'); // Was click, not drag\n    }\n  };\n\n  return { state, handlers };\n}\n```\n\n### Animation Performance\n\n**Only animate compositor properties:**\n\n```css\n/* ✅ GPU-accelerated (cheap) */\ntransform: translateX(100px);\ntransform: scale(1.1);\ntransform: rotate(45deg);\nopacity: 0.5;\n\n/* ❌ Triggers layout/paint (expensive) */\nwidth: 200px;\nheight: 200px;\ntop: 100px;\nleft: 100px;\nmargin: 20px;\npadding: 20px;\n```\n\n**Never use `transition: all`:**\n\n```css\n/* ❌ Bad - animates everything including layout properties */\n.element {\n  transition: all 0.3s ease;\n}\n\n/* ✅ Good - explicit properties */\n.element {\n  transition: transform 0.3s var(--ease-out-cubic),\n              opacity 0.3s var(--ease-out-cubic);\n}\n```\n\n**Fix transform shakiness:**\n\n```css\n/* Add will-change if animation looks shaky */\n.animated-element {\n  will-change: transform;\n}\n\n/* Remove after animation completes to free memory */\n```\n\n**CSS vs JavaScript animations:**\n\n| Use CSS | Use JavaScript |\n|---|---|\n| Simple state transitions | Complex sequences |\n| Hover/focus effects | Gesture-based |\n| No user interaction during | Interruptible animations |\n| Performance-critical | Dynamic values |\n\n### Reduced Motion\n\n**Every animation needs a reduced motion alternative:**\n\n```css\n/* Base animation */\n.modal {\n  animation: slideIn 0.3s var(--ease-out-cubic);\n}\n\n@keyframes slideIn {\n  from {\n    opacity: 0;\n    transform: translateY(16px);\n  }\n}\n\n/* Reduced motion: instant or fade only */\n@media (prefers-reduced-motion: reduce) {\n  .modal {\n    animation: fadeIn 0.15s ease;\n  }\n\n  @keyframes fadeIn {\n    from { opacity: 0; }\n  }\n}\n```\n\n**Framer Motion hook:**\n\n```jsx\nimport { useReducedMotion } from 'framer-motion';\n\nfunction Modal({ children }) {\n  const shouldReduceMotion = useReducedMotion();\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: shouldReduceMotion ? 0 : 16 }}\n      animate={{ opacity: 1, y: 0 }}\n      transition={{ duration: shouldReduceMotion ? 0.1 : 0.3 }}\n    >\n      {children}\n    </motion.div>\n  );\n}\n```\n\n**What reduced motion should do:**\n\n- Remove parallax effects\n- Stop auto-playing videos/carousels\n- Replace slide/scale with fade or instant\n- Keep essential feedback (success checkmarks can still appear, just not animated)\n\n---\n\n## Part 6: Accessibility Essentials\n\n### WCAG Quick Reference\n\n**Perceivable:**\n\n- Color contrast: 4.5:1 text, 3:1 UI components\n- Don't rely on color alone (add icons, patterns)\n- Text resizable to 200% without loss\n- Captions for video; transcripts for audio\n\n**Operable:**\n\n- All functionality via keyboard\n- No keyboard traps\n- Skip links for repeated content\n- Touch targets: 44x44px minimum\n\n**Understandable:**\n\n- Consistent navigation\n- Identify input errors clearly\n- Labels and instructions for forms\n\n**Robust:**\n\n- Semantic HTML elements\n- ARIA only when HTML isn't enough\n- Tested with screen readers\n\n### Focus Management\n\n**Use `:focus-visible` over `:focus`:**\n\n```css\n/* ✅ Only show focus ring for keyboard navigation */\n:focus-visible {\n  outline: 2px solid var(--color-primary);\n  outline-offset: 2px;\n}\n\n/* ❌ Don't remove outline without replacement */\n:focus {\n  outline: none; /* BAD - removes accessibility */\n}\n```\n\n**Compound controls:**\n\n```css\n/* Highlight parent when any child is focused */\n.input-group:focus-within {\n  box-shadow: 0 0 0 2px var(--color-primary);\n}\n```\n\n### Keyboard Navigation\n\n**All interactive elements must be keyboard-operable:**\n\n```jsx\n// ❌ Click-only interaction\n<div onClick={handleAction}>Click me</div>\n\n// ✅ Keyboard accessible\n<button onClick={handleAction}>Click me</button>\n\n// ✅ If must use div, add keyboard support\n<div\n  role=\"button\"\n  tabIndex={0}\n  onClick={handleAction}\n  onKeyDown={(e) => {\n    if (e.key === 'Enter' || e.key === ' ') {\n      e.preventDefault();\n      handleAction();\n    }\n  }}\n>\n  Click me\n</div>\n```\n\n**Keyboard patterns:**\n\n- Tab order must match visual order\n- Enter/Space activate buttons and links\n- Escape closes dialogs and dropdowns\n- Arrow keys navigate within components (tabs, menus)\n\n### ARIA Patterns\n\n**Icon buttons require `aria-label`:**\n\n```jsx\n// ❌ No accessible name\n<button><CloseIcon /></button>\n\n// ✅ Accessible\n<button aria-label=\"Close dialog\"><CloseIcon /></button>\n```\n\n**Form controls require labels:**\n\n```jsx\n// ❌ No label\n<input type=\"email\" placeholder=\"Email\" />\n\n// ✅ Visible label\n<label>\n  Email\n  <input type=\"email\" />\n</label>\n\n// ✅ Or visually hidden label\n<label htmlFor=\"email\" className=\"sr-only\">Email</label>\n<input id=\"email\" type=\"email\" placeholder=\"email@example.com\" />\n```\n\n**Live regions for async updates:**\n\n```jsx\n// Announce dynamic content to screen readers\n<div aria-live=\"polite\" aria-atomic=\"true\">\n  {statusMessage}\n</div>\n```\n\n**Semantic HTML before ARIA:**\n\n```jsx\n// ❌ ARIA role when native element exists\n<div role=\"button\" tabIndex={0}>Submit</div>\n\n// ✅ Use native element\n<button>Submit</button>\n\n// ❌ ARIA for native functionality\n<div role=\"navigation\">...</div>\n\n// ✅ Use native element\n<nav>...</nav>\n```\n\n**Common ARIA patterns:**\n\n```html\n<!-- Modal -->\n<div role=\"dialog\" aria-modal=\"true\" aria-labelledby=\"modal-title\">\n  <h2 id=\"modal-title\">Dialog Title</h2>\n</div>\n\n<!-- Tab panel -->\n<div role=\"tablist\">\n  <button role=\"tab\" aria-selected=\"true\" aria-controls=\"panel1\">Tab 1</button>\n</div>\n<div role=\"tabpanel\" id=\"panel1\">Content</div>\n\n<!-- Loading state -->\n<button aria-busy=\"true\" aria-describedby=\"loading-text\">\n  <span id=\"loading-text\" className=\"sr-only\">Loading...</span>\n</button>\n```\n\n---\n\n## Part 7: Performance Patterns\n\n### Virtualization\n\n**Large lists require virtualization:**\n\n```jsx\n// Use virtualization for lists > 50 items\nimport { VList } from 'virtua';\n\nfunction LargeList({ items }) {\n  return (\n    <VList style={{ height: 400 }}>\n      {items.map(item => <ListItem key={item.id} item={item} />)}\n    </VList>\n  );\n}\n```\n\n**CSS-based virtualization:**\n\n```css\n/* For simpler cases, use content-visibility */\n.list-item {\n  content-visibility: auto;\n  contain-intrinsic-size: 0 60px; /* Estimated height */\n}\n```\n\n### Layout Thrashing\n\n**Avoid layout reads in render:**\n\n```jsx\n// ❌ Bad - forces layout recalculation\nfunction Component() {\n  const width = element.getBoundingClientRect().width; // Layout read\n  element.style.width = width + 10 + 'px'; // Layout write\n  const height = element.offsetHeight; // Another layout read!\n}\n\n// ✅ Good - batch reads, then writes\nfunction Component() {\n  // Batch reads\n  const width = element.getBoundingClientRect().width;\n  const height = element.offsetHeight;\n\n  // Then batch writes\n  requestAnimationFrame(() => {\n    element.style.width = width + 10 + 'px';\n    element.style.height = height + 10 + 'px';\n  });\n}\n```\n\n**Properties that trigger layout:**\n\n- `offsetHeight`, `offsetWidth`, `offsetTop`, `offsetLeft`\n- `getBoundingClientRect()`\n- `scrollHeight`, `scrollWidth`, `scrollTop`, `scrollLeft`\n- `getComputedStyle()`\n\n### Resource Loading\n\n**Preconnect to CDN domains:**\n\n```html\n<!-- Add in <head> for domains you'll fetch from -->\n<link rel=\"preconnect\" href=\"https://fonts.googleapis.com\" />\n<link rel=\"preconnect\" href=\"https://cdn.example.com\" crossorigin />\n```\n\n**Preload critical fonts:**\n\n```html\n<link\n  rel=\"preload\"\n  href=\"/fonts/inter-var.woff2\"\n  as=\"font\"\n  type=\"font/woff2\"\n  crossorigin\n/>\n```\n\n**Image loading strategy:**\n\n```jsx\n// Above the fold: load immediately\n<img src=\"/hero.jpg\" fetchpriority=\"high\" />\n\n// Below the fold: lazy load\n<img src=\"/card.jpg\" loading=\"lazy\" />\n\n// Critical background images: preload\n<link rel=\"preload\" as=\"image\" href=\"/hero-bg.jpg\" />\n```\n\n---\n\n## Part 8: Content & Copy\n\n### Writing Style\n\n**Active voice over passive:**\n\n```\n✅ \"Install the CLI\"\n❌ \"The CLI will be installed\"\n\n✅ \"Your changes were saved\"\n❌ \"Changes have been saved by the system\"\n```\n\n**Title Case for headings and buttons:**\n\n```\n✅ \"Save API Key\"\n❌ \"Save api key\"\n\n✅ \"Getting Started\"\n❌ \"Getting started\"\n```\n\n**Use numerals:**\n\n```\n✅ \"8 deployments\"\n❌ \"eight deployments\"\n\n✅ \"3 items selected\"\n❌ \"three items selected\"\n```\n\n### Labels & Messages\n\n**Specific labels over generic:**\n\n```\n✅ \"Save API Key\"\n❌ \"Continue\"\n\n✅ \"Create Project\"\n❌ \"Submit\"\n\n✅ \"Delete Repository\"\n❌ \"Confirm\"\n```\n\n**Error messages include fix/next step:**\n\n```\n✅ \"Email must include @ symbol\"\n❌ \"Invalid email\"\n\n✅ \"Password must be at least 8 characters\"\n❌ \"Password too short\"\n\n✅ \"Could not connect. Check your internet connection and try again.\"\n❌ \"Network error\"\n```\n\n### Internationalization\n\n**Use Intl APIs for formatting:**\n\n```jsx\n// ❌ Hardcoded format\nconst date = `${month}/${day}/${year}`;\nconst price = `$${amount.toFixed(2)}`;\n\n// ✅ Locale-aware formatting\nconst date = new Intl.DateTimeFormat('en-US', {\n  dateStyle: 'medium'\n}).format(new Date());\n\nconst price = new Intl.NumberFormat('en-US', {\n  style: 'currency',\n  currency: 'USD'\n}).format(amount);\n\n// Relative time\nconst rtf = new Intl.RelativeTimeFormat('en', { numeric: 'auto' });\nrtf.format(-1, 'day'); // \"yesterday\"\n```\n\n---\n\n## Part 9: Anti-Patterns Checklist\n\nFlag these patterns during design review:\n\n### Accessibility Violations\n\n- [ ] `user-scalable=no` or `maximum-scale=1` in viewport meta\n- [ ] `<div onClick>` instead of `<button>` for interactive elements\n- [ ] Form inputs without associated labels\n- [ ] Icon buttons without `aria-label`\n- [ ] `outline: none` without focus replacement\n\n### Performance Issues\n\n- [ ] `transition: all` (animates layout properties)\n- [ ] Images without explicit `width` and `height`\n- [ ] Large arrays (>50 items) rendered without virtualization\n- [ ] Layout reads (`getBoundingClientRect`) in render cycle\n\n### UX Problems\n\n- [ ] `onPaste` with `preventDefault()` (blocks paste)\n- [ ] Hardcoded date/number formats (not using Intl)\n- [ ] Placeholder used as label\n- [ ] Validation on every keystroke\n- [ ] No empty state designed\n\n### Mobile Issues\n\n- [ ] Touch targets smaller than 44x44px\n- [ ] No `touch-action: manipulation` on buttons\n- [ ] Hover effects without `@media (hover: hover)` query\n\n### Interface Robustness Checklist\n\nTest every interactive component against these stress conditions:\n\n**Rapid User Input:**\n- [ ] Scroll fast — does it break or show visual glitches?\n- [ ] Spam click — does it trigger multiple actions or crash?\n- [ ] Resize window rapidly — does layout break or cause errors?\n- [ ] Type very fast in inputs — does it lag or lose characters?\n\n**Animation Interruption:**\n- [ ] Interrupt animations mid-way — does it recover gracefully?\n- [ ] Close modal while opening — does it handle state correctly?\n- [ ] Navigate away during transition — does it clean up properly?\n- [ ] Trigger multiple animations simultaneously — do they conflict?\n\n**Network Conditions:**\n- [ ] Test with slow network (3G throttling) — does it show loading states?\n- [ ] Test with offline mode — does it fail gracefully?\n- [ ] Test with request timeout — does it retry or show error?\n\n**Input Methods:**\n- [ ] Test with keyboard only — is everything accessible?\n- [ ] Test with screen reader — are states announced?\n- [ ] Test with touch device — are hit areas adequate?\n- [ ] Test with trackpad gestures — do scroll/swipe work correctly?\n\n**State Combinations:**\n- [ ] Test all combinations of loading + error + empty states\n- [ ] Test disabled state during async operations\n- [ ] Test hover + focus + active simultaneously\n- [ ] Test with maximum and minimum content\n\n**Memory & Performance:**\n- [ ] Run for extended period — does memory grow unbounded?\n- [ ] Test with large datasets — does it virtualize or paginate?\n- [ ] Monitor for memory leaks in animations and observers\n- [ ] Check for event listener cleanup on unmount\n\n---\n\n## Part 10: Design System References\n\n### Study These Systems\n\n**For Clarity & Precision:**\n\n- [Linear](https://linear.app) - Information density done right\n- [Stripe](https://stripe.com) - Trust through craft\n- [Vercel](https://vercel.com) - Developer-focused simplicity\n\n**For Warmth & Approachability:**\n\n- [Airbnb](https://airbnb.com) - Friendly, image-forward\n- [Notion](https://notion.so) - Flexible, playful\n- [Slack](https://slack.com) - Conversational, colorful\n\n**For Data & Density:**\n\n- [Bloomberg Terminal](https://bloomberg.com) - Maximum information\n- [Figma](https://figma.com) - Tool-like precision\n- [GitHub](https://github.com) - Code-centric clarity\n\n**For Motion & Delight:**\n\n- [Apple](https://apple.com) - Cinematic quality\n- [Framer](https://framer.com) - Motion-first\n\n### When Generating Variants\n\nReference specific aspects:\n\n- \"Use Linear's density approach\"\n- \"Stripe's button hierarchy\"\n- \"Airbnb's card layout\"\n- \"Notion's toggle interaction\"\n- \"Vercel's dark mode palette\"\n\n---\n\n## Part 11: Code Patterns Library\n\nPractical patterns for implementing advanced interactions.\n\n### useMotionValue vs useState\n\n**Performance difference:**\n\n```jsx\n// ❌ Bad - triggers re-render on every frame\nconst [x, setX] = useState(0);\n<div style={{ transform: `translateX(${x}px)` }} />\n\n// ✅ Good - bypasses React, updates directly\nconst x = useMotionValue(0);\n<motion.div style={{ x }} />\n```\n\nUse `useMotionValue` for:\n- Continuous animation values (position, scale, opacity)\n- Gesture-driven values (drag position)\n- Any value that changes at 60fps\n\nUse `useState` for:\n- Discrete states (open/closed, active tab)\n- Values that trigger layout changes\n\n### useSpring: jump() vs set()\n\n```jsx\nconst springValue = useSpring(0, { stiffness: 300, damping: 30 });\n\n// set() - Animate to target value with spring physics\nspringValue.set(100); // Smoothly animates from current → 100\n\n// jump() - Instantly set value, no animation\nspringValue.jump(100); // Immediately becomes 100\n\n// Use jump() during drag, set() on release\nconst handleDrag = (e) => springValue.jump(e.clientX);\nconst handleRelease = () => springValue.set(snapPoint);\n```\n\n### Grid Stacking for Overlapping Elements\n\n**Stack elements using CSS Grid (no absolute positioning):**\n\n```jsx\n// All children occupy the same grid cell\nfunction StackedElements({ children }) {\n  return (\n    <div style={{\n      display: 'grid',\n      gridTemplateColumns: '1fr',\n      gridTemplateRows: '1fr',\n    }}>\n      {children.map((child, i) => (\n        <div key={i} style={{ gridArea: '1 / 1' }}>\n          {child}\n        </div>\n      ))}\n    </div>\n  );\n}\n```\n\n**Benefits over `position: absolute`:**\n- Children contribute to parent size\n- Natural document flow\n- Better for responsive layouts\n\n### Native Scroll vs Wheel Events\n\n**Prefer native scroll over wheel event listeners:**\n\n```jsx\n// ❌ Bad - janky, blocks main thread\nelement.addEventListener('wheel', (e) => {\n  scrollPosition += e.deltaY;\n  element.style.transform = `translateY(${-scrollPosition}px)`;\n});\n\n// ✅ Good - smooth, GPU-accelerated\n<div style={{ overflow: 'auto', scrollBehavior: 'smooth' }}>\n  {content}\n</div>\n```\n\n**When you need scroll position reactively:**\n\n```jsx\n// Use Intersection Observer for scroll-triggered effects\nconst observer = new IntersectionObserver(\n  (entries) => {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        entry.target.classList.add('visible');\n      }\n    });\n  },\n  { threshold: 0.1 }\n);\n```\n\n### clip-path for Animated Resizing\n\n**Animate size without layout shifts:**\n\n```jsx\n// ❌ Bad - animating width triggers layout\n<motion.div animate={{ width: isOpen ? 300 : 0 }} />\n\n// ✅ Good - clip-path is GPU-accelerated\n<motion.div\n  style={{ width: 300 }} // Fixed width\n  animate={{\n    clipPath: isOpen\n      ? 'inset(0 0 0 0)'\n      : 'inset(0 100% 0 0)' // Clip from right\n  }}\n/>\n```\n\n**Reveal patterns:**\n\n```css\n/* Reveal from left */\nclip-path: inset(0 100% 0 0) → inset(0 0 0 0)\n\n/* Reveal from center */\nclip-path: inset(0 50% 0 50%) → inset(0 0 0 0)\n\n/* Reveal from top */\nclip-path: inset(0 0 100% 0) → inset(0 0 0 0)\n\n/* Circle reveal from center */\nclip-path: circle(0% at 50% 50%) → circle(100% at 50% 50%)\n```\n\n### Scroll Fading (Blur Fade Effect)\n\n**Fade content at scroll edges:**\n\n```css\n.scroll-container {\n  overflow-y: auto;\n  mask-image: linear-gradient(\n    to bottom,\n    transparent 0%,\n    black 10%,\n    black 90%,\n    transparent 100%\n  );\n}\n\n/* Or use scroll-driven animations (modern browsers) */\n@supports (animation-timeline: scroll()) {\n  .scroll-item {\n    animation: fadeIn linear both;\n    animation-timeline: view();\n    animation-range: entry 0% entry 20%;\n  }\n\n  @keyframes fadeIn {\n    from { opacity: 0; transform: translateY(20px); }\n    to { opacity: 1; transform: translateY(0); }\n  }\n}\n```\n\n### overflow: clip vs hidden\n\n**Use `clip` when you don't need scroll:**\n\n```css\n/* hidden: creates scroll container, may affect stacking */\n.container { overflow: hidden; }\n\n/* clip: just clips, no scroll container created */\n.container { overflow: clip; }\n```\n\n**When to use each:**\n- `hidden` - Need scrollable overflow (JS can scroll it)\n- `clip` - Just want to hide overflow, no scroll needed (better perf)\n\n### Re-mount with React Key for CSS Keyframes\n\n**Replay CSS animations by changing key:**\n\n```jsx\n// CSS animation plays once on mount\nfunction Notification({ message }) {\n  const [key, setKey] = useState(0);\n\n  const triggerAnimation = () => setKey(k => k + 1);\n\n  return (\n    <div key={key} className=\"animate-shake\">\n      {message}\n    </div>\n  );\n}\n```\n\n```css\n.animate-shake {\n  animation: shake 0.5s ease-out;\n}\n\n@keyframes shake {\n  0%, 100% { transform: translateX(0); }\n  25% { transform: translateX(-5px); }\n  75% { transform: translateX(5px); }\n}\n```\n\n### Smart Image Preloading\n\n**Preload images before they're needed:**\n\n```jsx\n// Preload on hover (link navigation)\nfunction NavLink({ href, children }) {\n  const preloadImages = () => {\n    const images = ['/hero.jpg', '/feature.png'];\n    images.forEach(src => {\n      const img = new Image();\n      img.src = src;\n    });\n  };\n\n  return (\n    <Link\n      href={href}\n      onMouseEnter={preloadImages}\n      onFocus={preloadImages}\n    >\n      {children}\n    </Link>\n  );\n}\n\n// Preload based on viewport proximity\nfunction useImagePreload(src, rootMargin = '200px') {\n  const ref = useRef(null);\n\n  useEffect(() => {\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          const img = new Image();\n          img.src = src;\n          observer.disconnect();\n        }\n      },\n      { rootMargin }\n    );\n\n    if (ref.current) observer.observe(ref.current);\n    return () => observer.disconnect();\n  }, [src, rootMargin]);\n\n  return ref;\n}\n```\n\n### layoutId for Shared Element Transitions\n\n**Morph elements between views:**\n\n```jsx\nimport { motion, AnimatePresence } from 'framer-motion';\n\nfunction App() {\n  const [selected, setSelected] = useState(null);\n\n  return (\n    <>\n      {/* Grid of cards */}\n      {items.map(item => (\n        <motion.div\n          key={item.id}\n          layoutId={`card-${item.id}`}\n          onClick={() => setSelected(item)}\n        >\n          <Card item={item} />\n        </motion.div>\n      ))}\n\n      {/* Expanded view */}\n      <AnimatePresence>\n        {selected && (\n          <motion.div\n            layoutId={`card-${selected.id}`}\n            className=\"expanded-card\"\n          >\n            <ExpandedCard item={selected} />\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n}\n```\n\n### Debounced Resize Observer\n\n**Prevent excessive callbacks during resize:**\n\n```jsx\nfunction useResizeObserver(ref, callback, debounceMs = 100) {\n  useEffect(() => {\n    const element = ref.current;\n    if (!element) return;\n\n    let timeoutId;\n    const observer = new ResizeObserver((entries) => {\n      clearTimeout(timeoutId);\n      timeoutId = setTimeout(() => {\n        callback(entries[0].contentRect);\n      }, debounceMs);\n    });\n\n    observer.observe(element);\n    return () => {\n      clearTimeout(timeoutId);\n      observer.disconnect();\n    };\n  }, [ref, callback, debounceMs]);\n}\n```\n\n---\n\n## Quick Decision Framework\n\nWhen unsure, ask:\n\n1. **Is it clear?** → User knows what to do and what happened\n2. **Is it fast?** → Minimum steps, appropriate feedback\n3. **Is it consistent?** → Matches patterns elsewhere in the app\n4. **Is it accessible?** → Keyboard, screen reader, color contrast\n5. **Is it calm?** → No unnecessary motion, color, or elements\n6. **Is it specific?** → Labels describe exactly what will happen\n7. **Is it recoverable?** → User can undo or go back\n\n### Animation Decision Quick Check\n\n```\nShould this animate?\n├── Used 100+ times/day? → No animation\n├── Entering/exiting screen? → ease-out, 150-250ms\n├── Moving on screen? → ease-in-out, 200-300ms\n├── Hover/color change? → ease, 100-150ms\n└── Unsure? → Start without animation, add if needed\n```\n\n### Interaction Pattern Quick Reference\n\n| Situation | Solution |\n|-----------|----------|\n| Overlapping motion | Add 1-2px blur during transition |\n| Menu animation | Fade-out only, no fade-in (instant appear) |\n| Keyboard interactions | Often no animation needed (50ms max) |\n| High-frequency updates | Skip animation if update < 100ms apart |\n| Drag gesture | Use `jump()` during, `set()` at end |\n| Touch gestures | Use `touch-action: none` to capture |\n| Thin hit areas | Expand with `::after` pseudo-element |\n| Scroll-based animation | Use native scroll, not wheel event |\n| Width animation | Use `clip-path` instead of width |\n| Replay CSS animation | Change React `key` prop |\n| Morph between elements | Use Framer Motion `layoutId` |\n| State during gesture | Track: idle → press → drag → drag-end |\n| Overflow without scroll | Use `overflow: clip` |\n| Exit animations | Double the spring stiffness |\n| Icon swap | Crossfade with scale 0.5 + blur 7px |\n| Preload data | Start on `mousedown` (before click) |\n| Spring animation values | Never reuse — tune per interaction |\n| React animation perf | Use `useMotionValue`, not `useState` |\n",
        "design-and-refine/skills/design-lab/SKILL.md": "---\nname: design-lab\ndescription: Conduct design interviews, generate five distinct UI variations in a temporary design lab, collect feedback, and produce implementation plans. Use when the user wants to explore UI design options, redesign existing components, or create new UI with multiple approaches to compare.\n---\n\n# Design Lab Skill\n\nThis skill implements a complete design exploration workflow: interview, generate variations, collect feedback, refine, preview, and finalize.\n\n## CRITICAL: Cleanup Behavior\n\n**All temporary files MUST be deleted when the process ends, whether by:**\n- User confirms final design → cleanup, then generate plan\n- User aborts/cancels → cleanup immediately, no plan generated\n\n**Never leave `.claude-design/` or `__design_lab` routes behind.** If the user says \"cancel\", \"abort\", \"stop\", or \"nevermind\" at any point, confirm and then delete all temporary artifacts.\n\n---\n\n## Phase 0: Preflight Detection\n\nBefore starting the interview, automatically detect:\n\n### Package Manager\nCheck for lock files in the project root:\n- `pnpm-lock.yaml` → use `pnpm`\n- `yarn.lock` → use `yarn`\n- `package-lock.json` → use `npm`\n- `bun.lockb` → use `bun`\n\n### Framework Detection\nCheck for config files:\n- `next.config.js` or `next.config.mjs` or `next.config.ts` → **Next.js**\n  - Check for `app/` directory → App Router\n  - Check for `pages/` directory → Pages Router\n- `vite.config.js` or `vite.config.ts` → **Vite**\n- `remix.config.js` → **Remix**\n- `nuxt.config.js` or `nuxt.config.ts` → **Nuxt**\n- `astro.config.mjs` → **Astro**\n\n### Styling System Detection\nCheck `package.json` dependencies and config files:\n- `tailwind.config.js` or `tailwind.config.ts` → **Tailwind CSS**\n- `@mui/material` in dependencies → **Material UI**\n- `@chakra-ui/react` in dependencies → **Chakra UI**\n- `antd` in dependencies → **Ant Design**\n- `styled-components` in dependencies → **styled-components**\n- `@emotion/react` in dependencies → **Emotion**\n- `.css` or `.module.css` files → **CSS Modules**\n\n### Design Memory Check\nLook for existing Design Memory file:\n- `docs/design-memory.md`\n- `DESIGN_MEMORY.md`\n- `.claude-design/design-memory.md`\n\nIf found, read it and use to prefill defaults and skip redundant questions.\n\n### Visual Style Inference (CRITICAL)\n\n**DO NOT use generic/predefined styles. Extract visual language from the project:**\n\n**If Tailwind detected**, read `tailwind.config.js` or `tailwind.config.ts`:\n```javascript\n// Extract and use:\ntheme.colors      // Color palette\ntheme.spacing     // Spacing scale\ntheme.borderRadius // Radius values\ntheme.fontFamily  // Typography\ntheme.boxShadow   // Elevation system\n```\n\n**If CSS Variables exist**, read `globals.css`, `variables.css`, or `:root` definitions:\n```css\n:root {\n  --color-*     /* Color tokens */\n  --spacing-*   /* Spacing tokens */\n  --font-*      /* Typography tokens */\n  --radius-*    /* Border radius tokens */\n}\n```\n\n**If UI library detected** (MUI, Chakra, Ant), read the theme configuration:\n- MUI: `theme.ts` or `createTheme()` call\n- Chakra: `theme/index.ts` or `extendTheme()` call\n- Ant: `ConfigProvider` theme prop\n\n**Always scan existing components** to understand patterns:\n- Find 2-3 existing buttons → note their styling patterns\n- Find 2-3 existing cards → note padding, borders, shadows\n- Find existing forms → note input styles, label placement\n- Find existing typography → note heading sizes, body text\n\n**Store inferred styles in the Design Brief** for consistent use across all variants.\n\n---\n\n## Phase 1: Interview\n\nUse the **AskUserQuestion** tool for all interview steps. Adapt questions based on Design Memory if it exists.\n\n### Step 1.1: Scope & Target\n\nAsk these questions (can combine into single AskUserQuestion with multiple questions):\n\n**Question 1: Scope**\n- Header: \"Scope\"\n- Question: \"Are we designing a single component or a full page?\"\n- Options:\n  - \"Component\" - A reusable UI element (button, card, form, modal, etc.)\n  - \"Page\" - A complete page or screen layout\n\n**Question 2: New or Redesign**\n- Header: \"Type\"\n- Question: \"Is this a new design or a redesign of something existing?\"\n- Options:\n  - \"New\" - Creating something from scratch\n  - \"Redesign\" - Improving an existing component/page\n\nIf \"Redesign\" selected, ask:\n**Question 3: Existing Path**\n- Header: \"Location\"\n- Question: \"What is the file path or route of the existing UI?\"\n- Options: (let user provide via \"Other\")\n\nIf target is unclear, propose a name based on repo patterns and confirm.\n\n### Step 1.2: Pain Points & Inspiration\n\n**Question 1: Pain Points**\n- Header: \"Problems\"\n- Question: \"What are the top pain points with the current design (or what should this new design avoid)?\"\n- Options:\n  - \"Too cluttered/dense\" - Information overload, hard to scan\n  - \"Unclear hierarchy\" - Primary actions aren't obvious\n  - \"Poor mobile experience\" - Doesn't work well on small screens\n  - \"Outdated look\" - Feels old or inconsistent with brand\n- multiSelect: true\n\n**Question 2: Visual Inspiration**\n- Header: \"Visual style\"\n- Question: \"What products or brands should I reference for visual inspiration?\"\n- Options:\n  - \"Stripe\" - Clean, minimal, trustworthy\n  - \"Linear\" - Dense, keyboard-first, developer-focused\n  - \"Notion\" - Flexible, content-focused, playful\n  - \"Apple\" - Premium, spacious, refined\n- multiSelect: true\n\n**Question 3: Functional Inspiration**\n- Header: \"Interactions\"\n- Question: \"What interaction patterns should I emulate?\"\n- Options:\n  - \"Inline editing\" - Edit in place without modals\n  - \"Progressive disclosure\" - Show more as needed\n  - \"Optimistic updates\" - Instant feedback, sync in background\n  - \"Keyboard shortcuts\" - Power user efficiency\n\n### Step 1.3: Brand & Style Direction\n\n**Question 1: Brand Adjectives**\n- Header: \"Brand tone\"\n- Question: \"What 3-5 adjectives describe the desired brand feel?\"\n- Options:\n  - \"Minimal\" - Clean, simple, uncluttered\n  - \"Premium\" - High-end, polished, refined\n  - \"Playful\" - Fun, friendly, approachable\n  - \"Utilitarian\" - Functional, efficient, no-nonsense\n- multiSelect: true\n\n**Question 2: Density**\n- Header: \"Density\"\n- Question: \"What information density do you prefer?\"\n- Options:\n  - \"Compact\" - More information visible, tighter spacing\n  - \"Comfortable\" - Balanced spacing, easy scanning\n  - \"Spacious\" - Generous whitespace, focused attention\n\n**Question 3: Dark Mode**\n- Header: \"Dark mode\"\n- Question: \"Is dark mode required?\"\n- Options:\n  - \"Yes\" - Must support dark mode\n  - \"No\" - Light mode only\n  - \"Nice to have\" - Support if easy, not required\n\n### Step 1.4: Persona & Jobs-to-be-Done\n\n**Question 1: Primary User**\n- Header: \"User\"\n- Question: \"Who is the primary end user?\"\n- Options:\n  - \"Developer\" - Technical, keyboard-oriented\n  - \"Designer\" - Visual, detail-oriented\n  - \"Business user\" - Efficiency-focused, less technical\n  - \"End consumer\" - General public, varied technical ability\n\n**Question 2: Context**\n- Header: \"Context\"\n- Question: \"What's the primary usage context?\"\n- Options:\n  - \"Desktop-first\" - Primarily used on larger screens\n  - \"Mobile-first\" - Primarily used on phones\n  - \"Both equally\" - Must work well on all devices\n\n**Question 3: Key Tasks**\n- Header: \"Key tasks\"\n- Question: \"What are the top 3 tasks users must complete?\"\n- (Let user provide via \"Other\" - this is open-ended)\n\n### Step 1.5: Constraints\n\n**Question 1: Must-Keep Elements**\n- Header: \"Keep\"\n- Question: \"Are there elements that must be preserved?\"\n- Options:\n  - \"Existing copy/labels\" - Keep current text\n  - \"Current fields/inputs\" - Keep form structure\n  - \"Navigation structure\" - Keep current nav\n  - \"None\" - Free to change everything\n\n**Question 2: Technical Constraints**\n- Header: \"Constraints\"\n- Question: \"Any technical constraints?\"\n- Options:\n  - \"No new dependencies\" - Use existing libraries only\n  - \"Use existing components\" - Build on current design system\n  - \"Must be accessible (WCAG)\" - Strict accessibility requirements\n  - \"None\" - No special constraints\n- multiSelect: true\n\n---\n\n## Phase 2: Generate Design Brief\n\nAfter the interview, create a structured Design Brief as JSON and save to `.claude-design/design-brief.json`:\n\n```json\n{\n  \"scope\": \"component|page\",\n  \"isRedesign\": true|false,\n  \"targetPath\": \"src/components/Example.tsx\",\n  \"targetName\": \"Example\",\n  \"painPoints\": [\"Too dense\", \"Primary action unclear\"],\n  \"inspiration\": {\n    \"visual\": [\"Stripe\", \"Linear\"],\n    \"functional\": [\"Inline validation\"]\n  },\n  \"brand\": {\n    \"adjectives\": [\"minimal\", \"trustworthy\"],\n    \"density\": \"comfortable\",\n    \"darkMode\": true\n  },\n  \"persona\": {\n    \"primary\": \"Developer\",\n    \"context\": \"desktop-first\",\n    \"keyTasks\": [\"Complete checkout\", \"Review order\", \"Apply discount\"]\n  },\n  \"constraints\": {\n    \"mustKeep\": [\"existing fields\"],\n    \"technical\": [\"no new dependencies\", \"WCAG accessible\"]\n  },\n  \"framework\": \"nextjs-app\",\n  \"packageManager\": \"pnpm\",\n  \"stylingSystem\": \"tailwind\"\n}\n```\n\nDisplay a summary to the user before proceeding.\n\n---\n\n## Phase 3: Generate Design Lab\n\n### Directory Structure\n\nCreate all files under `.claude-design/`:\n\n```\n.claude-design/\n├── lab/\n│   ├── page.tsx                 # Main lab page (framework-specific)\n│   ├── variants/\n│   │   ├── VariantA.tsx\n│   │   ├── VariantB.tsx\n│   │   ├── VariantC.tsx\n│   │   ├── VariantD.tsx\n│   │   └── VariantE.tsx\n│   ├── components/\n│   │   └── LabShell.tsx         # Lab layout wrapper\n│   ├── feedback/                # Interactive feedback system\n│   │   ├── types.ts             # TypeScript interfaces\n│   │   ├── selector-utils.ts    # Element identification\n│   │   ├── format-utils.ts      # Feedback formatting\n│   │   ├── FeedbackOverlay.tsx  # Main overlay component\n│   │   └── index.ts             # Module exports\n│   └── data/\n│       └── fixtures.ts          # Shared mock data\n├── design-brief.json\n└── run-log.md\n```\n\n### Feedback System Setup (CRITICAL - NEVER SKIP)\n\n**The FeedbackOverlay is the PRIMARY feature of the Design Lab.** Without it, users cannot provide interactive feedback. NEVER generate a Design Lab without the FeedbackOverlay.\n\n**Reliability Strategy:** To avoid import path issues across different project configurations, create the FeedbackOverlay **directly in the route directory** (e.g., `app/design-lab/FeedbackOverlay.tsx`), NOT in `.claude-design/`. This ensures a simple relative import (`./FeedbackOverlay`) always works.\n\n**Required Files in Route Directory:**\n```\napp/design-lab/           # or app/__design_lab/ if underscores work\n├── page.tsx              # Main lab page with variants\n└── FeedbackOverlay.tsx   # Self-contained overlay component (copy from templates)\n```\n\n**Template Source:** `design-and-refine/templates/feedback/FeedbackOverlay.tsx`\n\n**Why this approach:**\n- `.claude-design/` paths can fail due to bundler configurations\n- Relative imports from the same directory always work\n- The route directory gets deleted during cleanup anyway\n\n### Route Integration\n\n**Next.js App Router:**\nCreate `app/__design_lab/page.tsx` that imports from `.claude-design/lab/`\n\n**Next.js Pages Router:**\nCreate `pages/__design_lab.tsx` that imports from `.claude-design/lab/`\n\n**Vite React:**\n- If React Router exists: add route to `/__design_lab`\n- If no router: create a conditional render in `App.tsx` based on `?design_lab=true` query param\n\n**Other frameworks:**\nCreate the most appropriate temporary route for the detected framework.\n\n### Variant Generation Guidelines\n\n**IMPORTANT:** Read `DESIGN_PRINCIPLES.md` for UX, interaction, and motion best practices. But **DO NOT use predefined visual styles**—infer them from the project.\n\n**Apply universal principles (from DESIGN_PRINCIPLES.md):**\n- **UX**: Nielsen's heuristics, cognitive load reduction, progressive disclosure\n- **Component behavior**: Button states, form anatomy, card structure\n- **Interaction**: Feedback patterns, state handling, optimistic updates\n- **Motion**: Timing (150-300ms), easing (ease-out entrances, ease-in exits)\n- **Accessibility**: Focus states, ARIA patterns, touch targets (44px min)\n\n**Infer visual styles from the project:**\n- Colors → from Tailwind config, CSS variables, or existing components\n- Typography → from existing headings, body text in the codebase\n- Spacing → from the project's spacing scale or existing patterns\n- Border radius → from existing cards, buttons, inputs\n- Shadows → from existing elevated components\n\n---\n\nEach variant MUST explore a different design axis. Do not create minor variations—make them meaningfully distinct. **Use the project's existing visual language for all variants.**\n\n**Variant A: Information Hierarchy Focus**\n- Restructure content hierarchy (what's most important?)\n- Apply Gestalt proximity—group related items closer\n- One primary action per view\n- Use existing typography scale to create clear levels\n\n**Variant B: Layout Model Exploration**\n- Try a different layout approach (card vs list vs table vs split-pane)\n- Apply card anatomy or table behavior patterns from DESIGN_PRINCIPLES\n- Consider responsive behavior at each breakpoint\n- Use the project's existing grid/layout system\n\n**Variant C: Density Variation**\n- If brief says \"comfortable\", try a more compact version\n- If brief says \"compact\", try a more spacious version\n- Use the project's existing spacing tokens—just apply them differently\n- Show the tradeoffs: more visible data vs easier scanning\n\n**Variant D: Interaction Model**\n- Different interaction pattern (modal vs inline vs panel vs drawer)\n- Apply feedback patterns: immediate → progress → completion\n- Implement all required states (loading, error, empty, disabled)\n- Consider optimistic updates for non-destructive actions\n\n**Variant E: Expressive Direction**\n- Push the brand direction the user described in the interview\n- Explore different uses of the project's existing design tokens\n- More or less use of shadows, borders, background colors\n- Apply motion where it adds meaning (hover, focus, transitions)\n\n### Lab Page Requirements\n\nThe Design Lab page must include:\n\n1. **Header** with:\n   - Design Brief summary (target, scope, key requirements)\n   - Instructions for reviewing\n\n2. **Variant Grid** with:\n   - Clear labels (A, B, C, D, E)\n   - Brief rationale for each variant (\"Why this exists\")\n   - The actual rendered variant\n   - Notes highlighting key differences\n   - **IMPORTANT:** Each variant container must have `data-variant=\"X\"` attribute (where X is A, B, C, D, E, or F). This is required for the feedback system to identify which variant comments belong to.\n\n3. **Responsive behavior**:\n   - Desktop: side-by-side grid (2-3 columns)\n   - Mobile: horizontal scroll or tabs\n\n4. **Shared Data**:\n   - All variants use the same fixture data from `data/fixtures.ts`\n   - Ensures fair comparison\n\n5. **Feedback Overlay** (CRITICAL - NEVER OMIT):\n\n   ⚠️ **THIS IS THE MOST IMPORTANT REQUIREMENT** ⚠️\n\n   The FeedbackOverlay enables users to click on elements and leave comments. Without it, the Design Lab is just a static page with no way to collect structured feedback.\n\n   - Create `FeedbackOverlay.tsx` in the SAME directory as `page.tsx`\n   - Import with relative path: `import { FeedbackOverlay } from './FeedbackOverlay'`\n   - Render at the END of the page, after all variants\n   - Pass `targetName` prop with the component/page name\n\n   **Example integration:**\n\n```tsx\nimport { FeedbackOverlay } from './FeedbackOverlay';  // Relative import - always works\n\nexport default function DesignLabPage() {\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <header>...</header>\n\n      <main>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n          <div data-variant=\"A\">\n            <VariantA />\n          </div>\n          <div data-variant=\"B\">\n            <VariantB />\n          </div>\n          {/* ... more variants */}\n        </div>\n      </main>\n\n      {/* CRITICAL: FeedbackOverlay must be included */}\n      <FeedbackOverlay targetName=\"ComponentName\" />\n    </div>\n  );\n}\n```\n\n   **If you forget the FeedbackOverlay, the user CANNOT provide feedback.** This defeats the entire purpose of the Design Lab.\n\n### Code Quality\n\n**Conventions:**\n- Follow the project's existing code conventions (file naming, imports, etc.)\n- Use the detected styling system (Tailwind, CSS modules, etc.)\n- Use existing components from the project where appropriate\n\n**Accessibility (from DESIGN_PRINCIPLES):**\n- Semantic HTML: `<button>` not `<div onclick>`, `<nav>`, `<main>`, `<section>`\n- Keyboard navigation: all interactive elements focusable and operable\n- Focus states: visible `:focus-visible` with 2px ring and offset\n- Color contrast: 4.5:1 for text, 3:1 for UI elements\n- Touch targets: minimum 44x44px\n- ARIA only when HTML semantics aren't enough\n\n**States (every component needs):**\n- Default, Hover, Focus, Active, Disabled, Loading, Error, Empty\n- See DESIGN_PRINCIPLES \"State Handling\" section\n\n**Motion:**\n- Use appropriate timing: 150-200ms for micro-interactions, 200-300ms for transitions\n- Use ease-out for entrances, ease-in for exits\n- Respect `prefers-reduced-motion`\n\n---\n\n## Phase 4: Present Design Lab to User\n\nAfter generating the lab files, **immediately** present the lab to the user. Do NOT attempt to:\n- Start the dev server yourself (it runs forever and will block)\n- Check if ports are open\n- Open a browser\n- Wait for any server response\n\n### What to Do\n\n1. **Output the lab location and URL:**\n   ```\n   ✅ Design Lab created!\n\n   I've generated 5 design variants in `.claude-design/lab/`\n\n   To view them:\n   1. Make sure your dev server is running (run `pnpm dev` if not)\n   2. Open: http://localhost:3000/__design_lab\n\n   Take your time reviewing the variants side-by-side, then come back and tell me:\n   - Which variant wins (A-E)\n   - What you like about it\n   - What should change\n   ```\n\n2. **Immediately proceed to Phase 5** - ask for feedback. Do NOT wait for the user to say they've opened the browser. Just present the feedback questions right away so they're ready when the user returns.\n\n### Why Not Start the Server\n\nRunning `pnpm dev` or `npm run dev` starts a long-running process that never exits. If you run it, you'll wait forever. The user likely already has their dev server running, or can start it themselves in another terminal.\n\n---\n\n## Phase 5: Collect Feedback\n\nAfter presenting the lab URL, the user can provide feedback in two ways:\n1. **Interactive Feedback** (recommended): Using the built-in overlay in the browser\n2. **Manual Feedback**: Via AskUserQuestion in the terminal\n\n### Interactive Feedback (Primary Method)\n\nThe Design Lab includes a Figma-like feedback overlay. When presenting the lab, include these instructions:\n\n```\n✅ Design Lab created!\n\nI've generated 5 design variants in `.claude-design/lab/`\n\nTo view and provide feedback:\n1. Make sure your dev server is running (run `pnpm dev` if not)\n2. Open: http://localhost:3000/__design_lab\n\n**To add feedback:**\n1. Click the \"Add Feedback\" button (bottom-right corner)\n2. Click any element you want to comment on\n3. Type your feedback and click \"Save\"\n4. Repeat for all elements you want to comment on\n5. Fill in the \"Overall Direction\" field (required)\n6. Click \"Submit All Feedback\"\n7. Paste the copied text here in the terminal\n\nOr just describe your feedback manually below!\n```\n\n**When the user pastes feedback**, it will be in this format:\n\n```markdown\n## Design Lab Feedback\n\n**Target:** ComponentName\n**Comments:** 3\n\n### Variant A\n1. **Button** (`[data-testid='submit']`, button with \"Submit\")\n   \"Make this more prominent\"\n\n### Variant B\n1. **Card** (`.product-card`, div with \"Product Name\")\n   \"Love this layout\"\n\n### Overall Direction\nGo with Variant B's structure. Apply Variant A's button styling.\n```\n\n**How to parse and act on this feedback:**\n\n1. **Read the Overall Direction** first - this guides your synthesis\n2. **For each comment**, locate the element using:\n   - Primary: The CSS selector in backticks (e.g., `[data-testid='submit']`)\n   - Secondary: The element description (e.g., \"button with 'Submit'\")\n3. **Apply the feedback** by editing the corresponding variant file\n\n### Fallback: Manual Feedback via AskUserQuestion\n\nIf the user prefers not to use the interactive overlay (or pastes manual feedback), use the AskUserQuestion flow below:\n\n### Stage 1: Check for a Winner\n\n**Question 1: Ready to pick?**\n- Header: \"Decision\"\n- Question: \"Is there one variant you like as is?\"\n- Options:\n  - \"Yes - I found one I like\" - Ready to select a winner and refine\n  - \"No - I like parts of different ones\" - Need to synthesize a new variant\n\n### Stage 2A: If User Found a Winner\n\nIf user said \"Yes\", ask:\n\n**Question 2a: Which one?**\n- Header: \"Winner\"\n- Question: \"Which variant do you want to go with?\"\n- Options:\n  - \"Variant A\" - [brief description of A]\n  - \"Variant B\" - [brief description of B]\n  - \"Variant C\" - [brief description of C]\n  - \"Variant D\" - [brief description of D]\n  - \"Variant E\" - [brief description of E]\n\n**Question 3a: Any tweaks?**\n- Header: \"Tweaks\"\n- Question: \"Any small changes needed, or is it good as is?\"\n- Options:\n  - \"Good as is\" - No changes needed, proceed to final preview\n  - \"Minor tweaks needed\" - I'll describe what to adjust\n\nIf \"Minor tweaks needed\", ask user to describe changes via text input.\n\nThen proceed to **Phase 7: Final Preview**.\n\n### Stage 2B: If User Wants to Synthesize\n\nIf user said \"No - I like parts of different ones\", ask:\n\n**Question 2b: What do you like about each?**\n- Header: \"Feedback\"\n- Question: \"What do you like about each variant? (mention specific elements from A, B, C, D, E)\"\n- (Let user provide detailed feedback via \"Other\" text input)\n\nExample response format to guide user:\n```\n- A: Love the card layout and spacing\n- B: The color scheme feels right\n- C: The interaction on hover is great\n- D: Nothing stands out\n- E: The typography hierarchy is clearest\n```\n\nThen proceed to **Phase 6: Synthesize New Variant**.\n\n---\n\n## Phase 6: Synthesize New Variant\n\nBased on the user's feedback about what they liked from each variant:\n\n1. **Create a new hybrid variant** (Variant F) that combines:\n   - The specific elements the user called out from each\n   - The best structural decisions across all variants\n   - Any patterns that appeared in multiple variants\n\n2. **Replace the Design Lab** with a comparison view:\n   - Show the new synthesized Variant F prominently\n   - Keep 1-2 of the original variants that were closest for comparison\n   - Remove variants that had nothing the user liked\n\n3. **Update the `/__design_lab` route** to show the new arrangement\n\n4. **Ask for feedback again:**\n\n**Question: How's the new variant?**\n- Header: \"Review\"\n- Question: \"How does the synthesized variant (F) look?\"\n- Options:\n  - \"This is it!\" - Proceed to final preview\n  - \"Getting closer\" - Need another iteration\n  - \"Went the wrong direction\" - Let me clarify what I want\n\nIf \"Getting closer\" or \"Went the wrong direction\", gather more specific feedback and iterate. Support multiple synthesis passes until user is satisfied.\n\nThen proceed to **Phase 7: Final Preview**.\n\n---\n\n## Phase 7: Final Preview\n\nOnce user is satisfied:\n\n1. Create `.claude-design/preview/` directory:\n   ```\n   .claude-design/preview/\n   ├── page.tsx                    # Preview page\n   └── FinalDesign.tsx             # The winning design\n   ```\n\n2. Create route at `/__design_preview`\n\n3. For redesigns, include before/after comparison:\n   - Toggle switch or split view\n   - Show original alongside proposed\n\n4. Ask for final confirmation:\n\n**Question: Confirm final design?**\n- Header: \"Confirm\"\n- Question: \"Ready to finalize this design?\"\n- Options:\n  - \"Yes, finalize it\" - Proceed to cleanup and generate implementation plan\n  - \"No, needs changes\" - Tell me what to adjust\n  - \"Abort - cancel everything\" - Delete all temp files, no plan generated\n\nIf \"No, needs changes\": gather feedback and iterate.\nIf \"Abort\": proceed to **Abort Handling** below.\n\n---\n\n## Abort Handling\n\nIf the user wants to cancel/abort at ANY point during the process (not just final confirmation), they may say things like:\n- \"cancel\"\n- \"abort\"\n- \"stop\"\n- \"nevermind\"\n- \"forget it\"\n- \"I changed my mind\"\n\nWhen abort is detected:\n\n1. **Confirm the abort:**\n   - \"Are you sure you want to cancel? This will delete all the design lab files I created.\"\n\n2. **If confirmed, clean up immediately:**\n   - Delete `.claude-design/` directory entirely\n   - Delete temporary route files (`app/__design_lab/`, etc.)\n   - Do NOT generate any implementation plan\n   - Do NOT update Design Memory\n\n3. **Acknowledge:**\n   - \"Design exploration cancelled. All temporary files have been cleaned up. Let me know if you want to start fresh later.\"\n\n---\n\n## Phase 8: Finalize\n\nWhen user confirms (selected \"Yes, finalize it\"):\n\n### 8.1: Cleanup\n\nDelete all temporary files:\n- Remove `.claude-design/` directory entirely\n- Remove temporary route files:\n  - `app/__design_lab/` (Next.js App Router)\n  - `pages/__design_lab.tsx` (Next.js Pages Router)\n  - `app/__design_preview/`\n  - `pages/__design_preview.tsx`\n  - Revert any `App.tsx` modifications (Vite)\n\n**Safety rules:**\n- ONLY delete files inside `.claude-design/`\n- ONLY delete route files that the plugin created\n- NEVER delete user-authored files\n- Verify file paths before deletion\n\n### 8.2: Generate Implementation Plan\n\nCreate `DESIGN_PLAN.md` in the project root:\n\n```markdown\n# Design Implementation Plan: [TargetName]\n\n## Summary\n- **Scope:** [component/page]\n- **Target:** [file path]\n- **Winner variant:** [A-E]\n- **Key improvements:** [from feedback]\n\n## Files to Change\n- [ ] `src/components/Example.tsx` - Main component refactor\n- [ ] `src/styles/example.css` - Style updates\n- [ ] ... (list all affected files)\n\n## Implementation Steps\n1. [Specific step with code guidance]\n2. [Next step]\n3. ...\n\n## Component API\n- **Props:**\n  - `prop1: type` - description\n  - ...\n- **State:**\n  - Internal state requirements\n- **Events:**\n  - Callbacks and handlers\n\n## Required UI States\n- **Loading:** [description]\n- **Empty:** [description]\n- **Error:** [description]\n- **Disabled:** [description]\n- **Validation:** [description]\n\n## Accessibility Checklist\n- [ ] Keyboard navigation works\n- [ ] Focus states visible\n- [ ] Labels and aria-* attributes correct\n- [ ] Color contrast meets WCAG AA\n- [ ] Screen reader tested\n\n## Testing Checklist\n- [ ] Unit tests for logic\n- [ ] Component tests for rendering\n- [ ] Visual regression tests (if applicable)\n- [ ] E2E smoke test (if applicable)\n\n## Design Tokens\n- [Any new tokens to add]\n- [Existing tokens to use]\n\n---\n\n*Generated by Design Variations plugin*\n```\n\n### 8.3: Update Design Memory\n\nCreate or update `DESIGN_MEMORY.md`:\n\nIf new file:\n```markdown\n# Design Memory\n\n## Brand Tone\n- **Adjectives:** [from interview]\n- **Avoid:** [anti-patterns discovered]\n\n## Layout & Spacing\n- **Density:** [preference]\n- **Grid:** [if established]\n- **Corner radius:** [if consistent]\n- **Shadows:** [if consistent]\n\n## Typography\n- **Headings:** [font, weights used]\n- **Body:** [font, size]\n- **Emphasis:** [patterns]\n\n## Color\n- **Primary:** [color tokens]\n- **Secondary:** [color tokens]\n- **Neutral strategy:** [approach]\n- **Semantic colors:** [error, success, warning]\n\n## Interaction Patterns\n- **Forms:** [validation approach, layout]\n- **Modals/Drawers:** [when to use which]\n- **Tables/Lists:** [preferred patterns]\n- **Feedback:** [toast, inline, etc.]\n\n## Accessibility Rules\n- **Focus:** [visible focus approach]\n- **Labels:** [labeling conventions]\n- **Motion:** [reduced motion support]\n\n## Repo Conventions\n- **Component structure:** [file organization]\n- **Styling approach:** [Tailwind classes, CSS modules, etc.]\n- **Existing primitives:** [Button, Input, Card, etc.]\n\n---\n\n*Updated by Design Variations plugin*\n```\n\nIf updating existing file:\n- Append new patterns discovered\n- Update any conflicting guidance with latest decisions\n- Keep file concise and actionable\n\n---\n\n## Error Handling\n\n### Framework Not Detected\nIf framework cannot be determined:\n- Ask user: \"I couldn't detect your framework. What are you using?\"\n- Provide common options: Next.js, Vite, Create React App, Vue, etc.\n\n### Dev Server Fails\nIf dev server won't start:\n- Check for port conflicts\n- Provide manual instructions\n- Suggest user starts server themselves\n\n### Route Integration Fails\nIf can't create temporary route:\n- Fall back to creating standalone HTML file\n- Provide instructions for manual preview\n\n### Cleanup Interrupted\nIf cleanup is interrupted:\n- Log what was deleted vs remaining\n- Provide manual cleanup instructions\n- Never leave partial state without informing user\n\n---\n\n## Configuration Options\n\nThe plugin supports these optional configurations (via environment or project config):\n\n- `DESIGN_AUTO_IMPLEMENT`: If `true`, implement the plan immediately after confirmation\n- `DESIGN_KEEP_LAB`: If `true`, don't delete lab until explicit cleanup command\n- `DESIGN_MEMORY_PATH`: Custom path for Design Memory file\n\n---\n\n## Example Session Flow\n\n1. User: `/design-variations:design CheckoutSummary`\n2. Plugin detects: Next.js App Router, Tailwind, pnpm\n3. Plugin finds: No existing Design Memory\n4. Plugin asks: Interview questions (5 steps)\n5. Plugin generates: Design Brief summary\n6. Plugin creates: `.claude-design/lab/` with 5 variants\n7. Plugin creates: `app/__design_lab/page.tsx`\n8. Plugin starts: `pnpm dev`\n9. Plugin outputs: \"Open http://localhost:3000/__design_lab\"\n10. User reviews variants in browser\n11. Plugin asks: \"Which variant wins?\"\n12. User: \"Variant C, but change X and Y\"\n13. Plugin refines: Updates Variant C\n14. User: \"Looks good\"\n15. Plugin creates: Final preview at `/__design_preview`\n16. User: \"Confirmed\"\n17. Plugin: Deletes all temp files\n18. Plugin: Generates `DESIGN_PLAN.md`\n19. Plugin: Creates `DESIGN_MEMORY.md`\n20. Plugin: \"Done! See DESIGN_PLAN.md for implementation steps\"\n"
      },
      "plugins": [
        {
          "name": "design-and-refine",
          "source": "./design-and-refine",
          "description": "Generate UI variations, collect feedback, synthesize the best elements, and iterate to confident design decisions",
          "version": "1.1.0",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add 0xdesign/design-plugin",
            "/plugin install design-and-refine@design-plugins"
          ]
        }
      ]
    }
  ]
}