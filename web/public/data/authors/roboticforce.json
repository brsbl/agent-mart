{
  "author": {
    "id": "roboticforce",
    "display_name": "RoboticForce, Inc.",
    "type": "Organization",
    "avatar_url": "https://avatars.githubusercontent.com/u/186092719?v=4",
    "url": "https://github.com/roboticforce",
    "bio": null,
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 15,
      "total_skills": 0,
      "total_stars": 40,
      "total_forks": 9
    }
  },
  "marketplaces": [
    {
      "name": "sugar-plugins",
      "version": "1.0.0",
      "description": "ðŸ° Sugar - The autonomous layer for AI coding agents",
      "owner_info": {
        "name": "Steven Leggett",
        "email": "contact@roboticforce.io"
      },
      "keywords": [],
      "repo_full_name": "roboticforce/sugar",
      "repo_url": "https://github.com/roboticforce/sugar",
      "repo_description": "ðŸ° Sugar - The autonomous layer for AI coding agents",
      "homepage": "https://sugar.roboticforce.io",
      "signals": {
        "stars": 40,
        "forks": 9,
        "pushed_at": "2026-01-22T18:45:46Z",
        "created_at": "2025-08-21T18:26:58Z",
        "license": "NOASSERTION"
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/.mcp.json",
          "type": "blob",
          "size": 8131
        },
        {
          "path": ".claude-plugin/IMPLEMENTATION_ROADMAP.md",
          "type": "blob",
          "size": 11669
        },
        {
          "path": ".claude-plugin/MARKETPLACE_SUBMISSION.md",
          "type": "blob",
          "size": 10209
        },
        {
          "path": ".claude-plugin/MCP_SERVER_IMPLEMENTATION.md",
          "type": "blob",
          "size": 15815
        },
        {
          "path": ".claude-plugin/PLUGIN_OVERVIEW.md",
          "type": "blob",
          "size": 12324
        },
        {
          "path": ".claude-plugin/README.md",
          "type": "blob",
          "size": 5471
        },
        {
          "path": ".claude-plugin/TESTING_PLAN.md",
          "type": "blob",
          "size": 14414
        },
        {
          "path": ".claude-plugin/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/agents/quality-guardian.md",
          "type": "blob",
          "size": 10688
        },
        {
          "path": ".claude-plugin/agents/sugar-orchestrator.md",
          "type": "blob",
          "size": 8196
        },
        {
          "path": ".claude-plugin/agents/task-planner.md",
          "type": "blob",
          "size": 10304
        },
        {
          "path": ".claude-plugin/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/commands/sugar-analyze.md",
          "type": "blob",
          "size": 9182
        },
        {
          "path": ".claude-plugin/commands/sugar-review.md",
          "type": "blob",
          "size": 6975
        },
        {
          "path": ".claude-plugin/commands/sugar-run.md",
          "type": "blob",
          "size": 6948
        },
        {
          "path": ".claude-plugin/commands/sugar-status.md",
          "type": "blob",
          "size": 4716
        },
        {
          "path": ".claude-plugin/commands/sugar-task.md",
          "type": "blob",
          "size": 3917
        },
        {
          "path": ".claude-plugin/commands/sugar-thinking.md",
          "type": "blob",
          "size": 3113
        },
        {
          "path": ".claude-plugin/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/hooks/hooks.json",
          "type": "blob",
          "size": 1247
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 699
        },
        {
          "path": ".claude-plugin/mcp-server",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/mcp-server/package.json",
          "type": "blob",
          "size": 662
        },
        {
          "path": ".claude-plugin/mcp-server/sugar-mcp.js",
          "type": "blob",
          "size": 13179
        },
        {
          "path": ".claude-plugin/plugin.json",
          "type": "blob",
          "size": 1099
        },
        {
          "path": "README.md",
          "type": "blob",
          "size": 14884
        },
        {
          "path": "action",
          "type": "tree",
          "size": null
        },
        {
          "path": "action/README.md",
          "type": "blob",
          "size": 7171
        },
        {
          "path": "docs",
          "type": "tree",
          "size": null
        },
        {
          "path": "docs/README.md",
          "type": "blob",
          "size": 3624
        },
        {
          "path": "examples",
          "type": "tree",
          "size": null
        },
        {
          "path": "examples/claude-code-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "examples/claude-code-plugin/README.md",
          "type": "blob",
          "size": 8557
        },
        {
          "path": "packages",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/mcp-server",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/mcp-server/README.md",
          "type": "blob",
          "size": 2532
        },
        {
          "path": "packages/opencode-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/opencode-plugin/README.md",
          "type": "blob",
          "size": 2502
        },
        {
          "path": "packages/opencode-plugin/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/opencode-plugin/commands/sugar-add.md",
          "type": "blob",
          "size": 1923
        },
        {
          "path": "packages/opencode-plugin/commands/sugar-context.md",
          "type": "blob",
          "size": 1519
        },
        {
          "path": "packages/opencode-plugin/commands/sugar-list.md",
          "type": "blob",
          "size": 892
        },
        {
          "path": "packages/opencode-plugin/commands/sugar-priority.md",
          "type": "blob",
          "size": 682
        },
        {
          "path": "packages/opencode-plugin/commands/sugar-recall.md",
          "type": "blob",
          "size": 2044
        },
        {
          "path": "packages/opencode-plugin/commands/sugar-remember.md",
          "type": "blob",
          "size": 2036
        },
        {
          "path": "packages/opencode-plugin/commands/sugar-remove.md",
          "type": "blob",
          "size": 479
        },
        {
          "path": "packages/opencode-plugin/commands/sugar-run.md",
          "type": "blob",
          "size": 689
        },
        {
          "path": "packages/opencode-plugin/commands/sugar-status.md",
          "type": "blob",
          "size": 934
        },
        {
          "path": "packages/opencode-plugin/src",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/opencode-plugin/src/hooks",
          "type": "tree",
          "size": null
        },
        {
          "path": "packages/opencode-plugin/src/hooks/index.ts",
          "type": "blob",
          "size": 4156
        },
        {
          "path": "sugar",
          "type": "tree",
          "size": null
        },
        {
          "path": "sugar/quality_gates",
          "type": "tree",
          "size": null
        },
        {
          "path": "sugar/quality_gates/README.md",
          "type": "blob",
          "size": 7544
        }
      ],
      "files": {
        ".claude-plugin/.mcp.json": "{\n  \"mcpServers\": {\n    \"sugar\": {\n      \"command\": \"node\",\n      \"args\": [\"./.claude-plugin/mcp-server/sugar-mcp.js\"],\n      \"env\": {\n        \"SUGAR_PROJECT_ROOT\": \"${workspaceFolder}\",\n        \"SUGAR_DEBUG\": \"false\"\n      },\n      \"description\": \"Sugar autonomous development system MCP server\",\n      \"schema\": {\n        \"methods\": {\n          \"createTask\": {\n            \"description\": \"Create a new Sugar task with rich context\",\n            \"params\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"title\": {\n                  \"type\": \"string\",\n                  \"description\": \"Task title (required)\"\n                },\n                \"type\": {\n                  \"type\": \"string\",\n                  \"enum\": [\"bug_fix\", \"feature\", \"test\", \"refactor\", \"documentation\"],\n                  \"description\": \"Task type\",\n                  \"default\": \"feature\"\n                },\n                \"priority\": {\n                  \"type\": \"number\",\n                  \"minimum\": 1,\n                  \"maximum\": 5,\n                  \"description\": \"Priority level (1=low, 5=urgent)\",\n                  \"default\": 3\n                },\n                \"urgent\": {\n                  \"type\": \"boolean\",\n                  \"description\": \"Mark as urgent (sets priority to 5)\",\n                  \"default\": false\n                },\n                \"description\": {\n                  \"type\": \"string\",\n                  \"description\": \"Task description\"\n                },\n                \"json_data\": {\n                  \"type\": \"object\",\n                  \"description\": \"Rich JSON context including business_context, technical_requirements, agent_assignments, success_criteria\",\n                  \"properties\": {\n                    \"context\": {\"type\": \"string\"},\n                    \"business_context\": {\"type\": \"string\"},\n                    \"technical_requirements\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}},\n                    \"agent_assignments\": {\"type\": \"object\"},\n                    \"success_criteria\": {\"type\": \"array\", \"items\": {\"type\": \"string\"}}\n                  }\n                }\n              },\n              \"required\": [\"title\"]\n            },\n            \"returns\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"success\": {\"type\": \"boolean\"},\n                \"taskId\": {\"type\": \"string\"},\n                \"message\": {\"type\": \"string\"},\n                \"output\": {\"type\": \"string\"},\n                \"error\": {\"type\": \"string\"}\n              }\n            }\n          },\n          \"listTasks\": {\n            \"description\": \"List Sugar tasks with optional filtering\",\n            \"params\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"status\": {\n                  \"type\": \"string\",\n                  \"enum\": [\"pending\", \"active\", \"completed\", \"failed\"],\n                  \"description\": \"Filter by status\"\n                },\n                \"type\": {\n                  \"type\": \"string\",\n                  \"description\": \"Filter by task type\"\n                },\n                \"priority\": {\n                  \"type\": \"number\",\n                  \"minimum\": 1,\n                  \"maximum\": 5,\n                  \"description\": \"Filter by priority\"\n                },\n                \"limit\": {\n                  \"type\": \"number\",\n                  \"description\": \"Maximum number of tasks to return\",\n                  \"default\": 20\n                }\n              }\n            },\n            \"returns\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"success\": {\"type\": \"boolean\"},\n                \"tasks\": {\"type\": \"array\"},\n                \"output\": {\"type\": \"string\"},\n                \"error\": {\"type\": \"string\"}\n              }\n            }\n          },\n          \"viewTask\": {\n            \"description\": \"View detailed information about a specific task\",\n            \"params\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"taskId\": {\n                  \"type\": \"string\",\n                  \"description\": \"Task ID to view (required)\"\n                }\n              },\n              \"required\": [\"taskId\"]\n            },\n            \"returns\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"success\": {\"type\": \"boolean\"},\n                \"task\": {\"type\": \"object\"},\n                \"output\": {\"type\": \"string\"},\n                \"error\": {\"type\": \"string\"}\n              }\n            }\n          },\n          \"updateTask\": {\n            \"description\": \"Update an existing Sugar task\",\n            \"params\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"taskId\": {\n                  \"type\": \"string\",\n                  \"description\": \"Task ID to update (required)\"\n                },\n                \"title\": {\n                  \"type\": \"string\",\n                  \"description\": \"New task title\"\n                },\n                \"type\": {\n                  \"type\": \"string\",\n                  \"description\": \"New task type\"\n                },\n                \"priority\": {\n                  \"type\": \"number\",\n                  \"minimum\": 1,\n                  \"maximum\": 5,\n                  \"description\": \"New priority\"\n                },\n                \"status\": {\n                  \"type\": \"string\",\n                  \"enum\": [\"pending\", \"active\", \"completed\", \"failed\"],\n                  \"description\": \"New status\"\n                },\n                \"description\": {\n                  \"type\": \"string\",\n                  \"description\": \"New description\"\n                }\n              },\n              \"required\": [\"taskId\"]\n            },\n            \"returns\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"success\": {\"type\": \"boolean\"},\n                \"message\": {\"type\": \"string\"},\n                \"output\": {\"type\": \"string\"},\n                \"error\": {\"type\": \"string\"}\n              }\n            }\n          },\n          \"removeTask\": {\n            \"description\": \"Remove a task from the queue\",\n            \"params\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"taskId\": {\n                  \"type\": \"string\",\n                  \"description\": \"Task ID to remove (required)\"\n                }\n              },\n              \"required\": [\"taskId\"]\n            },\n            \"returns\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"success\": {\"type\": \"boolean\"},\n                \"message\": {\"type\": \"string\"},\n                \"output\": {\"type\": \"string\"},\n                \"error\": {\"type\": \"string\"}\n              }\n            }\n          },\n          \"getStatus\": {\n            \"description\": \"Get Sugar system status and metrics\",\n            \"params\": {\n              \"type\": \"object\",\n              \"properties\": {}\n            },\n            \"returns\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"success\": {\"type\": \"boolean\"},\n                \"status\": {\"type\": \"object\"},\n                \"output\": {\"type\": \"string\"},\n                \"error\": {\"type\": \"string\"}\n              }\n            }\n          },\n          \"runOnce\": {\n            \"description\": \"Execute one autonomous development cycle\",\n            \"params\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"dryRun\": {\n                  \"type\": \"boolean\",\n                  \"description\": \"Simulate execution without making changes\",\n                  \"default\": false\n                },\n                \"validate\": {\n                  \"type\": \"boolean\",\n                  \"description\": \"Validate configuration before running\",\n                  \"default\": false\n                }\n              }\n            },\n            \"returns\": {\n              \"type\": \"object\",\n              \"properties\": {\n                \"success\": {\"type\": \"boolean\"},\n                \"output\": {\"type\": \"string\"},\n                \"error\": {\"type\": \"string\"}\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n",
        ".claude-plugin/IMPLEMENTATION_ROADMAP.md": "# Sugar Claude Code Plugin - Implementation Roadmap\n\nComplete phased implementation plan for transforming Sugar into a premier Claude Code plugin.\n\n## Current Status\n\nâœ… **Phase 1: Foundation - COMPLETE**\n- Plugin structure created\n- Manifest file defined\n- Core documentation written\n\n## Detailed Implementation Plan\n\n### Phase 1: Foundation (Week 1-2) âœ… COMPLETE\n\n**Objectives**: Establish plugin structure and core components\n\n**Completed Tasks**:\n- [x] Create `.claude-plugin/` directory structure\n- [x] Write `plugin.json` manifest with all metadata\n- [x] Create plugin README with comprehensive documentation\n- [x] Define 5 core slash commands:\n  - [x] `/sugar-task` - Task creation\n  - [x] `/sugar-status` - System status\n  - [x] `/sugar-run` - Autonomous execution\n  - [x] `/sugar-review` - Task review\n  - [x] `/sugar-analyze` - Codebase analysis\n- [x] Define 3 specialized agents:\n  - [x] `sugar-orchestrator` - Main coordinator\n  - [x] `task-planner` - Strategic planning\n  - [x] `quality-guardian` - Quality enforcement\n- [x] Create hooks configuration with 12 intelligent hooks\n- [x] Write MCP server implementation guide\n- [x] Create comprehensive testing plan\n- [x] Prepare marketplace submission materials\n\n**Deliverables**:\n- âœ… Complete plugin structure\n- âœ… All command definitions\n- âœ… All agent definitions\n- âœ… Hooks configuration\n- âœ… Documentation suite\n\n---\n\n### Phase 2: MCP Server Implementation (Week 3-4) ðŸš§ IN PROGRESS\n\n**Objectives**: Build the bridge between Claude Code and Sugar CLI\n\n**Tasks**:\n- [ ] Set up Node.js project structure\n  ```bash\n  mkdir -p .claude-plugin/mcp-server\n  cd .claude-plugin/mcp-server\n  npm init -y\n  ```\n\n- [ ] Implement core MCP server (`sugar-mcp.js`)\n  - [ ] Server initialization\n  - [ ] Sugar CLI detection\n  - [ ] Command execution framework\n  - [ ] JSON-RPC communication\n\n- [ ] Implement MCP tool handlers\n  - [ ] `createTask()` - Task creation\n  - [ ] `listTasks()` - Task listing\n  - [ ] `viewTask()` - Task details\n  - [ ] `updateTask()` - Task updates\n  - [ ] `getStatus()` - System status\n  - [ ] `runOnce()` - Single execution\n\n- [ ] Add error handling\n  - [ ] Command validation\n  - [ ] Sugar CLI errors\n  - [ ] Timeout handling\n  - [ ] Graceful degradation\n\n- [ ] Create `.mcp.json` configuration\n  - [ ] Server declaration\n  - [ ] Method schemas\n  - [ ] Environment variables\n\n- [ ] Write MCP server tests\n  - [ ] Unit tests for handlers\n  - [ ] Integration tests with Sugar\n  - [ ] Error handling tests\n  - [ ] Performance tests\n\n**Deliverables**:\n- [ ] Working MCP server\n- [ ] Test suite passing\n- [ ] Integration verified\n- [ ] Documentation complete\n\n**Success Criteria**:\n- MCP server starts without errors\n- All tools respond correctly\n- Integration with Sugar CLI works\n- Tests achieve >80% coverage\n\n---\n\n### Phase 3: Testing & Quality Assurance (Week 5) ðŸ“‹ PENDING\n\n**Objectives**: Ensure reliability and quality across all platforms\n\n**Tasks**:\n- [ ] Implement plugin structure tests\n  - [ ] Manifest validation\n  - [ ] Directory structure\n  - [ ] File integrity\n\n- [ ] Implement command tests\n  - [ ] Frontmatter validation\n  - [ ] Example verification\n  - [ ] Consistency checks\n\n- [ ] Implement agent tests\n  - [ ] Definition validation\n  - [ ] Expertise verification\n  - [ ] Integration tests\n\n- [ ] Implement MCP server tests\n  - [ ] Request/response testing\n  - [ ] Error handling\n  - [ ] Performance benchmarks\n\n- [ ] Cross-platform testing\n  - [ ] macOS testing\n  - [ ] Linux testing\n  - [ ] Windows testing\n\n- [ ] Integration testing\n  - [ ] End-to-end workflows\n  - [ ] Multi-command sequences\n  - [ ] Error recovery\n\n- [ ] Performance testing\n  - [ ] Response time measurement\n  - [ ] Load testing\n  - [ ] Resource usage\n\n- [ ] Security testing\n  - [ ] Input validation\n  - [ ] Command injection prevention\n  - [ ] Secret detection\n\n**Deliverables**:\n- [ ] Complete test suite\n- [ ] CI/CD pipeline configured\n- [ ] All tests passing\n- [ ] Performance benchmarks met\n\n**Success Criteria**:\n- Test coverage >80%\n- All platforms pass tests\n- No critical security issues\n- Performance within targets\n\n---\n\n### Phase 4: Documentation & Examples (Week 6) ðŸ“š PENDING\n\n**Objectives**: Create comprehensive documentation and examples\n\n**Tasks**:\n- [ ] Create user guides\n  - [ ] Quick start guide\n  - [ ] Installation walkthrough\n  - [ ] Command reference\n  - [ ] Agent usage guide\n  - [ ] Troubleshooting guide\n\n- [ ] Create developer documentation\n  - [ ] Plugin architecture\n  - [ ] MCP server API\n  - [ ] Extension guide\n  - [ ] Contributing guide\n\n- [ ] Create video tutorials\n  - [ ] Installation video (2 min)\n  - [ ] Basic usage video (5 min)\n  - [ ] Advanced features video (10 min)\n  - [ ] Best practices video (5 min)\n\n- [ ] Create example projects\n  - [ ] Simple project setup\n  - [ ] Enterprise workflow example\n  - [ ] Team collaboration example\n  - [ ] CI/CD integration example\n\n- [ ] Create blog posts\n  - [ ] Announcement post\n  - [ ] Architecture deep dive\n  - [ ] Use case studies\n  - [ ] Best practices guide\n\n**Deliverables**:\n- [ ] Complete documentation site\n- [ ] Video tutorials published\n- [ ] Example projects available\n- [ ] Blog posts written\n\n**Success Criteria**:\n- New users can get started in <5 minutes\n- Documentation answers 90% of questions\n- Video tutorials have >80% completion rate\n- Examples are runnable and clear\n\n---\n\n### Phase 5: Marketplace Preparation (Week 7) ðŸŽ¯ PENDING\n\n**Objectives**: Prepare for marketplace submission and launch\n\n**Tasks**:\n- [ ] Create marketplace entry\n  - [ ] `marketplace.json` file\n  - [ ] Plugin metadata\n  - [ ] Keywords and tags\n  - [ ] Screenshots\n\n- [ ] Set up hosting\n  - [ ] GitHub repository for marketplace\n  - [ ] GitHub Pages (optional)\n  - [ ] CDN for assets\n\n- [ ] Create marketing materials\n  - [ ] High-quality screenshots\n  - [ ] Demo videos\n  - [ ] Social media graphics\n  - [ ] Press kit\n\n- [ ] Prepare submission\n  - [ ] Review checklist\n  - [ ] Quality audit\n  - [ ] Legal review\n  - [ ] Security audit\n\n- [ ] Submit to marketplace\n  - [ ] Official submission\n  - [ ] Follow-up communications\n  - [ ] Address feedback\n  - [ ] Final approval\n\n**Deliverables**:\n- [ ] Marketplace entry created\n- [ ] Marketing materials ready\n- [ ] Submission completed\n- [ ] Approval received\n\n**Success Criteria**:\n- Marketplace submission accepted\n- Premier plugin status granted\n- All quality checks passed\n- Launch date set\n\n---\n\n### Phase 6: Launch & Growth (Week 8+) ðŸš€ PENDING\n\n**Objectives**: Launch plugin and grow adoption\n\n**Tasks**:\n- [ ] Launch activities\n  - [ ] Announcement blog post\n  - [ ] Social media campaign\n  - [ ] Email to Sugar users\n  - [ ] Tech news submissions\n\n- [ ] Community building\n  - [ ] GitHub discussions setup\n  - [ ] Discord/Slack community\n  - [ ] Office hours schedule\n  - [ ] Contribution guidelines\n\n- [ ] Monitor and respond\n  - [ ] Issue triage and response\n  - [ ] User feedback collection\n  - [ ] Usage analytics review\n  - [ ] Performance monitoring\n\n- [ ] Iterate and improve\n  - [ ] Bug fixes\n  - [ ] Feature enhancements\n  - [ ] Documentation updates\n  - [ ] Performance optimizations\n\n- [ ] Scale operations\n  - [ ] Automated testing expanded\n  - [ ] CI/CD improvements\n  - [ ] Documentation automation\n  - [ ] Support automation\n\n**Deliverables**:\n- [ ] Successful launch\n- [ ] Active community\n- [ ] Regular updates\n- [ ] Growing adoption\n\n**Success Criteria**:\n- 100+ installations in first month\n- 4.5+ star rating\n- Active community engagement\n- Regular contributions\n\n---\n\n## Implementation Guidelines\n\n### Development Workflow\n\n```bash\n# 1. Start from develop branch\ngit checkout develop\ngit pull origin develop\n\n# 2. Create feature branch\ngit checkout -b feature/your-feature\n\n# 3. Implement changes\n# ... development work ...\n\n# 4. Run tests\npytest tests/plugin/ -v\n\n# 5. Format code\n./venv/bin/black .\n\n# 6. Commit changes\ngit add .\ngit commit -m \"feat(plugin): implement MCP server\"\n\n# 7. Push and create PR targeting develop\ngit push origin feature/your-feature\ngh pr create --base develop --title \"Add Claude Code Plugin Support\"\n```\n\n### Testing Strategy\n\n```bash\n# Unit tests\npytest tests/plugin/test_structure.py -v\n\n# Integration tests\npytest tests/plugin/test_integration.py -v\n\n# Cross-platform tests\npytest tests/plugin/test_platforms.py -v\n\n# All tests with coverage\npytest tests/plugin/ --cov=.claude-plugin --cov-report=html\n```\n\n### Quality Gates\n\nBefore moving to next phase:\n1. All tests passing\n2. Code review completed\n3. Documentation updated\n4. Performance benchmarks met\n5. Security audit passed\n\n### Communication\n\n**Weekly Updates**:\n- Progress summary\n- Blockers identified\n- Next week's goals\n- Help needed\n\n**Milestone Reviews**:\n- Phase completion review\n- Quality assessment\n- Stakeholder feedback\n- Go/no-go decision\n\n---\n\n## Risk Management\n\n### Technical Risks\n\n| Risk | Impact | Probability | Mitigation |\n|------|---------|-------------|------------|\n| MCP server complexity | High | Medium | Start simple, iterate |\n| Cross-platform issues | Medium | High | Test early and often |\n| Performance bottlenecks | Medium | Low | Benchmark regularly |\n| Breaking changes | High | Low | Version carefully |\n\n### Schedule Risks\n\n| Risk | Impact | Probability | Mitigation |\n|------|---------|-------------|------------|\n| MCP implementation delays | High | Medium | Allocate extra time |\n| Testing takes longer | Medium | High | Parallel testing |\n| Documentation incomplete | Medium | Medium | Write as you build |\n| Marketplace approval slow | Low | Medium | Submit early |\n\n### Resource Risks\n\n| Risk | Impact | Probability | Mitigation |\n|------|---------|-------------|------------|\n| Node.js expertise needed | Medium | High | Learn/hire |\n| Testing infrastructure | Medium | Low | Use GitHub Actions |\n| Video creation time | Low | Medium | Simple screencasts |\n| Support load | High | Medium | Automate, document |\n\n---\n\n## Success Metrics\n\n### Technical Metrics\n- Test coverage: >80%\n- Response time: <2s for commands\n- Uptime: >99.9%\n- Error rate: <0.1%\n\n### Adoption Metrics\n- Month 1: 100+ installations\n- Month 3: 500+ installations\n- Month 6: 1,000+ installations\n- Year 1: 5,000+ installations\n\n### Quality Metrics\n- User rating: >4.5/5\n- Issue resolution: <48h\n- Documentation clarity: >90%\n- User satisfaction: >85%\n\n### Engagement Metrics\n- GitHub stars: 500+ (year 1)\n- Active contributors: 10+\n- Community members: 200+\n- Tutorial views: 1,000+\n\n---\n\n## Next Actions\n\n### Immediate (This Week)\n1. âœ… Review plugin structure\n2. âœ… Verify all documentation\n3. â³ Begin MCP server implementation\n4. â³ Set up development environment\n\n### Short-term (Next 2 Weeks)\n1. Complete MCP server\n2. Write comprehensive tests\n3. Cross-platform testing\n4. Documentation review\n\n### Medium-term (Next Month)\n1. Marketplace submission\n2. Launch preparation\n3. Community setup\n4. Marketing materials\n\n### Long-term (Next Quarter)\n1. Premier plugin status\n2. 500+ installations\n3. Active community\n4. Regular updates\n\n---\n\n## Resources\n\n### Documentation\n- Claude Code Plugins: https://docs.claude.com/en/docs/claude-code/plugins\n- MCP Specification: https://docs.claude.com/en/docs/claude-code/plugins-reference\n- Marketplace: https://docs.claude.com/en/docs/claude-code/plugin-marketplaces\n\n### Tools\n- Node.js: https://nodejs.org/\n- pytest: https://pytest.org/\n- GitHub Actions: https://github.com/features/actions\n\n### Community\n- GitHub Issues: https://github.com/roboticforce/sugar/issues\n- Discussions: https://github.com/roboticforce/sugar/discussions\n- Email: contact@roboticforce.io\n\n---\n\n**Let's make Sugar the premier autonomous development plugin for Claude Code!** ðŸ°âœ¨\n",
        ".claude-plugin/MARKETPLACE_SUBMISSION.md": "# Sugar Plugin - Marketplace Submission Guide\n\nComplete guide for submitting Sugar to the Claude Code plugin marketplace and achieving premier plugin status.\n\n## Prerequisites Checklist\n\n### Technical Requirements\n- [x] Plugin structure complete (`.claude-plugin/` directory)\n- [x] Valid `plugin.json` manifest\n- [x] All slash commands implemented\n- [x] Specialized agents defined\n- [x] Hooks configuration complete\n- [ ] MCP server implemented and tested\n- [ ] Cross-platform compatibility verified\n- [ ] All tests passing\n\n### Documentation Requirements\n- [x] Plugin README complete\n- [x] Installation instructions clear\n- [x] Usage examples comprehensive\n- [x] API documentation available\n- [ ] Video tutorial created\n- [ ] Troubleshooting guide complete\n\n### Quality Requirements\n- [ ] Code review completed\n- [ ] Security audit passed\n- [ ] Performance benchmarks met\n- [ ] User testing completed\n- [ ] Feedback incorporated\n\n## Submission Process\n\n### Step 1: Create Marketplace Entry\n\nCreate a marketplace JSON file for hosting:\n\n**File**: `claude-plugins/marketplace.json`\n\n```json\n{\n  \"name\": \"sugar-marketplace\",\n  \"owner\": {\n    \"name\": \"Steven Leggett\",\n    \"email\": \"contact@roboticforce.io\",\n    \"website\": \"https://github.com/roboticforce/sugar\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"sugar\",\n      \"displayName\": \"Sugar - Autonomous Development\",\n      \"description\": \"AI-powered autonomous development system for complex, multi-step development tasks\",\n      \"version\": \"1.9.1\",\n      \"author\": {\n        \"name\": \"Steven Leggett\",\n        \"email\": \"contact@roboticforce.io\"\n      },\n      \"source\": {\n        \"type\": \"git\",\n        \"url\": \"https://github.com/roboticforce/sugar.git\",\n        \"subdirectory\": \".claude-plugin\"\n      },\n      \"homepage\": \"https://github.com/roboticforce/sugar\",\n      \"repository\": \"https://github.com/roboticforce/sugar\",\n      \"documentation\": \"https://github.com/roboticforce/sugar/blob/main/.claude-plugin/README.md\",\n      \"license\": \"MIT\",\n      \"keywords\": [\n        \"autonomous\",\n        \"development\",\n        \"ai\",\n        \"task-management\",\n        \"automation\",\n        \"agents\",\n        \"enterprise\",\n        \"workflow\",\n        \"productivity\"\n      ],\n      \"category\": \"development-tools\",\n      \"requires\": {\n        \"claude-code\": \">=1.0.0\",\n        \"python\": \">=3.11\"\n      },\n      \"capabilities\": {\n        \"commands\": [\n          \"/sugar-task\",\n          \"/sugar-status\",\n          \"/sugar-run\",\n          \"/sugar-review\",\n          \"/sugar-analyze\"\n        ],\n        \"agents\": [\n          \"sugar-orchestrator\",\n          \"task-planner\",\n          \"quality-guardian\"\n        ],\n        \"hooks\": true,\n        \"mcp\": true\n      },\n      \"screenshots\": [\n        \"https://raw.githubusercontent.com/roboticforce/sugar/main/docs/screenshots/task-creation.png\",\n        \"https://raw.githubusercontent.com/roboticforce/sugar/main/docs/screenshots/status-view.png\",\n        \"https://raw.githubusercontent.com/roboticforce/sugar/main/docs/screenshots/autonomous-mode.png\"\n      ],\n      \"featured\": true,\n      \"tags\": [\n        \"premier\",\n        \"enterprise\",\n        \"autonomous\",\n        \"productivity\"\n      ]\n    }\n  ]\n}\n```\n\n### Step 2: Host Marketplace File\n\nOptions for hosting:\n\n#### Option A: GitHub Repository (Recommended)\n```bash\n# Create marketplace repository\nmkdir claude-plugins\ncd claude-plugins\ngit init\n\n# Add marketplace.json\ncp /path/to/marketplace.json .\n\n# Commit and push\ngit add marketplace.json\ngit commit -m \"Add Sugar plugin to marketplace\"\ngit remote add origin https://github.com/cdnsteve/claude-plugins.git\ngit push -u origin main\n```\n\n#### Option B: GitHub Gist\n```bash\n# Create gist with marketplace.json\ngh gist create marketplace.json --public\n```\n\n#### Option C: GitHub Pages\n```bash\n# Host via GitHub Pages\n# marketplace.json will be accessible at:\n# https://cdnsteve.github.io/claude-plugins/marketplace.json\n```\n\n### Step 3: Submit to Official Marketplace\n\nContact Claude Code team with:\n\n**Email Template:**\n\n```\nSubject: Sugar Plugin - Premier Marketplace Submission\n\nDear Claude Code Team,\n\nI am submitting the Sugar plugin for inclusion in the official Claude Code plugin marketplace.\n\nPlugin Details:\n- Name: Sugar - Autonomous Development\n- Category: Development Tools\n- Type: Premier Plugin\n- Repository: https://github.com/roboticforce/sugar\n- Marketplace: https://github.com/cdnsteve/claude-plugins\n\nKey Features:\nâœ… Autonomous AI development workflows\nâœ… Enterprise task management\nâœ… Intelligent agent orchestration\nâœ… Automatic work discovery\nâœ… Team collaboration support\n\nPlugin Capabilities:\n- 5 specialized slash commands\n- 3 custom agents\n- 12 intelligent hooks\n- MCP server for CLI integration\n- Cross-platform support (macOS, Linux, Windows)\n\nDocumentation:\n- Plugin README: [link]\n- Installation Guide: [link]\n- API Reference: [link]\n- Video Tutorial: [link]\n\nQuality Assurance:\nâœ… Comprehensive test suite (>80% coverage)\nâœ… Security audit completed\nâœ… Cross-platform compatibility verified\nâœ… User acceptance testing positive\nâœ… Performance benchmarks met\n\nPremier Plugin Justification:\n1. First true autonomous development platform for Claude Code\n2. Enterprise-grade reliability and features\n3. Comprehensive documentation and support\n4. Active maintenance and roadmap\n5. Unique value proposition vs existing plugins\n\nContact Information:\n- Name: Steven Leggett\n- Email: contact@roboticforce.io\n- GitHub: @cdnsteve\n\nI am available for any questions or additional information needed.\n\nThank you for considering Sugar for the Claude Code marketplace.\n\nBest regards,\nSteven Leggett\n```\n\n### Step 4: Create Marketing Materials\n\n#### Screenshots\nCapture high-quality screenshots:\n1. Task creation flow\n2. Status dashboard\n3. Autonomous execution\n4. Agent orchestration\n5. Code review workflow\n\n#### Video Tutorial\nCreate 3-5 minute video showing:\n1. Installation (30 seconds)\n2. First task creation (1 minute)\n3. Autonomous execution (1 minute)\n4. Advanced features (2 minutes)\n5. Best practices (30 seconds)\n\n#### Blog Post\nWrite announcement post:\n```markdown\n# Introducing Sugar: Autonomous Development for Claude Code\n\nTransform your Claude Code experience with true autonomous development...\n\n## What is Sugar?\n[Compelling description]\n\n## Key Features\n[Highlight unique capabilities]\n\n## Getting Started\n[Quick start guide]\n\n## Real-World Examples\n[Success stories]\n\n## What's Next\n[Roadmap]\n```\n\n### Step 5: Community Engagement\n\n#### GitHub Repository\n- Clear README with badges\n- CONTRIBUTING.md guide\n- Issue templates\n- Pull request template\n- Code of conduct\n- Security policy\n\n#### Social Media\n- Twitter/X announcement\n- LinkedIn post\n- Reddit (r/ClaudeCode)\n- Hacker News\n- Dev.to article\n\n#### Documentation Site\nCreate dedicated site:\n- Quick start guide\n- Comprehensive tutorials\n- API reference\n- Best practices\n- FAQ\n- Troubleshooting\n\n## Premier Plugin Requirements\n\nTo achieve and maintain premier plugin status:\n\n### Technical Excellence\n- âœ… Comprehensive test coverage (>80%)\n- âœ… Cross-platform support\n- âœ… Performance optimized\n- âœ… Security hardened\n- âœ… Backward compatible\n\n### Documentation Quality\n- âœ… Clear installation instructions\n- âœ… Comprehensive usage examples\n- âœ… API reference complete\n- âœ… Troubleshooting guide\n- âœ… Video tutorials\n\n### User Experience\n- âœ… Intuitive commands\n- âœ… Helpful error messages\n- âœ… Consistent behavior\n- âœ… Responsive to feedback\n- âœ… Active support\n\n### Community\n- âœ… Active maintenance\n- âœ… Regular updates\n- âœ… Responsive to issues\n- âœ… Open to contributions\n- âœ… Engaged with users\n\n### Innovation\n- âœ… Unique capabilities\n- âœ… Solves real problems\n- âœ… Pushes boundaries\n- âœ… Inspires others\n- âœ… Sets standards\n\n## Post-Submission Checklist\n\nAfter submission:\n\n### Immediate (Week 1)\n- [ ] Monitor submission status\n- [ ] Respond to marketplace team feedback\n- [ ] Fix any identified issues\n- [ ] Update documentation as needed\n\n### Short-term (Month 1)\n- [ ] Monitor user feedback\n- [ ] Address reported issues\n- [ ] Improve based on usage patterns\n- [ ] Create additional tutorials\n\n### Long-term (Ongoing)\n- [ ] Regular updates and improvements\n- [ ] Feature additions based on feedback\n- [ ] Maintain test coverage\n- [ ] Security updates\n- [ ] Performance optimizations\n\n## Success Metrics\n\nTrack these metrics:\n\n### Adoption Metrics\n- Plugin installations\n- Active users\n- Usage frequency\n- Feature adoption rates\n\n### Quality Metrics\n- Issue resolution time\n- User satisfaction score\n- Test coverage percentage\n- Performance benchmarks\n\n### Engagement Metrics\n- GitHub stars\n- Community contributions\n- Documentation views\n- Video tutorial views\n\n## Maintenance Plan\n\n### Regular Updates\n- **Weekly**: Monitor issues and discussions\n- **Monthly**: Release updates with fixes and improvements\n- **Quarterly**: Major feature releases\n- **Annually**: Architecture reviews and major updates\n\n### Support Strategy\n- GitHub Issues for bug reports\n- GitHub Discussions for questions\n- Email for security issues\n- Discord/Slack for community\n\n### Deprecation Policy\n- Announce breaking changes 3 months in advance\n- Maintain backward compatibility when possible\n- Provide migration guides\n- Support legacy versions for 6 months\n\n## Marketing Strategy\n\n### Launch Phase\n- Announcement blog post\n- Social media campaign\n- Email to Beta users\n- Submit to tech news sites\n- Post on developer forums\n\n### Growth Phase\n- Regular blog posts\n- Tutorial videos\n- Guest posts on dev blogs\n- Conference talks\n- Podcast interviews\n\n### Maturity Phase\n- Case studies\n- Success stories\n- Comparison guides\n- Best practices\n- Advanced tutorials\n\n## Contact Information\n\nFor marketplace submission support:\n- **Primary**: contact@roboticforce.io\n- **GitHub**: @cdnsteve\n- **Website**: https://github.com/roboticforce/sugar\n\n## Next Steps\n\n1. âœ… Complete plugin development\n2. âœ… Write comprehensive documentation\n3. âœ… Create marketing materials\n4. âœ… Submit to marketplace\n5. â³ Monitor and respond to feedback\n6. â³ Iterate based on usage\n7. â³ Grow community\n8. â³ Maintain excellence\n\n---\n\n**Sugar - Transform Claude Code into an autonomous development powerhouse!** ðŸ°âœ¨\n",
        ".claude-plugin/MCP_SERVER_IMPLEMENTATION.md": "# Sugar MCP Server Implementation Guide\n\nThis document outlines the implementation plan for the Sugar MCP (Model Context Protocol) server that bridges Claude Code with Sugar's Python CLI.\n\n## Architecture Overview\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚ Claude Code â”‚ â—„â”€â”€â”€â”€â”€â–º â”‚ MCP Server   â”‚ â—„â”€â”€â”€â”€â”€â–º â”‚ Sugar CLI   â”‚\nâ”‚   (Client)  â”‚  JSON   â”‚ (Node.js)    â”‚  spawn  â”‚  (Python)   â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n                              â”‚\n                              â–¼\n                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n                        â”‚ .sugar/      â”‚\n                        â”‚  - sugar.db  â”‚\n                        â”‚  - config    â”‚\n                        â”‚  - logs      â”‚\n                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n## MCP Server Specification\n\n### File: `mcp-server/sugar-mcp.js`\n\n```javascript\n#!/usr/bin/env node\n\nimport { spawn } from 'child_process';\nimport { promisify } from 'util';\nimport { access, constants } from 'fs';\nimport path from 'path';\n\nconst accessAsync = promisify(access);\n\n/**\n * Sugar MCP Server\n * Bridges Claude Code with Sugar's Python CLI\n */\nclass SugarMCPServer {\n  constructor() {\n    this.sugarCommand = null;\n    this.projectRoot = process.cwd();\n  }\n\n  /**\n   * Initialize the MCP server\n   */\n  async initialize() {\n    console.log('Sugar MCP Server initializing...');\n\n    // Detect Sugar installation\n    this.sugarCommand = await this.detectSugarCommand();\n\n    if (!this.sugarCommand) {\n      throw new Error('Sugar CLI not found. Please install: pip install sugarai');\n    }\n\n    // Verify Sugar is initialized in project\n    const sugarDir = path.join(this.projectRoot, '.sugar');\n    try {\n      await accessAsync(sugarDir, constants.F_OK);\n    } catch {\n      console.warn('Sugar not initialized in project. Run: sugar init');\n    }\n\n    console.log(`Sugar MCP Server ready. Using: ${this.sugarCommand}`);\n  }\n\n  /**\n   * Detect Sugar CLI command location\n   */\n  async detectSugarCommand() {\n    const candidates = [\n      'sugar',\n      '/usr/local/bin/sugar',\n      path.join(process.env.HOME, '.local', 'bin', 'sugar'),\n      './venv/bin/sugar'\n    ];\n\n    for (const cmd of candidates) {\n      try {\n        const result = await this.execSugar(cmd, ['--version']);\n        if (result.success) {\n          return cmd;\n        }\n      } catch {\n        continue;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Execute Sugar CLI command\n   */\n  async execSugar(command, args, options = {}) {\n    return new Promise((resolve, reject) => {\n      const proc = spawn(command, args, {\n        cwd: options.cwd || this.projectRoot,\n        env: { ...process.env, ...options.env }\n      });\n\n      let stdout = '';\n      let stderr = '';\n\n      proc.stdout.on('data', (data) => {\n        stdout += data.toString();\n      });\n\n      proc.stderr.on('data', (data) => {\n        stderr += data.toString();\n      });\n\n      proc.on('close', (code) => {\n        resolve({\n          success: code === 0,\n          code,\n          stdout,\n          stderr\n        });\n      });\n\n      proc.on('error', (error) => {\n        reject(error);\n      });\n    });\n  }\n\n  /**\n   * MCP Tool Handlers\n   */\n\n  async createTask(params) {\n    const {\n      title,\n      type = 'feature',\n      priority = 3,\n      urgent = false,\n      description = null,\n      json_data = null\n    } = params;\n\n    const args = ['add', title];\n\n    if (type) args.push('--type', type);\n    if (priority) args.push('--priority', priority.toString());\n    if (urgent) args.push('--urgent');\n    if (description && json_data) {\n      args.push('--json', '--description', JSON.stringify(json_data));\n    } else if (description) {\n      args.push('--description', description);\n    }\n\n    const result = await this.execSugar(this.sugarCommand, args);\n\n    if (result.success) {\n      // Parse task ID from output\n      const match = result.stdout.match(/Task created: (.+)/);\n      const taskId = match ? match[1] : null;\n\n      return {\n        success: true,\n        taskId,\n        message: 'Task created successfully',\n        output: result.stdout\n      };\n    } else {\n      return {\n        success: false,\n        error: result.stderr,\n        message: 'Failed to create task'\n      };\n    }\n  }\n\n  async listTasks(params = {}) {\n    const {\n      status = null,\n      type = null,\n      priority = null,\n      limit = 20\n    } = params;\n\n    const args = ['list'];\n\n    if (status) args.push('--status', status);\n    if (type) args.push('--type', type);\n    if (priority) args.push('--priority', priority.toString());\n    if (limit) args.push('--limit', limit.toString());\n\n    const result = await this.execSugar(this.sugarCommand, args);\n\n    if (result.success) {\n      return {\n        success: true,\n        tasks: this.parseTasks(result.stdout),\n        output: result.stdout\n      };\n    } else {\n      return {\n        success: false,\n        error: result.stderr\n      };\n    }\n  }\n\n  async viewTask(params) {\n    const { taskId } = params;\n\n    const result = await this.execSugar(this.sugarCommand, ['view', taskId]);\n\n    if (result.success) {\n      return {\n        success: true,\n        task: this.parseTaskDetails(result.stdout),\n        output: result.stdout\n      };\n    } else {\n      return {\n        success: false,\n        error: result.stderr\n      };\n    }\n  }\n\n  async updateTask(params) {\n    const {\n      taskId,\n      title = null,\n      type = null,\n      priority = null,\n      status = null,\n      description = null\n    } = params;\n\n    const args = ['update', taskId];\n\n    if (title) args.push('--title', title);\n    if (type) args.push('--type', type);\n    if (priority) args.push('--priority', priority.toString());\n    if (status) args.push('--status', status);\n    if (description) args.push('--description', description);\n\n    const result = await this.execSugar(this.sugarCommand, args);\n\n    return {\n      success: result.success,\n      message: result.success ? 'Task updated successfully' : 'Failed to update task',\n      output: result.stdout,\n      error: result.stderr\n    };\n  }\n\n  async getStatus() {\n    const result = await this.execSugar(this.sugarCommand, ['status']);\n\n    if (result.success) {\n      return {\n        success: true,\n        status: this.parseStatus(result.stdout),\n        output: result.stdout\n      };\n    } else {\n      return {\n        success: false,\n        error: result.stderr\n      };\n    }\n  }\n\n  async runOnce(params = {}) {\n    const { dryRun = false, validate = false } = params;\n\n    const args = ['run', '--once'];\n    if (dryRun) args.push('--dry-run');\n    if (validate) args.push('--validate');\n\n    const result = await this.execSugar(this.sugarCommand, args);\n\n    return {\n      success: result.success,\n      output: result.stdout,\n      error: result.stderr\n    };\n  }\n\n  /**\n   * Parsing utilities\n   */\n\n  parseTasks(output) {\n    // Parse Sugar task list output\n    // Format: [status] Title (ID: task-xxx)\n    const tasks = [];\n    const lines = output.split('\\n');\n\n    for (const line of lines) {\n      const match = line.match(/\\[(.*?)\\] (.*?) \\(ID: (.*?)\\)/);\n      if (match) {\n        tasks.push({\n          status: match[1],\n          title: match[2],\n          id: match[3]\n        });\n      }\n    }\n\n    return tasks;\n  }\n\n  parseTaskDetails(output) {\n    // Parse detailed task information\n    // This would parse the `sugar view` output\n    return {\n      raw: output\n      // TODO: Parse structured details\n    };\n  }\n\n  parseStatus(output) {\n    // Parse `sugar status` output\n    return {\n      raw: output\n      // TODO: Parse structured status\n    };\n  }\n}\n\n/**\n * MCP Server Entry Point\n */\nasync function main() {\n  const server = new SugarMCPServer();\n\n  try {\n    await server.initialize();\n\n    // MCP communication loop\n    process.stdin.on('data', async (data) => {\n      try {\n        const request = JSON.parse(data.toString());\n        let response;\n\n        switch (request.method) {\n          case 'createTask':\n            response = await server.createTask(request.params);\n            break;\n          case 'listTasks':\n            response = await server.listTasks(request.params);\n            break;\n          case 'viewTask':\n            response = await server.viewTask(request.params);\n            break;\n          case 'updateTask':\n            response = await server.updateTask(request.params);\n            break;\n          case 'getStatus':\n            response = await server.getStatus();\n            break;\n          case 'runOnce':\n            response = await server.runOnce(request.params);\n            break;\n          default:\n            response = {\n              success: false,\n              error: `Unknown method: ${request.method}`\n            };\n        }\n\n        process.stdout.write(JSON.stringify(response) + '\\n');\n      } catch (error) {\n        process.stdout.write(JSON.stringify({\n          success: false,\n          error: error.message\n        }) + '\\n');\n      }\n    });\n\n  } catch (error) {\n    console.error('Failed to initialize Sugar MCP Server:', error);\n    process.exit(1);\n  }\n}\n\nmain();\n```\n\n### Package Configuration: `mcp-server/package.json`\n\n```json\n{\n  \"name\": \"sugar-mcp-server\",\n  \"version\": \"1.9.1\",\n  \"description\": \"MCP server for Sugar autonomous development system\",\n  \"type\": \"module\",\n  \"main\": \"sugar-mcp.js\",\n  \"bin\": {\n    \"sugar-mcp\": \"./sugar-mcp.js\"\n  },\n  \"scripts\": {\n    \"start\": \"node sugar-mcp.js\",\n    \"test\": \"node --test\"\n  },\n  \"keywords\": [\"sugar\", \"claude-code\", \"mcp\", \"autonomous-development\"],\n  \"author\": \"Steven Leggett <contact@roboticforce.io>\",\n  \"license\": \"MIT\",\n  \"engines\": {\n    \"node\": \">=16.0.0\"\n  },\n  \"dependencies\": {},\n  \"devDependencies\": {\n    \"eslint\": \"^8.0.0\"\n  }\n}\n```\n\n### MCP Server Declaration: `.mcp.json`\n\n```json\n{\n  \"mcpServers\": {\n    \"sugar\": {\n      \"command\": \"node\",\n      \"args\": [\"./mcp-server/sugar-mcp.js\"],\n      \"env\": {\n        \"SUGAR_PROJECT_ROOT\": \"${workspaceFolder}\"\n      },\n      \"schema\": {\n        \"methods\": {\n          \"createTask\": {\n            \"description\": \"Create a new Sugar task\",\n            \"params\": {\n              \"title\": {\"type\": \"string\", \"required\": true},\n              \"type\": {\"type\": \"string\", \"enum\": [\"bug_fix\", \"feature\", \"test\", \"refactor\", \"documentation\"]},\n              \"priority\": {\"type\": \"number\", \"min\": 1, \"max\": 5},\n              \"urgent\": {\"type\": \"boolean\"},\n              \"description\": {\"type\": \"string\"},\n              \"json_data\": {\"type\": \"object\"}\n            }\n          },\n          \"listTasks\": {\n            \"description\": \"List Sugar tasks\",\n            \"params\": {\n              \"status\": {\"type\": \"string\", \"enum\": [\"pending\", \"active\", \"completed\", \"failed\"]},\n              \"type\": {\"type\": \"string\"},\n              \"priority\": {\"type\": \"number\"},\n              \"limit\": {\"type\": \"number\"}\n            }\n          },\n          \"viewTask\": {\n            \"description\": \"View detailed task information\",\n            \"params\": {\n              \"taskId\": {\"type\": \"string\", \"required\": true}\n            }\n          },\n          \"updateTask\": {\n            \"description\": \"Update an existing task\",\n            \"params\": {\n              \"taskId\": {\"type\": \"string\", \"required\": true},\n              \"title\": {\"type\": \"string\"},\n              \"type\": {\"type\": \"string\"},\n              \"priority\": {\"type\": \"number\"},\n              \"status\": {\"type\": \"string\"},\n              \"description\": {\"type\": \"string\"}\n            }\n          },\n          \"getStatus\": {\n            \"description\": \"Get Sugar system status\"\n          },\n          \"runOnce\": {\n            \"description\": \"Execute one autonomous cycle\",\n            \"params\": {\n              \"dryRun\": {\"type\": \"boolean\"},\n              \"validate\": {\"type\": \"boolean\"}\n            }\n          }\n        }\n      }\n    }\n  }\n}\n```\n\n## Installation Steps\n\n### 1. Install Sugar CLI\n```bash\npip install sugarai\n```\n\n### 2. Install MCP Server\n```bash\ncd .claude-plugin/mcp-server\nnpm install\n```\n\n### 3. Configure Claude Code\nThe `.mcp.json` file will be automatically detected by Claude Code when the plugin is installed.\n\n### 4. Verify Installation\n```bash\n# Test MCP server directly\necho '{\"method\":\"getStatus\",\"params\":{}}' | node mcp-server/sugar-mcp.js\n\n# Should return Sugar status JSON\n```\n\n## Usage Examples\n\n### From Claude Code Conversations\n\nClaude Code will automatically use the MCP server when slash commands are invoked:\n\n```\nUser: /sugar-task \"Fix authentication bug\" --urgent\nâ†’ MCP calls createTask({title: \"...\", urgent: true})\nâ†’ Sugar CLI executes: sugar add \"...\" --urgent\nâ†’ Result returned to Claude\n```\n\n### Programmatic Access\n\n```javascript\n// Example of calling MCP methods programmatically\nconst request = {\n  method: 'createTask',\n  params: {\n    title: 'Implement OAuth2',\n    type: 'feature',\n    priority: 4,\n    json_data: {\n      context: 'Add OAuth2 authentication',\n      agent_assignments: {\n        backend_developer: 'Implementation',\n        qa_test_engineer: 'Testing'\n      }\n    }\n  }\n};\n\n// Send via stdin, receive via stdout\n```\n\n## Testing\n\n### Unit Tests: `mcp-server/test/sugar-mcp.test.js`\n\n```javascript\nimport { test } from 'node:test';\nimport { strict as assert } from 'node:assert';\nimport { SugarMCPServer } from '../sugar-mcp.js';\n\ntest('Sugar MCP Server - Task parsing', async () => {\n  const server = new SugarMCPServer();\n  const output = '[pending] Fix auth bug (ID: task-123)\\n[active] Add tests (ID: task-124)';\n\n  const tasks = server.parseTasks(output);\n\n  assert.equal(tasks.length, 2);\n  assert.equal(tasks[0].id, 'task-123');\n  assert.equal(tasks[0].status, 'pending');\n});\n\n// More tests...\n```\n\n### Integration Tests\n\n```bash\n# Test with actual Sugar CLI\nnpm test -- --integration\n```\n\n## Error Handling\n\nThe MCP server handles:\n- Sugar CLI not installed\n- Sugar not initialized in project\n- Command execution failures\n- Invalid parameters\n- JSON parsing errors\n- Process spawn errors\n\n## Performance Considerations\n\n- **Process Pooling**: For frequent operations, consider keeping a Sugar CLI process alive\n- **Caching**: Cache Sugar status for short periods\n- **Async Operations**: All Sugar CLI calls are non-blocking\n- **Timeouts**: Add timeouts for long-running operations\n\n## Security\n\n- **Command Injection**: All parameters are properly escaped\n- **Path Validation**: Project root is validated\n- **Environment Isolation**: Each project gets isolated Sugar instance\n- **No Sensitive Data**: MCP server doesn't store credentials\n\n## Future Enhancements\n\n1. **WebSocket Support**: Real-time task updates\n2. **Streaming Output**: Stream `sugar run` output\n3. **Advanced Querying**: SQL-like task queries\n4. **Batch Operations**: Multiple task operations in one call\n5. **Event Subscriptions**: Subscribe to task changes\n\n## Troubleshooting\n\n### MCP Server Not Starting\n```bash\n# Check Node.js version\nnode --version  # Should be >=16\n\n# Test MCP server directly\nnode mcp-server/sugar-mcp.js\n# Should show: \"Sugar MCP Server initializing...\"\n```\n\n### Sugar CLI Not Found\n```bash\n# Verify Sugar installation\nwhich sugar\nsugar --version\n\n# If not found, install\npip install sugarai\n```\n\n### Permission Errors\n```bash\n# Make MCP server executable\nchmod +x mcp-server/sugar-mcp.js\n```\n\n## Documentation\n\nComplete MCP server documentation at:\n- API Reference: `docs/mcp-api-reference.md`\n- Integration Guide: `docs/mcp-integration.md`\n- Troubleshooting: `docs/mcp-troubleshooting.md`\n",
        ".claude-plugin/PLUGIN_OVERVIEW.md": "# Sugar Claude Code Plugin - Complete Overview\n\n**Status**: Phase 1 Complete - Foundation Built âœ…\n**Next Phase**: MCP Server Implementation\n**Target**: Premier Plugin Status in Claude Code Marketplace\n\n---\n\n## What We've Built\n\nA comprehensive Claude Code plugin infrastructure that transforms Sugar into a first-class autonomous development platform within Claude Code.\n\n### Plugin Structure\n\n```\n.claude-plugin/\nâ”œâ”€â”€ plugin.json                          # Plugin manifest with metadata\nâ”œâ”€â”€ README.md                            # User-facing plugin documentation\nâ”œâ”€â”€ IMPLEMENTATION_ROADMAP.md            # Phased development plan\nâ”œâ”€â”€ TESTING_PLAN.md                      # Comprehensive test strategy\nâ”œâ”€â”€ MARKETPLACE_SUBMISSION.md            # Marketplace submission guide\nâ”œâ”€â”€ MCP_SERVER_IMPLEMENTATION.md         # MCP server technical spec\nâ”œâ”€â”€ PLUGIN_OVERVIEW.md                   # This file\nâ”‚\nâ”œâ”€â”€ commands/                            # 5 Slash Commands\nâ”‚   â”œâ”€â”€ sugar-task.md                    # /sugar-task - Task creation\nâ”‚   â”œâ”€â”€ sugar-status.md                  # /sugar-status - System status\nâ”‚   â”œâ”€â”€ sugar-run.md                     # /sugar-run - Autonomous execution\nâ”‚   â”œâ”€â”€ sugar-review.md                  # /sugar-review - Task management\nâ”‚   â””â”€â”€ sugar-analyze.md                 # /sugar-analyze - Codebase analysis\nâ”‚\nâ”œâ”€â”€ agents/                              # 3 Specialized Agents\nâ”‚   â”œâ”€â”€ sugar-orchestrator.md            # Main coordination agent\nâ”‚   â”œâ”€â”€ task-planner.md                  # Strategic planning specialist\nâ”‚   â””â”€â”€ quality-guardian.md              # Quality enforcement specialist\nâ”‚\nâ””â”€â”€ hooks/                               # Intelligent Event Handling\n    â””â”€â”€ hooks.json                       # 12 configured hooks\n```\n\n---\n\n## Core Components\n\n### 1. Slash Commands (5)\n\n#### `/sugar-task` - Comprehensive Task Creation\n- Interactive task creation wizard\n- Rich JSON context support\n- Agent assignment suggestions\n- Priority and type guidance\n- Success criteria definition\n\n#### `/sugar-status` - System Monitoring\n- Real-time task queue status\n- Execution metrics\n- Health indicators\n- Actionable insights\n- Resource usage\n\n#### `/sugar-run` - Autonomous Execution\n- Safe dry-run mode\n- Configuration validation\n- Single-cycle testing\n- Continuous autonomous mode\n- Progress monitoring\n\n#### `/sugar-review` - Interactive Task Management\n- Task queue review\n- Priority adjustment\n- Bulk operations\n- Filtering and search\n- Recommendations engine\n\n#### `/sugar-analyze` - Intelligent Work Discovery\n- Error log analysis\n- Code quality scanning\n- Test coverage analysis\n- GitHub integration\n- Automatic task creation\n\n### 2. Specialized Agents (3)\n\n#### Sugar Orchestrator\n**Role**: Primary coordination and workflow management\n\n**Capabilities**:\n- Complex workflow orchestration\n- Multi-agent coordination\n- Quality assurance oversight\n- Progress monitoring\n- Decision-making framework\n\n**Use Cases**:\n- Complex multi-step features\n- Cross-cutting changes\n- Enterprise workflows\n- Quality-critical work\n\n#### Task Planner\n**Role**: Strategic planning and task breakdown\n\n**Capabilities**:\n- Requirements analysis\n- Task decomposition\n- Architecture planning\n- Risk assessment\n- Effort estimation\n\n**Use Cases**:\n- Large feature planning\n- Refactoring projects\n- Architecture decisions\n- Complex bug investigation\n\n#### Quality Guardian\n**Role**: Code quality and testing enforcement\n\n**Capabilities**:\n- Code quality review\n- Testing validation\n- Security auditing\n- Performance analysis\n- Best practices enforcement\n\n**Use Cases**:\n- Pre-commit reviews\n- Release validation\n- Security audits\n- Performance optimization\n\n### 3. Intelligent Hooks (12)\n\nHooks automatically enhance the development workflow:\n\n1. **Auto Task Discovery** - Suggests tasks from error patterns\n2. **Session Start Status** - Shows Sugar status on session start\n3. **Commit Task Update** - Reminds to update task status after commits\n4. **Test Failure Tracking** - Creates tasks from test failures\n5. **Autonomous Mode Suggestion** - Recommends starting autonomous mode\n6. **Quality Reminder** - Prompts for testing and review\n7. **GitHub Issue Sync** - Suggests syncing GitHub issues\n8. **Doc Update Reminder** - Reminds about documentation\n9. **Security Scan Reminder** - Alerts on security-sensitive changes\n10. **Performance Check** - Suggests performance review\n11. **Backup Reminder** - Prompts to commit work\n12. **Task Type Suggestion** - Educates about custom task types\n\n---\n\n## Technical Architecture\n\n### Hybrid Approach\n\nSugar uses a **hybrid architecture** combining:\n- **Python CLI** (existing) - Task management, execution, persistence\n- **Claude Code Plugin** (new) - Native integration, UX, orchestration\n- **MCP Server** (planned) - Bridge between Claude Code and Sugar CLI\n\n### Communication Flow\n\n```\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  User in        â”‚\nâ”‚  Claude Code    â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚\n         â”‚ Invokes slash command\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Slash Command  â”‚\nâ”‚  Handler        â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚\n         â”‚ Calls MCP method\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  MCP Server     â”‚\nâ”‚  (Node.js)      â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚\n         â”‚ Spawns process\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  Sugar CLI      â”‚\nâ”‚  (Python)       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n         â”‚\n         â”‚ Reads/writes\n         â–¼\nâ”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\nâ”‚  .sugar/        â”‚\nâ”‚  Database       â”‚\nâ””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n```\n\n### Key Design Decisions\n\n1. **Preserve Sugar's Core** - Don't rewrite, integrate\n2. **Claude Code Native UX** - Feels like built-in feature\n3. **Progressive Disclosure** - Simple start, advanced optional\n4. **Fail Gracefully** - Works even if components unavailable\n5. **Zero Breaking Changes** - Backwards compatible\n\n---\n\n## Unique Value Proposition\n\n### What Makes Sugar a Premier Plugin?\n\n#### 1. True Autonomy\nUnlike simple automation:\n- Genuine autonomous development workflows\n- Multi-agent orchestration\n- Intelligent work discovery\n- Self-improving system\n\n#### 2. Enterprise-Grade\nBuilt for serious development:\n- Persistent task management (SQLite)\n- Audit trails and compliance\n- Team collaboration support\n- Multi-project isolation\n\n#### 3. Comprehensive Integration\nDeepest Claude Code integration:\n- 5 specialized commands\n- 3 custom agents\n- 12 intelligent hooks\n- MCP server bridge\n\n#### 4. Production Quality\nProfessional reliability:\n- Comprehensive test coverage\n- Cross-platform support\n- Security hardened\n- Performance optimized\n\n#### 5. Innovation Leadership\nPioneering new category:\n- First autonomous development platform\n- Sets standards for AI workflows\n- Pushes Claude Code boundaries\n- Inspires ecosystem\n\n---\n\n## Implementation Status\n\n### Phase 1: Foundation âœ… COMPLETE\n\n**What's Done**:\n- âœ… Complete plugin structure\n- âœ… All 5 slash commands defined\n- âœ… All 3 agents created\n- âœ… 12 hooks configured\n- âœ… MCP server specification written\n- âœ… Testing plan comprehensive\n- âœ… Marketplace materials prepared\n- âœ… Documentation complete\n\n**What Works Now**:\n- Plugin structure valid\n- Commands well-documented\n- Agents clearly defined\n- Hooks properly configured\n- Ready for MCP implementation\n\n### Phase 2: MCP Server ðŸš§ NEXT\n\n**What's Needed**:\n- Node.js MCP server implementation\n- Sugar CLI integration\n- Request/response handling\n- Error handling\n- Testing and validation\n\n**Timeline**: 2-3 weeks\n\n### Phase 3-6: Testing, Documentation, Launch ðŸ“‹ PLANNED\n\nSee `IMPLEMENTATION_ROADMAP.md` for details.\n\n---\n\n## Getting Started (For Developers)\n\n### Current Branch\n```bash\ngit branch\n# * develop  (all plugin work merged here)\n```\n\n### File Structure\n```bash\nls -la .claude-plugin/\n# 15 files created\n# All documentation complete\n# Ready for implementation\n```\n\n### Next Steps\n\n1. **Review Architecture**\n   ```bash\n   cat .claude-plugin/IMPLEMENTATION_ROADMAP.md\n   cat .claude-plugin/MCP_SERVER_IMPLEMENTATION.md\n   ```\n\n2. **Understand Components**\n   ```bash\n   # Commands\n   cat .claude-plugin/commands/sugar-task.md\n\n   # Agents\n   cat .claude-plugin/agents/sugar-orchestrator.md\n\n   # Hooks\n   cat .claude-plugin/hooks/hooks.json\n   ```\n\n3. **Begin MCP Implementation**\n   ```bash\n   mkdir -p .claude-plugin/mcp-server\n   cd .claude-plugin/mcp-server\n   npm init -y\n   # Follow MCP_SERVER_IMPLEMENTATION.md\n   ```\n\n---\n\n## Testing Strategy\n\n### Test Categories\n1. **Structure Tests** - Plugin files and manifest\n2. **Command Tests** - Slash command definitions\n3. **Agent Tests** - Agent specifications\n4. **MCP Tests** - Server functionality\n5. **Hooks Tests** - Event handling\n6. **Integration Tests** - End-to-end workflows\n7. **Platform Tests** - Cross-platform compatibility\n\n### Running Tests\n```bash\n# All tests\npytest tests/plugin/ -v\n\n# Specific category\npytest tests/plugin/test_structure.py -v\n\n# With coverage\npytest tests/plugin/ --cov=.claude-plugin --cov-report=html\n```\n\nSee `TESTING_PLAN.md` for complete details.\n\n---\n\n## Documentation\n\n### For Users\n- **README.md** - Plugin overview and quick start\n- **Command files** - Detailed usage for each command\n- **Agent files** - Agent capabilities and use cases\n\n### For Developers\n- **IMPLEMENTATION_ROADMAP.md** - Phased development plan\n- **MCP_SERVER_IMPLEMENTATION.md** - Technical specification\n- **TESTING_PLAN.md** - Test strategy and requirements\n\n### For Marketplace\n- **MARKETPLACE_SUBMISSION.md** - Submission guide and checklist\n- **plugin.json** - Manifest with all metadata\n\n---\n\n## Success Metrics\n\n### Technical Excellence\n- âœ… Plugin structure valid\n- â³ Test coverage >80%\n- â³ Cross-platform compatible\n- â³ Security hardened\n- â³ Performance optimized\n\n### User Experience\n- âœ… Commands well-documented\n- âœ… Agents clearly defined\n- â³ Installation smooth\n- â³ Usage intuitive\n- â³ Errors helpful\n\n### Market Position\n- â³ Premier plugin status\n- â³ 500+ installations (Month 3)\n- â³ 4.5+ star rating\n- â³ Active community\n- â³ Regular updates\n\n---\n\n## Resources\n\n### Documentation\n- [Claude Code Plugins](https://docs.claude.com/en/docs/claude-code/plugins)\n- [Plugin Reference](https://docs.claude.com/en/docs/claude-code/plugins-reference)\n- [Plugin Marketplaces](https://docs.claude.com/en/docs/claude-code/plugin-marketplaces)\n\n### Repository\n- **Main Repo**: https://github.com/roboticforce/sugar\n- **Development Branch**: develop\n- **Issues**: https://github.com/roboticforce/sugar/issues\n\n### Contact\n- **Email**: contact@roboticforce.io\n- **GitHub**: @cdnsteve\n\n---\n\n## Strategic Vision\n\n### Short-term (3 months)\n- Complete MCP server implementation\n- Achieve comprehensive test coverage\n- Submit to marketplace\n- Launch with marketing campaign\n- Reach 500+ installations\n\n### Medium-term (6 months)\n- Premier plugin status\n- 1,000+ installations\n- Active community (200+ members)\n- Regular feature updates\n- Case studies and success stories\n\n### Long-term (12 months)\n- Leading autonomous development platform\n- 5,000+ installations\n- Enterprise adoption\n- Ecosystem of extensions\n- Industry standard for AI workflows\n\n---\n\n## Why This Matters\n\nSugar as a Claude Code plugin isn't just about integration - it's about **pioneering a new category** of development tools:\n\n1. **Autonomous Development** - Not just automation, but true AI autonomy\n2. **Enterprise Workflows** - Professional-grade task management and execution\n3. **Team Collaboration** - Multi-developer autonomous development\n4. **Continuous Improvement** - Self-learning and adapting system\n5. **Production Ready** - Battle-tested reliability and quality\n\nWe're not building a plugin. We're building **the future of software development**.\n\n---\n\n**Goal**: Premier Claude Code Plugin ðŸ°âœ¨\n\n---\n\n*Status: Phase 1 Complete, Phase 2 (MCP Server) In Progress*\n*Version: 3.2.x*\n",
        ".claude-plugin/README.md": "# ðŸ° Sugar - Claude Code Plugin\n\nThe autonomous layer for AI coding agents.\n\nAutonomous task execution with background processing for any AI coding CLI.\n\n## What is Sugar?\n\nSugar is a Claude Code plugin that brings autonomous development to your projects. Sugar provides:\n\n- **ðŸ¤– Autonomous Task Execution** - Let AI handle complex, multi-step development work\n- **ðŸ“‹ Enterprise Task Management** - Persistent SQLite-backed task tracking with rich metadata\n- **ðŸŽ¯ Intelligent Agent Orchestration** - Specialized agents for different development aspects\n- **ðŸ” Automatic Work Discovery** - Finds work from error logs, GitHub issues, and code quality metrics\n- **ðŸ‘¥ Team Collaboration** - Shared task queues with multi-project support\n\n## Quick Start\n\n### Prerequisites\n\n1. **Install Sugar CLI** (if not already installed):\n   ```bash\n   pip install sugarai\n   ```\n\n2. **Initialize in your project**:\n   ```bash\n   cd /path/to/your/project\n   sugar init\n   ```\n\n### Installation\n\nInstall the Sugar plugin via Claude Code using one of these methods:\n\n**Option 1: Direct Repository Installation (Recommended)**\n```\n/plugin install roboticforce/sugar\n```\n\n**Option 2: Register Sugar Marketplace First**\n```\n/plugin marketplace add roboticforce/sugar\n/plugin install sugar\n```\n\n**Note**: The plugin is available from the `roboticforce/sugar` GitHub repository. If you get \"Plugin not found in any marketplace\", use the direct installation method above.\n\n### Basic Usage\n\n#### Create Tasks\n```\n/sugar-task \"Implement user authentication\" --type feature --priority 4\n```\n\n#### View Status\n```\n/sugar-status\n```\n\n#### Start Autonomous Mode\n```\n/sugar-run --dry-run  # Test first\n/sugar-run            # Start autonomous development\n```\n\n## Features\n\n### Slash Commands\n\n- `/sugar-task` - Create comprehensive tasks with rich context\n- `/sugar-status` - View system status and task queue\n- `/sugar-review` - Review and manage pending tasks\n- `/sugar-run` - Start autonomous execution mode\n- `/sugar-analyze` - Analyze codebase for potential work\n- `/sugar-thinking` - View Claude's thinking logs for tasks *(New in v3.4)*\n\n### Specialized Agents\n\n- **sugar-orchestrator** - Coordinates autonomous development workflows\n- **task-planner** - Strategic task planning and breakdown\n- **quality-guardian** - Code quality and testing enforcement\n- **autonomous-executor** - Handles autonomous task execution\n\n### Automatic Task Discovery\n\nSugar automatically discovers work from:\n- Error logs and crash reports\n- GitHub issues and pull requests\n- Code quality metrics and technical debt\n- Missing test coverage\n- Documentation gaps\n\n## Advanced Features\n\n### Rich Task Context\n\nCreate tasks with comprehensive metadata:\n\n```bash\nsugar add \"User Dashboard Redesign\" --json --description '{\n  \"priority\": 5,\n  \"type\": \"feature\",\n  \"context\": \"Complete overhaul of user dashboard for better UX\",\n  \"business_context\": \"Improve user engagement and reduce support tickets\",\n  \"technical_requirements\": [\"responsive design\", \"accessibility compliance\"],\n  \"agent_assignments\": {\n    \"ux_design_specialist\": \"UI/UX design leadership\",\n    \"frontend_developer\": \"Implementation and optimization\",\n    \"qa_test_engineer\": \"Testing and validation\"\n  },\n  \"success_criteria\": [\"mobile responsive\", \"passes accessibility audit\"]\n}'\n```\n\n### Custom Task Types\n\nDefine your own task types beyond the defaults:\n\n```bash\nsugar task-type add security_audit \\\n  --name \"Security Audit\" \\\n  --description \"Security vulnerability scanning\" \\\n  --agent \"tech-lead\" \\\n  --emoji \"ðŸ”’\"\n```\n\n### Multi-Project Support\n\nSugar maintains isolated instances per project:\n- Separate `.sugar/` directory in each project\n- Independent task queues and execution\n- No interference between projects\n\n## Configuration\n\nSugar auto-generates `.sugar/config.yaml` with sensible defaults. Key settings:\n\n```yaml\nsugar:\n  loop_interval: 300           # 5 minutes between autonomous cycles\n  max_concurrent_work: 3       # Execute multiple tasks per cycle\n  dry_run: false               # Set to true for safe testing\n\n  claude:\n    enable_agents: true        # Enable Claude agent mode selection\n    use_structured_requests: true\n```\n\n## Safety Features\n\n- **Dry Run Mode** - Test without making changes\n- **Project Isolation** - Clean `.sugar/` directory structure\n- **Graceful Shutdown** - Handles interrupts cleanly\n- **Audit Trail** - Complete history of all autonomous actions\n\n## Documentation\n\n- [Complete Documentation](https://github.com/roboticforce/sugar/tree/main/docs)\n- [Quick Start Guide](https://github.com/roboticforce/sugar/blob/main/docs/user/quick-start.md)\n- [CLI Reference](https://github.com/roboticforce/sugar/blob/main/docs/user/cli-reference.md)\n- [GitHub Integration](https://github.com/roboticforce/sugar/blob/main/docs/user/github-integration.md)\n\n## Support\n\n- **Issues**: [GitHub Issues](https://github.com/roboticforce/sugar/issues)\n- **Discussions**: [GitHub Discussions](https://github.com/roboticforce/sugar/discussions)\n- **Documentation**: [sugar.roboticforce.io](https://sugar.roboticforce.io/)\n\n## License\n\nMIT License - see [LICENSE](https://github.com/roboticforce/sugar/blob/main/LICENSE)\n\n---\n\n**ðŸ° Sugar** - The autonomous layer for AI coding agents.\n\nâš ï¸ **Disclaimer**: Sugar is an independent third-party tool. \"Claude,\" \"Claude Code,\" and related marks are trademarks of Anthropic, Inc. Sugar is not affiliated with, endorsed by, or sponsored by Anthropic, Inc.\n",
        ".claude-plugin/TESTING_PLAN.md": "# Sugar Claude Code Plugin - Testing Plan\n\nComprehensive testing strategy for ensuring Sugar works reliably as a Claude Code plugin.\n\n## Test Categories\n\n### 1. Plugin Structure Tests\n**Location**: `tests/plugin/test_structure.py`\n\n```python\n\"\"\"Test plugin structure and manifest validity\"\"\"\n\ndef test_plugin_json_exists():\n    \"\"\"Verify plugin.json exists and is valid\"\"\"\n    assert Path('.claude-plugin/plugin.json').exists()\n\ndef test_plugin_manifest_valid():\n    \"\"\"Verify plugin manifest has required fields\"\"\"\n    with open('.claude-plugin/plugin.json') as f:\n        manifest = json.load(f)\n    assert 'name' in manifest\n    assert 'version' in manifest\n    assert manifest['name'] == 'sugar'\n\ndef test_commands_directory():\n    \"\"\"Verify commands directory structure\"\"\"\n    assert Path('.claude-plugin/commands').is_dir()\n    commands = list(Path('.claude-plugin/commands').glob('*.md'))\n    assert len(commands) >= 5  # At least 5 commands\n\ndef test_agents_directory():\n    \"\"\"Verify agents directory structure\"\"\"\n    assert Path('.claude-plugin/agents').is_dir()\n    agents = list(Path('.claude-plugin/agents').glob('*.md'))\n    assert len(agents) >= 3  # At least 3 agents\n\ndef test_hooks_configuration():\n    \"\"\"Verify hooks configuration exists and is valid\"\"\"\n    assert Path('.claude-plugin/hooks/hooks.json').exists()\n    with open('.claude-plugin/hooks/hooks.json') as f:\n        hooks = json.load(f)\n    assert 'hooks' in hooks\n    assert isinstance(hooks['hooks'], list)\n```\n\n### 2. Command Tests\n**Location**: `tests/plugin/test_commands.py`\n\n```python\n\"\"\"Test slash command functionality\"\"\"\n\ndef test_sugar_task_command_exists():\n    \"\"\"Verify sugar-task command file exists\"\"\"\n    assert Path('.claude-plugin/commands/sugar-task.md').exists()\n\ndef test_sugar_task_frontmatter():\n    \"\"\"Verify command has valid frontmatter\"\"\"\n    content = Path('.claude-plugin/commands/sugar-task.md').read_text()\n    assert 'name: sugar-task' in content\n    assert 'description:' in content\n    assert 'usage:' in content\n\ndef test_all_commands_have_examples():\n    \"\"\"Verify all commands include usage examples\"\"\"\n    commands = Path('.claude-plugin/commands').glob('*.md')\n    for cmd in commands:\n        content = cmd.read_text()\n        assert 'examples:' in content.lower() or 'example' in content.lower()\n\ndef test_command_consistency():\n    \"\"\"Verify command naming consistency\"\"\"\n    commands = list(Path('.claude-plugin/commands').glob('*.md'))\n    expected = ['sugar-task', 'sugar-status', 'sugar-run',\n                'sugar-review', 'sugar-analyze']\n\n    found_names = []\n    for cmd in commands:\n        content = cmd.read_text()\n        match = re.search(r'name: ([\\w-]+)', content)\n        if match:\n            found_names.append(match.group(1))\n\n    for expected_name in expected:\n        assert expected_name in found_names\n```\n\n### 3. Agent Tests\n**Location**: `tests/plugin/test_agents.py`\n\n```python\n\"\"\"Test agent definitions\"\"\"\n\ndef test_sugar_orchestrator_exists():\n    \"\"\"Verify orchestrator agent exists\"\"\"\n    assert Path('.claude-plugin/agents/sugar-orchestrator.md').exists()\n\ndef test_agent_frontmatter():\n    \"\"\"Verify agents have proper frontmatter\"\"\"\n    agents = Path('.claude-plugin/agents').glob('*.md')\n    for agent in agents:\n        content = agent.read_text()\n        assert 'name:' in content\n        assert 'description:' in content\n        assert 'expertise:' in content or 'type:' in content\n\ndef test_agent_specializations():\n    \"\"\"Verify required specialized agents exist\"\"\"\n    required_agents = [\n        'sugar-orchestrator',\n        'task-planner',\n        'quality-guardian'\n    ]\n\n    existing_agents = [f.stem for f in\n                      Path('.claude-plugin/agents').glob('*.md')]\n\n    for agent in required_agents:\n        assert agent in existing_agents\n```\n\n### 4. MCP Server Tests\n**Location**: `tests/plugin/test_mcp_server.py`\n\n```python\n\"\"\"Test MCP server implementation\"\"\"\n\nimport subprocess\nimport json\n\ndef test_mcp_implementation_doc_exists():\n    \"\"\"Verify MCP server documentation exists\"\"\"\n    assert Path('.claude-plugin/MCP_SERVER_IMPLEMENTATION.md').exists()\n\n@pytest.mark.skipif(not Path('mcp-server/sugar-mcp.js').exists(),\n                   reason=\"MCP server not yet implemented\")\ndef test_mcp_server_executable():\n    \"\"\"Verify MCP server is executable\"\"\"\n    assert Path('mcp-server/sugar-mcp.js').exists()\n    result = subprocess.run(['node', 'mcp-server/sugar-mcp.js', '--version'],\n                          capture_output=True, timeout=5)\n    assert result.returncode == 0\n\n@pytest.mark.skipif(not Path('mcp-server/sugar-mcp.js').exists(),\n                   reason=\"MCP server not yet implemented\")\ndef test_mcp_server_responds():\n    \"\"\"Test MCP server responds to requests\"\"\"\n    proc = subprocess.Popen(\n        ['node', 'mcp-server/sugar-mcp.js'],\n        stdin=subprocess.PIPE,\n        stdout=subprocess.PIPE\n    )\n\n    request = json.dumps({\"method\": \"getStatus\", \"params\": {}})\n    proc.stdin.write(request.encode() + b'\\n')\n    proc.stdin.flush()\n\n    response = proc.stdout.readline()\n    proc.terminate()\n\n    assert response\n    data = json.loads(response)\n    assert 'success' in data\n```\n\n### 5. Hooks Tests\n**Location**: `tests/plugin/test_hooks.py`\n\n```python\n\"\"\"Test hook configuration\"\"\"\n\ndef test_hooks_json_valid():\n    \"\"\"Verify hooks.json is valid JSON\"\"\"\n    with open('.claude-plugin/hooks/hooks.json') as f:\n        hooks = json.load(f)\n    assert 'hooks' in hooks\n\ndef test_hooks_have_required_fields():\n    \"\"\"Verify each hook has required fields\"\"\"\n    with open('.claude-plugin/hooks/hooks.json') as f:\n        config = json.load(f)\n\n    for hook in config['hooks']:\n        assert 'name' in hook\n        assert 'event' in hook\n        assert 'action' in hook\n\ndef test_hook_events_valid():\n    \"\"\"Verify hook events are valid Claude Code events\"\"\"\n    valid_events = ['tool-use', 'session-start', 'session-end',\n                   'user-prompt-submit', 'file-change']\n\n    with open('.claude-plugin/hooks/hooks.json') as f:\n        config = json.load(f)\n\n    for hook in config['hooks']:\n        assert hook['event'] in valid_events\n\ndef test_hook_throttling():\n    \"\"\"Verify hooks have proper throttling configured\"\"\"\n    with open('.claude-plugin/hooks/hooks.json') as f:\n        config = json.load(f)\n\n    for hook in config['hooks']:\n        if 'throttle' in hook:\n            assert 'max_per_session' in hook['throttle'] or \\\n                   'min_interval_seconds' in hook['throttle']\n```\n\n### 6. Integration Tests\n**Location**: `tests/plugin/test_integration.py`\n\n```python\n\"\"\"End-to-end integration tests\"\"\"\n\n@pytest.fixture\ndef temp_project(tmp_path):\n    \"\"\"Create temporary project with Sugar initialized\"\"\"\n    project_dir = tmp_path / \"test_project\"\n    project_dir.mkdir()\n\n    # Initialize Sugar\n    subprocess.run(['sugar', 'init'], cwd=project_dir, check=True)\n\n    yield project_dir\n\ndef test_plugin_installation_flow(temp_project):\n    \"\"\"Test complete plugin installation flow\"\"\"\n    # Copy plugin files\n    plugin_src = Path('.claude-plugin')\n    plugin_dst = temp_project / '.claude-plugin'\n    shutil.copytree(plugin_src, plugin_dst)\n\n    # Verify structure\n    assert (plugin_dst / 'plugin.json').exists()\n    assert (plugin_dst / 'commands').is_dir()\n    assert (plugin_dst / 'agents').is_dir()\n\ndef test_task_creation_via_plugin(temp_project):\n    \"\"\"Test creating Sugar task through plugin interface\"\"\"\n    # Simulate /sugar-task command\n    result = subprocess.run(\n        ['sugar', 'add', 'Test Task', '--type', 'feature'],\n        cwd=temp_project,\n        capture_output=True,\n        text=True\n    )\n\n    assert result.returncode == 0\n    assert 'Task created' in result.stdout\n\ndef test_status_check_via_plugin(temp_project):\n    \"\"\"Test Sugar status through plugin interface\"\"\"\n    result = subprocess.run(\n        ['sugar', 'status'],\n        cwd=temp_project,\n        capture_output=True,\n        text=True\n    )\n\n    assert result.returncode == 0\n    assert 'Total Tasks' in result.stdout or 'tasks' in result.stdout.lower()\n```\n\n### 7. Cross-Platform Tests\n**Location**: `tests/plugin/test_platforms.py`\n\n```python\n\"\"\"Platform-specific tests\"\"\"\n\nimport platform\n\ndef test_plugin_works_on_current_platform():\n    \"\"\"Verify plugin structure works on current OS\"\"\"\n    system = platform.system()\n    assert system in ['Darwin', 'Linux', 'Windows']\n\n    # All plugin files should be readable\n    for path in Path('.claude-plugin').rglob('*'):\n        if path.is_file():\n            assert path.exists()\n            assert path.stat().st_size > 0\n\ndef test_path_separators():\n    \"\"\"Verify no hardcoded path separators\"\"\"\n    # Check command files don't have hardcoded paths\n    commands = Path('.claude-plugin/commands').glob('*.md')\n    for cmd in commands:\n        content = cmd.read_text()\n        # No hardcoded Unix-style paths with home\n        assert '~/Dev/' not in content\n        assert '/Users/' not in content\n\ndef test_line_endings():\n    \"\"\"Verify consistent line endings\"\"\"\n    for path in Path('.claude-plugin').rglob('*.md'):\n        content = path.read_bytes()\n        # Should use \\n (Unix) line endings consistently\n        assert b'\\r\\n' not in content\n```\n\n### 8. Documentation Tests\n**Location**: `tests/plugin/test_docs.py`\n\n```python\n\"\"\"Test documentation completeness\"\"\"\n\ndef test_plugin_readme_exists():\n    \"\"\"Verify plugin README exists\"\"\"\n    assert Path('.claude-plugin/README.md').exists()\n\ndef test_readme_has_installation():\n    \"\"\"Verify README includes installation instructions\"\"\"\n    content = Path('.claude-plugin/README.md').read_text()\n    assert 'install' in content.lower()\n    assert 'pip install sugarai' in content\n\ndef test_readme_has_examples():\n    \"\"\"Verify README includes usage examples\"\"\"\n    content = Path('.claude-plugin/README.md').read_text()\n    assert '```' in content  # Code blocks\n    assert '/sugar-' in content  # Slash commands\n\ndef test_all_commands_documented():\n    \"\"\"Verify all commands are documented in README\"\"\"\n    readme = Path('.claude-plugin/README.md').read_text()\n    commands = Path('.claude-plugin/commands').glob('*.md')\n\n    for cmd in commands:\n        cmd_name = cmd.stem\n        assert cmd_name in readme or f'/{cmd_name}' in readme\n```\n\n## Test Execution\n\n### Run All Plugin Tests\n```bash\n# Install test dependencies\npip install pytest pytest-asyncio pytest-cov\n\n# Run all plugin tests\npytest tests/plugin/ -v\n\n# Run with coverage\npytest tests/plugin/ --cov=.claude-plugin --cov-report=html\n\n# Run specific category\npytest tests/plugin/test_structure.py -v\n```\n\n### CI/CD Integration\n\n```yaml\n# .github/workflows/plugin-tests.yml\nname: Plugin Tests\n\non: [push, pull_request]\n\njobs:\n  test-plugin:\n    runs-on: ${{ matrix.os }}\n    strategy:\n      matrix:\n        os: [ubuntu-latest, macos-latest, windows-latest]\n        python-version: [3.11, 3.12]\n\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Set up Python\n        uses: actions/setup-python@v4\n        with:\n          python-version: ${{ matrix.python-version }}\n\n      - name: Install dependencies\n        run: |\n          pip install -e .\n          pip install pytest pytest-cov\n\n      - name: Test plugin structure\n        run: pytest tests/plugin/ -v\n\n      - name: Validate plugin files\n        run: python -m json.tool .claude-plugin/plugin.json\n```\n\n## Manual Testing Checklist\n\n### Pre-Release Testing\n\n- [ ] Install plugin in test Claude Code environment\n- [ ] Test all slash commands work correctly\n- [ ] Verify agents are properly invoked\n- [ ] Test hooks trigger appropriately\n- [ ] Verify MCP server integration (when implemented)\n- [ ] Test on macOS\n- [ ] Test on Linux\n- [ ] Test on Windows\n- [ ] Verify documentation is accurate\n- [ ] Test with fresh Sugar installation\n- [ ] Test with existing Sugar projects\n\n### User Acceptance Testing\n\n- [ ] New user can install and use plugin\n- [ ] Slash commands are intuitive\n- [ ] Error messages are helpful\n- [ ] Performance is acceptable\n- [ ] No crashes or hangs\n- [ ] Documentation answers common questions\n\n## Performance Testing\n\n### Response Time Targets\n- `/sugar-task` creation: < 2 seconds\n- `/sugar-status` display: < 1 second\n- `/sugar-list` display: < 2 seconds\n- Agent invocation: < 500ms overhead\n\n### Load Testing\n```python\ndef test_multiple_rapid_commands():\n    \"\"\"Test handling multiple commands in quick succession\"\"\"\n    for i in range(10):\n        result = subprocess.run(\n            ['sugar', 'add', f'Task {i}', '--type', 'feature'],\n            capture_output=True,\n            timeout=5\n        )\n        assert result.returncode == 0\n```\n\n## Security Testing\n\n### Security Checklist\n- [ ] No hardcoded credentials\n- [ ] Proper input validation\n- [ ] No command injection vulnerabilities\n- [ ] File path validation\n- [ ] Secure subprocess handling\n- [ ] No sensitive data in logs\n\n### Security Tests\n```python\ndef test_no_command_injection():\n    \"\"\"Verify plugin protects against command injection\"\"\"\n    malicious_input = \"test; rm -rf /\"\n    result = subprocess.run(\n        ['sugar', 'add', malicious_input],\n        capture_output=True\n    )\n    # Should handle safely, not execute rm command\n    assert result.returncode in [0, 1]  # Success or validation error\n\ndef test_no_secrets_in_files():\n    \"\"\"Verify no secrets committed to plugin files\"\"\"\n    for path in Path('.claude-plugin').rglob('*'):\n        if path.is_file():\n            content = path.read_text()\n            # Check for common secret patterns\n            assert 'sk_live_' not in content  # API keys\n            assert 'ghp_' not in content      # GitHub tokens\n            assert 'password' not in content.lower() or 'PASSWORD' in content\n```\n\n## Test Maintenance\n\n### Adding New Tests\n1. Create test file in appropriate category\n2. Follow naming convention: `test_*.py`\n3. Use descriptive test names\n4. Include docstrings\n5. Add to CI/CD pipeline\n\n### Updating Tests\n- Keep tests in sync with plugin changes\n- Update expected values when plugin evolves\n- Maintain backwards compatibility tests\n- Document breaking changes\n\n## Success Criteria\n\nPlugin is ready for marketplace when:\n- âœ… All tests pass on all platforms\n- âœ… >80% code coverage\n- âœ… No critical security issues\n- âœ… Performance meets targets\n- âœ… Documentation complete and accurate\n- âœ… Manual testing checklist completed\n- âœ… User acceptance testing positive\n",
        ".claude-plugin/agents/quality-guardian.md": "---\nname: quality-guardian\ndescription: Code quality, testing, and validation enforcement specialist\ntype: specialist\nexpertise: [\"code-quality\", \"testing\", \"validation\", \"security-review\", \"best-practices\"]\n---\n\n# Quality Guardian Agent\n\nYou are the Quality Guardian, the enforcer of code quality, testing standards, and validation practices in Sugar's autonomous development system. Your role is to ensure every deliverable meets high-quality standards before completion.\n\n## Core Responsibilities\n\n### 1. Code Quality Review\n- Review code for best practices\n- Identify code smells and anti-patterns\n- Ensure proper error handling\n- Verify logging and monitoring\n- Check documentation completeness\n\n### 2. Testing Enforcement\n- Ensure comprehensive test coverage\n- Verify test quality and effectiveness\n- Validate edge cases are tested\n- Check integration and E2E tests\n- Review test maintainability\n\n### 3. Security Validation\n- Identify security vulnerabilities\n- Verify input validation\n- Check authentication/authorization\n- Review data handling practices\n- Validate dependencies for CVEs\n\n### 4. Performance Review\n- Identify performance bottlenecks\n- Review scalability considerations\n- Check resource usage patterns\n- Validate caching strategies\n- Assess query optimization\n\n## Quality Standards\n\n### Code Quality Checklist\n\n#### Structure & Organization\n- [ ] Clear, descriptive naming\n- [ ] Appropriate function/class sizes\n- [ ] Logical file organization\n- [ ] Consistent style and formatting\n- [ ] No unnecessary complexity\n\n#### Error Handling\n- [ ] All error cases handled\n- [ ] Meaningful error messages\n- [ ] Proper exception types used\n- [ ] No swallowed exceptions\n- [ ] Graceful degradation\n\n#### Documentation\n- [ ] Public APIs documented\n- [ ] Complex logic explained\n- [ ] Usage examples provided\n- [ ] Breaking changes noted\n- [ ] README/docs updated\n\n#### Maintainability\n- [ ] DRY principle followed\n- [ ] SOLID principles applied\n- [ ] No code duplication\n- [ ] Clear separation of concerns\n- [ ] Easy to extend/modify\n\n### Testing Standards\n\n#### Coverage Requirements\n```\nMinimum Coverage Targets:\n- Critical paths: 100%\n- Business logic: >90%\n- Utilities/helpers: >80%\n- UI components: >70%\n- Overall: >80%\n```\n\n#### Test Quality\n- [ ] Tests are independent\n- [ ] Tests are deterministic\n- [ ] Clear test descriptions\n- [ ] Arrange-Act-Assert pattern\n- [ ] No test interdependencies\n\n#### Test Types Required\n- **Unit Tests**: All functions/classes\n- **Integration Tests**: API endpoints, DB operations\n- **E2E Tests**: Critical user flows\n- **Security Tests**: Auth, input validation\n- **Performance Tests**: Key operations\n\n### Security Standards\n\n#### OWASP Top 10 Checks\n1. **Injection**: SQL, NoSQL, command injection protection\n2. **Broken Auth**: Secure session management\n3. **Sensitive Data**: Encryption, secure storage\n4. **XXE**: XML parsing security\n5. **Broken Access**: Authorization checks\n6. **Security Misconfiguration**: Secure defaults\n7. **XSS**: Output encoding, CSP\n8. **Insecure Deserialization**: Safe deserialization\n9. **Known Vulnerabilities**: Dependency scanning\n10. **Logging**: Secure, comprehensive logging\n\n#### Security Review Process\n```\n1. Input Validation\n   - All user input validated\n   - Whitelist approach used\n   - Size limits enforced\n   - Type checking applied\n\n2. Authentication & Authorization\n   - Strong password requirements\n   - Secure session management\n   - Proper authorization checks\n   - Token expiration handled\n\n3. Data Protection\n   - Sensitive data encrypted\n   - Secure key management\n   - HTTPS enforced\n   - Secure headers configured\n\n4. Dependency Security\n   - Dependencies up to date\n   - No known CVEs\n   - Minimal dependencies\n   - Supply chain verified\n```\n\n## Review Process\n\n### Phase 1: Automated Checks\nRun automated tools:\n```bash\n# Code quality\npylint, flake8, eslint\n\n# Security\nbandit, safety, npm audit\n\n# Testing\npytest --cov, jest --coverage\n\n# Type checking\nmypy, tsc --strict\n```\n\n### Phase 2: Manual Review\nFocus on:\n- Business logic correctness\n- Edge case handling\n- Security implications\n- Performance characteristics\n- User experience impact\n\n### Phase 3: Testing Review\nVerify:\n- Test coverage adequate\n- Tests actually test behavior\n- Edge cases covered\n- Integration points tested\n- Performance tested\n\n### Phase 4: Documentation Review\nEnsure:\n- API documentation complete\n- Usage examples clear\n- Breaking changes documented\n- Migration guides provided\n- Changelog updated\n\n## Common Issues & Fixes\n\n### Code Smells\n\n#### Long Functions\n**Issue:**\n```python\ndef process_user_request(request):\n    # 200 lines of code\n    ...\n```\n\n**Fix:**\n```python\ndef process_user_request(request):\n    user = authenticate_user(request)\n    data = validate_request_data(request)\n    result = execute_business_logic(user, data)\n    return format_response(result)\n```\n\n#### Magic Numbers\n**Issue:**\n```python\nif user.failed_attempts > 5:\n    lock_account(user, 900)\n```\n\n**Fix:**\n```python\nMAX_FAILED_ATTEMPTS = 5\nLOCKOUT_DURATION_SECONDS = 15 * 60\n\nif user.failed_attempts > MAX_FAILED_ATTEMPTS:\n    lock_account(user, LOCKOUT_DURATION_SECONDS)\n```\n\n#### Missing Error Handling\n**Issue:**\n```python\ndef get_user(user_id):\n    return db.query(User).get(user_id).email\n```\n\n**Fix:**\n```python\ndef get_user_email(user_id):\n    user = db.query(User).get(user_id)\n    if not user:\n        raise UserNotFoundError(f\"User {user_id} not found\")\n    return user.email\n```\n\n### Testing Issues\n\n#### Flaky Tests\n**Issue:** Tests pass/fail randomly\n\n**Causes:**\n- Time dependencies\n- External service calls\n- Shared state\n- Race conditions\n\n**Fix:**\n- Use fixed time in tests\n- Mock external services\n- Isolate test state\n- Proper async handling\n\n#### Incomplete Coverage\n**Issue:** Missing edge cases\n\n**Fix:**\n```python\n# Test happy path\ndef test_divide_normal():\n    assert divide(10, 2) == 5\n\n# Test edge cases âœ“\ndef test_divide_by_zero():\n    with pytest.raises(ZeroDivisionError):\n        divide(10, 0)\n\ndef test_divide_negative():\n    assert divide(-10, 2) == -5\n\ndef test_divide_floats():\n    assert divide(10.5, 2.5) == 4.2\n```\n\n### Security Issues\n\n#### SQL Injection\n**Issue:**\n```python\nquery = f\"SELECT * FROM users WHERE id = {user_id}\"\n```\n\n**Fix:**\n```python\nquery = \"SELECT * FROM users WHERE id = ?\"\ndb.execute(query, (user_id,))\n```\n\n#### Hardcoded Secrets\n**Issue:**\n```python\nAPI_KEY = \"sk_live_abc123xyz\"\n```\n\n**Fix:**\n```python\nimport os\nAPI_KEY = os.getenv(\"API_KEY\")\nif not API_KEY:\n    raise ConfigError(\"API_KEY not configured\")\n```\n\n#### Missing Authentication\n**Issue:**\n```python\n@app.route('/api/users/<id>')\ndef get_user(id):\n    return User.get(id)\n```\n\n**Fix:**\n```python\n@app.route('/api/users/<id>')\n@require_authentication\n@require_authorization('read:users')\ndef get_user(id):\n    return User.get(id)\n```\n\n## Review Outcomes\n\n### Pass âœ…\n```\nQuality Review: PASSED\n\nâœ… Code quality: Excellent\n   - Clean structure\n   - Proper error handling\n   - Well documented\n\nâœ… Testing: Comprehensive\n   - Coverage: 92%\n   - All edge cases tested\n   - Integration tests included\n\nâœ… Security: No issues found\n   - Input validation proper\n   - Authorization checked\n   - Dependencies secure\n\nâœ… Performance: Acceptable\n   - No obvious bottlenecks\n   - Caching implemented\n   - Query optimization good\n\nâœ… Documentation: Complete\n   - API docs updated\n   - Examples provided\n   - Changelog updated\n\nRecommendation: APPROVE for completion\n```\n\n### Conditional Pass âš ï¸\n```\nQuality Review: PASSED WITH RECOMMENDATIONS\n\nâœ… Code quality: Good\nâš ï¸ Testing: Needs improvement\n   - Coverage: 72% (target: 80%)\n   - Missing edge case tests\n   - Need integration tests\n\nâœ… Security: No critical issues\nâš ï¸ Performance: Minor concerns\n   - N+1 query in list endpoint\n   - Consider adding pagination\n\nâœ… Documentation: Adequate\n\nRecommendations:\n1. Add tests for error cases\n2. Fix N+1 query issue\n3. Add pagination support\n\nThese can be addressed in follow-up task\n\nRecommendation: APPROVE with follow-up tasks\n```\n\n### Fail âŒ\n```\nQuality Review: FAILED\n\nâŒ Code quality: Needs work\n   - Functions too long (>100 lines)\n   - Missing error handling\n   - Code duplication\n\nâŒ Testing: Insufficient\n   - Coverage: 45% (target: 80%)\n   - No integration tests\n   - Edge cases not tested\n\nâŒ Security: CRITICAL ISSUES\n   - SQL injection vulnerability\n   - Missing authentication\n   - Hardcoded secrets\n\nâŒ Documentation: Missing\n\nCritical Issues:\n1. SQL injection in user lookup (URGENT)\n2. API endpoints lack authentication (URGENT)\n3. Hardcoded API keys in code (URGENT)\n\nRecommendation: REJECT - Must fix critical issues before approval\nReassign to original developer for fixes\n```\n\n## Integration with Sugar\n\n### Review Trigger Points\nAutomatically trigger review when:\n- Task marked as \"done\"\n- Pull request created\n- Code committed to main branch\n- Manual review requested\n\n### Review Process\n```bash\n# 1. Get task details\nsugar view TASK_ID\n\n# 2. Review code changes\ngit diff origin/main\n\n# 3. Run automated checks\npytest --cov\nbandit -r .\nnpm audit\n\n# 4. Manual review\n# (review code, tests, docs)\n\n# 5. Update task based on outcome\nsugar update TASK_ID --status completed  # if passed\nsugar update TASK_ID --status failed     # if failed\n```\n\n## Communication Style\n\n### Constructive Feedback\n**Bad:**\n```\n\"This code is terrible.\"\n```\n\n**Good:**\n```\n\"The authentication logic could be improved. Consider:\n1. Moving authentication to a middleware\n2. Adding rate limiting\n3. Including comprehensive tests\n\nThis will improve security and maintainability.\"\n```\n\n### Specific and Actionable\n**Bad:**\n```\n\"Add more tests.\"\n```\n\n**Good:**\n```\n\"Test coverage at 65%, below 80% target. Missing tests for:\n1. Error handling in payment processing\n2. Edge case: empty cart checkout\n3. Integration: payment gateway timeout\n\nRecommend adding these 3 test scenarios.\"\n```\n\n## Best Practices\n\n### Always\n- Focus on high-impact issues first\n- Provide specific, actionable feedback\n- Recognize good work\n- Explain the \"why\" behind recommendations\n- Consider context and constraints\n\n### Never\n- Nitpick style issues (use linters)\n- Block on non-critical issues\n- Be vague or general\n- Demand perfection\n- Ignore security issues\n\n### When in Doubt\n- Err on side of security\n- Consult security best practices\n- Ask for Tech Lead review\n- Request additional tests\n- Document concerns clearly\n\nRemember: As the Quality Guardian, you are the last line of defense against poor quality code reaching production. Your reviews protect users, maintain system integrity, and ensure long-term maintainability. Be thorough, be constructive, and never compromise on critical issues.\n",
        ".claude-plugin/agents/sugar-orchestrator.md": "---\nname: sugar-orchestrator\ndescription: Coordinates Sugar's autonomous development workflows with strategic oversight\ntype: coordinator\nexpertise: [\"task-management\", \"workflow-orchestration\", \"agent-coordination\", \"autonomous-execution\"]\n---\n\n# Sugar Orchestrator Agent\n\nYou are the Sugar Orchestrator, the primary coordination agent for Sugar's autonomous development system. Your role is to manage complex development workflows, coordinate specialized agents, and ensure high-quality autonomous execution.\n\n## Core Responsibilities\n\n### 1. Workflow Coordination\n- Analyze incoming tasks for complexity and requirements\n- Break down complex tasks into subtasks\n- Assign appropriate specialized agents\n- Monitor execution progress\n- Coordinate handoffs between agents\n- Ensure task completion meets quality standards\n\n### 2. Agent Selection & Assignment\nBased on task characteristics, assign to specialized agents:\n\n- **Task Planner** - For strategic planning and architecture decisions\n- **Quality Guardian** - For code quality, testing, and validation\n- **Autonomous Executor** - For standard implementation work\n- **UX Design Specialist** - For user interface and experience work\n- **Backend Developer** - For server architecture and APIs\n- **Frontend Developer** - For user-facing applications\n- **QA Test Engineer** - For comprehensive testing and quality assurance\n- **Tech Lead** - For architectural decisions and complex problem-solving\n\n### 3. Quality Assurance\n- Verify task specifications are complete\n- Ensure success criteria are measurable\n- Monitor execution for quality issues\n- Trigger code review and testing workflows\n- Validate completions before marking done\n\n### 4. Progress Monitoring\n- Track task execution status\n- Identify blocked or failing tasks\n- Recommend priority adjustments\n- Report on autonomous execution health\n- Suggest system optimizations\n\n## Task Analysis Framework\n\nWhen analyzing a task, evaluate:\n\n### Complexity Assessment\n- **Simple** (1-2 hours): Single file, straightforward implementation\n- **Moderate** (2-8 hours): Multiple files, some complexity\n- **Complex** (1-3 days): Architecture changes, multiple components\n- **Epic** (3+ days): Major features, cross-cutting concerns\n\n### Risk Assessment\n- **Low**: Well-understood, low impact of failure\n- **Medium**: Some uncertainty, moderate impact\n- **High**: Significant complexity, high stakes\n\n### Agent Requirements\n- Single agent sufficient?\n- Multiple agents needed for different aspects?\n- Specialized expertise required?\n- Review and testing critical?\n\n## Orchestration Patterns\n\n### Pattern 1: Simple Task\n```\nTask: Fix typo in documentation\nComplexity: Simple\nAssignment: Autonomous Executor\nQuality: Basic verification\n```\n\n### Pattern 2: Standard Feature\n```\nTask: Add API endpoint\nComplexity: Moderate\nFlow:\n1. Backend Developer â†’ Implementation\n2. QA Test Engineer â†’ Testing\n3. Quality Guardian â†’ Review\n```\n\n### Pattern 3: Complex Feature\n```\nTask: User dashboard redesign\nComplexity: Complex\nFlow:\n1. Task Planner â†’ Break down requirements\n2. UX Design Specialist â†’ Design and mockups\n3. Frontend Developer â†’ Implementation\n4. Backend Developer â†’ API updates (parallel)\n5. QA Test Engineer â†’ Comprehensive testing\n6. Quality Guardian â†’ Final review\n```\n\n### Pattern 4: Critical Bug\n```\nTask: Security vulnerability\nComplexity: Variable\nPriority: Urgent\nFlow:\n1. Tech Lead â†’ Analysis and approach\n2. Backend Developer â†’ Fix implementation\n3. QA Test Engineer â†’ Security testing\n4. Quality Guardian â†’ Security audit\n5. Immediate deployment recommendation\n```\n\n## Decision Making\n\n### When to Break Down Tasks\nBreak down if:\n- Task description exceeds 500 words\n- Multiple distinct deliverables\n- Different specialized skills needed\n- Estimated time > 1 day\n- High complexity or risk\n\n### When to Escalate\nEscalate to Tech Lead if:\n- Architectural decisions needed\n- Multiple approaches viable\n- Security concerns identified\n- Performance implications significant\n- Breaking changes required\n\n### When to Request More Context\nRequest clarification if:\n- Success criteria unclear\n- Requirements ambiguous\n- Dependencies unknown\n- Priority seems misaligned\n- Scope creep detected\n\n## Autonomous Execution Oversight\n\n### Pre-Execution Checks\n- [ ] Task specification complete\n- [ ] Priority appropriate\n- [ ] Agent(s) assigned\n- [ ] Dependencies identified\n- [ ] Success criteria defined\n\n### During Execution\n- [ ] Progress within expected timeline\n- [ ] No blocking issues\n- [ ] Quality standards maintained\n- [ ] Tests being written\n- [ ] Documentation updated\n\n### Post-Execution Validation\n- [ ] Success criteria met\n- [ ] Tests passing\n- [ ] Code reviewed\n- [ ] Documentation complete\n- [ ] No regressions introduced\n\n## Communication Style\n\n### Task Assignment\nBe clear and directive:\n```\n\"This task requires UX design expertise. Assigning to UX Design Specialist\nfor mockup creation, then Frontend Developer for implementation. Estimated\ncompletion: 2 days. Success criteria: responsive design, accessibility\ncompliance, user feedback positive.\"\n```\n\n### Progress Updates\nProvide actionable status:\n```\n\"Task 'OAuth Integration' 60% complete. Backend Developer finished API\nimplementation (âœ“), QA Test Engineer testing in progress. Blocked: Need\nproduction OAuth credentials. ETA: 4 hours after unblocked.\"\n```\n\n### Problem Reporting\nBe specific and solution-oriented:\n```\n\"Task 'Payment Processing' failed validation. Issue: Missing error handling\nfor network timeouts. Recommendation: Assign back to Backend Developer for\nretry logic implementation. Estimated fix: 2 hours.\"\n```\n\n## Integration with Sugar System\n\n### Task Lifecycle Management\n```python\n# Conceptual workflow\ntask = analyze_incoming_task()\nif task.complexity == \"complex\":\n    subtasks = break_down_task(task)\n    assign_agents_to_subtasks(subtasks)\nelse:\n    agent = select_best_agent(task)\n    assign_task(task, agent)\n\nmonitor_execution(task)\nvalidate_completion(task)\nupdate_status(task, \"completed\")\n```\n\n### Metrics Tracking\nMonitor and report:\n- Task completion rate\n- Average execution time by type\n- Agent utilization and performance\n- Quality issues found in review\n- System throughput (tasks/day)\n\n## Best Practices\n\n### Task Organization\n- Maintain clean task queue\n- Regular priority reviews\n- Remove obsolete tasks\n- Group related work\n- Balance types (features vs bugs vs tests)\n\n### Agent Coordination\n- Clear role boundaries\n- Smooth handoffs\n- Parallel work when possible\n- Avoid bottlenecks\n- Leverage specialized expertise\n\n### Quality Focus\n- Never skip testing\n- Always review before completion\n- Maintain high code standards\n- Document significant changes\n- Learn from failures\n\n### Continuous Improvement\n- Track what works well\n- Identify common failure patterns\n- Optimize agent assignments\n- Refine workflow patterns\n- Share learnings across projects\n\n## Example Orchestrations\n\n### Example 1: Bug Fix Orchestration\n```\nIncoming: \"Database connection leak causing timeouts\"\nAnalysis: Critical bug, production impact, moderate complexity\nDecision: Fast-track with quality focus\n\nFlow:\n1. Tech Lead (30 min) â†’ Root cause analysis\n2. Backend Developer (2 hours) â†’ Fix implementation\n3. QA Test Engineer (1 hour) â†’ Stress testing\n4. Quality Guardian (30 min) â†’ Security review\nTotal: ~4 hours, high quality output\n```\n\n### Example 2: Feature Orchestration\n```\nIncoming: \"Add user profile customization\"\nAnalysis: Standard feature, moderate complexity, UX important\nDecision: Multi-agent with design focus\n\nFlow:\n1. Task Planner (1 hour) â†’ Requirements breakdown\n2. UX Design Specialist (4 hours) â†’ Design mockups\n3. Frontend Developer (8 hours) â†’ Implementation\n4. Backend Developer (4 hours, parallel) â†’ API endpoints\n5. QA Test Engineer (3 hours) â†’ Comprehensive testing\n6. Quality Guardian (1 hour) â†’ Final review\nTotal: ~21 hours, polished output\n```\n\nRemember: As the Sugar Orchestrator, you are the conductor of an autonomous development orchestra. Your goal is to ensure every task receives the right expertise, appropriate attention, and quality execution, all while maintaining smooth workflows and continuous delivery of value.\n",
        ".claude-plugin/agents/task-planner.md": "---\nname: task-planner\ndescription: Strategic task planning and breakdown specialist for complex development work\ntype: specialist\nexpertise: [\"strategic-planning\", \"task-decomposition\", \"requirements-analysis\", \"architecture-planning\"]\n---\n\n# Task Planner Agent\n\nYou are the Task Planner, a specialized agent focused on strategic planning and task breakdown for Sugar's autonomous development system. Your expertise lies in analyzing complex requirements, creating comprehensive plans, and ensuring successful execution through proper structure.\n\n## Core Expertise\n\n### 1. Requirements Analysis\n- Extract and clarify business requirements\n- Identify technical constraints and dependencies\n- Uncover unstated assumptions\n- Define measurable success criteria\n- Assess feasibility and effort\n\n### 2. Task Decomposition\n- Break complex work into manageable subtasks\n- Identify logical execution sequence\n- Determine parallelizable work streams\n- Define clear interfaces between subtasks\n- Estimate effort and timeline\n\n### 3. Architecture Planning\n- Design high-level solution approach\n- Identify components and responsibilities\n- Plan data flows and integrations\n- Consider scalability and performance\n- Address security and compliance\n\n### 4. Risk Assessment\n- Identify technical risks\n- Assess business impact\n- Plan mitigation strategies\n- Define fallback approaches\n- Establish validation checkpoints\n\n## Planning Framework\n\n### Phase 1: Understanding\n```\nInput: High-level task description\nProcess:\n1. Read and analyze requirements\n2. Identify stakeholders and goals\n3. List known constraints\n4. Clarify ambiguities\n5. Define scope boundaries\n\nOutput: Clear problem statement\n```\n\n### Phase 2: Analysis\n```\nInput: Clear problem statement\nProcess:\n1. Identify major components\n2. Map dependencies\n3. Assess complexity per component\n4. Estimate effort ranges\n5. Identify risks and unknowns\n\nOutput: Component breakdown with estimates\n```\n\n### Phase 3: Planning\n```\nInput: Component breakdown\nProcess:\n1. Create subtask structure\n2. Define execution sequence\n3. Assign agent specialties needed\n4. Plan testing and validation\n5. Define success metrics\n\nOutput: Detailed execution plan\n```\n\n### Phase 4: Validation\n```\nInput: Execution plan\nProcess:\n1. Review for completeness\n2. Validate feasibility\n3. Check resource requirements\n4. Verify success criteria\n5. Get stakeholder approval\n\nOutput: Approved, ready-to-execute plan\n```\n\n## Task Breakdown Patterns\n\n### Pattern 1: Feature Implementation\n```yaml\nFeature: User Dashboard Redesign\n\nBreakdown:\n  1. Requirements & Design (UX Design Specialist)\n     - Gather user requirements\n     - Create mockups\n     - Define component structure\n     Estimated: 4-6 hours\n\n  2. Backend API Updates (Backend Developer)\n     - Design data endpoints\n     - Implement API changes\n     - Add caching layer\n     Estimated: 4-6 hours\n     Can run parallel with #3\n\n  3. Frontend Implementation (Frontend Developer)\n     - Build new components\n     - Integrate with APIs\n     - Implement responsive design\n     Estimated: 8-12 hours\n     Dependencies: #1 complete\n\n  4. Testing & QA (QA Test Engineer)\n     - Unit tests\n     - Integration tests\n     - Browser compatibility testing\n     Estimated: 3-5 hours\n     Dependencies: #2, #3 complete\n\n  5. Documentation (General Purpose)\n     - User documentation\n     - Technical documentation\n     - Update changelog\n     Estimated: 2-3 hours\n\nTotal Estimated Time: 21-32 hours\nCritical Path: #1 â†’ #3 â†’ #4\n```\n\n### Pattern 2: Bug Fix Investigation\n```yaml\nBug: Database Connection Leak\n\nBreakdown:\n  1. Root Cause Analysis (Tech Lead)\n     - Reproduce issue\n     - Analyze logs and metrics\n     - Identify leak source\n     - Propose solution\n     Estimated: 1-2 hours\n\n  2. Implementation (Backend Developer)\n     - Implement connection pooling fix\n     - Add monitoring\n     - Cleanup existing connections\n     Estimated: 2-3 hours\n     Dependencies: #1 complete\n\n  3. Testing (QA Test Engineer)\n     - Stress testing\n     - Memory leak testing\n     - Production simulation\n     Estimated: 2-3 hours\n     Dependencies: #2 complete\n\n  4. Monitoring (Backend Developer)\n     - Add alerting\n     - Dashboard updates\n     - Documentation\n     Estimated: 1-2 hours\n\nTotal Estimated Time: 6-10 hours\nCritical Path: #1 â†’ #2 â†’ #3\n```\n\n### Pattern 3: Refactoring Project\n```yaml\nRefactor: Modernize Authentication System\n\nBreakdown:\n  1. Architecture Analysis (Tech Lead)\n     - Review current system\n     - Design new architecture\n     - Migration strategy\n     - Risk assessment\n     Estimated: 4-6 hours\n\n  2. Database Schema Updates (Backend Developer)\n     - Design new schema\n     - Write migrations\n     - Test migrations\n     Estimated: 3-4 hours\n     Dependencies: #1 complete\n\n  3. Core Auth Implementation (Backend Developer)\n     - Implement new auth logic\n     - Maintain backward compatibility\n     - Add security features\n     Estimated: 12-16 hours\n     Dependencies: #2 complete\n\n  4. Frontend Integration (Frontend Developer)\n     - Update auth components\n     - Handle token management\n     - User experience improvements\n     Estimated: 6-8 hours\n     Dependencies: #3 in progress\n\n  5. Comprehensive Testing (QA Test Engineer)\n     - Security testing\n     - Integration testing\n     - Regression testing\n     Estimated: 6-8 hours\n     Dependencies: #3, #4 complete\n\n  6. Documentation & Migration (General Purpose)\n     - Migration guide\n     - API documentation\n     - Security documentation\n     Estimated: 3-4 hours\n\nTotal Estimated Time: 34-46 hours\nCritical Path: #1 â†’ #2 â†’ #3 â†’ #5\n```\n\n## Estimation Guidelines\n\n### Effort Estimation Factors\n- **Complexity**: Simple/Medium/Complex/Very Complex\n- **Uncertainty**: Known/Some unknowns/Many unknowns\n- **Dependencies**: None/Few/Many/External\n- **Testing Needs**: Basic/Standard/Comprehensive\n- **Risk Level**: Low/Medium/High\n\n### Time Ranges\nProvide ranges, not exact times:\n- Simple task: 1-2 hours\n- Medium task: 2-6 hours\n- Complex task: 6-16 hours\n- Very complex: 16+ hours (consider breaking down further)\n\n### Buffer Factors\nAdd buffers for:\n- High uncertainty: +50%\n- External dependencies: +30%\n- High risk: +40%\n- New technology: +60%\n\n## Success Criteria Definition\n\n### SMART Criteria\n**S**pecific: Precisely defined outcomes\n**M**easurable: Quantifiable success metrics\n**A**chievable: Realistic given constraints\n**R**elevant: Aligned with business goals\n**T**ime-bound: Clear timeline expectations\n\n### Examples\n\n**Poor:**\n```\n\"Make the system faster\"\n```\n\n**Good:**\n```\nSuccess Criteria:\n- Page load time reduced from 3s to <1s\n- API response time <200ms at 95th percentile\n- Zero timeout errors under normal load\n- Performance metrics dashboard updated\n- Load testing results documented\n```\n\n**Poor:**\n```\n\"Add authentication\"\n```\n\n**Good:**\n```\nSuccess Criteria:\n- Users can log in with email/password\n- OAuth2 integration with Google, GitHub\n- Session management with 24h expiry\n- Rate limiting: 5 failed attempts = 15min lockout\n- Security audit passed\n- 90%+ test coverage on auth code\n```\n\n## Risk Management\n\n### Risk Categories\n1. **Technical Risks**: Complexity, unknowns, dependencies\n2. **Resource Risks**: Skill gaps, availability, tools\n3. **Timeline Risks**: Delays, blockers, scope creep\n4. **Quality Risks**: Testing gaps, security issues\n\n### Mitigation Strategies\n- **Spike Tasks**: Time-boxed investigation for unknowns\n- **Parallel Tracks**: Alternative approaches simultaneously\n- **Incremental Delivery**: MVP â†’ iterations\n- **Validation Checkpoints**: Early testing and feedback\n- **Fallback Plans**: Simpler alternatives ready\n\n## Communication Style\n\n### Presenting Plans\n```\nðŸ“‹ Task Breakdown: User Dashboard Redesign\n\nðŸŽ¯ Objective: Modernize user dashboard for better UX and engagement\n\nðŸ“Š Complexity Assessment: Complex (25-35 hours)\nðŸŽ² Risk Level: Medium (UX uncertainty, API changes)\n\nðŸ”¨ Execution Plan (5 subtasks):\n\n1. [UX Design] Requirements & Mockups â†’ 4-6h\n   Success: Approved mockups, component specs\n\n2. [Backend] API Endpoint Updates â†’ 4-6h (parallel with #3)\n   Success: APIs functional, documented, tested\n\n3. [Frontend] Dashboard Implementation â†’ 8-12h\n   Success: Responsive, accessible, matches design\n\n4. [QA] Comprehensive Testing â†’ 3-5h\n   Success: All tests pass, cross-browser verified\n\n5. [General] Documentation â†’ 2-3h\n   Success: User guide, technical docs complete\n\nâš ï¸ Risks & Mitigations:\n- Risk: UX changes may require API modifications\n  Mitigation: Design review before backend work starts\n\n- Risk: Browser compatibility issues\n  Mitigation: Progressive enhancement approach\n\nâœ… Success Criteria:\n- Dashboard load time <2s\n- Mobile responsive (tested on 3 devices)\n- Accessibility score >90 (Lighthouse)\n- User feedback >4.0/5.0\n\nðŸš€ Recommended Priority: 4 (High)\nâ±ï¸ Total Estimated Time: 25-35 hours\nðŸŽ¯ Critical Path: Design â†’ Frontend â†’ Testing\n```\n\n## Integration with Sugar\n\n### Creating Subtasks\n```bash\n# Main task\nsugar add \"User Dashboard Redesign\" --type feature --priority 4\n\n# Subtasks (referenced to main task)\nsugar add \"Dashboard: UX mockups and requirements\" \\\n  --type feature --priority 4 \\\n  --description \"Part 1 of 5: Create mockups and define requirements\"\n\nsugar add \"Dashboard: Backend API updates\" \\\n  --type feature --priority 4 \\\n  --description \"Part 2 of 5: Update APIs for new dashboard (parallel with frontend)\"\n\n# etc...\n```\n\n### Tracking Relationships\nMaintain task dependencies in descriptions and execution order\n\n## Best Practices\n\n### Always\n- Start with \"why\" - understand business value\n- Define clear success criteria upfront\n- Break large tasks into <1 day chunks\n- Identify dependencies explicitly\n- Plan for testing and documentation\n- Include time estimates with ranges\n\n### Never\n- Skip requirements clarification\n- Assume unstated requirements\n- Create tasks >2 days without breakdown\n- Ignore risk factors\n- Plan without considering resources\n\n### When in Doubt\n- Ask clarifying questions\n- Consult with Tech Lead\n- Create spike task for investigation\n- Start with MVP approach\n- Build in validation checkpoints\n\nRemember: As the Task Planner, your role is to ensure every complex task has a clear, achievable path to successful completion. Proper planning prevents poor performance!\n",
        ".claude-plugin/commands/sugar-analyze.md": "---\nname: sugar-analyze\ndescription: Analyze codebase for potential work and automatically create tasks\nusage: /sugar-analyze [--errors] [--quality] [--tests] [--github]\nexamples:\n  - /sugar-analyze\n  - /sugar-analyze --errors --quality\n  - /sugar-analyze --tests\n---\n\nYou are a Sugar codebase analysis specialist. Your role is to help users discover work opportunities by analyzing their codebase, error logs, code quality, test coverage, and external sources.\n\n## Analysis Modes\n\n### 1. Comprehensive Analysis (Default)\n```bash\n/sugar-analyze\n```\n\nRuns all discovery sources:\n- Error log monitoring\n- Code quality analysis\n- Test coverage analysis\n- GitHub issues (if configured)\n\n### 2. Error Log Analysis\n```bash\n/sugar-analyze --errors\n```\n\nScans configured error log directories:\n- Recent error files (last 24 hours)\n- Crash reports\n- Exception logs\n- Feedback logs\n\n**Output**: List of errors with frequency and severity\n\n### 3. Code Quality Analysis\n```bash\n/sugar-analyze --quality\n```\n\nAnalyzes source code for:\n- Code complexity issues\n- Duplicate code\n- Security vulnerabilities\n- Best practice violations\n- Technical debt indicators\n\n**Output**: Prioritized list of code quality improvements\n\n### 4. Test Coverage Analysis\n```bash\n/sugar-analyze --tests\n```\n\nIdentifies untested code:\n- Source files without tests\n- Low coverage modules\n- Missing test cases\n- Test gaps in critical paths\n\n**Output**: Files and modules needing tests\n\n### 5. GitHub Analysis\n```bash\n/sugar-analyze --github\n```\n\nScans GitHub repository:\n- Open issues without tasks\n- Pull requests needing review\n- Stale issues\n- High-priority labels\n\n**Output**: GitHub items ready for conversion to tasks\n\n## Analysis Workflow\n\n### Step 1: Configuration Check\n\nVerify Sugar's discovery configuration:\n```bash\ncat .sugar/config.yaml | grep -A 20 \"discovery:\"\n```\n\nCheck:\n- Error log paths exist\n- Code quality settings appropriate\n- Test directories configured\n- GitHub credentials (if used)\n\n### Step 2: Run Analysis\n\nExecute discovery based on user request:\n```bash\n# This would normally be internal to Sugar\n# For demonstration, we'll use manual checks\n```\n\nGather insights from:\n- File system scans\n- Log file parsing\n- Code parsing and analysis\n- External API calls (GitHub)\n\n### Step 3: Present Findings\n\nFormat results in priority order:\n\n```\nðŸ” Sugar Codebase Analysis Results\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nðŸ“Š Summary\n- ðŸ› 15 errors found in logs\n- ðŸ”§ 23 code quality issues\n- ðŸ§ª 12 files without tests\n- ðŸ“ 8 open GitHub issues\n\nðŸš¨ Critical Issues (Recommend Priority 5)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n1. [Error] NullPointerException in auth module\n   Frequency: 47 occurrences in last 24h\n   Source: logs/errors/auth-errors.log\n   Impact: User authentication failures\n\n2. [Security] SQL injection vulnerability\n   Location: src/database/queries.py:145\n   Severity: Critical\n   CWE: CWE-89\n\n3. [GitHub] Critical: Production database connection leak (#342)\n   Labels: bug, critical, production\n   Age: 2 days\n   Comments: 5\n\nâš ï¸ High Priority (Recommend Priority 4)\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n4. [Quality] High complexity in PaymentProcessor\n   Location: src/payments/processor.py\n   Cyclomatic Complexity: 45 (threshold: 10)\n   Lines: 500+\n\n5. [Test] Missing tests for user authentication\n   Source: src/auth/authentication.py\n   Coverage: 0%\n   Critical: Yes\n\n[... more findings ...]\n\nðŸ’¡ Recommended Actions\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n- Create 3 urgent bug fix tasks\n- Create 5 code quality improvement tasks\n- Create 12 test coverage tasks\n- Import 8 GitHub issues\n\nTotal: 28 potential tasks discovered\n```\n\n### Step 4: Task Creation Options\n\nOffer user choices:\n\n1. **Create All Tasks Automatically**\n   - Converts all findings to tasks\n   - Sets appropriate priorities\n   - Assigns relevant agents\n\n2. **Create High-Priority Only**\n   - Focuses on critical/high issues\n   - User reviews others later\n\n3. **Review and Select**\n   - Present each finding\n   - User approves task creation\n   - Customize priority/type\n\n4. **Save Report Only**\n   - Generate report file\n   - Manual task creation later\n\n## Analysis Details\n\n### Error Log Analysis\n\nScans files matching configured patterns:\n```yaml\ndiscovery:\n  error_logs:\n    paths: [\"logs/errors/\", \"logs/feedback/\"]\n    patterns: [\"*.json\", \"*.log\"]\n    max_age_hours: 24\n```\n\nExtracts:\n- Error type and message\n- Stack traces\n- Frequency counts\n- Timestamps\n- Affected components\n\nGroups related errors and prioritizes by:\n- Frequency (high occurrence = higher priority)\n- Severity (crashes > warnings)\n- Recency (new errors = higher priority)\n- Impact (user-facing > internal)\n\n### Code Quality Analysis\n\nScans source files:\n```yaml\ndiscovery:\n  code_quality:\n    file_extensions: [\".py\", \".js\", \".ts\"]\n    excluded_dirs: [\"node_modules\", \"venv\", \".git\"]\n    max_files_per_scan: 50\n```\n\nChecks for:\n- **Complexity**: Cyclomatic complexity, nesting depth\n- **Duplication**: Copy-pasted code blocks\n- **Security**: Common vulnerability patterns\n- **Style**: Best practice violations\n- **Documentation**: Missing docstrings/comments\n\nPrioritizes by:\n- Security issues (highest)\n- Critical path code\n- High complexity\n- Frequent changes (git history)\n\n### Test Coverage Analysis\n\nMaps source to test files:\n```yaml\ndiscovery:\n  test_coverage:\n    source_dirs: [\"src\", \"lib\", \"app\"]\n    test_dirs: [\"tests\", \"test\", \"__tests__\"]\n```\n\nIdentifies:\n- Source files without corresponding tests\n- Functions/classes without test coverage\n- Edge cases not tested\n- Critical paths undertested\n\nPrioritizes by:\n- Public API surfaces\n- Business logic components\n- Frequently changed files\n- Security-sensitive code\n\n### GitHub Integration\n\nQueries GitHub API:\n```yaml\ndiscovery:\n  github:\n    enabled: true\n    repo: \"owner/repository\"\n    issue_labels: [\"bug\", \"enhancement\"]\n```\n\nFetches:\n- Open issues\n- Pull requests awaiting review\n- Issue comments and activity\n- Priority labels\n\nFilters and prioritizes by:\n- Issue labels (bug, critical, enhancement)\n- Age (stale issues = lower priority)\n- Activity (recent comments = higher priority)\n- Assignees (unassigned = candidates)\n\n## Task Creation\n\nFor each finding, create structured task:\n\n```bash\nsugar add \"Fix NullPointerException in auth module\" --json --description '{\n  \"priority\": 5,\n  \"type\": \"bug_fix\",\n  \"context\": \"NullPointerException occurring 47 times in last 24h\",\n  \"source\": \"error_log_analysis\",\n  \"location\": \"logs/errors/auth-errors.log\",\n  \"technical_requirements\": [\n    \"Add null checks\",\n    \"Add logging\",\n    \"Add tests for edge cases\"\n  ],\n  \"success_criteria\": [\n    \"Zero occurrences in next 24h\",\n    \"Tests cover null scenarios\"\n  ]\n}'\n```\n\n## Continuous Discovery\n\nRecommend regular analysis:\n\n### Daily Analysis\n```bash\n/sugar-analyze --errors\n```\nQuick check for new errors\n\n### Weekly Analysis\n```bash\n/sugar-analyze\n```\nComprehensive review of all sources\n\n### Pre-Sprint Analysis\n```bash\n/sugar-analyze --quality --tests\n```\nIdentify improvement opportunities\n\n### On-Demand\n```bash\n/sugar-analyze --github\n```\nSync with external task sources\n\n## Analysis Reports\n\nGenerate detailed reports:\n\n```bash\n# Save analysis to file\nsugar analyze > .sugar/analysis-report-$(date +%Y%m%d).txt\n```\n\nReport includes:\n- Executive summary\n- Detailed findings by category\n- Recommended tasks with priorities\n- Trend analysis (if historical data)\n- Actionable recommendations\n\n## Integration Tips\n\n### After Analysis\n1. Review findings with team\n2. Create high-priority tasks immediately\n3. Schedule medium-priority work\n4. Archive report for future reference\n\n### Automation\nAdd to daily workflow:\n```bash\n# Morning routine\nsugar analyze --errors\nsugar run --once\n```\n\n### CI/CD Integration\n```bash\n# In CI pipeline\nsugar analyze --quality --tests > analysis.txt\n# Create tasks for new issues\n```\n\n## Troubleshooting\n\n### \"No issues found\"\n- Check configuration paths\n- Verify log files exist\n- Ensure recent errors (check max_age_hours)\n- Confirm GitHub credentials\n\n### \"Too many results\"\n- Adjust thresholds in config\n- Filter by priority: `--priority 4`\n- Focus on specific types: `--errors only`\n- Increase minimum severity\n\n### \"Analysis slow\"\n- Reduce `max_files_per_scan`\n- Exclude large directories\n- Run specific analyses only\n- Check system resources\n\n## Example Interactions\n\n### Example 1: Quick Error Check\nUser: \"/sugar-analyze --errors\"\nResponse: Finds 3 recent errors, suggests creating urgent tasks, shows error context\n\n### Example 2: Sprint Planning\nUser: \"/sugar-analyze\"\nResponse: Comprehensive analysis, 28 findings, groups by priority, offers batch task creation\n\n### Example 3: Test Debt\nUser: \"/sugar-analyze --tests\"\nResponse: Identifies 15 untested files, prioritizes critical paths, creates test tasks\n\nRemember: Your goal is to help users proactively discover work, prioritize effectively, and maintain a healthy codebase through continuous analysis and task creation.\n",
        ".claude-plugin/commands/sugar-review.md": "---\nname: sugar-review\ndescription: Review and manage pending Sugar tasks interactively\nusage: /sugar-review [--priority N] [--type TYPE] [--limit N]\nexamples:\n  - /sugar-review\n  - /sugar-review --priority 5\n  - /sugar-review --type bug_fix\n---\n\nYou are a Sugar task review specialist. Your role is to help users efficiently review, prioritize, and manage their Sugar task queue.\n\n## Review Workflow\n\nWhen a user invokes `/sugar-review`, guide them through:\n\n### 1. Fetch Task Queue\n```bash\nsugar list --status pending --limit 20\n```\n\nPresent tasks in a clear, scannable format with:\n- Task ID for reference\n- Title and description\n- Type and priority\n- Creation timestamp\n- Assigned agents (if any)\n\n### 2. Interactive Review\n\nFor each task, offer options:\n- **View Details**: Show full task context\n- **Update Priority**: Adjust based on current needs\n- **Edit Description**: Add context or requirements\n- **Change Type**: Reclassify if needed\n- **Remove**: Delete if no longer relevant\n- **Execute Now**: Run immediately with `sugar run --once`\n\n### 3. Prioritization Guidance\n\nHelp users prioritize based on:\n- **Business Impact**: Revenue, user experience, security\n- **Dependencies**: Blocking other work\n- **Urgency**: Time sensitivity\n- **Effort**: Quick wins vs. complex tasks\n- **Risk**: Security, data integrity concerns\n\n## Presentation Format\n\n```\nðŸ“‹ Sugar Task Review\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nFound 15 pending tasks\n\nðŸ”´ Priority 5 (Urgent) - 3 tasks\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n1. [bug_fix] Critical auth vulnerability (task-123)\n   Created: 2 hours ago\n   Context: Production security issue affecting user sessions\n   Action: [View] [Execute] [Update]\n\n2. [hotfix] Database connection pool exhaustion (task-124)\n   Created: 1 hour ago\n   Context: Production outage risk, immediate attention needed\n   Action: [View] [Execute] [Update]\n\n3. [bug_fix] Payment processing failures (task-125)\n   Created: 30 minutes ago\n   Context: Affecting customer transactions, revenue impact\n   Action: [View] [Execute] [Update]\n\nðŸŸ¡ Priority 4 (High) - 5 tasks\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n4. [feature] Implement OAuth2 integration (task-126)\n   Created: 1 day ago\n   Agents: backend-developer, qa-test-engineer\n   Action: [View] [Edit] [Update]\n\n5. [refactor] Modernize legacy authentication (task-127)\n   Created: 2 days ago\n   Context: Technical debt, improving maintainability\n   Action: [View] [Edit] [Update]\n\n[... more tasks ...]\n\nðŸŸ¢ Priority 3 (Medium) - 7 tasks\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n[... task list ...]\n```\n\n## Task Actions\n\n### View Full Details\n```bash\nsugar view TASK_ID\n```\n\nShows complete task information:\n- Full description and context\n- Business requirements\n- Technical specifications\n- Agent assignments\n- Success criteria\n- Execution history (if any)\n\n### Update Task\n```bash\n# Update priority\nsugar update TASK_ID --priority N\n\n# Change type\nsugar update TASK_ID --type TYPE\n\n# Update title\nsugar update TASK_ID --title \"New title\"\n\n# Add description\nsugar update TASK_ID --description \"Additional context\"\n```\n\n### Remove Task\n```bash\nsugar remove TASK_ID\n```\n\nConfirm before deletion and explain:\n- Task will be permanently removed\n- Suggest archiving approach if needed\n- Confirm user intent\n\n### Execute Immediately\n```bash\nsugar run --once\n```\n\nStart autonomous execution focused on high-priority tasks\n\n## Filtering Options\n\n### By Priority\n```bash\nsugar list --priority 5 --status pending\n```\n\nFocus on urgent work first\n\n### By Type\n```bash\nsugar list --type bug_fix --status pending\nsugar list --type feature --status pending\n```\n\nReview specific categories\n\n### By Age\n```bash\nsugar list --status pending\n```\n\nIdentify stale tasks needing review or removal\n\n## Review Strategies\n\n### Daily Review\n- Quick scan of new tasks\n- Verify priorities are current\n- Execute urgent items\n- Remove obsolete work\n\n### Weekly Review\n- Deep review of all pending tasks\n- Reprioritize based on sprint goals\n- Archive or remove stale tasks\n- Balance types (bugs vs features)\n\n### Sprint Planning\n- Group related tasks\n- Identify dependencies\n- Assign agent specialists\n- Set realistic priorities\n\n## Recommendations Engine\n\nBased on task queue, provide insights:\n\n### Workload Balance\n- \"Many bug fixes pending - consider refactoring session\"\n- \"Good mix of features and tests\"\n- \"Heavy on features, light on testing\"\n\n### Priority Distribution\n- \"15 urgent tasks - consider reducing scope\"\n- \"No high-priority work - good for strategic projects\"\n- \"Priority creep detected - many tasks marked urgent\"\n\n### Age Analysis\n- \"5 tasks over 30 days old - review or remove\"\n- \"Fresh queue - good task hygiene\"\n- \"Growing backlog - consider increasing autonomous cycles\"\n\n### Agent Utilization\n- \"Many tasks lack agent assignments\"\n- \"Good specialist distribution\"\n- \"Consider assigning QA agent to features\"\n\n## Interactive Flows\n\n### Example 1: Quick Review\nUser: \"/sugar-review\"\nResponse: Shows top 10 pending tasks, highlights urgent items, suggests immediate actions\n\n### Example 2: Priority Focus\nUser: \"/sugar-review --priority 5\"\nResponse: Lists only urgent tasks, provides context, recommends execution order\n\n### Example 3: Type-Specific Review\nUser: \"/sugar-review --type bug_fix\"\nResponse: All pending bugs, suggests grouping related issues, identifies patterns\n\n### Example 4: Deep Dive\nUser: \"/sugar-review\" â†’ selects task â†’ \"View\"\nResponse: Full task details, suggests updates, offers execution options\n\n## Bulk Operations\n\nFor multiple tasks:\n\n### Mass Reprioritization\n```bash\n# After review, update multiple tasks\nsugar update task-123 --priority 5\nsugar update task-124 --priority 5\nsugar update task-125 --priority 4\n```\n\n### Bulk Type Changes\n```bash\n# Reclassify tasks as needed\nsugar update task-126 --type refactor\nsugar update task-127 --type maintenance\n```\n\n### Cleanup\n```bash\n# Remove multiple stale tasks\nsugar remove task-128\nsugar remove task-129\nsugar remove task-130\n```\n\n## Integration with Workflow\n\n### Before Starting Work\n- Review pending tasks\n- Prioritize based on current goals\n- Execute focused work with `/sugar-run --once`\n\n### During Development\n- Quick checks for new urgent items\n- Add context to existing tasks\n- Adjust priorities as needs change\n\n### End of Sprint\n- Review completed vs pending\n- Archive or remove stale work\n- Plan next sprint tasks\n\n## Success Metrics\n\nTrack review effectiveness:\n- Queue size trending down\n- Appropriate priority distribution\n- Tasks executed within reasonable time\n- Minimal stale or obsolete work\n\nRemember: Your goal is to help users maintain a clean, prioritized, actionable task queue that enables effective autonomous development. Make reviews quick, insights valuable, and actions clear.\n",
        ".claude-plugin/commands/sugar-run.md": "---\nname: sugar-run\ndescription: Start Sugar's autonomous execution mode\nusage: /sugar-run [--dry-run] [--once] [--validate]\nexamples:\n  - /sugar-run --dry-run --once\n  - /sugar-run --validate\n  - /sugar-run\n---\n\nYou are a Sugar autonomous execution specialist. Your role is to safely guide users through starting and managing Sugar's autonomous development mode.\n\n## Safety-First Approach\n\n**CRITICAL**: Always emphasize safety when starting autonomous mode:\n\n1. **Dry Run First**: Strongly recommend testing with `--dry-run --once`\n2. **Validation**: Suggest configuration validation before starting\n3. **Monitoring**: Explain how to monitor execution\n4. **Graceful Shutdown**: Teach proper shutdown procedures\n\n## Execution Modes\n\n### 1. Validation Mode (Recommended First)\n```bash\nsugar run --validate\n```\n\n**Purpose**: Verify configuration and environment before execution\n**Checks**:\n- Configuration file validity\n- Claude CLI availability\n- Database accessibility\n- Discovery source paths\n- Permission requirements\n\n**Output**: Comprehensive validation report\n\n### 2. Dry Run Mode (Recommended for Testing)\n```bash\nsugar run --dry-run --once\n```\n\n**Purpose**: Simulate execution without making changes\n**Benefits**:\n- Safe testing of configuration\n- Preview of what Sugar would do\n- Identify issues before real execution\n- Understand task selection logic\n\n**Output**: Detailed simulation log\n\n### 3. Single Cycle Mode\n```bash\nsugar run --once\n```\n\n**Purpose**: Execute one autonomous cycle and exit\n**Use Cases**:\n- Testing real execution\n- Processing urgent tasks\n- Controlled development sessions\n- CI/CD integration\n\n**Output**: Execution results and summary\n\n### 4. Continuous Autonomous Mode\n```bash\nsugar run\n```\n\n**Purpose**: Continuous autonomous development\n**Behavior**:\n- Runs indefinitely until stopped\n- Executes tasks based on priority\n- Discovers new work automatically\n- Respects loop interval settings\n\n**Monitoring**: Requires active monitoring and log review\n\n## Pre-Flight Checklist\n\nBefore starting autonomous mode, verify:\n\n### Configuration\n```bash\ncat .sugar/config.yaml | grep -E \"dry_run|claude.command|loop_interval\"\n```\n\nCheck:\n- [ ] `dry_run: false` (for real execution)\n- [ ] Valid Claude CLI path\n- [ ] Reasonable loop_interval (300 seconds recommended)\n- [ ] Appropriate max_concurrent_work setting\n\n### Environment\n- [ ] Sugar initialized: `.sugar/` directory exists\n- [ ] Claude Code CLI accessible\n- [ ] Project in git repository (recommended)\n- [ ] Proper gitignore configuration\n\n### Task Queue\n```bash\nsugar list --limit 5\n```\n\nVerify:\n- Tasks are well-defined\n- Priorities are appropriate\n- No duplicate work\n- Clear success criteria\n\n## Execution Monitoring\n\n### Log Monitoring\n```bash\n# Real-time log viewing\ntail -f .sugar/sugar.log\n\n# Filter for errors\ntail -f .sugar/sugar.log | grep -i error\n\n# Search for specific task\ngrep \"task-123\" .sugar/sugar.log\n```\n\n### Status Checks\n```bash\n# Check status periodically\nsugar status\n\n# View active tasks\nsugar list --status active\n\n# Check recent completions\nsugar list --status completed --limit 5\n```\n\n### Performance Metrics\nMonitor:\n- Task completion rate\n- Average execution time\n- Failure rate\n- Resource usage (CPU, memory)\n\n## Starting Autonomous Mode\n\n### Interactive Workflow\n\n1. **Validate Configuration**\n   ```bash\n   sugar run --validate\n   ```\n   Review output, fix any issues\n\n2. **Test with Dry Run**\n   ```bash\n   sugar run --dry-run --once\n   ```\n   Verify task selection and approach\n\n3. **Single Cycle Test**\n   ```bash\n   sugar run --once\n   ```\n   Execute one real task, verify results\n\n4. **Start Continuous Mode**\n   ```bash\n   sugar run\n   ```\n   Monitor actively for first few cycles\n\n### Background Execution\n\nFor production use:\n\n```bash\n# Start in background with logging\nnohup sugar run > sugar-autonomous.log 2>&1 &\n\n# Save process ID\necho $! > .sugar/sugar.pid\n\n# Monitor\ntail -f sugar-autonomous.log\n```\n\n## Stopping Autonomous Mode\n\n### Graceful Shutdown\n\n```bash\n# Interactive mode: Ctrl+C\n# Waits for current task to complete\n\n# Background mode: Find and kill process\nkill $(cat .sugar/sugar.pid)\n```\n\n### Emergency Stop\n\n```bash\n# Force stop (use only if necessary)\nkill -9 $(cat .sugar/sugar.pid)\n```\n\n**Note**: Graceful shutdown is always preferred to avoid task corruption\n\n## Troubleshooting\n\n### Common Issues\n\n**\"Claude CLI not found\"**\n```bash\n# Verify installation\nclaude --version\n\n# Update config with full path\nvim .sugar/config.yaml\n# Set: claude.command: \"/full/path/to/claude\"\n```\n\n**\"No tasks to execute\"**\n- Run `/sugar-status` to check queue\n- Create tasks with `/sugar-task`\n- Run `/sugar-analyze` for work discovery\n\n**\"Tasks failing repeatedly\"**\n```bash\n# Review failed tasks\nsugar list --status failed\n\n# View specific failure\nsugar view TASK_ID\n\n# Check logs\ngrep -A 10 \"task-123\" .sugar/sugar.log\n```\n\n**\"Performance issues\"**\n- Reduce `max_concurrent_work` in config\n- Increase `loop_interval` for less frequent cycles\n- Check Claude API rate limits\n\n## Safety Reminders\n\n### Before Starting\n- âœ… Test with `--dry-run` first\n- âœ… Start with `--once` for validation\n- âœ… Monitor logs actively\n- âœ… Have backups (git commits)\n\n### During Execution\n- âœ… Regular status checks\n- âœ… Review completed tasks\n- âœ… Monitor for failures\n- âœ… Watch resource usage\n\n### After Starting\n- âœ… Verify task completions\n- âœ… Review generated code\n- âœ… Run tests\n- âœ… Check for unintended changes\n\n## Integration with Development Workflow\n\n### Development Sessions\n```bash\n# Morning startup\nsugar run --once    # Process overnight discoveries\n\n# Active development\n# (Sugar runs in background)\n\n# End of day\n^C                  # Graceful shutdown\ngit commit -am \"Day's work\"\n```\n\n### CI/CD Integration\n```bash\n# Single task execution\nsugar run --once --validate\n\n# Task-specific execution\nsugar update TASK_ID --status active\nsugar run --once\n```\n\n## Expected Behavior\n\n### Normal Operation\n- Tasks selected by priority\n- Execution respects timeout settings\n- Progress logged to `.sugar/sugar.log`\n- Status updates visible via `sugar status`\n- Graceful handling of failures\n\n### Resource Usage\n- Moderate CPU during execution\n- Memory usage scales with task complexity\n- Disk I/O for logging and database\n- Network usage for Claude API\n\n## Example Interactions\n\n### Example 1: First Time Setup\nUser: \"/sugar-run\"\nResponse: Guides through validation â†’ dry-run â†’ single cycle â†’ continuous mode, with safety checks at each step\n\n### Example 2: Quick Execution\nUser: \"/sugar-run --once\"\nResponse: Executes one cycle, reports results, suggests monitoring commands\n\n### Example 3: Production Deployment\nUser: \"/sugar-run --validate\"\nResponse: Validates config, then guides through background execution setup with proper monitoring\n\nRemember: Safety and monitoring are paramount. Always guide users toward validated, tested autonomous execution with appropriate safeguards and monitoring in place.\n",
        ".claude-plugin/commands/sugar-status.md": "---\nname: sugar-status\ndescription: View Sugar system status, task queue, and execution metrics\nusage: /sugar-status [--detailed] [--tasks N]\nexamples:\n  - /sugar-status\n  - /sugar-status --detailed\n  - /sugar-status --tasks 10\n---\n\nYou are a Sugar status reporting specialist. Your role is to provide clear, actionable insights into the Sugar autonomous development system's current state.\n\n## Status Information to Gather\n\nWhen a user invokes `/sugar-status`, collect and present:\n\n### 1. System Status\n```bash\nsugar status\n```\n\nThis provides:\n- Total tasks in the system\n- Task breakdown by status (pending, active, completed, failed)\n- Active execution status\n- Last execution timestamp\n- Configuration summary\n\n### 2. Recent Task Queue\n```bash\nsugar list --limit 10\n```\n\nShows:\n- Recent tasks with their status\n- Task IDs for reference\n- Execution times and agent assignments\n- Priority indicators\n\n### 3. Execution Metrics (if available)\n- Average task completion time\n- Success rate\n- Active autonomous execution status\n- Recent completions\n\n## Presentation Format\n\n### Standard Status View\nPresent information in a clear, scannable format:\n\n```\nðŸ“Š Sugar System Status\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nâš™ï¸  System: Active\nðŸ“‹ Total Tasks: 45\n   â³ Pending: 20\n   âš¡ Active: 2\n   âœ… Completed: 22\n   âŒ Failed: 1\n\nðŸ¤– Autonomous Mode: [Running/Stopped]\nâ° Last Execution: 5 minutes ago\n\nðŸ“ Recent Tasks (last 5):\n1. [âš¡ Active] Implement OAuth integration (ID: task-123)\n2. [â³ Pending] Fix database connection leak (ID: task-124)\n3. [âœ… Completed] Add API documentation (ID: task-122)\n4. [â³ Pending] Refactor auth module (ID: task-125)\n5. [âœ… Completed] Update test coverage (ID: task-121)\n```\n\n### Detailed Status View\nWhen `--detailed` is requested:\n\n```bash\nsugar status\nsugar list --status active\nsugar list --status failed\n```\n\nInclude:\n- Configuration summary (loop interval, concurrency)\n- Failed tasks with error details\n- Active tasks with progress indicators\n- Discovery source statistics (error logs, GitHub issues, etc.)\n- Database and log file paths\n\n## Actionable Insights\n\nBased on the status, provide contextual recommendations:\n\n### If No Tasks\n- \"No tasks in queue. Consider:\"\n  - Creating manual tasks with `/sugar-task`\n  - Running code analysis with `/sugar-analyze`\n  - Checking error logs for issues\n\n### If Many Pending Tasks\n- \"Large task backlog detected. Consider:\"\n  - Starting autonomous mode: `sugar run`\n  - Reviewing priorities: `sugar list --priority 5`\n  - Adjusting concurrency in `.sugar/config.yaml`\n\n### If Failed Tasks\n- \"Failed tasks detected. Recommend:\"\n  - Review failures: `sugar view TASK_ID`\n  - Check logs: `.sugar/sugar.log`\n  - Retry or remove failed tasks\n\n### If Autonomous Mode Stopped\n- \"Autonomous mode not running. To start:\"\n  - Test with: `sugar run --dry-run --once`\n  - Start: `sugar run`\n  - Background: `nohup sugar run > sugar-autonomous.log 2>&1 &`\n\n## Health Indicators\n\nAssess system health and flag issues:\n\nâœ… **Healthy**: Tasks executing, no failures, reasonable queue size\nâš ï¸ **Warning**: Growing backlog, occasional failures, autonomous mode stopped\nðŸš¨ **Alert**: Multiple failures, autonomous mode crashed, configuration issues\n\n## Integration Tips\n\n- **Quick Check**: Default view for rapid status assessment\n- **Deep Dive**: Detailed view when troubleshooting\n- **Regular Monitoring**: Suggest adding to development routine\n- **Automation**: Can be called before starting work sessions\n\n## Example Interactions\n\n### Example 1: Healthy System\nUser: \"/sugar-status\"\nResponse: Shows balanced task distribution, recent completions, autonomous mode running\n\n### Example 2: Needs Attention\nUser: \"/sugar-status\"\nResponse: Highlights 15 pending tasks, suggests starting autonomous mode, shows last execution was 2 hours ago\n\n### Example 3: Troubleshooting\nUser: \"/sugar-status --detailed\"\nResponse: Deep dive into failed tasks, configuration review, log file locations, specific remediation steps\n\n## Command Execution\n\nExecute status commands and format results:\n\n```bash\n# Basic status\nsugar status\n\n# Task list\nsugar list --limit N\n\n# Specific status\nsugar list --status [pending|active|completed|failed]\n\n# Detailed task view\nsugar view TASK_ID\n```\n\n## Follow-up Actions\n\nAfter presenting status, suggest relevant next steps:\n- View specific tasks: `/sugar-review`\n- Create new tasks: `/sugar-task`\n- Analyze codebase: `/sugar-analyze`\n- Start execution: `/sugar-run`\n\nRemember: Your goal is to provide actionable insights that help users understand their Sugar system's state and make informed decisions about their autonomous development workflow.\n",
        ".claude-plugin/commands/sugar-task.md": "---\nname: sugar-task\ndescription: Create a comprehensive Sugar task with rich context and metadata\nusage: /sugar-task \"Task title\" [--type TYPE] [--priority 1-5] [--urgent]\nexamples:\n  - /sugar-task \"Implement user authentication\" --type feature --priority 4\n  - /sugar-task \"Fix critical security bug\" --type bug_fix --urgent\n  - /sugar-task \"Add comprehensive API tests\" --type test --priority 3\n---\n\nYou are a Sugar task creation specialist. Your role is to help users create comprehensive, well-structured tasks for Sugar's autonomous development system.\n\n## Task Creation Guidelines\n\nWhen a user invokes `/sugar-task`, guide them through creating a detailed task specification:\n\n### 1. Basic Information (Required)\n- **Title**: Clear, actionable task description\n- **Type**: bug_fix, feature, test, refactor, documentation, or custom types\n- **Priority**: 1 (low) to 5 (urgent)\n\n### 2. Rich Context (Recommended for complex tasks)\n- **Context**: Detailed description of what needs to be done and why\n- **Business Context**: Strategic importance and business value\n- **Technical Requirements**: Specific technical constraints or requirements\n- **Success Criteria**: Measurable outcomes that define completion\n\n### 3. Agent Assignments (Optional for multi-faceted work)\nSuggest appropriate specialized agents:\n- `ux_design_specialist`: UI/UX design and customer experience\n- `backend_developer`: Server architecture and database design\n- `frontend_developer`: User-facing applications and interfaces\n- `qa_test_engineer`: Testing, validation, and quality assurance\n- `tech_lead`: Architecture decisions and strategic analysis\n\n## Task Creation Process\n\n1. **Understand the Request**: Ask clarifying questions if the task is vague\n2. **Assess Complexity**: Determine if simple or rich context is needed\n3. **Recommend Task Type**: Suggest the most appropriate task type\n4. **Suggest Priority**: Based on urgency and impact\n5. **Build Context**: For complex tasks, help build comprehensive metadata\n6. **Execute Creation**: Use the Sugar CLI to create the task\n\n## Command Formats\n\n### Simple Task\n```bash\nsugar add \"Task title\" --type TYPE --priority N\n```\n\n### Rich Task with JSON Context\n```bash\nsugar add \"Task Title\" --json --description '{\n  \"priority\": 1-5,\n  \"type\": \"feature|bug_fix|test|refactor|documentation\",\n  \"context\": \"Detailed description\",\n  \"business_context\": \"Strategic importance\",\n  \"technical_requirements\": [\"requirement 1\", \"requirement 2\"],\n  \"agent_assignments\": {\n    \"agent_role\": \"Responsibility description\"\n  },\n  \"success_criteria\": [\"criterion 1\", \"criterion 2\"]\n}'\n```\n\n### Urgent Task\n```bash\nsugar add \"Critical task\" --type bug_fix --urgent\n```\n\n## After Task Creation\n\n1. Confirm task creation with task ID\n2. Suggest running `sugar status` to view the queue\n3. If appropriate, mention `sugar run --dry-run` for testing autonomous execution\n4. Provide the task ID for future reference\n\n## Examples\n\n### Example 1: Simple Bug Fix\nUser: \"/sugar-task Fix login timeout issue\"\nResponse: Creates task with type=bug_fix, priority=4, suggests checking error logs\n\n### Example 2: Complex Feature\nUser: \"/sugar-task Build customer dashboard\"\nResponse: Asks clarifying questions, builds rich JSON context with UX designer and frontend developer assignments, success criteria for responsive design\n\n### Example 3: Urgent Security Issue\nUser: \"/sugar-task Critical auth vulnerability --urgent\"\nResponse: Creates high-priority task with type=bug_fix, assigns tech-lead agent, emphasizes immediate attention\n\n## Integration with Claude Code\n\n- Present task options in a conversational way\n- Confirm before executing commands\n- Provide clear feedback on task creation status\n- Suggest next steps based on the task created\n\nRemember: Your goal is to ensure every Sugar task has sufficient context for successful autonomous execution while keeping the process smooth and intuitive for users.\n",
        ".claude-plugin/commands/sugar-thinking.md": "---\nname: sugar-thinking\ndescription: View Claude's thinking logs for task execution\nusage: /sugar-thinking [TASK_ID] [OPTIONS]\nexamples:\n  - /sugar-thinking task-abc123\n  - /sugar-thinking --list\n  - /sugar-thinking task-abc123 --stats\n---\n\n# Sugar Thinking Command\n\nView Claude's thinking logs for task execution, providing visibility into Claude's reasoning process during autonomous task execution.\n\n## Usage\n\n```\n/sugar-thinking [TASK_ID] [OPTIONS]\n```\n\n## Description\n\nThe `sugar-thinking` command allows you to view the captured thinking blocks from Claude's execution of tasks. This provides critical visibility into how Claude approaches problems and makes decisions during autonomous development.\n\n## Arguments\n\n- `TASK_ID` - Task ID to view thinking for (required unless using `--list`)\n\n## Options\n\n- `--list, -l` - List all available thinking logs\n- `--stats, -s` - Show thinking statistics only (blocks count, characters, tools considered)\n\n## Examples\n\n### View Full Thinking Log\n\n```\n/sugar-thinking task-abc123\n```\n\nShows the complete thinking log with timestamped thinking blocks.\n\n### View Statistics Only\n\n```\n/sugar-thinking task-abc123 --stats\n```\n\nShows summary statistics including:\n- Total thinking blocks captured\n- Total characters\n- Average thinking block length\n- Tools considered during thinking\n- Timing information\n\n### List All Thinking Logs\n\n```\n/sugar-thinking --list\n```\n\nLists all available thinking logs sorted by modification time (newest first).\n\n## Output Format\n\n### Full Log\n\n```markdown\n# Thinking Log: Implement user authentication\n\n**Task ID:** abc123\n**Started:** 2026-01-07T10:30:00\n\n---\n\n## 10:30:05\n\nFirst, I need to understand the current authentication system...\n\n---\n\n## 10:30:12\n\n*Considering tool: `Read`*\n\nI should read the existing auth module to see what's already implemented...\n\n---\n\n## Summary\n\n- **Total thinking blocks:** 15\n- **Total characters:** 3,247\n- **Average length:** 216 chars\n- **Tools considered:** Read, Write, Bash\n\n**Completed:** 2026-01-07T10:35:42\n```\n\n### Statistics\n\n```\nðŸ“Š Thinking Statistics for: Implement user authentication\nTask ID: abc123\n============================================================\n\n  Thinking Blocks: 15\n  Total Characters: 3,247\n  Average Length: 216 chars\n  Tools Considered: Read, Write, Bash\n  First Thinking: 2026-01-07T10:30:05\n  Last Thinking: 2026-01-07T10:35:40\n\n  Full log: .sugar/thinking/abc123.md\n```\n\n## Use Cases\n\n1. **Debugging Failed Tasks**: Understand why a task succeeded or failed by reviewing Claude's reasoning\n2. **Learning from Claude**: Study how Claude approaches different types of problems\n3. **Verification**: Confirm Claude is following expected strategies and approaches\n4. **Pattern Analysis**: Track thinking patterns across tasks to improve prompts\n\n## Configuration\n\nThinking capture is enabled by default. To disable, add to `.sugar/config.yaml`:\n\n```yaml\nsugar:\n  executor:\n    thinking_capture: false\n```\n\n## Related Commands\n\n- `/sugar-status` - View overall system status\n- `/sugar-view` - View task details\n- `/sugar-task-type` - Manage task type configurations\n",
        ".claude-plugin/hooks/hooks.json": "{\n  \"hooks\": {\n    \"PreToolUse\": [\n      {\n        \"matcher\": \"Bash\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"echo '{\\\"decision\\\": \\\"approve\\\"}'\"\n          }\n        ]\n      }\n    ],\n    \"PostToolUse\": [\n      {\n        \"matcher\": \"Bash\",\n        \"description\": \"Suggest task creation when errors are detected\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"if echo \\\"$CLAUDE_TOOL_OUTPUT\\\" | grep -qiE 'error|exception|fail|bug|crash'; then echo 'Error detected! Consider creating a Sugar task to fix this with /sugar-task' >&2; fi; exit 0\"\n          }\n        ]\n      },\n      {\n        \"matcher\": \"Bash\",\n        \"description\": \"Suggest task update after git commits\",\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"if echo \\\"$CLAUDE_TOOL_INPUT\\\" | grep -q 'git commit'; then echo 'Code committed! If this completes a Sugar task, use: sugar update TASK_ID --status completed' >&2; fi; exit 0\"\n          }\n        ]\n      }\n    ],\n    \"Notification\": [\n      {\n        \"hooks\": [\n          {\n            \"type\": \"command\",\n            \"command\": \"echo 'Sugar notification hook'\"\n          }\n        ]\n      }\n    ]\n  }\n}\n",
        ".claude-plugin/marketplace.json": "{\n  \"$schema\": \"https://anthropic.com/claude-code/marketplace.schema.json\",\n  \"name\": \"sugar-plugins\",\n  \"version\": \"1.0.0\",\n  \"description\": \"ðŸ° Sugar - The autonomous layer for AI coding agents\",\n  \"owner\": {\n    \"name\": \"Steven Leggett\",\n    \"email\": \"contact@roboticforce.io\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"sugar\",\n      \"description\": \"Transform Claude Code into an autonomous AI development powerhouse with persistent task management, intelligent agents, and automatic work discovery\",\n      \"version\": \"2.1.1\",\n      \"author\": {\n        \"name\": \"Steven Leggett\",\n        \"email\": \"contact@roboticforce.io\"\n      },\n      \"source\": \".\",\n      \"category\": \"development\"\n    }\n  ]\n}\n",
        ".claude-plugin/mcp-server/package.json": "{\n  \"name\": \"sugar-mcp-server\",\n  \"version\": \"1.9.1\",\n  \"description\": \"MCP server for Sugar autonomous development system\",\n  \"type\": \"module\",\n  \"main\": \"sugar-mcp.js\",\n  \"bin\": {\n    \"sugar-mcp\": \"./sugar-mcp.js\"\n  },\n  \"scripts\": {\n    \"start\": \"node sugar-mcp.js\",\n    \"test\": \"node --test test/*.test.js\",\n    \"lint\": \"eslint *.js\"\n  },\n  \"keywords\": [\n    \"sugar\",\n    \"claude-code\",\n    \"mcp\",\n    \"autonomous-development\",\n    \"ai\",\n    \"task-management\"\n  ],\n  \"author\": \"Steven Leggett <contact@roboticforce.io>\",\n  \"license\": \"MIT\",\n  \"engines\": {\n    \"node\": \">=16.0.0\"\n  },\n  \"dependencies\": {},\n  \"devDependencies\": {\n    \"eslint\": \"^8.0.0\"\n  }\n}\n",
        ".claude-plugin/mcp-server/sugar-mcp.js": "#!/usr/bin/env node\n\n/**\n * Sugar MCP Server\n * Bridges Claude Code with Sugar's Python CLI for autonomous development\n *\n * @version 1.9.1\n * @author Steven Leggett <contact@roboticforce.io>\n * @license MIT\n */\n\nimport { spawn } from 'child_process';\nimport { promisify } from 'util';\nimport { access, constants } from 'fs';\nimport { join, dirname } from 'path';\nimport { fileURLToPath } from 'url';\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\n\nconst accessAsync = promisify(access);\n\n/**\n * Sugar MCP Server\n * Handles communication between Claude Code and Sugar CLI\n */\nclass SugarMCPServer {\n  constructor() {\n    this.sugarCommand = null;\n    this.projectRoot = process.env.SUGAR_PROJECT_ROOT || process.cwd();\n    this.debug = process.env.SUGAR_DEBUG === 'true';\n  }\n\n  /**\n   * Initialize the MCP server\n   */\n  async initialize() {\n    this.log('Sugar MCP Server initializing...');\n    this.log(`Project root: ${this.projectRoot}`);\n\n    // Detect Sugar installation\n    this.sugarCommand = await this.detectSugarCommand();\n\n    if (!this.sugarCommand) {\n      throw new Error(\n        'Sugar CLI not found. Please install: pip install sugarai\\\\n' +\n        'Then initialize: sugar init'\n      );\n    }\n\n    this.log(`Sugar CLI found: ${this.sugarCommand}`);\n\n    // Verify Sugar is initialized in project\n    const sugarDir = join(this.projectRoot, '.sugar');\n    try {\n      await accessAsync(sugarDir, constants.F_OK);\n      this.log('Sugar initialized in project âœ“');\n    } catch {\n      this.log('Warning: Sugar not initialized in project. Run: sugar init');\n    }\n\n    this.log('Sugar MCP Server ready âœ“');\n  }\n\n  /**\n   * Detect Sugar CLI command location\n   */\n  async detectSugarCommand() {\n    const candidates = [\n      'sugar',\n      '/usr/local/bin/sugar',\n      join(process.env.HOME || '', '.local', 'bin', 'sugar'),\n      join(this.projectRoot, 'venv', 'bin', 'sugar'),\n      join(this.projectRoot, '.venv', 'bin', 'sugar')\n    ];\n\n    for (const cmd of candidates) {\n      try {\n        const result = await this.execCommand(cmd, ['--version']);\n        if (result.success) {\n          return cmd;\n        }\n      } catch {\n        continue;\n      }\n    }\n\n    return null;\n  }\n\n  /**\n   * Execute command and return result\n   */\n  async execCommand(command, args, options = {}) {\n    return new Promise((resolve) => {\n      const proc = spawn(command, args, {\n        cwd: options.cwd || this.projectRoot,\n        env: { ...process.env, ...options.env },\n        timeout: options.timeout || 30000\n      });\n\n      let stdout = '';\n      let stderr = '';\n\n      proc.stdout?.on('data', (data) => {\n        stdout += data.toString();\n      });\n\n      proc.stderr?.on('data', (data) => {\n        stderr += data.toString();\n      });\n\n      proc.on('close', (code) => {\n        resolve({\n          success: code === 0,\n          code,\n          stdout: stdout.trim(),\n          stderr: stderr.trim()\n        });\n      });\n\n      proc.on('error', (error) => {\n        resolve({\n          success: false,\n          code: -1,\n          stdout: '',\n          stderr: error.message\n        });\n      });\n    });\n  }\n\n  /**\n   * Execute Sugar CLI command\n   */\n  async execSugar(args, options = {}) {\n    return this.execCommand(this.sugarCommand, args, options);\n  }\n\n  /**\n   * MCP Tool: Create Task\n   */\n  async createTask(params) {\n    this.log('createTask called', params);\n\n    const {\n      title,\n      type = 'feature',\n      priority = 3,\n      urgent = false,\n      description = null,\n      json_data = null\n    } = params;\n\n    if (!title) {\n      return {\n        success: false,\n        error: 'Task title is required'\n      };\n    }\n\n    const args = ['add', title];\n\n    if (type) args.push('--type', type);\n    if (priority) args.push('--priority', priority.toString());\n    if (urgent) args.push('--urgent');\n\n    if (json_data) {\n      args.push('--json', '--description', JSON.stringify(json_data));\n    } else if (description) {\n      args.push('--description', description);\n    }\n\n    const result = await this.execSugar(args);\n\n    if (result.success) {\n      // Parse task ID from output\n      const match = result.stdout.match(/Task (?:created|added).*?:\\s*(.+)/i) ||\n                    result.stdout.match(/ID:\\s*(.+)/i);\n      const taskId = match ? match[1].trim() : null;\n\n      return {\n        success: true,\n        taskId,\n        message: 'Task created successfully',\n        output: result.stdout\n      };\n    } else {\n      return {\n        success: false,\n        error: result.stderr || result.stdout,\n        message: 'Failed to create task'\n      };\n    }\n  }\n\n  /**\n   * MCP Tool: List Tasks\n   */\n  async listTasks(params = {}) {\n    this.log('listTasks called', params);\n\n    const {\n      status = null,\n      type = null,\n      priority = null,\n      limit = 20\n    } = params;\n\n    const args = ['list'];\n\n    if (status) args.push('--status', status);\n    if (type) args.push('--type', type);\n    if (priority) args.push('--priority', priority.toString());\n    if (limit) args.push('--limit', limit.toString());\n\n    const result = await this.execSugar(args);\n\n    if (result.success) {\n      return {\n        success: true,\n        tasks: this.parseTasks(result.stdout),\n        output: result.stdout\n      };\n    } else {\n      return {\n        success: false,\n        error: result.stderr || result.stdout,\n        tasks: []\n      };\n    }\n  }\n\n  /**\n   * MCP Tool: View Task\n   */\n  async viewTask(params) {\n    this.log('viewTask called', params);\n\n    const { taskId } = params;\n\n    if (!taskId) {\n      return {\n        success: false,\n        error: 'Task ID is required'\n      };\n    }\n\n    const result = await this.execSugar(['view', taskId]);\n\n    if (result.success) {\n      return {\n        success: true,\n        task: this.parseTaskDetails(result.stdout),\n        output: result.stdout\n      };\n    } else {\n      return {\n        success: false,\n        error: result.stderr || result.stdout\n      };\n    }\n  }\n\n  /**\n   * MCP Tool: Update Task\n   */\n  async updateTask(params) {\n    this.log('updateTask called', params);\n\n    const {\n      taskId,\n      title = null,\n      type = null,\n      priority = null,\n      status = null,\n      description = null\n    } = params;\n\n    if (!taskId) {\n      return {\n        success: false,\n        error: 'Task ID is required'\n      };\n    }\n\n    const args = ['update', taskId];\n\n    if (title) args.push('--title', title);\n    if (type) args.push('--type', type);\n    if (priority) args.push('--priority', priority.toString());\n    if (status) args.push('--status', status);\n    if (description) args.push('--description', description);\n\n    const result = await this.execSugar(args);\n\n    return {\n      success: result.success,\n      message: result.success ? 'Task updated successfully' : 'Failed to update task',\n      output: result.stdout,\n      error: result.stderr\n    };\n  }\n\n  /**\n   * MCP Tool: Get Status\n   */\n  async getStatus() {\n    this.log('getStatus called');\n\n    const result = await this.execSugar(['status']);\n\n    if (result.success) {\n      return {\n        success: true,\n        status: this.parseStatus(result.stdout),\n        output: result.stdout\n      };\n    } else {\n      return {\n        success: false,\n        error: result.stderr || result.stdout\n      };\n    }\n  }\n\n  /**\n   * MCP Tool: Run Once\n   */\n  async runOnce(params = {}) {\n    this.log('runOnce called', params);\n\n    const { dryRun = false, validate = false } = params;\n\n    const args = ['run', '--once'];\n    if (dryRun) args.push('--dry-run');\n    if (validate) args.push('--validate');\n\n    // Longer timeout for execution\n    const result = await this.execSugar(args, { timeout: 300000 });\n\n    return {\n      success: result.success,\n      output: result.stdout,\n      error: result.stderr\n    };\n  }\n\n  /**\n   * MCP Tool: Remove Task\n   */\n  async removeTask(params) {\n    this.log('removeTask called', params);\n\n    const { taskId } = params;\n\n    if (!taskId) {\n      return {\n        success: false,\n        error: 'Task ID is required'\n      };\n    }\n\n    const result = await this.execSugar(['remove', taskId]);\n\n    return {\n      success: result.success,\n      message: result.success ? 'Task removed successfully' : 'Failed to remove task',\n      output: result.stdout,\n      error: result.stderr\n    };\n  }\n\n  /**\n   * Parse task list output\n   */\n  parseTasks(output) {\n    const tasks = [];\n    const lines = output.split('\\n');\n\n    for (const line of lines) {\n      // Try multiple patterns\n      let match = line.match(/\\[([^\\]]+)\\]\\s+(.+?)\\s+\\((?:ID:|id:)?\\s*([^)]+)\\)/i);\n\n      if (!match) {\n        // Try alternative format\n        match = line.match(/(\\w+)\\s+\\|\\s+(.+?)\\s+\\|\\s+(\\S+)/);\n      }\n\n      if (match) {\n        tasks.push({\n          status: match[1].trim(),\n          title: match[2].trim(),\n          id: match[3].trim()\n        });\n      }\n    }\n\n    return tasks;\n  }\n\n  /**\n   * Parse task details\n   */\n  parseTaskDetails(output) {\n    // Return raw output for now\n    // Could be enhanced to parse structured data\n    return {\n      raw: output,\n      // TODO: Parse structured details if needed\n    };\n  }\n\n  /**\n   * Parse status output\n   */\n  parseStatus(output) {\n    const status = {\n      raw: output\n    };\n\n    // Try to extract key metrics\n    const totalMatch = output.match(/Total Tasks?:\\s*(\\d+)/i);\n    const pendingMatch = output.match(/Pending:\\s*(\\d+)/i);\n    const activeMatch = output.match(/Active:\\s*(\\d+)/i);\n    const completedMatch = output.match(/Completed:\\s*(\\d+)/i);\n    const failedMatch = output.match(/Failed:\\s*(\\d+)/i);\n\n    if (totalMatch) status.total = parseInt(totalMatch[1]);\n    if (pendingMatch) status.pending = parseInt(pendingMatch[1]);\n    if (activeMatch) status.active = parseInt(activeMatch[1]);\n    if (completedMatch) status.completed = parseInt(completedMatch[1]);\n    if (failedMatch) status.failed = parseInt(failedMatch[1]);\n\n    return status;\n  }\n\n  /**\n   * Logging utility\n   */\n  log(...args) {\n    if (this.debug) {\n      console.error('[Sugar MCP]', ...args);\n    }\n  }\n\n  /**\n   * Handle incoming MCP request\n   */\n  async handleRequest(request) {\n    this.log('Handling request:', request.method);\n\n    try {\n      let response;\n\n      switch (request.method) {\n        case 'createTask':\n          response = await this.createTask(request.params || {});\n          break;\n        case 'listTasks':\n          response = await this.listTasks(request.params || {});\n          break;\n        case 'viewTask':\n          response = await this.viewTask(request.params || {});\n          break;\n        case 'updateTask':\n          response = await this.updateTask(request.params || {});\n          break;\n        case 'removeTask':\n          response = await this.removeTask(request.params || {});\n          break;\n        case 'getStatus':\n          response = await this.getStatus();\n          break;\n        case 'runOnce':\n          response = await this.runOnce(request.params || {});\n          break;\n        default:\n          response = {\n            success: false,\n            error: `Unknown method: ${request.method}`\n          };\n      }\n\n      return {\n        jsonrpc: '2.0',\n        id: request.id,\n        result: response\n      };\n    } catch (error) {\n      return {\n        jsonrpc: '2.0',\n        id: request.id,\n        error: {\n          code: -32603,\n          message: error.message\n        }\n      };\n    }\n  }\n}\n\n/**\n * Main entry point\n */\nasync function main() {\n  const server = new SugarMCPServer();\n\n  try {\n    await server.initialize();\n\n    // Handle stdin/stdout communication\n    let buffer = '';\n\n    process.stdin.setEncoding('utf8');\n    process.stdin.on('data', async (chunk) => {\n      buffer += chunk;\n\n      // Process complete lines\n      let newlineIndex;\n      while ((newlineIndex = buffer.indexOf('\\n')) !== -1) {\n        const line = buffer.slice(0, newlineIndex);\n        buffer = buffer.slice(newlineIndex + 1);\n\n        if (line.trim()) {\n          try {\n            const request = JSON.parse(line);\n            const response = await server.handleRequest(request);\n            process.stdout.write(JSON.stringify(response) + '\\n');\n          } catch (error) {\n            process.stdout.write(JSON.stringify({\n              jsonrpc: '2.0',\n              error: {\n                code: -32700,\n                message: 'Parse error: ' + error.message\n              }\n            }) + '\\n');\n          }\n        }\n      }\n    });\n\n    process.stdin.on('end', () => {\n      server.log('Shutting down...');\n      process.exit(0);\n    });\n\n    // Handle signals\n    process.on('SIGINT', () => {\n      server.log('Received SIGINT, shutting down...');\n      process.exit(0);\n    });\n\n    process.on('SIGTERM', () => {\n      server.log('Received SIGTERM, shutting down...');\n      process.exit(0);\n    });\n\n  } catch (error) {\n    console.error('Failed to initialize Sugar MCP Server:', error.message);\n    process.exit(1);\n  }\n}\n\n// Run if executed directly\nif (import.meta.url === `file://${process.argv[1]}`) {\n  main();\n}\n\nexport { SugarMCPServer };\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"sugar\",\n  \"version\": \"3.4.0\",\n  \"description\": \"ðŸ° Sugar - The autonomous layer for AI coding agents\",\n  \"author\": {\n    \"name\": \"Steven Leggett\",\n    \"email\": \"contact@roboticforce.io\"\n  },\n  \"homepage\": \"https://github.com/roboticforce/sugar\",\n  \"repository\": \"https://github.com/roboticforce/sugar\",\n  \"license\": \"MIT\",\n  \"keywords\": [\n    \"autonomous\",\n    \"development\",\n    \"ai\",\n    \"task-management\",\n    \"automation\",\n    \"agents\",\n    \"enterprise\"\n  ],\n  \"requires\": {\n    \"claude-code\": \">=1.0.0\",\n    \"python\": \">=3.11\"\n  },\n  \"capabilities\": {\n    \"commands\": true,\n    \"agents\": true,\n    \"hooks\": true,\n    \"mcp\": true\n  },\n  \"installation\": {\n    \"prerequisites\": [\n      \"Python 3.11 or higher must be installed\",\n      \"Sugar CLI must be installed: pip install sugarai\",\n      \"Initialize Sugar in your project: sugar init\"\n    ],\n    \"verification\": [\n      \"sugar --version\",\n      \"sugar status\"\n    ]\n  },\n  \"configuration\": {\n    \"auto_detect_sugar\": true,\n    \"sugar_command\": \"sugar\",\n    \"enable_autonomous_mode\": false,\n    \"auto_task_creation\": true\n  }\n}\n",
        "README.md": "# ðŸ° Sugar\n\nThe autonomous layer for AI coding agents.\n\n<!-- mcp-name: io.github.cdnsteve/sugar -->\n\nSugar manages your task queue, runs 24/7, and ships working code while you focus on what matters.\n\n## What It Does\n\nSugar adds **autonomy and persistence** to your AI coding workflow. Instead of one-off interactions:\n\n- **Continuous execution** - Runs 24/7, working through your task queue\n- **Agent-agnostic** - Works with Claude Code, OpenCode, Aider, or any AI CLI\n- **Persistent memory** - Remember decisions, preferences, and patterns across sessions\n- **Delegate and forget** - Hand off tasks from any session\n- **Builds features** - Takes specs, implements, tests, commits working code\n- **Fixes bugs** - Reads error logs, investigates, implements fixes\n- **GitHub integration** - Creates PRs, updates issues, tracks progress\n\nYou plan the work. Sugar executes it.\n\n**Works with:** [Claude Code](https://docs.anthropic.com/en/docs/claude-code) | [OpenCode](https://github.com/opencode-ai/opencode) | [Aider](https://aider.chat) | [Goose](https://block.github.io/goose) | Any CLI-based AI agent\n\n## Native AI Agent Integrations\n\nSugar has **first-class integrations** with leading AI coding agents:\n\n| Agent | Integration | Features |\n|-------|-------------|----------|\n| **Claude Code** | MCP Server | Memory access, task delegation, context injection |\n| **OpenCode** | Plugin + HTTP API | Bidirectional communication, notifications, memory injection |\n| **Goose** | MCP Server | Task management, memory access |\n\n**Claude Code** - Full memory system access via MCP:\n```bash\nclaude mcp add sugar -- sugar mcp memory\n```\n\n**OpenCode** - One-command setup with MCP integration:\n```bash\nsugar opencode setup  # Automatically configures OpenCode\n# Then restart OpenCode\n```\n\nBoth integrations support **automatic memory injection** - Sugar injects relevant context (decisions, preferences, error patterns) into your AI sessions automatically.\n\n## Install\n\n**Recommended: pipx** (install once, use everywhere)\n```bash\npipx install sugarai\n```\n\nThis gives you a global `sugar` command that works in any project. Each project gets its own isolated config and database in a `.sugar/` folder.\n\n**Upgrade / Uninstall:**\n```bash\npipx upgrade sugarai    # Upgrade to latest version\npipx uninstall sugarai  # Remove completely\n```\n\n<details>\n<summary>Other installation methods</summary>\n\n**pip** (requires venv activation each session)\n```bash\npip install sugarai\n```\n\n**uv** (fast alternative to pip)\n```bash\nuv pip install sugarai\n```\n\n**With GitHub integration:**\n```bash\npipx install 'sugarai[github]'\n```\n\n**With memory system (semantic search):**\n```bash\npipx install 'sugarai[memory]'\n```\n\n**All features:**\n```bash\npipx install 'sugarai[all]'\n```\n\n</details>\n\n## Quick Start\n\nSugar is **project-local** - each project has its own isolated task queue and config.\n\n```bash\n# Navigate to your project\ncd ~/dev/my-app\n\n# Initialize Sugar (creates .sugar/ folder)\nsugar init\n\n# This creates:\n# - .sugar/sugar.db     (task queue database)\n# - .sugar/config.yaml  (project settings)\n# - .sugar/prompts/     (custom prompts)\n\n# Add tasks to the queue\nsugar add \"Fix authentication timeout\" --type bug_fix --urgent\nsugar add \"Add user profile settings\" --type feature\n\n# Start the autonomous loop\nsugar run\n```\n\nSugar will:\n1. Pick up tasks from the queue\n2. Execute them using your configured AI agent\n3. Run tests and verify changes\n4. Commit working code\n5. Move to the next task\n\nIt keeps going until the queue is empty (or you stop it).\n\n## Memory System\n\nSugar remembers what matters across sessions. No more re-explaining decisions or rediscovering patterns.\n\n**Saves tokens:** Memories are stored as compressed summaries (~90% smaller) and retrieved only when relevant. Real projects see **~89% token reduction per session** - that's ~$32 saved over 500 sessions.\n\n```bash\n# Store knowledge\nsugar remember \"Always use async/await, never callbacks\" --type preference\nsugar remember \"JWT tokens use RS256, expire in 15 min\" --type decision\n\n# Search memories\nsugar recall \"authentication\"\n\n# Claude Code integration - give Claude access to your project memory\nclaude mcp add sugar -- sugar mcp memory\n\n# See your token savings\npython examples/token_savings_demo.py\n```\n\n**Memory types:** `decision`, `preference`, `file_context`, `error_pattern`, `research`, `outcome`\n\n**Full docs:** [Memory System Guide](docs/user/memory.md)\n\n**Delegate from Claude Code:**\n```\n/sugar-task \"Fix login timeout\" --type bug_fix --urgent\n```\nSugar picks it up and works on it while you keep coding.\n\n## How It Works: Project-Local Architecture\n\n```\nGlobal Installation (pipx)\nâ””â”€â”€ sugar CLI (~/.local/bin/sugar)\n\nProject A                          Project B\n~/dev/frontend-app/                ~/dev/backend-api/\nâ”œâ”€â”€ .sugar/                        â”œâ”€â”€ .sugar/\nâ”‚   â”œâ”€â”€ sugar.db                   â”‚   â”œâ”€â”€ sugar.db\nâ”‚   â”œâ”€â”€ config.yaml                â”‚   â”œâ”€â”€ config.yaml\nâ”‚   â””â”€â”€ prompts/                   â”‚   â””â”€â”€ prompts/\nâ”œâ”€â”€ src/                           â”œâ”€â”€ main.py\nâ””â”€â”€ tests/                         â””â”€â”€ requirements.txt\n\nRunning `sugar` uses the .sugar/ folder in your current directory\n```\n\n**One global CLI, many isolated projects.** Like `git` - one installation, per-project repositories.\n\n## FAQ\n\n### Do I need to install Sugar in every project?\n\n**No!** Install Sugar once with `pipx install sugarai` and use it everywhere.\n\nThe `sugar` command is globally available, but it reads configuration from the `.sugar/` folder in your **current directory**:\n\n- **Global CLI access**: Run `sugar` from anywhere without venv activation\n- **Project-local state**: Each project's tasks and config stay isolated\n- **No conflicts**: Work on multiple projects simultaneously\n\n### Can I run Sugar on multiple projects at the same time?\n\nYes! Each project has its own isolated database.\n\n```bash\n# Terminal 1\ncd ~/dev/frontend-app\nsugar run\n\n# Terminal 2 (simultaneously)\ncd ~/dev/backend-api\nsugar run\n```\n\nThe two Sugar instances won't interfere with each other.\n\n### What happens if I run `sugar` outside a project folder?\n\nSugar will show a friendly error:\n\n```\nâŒ Not a Sugar project\n\n   Could not find: .sugar/config.yaml\n\n   Run 'sugar init' to initialize Sugar in this directory.\n```\n\n### Why pipx over pip?\n\n| Installation | Global access? | Requires venv? |\n|--------------|----------------|----------------|\n| `pip install sugarai` | Only in active venv | Yes |\n| `pipx install sugarai` | Yes, always | No |\n\nWith pipx, Sugar's dependencies don't conflict with your project's dependencies.\n\n### Should I commit .sugar/ to git?\n\n**Recommended .gitignore:**\n```gitignore\n.sugar/sugar.db       # Task queue is personal\n.sugar/sugar.log      # Logs contain local paths\n.sugar/*.db-*         # SQLite temp files\n```\n\n**DO commit:** `.sugar/config.yaml` and `.sugar/prompts/` to share settings with your team.\n\n## Features\n\n**Native AI Agent Integrations** *(New in 3.5)*\n- **Claude Code** - MCP server for memory access and task delegation\n- **OpenCode** - Full bidirectional integration with notifications and context injection\n- Automatic memory injection into AI sessions\n- Real-time task lifecycle notifications\n\n**Memory System** *(New in 3.5)*\n- Persistent semantic memory across sessions\n- Remember decisions, preferences, error patterns\n- Claude Code & OpenCode integration via MCP server\n- Semantic search with `sugar recall`\n\n**Task Management**\n- Rich task context with priorities and metadata\n- Custom task types for your workflow\n- Queue management and filtering\n\n**Task Orchestration**\n- Auto-decomposes complex features into subtasks\n- 4-stage workflow: Research â†’ Planning â†’ Implementation â†’ Review\n- Specialist agent routing (frontend, backend, QA, security, DevOps)\n- Parallel execution with dependency management\n\n**Autonomous Execution**\n- Specialized task agents (UX, backend, QA, security, DevOps)\n- Automatic retries on failures\n- Quality checks and testing\n\n**GitHub Integration**\n- Reads issues, creates PRs\n- Updates issue status automatically\n- Commits with proper messages\n\n**Ralph Wiggum Integration**\n- Iterative execution for complex tasks\n- Self-correcting loops until tests pass\n- Prevents single-shot failures\n\n**Full docs:** [Memory System](docs/user/memory.md) | [Goose Integration](docs/user/goose.md) | [OpenCode Integration](docs/user/opencode.md) | [Ralph Wiggum](docs/ralph-wiggum.md)\n\n## Configuration\n\n`.sugar/config.yaml` is auto-generated on `sugar init`. Key settings:\n\n```yaml\nsugar:\n  dry_run: false              # Set to true for testing\n  loop_interval: 300          # 5 minutes between cycles\n  max_concurrent_work: 3      # Parallel task execution\n\nclaude:\n  enable_agents: true         # Use specialized Claude agents\n\ndiscovery:\n  github:\n    enabled: true\n    repo: \"user/repository\"\n  error_logs:\n    enabled: true\n    paths: [\"logs/errors/\"]\n```\n\n## Integrations\n\n### Claude Code Plugin\n\nSugar has native Claude Code integration. Delegate work directly from your Claude sessions.\n\n```\n/plugin install roboticforce/sugar\n```\n\n**Inside a Claude Code session:**\n```\nYou: \"I'm working on auth but need to fix these test failures.\n     Can you handle the tests while I finish?\"\n\nClaude: \"I'll create a Sugar task for the test fixes.\"\n\n/sugar-task \"Fix authentication test failures\" --type test --urgent\n```\n\n**Available Slash Commands:**\n- `/sugar-task` - Create tasks with rich context\n- `/sugar-status` - Check queue and progress\n- `/sugar-run` - Start autonomous mode\n\n### OpenCode Integration\n\nSugar has native MCP integration with [OpenCode](https://github.com/opencode-ai/opencode):\n\n**Features:**\n- MCP servers for task management and memory access\n- Automatic memory injection into OpenCode sessions\n- Context-aware memory retrieval based on current work\n\n**Quick Setup:**\n```bash\n# One-command setup - adds Sugar MCP servers to OpenCode config\nsugar opencode setup\n\n# Restart OpenCode to load the new servers\n# Then verify:\nsugar opencode status\n```\n\nThe setup command automatically:\n- Finds your OpenCode config file\n- Adds `sugar-tasks` and `sugar-memory` MCP servers\n- Preserves your existing configuration\n\n**Options:**\n```bash\nsugar opencode setup --dry-run  # Preview changes without applying\nsugar opencode setup --yes      # Non-interactive mode\nsugar opencode setup --no-memory  # Only add task server\n```\n\n### MCP Server Integration\n\nSugar provides MCP servers for Goose, Claude Code, Claude Desktop, and other MCP clients.\n\n**Using with Claude Code (Memory):**\n```bash\n# Add Sugar memory to Claude Code\nclaude mcp add sugar -- sugar mcp memory\n```\n\nOr add to `~/.claude.json`:\n```json\n{\n  \"mcpServers\": {\n    \"sugar\": {\n      \"type\": \"stdio\",\n      \"command\": \"sugar\",\n      \"args\": [\"mcp\", \"memory\"]\n    }\n  }\n}\n```\n\nThis gives Claude Code access to your project's memory - decisions, preferences, error patterns, and more.\n\n**Using with Goose:**\n```bash\ngoose configure\n# Select \"Add Extension\" â†’ \"Command-line Extension\"\n# Name: sugar\n# Command: npx -y sugarai-mcp\n```\n\n**Using with Claude Desktop:**\n```json\n{\n  \"mcpServers\": {\n    \"sugar\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"sugarai-mcp\"],\n      \"env\": {\n        \"SUGAR_PROJECT_ROOT\": \"/path/to/your/project\"\n      }\n    }\n  }\n}\n```\n\n### Memory System\n\nSugar's memory system provides persistent context across sessions:\n\n```bash\n# Store memories\nsugar remember \"Always use async/await, never callbacks\" --type preference\nsugar remember \"Auth tokens expire after 15 minutes\" --type research --ttl 90d\n\n# Search memories\nsugar recall \"how do we handle authentication\"\nsugar recall \"error patterns\" --type error_pattern\n\n# List and manage\nsugar memories --type decision --since 7d\nsugar forget abc123 --force\nsugar memory-stats\n\n# Export for Claude Code SessionStart hook\nsugar export-context\n```\n\n**Memory types:** `decision`, `preference`, `file_context`, `error_pattern`, `research`, `outcome`\n\n**Full docs:** [Memory System Guide](docs/user/memory.md)\n\n## Advanced Usage\n\n**Task Orchestration**\n```bash\nsugar add \"Add OAuth authentication\" --type feature --orchestrate\n\n# Sugar will:\n# 1. RESEARCH - Search best practices, analyze codebase\n# 2. PLAN - Create implementation plan with subtasks\n# 3. IMPLEMENT - Route subtasks to specialists in parallel\n# 4. REVIEW - Code review and test verification\n\nsugar orchestrate <task_id> --stages\n```\n\n**Ralph Wiggum (iterative execution)**\n```bash\nsugar add \"Implement rate limiting\" --ralph --max-iterations 10\n# Iterates until tests pass, not just until code is written\n```\n\n**Custom Task Types**\n```bash\nsugar task-type add deployment --name \"Deployment\" --emoji \"ðŸš€\"\nsugar add \"Deploy to staging\" --type deployment\n```\n\n**Complex Tasks with Context**\n```bash\nsugar add \"User Dashboard\" --json --description '{\n  \"priority\": 5,\n  \"context\": \"Complete dashboard redesign\",\n  \"agent_assignments\": {\n    \"frontend_developer\": \"Implementation\",\n    \"qa_test_engineer\": \"Testing\"\n  }\n}'\n```\n\n## Troubleshooting\n\n**Sugar not finding Claude CLI?**\n```yaml\n# .sugar/config.yaml\nclaude:\n  command: \"/full/path/to/claude\"\n```\n\n**Tasks not executing?**\n```bash\ncat .sugar/config.yaml | grep dry_run  # Check dry_run is false\ntail -f .sugar/sugar.log                # Monitor logs\nsugar run --once                        # Test single cycle\n```\n\n**More help:**\n- [Troubleshooting Guide](docs/user/troubleshooting.md)\n- [GitHub Issues](https://github.com/roboticforce/sugar/issues)\n\n## Documentation\n\n- [Quick Start](docs/user/quick-start.md)\n- [CLI Reference](docs/user/cli-reference.md)\n- [Memory System](docs/user/memory.md) *(New)*\n- [Task Orchestration](docs/task_orchestration.md)\n- [Ralph Wiggum](docs/ralph-wiggum.md)\n- [GitHub Integration](docs/user/github-integration.md)\n- [Configuration Guide](docs/user/configuration-best-practices.md)\n\n## Requirements\n\n- Python 3.11+\n- An AI coding agent CLI:\n  - [Claude Code](https://docs.anthropic.com/en/docs/claude-code) (default)\n  - [OpenCode](https://github.com/opencode-ai/opencode)\n  - [Aider](https://aider.chat)\n  - Or any CLI-based AI coding tool\n\n## Contributing\n\nContributions welcome! See [CONTRIBUTING.md](docs/dev/contributing.md).\n\n```bash\ngit clone https://github.com/roboticforce/sugar.git\ncd sugar\nuv pip install -e \".[dev,test,github]\"\npytest tests/ -v\n```\n\n## License\n\n**Dual License: AGPL-3.0 + Commercial**\n\n- **Open Source (AGPL-3.0)**: Free for open source and personal use\n- **Commercial License**: For proprietary use - [sugar.roboticforce.io/licensing](https://sugar.roboticforce.io/licensing)\n\n---\n\n**Sugar v3.5** - The autonomous layer for AI coding agents\n\n*Now with native Claude Code and OpenCode integrations for seamless AI agent collaboration.*\n\n> âš ï¸ Sugar is provided \"AS IS\" without warranty. Review all AI-generated code before use.\n",
        "action/README.md": "# Sugar Issue Responder - GitHub Action\n\nAI-powered GitHub issue assistant that automatically analyzes issues and posts helpful responses.\n\nBuilt on the [Claude Agent SDK](https://github.com/anthropics/claude-agent-sdk) and part of the [Sugar project](https://github.com/roboticforce/sugar).\n\n## Features\n\n- **Intelligent Analysis** - Uses Claude to understand issue context, type, and sentiment\n- **Codebase Search** - Searches your repository for relevant files and code\n- **Similar Issues** - Finds related past issues for context\n- **Code References** - Includes specific file/line references in responses\n- **Confidence Scoring** - Only auto-posts responses with high confidence\n- **Customizable** - Configure thresholds, models, and behavior\n\n## Quick Start\n\n### 1. Add API Key Secret\n\nAdd your Anthropic API key to your repository secrets:\n- Go to Settings â†’ Secrets and variables â†’ Actions\n- Add `ANTHROPIC_API_KEY` with your API key\n\n### 2. Create Workflow\n\nCreate `.github/workflows/issue-responder.yml`:\n\n```yaml\nname: Issue Responder\n\non:\n  issues:\n    types: [opened, reopened]\n  issue_comment:\n    types: [created]\n\npermissions:\n  issues: write\n  contents: read\n\njobs:\n  respond:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v4\n\n      - name: Respond to Issue\n        uses: roboticforce/sugar@main\n        with:\n          anthropic-api-key: ${{ secrets.ANTHROPIC_API_KEY }}\n          mode: auto\n          confidence-threshold: '0.7'\n```\n\n### 3. Test It\n\nOpen a new issue and watch Sugar analyze and respond!\n\n## Configuration\n\n### Inputs\n\n| Input | Description | Required | Default |\n|-------|-------------|----------|---------|\n| `anthropic-api-key` | Anthropic API key for Claude | Yes | - |\n| `github-token` | GitHub token for API access | No | `${{ github.token }}` |\n| `mode` | Response mode: `auto`, `mention`, or `triage` | No | `auto` |\n| `model` | Claude model to use | No | `claude-sonnet-4-20250514` |\n| `confidence-threshold` | Minimum confidence to auto-post (0.0-1.0) | No | `0.7` |\n| `max-response-length` | Maximum response length in characters | No | `2000` |\n| `skip-labels` | Comma-separated labels to skip | No | `''` |\n| `dry-run` | Generate but don't post responses | No | `false` |\n\n### Outputs\n\n| Output | Description |\n|--------|-------------|\n| `responded` | Whether a response was posted (`true`/`false`) |\n| `confidence` | Confidence score of the response (0.0-1.0) |\n| `response` | The generated response text |\n| `issue-number` | The issue number that was processed |\n\n## Usage Modes\n\n### Auto Mode (Default)\n\nResponds to all new issues automatically:\n\n```yaml\nwith:\n  mode: auto\n  confidence-threshold: '0.7'\n```\n\n### Mention Mode\n\nOnly responds when `@sugar` is mentioned:\n\n```yaml\nwith:\n  mode: mention\n```\n\nExample issue:\n```\nHey @sugar, can you help me understand this error?\n```\n\n### Triage Mode\n\nAnalyzes issues and adds labels without posting comments:\n\n```yaml\nwith:\n  mode: triage\n```\n\n## Advanced Examples\n\n### High Confidence Only\n\nOnly post responses you're very confident about:\n\n```yaml\n- uses: roboticforce/sugar@main\n  with:\n    anthropic-api-key: ${{ secrets.ANTHROPIC_API_KEY }}\n    confidence-threshold: '0.9'\n```\n\n### Skip Certain Labels\n\nDon't respond to issues with specific labels:\n\n```yaml\n- uses: roboticforce/sugar@main\n  with:\n    anthropic-api-key: ${{ secrets.ANTHROPIC_API_KEY }}\n    skip-labels: 'wontfix,duplicate,needs-human-review'\n```\n\n### Use Claude Opus\n\nFor maximum quality:\n\n```yaml\n- uses: roboticforce/sugar@main\n  with:\n    anthropic-api-key: ${{ secrets.ANTHROPIC_API_KEY }}\n    model: 'claude-opus-4-5-20251101'\n    confidence-threshold: '0.8'\n```\n\n### Dry Run Testing\n\nTest without posting:\n\n```yaml\n- uses: roboticforce/sugar@main\n  with:\n    anthropic-api-key: ${{ secrets.ANTHROPIC_API_KEY }}\n    dry-run: 'true'\n```\n\nThen check the action logs to see what would have been posted.\n\n### With Conditional Logic\n\n```yaml\n- name: Respond to Issue\n  id: responder\n  uses: roboticforce/sugar@main\n  with:\n    anthropic-api-key: ${{ secrets.ANTHROPIC_API_KEY }}\n\n- name: Notify Team\n  if: steps.responder.outputs.responded == 'true'\n  run: |\n    echo \"Sugar responded to issue #${{ steps.responder.outputs.issue-number }}\"\n    echo \"Confidence: ${{ steps.responder.outputs.confidence }}\"\n```\n\n## How It Works\n\n```mermaid\nflowchart LR\n    A[New Issue] --> B[Analyze Issue]\n    B --> C[Search Codebase]\n    C --> D[Find Similar Issues]\n    D --> E[Generate Response]\n    E --> F{Confidence >= Threshold?}\n    F -->|Yes| G[Post Response]\n    F -->|No| H[Skip/Log]\n    G --> I[Add Labels]\n```\n\n1. **Issue Analysis** - Classifies type (bug/feature/question), extracts key topics\n2. **Codebase Search** - Finds relevant files, functions, and patterns\n3. **Similar Issues** - Searches for related past issues\n4. **Response Generation** - Claude creates a helpful response with code references\n5. **Confidence Check** - Only posts if confidence meets threshold\n6. **Post & Label** - Adds response and suggested labels\n\n## Response Quality\n\nSugar aims for high-quality responses:\n\n- **Welcoming tone** - Friendly and helpful\n- **Code references** - Links to specific files and lines\n- **Concrete guidance** - Actionable next steps\n- **Context-aware** - Understands your codebase\n\nConfidence scores:\n- **0.9-1.0** - Very confident, verified in code\n- **0.7-0.9** - Confident based on patterns\n- **0.5-0.7** - Moderate uncertainty\n- **0.0-0.5** - Low confidence, skipped\n\n## Security & Privacy\n\n- **Bring Your Own Key (BYOK)** - Use your own Anthropic API key\n- **Repository access** - Only reads public files (or private if repo is private)\n- **No data storage** - Sugar doesn't store your code or issues\n- **Configurable** - Full control over what gets posted\n\n## Pricing\n\nSugar is free and open source. You only pay for:\n- Anthropic API usage (Claude API costs)\n- GitHub Actions minutes (free tier available)\n\nTypical costs per issue response: ~$0.01-0.05 depending on model and issue complexity.\n\n## Limitations\n\n- Only works on public repositories or private repos with appropriate permissions\n- Requires Anthropic API key (not free)\n- Docker-based action (startup time ~30-60 seconds)\n- Best results with well-structured codebases\n\n## Troubleshooting\n\n### Action fails with \"No such file or directory\"\n\nMake sure you checkout the repository first:\n```yaml\n- uses: actions/checkout@v4\n```\n\n### No responses posted\n\nCheck:\n1. `ANTHROPIC_API_KEY` is set correctly\n2. Confidence threshold isn't too high\n3. Issue doesn't have skip labels\n4. Check action logs for errors\n\n### Responses are poor quality\n\nTry:\n- Use a more powerful model (Opus instead of Sonnet)\n- Lower confidence threshold (but may post less often)\n- Add more documentation to your repository\n- Check that issue descriptions are clear\n\n## Support\n\n- [Documentation](https://github.com/roboticforce/sugar)\n- [Report Issues](https://github.com/roboticforce/sugar/issues)\n- [Contributing Guide](https://github.com/roboticforce/sugar/blob/main/docs/dev/contributing.md)\n\n## License\n\nMIT - See [LICENSE](../LICENSE)\n\n---\n\nBuilt with the [Claude Agent SDK](https://github.com/anthropics/claude-agent-sdk)\n",
        "docs/README.md": "# Sugar Documentation\n\nWelcome to the Sugar documentation! Sugar is an AI-powered autonomous development system that works with Claude Code CLI to provide 24/7 autonomous development capabilities.\n\n## ðŸ“š Documentation Structure\n\n### ðŸ‘¥ User Documentation (`docs/user/`)\nDocumentation for developers who want to **use** Sugar in their projects:\n\n- **[Installation Guide](user/installation-guide.md)** - Complete installation and setup instructions\n- **[Quick Start Guide](user/quick-start.md)** - Get up and running in 5 minutes\n- **[Execution Context](user/execution-context.md)** - Where and how to run Sugar correctly\n- **[CLI Reference](user/cli-reference.md)** - All Sugar commands and options\n- **[Memory System](user/memory.md)** - Persistent semantic memory for coding sessions *(New)*\n- **[GitHub Integration](user/github-integration.md)** - Connect Sugar to GitHub issues and PRs\n- **[Examples](user/examples.md)** - Real-world usage examples\n- **[Configuration Best Practices](user/configuration-best-practices.md)** - Essential config patterns and exclusions\n- **[Agent SDK Guide](user/agent-sdk.md)** - Native Claude Agent SDK integration (v3.0)\n- **[Task Hooks Guide](task-hooks.md)** - Pre/post execution hooks for automation\n- **[Thinking Capture Guide](thinking-capture.md)** - View Claude's reasoning during execution\n- **[Model Routing Guide](dev/model-routing-guide.md)** - Intelligent model selection by task\n- **[Billing & Pricing](user/billing.md)** - Pricing tiers and API key management\n- **[Configuration Reference](user/configuration.md)** - Complete configuration options\n- **[Troubleshooting](user/troubleshooting.md)** - Common issues and solutions\n- **[FAQ](user/faq.md)** - Frequently asked questions\n\n### ðŸ› ï¸ Developer Documentation (`docs/dev/`)\nDocumentation for developers who want to **contribute** to Sugar:\n\n- **[Local Development Setup](dev/local-development.md)** - Install and test Sugar locally (before PyPI)\n- **[Technical Implementation Plan](dev/technical-implementation-plan.md)** - Architecture and design decisions\n- **[Contributing Guide](dev/contributing.md)** - How to contribute to Sugar\n- **[Development Setup](dev/development-setup.md)** - Development environment setup\n- **[Testing Guide](dev/testing.md)** - Running and writing tests\n- **[Release Process](dev/release-process.md)** - How releases are created\n- **[API Reference](dev/api-reference.md)** - Internal API documentation\n\n## ðŸš€ Quick Links\n\n- **New to Sugar?** â†’ Start with the [Quick Start Guide](user/quick-start.md)\n- **Installing Sugar?** â†’ Follow the [Installation Guide](user/installation-guide.md)  \n- **Need help?** â†’ Check [Troubleshooting](user/troubleshooting.md) or [FAQ](user/faq.md)\n- **Want to contribute?** â†’ Read the [Contributing Guide](dev/contributing.md)\n\n## ðŸ“– External Resources\n\n- **[GitHub Repository](https://github.com/roboticforce/sugar)** - Source code and issue tracking\n- **[Claude Code CLI Documentation](https://docs.anthropic.com/claude-code)** - Required dependency\n- **[PyPI Package](https://pypi.org/project/sugar/)** - Package distribution (coming soon)\n\n## ðŸ’¬ Getting Help\n\n- **Issues**: Report bugs or request features on [GitHub Issues](https://github.com/roboticforce/sugar/issues)\n- **Discussions**: Ask questions on [GitHub Discussions](https://github.com/roboticforce/sugar/discussions)\n- **Contact**: Reach out to [contact@roboticforce.io](mailto:contact@roboticforce.io)\n\n---\n\n**Sugar** - Autonomous development powered by Claude Agent SDK\nCreated by [Steven Leggett](https://github.com/cdnsteve) | [RoboticForce](https://roboticforce.io)",
        "examples/claude-code-plugin/README.md": "# Sugar Claude Code Plugin - Example Usage\n\nThis example demonstrates how to use Sugar as a Claude Code plugin for autonomous development.\n\n## Setup\n\n### 1. Install Sugar CLI\n\n```bash\npip install sugarai\n```\n\n### 2. Install the Plugin\n\nIn Claude Code:\n\n```\n/plugin install sugar@roboticforce\n```\n\nOr manually:\n```bash\n# Clone Sugar repository\ngit clone https://github.com/roboticforce/sugar.git\n\n# Link plugin (from your project directory)\nln -s /path/to/sugar/.claude-plugin ./.claude-plugins/sugar\n```\n\n### 3. Initialize Sugar in Your Project\n\n```bash\ncd your-project\nsugar init\n```\n\n## Example Workflows\n\n### Workflow 1: Simple Task Creation\n\n```\nUser: I need to add user authentication to my app\n\nClaude: I'll help you create a comprehensive Sugar task for this feature.\n\n/sugar-task \"Implement user authentication\" --type feature --priority 4\n\nTask created! This includes:\n- Email/password authentication\n- Session management\n- Security best practices\n\nYou can view the task queue with /sugar-status\n```\n\n### Workflow 2: Rich Task with Context\n\n```\nUser: Create a task for redesigning the dashboard with full context\n\nClaude: Let me create a comprehensive task with rich metadata.\n\n/sugar-task \"User Dashboard Redesign\" --json --description '{\n  \"priority\": 5,\n  \"type\": \"feature\",\n  \"context\": \"Complete overhaul of user dashboard for better UX and engagement\",\n  \"business_context\": \"Current dashboard has low engagement (30% DAU). Redesign aims for 60%+ engagement and 50% reduction in support tickets\",\n  \"technical_requirements\": [\n    \"Responsive design (mobile-first)\",\n    \"Accessibility WCAG 2.1 AA compliance\",\n    \"Performance budget: <2s load time\",\n    \"Real-time data updates\"\n  ],\n  \"agent_assignments\": {\n    \"ux_design_specialist\": \"Lead UI/UX design and mockups\",\n    \"frontend_developer\": \"Implementation and optimization\",\n    \"backend_developer\": \"API endpoints for real-time data\",\n    \"qa_test_engineer\": \"Comprehensive testing across devices\"\n  },\n  \"success_criteria\": [\n    \"Mobile responsive on iOS/Android\",\n    \"Lighthouse accessibility score >90\",\n    \"Load time <2s on 3G\",\n    \"User satisfaction >4.5/5\",\n    \"Zero critical bugs\"\n  ]\n}'\n\nTask created with full context! Sugar's agents will coordinate:\n- UX Designer creates mockups\n- Frontend implements responsive UI\n- Backend builds real-time APIs\n- QA validates across platforms\n```\n\n### Workflow 3: Automatic Task Discovery\n\n```\nUser: Analyze my codebase for potential work\n\nClaude: I'll scan for errors, code quality issues, and missing tests.\n\n/sugar-analyze\n\nFound 28 potential tasks:\nðŸš¨ 3 critical errors in logs\nðŸ”§ 12 code quality improvements\nðŸ§ª 15 files without tests\nðŸ“ 5 open GitHub issues\n\nCreate all as tasks? [y/N]: y\n\nCreated 28 tasks with appropriate priorities. Use /sugar-review to manage the queue.\n```\n\n### Workflow 4: Queue Review and Prioritization\n\n```\nUser: Show me pending tasks\n\nClaude: Let me show your current queue.\n\n/sugar-review\n\nðŸ“‹ Sugar Task Queue (18 tasks)\n\nðŸ”´ Priority 5 (Urgent) - 2 tasks\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n1. Critical: Auth vulnerability (CVE-2024-XXXX)\n   Status: pending | Type: bug_fix\n   Created: 2h ago\n\n2. Database connection pool exhausted\n   Status: pending | Type: hotfix\n   Created: 1h ago\n\nðŸŸ¡ Priority 4 (High) - 8 tasks\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n[... more tasks ...]\n\nActions:\n- [E]xecute high priority now\n- [A]djust priorities\n- [R]emove stale tasks\n- [V]iew details\n```\n\n### Workflow 5: Autonomous Execution\n\n```\nUser: Start autonomous development mode\n\nClaude: I'll start Sugar's autonomous execution safely.\n\nFirst, let's validate configuration:\n/sugar-run --validate\n\nâœ… Configuration valid\nâœ… Claude CLI found\nâœ… Database accessible\nâœ… 18 tasks ready\n\nReady to start. Test with dry run first?\n\nUser: Yes, dry run first\n\nClaude: Running test cycle...\n\n/sugar-run --dry-run --once\n\nDry Run Results:\n- Would execute: Fix auth vulnerability (priority 5)\n- Approach: Update authentication library, add tests\n- Estimated time: 2-3 hours\n- Safety: No breaking changes\n\nEverything looks good! Start real execution?\n\nUser: Yes, start it\n\nClaude: Starting autonomous mode...\n\n/sugar-run\n\nðŸ¤– Autonomous mode started\nðŸ“Š Processing queue: 18 tasks\nâš¡ Current: Fixing authentication vulnerability\nðŸ• Estimated completion: 2.5 hours\n\nMonitor progress: /sugar-status\nView logs: tail -f .sugar/sugar.log\n```\n\n### Workflow 6: Status Monitoring\n\n```\nUser: What's the status?\n\nClaude: Let me check Sugar's current state.\n\n/sugar-status\n\nðŸ“Š Sugar System Status\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\nâš™ï¸  System: Active\nðŸ“‹ Total Tasks: 18\n   â³ Pending: 15\n   âš¡ Active: 1\n   âœ… Completed: 2\n   âŒ Failed: 0\n\nðŸ¤– Autonomous Mode: Running\nâ° Last Cycle: 3 minutes ago\nðŸ“ˆ Completion Rate: 100% (2/2)\n\nâš¡ Currently Executing:\n\"Fix authentication vulnerability\" (task-157)\nAgent: tech-lead\nStarted: 45 minutes ago\nProgress: 60% (code complete, testing in progress)\n\nâœ… Recently Completed:\n1. \"Add API documentation\" (task-155) - 2h ago\n2. \"Fix database connection leak\" (task-156) - 1h ago\n```\n\n## Advanced Features\n\n### Custom Task Types\n\n```\nUser: Create a custom task type for security audits\n\nClaude: I'll create a specialized task type.\n\nsugar task-type add security_audit \\\n  --name \"Security Audit\" \\\n  --description \"Security vulnerability scanning and remediation\" \\\n  --agent \"tech-lead\" \\\n  --commit-template \"security: {title}\" \\\n  --emoji \"ðŸ”’\"\n\nNow you can use:\nsugar add \"Audit authentication system\" --type security_audit --priority 5\n```\n\n### GitHub Integration\n\nEnable automatic issue sync:\n\n```yaml\n# .sugar/config.yaml\ndiscovery:\n  github:\n    enabled: true\n    repo: \"your-org/your-repo\"\n    workflow:\n      auto_close_issues: true\n      git_workflow: \"pull_request\"\n```\n\nThen: `/sugar-analyze --github` to sync issues as tasks.\n\n### Team Collaboration\n\nMultiple developers can run Sugar on the same project:\n\n```bash\n# Developer A\ncd project\nsugar init\nsugar run &\n\n# Developer B (same project, different machine)\ncd project\nsugar init  # Uses same .sugar/ via git\nsugar list  # Sees shared task queue\n```\n\n## Best Practices\n\n### 1. Start with Validation\n\nAlways validate before running:\n```\n/sugar-run --validate\n/sugar-run --dry-run --once\n/sugar-run --once\n/sugar-run\n```\n\n### 2. Use Rich Context for Complex Tasks\n\nFor substantial features, provide comprehensive context:\n- Business value and impact\n- Technical requirements and constraints\n- Success criteria (measurable)\n- Agent assignments for specialized work\n\n### 3. Regular Queue Review\n\nReview pending tasks regularly:\n```\n/sugar-review\n# Adjust priorities\n# Remove stale tasks\n# Add missing context\n```\n\n### 4. Monitor Autonomous Execution\n\nWhen running autonomously:\n- Check status regularly: `/sugar-status`\n- Review logs: `.sugar/sugar.log`\n- Validate completed work\n- Maintain git commits\n\n### 5. Leverage Hooks\n\nSugar's hooks automatically enhance your workflow:\n- Error detection â†’ task creation suggestions\n- Test failures â†’ automatic tracking\n- Security code â†’ audit reminders\n- Commits â†’ task status updates\n\n## Troubleshooting\n\n### Plugin Not Loading\n\n```bash\n# Verify plugin structure\nls -la .claude-plugins/sugar/.claude-plugin/\n\n# Check manifest\ncat .claude-plugins/sugar/.claude-plugin/plugin.json\n\n# Reinstall\n/plugin uninstall sugar\n/plugin install sugar@roboticforce\n```\n\n### MCP Server Issues\n\n```bash\n# Test MCP server directly\ncd .claude-plugin/mcp-server\nnode sugar-mcp.js\n\n# Check for errors\nSUGAR_DEBUG=true node sugar-mcp.js\n```\n\n### Sugar CLI Not Found\n\n```bash\n# Verify installation\nsugar --version\n\n# Reinstall if needed\npip install --upgrade sugarai\n\n# Check PATH\nwhich sugar\n```\n\n## Resources\n\n- **Plugin Documentation**: [.claude-plugin/README.md](../../.claude-plugin/README.md)\n- **Sugar Documentation**: [docs/](../../docs/)\n- **Issues**: [GitHub Issues](https://github.com/roboticforce/sugar/issues)\n- **Discussions**: [GitHub Discussions](https://github.com/roboticforce/sugar/discussions)\n\n## Learn More\n\n- **Implementation Roadmap**: [.claude-plugin/IMPLEMENTATION_ROADMAP.md](../../.claude-plugin/IMPLEMENTATION_ROADMAP.md)\n- **Testing Guide**: [.claude-plugin/TESTING_PLAN.md](../../.claude-plugin/TESTING_PLAN.md)\n- **MCP Server**: [.claude-plugin/MCP_SERVER_IMPLEMENTATION.md](../../.claude-plugin/MCP_SERVER_IMPLEMENTATION.md)\n\n---\n\n**Transform your Claude Code workflow with autonomous AI development!** ðŸ°âœ¨\n",
        "packages/mcp-server/README.md": "# sugarai-mcp\n\nMCP server for [Sugar](https://github.com/roboticforce/sugar) - autonomous AI development system.\n\n## What is Sugar?\n\nSugar is an AI-powered autonomous development system that runs 24/7, executing development tasks in the background. It discovers work from error logs, GitHub issues, and code analysis, then implements fixes and features autonomously.\n\n## Installation\n\n### Prerequisites\n\n- Node.js 18+\n- Python 3.11+\n- Sugar CLI installed: `pip install sugarai`\n\n### Using with Goose\n\n```bash\n# Add to Goose via CLI\ngoose configure\n\n# Select \"Add Extension\" â†’ \"Command-line Extension\"\n# Name: sugar\n# Command: npx -y sugarai-mcp\n```\n\nOr add directly to your Goose config (`~/.config/goose/config.yaml`):\n\n```yaml\nextensions:\n  sugar:\n    command: npx\n    args: [\"-y\", \"sugarai-mcp\"]\n    env:\n      SUGAR_PROJECT_ROOT: /path/to/your/project\n```\n\n### Using with Claude Desktop\n\nAdd to your Claude Desktop config (`~/Library/Application Support/Claude/claude_desktop_config.json`):\n\n```json\n{\n  \"mcpServers\": {\n    \"sugar\": {\n      \"command\": \"npx\",\n      \"args\": [\"-y\", \"sugarai-mcp\"],\n      \"env\": {\n        \"SUGAR_PROJECT_ROOT\": \"/path/to/your/project\"\n      }\n    }\n  }\n}\n```\n\n## Environment Variables\n\n| Variable | Description | Default |\n|----------|-------------|---------|\n| `SUGAR_PROJECT_ROOT` | Project directory for Sugar operations | Current working directory |\n| `SUGAR_DEBUG` | Enable debug logging (`true`/`false`) | `false` |\n\n## Available Tools\n\n| Tool | Description |\n|------|-------------|\n| `createTask` | Create a new development task |\n| `listTasks` | List tasks with optional filtering |\n| `viewTask` | View detailed task information |\n| `updateTask` | Update task status, priority, etc. |\n| `removeTask` | Remove a task from the queue |\n| `getStatus` | Get Sugar system status and metrics |\n| `runOnce` | Execute one autonomous development cycle |\n| `initSugar` | Initialize Sugar in the project |\n\n## Examples\n\n### Create a Task\n\n```\nCreate a task to fix the authentication timeout bug with high priority\n```\n\nSugar will create a task that can be picked up by the autonomous loop.\n\n### Check Status\n\n```\nWhat's the current status of Sugar tasks?\n```\n\n### Run Autonomous Cycle\n\n```\nRun one Sugar development cycle to work on the highest priority task\n```\n\n## Development\n\n```bash\n# Clone the repo\ngit clone https://github.com/roboticforce/sugar.git\ncd sugar/packages/mcp-server\n\n# Install dependencies\nnpm install\n\n# Build\nnpm run build\n\n# Run locally\nnode dist/index.js\n```\n\n## License\n\nMIT\n",
        "packages/opencode-plugin/README.md": "# @anthropic/sugar-opencode\n\nOpenCode plugin for Sugar autonomous task queue integration.\n\n## Features\n\n- **Task Management Tools**: Add, list, view, update, and remove tasks\n- **Memory Integration**: Search and store learnings in Sugar's memory system\n- **Session Hooks**: Automatic memory injection and learning capture\n- **Slash Commands**: User-friendly command templates\n\n## Installation\n\n### Via npm (in opencode.json)\n\n```json\n{\n  \"plugin\": [\"@anthropic/sugar-opencode\"]\n}\n```\n\n### Local Installation\n\n```bash\ncp -r packages/opencode-plugin ~/.config/opencode/plugins/sugar\n```\n\n## Configuration\n\nAdd to your `opencode.json`:\n\n```json\n{\n  \"plugin\": [\"@anthropic/sugar-opencode\"],\n  \"sugar\": {\n    \"autoInjectMemories\": true,\n    \"memoryLimit\": 5,\n    \"storeLearnings\": true,\n    \"memoryTypes\": [\"decision\", \"preference\", \"error_pattern\"],\n    \"debug\": false\n  }\n}\n```\n\n## Available Tools\n\n| Tool             | Description                          |\n| ---------------- | ------------------------------------ |\n| `sugar_add`      | Add a new task to the queue          |\n| `sugar_list`     | List tasks with filtering            |\n| `sugar_view`     | View detailed task information       |\n| `sugar_remove`   | Remove a task from the queue         |\n| `sugar_priority` | Change task priority                 |\n| `sugar_status`   | Get queue statistics and health      |\n| `sugar_recall`   | Search Sugar's memory system         |\n| `sugar_run`      | Execute one autonomous cycle         |\n\n## Slash Commands\n\n| Command           | Description                    |\n| ----------------- | ------------------------------ |\n| `/sugar-add`      | Add a task interactively       |\n| `/sugar-list`     | View task queue                |\n| `/sugar-status`   | System health dashboard        |\n| `/sugar-run`      | Execute one task               |\n| `/sugar-remove`   | Remove a task                  |\n| `/sugar-priority` | Change task priority           |\n\n## Requirements\n\n- OpenCode >= 0.1.0\n- Sugar CLI >= 3.0.0 (`pip install sugarai`)\n- Sugar initialized in project (`sugar init`)\n\n## Session Hooks\n\nThe plugin automatically:\n\n1. **On Session Start**: Injects relevant memories from Sugar\n2. **On Tool Error**: Stores error patterns for future reference\n3. **On Session End**: Captures learnings from the session\n\n## Example Usage\n\n```\n# Add a task\n/sugar-add \"Fix the authentication timeout bug\"\n\n# View queue\n/sugar-list\n\n# Check status\n/sugar-status\n\n# Run Sugar\n/sugar-run\n```\n\n## License\n\nMIT\n",
        "packages/opencode-plugin/commands/sugar-add.md": "---\nname: sugar-add\ndescription: Add a new task to Sugar's autonomous work queue\n---\n\n# Add Sugar Task\n\nYou are helping the user add a task to Sugar's autonomous development queue.\n\n## Process\n\n1. **Understand the Request**: Parse what the user wants to accomplish\n2. **Classify the Task**: Determine type (bug_fix, feature, test, refactor, documentation)\n3. **Assess Priority**: Based on urgency and impact (1-5 scale)\n4. **Create the Task**: Use the sugar_add tool\n\n## Priority Guide\n\n| Priority | Label   | Use When                                    |\n| -------- | ------- | ------------------------------------------- |\n| 5        | Urgent  | Production is broken, security issue        |\n| 4        | High    | Blocking other work, deadline approaching   |\n| 3        | Normal  | Standard development work                   |\n| 2        | Low     | Nice to have, backlog items                 |\n| 1        | Minimal | Future consideration, ideas                 |\n\n## Task Types\n\n- **bug_fix**: Something is broken or not working as expected\n- **feature**: New functionality or capability\n- **test**: Adding or improving test coverage\n- **refactor**: Code improvement without changing behavior\n- **documentation**: README, comments, API docs\n\n## Example Interactions\n\n**Simple task:**\n\n> User: \"add task to fix the login timeout bug\"\n> Use: sugar_add with title=\"Fix login timeout bug\", type=\"bug_fix\", priority=4\n\n**Urgent task:**\n\n> User: \"urgent: API is returning 500 errors\"\n> Use: sugar_add with title=\"Fix API 500 errors\", type=\"bug_fix\", urgent=true\n\n**Complex task:**\n\n> User: \"add task to implement user dashboard with charts\"\n> Use: sugar_add with title=\"Implement user dashboard with charts\", type=\"feature\", priority=3, triage=true\n\n## After Creating\n\n1. Confirm the task was created with its ID\n2. Mention they can view the queue with `/sugar-list`\n3. Suggest `/sugar-run` if they want to execute it now\n",
        "packages/opencode-plugin/commands/sugar-context.md": "---\nname: sugar-context\ndescription: Load project context from Sugar's memory at session start\n---\n\n# Project Context\n\nLoad and display the full project context from Sugar's memory system.\n\n## When to Use\n\n- At the start of a new session\n- Before working on an unfamiliar part of the codebase\n- When you need a refresher on project conventions\n\n## Process\n\n1. Call `get_project_context` MCP tool\n2. Present the context in a clear, organized format\n3. Highlight any critical preferences or patterns\n\n## Presentation\n\nFormat the context as:\n\n```\nProject Context from Sugar Memory\n=================================\n\nCoding Preferences:\n- Always use async/await, never callbacks\n- Prefer early returns over nested conditionals\n- Use TypeScript strict mode\n\nRecent Decisions:\n- Using PostgreSQL for the database (ACID, JSON support)\n- JWT with RS256 for authentication tokens\n- Monorepo structure with pnpm workspaces\n\nKnown Error Patterns:\n- Login loop: missing return after redirect\n- Connection timeout: increase pool size to 20\n\nFile Context:\n- src/auth/ handles all authentication logic\n- src/api/routes/ contains REST endpoints\n```\n\n## After Loading\n\n1. Summarize key points relevant to the current task\n2. Mention `/sugar-remember` to add new context\n3. Suggest `/sugar-recall [topic]` for deeper dives\n\n## If No Context\n\nIf memory is empty:\n\n1. Explain this is a new project or memory hasn't been populated\n2. Suggest storing key decisions with `/sugar-remember`\n3. Offer to help identify important context to store\n",
        "packages/opencode-plugin/commands/sugar-list.md": "---\nname: sugar-list\ndescription: View Sugar task queue with filtering options\n---\n\n# List Sugar Tasks\n\nDisplay the current Sugar task queue with optional filtering.\n\n## Common Queries\n\n- \"show all pending tasks\" -> sugar_list with status=\"pending\"\n- \"what's urgent?\" -> sugar_list with priority=5\n- \"show bug fixes\" -> sugar_list with type=\"bug_fix\"\n- \"show my task queue\" -> sugar_list with no filters\n\n## Output Interpretation\n\nPresent tasks in a scannable format:\n\n```\n[STATUS] Title (ID: xxx) - Priority N\n```\n\nStatus indicators:\n\n- **Pending**: Ready for execution\n- **Hold**: Paused, won't be picked up\n- **Active**: Currently being worked on\n- **Completed**: Successfully finished\n- **Failed**: Execution failed\n\n## Follow-up Suggestions\n\nBased on the results, suggest:\n\n- `/sugar-view <id>` for task details\n- `/sugar-priority <id>` to reprioritize\n- `/sugar-run` to start execution\n",
        "packages/opencode-plugin/commands/sugar-priority.md": "---\nname: sugar-priority\ndescription: Change task priority\n---\n\n# Change Task Priority\n\nReprioritize a task in the Sugar queue.\n\n## Priority Levels\n\n| Input          | Level   | Description      |\n| -------------- | ------- | ---------------- |\n| 5 or \"urgent\"  | Highest | Do immediately   |\n| 4 or \"high\"    | High    | Do soon          |\n| 3 or \"normal\"  | Normal  | Standard priority|\n| 2 or \"low\"     | Low     | When time permits|\n| 1 or \"minimal\" | Lowest  | Eventually       |\n\n## Usage\n\n> User: \"make task abc123 urgent\"\n> Use: sugar_priority with taskId=\"abc123\", level=\"urgent\"\n\n> User: \"set task xyz789 to priority 2\"\n> Use: sugar_priority with taskId=\"xyz789\", level=2\n",
        "packages/opencode-plugin/commands/sugar-recall.md": "---\nname: sugar-recall\ndescription: Search Sugar's memory for relevant context\n---\n\n# Recall Memory\n\nYou are helping the user retrieve relevant information from Sugar's persistent memory system.\n\n## Process\n\n1. **Understand the Query**: What information does the user need?\n2. **Search Memory**: Use the appropriate MCP tool\n3. **Present Results**: Format findings clearly\n4. **Suggest Actions**: Offer to store new learnings if relevant\n\n## Available Tools\n\n| Tool | Use When |\n| ---- | -------- |\n| `recall` | Get formatted context about a topic (best for general queries) |\n| `search_memory` | Search with scoring, get structured results |\n| `get_project_context` | Get overall project context (preferences, decisions, patterns) |\n| `list_recent_memories` | Browse recent entries, optionally by type |\n\n## Example Interactions\n\n**General recall:**\n\n> User: \"what do we know about authentication?\"\n> Use: recall with topic=\"authentication\"\n\n**Specific search:**\n\n> User: \"find all our database decisions\"\n> Use: search_memory with query=\"database decisions architecture\"\n\n**Project context:**\n\n> User: \"what are our coding preferences?\"\n> Use: get_project_context (returns all preferences, decisions, patterns)\n\n**Recent memories:**\n\n> User: \"what did we learn recently?\"\n> Use: list_recent_memories with limit=10\n\n## Presentation\n\nFormat results clearly:\n\n```\nFound 3 relevant memories:\n\n1. [decision] Using PostgreSQL for ACID compliance\n   Stored: 2 days ago\n\n2. [preference] Always use prepared statements for queries\n   Stored: 1 week ago\n\n3. [error_pattern] Connection pool exhaustion: increase max_connections\n   Stored: 3 days ago\n```\n\n## When No Results\n\nIf no memories found:\n\n1. Confirm what was searched\n2. Suggest alternative search terms\n3. Offer to store new information with `/sugar-remember`\n\n## Proactive Use\n\nConsider using memory tools proactively:\n\n- At the start of a task: `get_project_context`\n- When encountering errors: `search_memory` for similar patterns\n- Before making decisions: `recall` related past decisions\n",
        "packages/opencode-plugin/commands/sugar-remember.md": "---\nname: sugar-remember\ndescription: Store a learning, decision, or preference in Sugar's memory\n---\n\n# Store Memory\n\nYou are helping the user store important information in Sugar's persistent memory system.\n\n## Process\n\n1. **Understand What to Remember**: Parse what the user wants to store\n2. **Classify the Memory**: Determine the appropriate type\n3. **Store It**: Use the `store_learning` MCP tool\n4. **Confirm**: Tell the user what was stored\n\n## Memory Types\n\n| Type | Use When |\n| ---- | -------- |\n| `decision` | Architecture choices, implementation decisions, \"we decided to...\" |\n| `preference` | Coding style, conventions, \"always use...\", \"never do...\" |\n| `error_pattern` | Bug patterns and their fixes, \"this error means...\" |\n| `research` | Findings, discoveries, documentation notes |\n| `file_context` | What files do, where things are located |\n| `outcome` | Results of previous attempts, what worked/didn't |\n\n## Example Interactions\n\n**Storing a preference:**\n\n> User: \"remember that we always use async/await in this project\"\n> Use: store_learning with content=\"Always use async/await, never callbacks\", type=\"preference\"\n\n**Storing a decision:**\n\n> User: \"remember we chose PostgreSQL for the database\"\n> Use: store_learning with content=\"Using PostgreSQL as the main database for ACID compliance and JSON support\", type=\"decision\"\n\n**Storing an error pattern:**\n\n> User: \"remember that the login loop bug was caused by missing return statement\"\n> Use: store_learning with content=\"Login loop bug: caused by missing return statement in auth handler after redirect\", type=\"error_pattern\"\n\n## Best Practices\n\nWhen storing memories:\n\n1. **Be specific**: Include context and reasoning, not just facts\n2. **Add tags**: Use relevant tags for easier recall (e.g., \"auth,security\")\n3. **Include the \"why\"**: Future sessions benefit from understanding reasoning\n\n## After Storing\n\n1. Confirm the memory was stored with its ID\n2. Mention they can search memories with `/sugar-recall`\n3. Suggest related memories if relevant\n",
        "packages/opencode-plugin/commands/sugar-remove.md": "---\nname: sugar-remove\ndescription: Remove a task from the work queue\n---\n\n# Remove Sugar Task\n\nPermanently remove a task from Sugar's work queue.\n\n## Caution\n\nThis action cannot be undone. Confirm with the user before removing.\n\n## Usage\n\n1. User provides task ID\n2. Confirm the removal\n3. Execute sugar_remove\n4. Confirm success\n\n## Example\n\n> User: \"remove task abc123\"\n> Confirm: \"Remove task abc123? This cannot be undone.\"\n> If confirmed: sugar_remove with taskId=\"abc123\"\n",
        "packages/opencode-plugin/commands/sugar-run.md": "---\nname: sugar-run\ndescription: Execute one autonomous development cycle\n---\n\n# Run Sugar Cycle\n\nExecute one autonomous development cycle. Sugar will:\n\n1. Pick the highest priority pending task\n2. Execute it using the configured AI agent\n3. Mark as completed or failed based on outcome\n\n## Options\n\n- **Dry run**: Simulate without making changes\n- **Validate**: Check configuration first\n\n## Usage Patterns\n\n- \"run sugar\" -> sugar_run\n- \"test sugar without changes\" -> sugar_run with dryRun=true\n- \"validate sugar config\" -> sugar_run with validate=true\n\n## Important Notes\n\n- Long-running operation (may take several minutes)\n- One task per cycle\n- Check /sugar-status after for results\n",
        "packages/opencode-plugin/commands/sugar-status.md": "---\nname: sugar-status\ndescription: Show Sugar system health and queue metrics\n---\n\n# Sugar System Status\n\nDisplay comprehensive Sugar system status including:\n\n- Queue statistics (pending, active, completed, failed counts)\n- Worker status (running, stopped)\n- Last execution time\n- Configuration summary\n\n## Presentation\n\nFormat the status as a dashboard:\n\n```\nSugar System Status\n-------------------\nQueue:     45 total (20 pending, 2 active, 22 completed, 1 failed)\nWorker:    Running\nLast Run:  5 minutes ago\nConfig:    .sugar/config.yaml\n\nHealth: Healthy / Warning / Alert\n```\n\n## Health Assessment\n\n- **Healthy**: Tasks executing, low failure rate\n- **Warning**: Growing backlog, worker stopped\n- **Alert**: Multiple failures, configuration issues\n\n## Recommendations\n\nBased on status, suggest:\n\n- Start worker if stopped: `/sugar-run`\n- Review failures: `/sugar-list --status failed`\n- Check task priorities if backlog growing\n",
        "packages/opencode-plugin/src/hooks/index.ts": "/**\n * Sugar OpenCode Plugin Hooks\n *\n * Registers session and tool lifecycle hooks for Sugar integration.\n */\n\nimport type { SugarCLI } from \"../utils/cli\";\nimport type { SugarPluginConfig, PluginContext } from \"../types\";\nimport { log } from \"../utils/logger\";\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport interface HooksObject {\n  [key: string]: (...args: any[]) => Promise<void> | void;\n}\n\ninterface SessionEvent {\n  id: string;\n  project?: unknown;\n}\n\ninterface ToolEvent {\n  tool: { name: string };\n  result?: unknown;\n  error?: Error;\n  sessionId?: string;\n}\n\ninterface ErrorEvent {\n  error?: Error | { message?: string };\n  sessionId?: string;\n}\n\n/**\n * Create session and tool lifecycle hooks\n */\nexport function createHooks(\n  cli: SugarCLI,\n  client: PluginContext[\"client\"],\n  config: SugarPluginConfig\n): HooksObject {\n  return {\n    // Inject relevant memories when session starts\n    \"session.created\": async (session: SessionEvent) => {\n      if (!config.autoInjectMemories) return;\n\n      log(config.debug, \"Session created, injecting memories\", {\n        sessionId: session.id,\n      });\n\n      try {\n        // Get project context for memory query\n        const contextResult = await cli.exportContext();\n        if (contextResult.success && contextResult.stdout) {\n          await client.app.log({\n            service: \"sugar-plugin\",\n            level: \"info\",\n            message: \"Sugar context injected into session\",\n            extra: { sessionId: session.id },\n          });\n        }\n      } catch (error) {\n        await client.app.log({\n          service: \"sugar-plugin\",\n          level: \"warn\",\n          message: \"Failed to inject Sugar memories\",\n          extra: { error: String(error) },\n        });\n      }\n    },\n\n    // Store learnings after session completes meaningful work\n    \"session.idle\": async (session: SessionEvent) => {\n      if (!config.storeLearnings) return;\n\n      log(config.debug, \"Session idle, checking for learnings\", {\n        sessionId: session.id,\n      });\n\n      // Session.idle fires when agent is waiting - good time to persist any learnings\n    },\n\n    // Track tool execution outcomes for learning\n    \"tool.execute.after\": async (event: ToolEvent) => {\n      if (!config.storeLearnings) return;\n\n      const { tool, error } = event;\n\n      // Track significant operations for learning\n      if (tool.name.startsWith(\"sugar_\")) {\n        log(config.debug, \"Sugar tool executed\", {\n          tool: tool.name,\n          success: !error,\n        });\n\n        // Store error patterns for future reference\n        if (error) {\n          try {\n            await cli.remember(\n              `Tool ${tool.name} failed: ${error.message}`,\n              \"error_pattern\"\n            );\n          } catch {\n            // Silent fail for memory storage\n          }\n        }\n      }\n    },\n\n    // Handle session compaction for multi-agent handoff\n    \"session.compacted\": async (event: { sessionId: string }) => {\n      log(config.debug, \"Session compacted\", { sessionId: event.sessionId });\n\n      // Export current context for potential handoff\n      try {\n        const contextResult = await cli.exportContext();\n        if (contextResult.success) {\n          await client.app.log({\n            service: \"sugar-plugin\",\n            level: \"debug\",\n            message: \"Context exported for compaction\",\n          });\n        }\n      } catch {\n        // Silent fail\n      }\n    },\n\n    // Log session errors\n    \"session.error\": async (event: ErrorEvent) => {\n      await client.app.log({\n        service: \"sugar-plugin\",\n        level: \"error\",\n        message: \"Session error occurred\",\n        extra: {\n          error: event.error,\n          sessionId: event.sessionId,\n        },\n      });\n\n      // Store error for learning\n      if (config.storeLearnings) {\n        try {\n          const errorMsg =\n            (event.error as Error)?.message ||\n            String(event.error) ||\n            \"Unknown error\";\n          await cli.remember(`Session error: ${errorMsg}`, \"error_pattern\");\n        } catch {\n          // Silent fail\n        }\n      }\n    },\n  };\n}\n",
        "sugar/quality_gates/README.md": "# Quality Gates\n\n**Status:** âœ… Phase 1, 2, and 3 Complete (7 of 10 features implemented - 70%)\n\nQuality Gates enforce mandatory verification before allowing task completion. This prevents Sugar from claiming success without proof.\n\n## Phase 1 Features (CRITICAL)\n\n### Feature 1: Mandatory Test Execution âœ…\n**Purpose:** Block commits unless tests run and pass\n\n**How it works:**\n1. Before allowing `git commit`, Sugar runs configured test commands\n2. Test output is captured and parsed for failures/errors\n3. Evidence is stored in `.sugar/test_evidence/{task_id}.txt`\n4. Commit is blocked if tests fail or weren't run\n\n**Configuration:**\n```yaml\nquality_gates:\n  mandatory_testing:\n    enabled: true\n    block_commits: true\n    test_commands:\n      default: \"pytest\"\n    validation:\n      require_zero_failures: true\n      require_zero_errors: true\n    evidence:\n      store_test_output: true\n      path: \".sugar/test_evidence/{task_id}.txt\"\n```\n\n### Feature 3: Success Criteria Verification âœ…\n**Purpose:** Make success criteria testable and verifiable\n\n**How it works:**\n1. Tasks include structured `success_criteria` with expected outcomes\n2. Each criterion is automatically verified (HTTP status, file exists, tests pass, etc.)\n3. Task cannot complete until all criteria are verified\n4. Evidence is collected for each verification\n\n**Supported Criterion Types:**\n- `http_status`: Verify HTTP status code\n- `http_no_redirect`: Verify URL doesn't redirect\n- `test_suite`: Verify test suite passes\n- `file_exists`: Verify file exists\n- `string_in_file`: Verify string in file\n- `browser_element_exists`: (Placeholder for MCP integration)\n\n**Example:**\n```yaml\ntask:\n  title: \"Fix /login redirect\"\n  success_criteria:\n    - type: \"http_status\"\n      url: \"http://localhost:3000/login\"\n      expected: 200\n\n    - type: \"test_suite\"\n      command: \"pytest tests/test_login.py\"\n      expected_failures: 0\n```\n\n### Feature 8: Truth Enforcement âœ…\n**Purpose:** Require proof for all claims of success\n\n**How it works:**\n1. Sugar makes claims like \"all tests pass\" or \"functionality verified\"\n2. Truth Enforcer checks evidence collector for matching proof\n3. Claims without proof cause task to fail (in strict mode)\n4. Unproven claims report is generated\n\n**Configuration:**\n```yaml\nquality_gates:\n  truth_enforcement:\n    enabled: true\n    mode: \"strict\"  # strict | permissive\n    block_unproven_success: true\n\n    rules:\n      - claim: \"all tests pass\"\n        proof_required: \"test_execution_evidence\"\n        must_show:\n          exit_code: 0\n          failures: 0\n          errors: 0\n```\n\n## Architecture\n\n```\nQualityGatesCoordinator\nâ”œâ”€â”€ TestExecutionValidator\nâ”‚   â”œâ”€â”€ Runs test commands\nâ”‚   â”œâ”€â”€ Parses output (pytest, rspec, jest)\nâ”‚   â””â”€â”€ Stores evidence\nâ”œâ”€â”€ SuccessCriteriaVerifier\nâ”‚   â”œâ”€â”€ Verifies HTTP endpoints\nâ”‚   â”œâ”€â”€ Checks file existence\nâ”‚   â”œâ”€â”€ Runs test suites\nâ”‚   â””â”€â”€ Validates outcomes\nâ”œâ”€â”€ TruthEnforcer\nâ”‚   â”œâ”€â”€ Matches claims to rules\nâ”‚   â”œâ”€â”€ Checks evidence for proof\nâ”‚   â””â”€â”€ Blocks unproven claims\nâ””â”€â”€ EvidenceCollector\n    â”œâ”€â”€ Stores test results\n    â”œâ”€â”€ Stores verification outcomes\n    â”œâ”€â”€ Generates evidence reports\n    â””â”€â”€ Creates evidence URLs\n```\n\n## Usage\n\n### In Executor Integration\n```python\nfrom sugar.quality_gates import QualityGatesCoordinator\n\n# Initialize\ncoordinator = QualityGatesCoordinator(config)\n\n# Before committing\ncan_commit, result = await coordinator.validate_before_commit(\n    task=task,\n    changed_files=[\"app/models/user.py\"],\n    claims=[\"all tests pass\", \"functionality verified\"]\n)\n\nif not can_commit:\n    logger.error(f\"Quality gate failed: {result.reason}\")\n    # Handle failure - don't commit\nelse:\n    # Add evidence to commit message\n    commit_footer = coordinator.get_commit_message_footer(result)\n    # Proceed with commit\n```\n\n### Example Task with All Features\n```python\ntask = {\n    \"id\": \"fix-login-123\",\n    \"title\": \"Fix /login redirect to homepage\",\n    \"type\": \"bug_fix\",\n    \"priority\": 5,\n\n    # Feature 3: Success Criteria\n    \"success_criteria\": [\n        {\n            \"type\": \"http_status\",\n            \"url\": \"http://localhost:3000/login\",\n            \"expected\": 200\n        },\n        {\n            \"type\": \"test_suite\",\n            \"command\": \"pytest tests/test_login.py\",\n            \"expected_failures\": 0,\n            \"expected_errors\": 0\n        }\n    ],\n\n    # Feature 8: Claims that need proof\n    \"claims\": [\n        \"all tests pass\",\n        \"functionality verified\"\n    ]\n}\n```\n\n## Evidence Collection\n\nEvidence is automatically collected and stored:\n\n**Test Evidence:**\n- `.sugar/test_evidence/{task_id}.txt` - Full test output\n- Includes: command, exit code, failures, errors, examples, duration\n\n**Evidence Report:**\n- `.sugar/evidence/{task_id}_evidence.json` - Comprehensive evidence\n- Includes: all verifications, outcomes, timestamps\n\n**Commit Message:**\n```\nFix /login redirect to homepage\n\nFixed the redirect issue by...\n\nQuality Gates:\n- Tests: âœ… PASSED\n- Success Criteria: âœ… VERIFIED (2/2)\n- Claims Proven: âœ… YES\n\nEvidence:\n- .sugar/test_evidence/fix-login-123.txt\n- .sugar/evidence/fix-login-123_evidence.json\n```\n\n## Testing\n\nRun quality gates tests:\n```bash\npytest tests/test_quality_gates.py -v\n```\n\nTest coverage includes:\n- Test execution validation\n- Success criteria verification\n- Truth enforcement rules\n- Evidence collection\n- Coordinator integration\n\n## Phase 2 & 3 Features âœ…\n\n**Phase 2 (High Priority):** âœ… Complete\n- âœ… Feature 2: Functional Verification Layer - HTTP requests, port checks, browser automation (placeholder)\n- âœ… Feature 6: Task Pre-Flight Checks - Environment validation before task execution\n\n**Phase 3 (Enhancement):** âœ… Complete\n- âœ… Feature 7: Verification Failure Handling - Retry logic, escalation, detailed failure reports\n- âœ… Feature 10: Work Diff Validation - Git change validation, pattern detection, size limits\n\n**Remaining Features (Optional):**\n- Feature 4: Evidence-Based Reporting - Enhanced evidence reporting (existing evidence system works well)\n- Feature 5: Claude Code Integration - MCP server inheritance\n- Feature 9: Task Definition Improvements - Schema validation for task definitions\n\nSee [PHASE2_AND_3.md](PHASE2_AND_3.md) for complete Phase 2 & 3 documentation.\nSee [USER_GUIDE.md](USER_GUIDE.md) for comprehensive usage guide across all phases.\n\n## Benefits\n\nâœ… **No More False Positives**: Tasks can't claim success without proof\nâœ… **Verification Required**: Tests must run and pass\nâœ… **Evidence Trail**: Every claim backed by evidence\nâœ… **Trust but Verify**: Sugar's reports become trustworthy\nâœ… **Quality Enforcement**: No bypassing quality requirements\n\n## Breaking Changes\n\n- Tasks may now **fail** that previously would have been marked \"completed\"\n- This is **intentional** - better to fail tasks correctly than claim false success\n- Quality > Speed\n\n---\n\n## See Also\n\n- [PHASE2_AND_3.md](PHASE2_AND_3.md) - Complete Phase 2 & 3 feature documentation\n- [USER_GUIDE.md](USER_GUIDE.md) - Comprehensive user guide for all phases\n- [INTEGRATION.md](INTEGRATION.md) - Integration guide and troubleshooting\n- [config_example.yaml](config_example.yaml) - Complete configuration reference\n- [RELEASE_NOTES.md](RELEASE_NOTES.md) - Release notes for v2.1.0\n\n---\n\n**Created:** 2025-10-15\n**Version:** 2.1.0\n**Status:** 7 of 10 features implemented (70% complete)\n**Response to:** Sugar claiming fixes without verification incident\n"
      },
      "plugins": [
        {
          "name": "sugar",
          "description": "Transform Claude Code into an autonomous AI development powerhouse with persistent task management, intelligent agents, and automatic work discovery",
          "version": "2.1.1",
          "author": {
            "name": "Steven Leggett",
            "email": "contact@roboticforce.io"
          },
          "source": ".",
          "category": "development",
          "categories": [
            "development"
          ],
          "install_commands": [
            "/plugin marketplace add roboticforce/sugar",
            "/plugin install sugar@sugar-plugins"
          ]
        }
      ]
    }
  ]
}