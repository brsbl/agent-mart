{
  "author": {
    "id": "preferredcredit",
    "display_name": "Preferred Credit, Inc.",
    "type": "Organization",
    "avatar_url": "https://avatars.githubusercontent.com/u/186636974?v=4",
    "url": "https://github.com/preferredcredit",
    "bio": null,
    "stats": {
      "total_marketplaces": 1,
      "total_plugins": 1,
      "total_commands": 3,
      "total_skills": 0,
      "total_stars": 0,
      "total_forks": 0
    }
  },
  "marketplaces": [
    {
      "name": "pci-toolbox",
      "version": "1.0.1",
      "description": "PCI's plugin marketplace for Claude Code extensions",
      "owner_info": {
        "name": "PCI",
        "email": "scel@preferredcredit.com"
      },
      "keywords": [],
      "repo_full_name": "preferredcredit/pci-claude-code-toolbox",
      "repo_url": "https://github.com/preferredcredit/pci-claude-code-toolbox",
      "repo_description": "PCI's plugin marketplace to distribute Claude Code extensions across teams",
      "homepage": null,
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-01-27T15:56:32Z",
        "created_at": "2026-01-21T14:12:40Z",
        "license": null
      },
      "file_tree": [
        {
          "path": ".claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": ".claude-plugin/marketplace.json",
          "type": "blob",
          "size": 304
        },
        {
          "path": "plugins",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/qa-playwright",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/qa-playwright/.claude-plugin",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/qa-playwright/.claude-plugin/plugin.json",
          "type": "blob",
          "size": 391
        },
        {
          "path": "plugins/qa-playwright/README.md",
          "type": "blob",
          "size": 2275
        },
        {
          "path": "plugins/qa-playwright/agents",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/qa-playwright/agents/playwright-engineer.md",
          "type": "blob",
          "size": 3451
        },
        {
          "path": "plugins/qa-playwright/commands",
          "type": "tree",
          "size": null
        },
        {
          "path": "plugins/qa-playwright/commands/playwright-create-test.md",
          "type": "blob",
          "size": 6100
        },
        {
          "path": "plugins/qa-playwright/commands/playwright-init.md",
          "type": "blob",
          "size": 11325
        },
        {
          "path": "plugins/qa-playwright/commands/playwright-review.md",
          "type": "blob",
          "size": 2379
        }
      ],
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"pci-toolbox\",\n  \"version\": \"1.0.1\",\n  \"description\": \"PCI's plugin marketplace for Claude Code extensions\",\n  \"owner\": {\n    \"name\": \"PCI\",\n    \"email\": \"scel@preferredcredit.com\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"qa-playwright\",\n      \"source\": \"./plugins/qa-playwright\"\n    }\n  ]\n}\n",
        "plugins/qa-playwright/.claude-plugin/plugin.json": "{\n  \"name\": \"qa-playwright\",\n  \"description\": \"QA tools for Playwright testing and automation\",\n  \"version\": \"1.1.0\",\n  \"author\": {\n    \"name\": \"PCI\"\n  },\n  \"homepage\": \"https://github.com/preferredcredit/pci-claude-code-toolbox\",\n  \"repository\": \"https://github.com/preferredcredit/pci-claude-code-toolbox\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"qa\", \"playwright\", \"testing\", \"automation\"]\n}\n",
        "plugins/qa-playwright/README.md": "# QA Playwright Plugin\n\nClaude Code plugin providing Playwright testing tools.\n\n## Features\n\n### /playwright-init Command\n\nInitialize a new Playwright E2E testing project with best practices.\n\n```\n/playwright-init\n```\n\nGuides you through:\n- Single-app or multi-app structure selection\n- playwright.config.ts configuration\n- Base page objects and fixtures\n- Smoke tests\n- Documentation generation (CLAUDE.md, playwright-commands.md)\n\n### /playwright-create-test Command\n\nCreate new Playwright E2E tests for a specific feature.\n\n```\n/playwright-create-test login flow\n```\n\nGuides you through:\n- Gathering requirements and acceptance criteria\n- Creating a test plan for approval\n- Creating/updating page objects\n- Writing tests with proper structure\n- Running and validating tests\n\n### /playwright-review Command\n\nReview Playwright tests against best practices and project standards.\n\n```\n/playwright-review tests/e2e/login.spec.ts\n```\n\nEvaluates:\n- Selector quality (getByRole, getByTestId vs fragile CSS)\n- Waiting patterns (auto-wait vs hardcoded delays)\n- Test independence and isolation\n- Assertion quality\n- Flakiness risk\n\n### playwright-engineer Subagent\n\nA TypeScript Playwright specialist that Claude delegates to for E2E test work:\n\n- **Adapts to your project** - Discovers existing patterns before writing code\n- **Test creation** - Write maintainable tests using Page Object Model\n- **Best practices** - Enforces proper selectors, waits, and structure\n- **Anti-pattern detection** - Flags issues and suggests improvements\n\nClaude automatically delegates Playwright tasks to this subagent.\n\n## Prerequisites\n\nInstall the Playwright MCP server to enable browser automation capabilities:\n\n```\nclaude mcp add playwright npx @playwright/mcp@latest\n```\n\n## Installation\n\n```\n/plugin marketplace add preferredcredit/pci-claude-code-toolbox\n/plugin install qa-playwright@pci-toolbox\n```\n\n## Usage Examples\n\n**Initialize a new project:**\n```\n/playwright-init\n```\n\n**Ask Claude naturally** - it will delegate to the subagent:\n- \"Create a Playwright test for the login flow\"\n- \"Set up Page Object Model for the dashboard\"\n- \"Review the checkout tests for best practices\"\n- \"Fix the flaky test in auth.spec.ts\"\n\n## Development\n\nPart of the PCI Claude Code Toolbox marketplace.\n",
        "plugins/qa-playwright/agents/playwright-engineer.md": "---\nname: playwright-engineer\ndescription: A TypeScript Playwright engineer. Sets up projects, writes maintainable tests, enforces QA best practices. Use PROACTIVELY for Playwright test planning, implementation and project setup.\nmodel: sonnet\ntools: Read, Write, Edit, Bash, Glob, Grep, browser_close, browser_resize, browser_console_messages, browser_handle_dialog, browser_file_upload, browser_install, browser_press_key, browser_navigate, browser_navigate_back, browser_navigate_forward, browser_network_requests, browser_pdf_save, browser_take_screenshot, browser_snapshot, browser_click, browser_drag, browser_hover, browser_type, browser_select_option, browser_tab_list, browser_tab_new, browser_tab_select, browser_tab_close, browser_generate_playwright_test, browser_wait_for\n---\n\nYou are an expert TypeScript Playwright engineer focused on creating extensive maintainable playwright tests.\n\n## Core Principles\n\n1. **Follow existing patterns** - Discover the project's test structure, naming conventions, and patterns. Match them.\n2. **Start simple** - Begin with the minimal test that validates the requirement\n3. **Deterministic tests** - No flaky tests. Use proper waits, avoid arbitrary timeouts\n4. **follow playwright best practices** - Adhere to the standards and best practices for playwright.  \n5. **Suggest improvements** - If you find anti-patterns, note them and suggest fixes\n\n## Playwright Best Practices\n\n### Selectors (Priority Order)\n1. `data-testid` attributes (most stable)\n2. ARIA roles: `getByRole('button', { name: 'Submit' })`\n3. Labels: `getByLabel('Email')`\n4. Text: `getByText('Welcome')` for visible content\n5. CSS selectors (last resort - fragile)\n\n### Page Object Model\nUse when a page has multiple tests or complex interactions:\n\n```typescript\nimport { Page, Locator } from '@playwright/test';\n\nexport class LoginPage {\n  readonly usernameInput: Locator;\n  readonly submitButton: Locator;\n\n  constructor(private page: Page) {\n    this.usernameInput = page.locator('[data-testid=\"username\"]');\n    this.submitButton = page.locator('[data-testid=\"submit\"]');\n  }\n\n  async login(username: string, password: string) {\n    await this.usernameInput.fill(username);\n    await this.page.locator('[data-testid=\"password\"]').fill(password);\n    await this.submitButton.click();\n  }\n}\n```\n\n### Test Structure\n\n```typescript\nimport { test, expect } from '@playwright/test';\n\ntest.describe('Feature Name', () => {\n  test('should do something when condition', async ({ page }) => {\n    // Arrange\n    await page.goto('/path');\n\n    // Act\n    await page.locator('[data-testid=\"button\"]').click();\n\n    // Assert\n    await expect(page.locator('[data-testid=\"result\"]')).toBeVisible();\n  });\n});\n```\n\n## Anti-Patterns to Flag\n\nWhen you see these, suggest fixes:\n- `page.waitForTimeout()` → use `waitForSelector`, `waitForURL`, or expect with timeout\n- Fragile selectors like `.btn-primary > span` → suggest adding data-testid\n- Tests depending on execution order → make tests independent\n- Hard-coded test data scattered in tests → suggest fixtures or constants\n- Missing assertions → every test needs explicit expects\n\n## Common Commands\n\n```bash\nnpx playwright test                    # All tests\nnpx playwright test login.spec.ts      # Single file\nnpx playwright test --headed           # Visual mode\nnpx playwright test --ui               # Interactive UI\nnpx playwright show-report             # View results\n```\n",
        "plugins/qa-playwright/commands/playwright-create-test.md": "---\nname: playwright-create-test\ndescription: Create new Playwright E2E tests for a specific feature with page objects, fixtures, and proper test organization\ndisable-model-invocation: true\nargument-hint: \"[describe what to test]\"\n---\n\n# Playwright Test Generation\n\nCreate new Playwright E2E tests for: **$ARGUMENTS**\n\nFollow PCI standards and existing project patterns.\n\n## Required Information\n\nGather from the user if not provided:\n- **Feature or page to test** (e.g., \"login flow\", \"checkout process\", \"user dashboard\")\n- **Acceptance criteria** or expected behaviors\n- **Specific scenarios** to cover\n- **Application URL** (if not already configured)\n\n## Process\n\n### Step 1: Gather Context\n\n**Understand the feature:**\n- What is being tested?\n- What are the expected behaviors?\n- What are the acceptance criteria?\n\n**Explore the existing test infrastructure:**\n- Check for existing page objects in `tests/pages/` or `shared/pages/`\n- Check for existing tests in `tests/e2e/` or `apps/*/tests/`\n- Check for existing fixtures in `tests/fixtures/` or `shared/fixtures/`\n- Review `playwright.config.ts` for base URL and project structure\n\n**Identify application selectors:**\n- Ask the user about the feature and how best to access it\n- Or explore the application to identify stable selectors\n- Suggest adding `data-testid` attributes if selectors are fragile\n\n### Step 2: Plan Test Scenarios\n\nCreate a test plan before writing code:\n\n```markdown\n## Test Plan: {Feature Name}\n\n### Page Object Needed\n- [ ] {PageName}.page.ts - {description of page/component}\n\n### Test Scenarios\n\n#### Happy Path\n1. {Primary success scenario}\n\n#### Validation & Errors\n1. {Invalid input scenario}\n2. {Error state scenario}\n\n#### Edge Cases\n1. {Edge case 1}\n2. {Edge case 2}\n\n#### Authentication (if applicable)\n- Requires logged-in user: {yes/no}\n- Roles to test: {list}\n\n### Dependencies\n- API mocking needed: {yes/no - which endpoints}\n- Test data fixtures: {list}\n- Pre-conditions: {setup requirements}\n```\n\n**Present the test plan to the user for approval before implementing.**\n\n### Step 3: Create/Update Page Objects\n\nIf the feature needs a page object:\n\n1. Check if one already exists for this page\n2. If not, create following the pattern:\n\n```typescript\n// tests/pages/{feature}.page.ts\nimport { Page, Locator } from '@playwright/test';\nimport { BasePage } from './base.page';\n\nexport class {FeatureName}Page extends BasePage {\n  // Locators\n  readonly {element}Locator: Locator;\n\n  constructor(page: Page) {\n    super(page);\n    this.{element}Locator = page.getByTestId('{test-id}');\n  }\n\n  get url(): string {\n    return '/{path}';\n  }\n\n  // Actions\n  async {actionName}(): Promise<void> {\n    // Implementation\n  }\n}\n```\n\n**Page Object Guidelines:**\n- Locators in constructor using `getByTestId` or ARIA queries\n- Actions as async methods\n- No assertions in page objects\n- Inherit from BasePage\n\n### Step 4: Write Tests\n\nUse the `playwright-engineer` agent to implement tests.\n\n**Test File Structure:**\n\n```typescript\nimport { test, expect } from '@playwright/test';\nimport { {FeatureName}Page } from '../../pages/{feature}.page';\n\ntest.describe('{Feature Name}', () => {\n  let featurePage: {FeatureName}Page;\n\n  test.beforeEach(async ({ page }) => {\n    featurePage = new {FeatureName}Page(page);\n    await featurePage.goto();\n  });\n\n  test.describe('Happy Path', () => {\n    test('should {expected behavior}', async ({ page }) => {\n      // Arrange\n      // Act\n      // Assert\n    });\n  });\n\n  test.describe('Validation', () => {\n    test('should show error when {invalid condition}', async ({ page }) => {\n      // Test implementation\n    });\n  });\n\n  test.describe('Edge Cases', () => {\n    test('should handle {edge case}', async ({ page }) => {\n      // Test implementation\n    });\n  });\n});\n```\n\n**Test Writing Guidelines:**\n- One behavior per test\n- Clear, descriptive test names starting with \"should\"\n- Arrange-Act-Assert pattern\n- Use page objects for element interaction\n- Mock external APIs when needed\n\n\n### Step 5: Run and Validate\n\nExecute the new tests to ensure they work:\n\n```bash\n# Run the new test file\nnpx playwright test tests/e2e/{feature}/{feature}.spec.ts\n\n# Run in headed mode to verify visual behavior\nnpx playwright test tests/e2e/{feature}/{feature}.spec.ts --headed\n\n# Run multiple times to check for flakiness\nnpx playwright test tests/e2e/{feature}/{feature}.spec.ts --repeat-each=3\n```\n\n**Validation Checklist:**\n- [ ] All tests pass consistently\n- [ ] Tests run in under 30 seconds\n- [ ] No flaky behavior (pass 3 consecutive runs)\n- [ ] Tests work in CI mode: `CI=true npx playwright test`\n\n### Step 6: Report Summary\n\nProvide a summary of what was created:\n\n```markdown\n## Tests Created: {Feature Name}\n\n### Files Created/Modified\n- `tests/pages/{feature}.page.ts` - Page object\n- `tests/e2e/{feature}/{feature}.spec.ts` - Test file\n- `tests/fixtures/auth.fixture.ts` - Auth fixture (if created)\n\n### Test Coverage\n| Scenario | Test | Status |\n|----------|------|--------|\n| {scenario} | should {behavior} | Pass |\n| {scenario} | should {behavior} | Pass |\n\n### Page Object Methods\n- `goto()` - Navigate to page\n- `{method}()` - {description}\n\n### Run Command\n```bash\nnpm run test:e2e -- tests/e2e/{feature}/{feature}.spec.ts\n```\n\n### Notes\n\n## Important Guidelines\n\n- **KISS** - Keep it simple stupid\n- **Follow existing patterns** - Match the style of existing tests in the project\n- **One behavior per test** - Keep tests focused and independent\n- **Use page objects** - Don't put selectors directly in test files\n- **Mock external dependencies** - Tests should not depend on external services\n- **Avoid flakiness** - No arbitrary waits, use proper Playwright waiting\n- **Run tests before completing** - Don't leave failing tests\n\n## Workflow Summary\n\n```\n1. Gather requirements from user\n2. Explore existing test infrastructure\n3. Create test plan → GET USER APPROVAL\n4. Create/update page objects\n5. Write tests (use playwright-engineer agent)\n6. Add API mocking if needed\n7. Add auth fixtures if needed\n8. Run and validate tests\n9. Report summary to user\n```\n",
        "plugins/qa-playwright/commands/playwright-init.md": "---\nname: playwright-init\ndescription: Initialize a new Playwright project with best practices\ndisable-model-invocation: true\n---\n\n# Playwright Project Initialization\n\nSet up a new Playwright E2E testing project following best practices and standards.\n\n## Input\nAsk the user to provide provide:\n- Target application URL (optional, defaults to http://localhost:3000)\n- Existing project context (framework, auth requirements, etc.)\n- Specific browser requirements\n\n## Process\n\n### Step 1: Assess Current State\n\nCheck for existing Playwright setup:\n1. Look for `playwright.config.ts` or `playwright.config.js`\n2. Check `package.json` for `@playwright/test` dependency\n3. Look for existing `tests/`, `e2e/`, or `apps/` folders\n\n**If Playwright already exists:**\nAsk the user: \"Playwright is already configured. Would you like me to:\n1. Review and upgrade to recommended standards (preserves existing tests)\n2. Start fresh (will backup existing setup)\"\n\n**If Playwright does not exist:**\nAsk the user for more context and information such as the target application URL and any other needed information to get started.\n\n### Step 2: Choose Project Structure\n\nAsk the user: \"What type of test suite structure do you need?\"\n\n**Option 1: Single-app** - Testing one application\n```\n{project}/\n├── playwright.config.ts\n├── playwright-commands.md\n├── CLAUDE.md\n├── package.json\n├── shared/\n│   ├── fixtures/index.ts\n│   ├── pages/base.page.ts\n│   └── utils/test-helpers.ts\n└── tests/\n    └── e2e/\n        └── smoke.spec.ts\n```\n\n**Option 2: Multi-app** - Testing multiple applications or domains\n```\n{project}/\n├── playwright.config.ts\n├── playwright-commands.md\n├── CLAUDE.md\n├── package.json\n├── shared/\n│   ├── config/\n│   ├── fixtures/index.ts\n│   ├── pages/base.page.ts\n│   └── utils/test-helpers.ts\n└── apps/\n    └── {app-name}/\n        ├── pages/\n        ├── test-data/\n        └── tests/\n            └── smoke.spec.ts\n```\n\nFor multi-app, also ask: \"What is the name of your first application?\" (e.g., \"gateway\", \"client-portal\", \"web-app\")\n\n### Step 3: Install Playwright\n\nLaunch the `playwright-engineer` agent to execute:\n\n```bash\n# Initialize Playwright (if not present)\nnpm init playwright@latest -- --yes --quiet\n\n# Install accessibility testing\nnpm install -D @axe-core/playwright\n```\n\n### Step 4: Create Folder Structure\n\nBased on the user's choice, create the appropriate structure.\n\n**For single-app:**\n- `shared/fixtures/`\n- `shared/pages/`\n- `shared/utils/`\n- `tests/e2e/`\n\n**For multi-app:**\n- `shared/config/`\n- `shared/fixtures/`\n- `shared/pages/`\n- `shared/utils/`\n- `apps/{app-name}/pages/`\n- `apps/{app-name}/test-data/`\n- `apps/{app-name}/tests/`\n\n### Step 5: Configure playwright.config.ts\n\n**Single-app configuration:**\n```typescript\nimport { defineConfig, devices } from '@playwright/test';\n\nexport default defineConfig({\n  testDir: './tests/e2e',\n  fullyParallel: true,\n  forbidOnly: !!process.env.CI,\n  retries: process.env.CI ? 2 : 0,\n  workers: process.env.CI ? 1 : undefined,\n  reporter: [\n    ['html', { open: 'never' }],\n    ['junit', { outputFile: 'test-results/results.xml' }],\n    ['list']\n  ],\n  use: {\n    baseURL: process.env.BASE_URL || 'http://localhost:3000',\n    trace: 'on-first-retry',\n    screenshot: 'only-on-failure',\n    video: 'on-first-retry',\n    actionTimeout: 15000,\n    navigationTimeout: 30000,\n  },\n  projects: [\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n    },\n    {\n      name: 'firefox',\n      use: { ...devices['Desktop Firefox'] },\n    },\n    {\n      name: 'webkit',\n      use: { ...devices['Desktop Safari'] },\n    },\n  ],\n});\n```\n\n**Multi-app configuration:**\n```typescript\nimport { defineConfig, devices } from '@playwright/test';\n\nexport default defineConfig({\n  testDir: './apps',\n  fullyParallel: true,\n  forbidOnly: !!process.env.CI,\n  retries: process.env.CI ? 2 : 0,\n  workers: process.env.CI ? 1 : undefined,\n  reporter: [\n    ['html', { open: 'never' }],\n    ['junit', { outputFile: 'test-results/results.xml' }],\n    ['list']\n  ],\n  use: {\n    trace: 'on-first-retry',\n    screenshot: 'only-on-failure',\n    video: 'on-first-retry',\n    actionTimeout: 15000,\n    navigationTimeout: 30000,\n  },\n  projects: [\n    // {app-name} projects\n    {\n      name: '{app-name}-chromium',\n      use: {\n        ...devices['Desktop Chrome'],\n        baseURL: process.env.{APP_NAME}_URL || 'http://localhost:3000',\n      },\n      testDir: './apps/{app-name}/tests',\n    },\n    {\n      name: '{app-name}-firefox',\n      use: {\n        ...devices['Desktop Firefox'],\n        baseURL: process.env.{APP_NAME}_URL || 'http://localhost:3000',\n      },\n      testDir: './apps/{app-name}/tests',\n    },\n    {\n      name: '{app-name}-webkit',\n      use: {\n        ...devices['Desktop Safari'],\n        baseURL: process.env.{APP_NAME}_URL || 'http://localhost:3000',\n      },\n      testDir: './apps/{app-name}/tests',\n    },\n  ],\n});\n```\n\n### Step 6: Create Base Page Object\n\n```typescript\n// shared/pages/base.page.ts\nimport { Page, Locator } from '@playwright/test';\n\nexport abstract class BasePage {\n  constructor(protected readonly page: Page) {}\n\n  abstract get url(): string;\n\n  async goto(): Promise<void> {\n    await this.page.goto(this.url);\n  }\n\n  async waitForPageLoad(): Promise<void> {\n    await this.page.waitForLoadState('networkidle');\n  }\n\n  async waitForDomContentLoaded(): Promise<void> {\n    await this.page.waitForLoadState('domcontentloaded');\n  }\n\n  getByTestId(testId: string): Locator {\n    return this.page.getByTestId(testId);\n  }\n\n  getByRole(role: Parameters<Page['getByRole']>[0], options?: Parameters<Page['getByRole']>[1]): Locator {\n    return this.page.getByRole(role, options);\n  }\n\n  getByLabel(text: string | RegExp, options?: { exact?: boolean }): Locator {\n    return this.page.getByLabel(text, options);\n  }\n\n  getByPlaceholder(text: string | RegExp, options?: { exact?: boolean }): Locator {\n    return this.page.getByPlaceholder(text, options);\n  }\n\n  getByText(text: string | RegExp, options?: { exact?: boolean }): Locator {\n    return this.page.getByText(text, options);\n  }\n\n  async getPageTitle(): Promise<string> {\n    return this.page.title();\n  }\n\n  async getCurrentUrl(): Promise<string> {\n    return this.page.url();\n  }\n\n  async takeScreenshot(name: string): Promise<Buffer> {\n    return this.page.screenshot({ path: `test-results/${name}.png` });\n  }\n}\n```\n\n### Step 7: Create Fixtures and Helpers\n\n**Fixtures:**\n```typescript\n// shared/fixtures/index.ts\nimport { test as base } from '@playwright/test';\nimport AxeBuilder from '@axe-core/playwright';\n\nexport { expect } from '@playwright/test';\n\nexport const test = base.extend<{ makeAxeBuilder: () => AxeBuilder }>({\n  makeAxeBuilder: async ({ page }, use) => {\n    await use(() => new AxeBuilder({ page }));\n  },\n});\n```\n\n**Test Helpers:**\n```typescript\n// shared/utils/test-helpers.ts\nimport { Page } from '@playwright/test';\n\nexport async function waitForNetworkIdle(page: Page, timeout = 5000): Promise<void> {\n  await page.waitForLoadState('networkidle', { timeout });\n}\n\nexport async function mockApiResponse(\n  page: Page,\n  urlPattern: string | RegExp,\n  response: unknown,\n  status = 200\n): Promise<void> {\n  await page.route(urlPattern, async route => {\n    await route.fulfill({\n      status,\n      contentType: 'application/json',\n      body: JSON.stringify(response),\n    });\n  });\n}\n\nexport function generateTestId(prefix: string): string {\n  return `${prefix}-${Date.now()}-${Math.random().toString(36).substring(7)}`;\n}\n\nexport async function waitForApiRequest(\n  page: Page,\n  urlPattern: string | RegExp,\n  timeout = 10000\n): Promise<void> {\n  await page.waitForRequest(urlPattern, { timeout });\n}\n\nexport async function clearBrowserStorage(page: Page): Promise<void> {\n  await page.evaluate(() => {\n    localStorage.clear();\n    sessionStorage.clear();\n  });\n}\n\nexport async function captureConsoleErrors(page: Page): Promise<string[]> {\n  const errors: string[] = [];\n  page.on('console', msg => {\n    if (msg.type() === 'error') {\n      errors.push(msg.text());\n    }\n  });\n  return errors;\n}\n```\n\n### Step 8: Create Smoke Test\n\n**Single-app location:** `tests/e2e/smoke.spec.ts`\n**Multi-app location:** `apps/{app-name}/tests/smoke.spec.ts`\n\n```typescript\nimport { test, expect } from '@playwright/test';\n\ntest.describe('Smoke Tests', () => {\n  test('should load the application', async ({ page }) => {\n    await page.goto('/');\n    await expect(page).toHaveTitle(/.+/);\n  });\n\n  test('should have no console errors on page load', async ({ page }) => {\n    const errors: string[] = [];\n    page.on('console', msg => {\n      if (msg.type() === 'error') {\n        errors.push(msg.text());\n      }\n    });\n\n    await page.goto('/');\n    await page.waitForLoadState('networkidle');\n\n    expect(errors).toEqual([]);\n  });\n});\n```\n\n### Step 9: Generate Documentation\n\nCreate two documentation files in the project root.\n\n#### playwright-commands.md\n\nCreate a command reference file with these sections:\n\n1. **Quick Reference** - Table of common npm commands\n2. **Project Structure** - Diagram matching the chosen structure (single-app or multi-app)\n3. **Running Tests** - Commands for all tests, by browser, by app (if multi-app)\n4. **UI Mode & Debugging** - UI mode and debug mode commands with feature lists\n5. **Direct CLI Options** - Running specific tests, workers, trace/screenshots\n6. **Configuration Details** - Timeouts table, CI/CD behavior table\n7. **Common Workflows** - Daily testing, debugging, generating new tests\n\n#### CLAUDE.md\n\nCreate a project context file with these sections:\n\n1. **Overview** - Brief description of the test suite\n2. **Project Structure** - Diagram matching the chosen structure\n3. **Key Patterns**\n   - Page Objects: base class location, inheritance pattern, locator methods\n   - Fixtures: import path, available fixtures (makeAxeBuilder)\n   - Test Organization: describe blocks, data-driven testing, accessibility tests\n4. **File Naming Conventions** - Table with patterns for .spec.ts, .page.ts, .data.ts\n5. **Related Documentation** - Link to playwright-commands.md with maintenance instructions:\n\n   > **Keep playwright-commands.md updated when:**\n   > - Adding new npm scripts to package.json\n   > - Adding new test projects or applications\n   > - Changing environment configuration\n   > - Modifying browser project settings in playwright.config.ts\n\n6. **npm Scripts** - JSON block with all test scripts to add to package.json\n\n### Step 10: Update .gitignore\n\nAdd Playwright artifacts:\n\n```\n# Playwright\n/test-results/\n/playwright-report/\n/blob-report/\n/playwright/.cache/\n```\n\n### Step 11: Verify Setup\n\n1. Run the smoke tests: `npx playwright test`\n2. Confirm tests pass\n3. Show the HTML report: `npx playwright show-report`\n\n## Important Guidelines\n\n- **Check existing setup first** - Don't overwrite custom configuration without asking\n- **Preserve existing tests** - Migrate, don't delete\n- **Verify before completing** - Tests must run successfully\n- **Ask about base URL** - Confirm the application URL with the user\n- **Keep documentation in sync** - CLAUDE.md references playwright-commands.md for maintenance\n",
        "plugins/qa-playwright/commands/playwright-review.md": "---\nname: playwright-review\ndescription: Review Playwright tests against best practices and project standards\nargument-hint: \"<test-file-or-pattern>\"\ndisable-model-invocation: true\n---\n\n# Playwright Test Review\n\nReview Playwright tests against best practices and project standards.\n\nUse the `playwright-engineer` agent to perform the review.\n\n## First Step\n\nIf `{argument}` is empty, ask the user which test file(s) to review before proceeding.\n\n## Review Checklist\n\nEvaluate tests against Playwright best practices:\n\n### Selectors\n\n| Rating | Pattern | Why |\n|--------|---------|-----|\n| Preferred | `getByRole()`, `getByLabel()`, `getByText()` | User-facing, accessible |\n| Good | `getByTestId()` | Stable, explicit |\n| Avoid | CSS classes, tag names | Fragile, style-coupled |\n| Critical | XPath, `nth-child()`, complex CSS paths | Brittle, must fix |\n\n### Waiting\n\n| Rating | Pattern |\n|--------|---------|\n| Good | Playwright auto-wait (default), `expect().toBeVisible()`, `waitForURL()` |\n| Critical | `waitForTimeout()`, `setTimeout()`, hardcoded delays |\n\n### Test Independence\n\n- Each test should run in isolation\n- No shared mutable state between tests\n- No reliance on test execution order\n- Proper setup/teardown with `beforeEach`/`afterEach`\n\n### Assertions\n\n- Every test should have meaningful assertions\n- Use web-first assertions (`expect(locator).toBeVisible()`)\n- Avoid `expect(await locator.isVisible()).toBe(true)` - use `expect(locator).toBeVisible()`\n\n### Test Naming\n\n- Descriptive names: `should {behavior} when {condition}`\n- Logical grouping with `test.describe()`\n\n### Page Objects (if applicable)\n\n- Locators defined as properties\n- Actions as methods\n- No assertions inside page objects\n\n### Flakiness Risk\n\nFlag these patterns:\n- Arbitrary timeouts or delays\n- Race conditions\n- Time-dependent logic\n- Non-deterministic data\n- Unhandled animations\n\n## Output\n\nPresent findings by severity:\n\n**Critical** - Causes failures or flakiness (file:line, issue, fix)\n\n**Warning** - Maintenance risk (file:line, issue, recommendation)\n\n**Suggestion** - Improvement opportunity (file, issue, suggestion)\n\n**Good Practices** - What's done well\n\n## Guidelines\n\n- **Read-only** - Do not modify code\n- **Be specific** - Reference file and line numbers\n- **Provide fixes** - Don't just identify problems\n- **Match project patterns** - Respect existing conventions\n"
      },
      "plugins": [
        {
          "name": "qa-playwright",
          "source": "./plugins/qa-playwright",
          "description": null,
          "categories": [],
          "install_commands": [
            "/plugin marketplace add preferredcredit/pci-claude-code-toolbox",
            "/plugin install qa-playwright@pci-toolbox"
          ]
        }
      ]
    }
  ]
}