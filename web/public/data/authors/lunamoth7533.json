{
  "author": {
    "id": "lunamoth7533",
    "display_name": "lunamoth7533",
    "avatar_url": "https://avatars.githubusercontent.com/u/256235754?v=4"
  },
  "marketplaces": [
    {
      "name": "homunculus",
      "version": null,
      "description": "Self-evolution system for Claude Code - automatic gap detection and capability synthesis with human-in-the-loop approval",
      "repo_full_name": "lunamoth7533/homunculus",
      "repo_url": "https://github.com/lunamoth7533/homunculus",
      "repo_description": "Self-evolution system for Claude Code - automatic gap detection and capability synthesis",
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-02-04T04:28:05Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"homunculus\",\n  \"owner\": {\n    \"name\": \"lunamoth7533\",\n    \"email\": \"\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"homunculus\",\n      \"source\": \"./\",\n      \"description\": \"Self-evolution system for Claude Code - automatic gap detection and capability synthesis with human-in-the-loop approval\",\n      \"version\": \"1.2.0\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"homunculus\",\n  \"version\": \"1.2.0\",\n  \"description\": \"Self-evolution system for Claude Code - automatic gap detection and capability synthesis with human-in-the-loop approval\",\n  \"author\": {\n    \"name\": \"lunamoth7533\",\n    \"email\": \"\"\n  },\n  \"homepage\": \"https://github.com/lunamoth7533/homunculus\",\n  \"repository\": \"https://github.com/lunamoth7533/homunculus\",\n  \"license\": \"MIT\",\n  \"keywords\": [\n    \"self-evolution\",\n    \"gap-detection\",\n    \"capability-synthesis\",\n    \"meta-learning\",\n    \"automation\",\n    \"skills\",\n    \"hooks\",\n    \"agents\"\n  ],\n  \"skills\": \"./skills/\"\n}\n",
        "README.md": "# Homunculus\n\n**Self-Evolution System for Claude Code**\n\nHomunculus is a Claude Code plugin that enables automatic detection of capability gaps and self-synthesis of new abilities. It observes Claude's interactions, identifies patterns where capabilities are missing, and proposes new skills, hooks, agents, and commands to address those gaps.\n\n## Features\n\n- **16 Gap Types**: Detects tool, knowledge, workflow, integration, context, permission, quality, speed, communication, recovery, reasoning, verification, discovery, learning, evolution, and self-awareness gaps\n- **5 Capability Types**: Generates skills, hooks, agents, commands, and MCP servers\n- **Smart Deduplication**: Fingerprint-based and fuzzy matching prevents duplicate gaps across sessions\n- **Human-in-the-Loop**: All proposed capabilities require human approval before installation\n- **Rollback Support**: Every installed capability can be rolled back\n- **Layer 2 Meta-Evolution**: The system monitors and improves its own detection and synthesis performance\n- **Project-Aware Scoping**: Capabilities can be scoped to session, project, or global\n- **Free to Run**: No external API calls required for core functionality\n\n## Installation\n\n### 1. Clone or Copy to Home Directory\n\n```bash\n# The plugin should be at ~/homunculus\ncd ~\ngit clone <repository-url> homunculus\n# OR if you already have it:\n# mv /path/to/homunculus ~/homunculus\n```\n\n### 2. Initialize the Database\n\n```bash\ncd ~/homunculus\npython3 scripts/cli.py init\n```\n\n### 3. Install as a Plugin\n\n```bash\n# Add the plugin marketplace\n/plugin marketplace add ~/homunculus\n\n# Install the plugin\n/plugin install homunculus@homunculus\n```\n\nThe plugin automatically configures hooks for PreToolUse, PostToolUse, and Stop events.\n\n### 4. Restart Claude Code\n\nRestart Claude Code to activate the hooks.\n\n## Usage\n\n### Check System Status\n\n```bash\npython3 ~/homunculus/scripts/cli.py status\n```\n\n### View Detected Gaps\n\n```bash\n# List all pending gaps\npython3 ~/homunculus/scripts/cli.py gaps\n\n# View details for a specific gap\npython3 ~/homunculus/scripts/cli.py gap <gap-id>\n```\n\n### Run Gap Detection Manually\n\n```bash\npython3 ~/homunculus/scripts/cli.py detect\n```\n\n### Generate Capability Proposals\n\n```bash\n# Synthesize proposals for pending gaps\npython3 ~/homunculus/scripts/cli.py synthesize\n\n# Synthesize for a specific gap\npython3 ~/homunculus/scripts/cli.py synthesize <gap-id>\n```\n\n### Review and Approve Proposals\n\n```bash\n# List pending proposals\npython3 ~/homunculus/scripts/cli.py proposals\n\n# Review a specific proposal (shows full details and file previews)\npython3 ~/homunculus/scripts/cli.py review <proposal-id>\n\n# Approve and install a proposal\npython3 ~/homunculus/scripts/cli.py approve <proposal-id>\n\n# Reject a proposal\npython3 ~/homunculus/scripts/cli.py reject <proposal-id> --reason \"Not needed\"\n```\n\n### Manage Installed Capabilities\n\n```bash\n# List installed capabilities\npython3 ~/homunculus/scripts/cli.py capabilities\n\n# Rollback an installed capability\npython3 ~/homunculus/scripts/cli.py rollback <capability-name>\n```\n\n### Meta-Evolution (Layer 2)\n\n```bash\n# Check meta-evolution status\npython3 ~/homunculus/scripts/cli.py meta-status\n\n# Run meta-analysis to identify system improvements\npython3 ~/homunculus/scripts/cli.py meta-status --analyze\n```\n\n### Other Commands\n\n```bash\n# View configuration\npython3 ~/homunculus/scripts/cli.py config\n\n# Dismiss a gap permanently\npython3 ~/homunculus/scripts/cli.py dismiss-gap <gap-id> --reason \"Not relevant\"\n\n# Re-initialize (use with caution)\npython3 ~/homunculus/scripts/cli.py init --force\n```\n\n## How It Works\n\n### 1. Observation\n\nClaude Code hooks capture tool usage events and store them in `~/homunculus/observations/current.jsonl`. Events include:\n- Tool name and input\n- Success/failure status\n- Error messages\n- Timing information\n\n### 2. Gap Detection\n\nThe detection engine analyzes observations using 16 detector rules defined in `~/homunculus/meta/detector-rules/`. Each rule looks for patterns like:\n- Explicit statements: \"I can't...\", \"I don't have access to...\"\n- Tool failures with specific error patterns\n- Repeated clarification requests\n- Permission denials\n\n#### Deduplication\n\nGaps are automatically deduplicated to prevent redundant entries:\n\n| Method | Description |\n|--------|-------------|\n| **Fingerprinting** | Gaps are hashed using sorted, normalized keywords. Variations like \"Cannot read PDF files\" and \"PDF files cannot be read!\" match exactly. |\n| **Fuzzy matching** | Word-based Jaccard similarity (threshold: 50%) catches near-duplicates with different phrasing. |\n| **Cross-session** | New gaps are compared against all active gaps (pending, synthesizing, proposed) - not just within the current session. |\n| **Merging** | Duplicate gaps update the existing gap's confidence and evidence rather than creating new entries. |\n\n### 3. Synthesis\n\nWhen gaps are detected, the synthesis engine uses templates from `~/homunculus/meta/synthesis-templates/` to generate capability proposals. Templates exist for:\n- **Skills**: Markdown instructions for Claude\n- **Hooks**: Claude Code hooks for automation\n- **Agents**: Specialized subagents for complex tasks\n- **Commands**: User-invokable slash commands\n- **MCP Servers**: Model Context Protocol servers\n\n### 4. Human Review\n\nAll proposals require human approval. The review process shows:\n- Full proposal details\n- Generated file contents\n- Reasoning for the proposal\n- Approval/rejection options\n\n### 5. Installation & Rollback\n\nApproved proposals are installed to `~/homunculus/evolved/`. Every installation:\n- Creates backup of any existing files\n- Tracks rollback information\n- Can be reversed with the `rollback` command\n\n### 6. Meta-Evolution (Layer 2)\n\nThe system monitors its own performance:\n- Tracks detector approval/rejection rates\n- Identifies patterns in rejected proposals\n- Proposes improvements to detection rules and templates\n\n## Directory Structure\n\n```\n~/homunculus/\n├── config.yaml              # System configuration\n├── homunculus.db            # SQLite database\n├── observations/\n│   └── current.jsonl        # Current session observations\n├── evolved/                  # Installed capabilities\n│   ├── skills/\n│   ├── hooks/\n│   ├── agents/\n│   ├── commands/\n│   └── mcp-servers/\n├── meta/\n│   ├── detector-rules/      # 16 gap detection rules\n│   └── synthesis-templates/ # 5 capability templates\n├── scripts/\n│   ├── cli.py               # Main CLI\n│   ├── utils.py             # Shared utilities\n│   ├── detector.py          # Gap detection engine\n│   ├── synthesizer.py       # Capability synthesis\n│   ├── installer.py         # Install/rollback engine\n│   ├── meta_evolution.py    # Layer 2 system\n│   ├── gap_types.py         # Gap type definitions\n│   ├── init_db.py           # Database initialization\n│   ├── observe.sh           # Hook observation script\n│   └── schema.sql           # Database schema\n└── tests/                   # Test suite (107 tests)\n```\n\n## Configuration\n\nEdit `~/homunculus/config.yaml` to customize:\n\n```yaml\nversion: \"1.2.0\"\n\ndetection:\n  min_confidence_threshold: 0.3    # Minimum confidence to detect a gap\n  auto_synthesize_threshold: 0.7   # Auto-synthesize above this confidence\n  triggers:\n    on_failure: true               # Detect on tool failures\n    on_friction: true              # Detect on repeated clarifications\n    on_session_end: true           # Analyze at session end\n    periodic_minutes: 30           # Periodic analysis interval\n\nsynthesis:\n  synthesis_model: sonnet          # Model for complex synthesis\n  detection_model: haiku           # Model for detection (faster)\n  max_proposals_per_day: 10        # Rate limiting\n\nmeta_evolution:\n  enabled: true                    # Enable Layer 2\n  analysis_frequency: weekly       # How often to analyze\n  max_meta_proposals_per_week: 3   # Rate limit meta-proposals\n\nscoping:\n  default_scope: global            # Default capability scope\n  project_detection: auto          # Auto-detect project context\n\nstorage:\n  observations_max_mb: 50          # Max observation storage\n  archive_after_days: 7            # Archive old observations\n```\n\n## Gap Types\n\n| Type | Description | Default Scope |\n|------|-------------|---------------|\n| tool | Missing tool or capability | global |\n| knowledge | Missing domain knowledge | project |\n| workflow | Inefficient multi-step process | project |\n| integration | Can't connect to external service | global |\n| context | Missing project/codebase context | project |\n| permission | Blocked by permissions | global |\n| quality | Output quality issues | global |\n| speed | Performance too slow | project |\n| communication | Misunderstanding user intent | session |\n| recovery | Can't recover from errors | global |\n| reasoning | Complex reasoning failures | global |\n| verification | Can't verify correctness | project |\n| discovery | Can't find information | project |\n| learning | Repeating same mistakes | session |\n| evolution | Can't improve own behavior | global |\n| self_awareness | Unaware of own limitations | global |\n\n## Running Tests\n\n```bash\ncd ~/homunculus\npython3 -m unittest discover tests/ -v\n```\n\nAll 107 tests should pass.\n\n## Troubleshooting\n\n### Hooks not triggering\n- Verify `~/.claude/settings.json` is correctly configured\n- Restart Claude Code after changing settings\n- Check that `observe.sh` is executable: `chmod +x ~/homunculus/scripts/observe.sh`\n\n### Database errors\n- Re-initialize: `python3 scripts/cli.py init --force`\n- Check permissions on `~/homunculus/data/`\n\n### No gaps detected\n- Ensure observations are being captured in `~/homunculus/observations/current.jsonl`\n- Run detection manually: `python3 scripts/cli.py detect`\n\n### Proposals not generating\n- Check that synthesis templates exist in `~/homunculus/meta/synthesis-templates/`\n- Run synthesis manually: `python3 scripts/cli.py synthesize`\n\n## Contributing\n\nHomunculus is designed to be extensible:\n\n1. **Add new detector rules**: Create YAML files in `meta/detector-rules/`\n2. **Add new synthesis templates**: Create YAML files in `meta/synthesis-templates/`\n3. **Extend gap types**: Modify `scripts/gap_types.py`\n\n## License\n\nMIT License - See LICENSE file for details.\n\n## Architecture\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│                        Claude Code                               │\n│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │\n│  │ PreToolUse  │    │ PostToolUse │    │    Stop     │         │\n│  │   Hook ✓    │    │   Hook ✓    │    │   Hook ✓    │         │\n│  └──────┬──────┘    └──────┬──────┘    └──────┬──────┘         │\n└─────────┼──────────────────┼──────────────────┼─────────────────┘\n          │                  │                  │\n          ▼                  ▼                  ▼\n┌─────────────────────────────────────────────────────────────────┐\n│                     HOMUNCULUS (Layer 1)                        │\n│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │\n│  │  Observer   │───▶│  Detector   │───▶│ Synthesizer │         │\n│  │             │    │ (16 rules)  │    │(5 templates)│         │\n│  └─────────────┘    └─────────────┘    └──────┬──────┘         │\n│                                               │                 │\n│                     ┌─────────────┐    ┌──────▼──────┐         │\n│                     │  Installer  │◀───│  Proposals  │         │\n│                     │  +Rollback  │    │   (Human    │         │\n│                     └──────┬──────┘    │   Review)   │         │\n│                            │           └─────────────┘         │\n│                            ▼                                    │\n│                     ┌─────────────┐                             │\n│                     │  Evolved    │                             │\n│                     │Capabilities │                             │\n│                     └─────────────┘                             │\n└─────────────────────────────────────────────────────────────────┘\n                            │\n                            ▼\n┌─────────────────────────────────────────────────────────────────┐\n│                   META-EVOLUTION (Layer 2)                      │\n│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐         │\n│  │    Meta     │───▶│    Meta     │───▶│    Meta     │         │\n│  │  Observer   │    │  Analyzer   │    │  Proposals  │         │\n│  └─────────────┘    └─────────────┘    └─────────────┘         │\n│         │                                      │                │\n│         └──────────────────────────────────────┘                │\n│              Improves detectors & templates                     │\n└─────────────────────────────────────────────────────────────────┘\n```\n"
      },
      "plugins": [
        {
          "name": "homunculus",
          "source": "./",
          "description": "Self-evolution system for Claude Code - automatic gap detection and capability synthesis with human-in-the-loop approval",
          "version": "1.2.0",
          "categories": [],
          "install_commands": [
            "/plugin marketplace add lunamoth7533/homunculus",
            "/plugin install homunculus@homunculus"
          ]
        }
      ]
    }
  ]
}