{
  "author": {
    "id": "Ryandonofrio3",
    "display_name": "Ryan D'Onofrio",
    "avatar_url": "https://avatars.githubusercontent.com/u/97113725?v=4"
  },
  "marketplaces": [
    {
      "name": "osgrep",
      "version": null,
      "description": "Semantic code search for Claude Code. Automatically indexes your project and provides intelligent search capabilities.",
      "repo_full_name": "Ryandonofrio3/osgrep",
      "repo_url": "https://github.com/Ryandonofrio3/osgrep",
      "repo_description": "Open Source Semantic Search for your AI Agent",
      "signals": {
        "stars": 1005,
        "forks": 66,
        "pushed_at": "2026-01-17T19:45:10Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"$schema\": \"https://anthropic.com/claude-code/marketplace.schema.json\",\n  \"name\": \"osgrep\",\n  \"owner\": {\n    \"name\": \"Ryan D'Onofrio\",\n    \"email\": \"ryandonofrio@gmail.com\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"osgrep\",\n      \"source\": \"./plugins/osgrep\",\n      \"description\": \"Semantic code search for Claude Code. Automatically indexes your project and provides intelligent search capabilities.\",\n      \"version\": \"0.2.0\",\n      \"author\": {\n        \"name\": \"Ryan D'Onofrio\",\n        \"email\": \"ryandonofrio@gmail.com\"\n      },\n      \"skills\": [\"./skills/osgrep\"]\n    }\n  ]\n}\n",
        "README.md": "<div align=\"center\">\n  <h1>osgrep</h1>\n  <p><em>Slash tokens. Save time. Semantic search for your coding agent.</em></p>\n\n  <a href=\"https://opensource.org/licenses/Apache-2.0\">\n    <img src=\"https://img.shields.io/badge/License-Apache%202.0-blue.svg\" alt=\"License: Apache 2.0\" />\n  </a>\n\n  <a href=\"https://deepwiki.com/Ryandonofrio3/osgrep\">\n    <img src=\"https://deepwiki.com/badge.svg\" alt=\"Ask DeepWiki\" />\n  </a>\n\n<a>\n  <img alt=\"CodeRabbit Pull Request Reviews\" src=\"https://img.shields.io/coderabbit/prs/github/ryandonofrio3/osgrep\">\n</a>\n</div>\n\n\n\nNatural-language search that works like `grep`. Fast, local, and built for coding agents.\n\n- **Semantic:** Finds concepts (\"where do transactions get created?\"), not just strings.\n- **Call Graph Tracing:** Map dependencies with `trace` to see who calls what.\n- **Role Detection:** Distinguishes `ORCHESTRATION` (high-level logic) from `DEFINITION` (types/classes).\n- **Local & Private:** 100% local embeddings via `onnxruntime-node`.\n- **Auto-Isolated:** Each repository gets its own index automatically.\n- **Agent-Ready:** Native output with symbols, roles, and call graphs.\n\n## Quick Start\n\n1. **Install**\n   ```bash\n   npm install -g osgrep\n   ```\n\n2.  **Setup (Recommended)**\n\n    ```bash\n    osgrep setup\n    ```\n\n    Downloads embedding models (~150MB) upfront. If you skip this, models download automatically on first use.\n\n3.  **Search**\n\n    ```bash\n    cd my-repo\n    osgrep \"where do we handle authentication?\"\n    ```\n\n    **Your first search will automatically index the repository.** Each repository is automatically isolated with its own index. Switching between repos \"just works\" — no manual configuration needed. If the background server is running (`osgrep serve`), search goes through the hot daemon; otherwise it falls back to on-demand indexing.\n\n4.  **Trace** (Call Graph)\n\n    ```bash\n    osgrep trace \"function_name\"\n    ```\nSee who calls a function (upstream dependencies) and what it calls (downstream dependencies). Perfect for impact analysis and understanding code flow.\n\nTo find the symbols in your code base:\n    ```bash\n    osgrep symbols\n    ```\n\nIn our public benchmarks, `osgrep` can save about 20% of your LLM tokens and deliver a 30% speedup.\n\n<div align=\"center\">\n  <img src=\"public/bench.png\" alt=\"osgrep benchmark\" width=\"100%\" style=\"border-radius: 8px; margin: 20px 0;\" />\n</div>\n\n\n\n### Claude Code Plugin\n\n1. Run `osgrep install-claude-code`\n2. Open Claude Code (`claude`) and ask it questions about your codebase.\n3. Highly recommend indexing your code base before using the plugin.\n4. The plugin's hooks auto-start `osgrep serve` in the background and shut it down on session end. Claude will use `osgrep` for semantic searches automatically but can be encouraged to do so.\n\n## Opencode Plugin\n1. Run `osgrep install-opencode`\n2. Open OC (`opencode`) and ask it questions about your codebase.\n3. Highly recommend indexing your code base before using the plugin.\n4. The plugin's hooks auto-start `osgrep serve` in the background and shut it down on session end. OC will use `osgrep` for semantic searches automatically but can be encouraged to do so.\n\n\n## Commands\n\n### `osgrep search`\n\nThe default command. Searches the current directory using semantic meaning.\n\n```bash\nosgrep \"how is the database connection pooled?\"\n```\n\n**Options:**\n\n| Flag | Description | Default |\n| --- | --- | --- |\n| `-m <n>` | Max total results to return. | `25` |\n| `--per-file <n>` | Max matches to show per file. | `1` |\n| `-c`, `--content` | Show full chunk content instead of snippets. | `false` |\n| `--scores` | Show relevance scores (0-1) for each result. | `false` |\n| `--min-score <n>` | Filter out results below this score threshold. | `0` |\n| `--compact` | Show file paths only (like `grep -l`). | `false` |\n| `-s`, `--sync` | Force re-index changed files before searching. | `false` |\n| `-r`, `--reset` | Reset the index and re-index from scratch. | `false` |\n**Examples:**\n\n```bash\n# General concept search\nosgrep \"API rate limiting logic\"\n\n# Deep dive (show more matches per file)\nosgrep \"error handling\" --per-file 5\n\n# Just give me the files\nosgrep \"user validation\" --compact\n\n# Show relevance scores and filter low-confidence matches\nosgrep \"authentication\" --scores --min-score 0.5\n```\n\n### `osgrep index`\n\nManually indexes the repository. Useful if you want to pre-warm the cache or if you've made massive changes outside of the editor.\n\n- Respects `.gitignore` and `.osgrepignore` (see [Configuration](#ignoring-files) section).\n- **Smart Indexing:** Only embeds code and config files. Skips binaries, lockfiles, and minified assets.\n- **Bounded Concurrency:** Uses a fixed thread pool to keep your system responsive.\n- **Semantic Chunking:** Uses TreeSitter grammars for supported languages (TypeScript, JavaScript, Python, Go, Rust, C/C++, Java, C#, Ruby, PHP, JSON, YAML, Kotlin, Swift, Dart).\n\n**Options:**\n\n| Flag | Description | Default |\n| --- | --- | --- |\n| `-d`, `--dry-run` | See what would be indexed without making changes. | `false` |\n| `-p`, `--path <dir>` | Path to index (defaults to current directory). | `.` |\n| `-r`, `--reset` | Remove existing index and re-index from scratch. | `false` |\n| `-v`, `--verbose` | Show detailed progress with file names. | `false` |\n| `--allow-fallback` | Also index files without TreeSitter grammar support. | `false` |\n\n**Examples:**\n\n```bash\nosgrep index                    # Index current dir\nosgrep index --dry-run          # See what would be indexed\nosgrep index --verbose          # Watch detailed progress (useful for debugging)\nosgrep index --allow-fallback   # Include files without grammar support\nosgrep index --reset            # Full re-index from scratch\n```\n\n### `osgrep serve`\n\nRuns a lightweight HTTP server with live file watching so searches stay hot in RAM.\n\n- Keeps LanceDB and the embedding worker resident for <50ms responses.\n- Watches the repo (via chokidar) and incrementally re-indexes on change.\n- Health endpoint: `GET /health`\n- Search endpoint: `POST /search` with `{ query, limit, path, rerank }`\n- Writes lock: `.osgrep/server.json` with `port`/`pid`\n\n**Options:**\n\n| Flag | Description |\n| --- | --- |\n| `-p, --port <port>` | Port to listen on (auto-increments if not specified) |\n| `-b, --background` | Run server in background and exit immediately |\n\n**Port Selection (priority order):**\n1. Explicit `-p <port>` flag\n2. `OSGREP_PORT` environment variable\n3. Auto-increment from registry (last used port + 1, or 4444 if no servers)\n\n**Usage:**\n\n```bash\nosgrep serve                    # Foreground, port 4444 (or next available)\nosgrep serve --background       # Background mode, auto port\nosgrep serve -b -p 5000         # Background on specific port\n```\n\n**Subcommands:**\n\n```bash\nosgrep serve status             # Show server status for current directory\nosgrep serve stop               # Stop server in current directory\nosgrep serve stop --all         # Stop all running osgrep servers\n```\n\n**Example workflow:**\n\n```bash\n# Start servers in multiple projects\ncd ~/project-a && osgrep serve -b    # Starts on port 4444\ncd ~/project-b && osgrep serve -b    # Starts on port 4445 (auto-increment)\n\n# Check status\nosgrep serve status\n\n# Stop all when done\nosgrep serve stop --all\n```\n\nClaude Code hooks start/stop this automatically; you rarely need to run it manually.\n\n### `osgrep list`\n\nLists all indexed repositories (stores) and their metadata.\n\n```bash\nosgrep list\n```\n\nShows store names, sizes, and last modified times. Useful for seeing what's indexed and cleaning up old stores.\n\n### `osgrep skeleton`\n\nGenerates a compressed \"skeleton\" of a file, showing only signatures, types, and class structures while eliding function bodies.\n\n```bash\nosgrep skeleton src/lib/auth.ts\n```\n\n**Output:**\n```typescript\nclass AuthService {\n  validate(token: string): boolean {\n    // → jwt.verify, checkScope, .. | C:5 | ORCH\n  }\n}\n```\n\n**Modes:**\n- `osgrep skeleton <file>`: Skeletonize specific file.\n- `osgrep skeleton <Symbol>`: Find symbol in index and skeletonize its file.\n- `osgrep skeleton \"query\"`: Search for query and skeletonize top matches.\n\n**Supported Languages:**\nTypeScript, JavaScript, Python, Go, Rust, Java, C#, C++, C, Ruby, PHP.\n\n\n### `osgrep doctor`\n\nChecks installation health, model paths, and database integrity.\n\n```bash\nosgrep doctor\n```\n\n## Performance & Architecture\n\nosgrep is designed to be a \"good citizen\" on your machine:\n\n1.  **Bounded Concurrency:** Chunking/embedding stay within small thread pools (1–4) and capped batch sizes to keep laptops responsive.\n2.  **Smart Chunking:** Uses `tree-sitter` to split code by function/class boundaries, ensuring embeddings capture complete logical blocks.\n3.  **Deduplication:** Identical code blocks (boilerplate, license headers) are embedded once and cached, saving space and time.\n4.  **Semantic Split Search:** Queries both \"Code\" and \"Docs\" separately to ensure documentation doesn't drown out implementation details, then reranks with ColBERT.\n5.  **Global Batching:** A producer/consumer pipeline decouples chunking from embedding. Files are chunked concurrently, queued, embedded in fat batches, and written to LanceDB in bulk.\n6.  **Anchor-Only Scans & Batch Deletes:** File discovery and stale cleanup hit only anchor rows, and stale/changed paths are removed with a single `IN` delete to minimize I/O.\n7.  **Structural Boosting:** Function/class chunks get a small score boost; test/spec paths are slightly downweighted to bubble up primary definitions first.\n8.  **Role Classification:** Detects `ORCHESTRATION` functions (high complexity, many calls) vs `DEFINITION` (types/classes) to help agents prioritize where to read.\n\n## Configuration\n\n### Automatic Repository Isolation\n\nosgrep automatically creates a unique index for each repository based on:\n\n1. **Git Remote URL** (e.g., `github.com/facebook/react` → `facebook-react`)\n2. **Git Repo without Remote** → directory name + hash (e.g., `utils-7f8a2b3c`)\n3. **Non-Git Directory** → directory name + hash for collision safety\n\n**Examples:**\n```bash\ncd ~/work/myproject        # Auto-detected: owner-myproject\nosgrep \"API handlers\"\n\ncd ~/personal/utils        # Auto-detected: utils-abc12345\nosgrep \"helper functions\"\n```\n\nStores are isolated automatically — no manual `--store` flags needed!\n\n### Ignoring Files\n\nosgrep respects both `.gitignore` and `.osgrepignore` files when indexing. Create a `.osgrepignore` file in your repository root to exclude additional files or patterns from indexing.\n\n**`.osgrepignore` syntax:**\n- Uses the same pattern syntax as `.gitignore`\n- Patterns are relative to the repository root\n- Supports glob patterns, negation (`!`), and directory patterns (`/`)\n\n\n### Manual Store Management\n\n- **View all stores:** `osgrep list`\n- **Override auto-detection:** `osgrep --store custom-name \"query\"`\n- **Clean up old stores:** `rm -rf ~/.osgrep/data/store-name`\n- **Data location:** `~/.osgrep/data`\n\n## Development\n\n```bash\npnpm install\npnpm build        # or pnpm dev\npnpm format       # biome check\n```\n\n## Troubleshooting\n\n- **Index feels stale?** Run `osgrep index` to refresh.\n- **Weird results?** Run `osgrep doctor` to verify models.\n- **Index getting stuck?** Run `osgrep index --verbose` to see which file is being processed.\n- **Want faster indexing?** Keep fallback disabled (default) to skip files without TreeSitter support.\n- **Need a fresh start?** Delete `~/.osgrep/data` and `~/.osgrep/meta.json` and run `osgrep index`.\n\n## Attribution\n\nosgrep is built upon the foundation of [mgrep](https://github.com/mixedbread-ai/mgrep) by MixedBread. We acknowledge and appreciate the original architectural concepts and design decisions that informed this work.\n\n\nSee the [NOTICE](NOTICE) file for detailed attribution information.\n\n## License\n\nLicensed under the Apache License, Version 2.0.\nSee [LICENSE](LICENSE) and [Apache-2.0](https://opensource.org/licenses/Apache-2.0) for details.\n\n"
      },
      "plugins": [
        {
          "name": "osgrep",
          "source": "./plugins/osgrep",
          "description": "Semantic code search for Claude Code. Automatically indexes your project and provides intelligent search capabilities.",
          "version": "0.2.0",
          "author": {
            "name": "Ryan D'Onofrio",
            "email": "ryandonofrio@gmail.com"
          },
          "skills": [
            "./skills/osgrep"
          ],
          "categories": [],
          "install_commands": [
            "/plugin marketplace add Ryandonofrio3/osgrep",
            "/plugin install osgrep@osgrep"
          ]
        }
      ]
    }
  ]
}