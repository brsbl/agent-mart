{
  "author": {
    "id": "cpoepke",
    "display_name": "Conrad Pöpke",
    "avatar_url": "https://avatars.githubusercontent.com/u/2373209?u=d0b7020a6477ec37f105267a3460bd351fc81633&v=4"
  },
  "marketplaces": [
    {
      "name": "claude-talk",
      "version": null,
      "description": "Voice conversation plugins for Claude Code",
      "repo_full_name": "cpoepke/claude-talk",
      "repo_url": "https://github.com/cpoepke/claude-talk",
      "repo_description": "Talk to claude in real time experiment",
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-02-19T19:49:43Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"claude-talk\",\n  \"owner\": {\n    \"name\": \"Conrad Poepke\"\n  },\n  \"metadata\": {\n    \"description\": \"Voice conversation plugins for Claude Code\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"claude-talk\",\n      \"source\": \"./\",\n      \"description\": \"Voice conversation with Claude Code. Speak into your mic, get spoken responses. Real-time transcription via WhisperLiveKit (MLX Metal GPU) + macOS TTS. Apple Silicon Mac only.\",\n      \"version\": \"0.3.0\",\n      \"author\": {\n        \"name\": \"Conrad Poepke\"\n      },\n      \"license\": \"MIT\",\n      \"strict\": false\n    }\n  ]\n}\n",
        "README.md": "# claude-talk\n\nTalk to Claude Code with your voice. Real-time speech-to-text, conversational AI, and spoken responses - all running locally on your Mac.\n\n> **macOS (Apple Silicon) only** - Requires M1/M2/M3/M4 for MLX-accelerated transcription.\n\n## Why claude-talk?\n\n- **Hands-free coding** — Talk through problems, review code, and give instructions without touching the keyboard\n- **Fully local audio** — Transcription runs on-device via Apple's Metal GPU. No audio leaves your machine, ever\n- **Real-time streaming** — WhisperLiveKit transcribes as you speak, not after. No awkward pauses waiting for processing\n- **Barge-in** — Interrupt Claude mid-sentence by speaking. No waiting for long responses to finish\n- **Personalized voice assistant** — Choose a name, voice, personality style, and verbosity level. It remembers who you are\n- **Zero-config start** — One install command, then `/claude-talk:start`. That's it\n- **Full Claude Code power** — Your voice assistant has the same capabilities as typed Claude Code: file editing, terminal commands, web search, everything\n\n## How it works\n\n```text\nYou speak                                              Claude responds\n    |                                                       |\n    v                                                       v\n   Mic                                                  Speaker\n    |                                                       ^\n    v                                                       |\n sounddevice (gain boost)                            macOS say (TTS)\n    |                                                       ^\n    v                                                       |\n WhisperLiveKit -----> transcribed text ----> Claude Code ---+\n (MLX Metal GPU)       (real-time)           (thinks & replies)\n```\n\nEverything runs locally except the Claude API call (via your Claude Code subscription). No audio leaves your machine - transcription happens on-device using Apple's Metal GPU.\n\n![claude-talk screenshot](./claude-talk.jpeg)\n\n## Quick start\n\n### Install the plugin\n\n```bash\n# Option A: skills.sh\nnpx skills add cpoepke/claude-talk\n\n# Option B: Claude Code plugin manager\n/plugin install cpoepke/claude-talk\n\n# Option C: Clone manually\ngit clone https://github.com/cpoepke/claude-talk.git\ncd claude-talk\n```\n\n### Set up\n\nOpen Claude Code in the plugin directory (or any project if installed via Option A/B) and run:\n\n```text\n/claude-talk:install\n```\n\nThis will:\n\n1. Install Python dependencies (WhisperLiveKit, MLX Whisper, sounddevice)\n2. Walk you through a **spoken onboarding** - you'll hear each voice, pick a name, choose a personality style, and fine-tune how your assistant behaves\n\n### Start talking\n\n```text\n/claude-talk:start\n```\n\nSpeak into your mic. Claude will listen, think, and respond out loud. Say \"stop\" or run `/claude-talk:stop` to end the session.\n\n## Onboarding\n\nThe install command includes a personality setup where you choose:\n\n| Step | What you pick | How it's presented |\n| ---- | ------------- | ----------------- |\n| **Voice** | Daniel, Karen, Moira, or Samantha | Each voice speaks a unique sentence so you hear the difference |\n| **Name** | Claude, Jarvis, Friday, Nova, or custom | Each name is spoken in your chosen voice |\n| **Style** | Casual, Professional, Witty, or Calm | Sample sentences in each style, spoken in your voice |\n| **Your name** | First name, \"Boss\", or nothing | How the assistant addresses you |\n| **Verbosity** | Short, Balanced, or Thorough | Controls response length |\n| **Custom** | Free text | Any extra personality tweaks (\"be sarcastic\", \"talk like a pirate\") |\n\nYour personality is saved to `~/.claude-talk/personality.md` and loaded every time you start a voice chat. Re-run `/claude-talk:install` to change it anytime.\n\n### Multiple Personalities\n\nYou can save and switch between multiple personalities:\n\n```text\n/claude-talk:personality              # List all personalities\n/claude-talk:personality create       # Create a new one (interactive)\n/claude-talk:personality switch pirate-claude  # Switch active personality\n/claude-talk:personality edit         # Edit the active personality\n/claude-talk:personality delete old   # Delete a saved personality\n```\n\nPersonalities are stored in `~/.claude-talk/personalities/`. Each includes voice, name, style, verbosity, and custom instructions. Switching automatically updates the active voice.\n\n### Default Personalities\n\nInstallation includes 9 pre-made personalities you can try immediately:\n\n| Personality | Character | Voice | Style |\n|-------------|-----------|-------|-------|\n| **bonnie** | Scottish pirate harbour girl, whale hunter's daughter | Fiona (Enhanced) | Witty & playful |\n| **claude** | British gentleman with Bond-like wit and radical candor | Daniel (Enhanced) | Witty & playful |\n| **crystal** | New Age wellness influencer with mystical energy | Zoe (Premium) | Calm & thoughtful |\n| **hank** | American trucker/mechanic with blue-collar wisdom | Evan (Enhanced) | Witty & playful |\n| **maeve** | Irish mystical pub storyteller who believes in folklore | Moira (Enhanced) | Calm & thoughtful |\n| **sheila** | Australian outback adventurer with Steve Irwin energy | Karen (Premium) | Witty & playful |\n| **tash** | Bondi beach surfer girl with laid-back vibes | Karen (Premium) | Casual & warm |\n| **vex** | Stranded alien AI calculating path home | Zarvox | Calm & thoughtful |\n| **vikram** | Former soldier turned corporate professional | Rishi (Enhanced) | Professional & concise |\n\nSwitch with `/claude-talk:personality switch <name>`. Create your own with `/claude-talk:personality create`.\n\n## Commands\n\n| Command | Description |\n| ------- | ----------- |\n| `/claude-talk:install` | Install dependencies + personality setup |\n| `/claude-talk:start` | Start continuous voice chat |\n| `/claude-talk:stop` | Stop voice chat |\n| `/claude-talk:chat` | Quick single voice exchange (no persistent session) |\n| `/claude-talk:config` | View/edit settings |\n| `/claude-talk:personality` | Manage personalities (list, create, switch, edit, delete, export, import) |\n| `/claude-talk:help` | Show help |\n\n## Requirements\n\n- **macOS** with **Apple Silicon** (M1/M2/M3/M4)\n- **Python 3.12** (`brew install python@3.12`)\n- **Working microphone**\n- **Claude Code** with active subscription\n\nOptional:\n\n- `ffmpeg` - for listing audio devices\n- `sox` - for audio analysis/debugging\n\n## Configuration\n\nSettings live in `~/.claude-talk/config.env`:\n\n| Setting | Default | Description |\n| ------- | ------- | ----------- |\n| `AUDIO_DEVICE` | `1` | Microphone device index |\n| `MIC_GAIN` | `8.0` | Gain multiplier (built-in mic needs ~8.0, USB ~1.0) |\n| `VOICE` | `Daniel` | macOS TTS voice (use `say -v '?'` to list all; Enhanced variants sound best) |\n| `CAPTURE_MODE` | `wlk` | `wlk` (streaming) or `vad` (legacy batch) |\n| `SILENCE_SECS` | `2.0` | Seconds of silence to end an utterance |\n| `WLK_PORT` | `8090` | WhisperLiveKit server port |\n\nFind your mic device index:\n\n```bash\npython3 -c \"import sounddevice; print(sounddevice.query_devices())\"\n```\n\n## Barge-in (interrupt Claude mid-speech)\n\nBarge-in lets you interrupt Claude mid-sentence by speaking. Claude stops talking immediately and listens to what you say instead. Without it, you have to wait for Claude to finish before you can respond.\n\nThis requires **BlackHole 2ch** as a virtual audio loopback. Barge-in is enabled by default and silently disables if BlackHole isn't installed.\n\n### Setup\n\n1. Install BlackHole:\n\n   ```bash\n   brew install blackhole-2ch\n   ```\n\n2. Open **Audio MIDI Setup**, click **+**, select **Create Multi-Output Device**\n\n3. Check both **BlackHole 2ch** and your speakers (speakers should be listed first)\n\n4. Set your system output to the new Multi-Output Device in **System Settings > Sound > Output**\n\n### Barge-in configuration\n\n| Setting | Default | Description |\n| ------- | ------- | ----------- |\n| `BARGE_IN` | `true` | Set to `false` to force-disable |\n| `BLACKHOLE_DEVICE` | (auto) | Explicit device index for BlackHole |\n| `BARGE_IN_RATIO` | `0.4` | Mic/reference ratio threshold. Lower = more sensitive |\n\nSee the [full interrupt guide](docs/interrupt/setup.md) for how the Geigel detection algorithm works, tuning advice, and troubleshooting.\n\n## Reliability\n\nclaude-talk includes resilience mechanisms to handle WhisperLiveKit instability during long conversations:\n\n- **Exception handling** — WebSocket send failures are caught gracefully instead of crashing\n- **Fast failure detection** — Unresponsive WLK is detected in 3 seconds (not 10), minimizing speech loss\n- **Connection retry** — Failed connections retry up to 3 times with exponential backoff\n- **Rate limiting** — Frame bursts are paced to prevent buffer overflow during long TTS responses\n\nThese improvements prevent cascade failures when WLK becomes unresponsive, particularly during verbose assistant responses.\n\n## Architecture\n\nVoice chat uses **tmux-based routing** for multi-personality support. The audio server captures speech and routes transcriptions back to specific Claude sessions via `tmux send-keys`. Each response explicitly calls `claude-talk server speak` for TTS. This enables multiple personalities to run simultaneously in different tmux panes.\n\nFor details on the capture pipeline, routing architecture, echo prevention, and microphone gain, see [docs/architecture.md](docs/architecture.md).\n\n## File structure\n\n```text\nclaude-talk/\n├── .claude-plugin/\n│   └── marketplace.json          # Plugin manifest (single source of truth)\n├── skills/\n│   ├── install/SKILL.md          # Install + onboarding\n│   ├── start/SKILL.md            # Start voice chat (tmux routing)\n│   ├── stop/SKILL.md             # Stop voice chat\n│   ├── chat/SKILL.md             # Quick single exchange\n│   ├── config/SKILL.md           # View/edit config\n│   ├── personality/SKILL.md      # Personality management\n│   └── help/SKILL.md             # Show help\n├── src/\n│   ├── audio-server.py           # Audio server (TTS, capture, interrupt, WLK)\n│   └── claude_talk/              # Python CLI package\n│       ├── cli.py                # claude-talk CLI commands\n│       ├── session.py            # Session management (SQLite)\n│       ├── tmux.py               # Tmux routing\n│       ├── teammates.py          # Multi-personality spawning\n│       └── ...\n├── scripts/\n│   ├── install.sh                # Dependency installer\n│   └── statusline.sh             # Claude Code statusline setup\n├── personalities/                # Default personality templates\n├── config/\n│   └── defaults.env              # Default configuration\n├── CLAUDE.md                     # Plugin context for Claude\n├── LICENSE                       # MIT\n└── README.md\n```\n\n## Troubleshooting\n\n**No speech detected**\n- Check your `AUDIO_DEVICE` index - it changes when virtual audio devices (Zoom, Teams) are active\n- Increase `MIC_GAIN` if using a built-in microphone\n\n**Whisper outputs `[Music]` or hallucinations**\n- `MIC_GAIN` is too high - lower it\n- Or lower `VAD_THRESHOLD` to capture quieter speech\n\n**Echo / hearing own response back**\n- The audio server handles echo prevention by sequencing TTS and capture. If it persists, increase `SILENCE_SECS`\n\n**WhisperLiveKit won't start**\n- Check if port 8090 is in use: `lsof -i :8090`\n- Kill existing process: `pkill -f \"wlk.*--port\"`\n\n**Python 3.12 not found**\n- `brew install python@3.12`\n- WhisperLiveKit requires 3.12 specifically (not 3.13)\n\n## Privacy\n\nAll audio processing happens locally on your Mac:\n- **Transcription**: WhisperLiveKit runs Whisper via MLX on your Metal GPU - no cloud API\n- **TTS**: macOS built-in `say` command - fully offline\n- **Only exception**: The transcribed text is sent to Claude's API for the conversational response (same as typing in Claude Code)\n\nNo audio recordings are stored. Temporary WAV files are created in `/tmp/` during capture and immediately deleted after transcription.\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "claude-talk",
          "source": "./",
          "description": "Voice conversation with Claude Code. Speak into your mic, get spoken responses. Real-time transcription via WhisperLiveKit (MLX Metal GPU) + macOS TTS. Apple Silicon Mac only.",
          "version": "0.3.0",
          "author": {
            "name": "Conrad Poepke"
          },
          "license": "MIT",
          "strict": false,
          "categories": [],
          "install_commands": [
            "/plugin marketplace add cpoepke/claude-talk",
            "/plugin install claude-talk@claude-talk"
          ]
        }
      ]
    }
  ]
}