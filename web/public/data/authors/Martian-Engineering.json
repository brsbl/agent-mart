{
  "author": {
    "id": "Martian-Engineering",
    "display_name": "martian engineering",
    "avatar_url": "https://avatars.githubusercontent.com/u/181138551?v=4"
  },
  "marketplaces": [
    {
      "name": "martian-engineering",
      "version": null,
      "description": "Claude Code plugins by Martian Engineering",
      "repo_full_name": "Martian-Engineering/claude-team",
      "repo_url": "https://github.com/Martian-Engineering/claude-team",
      "repo_description": "MCP server for orchestrating multiple Claude Code sessions via iTerm2",
      "signals": {
        "stars": 9,
        "forks": 3,
        "pushed_at": "2026-02-01T00:02:49Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"martian-engineering\",\n  \"owner\": {\n    \"name\": \"Martian Engineering\",\n    \"email\": \"josh@martianengineering.com\"\n  },\n  \"metadata\": {\n    \"description\": \"Claude Code plugins by Martian Engineering\",\n    \"version\": \"1.0.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"claude-team\",\n      \"source\": {\n        \"source\": \"github\",\n        \"repo\": \"Martian-Engineering/claude-team\"\n      },\n      \"description\": \"MCP server for spawning and orchestrating multiple Claude Code sessions via iTerm2\",\n      \"version\": \"0.1.0\",\n      \"author\": {\n        \"name\": \"Josh Lehman\"\n      },\n      \"homepage\": \"https://github.com/Martian-Engineering/claude-team\",\n      \"repository\": \"https://github.com/Martian-Engineering/claude-team\",\n      \"license\": \"MIT\",\n      \"keywords\": [\"mcp\", \"iterm2\", \"orchestration\", \"multi-agent\"],\n      \"category\": \"productivity\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"claude-team\",\n  \"version\": \"0.1.0\",\n  \"description\": \"MCP server for spawning and orchestrating multiple Claude Code sessions via iTerm2\",\n  \"author\": {\n    \"name\": \"Josh Lehman\",\n    \"email\": \"josh@martianengineering.com\",\n    \"url\": \"https://github.com/Martian-Engineering\"\n  },\n  \"homepage\": \"https://github.com/Martian-Engineering/claude-team\",\n  \"repository\": \"https://github.com/Martian-Engineering/claude-team\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"mcp\", \"iterm2\", \"orchestration\", \"multi-agent\"],\n  \"commands\": \"./commands/\",\n  \"mcpServers\": \"./.mcp.json\"\n}\n",
        "README.md": "# Claude Team MCP Server\n\nAn MCP server that allows one Claude Code session to spawn and manage a team of other Claude Code sessions via iTerm2.\n\n## Introduction\n\n`claude-team` is an MCP server and a set of slash commands for allowing Claude Code to orchestrate a \"team\" of other Claude Code sessions. It uses the iTerm2 API to spawn new terminal sessions and run Claude Code within them.\n\n### Why?\n\n- **Parallelism:** Many development tasks can be logically parallelized, but managing that parallelism is difficult for humans with limited attention spans. Claude, meanwhile, is very effective at it.\n- **Context management:** Offloading implementation to a worker gives the implementing agent a fresh context window (smarter), and keeps the manager's context free of implementation details.\n- **Background work:** Sometimes you want to have Claude Code go research something or answer a question without blocking the main thread of work.\n- **Visibility:** `claude-team` spawns real Claude Code sessions. You can watch them, interrupt and take control, or close them out.\n\nBut, *why not just use Claude Code sub-agents*, you ask? They're opaque -- they go off and do things and you, the user, cannot effectively monitor their work, interject, or continue a conversation with them. Using a full Claude Code session obviates this problem.\n\n### Git Worktrees: Isolated Branches per Worker\n\nA key feature of `claude-team` is **git worktree support**. When spawning workers with `use_worktrees: true`, each worker gets:\n\n- **Its own working directory** - A dedicated git worktree at `~/.claude-team/worktrees/{repo-hash}/{worker-name}/`\n- **Its own branch** - Automatically created branch named `{WorkerName}-{hash}` (e.g., `Groucho-a1b2c3`)\n- **Shared repository history** - All worktrees share the same `.git` database, so commits are immediately visible across workers\n\nThis means workers can make commits, run tests, and modify files without conflicting with each other or the main working directory. When work is complete, branches can be merged or submitted as PRs.\n\n## Features\n\n- **Spawn Workers**: Create new Claude Code sessions in iTerm2 with multi-pane layouts\n- **Git Worktrees**: Isolate each worker in its own branch and working directory\n- **Send Messages**: Inject prompts into managed workers (single or broadcast)\n- **Read Logs**: Retrieve conversation history from worker JSONL files\n- **Monitor Status**: Check if workers are idle, processing, or waiting for input\n- **Idle Detection**: Wait for workers to complete using stop-hook markers\n- **Visual Identity**: Each worker gets a unique tab color and themed name (Marx Brothers, Beatles, etc.)\n- **Session Recovery**: Discover and adopt orphaned Claude Code sessions\n\n## Requirements\n\n- macOS with iTerm2 installed\n- iTerm2 Python API enabled (Preferences → General → Magic → Enable Python API)\n- Python 3.11+\n- uv package manager\n\n## Installation\n\n### As Claude Code Plugin (recommended)\n\n```bash\n# Add the Martian Engineering marketplace\n/plugin marketplace add Martian-Engineering/claude-team\n\n# Install the plugin\n/plugin install claude-team@martian-engineering\n```\n\nThis automatically configures the MCP server - no manual setup needed.\n\n### From PyPI\n\nOnce published, install via:\n\n```bash\nuvx --from claude-team-mcp@latest claude-team\n```\n\n### From Source\n\n```bash\n# Clone the repository\ngit clone https://github.com/Martian-Engineering/claude-team.git\ncd claude-team\n\n# Install with uv\nuv sync\n```\n\n## Configuration for Claude Code\n\nAdd to your Claude Code MCP settings. You can configure this at:\n- **Global**: `~/.claude/settings.json`\n- **Project**: `.claude/settings.json` in your project directory\n\n### Using PyPI package\n\n```json\n{\n  \"mcpServers\": {\n    \"claude-team\": {\n      \"command\": \"uvx\",\n      \"args\": [\"--from\", \"claude-team-mcp@latest\", \"claude-team\"]\n    }\n  }\n}\n```\n\n### Using local clone\n\n```json\n{\n  \"mcpServers\": {\n    \"claude-team\": {\n      \"command\": \"uv\",\n      \"args\": [\"run\", \"--directory\", \"/path/to/claude-team\", \"python\", \"-m\", \"claude_team_mcp\"]\n    }\n  }\n}\n```\n\nAfter adding the configuration, restart Claude Code for it to take effect.\n\n## Environment Variables\n\n| Variable | Default | Description |\n|----------|---------|-------------|\n| `CLAUDE_TEAM_COMMAND` | `claude` | Override the command used to start Claude Code in worker sessions. Useful for running alternative CLI implementations like `happy`. |\n| `CLAUDE_TEAM_CODEX_COMMAND` | `codex` | Override the command used to start Codex in worker sessions. Useful for running wrapped Codex (e.g., `happy codex`). |\n| `CLAUDE_TEAM_PROJECT_DIR` | (none) | When set, allows using `\"project_path\": \"auto\"` in worker configs to automatically use this path. |\n\nExample using an alternative CLI:\n\n```bash\n# For Claude Code workers\nexport CLAUDE_TEAM_COMMAND=happy\n\n# For Codex workers\nexport CLAUDE_TEAM_CODEX_COMMAND=\"happy codex\"\n```\n\n## MCP Tools\n\n### Worker Management\n\n| Tool | Description |\n|------|-------------|\n| `spawn_workers` | Create workers in a new window with multi-pane layout (single, vertical, horizontal, quad, triple_vertical) |\n| `list_workers` | List all managed workers with status |\n| `examine_worker` | Get detailed worker status including conversation stats and last response preview |\n| `close_workers` | Gracefully terminate one or more workers |\n| `discover_workers` | Find existing Claude Code sessions running in iTerm2 |\n| `adopt_worker` | Import a discovered iTerm2 session into the managed registry |\n\n### Communication\n\n| Tool | Description |\n|------|-------------|\n| `message_workers` | Send a message to one or more workers (supports wait modes: none, any, all) |\n| `read_worker_logs` | Get paginated conversation history from a worker's JSONL file |\n| `annotate_worker` | Add a coordinator note to a worker (visible in list_workers output) |\n\n### Idle Detection\n\n| Tool | Description |\n|------|-------------|\n| `check_idle_workers` | Quick non-blocking check if workers are idle |\n| `wait_idle_workers` | Block until workers are idle (supports \"any\" or \"all\" modes) |\n\n### Utilities\n\n| Tool | Description |\n|------|-------------|\n| `list_worktrees` | List git worktrees created by claude-team for a repository |\n| `bd_help` | Beads quick reference (use `pb help` for Pebbles projects) |\n\n### Worker Identification\n\nWorkers can be referenced by any of three identifiers:\n- **Internal ID**: Short hex string (e.g., `3962c5c4`)\n- **Terminal ID**: Prefixed iTerm UUID (e.g., `iterm:6D2074A3-2D5B-4823-B257-18721A7F5A04`)\n- **Worker name**: Human-friendly name (e.g., `Groucho`, `Aragorn`)\n\nAll tools accept any of these formats.\n\n### Tool Details\n\n#### spawn_workers\n\n```\nArguments:\n  projects: dict[str, str]     - Map of pane names to project paths\n  layout: str                  - \"auto\", \"single\", \"vertical\", \"horizontal\", \"quad\", or \"triple_vertical\"\n  skip_permissions: bool       - If True, start Claude with --dangerously-skip-permissions\n  custom_names: list[str]      - Override automatic themed name selection\n  custom_prompt: str           - Custom prompt instead of standard worker pre-prompt\n  use_worktrees: bool          - Create isolated git worktree for each worker\n\nReturns:\n  sessions, layout, count, name_set, mode, use_worktrees, coordinator_guidance\n```\n\nLayout pane names:\n- `single`: `[\"main\"]`\n- `vertical`: `[\"left\", \"right\"]`\n- `horizontal`: `[\"top\", \"bottom\"]`\n- `quad`: `[\"top_left\", \"top_right\", \"bottom_left\", \"bottom_right\"]`\n- `triple_vertical`: `[\"left\", \"middle\", \"right\"]`\n\n#### message_workers\n\n```\nArguments:\n  session_ids: list[str]   - Worker IDs to message (accepts ID, terminal ID, or name)\n  message: str             - The prompt to send\n  wait_mode: str           - \"none\" (default), \"any\", or \"all\"\n  timeout: float           - Max seconds to wait (default: 600)\n\nReturns:\n  success, session_ids, results, [idle_session_ids, all_idle, timed_out]\n```\n\n#### wait_idle_workers\n\n```\nArguments:\n  session_ids: list[str]   - Worker IDs to wait on\n  mode: str                - \"all\" (default) or \"any\"\n  timeout: float           - Max seconds to wait (default: 600)\n  poll_interval: float     - Seconds between checks (default: 2)\n\nReturns:\n  session_ids, idle_session_ids, all_idle, waiting_on, mode, waited_seconds, timed_out\n```\n\n## Slash Commands\n\nThe following slash commands are available for common workflows. Install them with:\n\n```bash\nmake install-commands\n```\n\n| Command | Description |\n|---------|-------------|\n| `/spawn-workers` | Analyze tasks, create worktrees, and spawn workers with appropriate prompts |\n| `/check-workers` | Generate a status report for all active workers |\n| `/merge-worker` | Directly merge a worker's branch back to parent (for internal changes) |\n| `/pr-worker` | Create a pull request from a worker's branch |\n| `/team-summary` | Generate end-of-session summary of all worker activity |\n\n## Issue Tracker Support\n\n`claude-team` supports both Pebbles (`pb`) and Beads (`bd --no-db`).\nThe tracker is auto-detected by marker directories in the project root:\n\n- `.pebbles` → Pebbles\n- `.beads` → Beads\n\nIf both markers exist, Pebbles is selected by default. Worker prompts and\ncoordination guidance use the detected tracker commands. For quick references:\n\n- Pebbles: `pb help`\n- Beads: `bd_help` tool\n| `/cleanup-worktrees` | Remove worktrees for merged branches |\n\n## Usage Patterns\n\n### Basic: Spawn and Message\n\nFrom your Claude Code session, spawn workers and send them tasks:\n\n```\n\"Spawn two workers for frontend and backend work\"\n→ Uses spawn_workers with projects={\"left\": \"/path/to/frontend\", \"right\": \"/path/to/backend\"}\n→ Returns workers named e.g. \"Simon\" and \"Garfunkel\"\n\n\"Send Simon the message: Review the React components\"\n→ Uses message_workers with session_ids=[\"Simon\"]\n\n\"Check on Garfunkel's progress\"\n→ Uses examine_worker with session_id=\"Garfunkel\"\n```\n\n### Parallel Work with Worktrees\n\nSpawn workers in isolated branches for parallel development:\n\n```\n\"Spawn three workers with worktrees to work on different features\"\n→ Uses spawn_workers with use_worktrees=true\n→ Creates worktrees at ~/.claude-team/worktrees/{repo}/\n→ Each worker gets their own branch (e.g., \"Larry-a1b2c3\", \"Curly-d4e5f6\", \"Moe-g7h8i9\")\n\n\"Message all workers with their tasks, then wait for completion\"\n→ Uses message_workers with wait_mode=\"all\"\n\n\"Create PRs for each worker's branch\"\n→ Uses /pr-worker for each completed worker\n```\n\n### Coordinated Workflow\n\nUse the manager to coordinate between workers:\n\n```\n\"Spawn a backend worker to create a new API endpoint\"\n→ Wait for completion with wait_idle_workers\n\n\"Now spawn a frontend worker and tell it about the new endpoint\"\n→ Pass context from read_worker_logs of the backend worker\n\n\"Spawn a test worker to write integration tests\"\n→ Coordinate based on both previous workers' output\n```\n\n## Architecture\n\n```\n┌──────────────────────────────────────────────────────────────────┐\n│                Manager Claude Code Session                        │\n│                (has claude-team MCP server)                       │\n├──────────────────────────────────────────────────────────────────┤\n│                         MCP Tools                                 │\n│  spawn_workers │ message_workers │ wait_idle_workers │ etc.      │\n└───────────────────────────┬──────────────────────────────────────┘\n                            │\n               ┌────────────┼────────────┐\n               ▼            ▼            ▼\n         ┌──────────┐ ┌──────────┐ ┌──────────┐\n         │ Groucho  │ │ Harpo    │ │ Chico    │\n         │ (iTerm2) │ │ (iTerm2) │ │ (iTerm2) │\n         │          │ │          │ │          │\n         │  Claude  │ │  Claude  │ │  Claude  │\n         │   Code   │ │   Code   │ │   Code   │\n         │          │ │          │ │          │\n         │ worktree │ │ worktree │ │ worktree │\n         │ branch:  │ │ branch:  │ │ branch:  │\n         │ Groucho- │ │ Harpo-   │ │ Chico-   │\n         │ a1b2c3   │ │ d4e5f6   │ │ g7h8i9   │\n         └──────────┘ └──────────┘ └──────────┘\n```\n\nThe manager maintains:\n- **Session Registry**: Maps worker IDs/names to iTerm2 sessions\n- **iTerm2 Connection**: Persistent connection for terminal control\n- **JSONL Monitoring**: Reads Claude's session files for conversation state and idle detection\n- **Worktree Tracking**: Manages git worktrees for isolated worker branches\n\n## Development\n\n```bash\n# Sync dependencies\nuv sync\n\n# Run tests\nuv run pytest\n\n# Run the server directly (for debugging)\nuv run python -m claude_team_mcp\n\n# Install slash commands\nmake install-commands\n```\n\n## Troubleshooting\n\n### \"Could not connect to iTerm2\"\n- Make sure iTerm2 is running\n- Enable: iTerm2 → Preferences → General → Magic → Enable Python API\n\n### \"Session not found\"\n- The worker may have been closed externally\n- Use `list_workers` to see active workers\n- Workers can be referenced by ID, terminal ID, or name\n\n### \"No JSONL session file found\"\n- Claude Code may still be starting up\n- Wait a few seconds and try again\n- Check that Claude Code is actually running in the worker pane\n\n### Worktree issues\n- Use `list_worktrees` to see worktrees for a repository\n- Orphaned worktrees can be cleaned up with `list_worktrees` + `remove_orphans=true`\n- Worktrees are stored at `~/.claude-team/worktrees/{repo-hash}/`\n\n## License\n\nMIT\n\n## Upgrading to New Versions\n\nAfter a new version is published to PyPI, you may need to force-refresh the cached version:\n\n```bash\n# Stop service first\nlaunchctl bootout gui/$UID/com.claude-team\n\n# Clear cache and reinstall\nuv cache clean --force\nuv tool install --force --refresh claude-team-mcp\n\n# Restart service\nlaunchctl bootstrap gui/$UID ~/Library/LaunchAgents/com.claude-team.plist\n```\n\nThis is necessary because `uvx` aggressively caches tool environments.\n"
      },
      "plugins": [
        {
          "name": "claude-team",
          "source": {
            "source": "github",
            "repo": "Martian-Engineering/claude-team"
          },
          "description": "MCP server for spawning and orchestrating multiple Claude Code sessions via iTerm2",
          "version": "0.1.0",
          "author": {
            "name": "Josh Lehman"
          },
          "homepage": "https://github.com/Martian-Engineering/claude-team",
          "repository": "https://github.com/Martian-Engineering/claude-team",
          "license": "MIT",
          "keywords": [
            "mcp",
            "iterm2",
            "orchestration",
            "multi-agent"
          ],
          "category": "productivity",
          "categories": [
            "iterm2",
            "mcp",
            "multi-agent",
            "orchestration",
            "productivity"
          ],
          "install_commands": [
            "/plugin marketplace add Martian-Engineering/claude-team",
            "/plugin install claude-team@martian-engineering"
          ]
        }
      ]
    }
  ]
}