{
  "author": {
    "id": "open-horizon-labs",
    "display_name": "Open Horizon Labs",
    "avatar_url": "https://avatars.githubusercontent.com/u/151782585?v=4"
  },
  "marketplaces": [
    {
      "name": "superego",
      "version": null,
      "description": "Superego plugin marketplace",
      "repo_full_name": "open-horizon-labs/superego",
      "repo_url": "https://github.com/open-horizon-labs/superego",
      "repo_description": null,
      "signals": {
        "stars": 12,
        "forks": 0,
        "pushed_at": "2026-01-24T14:16:46Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"superego\",\n  \"owner\": {\n    \"name\": \"Cloud Atlas AI\",\n    \"email\": \"hello@cloudatlas.ai\"\n  },\n  \"metadata\": {\n    \"description\": \"Superego plugin marketplace\",\n    \"version\": \"1.0.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"superego\",\n      \"source\": \"./plugin\",\n      \"description\": \"Metacognitive advisor that monitors Claude Code and provides feedback\",\n      \"version\": \"0.9.7\",\n      \"author\": {\n        \"name\": \"Cloud Atlas AI\"\n      }\n    }\n  ]\n}\n",
        "README.md": "# Superego\n\nA metacognitive advisor for AI coding assistants. Monitors conversations, evaluates the assistant's approach, and provides feedback before finishing.\n\n**Supported platforms:**\n- **Claude Code** - Full support via plugin\n- **OpenAI Codex CLI** - Alpha support via skill (see [codex-skill/](codex-skill/))\n- **OpenCode** - Alpha support via TypeScript plugin (see [opencode-plugin/](opencode-plugin/))\n\n## What It Does\n\nWhen you use Claude Code (or OpenCode) with superego enabled:\n\n1. **Session starts** - Claude is told superego is active and to take feedback seriously\n2. **Claude works** - You interact normally with Claude\n3. **Before large edits** - Superego evaluates proposed changes in context (Edit/Write over 20 lines)\n4. **Before Claude finishes** - Superego evaluates the full conversation\n5. **If concerns found** - Claude is blocked and shown the feedback\n6. **Claude continues** - Incorporates feedback, may ask you clarifying questions\n7. **Clean exit** - Once addressed (or no concerns), Claude finishes normally\n\nThis creates feedback loops where Claude can course-correct both during work and before presenting results.\n\n## Quickstart: Claude Code\n\n```bash\n# 1. Install the plugin\n/plugin marketplace add cloud-atlas-ai/superego\n/plugin install superego@superego\n\n# 2. Initialize in your project (installs binary if needed)\n/superego:init\n```\n\nThe `/superego:init` command detects if the binary is missing and offers to install it via Homebrew or Cargo.\n\n### Level Up: Strategic Alignment with Open Horizons\n\nSuperego provides metacognitive feedback—but feedback without strategic context is incomplete. For the full power of aligned AI development, combine superego with **[Open Horizons MCP](https://github.com/cloud-atlas-ai/oh-mcp-server)**:\n\n```bash\n# Add OH MCP marketplace\n/plugin marketplace add cloud-atlas-ai/oh-mcp-server\n/plugin install oh-mcp@oh-mcp-server\n\n# Configure\n/oh-mcp:setup\n```\n\n**What you get:**\n- Superego monitors *how* Claude works (metacognitive feedback)\n- OH MCP connects *why* Claude works (strategic alignment)\n- Every decision traces back to your missions and aims\n- Claude logs decisions directly to your strategic framework\n\nLearn more: [OH MCP Server](https://github.com/cloud-atlas-ai/oh-mcp-server) | [Open Horizons](https://app.openhorizons.me)\n\n### Slash Commands\n\n| Command | Description |\n|---------|-------------|\n| `/superego:init` | Initialize superego for this project (offers binary install if needed) |\n| `/superego:status` | Check if plugin, binary, and project are configured |\n| `/superego:prompt` | Manage prompts: list, switch (code/writing), show current |\n| `/superego:review` | On-demand review of changes (staged, pr, or file) |\n| `/superego:enable` | Enable superego (offers init if not set up) |\n| `/superego:disable` | Temporarily disable for current session |\n| `/superego:remove` | Remove superego from project |\n\n### Updating\n\n```bash\nclaude plugin marketplace update superego   # Refresh cache\nclaude plugin update superego@superego      # Update plugin\n# Restart Claude Code to apply\n```\n\n### Manual binary installation\n\nIf you prefer to install the `sg` binary manually instead of via `/superego:init`:\n\n```bash\n# Homebrew (macOS)\nbrew install cloud-atlas-ai/superego/superego\n\n# Cargo (cross-platform)\ncargo install superego\n\n# From source\ngit clone https://github.com/cloud-atlas-ai/superego.git\ncd superego && cargo install --path .\n```\n\nThen run `sg init` in your project to create `.superego/`.\n\n## Quickstart: OpenCode (Alpha)\n\nOpenCode support is in alpha. It uses a TypeScript plugin that runs entirely within OpenCode—no separate binary needed.\n\n```bash\n# 1. Download plugin to your project\nmkdir -p .opencode/plugin\ncurl -L -o .opencode/plugin/superego.js \\\n  https://github.com/cloud-atlas-ai/superego/releases/latest/download/index.js\n\n# 2. Start OpenCode and initialize\nopencode\n# Ask: \"use superego init\"\n```\n\nOr install globally:\n```bash\nmkdir -p ~/.config/opencode/plugin\ncurl -L -o ~/.config/opencode/plugin/superego.js \\\n  https://github.com/cloud-atlas-ai/superego/releases/latest/download/index.js\n```\n\nSee [opencode-plugin/README.md](opencode-plugin/README.md) for build-from-source instructions and detailed configuration.\n\n## Quickstart: OpenAI Codex CLI (Alpha)\n\nCodex support uses a skill that the agent can invoke at decision points.\n\n```bash\n# 1. Install the skill\nmkdir -p ~/.codex/skills/superego\ncurl -L -o ~/.codex/skills/superego/SKILL.md \\\n  https://raw.githubusercontent.com/cloud-atlas-ai/superego/main/codex-skill/SKILL.md\n\n# 2. In Codex, ask the agent to set up:\n#    \"$superego init\"\n```\n\nThe `$superego init` command installs the binary, creates `.superego/`, and adds AGENTS.md guidance automatically.\n\nAfter setup, the agent calls `$superego` at decision points to evaluate the conversation.\n\nSee [codex-skill/](codex-skill/) for details.\n\n## What You'll See\n\nWhen superego has feedback, Claude will continue working instead of stopping, addressing concerns like:\n- Scope drift from the current task\n- Missing error handling or edge cases\n- Approaches that don't align with project conventions\n- Incomplete implementations\n\nIf Claude disagrees with non-trivial feedback, it will escalate to you for a decision.\n\n## Debugging\n\n### Check if hooks are firing\n```bash\ntail -f .superego/hook.log\n```\n\nYou'll see:\n```\n[15:42:01] Hook fired\n[15:42:01] Running: sg evaluate-llm\n[15:42:03] Evaluation complete\n[15:42:03] Blocking with feedback: Consider error handling...\n```\n\n### Check superego state\n```bash\ncat .superego/state.json        # Last evaluation timestamp\ncat .superego/feedback          # Pending feedback (if any)\nls .superego/decisions/         # Audit trail of all feedback\n```\n\n### Manual evaluation\n```bash\nsg evaluate-llm --transcript-path ~/.claude/projects/<project>/transcript.jsonl\n```\n\n### Reset everything\n```bash\nsg reset    # Removes .superego/ directory\nsg init     # Fresh start\n```\n\n### Migrating from legacy hooks\n\nIf you previously used `sg init` before v0.4.0 (which created `.claude/hooks/superego/`):\n```bash\n/plugin marketplace add cloud-atlas-ai/superego\n/plugin install superego@superego\nsg migrate  # Remove legacy hooks\n```\n\n## Customization\n\n### Prompt Types\n\nSuperego ships with multiple prompts for different use cases:\n\n| Prompt | Description |\n|--------|-------------|\n| `code` | Metacognitive advisor for coding agents (default) |\n| `writing` | Co-author reviewer for writing and content creation |\n\nSwitch prompts via CLI or slash command:\n\n```bash\nsg prompt list              # Show available prompts\nsg prompt switch writing    # Switch to writing prompt\nsg prompt show              # Show current prompt info\n\n# Or in Claude Code:\n/superego:prompt switch writing\n```\n\nYour customizations are preserved when switching—each prompt type has its own backup (`prompt.<type>.md.bak`).\n\n### Custom Prompt Editing\n\nEdit `.superego/prompt.md` to customize what superego evaluates:\n- Add project-specific guidelines\n- Adjust strictness\n- Focus on particular concerns\n\n### Environment Variables\n\n- `SUPEREGO_DISABLED=1` - Disable superego entirely\n- `SUPEREGO_CHANGE_THRESHOLD=N` - Lines required to trigger PreToolUse evaluation (default: 20)\n\n## How It Works\n\n```\nSessionStart hook\n    └── Injects contract: \"SUPEREGO ACTIVE: critically evaluate feedback...\"\n\nPreToolUse hook (before any tool)\n    ├── Checks if periodic eval is due (time-based)\n    ├── For Edit/Write: checks change size (lines added/modified)\n    ├── If >= threshold (default 20): runs sg evaluate-llm with pending change\n    ├── If concerns: returns {\"decision\":\"block\",\"reason\":\"SUPEREGO FEEDBACK: ...\"}\n    │   └── Claude sees feedback, reconsiders the change\n    └── If small or clean: allows tool execution\n\nStop hook (when Claude tries to finish)\n    ├── Runs sg evaluate-llm\n    ├── Reads transcript since last evaluation\n    ├── Sends to LLM with superego prompt\n    ├── If concerns: returns {\"decision\":\"block\",\"reason\":\"SUPEREGO FEEDBACK: ...\"}\n    │   └── Claude sees feedback, continues working\n    └── If clean: allows stop\n\nPreCompact hook (before context truncation)\n    └── Same as Stop - evaluates before transcript is lost\n```\n\n## Commands\n\n```bash\nsg init              # Initialize superego (creates .superego/)\nsg migrate           # Remove legacy hooks (for users upgrading from < v0.4.0)\nsg reset             # Remove .superego/ directory\nsg prompt list       # Show available prompts\nsg prompt switch X   # Switch to prompt X (code, writing)\nsg prompt show       # Show current prompt info\nsg review            # Review staged changes (or uncommitted if nothing staged)\nsg review pr         # Review PR diff vs base branch\nsg review <file>     # Review changes in a specific file\nsg evaluate-llm      # Run LLM evaluation (called by hooks)\nsg has-feedback      # Check for pending feedback (exit 0=yes, 1=no)\nsg get-feedback      # Get and clear pending feedback\nsg --version         # Show version\n```\n\n## Requirements\n\n- Claude Code CLI\n- `jq` (for hook JSON parsing)\n- Rust toolchain (to build from source) or Homebrew (for pre-built binary)\n\n## License\n\nSource-available. See [LICENSE](LICENSE) for details.\n"
      },
      "plugins": [
        {
          "name": "superego",
          "source": "./plugin",
          "description": "Metacognitive advisor that monitors Claude Code and provides feedback",
          "version": "0.9.7",
          "author": {
            "name": "Cloud Atlas AI"
          },
          "categories": [],
          "install_commands": [
            "/plugin marketplace add open-horizon-labs/superego",
            "/plugin install superego@superego"
          ]
        }
      ]
    },
    {
      "name": "wm",
      "version": null,
      "description": "Working Memory plugin marketplace",
      "repo_full_name": "open-horizon-labs/wm",
      "repo_url": "https://github.com/open-horizon-labs/wm",
      "repo_description": "Working memory for AI coding assistants",
      "signals": {
        "stars": 3,
        "forks": 0,
        "pushed_at": "2026-01-24T04:15:11Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"name\": \"wm\",\n  \"owner\": {\n    \"name\": \"Cloud Atlas AI\",\n    \"email\": \"hello@cloudatlas.ai\"\n  },\n  \"metadata\": {\n    \"description\": \"Working Memory plugin marketplace\",\n    \"version\": \"1.0.0\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"wm\",\n      \"source\": \"./plugin\",\n      \"description\": \"Working memory - surfaces relevant context based on user intent\",\n      \"version\": \"0.3.1\",\n      \"author\": {\n        \"name\": \"Cloud Atlas AI\"\n      }\n    }\n  ]\n}\n",
        "README.md": "# wm — Working Memory for AI Coding Assistants\n\n**wm** automatically captures tacit knowledge from your coding sessions and surfaces relevant context for each new task. It's the memory layer that helps AI assistants learn how *you* work.\n\n**Supported platforms:**\n- **Claude Code** - Full support via plugin\n- **OpenAI Codex CLI** - Alpha support via skill (agent-invoked)\n\n## The Problem\n\nLLMs have amnesia. Every conversation starts fresh. The patterns you've established, the constraints you've discovered, the preferences you've revealed—all forgotten.\n\nYou end up repeating yourself:\n- \"Remember, we always use X pattern here\"\n- \"Don't forget the constraint about Y\"\n- \"I prefer Z approach for this kind of problem\"\n\n## The Solution\n\nwm runs silently in the background:\n\n1. **Extract**: After each conversation turn, captures tacit knowledge—the wisdom that emerges from *how* you work, not just what you say\n2. **Compile**: Before each new prompt, filters accumulated knowledge for relevance and injects it as context\n\nThe result: AI assistants that remember your patterns across sessions.\n\n## What Gets Captured\n\n**Tacit knowledge** is the unspoken wisdom in how someone works:\n\n- Rationale behind decisions (WHY this approach, not just WHAT was done)\n- Paths rejected and why (the judgment in pruning options)\n- Constraints discovered through friction\n- Preferences revealed by corrections\n- Patterns followed without stating\n\n**Not captured:**\n- What happened (\"Fixed X\", \"Updated Y\")\n- Explicit requests or questions\n- Tool outputs or code snippets\n- Content from CLAUDE.md (already explicit)\n\n## Quickstart: Claude Code\n\n### Prerequisites\n\n- [Claude Code](https://claude.com/code) CLI\n- [superego](https://github.com/cloud-atlas-ai/superego) (optional, but recommended for extraction triggers)\n\n### Option 1: Homebrew (macOS)\n\n```bash\nbrew tap cloud-atlas-ai/wm\nbrew install wm\n```\n\n### Option 2: Cargo (all platforms)\n\n```bash\ncargo install wm\n```\n\n### Option 3: From Source\n\n```bash\ngit clone https://github.com/cloud-atlas-ai/wm.git\ncd wm\ncargo install --path .\n```\n\n### Install the Claude Code Plugin\n\n```bash\nclaude plugin install wm\n```\n\n### Initialize in Your Project\n\n```bash\ncd /your/project\nwm init\n```\n\nThis creates a `.wm/` directory to store accumulated knowledge.\n\n## Quickstart: OpenAI Codex CLI (Alpha)\n\nCodex support uses agent skills that can be invoked at decision points. Most features work, but session auto-discovery is limited due to Codex's different session storage format.\n\n**What works:**\n- ✅ Manual knowledge capture/review (state.md, working_set.md)\n- ✅ Dive prep with context gathering\n- ✅ Compress and pause operations\n- ⚠️ Distill requires manual transcript paths (no auto-discovery yet)\n\n```bash\n# 1. Install the binary (choose one)\nbrew install cloud-atlas-ai/wm/wm           # macOS\ncargo install wm                            # All platforms\n\n# 2. Install the skills\nmkdir -p ~/.codex/skills\nln -s /path/to/wm/plugin ~/.codex/skills/wm\n\n# Or download agents individually:\nmkdir -p ~/.codex/skills/wm/agents\nBASE_URL=\"https://raw.githubusercontent.com/cloud-atlas-ai/wm/main/plugin/agents\"\ncurl -L -o ~/.codex/skills/wm/agents/dive-prep.md $BASE_URL/dive-prep.md\ncurl -L -o ~/.codex/skills/wm/agents/review.md $BASE_URL/review.md\ncurl -L -o ~/.codex/skills/wm/agents/distill.md $BASE_URL/distill.md\ncurl -L -o ~/.codex/skills/wm/agents/compress.md $BASE_URL/compress.md\ncurl -L -o ~/.codex/skills/wm/agents/pause.md $BASE_URL/pause.md\n```\n\n**Available Agent Skills:**\n\n| Skill | Support | When to Use |\n|-------|---------|-------------|\n| `$wm:dive-prep` | ✅ Full | Prepare focused work session with intent, context, and workflow |\n| `$wm:review` | ✅ Full | Review accumulated knowledge and current context |\n| `$wm:compress` | ✅ Full | Synthesize state.md to higher-level abstractions |\n| `$wm:pause` | ✅ Full | Pause/resume operations (extract, compile, or both) |\n| `$wm:distill` | ⚠️ Manual | Batch extract (requires manual transcript paths) |\n\n**Typical Workflows:**\n\n```bash\n# Session start - prepare dive context\n$wm:dive-prep --intent fix\n\n# Mid-session - review what wm knows\n$wm:review\n\n# Maintenance - compress accumulated knowledge\n$wm:compress\n\n# Sensitive work - pause extraction\n$wm:pause extract\n\n# Manual extraction from Codex session (since auto-discovery isn't supported yet)\n# Find your sessions:\nls ~/.codex/sessions/2026/01/*/rollout-*.jsonl\n# Extract from specific transcript:\nwm extract --transcript ~/.codex/sessions/2026/01/06/rollout-<timestamp>-<uuid>.jsonl\n```\n\n**Why limited session discovery?**\n\nCodex stores sessions in `~/.codex/sessions/YYYY/MM/DD/` with different naming and structure than Claude Code's `~/.claude/projects/<project-id>/`. Auto-discovery support for Codex sessions is tracked in [#11](https://github.com/cloud-atlas-ai/wm/issues/11).\n\n**Manual Commands:**\n\nAll CLI commands work normally: `wm init`, `wm show state`, `wm show working`, etc.\n\nSee [plugin/agents/](plugin/agents/) for detailed documentation on each skill.\n\n## Usage\n\nOnce installed, wm works automatically:\n\n1. **You write prompts** → wm injects relevant context\n2. **You work with Claude** → conversation happens normally\n3. **Turn ends** → wm extracts any tacit knowledge learned\n\n### Manual Commands\n\n```bash\n# View accumulated knowledge\nwm show state\n\n# View what context would be injected\nwm show working\n\n# List all sessions\nwm show sessions\n\n# View session-specific working set\nwm show working --session-id <id>\n\n# Manually trigger extraction\nwm extract\n\n# Manually compile for a specific intent\nwm compile --intent \"implement authentication\"\n\n# Compress state.md (synthesize to higher abstractions)\nwm compress\n```\n\n### Compressing Knowledge\n\nOver time, `state.md` accumulates knowledge and can grow unwieldy. The `compress` command distills it down by:\n\n- **Merging** related items into broader principles\n- **Abstracting** specific instances into general patterns\n- **Removing** obsolete or superseded knowledge\n- **Preserving** critical constraints and preferences\n\n```bash\nwm compress\n# Compressed: 42 → 18 lines (57% reduction)\n# Backup saved to .wm/state.md.backup\n```\n\nRun periodically when state feels bloated, not after every session.\n\n## Dive Sessions\n\nA **dive** is a focused work session with explicit grounding. The metaphor comes from scuba diving: you prep before you dive, you don't just splash in. You check your gear, review your plan, know your limits. The 30 seconds of setup prevents 30 minutes of drift.\n\n**No dive is too small for a dive prep.** Even a quick bug fix benefits from explicit intent. The act of stating what you're doing grounds you.\n\n### Terminology\n\n| Term | What It Is |\n|------|------------|\n| **dive** | A focused work session with explicit grounding |\n| **dive-prep** | The action of preparing a dive (`/dive-prep`, `wm dive-prep`) |\n| **dive pack** | A reusable context bundle stored in Open Horizons |\n| **dive context** | The manifest file for the current session (`.wm/dive_context.md`) |\n\n**Without a dive**, AI sessions often drift:\n- You start coding without clarity on the goal\n- Constraints surface mid-work (\"oh wait, we can't do that because...\")\n- Related knowledge sits unused because nothing surfaced it\n- The session ends without capturing what was learned\n\n**With a dive**, you start grounded:\n- **Intent** is explicit (fix, plan, explore, review, ship)\n- **Context** is curated (relevant knowledge, constraints, mission)\n- **Workflow** is suggested (what steps this intent typically follows)\n- **Focus** is documented (what specifically you're working on)\n\nThis isn't overhead—it's the 30 seconds of setup that saves 30 minutes of drift.\n\n### The `/dive-prep` Skill\n\nInvoke `/dive-prep` in Claude Code to prepare a focused work session:\n\n```bash\n/dive-prep                          # Interactive - prompts for intent\n/dive-prep --intent fix             # Fix a bug\n/dive-prep --intent plan            # Design an approach\n/dive-prep --intent explore         # Understand something\n/dive-prep --intent review          # Reflect on recent work\n/dive-prep --intent ship            # Get something deployed\n```\n\n**What it does:**\n\n1. **Detects context** — Reads CLAUDE.md, git state, existing `.wm/` knowledge\n2. **Checks for OH** — If [Open Horizons](https://github.com/cloud-atlas-ai/open-horizons) MCP is connected, offers to link to an endeavor for strategic context (missions, guardrails, learnings)\n3. **Asks for intent** — If not provided, prompts for what you're trying to accomplish\n4. **Builds workflow** — Suggests steps based on intent type\n5. **Writes manifest** — Creates `.wm/dive_context.md` with curated grounding\n\n**With Open Horizons (recommended):**\n```bash\n/dive-prep --intent fix --oh bd9d6ace\n```\n\nOH provides the strategic layer: *why* you're doing this (mission), *what not to do* (guardrails), and *what you've learned* (metis).\n\n**Without OH:**\n```bash\n/dive-prep --intent explore\n# Prompts: \"What are you exploring?\"\n```\n\nStill valuable—you get explicit intent, workflow guidance, and documented focus.\n\n### The `wm dive` Commands\n\nManage dive context directly:\n\n```bash\nwm dive load <pack-id>    # Load a pre-built dive pack from OH\nwm dive show              # Display current dive context\nwm dive clear             # Remove dive context\n```\n\n**Dive packs** are curated context bundles stored in Open Horizons. They're useful for recurring work patterns—load a pack instead of rebuilding context each time.\n\n**Configuration:**\n```bash\n# Set OH API key (required for wm dive load)\nexport OH_API_KEY=your-key\n\n# Or configure in ~/.config/openhorizons/config.json:\n{\n  \"api_key\": \"your-key\",\n  \"api_url\": \"https://app.openhorizons.me\"\n}\n```\n\n## Batch Distillation\n\nThe `distill` command extracts knowledge from all your Claude Code sessions at once, instead of per-turn extraction:\n\n```bash\nwm distill                    # Process all sessions\nwm distill --dry-run          # Preview what would be processed\nwm distill --force            # Re-extract even cached sessions\n```\n\n**How it works:**\n\n1. **Discovers sessions** — Finds all Claude Code transcripts for this project\n2. **Extracts incrementally** — Caches results, only processes new/changed sessions\n3. **Accumulates knowledge** — Writes raw extractions to `.wm/distill/raw_extractions.md`\n\n**When to use:**\n- Initial setup: extract knowledge from existing sessions\n- Periodic catchup: if per-turn extraction was paused\n- Audit: see what knowledge exists across all sessions\n\n**Output:**\n```\n.wm/distill/\n├── raw_extractions.md    # Accumulated knowledge from all sessions\n├── cache.json            # Extraction cache (enables incremental runs)\n└── errors.log            # Any extraction failures\n```\n\n## Pause and Resume\n\nTemporarily disable wm operations without uninstalling:\n\n```bash\nwm pause                  # Pause both extract and compile\nwm pause extract          # Pause only extraction\nwm pause compile          # Pause only context injection\n\nwm resume                 # Resume both operations\nwm resume extract         # Resume only extraction\nwm resume compile         # Resume only context injection\n\nwm status                 # Show current state\n```\n\n**When to use:**\n- **Sensitive work**: Pause extraction when working on confidential code\n- **Debugging**: Isolate issues by disabling one operation\n- **Performance**: Skip context injection on simple tasks\n\n### Debugging\n\n```bash\n# Watch hooks fire in real-time\ntail -f .wm/hook.log\n\n# Check what's being captured\ncat .wm/state.md\n```\n\n## How It Works\n\n### Architecture\n\n```\n┌─────────────────────────────────────────────────────────────┐\n│                    Claude Code Session                       │\n├─────────────────────────────────────────────────────────────┤\n│                                                             │\n│  [User Prompt]                                              │\n│       │                                                     │\n│       ▼                                                     │\n│  ┌─────────────────┐                                        │\n│  │ wm compile      │◄── Reads state.md                      │\n│  │ (hook)          │    Filters for relevance               │\n│  └────────┬────────┘    Injects as context                  │\n│           │                                                 │\n│           ▼                                                 │\n│  [Claude Processes with Context]                            │\n│           │                                                 │\n│           ▼                                                 │\n│  ┌─────────────────┐                                        │\n│  │ sg evaluate     │◄── Superego evaluates turn             │\n│  │ (stop hook)     │    Calls wm extract in background      │\n│  └────────┬────────┘                                        │\n│           │                                                 │\n│           ▼                                                 │\n│  ┌─────────────────┐                                        │\n│  │ wm extract      │◄── Reads transcript                    │\n│  │ (background)    │    Extracts tacit knowledge            │\n│  └─────────────────┘    Updates state.md                    │\n│                                                             │\n└─────────────────────────────────────────────────────────────┘\n```\n\n### Storage\n\n```\n.wm/\n├── state.md              # Accumulated tacit knowledge (the \"memory\")\n├── working_set.md        # Last compiled context\n├── hook.log              # Debug log\n└── sessions/\n    └── <session-id>/     # Per-session state (prevents cross-session bleed)\n```\n\n## Integration with Superego\n\nwm is designed to work with [superego](https://github.com/cloud-atlas-ai/superego), a metacognitive advisor for AI assistants. When both are installed:\n\n- **superego** evaluates Claude's work and provides feedback\n- **superego's stop hook** triggers wm extraction in the background\n- **wm** captures knowledge, superego captures concerns—complementary roles\n\nThey compose via shell calls with no shared state (Unix philosophy).\n\n## Configuration\n\n### Environment Variables\n\n| Variable | Purpose |\n|----------|---------|\n| `WM_DISABLED=1` | Skip all wm operations |\n| `CLAUDE_PROJECT_DIR` | Project root (auto-set by Claude Code) |\n\n### What to Expect\n\n- **First few sessions**: Little or no knowledge captured (normal)\n- **Over time**: Patterns accumulate in state.md\n- **Context injection**: Only relevant items surface per-task\n- **LLM costs**: Each extract/compile makes one LLM call (~$0.01-0.05)\n\n## Troubleshooting\n\n### Hooks not firing\n\n1. Check if wm is in PATH: `which wm`\n2. Check if `.wm/` exists in project\n3. Reinstall plugin after updates:\n   ```bash\n   claude plugin uninstall wm\n   claude plugin install ./plugin\n   # Restart Claude Code\n   ```\n\n### No knowledge being captured\n\n- Most sessions genuinely have no tacit knowledge worth capturing\n- Check `.wm/hook.log` for extraction activity\n- Verify superego is installed (it triggers extraction)\n\n### State.md has wrong content\n\n- System reminders (CLAUDE.md content) should be stripped\n- If seeing explicit instructions, check transcript reader is up to date\n\n## Releases\n\nReleases are automated via GitHub Actions. To release a new version:\n\n1. Create and push a git tag: `git tag v0.3.5 && git push origin v0.3.5`\n2. Create a GitHub release from the tag\n\nThis automatically publishes to:\n- **crates.io** — Rust CLI (`cargo install working-memory`)\n- **npm** — OpenCode plugin (`wm-opencode`)\n\n## License\n\nSource-available. See [LICENSE.md](LICENSE.md) for details.\n\n## Part of Cloud Atlas AI\n\nwm is part of the [Cloud Atlas AI](https://github.com/cloud-atlas-ai) ecosystem:\n\n- **[Open Horizons](https://github.com/cloud-atlas-ai/open-horizons)** — Strategic alignment platform\n- **[superego](https://github.com/cloud-atlas-ai/superego)** — Metacognitive advisor\n- **[wm](https://github.com/cloud-atlas-ai/wm)** — Working memory (this project)\n- **[oh-mcp-server](https://github.com/cloud-atlas-ai/oh-mcp-server)** — MCP bridge to Open Horizons\n"
      },
      "plugins": [
        {
          "name": "wm",
          "source": "./plugin",
          "description": "Working memory - surfaces relevant context based on user intent",
          "version": "0.3.1",
          "author": {
            "name": "Cloud Atlas AI"
          },
          "categories": [],
          "install_commands": [
            "/plugin marketplace add open-horizon-labs/wm",
            "/plugin install wm@wm"
          ]
        }
      ]
    }
  ]
}