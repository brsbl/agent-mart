{
  "author": {
    "id": "henghonglee",
    "display_name": "HengHong",
    "avatar_url": "https://avatars.githubusercontent.com/u/906931?v=4"
  },
  "marketplaces": [
    {
      "name": "henghonglee-claude-secrets",
      "version": null,
      "description": "Secure secrets management for Claude Code - inject secrets into CLI commands with user approval",
      "repo_full_name": "henghonglee/claude-secrets",
      "repo_url": "https://github.com/henghonglee/claude-secrets",
      "repo_description": "Secure secrets management for AI assistants",
      "signals": {
        "stars": 0,
        "forks": 0,
        "pushed_at": "2026-02-04T05:13:23Z"
      },
      "files": {
        ".claude-plugin/marketplace.json": "{\n  \"$schema\": \"https://anthropic.com/claude-code/marketplace.schema.json\",\n  \"name\": \"henghonglee-claude-secrets\",\n  \"description\": \"Secure secrets management for Claude Code - inject secrets into CLI commands with user approval\",\n  \"owner\": {\n    \"name\": \"henghonglee\"\n  },\n  \"plugins\": [\n    {\n      \"name\": \"claude-secrets\",\n      \"description\": \"Secure secrets management for CLI commands. Inject secrets, capture credentials from output, and manage permissions with encrypted storage.\",\n      \"version\": \"1.1.0\",\n      \"author\": {\n        \"name\": \"henghonglee\"\n      },\n      \"source\": {\n        \"source\": \"url\",\n        \"url\": \"https://github.com/henghonglee/claude-secrets.git\"\n      },\n      \"category\": \"security\",\n      \"homepage\": \"https://github.com/henghonglee/claude-secrets\"\n    }\n  ]\n}\n",
        ".claude-plugin/plugin.json": "{\n  \"name\": \"claude-secrets\",\n  \"description\": \"Secure secrets management for CLI commands. Inject secrets, capture credentials from output, and manage permissions.\",\n  \"version\": \"1.1.0\",\n  \"author\": {\n    \"name\": \"henghonglee\"\n  },\n  \"homepage\": \"https://github.com/henghonglee/claude-secrets\",\n  \"repository\": \"https://github.com/henghonglee/claude-secrets\",\n  \"license\": \"MIT\",\n  \"keywords\": [\"secrets\", \"security\", \"credentials\", \"vault\", \"mcp\"]\n}\n",
        "README.md": "# Claude Secrets\n\nA secure secrets management plugin for Claude Code and MCP clients. Enables AI assistants to safely handle credentials with user approval, automatic redaction, and secret capture from command output.\n\n## Features\n\n- **Secret Injection** - Use `{{SECRET_NAME}}` placeholders in commands to inject secrets\n- **Session-Based Permissions** - User approves secret access per-session with time-based expiry\n- **Output Redaction** - Automatically redacts known secrets and common patterns from output\n- **Secret Capture** - Extract secrets from command output (e.g., AWS session tokens) and store for future use\n- **LLM-Friendly Metadata** - Descriptions help future LLMs discover and use the right secrets\n- **macOS Menu Bar App** - Native notifications and dialogs for secret requests\n- **Encrypted Vault** - Secrets stored with Fernet encryption\n\n## Installation\n\n### One-Line Install (Recommended)\n\n```bash\ncurl -sSL https://raw.githubusercontent.com/henghonglee/claude-secrets/main/install.sh | bash\n```\n\nThis automatically:\n- Installs the package via pipx\n- Creates the encrypted vault\n- Installs the Claude Code plugin\n- Starts the menu bar app\n- Enables auto-start on login\n\n### Manual Installation\n\n```bash\npipx install git+https://github.com/henghonglee/claude-secrets.git\nccs init\n```\n\n### From Source\n\n```bash\ngit clone https://github.com/henghonglee/claude-secrets.git\ncd claude-secrets\npip install -e .\nccs init\n```\n\n## Quick Start\n\n```bash\n# Initialize vault + start menubar + enable auto-start on login\nccs init\n\n# Add a secret with description (helps LLMs understand what it's for)\nccs add AWS_ACCESS_KEY\n\n# Check status\nccs status\n```\n\nThe `init` command automatically:\n- Creates the encrypted vault\n- Installs the Claude Code plugin (via marketplace)\n- Starts the menu bar app\n- Enables auto-start on login (macOS)\n\n### Plugin-Only Install (if claude-secrets is already installed)\n\n```bash\nclaude plugin marketplace add henghonglee/claude-secrets\nclaude plugin install claude-secrets@henghonglee-claude-secrets\n```\n\n## Claude Code Commands\n\nWhen installed as a plugin:\n\n| Command | Description |\n|---------|-------------|\n| `/claude-secrets:list` | List all available secrets |\n| `/claude-secrets:add [NAME]` | Add a new secret |\n| `/claude-secrets:run <command>` | Run a command with secret injection |\n\n## MCP Configuration (Non-Plugin)\n\nFor Claude Desktop or other MCP clients, add to your configuration:\n\n```json\n{\n  \"mcpServers\": {\n    \"secrets\": {\n      \"command\": \"ccs\",\n      \"args\": [\"serve\"]\n    }\n  }\n}\n```\n\n## MCP Tools\n\n### `run_command`\n\nExecute a CLI command with secret injection and output redaction.\n\n```json\n{\n  \"command\": \"aws s3 ls --profile {{AWS_PROFILE}}\",\n  \"timeout\": 60,\n  \"capture\": [\n    {\n      \"path\": \"$.Credentials.SecretAccessKey\",\n      \"name\": \"AWS_SESSION_SECRET\",\n      \"description\": \"Temporary AWS secret key from STS. Use with AWS_SESSION_KEY_ID and AWS_SESSION_TOKEN.\",\n      \"expires_at\": \"2024-01-24T12:00:00Z\"\n    }\n  ]\n}\n```\n\n**Parameters:**\n- `command` - Command with `{{SECRET_NAME}}` placeholders\n- `timeout` - Timeout in seconds (default: 60)\n- `capture` - Extract secrets from JSON output:\n  - `path` - JSONPath expression (e.g., `$.Credentials.SecretAccessKey`)\n  - `name` - Name for the captured secret\n  - `description` - LLM-friendly description\n  - `expires_at` - ISO 8601 expiration timestamp\n- `redact_patterns` - Additional regex patterns to redact\n- `skip_builtin_patterns` - Skip built-in redaction patterns\n\n### `list_secrets`\n\nList available secrets with their descriptions.\n\n```json\n{\n  \"tag\": \"aws\"\n}\n```\n\nReturns:\n```json\n{\n  \"secrets\": [\n    {\n      \"name\": \"AWS_ACCESS_KEY\",\n      \"description\": \"AWS access key for production account\",\n      \"expires_at\": null\n    }\n  ]\n}\n```\n\n### `request_secret`\n\nRequest the user to add a missing secret via the menu bar app.\n\n```json\n{\n  \"name\": \"GITHUB_TOKEN\",\n  \"description\": \"Personal access token for GitHub API. Needs repo and workflow scopes.\"\n}\n```\n\nThe menu bar app will show a native macOS dialog prompting the user to enter the secret value.\n\n### `get_permissions`\n\nGet current session permission status for secrets.\n\n## How It Works\n\n1. **Client LLM calls `list_secrets`** to discover available secrets\n2. **LLM constructs command** with `{{SECRET_NAME}}` placeholders\n3. **User approves** secret access when prompted (cached for session)\n4. **Server injects secrets** and executes command\n5. **Output is redacted** before returning to LLM\n6. **Captured secrets** are stored with LLM-provided descriptions for future use\n\n## Menu Bar App (macOS)\n\nThe menu bar app provides:\n- Server status indicator\n- List of stored secrets with expiry times\n- Native dialogs for secret requests\n- Notifications when secrets are captured or expiring\n\nStart with:\n```bash\nclaude-secrets-menubar\n```\n\n## Security Model\n\n- **Encrypted storage** - Vault encrypted with Fernet (AES-128-CBC)\n- **Permission prompts** - User must approve each secret's use\n- **Session expiry** - Permissions auto-expire (default: 1 hour)\n- **Output redaction** - Secrets automatically removed from command output\n- **Audit logging** - All secret access logged to `~/.claude-secrets/audit.log`\n\n## Uninstalling\n\n### One-Line Uninstall\n\n```bash\ncurl -sSL https://raw.githubusercontent.com/henghonglee/claude-secrets/main/uninstall.sh | bash\n```\n\n### Manual Uninstall\n\n```bash\nccs uninstall      # Stops menubar, removes plugin, keeps secrets\npipx uninstall claude-secrets\n```\n\n### Delete Everything (including secrets)\n\n```bash\nccs uninstall --delete-vault\npipx uninstall claude-secrets\n```\n\nYour secrets are preserved by default in `~/.claude-secrets/` so you can reinstall later without losing them.\n\n## Plugin Structure\n\n```\nclaude-secrets/\n├── .claude-plugin/\n│   ├── plugin.json          # Plugin manifest\n│   └── marketplace.json     # Marketplace manifest (for plugin distribution)\n├── .mcp.json                 # MCP server configuration\n├── skills/\n│   └── secrets/\n│       └── SKILL.md         # Teaches Claude when/how to use secrets\n├── commands/\n│   ├── list.md              # /claude-secrets:list command\n│   ├── add.md               # /claude-secrets:add command\n│   └── run.md               # /claude-secrets:run command\n└── src/\n    └── claude_secrets/      # Python package\n```\n\n## Configuration\n\nConfiguration stored at `~/.claude-secrets/config.json`:\n\n```json\n{\n  \"session_timeout\": 3600\n}\n```\n\nSet values with:\n```bash\nccs config set session_timeout 7200\n```\n\n## Development\n\n```bash\n# Install dev dependencies\npip install -e \".[dev]\"\n\n# Run tests\npytest\n\n# Run with coverage\npytest --cov=claude_secrets\n\n# Test plugin locally\nclaude --plugin-dir ./\n```\n\n## License\n\nMIT\n"
      },
      "plugins": [
        {
          "name": "claude-secrets",
          "description": "Secure secrets management for CLI commands. Inject secrets, capture credentials from output, and manage permissions with encrypted storage.",
          "version": "1.1.0",
          "author": {
            "name": "henghonglee"
          },
          "source": {
            "source": "url",
            "url": "https://github.com/henghonglee/claude-secrets.git"
          },
          "category": "security",
          "homepage": "https://github.com/henghonglee/claude-secrets",
          "categories": [
            "security"
          ],
          "install_commands": [
            "/plugin marketplace add henghonglee/claude-secrets",
            "/plugin install claude-secrets@henghonglee-claude-secrets"
          ]
        }
      ]
    }
  ]
}